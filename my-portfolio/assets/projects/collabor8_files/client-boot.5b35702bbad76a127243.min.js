(()=>{var Al=Object.defineProperty;var u=(j,p)=>Al(j,"name",{value:p,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["client-boot"],{983107878:(j,p,e)=>{j.exports=e.p+"ava_0002-192-0ddd598.png"},2256285620:(j,p,e)=>{j.exports=e.p+"ava_0002-24-f65dddc.png"},6906793909:(j,p,e)=>{j.exports=e.p+"ava_0002-32-798f043.png"},1060768686:(j,p,e)=>{j.exports=e.p+"ava_0002-48-d3ba4ec.png"},2979422297:(j,p,e)=>{j.exports=e.p+"ava_0002-72-c702398.png"},3224273568:(j,p,e)=>{j.exports=e.p+"ava_0022-192-0cc433a.png"},2316786074:(j,p,e)=>{j.exports=e.p+"ava_0022-24-21468d4.png"},3708998647:(j,p,e)=>{j.exports=e.p+"ava_0022-32-7779579.png"},5098468056:(j,p,e)=>{j.exports=e.p+"ava_0022-48-93db11d.png"},4923972147:(j,p,e)=>{j.exports=e.p+"ava_0022-72-5a52d67.png"},7752974446:(j,p,e)=>{j.exports=e.p+"emoji_missing-39b2f0a.png"},5908540923:(j,p,e)=>{j.exports=e.p+"No_Background-ad3fcdb.png"},4553218033:(j,p,e)=>{j.exports=e.p+"beach-preview-33d7acf.jpg"},9679390338:(j,p,e)=>{j.exports=e.p+"beach-33258eb.jpg"},7000154057:(j,p,e)=>{j.exports=e.p+"gym-preview-cfff9c8.jpg"},553949882:(j,p,e)=>{j.exports=e.p+"gym-4d948fc.jpg"},9631995895:(j,p,e)=>{j.exports=e.p+"home-preview-8baaf03.jpg"},3342291988:(j,p,e)=>{j.exports=e.p+"home-9e29930.jpg"},1779488764:(j,p,e)=>{j.exports=e.p+"huddle-in-thread-da71b0e.png"},3607863955:(j,p,e)=>{j.exports=e.p+"living_room-preview-1b54428.jpg"},5738074488:(j,p,e)=>{j.exports=e.p+"living_room-a4fba85.jpg"},7485089530:(j,p,e)=>{j.exports=e.p+"office-preview-de46de4.jpg"},5475210953:(j,p,e)=>{j.exports=e.p+"office-98668ce.jpg"},8514307482:(j,p,e)=>{j.exports=e.p+"remote_work-preview-5fbbc32.jpg"},4136357865:(j,p,e)=>{j.exports=e.p+"remote_work-f8cd791.jpg"},7234375712:(j,p,e)=>{j.exports=e.p+"tokyo_sight-preview-3554da9.jpg"},1672115571:(j,p,e)=>{j.exports=e.p+"tokyo_sight-285d851.jpg"},2527471159:(j,p,e)=>{j.exports=e.p+"slack-salesforce-211570d.png"},7972463975:(j,p,e)=>{j.exports=e.p+"slack-salesforce@2x-06b5868.png"},2301861866:(j,p,e)=>{j.exports=e.p+"slack_logo-ebd02d1.svg"},9994038664:(j,p,e)=>{j.exports=e.p+"slack_logo_white_text-3cffbf2.svg"},3431559584:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_1024-9020761.png"},2200759559:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_192-fc3f24d.png"},8390767423:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_20-e2d1dcb.png"},1957386787:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_24-e726b64.png"},4245237474:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_32-176771b.png"},7523979550:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_36-d921f9d.png"},7272988726:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_360-29e9a8a.png"},77360885:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_48-8220eaf.png"},2261459203:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_512-8ab1a43.png"},451984622:(j,p,e)=>{j.exports=e.p+"slackbot_fancy_72-9db8807.png"},7428983508:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_1024-f558ba5.png"},669259003:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_192-a0b99ba.png"},4165874747:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_20-96acbec.png"},1023719767:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_24-2246c7b.png"},3710970638:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_32-8a50a23.png"},4814900690:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_36-a7f6cbd.png"},7331486018:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_360-1cb4740.png"},7183565897:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_48-fdccd8c.png"},1001408479:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_512-955a74f.png"},1889110914:(j,p,e)=>{j.exports=e.p+"slackbot_frowny_72-6d65a0f.png"},9948433110:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_1024-b58a548.png"},4948097913:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_192-e5cd9a1.png"},350135845:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_20-00a116e.png"},474239361:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_24-9a05991.png"},1302153452:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_32-44a4c24.png"},9825918216:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_36-c6ff0eb.png"},5908867676:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_360-7309dbd.png"},3333214639:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_48-9906623.png"},2295488157:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_512-dcb310c.png"},5156772208:(j,p,e)=>{j.exports=e.p+"slackbot_neutral_72-79b9eaa.png"},4063699741:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_1024-337ff51.png"},9241168512:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_192-3c6a8ea.png"},3963460214:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_20-5bfbe5a.png"},9267813754:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_24-d519530.png"},2981982679:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_32-5479e94.png"},9833689275:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_36-6982f8c.png"},4840951141:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_360-aff835a.png"},9777215928:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_48-7871f8b.png"},7129884748:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_512-c8291ff.png"},9602720019:(j,p,e)=>{j.exports=e.p+"slackbot_sad_surprise_72-ffaf19c.png"},5672691263:j=>{j.exports={container:"container__oDwNj",primaryIcon:"primaryIcon__aDIDO",secondaryIcon:"secondaryIcon__KuIYv"}},7573583373:j=>{j.exports={proBadge:"proBadge__a6OQu",container:"container__lJGtV",alertBanner:"alertBanner__xNhoq",cta:"cta__tEXdP"}},3416652175:j=>{j.exports={spaceNameContainer:"spaceNameContainer__Up4ES",spaceName:"spaceName__e2eNG",notificationName:"notificationName__PLxJo",notificationList:"notificationList__K7YI_",formError:"formError__RF0wt",textArea:"text-area__GqSis",alert:"alert__gmI86",alertText:"alertText__WNqBZ"}},397939223:j=>{j.exports={dispatcherViewer:"dispatcherViewer__MqLHN",container:"container__JbqvN",dispatcherViewerIcon:"dispatcherViewerIcon__TTCBH",xDispatcher__viewer_iconPulse:"x-dispatcher__viewer_icon--pulse__rzHrs",dispatcherViewerDetails:"dispatcherViewerDetails__HF2Tz"}},3346098136:(j,p,e)=>{"use strict";e.d(p,{A:()=>I,T:()=>m});var t=e(3134334389),n=e(9391594207),s=e(2322735331),a=e(735940183),c=e(6839188756),o=e(3677514771),i=e(8847766420),l=e(581167618),_=e(5536692738),d=e(6117529990);const r=new a.Ay("enterprise_calls");var m;(function(T){T.GLOBAL="GLOBAL",T.US="US"})(m||(m={}));const h=[{label:r.t("Global",{fallbackHash:"5f1184f7df96c5928092ad9c6b550699bf887826",fallbackHashNs:"enterprise_dashboard"}),value:m.GLOBAL},{label:r.t("US",{fallbackHash:"aa3093554472fd113135bed5b63e12f84c2e9fe8",fallbackHashNs:"enterprise_dashboard"}),value:m.US}];let v=u(class extends t.Component{render(){const{appsState:f,featureCallsLocationLock:g,isLockedByOrgAdmin:M,selectedCallLocation:A,isFreeTeam:O}=this.props,D=f&&f.video&&Object.keys(f.video).find(W=>W==="A00");if(!g||!D||O)return null;const E=h.find(W=>W.value===A),C=g?r.t("Slack Calls will be restricted and routed through selected regions only."):"Slack Calls will be restricted and routed through selected regions only.",S=g?r.t("Call location options"):"Call location options",b=g?r.t("Limiting to certain regions may reduce call performance or block joining calls in some circumstances."):"Limiting to certain regions may reduce call performance or block joining calls in some circumstances.",k=g?r.t("Slack calls are restricted by Org admin"):"Slack calls are restricted by Org admin";return t.createElement(t.Fragment,null,t.createElement("div",{"data-qa":"calls-location-container",className:"border_top padding_top_100 p-calls_location_lock__container"},t.createElement("span",{className:"p-calls_location_lock__title"},g?r.t("Calls location"):"Calls location"),t.createElement("span",{className:"p-calls_location_lock__description"},C),t.createElement("div",{className:"p-calls_location_lock__options_container"},t.createElement(_.Ay,{className:"p-calls_location_lock__options",size:"medium",isDisabled:M,options:h,selectedOption:E,onOptionSelected:this.handleOptionSelected,ariaLabel:S}),M&&t.createElement("span",{className:"p-calls_location_lock__options_disable_reason"},k))),A===m.US&&t.createElement(l.Ay,{type:l.QE.boxed,level:l.A_.warning,icon:"warning",align:l.AO.left,className:"p-calls_location_lock__alert"},t.createElement("span",null,b)))}handleOptionSelected(f){this.props.setSelectedCallLocation(f.value)}constructor(f){super(f),(0,s.v)(this,["handleOptionSelected"])}},"CallsRegionLockOptions");v.displayName="CallsRegionLockOptions";const y=u(T=>{const f=(0,i.jV)(T);return{isFreeTeam:!(0,c.qR)((0,o.H7)(T))&&!f,featureCallsLocationLock:(0,d.XY)(T)}},"mapStateToProps"),I=(0,n.N)(y)(v)},1223723593:(j,p,e)=>{"use strict";e.d(p,{wl:()=>_e,JG:()=>x,uy:()=>ue,bM:()=>oe,Ox:()=>me,A9:()=>G,fD:()=>ge});var t=e(3134334389),n=e(9391594207),s=e(3783303734),a=e(9113979368),c=e(3867135795),o=e(45851552),i=e(1649982175),l=e(6244014364),_=e(5795074931),d=e(8462077367),r=e(7138682671),m=e(3165300465),h=e(581167618),v=e(1610251172),y=e(3989454579),I=e(1743656885),T=e(5597672932),f=e(6117529990);const g=u(F=>!(0,f.BD)(F),"isOrgCallsAppsSettingsEnabled");var M=e(766806),A=e(56548687);const O=u(F=>{let{callsApps:L,allowCalls:K,clogger:B,action:Q,stepVariant:q}=F;const le={allow_calls:K};L&&L.video&&L.video.length>0&&(le.video_call_app_ids=L.video.map(Te=>Te.id)),L&&L.audio&&L.audio.length>0&&(le.audio_call_app_ids=L.audio.map(Te=>Te.id)),L&&L.profile_field_options&&L.profile_field_options.length>0&&(le.profile_field_option_ids=L.profile_field_options.map(Te=>Te.id)),B.track(l.EventId.CALLS_ADMIN_PHONE_INTEGRATION,{...le,contexts:{ui_context:{step:l.UiStep.CALLS_ADMIN_SAVE_CALLS_APPS,action:Q,entry_point:"calls-workspace-admin",step_variant:q}}})},"clogCallsApps"),D=u(F=>{let{clogger:L}=F;L.track(l.EventId.CALLS_ADMIN_PHONE_INTEGRATION,{contexts:{ui_context:{step:l.UiStep.CALLS_ADMIN_SAVE_CALLS_APPS,action:l.UiAction.LEARN_MORE,is_primary_cta:!0,ui_properties:{element_type:l.ElementType.LINK,element_name:"calls-admin-save-multiple-call-apps"}}}})},"clogLinkToPaidPlans");var E=e(1031947056);const C=(0,E.Ay)("Clog a standardized click event when a workspace setting is saved",(F,L,K)=>{let{eventId:B,uiStep:Q,stepVariant:q}=K;(0,A.e)({getState:L}).track(B,{contexts:{ui_context:{ui_step:Q,step_variant:q,ui_properties:{element_type:l.ElementType.BUTTON,element_name:"submit_button"},action:l.UiAction.CLICK,is_primary_cta:!0}}})});C.meta={name:"createThunk",key:"createThunkclogWorkspaceSettingSubmit",description:"Clog a standardized click event when a workspace setting is saved"};const S=C;var b=e(3677514771),k=e(6839188756),W=e(6323355797),N=e(980293773),V=e(735940183),R=e(3346098136),P=e(462591818);const z=new V.Ay("calls_admin"),$="only_available_for_paid_teams";var x;(function(F){F.Video="video",F.Audio="audio",F.ProfileFieldOptions="profile_field_options"})(x||(x={}));const Y=u(F=>{let{type:L,app:K,isChecked:B,onChangeCallApp:Q,isLocked:q}=F;const le=(0,t.useCallback)(()=>Q(L,K.id),[Q,L,K]),Te=`${L}_${K.id}`;return t.createElement(r.A,{text:K.name,type:"inline",cursor:"pointer"},t.createElement(y.A,{id:Te,name:K.name,checked:B,onChange:le,disabled:q,"data-qa":Te}))},"AppCheckbox");Y.displayName="AppCheckbox";const ne=u(F=>{let{appsState:L,isLocked:K,type:B}=F;return!K||!L?!1:B===x.Video&&(0,s.A)(L.video)>0&&(0,s.A)(L.audio)===0||(B===x.Audio&&(0,s.A)(L.audio)>0&&(0,s.A)(L.video))===0},"disableTypeCheckbox"),re=u(F=>{let{appsState:L,isLocked:K,appId:B,type:Q}=F;if(!K||!L)return!1;const q=L.video?Object.keys(L.video):[],le=L.audio?Object.keys(L.audio):[],Te=q.length+le.length;if(B&&Te===1){let Ie,De;return q.length===1?(Ie=q[0],De=x.Video):le.length===1&&(Ie=le[0],De=x.Audio),B===Ie&&Q===De}return!1},"disableAppCheckbox"),_e=u(F=>{let{type:L,sectionTitle:K,appsState:B,installedCallApps:Q,onChangeCallType:q,onChangeCallApp:le,isLocked:Te,dataQa:Ie}=F;if(!Q||!B||!Q[L])return null;const De=`enable_${L}_calls`;return t.createElement("div",{className:`p-calls_workspace_settings__${L}_container`,"data-qa":Ie},t.createElement(r.A,{text:K,type:"inline",cursor:"pointer"},t.createElement(y.A,{checked:!(0,a.A)(B[L]),id:De,name:De,onChange:q,disabled:ne({appsState:B,isLocked:Te,type:L})})),t.createElement("p",{className:"p-calls_workspace_settings__options_title"},z.t("Calling options:")),t.createElement("div",{className:"p-calls_workspace_settings__calls_apps"},[...Q[L]].map(pe=>t.createElement(Y,{app:pe,isChecked:(0,c.A)(B[L],pe.id),key:`${L}_${pe.id}`,onChangeCallApp:le,type:L,isLocked:re({appsState:B,isLocked:Te,appId:pe.id,type:L})}))))},"CallSection");_e.displayName="CallSection";const G=u(F=>{let{installedCallApps:L,appsState:K,appId:B,type:Q,setAppsState:q}=F;if(!L||!K)return;const le={...K[Q]};if((0,c.A)(le,B))delete le[B],q({...K,[Q]:le});else{const Te=(0,o.A)(L[Q],Ie=>Ie.id===B);Te>-1&&(le[B]=Te,q({...K,[Q]:le}))}},"toggleCallApp"),ge=u(F=>{let{installedCallApps:L,appsState:K,type:B,setAppsState:Q}=F;if(!(!K||!L))if(!(0,a.A)(K[B]))Q({...K,[B]:{}});else{var q;const le={};(q=L[B])===null||q===void 0||q.forEach((Te,Ie)=>{le[Te.id]=Ie}),Q({...K,[B]:le})}},"toggleCallType"),oe=u((F,L)=>{const K={video:{},audio:{},profile_field_options:{}};return!L||!F||[x.Video,x.Audio,x.ProfileFieldOptions].forEach(B=>{L[B]&&[...L[B]].forEach(q=>{const le=(0,o.A)(F[B],Te=>Te.id===q.id);le>-1&&(K[B][q.id]=le)})}),K},"reduceTeamPrefApps"),me=u(function(){let{installedCallApps:F,appsState:L}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const K={video:[],audio:[]};return!F||!L||[x.Video,x.Audio].forEach(B=>{if(F[B]){const Q=[...F[B]],q=L[B];Q.forEach(le=>{if((0,c.A)(q,le.id)){var Te;(Te=K[B])===null||Te===void 0||Te.push((0,i.A)(le,"preselected"))}})}}),K},"setCallsAppsPayloadToSave"),ue=u(F=>{if(!F||!F.video)return;const L=F.video.findIndex(K=>K.id===P.rq);L>=0&&F.video.splice(L,1)},"filterNativeCallsApp"),ae=u(F=>{let{isOpen:L,closeModal:K,errorMessage:B,buttonLabel:Q}=F;return t.createElement(N.dW,{centered:!0,isOpen:L,closeModal:K},t.createElement(N.$m,{className:"p-calls_workspace_settings__error_modal"},t.createElement(N.qf,null,t.createElement("p",null,B))),t.createElement(N.jl,null,t.createElement(N.ox,null,t.createElement(N.s_,{type:"outline",onClick:K},Q))))},"ErrorModal");ae.displayName="ErrorModal";const he=u(F=>{let{installedCallApps:L,teamPrefCallsApps:K,setMultipleTeamPrefsByApi:B,clogWorkspaceSettingSubmit:Q,isLocked:q,isCallsSelectorDisabled:le,clogger:Te,isOrgCallsAppsSettingsEnabled:Ie,team:De,isCallsLocationLockedByOrgAdmin:pe,callsLocationLocked:fe}=F;const[Z,se]=(0,t.useState)(!1),[Ae,Ce]=(0,t.useState)(""),Le=z.t("Save"),Ue=z.t("Saved"),Pe=z.t("Sorry! Something went wrong. Please try again."),He=z.t("Allow third-party calls in Slack"),Qe=z.t("Allow phone number calls in Slack (only in direct messages)"),lt=z.t("Ok"),qe=z.t("Sorry, call selection is currently managed by your organization admin."),ct=z.rt("First install a <a>calling app from our app directory</a> then come back here to enable it as a default calling app.",{},Xt=>{let{text:xt}=Xt;return t.createElement(I.A,{articleId:208492868},xt)}),tt=(0,t.useCallback)(()=>{D({clogger:Te}),(0,k.gC)(De,(0,W.hZ)({entryPoint:"calls-admin-workspace-settings"}))},[Te,De]),it=z.rt("Sorry, this feature is only available to <a>paid teams</a>.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087"},Xt=>{let{text:xt}=Xt;return t.createElement("a",{href:"#",onClick:tt,"data-qa":"paid_plan_page_link"},xt)}),Ge=K?oe(L,K):{video:{},audio:{},profile_field_options:{}},[We,xe]=(0,t.useState)(Ge),[ze,mt]=(0,t.useState)(!1),[pt,It]=(0,t.useState)(!1),bt=fe&&fe.length>0?R.T.US:R.T.GLOBAL,[gt,ht]=(0,t.useState)(bt);(0,t.useEffect)(()=>{const Xt=oe(L,K);xe(Xt)},[xe,L,K]);const Zt=(0,t.useCallback)(Xt=>{It(!1),ge({installedCallApps:L,appsState:We,type:Xt,setAppsState:xe})},[L,We,xe]),rn=(0,t.useCallback)(()=>Zt(x.Video),[Zt]),zt=(0,t.useCallback)(()=>Zt(x.Audio),[Zt]),In=(0,t.useCallback)(()=>se(!1),[se]),cn=(0,t.useCallback)((Xt,xt)=>{It(!1),G({installedCallApps:L,appsState:We,appId:xt,type:Xt,setAppsState:xe})},[L,We,xe]),Jt=(0,t.useCallback)(Xt=>{ht(Xt),It(!1)},[ht]),dn=u(()=>{mt(!0),Q({eventId:l.EventId.ADMIN_TEAM_SETTINGS,uiStep:"change_enable_calls"});const Xt=!(0,a.A)(We.video)||!(0,a.A)(We.audio),xt=me({installedCallApps:L,appsState:We}),en={calls_apps:xt};(0,k.r7)(De)||(en.allow_calls=Xt),pe||(en.calls_locations=gt===R.T.US?[gt]:[]),B({prefs:en}).then(()=>{It(!0),O({callsApps:xt,allowCalls:Xt,clogger:Te,action:l.UiAction.SAVE})}).catch(un=>{var yn;se(!0),(un==null||(yn=un.data)===null||yn===void 0?void 0:yn.error)===$?(Ce(it),O({callsApps:xt,allowCalls:Xt,clogger:Te,action:l.UiAction.ERROR,stepVariant:$})):(Ce(Pe),O({callsApps:xt,allowCalls:Xt,clogger:Te,action:l.UiAction.ERROR}))}).finally(()=>mt(!1))},"onSubmit"),sn=L&&(L.video&&L.video.length>0||L.audio&&L.audio.length>0);return t.createElement("div",{key:"calls_workspace_settings",className:"p-calls_workspace_settings"},le&&Ie?t.createElement(h.Ay,{type:"boxed",level:"info",icon:"info",align:"left","data-qa":"org_calls_apps_alert_selector_disabled"},t.createElement("span",null,qe)):t.createElement(t.Fragment,null,!sn&&t.createElement(h.Ay,{type:"boxed",level:"info",icon:"info",align:"left"},t.createElement("span",null,ct)),t.createElement("div",{className:"p-calls_workspace_settings__call_options"},L&&L.video&&L.video.length>0&&t.createElement(_e,{type:x.Video,sectionTitle:He,appsState:We,installedCallApps:L,onChangeCallType:rn,onChangeCallApp:cn,isLocked:q}),L&&L.audio&&L.audio.length>0&&t.createElement(_e,{type:x.Audio,sectionTitle:Qe,appsState:We,installedCallApps:L,onChangeCallType:zt,onChangeCallApp:cn,isLocked:q})),t.createElement(R.A,{appsState:We,isLockedByOrgAdmin:pe,selectedCallLocation:gt,setSelectedCallLocation:Jt}),t.createElement(ae,{closeModal:In,isOpen:Z,errorMessage:Ae,buttonLabel:lt}),sn&&t.createElement(m.A,{onClick:dn,loading:ze,"data-qa":"call_save_button"},pt&&t.createElement(v.A,{type:"check-circle-o",className:"p-calls_workspace_settings_check_icon"}),pt?Ue:Le)))},"CallsWorkspaceSettings");he.displayName="CallsWorkspaceSettings";const ce=u(F=>{const L=(0,_.tV)(F,"calls_apps");ue(L);const K=(0,T.x)(F,"calls_apps"),B=(0,M.SI)(F,"calls_locations");return{installedCallApps:L,teamPrefCallsApps:K,clogger:(0,A.e)({state:F}),isOrgCallsAppsSettingsEnabled:g(F),team:(0,b.H7)(F),isCallsLocationLockedByOrgAdmin:!!B&&B.length>0,callsLocationLocked:(0,T.x)(F,"calls_locations")}},"mapStateToProps"),ee={setMultipleTeamPrefsByApi:d.hz,clogWorkspaceSettingSubmit:S},J={toggleCallApp:G,toggleCallType:ge,AppCheckbox:Y,reduceTeamPrefApps:oe,setCallsAppsPayloadToSave:me,disableTypeCheckbox:ne,disableAppCheckbox:re},X=(0,n.N)(ce,ee)(he)},6909784049:(j,p,e)=>{"use strict";e.d(p,{o:()=>it});var t=e(3134334389),n=e(9391594207),s=e(166097325),a=e(3300324857),c=e(462591818),o=e(8869734951),i=e(1641606663);function l(){return l=Object.assign||function(Ge){for(var We=1;We<arguments.length;We++){var xe=arguments[We];for(var ze in xe)Object.prototype.hasOwnProperty.call(xe,ze)&&(Ge[ze]=xe[ze])}return Ge},l.apply(this,arguments)}u(l,"_extends");let _=u(class extends t.PureComponent{componentDidMount(){var We;(We=this.context.windowRef.deref())===null||We===void 0||We.document.addEventListener("mouseup",this.onMouseUp)}componentWillUnmount(){var We;this.isDragging&&this.onMouseUp(),(We=this.context.windowRef.deref())===null||We===void 0||We.document.removeEventListener("mouseup",this.onMouseUp)}onMouseDown(We){var xe;We.button===0&&(this.isDragging=!0,(xe=this.context.windowRef.deref())===null||xe===void 0||xe.document.addEventListener("mousemove",this.onMouseMove),this.props.onDragStart(We))}onMouseMove(We){We.button===0&&this.isDragging&&this.props.onDragMove(We)}onMouseUp(We){if(We&&We.button!==0)return;const xe=this.isDragging;if(this.isDragging=!1,xe){var ze;(ze=this.context.windowRef.deref())===null||ze===void 0||ze.document.removeEventListener("mousemove",this.onMouseMove),this.props.onDragEnd(We)}}render(){const{children:We,refToForward:xe,onDragStart:ze,onDragMove:mt,onDragEnd:pt,...It}=this.props,bt=t.Children.only(this.props.children);return t.cloneElement(bt,{...It,onMouseDown:ht=>this.onMouseDown(ht),ref:(0,o.N)(xe,bt)})}constructor(We){super(We),this.isDragging=!1,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this)}},"BaseDragTarget");_.displayName="BaseDragTarget",_.contextType=i.M;const d=t.forwardRef((Ge,We)=>t.createElement(_,l({},Ge,{refToForward:We})));var r=e(387328355),m=e(1031947056),h=e(2825968873);const v=(0,h.tZ)("USER-ACTIONS"),y=(0,m.Ay)("Logs user interaction with call window",(Ge,We,xe)=>{v.info(xe)});y.meta={name:"createThunk",key:"createThunklogUserAction",description:"Logs user interaction with call window"};var I=e(1975685771),T=e(8405076696);function f(Ge){M=$(me(Ge))}u(f,"startCurve");function g(Ge){const We=me(Ge),xe=x(M,We);return xe.update_status==W.SUCCESS?xe:x(M,We)}u(g,"addToCurve");let M;const A=2,O=9,D=9,E=50,C=80,S=1,b=!0,k=!0,W={SUCCESS:1,FAIL_CORNER:2,FAIL_MAXED:3},N=u(()=>({segments:[],vdmap:[]}),"initCurve"),V=u((Ge,We)=>({c0:{x:Ge,y:We},c1:{x:Ge,y:We},c2:{x:Ge,y:We},c3:{x:Ge,y:We}}),"initCurveSegment"),R=u(Ge=>Ge.segments[Ge.segments.length-1],"getLastSegment"),P=u(Ge=>Ge.c3,"getLastPoint"),z=u(function(Ge){return{c0:{x:Ge.c0.x,y:Ge.c0.y},c1:{x:Ge.c1.x,y:Ge.c1.y},c2:{x:Ge.c2.x,y:Ge.c2.y},c3:{x:Ge.c3.x,y:Ge.c3.y},constrain_to:Ge.constrain_to==null?void 0:{x:Ge.constrain_to.x,y:Ge.constrain_to.y},error:Ge.error||0,update_status:Ge.update_status}},"copySegment"),$=u(function(Ge){let{x:We,y:xe}=Ge;const ze=N();return ze.segments.push(V(We,xe)),ze},"createCurve"),x=u(function(Ge,We){const xe=R(Ge),ze=P(xe);if(L(We,P(xe))<S)return xe;if(W.SUCCESS!=xe.update_status&&xe.update_status!==void 0){let mt;W.FAIL_CORNER==xe.update_status?mt=V(ze.x,ze.y):W.FAIL_MAXED==xe.update_status&&(mt=V(ze.x,ze.y),mt.constrain_to=q(re(xe))),Ge.vdmap=[],Ge.segments.push(mt)}return Y(Ge,We)},"addToCurveImpl"),Y=u(function(Ge,We){const xe=R(Ge),{x:ze,y:mt}=We;let pt=P(xe);const It=z(xe);if(_e(xe,We))return xe.update_status=W.FAIL_CORNER,xe;xe.c3={x:ze,y:mt},xe.c2={x:xe.c2.x+ze-pt.x,y:xe.c2.y+mt-pt.y};const bt=Q(pt,We),gt=ge(bt),ht=he(pt,gt),Zt=he(We,gt),rn=oe(ee(gt,2)),zt=B(rn),In=J(rn,zt),cn=ce(Zt,ht),Jt=B(cn),dn=J(cn,Jt);let sn=ht;for(let un=0;un<Jt;un++){let yn=sn,ut=gt;for(let Ot=0;Ot<zt;Ot++){const{x:kt,y:be}=me(yn);Ge.vdmap[kt]||(Ge.vdmap[kt]=[]),Ge.vdmap[kt][be]==null?Ge.vdmap[kt][be]=me(ut):Ge.vdmap[kt][be]=ue(Ge.vdmap[kt][be])<ue(me(ut))?Ge.vdmap[kt][be]:me(ut),ut=he(ut,In),yn=he(yn,In)}sn=he(sn,dn)}const Xt=ce(We,{x:O,y:O}),xt=he(We,{x:O,y:O});for(let un=Xt.x;un<xt.x;un++)for(let yn=Xt.y;yn<xt.y;yn++){Ge.vdmap[un]||(Ge.vdmap[un]=[]);const ut=ce({x:un,y:yn},We);Ge.vdmap[un][yn]==null?Ge.vdmap[un][yn]=ut:Ge.vdmap[un][yn]=ue(Ge.vdmap[un][yn])<ue(ut)?Ge.vdmap[un][yn]:ut}let en=0;for(;;){let un={x:0,y:0},yn={x:0,y:0};for(let kt=0;kt<D;kt++){const be=kt/D,Kt=me(le(xe,be)),Vt=ne(Ge,Kt),on=ae(Vt),pn=Vt.x,et=Vt.y;let At=1;k&&(be<.1||be>.9)&&(At=10),un.x+=be*Math.pow(1-be,2)*on*pn*At,un.y+=be*Math.pow(1-be,2)*on*et*At,yn.x+=Math.pow(be,2)*(1-be)*on*pn*At,yn.y+=Math.pow(be,2)*(1-be)*on*et*At}if(k){const kt=ce(G(xe),xe.c2),be=ce(G(xe),xe.c1);un=ce(un,ee(be,.03)),yn=ce(yn,ee(kt,.03))}xe.constrain_to&&(un=ee(xe.constrain_to,F(xe.constrain_to,un)));const ut=1;xe.c1.x-=ut*un.x*6/D,xe.c1.y-=ut*un.y*6/D,xe.c2.x-=ut*yn.x*6/D,xe.c2.y-=ut*yn.y*6/D;let Ot=0;for(let kt=0;kt<D;kt++){const be=kt/D,Kt=le(xe,be),Vt=ne(Ge,me(Kt));Ot+=Math.pow(Vt.x,2)+Math.pow(Vt.y,2)}if(Ot=Ot/D,en++,xe.error=Ot,xe.steps=en,Ot<A||en>E)break}return en>E?(xe.c0=It.c0,xe.c1=It.c1,xe.c2=It.c2,xe.c3=It.c3,xe.error=It.error,xe.constrain_to=It.constrain_to,xe.update_status=W.FAIL_MAXED,xe):(xe.update_status=W.SUCCESS,xe)},"updateDistanceField"),ne=u(function(Ge,We){let{x:xe,y:ze}=We;if(Ge.vdmap[xe]){const mt=Ge.vdmap[xe][ze],pt=Ge.vdmap[xe][ze+1];let It=mt!=null?{x:mt.x,y:mt.y}:{x:O,y:O};return pt&&pt.x!=null&&Math.abs(It.x)>Math.abs(pt.x)&&(It.x=pt.x),pt&&pt.y!=null&&Math.abs(It.y)>Math.abs(pt.y)&&(It.y=pt.y),It}else return{x:O,y:O}},"getDistanceFromPolyline"),re=u(function(Ge){const We=Ge.c3,xe=Ge.c2;return{x:3*(xe.x-We.x),y:3*(xe.y-We.y)}},"getCurveEndTangent"),_e=u(function(Ge,We){if(X(Ge.c0,Ge.c3))return!1;let xe;b?xe=q(ce(le(Ge,.95),Ge.c3)):xe=q(re(Ge));const ze=q({x:We.x-Ge.c3.x,y:We.y-Ge.c3.y}),mt=F(xe,ze);if(K(Math.acos(mt))<C)return!0},"checkCorner"),G=u(Ge=>he(J(ce(Ge.c3,Ge.c0),2),Ge.c0),"getSegmentMidpoint"),ge=u(Ge=>({x:Ge.x*O,y:Ge.y*O}),"getScaledVectorDifference"),oe=u(Ge=>({x:-Ge.x,y:-Ge.y}),"negateVec"),me=u(Ge=>({x:Math.round(Ge.x),y:Math.round(Ge.y)}),"roundVec"),ue=u(Ge=>Math.pow(Ge.x,2)+Math.pow(Ge.y,2),"sumOfSquaresVec"),ae=u(Ge=>Math.sqrt(ue(Ge)),"magnitudeVec"),he=u((Ge,We)=>({x:Ge.x+We.x,y:Ge.y+We.y}),"addVec"),ce=u((Ge,We)=>he(Ge,oe(We)),"subVec"),ee=u((Ge,We)=>({x:Ge.x*We,y:Ge.y*We}),"multVec"),J=u((Ge,We)=>ee(Ge,1/We),"divVec"),X=u((Ge,We)=>Ge.x==We.x&&Ge.y==We.y,"equalVec"),F=u((Ge,We)=>Ge.x*We.x+Ge.y*We.y,"dotProduct"),L=u(function(Ge){let{x:We,y:xe}=Ge,ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0};return Math.sqrt(Math.pow(We-ze.x,2)+Math.pow(xe-ze.y,2))},"getMagnitude"),K=u(Ge=>Ge*180/Math.PI,"radiansToDegrees"),B=u(Ge=>Math.max(Math.abs(Ge.x),Math.abs(Ge.y)),"getDDASteps"),Q=u((Ge,We)=>{const xe=We.x-Ge.x,mt=We.y-Ge.y,pt=-xe;return q({x:mt,y:pt})},"getPerpindicularUnitVector"),q=u(function(Ge){let{x:We,y:xe}=Ge;const ze=L({x:We,y:xe});return{x:We/ze,y:xe/ze}},"getUnitVector"),le=u(function(Ge,We){const xe=Te(We,Ge.c0.x,Ge.c1.x,Ge.c2.x,Ge.c3.x),ze=Te(We,Ge.c0.y,Ge.c1.y,Ge.c2.y,Ge.c3.y);return{x:xe,y:ze}},"getPointAlongCurve"),Te=u(function(Ge,We,xe,ze,mt){return We*Math.pow(1-Ge,3)+xe*3*Ge*Math.pow(1-Ge,2)+ze*3*Math.pow(Ge,2)*(1-Ge)+mt*Math.pow(Ge,3)},"singleComponentBezier");function Ie(Ge,We){return{a:Ge,b:We}}u(Ie,"makeLineSegment");function De(Ge,We){let[xe,ze]=Ge,[mt,pt]=We;return Math.sqrt((xe-mt)**2+(ze-pt)**2)}u(De,"magnitude");class pe{add(We){return this.current?De(this.current.a,We)>.05?(this.current=Ie(this.current.b,We),{type:DrawMessageType.New,segment:this.current}):(this.current=Ie(this.current.a,We),{type:DrawMessageType.Edit,segment:this.current}):(this.current=Ie(We,We),{type:DrawMessageType.New,segment:this.current})}}u(pe,"ProgressiveEqualLengthMultilineTransformer");class fe{setTargetRect(We){this.targetRect=We}add(We){if(!(0,I.Z)(this.targetRect,"Need size to transform point to curve"))throw Error();const{top:xe,left:ze,width:mt,height:pt}=this.targetRect,[It,bt]=[We[0]-ze,We[1]-xe];if(!this.current){f({x:It,y:bt});const In=[It/mt,bt/pt];return this.current={a:In,b:In,c:In,d:In},{type:c.Sl.New,segment:this.current}}const gt=this.current,{c0:ht,c1:Zt,c2:rn,c3:zt}=g({x:It,y:bt});return this.current={a:[ht.x/mt,ht.y/pt],b:[Zt.x/mt,Zt.y/pt],c:[rn.x/mt,rn.y/pt],d:[zt.x/mt,zt.y/pt]},this.current.a[0]!==gt.a[0]||this.current.a[1]!==gt.a[1]?{type:c.Sl.New,segment:this.current}:{type:c.Sl.Edit,segment:this.current}}}u(fe,"ProgressiveCurveTransformer");var Z=e(5950652755),se=e(3107743571);const Ae=2e3,Ce=50,Le=u(Ge=>{const{onDragStart:We,onDragMove:xe,onDragEnd:ze,onCursorMoveStart:mt,onCursorMove:pt,onCursorMoveEnd:It,children:bt}=Ge,[gt,ht]=(0,t.useState)(!1),[Zt,rn]=(0,t.useState)(!1),[zt,In]=(0,t.useState)(0),[cn,Jt]=(0,t.useState)(0),dn=(0,t.useCallback)(ut=>{ut.button===0&&(ht(!0),We(ut))},[We]),sn=(0,t.useCallback)(()=>{rn(!1),It()},[rn,It]);(0,se.Z)(()=>{sn()},Ae,[zt,cn]);const Xt=(0,t.useCallback)(ut=>{if(ut.button===0){if(gt){xe(ut);return}Zt||(mt(ut),rn(!0)),pt(ut),In(ut.movementX),Jt(ut.movementY)}},[Zt,gt,pt,mt,xe]),xt=(0,Z.A)(Xt,Ce,{leading:!0}),en=(0,t.useCallback)(ut=>{xt(ut)},[xt]),un=(0,t.useCallback)(ut=>{if(ut&&ut.button!==0)return;const Ot=gt;ht(!1),Ot&&ze(ut)},[gt,ze]),yn=(0,t.useCallback)(ut=>{const Ot=gt;ht(!1),Ot?ze(ut):Zt&&It()},[gt,ze,Zt,It]);return t.createElement("div",{onMouseDown:dn,onMouseMove:en,onMouseUp:un,onMouseLeave:yn,"aria-hidden":"true"},bt)},"HuddlesCursorTarget");Le.displayName="HuddlesCursorTarget";const Ue=t.memo(Le);var Pe=e(8558782493),He=e(6244014364);function Qe(){return Qe=Object.assign||function(Ge){for(var We=1;We<arguments.length;We++){var xe=arguments[We];for(var ze in xe)Object.prototype.hasOwnProperty.call(xe,ze)&&(Ge[ze]=xe[ze])}return Ge},Qe.apply(this,arguments)}u(Qe,"target_extends");let lt=u(class extends t.Component{componentDidMount(){this.onResize()}shouldComponentUpdate(We,xe){return!(0,s.A)(this.props,We)||!(0,s.A)(this.state,xe)}componentDidUpdate(We){(0,s.A)(We.targetRect,this.props.targetRect)||this.onResize()}onResize(){var We;if(!(!((We=this.props.refToForward)===null||We===void 0)&&We.current))return;const xe=(0,T.n)(this.props.targetRect);this.props.refToForward.current.style.height=xe.height,this.props.refToForward.current.style.width=xe.width,this.props.refToForward.current.style.top=xe.top,this.props.refToForward.current.style.left=xe.left,this.props.refToForward.current.style.position=xe.position}getCursorCoordinates(We){return this.props.useHuddlesDragTarget?[We.nativeEvent.offsetX,We.nativeEvent.offsetY]:[We.pageX,We.pageY]}onDragStart(We){this.multilineTransformer=new fe,this.props.useHuddlesDragTarget?this.multilineTransformer.setTargetRect({top:0,left:0,width:this.props.targetRect.width,height:this.props.targetRect.height}):this.multilineTransformer.setTargetRect(this.props.targetRect),a.A.publish({id:"self",type:c.Sl.ChangeHue,hue:this.props.hue,...this.props.itemId&&{itemId:this.props.itemId}}),a.A.publish({id:"self",...this.multilineTransformer.add(this.getCursorCoordinates(We)),...this.props.itemId&&{itemId:this.props.itemId}}),this.props.logDrawingAction("Draw start"),this.setState(()=>({showCursor:!1}))}onDragMove(We){(0,I.Z)(this.multilineTransformer,"Need transformer to draw")&&a.A.publish({id:"self",...this.multilineTransformer.add(this.getCursorCoordinates(We)),...this.props.itemId&&{itemId:this.props.itemId}})}onDragEnd(We){a.A.publish({id:"self",type:c.Sl.End,...this.props.itemId&&{itemId:this.props.itemId}}),this.props.logDrawingAction("Draw stop"),this.setState(()=>({showCursor:!0})),this.props.useHuddlesDragTarget&&(0,Pe.k)(He.EventId.HUDDLES_SCREENSHARE_INTERACTION,{contexts:{ui_context:{action:He.UiAction.CLICK,ui_properties:{element_name:"screenshare_draw"}}}})}onCursorMoveStart(){a.A.publish({id:"self",type:c.Sl.ChangeHue,hue:this.props.hue,...this.props.itemId&&{itemId:this.props.itemId}})}onCursorMove(We){const xe=this.getCursorCoordinates(We),ze=xe[0]/this.props.targetRect.width,mt=xe[1]/this.props.targetRect.height;a.A.publish({id:"self",type:c.Sl.Position,x:ze,y:mt,...this.props.itemId&&{itemId:this.props.itemId}}),this.setState(()=>({showCursor:!0}))}onCursorMoveEnd(){a.A.publish({id:"self",type:c.Sl.End,...this.props.itemId&&{itemId:this.props.itemId}}),this.setState(()=>({showCursor:!1}))}render(){return this.props.useHuddlesDragTarget?t.createElement(Ue,{onDragStart:this.onDragStart,onDragMove:this.onDragMove,onDragEnd:this.onDragEnd,onCursorMoveStart:this.onCursorMoveStart,onCursorMove:this.onCursorMove,onCursorMoveEnd:this.onCursorMoveEnd},t.createElement("div",{ref:this.props.refToForward,className:"p-calls_draw__target_none",style:{...(0,T.n)(this.props.targetRect)}})):t.createElement(d,{onDragStart:We=>this.onDragStart(We),onDragMove:We=>this.onDragMove(We),onDragEnd:We=>this.onDragEnd(We)},t.createElement("div",{ref:this.props.refToForward,className:this.state.showCursor?"p-calls_draw__target":"p-calls_draw__target_none",style:{...(0,T.n)(this.props.targetRect)}}))}constructor(We){super(We),this.onResize=this.onResize.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragMove=this.onDragMove.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onCursorMoveStart=this.onCursorMoveStart.bind(this),this.onCursorMove=this.onCursorMove.bind(this),this.onCursorMoveEnd=this.onCursorMoveEnd.bind(this),this.state={showCursor:!0}}},"BaseDrawTarget");lt.displayName="BaseDrawTarget";const qe=u((Ge,We)=>({hue:(0,r.Ng)(Ge).drawHue}),"mapStateToProps"),ct=u(Ge=>({logDrawingAction:We=>Ge(y(We))}),"mapDispatchToProps"),tt=(0,n.N)(qe,ct)(lt),it=t.forwardRef((Ge,We)=>t.createElement(tt,Qe({refToForward:We},Ge)))},5956851410:(j,p,e)=>{"use strict";e.d(p,{u:()=>X});var t=e(3134334389),n=e(166097325),s=e(1649982175),a=e(8571983633),c=e(8840779375),o=e(3300324857),i=e(462591818),l=e(1641606663),_=e(9391594207),d=e(5795074931),r=e(4775127335),m=e(387328355),h=e(735940183);const v=new h.Ay("calls"),y=u(F=>{let{displayName:L,id:K,userId:B,color:Q}=F;return t.createElement("div",{className:"p-huddles_draw__name_tag",style:Q?{background:Q}:{}},t.createElement(r.Ay,{className:"p-huddles_draw__name_tag_avatar",key:K,size:24,userId:B,isInteractive:!1,tabIndex:-1}),t.createElement("div",{className:"p-huddles_draw__name_tag_text"},L))},"NameTag"),I=u((F,L)=>{let{id:K}=L;return{displayName:K==="self"?v.t("You"):(0,m.iU)(F,K),userId:K==="self"?(0,d.WR)(F):(0,m.C1)(F,K).userId}},"mapStateToProps"),T=(0,_.N)(I)(y),f=-21,g=-15,M=u(F=>{let{peerId:L,width:K,height:B,leftOffset:Q,topOffset:q,color:le,renderNameTag:Te=!0,isWindowDrawMode:Ie=!1,xWindowPosition:De=0,yWindowPosition:pe=0}=F;const fe=(0,t.useRef)(null);let Z,se;const Ae=Q*K,Ce=q*B;Z=Math.round(Ae+g),se=Math.round(Ce+f),Ie&&(Z+=De,se+=pe);const Le=(0,t.useMemo)(()=>[Z,se],[Z,se]),Ue=u(Pe=>{const He=fe.current;He&&(He.style.setProperty("transform",`translate(${Pe[0]}px, ${Pe[1]}px)`),He.style.setProperty("visibility","initial"))},"updateCursorPosition");return(0,t.useEffect)(()=>{Ue(Le)},[Le]),t.createElement("div",{className:"p-huddles_cursor_tracking__cursor_container"},t.createElement("div",{key:`cursor-${L}`,className:"p-huddles_cursor_tracking__cursor",ref:fe},Te&&t.createElement(T,{key:`name-tag-${L}`,id:L,color:le})))},"HuddlesCursor");M.displayName="HuddlesCursor";const A=t.memo(M,n.A);var O=e(2825968873),D=e(8405076696),E=e(8193414630);function C(F,L,K,B){return`hsla(${F}, ${L}%, ${K}%, ${B})`}u(C,"makeColorString");const S=u((F,L)=>C(F,100,75,L),"makeBaseColorString"),b=u(F=>C(F,80,50,1),"makeShadowColorString"),k=3;class W{static renderBaseStyle(L){L.lineJoin="round",L.lineCap="round",L.shadowBlur=5}startFade(){this.startedFadingTimestamp=performance.now(),this.observer.requestRenderOnNextFrame()}resetFade(){this.startedFadingTimestamp&&(delete this.startedFadingTimestamp,this.width=W.initialWidth,this.opacity=1,this.color=S(this.hue,this.opacity))}setHue(L){this.hue=L,this.color=S(this.hue,this.opacity),this.shadowColor=b(this.hue),this.observer.requestRenderOnNextFrame()}render(L){this.fade(),L.lineWidth=this.width,L.strokeStyle=this.color,L.shadowColor=this.shadowColor}fade(){if(!this.startedFadingTimestamp)return;const L=Math.min(1,(performance.now()-this.startedFadingTimestamp)/W.fadeDuration);this.width=W.initialWidth-L*k,this.opacity=1-L/1,this.color=S(this.hue,this.opacity),L<1?this.observer.requestRenderOnNextFrame():this.observer.onFadeCompleted()}getColor(){return this.color}constructor(L){this.observer=L,this.width=W.initialWidth,this.opacity=1,this.hue=0,this.color=S(this.hue,this.opacity),this.shadowColor=b(this.hue)}}u(W,"LineStyle"),W.displayName="LineStyle",W.initialWidth=7,W.fadeDuration=3e3;let N=u(class{getSegments(){return this.segments}addNewSegment(L){this.segments.push(L)}editLastSegment(L){this.segments.pop(),this.segments.push(L)}constructor(){this.segments=[]}},"ProgressivePlotter");class V extends null{draw(L){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const Q=this.getSegments();L.beginPath();for(let q=0;q<Q.length;q++){const le=Q[q];L.moveTo(le.a[0]*K,le.a[1]*B),L.lineTo(le.b[0]*K,le.b[1]*B)}L.stroke()}}u(V,"ProgressiveLineSegmentPlotter");class R extends N{draw(L){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const Q=this.getSegments();L.beginPath();for(let q=0;q<Q.length;q++){const le=Q[q];L.moveTo(le.a[0]*K,le.a[1]*B),L.bezierCurveTo(le.b[0]*K,le.b[1]*B,le.c[0]*K,le.c[1]*B,le.d[0]*K,le.d[1]*B)}L.stroke()}}u(R,"ProgressiveBezierCurvePlotter");const P=700,z=5e3;class ${onFadeCompleted(){this.plotter=new R,this.observer.onLineVisibilityChanged(!1),this.setLineVisibility({isFading:!1,isLineVisible:!1}),this.style.resetFade()}resetVestigialLineTimeout(){this.vestigialLineTimeout&&clearTimeout(this.vestigialLineTimeout),this.vestigialLineTimeout=window.setTimeout(this.onInactivity,z)}resetInactivityTimeout(){this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.inactivityTimeout=window.setTimeout(this.onInactivity,P)}update(L){if(this.resetVestigialLineTimeout(),L.type===i.Sl.New)this.visibilityState.isLineVisible||this.observer.onLineVisibilityChanged(!0),this.setLineVisibility({isFading:!1,isLineVisible:!0}),this.plotter.addNewSegment(L.segment),this.style.resetFade(),clearTimeout(this.inactivityTimeout);else if(L.type===i.Sl.Edit)this.plotter.editLastSegment(L.segment);else if(L.type===i.Sl.End)this.resetInactivityTimeout();else if(L.type===i.Sl.ChangeHue)this.style.setHue(L.hue);else{if(L.type===i.Sl.Position)return;(0,E.Kh)(L.type)}this.observer.requestRenderOnNextFrame()}render(L,K,B){this.style.render(L),this.plotter.draw(L,K,B)}setLineVisibility(L){Object.assign(this.visibilityState,L)}getColor(){return this.style.getColor()}constructor(L){this.observer=L,this.plotter=new R,this.visibilityState={isLineVisible:!1,isFading:!1},this.onInactivity=()=>{this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.vestigialLineTimeout&&clearTimeout(this.vestigialLineTimeout),!(this.visibilityState.isFading||!this.visibilityState.isLineVisible)&&(this.setLineVisibility({isFading:!0}),this.style.startFade())},this.style=new W({onFadeCompleted:()=>this.onFadeCompleted(),requestRenderOnNextFrame:()=>this.observer.requestRenderOnNextFrame()})}}u($,"DrawLine"),$.displayName="DrawLine";const x=u(F=>{let{refToForward:L,isHidden:K,numVisibleLines:B,top:Q,left:q,width:le,height:Te,doNotApplyTargetRect:Ie}=F;if(Ie){const pe={display:K||B===0?"none":"block"};return t.createElement("canvas",{ref:L,style:pe,"data-qa":"huddles-drawing-canvas"})}const De={display:K||B===0?"none":"block",...(0,D.n)({left:q,top:Q,width:le,height:Te})};return t.createElement("canvas",{ref:L,style:De,"data-qa":"huddles-drawing-canvas"})},"Canvas");x.displayName="Canvas";const Y=t.memo(x,n.A),ne=new h.Ay("calls"),re=10,_e=10,G=u(F=>{let{displayName:L,coord:[K,B]}=F;return t.createElement("div",{className:"p-calls_draw__name_tag",style:{left:`${K+re}px`,top:`${B+_e}px`}},L)},"name_tag_NameTag"),ge=u((F,L)=>{let{id:K}=L;return{displayName:K==="self"?ne.t("You"):(0,m.iU)(F,K)}},"name_tag_mapStateToProps"),oe=(0,_.N)(ge)(G),me=-33,ue=-9,ae=u(F=>{let{top:L,left:K,width:B,height:Q,leftOffset:q,topOffset:le,id:Te}=F;const Ie=K+q*B,De=L+le*Q,pe={left:`${Ie+ue}px`,top:`${De+me}px`},fe=(0,t.useMemo)(()=>[Ie,De],[Ie,De]);return t.createElement(t.Fragment,null,Te!=="self"&&t.createElement("div",{key:`cursor-${Te}`,className:"p-calls_draw__pencil_cursor",style:pe}),t.createElement(oe,{key:`name-tag-${Te}`,id:Te,coord:fe}))},"Cursor");ae.displayName="Cursor";const he=t.memo(ae,n.A);function ce(){return ce=Object.assign||function(F){for(var L=1;L<arguments.length;L++){var K=arguments[L];for(var B in K)Object.prototype.hasOwnProperty.call(K,B)&&(F[B]=K[B])}return F},ce.apply(this,arguments)}u(ce,"_extends");var ee;class J extends(ee=t.Component){shouldComponentUpdate(L,K){return!(0,n.A)(this.props,L)||!(0,n.A)(this.state,K)}getOrCreatePeerLine(L){return this.peerLines[L]=this.peerLines[L]||new $({requestRenderOnNextFrame:()=>this.requestRenderOnNextFrame(),onLineVisibilityChanged:K=>this.setState(B=>({numVisibleLines:B.numVisibleLines+(K?1:-1)}))}),this.peerLines[L]}onIncomingPeerLine(L){if(this.props.itemId&&L.itemId&&L.itemId!==this.props.itemId)return;const K=this.getOrCreatePeerLine(L.id);switch(K.update(L),L.type){case i.Sl.New:{this.setState(B=>{let{tagCoords:Q,userColors:q}=B;return{tagCoords:{...Q,[L.id]:L.segment.d},userColors:{...q,[L.id]:K.getColor()}}});break}case i.Sl.Edit:{this.setState(B=>{let{tagCoords:Q}=B;return{tagCoords:{...Q,[L.id]:L.segment.d}}});break}case i.Sl.ChangeHue:{this.setState(B=>{let{userColors:Q}=B;return{userColors:{...Q,[L.id]:K.getColor()}}});break}case i.Sl.End:{this.setState(B=>{let{tagCoords:Q}=B;return{tagCoords:(0,s.A)(Q,L.id)}});break}case i.Sl.Position:{const B=[L.x,L.y];this.setState(Q=>{let{tagCoords:q}=Q;return{tagCoords:{...q,[L.id]:B}}});break}default:break}}componentDidMount(){o.A.subscribe(this.onIncomingPeerLine),this.ctx=this.props.refToForward.current.getContext("2d"),this.onResize()}componentDidUpdate(L,K){L.targetRect!==this.props.targetRect&&this.onResize(),this.state.numVisibleLines<0&&(0,O.tZ)("DRAW-RENDERER").warn("Should not have a negative number of lines"),this.props.onRendererIsActive&&(this.state.numVisibleLines===0&&K.numVisibleLines>0||this.state.numVisibleLines>0&&K.numVisibleLines===0)&&this.props.onRendererIsActive(this.state.numVisibleLines!==0)}componentWillUnmount(){if(!(0,a.A)(this.rafId)){var L;(L=this.context.windowRef.deref())===null||L===void 0||L.cancelAnimationFrame(this.rafId)}o.A.unsubscribe(this.onIncomingPeerLine)}onResize(){this.ctx&&(this.ctx.canvas.width=this.props.targetRect.width,this.ctx.canvas.height=this.props.targetRect.height,W.renderBaseStyle(this.ctx),this.requestRenderOnNextFrame())}requestRenderOnNextFrame(){this.dirty||(this.dirty=!0,this.rafId=this.context.windowRef.deref().requestAnimationFrame(this.draw))}draw(){if(this.rafId=void 0,!this.ctx)return;const L=this.props.targetRect.width,K=this.props.targetRect.height;this.dirty=!1,this.ctx.clearRect(0,0,L,K);const B=Object.values(this.peerLines);for(let Q=0;Q<B.length;Q++)B[Q].render(this.ctx,L,K)}renderCursor(L,K,B){const{targetRect:Q,useHuddlesCursor:q,itemId:le,isHostDrawWindow:Te,isWindowDrawing:Ie}=this.props;if(q){const De=this.state.userColors[L],pe=le!=="self",fe=Te&&Ie;return t.createElement(A,{key:L,peerId:L,topOffset:K,leftOffset:B,width:Q.width,height:Q.height,color:De,renderNameTag:pe,isWindowDrawMode:fe,xWindowPosition:Q.left,yWindowPosition:Q.top})}return t.createElement(he,ce({key:L,id:L,topOffset:K,leftOffset:B},Q))}render(){if(this.props.setPositionToMatchTargetRect){const{targetRect:L}=this.props,K={...(0,D.n)({left:L.left,top:L.top,width:L.width,height:L.height})};return t.createElement("div",{className:"p-calls_draw__renderer",style:K},t.createElement(Y,ce({refToForward:this.props.refToForward,isHidden:this.props.isHidden,numVisibleLines:this.state.numVisibleLines},this.props.targetRect,{doNotApplyTargetRect:!0})),(0,c.A)(this.state.tagCoords,(B,Q)=>{let[q,le]=B;return this.renderCursor(Q,le,q)}))}return t.createElement("div",{className:"p-calls_draw__renderer"},t.createElement(Y,ce({refToForward:this.props.refToForward,isHidden:this.props.isHidden,numVisibleLines:this.state.numVisibleLines},this.props.targetRect)),(0,c.A)(this.state.tagCoords,(L,K)=>{let[B,Q]=L;return this.renderCursor(K,Q,B)}))}constructor(L){super(L),this.dirty=!1,this.peerLines={},this.onResize=this.onResize.bind(this),this.onIncomingPeerLine=this.onIncomingPeerLine.bind(this),this.draw=this.draw.bind(this),this.renderCursor=this.renderCursor.bind(this),this.state={tagCoords:{},numVisibleLines:0,userColors:{}}}}u(J,"BaseDrawRenderer"),J.displayName="BaseDrawRenderer",J.contextType=l.M;const X=t.forwardRef((F,L)=>t.createElement(J,ce({refToForward:L},F)))},1429018002:(j,p,e)=>{"use strict";e.d(p,{A:()=>A});var t=e(3134334389),n=e(9391594207),s=e(387328355),a=e(5255740490),c=e(4096483543),o=e(8869734951),i=e(6533394955),l=e(6839101721),_=e(3395259576),d=e(2615100822),r=e(4761125736);function m(){return m=Object.assign||function(O){for(var D=1;D<arguments.length;D++){var E=arguments[D];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(O[C]=E[C])}return O},m.apply(this,arguments)}u(m,"_extends");let h=u(class extends t.PureComponent{componentDidMount(){this.setUpMedia(),this.updateVideoState(),this.setupInteractionObserver()}componentDidUpdate(){this.setUpMedia(),this.updateVideoState()}componentWillUnmount(){var D;const E=this.videoRef.current,{shouldAttachStream:C,tileId:S,peerId:b}=this.props;!S||!E||(this.props.unbindVideo({tileId:S,videoRef:this.videoRef,shouldDetachStream:!!C,peerId:b}),E.removeEventListener("resize",this.onResize),(D=this.interactionObserver)===null||D===void 0||D.disconnect())}setUpMedia(){const D=this.videoRef.current,{shouldAttachStream:E,tileId:C,peerId:S}=this.props;!C||!D||(this.props.bindVideo({tileId:C,videoRef:this.videoRef,shouldAttachStream:!!E,peerId:S}),D.addEventListener("resize",this.onResize))}setupInteractionObserver(){var D;if(window!=null&&window.IntersectionObserver&&this.props.unbindNonVisibleVideos&&((D=this.interactionObserver)===null||D===void 0||D.disconnect(),this.interactionObserver=new IntersectionObserver(this.interactionObserverCallback,{root:null,threshold:this.intersectionCheckThresholds}),this.videoRef.current)){var E;(E=this.interactionObserver)===null||E===void 0||E.observe(this.videoRef.current)}}interactionObserverCallback(D){const E=D[0];if(!E)return;const C=this.videoRef.current,{shouldAttachStream:S,tileId:b,peerId:k}=this.props;!b||!C||(E.intersectionRatio>this.intersectionVisibleThreshold?this.props.bindVideo({tileId:b,videoRef:this.videoRef,shouldAttachStream:!!S,peerId:k}):this.props.unbindVideo({tileId:b,videoRef:this.videoRef,shouldDetachStream:!!S,peerId:k}))}onResize(){const D=this.videoRef.current;D&&(this.props.isSharingScreen?D.style.objectFit="contain":D.style.objectFit=D.videoWidth>D.videoHeight?"cover":"contain")}updateVideoState(){const{experimentCallsPauseVideoOnScreenshareGroupTreatment:D,peerId:E,tileId:C,isActivePeerSharingScreen:S,isShroudVisible:b}=this.props;!D||!C||(E!=="self"&&S&&!b?this.props.pauseVideo({tileId:C}):this.props.unpauseVideo({tileId:C}))}render(){const{refToForward:D,shouldFlip:E,peerId:C,className:S,width:b,height:k,onLoadedData:W}=this.props;return t.createElement("video",m({className:(0,a.A)("p-calls_video",S,{flipped:E}),ref:(0,o.P)(this.videoRef,D),key:C,"data-qa":"free-willy-video-element",style:{width:b,height:k}},W?{onLoadedData:W}:{}))}constructor(D){super(D),this.videoRef=(0,t.createRef)(),this.intersectionVisibleThreshold=0,this.intersectionCheckThresholds=[0],this.onResize=D.onResize?D.onResize:this.onResize.bind(this),this.interactionObserverCallback=this.interactionObserverCallback.bind(this)}},"VideoElement");h.displayName="VideoElement";const v=u((O,D)=>{var E;const C=(0,r._Z)(O,"calls_pause_video_on_screenshare")==="treatment",S=(0,s.vz)(O),b=D.peer?(0,s.Bf)(D.peer):!1;let k;if(S)k=D.tileId;else{var W,N,V,R,P,z;k=b?(W=D.peer)===null||W===void 0||(N=W.tileIds)===null||N===void 0||(V=N.screenshare)===null||V===void 0?void 0:V.tileId:(R=D.peer)===null||R===void 0||(P=R.tileIds)===null||P===void 0||(z=P.camera)===null||z===void 0?void 0:z.tileId}return{tileId:k,peerId:(E=D.peer)===null||E===void 0?void 0:E.id,isSharingScreen:b,isShroudVisible:C&&(0,d.A)()?(0,_.pI)(O):!1,isActivePeerSharingScreen:(0,s.$Q)(O),experimentCallsPauseVideoOnScreenshareGroupTreatment:C}},"mapStateToProps"),y=u(O=>({bindVideo:D=>(0,c.A)()?(0,i.dispatchForClientStore)((0,l.d2)(D)):O((0,l.d2)(D)),unbindVideo:D=>(0,c.A)()?(0,i.dispatchForClientStore)((0,l.gJ)(D)):O((0,l.gJ)(D)),pauseVideo:D=>(0,c.A)()?(0,i.dispatchForClientStore)((0,l.WY)(D)):O((0,l.WY)(D)),unpauseVideo:D=>(0,c.A)()?(0,i.dispatchForClientStore)((0,l.D8)(D)):O((0,l.D8)(D))}),"mapDispatchToProps"),I=(0,n.N)(v,y)(h),T=t.forwardRef((O,D)=>t.createElement(I,m({refToForward:D},O)));function f(){return f=Object.assign||function(O){for(var D=1;D<arguments.length;D++){var E=arguments[D];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(O[C]=E[C])}return O},f.apply(this,arguments)}u(f,"peer_video_element_extends");const g=u((O,D)=>{const E=(0,s.vz)(O),C=(0,s.JZ)(O,D.id);let S;const b=D.tileId;if(!E)S=(0,s.fy)(C)&&!C.isScreenshareEnabled;else{var k,W;const N=((k=C.tileIds)===null||k===void 0||(W=k.screenshare)===null||W===void 0?void 0:W.tileId)===b;S=(0,s.fy)(C)&&!N}return{peer:C,tileId:b,shouldFlip:S}},"peer_video_element_mapStateToProps"),M=(0,n.N)(g)(T),A=t.forwardRef((O,D)=>t.createElement(M,f({},O,{refToForward:D})))},1337358413:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>r,Ft:()=>l});var t=e(3134334389),n=e(5255740490),s=e(9391594207),a=e(3328068409),c=e(9009528296),o=e(9853754481);const i=15;function l(m){return Math.min(1,Math.max(0,o.Ep*m))}u(l,"getClampedAudioLevel");let _=u(class extends t.PureComponent{componentDidMount(){c.A.subscribe(this.onLevelUpdated)}componentWillUnmount(){c.A.unsubscribe(this.onLevelUpdated)}onLevelUpdated(h){const v=Math.floor(this.numBubbles*l(h));this.setState(()=>({numActiveBubbles:v,numInactiveBubbles:this.numBubbles-v}))}renderBubbles(){const{numActiveBubbles:h,numInactiveBubbles:v}=this.state,{bubbleClassname:y}=this.props,I=(0,n.A)("p-audio_levels__bubble","p-audio_levels__bubble--active",y,{"p-audio_levels__bubble--dark":this.props.clientTheme==="dark"}),T=(0,n.A)("p-audio_levels__bubble","p-audio_levels__bubble--inactive",y,{"p-audio_levels__bubble--dark":this.props.clientTheme==="dark"}),f=Array.from({length:h},(M,A)=>t.createElement("span",{key:`active${A}`,className:I})),g=Array.from({length:v},(M,A)=>t.createElement("span",{key:A,className:T}));return f.concat(g)}render(){return t.createElement("div",{className:(0,n.A)("p-audio_levels",this.props.containerClassName),"data-qa":"audio-levels-bubbles"},this.renderBubbles())}constructor(h){super(h);var v;this.numBubbles=(v=this.props.initNumBubbles)!==null&&v!==void 0?v:i;var y;this.state={numInactiveBubbles:(y=h.initNumBubbles)!==null&&y!==void 0?y:i,numActiveBubbles:0},this.onLevelUpdated=this.onLevelUpdated.bind(this)}},"AudioMeter");_.displayName="AudioMeter";const d=u(m=>({clientTheme:(0,a.to)(m)}),"mapStateToProps"),r=(0,s.N)(d)(_)},610288365:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>l});var t=e(9706240641),n=e.n(t),s=e(6696292586),a=e(3398586081);class c{constructor(){this.isInitialized=!1,this.isUsingBattery=null,this.batteryLevel=null,this.isSupported=!1,this.registerListeners=()=>{var m,h;(m=this.battery)===null||m===void 0||m.addEventListener("chargingchange",this.handleBatteryUpdate),(h=this.battery)===null||h===void 0||h.addEventListener("levelchange",this.handleBatteryUpdate)},this.removeEventListeners=()=>{var m,h;(m=this.battery)===null||m===void 0||m.removeEventListener("chargingchange",this.handleBatteryUpdate),(h=this.battery)===null||h===void 0||h.removeEventListener("levelchange",this.handleBatteryUpdate)},this.handleBatteryUpdate=()=>{this.isSupported&&this.updateBatteryState()},this.updateBatteryState=()=>{this.battery&&(this.isUsingBattery=!this.battery.charging,this.batteryLevel=this.battery.level)};var d=this;this.initialize=(0,t.coroutine)(function*(){yield d.setUp(),d.updateBatteryState()});var r=this;this.setUp=(0,t.coroutine)(function*(){if(!r.isInitialized)try{if(navigator.getBattery){const m=yield navigator.getBattery();r.battery=m,r.battery&&(r.isSupported=!0,r.updateBatteryState(),r.registerListeners())}else r.isSupported=!1}catch{r.isSupported=!1}finally{r.isInitialized=!0}}),this.cleanup=()=>{this.isSupported&&this.removeEventListeners()},this.isUsingBatteryPower=()=>{if(this.isSupported)return!!this.isUsingBattery},this.getLevel=()=>{if(!(!this.isSupported||!(0,s.A)(this.batteryLevel)))return this.batteryLevel*100},this.setUp()}}u(c,"HuddleBatteryManager");const o=(0,a.A)(()=>new c),i={getHuddleBatteryManager:o,HuddleBatteryManager:c},l=o},6664301844:(j,p,e)=>{"use strict";e.d(p,{$H:()=>se,$b:()=>I,$s:()=>Z,E9:()=>f,Es:()=>l,I8:()=>h,KK:()=>K,Ll:()=>ne,Ls:()=>qe,QJ:()=>z,Q_:()=>Le,RM:()=>pe,VW:()=>ct,XL:()=>y,Xw:()=>i,ZT:()=>q,_R:()=>Ie,b9:()=>T,dQ:()=>_,gi:()=>O,i3:()=>L,j3:()=>lt,jp:()=>R,jq:()=>Pe,kM:()=>He,mn:()=>v,of:()=>Ce,px:()=>Qe,uL:()=>m,vB:()=>X,w2:()=>Ue,wV:()=>ae,xY:()=>d,xc:()=>P,z2:()=>r,zF:()=>_e,zg:()=>De});var t=e(9706240641),n=e.n(t),s=e(7164668892),a=e.n(s),c=e(3305135794),o=e.n(c);let i=s.CheckAudioConnectivityFeedback,l=s.CheckAudioInputFeedback,_=s.CheckAudioOutputFeedback,d=s.CheckCameraResolutionFeedback,r=s.CheckContentShareConnectivityFeedback,m=s.CheckNetworkTCPConnectivityFeedback,h=s.CheckNetworkUDPConnectivityFeedback,v=s.CheckVideoConnectivityFeedback,y=s.CheckVideoInputFeedback,I=s.LogLevel,T=s.MeetingSessionStatusCode,f=s.TranscriptItemType,g=null;const M=null;let A=null;const O=s.AllHighestVideoBandwidthPolicy;let D,E=null,C=null;const S=s.DefaultDeviceController;let b;const k=s.DefaultMeetingReadinessChecker;let W;const N=s.DefaultMeetingSession;let V,R=s.DefaultModality,P=s.DefaultVideoTile,z=s.MeetingSessionConfiguration,$=null,x=null,Y=null,ne=s.PermissionDeniedError,re=null,_e=s.Versioning,G=null,ge=null,oe=null,me=null,ue=null,ae=s.VoiceFocusDeviceTransformer,he=null,ce=s.DefaultVideoTransformDevice,ee=s.BackgroundBlurVideoFrameProcessor,J=null,X=s.CSPMonitor;const F=null;let L=s.VideoFxProcessor,K=s.VideoCodecCapability,B=!1,Q=!1;function q(tt){return le.apply(this,arguments)}u(q,"setUseExpSDK");function le(){return le=(0,t.coroutine)(function*(tt){if(B=tt,!B||Q)return;const it=yield Promise.resolve().then(e.t.bind(e,3305135794,23));i=it.CheckAudioConnectivityFeedback,l=it.CheckAudioInputFeedback,_=it.CheckAudioOutputFeedback,d=it.CheckCameraResolutionFeedback,r=it.CheckContentShareConnectivityFeedback,m=it.CheckNetworkTCPConnectivityFeedback,h=it.CheckNetworkUDPConnectivityFeedback,v=it.CheckVideoConnectivityFeedback,y=it.CheckVideoInputFeedback,A=it.ClientVideoStreamReceivingReport,E=it.ConnectionHealthData,C=it.DataMessage,b=it.DefaultDeviceController,W=it.DefaultMeetingReadinessChecker,V=it.DefaultMeetingSession,R=it.DefaultModality,P=it.DefaultVideoTile,I=it.LogLevel,z=it.MeetingSessionConfiguration,$=it.MeetingSessionStatus,T=it.MeetingSessionStatusCode,x=it.MeetingSessionVideoAvailability,Y=it.MutableVideoPreferences,ne=it.PermissionDeniedError,re=it.TargetDisplaySize,f=it.TranscriptItemType,g=it.TranscriptionStatusType,_e=it.Versioning,G=it.VideoPreference,ge=it.VideoPreferences,oe=it.VideoPriorityBasedPolicy,me=it.VideoPriorityBasedPolicyConfig,ue=it.VideoTileState,D=it.AudioProfile,ae=it.VoiceFocusDeviceTransformer,he=it.DefaultBrowserBehavior,ce=it.DefaultVideoTransformDevice,ee=it.BackgroundBlurVideoFrameProcessor,J=it.BackgroundReplacementVideoFrameProcessor,X=it.CSPMonitor,L=it.VideoFxProcessor,K=it.VideoCodecCapability,Q=!0}),le.apply(this,arguments)}u(le,"_setUseExpSDK");function Te(){return B}u(Te,"isUsingExpSDK");function Ie(){return b||S}u(Ie,"getDefaultDeviceController");function De(){return S}u(De,"getDefaultDeviceControllerDefault");function pe(){return b}u(pe,"getDefaultDeviceControllerExp");function fe(){return W||k}u(fe,"getDefaultMeetingReadinessChecker");function Z(){return k}u(Z,"getDefaultMeetingReadinessCheckerDefault");function se(){return W}u(se,"getDefaultMeetingReadinessCheckerExp");function Ae(){return V||N}u(Ae,"getDefaultMeetingSession");function Ce(){return N}u(Ce,"getDefaultMeetingSessionDefault");function Le(){return V}u(Le,"getDefaultMeetingSessionExp");function Ue(){return ae}u(Ue,"getVoiceFocusDeviceTransformer");function Pe(){return ce}u(Pe,"getDefaultVideoTransformDevice");function He(){return ee}u(He,"getBackgroundBlurVideoFrameProcessor");function Qe(){return c.BackgroundReplacementVideoFrameProcessor}u(Qe,"getBackgroundReplacementVideoFrameProcessor");function lt(){return s.AudioProfile}u(lt,"getAudioProfileDefault");function qe(){return D}u(qe,"getAudioProfileExp");function ct(tt){return!!tt.type}u(ct,"isTranscriptEventTranscriptionStatus")},252549317:(j,p,e)=>{"use strict";e.d(p,{LD:()=>o,MS:()=>i,Vd:()=>_,k0:()=>l});var t=e(8571983633),n=e(571104883),s=e(9042410435);const a="4.30.79",c=[s.R.DesktopScreen,s.R.DesktopWindow];function o(){return!!(0,n.dY)(a)}u(o,"isWindowDrawingSupported");function i(d){return(0,t.A)(d)?s.f.None:d.startsWith("screen:")?s.f.Screen:d.startsWith("window:")?s.f.Window:s.f.Other}u(i,"determineContentShareTypeFromSourceId");function l(d){if(!(0,n.y3)())return s.R.BrowserContent;const r=i(d);if((0,n.y3)())switch(r){case s.f.Screen:return s.R.DesktopScreen;case s.f.Window:return s.R.DesktopWindow;default:return s.R.DesktopUnknown}return s.R.Unknown}u(l,"determineFullContentShareSourceType");function _(d){return c.includes(d)}u(_,"doesContentShareTypeSupportDrawing")},9042410435:(j,p,e)=>{"use strict";e.d(p,{R:()=>n,f:()=>t});var t;(function(s){s.Screen="screen",s.Window="window",s.Other="other",s.None="none"})(t||(t={}));var n;(function(s){s.DesktopScreen="desktop:screen",s.DesktopWindow="desktop:window",s.DesktopUnknown="desktop:unknown",s.BrowserContent="browser:content",s.MobileScreen="mobile:screen",s.Unknown="unknown"})(n||(n={}))},416787925:(j,p,e)=>{"use strict";e.d(p,{Bm:()=>_,LL:()=>i,On:()=>v,Zy:()=>o,dx:()=>c,my:()=>l,tk:()=>r});var t=e(2208015175),n=e(7174777686),s=e(8736071954),a=e(336376314);const c="default",o="communications",i=[s.lW.Microphone,s.lW.Camera,s.Q4];function l(y,I){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i;(0,t.A)(I,(f,g)=>{if(!(0,n.A)(T,g))return;if(!f.length){y.warn(`No ${g} devices available`);return}const M=new a.M(["id","label"]);f.forEach(A=>{M.add([A.id,A.label].map(String))}),y.info(`${g} devices:
${M.report()}`)})}u(l,"logDevices");function _(){return{camera:[],microphone:[],output:[]}}u(_,"createEmptyDevices");const d={audioinput:s.lW.Microphone,videoinput:s.lW.Camera,audiooutput:s.Q4};function r(y){const I=d[y.kind],T={id:y.deviceId,label:y.label||void 0,groupId:y.groupId||void 0};return m(I)?{...T,type:I}:{...T,type:I}}u(r,"makeDevice");function m(y){return y!==s.Q4}u(m,"isInputDeviceType");function h(y){return m(y.type)}u(h,"isInputDevice");function v(y){return y.replace(/ *?\([^)]*?\) *?/g,"")}u(v,"removeDeviceIdFromDeviceLabel")},1473609332:(j,p,e)=>{"use strict";e.d(p,{t3:()=>i,Bh:()=>m,i4:()=>y});var t=e(9706240641),n=e(4103274853);function s(){return"0.1"}u(s,"getDevicePrefsVersion");var a=e(416787925),c=e(2825968873);const o="devicePrefs";function i(f){return(0,n.A)(f,g=>g[0])}u(i,"getPreferredDevices");function l(){return{camera:[],microphone:[a.dx,a.Zy],output:[a.dx,a.Zy]}}u(l,"createDefaultDevicePriority");function _(){return{camera:[],microphone:[],output:[]}}u(_,"createDefaultDeviceExtendedPriority");function d(){return{enableAGC:!0,enableNoiseSuppression:!0}}u(d,"createDefaultAudioPrefs");function r(){return{enableHD:!1,mirrorVideo:!1,effect:void 0}}u(r,"createDefaultVideoPrefs");function m(){const f=localStorage.getItem(o),g={version:s(),deviceIdPriorities:l(),deviceIdPrioritiesExtended:_(),video:r(),audio:d()};if(!f)return g;try{const M=JSON.parse(f);return M.version!==s()?g:{...g,...M}}catch(M){return(0,c.tZ)("DEVICES").error("Could not read device preferences from localStorage: ",M.message),g}}u(m,"readDevicePrefs");function h(f){return v.apply(this,arguments)}u(h,"updateDeviceIdPrioritiesExtended");function v(){return v=(0,t.coroutine)(function*(f){const g={},M=yield navigator.mediaDevices.enumerateDevices();for(const A of Object.keys(f)){const O=[],D=A;for(let E=0;E<f[D].length;E++){const C=f[D][E],S=M.find(b=>b.deviceId===C);S&&O.push({id:S.deviceId,groupId:S.groupId,label:S.label,labelWithoutId:(0,a.On)(S.label)})}g[A]=O}return g}),v.apply(this,arguments)}u(v,"_updateDeviceIdPrioritiesExtended");function y(f){return I.apply(this,arguments)}u(y,"writeDevicePrefs");function I(){return I=(0,t.coroutine)(function*(f){try{const g=yield h(f.deviceIdPriorities),M={...f,deviceIdPrioritiesExtended:g};localStorage.setItem(o,JSON.stringify(M))}catch(g){(0,c.tZ)("DEVICES").error("Could not write device preferences to localStorage: ",g.message)}}),I.apply(this,arguments)}u(I,"_writeDevicePrefs");function T(f,g){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const A=zipObject(g,range(g.length)),O=zipObject(M.map(D=>D.labelWithoutId),range(M.length));return sortBy(f,D=>{const E=removeDeviceIdFromDeviceLabel(D.label);return isUndefined(A[D.deviceId])?isUndefined(O[E])?1/0:O[E]:A[D.deviceId]})}u(T,"sortDevicesByPriorityWithFallback")},8736071954:(j,p,e)=>{"use strict";e.d(p,{Q4:()=>t,eJ:()=>n,lW:()=>a,uT:()=>s});const t="output";var n;(function(c){c.Denied="denied",c.Granted="granted",c.NotDetermined="not-determined",c.Prompt="prompt",c.Unknown="unknown"})(n||(n={}));var s;(function(c){c.NONE="none",c.Blur="blur",c.Both="both"})(s||(s={}));var a;(function(c){c.Camera="camera",c.Microphone="microphone"})(a||(a={}))},9195837907:(j,p,e)=>{"use strict";e.d(p,{t:()=>t});var t;(function(n){n.Blur="blur",n.Background="bg"})(t||(t={}))},7149946954:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>C});var t=e(9706240641),n=e(8736071954),s=e(9804928153),a=e(5387083734),c=e(462591818),o=e(571104883),i=e(796111729),l;(function(S){S.Granted="granted",S.Denied="denied",S.Prompt="prompt",S.NotDetermined="not-determined",S.Restricted="restricted",S.Unknown="unknown"})(l||(l={}));var _;(function(S){S.CAMERA="camera",S.MICROPHONE="microphone",S.SCREEN="display-capture"})(_||(_={}));const d={[c.mT.MICROPHONE]:_.MICROPHONE,[c.mT.CAMERA]:_.CAMERA,[c.mT.SCREEN]:_.SCREEN},r={[c.mT.MICROPHONE]:null,[c.mT.CAMERA]:null,[c.mT.SCREEN]:null},m=u(()=>({...r}),"getInitialPermissionsState");var h=e(6998663753),v=e(6422693406);let y=u(class{constructor(b){this.config=b,this.canAccessMediaResource=V=>{const R=this.wasPermissionGranted(V);return this.logger.info(`${V} permissions granted: ${R}`),{isAvailable:this.config.isElectronApiAvailable,status:this.permissions[V]}};var k=this;this.requestMediaAccess=function(){var V=(0,t.coroutine)(function*(R){return k.updatePermissionsState(R,k.getDefaultAccessResult().status),k.logger.error("Requesting media access is not implemented for this device, but it is being called. This is likely a bug."),v.S.resolve({isAvailable:k.config.isElectronApiAvailable,isGranted:!0})});return function(R){return V.apply(this,arguments)}}();var W=this;this.refreshAllPermissions=(0,t.coroutine)(function*(){try{yield W.refreshDevicePermissionStatus(c.mT.MICROPHONE),yield W.refreshDevicePermissionStatus(c.mT.CAMERA),yield W.refreshDevicePermissionStatus(c.mT.SCREEN)}catch(V){W.logger.warn("An error occurred while refreshing device permissions",V)}});var N=this;this.refreshDevicePermissionStatus=function(){var V=(0,t.coroutine)(function*(R){N.updatePermissionsState(R,N.getDefaultAccessResult().status)});return function(R){return V.apply(this,arguments)}}(),this.getDefaultAccessResult=()=>({isAvailable:this.config.isElectronApiAvailable,status:n.eJ.Granted}),this.updatePermissionsState=(V,R)=>{this.permissions[V]!==R&&(this.logger.info(`permission state for ${V} changed to ${R}`),this.permissions[V]=R,this.config.onPermissionsChange(this.permissions))},this.wasPermissionGranted=V=>{let R=!1;return this.permissions[V]&&(R=this.permissions[V]===n.eJ.Granted),R},this.hasNoKnownPermissions=V=>this.permissions[V]===null,this.logger=this.config.logger,this.permissions=this.config.initialState}},"DefaultDevicePermissions");var I=e(3245843483);let T=u(class extends y{constructor(b){super(b);var k=this;this.refreshDevicePermissionStatus=function(){var N=(0,t.coroutine)(function*(V){const{status:R}=yield(0,I.XBC)(V);k.logger.info(`Received ${V} access status for desktop app: ${R}`),k.updatePermissionsState(V,R)});return function(V){return N.apply(this,arguments)}}();var W=this;this.requestMediaAccess=function(){var N=(0,t.coroutine)(function*(V){const{isAvailable:R,isGranted:P}=yield(0,I.Nin)(V);return W.updatePermissionsState(V,P?n.eJ.Granted:n.eJ.Denied),{isAvailable:R,isGranted:!!P}});return function(V){return N.apply(this,arguments)}}()}},"DesktopDevicePermissions"),f=u(class extends y{constructor(b){super(b);var k=this;this.refreshDevicePermissionStatus=function(){var W=(0,t.coroutine)(function*(N){if(N===c.mT.SCREEN)return;const V=N===c.mT.MICROPHONE?"audioinput":"videoinput";try{const P=(yield navigator.mediaDevices.enumerateDevices()).filter($=>$.kind===V),z=P.length>0&&P.some($=>$.label.trim()!=="");k.updatePermissionsState(N,z?n.eJ.Granted:n.eJ.NotDetermined)}catch{k.logger.error('An error occurred enumerating devices. Setting access status to "granted"'),k.updatePermissionsState(N,n.eJ.NotDetermined)}});return function(N){return W.apply(this,arguments)}}()}},"FirefoxDevicePermissions"),g=u(class extends y{constructor(...b){super(...b),this.changeHandlers=m();var k=this;this.refreshDevicePermissionStatus=function(){var W=(0,t.coroutine)(function*(N){const V=yield navigator.permissions.query({name:d[N]});k.updatePermissionsState(N,V.state),k.logger.info(`Received ${N} access status for browser: ${k.permissions[N]}`),k.maybeRegisterPermissionChangeListener(N,V)});return function(N){return W.apply(this,arguments)}}(),this.maybeRegisterPermissionChangeListener=(W,N)=>{if(!this.changeHandlers[W]){const V=u(()=>this.onPermissionChangeEvent(W,N==null?void 0:N.state),"handler");N.addEventListener("change",V),this.changeHandlers[W]=V}},this.onPermissionChangeEvent=(W,N)=>{this.updatePermissionsState(W,N)}}},"BrowserDevicePermissions");var M=e(2001112473);const A="device-permissions-state",O=7*24*60*60*1e3,D=5*1e3;class E{isPersistedStateTrustworthy(b){return!(!b||Date.now()-b>O)}savePermissionsToLocalStorage(b){try{const k={permissions:b,timestamp:Date.now()},W=JSON.stringify(k);localStorage.setItem(A,W),this.logger.info(`Permissions saved to local storage: ${W}`)}catch(k){this.logger.error("Error saving permissions to local storage",k)}}readPermissionsFromLocalStorage(){try{const b=localStorage.getItem(A);if(b){this.logger.info(`Permissions loaded from local storage ${b}`);const k=JSON.parse(b);return this.isPersistedStateTrustworthy(k==null?void 0:k.timestamp)?k.permissions:(this.logger.warn("Permissions not considered trustworthy. Requiring refresh"),null)}}catch(b){this.logger.error("Error reading permissions from local storage",b)}return null}constructor(){this.isSSB=(0,o.y3)(),this.logger=(0,i.Wo)({label:"DEVICE-PERMISSIONS-MANAGER"}),this.initialized=!1;var b=this;this.init=(0,h.A)((0,t.coroutine)(function*(){b.logger.info("Initializing media device permissions manager"),b.initialized=!0,b.permissionsStrategy=b.getStrategy(),setTimeout(b.refreshAllPermissions,D),b.logger.info("Scheduled permissions refresh")})),this.canAccessMediaResource=V=>{var R,P;return!((R=this.permissionsStrategy)===null||R===void 0)&&R.canAccessMediaResource?this.permissionsStrategy.canAccessMediaResource(V):{isAvailable:!!(!((P=this.config)===null||P===void 0)&&P.isElectronApiAvailable),status:n.eJ.Granted}};var k=this;this.requestMediaAccess=function(){var V=(0,t.coroutine)(function*(R){var P;return!((P=k.config)===null||P===void 0)&&P.isElectronApiAvailable?k.permissionsStrategy.requestMediaAccess(R):(k.logger.warn("Permissions strategy not available"),{isAvailable:!1,isGranted:!0})});return function(R){return V.apply(this,arguments)}}(),this.getStrategy=()=>{const V={initialState:this.readPermissionsFromLocalStorage()||m(),isElectronApiAvailable:this.isSSB,onPermissionsChange:this.onPermissionsChange,logger:this.logger};return this.config=V,(0,o.y3)()?(this.logger.info("Using desktop device permissions strategy"),new T(V)):(0,o.gm)()?(this.logger.info("Using Firefox device permissions strategy"),new f(V)):this.shouldUsePermissionsApi()?(this.logger.info("Using browser device permissions strategy"),new g(V)):(this.logger.info("Using default device permissions strategy"),new y(V))},this.onPermissionsChange=V=>{this.logger.info("Permissions changed",V),(0,M.pq)(),this.savePermissionsToLocalStorage(V)};var W=this;this.refreshAllPermissions=(0,t.coroutine)(function*(){W.logger.info("Refreshing all permissions");try{yield navigator.mediaDevices.enumerateDevices(),yield W.refreshPermissions(c.mT.MICROPHONE),yield W.refreshPermissions(c.mT.CAMERA),yield W.refreshPermissions(c.mT.SCREEN)}catch(V){W.logger.warn("An error occurred while refreshing device permissions",V)}});var N=this;this.refreshPermissions=function(){var V=(0,t.coroutine)(function*(R){return N.logger.debug(`Refreshing ${R} permissions`),(0,a.IE)("media-access-update",(0,t.coroutine)(function*(){return N.permissionsStrategy.refreshDevicePermissionStatus(R)})).catch(P=>{N.logger.warn(`An error occurred while trying to check ${R} permissions`,P)})});return function(R){return V.apply(this,arguments)}}(),this.shouldUsePermissionsApi=()=>!this.isSSB&&!(0,o.gm)()&&"permissions"in s.J.navigator,this.clearAllPermissions=()=>{this.initialized&&this.savePermissionsToLocalStorage(m())}}}u(E,"DevicePermissionsManager");const C=new E},2001112473:(j,p,e)=>{"use strict";e.d(p,{_o:()=>fe,Nj:()=>pe,T5:()=>Te,Zy:()=>Q,G0:()=>Z,pq:()=>Ie,cT:()=>le,i_:()=>q});var t=e(9706240641),n=e(8736071954),s;(function(se){se.Microphone="audioinput",se.Camera="videoinput",se.Speakers="audiooutput"})(s||(s={}));const a=u(se=>({[n.lW.Microphone]:s.Microphone,[n.lW.Camera]:s.Camera,[n.Q4]:s.Speakers})[se],"adapter_mapDeviceTypeToDeviceKind"),c=u(se=>({[s.Microphone]:n.lW.Microphone,[s.Camera]:n.lW.Camera,[s.Speakers]:n.Q4})[se],"mapDeviceKindToDeviceType"),o=u(se=>{const Ae=c(se.kind);return Ae===n.Q4?{id:se.deviceId,label:se.label,groupId:se.groupId,type:n.Q4}:{id:se.deviceId,label:se.label,groupId:se.groupId,type:Ae,track:void 0}},"adapter_mapMediaDeviceInfoToDevice");var i=e(4423055085),l=e(9804928153),_=e(9113979368),d=e(8289365785),r=e(9268023148),m=e(2208015175),h=e(235108050),v=e(4103274853),y=e(796111729);const T=(0,y.Wo)({label:"DEVICE-PREFS"});var f=e(571104883),g=e(3078252698),M=e(3783723764),A=e(6217320234);const O=["ZoomAudioDevice (Virtual)"],C=["default","communications"],S=u(se=>C.includes(se),"isOSDefaultDeviceId"),b=u((se,Ae)=>{if(S(se.deviceId))return!1;const Ce=Ae.find(Le=>S(Le.deviceId)&&Le.kind===se.kind);return(Ce==null?void 0:Ce.groupId)===se.groupId&&(Ce==null?void 0:Ce.label.includes(se.label))},"isOSDefaultDeviceForType"),k=u(se=>{const Ae=/iphone/,Ce=se.label;if(!(0,g.A)(Ce))return!1;const Le=(0,f.cX)()&&Ce&&Ae.test(Ce.toLowerCase()),Ue=(Ce==null?void 0:Ce.toLowerCase().includes("display audio"))||Ce.toLowerCase().includes("displayport");return Le||Ue},"shouldDeprioritizeDevice"),W=u(se=>!se.label||O.includes(se.label),"shouldRemoveDevice"),N=u(se=>se&&se.replace(/ *?\([a-zA-Z0-9]{4}:[a-zA-Z0-9]{4}\) *?/g,""),"removeDeviceFingerprintFromLabel"),V=u(se=>se.filter(Ae=>Ae.label).map(Ae=>({deviceId:Ae.deviceId,kind:Ae.kind,label:N(Ae.label)||"",groupId:Ae.groupId})),"scrubAvailableDevices"),R=u((se,Ae)=>(0,M.A)(se,Ce=>{var Le;return(Le=Ae[Ce.deviceId])===null||Le===void 0?void 0:Le.selected},"desc"),"sortDevicesByLastSelection"),P=u((se,Ae)=>(0,M.A)(se,Ce=>{var Le;return(Le=Ae[Ce.deviceId])===null||Le===void 0?void 0:Le.used},"desc"),"sortDevicesByLastUsed"),z=u(se=>(0,A.A)(se,Ae=>Ae.label),"sortDevicesByLabel");var $=e(6696292586),x=e(6313685253),Y=e(8086952004);const ne="version",re=3,_e={1:se=>se,2:se=>(0,v.A)(se,Ae=>{if((0,$.A)(Ae))return Ae;const Ce={...Ae},Le=N(Ae.deviceLabel);return Le&&Le!==Ae.deviceLabel&&(Ce.deviceLabel=Le),Ce}),3:se=>(0,x.A)(se,(Ae,Ce,Le)=>{if(!S(Le)&&Le!==ne){const Ue=(0,Y.A)(se,(Pe,He)=>S(He)&&Pe.deviceInfo.kind===Ce.deviceInfo.kind&&Pe.deviceInfo.groupId===Ce.deviceInfo.groupId&&Pe.deviceInfo.label.includes(Ce.deviceInfo.label));Ue&&((!Ce.used&&Ue.used||Ce.used&&Ue.used&&Ce.used<Ue.used)&&(Ce.used=Ue.used),(!Ce.selected&&Ue.selected||Ce.selected&&Ue.selected&&Ce.selected<Ue.selected)&&(Ce.selected=Ue.selected)),Ae[Le]=Ce}return Ae},{})},G=u(se=>se[ne]!==re,"isMigrationNeeded"),ge=u(se=>{if(!_e[re])throw new Error(`No migration found for version ${re}`);const Ae=se[ne]||0;if(Ae===re)return se;let Ce={...se};for(let Le=Ae;Le<re;Le++){const Ue=Le+1,Pe=_e[Ue];Ce=Pe(Ce),Ce[ne]=Ue}return Ce},"maybeMigrateDeviceHistory");var oe=e(1649982175);const me="device-selection-records",ue=T,ae=u(()=>{let se;try{const Ae=localStorage.getItem(me);Ae?(se=JSON.parse(Ae),G(se)?(ue.debug(`Migration needed for device selection history from ${se[ne]} to ${re}`),se=ge(se)):ue.debug("No migration needed for device selection history")):se=void 0}catch(Ae){ue.error("Failed to read device selection history from local storage",Ae),se=void 0}return ue.debug("Reading device selection history from local storage",se),se?(0,oe.A)(se,ne):void 0},"readSelectionHistoryFromLocalStorage"),he=u(se=>{if(se){ue.debug("Writing device selection history to local storage",se);try{const Ae={...se,[ne]:re};localStorage.setItem(me,JSON.stringify(Ae))}catch(Ae){ue.error("Failed to write device selection history to local storage",Ae)}}},"saveDeviceSelectionRecordsToLocalStorage");var ce=e(700984029),ee=e(6533394955),J=e(1473609332);class X{constructor(){this.logger=T,this.availableDevices=[],this.deviceSelectionRecords={},this.currentTeamId=null,this.isFirstRun=!1,this.useDevicesExp=!1,this.osDefaultDevices={[s.Microphone]:null,[s.Camera]:null,[s.Speakers]:null},this.prioritizedDeviceLists={[s.Microphone]:[],[s.Camera]:[],[s.Speakers]:[]};var Ae=this;this.init=function(){var Pe=(0,t.coroutine)(function*(He){let{teamId:Qe,useDevicesExp:lt}=He;if(Qe!==Ae.currentTeamId){Ae.useDevicesExp=lt,Ae.useDevicesExp&&Ae.logger.info("Initializing device preferences manager with experimental features"),Ae.currentTeamId=Qe,Ae.dispatch=(0,ee.getStoreInstanceByTeamId)(Qe).dispatch;try{Ae.deviceSelectionRecords=ae()||{},Ae.isFirstRun=(0,_.A)(Ae.deviceSelectionRecords),Ae.logger.info("Initializing device preferences manager from local storage",Ae.deviceSelectionRecords),yield Ae.updateAvailableDevices(),Ae.maybeApplyLegacyDevicePrefs(),navigator.mediaDevices.addEventListener("devicechange",Ae.handleDeviceListChange)}catch(qe){Ae.logger.error("Error initializing device preferences manager",qe)}}});return function(He){return Pe.apply(this,arguments)}}();var Ce=this;this.refreshAvailableDevices=(0,t.coroutine)(function*(){yield Ce.updateAvailableDevices()}),this.getPreferredDeviceOfType=Pe=>this.getPrioritizedDeviceListOfType(Pe)[0],this.getPrioritizedDeviceListOfType=Pe=>this.prioritizedDeviceLists[Pe],this.recordDeviceSelected=(Pe,He)=>{try{const{deviceId:Qe,deviceLabel:lt}=this.lookupDeviceDetailsById(Pe,He);if(!Qe){this.logger.warn("Device record not found for selected device id",Pe);return}if(!this.deviceSelectionRecords[Qe]){this.logger.warn("No device selection record found for device id",Qe);return}this.logger.info(`Reporting ${He} device selected, label: ${lt}, id: ${Qe}`),this.deviceSelectionRecords[Qe].selected=Date.now(),this.propagateUpdateToExternalStores()}catch(Qe){this.logger.error("Error reporting device selected",Qe)}},this.recordDeviceUsed=(Pe,He)=>{try{const{deviceId:Qe,deviceLabel:lt}=this.lookupDeviceDetailsById(Pe,He);if(!Qe){this.logger.warn("Device record not found for used device id",Pe);return}this.logger.info(`Reporting ${He} device used, label: ${lt}, id: ${Qe}`),this.deviceSelectionRecords[Qe].used=Date.now(),this.propagateUpdateToExternalStores()}catch(Qe){this.logger.error("Error reporting device used",Qe)}},this.getOSDefaults=()=>this.osDefaultDevices,this.getDeviceSelectionRecords=()=>this.deviceSelectionRecords,this.clearDeviceSelectionRecords=()=>{he({})},this.lookupDeviceDetailsById=(Pe,He)=>{var Qe;(0,_.A)(this.prioritizedDeviceLists[He])&&this.updateAvailableDevices();const lt={deviceId:null,deviceLabel:null},qe=S(Pe)?this.osDefaultDevices[He]:Pe;if(qe&&S(qe)&&this.logger.warn(`OS default device id (${Pe}) used for details. This should not happen`),!qe)return this.logger.warn("Device record not found for device id",qe),lt;lt.deviceId=qe;const ct=(Qe=this.deviceSelectionRecords[qe])===null||Qe===void 0?void 0:Qe.deviceLabel,tt=N(ct);return tt?(lt.deviceLabel=tt,lt):(this.logger.warn("Device record not found for device id",qe),lt)},this.createEmptyDeviceSelectionRecord=Pe=>({deviceInfo:Pe,deviceLabel:Pe.label,selected:null,used:null});var Le=this;this.updateAvailableDevices=(0,t.coroutine)(function*(){const Pe=yield l.J.navigator.mediaDevices.enumerateDevices();try{Le.logger.info(`Available devices ${JSON.stringify(Pe,null,2)}`)}catch(He){Le.logger.error("Error logging available devices",He)}Le.availableDevices=V(Pe),Le.updateDeviceRecords(Le.availableDevices),Le.propagateUpdateToExternalStores()}),this.maybeApplyLegacyDevicePrefs=()=>{try{if(!this.isFirstRun)return;const Pe=(0,J.Bh)(),{deviceIdPriorities:He}=Pe,Qe=(0,d.A)(He==null?void 0:He[n.lW.Microphone]),lt=(0,d.A)(He==null?void 0:He[n.lW.Camera]),qe=(0,d.A)(He==null?void 0:He[n.Q4]);Qe&&!S(Qe)?(this.logger.info("Recording preferred microphone from legacy preferences",Qe),this.recordDeviceSelected(Qe,s.Microphone)):this.logger.info("No preferred microphone found in legacy preferences"),lt&&!S(lt)?(this.logger.info("Recording preferred camera from legacy preferences",lt),this.recordDeviceSelected(lt,s.Camera)):this.logger.info("No preferred camera found in legacy preferences"),qe&&!S(qe)?(this.logger.info("Recording preferred speakers from legacy preferences",qe),this.recordDeviceSelected(qe,s.Speakers)):this.logger.info("No preferred speakers found in legacy preferences"),this.isFirstRun=!1}catch(Pe){this.logger.error("Error applying legacy device preferences",Pe)}},this.updatePrioritizedDeviceLists=()=>{this.logger.debug("Updating prioritized device lists"),this.updatePrioritizedDeviceListOfType(s.Microphone),this.logger.debug("Updated mics",this.prioritizedDeviceLists[s.Microphone]),this.updatePrioritizedDeviceListOfType(s.Camera),this.logger.debug("Updated cameras",this.prioritizedDeviceLists[s.Camera]),this.updatePrioritizedDeviceListOfType(s.Speakers),this.logger.debug("Updated speakers",this.prioritizedDeviceLists[s.Speakers])};var Ue=this;this.handleDeviceListChange=(0,r.A)((0,t.coroutine)(function*(){try{Ue.logger.info(`Device list change event received at ${Date.now()}`),Ue.updateAvailableDevices()}catch(Pe){Ue.logger.error("Error handling device list change event",Pe)}}),1e3,{leading:!0,trailing:!0,maxWait:2e3}),this.updateDeviceRecords=Pe=>{(0,m.A)(Pe,He=>{if(!He.deviceId||S(He.deviceId))return;const Qe=this.deviceSelectionRecords[He.deviceId],lt=!!Qe;if(lt&&He.label&&Qe.deviceLabel!==He.label&&(Qe.deviceLabel=He.label,Qe.deviceInfo.label=He.label,this.logger.info(`Device label updated from ${Qe.deviceLabel} to ${He.label}`)),lt)this.deviceSelectionRecords[He.deviceId].deviceInfo=He;else{this.logger.info(`Creating new device history record for ${He.label} ${He.deviceId}`);const tt=this.createEmptyDeviceSelectionRecord(He);if(tt.deviceLabel){const it=Object.values(this.deviceSelectionRecords).find(Ge=>Ge.deviceInfo.kind===He.kind&&Ge.deviceLabel===tt.deviceLabel);it?(this.logger.info(`Matching device record found for label: ${it.deviceLabel} ${it.deviceInfo.deviceId}`),this.deviceSelectionRecords[He.deviceId]=it):this.deviceSelectionRecords[He.deviceId]=tt}}if(b(He,Pe)&&this.osDefaultDevices[He.kind]!==He.deviceId){var ct;const it=((ct=this.getPreferredDeviceOfType(He.kind))===null||ct===void 0?void 0:ct.deviceId)===this.osDefaultDevices[He.kind];this.osDefaultDevices[He.kind]=He.deviceId,this.logger.info(`OS default device updated for ${He.kind}: ${He.label} ${He.deviceId}`),it&&(this.logger.info(`Preferred ${He.kind} OS default has changed to: ${He.label} ${He.deviceId}. Recording as selected.`),this.recordDeviceSelected(He.deviceId,He.kind))}})},this.updatePrioritizedDeviceListOfType=Pe=>{let He=null;const Qe=[],lt=[],qe=[],ct=[];this.availableDevices.forEach(Ge=>{const We=Ge.deviceId===this.osDefaultDevices[Ge.kind];if(Ge.kind!==Pe||S(Ge.deviceId))return;const xe=this.deviceSelectionRecords[Ge.deviceId];if(!xe){this.logger.error("No selection record found for device",Ge);return}if(!W(xe.deviceInfo)){if(xe.selected){Qe.push(xe.deviceInfo);return}if(xe.used){lt.push(xe.deviceInfo);return}if(k(xe.deviceInfo)){qe.push(xe.deviceInfo);return}if(We){He=xe.deviceInfo;return}ct.push(xe.deviceInfo)}});const tt=[];tt.push(...R(Qe,this.deviceSelectionRecords)),tt.push(...P(lt,this.deviceSelectionRecords)),tt.push(He),tt.push(...z(ct)),tt.push(...qe);const it=(0,h.A)(tt).filter(Boolean);return this.prioritizedDeviceLists[Pe]=it,it},this.propagateUpdateToExternalStores=()=>{he(this.deviceSelectionRecords),this.updatePrioritizedDeviceLists(),this.logger.info("Propagating device selection history update"),this.dispatch((0,ce.Fb)(void 0))}}}u(X,"DevicePreferencesManager");const F=new X,L={printDeviceSelectionRecords:()=>{const se=F.getDeviceSelectionRecords(),Ae=(0,v.A)(se,Ce=>{var Le;return{deviceId:Ce.deviceInfo.deviceId,label:Ce.deviceLabel,type:Ce.deviceInfo.kind,"is preferred":((Le=F.getPreferredDeviceOfType(Ce.deviceInfo.kind))===null||Le===void 0?void 0:Le.deviceId)===Ce.deviceInfo.deviceId,"last selected":Ce.selected?Ce.selected.toString():"Never selected","last used":Ce.used?Ce.used.toString():"Never used","is available":!!F.getPrioritizedDeviceListOfType(Ce.deviceInfo.kind).find(Ue=>Ue.deviceId===Ce.deviceInfo.deviceId),"is OS default":Ce.deviceInfo.deviceId===F.getOSDefaults()[Ce.deviceInfo.kind],groupId:Ce.deviceInfo.groupId}});console.log("Device selection records"),console.table(Ae)},printPreferredMicrophone:()=>{const se=F.getPreferredDeviceOfType(s.Microphone);console.log("Preferred microphone",se)},printPreferredCamera:()=>{const se=F.getPreferredDeviceOfType(s.Camera);console.log("Preferred camera",se)},printPreferredSpeakers:()=>{const se=F.getPreferredDeviceOfType(s.Speakers);console.log("Preferred speakers",se)},printPrioritizedDeviceLists:()=>{const se=(0,v.A)(F.getOSDefaults(),(Ae,Ce)=>F.getPrioritizedDeviceListOfType(Ce));(0,m.A)(se,(Ae,Ce)=>{const Le=Ae.map(Ue=>({deviceId:Ue.deviceId,label:Ue.label,groupId:Ue.groupId}));console.log(`Prioritized list for ${Ce}`),console.table(Le)})},printRawDeviceList:(0,t.coroutine)(function*(){const se=yield l.J.navigator.mediaDevices.enumerateDevices();console.log("Available devices"),se.forEach(Ae=>{console.log(Ae)})}),printDebugInfo:()=>{L.printDeviceSelectionRecords(),L.printPrioritizedDeviceLists(),L.printPreferredMicrophone(),L.printPreferredCamera(),L.printPreferredSpeakers(),L.printRawDeviceList()},clearDeviceSelectionRecords:()=>{F.clearDeviceSelectionRecords(),l.J.location.reload()}};(0,i.ul)("devices",L);const K=F;let B=null;const Q=function(){var se=(0,t.coroutine)(function*(Ae){let{teamId:Ce,useDevicesExp:Le}=Ae;!Ce||B===Ce||(B=Ce,yield K.init({teamId:Ce,useDevicesExp:Le}))});return u(function(Ce){return se.apply(this,arguments)},"initializeDevicePreferences")}(),q=u((se,Ae)=>{if(!B)return;const Ce=a(Ae);K.recordDeviceUsed(se,Ce)},"reportDeviceUsed"),le=u((se,Ae)=>{if(!B)return;const Ce=a(Ae);K.recordDeviceSelected(se,Ce)},"reportDeviceSelected"),Te=u(()=>{if(!B)return;const se=K.getPrioritizedDeviceListOfType(s.Microphone)||[],Ae=K.getPrioritizedDeviceListOfType(s.Camera)||[],Ce=K.getPrioritizedDeviceListOfType(s.Speakers)||[];return{[n.lW.Microphone]:se.map(o),[n.lW.Camera]:Ae.map(o),[n.Q4]:Ce.map(o)}},"getPrioritizedDeviceLists"),Ie=function(){var se=(0,t.coroutine)(function*(){B&&(yield K.refreshAvailableDevices())});return u(function(){return se.apply(this,arguments)},"refreshDeviceListsOnDevicePermissionsUpdate")}(),De=u(se=>{if(!B)return;const Ae=mapDeviceTypeToDeviceKind(se);return devicePreferencesManager.getPrioritizedDeviceListOfType(Ae).map(mapMediaDeviceInfoToDevice)},"getPrioritizedDeviceListOfType"),pe=u(se=>{if(!B)return;const Ae=a(se),Ce=K.getPreferredDeviceOfType(Ae);if(Ce)return o(Ce)},"getPreferredDeviceOfType"),fe=u(()=>{var se;return((se=pe(n.Q4))===null||se===void 0?void 0:se.id)||"default"},"getPreferredAudioSinkId"),Z=u(()=>!!B,"isDevicePreferencesManagerInitialized")},63202349:(j,p,e)=>{"use strict";e.d(p,{k:()=>o});var t=e(6664301844),n=e(2825968873),s=e(6926388022),a=e(4423055085);const c={debug:0,info:1,warn:2,error:3,action:0};class o{debug(l){if(!(this.level>t.$b.DEBUG||!o.debugLogsEnabled))if(typeof l=="string"){const _=l;this.consoleLogger.debug(_)}else{const _=l();this.consoleLogger.debug(_)}}info(l){this.level>t.$b.INFO||this.consoleLogger.info(l)}warn(l){this.level>t.$b.WARN||this.consoleLogger.warn(l)}error(l){this.level>t.$b.ERROR||this.callLogger.error(l)}setLogLevel(l){this.level=l}getLogLevel(){return this.level}getName(){return this.name}constructor(l,_){this.name=l,this.level=_||c[(0,s.XM)()],this.consoleLogger=(0,n.Cc)(l),this.callLogger=(0,n.Jt)(l)}}u(o,"FreeWillyLogger"),o.debugLogsEnabled=!1,(0,a.ul)("toggleChimeDebugLogs",()=>{o.debugLogsEnabled=!o.debugLogsEnabled})},4103673490:(j,p,e)=>{"use strict";e.d(p,{Y:()=>Xe});var t=e(9706240641),n=e(1649982175),s=e(3750057149),a=e(6664301844),c=e(5741354339),o=e(8848660647),i=e(2825968873),l=e(8736071954),_=e(7561130599),d=e(4708000837),r=e(462591818),m=e(9268023148),h=e(3078252698),v=e(2003990933),y=e(571104883),I=e(8872167513),T=e(2709531527),f=e(6246464105),g=e(9853754481);let M=u(class{getLevel(){return this.analyserNode.getByteTimeDomainData(this.data),(0,g.n2)(this.data)/g.Ep}constructor(U){this.analyserNode=U,this.data=new Uint8Array(this.analyserNode.fftSize)}},"AudioAnalyser");var A=e(9009528296);const O=300;class D{stop(){this.previewAudioAnalyser=void 0,clearTimeout(this.timeoutId)}setPreviewAudioAnalyser(U){this.previewAudioAnalyser=U}constructor(){this.timeoutId=-1,this.monitorAudioLevel=()=>{this.previewAudioAnalyser&&A.A.subscriberCount>0&&A.A.publish(this.previewAudioAnalyser.getLevel()),this.timeoutId=window.setTimeout(this.monitorAudioLevel,O)},this.monitorAudioLevel()}}u(D,"AudioLevelMonitor");function E(Me,U){let{skipIntermediatePendingRuns:H=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},te=!1,de=[];const Re=function(){var Ye=(0,t.coroutine)(function*(){for(var we=arguments.length,vt=new Array(we),ot=0;ot<we;ot++)vt[ot]=arguments[ot];if(te){H&&(de=[]);const Ln=(0,c.u)();return de.push({args:vt,deferred:Ln}),Ln}te=!0;const Mt=yield U.call(Me,...vt);te=!1;const jt=de.shift();return jt&&Re(...jt.args).then(jt.deferred.resolve).catch(jt.deferred.reject),Mt});return u(function(){return Ye.apply(this,arguments)},"run")}();return Re}u(E,"serialGuard");var C=e(3496486794),S=e(2001112473);class b{initialize(U){let{preferredDeviceId:H}=U;var te,de,Re,Ye,we,vt,ot,Mt,jt,Ln,xn,bn,On,Un;if(!(!((te=this.defaultDeviceController)===null||te===void 0||(de=te.activeDevices)===null||de===void 0||(Re=de.audio)===null||Re===void 0||(Ye=Re.stream)===null||Ye===void 0)&&Ye.getAudioTracks))return;const Dn=this.defaultDeviceController;if(!(!((we=this.defaultDeviceController)===null||we===void 0||(vt=we.activeDevices)===null||vt===void 0||(ot=vt.audio)===null||ot===void 0||(Mt=ot.stream)===null||Mt===void 0)&&Mt.getAudioTracks)){this.logger.warn("Unable to retrieve audio tracks from the default device controller");return}const zn=Dn.activeDevices.audio.stream.getAudioTracks();if(zn.length===1)this.audioInputTrack=zn[0];else{this.logger.warn("No audio input tracks where found for the current audio device. Audio input tracks amount: {tracks.length}");return}(jt=this.audioInputTrack)===null||jt===void 0||jt.addEventListener("mute",this.onMute),(Ln=this.audioInputTrack)===null||Ln===void 0||Ln.addEventListener("unmute",this.onUnmute),(xn=this.audioInputTrack)===null||xn===void 0||xn.addEventListener("ended",this.onEnded),!((bn=this.audioInputTrack)===null||bn===void 0)&&bn.muted?this.onMute():this.onUnmute();const es=(Un=(On=this.audioInputTrack)===null||On===void 0?void 0:On.getSettings())===null||Un===void 0?void 0:Un.deviceId;if(!es){this.logger.warn("No deviceId found for audio input track");return}es!==H?this.logger.warn(`Used audio input track device id (${es}) does not match the preferred device id (${H}). 
				Preferred device is unavailable. User may report issues with other participants hearing them.`):this.logger.info(`Used audio input track device id matches the preferred device id (${H})`),(0,S.cT)(es,l.lW.Microphone)}tearDown(){var U,H,te;(U=this.audioInputTrack)===null||U===void 0||U.removeEventListener("mute",this.onMute),(H=this.audioInputTrack)===null||H===void 0||H.removeEventListener("unmute",this.onUnmute),(te=this.audioInputTrack)===null||te===void 0||te.removeEventListener("ended",this.onEnded)}onMute(){this.isAudioInputTrackMuted=!0,this.logger.warn("Audio input track is muted. Alerting the user"),this.observer.onAudioInputTrackMuted()}onUnmute(){this.isAudioInputTrackMuted&&this.logger.info("Audio input track is unmuted. Removing alert if there is one"),this.observer.onAudioInputTrackUnMuted(),this.isAudioInputTrackMuted=!1}onEnded(){this.logger.warn("Audio input track was ended.")}constructor(U,H,te){this.defaultDeviceController=U,this.observer=H,this.logger=te,this.isAudioInputTrackMuted=!1,this.onMute=this.onMute.bind(this),this.onUnmute=this.onUnmute.bind(this),this.onEnded=this.onEnded.bind(this)}}u(b,"AudioInputTrackHandler");var k;(function(Me){Me.Blur="BLUR",Me.Image="IMAGE",Me.None="NONE"})(k||(k={}));class W{constructor({backgroundEffect:U}){this.filterCPUUtilizationHigh=H=>{const{cpuUtilization:te,filterMillis:de,periodMillis:Re}=H;this.callLogger.warn(`CPU utilization by video background processor is high - cpuUtilization: ${te} - spent ${de}ms of last ${Re}ms processing video background`)},this.filterFrameDurationHigh=H=>{const{framesDropped:te,avgFilterDurationMillis:de,framerate:Re,periodMillis:Ye}=H;this.callLogger.warn(`Frame duration by video background processor is high. framerate: ${Re}, frames dropped: ${te}, spent ${de}ms of last ${Ye}ms processing video background`)},this.callLogger=(0,i.Jt)(`VIDEO-BACKGROUND-${U}`)}}u(W,"VideoBackgroundObserver");const N=W;var V=e(5071086688),R=e(5470425448),P=e(1473609332),z=e(9195837907),$=e(416787925),x=e(7149946954);class Y{load(){var U=this;return(0,t.coroutine)(function*(){if(U.url.origin===window.location.origin)return new Worker(U.url,U.options);const te=yield(yield fetch(U.url)).text(),de=new Blob([te],{type:"application/javascript"}),Re=URL.createObjectURL(de);return new Worker(Re,U.options)})()}constructor(U,H){this.url=U,this.options=H}}u(Y,"CORSWorker");class ne{intrinsicDevice(){var U=this;return(0,t.coroutine)(function*(){return U.device})()}stop(){var U=this;return(0,t.coroutine)(function*(){var H;U.generatorVideoTrack.stop(),(H=U.inputMediaStream)===null||H===void 0||H.getTracks().forEach(te=>te.stop()),(yield U.worker).terminate()})()}onOutputStreamDisconnect(){if(this.generatorVideoTrack.stop(),!(this.device instanceof MediaStream)){var U;(U=this.inputMediaStream)===null||U===void 0||U.getTracks().forEach(H=>H.stop())}}transformStream(U){var H=this;return(0,t.coroutine)(function*(){if(H.inputMediaStream=U,U){const te=new MediaStreamTrackProcessor({track:U.getVideoTracks()[0]});(yield H.worker).postMessage({type:"init",input:te.readable,output:H.generatorVideoTrack.writable,width:U.getVideoTracks()[0].getSettings().width,height:U.getVideoTracks()[0].getSettings().height,bgImg:H.bgImg},[te.readable,H.generatorVideoTrack.writable,...H.bgImg?[H.bgImg]:[]])}return H.outputMediaStream})()}constructor(U,H){this.device=U,this.bgImg=H,this.worker=new Y(new URL(e.p+e.u("js_modern_app_free-willy_free-willy-sdk_filter-worker_background-worker_ts"),e.b)).load(),this.generatorVideoTrack=new MediaStreamTrackGenerator({kind:"video"}),this.outputMediaStream=new MediaStream([this.generatorVideoTrack])}}u(ne,"BackgroundWorkerVideoTransformDevice");var re=e(5221945366),_e;(function(Me){Me.START_PREVIEW="start-preview",Me.STOP_PREVIEW="stop-preview",Me.ENABLE="enable",Me.DISABLE="disable"})(_e||(_e={}));const G=1e4,ge=30,oe="medium",me=!0,ue=50;let ae=u(class{shutdown(){var U=this;return(0,t.coroutine)(function*(){var H,te,de;if(U.isShuttingDown=!0,U.voiceFocusDevice){var Re;yield U.voiceFocusDevice.stop(),yield(Re=U.voiceFocusManager)===null||Re===void 0?void 0:Re.tearDown(),U.voiceFocusDevice=void 0}U.audioVideoFacade.removeDeviceChangeObserver(U),U.audioVideoFacade.stopLocalVideoTile(),yield U.audioVideoFacade.stopVideoInput(),yield U.audioVideoFacade.stopAudioInput(),U.audioVideoFacade.unbindAudioElement(),U.removeAudioElementErrorHandler(),yield U.clearVideoTransformDeviceRefs(),U.audioInputDeviceRefreshTimer&&(clearTimeout(U.audioInputDeviceRefreshTimer),U.audioInputDeviceRefreshTimer=null),U.videoInputDeviceRefreshTimer&&(clearTimeout(U.videoInputDeviceRefreshTimer),U.videoInputDeviceRefreshTimer=null),U.cameraMetricsTimeout&&(clearTimeout(U.cameraMetricsTimeout),U.cameraMetricsTimeout=null),yield(te=(H=(0,a._R)())===null||H===void 0?void 0:H.getAudioContext())===null||te===void 0?void 0:te.suspend(),U.callLogger.info("Audio context suspended"),(de=U.audioLevelMonitor)===null||de===void 0||de.stop(),delete U.audioLevelMonitor,U.callLogger.info("Device manager shutdown complete")})()}init(){var U=this;return(0,t.coroutine)(function*(){yield U.refreshMediaDeviceInfo(),yield U.determineInitialMicrophonePermissionState(),U.enumerateDevices(),U.logDevices(),yield U.updateMicrophone(),yield U.updateSpeaker(),U.isCameraEnabled&&(yield U.updateCamera())})()}determineInitialMicrophonePermissionState(){var U=this;return(0,t.coroutine)(function*(){if((0,y.y3)()){yield U.determineInitialMicrophonePermissionStateForDesktop();return}yield U.determineInitialMicrophonePermissionStateForBrowser()})()}determineInitialMicrophonePermissionStateForBrowser(){var U=this;return(0,t.coroutine)(function*(){const{status:H}=x.Ay.canAccessMediaResource(r.mT.MICROPHONE);let te;(H===l.eJ.Prompt||H===l.eJ.NotDetermined||H===l.eJ.Unknown)&&(yield U.audioVideoFacade.listAudioInputDevices(!0),te=x.Ay.canAccessMediaResource(r.mT.MICROPHONE).status),(H===l.eJ.Denied||te===l.eJ.Denied)&&(U.observer.onBrowserMediaDeviceAccessDenied(r.mT.MICROPHONE),U.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),U.isStartMutedBarrierActive=!0)})()}determineInitialMicrophonePermissionStateForDesktop(){var U=this;return(0,t.coroutine)(function*(){const H=yield U.maybeCheckSystemMediaAccess(r.mT.MICROPHONE);(0,y.j9)()||(0,y.uF)()&&!U.options.useGetMediaAccessCheckForWindows||H&&(H==null?void 0:H.status)!==l.eJ.Granted&&(U.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),U.isStartMutedBarrierActive=!0)})()}setAGC(U){var H=this;return(0,t.coroutine)(function*(){H.prefs.audio&&H.prefs.audio.enableAGC!==U&&(H.callLogger.info(`AGC setting changed: ${U}`),H.prefs.audio.enableAGC=U,(0,P.i4)(H.prefs),yield H.updateMicrophone())})()}setPreferredDevice(U,H){var te=this;return(0,t.coroutine)(function*(){switch((0,S.cT)(U,H),H){case l.lW.Microphone:yield te.updateMicrophone();break;case l.Q4:yield te.updateSpeaker();break;case l.lW.Camera:te.isCameraEnabled&&(yield te.updateCamera());break;default:break}})()}setPreferredCameraDeviceForPreview(U){var H=this;return(0,t.coroutine)(function*(){H.enumerateDevices(),yield H.updateCamera()})()}setVideoBackgroundEffect(U){let{effect:H,effectBgKey:te}=U;var de=this;return(0,t.coroutine)(function*(){de.prefs.video&&(de.callLogger.info(`Video background effect changed: ${H}`),de.prefs.video.effect=H,de.prefs.video.effectBgKey=te,(0,P.i4)(de.prefs),de.isCameraEnabled&&(yield de.updateCamera()))})()}setNoiseSuppression(U){var H=this;return(0,t.coroutine)(function*(){H.prefs.audio&&H.prefs.audio.enableNoiseSuppression!==U&&(H.callLogger.info(`Noise suppression setting changed: ${U}`),H.prefs.audio.enableNoiseSuppression=U,(0,P.i4)(H.prefs),yield H.updateMicrophone())})()}setStartMutedBarrier(U){var H=this;return(0,t.coroutine)(function*(){H.isStartMutedBarrierActive=U})()}setMicrophone(U){var H=this;return(0,t.coroutine)(function*(){var te;if(H.voiceFocusManager&&(yield H.voiceFocusManager.setMute(U)),!U){var de;H.audioVideoFacade.realtimeMuteLocalAudio(),(de=H.huddleEventsTrace)===null||de===void 0||de.update({name:T.p.MICROPHONE,type:T.G.STOP});return}H.isStartMutedBarrierActive&&(H.callLogger.info("Releasing start muted barrier"),H.isStartMutedBarrierActive=!1),H.audioVideoFacade.realtimeUnmuteLocalAudio(),(te=H.huddleEventsTrace)===null||te===void 0||te.update({name:T.p.MICROPHONE,type:T.G.START})})()}requestPreviewStreamForDeviceId(U,H,te){H===l.lW.Camera&&this.handleCameraChanges({type:_e.START_PREVIEW,deviceId:U,videoElement:te})}stopVideoPreviewForVideoInput(U){this.handleCameraChanges({type:_e.STOP_PREVIEW,videoElement:U||this.cameraPreviewVideoElement})}setCamera(U){U!==this.isCameraEnabled&&(this.isCameraEnabled=U,this.isCameraEnabled?(this.handleCameraChanges({type:_e.ENABLE}),this.maybeCheckSystemMediaAccess(r.mT.CAMERA)):this.handleCameraChanges({type:_e.DISABLE}))}setCameraQuality(U,H,te,de){this.audioVideoFacade.chooseVideoInputQuality(U,H,te),this.audioVideoFacade.setVideoMaxBandwidthKbps(de)}audioVideoDidStart(){return(0,t.coroutine)(function*(){})()}localVideoTileDidUpdate(U){(!U.boundVideoStream||!U.boundVideoStream.active)&&this.callLogger.info(`DeviceManager::localVideoTileDidUpdate ${U.boundVideoStream?"boundVideoStream is not active":"there is no boundVideoStream"}`),!U.isContent&&!this.isCameraEnabled?this.waitForCameraReady.reject(new Error("Camera disabled")):this.waitForCameraReady.resolve()}maybeBindAudioOutputElement(){var U=this;return(0,t.coroutine)(function*(){if(!U.isAudioOutputElementBound&&U.audioOutputElement){try{yield U.audioVideoFacade.bindAudioElement(U.audioOutputElement)}catch(H){U.callLogger.info(`bindAudioElement failed: error: ${H.name}, message: ${H.message}`);return}U.isAudioOutputElementBound=!0}})()}maybeCheckSystemMediaAccess(U){var H=this;return(0,t.coroutine)(function*(){if(!(0,y.y3)()){const{status:te}=x.Ay.canAccessMediaResource(U);if(te===l.eJ.Granted)return{isAvailable:!1,status:l.eJ.Granted}}if((0,y.cX)()||H.options.useGetMediaAccessCheckForWindows&&(0,y.uF)())try{const te=x.Ay.canAccessMediaResource(U);if(H.callLogger.info(`DeviceManager::getMediaAccessStatus ${U} electron API available: ${te.isAvailable} and status: ${te.status}`),!te.isAvailable)return{isAvailable:!1,status:l.eJ.NotDetermined};if(te.status===l.eJ.Granted)return H.observer.onDeviceAccessApproved(U),te;let de;return te.status===l.eJ.NotDetermined&&(de=U==="screen"?null:yield x.Ay.requestMediaAccess(U),H.callLogger.info(`DeviceManager::askForMediaAccess ${U} electron API available: ${!!(de!=null&&de.isAvailable)} and isConsentGranted: ${de==null?void 0:de.isGranted}`),U!=="screen"&&(de!=null&&de.isGranted))?(H.observer.onDeviceAccessApproved(U),{status:l.eJ.Granted,isAvailable:!0}):((te.status===l.eJ.Denied||de&&!de.isGranted)&&(H.micPermissionDenied=!0,H.observer.onCheckSystemMediaAccess(U)),te)}catch(te){H.callLogger.info(`DeviceManager::Error retrieving system access for ${U}: ${te}`)}return{isAvailable:!1,status:l.eJ.NotDetermined}})()}audioInputsChanged(){this.callLogger.info("DeviceManager::audioInputsChanged"),this.logDevices([l.lW.Microphone]),this.updateMicrophone(),this.observer.onClearNoMediaInput(r.mT.MICROPHONE)}audioInputMuteStateChanged(U,H){this.callLogger.info(`DeviceManager::audioInputMuteStateChanged: device: ${U}, ${H?"muted":"unmuted"}`)}audioInputStreamEnded(U){var H;U&&(this.callLogger.info("DeviceManager::audioInputStreamEnded"),((H=(0,S.Nj)(l.lW.Microphone))===null||H===void 0?void 0:H.id)===U&&(this.callLogger.warn("Call audio stream ended unexpectedly"),this.observer.onSetNoMediaInput(r.mT.MICROPHONE)))}audioOutputsChanged(){this.callLogger.info("DeviceManager::audioOutputsChanged"),this.updateSpeaker(),this.logDevices([l.Q4]),this.observer.onClearNoAudioOutput(r.NS.AUDIO_ELEMENT_ERROR)}videoInputsChanged(){const U=this.getPreferredDevice(l.lW.Camera);this.callLogger.info("DeviceManager::videoInputsChanged"),this.logDevices([l.lW.Camera]),!U&&this.isCameraEnabled?(this.callLogger.info("DeviceManager::triggering camera stop due to active camera no longer being available"),this.observer.onSetNoMediaInput(r.mT.CAMERA)):this.observer.onClearNoMediaInput(r.mT.CAMERA)}videoInputStreamEnded(U){var H=this;return(0,t.coroutine)(function*(){U&&(H.callLogger.info("DeviceManager::videoInputStreamEnded"),H.observer.onSetNoMediaInput(r.mT.CAMERA))})()}logDevices(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$.LL;const H=(0,S.T5)();if(!H){this.callLogger.error("No devices found");return}(0,$.my)(this.callLogger,H,U)}getPreferredDevice(U){return(0,S.Nj)(U)}enumerateDevices(){const U=(0,S.T5)();if(!U){this.callLogger.error("No devices found in v2 device manager");return}this.callLogger.info("V2 devices found. Updating device store"),this.observer.onDevicesUpdated(U)}handleCameraChanges(U){var H=this;return(0,t.coroutine)(function*(){switch(U.type){case _e.START_PREVIEW:yield H.runCameraActivityStartPreview(U);break;case _e.STOP_PREVIEW:yield H.runCameraActivityStopPreview(U);break;case _e.ENABLE:yield H.runCameraActivityEnable();break;case _e.DISABLE:yield H.runCameraActivityDisable();break;default:break}})()}updateMicrophone(){var U=this;return(0,t.coroutine)(function*(){const H=U.getPreferredDevice(l.lW.Microphone);if(!H){U.callLogger.info("No audio input device found");return}const{id:te,label:de}=H;if(U.micPermissionDenied&&(U.callLogger.error("Microphone permission is denied. The user must grant permissions and fully quit and restart Slack to join the Huddle"),U.hasRetriedAudioInit))return;U.callLogger.info(`Selected audio input device: ${H.label||H.id}, deviceId: ${te}, deviceLabel: ${de}`);const Ye={autoGainControl:U.prefs.audio?U.prefs.audio.enableAGC:!0,deviceId:te};let we=!0;if(U.voiceFocusManager&&U.voiceFocusManager.isAvailable()&&(U.prefs.audio&&U.prefs.audio.enableNoiseSuppression)){if(U.voiceFocusDevice||(U.voiceFocusDevice=yield U.voiceFocusManager.getTransformDevice()),U.voiceFocusDevice){const vt=yield U.voiceFocusDevice.chooseNewInnerDevice(Ye);U.voiceFocusDevice=vt}U.voiceFocusDevice||(we=!1)}else we=!1;U.voiceFocusDevice&&(0,f.Y)({name:f.R1.VoiceFocusDevice,ref:U.voiceFocusDevice}),U.callLogger.info("Noise suppression:",we?"enabled":"disabled");try{if(U.isStartMutedBarrierActive&&(U.callLogger.info("Start muted barrier active"),U.audioVideoFacade.realtimeMuteLocalAudio()),we)if(U.voiceFocusDevice)yield U.initAudioInput(U.voiceFocusDevice);else throw new Error("Trying noise suppression with no voice focus transform device");else navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints&&Object.prototype.hasOwnProperty.call(navigator.mediaDevices.getSupportedConstraints(),"noiseSuppression")&&(Ye.noiseSuppression=!0),yield U.initAudioInput(Ye)}catch(vt){U.callLogger.error(`chooseAudioInputDevice failed: error: ${vt.name}, message: ${vt.message}`),yield U.handleAudioInitError(vt);return}U.hasRetriedAudioInit&&(U.callLogger.info("Microphone initialized successfully after retry"),U.hasRetriedAudioInit=!1),U.initAudioAnalyserForPreview(),U.setupAudioInputTrackHandler({preferredDeviceId:te}),!(yield U.isMediaPermissionDeniedOnWindows(r.mT.MICROPHONE))&&(U.observer.onSelfPermissionUpdated(U.micPermissionDenied,l.lW.Microphone),U.attemptToInitMicrophoneNative(H.label))})()}updateSpeaker(){var U=this;return(0,t.coroutine)(function*(){const H=U.getPreferredDevice(l.Q4);if(!H){U.callLogger.info("No audio output device found");return}const{id:te,label:de}=H;U.callLogger.info(`Selected audio output device id: ${H.label||H.id}, deviceId: ${te}, deviceLabel: ${de}`),yield U.audioVideoFacade.chooseAudioOutput(te),U.observer.onOutputDeviceChanged({id:H.id,type:l.Q4}),(0,S.i_)(te,l.Q4)})()}updateCamera(){var U=this;return(0,t.coroutine)(function*(){const H=U.getPreferredDevice(l.lW.Camera);if(!H){U.callLogger.info("No video input device found");return}U.callLogger.info(`Selected video input device id: ${H.label||H.id}`);try{yield U.setCameraVideoInputDevice(H)}catch(te){U.callLogger.info(`chooseVideoInputDevice failed: error: ${te.name}, message: ${te.message}`),te instanceof a.Ll?U.observer.onSelfPermissionUpdated(!0,l.lW.Camera):U.observer.onSelfPermissionUpdated(!1,l.lW.Camera);return}(yield U.isMediaPermissionDeniedOnWindows(r.mT.CAMERA))||U.observer.onSelfPermissionUpdated(!1,l.lW.Camera)})()}setCameraVideoInputDevice(U){var H=this;return(0,t.coroutine)(function*(){if(yield H.clearVideoTransformDeviceRefs(),H.options.backgroundVideoFilteringSetting===l.uT.NONE){yield H.initVideoInput(U.id);return}switch(H.prefs.video.effect){case z.t.Blur:{yield H.setCameraVideoInputDeviceWithBackgroundBlurFilter(U);break}case z.t.Background:{H.options.backgroundVideoFilteringSetting!==l.uT.Both?yield H.initVideoInput(U.id):yield H.setCameraVideoInputDeviceWithBackgroundReplacementImageFilter({videoDevice:U,selectedBackgroundImageKey:H.prefs.video.effectBgKey});break}default:{yield H.initVideoInput(U.id);break}}})()}setCameraVideoInputDeviceWithBackgroundReplacementImageFilter(U){let{videoDevice:H,selectedBackgroundImageKey:te}=U;var de=this;return(0,t.coroutine)(function*(){const Re=H.label||H.id;if(te===void 0){de.callLogger.info(`No background image key provided id: ${Re}`),yield de.initVideoInput(H.id);return}const we=C.g.find(On=>On.key===te);if(we===void 0)return de.handleErrorApplyVideoEffects("Image could not be found, switching to default input for device",H);de.callLogger.info(`Enabling video input device with background image filter id: ${Re}`);const ot=yield(yield fetch(we.url)).blob();if(de.options.useHuddlesFilterWorker){const On=yield createImageBitmap(ot),Un=new ne(H.id,On);de.setVideoTransformDeviceRefs({transformDevice:Un,processors:[]}),yield de.initVideoInput(Un),yield de.cleanupTransformDevicesAndCameraIfShuttingdown();return}const Mt=(0,a.jq)(),jt=(0,a.px)(),Ln=[];if(!(yield a.i3.isSupported(de.chimeLogger))&&me)return de.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non image replaced background",H);if(!(yield jt.isSupported())&&!me)return de.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor is not supported on host device. Defaulting to non image replaced background",H);if(de.isShuttingDown)return;const xn={...de.defaultVideoProcessorOptions,imageBlob:ot};if(me){if(de.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:oe},backgroundReplacement:{isEnabled:!0,backgroundImageURL:we.url,defaultColor:void 0}},de.videoFxProcessor=yield a.i3.create(de.chimeLogger,de.videoFxConfig,ue),!de.videoFxProcessor)return de.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",H);de.callLogger.info(`VideoFxProcessor background image replacement enabled for device id: ${Re}`),Ln.push(de.videoFxProcessor)}else{const On=yield jt.create(void 0,xn);if(On)de.setupVideoBackgroundFrameProcessor({processor:On,backgroundEffect:k.Image}),Ln.push(On);else return de.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor could not be created defaulting to normal input for device",H)}de.callLogger.info(`Enabling video input device with background image replacement id: ${Re}`);const bn=new Mt(de.chimeLogger,H.id,Ln);de.setVideoTransformDeviceRefs({transformDevice:bn,processors:Ln}),yield de.initVideoInput(bn),yield de.cleanupTransformDevicesAndCameraIfShuttingdown()})()}handleErrorApplyVideoEffects(U,H){var te=this;return(0,t.coroutine)(function*(){const de=H.label||H.id;te.callLogger.info(`${U}: ${de}`),yield te.initVideoInput(H.id)})()}setCameraVideoInputDeviceWithBackgroundBlurFilter(U){var H=this;return(0,t.coroutine)(function*(){const te=(0,a.jq)(),de=(0,a.kM)(),Re=U.label||U.id;if(H.callLogger.info(`Enabling video input device with background blur filter id: ${Re}`),H.options.useHuddlesFilterWorker){const vt=new ne(U.id);H.setVideoTransformDeviceRefs({transformDevice:vt,processors:[]}),yield H.initVideoInput(vt),yield H.cleanupTransformDevicesAndCameraIfShuttingdown();return}const Ye=[];if(me){if(!(yield a.i3.isSupported(H.chimeLogger)))return H.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non blurred background",U);if(H.videoFxConfig={backgroundBlur:{isEnabled:!0,strength:oe},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},H.videoFxProcessor=yield a.i3.create(H.chimeLogger,H.videoFxConfig,ue),!H.videoFxProcessor)return H.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",U);H.callLogger.info(`VideoFxProcessor background blur enabled for device id: ${Re}`),Ye.push(H.videoFxProcessor)}else{if(!(yield de.isSupported()))return H.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor is not supported on host device. Defaulting to non blurred background",U);const vt={...H.defaultVideoProcessorOptions,blurStrength:15},ot=yield de.create(void 0,vt);if(!ot)return H.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor could not be created defaulting to normal input for device",U);H.setupVideoBackgroundFrameProcessor({processor:ot,backgroundEffect:k.Blur}),Ye.push(ot)}H.callLogger.info(`Enabling video input device with background blur filter id: ${Re}`);const we=new te(H.chimeLogger,U.id,Ye);H.setVideoTransformDeviceRefs({transformDevice:we,processors:Ye}),yield H.initVideoInput(we),yield H.cleanupTransformDevicesAndCameraIfShuttingdown()})()}cleanupTransformDevicesAndCameraIfShuttingdown(){var U=this;return(0,t.coroutine)(function*(){U.isShuttingDown&&(U.callLogger.info("Cleaning up background video frame processor and video input because huddle has ended"),yield U.audioVideoFacade.stopVideoInput(),yield U.clearVideoTransformDeviceRefs())})()}initVideoInputDevices(){var U=this;return(0,t.coroutine)(function*(){const te=(yield U.audioVideoFacade.listVideoInputDevices()).length>0;return te||U.observer.onSelfPermissionUpdated(!0,l.lW.Camera),U.prefs=(0,P.Bh)(),U.enumerateDevices(),te})()}runCameraActivityStartPreview(U){var H=this;return(0,t.coroutine)(function*(){const te=U.deviceId,de=U.videoElement;!te||!de||(H.cameraPreviewVideoElement=de,yield H.setPreferredCameraDeviceForPreview(te),yield H.startCameraPreview())})()}runCameraActivityStopPreview(U){var H=this;return(0,t.coroutine)(function*(){const te=U.videoElement;te&&(te!==H.cameraPreviewVideoElement&&H.callLogger.warn("Mismatch in preview video element"),H.audioVideoFacade.hasStartedLocalVideoTile()?H.detachStreamFromCameraPreview():H.stopCameraPreview(),delete H.cameraPreviewVideoElement)})()}runCameraActivityEnable(){var U=this;return(0,t.coroutine)(function*(){var H;!U.audioVideoFacade.hasStartedLocalVideoTile()&&U.cameraPreviewVideoElement&&U.stopCameraPreview(),yield U.updateCamera(),U.audioVideoFacade.hasStartedLocalVideoTile()||(U.waitForCameraReady=(0,c.u)(),U.audioVideoFacade.startLocalVideoTile(),yield U.waitForCameraReady.catch(()=>{U.callLogger.info("Camera disabled before self video stream was properly bound. Explicitly disabling camera."),U.runCameraActivityDisable()})),U.attachStreamToCameraPreview(),(H=U.huddleEventsTrace)===null||H===void 0||H.update({name:T.p.VIDEO,type:T.G.START})})()}runCameraActivityDisable(){var U=this;return(0,t.coroutine)(function*(){var H;U.detachStreamFromCameraPreview(),yield U.audioVideoFacade.stopVideoInput(),U.audioVideoFacade.stopLocalVideoTile(),(H=U.huddleEventsTrace)===null||H===void 0||H.update({name:T.p.VIDEO,type:T.G.STOP}),U.cameraPreviewVideoElement&&(yield U.updateCamera(),yield U.startCameraPreview())})()}startCameraPreview(){var U=this;return(0,t.coroutine)(function*(){U.cameraPreviewVideoElement&&(U.waitForCameraReady=(0,c.u)(),U.audioVideoFacade.startVideoPreviewForVideoInput(U.cameraPreviewVideoElement),U.cameraPreviewVideoElement.addEventListener("canplay",H=>{U.waitForCameraReady.resolve()}),yield U.waitForCameraReady)})()}stopCameraPreview(){var U=this;return(0,t.coroutine)(function*(){U.cameraPreviewVideoElement&&(U.audioVideoFacade.stopVideoPreviewForVideoInput(U.cameraPreviewVideoElement),yield U.audioVideoFacade.stopVideoInput())})()}attachStreamToCameraPreview(){var U;if(!this.cameraPreviewVideoElement)return;const H=(U=this.audioVideoFacade.getLocalVideoTile())===null||U===void 0?void 0:U.state();H&&H.boundVideoStream&&a.xc.connectVideoStreamToVideoElement(H.boundVideoStream,this.cameraPreviewVideoElement,!0)}detachStreamFromCameraPreview(){this.cameraPreviewVideoElement&&a.xc.disconnectVideoStreamFromVideoElement(this.cameraPreviewVideoElement,!0)}addAudioElementErrorHandler(){this.audioOutputElement.addEventListener("error",this.audioElementErrorHandler)}removeAudioElementErrorHandler(){this.audioOutputElement.removeEventListener("error",this.audioElementErrorHandler)}audioElementErrorHandler(U){var H,te,de,Re;const Ye=((H=U.target)===null||H===void 0||(te=H.error)===null||te===void 0?void 0:te.code)||"unavailable",we=((de=U.target)===null||de===void 0||(Re=de.error)===null||Re===void 0?void 0:Re.message)||U.message;this.callLogger.warn(`HTML_AUDIO_ELEMENT_ERROR code: ${Ye}, message: ${we}`),this.observer.onSetNoAudioOutput(r.NS.AUDIO_ELEMENT_ERROR)}isMediaPermissionDeniedOnWindows(U){var H=this;return(0,t.coroutine)(function*(){if(H.options.useGetMediaAccessCheckForWindows&&(0,y.uF)()&&(0,y.dY)("4.9.0")){const te=yield H.maybeCheckSystemMediaAccess(U);if(te&&te.status==="denied")return!0}return!1})()}initAudioAnalyserForPreview(){const U=(0,a._R)().getAudioContext();if(!U){this.callLogger.warn("Unable to get AudioContext");return}U.resume();const H=this.audioVideoFacade.createAnalyserNodeForAudioInput();if(H){var te;const de=new M(H);(te=this.audioLevelMonitor)===null||te===void 0||te.setPreviewAudioAnalyser(de)}}setupAudioInputTrackHandler(U){let{preferredDeviceId:H}=U;this.audioInputTrackHandler&&(this.callLogger.info("Tearing down previous Audio Input Track Handler"),this.audioInputTrackHandler.tearDown(),this.audioInputTrackHandler=void 0),this.callLogger.info("Setting up new audio input track handler"),this.audioInputTrackHandler=new b(this.defaultDeviceController,this.observer,this.callLogger),this.audioInputTrackHandler.initialize({preferredDeviceId:H})}constructor(U,H,te,de,Re=!1,Ye,we,vt){this.audioVideoFacade=U,this.audioOutputElement=H,this.observer=te,this.options=de,this.isStartMutedBarrierActive=Re,this.chimeLogger=Ye,this.defaultDeviceController=we,this.voiceFocusManager=vt,this.callLogger=(0,i.Jt)("DEVICES"),this.waitForCameraReady=(0,c.u)(),this.isAudioOutputElementBound=!1,this.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:oe},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},this.isShuttingDown=!1,this.cameraMetricsTimeout=null,this.micPermissionDenied=!1,this.hasRetriedAudioInit=!1;var ot=this;this.attemptToInitMicrophoneNative=(0,m.A)(function(){var Un=(0,t.coroutine)(function*(Dn){try{if(!Dn||!ot.options.useDevicesExp)return;const zn=yield(0,re.Lh)(Dn),{error:es,canInit:Es}=zn;(0,h.A)(es)?es.includes("Method not available")||es.includes("only supported on Windows")?ot.callLogger.info("Microphone init test not supported on this client"):Es||ot.callLogger.warn(`ALERT! Possible init failure for microphone with device: ${Dn}: ${es}`):ot.callLogger.info(`Successfully initialized microphone with device: ${Dn}`)}catch(zn){ot.callLogger.error("Error attempting to init audio device",zn)}});return function(Dn){return Un.apply(this,arguments)}}(),1e3);var Mt=this;this.refreshMediaDeviceInfo=(0,t.coroutine)(function*(){Mt.enumerateDevices()});var jt=this;this.handleAudioInitError=function(){var Un=(0,t.coroutine)(function*(Dn){let zn=!jt.hasRetriedAudioInit;switch(Dn.name){case"NotReadableError":jt.callLogger.warn("Either a hardware error (such as an OS/program/webpage lock) is preventing access to the microphone or the selected device is no longer available. Trying again");break;case"NotFoundError":jt.callLogger.warn("No audio input devices are available. Trying again");break;case"OverconstrainedError":jt.callLogger.warn("The specified constraints resulted in no devices being found. Trying again");break;case"PermissionDeniedError":jt.callLogger.error("User denied permission to access microphone.");break;case"TypeError":jt.callLogger.error("An unexpected TypeError occured during audio input initialization",Dn),zn=!1;break;case"GetUserMediaError":jt.callLogger.error("An unexpected GetUserMediaError occured during audio input initialization",Dn),zn=!1;break;default:jt.callLogger.error("Unknown error during audio input initialization"),zn=!1}const es=Dn instanceof a.Ll;es||jt.observer.onSelfPermissionUpdated(!1,l.lW.Microphone),zn?(jt.hasRetriedAudioInit=!0,jt.callLogger.info("Retrying audio input initialization"),yield jt.updateMicrophone(),yield jt.updateSpeaker()):(es&&jt.observer.onSelfPermissionUpdated(!0,l.lW.Microphone),jt.callLogger.error("Audio input initialization failed. Not retrying"))});return function(Dn){return Un.apply(this,arguments)}}(),this.setVideoTransformDeviceRefs=Un=>{let{transformDevice:Dn,processors:zn}=Un;this.currentVideoTransformDevice=Dn,this.currentVideoFrameProcessors=zn,(0,f.Y)({name:f.R1.VideoTransformDevice,ref:Dn})},this.setupVideoBackgroundFrameProcessor=Un=>{let{processor:Dn,backgroundEffect:zn}=Un;var es;this.clearVideoBackgroundFrameProcessor(),!me&&(this.currentVideoFrameProcessor=Dn,this.currentVideoFrameProcessorObserver=new N({backgroundEffect:zn}),(es=this.currentVideoFrameProcessor)===null||es===void 0||es.addObserver(this.currentVideoFrameProcessorObserver),(0,f.Y)({name:f.R1.VideoFrameProcessor,ref:Dn}))},this.clearVideoBackgroundFrameProcessor=()=>{me||this.currentVideoFrameProcessor&&this.currentVideoFrameProcessorObserver&&(this.currentVideoFrameProcessor.removeObserver(this.currentVideoFrameProcessorObserver),this.currentVideoFrameProcessorObserver=void 0,this.currentVideoFrameProcessor=void 0)};var Ln=this;this.clearVideoTransformDeviceRefs=(0,t.coroutine)(function*(){Ln.clearVideoBackgroundFrameProcessor(),Ln.currentVideoFrameProcessors&&(Ln.currentVideoFrameProcessors.forEach(Un=>{Un.destroy()}),Ln.currentVideoFrameProcessors.length=0,Ln.currentVideoFrameProcessors=void 0),Ln.currentVideoTransformDevice&&(yield Ln.currentVideoTransformDevice.stop(),Ln.currentVideoTransformDevice=void 0)});var xn=this;this.initAudioInput=function(){var Un=(0,t.coroutine)(function*(Dn){Dn&&(yield xn.audioVideoFacade.startAudioInput(Dn))});return function(Dn){return Un.apply(this,arguments)}}();var bn=this;this.initVideoInput=function(){var Un=(0,t.coroutine)(function*(Dn){if(!Dn)return;yield bn.audioVideoFacade.startVideoInput(Dn),bn.recordCameraResolution();const zn=(0,v.A)(Dn,"device",Dn);typeof zn=="string"&&(0,S.i_)(zn,l.lW.Camera)});return function(Dn){return Un.apply(this,arguments)}}(),this.recordCameraResolution=()=>{this.cameraMetricsTimeout=setTimeout(()=>{try{var Un,Dn,zn,es,Es;if(this.isShuttingDown||!((Un=this.audioVideoFacade)===null||Un===void 0?void 0:Un.hasStartedLocalVideoTile()))return;const Rs=this.audioVideoFacade.getLocalVideoTile(),vs=(Dn=Rs==null?void 0:Rs.state())===null||Dn===void 0?void 0:Dn.boundVideoStream,us=vs==null?void 0:vs.getVideoTracks()[0];if(us instanceof CanvasCaptureMediaStreamTrack){V.A.publish({type:R.lx.CameraResolution,update:{isCanvasStream:!0}});return}const w=us==null?void 0:us.getSettings(),ve=us==null?void 0:us.getCapabilities(),Ne=w==null?void 0:w.width,dt=w==null?void 0:w.height,Mn=w==null?void 0:w.frameRate,Tn=ve==null||(zn=ve.width)===null||zn===void 0?void 0:zn.max,mn=ve==null||(es=ve.height)===null||es===void 0?void 0:es.max,ln=ve==null||(Es=ve.frameRate)===null||Es===void 0?void 0:Es.max;Tn&&mn&&V.A.publish({type:R.lx.CameraResolution,update:{cameraWidth:Ne,cameraHeight:dt,cameraFrameRate:Mn,cameraMaxWidth:Tn,cameraMaxHeight:mn,cameraMaxFrameRate:ln,isCanvasStream:!1}})}catch{}},5e3)},this.callLogger.info("Using device manager v2"),this.updateMicrophone=E(this,this.updateMicrophone,{skipIntermediatePendingRuns:!1}),this.updateSpeaker=E(this,this.updateSpeaker,{skipIntermediatePendingRuns:!1}),this.updateCamera=E(this,this.updateCamera,{skipIntermediatePendingRuns:!1}),this.handleCameraChanges=E(this,this.handleCameraChanges,{skipIntermediatePendingRuns:!1}),this.audioElementErrorHandler=this.audioElementErrorHandler.bind(this),this.audioVideoFacade.addDeviceChangeObserver(this),this.prefs=(0,P.Bh)(),this.addAudioElementErrorHandler(),this.audioLevelMonitor=new D,this.voiceFocusManager&&this.callLogger.info(`Voice Focus available?: ${this.voiceFocusManager.isAvailable()}`),this.prefs.audio&&this.callLogger.info(`Noise suppression setting: ${this.prefs.audio.enableNoiseSuppression}`),this.defaultVideoProcessorOptions={filterCPUUtilization:ge,reportingPeriodMillis:G,logger:this.chimeLogger};const{huddleEventsTrace:On}=(0,I.A)().getAllTraceHandlers();this.huddleEventsTrace=On}},"DeviceManager");var he=e(63202349),ce=e(3390261877),ee=e(3320454392);let J=u(class{constructor(U,H,te){this.sequenceNumber=U,this.message=H,this.timestampMs=te}},"MeetingEvent"),X=u(class Yo{getEventCaptureSize(){return this.eventCapture.length}startEventPublishScheduler(U){var H=this;this.intervalScheduler.start((0,t.coroutine)(function*(){if(H.getEventCaptureSize()===0)return;const te=H.eventCapture.slice(0,U);try{H.postEvents(te),H.eventCapture=H.eventCapture.slice(te.length)}catch(de){H.log.error(de.message)}}))}stop(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.stopped||(this.intervalScheduler.stop(),this.postEvents(this.eventCapture,U,!0),this.eventCapture=[],this.stopped=!0,this.observer=void 0)}logEvent(U,H){const{meetingHistory:te,...de}=H;try{const Re=JSON.stringify({name:U,attributes:de});this.eventCapture.push(new J(this.sequenceNumber,Re,Date.now())),this.sequenceNumber+=1}catch(Re){this.log.error(Re.message)}}postEvents(U){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var de;U.length===0&&!H&&!te||(de=this.observer)===null||de===void 0||de.onMeetingEvents(this.meetingId,this.mediaRegion,this.attendeeId,this.callId,U,H,te)}constructor(U,H,te,de,Re,Ye=Yo.DEFAULT_BATCH_SIZE,we=Yo.DEFAULT_INTERVAL_MS){this.observer=U,this.meetingId=H,this.mediaRegion=te,this.attendeeId=de,this.callId=Re,this.batchSize=Ye,this.intervalMs=we,this.eventCapture=[],this.sequenceNumber=0,this.log=(0,i.tZ)("MEETING-EVENT-LOGGER"),this.stopped=!1,this.intervalScheduler=new ce.A(this.intervalMs),this.startEventPublishScheduler(this.batchSize);var vt=this;(0,ee.A)((0,t.coroutine)(function*(){vt.stop(!0)}))}},"MeetingEventLogger");X.DEFAULT_BATCH_SIZE=100,X.DEFAULT_INTERVAL_MS=65*60*1e3;var F=e(3245843483),L=e(1033764764),K=e(9372409576),B=e(7299481592);const Q=1e4,q=3e4;class le{observe(U){this.connections.push(U),this.intervalHandle||(this.intervalHandle=window.setInterval(()=>{this.collect()},this.collectionIntervalMs))}stopObserving(U){remove(this.connections,U),this.connections.length===0&&clearInterval(this.intervalHandle)}collect(){var U=this;this.connections.forEach(function(){var H=_bluebirdCoroutine(function*(te){const de=te.getPeerConnection();if(!de)return;const Re=Te(yield de.getStats());De(te,Re);const Ye={...se(Re),send:Re.sendTracks.map(we=>Ae(we,Re)),recv:Re.recvTracks.map(we=>({...Ce(we,Re),peerId:te.getPeerIdFromRemoteStreamId(Re.trackIdToStreamId[we.id])}))};U.observer.onStats(Ye)});return function(te){return H.apply(this,arguments)}}())}constructor(U,H=Q){this.observer=U,this.collectionIntervalMs=H,this.connections=[]}}u(le,"StatsManager");function Te(Me){const U=Array.from(Me.entries()),H=reduce(U,(te,de)=>{let[Re,Ye]=de;return Qe(Ye)?Ye.remoteSource===!0?te.recvTracks.push(Ye):te.sendTracks.push(Ye):He(Ye)||Pe(Ye)?Ye.trackId&&(te.rtpStats[Ye.trackId]=Ye):lt(Ye)?te.transports[Ye.id]=Ye:qe(Ye)?te.candidates[Ye.id]=Ye:ct(Ye)?te.candidatePairs[Ye.id]=Ye:tt(Ye)?te.codecs[Ye.id]=Ye:it(Ye)?Ye.trackIds&&Ye.trackIds.forEach(we=>{te.trackIdToStreamId[we]=Ye.streamIdentifier}):Ge(Ye)&&Ye.trackIdentifier&&(te.mediaSources[Ye.trackIdentifier]=Ye),te},{trackIdToStreamId:{},sendTracks:[],recvTracks:[],candidates:{},candidatePairs:{},rtpStats:{},codecs:{},transports:{},mediaSources:{}});return H.recvTracks=H.recvTracks.filter(te=>H.trackIdToStreamId[te.id]!==void 0),H}u(Te,"groupStatsByType");function Ie(Me){const U=filter(Me.candidatePairs,we=>!!we.nominated),H=maxBy(U,we=>we.priority);if(!H)return;const te=find(Me.candidates,(we,vt)=>vt===H.localCandidateId);if(!te)return;let de=te.candidateType==="relay"?te.relayProtocol:te.protocol;te.candidateType==="prflx"&&(de+=" (unreliable)");const Re="unknown";return{candidateType:te.candidateType||Re,networkType:te.networkType||Re,transportType:de||Re}}u(Ie,"getConnectionNetworkInfo");function De(Me,U){const H=Ie(U);H&&Me.maybeLogNetworkInfo(H)}u(De,"reportConnectionNetworkInfo");const pe={nominal:1,fair:2,serious:3,critical:4};function fe(){return Z.apply(this,arguments)}u(fe,"makeAppMetricsStats");function Z(){return Z=(0,t.coroutine)(function*(){var Me;if(!(0,y.y3)())return;let U,H,te;if(F.vkf.isAvailable()){var de;const ot=yield(0,F.vkf)();if(!ot)return;U=ot.processMetrics,H=pe[ot.thermalState],te=(de=ot.speedLimit)===null||de===void 0?void 0:de.limit}else U=yield(0,F.rc_)();if(!U)return;let Re=null;const Ye=U.reduce((ot,Mt)=>{var jt,Ln,xn;return Mt.type==="GPU"&&(Re=Mt),{cpu:ot.cpu+((Mt==null||(jt=Mt.cpu)===null||jt===void 0?void 0:jt.percentCPUUsage)||0),memory:{workingSetSize:ot.memory.workingSetSize+(0,L.UK)((Mt==null||(Ln=Mt.memory)===null||Ln===void 0?void 0:Ln.workingSetSize)||0),peakWorkingSetSize:ot.memory.peakWorkingSetSize+(0,L.UK)((Mt==null||(xn=Mt.memory)===null||xn===void 0?void 0:xn.peakWorkingSetSize)||0)}}},{cpu:0,memory:{workingSetSize:0,peakWorkingSetSize:0}}),we=Re==null||(Me=Re.cpu)===null||Me===void 0?void 0:Me.percentCPUUsage,vt=we?Ye.cpu-Re.cpu.percentCPUUsage:Ye.cpu;return{...Ye,cpuWithoutGpu:vt,gpu:we,thermalState:H,speedLimit:te}}),Z.apply(this,arguments)}u(Z,"_makeAppMetricsStats");function se(Me){const[U,...H]=Object.values(Me.transports);debugCheck(!H.length,"Can there be more than one transport stat in a report?");const te=U&&U.selectedCandidatePairId,de=Me.candidatePairs[te];if(!te||!de)return;const Re=Me.candidates[de.remoteCandidateId]||{};return{availableOutgoingBitrate:de.availableOutgoingBitrate||0,availableIncomingBitrate:de.availableIncomingBitrate||0,totalBytesSent:de.bytesSent,totalBytesReceived:de.bytesReceived,currentRoundTripTime:de.currentRoundTripTime,totalRoundTripTime:de.totalRoundTripTime,protocol:Re.protocol==="udp"?slack.calls.analytics.Protocol.UDP:slack.calls.analytics.Protocol.TCP,pathType:Re.candidateType==="host"?slack.calls.analytics.PathType.DIRECT:slack.calls.analytics.PathType.RELAY,clientTime:Date.now()}}u(se,"makeConnectionStats");function Ae(Me,U){const H=U.rtpStats[Me.id]||{},te={codec:Le(H,U),bytesSent:H.bytesSent,packetsSent:H.packetsSent};if(Me.kind==="audio"){const de=Me.trackIdentifier?U.mediaSources[Me.trackIdentifier]:null;return de?{...te,audioStats:{audioLevel:de.audioLevel,totalAudioEnergy:de.totalAudioEnergy,totalSamplesDuration:de.totalSamplesDuration,echoReturnLoss:de.echoReturnLoss,echoReturnLossEnhancement:de.echoReturnLossEnhancement}}:{...te,audioStats:{audioLevel:Me.audioLevel,echoReturnLoss:Me.echoReturnLoss,echoReturnLossEnhancement:Me.echoReturnLossEnhancement}}}return{...te,videoStats:{frameHeight:Me.frameHeight,frameWidth:Me.frameWidth,framesSent:Me.framesSent,hugeFramesSent:Me.hugeFramesSent,framesPerSecond:H.framesPerSecond,framesEncoded:H.framesEncoded}}}u(Ae,"makeOutboundMediaStats");function Ce(Me,U){const H=U.rtpStats[Me.id]||{},te={codec:Le(H,U),bytesReceived:H.bytesReceived,packetsReceived:H.packetsReceived,packetsLost:H.packetsLost,fractionLost:H.fractionLost,jitter:H.jitter};return Me.kind==="audio"?{...te,audioStats:{audioLevel:Me.audioLevel,jitterBufferDelay:Me.jitterBufferDelay,concealedSamples:Me.concealedSamples,concealmentEvents:Me.concealmentEvents}}:{...te,videoStats:{firCount:H.firCount,nackCount:H.nackCount,pliCount:H.pliCount,sliCount:H.sliCount,frameHeight:Me.frameHeight,frameWidth:Me.frameWidth,framesPerSecond:Me.framesPerSecond,framesCorrupted:Me.framesCorrupted,framesDecoded:Me.framesDecoded,framesDropped:Me.framesDropped,framesReceived:Me.framesReceived}}}u(Ce,"makeInboundMediaStats");function Le(Me,U){const H=Me.codecId,te=get(U.codecs,H),de=get(te,"mimeType");return Ue(de)}u(Le,"getCodecForRtpStat");function Ue(Me){switch(Me){case"video/VP8":return slack.calls.analytics.Codec.VP8;case"video/VP9":return slack.calls.analytics.Codec.VP9;case"video/H264":return slack.calls.analytics.Codec.H264;case"audio/opus":return slack.calls.analytics.Codec.OPUS;default:return slack.calls.analytics.Codec.UNKNOWN}}u(Ue,"parseCodec");function Pe(Me){return Me.type==="inbound-rtp"}u(Pe,"isRecvRtpStat");function He(Me){return Me.type==="outbound-rtp"}u(He,"isSendRtpStat");function Qe(Me){return Me.type==="track"}u(Qe,"isTrackStat");function lt(Me){return Me.type==="transport"}u(lt,"isTransportStat");function qe(Me){return Me.type==="local-candidate"||Me.type==="remote-candidate"}u(qe,"isIceCandidateStat");function ct(Me){return Me.type==="candidate-pair"}u(ct,"isIceCandidatePairStat");function tt(Me){return Me.type==="codec"}u(tt,"isCodecStat");function it(Me){return Me.type==="stream"}u(it,"isStreamStat");function Ge(Me){return Me.type==="media-source"}u(Ge,"isMediaSourceStat");const We=5e3;let xe=u(class{constructor(U,H){this.audioVideoFacade=U,this.observer=H,this.callLogger=(0,i.Jt)("HUDDLES-STATS-MANAGER"),this.isDisconnected=!1;var te=this;this.onMetricsDidReceive=function(){var Ye=(0,t.coroutine)(function*(we){if(!we)return;const vt=yield te.collectScreenshareStats();te.reportAppMetrics({clientMetricReport:we,screenshareRtcStats:vt})});return function(we){return Ye.apply(this,arguments)}}(),this.reportDisconnect=()=>{this.isDisconnected=!0,this.callLogger.info("Disconnect reported. Resuming app metrics collection without client metric report."),this.reportAppMetrics();const Ye=setInterval(()=>{if(!this.isDisconnected){clearInterval(Ye);return}this.callLogger.info("User still disconnected. Reporting app metrics without client metric report."),this.reportAppMetrics()},We)},this.cleanup=()=>{};var de=this;this.collectScreenshareStats=(0,t.coroutine)(function*(){let Ye;try{var we;const vt=(we=de.audioVideoFacade.contentShareController.contentAudioVideo)===null||we===void 0?void 0:we.rtcPeerConnection;return vt?(Ye=yield vt.getStats(),Ye):void 0}catch(vt){de.callLogger.error("Failed to collect screenshare stats",vt)}});var Re=this;this.reportAppMetrics=(0,t.coroutine)(function*(){let{clientMetricReport:Ye,screenshareRtcStats:we}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Ye&&!Re.isDisconnected)return;Re.isDisconnected&&Ye&&(Re.isDisconnected=!1);const vt=yield Re.collectAppMetrics();Re.observer.onAppMetrics({appMetrics:vt,clientMetricReport:Ye,screenshareRtcStats:we})}),this.collectAppMetrics=(0,t.coroutine)(function*(){const Ye=yield fe();if(!Ye)return;let we=Ye;return Ye&&(we=(0,n.A)({...Ye,cpu:Ye.cpuWithoutGpu},"cpuWithoutGpu")),we})}},"HuddlesStatsManager"),ze=u(class{start(){var U;this.isSignallingOnly=!1,(U=this.videoStreamsManager)===null||U===void 0||U.addObserver(this),this.audioVideoFacade.addObserver(this),this.audioVideoFacade.start(),this.observer.onStart()}startWithSignalingOnly(){this.audioVideoFacade.start({signalingOnly:!0}),this.isSignallingOnly=!0}stop(){var U=this;return(0,t.coroutine)(function*(){U.isSignallingOnly?(U.waitForStart.resolve(),U.waitForStop.resolve(!0)):yield U.waitForStart,U.isStopRequested=!0,U.audioVideoFacade.stop()})()}audioVideoDidStartConnecting(U){if(!U)this.callLogger.info("Starting Chime session"),this.observer.onStartSessionTimeout(),this.observer.onAudioVideoDidStartConnecting(),this.isReconnecting=!1;else{var H,te,de;this.callLogger.info("Reconnecting Chime session"),this.observer.onSelfDisconnected(),(H=this.statsManager)===null||H===void 0||(te=H.reportDisconnect)===null||te===void 0||te.call(H),(de=this.huddleReconnectTracer)===null||de===void 0||de.traceReconnectAttempt(),this.isReconnecting=!0}}audioVideoDidStart(){if(this.callLogger.info("Chime audio video session started"),this.isReconnecting){var U;this.callLogger.info("Successfully re-connected to Huddle"),(U=this.huddleReconnectTracer)===null||U===void 0||U.traceReconnectAttemptOutcome({isSuccess:!0}),this.isReconnecting=!1}this.observer.onAudioVideoDidStart(),this.deviceManager.audioVideoDidStart(),this.dataChannelSubscribers.forEach(H=>H.onConnectDatachannel(this.audioVideoFacade)),this.waitForStart.resolve()}audioVideoDidStop(U){var H,te,de,Re;const Ye=a.b9[U.statusCode()],we=`Chime session stopped. StatusCode: ${Ye}`;if(this.callLogger.info(we),this.isReconnecting&&U.isFailure()){var vt;this.callLogger.info("Failed to re-connect to Huddle"),(vt=this.huddleReconnectTracer)===null||vt===void 0||vt.traceReconnectAttemptOutcome({isSuccess:!1})}this.audioVideoFacade.removeObserver(this),this.observer.onScreenShareStopped(),this.observer.onAudioVideoDidStop(),(H=this.videoStreamsManager)===null||H===void 0||H.removeObserver(this),(te=this.meetingEventLogger)===null||te===void 0||te.stop(),delete this.meetingEventLogger,(Re=(de=this.statsManager).cleanup)===null||Re===void 0||Re.call(de),delete this.statsManager,this.dataChannelSubscribers.forEach(ot=>ot.onDisconnectDataChannel()),!this.isStopRequested&&U.isTerminal()&&(this.observer.onClogError(we),this.observer.onError(r.uZ.CallEnded,Ye)),this.waitForStop.resolve(this.isStopRequested)}videoTileDidUpdate(U){if(!U.boundVideoStream||!U.boundAttendeeId){U.tileId&&this.observer.onVideoTileRemoved(U.tileId);return}const H=new a.jp(U.boundAttendeeId).base();this.selfAttendeeId===H?(this.deviceManager.localVideoTileDidUpdate(U),this.observer.onSelfVideoTileUpdate(U)):this.observer.onPeerVideoTileUpdate(H,U)}videoTileWasRemoved(U){this.consoleLog.info(`Video tile removed: tileId=${U}`),this.observer.onVideoTileRemoved(U)}videoAvailabilityDidChange(U){this.consoleLog.debug(`Video availability: RemoteVideoAvailable=${U.remoteVideoAvailable}, CanStartLocalVideo=${U.canStartLocalVideo}`)}metricsDidReceive(U){var H=this;return(0,t.coroutine)(function*(){var te;(te=H.statsManager)===null||te===void 0||te.onMetricsDidReceive(U)})()}connectionDidBecomePoor(){this.callLogger.warn("SDK detected poor connection")}connectionDidSuggestStopVideo(){this.callLogger.warn("SDK suggested stop video, maybe poor connection")}videoSendDidBecomeUnavailable(){this.callLogger.warn("Video send is unavailable")}remoteVideoSourcesDidChange(U){var H;(H=this.videoStreamsManager)===null||H===void 0||H.remoteVideoSourcesDidChange(U)}tileWillBePausedByDownlinkPolicy(U){this.observer.onVideoTileWillPause(U)}tileWillBeUnpausedByDownlinkPolicy(U){this.observer.onVideoTileWillUnpause(U)}constructor(U,H,te,de,Re,Ye,we,vt,ot,Mt,jt=[]){this.selfAttendeeId=U,this.meetingId=H,this.mediaRegion=te,this.callId=de,this.audioVideoFacade=Re,this.observer=Ye,this.deviceManager=we,this.videoStreamsManager=vt,this.dataChannelSubscribers=jt,this.callLogger=(0,i.tZ)("FREE-WILLY-AV"),this.consoleLog=(0,i.Cc)("FREE-WILLY-AV"),this.waitForStart=(0,c.u)(),this.waitForStop=(0,c.u)(),this.isStopRequested=!1,this.isSignallingOnly=!1,this.isReconnecting=!1,ot&&(this.waitForStart=ot),Mt&&(this.waitForStop=Mt),this.statsManager=new xe(Re,Ye),this.meetingEventLogger=new X(Ye,this.meetingId,this.mediaRegion,this.selfAttendeeId,this.callId),{reconnectTrace:this.huddleReconnectTracer}=(0,I.A)().getAllTraceHandlers()}},"AudioVideoObserverImpl");var mt=e(8571983633),pt=e(489015593),It=e(2671711178),bt=e(5954792826),gt=e(9240258658),ht=e(8193414630),Zt=e(1990810649);function rn(){switch((0,F.IXB)()){case-3:return 1/.7;case-2:return 1/.8;case-1:return 1/.9;case 0:return 1;case 1:return 1/1.1;case 2:return 1/1.25;case 3:return 1/1.5;case 4:return 1/1.75;case 5:return 1/2;default:return 1}}u(rn,"getScaleFactorForCurrentZoomLevel");function zt(Me,U){const[H,te]=Me;return[H*U,te*U]}u(zt,"getScaledCoordinates");function In(Me,U){var H;const de=(0,y.y3)()&&!(0,y.dY)("4.18.0")?1/rn():1,Re=((H=Me.itemId)===null||H===void 0?void 0:H.toString())||null,Ye=Me.itemId==="self"?U:Re;switch(Me.type){case r.Sl.New:case r.Sl.Edit:{const[we,vt]=zt(Me.segment.a,de),[ot,Mt]=zt(Me.segment.b,de),[jt,Ln]=zt(Me.segment.c,de),[xn,bn]=zt(Me.segment.d,de);return{itemId:Ye,type:Me.type===r.Sl.New?gt.Y.Draw.Type.NEW:gt.Y.Draw.Type.EDIT,segment:{a:{x:we,y:vt},b:{x:ot,y:Mt},c:{x:jt,y:Ln},d:{x:xn,y:bn}}}}case r.Sl.End:return{itemId:Ye,type:gt.Y.Draw.Type.END};case r.Sl.ChangeHue:return{itemId:Ye,type:gt.Y.Draw.Type.CHANGE_HUE,hue:Me.hue};case r.Sl.Position:return{itemId:Ye,type:gt.Y.Draw.Type.POSITION,x:Me.x,y:Me.y};default:return(0,ht.Kh)(Me)}}u(In,"convertDrawMessageToPeerMessage");function cn(Me,U){const H=Me.itemId===U?"self":Me.itemId;switch(Me.type){case gt.Y.Draw.Type.NEW:case gt.Y.Draw.Type.EDIT:{const de=(0,y.y3)()&&!(0,y.dY)("4.18.0")?rn():1;return{itemId:H,type:Me.type===gt.Y.Draw.Type.NEW?r.Sl.New:r.Sl.Edit,segment:{a:[(Me.segment.a.x||0)*de,(Me.segment.a.y||0)*de],b:[(Me.segment.b.x||0)*de,(Me.segment.b.y||0)*de],c:[(Me.segment.c.x||0)*de,(Me.segment.c.y||0)*de],d:[(Me.segment.d.x||0)*de,(Me.segment.d.y||0)*de]}}}case gt.Y.Draw.Type.END:return{itemId:H,type:r.Sl.End};case gt.Y.Draw.Type.CHANGE_HUE:return{itemId:H,type:r.Sl.ChangeHue,hue:Me.hue};case gt.Y.Draw.Type.POSITION:return{itemId:H,type:r.Sl.Position,x:Me.x,y:Me.y};default:(0,B.M)("Unhandled draw message case");return}}u(cn,"convertPeerMessageToDrawMessage");function Jt(Me){let U=Zt.o.Standard;return Me.type&&Me.type===gt.Y.Reacji.Type.Effect&&(U=Zt.o.Effect),Me.type&&Me.type===gt.Y.Reacji.Type.Gif&&(U=Zt.o.Gif),U}u(Jt,"convertFromPeerReactionType");function dn(Me){let U=gt.Y.Reacji.Type.Standard;return Me===Zt.o.Effect&&(U=gt.Y.Reacji.Type.Effect),Me===Zt.o.Gif&&(U=gt.Y.Reacji.Type.Gif),U}u(dn,"convertToPeerReactionType");var sn=e(1975685771);let Xt=u(class za{updatePresence(U,H){H?this.attendeesStates.set(U,this.initializeState()):this.attendeesStates.delete(U)}calculateScore(U,H,te){const de=this.attendeesStates.get(U);if(!de||(te!==null&&(de.muted=te),de.muted))return 0;const Re=Date.now();if(H){de.noiseFloor=this.updateNoiseFloor(de,H);const Ye={timestamp:Re,volume:H};de.volumeSamples.push(Ye)}return this.pruneVolumeSamples(de),this.getScore(de,Re)}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}initializeState(){return{muted:!1,noiseFloor:0,volumeSamples:[]}}updateNoiseFloor(U,H){let te=U.noiseFloor;return H>te?te=(1-this.params.slowAttackFactor)*te+this.params.slowAttackFactor*H:te=(1-this.params.fastDecayFactor)*te+this.params.fastDecayFactor*H,Math.min(te,this.params.noiseFloorMax)}pruneVolumeSamples(U){const H=Date.now()-this.params.analysisWindowMs,te=U.volumeSamples;for(;te.length&&te[0].timestamp<H;)te.shift()}getScore(U,H){return U.volumeSamples.reduce((te,de)=>{const Re=Math.max(1,Math.ceil((H-de.timestamp)/1e3));return te+Math.max(0,de.volume-U.noiseFloor)/Re},0)}constructor(){this.attendeesStates=new Map,this.params=za.FAST_SWITCHING_PARAMS}},"WindowedActiveSpeakerPolicy");Xt.DAMPED_SWITCHING_PARAMS={slowAttackFactor:.05,fastDecayFactor:.5,noiseFloorMax:.03,analysisWindowMs:3e3},Xt.FAST_SWITCHING_PARAMS={slowAttackFactor:.05,fastDecayFactor:.5,noiseFloorMax:.03,analysisWindowMs:300};let xt=u(class{shutdown(){window.clearTimeout(this.timerHandle),delete this.timerHandle}addDisconnectedAttendee(U){new a.jp(U).hasModality(a.jp.MODALITY_CONTENT)||this.disconnectedAttendees.has(U)||(this.disconnectedAttendees.set(U,Date.now()+this.timeoutMs),this.maybeStartTimer())}deleteDisconnectedAttendee(U){this.disconnectedAttendees.delete(U),this.disconnectedAttendees.size===0&&(window.clearTimeout(this.timerHandle),delete this.timerHandle)}hasDisconnectedAttendee(U){return this.disconnectedAttendees.has(U)}maybeStartTimer(){if(this.timerHandle||this.disconnectedAttendees.size===0)return;const U=this.disconnectedAttendees.get([...this.disconnectedAttendees.keys()][0]);U&&(this.timerHandle=window.setTimeout(this.runTimer,Math.max(U-Date.now(),10)))}runTimer(){window.clearTimeout(this.timerHandle),delete this.timerHandle;const U=[],H=Date.now();this.disconnectedAttendees.forEach((te,de)=>{H>te&&(this.observer.onStalePeer(de),U.push(de))}),U.forEach(te=>{this.disconnectedAttendees.delete(te)}),this.maybeStartTimer()}constructor(U,H){this.timeoutMs=U,this.observer=H,this.runTimer=this.runTimer.bind(this),this.disconnectedAttendees=new Map}},"StaleAttendeeChecker");var en=e(4075246222),un=e(2208015175),yn=e(8403493408),ut=e(2604971659),Ot=e(2462761869);let kt=u(class{addSelf(U){this.selfId=U,this.addPeer(U)}removeSelf(U){(0,B.M)(U===this.selfId,"Bad attendeeId when removing self"),delete this.selfId,this.removePeer(U)}addPeer(U){this.ids=(0,en.A)(this.ids,[U]),(0,un.A)(this.cachedPeerStates[U],(te,de)=>{this.peerStateForwarder[de]&&!(0,mt.A)(te)&&this.peerStateForwarder[de](U,te)}),delete this.cachedPeerStates[U];const H=[];(0,un.A)(this.cachedCallState,(te,de)=>{this.callStateForwarder[de]&&!(0,mt.A)(te)&&this.callStateForwarder[de].getPeerIdFn(te)===U&&(this.callStateForwarder[de].forwardFn(te),this.callStateForwarder[de].isCached||H.push(de))}),this.cachedCallState=(0,n.A)(this.cachedCallState,H)}removePeer(U){(0,yn.A)(this.ids,U),(0,un.A)((0,ut.A)(this.cachedCallState),H=>{if(this.callStateForwarder[H]){const te=this.callStateForwarder[H].removeFn(this.cachedCallState[H],U);if(!te){delete this.cachedCallState[H];return}this.cachedCallState[H]=te}})}getPeers(){return this.ids}hasPeer(U){return this.ids.includes(U)}hasAttendee(U){return this.hasPeer(U)||U===this.selfId}updateCallState(U){const H=U;(0,un.A)(U,(te,de)=>{this.callStateForwarder[de]&&(H[de]=this.callStateForwarder[de].updateFn(this.cachedCallState[de],te))}),(0,un.A)(this.callStateForwarder,(te,de)=>{this.forwardOrCacheCallState([H],de,te)})}updatePeerStates(U){(0,un.A)(this.peerStateForwarder,(H,te)=>{this.forwardOrCachePeerState(U,te,H)})}setIncludeSelfAndNoneActiveSpeaker(U,H){U===this.includeSelf&&H===this.includeNone||(this.includeSelf=U,this.includeNone=H,(0,un.A)(this.cachedCallState,(te,de)=>{this.callStateForwarder[de]&&!(0,mt.A)(te)&&this.callStateForwarder[de].forwardFn(te)}))}forwardOrCachePeerState(U,H,te){U.filter(Re=>!(0,mt.A)(Re.state[H])).map(Re=>({id:Re.peerId,value:Re.state[H]})).forEach(Re=>{let{id:Ye,value:we}=Re;this.ids.includes(Ye)?te(Ye,we):this.cachedPeerStates[Ye]={...this.cachedPeerStates[Ye],[H]:we}})}forwardOrCacheCallState(U,H,te){U.filter(Re=>!(0,mt.A)(Re[H])).map(Re=>({value:Re[H]})).forEach(Re=>{let{value:Ye}=Re;const we=te.getPeerIdFn(Ye);let vt=!1;we&&(this.ids.includes(we)||we===this.NO_ACTIVE_SPEAKER)?te.forwardFn(Ye):vt=!0,(vt||te.isCached)&&(this.cachedCallState={...this.cachedCallState,[H]:Ye})})}getAttendeeId(U){return new a.jp(U).base()}constructor(U){this.observer=U,this.NO_ACTIVE_SPEAKER="none",this.ids=[],this.includeSelf=!1,this.includeNone=!1,this.cachedCallState={},this.cachedPeerStates={},this.callStateForwarder={activeSpeakerList:{updateFn:(H,te)=>{const de=H||[],Re=te&&te.length?te[0]:this.NO_ACTIVE_SPEAKER;return(0,Ot.A)(de,[Re,this.NO_ACTIVE_SPEAKER]),de.unshift(Re),de},removeFn:(H,te)=>{if(H)return(0,yn.A)(H,te),H},getPeerIdFn:H=>{const te=H.filter(de=>de===this.NO_ACTIVE_SPEAKER?this.includeNone:this.includeSelf||this.selfId!==this.getAttendeeId(de));if(te.length)return te[0]},forwardFn:H=>{const te=H.filter(de=>de===this.NO_ACTIVE_SPEAKER&&this.includeNone?!0:this.includeSelf||this.selfId!==this.getAttendeeId(de));!te.length||te[0]===this.NO_ACTIVE_SPEAKER?this.observer.onNewActiveSpeaker(void 0):this.observer.onNewActiveSpeaker(this.selfId===te[0]?"self":te[0])},isCached:!0}},this.peerStateForwarder={isDrawEnabled:(H,te)=>{this.observer.onPeerDrawEnabled(H,te)}}}},"PeerCache");var be=e(252549317);let Kt=u(class{destroy(){var U,H,te;(U=this.peerCache)===null||U===void 0||U.getPeers().forEach(de=>this.audioVideoFacade.realtimeUnsubscribeFromVolumeIndicator(de)),delete this.peerCache,(H=this.staleAttendeeChecker)===null||H===void 0||H.shutdown(),delete this.staleAttendeeChecker,this.audioVideoFacade.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceCallback),this.audioVideoFacade.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.audioVideoFacade.realtimeUnsubscribeToLocalSignalStrengthChange(this.realtimeLocalSignalStrengthChangeCallback),this.audioVideoFacade.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteLocalAudioCallback),this.audioVideoFacade.realtimeUnsubscribeToSetCanUnmuteLocalAudio(this.realtimeSetCanUnmuteLocalAudioCallback),this.audioVideoFacade.unsubscribeFromActiveSpeakerDetector(this.activeSpeakerDetectorCallback),delete this.windowedActiveSpeakerPolicy,this.audioVideoFacade.realtimeUnsubscribeFromReceiveDataMessage(this.dataChannelTopic),(te=this.audioVideoFacade.transcriptionController)===null||te===void 0||te.unsubscribeFromTranscriptEvent(this.realtimeReceiveTranscriptEventCallback),this.attendeeMuteRequests={}}selfDrawEnabled(U){this.sendPeerMessageOverDataChannel(new gt.Y({capabilities:{isDrawEnabled:U},fromPeerIdString:this.selfAttendeeId}))}sendReacji(U,H){let te;H?te={emoji:U,type:dn(H)}:te={emoji:U},this.sendPeerMessageOverDataChannel(new gt.Y({reacji:te,fromPeerIdString:this.selfAttendeeId}))}sendBackground(U){this.sendPeerMessageOverDataChannel(new gt.Y({background:{url:U},fromPeerIdString:this.selfAttendeeId}))}sendMuteRequest(U){this.sendPeerMessageOverDataChannel(new gt.Y({muteRequest:{peerId:U},fromPeerIdString:this.selfAttendeeId}))}sendJukeboxRequest(U){this.sendPeerMessageOverDataChannel(new gt.Y({jukeboxRequest:{songKey:U},fromPeerIdString:this.selfAttendeeId}))}sendJukeboxStopRequest(){this.sendPeerMessageOverDataChannel(new gt.Y({jukeboxRequest:{stop:!0},fromPeerIdString:this.selfAttendeeId}))}sendDrawMessage(U){this.sendPeerMessageOverDataChannel(new gt.Y({draw:In(U,this.selfAttendeeId),fromPeerIdString:this.selfAttendeeId}))}sendContentShareDetails(U){this.sendPeerMessageOverDataChannel(new gt.Y({contentShareDetails:{sourceType:U,itemId:this.selfAttendeeId},fromPeerIdString:this.selfAttendeeId}))}sendRecordingStartNotification(){this.sendPeerMessageOverDataChannel(new gt.Y({recordingStartNotification:{type:gt.Y.RecordingStartNotification.Type.SUMMARY},fromPeerIdString:this.selfAttendeeId}))}onStalePeer(U){this.callLogger.info(`Removing stale peer: ${U}`),this.attendeeLeft(U),this.observer.onPeerDisconnected(U),this.observer.onPeerLeft(U)}setIncludeSelfAndNoneActiveSpeaker(U,H){var te;(te=this.peerCache)===null||te===void 0||te.setIncludeSelfAndNoneActiveSpeaker(U,H)}attendeeJoined(U){if(U===this.selfAttendeeId){var H;(H=this.peerCache)===null||H===void 0||H.addSelf(U)}else{var te;(te=this.peerCache)===null||te===void 0||te.addPeer(U)}this.audioVideoFacade.realtimeSubscribeToVolumeIndicator(U,this.realtimeVolumeIndicatorCallback),this.consoleLog.info(`Subscribed to attendee=${U} volume indicator`)}attendeeLeft(U){if(U===this.selfAttendeeId){var H;(H=this.peerCache)===null||H===void 0||H.removeSelf(U)}else{var te;(te=this.peerCache)===null||te===void 0||te.removePeer(U)}this.audioVideoFacade.removeVideoTilesByAttendeeId(U),this.audioVideoFacade.realtimeUnsubscribeFromVolumeIndicator(U),this.consoleLog.info(`Unsubscribed from attendee=${U} volume indicator`)}sendPeerMessageOverDataChannel(U){this.isDataChannelReady()?this.audioVideoFacade.realtimeSendDataMessage(this.dataChannelTopic,gt.Y.encode(U).finish()):this.logFailureToSendPeerMessage(U)}isAttendeeOfTypeContent(U){return new a.jp(U).hasModality(a.jp.MODALITY_CONTENT)}realtimeAttendeeIdPresenceCallback(U,H,te,de){var Re;if(this.consoleLog.info(`Attendee presence: attendeeId=${U}, isSelf=${this.selfAttendeeId===new a.jp(U).base()}, present=${H}, externalUserId=${te}, dropped=${de}`),(Re=this.windowedActiveSpeakerPolicy)===null||Re===void 0||Re.updatePresence(U,H),this.isAttendeeOfTypeContent(U)){H||this.audioVideoFacade.removeVideoTilesByAttendeeId(U);return}if(!te){this.callLogger.error(`Attendee presence: no externalUserId for attendee=${U}`),this.observer.onClogError("MissingExternalUserId");return}let Ye=null;if(H){var we;de===!1&&!(!((we=this.peerCache)===null||we===void 0)&&we.hasAttendee(U))?Ye="joined":Ye="reconnected"}else de===!0?Ye="disconnected":Ye="left";if(Ye===null){this.callLogger.error("Presence callback event is null");return}if(this.selfAttendeeId===U)switch(Ye){case"joined":this.observer.onSelfJoined(),this.observer.onSelfConnected();break;case"left":this.observer.onSelfDisconnected(),this.observer.onSelfLeft();break;case"disconnected":this.observer.onSelfDisconnected();break;case"reconnected":this.observer.onSelfConnected();break;default:this.callLogger.error(`unknown self event ${Ye}`);return}else{const jt=(0,bt.l)(te);if(!jt){this.callLogger.error(`No externalUserId for ${U}`);return}switch(Ye){case"joined":{var vt;(vt=this.staleAttendeeChecker)===null||vt===void 0||vt.deleteDisconnectedAttendee(U),this.observer.onPeerJoined(U,jt),this.observer.onPeerConnected(U),this.updatePeerVideoTile(U);break}case"left":this.observer.onPeerDisconnected(U),this.observer.onPeerLeft(U);break;case"disconnected":var ot;(ot=this.staleAttendeeChecker)===null||ot===void 0||ot.addDisconnectedAttendee(U),this.observer.onPeerDisconnected(U);break;case"reconnected":{var Mt;(Mt=this.staleAttendeeChecker)===null||Mt===void 0||Mt.deleteDisconnectedAttendee(U),this.observer.onPeerConnected(U),this.updatePeerVideoTile(U);break}default:this.callLogger.error(`unknown peer event ${Ye}`);return}}Ye==="joined"&&this.attendeeJoined(U),Ye==="left"&&this.attendeeLeft(U)}realtimeFatalErrorCallback(U){this.callLogger.error(`Chime session fatal error: name=${U.name}, message=${U.message}`),this.observer.onClogError(`FatalError: ${U.name} - ${U.message}`)}realtimeLocalSignalStrengthChangeCallback(U){this.consoleLog.debug(`Local attendee signalStrength=${U}`)}realtimeMuteAndUnmuteLocalAudioCallback(U){this.callLogger.debug(`Local attendee mute=${U}`),this.observer.onPeerMuted("self",U)}realtimeSetCanUnmuteLocalAudioCallback(U){this.consoleLog.debug(`Local attendee can unmute = ${U}`)}realtimeVolumeIndicatorCallback(U,H,te,de,Re){this.consoleLog.debug(`Attendee volume indicator: attendeeId=${U}, volume=${H}, muted=${te}, signalStrength=${de}, externalUserId=${Re}`),this.selfAttendeeId!==U&&(te?this.observer.onPeerMuted(U,!0):te!==null&&te===!1&&this.observer.onPeerMuted(U,!1)),de!==null&&(this.selfAttendeeId===U?this.observer.onSelfConnectionQualityChanged("uplink",(0,r.MK)(de)):this.observer.onPeerConnectionQualityChanged(U,"uplink",(0,r.MK)(de)))}activeSpeakerDetectorCallback(U){var H;(H=this.peerCache)===null||H===void 0||H.updateCallState({activeSpeakerList:U})}realtimeReceiveDataMessageCallback(U){if(this.selfAttendeeId===U.senderAttendeeId){if(!U.throttled)return;this.callLogger.info(`Data message throttled: size=${U.data.length} bytes`);return}let H;try{H=gt.Y.decode(U.data)}catch(te){this.callLogger.error(`Peer Message failed during decode, ignoring peer message.
				| Error: ${te}
				| Data Sender Attendee ID: ${U.senderAttendeeId}
				| Data Sender External Attendee ID: ${U.senderExternalUserId}
				| Topic: ${U.topic}`);return}this.handlePeerMessageFromDataMessage(H,U.senderAttendeeId)}handlePeerMessageFromDataMessage(U,H){const te=H;if(U.jukeboxRequest){var de;if(!(0,sn.Z)(te,"senderAttendeeId is not populated")||!(0,sn.Z)(U.jukeboxRequest,"message.jukeboxRequest is required in the jukebox request message"))return;if(!this.peerCache||!(!((de=this.peerCache)===null||de===void 0)&&de.hasPeer(te))){this.callLogger.info(`Dropping jukeboxRequest from unknown peer: ${te}`);return}U.jukeboxRequest.songKey&&!U.jukeboxRequest.stop&&this.observer.onJukeboxRequest(U.jukeboxRequest.songKey),U.jukeboxRequest.stop&&this.observer.onJukeboxStopRequest()}else if(U.reacji){var Re;if(!(0,sn.Z)(te,"senderAttendeeId is not populated")||!(0,sn.Z)(U.reacji.emoji,"reacji.emoji is required in the reacji message"))return;if(!((Re=this.peerCache)===null||Re===void 0)&&Re.hasPeer(te)){const Mt=Jt(U.reacji);this.observer.onPeerReacji(te,U.reacji.emoji,!0,Mt)}else this.callLogger.info(`Dropping reacji from unknown peer: ${te}`)}else if(U.draw){var Ye;const Mt=cn(U.draw,this.selfAttendeeId);if(!(0,sn.Z)(te,"senderAttendeeId is not populated")||!(0,sn.Z)(Mt,"Draw message must be correctly formed"))return;!((Ye=this.peerCache)===null||Ye===void 0)&&Ye.hasPeer(te)?this.observer.onPeerDrawMessage(te,Mt):this.callLogger.info(`Dropping draw message from unknown peer: ${te}`)}else if(U.capabilities){if(!(0,sn.Z)(te,"senderAttendeeId is not populated"))return;if(!(0,mt.A)(U.capabilities.isDrawEnabled)){var we;(we=this.peerCache)===null||we===void 0||we.updatePeerStates([{peerId:te,state:{isDrawEnabled:U.capabilities.isDrawEnabled}}])}}else if(U.muteRequest){var vt;if(!(0,sn.Z)(te,"senderAttendeeId is not populated")||!(0,sn.Z)(U.muteRequest.peerId,"muteRequest.peerId is required in the background message"))return;if(!((vt=this.peerCache)===null||vt===void 0)&&vt.hasPeer(te)){if(U.muteRequest.peerId===this.selfAttendeeId){var ot;const Mt=this.attendeeMuteRequests[H],jt=Mt==null?void 0:Mt.lastRequestTime,Ln=Date.now();if(Mt?(Mt.lastRequestTime=Ln,Mt.count+=1):this.attendeeMuteRequests[H]={lastRequestTime:Ln,count:1},jt&&Ln-jt<=this.attendeeMuteRequestThrottleMs){this.callLogger.info(`Throttled mute request from attendee: ${H} peer: ${te}`);return}if(((ot=this.attendeeMuteRequests[H])===null||ot===void 0?void 0:ot.count)>=this.attendeeMuteRequestMaxAllowed){this.callLogger.info(`Dropped mute request from attendee: ${H} peer: ${te}`);return}}this.observer.onPeerMuteRequest(te,U.muteRequest.peerId)}else this.callLogger.info(`Dropping mute request from unknown peer: ${te}`)}else if(U.contentShareDetails){if(!(0,sn.Z)(te,"senderAttendeeId is not populated")||!(0,sn.Z)(U.contentShareDetails.itemId,"contentShareDetails.itemId is required in the contentShareDetails message")||!(0,sn.Z)(U.contentShareDetails.sourceType,"contentShareDetails.sourceType is required in the contentShareDetails message"))return;this.callLogger.info(`Received content share details for item: ${U.contentShareDetails.itemId}, type: ${U.contentShareDetails.sourceType}`);const Mt=(0,be.Vd)(U.contentShareDetails.sourceType);this.observer.onContentShareDetailsUpdate(te,Mt,U.contentShareDetails.sourceType)}}realtimeReceiveTranscriptEventCallback(U){this.observer.onTranscriptionEvent(U)}updatePeerVideoTile(U){this.audioVideoFacade.getAllVideoTiles().filter(de=>{const Re=de.state();return!Re||!Re.boundAttendeeId?!1:new a.jp(Re.boundAttendeeId).base()===new a.jp(U).base()}).forEach(de=>{const Re=(de==null?void 0:de.state())||null;Re&&this.observer.onPeerVideoTileUpdate(U,Re)})}constructor(U,H,te){var de;this.selfAttendeeId=U,this.audioVideoFacade=H,this.observer=te,this.callLogger=(0,i.Jt)("AUDIO-VIDEO-FACADE-SUBS"),this.consoleLog=(0,i.Cc)("AUDIO-VIDEO-FACADE-SUBS"),this.dataChannelTopic="data-channel",this.staleAttendeeTimeoutMs=60*1e3,this.attendeeMuteRequestThrottleMs=10*1e3,this.attendeeMuteRequestMaxAllowed=50,this.attendeeMuteRequests={},this.isDataChannelReady=()=>{var Re,Ye,we;return(Re=this.audioVideoFacade.audioVideoController)===null||Re===void 0||(Ye=Re.meetingSessionContext)===null||Ye===void 0||(we=Ye.signalingClient)===null||we===void 0?void 0:we.ready()},this.logFailureToSendPeerMessage=Re=>{const Ye=Re.draw?"draw":"reacji",we=u(()=>this.callLogger.error(`Failed to send ${Ye} peer message. Data channel is not ready to use.`),"logError");return(0,It.A)(Ye,we)},(0,pt.A)(this,["realtimeAttendeeIdPresenceCallback","realtimeFatalErrorCallback","realtimeLocalSignalStrengthChangeCallback","realtimeMuteAndUnmuteLocalAudioCallback","realtimeSetCanUnmuteLocalAudioCallback","activeSpeakerDetectorCallback","realtimeVolumeIndicatorCallback","realtimeReceiveDataMessageCallback","realtimeReceiveTranscriptEventCallback"]),this.audioVideoFacade.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceCallback),this.audioVideoFacade.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.audioVideoFacade.realtimeSubscribeToLocalSignalStrengthChange(this.realtimeLocalSignalStrengthChangeCallback),this.audioVideoFacade.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteLocalAudioCallback),this.audioVideoFacade.realtimeSubscribeToSetCanUnmuteLocalAudio(this.realtimeSetCanUnmuteLocalAudioCallback),this.windowedActiveSpeakerPolicy=new Xt,this.audioVideoFacade.subscribeToActiveSpeakerDetector(this.windowedActiveSpeakerPolicy,this.activeSpeakerDetectorCallback),this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback),(de=this.audioVideoFacade.transcriptionController)===null||de===void 0||de.subscribeToTranscriptEvent(this.realtimeReceiveTranscriptEventCallback),this.peerCache=new kt(this.observer),this.staleAttendeeChecker=new xt(this.staleAttendeeTimeoutMs,this)}},"AudioVideoFacadeSubscriber");var Vt=e(3867135795),on=e(6696292586);const pn=15,et=2560,At=1e3,Rt="text";let Ft=u(class{stopMusic(U){let{cleanObserver:H}=U;this.huddlesJukeboxEnabled&&this.isMusicEnabled&&(this.isMusicEnabled=!1,this.audioVideoFacade.stopContentShare(),H&&this.audioVideoFacade.removeContentShareObserver(this))}stop(){var U=this;return(0,t.coroutine)(function*(){U.isScreenshareEnabled&&(U.isStopRequested=yield U.stopContentShare()),U.huddlesJukeboxEnabled&&U.stopMusic({cleanObserver:!0}),U.isStopRequested||(U.observer.onScreenShareStopped(),U.audioVideoFacade.removeContentShareObserver(U))})()}contentShareDidStart(){this.log.info("Chime content share started"),this.waitForStart.resolve(!0),this.observer.onScreenShareStarted()}contentShareDidStop(){this.log.info("Chime content share stopped"),this.isScreenshareEnabled&&this.log.info("Screenshare stop: stream ended"),this.isScreenshareEnabled=!1,this.observer.onScreenShareStopped(),this.isStopRequested&&this.audioVideoFacade.removeContentShareObserver(this)}contentShareDidPause(){this.log.info("Chime content share paused")}contentShareDidUnpause(){this.log.info("Chime content share unpaused")}setSongStream(U){var H=this;return(0,t.coroutine)(function*(){H.huddlesJukeboxEnabled&&(H.waitForStart=(0,c.u)(),yield H.audioVideoFacade.startContentShare(U),H.isMusicEnabled=!0)})()}setScreenshare(U,H,te){var de=this;return(0,t.coroutine)(function*(){if(U===de.isScreenshareEnabled)return;const{huddleEventsTrace:Re}=(0,I.A)().getAllTraceHandlers();if(U){let Ye=H;if(H){const vt=H.split(":");vt.length===3&&vt[2]!=="0"&&(vt[2]="0",Ye=vt.join(":"),de.log.warn(`Munging screen share media source id, before: ${H}, after: ${Ye}`))}let we;try{de.waitForStart=(0,c.u)();const vt=u(ot=>{throw de.log.error(`getUserMedia error during huddle screenshare attempt: ${ot.name} ${ot.message}`),ot},"logGetUserMediaError");if((0,F.g9M)()&&de.log.info(`Starting screen share with zoomLevel = ${(0,F.IXB)()}`),(0,F.g9M)()&&te){const{screenHeight:ot,screenWidth:Mt,selectedDisplayId:jt}=te;if(we={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Ye,maxFrameRate:pn}}},Mt&&ot){const bn=we.video.mandatory,On=Mt/ot,Un=et;bn.maxWidth=Mt<Un?Mt:Un,bn.maxHeight=ot<Un?ot:Un;const Dn=navigator.mediaDevices.getSupportedConstraints();(0,Vt.A)(Dn,"aspectRatio")&&!!Dn.aspectRatio&&(0,on.A)(On)&&(bn.minAspectRatio=On,bn.maxAspectRatio=On),de.log.info(`Starting screen share with resolution constraints: ${bn.maxWidth} x ${bn.maxHeight} | resolution provided: ${Mt} x ${ot}`)}else de.log.info("Starting application window share without proposed resolution");const xn=yield navigator.mediaDevices.getUserMedia(we).catch(vt);(xn==null?void 0:xn.getVideoTracks().length)>0?(de.log.debug(`Applying content hint to content share stream. Content Hint ${Rt}`),xn.getVideoTracks()[0].contentHint=Rt):de.log.warn("No video tracks where available when starting constrained content share"),setTimeout(()=>{const bn=xn.getVideoTracks()[0].getSettings(),On=(0,be.MS)(bn==null?void 0:bn.deviceId);V.A.publish({type:R.lx.ScreenshareContentType,update:{screenshareContentType:On}}),de.log.info(`Created video track with resolution: ${bn.width} x ${bn.height} framerate: ${bn.frameRate} aspect ratio: ${bn.aspectRatio}`),jt&&de.log.info(`Sharing from selected display: ${jt}`)},500),yield de.audioVideoFacade.startContentShare(xn),setTimeout(()=>de.applyContentShareConstraints(xn),At),Re==null||Re.update({name:T.p.SCREENSHARE,type:T.G.START})}else{de.log.info("Starting unconstrained content share with chime API's startContentShareFromScreenCapture");const ot=yield de.audioVideoFacade.startContentShareFromScreenCapture(Ye).catch(vt);if(Re==null||Re.update({name:T.p.SCREENSHARE,type:T.G.START}),setTimeout(()=>de.applyContentShareConstraints(ot),At),(ot==null?void 0:ot.getVideoTracks().length)>0){de.log.debug(`Applying content hint to content share stream. Content Hint ${Rt}`),ot.getVideoTracks()[0].contentHint=Rt;const Mt=ot.getVideoTracks()[0].getSettings(),jt=(0,be.MS)(Mt==null?void 0:Mt.deviceId);V.A.publish({type:R.lx.ScreenshareContentType,update:{screenshareContentType:jt}})}else de.log.warn("No video tracks where available when starting unconstrained content share")}}catch(vt){const ot=u(()=>{delete de.waitForStart,de.isScreenshareEnabled=!1,de.observer.onScreenShareStopped()},"exitScreenshare");if(vt.name==="NotAllowedError"){ot(),vt.message==="Permission denied by system"&&de.observer.onCheckSystemMediaAccess(r.mT.SCREEN);return}if(vt.name==="OverconstrainedError"){ot(),we&&de.log.error(`Invalid stream constraints prevented screenshare from succeeding: ${JSON.stringify(we)}`);return}if(["TypeError","AbortError","Error"].includes(vt.name)){ot(),de.observer.onScreenShareError(r.lD.ERROR);return}if(vt.name==="NotReadableError"){ot(),de.observer.onScreenShareError(r.lD.NOT_READABLE_ERROR);return}throw vt.name==="NotFoundError"&&(ot(),de.observer.onScreenShareError(r.lD.NOT_FOUND_ERROR)),de.log.error(`Encountered an uncaught error attempting to start screen share: ${vt.name} ${vt.message}`),de.waitForStart.resolve(!1),ot(),vt}de.lastEnableTimeMs=Date.now(),de.isScreenshareEnabled=U}else de.isScreenshareEnabled&&(yield de.stopContentShare())})()}applyContentShareConstraints(U){var H=this;return(0,t.coroutine)(function*(){if(!H.isExperimentalSDK)return;const te=U.getVideoTracks()[0];if(!te){H.log.info("Constraints not re-applied no video track available");return}te.getSettings()||H.log.info("Constraints not re-applied no video track settings available");const Re={width:{ideal:et},height:{ideal:et},frameRate:{ideal:pn}};yield te.applyConstraints(Re),H.log.info("Constraints re-applied to content share (resolution overwrite applied)")})()}isScreenShareEnabled(){return this.isScreenshareEnabled||!1}stopContentShare(){var U=this;return(0,t.coroutine)(function*(){let H=!1;if(U.waitForStart.isPending()?Date.now()-U.lastEnableTimeMs>1e4?(H=!0,U.log.info(`Stop screen share, force: ${Date.now()-U.lastEnableTimeMs} ms since start`)):(U.log.info("Stop screen share, waiting for content share start to resolve"),H=yield U.waitForStart,U.log.info(`Stop screen share, wait for content share start resolve finished: ${H}`)):(H=U.waitForStart.value(),U.log.info(`Stop screen share, promise resolved: ${H}`)),H){U.audioVideoFacade.stopContentShare(),U.isScreenshareEnabled=!1;const{huddleEventsTrace:te}=(0,I.A)().getAllTraceHandlers();te==null||te.update({name:T.p.SCREENSHARE,type:T.G.STOP}),V.A.publish({type:R.lx.ScreenshareContentType,update:null})}else U.log.warn("Screen share disable ignored as screen share was not started successfully");return H})()}constructor(U,H,te,de){this.audioVideoFacade=U,this.observer=H,this.huddlesJukeboxEnabled=te,this.isExperimentalSDK=de,this.log=(0,i.tZ)("FREE-WILLY-CONTENT-SHARE"),this.isStopRequested=!1,this.lastEnableTimeMs=0,this.audioVideoFacade.addContentShareObserver(this),this.setScreenshare=E(this,this.setScreenshare,{skipIntermediatePendingRuns:!1})}},"ContentShareManager"),$t=u(class{addObserver(U){var H,te;(H=this.videoDownlinkPolicy)===null||H===void 0||(te=H.addObserver)===null||te===void 0||te.call(H,U)}removeObserver(U){var H,te;(H=this.videoDownlinkPolicy)===null||H===void 0||(te=H.removeObserver)===null||te===void 0||te.call(H,U)}remoteVideoSourcesDidChange(U){this.videoSources=U,this.updateChimeVideoPreferences()}updateChimeVideoPreferences(){if(!this.videoSources||!this.videoDownlinkPolicy)return;const U=[];this.videoSources.forEach(H=>{var te;const de=(te=H.attendee)===null||te===void 0?void 0:te.attendeeId;de===this.selfAttendeeId||!de||(de.includes("#content")||!this.isAudioOnlyMode)&&U.push(H)}),this.sendChimeVideoPreferences(U)}constructor({selfAttendeeId:U,videoDownlinkPolicy:H}){this.logger=new he.k("Huddles Video Streams Manager"),this.isAudioOnlyMode=!1,this.toggleAllIncomingVideo=te=>{this.isAudioOnlyMode=te,this.updateChimeVideoPreferences()},this.sendChimeVideoPreferences=te=>{var de;try{this.logger.debug(`Sending updated video preferences to chime: ${JSON.stringify(te)}`)}catch{}(de=this.videoDownlinkPolicy)===null||de===void 0||de.chooseRemoteVideoSources(te)},this.videoDownlinkPolicy=H,this.selfAttendeeId=U}},"HuddlesVideoStreamsManager");const vn=null;var Rn=e(3146858537),hn=e(3398586081),gn=e(1829947126);let Cn=u(class{initialize(U,H){this.gainNode=H,this.audioContext=U}onAudioLevelUpdated(U){isNaN(U.value)||U.value<this.audioLevelActivationThreshold||(this.currentDuckingEndTimeout&&clearTimeout(this.currentDuckingEndTimeout),this.startDucking())}startDucking(){if(!this.gainNode||!this.audioContext)return;const U=this.defaultVolume*this.duckingAudioAdjustmentLevel;this.gainNode.gain.cancelScheduledValues(this.audioContext.currentTime),this.gainNode.gain.exponentialRampToValueAtTime(U,this.audioContext.currentTime+this.fadeInTimeLocal),this.currentDuckingEndTimeout=setTimeout(()=>{this.endDucking()},this.waitForFadeOutTime)}endDucking(){var U;this.gainNode&&this.audioContext&&((U=this.gainNode)===null||U===void 0||U.gain.exponentialRampToValueAtTime(this.defaultVolume,this.audioContext.currentTime+this.fadeOutTime))}constructor(U){this.defaultVolume=U,this.fadeOutTime=20,this.fadeInTimeLocal=.2,this.waitForFadeOutTime=3e3,this.duckingAudioAdjustmentLevel=.2,this.audioLevelActivationThreshold=.04,this.onAudioLevelUpdated=this.onAudioLevelUpdated.bind(this),gn.A.subscribeAll(this.onAudioLevelUpdated)}},"JukeboxDucker");const fn="HUDDLE-JUKEBOX";let Oe=u(class{startLocalJukebox(U){let{song:H,volume:te}=U;var de=this;return(0,t.coroutine)(function*(){var Re;const Ye=de.getSongUrl({song:H});if(Ye===de.localAudioUrl)return;de.callLogger.info(`Starting local jukebox song key: ${H.key}.`),de.audioContext||(de.audioContext=new AudioContext),de.cleanup(),de.localAudioUrl=Ye;const vt=yield(yield window.fetch(Ye)).arrayBuffer(),ot=yield de.audioContext.decodeAudioData(vt);de.audioBufferSourceNode=de.audioContext.createBufferSource(),de.audioBufferSourceNode.buffer=ot,de.localAudio=new Audio,de.localAudio.volume=te,yield de.localAudio.setSinkId((0,S._o)()),de.localMediaStreamAudioDestinationNode=de.audioContext.createMediaStreamDestination(),de.gainNode=de.audioContext.createGain(),(Re=de.jukeboxDucker)===null||Re===void 0||Re.initialize(de.audioContext,de.gainNode),de.gainNode.gain.value=de.defaultVolume,de.audioBufferSourceNode.connect(de.gainNode),de.gainNode.connect(de.localMediaStreamAudioDestinationNode),de.localAudio.srcObject=de.localMediaStreamAudioDestinationNode.stream,de.audioBufferSourceNode.loop=!0,de.audioBufferSourceNode.start(),de.localAudio.play()})()}startContentShareJukebox(U){let{song:H}=U;var te=this;return(0,t.coroutine)(function*(){var de,Re;te.audioContext||(te.audioContext=new AudioContext),te.audioDestination||(te.audioDestination=te.audioContext.createMediaStreamDestination()),te.callLogger.info(`Starting jukebox song key: ${H.key}`),te.cleanup();const Ye=te.getSongUrl({song:H}),vt=yield(yield window.fetch(Ye)).arrayBuffer(),ot=yield te.audioContext.decodeAudioData(vt);return te.audioBufferSourceNode=te.audioContext.createBufferSource(),te.audioBufferSourceNode.buffer=ot,te.localAudio=new Audio,yield te.localAudio.setSinkId((0,S._o)()),te.localMediaStreamAudioDestinationNode=te.audioContext.createMediaStreamDestination(),te.gainNode=te.audioContext.createGain(),(de=te.jukeboxDucker)===null||de===void 0||de.initialize(te.audioContext,te.gainNode),te.gainNode.gain.value=te.defaultVolume,te.audioBufferSourceNode.connect(te.gainNode),te.gainNode.connect(te.audioDestination),te.gainNode.connect(te.localMediaStreamAudioDestinationNode),te.localAudio.srcObject=te.localMediaStreamAudioDestinationNode.stream,te.audioBufferSourceNode.loop=!0,te.audioBufferSourceNode.start(),te.localAudio.play(),(Re=te.audioDestination)===null||Re===void 0?void 0:Re.stream})()}stopJukebox(){this.callLogger.info(`Stopping jukebox for song: ${this.localAudioUrl||""}`),this.cleanup(),this.audioContext=void 0,this.audioDestination=void 0}cleanup(){var U,H,te,de;(U=this.audioBufferSourceNode)===null||U===void 0||U.stop(),this.audioBufferSourceNode=void 0,(H=this.localAudio)===null||H===void 0||H.pause(),this.localAudio=void 0,this.localAudioUrl=void 0,(te=this.gainNode)===null||te===void 0||te.disconnect(),this.gainNode=void 0,(de=this.audioDestination)===null||de===void 0||de.disconnect()}hasAudio(){return!!this.localAudio}getVolume(){var U;return(U=this.localAudio)===null||U===void 0?void 0:U.volume}getSongUrl(U){let{song:H}=U;return H.url}constructor(){this.defaultVolume=.3,this.callLogger=(0,i.Jt)(fn),this.callLogger.info("Huddle Jukebox Manager created."),this.jukeboxDucker=new Cn(this.defaultVolume)}},"JukeboxManager");const je=(0,hn.A)(()=>new Oe),Be={connectionWaitTimeMs:5*1e3,connectionUnhealthyThreshold:10,sendingAudioFailureSamplesToConsider:2,sendingAudioFailureInitialWaitTimeMs:3*1e3},st={connectionWaitTimeMs:10*1e3,connectionUnhealthyThreshold:25,sendingAudioFailureSamplesToConsider:5,sendingAudioFailureInitialWaitTimeMs:10*1e3},Yt=u(class{constructor({enableExperimentalConfig:U}){this.enableExperimentalConfig=!1,this.getConfiguration=()=>this.enableExperimentalConfig?st:Be,this.enableExperimentalConfig=!!U}},"ConnectionHealthPolicyManager");var tn=e(610288365),at=e(1921074781),Et=e(796111729),_t;(function(Me){Me.Control="control",Me.Vp8="vp8",Me.Vp8Svc="vp8_svc",Me.Vp9="vp9",Me.Vp9Svc="vp9_svc",Me.Av1="av1",Me.Av1Svc="av1_svc"})(_t||(_t={}));const Bt=(0,Et.Wo)({label:"HUDDLE-VIDEO-CODECS"}),Qt=function(){var Me=(0,t.coroutine)(function*(U){let{audioVideoFacade:H,h264BaselineProfileEnabled:te,disableVp9:de}=U;var Re,Ye;const we=[];!(0,y.gm)()&&!de&&we.push(a.KK.vp9()),te&&we.push(a.KK.h264BaselineProfile()),we.push(a.KK.h264()),Bt.info(`Setting preferred camera video codec to ${(Re=we[0])===null||Re===void 0?void 0:Re.codecName}`),Bt.debug("Setting camera video codec preferences",we),(Ye=H.setVideoCodecSendPreferences)===null||Ye===void 0||Ye.call(H,we)});return u(function(H){return Me.apply(this,arguments)},"setCameraVideoCodec")}(),Fe=function(){var Me=(0,t.coroutine)(function*(U){let{useAv1:H,audioVideoFacade:te,h264BaselineProfileEnabled:de}=U;var Re,Ye;const we=[];H&&we.push(a.KK.av1()),de&&we.push(a.KK.h264BaselineProfile()),we.push(a.KK.h264()),Bt.info(`Setting preferred content share video codec to ${(Re=we[0])===null||Re===void 0?void 0:Re.codecName}`),Bt.debug("Setting content share video codec preferences",we),(Ye=te.setContentShareVideoCodecPreferences)===null||Ye===void 0||Ye.call(te,we)});return u(function(H){return Me.apply(this,arguments)},"setScreenshareVideoCodec")}();class Xe{initialize(U,H,te,de,Re,Ye){var we=this;return(0,t.coroutine)(function*(){var vt,ot,Mt,jt,Ln,xn,bn,On;Re&&(we.waitForStop=Re),Ye&&(we.dataChannelSubscribers=Ye),we.observer.onInit(),we.options=U;const{serverConfig:Un,useChimeSdkExp:Dn,useSimulcast:zn,useGetMediaAccessCheckForWindows:es,useHuddlesFilterWorker:Es}=we.options;yield(0,a.ZT)(Dn),we.chimeLogger=new he.k(we.loggerName),we.callLogger=(0,i.Jt)(we.loggerName),(vt=we.callLogger)===null||vt===void 0||vt.info(`user agent: ${navigator.userAgent}`);const bs=(0,o.HF)();(ot=we.callLogger)===null||ot===void 0||ot.info(`Version TS: ${bs}`);const Rs=(document==null||(Mt=document.documentElement)===null||Mt===void 0||(jt=Mt.dataset)===null||jt===void 0?void 0:jt.versionHash)||"unknown";(Ln=we.callLogger)===null||Ln===void 0||Ln.info(`Version Hash: ${Rs}`),(xn=we.callLogger)===null||xn===void 0||xn.info(`Chime SDK Version: ${a.zF.sdkVersion}${Dn?" (Experimental)":""}`),we.meeting=Un.meeting,we.attendee=Un.attendee,we.selfAttendeeId=we.attendee.AttendeeId;const vs=(0,d.Y)(Un.attendee.ExternalUserId);try{var us;const ls=JSON.stringify((0,n.A)(U,"serverConfig"),null,2);(us=we.callLogger)===null||us===void 0||us.debug(`Huddle SDK [${vs}] initialized with options: ${ls}`)}catch(ls){var w;(w=we.callLogger)===null||w===void 0||w.error("Error stringifying options",ls)}if(we.transportProtocols=Un.transportProtocols,we.isPrejoin=we.options.isPrejoin,we.meetingSessionConfiguration=new a.QJ(we.meeting,we.attendee),zn&&we.meetingSessionConfiguration){var ve;(ve=we.callLogger)===null||ve===void 0||ve.info("Simulcast enabled"),we.meetingSessionConfiguration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}if(we.options.usePriorityDownlinkPolicy&&(we.videoDownlinkPolicy=new a.gi(we.selfAttendeeId),we.meetingSessionConfiguration.videoDownlinkBandwidthPolicy=we.videoDownlinkPolicy,we.meetingSessionConfiguration.keepLastFrameWhenPaused=!0,we.videoStreamsManager=new $t({selfAttendeeId:we.selfAttendeeId,videoDownlinkPolicy:we.videoDownlinkPolicy})),we.meetingSessionConfiguration.urls&&(we.meetingSessionConfiguration.urls.urlRewriter=we.urlRewriter.bind(we)),we.meetingSessionConfiguration&&we.meetingSessionConfiguration.connectionHealthPolicyConfiguration&&(0,s.A)(we.options.enableExperimentalConnectionHealthPolicyConfig)){const ls=new Yt({enableExperimentalConfig:we.options.enableExperimentalConnectionHealthPolicyConfig});Object.assign(we.meetingSessionConfiguration.connectionHealthPolicyConfiguration,ls.getConfiguration())}we.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender=!0,yield we.initVoiceFocus();const Ne={audio:H.includes(r.mT.MICROPHONE),video:H.includes(r.mT.CAMERA)};a.vB.disable();let dt;const Mn=!!(!((bn=we.voiceFocusManager)===null||bn===void 0)&&bn.isAvailable()),Tn=we.options.disableAudioRedundancy||!1;if(Dn){const ls=(0,a.Q_)(),ys=(0,a.RM)();if(we.defaultDeviceController=new ys(we.chimeLogger,{enableWebAudio:Mn}),we.defaultDeviceController.setDeviceLabelTrigger(()=>navigator.mediaDevices.getUserMedia(Ne)),we.sessionExp=new ls(we.meetingSessionConfiguration,we.chimeLogger,we.defaultDeviceController),dt=we.sessionExp.audioVideo,Tn){const Ve=(0,a.Ls)();dt.setAudioProfile(new Ve(null,!1)),dt.setContentAudioProfile(new Ve(null,!1))}}else{const ls=(0,a.of)(),ys=(0,a.zg)();if(we.defaultDeviceController=new ys(we.chimeLogger,{enableWebAudio:Mn}),we.defaultDeviceController.setDeviceLabelTrigger(()=>navigator.mediaDevices.getUserMedia(Ne)),we.session=new ls(we.meetingSessionConfiguration,we.chimeLogger,we.defaultDeviceController),dt=we.session.audioVideo,Tn){const Ve=(0,a.j3)();dt.setAudioProfile(new Ve(null,!1)),dt.setContentAudioProfile(new Ve(null,!1))}}yield we.populateDeviceInfoCache();const mn=we.options.useH264Baseline||!1;Qt({audioVideoFacade:dt,h264BaselineProfileEnabled:mn,disableVp9:!!we.options.disableVp9});const ln=we.options.useH264BaselineScreenshare||!1,is=we.options.useAv1Screenshare;Fe({useAv1:is,audioVideoFacade:dt,h264BaselineProfileEnabled:ln});const ms={useGetMediaAccessCheckForWindows:es,useHuddlesFilterWorker:Es,backgroundVideoFilteringSetting:l.uT.Both,useDevicesExp:we.options.useDevicesExp},Ts=ae;we.deviceManager=new Ts(dt,we.audioOutputElement,we.observer,ms,te,we.chimeLogger,we.defaultDeviceController,we.voiceFocusManager),(On=we.dataChannelSubscribers)===null||On===void 0||On.forEach(ls=>ls.onInitializeDataChannelSubscriber()),we.audioVideoObserver=new ze(we.selfAttendeeId,we.meeting.MeetingId,we.meeting.MediaRegion,vs,dt,we.observer,we.deviceManager,we.videoStreamsManager,de,we.waitForStop,we.dataChannelSubscribers);const Ps=we.options.huddlesJukeboxEnabled;if(Ps){var ps;(ps=we.callLogger)===null||ps===void 0||ps.info("Huddles Jukebox experiment enabled (prototype)")}we.contentShareManager=new Ft(dt,we.observer,!!Ps,Dn),we.audioVideoFacadeSubscriber=new Kt(we.selfAttendeeId,dt,we.observer),(0,tn.Ay)().initialize(),we.connect(),we.screenManager=new _.A,we.observer.onMeetingSessionInitialized(),we.waitForInit.resolve()})()}shutdown(U){var H=this;return(0,t.coroutine)(function*(){var te,de,Re,Ye,we,vt;if((te=H.callLogger)===null||te===void 0||te.info("Huddles SDK shutdown initiated"),yield H.waitForInit,H.cleanupDataChannelSubscribers(),(de=H.contentShareManager)===null||de===void 0||de.stop(),(Re=H.audioVideoObserver)===null||Re===void 0||Re.stop(),yield(Ye=H.deviceManager)===null||Ye===void 0?void 0:Ye.shutdown(),at.F.doesInstanceExist()){var ot;(ot=at.F.getInstance())===null||ot===void 0||ot.release()}(we=H.audioVideoFacadeSubscriber)===null||we===void 0||we.destroy(),yield H.waitForStop,delete H.session,delete H.sessionExp,delete H.meetingSessionConfiguration,yield H.cleanupDefaultDeviceControllerRefs(),(vt=H.callLogger)===null||vt===void 0||vt.info("Huddles SDK shutdown completed"),delete H.chimeLogger,delete H.callLogger,delete H.deviceManager,delete H.audioVideoFacadeSubscriber,delete H.audioVideoObserver,delete H.contentShareManager,delete H.screenManager,delete H.voiceFocusManager,delete H.videoStreamsManager,delete H.videoDownlinkPolicy,U&&U()})()}selfMicrophoneEnabled(U){var H;(H=this.deviceManager)===null||H===void 0||H.setMicrophone(U)}selfVideoEnabled(U,H,te,de){var Re,Ye;(Re=this.deviceManager)===null||Re===void 0||Re.setCamera(U),(Ye=this.contentShareManager)===null||Ye===void 0||Ye.setScreenshare(H,te,de)}startContentShareJukebox(U){let{song:H}=U;var te=this;return(0,t.coroutine)(function*(){var de;const Re=yield je().startContentShareJukebox({song:H});Re&&((de=te.contentShareManager)===null||de===void 0||de.setSongStream(Re))})()}selfStopJukebox(){var U=this;return(0,t.coroutine)(function*(){var H;je().stopJukebox(),(H=U.contentShareManager)===null||H===void 0||H.stopMusic({cleanObserver:!1})})()}setCameraQuality(U,H,te,de){var Re;(Re=this.deviceManager)===null||Re===void 0||Re.setCameraQuality(U,H,te,de)}setAGC(U){var H;(H=this.deviceManager)===null||H===void 0||H.setAGC(U)}setNewPreferredDevice(U,H){var te;(te=this.deviceManager)===null||te===void 0||te.setPreferredDevice(U,H)}setNoiseSuppression(U){var H;(H=this.deviceManager)===null||H===void 0||H.setNoiseSuppression(U)}setVideoBackgroundEffect(U){var H;(H=this.deviceManager)===null||H===void 0||H.setVideoBackgroundEffect(U)}requestPreviewStreamForDeviceId(U,H,te){var de;(de=this.deviceManager)===null||de===void 0||de.requestPreviewStreamForDeviceId(U,H,te)}stopVideoPreviewForVideoInput(U){var H;(H=this.deviceManager)===null||H===void 0||H.stopVideoPreviewForVideoInput(U)}getScreenThumbnails(U){var H=this;return(0,t.coroutine)(function*(){var te;return yield(te=H.screenManager)===null||te===void 0?void 0:te.getScreenThumbnails(U==null?void 0:U.thumbnailDimensions,U==null?void 0:U.isRefetch)})()}selfDrawEnabled(U){var H;(H=this.audioVideoFacadeSubscriber)===null||H===void 0||H.selfDrawEnabled(U)}sendReacji(U,H){var te;(te=this.audioVideoFacadeSubscriber)===null||te===void 0||te.sendReacji(U,H)}sendBackground(U){var H;(H=this.audioVideoFacadeSubscriber)===null||H===void 0||H.sendBackground(U)}sendMuteRequest(U){var H;(H=this.audioVideoFacadeSubscriber)===null||H===void 0||H.sendMuteRequest(U)}sendJukeboxRequest(U){var H;(H=this.audioVideoFacadeSubscriber)===null||H===void 0||H.sendJukeboxRequest(U)}sendJukeboxStopRequest(){var U;(U=this.audioVideoFacadeSubscriber)===null||U===void 0||U.sendJukeboxStopRequest()}sendDrawMessage(U){var H;(H=this.audioVideoFacadeSubscriber)===null||H===void 0||H.sendDrawMessage(U)}sendContentShareDetails(U){var H;(H=this.audioVideoFacadeSubscriber)===null||H===void 0||H.sendContentShareDetails(U)}sendRecordingStartNotification(){var U;(U=this.audioVideoFacadeSubscriber)===null||U===void 0||U.sendRecordingStartNotification()}maybeBindAudioOutputElement(){var U;(U=this.deviceManager)===null||U===void 0||U.maybeBindAudioOutputElement()}maybeCheckSystemMediaAccess(U){var H;return(H=this.deviceManager)===null||H===void 0?void 0:H.maybeCheckSystemMediaAccess(U)}setIncludeSelfAndNoneActiveSpeaker(U,H){var te;(te=this.audioVideoFacadeSubscriber)===null||te===void 0||te.setIncludeSelfAndNoneActiveSpeaker(U,H)}bindVideo(U,H,te){var de;const Re=this.session||this.sessionExp;if(!Re)return;const Ye=(de=Re.audioVideo.getVideoTile(U))===null||de===void 0?void 0:de.state();te?Ye!=null&&Ye.boundVideoStream&&a.xc.connectVideoStreamToVideoElement(Ye.boundVideoStream,H,!1):(this.videoDownlinkPolicy&&(Ye!=null&&Ye.paused)&&Re.audioVideo.unpauseVideoTile(U),Re.audioVideo.bindVideoElement(U,H))}unbindVideo(U,H,te){const de=this.session||this.sessionExp;de&&(te?a.xc.disconnectVideoStreamFromVideoElement(H,!0):de.audioVideo.getVideoTile(U)&&de.audioVideo.unbindVideoElement(U))}pauseVideo(U){const H=this.session||this.sessionExp;if(!H)return;const te=H.audioVideo.getVideoTile(U),de=te==null?void 0:te.state();!(de!=null&&de.isContent)&&(de!=null&&de.active)&&(te==null||te.pause())}unpauseVideo(U){const H=this.session||this.sessionExp;if(!H)return;const te=H.audioVideo.getVideoTile(U),de=te==null?void 0:te.state();de!=null&&de.paused&&(te==null||te.unpause())}videoTileHasStream(U){const H=this.session||this.sessionExp;if(!H)return!1;const te=H.audioVideo.getVideoTile(U);if(!te)return!1;const de=te.state();return de?!!de.boundVideoStream:!1}getMeetingMediaRegion(){var U;return(U=this.meeting)===null||U===void 0?void 0:U.MediaRegion}completePrejoin(U){var H=this;return(0,t.coroutine)(function*(){const{isStartMuted:te}=U;if(H.isPrejoin){var de,Re;return te&&((de=H.deviceManager)===null||de===void 0||de.setStartMutedBarrier(te)),(Re=H.audioVideoObserver)===null||Re===void 0||Re.start(),H.maybeBindAudioOutputElement(),H.setIncludeSelfAndNoneActiveSpeaker(!0,!0),H.isPrejoin=!1,!0}return!1})()}urlRewriter(U){if(!U)return U;if(this.transportProtocols){const Re=this.transportProtocols;if(U.includes("?transport=udp")&&!Re.includes("udp")){var H;return(H=this.callLogger)===null||H===void 0||H.info("Dropping UDP transport"),""}if(U.includes("?transport=tcp")){if(U.includes("turns:")){if(!Re.includes("tls")){var te;return(te=this.callLogger)===null||te===void 0||te.info("Dropping TLS transport"),""}}else if(!Re.includes("tcp")){var de;return(de=this.callLogger)===null||de===void 0||de.info("Dropping TCP transport"),""}}}return U.replace(`:${this.TURN_PORT_UDP}`,`:${this.OVERRIDE_TURN_PORT_UDP}`)}hasSession(){return!!this.session||!!this.sessionExp}setupVideoDeviceLabelTrigger(){var U,H=this;const te=function(){var de=(0,t.coroutine)(function*(){try{var Re;H.videoDevicePermissionStatus="IN_PROGRESS";const we=yield navigator.mediaDevices.getUserMedia({video:!0});return(Re=H.callLogger)===null||Re===void 0||Re.info("Video device permissions granted"),H.videoDevicePermissionStatus="GRANTED",we}catch(we){var Ye;throw H.videoDevicePermissionStatus="DENIED",H.observer.onSetNoMediaInput(r.mT.CAMERA),(Ye=H.callLogger)===null||Ye===void 0||Ye.info("Video device permissions denied"),we}});return u(function(){return de.apply(this,arguments)},"callback")}();(U=this.defaultDeviceController)===null||U===void 0||U.setDeviceLabelTrigger(te)}maybeEnableSelfCamera(){let{isScreenshareEnabled:U}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var H=this;return(0,t.coroutine)(function*(){if((yield H.initVideoPermission())&&(H.videoDevicePermissionStatus==="INITIAL"||H.videoDevicePermissionStatus==="GRANTED")){var de;H.selfVideoEnabled(!0,!!U),H.observer.onPeerCameraActive("self",!0),(de=H.callLogger)===null||de===void 0||de.info("maybeEnableSelfCamera:: enabling camera function executed")}})()}initVideoPermission(){var U=this;return(0,t.coroutine)(function*(){var H;return U.setupVideoDeviceLabelTrigger(),yield(H=U.deviceManager)===null||H===void 0?void 0:H.initVideoInputDevices()})()}getSelfAttendeeId(){return this.selfAttendeeId}constructor(U,H,te="FREE-WILLY-SDK"){this.observer=U,this.audioOutputElement=H,this.loggerName=te,this.TURN_PORT_UDP=3478,this.OVERRIDE_TURN_PORT_UDP=22466,this.waitForInit=(0,c.u)(),this.waitForStop=(0,c.u)();var de=this;this.initVoiceFocus=(0,t.coroutine)(function*(){let vt=0;const ot=Date.now();de.voiceFocusManager=new Rn.A(de.chimeLogger),yield de.voiceFocusManager.init({configOnly:!1}),vt=Date.now()-ot,de.observer.onMaybeVoiceFocusInitialized(vt)});var Re=this;this.populateDeviceInfoCache=(0,t.coroutine)(function*(){var vt,ot,Mt,jt;const Ln=Date.now(),xn=yield(vt=Re.defaultDeviceController)===null||vt===void 0?void 0:vt.listAudioInputDevices(),bn=yield(ot=Re.defaultDeviceController)===null||ot===void 0?void 0:ot.listAudioOutputDevices(),On=yield(Mt=Re.defaultDeviceController)===null||Mt===void 0?void 0:Mt.listVideoInputDevices(),Un=Date.now()-Ln;(jt=Re.callLogger)===null||jt===void 0||jt.info(`Populated device info cache in ${Un}ms with ${xn==null?void 0:xn.length} microphones, ${bn==null?void 0:bn.length} speakers, and ${On==null?void 0:On.length} cameras`)}),this.cleanupDataChannelSubscribers=()=>{this.dataChannelSubscribers&&(this.dataChannelSubscribers.forEach(vt=>vt.onShutdownDataChannelSubscriber()),this.dataChannelSubscribers=void 0)};var Ye=this;this.cleanupDefaultDeviceControllerRefs=(0,t.coroutine)(function*(){var vt;if(!Ye.defaultDeviceController)return;yield Ye.defaultDeviceController.destroy();const ot=(vt=Ye.defaultDeviceController)===null||vt===void 0?void 0:vt.eventController;if(ot){var Mt;const jt=(Mt=ot.configuration)===null||Mt===void 0?void 0:Mt.urls;jt&&(jt.urlRewriter=void 0)}Ye.defaultDeviceController.deviceLabelTrigger=void 0,delete Ye.defaultDeviceController}),this.handleClientOffline=()=>{var vt;(vt=this.audioVideoObserver)===null||vt===void 0||vt.audioVideoDidStartConnecting(!0)},this.toggleAllIncomingVideo=vt=>{var ot;(ot=this.videoStreamsManager)===null||ot===void 0||ot.toggleAllIncomingVideo(vt)};var we=this;this.connect=(0,t.coroutine)(function*(){var vt,ot;if((vt=we.audioVideoObserver)===null||vt===void 0||vt.startWithSignalingOnly(),yield(ot=we.deviceManager)===null||ot===void 0?void 0:ot.init(),!we.isPrejoin){var Mt;if(!x.Ay.canAccessMediaResource(r.mT.MICROPHONE)){var jt;(jt=we.callLogger)===null||jt===void 0||jt.error("Missing microphone permissions. Not connecting to huddle");return}(Mt=we.audioVideoObserver)===null||Mt===void 0||Mt.start()}}),this.videoDevicePermissionStatus="INITIAL"}}u(Xe,"FreeWillySdk")},5016574668:(j,p,e)=>{"use strict";e.d(p,{An:()=>a,Kp:()=>l,Nb:()=>s,RN:()=>_,Sq:()=>i,ZT:()=>t,jt:()=>d,tz:()=>c,w4:()=>o,yz:()=>n});const t=10*1e3,n=1e3,s="2.5",a=450*450,c=25,o=15,i="huddles_perf",l="app_metrics",_="client_metrics",d=5},2205899741:(j,p,e)=>{"use strict";e.d(p,{$c:()=>O,h7:()=>D,t5:()=>y,e7:()=>r,KG:()=>C,q4:()=>I,_N:()=>v,sI:()=>W,Ap:()=>h,kq:()=>R,ik:()=>M,No:()=>k,fB:()=>V,Ye:()=>T,RI:()=>_,Fq:()=>b,oj:()=>m,qf:()=>S,Tg:()=>f});const t=30,n=300,s=300,a=30,c=10,o=30,i=1,l=u(P=>function(z){for(var $=arguments.length,x=new Array($>1?$-1:0),Y=1;Y<$;Y++)x[Y-1]=arguments[Y];if(!(typeof z!="string"&&typeof z!="number"))return P(z,...x)},"makeDeduction"),_=l(P=>P>a?P/5:void 0),d=l(P=>P>400?P/20:void 0),r=l(P=>P>1?P:void 0),m=l(P=>P>s?P/7.5:void 0),h=l(P=>P>1?P*10:void 0),v=l(P=>P>t?P/2:void 0),y=l(P=>P>o?P*1.25:void 0),I=l(P=>P>n?P/10:void 0),T=l(P=>P>o?P*1.5:void 0),f=l(P=>P>c?P*1.5:void 0),g=l(P=>P*2),M=l(P=>P&&P!=="udp"?40:void 0),A=l(P=>P&&P>500?P/100:void 0),O=l(P=>P>150?P/5:void 0),D=l(P=>P>15?P*2:void 0),E=l(P=>P>5?P:void 0),C=l(P=>P>20?P/5:void 0),S=l(P=>P>1?P*2.5:void 0),b=l(P=>!P||P==="none"?void 0:25),k=l(P=>P>0?P*20:void 0),W=l(P=>P>1?P*1.25:void 0),N=l(P=>P>300?P/10:void 0),V=l(P=>P&&P>o?P*1.5:void 0),R=l(P=>P>i?Math.round(P*7.5):void 0)},8634352961:(j,p,e)=>{"use strict";e.d(p,{Zr:()=>g,gR:()=>I,kB:()=>f,oB:()=>M,ws:()=>y,zT:()=>T});var t=e(7578217447),n=e(3852424459),s=e(796111729),a=e(9101533895),c=e(5795074931),o=e(3078252698);const i=(0,s.Wo)({label:"HUDDLE-RTM-FILTER"}),l=new Set(["file_shared","file_created","file_unshared","file_change"]),_=new Set(["sh_room_join","huddle_invite_cancel","update_thread_state","thread_subscribed","huddle_postcompute_complete"]);let d=u(class{constructor(O){this.skippedCount=0,this.allowedCount=0,this.allowedTypes={},this.updateSubscribedChannels=()=>{const E=this.getState();this.mutedChannels=(0,n.m)(E);const C=(0,a.D5)(E);this.joinedChannelIds=new Set(C.map(S=>S.id)),i.info(`Huddle RTM filter initialized. XWS joined channel count: ${this.joinedChannelIds.size} - Muted channel count: ${this.mutedChannels?Object.keys(this.mutedChannels).length:0}`)},this.getTopAllowedTypes=()=>this.allowedCount?Object.entries(this.allowedTypes).sort((E,C)=>{let[,S]=E,[,b]=C;return b-S}).slice(0,5).map(E=>{let[C]=E;return C}).join(" "):"",this.getPercentSkipped=()=>Math.round(this.skippedCount/(this.skippedCount+this.allowedCount)*100),this.isChannelDm=E=>E.startsWith("D"),this.isChannelMuted=E=>!E||!this.mutedChannels?!1:!!this.mutedChannels[E],this.isChannelJoined=E=>!E||!this.joinedChannelIds?!1:!!this.joinedChannelIds.has(E),this.skipRtm=()=>(this.skippedCount+=1,!0),this.allowRtm=E=>{this.allowedCount+=1;const C=E.type==="message"?`${E.type}/${E.subtype}`:E.type;return this.allowedTypes[E.type]=(this.allowedTypes[C]||0)+1,i.debug(`Allowed RTM type: ${E.type} - subtype: ${E.subtype}`,E),!1},this.shouldSkipRtm=E=>{var C,S;if(_.has(E.type))return this.allowRtm(E);if(((C=E.user)===null||C===void 0?void 0:C.id)===this.currentUserId||E.user===this.currentUserId||E.user_id===this.currentUserId)return this.allowRtm(E);if(E.type==="channel_joined"||E.type==="mpim_joined"||E.type==="im_open"||E.type==="member_joined_channel"||E.type==="message"&&E.subtype==="channel_join"||E.type==="desktop_notification"&&E.is_channel_invite)return i.info("Received IM/MPDM/channel join RTM. Updating channel references",E),this.updateSubscribedChannels(),this.allowRtm(E);const b=E.channel||((S=E.item)===null||S===void 0?void 0:S.channel)||E.channel_id,k=(0,o.A)(b)?b:void 0;return k&&this.isChannelDm(k)?this.allowRtm(E):k&&this.isChannelMuted(k)?this.skipRtm():k&&!this.isChannelJoined(k)?this.skipRtm():t.Sj.has(E.type)&&!l.has(E.type)?this.skipRtm():E.type==="dnd_invalidated"?this.skipRtm():E.type==="bot_added"||E.type==="bot_changed"||E.type==="hermes_trigger_updated"||E.type==="apps_changed"||E.type==="apps_installed"||E.type==="apps_uninstalled"?this.skipRtm():this.allowRtm(E)};const D=O();this.getState=O,this.currentUserId=(0,c.WR)(D),this.updateSubscribedChannels()}},"HuddleRtmFilter"),r,m,h=0;const v=u(()=>{h=0,m=Date.now()},"clearRtmsSinceLastReport"),y=u(A=>{try{i.info("initializing Huddle RTM filter"),r||(r=new d(A),v())}catch(O){i.error("Error in initHuddleRtmFilter",O)}},"initHuddleRtmFilter"),I=u(()=>{i.info("destroying Huddle RTM filter"),r=void 0,v()},"destroyHuddleRtmFilter"),T=u(()=>{if(r)return r.getPercentSkipped()},"getRtmFilterPercentSkipped"),f=u(()=>{if(r)return r.getTopAllowedTypes()},"getRtmFilterTopAllowedTypes"),g=u(A=>{try{return h+=1,m||(m=Date.now()),r?r.shouldSkipRtm(A):!1}catch(O){return i.error("Error in shouldSkipRtmDuringHuddle",O),!1}},"shouldSkipRtmDuringHuddle"),M=u(()=>{try{if(!m||!h)return 0;const A=Date.now()-m,O=Math.round(h/(A/1e3));return v(),O}catch(A){return i.error("Error in getRtmsPerSecond",A),0}},"getRtmsPerSecond")},7645722292:(j,p,e)=>{"use strict";e.d(p,{Gl:()=>D,Pk:()=>A,TK:()=>O,V_:()=>C,nu:()=>E});var t=e(4404059078),n=e(9268023148),s=e(6696292586),a=e(862210999),c=e(3398586081),o=e(5387083734),i=e(796111729);const l=1e3,_=500,d=3*1e3,r=250,m=1,h=5,v=100,y=20,I=5e3,T=5,f=(0,i.Ay)({label:"HUDDLE-RTM-SCHEDULER"});let g=u(class{reportMetrics(k){const{cpuCompetitionScore:W}=k;if(!W)return;const N=v-W;if(N<y)this.decreaseDelay();else{const V=(0,t.A)(Math.floor(N/y),m,h);this.increaseDelayWithMultiplier(V)}}constructor(){var k=this;this.currentDelay=l,this.taskQueueLength=0,this.resetSchedulerState=()=>{this.currentDelay=l,this.currentQueueDrainFn=void 0,this.taskQueueLength=0},this.increaseDelayWithMultiplier=function(){const N=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*r,V=k.currentDelay+N;k.setNextDelay(V)},this.decreaseDelay=()=>{if(this.currentDelay===_)return;const W=this.currentDelay-r;this.setNextDelay(W)},this.setNextDelay=(0,n.A)(W=>{if(!(0,s.A)(W))return;const N=this.currentDelay;this.currentDelay=(0,t.A)(W,_,d),N!==this.currentDelay&&f.debug(`Updated current RTM processing delay to ${this.currentDelay}`)},I,{leading:!0,maxWait:I}),this.scheduleQueueDrain=W=>{if(!(0,a.A)(W))return;if(this.taskQueueLength>T){f.info("too many RTM tasks enqueued, executing queue drain immediately"),W(),this.taskQueueLength=0;return}f.debug(`scheduling RTM queue drain with delay of ${this.currentDelay}`);const N=Date.now();return this.taskQueueLength+=1,this.currentQueueDrainFn=W,(0,o.IE)("huddle-rtm",W,{delay:this.currentDelay}).then(()=>{f.debug(`successfully executed rtm queue drain after ${Date.now()-N}ms`)}).catch(V=>{(0,a.A)(this.currentQueueDrainFn)?this.currentQueueDrainFn():(f.error("queue drain function not defined. Attempting queue drain function in scope"),(0,a.A)(W)&&W()),f.warn(`an error occurred while processing rtm queue drain: ${V.toString()}`)}).finally(()=>{this.taskQueueLength-=1})},this.onHuddleEnd=()=>{var W,N;(N=(W=this).currentQueueDrainFn)===null||N===void 0||N.call(W),f.info("Huddle ended. Drained queue and returned scheduling control to base RTM processor"),this.resetSchedulerState()},this.getCurrentDelay=()=>this.currentDelay,this.getTaskQueueLength=()=>this.taskQueueLength,f.info(`Initialized Huddle RTM scheduler with initial delay of ${this.currentDelay}`)}},"HuddleRtmScheduler");const M=(0,c.A)(()=>new g),A=u((b,k)=>{(k||M()).reportMetrics(b)},"reportMetricsToRtmScheduler"),O=u(b=>{(b||M()).onHuddleEnd()},"reportHuddleEndToRtmScheduler"),D=u((b,k)=>{(k||M()).scheduleQueueDrain(b)},"scheduleHuddleRtmQueueDrain"),E=u(b=>(b||M()).getTaskQueueLength(),"getCurrentRtmTaskQueueLength"),C=u(b=>(b||M()).getCurrentDelay(),"getCurrentRtmSchedulerDelay"),S=null},415910655:(j,p,e)=>{"use strict";e.d(p,{ZR:()=>a,jm:()=>n,s2:()=>s});let t;const n=u(c=>{t||(t={}),Object.assign(t,c)},"updateJoinTimingMetrics"),s=u(()=>t,"getJoinTimingMetrics"),a=u(()=>{t=void 0},"resetJoinTimingMetrics")},5470425448:(j,p,e)=>{"use strict";e.d(p,{lx:()=>l,zu:()=>i});var t;(function(_){_.UDP="udp",_.TCP="tcp"})(t||(t={}));var n;(function(_){_.RELAY="relay",_.DIRECT="direct"})(n||(n={}));var s;(function(_){_.UPLINK="uplink",_.DOWNLINK="downlink"})(s||(s={}));var a;(function(_){_.GOOD="good",_.FAIR="fair",_.BAD="bad",_.WORST="worst"})(a||(a={}));var c;(function(_){_.GOOD="good",_.FAIR="fair",_.BAD="bad",_.WORST="worst"})(c||(c={}));var o;(function(_){_[_.UPSTREAM=0]="UPSTREAM",_[_.DOWNSTREAM=1]="DOWNSTREAM"})(o||(o={}));var i;(function(_){_[_.AUDIO=0]="AUDIO",_[_.VIDEO=1]="VIDEO"})(i||(i={}));var l;(function(_){_.RtmMetrics="rtm-metrics",_.RenderTiming="render-timing",_.BluetoothDevices="bluetooth-devices",_.MemoryLeaks="memory-leaks",_.SelectedMediaRegion="selected-media-region",_.PreferredMediaRegion="preferred-media-region",_.VoiceFocusConfig="voice-focus-config",_.NetworkDisconnect="network-disconnect",_.CallId="call-id",_.ScreenshareContentType="screenshare-content-type",_.AppMetrics="app-metrics",_.NoAudio="no-audio",_.CameraResolution="max-camera-resolution",_.SetIsDebugApp="set-is-debug-app",_.TroubleshootingContactUsClicked="troubleshooting-contact-us-clicked",_.TroubleshootingEntryPoint="troubleshooting-entry-point",_.TroubleshootingExitHealthSnapshot="troubleshooting-exit-health-snapshot"})(l||(l={}))},5071086688:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(6267571562);const n=new t.G},5403856613:(j,p,e)=>{"use strict";e.d(p,{U:()=>a,p:()=>o});var t=e(7091646278),n=e(2205899741);const s=20,a=80,c=60,o=u(i=>{const{audioDownstreamQualityScore:l,networkQualityScore:_,networkType:d,networkProtocol:r,networkRelayProtocol:m,networkAvailableOutgoingBitrate:h,networkJitterMs:v,audioDownstreamJitterBufferDelay:y,networkCurrentRoundTripTimeMs:I,mediaRegionSelected:T,mediaRegionPreferred:f,cpuUse:g,cpuUseRelative:M,cpuCompetitionScore:A,gpuUse:O,batteryIsUsing:D,selectedMicrophone:E,selectedCamera:C,selectedSpeakers:S,cameraIsBlocked:b,cameraIsAvailable:k,microphoneIsBlocked:W,microphoneIsAvailable:N,isMicrophoneBluetooth:V,isSpeakerBluetooth:R,isMicrophoneAndSpeakerOnSameDevice:P,isHardwareAccelerationEnabled:z,isDisconnected:$,noAudioInput:x,osIsThrottlingCpu:Y,networkPacketLossPercent:ne}=i;let re;switch(!0){case _<=0:re=t.bz.Bad;break;case _<=a:re=t.bz.Warn;break;default:re=t.bz.Good}return{metrics:{stable:{mediaRegionSelected:T,mediaRegionPreferred:f,selectedMicrophone:E,selectedCamera:C,selectedSpeakers:S},unstable:{cpuCompetitionScore:A,cpuUse:g,gpuUse:O,cpuUseRelative:M,audioQualityScore:l,jitterMs:v,audioDelayMs:y,roundTripTimeMs:I,packetLossPercent:ne,incomingBandwidth:h,networkQualityScore:_}},warnings:{stable:{isVpnEnabled:d==="vpn",isSuboptimalProtocol:!!(0,n.ik)(r)||!!(0,n.ik)(m),isMediaRegionSuboptimal:!!T&&!!f&&T!==f,isUsingBatteryPower:D,isMicrophoneBluetooth:V,isMicrophoneAndSpeakerOnSameDevice:P,isSpeakerBluetooth:R,isCameraProbablyIphone:/iphone/.test(C==null?void 0:C.toLowerCase()),isHardwareAccelerationDisabled:z===!1,isOSThrottlingCpu:!!Y},unstable:{isCpuUsePoor:!!(0,n.$c)(g),isCpuUseRelativePoor:!!(0,n.h7)(M),isGpuUsePoor:!!(0,n.KG)(O),isJitterPoor:!!(0,n._N)(v),isRTTPoor:!!(0,n.oj)(I),isAudioDelayPoor:!!(0,n.q4)(y),isPacketLossPoor:!!(0,n.kq)(ne)}},alerts:{stable:{isCameraBlocked:b||!k,isMicrophoneBlocked:W||!N,isMicrophoneNotSendingAudio:!!x,isDisconnected:$},unstable:{networkQualityHealth:re,isNetworkQualityPoor:_<=a,isAudioQualityPoor:l<=s,isCpuCompetitionPoor:A<=c}}}},"getTroubleshootingMetricsFromTags")},6246464105:(j,p,e)=>{"use strict";e.d(p,{N5:()=>_,R1:()=>c,Y:()=>l});var t=e(6455766380),n=e(2825968873),s=e(5470425448),a=e(5071086688),c;(function(d){d.HuddlesSdk="huddles-sdk",d.ChimeChannelListener="chime-channel-listener",d.ChimeChannelBroadcaster="chime-channel-broadcaster",d.VoiceFocusDevice="voice-focus-device",d.VideoTransformDevice="video-transform-device",d.VideoFrameProcessor="video-frame-processor"})(c||(c={}));const o=new Map([[c.HuddlesSdk,t.Y.create({name:c.HuddlesSdk})],[c.ChimeChannelListener,t.Y.create({name:c.ChimeChannelListener})],[c.ChimeChannelBroadcaster,t.Y.create({name:c.ChimeChannelBroadcaster})],[c.VoiceFocusDevice,t.Y.create({name:c.VoiceFocusDevice})],[c.VideoTransformDevice,t.Y.create({name:c.VideoTransformDevice})],[c.VideoFrameProcessor,t.Y.create({name:c.VideoFrameProcessor})]]),i=(0,n.Jt)("HUDDLE-LEAK-MONITOR"),l=u(d=>{let{name:r,ref:m}=d;const h=o.get(r);if(!h)return;const v=h.getMetrics();if(v){const{numberOfObjects:y,numberOfExpiredObjects:I}=v,T=y-I;I>3&&(i.warn(`Detected ${I} memory leak(s) for ${r}${T?` (with another ${T} instances in memory)`:""}`),a.A.publish({type:s.lx.MemoryLeaks,update:{name:r,leakCount:I}}))}h.watch(m)},"monitorObjectForMemoryLeaks"),_=u(()=>{for(const[,d]of o)d.expectGCAll()},"detectMemoryLeaks")},8872167513:(j,p,e)=>{"use strict";e.d(p,{A:()=>Xe});var t=e(3398586081),n=e(4724591729),s=e(796111729),a=e(3855029223),c=e(169770637),o=e(9680914051);let i=u(class{initializeHuddleReconnectTracer(){var U,H,te;this.reconnectSpan=(U=this.trace)===null||U===void 0?void 0:U.startSpan(o.xN),this.reconnectSuccessSpan=(H=this.trace)===null||H===void 0?void 0:H.startSpan(o.xx),this.reconnectFailureSpan=(te=this.trace)===null||te===void 0?void 0:te.startSpan(o.cJ)}traceReconnectAttemptOutcome(U){let{isSuccess:H}=U;var te;H?this.reconnectSuccessCount+=1:this.reconnectFailureCount+=1,(te=this.logger)===null||te===void 0||te.info(`Registered huddle reconnect attempt outcome - isSuccess: ${H}`)}traceReconnectAttempt(){var U;this.reconnectCount+=1,(U=this.logger)===null||U===void 0||U.info("Counted huddle reconnect attempt")}report(){var U,H,te,de,Re;(U=this.reconnectSpan)===null||U===void 0||U.addTags({metric_value:this.reconnectCount}).close(),(H=this.reconnectSuccessSpan)===null||H===void 0||H.addTags({metric_value:this.reconnectSuccessCount}).close(),(te=this.reconnectFailureSpan)===null||te===void 0||te.addTags({metric_value:this.reconnectFailureCount}).close(),(de=this.tracer)===null||de===void 0||de.reportSpans([this.reconnectSpan,this.reconnectSuccessSpan,this.reconnectFailureSpan]),(Re=this.logger)===null||Re===void 0||Re.info("Reported reconnect attempt metric trace")}constructor({tracer:U,trace:H,logger:te}){this.reconnectCount=0,this.reconnectSuccessCount=0,this.reconnectFailureCount=0,this.tracer=U,this.trace=H,this.logger=te,this.initializeHuddleReconnectTracer()}},"HuddleReconnectTracer"),l=u(class{addTTIMetaTags(U){let{entryPoint:H,preferredMediaRegion:te,isPrejoin:de,isCreate:Re}=U;var Ye;(Ye=this.trace)===null||Ye===void 0||Ye.addTags({entry_point:H,preferred_media_region:te,is_prejoin:de,is_create:Re,success:!1})}createFetchCredentialsSpan(){var U;this.fetchCredentialsSpan=(U=this.trace)===null||U===void 0?void 0:U.startSpan(o.xl)}setCachedTag(U){let{cached:H}=U;var te;(te=this.trace)===null||te===void 0||te.addTags({cached:H})}closeFetchCredentialsSpan(){var U;(U=this.fetchCredentialsSpan)===null||U===void 0||U.close()}createConnectToMediaServiceSpan(){var U;this.connectToMediaServiceSpan=(U=this.trace)===null||U===void 0?void 0:U.startSpan(o.xA)}closeConnectToMediaServiceSpan(){var U,H,te,de;(U=this.connectToMediaServiceSpan)===null||U===void 0||U.close(),(H=this.trace)===null||H===void 0||H.addTags({success:!0}),(te=this.tracer)===null||te===void 0||te.reportTrace(this.trace),this.traceReported=!0,(de=this.logger)===null||de===void 0||de.info("Reported TTI metric trace")}getTTITraceId(){var U;return(U=this.trace)===null||U===void 0?void 0:U.getTraceId()}getFetchCredentialsSpanId(){var U;return(U=this.fetchCredentialsSpan)===null||U===void 0?void 0:U.getId()}setMediaRegionTag(U){var H,te;const de=(H=this.trace)===null||H===void 0?void 0:H.getTags().preferred_media_region;(te=this.trace)===null||te===void 0||te.addTags({media_region:U,media_region_matches:U===de})}report(){var U,H;if(!this.traceReported){var te,de;(te=this.tracer)===null||te===void 0||te.reportTrace(this.trace),this.traceReported=!0,(de=this.logger)===null||de===void 0||de.info("Reported TTI metric trace in final clean up")}(U=this.tracer)===null||U===void 0||U.clearTrace(this.trace),(H=this.logger)===null||H===void 0||H.info("Cleaned up TTI metric trace")}constructor({teamId:U,logger:H}){this.traceReported=!1,this.tracer=(0,a.E)({teamOrEnterpriseId:U}),this.trace=this.tracer.createTrace({traceName:o.bQ,samplingOptions:{sampleRate:(0,n.Cu)()?1:.05,sampleType:c.tS.SESSION}}),this.logger=H}},"HuddleTTITracer");var _=e(6696292586),d=e(7542104324),r=e(5470425448),m=e(9706240641),h=e(5016574668),v=e(1616072515);let y=u(class{recordAppMetrics(U){var H=this;return(0,m.coroutine)(function*(){const te=Date.now();if(te-H.lastRecordedSpanTs<H.reportingInterval)return;H.logger.debug(`Adding new ${h.Sq}:${h.Kp} span`);const Re=H.trace.startSpan(h.Kp),Ye=(0,v.tT)(U),we=Object.keys(Ye).length;Re.addTags(Ye),Re.close(),H.logger.debug(`Added new ${h.Sq}:${h.Kp} span with ${we} tags`),H.getSpanCount()>h.jt&&H.report(),H.lastRecordedSpanTs=te})()}constructor({teamId:U,logger:H,callLogger:te,enableMaxReportingFrequency:de}){var Re=this;this.traceReported=!1,this.lastRecordedSpanTs=0,this.getMetricsCollectionInterval=()=>(0,n.Cu)()||this.enableMaxReportingFrequency?h.yz:h.ZT,this.createNewTrace=()=>(this.trace=this.tracer.createTrace({traceName:h.Sq,tags:{__dataset:h.RN},samplingOptions:{sampleType:c.tS.ALWAYS}}),this.trace),this.getSpanCount=()=>{var Ye;const we=(Ye=this.trace)===null||Ye===void 0?void 0:Ye.getSpans();return we?Object.keys(we).length:0},this.report=function(){let Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(Ye&&Re.callLogger.debug(`Huddle ${Re.callId} is ending. Reporting ${Re.getSpanCount()} remaining spans`),!Re.traceReported&&Re.getSpanCount()>0){var we,vt;(we=Re.tracer)===null||we===void 0||we.reportTrace(Re.trace),(vt=Re.tracer)===null||vt===void 0||vt.clearTrace(Re.trace),Re.logger.debug(`Cleared ${h.Sq}:${h.Kp} event trace`),Ye?Re.traceReported=!0:Re.createNewTrace()}else Re.logger.debug(`Attempted to report ${h.Sq}:${h.Kp} trace but there was nothing to report`)},this.tracer=(0,a.E)({teamOrEnterpriseId:U}),this.enableMaxReportingFrequency=!!de,this.reportingInterval=this.getMetricsCollectionInterval(),this.createNewTrace(),this.logger=H,this.callLogger=te}},"HuddlePerfTracer");const I=null;var T=e(4103274853),f=e(166097325),g=e(8478954380),M=e(5403856613);const A=10*1e3,O=30*1e3;class D{constructor(U){this.logger=U,this.currentUnstableAlerts={},this.currentAlerts={networkQualityHealth:[],isNetworkQualityPoor:[],isAudioQualityPoor:[],isCpuCompetitionPoor:[]},this.updateInterval=A,this.updateIntervalIncrements=0,this.maybeIncrementUpdateInterval=()=>{this.updateIntervalIncrements+=1,this.updateIntervalIncrements%3===0&&(this.updateInterval=Math.min(O,this.updateInterval+1e3))},this.getStableAlerts=(H,te)=>{const de=u(Re=>{const Ye=H[Re];let we=this.currentAlerts[Re];const vt=Date.now();we.push({timestamp:vt,value:Ye}),we=we.filter(xn=>{let{timestamp:bn}=xn;return vt-bn<=O}),this.currentAlerts[Re]=we,we=we.filter(xn=>{let{timestamp:bn}=xn;return vt-bn<=te.interval});const ot=new Map;for(const xn of we)ot.has(xn.value)||ot.set(xn.value,0),ot.set(xn.value,ot.get(xn.value)+1);const Mt=Array.from(ot.entries());let[jt,Ln]=Mt[0];for(const[xn,bn]of Mt.slice(1))bn>Ln&&(Ln=bn,jt=xn);return Mt.length?jt:this.currentUnstableAlerts[Re]},"nextAlert");return{isAudioQualityPoor:de("isAudioQualityPoor"),isCpuCompetitionPoor:de("isCpuCompetitionPoor"),isNetworkQualityPoor:de("isNetworkQualityPoor"),networkQualityHealth:de("networkQualityHealth")}},this.getStabilityConfig=()=>({interval:this.updateInterval}),this.getAlertUpdates=H=>{let{alerts:te}=H;const de=this.getStableAlerts(te,this.getStabilityConfig()),Re=!(0,f.A)(de,this.currentUnstableAlerts);if(this.maybeIncrementUpdateInterval(),Re)return this.currentUnstableAlerts=de,this.logger.debug("Updated alerts and metrics will be dispatched to redux"),de}}}u(D,"AlertUpdater");const E=null,C="https://slack.com/help/articles/115003538426-Troubleshoot-audio-and-video-issues-in-Slack",S={isMicrophoneBluetooth:"The user is using a Bluetooth microphone, which could cause audio delays, reduce audio quality, or cause audio and video to fall out of sync. If these problems occur, suggest they switch to a wired or built-in microphone.",isCameraProbablyIphone:'The user might be unknowingly using their iPhone camera, which could lead to issues like a black screen or missing video. To prevent this, they can disable the "Continuity Camera" feature on their device. Guide them to go to Settings > Camera > Continuity and turn off the option.',isVpnEnabled:`The user is connected via a VPN, which can increase latency or cause connectivity issues if the VPN isn't optimized for video conferencing. Suggest they disable the VPN or ask their IT team to allow Slack traffic to bypass it. More details can be found here: ${C}`,isSuboptimalProtocol:`The user's connection protocol is TLS, not TCP, which may be due to a VPN, proxy, or firewall not configured for video conferencing. Suggest they disable their VPN or proxy, or ask their IT team to allow Slack traffic to bypass it. More details can be found here: ${C}`,isHardwareAccelerationDisabled:"Hardware acceleration seems to be disabled on the user's device, which could degrade performance. Suggest they re-enable hardware acceleration in their Slack preferences. They can do this by going to Preferences > Advanced > Enable hardware acceleration.",isUsingBatteryPower:"The user's device is running on battery power, which could limit device performance and cause audio, video, or application lag. If they report such issues, suggest they connect their device to a power source.",isMediaRegionSuboptimal:"The user is in a different region from the Huddle host, potentially causing increased latency and instability. This geographical disparity can't be controlled by users but network stability and connectivity can be improved. Suggest that they move closer to their Wi-Fi router, switch to a wired connection if possible, limit other bandwidth-intensive activities on their computer or network, or try connecting with a different network.",isOSThrottlingCpu:"The operating system is throttling CPU to manage heat or conserve battery power, which could lead to degraded audio or video quality and/or a general sense that Slack is slow or unresponsive. This might manifest as video freezing frequently, audio cutting out frequently, or audio-video sync issues. In more extreme cases, it can even trigger disconnections from the Chime media server. To mitigate this, ensure the user's device is well-ventilated, that they avoid running unnecessary applications during the call, and, if they are on a laptop, they should connect it to a power source. Adjusting power settings to prefer maximum performance (even when battery is being used) can also help. For detailed steps, please refer to your device's power management settings."},W={...{isNetworkQualityPoor:"The user's network quality is poor, which can cause delays or degraded audio or video, drops in connectivity, and audio/video desynchronization. Guide them through improving network stability, for instance, moving closer to their Wi-Fi router, switching to a wired connection if possible, limiting other bandwidth-intensive activities, or trying to connect with a different network.",isCpuCompetitionPoor:"The user\u2019s device is experiencing high CPU usage, causing audio or video delays, connectivity drops, or desynchronization. Suggest they close unnecessary applications, tabs, limit other CPU-intensive activities, ensure their computer has adequate airflow around it, and check if their hardware meets the recommended specifications."},...{isDisconnected:"The user is disconnected from the Huddle and can't send or receive audio or video. This might be due to network instability, incorrect configurations, hardware issues, or connectivity problems. Guide them through checking their network connection, suggest they limit other bandwidth-intensive activities, try connecting with a different network, move closer to their router, and suggest restarting the call.",isMicrophoneBlocked:"Slack can't access the user's microphone, possibly due to permission or settings issues. Verify that Slack has been granted permission to use the microphone, and ensure no other application is using it. They can check this by going to System Preferences (on macOS) or Sound settings (on Windows) and ensuring that Slack is checked.",isMicrophoneNotSendingAudio:"The user's microphone is connected, but isn't sending any audio, possibly due to another application using it, being muted, or system-level settings. Suggest they unplug and replug their device, restart Slack, limit other CPU-intensive activities, ensure their computer has adequate airflow around it, close unnecessary applications or tabs, and check for conflicting settings.",isCameraBlocked:"Slack can't access the user's camera, likely due to settings or permissions issues. Verify that Slack has permission to use their camera, and ensure no other application is using it. They can check this by going to System Preferences (on macOS) or Camera Privacy Settings (on Windows) and ensuring that Slack is checked."},...S},N={isNetworkQualityPoor:"networkQualityScoreReasons",isCpuCompetitionPoor:"cpuCompetitionScoreReasons"};class V{constructor({callLogger:U,logger:H,dispatch:te}){this.isDev=(0,n.Cu)(),this.isJsPath=(0,n.b3)(),this.loggedHuddleConfigInfo=!1,this.lastProcessedTagsTs=null,this.lastProcessedStats=null,this.lastUnstableMetricsUpdateTs=0,this.lastLoggedTagsTs=Date.now(),this.logHuddleConfigInfo=de=>{if(this.loggedHuddleConfigInfo||!this.lastProcessedTagsTs)return;const{isIA4Prod:Re,isUnifiedGrid:Ye,visibleSidebarItemCount:we,networkType:vt,networkProtocol:ot,networkRelayProtocol:Mt,isHardwareAccelerationEnabled:jt,batteryIsUsing:Ln}=de;this.callLogger.info(`Initial Huddle Config: Network Type=${vt}; Network Protocol=${ot}; Network Relay Protocol=${Mt}; IA4=${Re}; Unified Grid=${Ye}; Hardware Acceleration=${jt??"unknown (browser)"}; Using Battery Power=${Ln}; Sidebar Size=${we};`),this.loggedHuddleConfigInfo=!0},this.logWarningAndAlertUpdates=(de,Re)=>{Object.entries(de).forEach(Ye=>{let[we,vt]=Ye;if(vt&&this.isRelevantWarning(we,de)&&W[we]){let ot;if(we in N){const jt=N[we];jt&&(Re!=null&&Re[jt])&&(ot=Re[jt])}this.logger.warn(`\u{1F6A8} WARNING! ${W[we]}${ot?` reasons: (${ot})`:""}`)}})},this.isRelevantWarning=(de,Re)=>de==="isNetworkQualityPoor"||de==="isCpuCompetitionPoor"?"isAudioQualityPoor"in Re&&!!Re.isAudioQualityPoor:!0,this.logTags=de=>{const Re=Date.now();this.isJsPath||this.isDev?this.logger.info(`Recorded ${h.Sq}:${h.Kp} event span tags`,de):Re-this.lastLoggedTagsTs>10*1e3&&(this.logger.debug(`Recorded ${h.Sq}:${h.Kp} event span tags`,de),this.lastLoggedTagsTs=Re)},this.getStatsDiff=de=>{const Re=this.lastProcessedStats;return(0,T.A)(de,(Ye,we)=>{var vt,ot;return{stable:Re?!(0,f.A)((vt=Re[we])===null||vt===void 0?void 0:vt.stable,Ye==null?void 0:Ye.stable):null,unstable:Re?!(0,f.A)((ot=Re[we])===null||ot===void 0?void 0:ot.unstable,Ye==null?void 0:Ye.unstable):null}})},this.maybeUpdateTroubleshootingPanel=de=>{var Re,Ye,we,vt,ot,Mt,jt,Ln,xn;const bn=Date.now(),On=(0,M.p)(de),Un=this.getStatsDiff(On);if(this.lastProcessedStats=On,(!((Re=Un.alerts)===null||Re===void 0)&&Re.stable||((Ye=Un.alerts)===null||Ye===void 0?void 0:Ye.stable)===null)&&On.alerts.stable&&(this.dispatch((0,g._6)(On.alerts.stable)),Un.alerts.stable&&this.logWarningAndAlertUpdates(On.alerts.stable)),(!((we=Un.metrics)===null||we===void 0)&&we.stable||((vt=Un.metrics)===null||vt===void 0?void 0:vt.stable)===null)&&On.metrics.stable&&this.dispatch((0,g.qO)(On.metrics.stable)),(!((ot=Un.warnings)===null||ot===void 0)&&ot.stable||((Mt=Un.warnings)===null||Mt===void 0?void 0:Mt.stable)===null)&&On.warnings.stable&&(this.dispatch((0,g.it)(On.warnings.stable)),this.logWarningAndAlertUpdates(On.warnings.stable)),!((jt=On.alerts)===null||jt===void 0)&&jt.unstable){const Dn=this.alertUpdater.getAlertUpdates({alerts:On.alerts.unstable});Dn&&(this.dispatch((0,g.Li)(Dn)),this.logWarningAndAlertUpdates(Dn,de))}On.metrics.unstable&&On.warnings.unstable&&(!this.lastUnstableMetricsUpdateTs||bn-this.lastUnstableMetricsUpdateTs>1e4&&(!((Ln=Un.warnings)===null||Ln===void 0)&&Ln.unstable||!((xn=Un.metrics)===null||xn===void 0)&&xn.unstable))&&(this.dispatch((0,g.bW)({metrics:On.metrics.unstable,warnings:On.warnings.unstable})),this.lastUnstableMetricsUpdateTs=bn)},this.processTags=de=>{this.maybeUpdateTroubleshootingPanel(de),this.logHuddleConfigInfo(de),this.logTags(de),this.lastProcessedTagsTs=Date.now()},this.callLogger=U,this.logger=H,this.dispatch=te,this.alertUpdater=new D(H),this.callLogger.info("huddle perf observer initialized")}}u(V,"HuddlePerfObserver");const R=null,P=V;var z=e(2825968873),$=e(5238395322),x=e(2208015175),Y=e(9137897911),ne=e(9113979368),re=e(8872403767),_e=e(6313685253),G=e(1687672245);const ge=u(Me=>{if((0,ne.A)(Me))return;const U=(0,_e.A)(Me,(H,te)=>(0,G.A)(H,te,(de,Re)=>(de||0)+Re),{});return(0,T.A)(U,H=>H/Me.length)},"calculateIncomingVideoStatsAverages"),oe=u(Me=>{if(typeof Me=="string"||typeof Me=="boolean")return Me;if(!isNaN(Me)&&!(typeof Me>"u"||Me===null))return Math.round(Me)},"getScrubbedMetricValue"),me=u(Me=>{let{clientMetricReport:U,direction:H}=Me;const te=Object.keys(U.streamMetricReports);let de;return te.forEach(Re=>{const Ye=Number(Re),we=U.streamMetricReports[Ye];we.direction===H&&we.mediaType===r.zu.AUDIO&&(de=Ye)}),de},"getAudioSsrcId"),ue=u((Me,U,H,te,de)=>{const Re=Me==null?void 0:Me.getMetricMap(U,H)[te];if(Re!=null&&Re.transform)return Re.transform(te,de)},"getNonObservedMetric"),ae=u((Me,U)=>{const H=U?Me.replace(U,""):Me;return H.charAt(0).toUpperCase()+H.slice(1)},"removeSubstringAndCapitalize"),he=u(function(Me){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!(0,_.A)(U)||!(0,_.A)(Me))return 0;const te=isNaN(H)?0:H;if(Me===U||Me>U)return 0;const Re=(U-Me)/U*100-te;return Math.round(Re)},"calculateNonNetworkPacketLoss");var ce=e(2568070692),ee;(function(Me){Me[Me.UPSTREAM=0]="UPSTREAM",Me[Me.DOWNSTREAM=1]="DOWNSTREAM"})(ee||(ee={}));var J;(function(Me){Me[Me.AUDIO=0]="AUDIO",Me[Me.VIDEO=1]="VIDEO"})(J||(J={}));let X,F;const L=u(function(Me,U,H){let te=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Me||!U)return;const de=(U.timestamp-Me.timestamp)/1e3,Re=U[H]-Me[H];return te?Re/de:Re},"getNextStat"),K=u(Me=>{let{clientMetricReport:U,selfAttendeeId:H}=Me;const te=U.getObservableVideoMetrics();if(!te||!H)return;let de=0;const Re={},Ye=[];return(0,x.A)(te,(we,vt)=>{var ot;const Mt=Number((ot=Object.keys(we))===null||ot===void 0?void 0:ot[0]);if(!Mt)return;const jt=we[Mt];if(vt.endsWith("#content")){var Ln,xn;de+=1,(0,x.A)(jt,(es,Es)=>{Re[(0,Y.A)(`screenshare_${(0,v._3)(Es)}${de>1?`${de}_`:""}`)]=oe(es)}),Object.assign(Re,{screenshareVideoDownstreamDecoderImplementation:(Ln=U.streamMetricReports[Mt])===null||Ln===void 0||(xn=Ln.currentStringMetrics)===null||xn===void 0?void 0:xn.decoderImplementation,screenshareVideoDownstreamFramesReceivedPerSecond:U.countPerSecond("framesReceived",Mt),screenshareVideoDownstreamFramesDroppedPerSecond:ue(U,J.VIDEO,ee.DOWNSTREAM,"framesDropped",Mt),screenshareVideoDownstreamFreezeCount:ue(U,J.VIDEO,ee.DOWNSTREAM,"freezeCount",Mt),screenshareVideoDownstreamTotalDecodeTime:ue(U,J.VIDEO,ee.DOWNSTREAM,"totalDecodeTime",Mt),screenshareVideoDownstreamTotalFreezesDuration:ue(U,J.VIDEO,ee.DOWNSTREAM,"totalFreezesDuration",Mt)});return}if(H===vt){if(jt.videoUpstreamBitrate!==0){var bn,On;(0,x.A)(jt,(es,Es)=>{Re[`self${ae(Es,"Upstream")}`]=oe(es)}),Object.assign(Re,{selfVideoHardwareEncoder:ue(U,J.VIDEO,ee.UPSTREAM,"encoderImplementation",Mt),selfVideoEncoderImplementation:(bn=U.streamMetricReports[Mt])===null||bn===void 0||(On=bn.currentStringMetrics)===null||On===void 0?void 0:On.encoderImplementation,selfVideoTotalEncodeTime:ue(U,J.VIDEO,ee.UPSTREAM,"totalEncodeTime",Mt)})}}else{var Un,Dn;const es=ue(U,J.VIDEO,ee.DOWNSTREAM,"totalDecodeTime",Mt);if(es){var zn;Re.videoDownstreamTotalDecodeTime=((zn=Re.videoDownstreamTotalDecodeTime)!==null&&zn!==void 0?zn:0)+es}Object.assign(Re,{videoDownstreamDecoderImplementation:(Un=U.streamMetricReports[Mt])===null||Un===void 0||(Dn=Un.currentStringMetrics)===null||Dn===void 0?void 0:Dn.decoderImplementation}),Ye.push({...jt,videoDownstreamFramesReceivedPerSecond:U.countPerSecond("framesReceived",Mt),videoDownstreamFramesDroppedPerSecond:ue(U,J.VIDEO,ee.DOWNSTREAM,"framesDropped",Mt)})}}),(0,ne.A)(Ye)||Object.assign(Re,ge(Ye)),Re},"getVideoMetricTags"),B=["nackCountReceivedPerSecond","currentRoundTripTimeMs","availableOutgoingBitrate","availableIncomingBitrate"],Q=u(Me=>{let{clientMetricReport:U}=Me;const{audioDecoderLoss:H,audioPacketLossPercent:te,audioPacketsReceived:de,audioPacketsReceivedFractionLoss:Re,audioPacketsSent:Ye,audioSpeakerDelayMs:we,audioDownstreamJitterMs:vt,videoUpstreamBitrate:ot,videoPacketSentPerSecond:Mt,currentRoundTripTimeMs:jt,availableIncomingBitrate:Ln,availableOutgoingBitrate:xn,nackCountReceivedPerSecond:bn,audioUpstreamRoundTripTimeMs:On,audioUpstreamJitterMs:Un}=U.getObservableMetrics(),Dn=50,zn=he(de,Dn,Re),es=he(Ye,Dn,te),Es={audioDownstreamDecoderLoss:H,audioUpstreamPacketLossPercent:te,audioDownstreamPacketsReceived:de,audioDownstreamPacketLossPercent:Re,audioDownstreamJitterMs:vt,audioUpstreamPacketsSent:Ye,audioDownstreamNonNetworkPacketLossPercent:zn,audioUpstreamNonNetworkPacketLossPercent:es,audioDownstreamJitterBufferDelay:we,selfVideoBitrate:ot,selfVideoPacketsSentPerSecond:Mt,audioUpstreamRoundTripTimeMs:On,audioUpstreamJitterMs:Un,networkCurrentRoundTripTimeMs:jt,networkAvailableIncomingBitrate:Ln,networkAvailableOutgoingBitrate:xn,networkNackCountReceivedPerSecond:bn},bs=(0,re.A)(Es,(Ne,dt)=>B.indexOf(dt)>-1?(0,Y.A)(`network_${dt}`):dt),vs={networkSocketPacketsDiscardedOnSend:U.globalMetricReport.currentMetrics.packetsDiscardedOnSend},us=me({clientMetricReport:U,direction:ee.DOWNSTREAM});let w;if(us){const Ne=ue(U,J.AUDIO,ee.DOWNSTREAM,"concealedSamples",us);w={audioDownstreamTotalSamplesReceived:ue(U,J.AUDIO,ee.DOWNSTREAM,"totalSamplesReceived",us),audioDownstreamConcealedSamples:Ne}}return(0,T.A)({...bs,...vs,...w},Ne=>oe(Ne))},"getAudioMetricTags"),q=u(Me=>{const U={},H=[];let te;if(!Me)return X=void 0,U;Me.forEach(Re=>{Re.type==="local-candidate"&&H.push(Re),Re.type==="media-source"&&Re.kind==="audio"&&(U.audioUpstreamTotalSamplesDuration=Re.totalSamplesDuration,U.audioUpstreamAudioLevel=Re.audioLevel,U.audioUpstreamTotalAudioEnergy=Re.totalAudioEnergy),Re.type==="candidate-pair"&&Re.state==="succeeded"&&Re.nominated&&Re.localCandidateId&&(te=Re.localCandidateId),Re.type==="inbound-rtp"&&Re.kind==="audio"&&(U.audioDownstreamLevel=Re.audioLevel),Re.type==="outbound-rtp"&&Re.kind==="video"&&(U.selfVideoQualityLimitationDurations=Re.qualityLimitationDurations&&(0,ce.Zf)(Re.qualityLimitationDurations),U.selfVideoOutboundFramesPerSecond=Re.framesPerSecond,U.selfVideoPacketSendDelay=L(X,Re,"totalPacketSendDelay"),X=Re),Re.type==="media-source"&&Re.kind==="video"&&(U.selfVideoSourceFramesPerSecond=Re.framesPerSecond)});const de=H.find(Re=>Re.id===te);if(de){const{networkType:Re,protocol:Ye,relayProtocol:we}=de;U.networkType=Re,U.networkProtocol=Ye,U.networkRelayProtocol=we}return U},"getRtcStatsTags"),le=u(Me=>{if(!Me){F=void 0;return}const U={};return Me.forEach(H=>{if(H.type==="remote-inbound-rtp"&&H.kind==="video"){const{fractionLost:te,jitter:de,roundTripTime:Re}=H;Object.assign(U,{screenshareUpstreamJitter:de*1e3,screenshareUpstreamPacketLossPercent:te*100,screenshareUpstreamRoundTripTime:Re*1e3})}if(H.type==="outbound-rtp"&&H.kind==="video"){const{frameHeight:te,frameWidth:de,framesPerSecond:Re,targetBitrate:Ye,encoderImplementation:we,scalabilityMode:vt,powerEfficientEncoder:ot}=H;if(Object.assign(U,{screenshareUpstreamTargetBitrate:Ye,screenshareUpstreamFrameWidth:de,screenshareUpstreamFrameHeight:te,screenshareUpstreamFramesPerSecond:Re,screenshareUpstreamEncoderImplementation:we,screenshareUpstreamPowerEfficientEncoder:ot,screenshareUpstreamScalabilityMode:vt}),!F){F=H;return}const Mt=L(F,H,"totalEncodeTime",!0),jt=Mt&&Mt*1e3;Object.assign(U,{screenshareUpstreamPacketsSent:L(F,H,"packetsSent"),screenshareUpstreamPacketSendDelay:L(F,H,"totalPacketSendDelay"),screenshareUpstreamKeyFramesEncoded:L(F,H,"keyFramesEncoded"),screenshareUpstreamBitrate:L(F,H,"bytesSent",!0),screenshareUpstreamTotalEncodeTime:jt}),F=H}}),(0,T.A)(U,H=>oe(H))},"getScreenshareRtcStatsTags"),Te=u(Me=>{let{clientMetricReport:U,selfAttendeeId:H}=Me;const te=K({clientMetricReport:U,selfAttendeeId:H}),de=Q({clientMetricReport:U});return{...te,...de}},"getClientMetricReportTags"),Ie={getVideoMetricTags:K,getAudioMetricTags:Q,getClientMetricReportTags:Te,getScreenshareRtcStatsTags:le,getRtcStatsTags:q};var De=e(4404059078),pe=e(6890312250),fe=e(2205899741);const Z=0,se=100;function Ae(Me){return Me.endsWith(",")?Me.slice(0,-1):Me}u(Ae,"trimComma");const Ce=u(()=>{let Me=100,U="";return{deductFromScoreForReason:(H,te)=>{H&&(Me-=H,U+=`${te},`)},getScore:()=>(0,De.A)(Me,Z,se),getReasons:()=>Ae(U)}},"trackScoreAndReasons"),Le=u(Me=>{const{deductFromScoreForReason:U,getScore:H,getReasons:te}=Ce(),{screenshareUpstreamBitrate:de,screenshareUpstreamPacketLossPercent:Re,screenshareUpstreamJitter:Ye,screenshareUpstreamRoundTripTime:we,screenshareUpstreamFramesPerSecond:vt,screenshareUpstreamPacketSendDelay:ot,screenshareUpstreamQualityLimitationReason:Mt}=Me;if(de)return U((0,fe.Tg)(Re),"screenshareUpstreamPacketLossPercent"),U((0,fe._N)(Ye),"screenshareUpstreamJitter"),U((0,fe.oj)(we),"screenshareUpstreamRoundTripTime"),U((0,fe.RI)(ot),"screenshareUpstreamPacketSendDelay"),U((0,fe.qf)(h.w4-vt),"screenshareUpstreamFramesPerSecond"),U((0,fe.Fq)(Mt),"screenshareUpstreamQualityLimitationReason"),{screenshareUpstreamQualityScore:H(),screenshareUpstreamQualityScoreReasons:te()}},"getScreenshareUpstreamQualityScore"),Ue=u(Me=>{const{selfVideoPacketLossPercent:U,selfVideoFrameHeight:H,selfVideoFrameWidth:te,selfVideoRoundTripTime:de,selfVideoJitterMs:Re,selfVideoFramesEncodedPerSecond:Ye,isSelfVideoEnabled:we}=Me;if(!we||!te)return;const{deductFromScoreForReason:vt,getScore:ot,getReasons:Mt}=Ce();vt((0,fe.Tg)(U),"selfVideoPacketLossPercent");const jt=H*te;return vt((0,fe.e7)(100-jt/h.An*100),"selfVideoFrameHeight,selfVideoFrameWidth"),vt((0,fe._N)(Re),"selfVideoJitterMs"),vt((0,fe.oj)(de),"selfVideoRoundTripTime"),vt((0,fe.qf)(h.tz-Ye),"selfVideoFramesEncodedPerSecond"),{selfVideoQualityScore:ot(),selfVideoQualityScoreReasons:Mt()}},"getSelfVideoQualityScore"),Pe=u(Me=>{const{videoDownstreamPacketLossPercent:U,videoDownstreamFramesDecodedPerSecond:H,videoDownstreamFrameHeight:te,videoDownstreamFrameWidth:de,videoDownstreamJitterMs:Re,videoDownstreamDelayMs:Ye}=Me;if(!de)return;const{deductFromScoreForReason:we,getScore:vt,getReasons:ot}=Ce();we((0,fe.Tg)(U),"videoDownstreamPacketLossPercent");const Mt=te*de;return we((0,fe.e7)(h.An/Mt),"videoDownstreamFrameHeight,videoDownstreamFrameWidth"),we((0,fe.q4)(Ye),"videoDownstreamDelayMs"),we((0,fe._N)(Re),"videoDownstreamJitterMs"),we((0,fe.qf)(h.tz-H),"videoDownstreamFramesDecodedPerSecond"),{videoDownstreamQualityScore:vt(),videoDownstreamQualityScoreReasons:ot()}},"getVideoDownstreamQualityScore"),He=u(function(Me){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{deductFromScoreForReason:H,getScore:te,getReasons:de}=Ce();if(U){const{screenshareVideoDownstreamPacketLossPercent2:ot,screenshareVideoDownstreamJitterMs2:Mt,screenshareVideoDownstreamDelayMs2:jt,screenshareVideoDownstreamFrameHeight2:Ln}=Me;return Ln?(H((0,fe.Tg)(ot),"screenshareVideoDownstreamPacketLossPercent2"),H((0,fe._N)(Mt),"screenshareVideoDownstreamJitterMs2"),H((0,fe.q4)(jt),"screenshareVideoDownstreamDelayMs2"),{screenshareVideoDownstreamQualityScore2:te(),screenshareVideoDownstreamQualityScoreReasons2:de()}):void 0}const{screenshareVideoDownstreamPacketLossPercent:Re,screenshareVideoDownstreamJitterMs:Ye,screenshareVideoDownstreamDelayMs:we,screenshareVideoDownstreamFrameHeight:vt}=Me;if(vt)return H((0,fe.Tg)(Re),"screenshareVideoDownstreamPacketLossPercent"),H((0,fe._N)(Ye),"screenshareVideoDownstreamJitterMs"),H((0,fe.q4)(we),"screenshareVideoDownstreamDelayMs"),{screenshareVideoDownstreamQualityScore:te(),screenshareVideoDownstreamQualityScoreReasons:de()}},"getScreenshareDownstreamQualityScore"),Qe=u(Me=>{const{audioUpstreamPacketLossPercent:U,audioUpstreamRoundTripTimeMs:H,audioUpstreamJitterMs:te,audioUpstreamNonNetworkPacketLossPercent:de}=Me;if(!H)return;const{deductFromScoreForReason:Re,getScore:Ye,getReasons:we}=Ce();return Re((0,fe.Ye)(U),"audioUpstreamPacketLossPercent"),Re((0,fe.oj)(H),"audioUpstreamRoundTripTimeMs"),Re((0,fe._N)(te),"audioUpstreamJitterMs"),Re((0,fe.fB)(de),"audioUpstreamNonNetworkPacketLossPercent"),{audioUpstreamQualityScore:Ye(),audioUpstreamQualityScoreReasons:we()}},"getAudioUpstreamQualityScore"),lt=u(Me=>{const U={};return Me.screenshareVideoDownstreamFrameHeight2&&Object.assign(U,He(Me,!0)),{...He(Me),...U}},"getScreenshareDownstreamQualityScores"),qe=u(Me=>{const{cpuUse:U,gpuUse:H,cpuUseRelative:te,longTasksPercentage:de}=Me,{deductFromScoreForReason:Re,getScore:Ye,getReasons:we}=Ce();return Re((0,fe.sI)(de),"longTasksPercentage"),Re((0,fe.$c)(U),"cpuUse"),Re((0,fe.KG)(H),"gpuUse"),Re((0,fe.h7)(te),"cpuUseRelative"),{cpuCompetitionScore:Ye(),cpuCompetitionScoreReasons:we()}},"getCpuCompetitionScoreTags"),ct=u(function(){for(var Me=arguments.length,U=new Array(Me),H=0;H<Me;H++)U[H]=arguments[H];const te=U.filter(_.A);return te.length?Math.round((0,pe.A)(te)):0},"getMetricAverage"),tt=u(Me=>{const{networkCurrentRoundTripTimeMs:U,networkNackCountReceivedPerSecond:H,networkSocketPacketsDiscardedOnSend:te,networkProtocol:de,networkRelayProtocol:Re,audioDownstreamJitterMs:Ye,audioDownstreamPacketLossPercent:we,audioUpstreamPacketLossPercent:vt,audioUpstreamJitterMs:ot,videoDownstreamPacketLossPercent:Mt,screenshareDownstreamPacketLossPercent:jt,screenshareUpstreamPacketLossPercent:Ln,selfVideoPacketLossPercent:xn}=Me,{deductFromScoreForReason:bn,getScore:On,getReasons:Un}=Ce();bn((0,fe.ik)(de),"networkProtocol"),bn((0,fe.ik)(Re),"networkRelayProtocol"),bn((0,fe.No)(te),"networkSocketPacketsDiscardedOnSend"),bn((0,fe.oj)(U),"networkCurrentRoundTripTimeMs");const Dn=ct(Ye,ot);bn((0,fe._N)(Dn),"networkJitterMs"),bn((0,fe.Ap)(H),"networkNackCountReceivedPerSecond");const zn=ct(we,Mt,jt,vt,xn,Ln);return bn((0,fe.kq)(zn),"networkPacketLossPercent"),{networkJitterMs:Dn,networkPacketLossPercent:zn,networkQualityScore:On(),networkQualityScoreReasons:Un()}},"getNetworkQualityScoreTags"),it=u(Me=>{const{audioDownstreamDecoderLoss:U,audioDownstreamJitterBufferDelay:H,audioDownstreamPacketLossPercent:te}=Me,{deductFromScoreForReason:de,getScore:Re,getReasons:Ye}=Ce();return de((0,fe.t5)(U),"audioDownstreamDecoderLoss"),de((0,fe.q4)(H),"audioDownstreamJitterBufferDelay"),de((0,fe.Ye)(te),"audioDownstreamPacketLossPercent"),{audioDownstreamQualityScore:Re(),audioDownstreamQualityScoreReasons:Ye()}},"getAudioDownstreamQualityTags"),We=u(Me=>({...it(Me),...tt(Me),...Qe(Me),...Ue(Me),...lt(Me),...Le(Me),...qe(Me),...Pe(Me),qualityScoringVersion:h.Nb}),"getQualityScoreTags"),xe=u((Me,U)=>{let{type:H,update:te}=Me;switch(H){case r.lx.BluetoothDevices:case r.lx.PreferredMediaRegion:case r.lx.CameraResolution:case r.lx.CallId:case r.lx.ScreenshareContentType:Object.assign(U.sharedTags,te);break;case r.lx.MemoryLeaks:{const de=U.sharedTags.memoryLeakCount;Object.assign(U.sharedTags,{type:"shared",tags:{[`memoryLeaks-${te.name}`]:te.leakCount,memoryLeakCount:de?de+te.leakCount:te.leakCount}});break}case r.lx.SelectedMediaRegion:{const{mediaRegionPreferred:de}=U.sharedTags,Re=de&&te.mediaRegionSelected?de===te.mediaRegionSelected:!0;Object.assign(U.sharedTags,{mediaRegionSelected:te.mediaRegionSelected,mediaRegionMatchesPreference:Re});break}case r.lx.VoiceFocusConfig:Object.assign(U.sharedTags,{vfSimdSupported:te.model.simd,vfModelVariant:te.model.variant,vfSupported:te.supported});break;case r.lx.NetworkDisconnect:te.peerId==="self"&&Object.assign(U.transientTags,{selfDisconnectCount:(U.transientTags.selfDisconnectCount||0)+1});break;case r.lx.NoAudio:{const de=te.direction==="send"?{noAudioInput:te.noAudio}:{noAudioOutput:te.noAudio};Object.assign(U.sharedTags,de);break}case r.lx.SetIsDebugApp:Object.assign(U.sharedTags,{isDebugApp:!0});break;default:{(0,z.tZ)("HUDDLES-PERF").error(new Error(`Unexpected type: ${H}`));break}}},"updateState"),ze=null;var mt=e(6267571562);const pt=(0,s.Wo)({label:"COMPUTE-PRESSURE"}),It={nominal:1,fair:2,serious:3,critical:4};class bt{constructor(){this.defaultSampleRate=.5,this.pubSub=new mt.G,this.isObserving=!1,this.currentLevel=null;var U=this;this.startObserving=(0,m.coroutine)(function*(){if(!U.isObserving){try{var te;U.isObserving=!0,yield(te=U.pressureObserver)===null||te===void 0?void 0:te.observe("cpu")}catch(de){U.isObserving=!1,pt.error("An error occurred while attempting to observe compute pressure",de)}pt.info("Observing compute pressure")}}),this.getPressureLevelFromRecord=te=>te?It[te.state]:void 0,this.pressureObserverCallback=te=>{const de=te.pop();if(!de)return;const Re=this.getPressureLevelFromRecord(de);Re&&(this.currentLevel=Re,Re===1?pt.debug(`Compute pressure updated to ${de.state} (${Re} of 4)`):pt.warn(`Compute pressure updated to ${de.state} (${Re} of 4)`),this.pubSub.publish(Re))};var H=this;this.subscribe=function(){var te=(0,m.coroutine)(function*(de){H.pubSub.subscribe(de),yield H.startObserving()});return function(de){return te.apply(this,arguments)}}(),this.unsubscribe=te=>{if(this.pubSub.unsubscribe(te),!this.pubSub.subscriberCount)try{var de;(de=this.pressureObserver)===null||de===void 0||de.disconnect(),pt.debug("No longer observing compute pressure.")}catch(Re){pt.error("An error occurred attempted to disconnect from the compute pressure observer",Re)}},this.getCurrentLevel=()=>{if(this.currentLevel)return this.currentLevel;let te;try{var de;te=(de=this.pressureObserver)===null||de===void 0?void 0:de.takeRecords()}catch(Ye){pt.error("An error occurred attempting to get latest compute pressure reports",Ye)}const Re=te?this.getPressureLevelFromRecord(te.pop()):void 0;return Re&&(this.currentLevel=Re),Re},pt.info("Compute Pressure API is supported. Initializing pressure observer.");try{this.pressureObserver=new PressureObserver(this.pressureObserverCallback,{sampleRate:this.defaultSampleRate})}catch(te){pt.error("An error occurred creating a new instance of the PressureObserver",te)}if(!this.pressureObserver){pt.error("Compute pressure observer not created, though PressureObserver API should be supported");return}this.startObserving()}}u(bt,"ComputePressureObserver"),bt.isSupported=()=>"PressureObserver"in globalThis;let gt;const ht=u(()=>{if(gt)return gt;if(!bt.isSupported()){pt.info("Compute Pressure API is not supported.");return}try{gt=new bt}catch(Me){pt.error("An error occurred while attempting to create compute pressure observer",Me);return}return gt},"getComputePressureObserver"),Zt=null,rn=null,zt=ht,In={longTasksPercentage:0,longTasksPeakDuration:0,longTasksCount:0,longTasksTotalDuration:0};let cn=u(class{initializeReport(){this.report={...In},this.lastReportTime=performance.now()}isLongTaskTimingSupported(){return typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")}start(){this.observer||!this.isSupported||(this.observer=new PerformanceObserver(this.onReceiveLongTaskList),this.observer.observe({entryTypes:["longtask"]}),this.observer.takeRecords())}stop(){this.observer&&(this.observer.disconnect(),this.observer=null)}getReportSinceLastCall(){if(!this.observer||!this.isSupported)return;const H=performance.now()-this.lastReportTime;this.report.longTasksCount>0&&(this.report.longTasksPercentage=Math.round(this.report.longTasksTotalDuration/H*100));const te={...this.report};return this.initializeReport(),te}constructor(){this.report={...In},this.lastReportTime=performance.now(),this.observer=null,this.onReceiveLongTaskList=U=>{const H=U.getEntries();let te=0,de=0;H.forEach(Re=>{const Ye=Re.duration;te+=Ye,Ye>de&&(de=Ye)}),this.report.longTasksTotalDuration+=te,this.report.longTasksCount+=H.length,de>this.report.longTasksPeakDuration&&(this.report.longTasksPeakDuration=de)},this.isSupported=this.isLongTaskTimingSupported()}},"LongTaskObserver");const Jt=null,dn=cn;let sn=0;const Xt={traceName:h.Sq},xt="HUDDLES-PERF",en={troubleshootingEntryPoint:null,troubleshootingContactUsClicked:!1};let un=u(class{constructor(){var U;this.callLogger=(0,z.tZ)(xt),this.logger=(0,s.Wo)({label:xt}),this.sharedTags=Xt,this.transientTags={},this.renderTimings=[],this.rtmProcessingTimings=[],this.troubleshootingTags={...en},this.lastAppMetricsRecordingTs=Date.now(),this.currentTags={},this.computePressure=null,this.longTaskObserver=new dn,this.initSharedTags=()=>{sn+=1,this.updateSharedTags({huddlesCountSinceRefresh:sn})},this.initComputePressureObserver=()=>{this.computePressureObserver=zt(),this.computePressureObserver&&this.computePressureObserver.subscribe(this.updateComputePressure).then(()=>{var H;const te=(H=this.computePressureObserver)===null||H===void 0?void 0:H.getCurrentLevel();this.computePressure=te})},this.updateSharedTags=H=>{this.sharedTags={...this.sharedTags,...H}},this.updateTransientTags=H=>{this.transientTags={...this.transientTags,...H}},this.updateComputePressure=H=>{const te=this.computePressure;this.computePressure=H;let de;switch(H){case 1:de="System workload is minimal, operating at lower clock speed to conserve power.";break;case 2:de="System is performing well but under a fair amount of pressure. Still able to take on additional workload without issues.";break;case 3:de="System is experiencing significant pressure but remains sustainable; close to operational limits.";break;case 4:de="System is now about to reach its operational limits; continued pressure may lead to CPU throttling.";break;default:de="Unknown system workload condition."}H>2?this.callLogger.warn(`Compute pressure updated to level ${H} of 4. This is a measure of the strain on the user's computer's processing capacity, which may or may not be caused by Slack or Huddles, but will likely impact performance. A score of ${H} suggests that: ${de}. If this warning is frequent, suggest that the user close unused tabs or applications on their computer, ensure their computer is not in battery-saving mode, and/or give other general advice around reducing CPU use.`):te&&te>2&&this.logger.debug(`Compute pressure updated to level ${H} of 4 from ${te}. ${de}`)},this.updateState=H=>{switch(H.type){case r.lx.RenderTiming:this.renderTimings.push(H.update);break;case r.lx.RtmMetrics:this.rtmProcessingTimings.push(H.update);break;case r.lx.AppMetrics:this.updateMetrics(H.update);break;case r.lx.TroubleshootingEntryPoint:this.troubleshootingTags.troubleshootingEntryPoint=H.update;break;case r.lx.TroubleshootingContactUsClicked:this.troubleshootingTags.troubleshootingContactUsClicked=!0;break;default:xe(H,{sharedTags:this.sharedTags,transientTags:this.transientTags})}},this.updateMetrics=H=>{let{huddleStateSnapshot:te,clientMetricReport:de,screenshareRtcStats:Re}=H;const Ye=de?Te({clientMetricReport:de,selfAttendeeId:de.selfAttendeeId}):{},we=de?q(de.getRTCStatsReport()):{},vt=le(Re),ot={...te,...Ye,...vt,...we,...this.sharedTags,...this.transientTags,...this.getRtmMetricTags(),...this.getRenderTimingTags(),...this.getTimestampTags(),...this.getComputePressureTags(),...this.getLongTaskTags(),...this.getTroubleshootingTags()},Mt=We(ot);this.currentTags={...ot,...Mt},this.clearTransientTags(),this.lastAppMetricsRecordingTs=Date.now()},this.getCurrentTags=()=>({...this.currentTags}),this.clearTransientTags=()=>{this.transientTags={}},this.getLongTaskTags=()=>{var H;return(H=this.longTaskObserver)===null||H===void 0?void 0:H.getReportSinceLastCall()},this.getTimestampTags=()=>{const{huddleStartTimestamp:H}=this.currentTags;return H?{secondsSinceJoining:Math.floor((Date.now()-H)/1e3)}:{}},this.getRtmMetricTags=()=>{const H=this.rtmProcessingTimings.length;return this.rtmProcessingTimings=[],{rtmMessagesProcessed:H}},this.getTroubleshootingTags=()=>{const H={...this.troubleshootingTags};return this.troubleshootingTags={...en},H},this.getComputePressureTags=()=>({computePressure:this.computePressure}),this.getRenderTimingTags=()=>{const H=Date.now()-this.lastAppMetricsRecordingTs,te=(0,$.A)(this.renderTimings),de=this.renderTimings.length;return!te||!H?{uiRenderTimePercent:0,uiRenderTimeMs:0}:(this.renderTimings=[],{uiRenderTimePercent:Number((te/H*100).toFixed(1)),uiRenderCount:de})},this.cleanup=()=>{var H,te;(H=this.computePressureObserver)===null||H===void 0||H.unsubscribe(this.updateComputePressure),delete this.computePressureObserver,(te=this.longTaskObserver)===null||te===void 0||te.stop(),delete this.longTaskObserver},this.initSharedTags(),this.initComputePressureObserver(),(U=this.longTaskObserver)===null||U===void 0||U.start()}},"HuddlePerfStateInternal");const yn=null,ut=un;var Ot=e(5071086688),kt=e(5387083734),be=e(7645722292),Kt=e(8634352961),Vt=e(415910655),on=e(5332875232);const pn="HUDDLES-PERF",et=5e3,At=1e3;let Rt=u(class{constructor({teamId:U,logger:H,dispatch:te,getState:de,useRtmFiltering:Re=!1}){this.logger=(0,s.Wo)({label:pn}),this.callLogger=(0,z.tZ)(pn),this.errorReported=!1,this.lastRecordedMetricsTs=0,this.reportCounts={skipped:0,recorded:0},this.reportUpdate=Ye=>{Ye.type===r.lx.AppMetrics?this.recordAppMetrics(Ye):this.huddlePerfState.updateState(Ye)},this.recordAppMetrics=Ye=>{(0,kt.IE)("huddle-perf-metrics",()=>{var we,vt;if(!this.shouldRecordAppMetrics({nextReportTimestamp:(we=Ye.update)===null||we===void 0||(vt=we.clientMetricReport)===null||vt===void 0?void 0:vt.currentTimestampMs})){this.reportCounts.skipped+=1;return}this.logger.debug("Recording app metrics",this.reportCounts.recorded),this.huddlePerfState.updateState(Ye);const ot=this.huddlePerfState.getCurrentTags();this.huddlePerfTrace.recordAppMetrics(ot),this.updateRtmScheduler(ot);try{this.huddlePerfObserver.processTags(ot)}catch(Mt){this.errorReported||(this.callLogger.error("An error occurred while processing tags",Mt),this.errorReported=!0)}this.lastRecordedMetricsTs=Date.now(),this.reportCounts.recorded+=1},{delay:100})},this.shouldRecordAppMetrics=Ye=>{let{nextReportTimestamp:we}=Ye;if(!we)return!1;const vt=Date.now(),ot=vt-this.lastRecordedMetricsTs;if(ot<At)return this.logger.debug(`Not enough time has passed since last report was recorded (${ot}ms). Skipping. Total skipped: ${this.reportCounts.skipped}`),!1;const jt=vt-we;return jt>et?(this.logger.debug(`Too much time has passed since the current report was made (${jt}ms). Skipping. Total skipped: ${this.reportCounts.skipped}`),!1):!0},this.updateRtmScheduler=Ye=>{const{cpuCompetitionScore:we}=Ye;(0,_.A)(we)&&!this.disableRtmScheduler&&(0,be.Pk)({cpuCompetitionScore:we})},this.report=Ye=>{this.huddlePerfTrace.report(Ye),Ot.A.unsubscribe(this.reportUpdate),this.huddlePerfState.cleanup(),(0,d.rH)(!1),(0,Vt.ZR)(),this.disableRtmScheduler||(0,be.TK)(),this.useRtmFiltering&&(this.callLogger.info("RTM filtering will be disabled"),(0,Kt.gR)())},this.huddlePerfTrace=new y({teamId:U,logger:H,callLogger:this.callLogger,enableMaxReportingFrequency:(0,on.CN)(de())}),this.huddlePerfObserver=new P({logger:H,callLogger:this.callLogger,dispatch:te}),this.useRtmFiltering=Re,this.huddlePerfState=new ut,Ot.A.subscribe(this.reportUpdate),this.disableRtmScheduler=(0,on.kf)(de()),this.disableRtmScheduler?(this.callLogger.info("RTM scheduler will be disabled"),(0,d.jQ)(!0)):this.callLogger.info("RTM queues will be drained as background priority tasks by Huddle RTM scheduler"),(0,d.rH)(!0),this.useRtmFiltering&&(0,Kt.ws)(de)}},"HuddlePerfManager");const Ft=null,$t=Rt;var vn=e(6533394955),Rn=e(2141441167),hn=e(2709531527),gn=e(8276911661),Cn=e(5795074931),fn=e(5286203919),Oe=e(8847766420),ke=e(7606781622),je=e(6251210828),Be=e(3792998666);const st=u(Me=>{let{teamId:U}=Me;var H,te;const de=(0,vn.getStoreInstanceByTeamId)(U).getState(),Re=(0,vn.getClientStoreInstance)().getState(),Ye=(0,fn.E9)(Re),we=(0,fn.hc)(Re),vt=(0,Oe.jV)(de),ot=(0,je.ok)(de,{huddleId:Ye}),Mt=(0,je.Zg)(de,{huddleId:Ye}),jt=(0,Cn.WR)(de),Ln=Mt?Mt.timestamps.map(zn=>we?(0,ke.Ld)(de,we,zn):void 0).filter(zn=>(zn==null?void 0:zn.user)===jt):[],xn=(H=Ln[0])===null||H===void 0?void 0:H.ts,bn=(te=Ln.slice(-1)[0])===null||te===void 0?void 0:te.ts,On=Ln.length,Un=(0,gn.nv)(de,jt),Dn=(0,Be.P)(Un);return{huddleId:Ye,channelId:we,enterpriseId:vt,threadId:ot,threadReplyCnt:On,threadFirstReplyTs:xn,threadLastReplyTs:bn,isGuest:Dn}},"getHuddleEventsStateSnapshot"),St="huddle_events",Yt="huddle",tn="vhq",at={topicName:Yt,userAgent:navigator.userAgent,serviceName:tn};let Et=u(class{get spansList(){var U;return(0,Rn.A)((U=this.trace)===null||U===void 0?void 0:U.getSpans())||[]}report(){var U;let H;try{H=(0,v.tT)({...this.sharedTags,...st({teamId:this.teamId})})}catch(de){var te;this.logger.error(`Error while reporting huddle_events trace: ${de}`),(te=this.tracer)===null||te===void 0||te.clearTrace(this.trace);return}!this.traceReported&&this.trace&&(this.trace.addTags(H),this.logger.info(`Reporting huddle_events trace: ${this.trace.getTraceId()} with ${this.spansList.length} spans`),this.tracer.reportTrace(this.trace),this.traceReported=!0,this.logger.debug("Reported huddle_events trace with tags",H)),(U=this.tracer)===null||U===void 0||U.clearTrace(this.trace)}constructor({teamId:U,logger:H}){this.sharedTags=at,this.traceReported=!1,this.getSpanByName=te=>this.spansList.find(de=>te===de.getOperationName()),this.getDataSet=()=>{if(!(0,n.Cu)())return"client_metrics"},this.addInitialSpans=()=>{this.update({name:hn.p.JOIN,type:hn.G.START,tags:{}}),this.update({name:hn.p.MINIPLAYER_VIEW,type:hn.G.START})},this.isSurfaceChange=te=>te===hn.p.MINIPLAYER_VIEW||te===hn.p.WINDOW_COMPACT_VIEW||te===hn.p.WINDOW_FULL_VIEW,this.handleSurfaceChange=te=>{let{name:de,type:Re}=te;Re===hn.G.START&&this.isSurfaceChange(de)&&this.spansList.filter(Ye=>this.isSurfaceChange(Ye.getOperationName())).forEach(Ye=>{Ye.getOperationName()!==de&&this.closeSpan(Ye)})},this.update=te=>{let{name:de,type:Re,tags:Ye}=te;if(this.trace)if(Re===hn.G.START||Re===hn.G.ONCE){const we=this.trace.startSpan(de,{parentSpanId:this.joinSpanId});Ye&&we.addTags(Ye),de===hn.p.JOIN&&(this.joinSpanId=we.getId()),this.isSurfaceChange(de)&&this.handleSurfaceChange({name:de,type:Re}),this.logger.debug(`started new span for huddle_events trace: ${de}`),Re===hn.G.ONCE&&this.closeSpan(we)}else{const we=this.getSpanByName(de);this.closeSpan(we),this.logger.debug(`closed span for huddle_events trace: ${de}`)}},this.closeSpan=te=>{te&&(te.getCloseTimeMs()||te.close())},this.recordEntryPoint=te=>{Object.assign(this.sharedTags,{entryPoint:te})},this.tracer=(0,a.E)({teamOrEnterpriseId:U}),this.trace=this.tracer.createTrace({traceName:St,tags:{__dataset:this.getDataSet()},samplingOptions:{sampleRate:1,sampleType:c.tS.SESSION}}),this.teamId=U,this.logger=H,this.logger.info(`created huddle_events trace:${this.trace.getTraceId()}`),this.addInitialSpans()}},"HuddleEventsTracer");const _t="HUDDLE-TRACE-MANAGER",Bt=(0,s.Wo)({label:_t});let Qt=u(class{initializeTraces(U){let{teamId:H,isTinySpeck:te,isDebugApp:de}=U;const Re=(0,vn.getStoreInstanceByTeamId)(H),Ye=Re.getState();this.teamId=H,this.tracer=(0,a.E)({teamOrEnterpriseId:this.teamId}),this.trace=this.tracer.createTrace({traceName:o.ne,samplingOptions:{sampleRate:(0,n.Cu)()||te?1:.05,sampleType:c.tS.SESSION},tags:{__dataset:"client_metrics"}}),de||(this.reconnectTrace=new i({tracer:this.tracer,trace:this.trace,logger:Bt}),this.ttiTrace=new l({teamId:this.teamId,logger:Bt}),this.huddleEventsTrace=new Et({teamId:this.teamId,logger:Bt})),this.huddlePerfTraceManager=new $t({teamId:this.teamId,logger:Bt,dispatch:Re.dispatch,getState:Re.getState,useRtmFiltering:(0,on.DP)(Ye)})}setCallId(U){var H;this.callId=U,(H=this.trace)===null||H===void 0||H.addTags({callId:this.callId}),U&&Ot.A.publish({type:r.lx.CallId,update:{callId:U}})}getAllTraceHandlers(){return{reconnectTrace:this.reconnectTrace,ttiTrace:this.ttiTrace,huddlePerfTraceManager:this.huddlePerfTraceManager,huddleEventsTrace:this.huddleEventsTrace}}cleanup(){var U,H,te,de,Re,Ye;(U=this.reconnectTrace)===null||U===void 0||U.report(),(H=this.ttiTrace)===null||H===void 0||H.report(),(te=this.huddlePerfTraceManager)===null||te===void 0||te.report(!0),(de=this.huddleEventsTrace)===null||de===void 0||de.report(),(Re=this.tracer)===null||Re===void 0||Re.reportTrace(this.trace),(Ye=this.tracer)===null||Ye===void 0||Ye.clearTrace(this.trace),Bt.info("Reported and cleared huddle parent trace"),delete this.reconnectTrace,delete this.ttiTrace,delete this.huddlePerfTraceManager,delete this.huddleEventsTrace,this.callId=null}constructor(){Bt.info("Huddle Trace Manager created")}},"HuddleTraceManager");const Xe=(0,t.A)(()=>new Qt)},2709531527:(j,p,e)=>{"use strict";e.d(p,{G:()=>t,p:()=>n});var t;(function(s){s.START="start",s.STOP="stop",s.ONCE="once"})(t||(t={}));var n;(function(s){s.JOIN="session_join",s.VIDEO="video",s.SCREENSHARE="screenshare",s.REACTION="reaction_posted",s.MESSAGE="message_posted",s.MICROPHONE="microphone",s.MINIPLAYER_VIEW="mini_player_view",s.WINDOW_COMPACT_VIEW="window_compact_view",s.WINDOW_FULL_VIEW="window_full_view",s.THREAD_VIEW="thread_flexpane_view",s.TRANSCRIPT="trxn"})(n||(n={}))},1616072515:(j,p,e)=>{"use strict";e.d(p,{_3:()=>a,tT:()=>c});var t=e(4178261413),n=e(8872403767),s=e(6422693406);const a=u(i=>(0,t.A)(i),"formatTag"),c=u(function(i){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"peer_video";return(0,n.A)(i,(_,d)=>d.indexOf(l)>-1?d:a(d))},"formatTags"),o=u(()=>new Bluebird(i=>{setTimeout(i,0)}),"waitForNextTick")},3146858537:(j,p,e)=>{"use strict";e.d(p,{A:()=>g});var t=e(9706240641),n=e(8958249318),s=e(6422693406),a=e(56548687),c=e(6244014364),o=e(6664301844),i=e(2825968873);function l(){return 2}u(l,"getVoiceFocusCacheVersion");var _;const d="voiceFocusCache";function r(){return{userAgent:"unknown",sdkVersion:"unknown",isSupported:"unknown"}}u(r,"createDefaultVoiceFocusCapability");function m(){return{vfConfig:"unknown",lastUpdateTimeMs:0}}u(m,"createDefaultVoiceFocusCachedConfig");function h(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window==null||(_=window.navigator)===null||_===void 0?void 0:_.userAgent,A=arguments.length>1?arguments[1]:void 0;const O=localStorage.getItem(d),D={version:l(),voiceFocusCapability:r(),voiceFocusCachedConfig:m()};if(!O)return D;let E;try{E=JSON.parse(O)}catch(C){return(0,i.tZ)("VOICE-FOCUS-CACHE").error("Could not parse voice focus cache from localStorage: ",C.message),D}return E.version!==l()?D:(E.voiceFocusCapability&&(E.voiceFocusCapability.userAgent!==M||E.voiceFocusCapability.sdkVersion!==A)&&(E.voiceFocusCapability=D.voiceFocusCapability,E.voiceFocusCachedConfig=D.voiceFocusCachedConfig),{...D,...E})}u(h,"readVoiceFocusCache");function v(M){try{localStorage.setItem(d,JSON.stringify(M))}catch(A){(0,i.tZ)("VOICE-FOCUS-CACHE").error("Could not write voice focus cache to localStorage: ",A.message)}}u(v,"writeVoiceFocusCache");var y=e(5470425448),I=e(5071086688);const T=1657647210615,f=1686248081659;let g=u(class{init(A){let{configOnly:O}=A;var D=this;return(0,t.coroutine)(function*(){O||D.callLogger.info(`VF cache: ${!!D.cache}`),D.isSupported=yield D.isCapable(!!O),D.isSupported&&D.prepare(O)})()}isAvailable(){return this.isSupported}getTransformDevice(){var A=this;return(0,t.coroutine)(function*(){if(A.isSupported&&(A.voiceFocusConfigPromise&&(yield A.voiceFocusConfigPromise),!!A.voiceFocusDeviceTransformerPromise)){try{yield A.voiceFocusDeviceTransformerPromise}catch{A.callLogger.error("Could not get VoiceFocusDeviceTransformer");return}if(A.voiceFocusTransformDevicePromise)try{return yield A.voiceFocusTransformDevicePromise}catch{A.callLogger.error("Could not get VoiceFocusTransformDevice")}}})()}shouldDisable(){return!1}setMute(A){var O=this;return(0,t.coroutine)(function*(){const D=yield O.getTransformDevice();D&&(yield D.mute(A))})()}isCapable(A){var O=this;return(0,t.coroutine)(function*(){if(O.isIFramed())return A||O.callLogger.warn("not supported due to IFrame"),!1;let D=!1;switch(O.cache.voiceFocusCapability.isSupported){case"yes":A||O.callLogger.info("cache says supported"),D=!0;break;case"no":A||O.callLogger.info("cache says not supported"),D=!1;break;case"unknown":{A||O.callLogger.info("cache says unknown, determining support..."),O.cache.voiceFocusCapability.userAgent=(0,n.A)(),O.cache.voiceFocusCapability.sdkVersion=o.zF.sdkVersion,D=yield(0,o.w2)().isSupported(),D?O.cache.voiceFocusCapability.isSupported="yes":O.cache.voiceFocusCapability.isSupported="no",v(O.cache),A||O.callLogger.info(`determined supported=${O.cache.voiceFocusCapability.isSupported}, writing to cache`);break}default:O.callLogger.warn(`Voice Focus capability pref bad: ${O.cache.voiceFocusCapability.isSupported}`);break}return D})()}isIFramed(){try{var A;return((A=window.frameElement)===null||A===void 0?void 0:A.nodeName)==="IFRAME"||parent!==top}catch{return!0}}isStale(A){const D=this.cache.voiceFocusCachedConfig.lastUpdateTimeMs,E=this.allowMaxModelsToBeUsed?f:T;return D===0||A-D>6048e5||D<E}prepare(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const O=Date.now(),D=this.cache.voiceFocusCachedConfig.vfConfig,E=this.isStale(O),C={},S={logger:this.chimeLogger};if(D!=="unknown"&&!E){if(A)return;if(!D.supported){this.callLogger.warn("Unsupported config was returned from the cache");return}this.setupDevice(C,S,D);return}this.voiceFocusConfigPromise||(this.callLogger.info("Initializing VoiceFocusDeviceTransformer afresh"),this.voiceFocusConfigPromise=s.S.resolve((0,o.w2)().configure(C,S)),this.voiceFocusConfigPromise.then(b=>{var k;if(!b.supported){this.callLogger.error(`VF Config was provided as unsupported Reason: ${b.reason}`);return}if(!(!(b==null||(k=b.model)===null||k===void 0)&&k.simd)){this.callLogger.error("VF not enabled because device is not expected to be able to perform adequately");return}const N=b;this.callLogger.info(`Got new config, variant: ${N.model.variant}, simd: ${N.model.simd}, executionQuanta: ${N.executionQuanta}`),this.storeVfConfig(O,N),A||this.setupDevice(C,S,N)}).catch(b=>{this.callLogger.info(`Could not get configuration of voice device transformer: ${b.name}: ${b.message}`),A||this.setupDevice(C,S)}))}storeVfConfig(A,O){this.cache.voiceFocusCachedConfig.vfConfig=O,this.cache.voiceFocusCachedConfig.lastUpdateTimeMs=A,v(this.cache)}updateCacheWithUpdatedConfig(A){var O=this;return(0,t.coroutine)(function*(){O.callLogger.info("Updating VF cache with new modified model");const D={logger:O.chimeLogger},E={variant:A},C=yield(0,o.w2)().configure(E,D);C.supported&&O.storeVfConfig(Date.now(),C)})()}setupDevice(A,O,D){const E=A;let C=D,S,b;D?(S=D.model.variant,b=!0):(this.callLogger.info("No VFConfig provided defaulting base model to c10"),S="c10",b=!1);let k=!0;this.allowMaxModelsToBeUsed&&(k=!1);const W=this.chooseModelVariant(S,b,k);if(W.modelWasAdjusted&&(E.variant=W.chosenModel,C=void 0,this.callLogger.info(`VF Model was adjusted from ${D==null?void 0:D.model.variant} to ${W.chosenModel} Reason: ${W.adjustmentReason}`),this.updateCacheWithUpdatedConfig(W.chosenModel)),D){(0,a.e)().track(c.EventId.CALLS_VOICE_FOCUS_CONFIG,{model_variant_determined:D.model.variant,model_variant_override:E.variant,simd:D.model.simd,execution_quanta:D.executionQuanta,hw_concurrency:navigator==null?void 0:navigator.hardwareConcurrency});const V={...D};V.model.variant=W.chosenModel,I.A.publish({type:y.lx.VoiceFocusConfig,update:V}),this.callLogger.info(`model_variant_determined: ${D.model.variant}, model_variant_override: ${W.chosenModel}, simd: ${D.model.simd}, execution_quanta: ${D.executionQuanta}, hw_concurrency: ${navigator==null?void 0:navigator.hardwareConcurrency}`)}this.voiceFocusDeviceTransformerPromise=s.S.resolve((0,o.w2)().create(E,O,C));var N=this;this.voiceFocusDeviceTransformerPromise.then(function(){var V=(0,t.coroutine)(function*(R){N.voiceFocusTransformDevicePromise=s.S.resolve(R.createTransformDevice(null))});return function(R){return V.apply(this,arguments)}}()).catch(V=>{this.callLogger.info(`Could not create voice device transformer exp: ${V.name}: ${V.message}`)})}chooseModelVariant(A,O,D){const E={c10:1,c20:2,c50:3,c100:4},C=navigator==null?void 0:navigator.hardwareConcurrency;if(!C)return this.callLogger.info(`Hardware concurrency not available, using self-determined model variant: ${A}`),{modelWasAdjusted:!1,chosenModel:A,adjustmentReason:""};let S;return C<=4?S="c10":C<=6?S="c20":C<=8?S="c50":S="c100",E[S]<E[A]&&!D?{modelWasAdjusted:this.wasModelAdjusted(S,A,O),chosenModel:S,adjustmentReason:"Using CPU restricted model variant which is weaker"}:E[S]>E[A]&&(this.callLogger.info(`using self-determined model variant which is weaker: ${A}`),S=A,!D)?{modelWasAdjusted:!1,chosenModel:A,adjustmentReason:""}:S==="c100"?{modelWasAdjusted:this.wasModelAdjusted("c20",A,O),chosenModel:"c20",adjustmentReason:"Model selection was determined to be c100 capping the model at C20"}:{modelWasAdjusted:this.wasModelAdjusted("c10",A,O),chosenModel:"c10",adjustmentReason:"Model selection was determined to be less than c100 capping the model at C10"}}wasModelAdjusted(A,O,D){return A===O&&!D||A!==O}tearDown(){var A=this;return(0,t.coroutine)(function*(){const O=yield A.getTransformDevice();O&&(A.callLogger.info("Attempting to destroyVoiceFocus"),o.wV.destroyVoiceFocus(O))})()}constructor(A,O){this.chimeLogger=A,this.allowMaxModelsToBeUsed=O,this.callLogger=(0,i.Jt)("VOICE-FOCUS-MANAGER"),this.isSupported=!1,this.cache=h((0,n.A)(),o.zF.sdkVersion)}},"VoiceFocusManager")},8558782493:(j,p,e)=>{"use strict";e.d(p,{k:()=>c});var t=e(56548687),n=e(5795074931),s=e(3395259576),a=e(7439555287);function c(o,i){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;var d;const r=(d=(0,a.KA)())===null||d===void 0?void 0:d.getState();if(!r)return;const m=(0,t.e)({state:r}).setUser((0,n.WR)(r));if(l){const h={...i,room_id:(0,s.G0)(r)};m.track(o,h,{sendImmediately:_})}else m.track(o,i,{sendImmediately:_})}u(c,"trackCallsClog")},164795489:(j,p,e)=>{"use strict";e.d(p,{w:()=>f});var t=e(9706240641),n=e(6680093304),s=e(6422693406),a=e(1031947056),c=e(8276911661),o=e(3677514771),i=e(1269227002),l=e(8848660647),_=e(5046160032),d=e(4914127094),r=e(7299481592);const m="screenhero.rooms.proxyLogs",h=(0,a.Ay)("Send call logs to the server",(g,M,A)=>{let{logs:O,useSendBeacon:D=!1,callId:E}=A;const C=M();let S;if(E?S=E:C.activeCall&&C.activeCall.id&&(S=C.activeCall.id),!S)return(0,r.M)(!1,"There should be an active call in progress in order to send logs."),s.S.reject(new Error("SendLogs: no call"));const b=(0,c.cA)(C),k=(0,o.H7)(C);if(!k)return s.S.reject(new Error("SendLogs: no current team"));const W={data:{room_id:S,user_id:b.id,team_id:k.id,ua:window.navigator.userAgent,event_type:"calls_js_logs",encoding:"none",logs:O}},N={data:JSON.stringify(W.data)};return D?(0,_.A)({apiUrl:"/api/",method:m,token:(0,d.F)(C),versionTs:(0,l.HF)(),versionUid:(0,l.X3)(),args:N})?s.S.resolve():s.S.reject(new Error("SendLogs: beacon failed")):g((0,i.apiCall)({method:m,reason:"calls-logging",args:N}))});h.meta={name:"createThunk",key:"createThunksendLogs",description:"Send call logs to the server"};var v=e(7439555287),y=e(796111729),I=e(9804928153);const T=60*1e3;class f{start(M){(0,r.M)(!this.intervalHandle,"Log reporter already started."),this.callId=M,this.intervalHandle=I.J.setInterval(()=>this.report(!1),T),I.J.addEventListener("beforeunload",this.unloadHandler)}joinLogs(M){return M.map(A=>A.join(" ")).join(`
`)}constructor(M=n.tt){this.buffer=M,this.unloadHandler=()=>{I.J.Cypress||this.report(!0)};var A=this;this.stop=(0,t.coroutine)(function*(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;A.intervalHandle&&I.J.clearInterval(A.intervalHandle),A.intervalHandle=void 0,I.J.removeEventListener("beforeunload",A.unloadHandler),yield A.emptyBuffer(C),A.callId=void 0});var O=this;this.emptyBuffer=(0,t.coroutine)(function*(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;O.buffer.hasItems()&&(yield O.report(E),yield O.emptyBuffer(E))});var D=this;this.report=(0,t.coroutine)(function*(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{dispatch:C}=(0,v.KA)(),S=D.buffer.flush();if(!S.length)return;const b=D.joinLogs(S);yield C(h({logs:b,useSendBeacon:E,callId:D.callId})).catch(()=>{(0,y.Wo)().error("Failed to send Huddle logs")})})}}u(f,"LogReporter")},3300324857:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(6267571562);const n=new t.G},3395259576:(j,p,e)=>{"use strict";e.d(p,{G0:()=>$,jl:()=>oe,pI:()=>ge});var t=e(2384831516),n=e(2140362605),s=e(462591818),a=e(7299481592),c=e(571104883),o=e(2024014560),i=e(3677514771),l=e(6839188756),_=e(6303366080),d=e(387328355);const r=(0,n.Ay)("Update part or all of the call");r.meta={name:"createAction",key:"createActionupdate",description:"Update part or all of the call"};const m=(0,n.Ay)("Update the active call token");m.meta={name:"createAction",key:"createActionsetServerToken",description:"Update the active call token"};const h=(0,n.Ay)("Update the elapsed call time");h.meta={name:"createAction",key:"createActiontickCallTime",description:"Update the elapsed call time"};const v=(0,n.Ay)("update state to notify active call window is closed");v.meta={name:"createAction",key:"createActioncallWindowClosed",description:"update state to notify active call window is closed"};const y=(0,n.Ay)("Show slow network alert");y.meta={name:"createAction",key:"createActionshowSlowNetworkAlert",description:"Show slow network alert"};const I=(0,n.Ay)("Hide slow network alert");I.meta={name:"createAction",key:"createActionhideSlowNetworkAlert",description:"Hide slow network alert"};const T=(0,n.Ay)("Set no media input from microphone or camera");T.meta={name:"createAction",key:"createActionsetNoMediaInput",description:"Set no media input from microphone or camera"};const f=(0,n.Ay)("Clear no media input from microphone or camera");f.meta={name:"createAction",key:"createActionclearNoMediaInput",description:"Clear no media input from microphone or camera"};const g=(0,n.Ay)("Set no audio output");g.meta={name:"createAction",key:"createActionsetNoAudioOutput",description:"Set no audio output"};const M=(0,n.Ay)("Clear no audio output");M.meta={name:"createAction",key:"createActionclearNoAudioOutput",description:"Clear no audio output"};const A=(0,n.Ay)("Set no or low input audio level");A.meta={name:"createAction",key:"createActionsetNoOrLowInputAudioLevel",description:"Set no or low input audio level"};const O=(0,n.Ay)("Clear no or low input audio level");O.meta={name:"createAction",key:"createActionclearNoOrLowInputAudioLevel",description:"Clear no or low input audio level"};const D=(0,n.Ay)("Start session timeout check");D.meta={name:"createAction",key:"createActionstartSessionTimeoutCheck",description:"Start session timeout check"};const E=(0,n.Ay)("Stop session timeout check");E.meta={name:"createAction",key:"createActionstopSessionTimeoutCheck",description:"Stop session timeout check"};const C=(0,n.Ay)("Maybe start peer joining timeout check");C.meta={name:"createAction",key:"createActionmaybeStartPeerJoinTimeoutCheck",description:"Maybe start peer joining timeout check"};const S=(0,n.Ay)("Stop peer joining timeout check");S.meta={name:"createAction",key:"createActionstopPeerJoinTimeoutCheck",description:"Stop peer joining timeout check"};const b=(0,n.Ay)("Store gleaned contextual information from the url");b.meta={name:"createAction",key:"createActionsetInitialContext",description:"Store gleaned contextual information from the url"};const k=(0,n.Ay)("Set call view mode");k.meta={name:"createAction",key:"createActionsetCallViewMode",description:"Set call view mode"};const W=(0,n.Ay)("Ends call");W.meta={name:"createAction",key:"createActionendCall",description:"Ends call"};const N=(0,t.vy)({},{hasJoined:!1,hasSelfConnected:!1,hasRemotePeerConnected:!1,hasVideoBeenEnabled:!1,hasScreenshareBeenEnabled:!1,elapsedDisplayTime:(0,o.A)(0),viewMode:s.ND.SPEAKER},{storeKey:"activeCall",persistenceEnabled:!1}).on(b,(ae,he)=>{let{viewId:ce,inviterUserId:ee}=he,J,X,F;return(0,s.cd)(ce)?J=ce:(0,s.t1)(ce)?X=ce:(0,s.bU)(ce)&&(F=ce),{...ae,id:J,conversationId:X,incomingInviterUserId:ee,incomingInviteResponse:(0,c.y3)()?void 0:s.xr.Accept,virtualRoomId:F}}).on(r,(ae,he)=>{let{terminalState:ce}=he;return ae.terminalState&&(ce=ae.terminalState),{...ae,...he,terminalState:ce}}).on(v,(ae,he)=>{let{isCallWindowClosed:ce}=he;return{...ae,isCallWindowClosed:ce}}).on(k,(ae,he)=>{let{callViewMode:ce}=he;return{...ae,viewMode:ce}}).on(h,ae=>ae.callStartedTimestamp?{...ae,elapsedDisplayTime:(0,o.A)(Date.now()-ae.callStartedTimestamp*1e3)}:ae).on(m,(ae,he)=>{let{token:ce,tokenExpiry:ee}=he;return ae.server?{...ae,server:{...ae.server,token:ce,tokenExpiry:ee}}:((0,a.M)("Cannot set server token without a server"),ae)}).on(d.kT,(ae,he)=>({...ae,hasVideoBeenEnabled:ae.hasVideoBeenEnabled||!!he.isCameraEnabled,hasScreenshareBeenEnabled:ae.hasScreenshareBeenEnabled||!!((0,d.E_)(he)&&he.isScreenshareEnabled),hasSelfConnected:ae.hasSelfConnected||!!((0,d.E_)(he)&&he.isConnected)})).on(d.BD,(ae,he)=>({...ae,hasVideoBeenEnabled:ae.hasVideoBeenEnabled||!he.isContent,hasScreenshareBeenEnabled:ae.hasScreenshareBeenEnabled||he.isContent})).on(d.E3,(ae,he)=>({...ae,hasRemotePeerConnected:ae.hasRemotePeerConnected||!!he.isConnected})).on(d.kl,(ae,he)=>({...ae,hasScreenshareBeenEnabled:ae.hasScreenshareBeenEnabled||!!he.isScreenshareEnabled}));var V=null;const R=u(ae=>!!ae.activeCall.incomingInviterUserId&&!ae.activeCall.incomingInviteResponse,"isIncomingInvitePending"),P=u(ae=>!!ae.activeCall.incomingInviterUserId,"wasInvitedToCall"),z=u(ae=>!!ae.activeCall.conversationId&&isDm(ae.activeCall.conversationId),"wasCreatedFromDm"),$=u(ae=>{var he;return ae==null||(he=ae.activeCall)===null||he===void 0?void 0:he.id},"getActiveCallId"),x=u(ae=>ae.activeCall.server,"getActiveCallServer"),Y=u(ae=>ae.activeCall.conversationId,"getActiveConversationId"),ne=u(ae=>ae.activeCall&&ae.activeCall.dynamicSurvey,"getDynamicSurveyRates"),re=u(ae=>ae.activeCall.hasSelfConnected&&ae.activeCall.hasRemotePeerConnected,"didSelfAndPeerConnect"),_e=u(ae=>ae.activeCall.terminalState,"getActiveCallTerminalState"),G=u(ae=>{if(!(!ae.activeCall||!ae.activeCall.server))return ae.activeCall.server.hostname?MediaBackendType.ORCA:MediaBackendType.FREE_WILLY},"getCallMediaBackendType"),ge=u(ae=>ae.activeCall.isShroudVisible,"isShroudVisibleInCallWindow"),oe=u(ae=>{var he;return(he=ae.activeCall)===null||he===void 0?void 0:he.viewMode},"getCallViewMode"),me=u(ae=>{var he,ce;return ae==null||(he=ae.activeCall)===null||he===void 0||(ce=he.sharedInConversations)===null||ce===void 0?void 0:ce[0]},"getCallSharedInConversation"),ue=u(ae=>{const he=getCurrentTeam(ae),ce=Y(ae)||me(ae);return!!ce&&isOnFreePlan(he)&&getChannelIsSponsored(ae,ce)},"isSponsoredConnectionsChannel")},7366481123:(j,p,e)=>{"use strict";e.d(p,{Iw:()=>E,LL:()=>S,Sb:()=>C,WG:()=>b,Xs:()=>V,eI:()=>D,mV:()=>A,vT:()=>T,xw:()=>N});var t=e(2384831516),n=e(2140362605),s=e(3385422400),a=e(387328355),c=e(3395259576),o=e(462591818),i=e(9683518026),l=e(6217320234),_=e(2101927269),d=e(166097325),r=e(8571983633),m=e(3783303734),h=e(8086952004),v=e(2825968873),y=e(700984029),I=e(9365970888),T;(function(R){R.Connecting="connecting",R.NoConnection="noConnection",R.NoUserAudioDevice="noUserAudioDevice",R.NoUserVideoDevice="noUserVideoDevice",R.NoSystemAudio="noSystemAudio",R.NoSystemVideo="noSystemVideo",R.NoSystemScreenShare="noSystemScreenShare",R.RemotePeerMuted="remotePeerMuted",R.PeerMuteRequest="peerMuteRequest",R.RemotePeerSlowConnection="remotePeerSlowConnection",R.DisplayDisconnected="displayDisconnected",R.UpdateSlack="updateSlack",R.ScreenShareFreeTeam="screenShareFreeTeam",R.NoGroupCallsForFreeTeam="noGroupCallsForFreeTeam",R.NoUserVideoStream="noUserVideoStream",R.NoUserAudioStream="noUserAudioStream",R.SlowNetwork="slowNetwork",R.NoAudioOutputAudioElementError="noAudioOutputAudioElementError",R.NoAudioOutputAudioLevelError="noAudioOutputAudioLevelError",R.NoOrLowInputAudioLevelError="noOrLowInputAudioLevelError",R.SpeakingWhenMuted="SpeakingWhenMuted",R.ScreenShareError="screenShareError",R.SSNotFoundError="ScreenShareNotFoundError",R.SSNotReadableError="ScreenShareNotReadableError",R.NoiseSuppressionCPUThrottled="NoiseSuppressionCPUThrottled",R.NoBrowserAudioPermission="NoBrowserAudioPermission",R.NoBrowserVideoPermission="NoBrowserVideoPermission",R.AudioInputTrackMuted="AudioInputTrackMuted",R.HiddenUserJoinedHuddle="HiddenUserJoinedHuddle",R.AudioOnlyModeRecommended="AudioOnlyRecommended",R.AudioOnlyModeActive="AudioOnlyModeActive",R.ExternalUsersInHuddle="ExternalUsersInHuddle"})(T||(T={}));const f=[T.RemotePeerMuted,T.SlowNetwork];function g(R,P){switch(R){case T.NoConnection:return{priority:0,type:R,icon:"cloud-offline",isWarning:!0};case T.Connecting:return{priority:0,type:R,isWarning:!0};case T.NoSystemAudio:return{priority:200,type:R,dismissible:!0,isWarning:!0};case T.SpeakingWhenMuted:return{priority:200,type:R,dismissible:!0};case T.AudioInputTrackMuted:return{priority:200,type:R,dismissible:!0,isWarning:!0};case T.NoUserAudioDevice:return{priority:201,type:R,dismissible:!0,isWarning:!0};case T.NoUserAudioStream:return{priority:202,type:R,dismissible:!0,isWarning:!0};case T.NoiseSuppressionCPUThrottled:return{priority:203,type:R,dismissible:!0,isWarning:!0};case T.NoBrowserAudioPermission:return{priority:204,type:R,dismissible:!0,isWarning:!0};case T.AudioOnlyModeActive:return{priority:205,type:R,dismissible:!0,isWarning:!0};case T.AudioOnlyModeRecommended:return{priority:206,type:R,dismissible:!0,isWarning:!0};case T.NoSystemScreenShare:return{priority:300,type:R,dismissible:!0,isWarning:!0};case T.ScreenShareError:return{priority:301,type:R,dismissible:!0,isWarning:!0};case T.SSNotFoundError:return{priority:302,type:R,dismissible:!0,isWarning:!0};case T.SSNotReadableError:return{priority:303,type:R,dismissible:!0,isWarning:!0};case T.NoSystemVideo:return{priority:400,type:R,dismissible:!0,isWarning:!0};case T.NoUserVideoDevice:return{priority:401,type:R,dismissible:!0,isWarning:!0};case T.NoUserVideoStream:return{priority:402,type:R,dismissible:!0,isWarning:!0};case T.NoBrowserVideoPermission:return{priority:403,type:R,dismissible:!0,isWarning:!0};case T.ScreenShareFreeTeam:return{priority:500,type:R,dismissible:!0};case T.NoGroupCallsForFreeTeam:return{priority:500,type:R,dismissible:!0};case T.HiddenUserJoinedHuddle:return{priority:600,type:R,dismissible:!0,isWarning:!0};case T.ExternalUsersInHuddle:return{priority:601,type:R,dismissible:!0,isWarning:!0};case T.SlowNetwork:return{priority:700,type:R,dismissible:!0,isWarning:!0,icon:"slow-network"};case T.NoAudioOutputAudioElementError:return{priority:701,type:R,dismissible:!0,isWarning:!0};case T.NoAudioOutputAudioLevelError:return{priority:701,type:R,dismissible:!0,isWarning:!0};case T.NoOrLowInputAudioLevelError:return{priority:701,type:R,dismissible:!0,isWarning:!0};case T.RemotePeerSlowConnection:return{priority:800,type:R,id:P};case T.RemotePeerMuted:return{priority:801,type:R,id:P,icon:"microphone-slash"};case T.PeerMuteRequest:return{priority:802,type:R,id:P,dismissible:!0,isWarning:!0};case T.DisplayDisconnected:return{priority:900,type:R,dismissible:!0};case T.UpdateSlack:default:return{priority:1e3,type:R,dismissible:!0}}}u(g,"makeAlertObject");const M={alerts:[]};function A(R,P,z){const $=g(P,z);return z?(0,i.A)((0,l.A)([$,...R.alerts],["priority"]),(x,Y)=>x.id===Y.id&&x.type===Y.type):(0,i.A)((0,l.A)([$,...R.alerts],["priority"]),(x,Y)=>x.id?x.id===Y.id&&x.type===Y.type:x.type===Y.type)}u(A,"createArrayWithNewAlert");function O(R,P){return(0,_.A)(R.alerts,z=>z.type!==P)}u(O,"filterAlertType");function D(R,P){return(0,_.A)(R.alerts,z=>!P.find($=>z.type===$))}u(D,"filterAlertTypes");const E=(0,n.Ay)("Add an alert from the alerts array");E.meta={name:"createAction",key:"createActionaddAlert",description:"Add an alert from the alerts array"};const C=(0,n.Ay)("Add an alert from the alerts array, specifying sender peer Id");C.meta={name:"createAction",key:"createActionaddPeerAlert",description:"Add an alert from the alerts array, specifying sender peer Id"};const S=(0,n.Ay)("Remove an alert from the alerts array");S.meta={name:"createAction",key:"createActionremoveAlert",description:"Remove an alert from the alerts array"};const b=u(()=>(0,t.vy)({},M,{storeKey:"alert",persistenceEnabled:!1}).on(E,(R,P)=>{const z=A(R,P);return(0,d.A)(R.alerts,z)?R:((0,v.tZ)("ALERTS").info(`Added alert type: '${P.toString()}'`),{alerts:z})}).on(C,(R,P)=>{let{alert:z,peerId:$}=P;const x=A(R,z,$);return(0,d.A)(R.alerts,x)?R:((0,v.tZ)("ALERTS").info(`Added peer alert type: '${z.toString()}'`),{alerts:x})}).on(S,(R,P)=>{const z=O(R,P);return(0,d.A)(R.alerts,z)?R:((0,v.tZ)("ALERTS").info(`Removed alert type: '${P.toString()}'`),{alerts:z})}),"createDefaultAlertReducer"),k=b().on(y.Fb,(R,P)=>{let z=R.alerts;return(0,I.yp)(P)?z=(0,_.A)(R.alerts,$=>$.type!==T.NoUserAudioDevice):z=A(R,T.NoUserAudioDevice),{alerts:z}}).on(a.Uu,(R,P)=>{let z=R.alerts;return P.isMicrophoneEnabled===!1&&(z=A(R,T.RemotePeerMuted,P.id)),P.slowNetwork&&(z=A(R,T.RemotePeerSlowConnection,P.id)),{alerts:z}}).on(a.xx,(R,P)=>({alerts:(0,_.A)(R.alerts,$=>$.id!==P)})).on(a.kT,(R,P)=>{let z=R.alerts;return(0,a.E_)(P)?(0,r.A)(P.isConnected)||(P.isConnected?z=O(R,T.Connecting):z=A(R,T.Connecting,P.id)):((0,r.A)(P.isMicrophoneEnabled)||(P.isMicrophoneEnabled?z=O(R,T.RemotePeerMuted):z=A(R,T.RemotePeerMuted,P.id)),(0,r.A)(P.slowNetwork)||(P.slowNetwork===!1?z=O(R,T.RemotePeerSlowConnection):P.slowNetwork&&(z=A(R,T.RemotePeerSlowConnection,P.id)))),{alerts:z}});var W=null;const N=(0,t.Mz)(R=>R.alert.alerts);N.meta={name:"createSelector",key:"createSelectorgetAllAlerts",description:R=>R.alert.alerts};const V=(0,s.Mz)(N,a.EA,c.jl,(R,P,z)=>{let $=R;z===o.ND.GALLERY&&($=(0,_.A)(R,ne=>!f.includes(ne.type)));let x=$[0];return(0,m.A)(P)>1&&(x=(0,h.A)(R,ne=>!ne.id)),x})},6839101721:(j,p,e)=>{"use strict";e.d(p,{D8:()=>r,WY:()=>d,cn:()=>m,d2:()=>l,gJ:()=>_});var t=e(2140362605);const n=(0,t.Ay)("connect to free willy media server");n.meta={name:"createAction",key:"createActionconnectToFreeWillyMediaServer",description:"connect to free willy media server"};const s=(0,t.Ay)("Set flag to indicate if experimental Chime SDK should be used");s.meta={name:"createAction",key:"createActionsetUseChimeSdkExp",description:"Set flag to indicate if experimental Chime SDK should be used"};const a=(0,t.Ay)("Set flag to indicate if simulcast should be used in a Chime call");a.meta={name:"createAction",key:"createActionsetUseSimulcast",description:"Set flag to indicate if simulcast should be used in a Chime call"};const c=(0,t.Ay)("Set flag to indicate if priority based downlink policy should be used in a Chime call");c.meta={name:"createAction",key:"createActionsetUsePriorityDownlinkPolicy",description:"Set flag to indicate if priority based downlink policy should be used in a Chime call"};const o=(0,t.Ay)("Set flag to indicate if getMediaAccess checks for Windows should be used in a Chime call");o.meta={name:"createAction",key:"createActionsetUseGetMediaAccessCheckForWindows",description:"Set flag to indicate if getMediaAccess checks for Windows should be used in a Chime call"};const i=(0,t.Ay)("Set flag to determine if a call is a readiness test call");i.meta={name:"createAction",key:"createActionsetReadinessCheck",description:"Set flag to determine if a call is a readiness test call"};const l=(0,t.Ay)("Binds video tile to a video element");l.meta={name:"createAction",key:"createActionbindVideo",description:"Binds video tile to a video element"};const _=(0,t.Ay)("Unbinds video tile from a video element");_.meta={name:"createAction",key:"createActionunbindVideo",description:"Unbinds video tile from a video element"};const d=(0,t.Ay)("Pauses video tile");d.meta={name:"createAction",key:"createActionpauseVideo",description:"Pauses video tile"};const r=(0,t.Ay)("Unpauses video tile");r.meta={name:"createAction",key:"createActionunpauseVideo",description:"Unpauses video tile"};const m=(0,t.Ay)("Returns if there in a stream associated with the tileId");m.meta={name:"createAction",key:"createActionvideoTileHasStream",description:"Returns if there in a stream associated with the tileId"}},3094144240:(j,p,e)=>{"use strict";e.d(p,{P:()=>t});const t={height:576,width:1024,useContentSize:!0,minContentWidth:704,minContentHeight:396,center:!0,frame:!0,titleBarStyle:"default"};function n(s){return!!has(s,"activeCall")}u(n,"isCallWindowContextState")},5156662944:(j,p,e)=>{"use strict";e.d(p,{Rv:()=>W,Xk:()=>k,hL:()=>b,j7:()=>$,lp:()=>N,tO:()=>G,tw:()=>V,uI:()=>re,vf:()=>ne});var t=e(5597672932),n=e(6007206761),s=e(4630136761),a=e(9289081806),c=e(8798294025),o=e(1407713935),i=e(2350349607),l=e(6839188756),_=e(4827886670),d=e(8276911661),r=e(6728717861),m=e(8921478798),h=e(8170643398),v=e(3534324375),y=e(3677514771),I=e(735940183),T=e(9101533895),f=e(5670315214),g=e(8767621462),M=e(462591818),A=e(340763958),O=e(6470070112);const D="Slack",E=new I.Ay("calls");function C(oe){return!!(0,t.x)(oe,"allow_calls")}u(C,"isCallsAllowedByAdmin");function S(oe,me){return(0,O.pt)(oe)&&(0,O.Bn)(oe,me)}u(S,"isHuddlesAllowed");function b(oe,me,ue){const ae=(0,T.Pu)(oe,me.id);return!(!C(oe)&&!S(oe,ae)||(0,h.fy)(me)&&!ue||!(0,h._W)(me)||!(0,g.S)(oe,me.id)||(0,a.Mi)(ae))}u(b,"canCallMember");function k(oe,me){let ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const ae=(0,d.nv)(oe,(0,c.e)(me)),he=ue&&Y(oe);return!C(oe)&&!S(oe,me)&&!he||(0,s.Zz)(me)||(0,o.LI)(me)&&(!ae||!b(oe,ae))||!(0,a.Ez)(me)?!1:(0,_.c)(oe,me)}u(k,"isCallButtonVisibleForChannel");function W(oe,me){return(0,r.Pb)(oe)?((0,a.bU)(me)||(0,n.F)(me))&&!ge(me):!0}u(W,"isCallButtonDisabledForChannel");function N(oe,me){const ue=(0,T.OL)(oe,me);return ue&&!W(oe,ue)&&k(oe,ue)}u(N,"canStartCallInChannel");function V(oe,me,ue){const ae=(0,i.V)(me),he=(0,f.q8)(oe,ae),ce=(0,d.nv)(oe,ue,{preferNonExistentToNull:!1,fetchIfMissing:!0}),ee=(0,h.v8)(ce),J=(0,f.OJ)({callsApp:he,memberPhoneNumber:ee,hideVideoApps:!1}),X=J.length,F=S(oe,me);let L=X;return F&&(L+=1),L>1?E.t("{numCallApps} calling options",{numCallApps:L}):L===1?X===0?"":E.t("using {appName}",{appName:J[0].name}):""}u(V,"getTipSubtitleForStartCall");function R(oe,me,ue){const ae=(0,m.I)(oe,(0,c.e)(me));return ue?E.rt("Huddle with {name}",{name:ae,fallbackHash:"8e987d72e71ed558e674143b7f1cde8c0e13d4aa",fallbackHashNs:"huddles"}):E.rt("Call {name}",{name:ae})}u(R,"getTipForIm");function P(oe,me,ue){const ae=(0,a.d3)(oe,me).map(ce=>(0,v.sE)(oe,ce)),he=(0,I.jd)(ae,{noEscape:!0}).join("");return ue?E.rt("Huddle with {listOfNamesWithConjunction}",{listOfNamesWithConjunction:he,fallbackHash:"8e987d72e71ed558e674143b7f1cde8c0e13d4aa",fallbackHashNs:"huddles"}):E.rt("Call {listOfNamesWithConjunction}",{listOfNamesWithConjunction:he})}u(P,"getTipForMpim");function z(oe,me,ue){return(0,o.LI)(me)?R(oe,me,ue):(0,o.yz)(me)?P(oe,me,ue):ue?E.t("Huddle in {channelName}",{channelName:(0,a.SB)(oe,me),fallbackHash:"2e4c8c4a478aa889a4b6fe33316b3d0a6d93301d",fallbackHashNs:"huddles"}):E.t("Start a call")}u(z,"getTipForChannel");function $(oe,me){const ue=(0,y.H7)(oe),ae=(0,l.qR)(ue),he=Y(oe),ce=ae||he,ee=S(oe,me)&&!ne(oe);return(0,r.Pb)(oe)?ce&&(0,n.F)(me)?E.t("Unarchive this channel to start a huddle"):ce&&(0,a.bU)(me)?E.t("Join this channel to start a huddle"):(he||ge(me),z(oe,me,ee)):E.t("Go online to start a huddle")}u($,"getTipForStartCall");function x(oe,me){const ue=getCurrentTeam(oe),ae=isPaidTeamRule(ue),he=isMpimRule(me),ce=Y(oe),ee=ae||ce;return!isClientOnline(oe)||ee&&isArchived(me)||ee&&isPreview(me)||ce?!1:!!(!ae&&he||!ae&&isNonImOrMpimChannel(me))}u(x,"isFreeTeamAndInChannelOrMpim");function Y(oe){const me=(0,f.wZ)(oe);for(let ue=0;ue<me.length;ue++)if(me[ue].id!==M.rq)return!0;return!1}u(Y,"isThirdPartyCallEnabled");function ne(oe){return(0,f.wZ)(oe).length>0}u(ne,"isAnyCallAppEnabled");function re(oe){const me=E.t("Start a call?",{fallbackHash:"04d5cae8ffd5cbdfd97d6ea2c1afe3e969b3eed7"}),ue=E.t("You\u2019ll be starting a call that all {count} members of this channel can join.",{count:oe,fallbackHash:"225ecb6662087bf4b09285688dc46d8ecb5ed2aa"}),ae=E.t("Start Call",{fallbackHash:"291a0a58dfa6c640a90c1d868d2af190775ea219"});return{title:me,description:ue,confirm:ae,cancel:E.t("Cancel")}}u(re,"getCallConfirmationStrings");function _e(){return!1}u(_e,"isNativeSlackCallEnabled");function G(){return!0}u(G,"isSlackCallSlashCommandDisabled");function ge(oe){return(0,A.ju)(oe)&&!(0,o.LI)(oe)}u(ge,"shouldEnableForSponsoredConnections")},7561130599:(j,p,e)=>{"use strict";e.d(p,{A:()=>v});var t=e(9706240641),n=e(2825968873),s=e(3245843483),a=e(7299481592),c=e(571104883),o=e(8558782493),i=e(6244014364),l=e(336376314);const _=window.RTCPeerConnection,d=window.MediaStream,r=window.RTCIceCandidate,m=window.navigator,h={height:116,width:168};let v=u(class{getScreenThumbnails(T){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var g=this;return(0,t.coroutine)(function*(){const M=yield(0,s.zxd)();f||y(g.log,M);const A=["screen"];A.push("window"),h.width=(T==null?void 0:T.width)||200,h.height=(T==null?void 0:T.height)||150;let O;try{O=yield(0,s.Yx3)(h,A)}catch(E){g.log.error(`Could not get screen thumbnails: ${E.message}`)}return O?O.map((E,C)=>{var S;const b=M.find(W=>parseInt(E.display_id,10)===W.id);!b&&!(0,c.tR)()&&!(0,c.cX)()&&!(!((S=E.id)===null||S===void 0)&&S.startsWith("window:"))&&g.log.error(`Could not find matching display for screen ${C} with id ${E.display_id}`);const k=b||((0,c.tR)()||(0,c.cX)()?M[C]:void 0);return{mediaSourceId:E.id,thumbnail:E.thumbnail,displayId:k&&k.id,bounds:k&&k.bounds,name:E.name}}):[]})()}getCurrentlyActiveScreenTrack(){return this.screenTrack}startCapturingScreen(T){var f=this;return(0,t.coroutine)(function*(){if((0,a.M)(!f.screenTrack,"Screen track should not already be active"),!T){if(!m.mediaDevices.getDisplayMedia)throw f.log.error("Error: getDisplayMedia unavailable while trying to screen share in browser"),new Error("browser screenshare unavailable");try{const g={audio:!1,video:{frameRate:{max:15}}},M=yield m.mediaDevices.getDisplayMedia(g);return f.screenTrack=M.getVideoTracks()[0],f.log.info(`Start screen sharing with track id: ${f.screenTrack.id} in browser`),f.screenTrack}catch(g){if(g.name!=="NotAllowedError")throw f.log.error(`Error: ${g.name} while trying to screen share in browser`),(0,o.k)(i.EventId.CALLS_GET_USER_MEDIA_ERROR_SCREEN,{error:g.name}),g;return null}}try{const g={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:T,maxFrameRate:15}}};if(!(0,c.uF)()){const A=yield f.getScreenDetailsByMediaSourceId(T);A&&A.bounds&&(g.video.mandatory.maxWidth=A.bounds.width,g.video.mandatory.maxHeight=A.bounds.height)}const M=yield m.mediaDevices.getUserMedia(g);return f.screenTrack=M.getTracks()[0],f.log.info("Start screen sharing with track id:",f.screenTrack.id,"and mediaSourceId:",T),f.screenTrack}catch(g){throw f.log.error(`Error: ${g.name} for screen ${T}`),(0,o.k)(i.EventId.CALLS_GET_USER_MEDIA_ERROR_SCREEN,{error:g.name}),g}})()}stopCapturingScreen(){if(!this.screenTrack){(0,a.M)("No screenTrack to stop.");return}this.screenTrack.stop();const T=this.screenTrack.id;return delete this.screenTrack,this.log.info("Stop screen sharing track id:",T),T}clearScreenTrack(){delete this.screenTrack}getScreenDetailsByMediaSourceId(T){var f=this;return(0,t.coroutine)(function*(){let g;const M=yield f.getScreenThumbnails();return M&&(g=M.find(A=>A.mediaSourceId===T,M)),g})()}constructor(){this.log=(0,n.tZ)("SCREENS")}},"ScreenManager");function y(I,T){if(!T.length){I.error("No screens available");return}const f=new l.M(["id","width","height","x","y","scaleFactor","rotation"]);T.forEach(g=>{f.add([g.id,g.bounds.width,g.bounds.height,g.bounds.x,g.bounds.y,g.scaleFactor,g.rotation].map(String))}),I.info(`Available screens:
${f.report()}`)}u(y,"logDisplays")},4708000837:(j,p,e)=>{"use strict";e.d(p,{Y:()=>t});function t(n){const s=(n||"").split("-");return s&&(s.length===3||s.length===4)?s[1]:null}u(t,"getCallIdFromExternalId")},8405076696:(j,p,e)=>{"use strict";e.d(p,{n:()=>t});function t(n){let{width:s,height:a,top:c,left:o}=n;return{position:"absolute",width:`${s}px`,height:`${a}px`,top:`${c}px`,left:`${o}px`}}u(t,"cssForRect")},6117529990:(j,p,e)=>{"use strict";e.d(p,{BD:()=>s,OV:()=>n,XY:()=>c,wn:()=>a,zq:()=>o});var t=e(4761125736);function n(i){return(0,t._Z)(i,"calls_chime_sdk_exp")==="enabled"}u(n,"isCallsChimeSdkExpEnabled");const s=u(i=>(0,t._Z)(i,"calls_org_app_settings")==="treatment","isCallsOrgAppsSettingsExperimentEnabled"),a=u(i=>(0,t._Z)(i,"calls_tracing_disabled")==="treatment","isCallsTracingDisabled"),c=u(i=>(0,t._Z)(i,"calls_location_lock")==="treatment","isCallsLocationLockEnabled"),o=u(i=>(0,t._Z)(i,"calls_disable_screenshare_border")==="treatment","isCallsScreenShareBorderDisabled")},2004048777:(j,p,e)=>{"use strict";e.d(p,{$:()=>c,Y:()=>a});var t=e(2615100822),n=e(2825968873),s=e(796111729);function a(o){let{direction:i,type:l,payload:_}=o;const d=(0,t.A)()?"slack":"call",r="INTER-WINDOW-MESSAGE";((0,t.A)()?(0,n.tZ)(r):(0,s.Wo)({label:r})).info(`${i==="send"?"Sending":"Received"} ${l} ${i==="send"?"to":"from"} the ${d} window${_?`, with payload: ${JSON.stringify(_)}`:""}`)}u(a,"logInterWindowMessage");function c(o){function i(l,_,d){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;o(_,d,r),l.sendData({type:_,payload:d})}return u(i,"sendMessage"),i}u(c,"createInterWindowMessageSender")},1371073900:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(571104883);function n(){return!(0,t.j9)()&&(0,t.y3)()}u(n,"isDrawSupported")},6267571562:(j,p,e)=>{"use strict";e.d(p,{G:()=>n});var t=e(8403493408);class n{get subscriberCount(){return this.subscribers.length}subscribe(a){this.subscribers.push(a)}unsubscribe(a){(0,t.A)(this.subscribers,a)}publish(a){this.subscribers.forEach(c=>{c(a)})}constructor(){this.subscribers=[]}}u(n,"PubSub")},6155974509:(j,p,e)=>{"use strict";e.d(p,{X:()=>v,a:()=>y});var t=e(571104883),n=e(4387298515),s=e(2825968873),a=e(2615100822),c=e(796111729),o=e(6117529990);const i=2e3,l=6,_=0/265,d=255/265,r=53/265,m=1,h="SCREEN-SHARE",v=u((I,T)=>{!(0,t.j9)()&&(0,t.dY)("4.13.1")&&!(0,o.zq)(T)&&((0,n.$m)(I,i),(0,n.VR)(I),(0,n.D0)(l),(0,n.Mh)(_,d,r,m),(0,n.Ac)(),((0,a.A)()?(0,s.tZ)(h):(0,c.Wo)({label:h})).info("Screenshare border added"))},"showBorderForWindowOrScreenId"),y=u(()=>{!(0,t.j9)()&&(0,t.dY)("4.13.1")&&((0,n.th)(),((0,a.A)()?(0,s.tZ)(h):(0,c.Wo)({label:h})).info("Screenshare border removed"))},"hideScreenShareWindowBorder")},7304871158:(j,p,e)=>{"use strict";e.d(p,{R:()=>a});var t=e(7299481592),n=e(2615100822),s=e(2004048777);const a=(0,s.$)(function(c,o){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;(0,t.M)(!(0,n.A)(),"Expected to send message from the slack window"),(0,s.Y)({direction:"send",type:c,payload:i?o:"REDACTED"})})},336376314:(j,p,e)=>{"use strict";e.d(p,{M:()=>n});var t=e(9118672869);class n{add(a){this.rows.push(a),this.adjustPadding(a)}report(){const a=this.padding.map(o=>"-".repeat(o));return(this.columnNames?[a,this.columnNames,a]:[]).concat(this.rows).reduce((o,i)=>o+i.reduce((l,_,d)=>l+(0,t.A)(_,this.padding[d])+(d!==i.length-1?` ${this.separator} `:`
`),""),"")}adjustPadding(a){this.padding=a.map((c,o)=>Math.max(c.length,this.padding[o]||0))}constructor(a,c="|"){this.columnNames=a,this.separator=c,this.padding=[],this.rows=[],this.columnNames&&this.adjustPadding(this.columnNames)}}u(n,"StringTable")},5954792826:(j,p,e)=>{"use strict";e.d(p,{l:()=>t});function t(n){const s=(n||"").split("-");return s&&(s.length===3||s.length===4)?s[2]:null}u(t,"getUserIdFromExternalId")},92886754:(j,p,e)=>{"use strict";e.d(p,{Np:()=>I,O4:()=>h,Vr:()=>y,WT:()=>_,Wd:()=>m,we:()=>d,yh:()=>r});var t=e(5215813485),n=e(7823691483),s=e(571104883),a=e(3245843483),c=e(4096483543),o=e(735940183),i=e(228617214);const l=new o.Ay("calls_wrong_build");function _(){if(!(0,s.y3)())return!1;const f=(0,a.suT)();return v(f,{major:4,minor:13,patch:0})}u(_,"isWrongGantryHuddlesBuild");function d(){if(!(0,s.y3)())return!1;const f=(0,a.suT)();return f.major<4?f.minor<4?v(f,{major:3,minor:3,patch:7}):v(f,{major:3,minor:4,patch:0,prerelease:"alpha3"}):f.prerelease&&(f.prerelease.startsWith("sonic")||f.prerelease.startsWith("alpha2"))?!1:v(f,{major:4,minor:0,patch:0,prerelease:"alpha1190201"})}u(d,"isWrongGantryCallsBuild");const r=u(()=>{if((0,s.y3)())return!1;if((0,s.gm)()){if(!((0,s.cX)()||(0,s.uF)()))return!0;const g=87;return Number((0,s.JF)().split(".")[0])<g}return!((0,s.F2)()||(0,i.W)())},"isWrongGantryHuddlesBrowser");function m(){return(0,s.y3)()?!1:!(0,s.F2)()}u(m,"isWrongGantryCallsBrowser");function h(){return(0,c.A)()||((0,s.y3)()?!d():!m())}u(h,"useGantryCalls");function v(f,g){const M=(0,n.Z)(f,g),A=M<0,O=M>0;return A?!0:O||!f.prerelease?!1:g.prerelease?f.prerelease<g.prerelease:!0}u(v,"isPrereleaseVersionOlder");function y(f){return T(f,l.t("Unfortunately, this version of Slack is out of date. Update your Slack app for access to calls &mdash; as well as bug fixes and an all-around smoother experience.",{fallbackHash:"15f4227e116c3dce202df6486303491344a6350d",fallbackHashNs:"utility"}))}u(y,"sendEphemeralMessageWithCorrectBuildInfo");function I(f){return T(f,l.t("Unfortunately, Slack calls aren't available in this browser. We recommend downloading the Slack desktop app, or you can switch to Chrome.",{fallbackHash:"c3316caea826cdc00385e8aca03517944038abcc",fallbackHashNs:"utility"}))}u(I,"sendEphemeralMessageWithCorrectBrowserInfo");function T(f,g){return(0,t.A)({temporary:!0,message:{text:g,channel:f}})}u(T,"sendEphemeralMessage")},9910898937:(j,p,e)=>{"use strict";e.d(p,{uM:()=>he,Gf:()=>ae,lQ:()=>ce});var t=e(6188550760),n=e(9706240641),s=e(4887323608),a=e(8737667238),c=e(6533394955),o=e(2567914105),i=e(4529239752),l=e(8628205589),_=e(3193155968),d=e(9108490430),r=e(4096483543),m=e(7213691587),h=e(109860581),v=e(3034856104),y=e(8172368937),I=e(4510819135),T=e(1031947056),f=e(5223893135);const g=(0,T.Ay)("Determine if fullscreen mode is enabled",(ee,J)=>{const X=J();return(0,f.V)(X)});g.meta={name:"createThunk",key:"createThunkgetIsFullscreenEnabled",description:"Determine if fullscreen mode is enabled"};var M=e(6527965646),A=e(8646192222);const O=(0,T.Ay)("Find view container for a specific window history entry",(ee,J,X)=>{let{id:F}=X;var L;const K=J();return(0,A.iB)(K)?(L=(0,M.G)(K).find(Q=>Q.id===F))===null||L===void 0?void 0:L.container:void 0});O.meta={name:"createThunk",key:"createThunkfindContainerForHistoryEntry",description:"Find view container for a specific window history entry"};var D=e(3875705815),E=e(5661379004),C=e(7606925238),S=e(5925742547),b=e(9012396182);const k=u((ee,J)=>!(!(0,A.mL)(ee)||(0,D.V)(ee)||J[_.jf]!==_.k6.BBM),"shouldPreventBBMHistory"),W=u((ee,J,X)=>{if(!(0,A.iB)(ee)||(0,f.V)(ee))return!1;const F=(0,c.getStateForClientStore)();if((b.getFocusedWorkspace===null||b.getFocusedWorkspace===void 0?void 0:(0,b.getFocusedWorkspace)(F))!==X)return!1;const L=(0,i.jo)(F),K=J[_.jf],B=L[_.jf];if(K!==B)return!1;const Q=J[K],q=L[B];return!!(0,S.A)(Q,q)},"shouldPreventDuplicateHistory"),N=(0,T.Ay)("Maybe prevent default handling of history on pop state",(ee,J,X)=>{let{current:F,index:L,teamId:K}=X;const B=J();if(!k(B,F)&&!W(B,F,K))return!1;const Q=(0,c.getStateForClientStore)(),q=(0,i.XG)(Q),le=L>q;if(le){if((0,i.yS)(Q))return!0}else if((0,i.m6)(Q))return!0;return ee((le?E.r:C.h)()),!0});N.meta={name:"createThunk",key:"createThunkmaybePreventHistoryOnPopState",description:"Maybe prevent default handling of history on pop state"};var V=e(2554594353);function R(ee){return P.apply(this,arguments)}u(R,"onPopState");function P(){return P=(0,n.coroutine)(function*(ee){const J=ee.state;if(!(J!=null&&J.teamId)||!(J!=null&&J.id))return;const X=(0,c.getClientStoreInstance)();if(!X)return;const F=X.getState,L=X.dispatch;if(!F||!L)return;const K=(0,i.jR)(F()),B=K.findIndex(Ce=>Ce.id===J.id);if(B<0)return;const Q=(0,i.XG)(F()),q=K[Q],le=J.state[_.jf];if((0,c.dispatchForTeamId)(J.teamId,N({current:J.state,index:B,teamId:J.teamId})))return;var Ie;const De=(Ie=J.state[le])!==null&&Ie!==void 0?Ie:(0,_.DP)(le),pe=(0,v.H)(q)?q[_.jf]:void 0,fe=(0,v.H)(q)&&pe?q[pe]:void 0,{viewSet:Z}=yield(0,c.dispatchForTeamId)(J.teamId,(0,I.F)({context:y.b.HistoryStack,prevViewSet:fe,prevTab:pe,nextViewSet:De,nextTab:le,windowId:_.N2}));J.state[le]=Z??De,L((0,l.cM)({windowId:_.N2,index:B,previousIndex:Q})),(0,c.dispatchForTeamId)(J.teamId,(0,d.cQ)(J.state)),(b.getFocusedWorkspace===null||b.getFocusedWorkspace===void 0?void 0:(0,b.getFocusedWorkspace)(F()))!==J.teamId&&L(V.b===null||V.b===void 0?void 0:(0,V.b)({teamId:J.teamId,fromNavigation:!0}));const Ae=(0,c.dispatchForTeamId)(J.teamId,g())?(0,c.dispatchForTeamId)(J.teamId,O({id:J.id})):void 0;(0,c.dispatchForTeamId)(J.teamId,(0,m.C)({prevViewSet:fe,prevTab:pe,nextViewSet:De,nextTab:le,windowId:_.N2,navigateParams:{destinationContainer:Ae},triggerType:h.w.HISTORY_NAVIGATION}))}),P.apply(this,arguments)}u(P,"_onPopState");function z(ee){if(!isSonic())return;const J=ee.state;if(!(J!=null&&J.id))return;const X=getClientStoreInstance();if(!X)return;const F=X.getState,L=X.dispatch;if(!F||!L)return;const B=getHistoryForMainWindow(F()).findIndex(q=>q.id===J.id);if(B<0)return;const Q=getHistoryIndexForMainWindow(F());L(updateIndexForMainWindow({windowId:MainWindowId,index:B,previousIndex:Q}))}u(z,"onIA3PopState");var $=e(7893624209),x=e(8289899277),Y=e(472899830),ne=e(796111729);function re(ee){return _e.apply(this,arguments)}u(re,"navigateAfterPopState");function _e(){return _e=(0,n.coroutine)(function*(ee){var J;if(!(0,s.A)())return;if(!(ee==null||(J=ee.state)===null||J===void 0)&&J.isIA4){Y.p.prevNavigatedTeamOrEnterpriseId=ee.state.teamId,R(ee);return}const X=(0,$.oI)(),F=(0,x.f)(),L=(0,t.A_)(),K=(0,c.getStoreInstanceByTeamId)(Y.p.prevNavigatedTeamOrEnterpriseId),B=K?(0,o.oY)(K.getState()):!1,Q=(0,a.A)().slice(0,8);if((0,ne.Wo)().info("ROUTES",`[${Q}]`,`[${F.routeName}]`,"Attempting to popstate navigate to new route",F.params),(yield(0,t.$C)({prevTeamOrEnterpriseId:Y.p.prevNavigatedTeamOrEnterpriseId,nextTeamOrEnterpriseId:X,prevRouteInfo:Y.p.popstatePrevRouteInfo,routeName:F.routeName,params:F.params,reason:t.GB,uuid:Q}))===!1||B===!0){(0,ne.Wo)().info("ROUTES",`[${Q}]`,`[${F.routeName}]`,"willNavigateListener caused early exit"),window.history.forward();return}if((0,t.OX)({prevTeamOrEnterpriseId:Y.p.prevNavigatedTeamOrEnterpriseId,nextTeamOrEnterpriseId:X,prevRouteInfo:Y.p.popstatePrevRouteInfo,routeName:F.routeName,params:F.params,reason:t.GB,uuid:Q}),(0,ne.Wo)().info("ROUTES",`[${Q}]`,`[${F.routeName}]`,"Navigated to new route"),Y.p.prevNavigatedTeamOrEnterpriseId=X,L&&typeof L.onEnter=="function"){const le=(0,c.getStoreInstanceByTeamId)(X);L.onEnter.call(null,le.getState,null,window.location.pathname)}}),_e.apply(this,arguments)}u(_e,"_navigateAfterPopState");const G=u(()=>{window.addEventListener("popstate",re)},"addPopStateListener");var ge=e(9733150292),oe=e(7515251865),me=e(210422728),ue=e(3080748521);G();function ae(){let{store:ee,shouldSetFocus:J}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const X=(0,x.f)(window.location.pathname,{throwOnNoRoute:!1});if(X&&J&&X.routeName!==oe.o)return X;if(!ee)return null;const F=(0,ue.D8)(ee.getState()),L=(0,ue.MC)(ee.getState()),K={routeName:F,params:L};return(0,t.EB)(K)?K:null}u(ae,"determineCurrentView");function he(){return(0,t.Dd)(ee=>{let{nextTeamId:J,routeName:X,params:F}=ee;(0,c.getStoreInstanceByTeamId)(J)&&(0,c.dispatchForTeamId)(J,(0,me.w)({routeName:X,params:F}))})}u(he,"configureUpdateCurrentRoute");function ce(ee){const J=(0,ge._z)(ee,"lastRoute");return(0,t.EB)(J)?J:null}u(ce,"getLastRouteFromLocalConfig")},210422728:(j,p,e)=>{"use strict";e.d(p,{T:()=>s,w:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Navigate to a route");n.meta={name:"createAction",key:"createActionupdateCurrentRoute",description:"Navigate to a route"};const s=(0,t.Ay)("Set a value that represents whether the user navigated during a warm boot");s.meta={name:"createAction",key:"createActionsetUserNavigatedDuringWarmBoot",description:"Set a value that represents whether the user navigated during a warm boot"}},311893736:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(6533394955),n=e(3677514771),s=e(9012396182);function a(c,o){const i=(0,t.getClientStoreInstance)();if(i){const _=i.getState(),d=(0,s.getWorkspaceMetaBySubdomain)(_,o);if(d)return d.id}const l=(0,n.lL)(c,o);if(l)return l.id}u(a,"findWorkspaceIdForSubdomain")},8204430196:(j,p,e)=>{"use strict";e.d(p,{A:()=>l});var t=e(3134334389),n=e(9113979368),s=e(6023831373),a=e(1030162945),c=e(2374999399),o=e(6818330210);function i(_){let{memberId:d,className:r,emoji:m,emojiSize:h,showTooltips:v,stopAnimations:y}=_;const I=(0,s.F3)(g=>(0,c.A)(g,d));if(!d||!m)return null;const{name:T=m,url:f=void 0}=I?(0,o.H)(m,(0,n.A)(I)?void 0:I):{};return t.createElement(a.Ay,{className:r,emojiSize:h||a.lw.SMALL,iconInTextMode:!0,isEmojiInlineWithText:!0,showTooltip:!!v,stopAnimations:!!y,text:T,url:f})}u(i,"CustomStatusEmoji"),i.displayName="CustomStatusEmoji";const l=t.memo(i)},6710730141:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(3134334389),n=e(735940183),s=e(2406011273),a=e(9391594207),c=e(1345620242),o=e(2047021170);const i=new n.Ay("current_status");function l(r){let{className:m,expiration:h,time24:v}=r;if(!h)return null;const y=h*1e3,I=i.t("Until {expirationDate}",{expirationDate:(0,s.A)(y,"{status_expiration}",{do24hrTime:v,shouldCapitalize:!1})});return t.createElement("span",{className:m,"data-qa-status-expiration":h},I)}u(l,"CustomStatusExpiration"),l.displayName="CustomStatusExpiration";function _(r,m){let{memberId:h}=m;return{expiration:(0,c.A)(r,h||"")||0,time24:!!(0,o.ty)(r,"time24")}}u(_,"mapStateToProps");const d=(0,a.N)(_)(l)},5530660703:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(3134334389),n=e(6023831373),s=e(1030162945),a=e(2374999399),c=e(7969928607);function o(l){let{memberId:_,className:d,emojiSize:r,showTooltips:m,stopAnimations:h,text:v}=l;const y=(0,n.F3)(I=>_?(0,a.A)(I,_):void 0);return v?t.createElement("span",{className:d,"data-qa":"custom_status_text"},t.createElement(c.A,{text:v,inputIsEscaped:!0,emojiSize:r||s.lw.MEDIUM,showTooltips:!!m,stopAnimations:!!h,emojiDisplayInfo:y})):null}u(o,"CustomStatusText"),o.displayName="CustomStatusText";const i=t.memo(o)},7278430876:(j,p,e)=>{"use strict";e.d(p,{A:()=>g});var t=e(3134334389),n=e(6023831373),s=e(5255740490),a=e(193084903),c=e(2312625946),o=e(1030162945),i=e(8204430196),l=e(2072540560),_=e(8276911661),d=e(8170643398),r=e(5751973043),m=e(5530660703);function h(){return h=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var O=arguments[A];for(var D in O)Object.prototype.hasOwnProperty.call(O,D)&&(M[D]=O[D])}return M},h.apply(this,arguments)}u(h,"_extends");const v={noLinking:!1},y=u(M=>{let{stopAnimations:A=!1,noText:O=!1,className:D,memberId:E="",noLinking:C,showEmojiTooltip:S=!1,insertTextSpacing:b=!1,displayInMemberProfile:k=!1,emoji:W}=M;const N=(0,n.d4)(P=>(0,l.A)(P,E)),V=(0,n.d4)(P=>(0,d.fy)((0,_.nv)(P,E)));let R=r.t0;return C===!1&&(R=v),k?t.createElement("span",{className:D},t.createElement(i.A,{memberId:E,emoji:W,stopAnimations:A,showTooltips:S,emojiSize:o.lw.MEDIUM,className:"c-custom_status__emoji_in_member_profile"}),N&&t.createElement(m.A,h({memberId:E,className:(0,s.A)("margin_left_50","padding_right_50",{margin_right_100:V}),emojiSize:o.lw.SMALL,stopAnimations:A,text:O?"":N},R))):t.createElement("span",{className:D},t.createElement(i.A,{memberId:E,showTooltips:S,emojiSize:o.lw.SMALL,emoji:W,stopAnimations:A}),N&&t.createElement(m.A,h({memberId:E,className:b?"margin_left_50":"margin_left_25",emojiSize:o.lw.SMALL,stopAnimations:A,text:O?"":N},R)))},"CustomStatusTooltipContent");y.displayName="CustomStatusTooltipContent";const I=t.memo(y);var T=e(6710730141);const f=u(M=>{let{animated:A=!1,tooltip:O=!0,tipPosition:D,noText:E=!1,className:C,memberId:S="",noLinking:b,showEmojiTooltip:k=!1,insertTextSpacing:W=!1,displayInMemberProfile:N=!1}=M;const V=(0,n.d4)(P=>(0,a.A)(P,S)),R=(0,t.useCallback)(()=>t.createElement(t.Fragment,null,t.createElement(I,{className:"c-custom_status__tooltip",noText:E,memberId:S,noLinking:b,showEmojiTooltip:k,insertTextSpacing:W,displayInMemberProfile:N,emoji:V}),t.createElement(T.A,{className:"c-custom_status__expiration",memberId:S})),[S,E,b,k,W,N,V]);return V?O?t.createElement(c.Ay,{tip:R,position:D,zIndex:"above_fs","data-qa":"custom_status_tooltip"},t.createElement("span",{className:(0,s.A)("c-custom_status",C),"data-qa":"custom_status"},t.createElement(i.A,{memberId:S,showTooltips:!1,emojiSize:o.lw.SMALL,emoji:V,stopAnimations:!A}))):t.createElement(I,{className:(0,s.A)(C,"c-custom_status","c-custom_status--inline",{display_flex:N}),stopAnimations:!A,noText:E,memberId:S,noLinking:b,showEmojiTooltip:k,insertTextSpacing:W,displayInMemberProfile:N,emoji:V}):null},"CustomStatus");f.displayName="CustomStatus";const g=t.memo(f)},2486585453:(j,p,e)=>{"use strict";e.d(p,{A:()=>s,j:()=>n.A});var t=e(7278430876),n=e(6710730141);const s=t.A},9580887194:(j,p,e)=>{"use strict";e.d(p,{E:()=>c,a:()=>o});var t=e(9936232041),n=e(9609912577),s=e(1031947056),a=e(6440800009);const c=(0,s.Ay)("Opens the AddCustomEmojiModal for importing a custom emoji",(i,l,_)=>{let{emojiName:d,emojiUrl:r}=_;var m;i((0,n.A)({emojiNameSuggestion:d&&((m=(0,t.A)(d))===null||m===void 0?void 0:m.name),emojiUrl:r}))});c.meta={name:"createThunk",key:"createThunkopenImportExternalEmojiModal",description:"Opens the AddCustomEmojiModal for importing a custom emoji"};const o=(0,s.Ay)("Opens the AddCustomEmojiModal if an emoji can be imported",(i,l,_)=>{const d=l(),{event:r,emojiName:m,emojiUrl:h}=_;h&&(0,a.LU)(d,h,m)&&(r==null||r.preventDefault(),r==null||r.stopPropagation(),i(c(_)))});o.meta={name:"createThunk",key:"createThunkmaybeOpenImportExternalEmojiModal",description:"Opens the AddCustomEmojiModal if an emoji can be imported"}},8021873188:(j,p,e)=>{"use strict";e.d(p,{K:()=>o});var t=e(3134334389),n=e(735940183),s=e(8683010724),a=e(6440800009);const c=new n.Ay("import-external-emoji");function o(i){let{emojiUrl:l,emojiName:_}=i;return(0,a.tJ)(l,_)?t.createElement("div",{className:"margin_top_50"},t.createElement(s.A,{name:"right-click",inline:!0,size:"18"}),t.createElement("span",{className:"margin_left_25"},c.t("Right click to add to your organization"))):null}u(o,"ImportExternalEmojiTooltipInfo"),o.displayName="ImportExternalEmojiTooltipInfo"},6440800009:(j,p,e)=>{"use strict";e.d(p,{$N:()=>W,LU:()=>E,tJ:()=>C});var t=e(8701485242),n=e(4921059838),s=e(9936232041),a=e(5751973043),c=e(317660850),o=e(6790819894),i=e(3677514771),l=e(2757639362),_=e(6839188756),d=e(5795074931),r=e(6457401668),m=e(6023831373),h=e(2384831516),v=e(7606781622),y=e(5757070316),I=e(9608713960),T=e(6783791506),f=e(4813703725);const g=u(N=>{var V;return Array.isArray((V=N)===null||V===void 0?void 0:V.elements)},"hasElements"),M=u((N,V)=>(0,t.Ay)(N.emojiName,V.emojiName),"emojiNameSort"),A=new Set(["black_square","bowtie","cubimal_chick","dusty_stick","glitch_crab","piggy","pride","shipit","slack_call","slack","squirrel","thumbsup_all","white_square","simple_smile"]);function O(N){var V;const R=(V=(0,s.A)(N))===null||V===void 0?void 0:V.name;return!!R&&A.has(R)}u(O,"isBuiltInEmoji");function D(N,V,R){return decodeURIComponent(V).includes((0,l.w)())?!1:!(R&&((0,n.A)(N,R)||O(R)))}u(D,"isCustomEmoji");const E=(0,h.Mz)((N,V,R)=>{if(!(V&&(0,d.TZ)(N)&&D(N,V,R)&&(0,c.D)(N)))return!1;const z=(0,i.Yc)(N);var $;const x=($=z==null?void 0:z.id)!==null&&$!==void 0?$:"",Y=(0,_.Ic)(z);return!!Y&&V.indexOf((0,_.k7)(x,Y))===-1&&V.indexOf(x.slice(1))===-1});E.meta={name:"createSelector",key:"createSelectorcanUserImportEmoji",description:(N,V,R)=>{if(!(V&&(0,d.TZ)(N)&&D(N,V,R)&&(0,c.D)(N)))return!1;const z=(0,i.Yc)(N);var $;const x=($=z==null?void 0:z.id)!==null&&$!==void 0?$:"",Y=(0,_.Ic)(z);return!!Y&&V.indexOf((0,_.k7)(x,Y))===-1&&V.indexOf(x.slice(1))===-1}};function C(N,V){return(0,m.d4)(R=>E(R,N,V))}u(C,"useCanImportThisEmoji");function S(N,V){for(const R of V||[])(0,T.E)(R)?R.display_url&&N.set(R.display_url,{emojiName:R.name,emojiUrl:R.display_url}):g(R)&&S(N,R.elements)}u(S,"collectMessageEmojis");function b(N,V){for(const{name:R,url:P}of V||[])P&&N.set(P,{emojiName:R,emojiUrl:P})}u(b,"collectMessageReactjis");const k=(0,o.F)((N,V)=>V,(N,V)=>(0,I.bk)(N,(0,y.J)(V)),(N,V)=>{const R=new Map;return b(R,V),S(R,N.blocks),[...R.values()].sort(M)}),W=(0,f.eI)((N,V)=>{let{channelId:R,ts:P}=V;if(!(0,c.D)(N)||!(0,d.TZ)(N))return a.Ml;const z=(0,v.Ld)(N,R,P);return!z||(0,r.aK)(z)?a.Ml:k(N,z).filter($=>{let{emojiName:x,emojiUrl:Y}=$;return E(N,Y,x)})})},5892132962:(j,p,e)=>{"use strict";e.d(p,{Ep:()=>r,sc:()=>m});var t=e(9548888903),n=e(2233365467),s=e(1407713935);const a={name:"sf-opportunity",variation:"filled"},c={name:"sf-account",variation:"filled"},o={name:"sf-case",variation:"filled"},i={name:"sf-lead",variation:"filled"},l={name:"sf-contact",variation:"filled"},_={name:"sf-cloud",variation:"filled"},d={name:"headphones",variation:"filled"};function r(h){switch(h){case t.hM.Opportunity:return a;case t.hM.Account:return c;case t.hM.Lead:return i;case t.hM.Case:return o;case t.hM.Contact:return l;case t.hM.Org:default:return _}}u(r,"getSalesforceObjectTypeIconProps");function m(h){if(!(0,s.rI)(h))return null;const v=(0,n.LJ)(h);switch((0,n.fI)(v==null?void 0:v.record_id)){case t.B4.Huddle:return d;default:return null}}u(m,"getRecordChannelOverrideIconProps")},7244076749:(j,p,e)=>{"use strict";e.d(p,{b:()=>n});var t=e(4724591729);function n(){return(0,t.b3)()}u(n,"isSlackKitPlaygroundEnabled")},5868036555:(j,p,e)=>{"use strict";e.d(p,{CC:()=>s,Fv:()=>a,NY:()=>i,P:()=>l,PG:()=>r,Qi:()=>m,Ss:()=>c,Uk:()=>o,We:()=>h,n0:()=>_,zr:()=>d});var t=e(9132066222),n=e(4761125736);function s(v){return(0,n._Z)(v,"solutions")==="on"}u(s,"isSolutionsEnabled");function a(v){return(0,n._Z)(v,"workflow_composer")==="on"}u(a,"isWorkflowComposerEnabled");function c(v){return(0,n._Z)(v,"workflow_composer_multi")==="on"}u(c,"isWorkflowComposerMultiEnabled");function o(v){return(0,n._Z)(v,"workflow_composer_ga_wishlist")==="on"}u(o,"isWorkflowComposerGAWishlistEnabled");function i(v){return(0,n._Z)(v,"workflow_file_dialog")==="on"||s(v)}u(i,"isWorfklowFileDialogEnabled");function l(v){return(0,n._Z)(v,"solutions_add_to_channel")==="on"&&s(v)&&(0,t.U6)(v)}u(l,"isSolutionsAddToChannelEnabled");function _(v){return(s(v)||(0,t.U6)(v))&&(0,n._Z)(v,"solutions_tidy_up")==="on"}u(_,"isSolutionsTidyUpEnabled");function d(v){return s(v)&&(0,n._Z)(v,"custom_solution_creation")==="on"}u(d,"isCustomSolutionCreationEnabled");function r(v){return(0,n._Z)(v,"solutions_for_sfdc")==="on"}u(r,"isSolutionsForSfdcEnabled");function m(v){return l(v)&&(0,n._Z)(v,"solutions_new_setup_flow")==="on"}u(m,"isSolutionNewSetupFlowEnabled");const h=u(v=>(0,n._Z)(v,"ask_slack_view")==="on","isAskSlackViewEnabled")},2664997725:(j,p,e)=>{"use strict";e.d(p,{x:()=>l});var t=e(6839188756),n=e(3677514771),s=e(9132066222),a=e(1552255081),c=e(6642124196),o=e(1737183214),i=e(5868036555);const l=u(_=>{const d=(0,n.H7)(_);return!((0,t.tc)(d)||!(0,i.CC)(_)||!(0,s.U6)(_)||!(0,a.F)(_)||!(0,c.Il)(_)||!(0,o.I)(_))},"canUserProvisionSolutions")},3121972076:(j,p,e)=>{"use strict";e.d(p,{g:()=>d});var t=e(3134334389),n=e(9132066222),s=e(125295483),a=e(5917710436),c=e(6839188756),o=e(5751973043),i=e(6023831373),l=e(9101533895),_=e(3677514771);function d(r){const m=(0,i.d4)(I=>(0,l.OL)(I,r,!1)),h=(0,i.d4)(I=>{var T;return(0,n.xA)(I,m)?m==null||(T=m.properties)===null||T===void 0?void 0:T.tabs:o.Ml}),v=(0,c.tc)((0,i.d4)(_.H7)),y=(0,i.d4)(a.T$);return(0,t.useMemo)(()=>{var I;if(!m)return[];let T=[...((I=h==null?void 0:h.filter(f=>!f.is_disabled))===null||I===void 0?void 0:I.map(n._f))||[]];return y===a.MB.READ_ONLY&&(T=T.filter(f=>f.type!==s.Xy.List)),v&&(T=T.filter(f=>f.type!==s.Xy.List&&f.type!==s.Xy.Workflows)),T},[h,m,v,y])}u(d,"useDynamicChannelTabs")},667891291:(j,p,e)=>{"use strict";e.d(p,{Hv:()=>_,c5:()=>l});var t=e(3134334389),n=e(6217320234),s=e(9374064916),a=e(7245481391),c=e(6023831373);const o=[a.fY.Channel,a.fY.RecordCreate,a.fY.RecordOverview,a.fY.RecordSummary,a.fY.RecordOpportunities,a.fY.ChannelCanvas,a.fY.RecordHistory];function i(r){const m=o.indexOf(r);return m===-1?Number.MAX_SAFE_INTEGER:m}u(i,"getTabOrderIndex");function l(r){return(0,n.A)(r,m=>i(m.id))}u(l,"getSortedStaticTabs");function _(r){const m=d(r);return(0,c.d4)(m)}u(_,"useStaticChannelTabs");function d(r){return(0,t.useMemo)(()=>(0,s.fZ)(r),[r])}u(d,"useMakeGetStaticTabsSelector")},5253816611:(j,p,e)=>{"use strict";e.d(p,{Y:()=>d});var t=e(3398586081),n=e(362134992),s=e(3385422400),a=e(1190344069),c=e(9548888903),o=e(7245481391),i=e(735940183);const l=new i.Ay("tabbed-channel"),_=u((r,m)=>`${r||""}.${m||""}`,"getCacheKey"),d=(0,t.A)((r,m)=>(0,s.Mz)([h=>(0,a.hm)(h),h=>(0,a.BU)(h),h=>(0,a.xw)(h),h=>(0,a.VJ)(h),h=>(0,a.dw)(h)],(h,v,y,I,T)=>!r||!h?[]:(0,n.A)([{id:o.fY.RecordOverview,type:o.Xy.RecordOverview,label:l.t("{recordLabel} details",{recordLabel:m||l.t("Record",{fallbackHash:"0efc2e6be4c23b9a513d7ce0dcff8ed80e8912e7",fallbackHashNs:"recordchannels"}),fallbackHash:"0efc2e6be4c23b9a513d7ce0dcff8ed80e8912e7",fallbackHashNs:"recordchannels"})},(v||I)&&{id:o.fY.RecordSummary,type:o.Xy.RecordSummary,label:l.t("Summary")},r===c.hM.Account&&!T&&{id:o.fY.RecordOpportunities,type:o.Xy.RecordList,label:l.t("Open Opportunities",{fallbackHash:"51b7a8a4c68a8eaa403c840017fe5998f53be1da"})},y&&{id:o.fY.RecordHistory,type:o.Xy.RecordHistory,label:l.t("History")}])),_)},9374064916:(j,p,e)=>{"use strict";e.d(p,{fZ:()=>y});var t=e(362134992),n=e(3398586081),s=e(6217320234),a=e(3385422400),c=e(2233365467),o=e(9132066222),i=e(5253816611),l=e(7245481391),_=e(6839188756),d=e(735940183),r=e(9101533895),m=e(3677514771);const h=new d.Ay("tabbed-channel"),v=u(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=arguments.length>2?arguments[2]:void 0;const A=new Set(g==null?void 0:g.map(E=>E.type)),D=[...(0,t.A)([{id:l.fY.Channel,type:l.Xy.Channel,label:h.t("Messages")},{id:l.fY.ChannelCanvas,type:l.Xy.ChannelCanvas,label:h.t("Canvas")},!M&&{id:l.fY.Workflows,type:l.Xy.Workflows,isDisabled:!0,label:h.t("Workflows")},{id:l.fY.Bookmarks,type:l.Xy.Bookmarks,isDisabled:!0,label:h.t("Bookmarks",{fallbackHash:"ca3cddd25bd8f6bc4ce35a262e2e1398541ecf3d",fallbackHashNs:"bookmarks-bar"})},{id:l.fY.Files,type:l.Xy.Files,isDisabled:!0,label:h.t("Files")},{id:l.fY.Pins,type:l.Xy.Pins,isDisabled:!0,label:h.t("Pins")}]),...f].filter(E=>!A.has(E.type));return I(D)},"getComputedStaticTabs"),y=(0,n.A)(f=>(0,a.Mz)([g=>{const M=(0,r.OL)(g,f);return(0,i.Y)((0,c.dM)(M),(0,c.jT)(M))(g)},g=>{var M,A;return(M=(0,r.OL)(g,f))===null||M===void 0||(A=M.properties)===null||A===void 0?void 0:A.tabs},g=>(0,_.tc)((0,m.H7)(g))],v));function I(f){return(0,s.A)(f,g=>T(g.id))}u(I,"getSortedStaticTabs");function T(f){const g=o.s3.indexOf(f);return g===-1?Number.MAX_SAFE_INTEGER:g}u(T,"getTabOrderIndex")},8032081845:(j,p,e)=>{"use strict";e.d(p,{d:()=>D,H:()=>E});var t=e(9706240641),n=e(3134334389),s=e(8300007136),a=e(9744286524),c=e(1190344069),o=e(3121972076),i=e(667891291),l=e(9132066222),_=e(4427921758),d=e(3172414072),r=e(7056498591),m=e(796111729),h=e(1031947056);const v=(0,h.Ay)("Adds a new tab to a channel",function(){var C=(0,t.coroutine)(function*(S,b,k){let{channelId:W,tabId:N,data:V,label:R,reason:P="updateTab"}=k,z={ok:!1,tabs:[]};try{z=yield S((0,r.k)({id:N,...(R||R==="")&&{label:R},...V&&{data:V},channelId:W,reason:P}))}catch($){(0,m.Ay)({label:"channel_tabs"}).error("error updating tab",$)}return z});return function(S,b,k){return C.apply(this,arguments)}}());v.meta={name:"createThunk",key:"createThunkupdateTab",description:"Adds a new tab to a channel"};var y=e(7245481391),I=e(5115870218),T=e(1783582283),f=e(7937864072),g=e(4849735859),M=e(2580646391),A=e(6023831373),O=e(4761125736);const D=(0,n.createContext)({});function E(C){let{channelId:S,children:b,tabParams:k,currentTabId:W=y.Xy.Channel}=C;const N=(0,A.d4)(ce=>(0,O._Z)(ce,"unified_canvas_tabs_prototype")==="on"),V=(0,A.d4)(l.Hy),R=(0,A.d4)(c.dw),P=(0,s.wA)(),z=(0,f.A)(),$=(0,i.Hv)(S),x=(0,o.g)(S),{channelCanvasFileId:Y}=(0,a.A)({channelId:S}),[ne,re]=(0,n.useState)(!1),_e=(0,n.useCallback)(()=>{re(!0),P((0,g.A)({onCreate:ce=>{let{fileId:ee}=ce;P((0,d.P)({channelId:S,type:"canvas",fileId:ee})).then(J=>{re(!1);const X=J.tabs,F=X==null?void 0:X.find(L=>{let{data:K}=L;return K&&K.file_id===ee});F&&P((0,T.i)({channelId:S,id:F.id,reason:"add-channel-tab"}))})},source:M.P.CREATE_CHANNEL_SPACE}))},[S,P]),G=(0,n.useMemo)(()=>{const ce=(0,I.L)({tabs:[...$,...x],experimentChannelTabsV5BookmarkFoldersGroupOn:V,experimentLobRelatedListsGroupOn:R});if(N&&!Y&&ce.find(ee=>{let{type:J}=ee;return J===y.Xy.ChannelCanvas})){const ee=ce.findIndex(J=>{let{type:X}=J;return X===y.Xy.ChannelCanvas});ce.find(J=>{let{type:X}=J;return X===y.Xy.Canvas})?ce.splice(ee,1):ce.splice(ee,1,{id:ne?y.fY.CreatingCanvas:y.fY.CreateCanvas,type:y.Xy.CreateCanvas,label:"Canvas",onSelected:_e})}return ce},[$,x,V,R,N,Y,ne,_e]),[ge,oe]=(0,n.useState)(G);(0,n.useEffect)(()=>{oe(G)},[G]);const me=(0,l.Fi)(ge,W)||(0,l.Fi)(ge,y.fY.Channel),ue=(0,n.useCallback)(function(){var ce=(0,t.coroutine)(function*(ee){let{sourceIndex:J,destinationIndex:X}=ee;const F=[...ge],L=[...ge],[K]=F.splice(J,1);F.splice(X,0,K);const B=F[X-1];oe(F),(yield P((0,T.i)({channelId:S,id:K.id,...!(0,l.PN)(B)&&{after:B.id},reason:"updateTabOrder"}))).ok||oe(L)});return function(ee){return ce.apply(this,arguments)}}(),[S,P,ge]),ae=(0,n.useCallback)(function(){var ce=(0,t.coroutine)(function*(ee){const J=[...ge],X=[...ge],F=J.findIndex(K=>K.id===W);if(F<0)return;J[F].label=ee,oe(J),(yield P(v({channelId:S,tabId:W,label:ee,reason:"updateTabLabel"}))).ok||oe(X)});return function(ee){return ce.apply(this,arguments)}}(),[S,W,P,ge]),he=(0,n.useMemo)(()=>({tabParams:k,tabSchema:ge,channelId:S,currentTab:me,updateTabOrder:ue,updateTabLabel:ae}),[ge,k,S,me,ue,ae]);return me?n.createElement(D.Provider,{value:he},n.createElement(_.j.Provider,{value:he},b)):(z.error(new Error("No current channel tab selected.")),null)}u(E,"TabbedChannelProvider"),E.displayName="TabbedChannelProvider"},4427921758:(j,p,e)=>{"use strict";e.d(p,{j:()=>n});var t=e(6152845331);const n=(0,t.Ay)("Tabbed channel",{})},3172414072:(j,p,e)=>{"use strict";e.d(p,{P:()=>c});var t=e(8786006583),n=e(2799479478),s=e(1031947056),a=e(3639008527);const c=(0,s.Ay)("Adds a tab to a channel and navigates to that tab",(o,i,l)=>{let{channelId:_,type:d,label:r,fileId:m,accessLevel:h,data:v,reason:y="add-channel-tab"}=l;const I=m||h||v?{channelId:_,type:d,label:r,data:{fileId:m,accessLevel:h,...v},reason:y}:{channelId:_,label:r,type:d,reason:y};return o((0,a.Z)(I)).then(T=>{const f=T.tabs;let g=(0,t.A)(f);return m?g=f==null?void 0:f.find(M=>{let{data:A}=M;return(A==null?void 0:A.file_id)===m}):v!=null&&v.recordRelatedListId&&(g=f==null?void 0:f.find(M=>{let{data:A}=M;return(A==null?void 0:A.record_related_list_id)===v.recordRelatedListId})),g&&o((0,n.D)({tabId:g.id,tab:g,channelId:_})),T})});c.meta={name:"createThunk",key:"createThunkaddTabToChannelAndNavigate",description:"Adds a tab to a channel and navigates to that tab"}},2799479478:(j,p,e)=>{"use strict";e.d(p,{D:()=>v});var t=e(9132066222),n=e(7245481391),s=e(5267010247),a=e(8822892075),c=e(5964896486),o=e(82287009),i=e(6078549397),l=e(1031947056),_=e(2522627261),d=e(36177209),r=e(4033441523),m=e(8980478045),h=e(9101533895);const v=(0,l.Ay)("Navigate to a channel tab",(y,I,T)=>{let{tabId:f,tab:g,channelId:M,docSource:A,sectionIdsToHighlightOverride:O}=T;const D=I(),E=g||(0,t.kt)(D,M,f),C=(0,h.OL)(D,M,!1);if(E!=null&&E.data){const S="fileId"in E.data&&E.data.fileId||"file_id"in E.data&&E.data.file_id;if(S){if(E.type===n.Xy.Canvas){const b={fileId:S,source:A??r.f.CHANNEL_TAB,isChannelCanvas:!1,channelId:M};return y((0,s.o)((0,a.sL)((0,a.mo)({id:(0,i.Lo)({id:S}),clogParams:b}),M,f)))}if(E.type===n.Xy.List)return y((0,_.w)({listId:S,source:d.B.CHANNEL_TAB,channelId:M})),y((0,s.o)((0,a.sL)((0,a.st)({listId:S}),M,f)))}}if((E==null?void 0:E.type)===n.Xy.ChannelCanvas||f===n.fY.ChannelCanvas){const{fileId:S}=(0,c.H)(C),b=(0,m.Pf)(I(),M);if(S||b){const k={fileId:S||b||"",source:A??r.f.CHANNEL_TAB,isChannelCanvas:!1,channelId:M};return y((0,s.o)((0,a.sL)((0,a.NB)({entityId:(0,i.Lo)({id:S||b}),channelId:M,clogParams:k,sectionIdsToHighlightOverride:O}),M,f)))}return y((0,o.C$)({channelId:M}))}return y((0,s.o)((0,a.id)(M,{tabId:f,tabParams:E==null?void 0:E.data})))});v.meta={name:"createThunk",key:"createThunknavigateToChannelTab",description:"Navigate to a channel tab"}},5115870218:(j,p,e)=>{"use strict";e.d(p,{L:()=>n});var t=e(7245481391);const n=u(s=>{let{tabs:a,experimentChannelTabsV5BookmarkFoldersGroupOn:c=!1,experimentLobRelatedListsGroupOn:o=!1,includeDisabled:i=!1}=s;return a.filter(l=>{let{type:_,isDisabled:d=!1}=l;return!(d&&!i||_===t.Xy.Pins||!c&&_===t.Xy.Folder||!o&&_===t.Xy.RecordRelatedList)})},"filterTabs")},7156540029:(j,p,e)=>{"use strict";e.d(p,{K8:()=>s,Q1:()=>t});const t=20,n={FETCH:"activity_fetch",VIEW_LOAD:"activity_view_load",VIEW_UPDATED:"activity_view_updated"},s={PREF:"activity_view",PAGE:"page",FLEXPANE:"flexpane"}},9509635375:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(6023831373),n=e(603616571),s=e(735940183),a=e(5255740490),c=e(3134334389),o=e(1206744593);function i(){return i=Object.assign||function(r){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(r[v]=h[v])}return r},i.apply(this,arguments)}u(i,"_extends");const l=new s.Ay("members");function _(r){let{className:m,inverse:h=!1,isWorkflow:v=!1,isLegacyWorkflow:y=!1,...I}=r;const T=(0,t.d4)(n.TX),f=(0,t.d4)(o.x$);let g=l.t("WORKFLOW",{fallbackHash:"aa16061e7815ca19a57c9db8f84c9601b739f570"});y&&f&&(g=l.t("LEGACY WORKFLOW",{fallbackHash:"aa16061e7815ca19a57c9db8f84c9601b739f570"})),T&&v?g=l.t("BETA"):v||(g=l.t("APP"));const M=(0,a.A)(m,"c-app_badge",{"c-app_badge--inverse":h});return c.createElement("span",i({},I,{className:M,"data-stringify-suffix":" "}),g)}u(_,"AppBadge"),_.displayName="AppBadge";const d=(0,c.memo)(_)},7999544567:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(297247517);function n(s){if((0,t.P)(s)){const a=s&&s.text&&s.text.trim();if(a)return a.length}return 0}u(n,"__WEBPACK_DEFAULT_EXPORT__")},5577180258:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(45851552),n=e(5404505308),s=e(6783791506),a=e(297247517),c=e(8389327410),o=e(5305906809),i=e(7999544567);const{_EMOJI_GROUP:l}=c.Lv;function _(r,m,h,v,y,I,T){const f=r.slice(I,T),g=I+(0,t.A)(f,s.E),M=I+(0,n.A)(f,s.E)+1;r.splice(g,M-g,{type:l,name:m,size:h,displayAlias:v,skinTone:y,elements:r.slice(g,M)})}u(_,"insertEmojiGroup");function d(r){let m,h,v,y,I,T=r.length-1;for(;T>=-1;){const g=r[T];if(v=v??T,h=h??0,(0,s.E)(g))g.name===m&&g.displayAlias===y&&g.skinTone===I?h+=1:(h>=o.uz&&_(r,m,h,y,I,T+1,v+1),m=g.name,y=g.displayAlias,I=g.skinTone,v=T,h=1);else if(!(0,a.P)(g)||(0,i.A)(g)!==0){var f;h>=o.uz&&_(r,m,h,y,I,T+1,v+1),m=void 0,y=void 0,I=void 0,v=void 0,h=void 0,!((f=g)===null||f===void 0)&&f.elements&&d(g.elements)}T-=1}return r}u(d,"groupEmojis")},9744286524:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(3134334389),n=e(8300007136),s=e(1668417071),a=e(8980478045),c=e(6023831373),o=e(6403319589),i=e(82287009),l=e(9671982974),_=e(2054605226),d=e(7946439528);function r(m){let{channelId:h}=m;const v=(0,n.wA)(),{spaceFileId:y,spaceIsEmpty:I}=(0,l.A)({channelId:h}),T=(0,c.d4)(C=>h?(0,a.Pf)(C,h):void 0),f=T??y,g=(0,i.$s)(f),M=(0,o.A)(g,g==null?void 0:g.isEmpty),A=typeof M=="boolean"||typeof I=="boolean",O=I!==void 0?I===!1:M===!1,D=(0,d.A)(O),E=(0,c.d4)(C=>h?(0,s.kM)(C,h):void 0);return(0,t.useEffect)(()=>{h&&E&&D&&!O&&v((0,_.ot)({channelId:h,template:void 0}))},[h,E,O,D,v]),{channelCanvasHasContent:O||!!E&&E!=="blank_page",isLoaded:A,doc:g,templateSelected:E,channelCanvasFileId:y}}u(r,"useChannelCanvasContent")},9671982974:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(6023831373),n=e(937317117),s=e(497761763),a=e(396294106),c=e(2188787324);function o(i){let{channelId:l}=i;const{spaceFileId:_,spaceIsPrimary:d,spaceIsEmpty:r,isLinkedCanvasDeleted:m,editsRestrictedToChannelManager:h,setEditsRestrictedToChannelManager:v,hasClickedUseBlankCanvasForChannel:y}=(0,a.A)({channelId:l}),I=(0,t.d4)(f=>_&&(0,s.A)(_)?(0,n.Lp)(f,_):null),T=(0,c.ln)(I);return{spaceFileId:_,spaceIsPrimary:d,spaceIsEmpty:r,isLinkedCanvasDeleted:m,editsRestrictedToChannelManager:h,setEditsRestrictedToChannelManager:v,isChannelCanvasLocked:T,hasClickedUseBlankCanvasForChannel:y}}u(o,"useChannelSpaceForChannel")},396294106:(j,p,e)=>{"use strict";e.d(p,{A:()=>O});var t=e(9706240641),n=e(3134334389),s=e(8300007136),a=e(6023831373),c=e(8040098042),o=e(4761125736),i=e(1031947056),l=e(9101533895),_=e(3430841143),d=e(9530687876);const r=(0,i.Ay)(d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_PRIMARY_VIEW,(D,E,C)=>{let{id:S,isPrimaryView:b}=C;var k;const W=E(),N=!1,V=(0,l.OL)(W,S,N);if(!S||!V)return;const R={...V,properties:{...V==null?void 0:V.properties,canvas:{...V==null||(k=V.properties)===null||k===void 0?void 0:k.canvas,is_primary_view:b}}};D((0,_.F)({channel:R,reason:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_PRIMARY_VIEW}))});r.meta={name:"createThunk",key:"createThunksetChannelPropertiesCanvasIsPrimaryView",description:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_PRIMARY_VIEW};var m=e(4347488242),h=e(5534420337);const v=(0,i.Ay)(d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_OPEN_BY_DEFAULT,(D,E,C)=>{let{id:S,isOpenByDefault:b}=C;const k=E(),W=!1,N=(0,l.OL)(k,S,W),V=(0,o._Z)(k,"channel_properties_api_setter")==="on";if(!S||!N||!V)return;let R;try{R=JSON.stringify({canvas:{is_open_by_default:b}})}catch(P){(0,h.Ay)({getState:E}).error(P,"failed serializing new properties");return}return D((0,m.D)({channelId:S,props:R,reason:"set_channel_canvas_open_by_default"})).then(()=>{var P;const z={...N,properties:{...N==null?void 0:N.properties,canvas:{...N==null||(P=N.properties)===null||P===void 0?void 0:P.canvas,is_open_by_default:b}}};D((0,_.F)({channel:z,reason:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_OPEN_BY_DEFAULT}))})});v.meta={name:"createThunk",key:"createThunksetChannelPropertiesCanvasIsOpenByDefault",description:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_OPEN_BY_DEFAULT};const y=(0,i.Ay)(d.rd.SET_CHANNEL_PROPERTIES_CANVAS_EDITS_RESTRICTED_TO_CHANNEL_MANAGER,(D,E,C)=>{let{id:S,editsRestrictedToChannelManager:b}=C;const k=E(),W=!1,N=(0,l.OL)(k,S,W),V=(0,o._Z)(k,"channel_manager_chanvas_edits")==="on",R=(0,o._Z)(k,"channel_manager_chanvas_ui")==="on";if(!S||!N||!R||!V)return;let P;try{P=JSON.stringify({canvas:{edits_restricted_to_channel_manager:b}})}catch(z){(0,h.Ay)({getState:E}).error(z,"failed serializing new properties");return}return D((0,m.D)({channelId:S,props:P,reason:"set_edits_restricted_to_channel_manager"})).then(()=>{var z;const $={...N,properties:{...N==null?void 0:N.properties,canvas:{...N==null||(z=N.properties)===null||z===void 0?void 0:z.canvas,edits_restricted_to_channel_manager:b}}};D((0,_.F)({channel:$,reason:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_EDITS_RESTRICTED_TO_CHANNEL_MANAGER}))})});y.meta={name:"createThunk",key:"createThunksetChannelPropertiesEditsRestrictedToChannelManager",description:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_EDITS_RESTRICTED_TO_CHANNEL_MANAGER};var I=e(1523378513),T=e(4079686795),f=e(1668417071),g=e(8362292758),M=e(1407713935),A=e(5964896486);function O(D){let{channelId:E}=D;const C=(0,s.wA)(),S=(0,g.A)(),b=E?(0,c.A)(E):!1,k=(0,a.d4)(ge=>(0,l.OL)(ge,E)),W=(0,A.H)(k),N=W==null?void 0:W.fileId,V=W==null?void 0:W.isEmpty,R=b&&!(0,M.LI)(k)&&!(0,M.yz)(k)&&(W==null?void 0:W.isPrimaryView),P=b&&(W==null?void 0:W.isOpenByDefault),z=W==null?void 0:W.isLinkedCanvasDeleted,$=W==null?void 0:W.editsRestrictedToChannelManager,x=(0,a.d4)(ge=>(0,o._Z)(ge,"channel_properties_api_setter")==="on"),Y=(0,a.d4)(f.As),ne=E&&b?Y[E]:void 0,re=(0,n.useCallback)(function(){var ge=(0,t.coroutine)(function*(oe){if(!E||!b)return;C(r({id:E,isPrimaryView:oe})),C((0,T.z)({channelId:E,pref:"space_is_primary",value:{enabled:oe}}));let me;try{me=JSON.stringify({space_is_primary:oe})}catch(ue){S.error(ue,"failed serializing new prefs");return}return C((0,I.E)({channelId:E,newPrefs:me,reason:"use-channel-space-prefs--set-space-is-primary"}))});return function(oe){return ge.apply(this,arguments)}}(),[E,C,S,b]),_e=(0,n.useCallback)(function(){var ge=(0,t.coroutine)(function*(oe){if(!E||!b)return;if(x)return C(v({id:E,isOpenByDefault:oe}));C((0,T.z)({channelId:E,pref:"space_open_by_default",value:{enabled:oe}}));let me;try{me=JSON.stringify({space_open_by_default:oe})}catch(ue){S.error(ue,"failed serializing new prefs");return}return C((0,I.E)({channelId:E,newPrefs:me,reason:"use-channel-space-prefs--set-space-is-open-by-default"}))});return function(oe){return ge.apply(this,arguments)}}(),[E,C,S,b,x]),G=(0,n.useCallback)(function(){var ge=(0,t.coroutine)(function*(oe){if(!(!E||!b))return C(y({id:E,editsRestrictedToChannelManager:oe}))});return function(oe){return ge.apply(this,arguments)}}(),[E,C,b]);return{spaceFileId:N,spaceIsPrimary:R,spaceIsEmpty:V,spaceIsOpenByDefault:P,editsRestrictedToChannelManager:$,setSpaceIsPrimary:re,setSpaceIsOpenByDefault:_e,setEditsRestrictedToChannelManager:G,isLinkedCanvasDeleted:z,hasClickedUseBlankCanvasForChannel:ne}}u(O,"useChannelSpacePrefs")},6403319589:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(6023831373),n=e(7115106069),s=e(9388275297);function a(c,o){const i=c==null?void 0:c.id.get(),l=(0,t.d4)(_=>i&&(0,n.d0)(_,i));return(0,s.A)(l?o:void 0)}u(a,"useQuipDocValueIfSubscribed")},5645915081:(j,p,e)=>{"use strict";e.d(p,{Zq:()=>o,zF:()=>n,zf:()=>i});var t=e(5244168417),n;(function(l){l.PARAGRAPH="paragraph",l.H1="h1",l.H2="h2",l.H3="h3",l.CHECK_LIST="check-list",l.CHECK_LIST_TOGGLE="check-list-toggle",l.ORDERED_LIST="ordered-list",l.BULLET_LIST="bullet-list",l.BLOCKQUOTE="blockquote",l.CODE_BLOCK="code-block"})(n||(n={}));const s=[[t.DocBlockStyle.PLAIN,n.PARAGRAPH],[t.DocBlockStyle.H1,n.H1],[t.DocBlockStyle.H2,n.H2],[t.DocBlockStyle.H3,n.H3],[t.DocBlockStyle.LIST_CHECKLIST,n.CHECK_LIST],[t.DocBlockStyle.LIST_NUMBERED,n.ORDERED_LIST],[t.DocBlockStyle.LIST_BULLET,n.BULLET_LIST],[t.DocBlockStyle.BLOCKQUOTE,n.BLOCKQUOTE],[t.DocBlockStyle.CODE,n.CODE_BLOCK]],a=new Map(s),c=new Map(s.map(l=>[l[1],l[0]]));function o(l){return a.get(l)}u(o,"blockStyleToFormat");function i(l){return c.get(l)}u(i,"formatToBlockStyle")},4843305308:(j,p,e)=>{"use strict";e.d(p,{P:()=>s});var t=e(7731278967),n=e(9084547259);const s=u(a=>{switch(a){case t.r.FILE:return{name:"attachment"};case t.r.IMAGE:return{name:"image"};case t.r.CHECK_LIST:return{name:"checkbox"};case t.r.CHECK_LIST_TOGGLE:return{name:"checkbox"};case t.r.BULLET_LIST:return{name:"bulleted-list"};case t.r.ORDERED_LIST:return{name:"numbered-list"};case t.r.VIDEO_CLIP:return{name:"video"};case t.r.AUDIO_CLIP:return{name:"microphone"};case t.r.DIVIDER:return{name:"divider"};case t.r.TABLE:return{name:"spreadsheet"};case t.r.LAYOUT_2_COLUMNS:return{name:"column-two"};case t.r.LAYOUT_3_COLUMNS:return{name:"column-three"};case t.r.PINS:return{name:"pin"};case t.r.SMART_SUMMARY:case t.r.RECENT_FILES:case t.r.ACTIVE_DISCUSSIONS:case t.r.CHANNEL_HUDDLES:return{name:"magic-wand"};case t.r.BLOCKQUOTE:return{name:"quote"};case t.r.CODE_BLOCK:return{name:"code-block"};case n.L.CODE:return{name:"code"};case t.r.PARAGRAPH:return{name:"paragraph"};case t.r.H1:return{name:"heading-1"};case t.r.H2:return{name:"heading-2"};case t.r.H3:return{name:"heading-3"};case t.r.CANVAS:return{name:"canvas"};case t.r.WORKFLOW:return{name:"play"};case t.r.LIST:return{name:"lists"};case t.r.WIDGET:return{name:"blocks"};case t.r.SALESFORCE_RECORD:return{name:"sf-cloud"};case t.r.USER_PROFILE_UNFURL:return{name:"user"};case t.r.PLACEHOLDER_CARD_SUBMENU:return{name:"add-placeholder"};case t.r.PLACEHOLDER_CARD_VIDEO:return{name:"video"};case t.r.PLACEHOLDER_CARD_PROFILE:return{name:"user"};case t.r.PLACEHOLDER_CARD_AUDIO:return{name:"microphone"};case t.r.PLACEHOLDER_CARD_WORKFLOW:return{name:"play"};case t.r.PLACEHOLDER_CARD_IMAGE:return{name:"image"};case t.r.PLACEHOLDER_CARD_CANVAS:return{name:"canvas"};case t.r.PLACEHOLDER_CARD_FILE:return{name:"attachment"};case t.r.PLACEHOLDER_CARD_LINK:return{name:"link"};case t.r.PLACEHOLDER_CARD_LIST:return{name:"lists"};case t.r.PLACEHOLDER_CARD_SALESFORCE_RECORD:return{name:"sf-cloud"};case t.r.DATE_MENTION:return{name:"calendar"};default:return{name:"help"}}},"getQuipButtonIcon")},8079225585:(j,p,e)=>{"use strict";e.d(p,{O:()=>c});var t=e(735940183),n=e(7731278967),s=e(9084547259);const a=new t.Ay("slack_docs"),c=u(function(o){let{experimentCanvasInsertWorkflowMenuGroupOn:i,experimentCanvasSmartCardsGroupOn:l,experimentWidgetsGroupOn:_,experimentCanvasSalesTemplatesGroupOn:d,experimentCanvasCalloutsGroupOn:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(o){case n.r.FILE:return a.t("File");case n.r.IMAGE:return a.t("Image");case n.r.CHECK_LIST:return a.t("Check list");case n.r.CHECK_LIST_TOGGLE:return a.t("Check list");case n.r.BULLET_LIST:return a.t("Bulleted list");case n.r.ORDERED_LIST:return a.t("Ordered list");case n.r.VIDEO_CLIP:return a.t("Record video clip");case n.r.AUDIO_CLIP:return a.t("Record audio clip");case n.r.DIVIDER:return a.t("Divider");case n.r.PINS:return a.t("Pins");case n.r.SMART_SUMMARY:return l?a.t("AI Channel Summary"):"";case n.r.RECENT_FILES:return l?a.t("Recent Files"):"";case n.r.ACTIVE_DISCUSSIONS:return l?a.t("Active Discussions"):"";case n.r.CHANNEL_HUDDLES:return l?a.t("Huddles"):"";case n.r.BLOCKQUOTE:return a.t("Blockquote");case n.r.CODE_BLOCK:return a.t("Code block");case n.r.PARAGRAPH:return a.t("Paragraph");case n.r.H1:return a.t("Big heading");case n.r.H2:return a.t("Medium heading");case n.r.H3:return a.t("Small heading");case n.r.CANVAS:return a.t("Canvas");case n.r.WORKFLOW:return i?a.t("Workflow"):"";case s.L.CODE:return a.t("Code");case n.r.TABLE:return a.t("Table");case n.r.LAYOUT_2_COLUMNS:return a.t("2 columns",{fallbackHash:"8d8f0f25822179c33b917613ec2d022ef593c340",fallbackHashNs:"quip_shortcut_handlers"});case n.r.LAYOUT_3_COLUMNS:return a.t("3 columns",{fallbackHash:"b505f5f09f70ff9d216f1c3cbb5c1a8a4e82179b",fallbackHashNs:"quip_shortcut_handlers"});case n.r.LIST:return a.t("List");case n.r.WIDGET:return _?a.t("Widget"):"Widget";case n.r.USER_PROFILE_UNFURL:return a.t("Profile",{fallbackHash:"ff4fc0276e960c348647b647235f68200887c9d2",fallbackHashNs:"menu"});case n.r.SALESFORCE_RECORD:return d?a.t("Salesforce record"):"";case n.r.PLACEHOLDER_CARD_VIDEO:return a.t("Video",{fallbackHash:"bc17c1f0179a888f2a7e8389f67d4f2cf5cf4531",fallbackHashNs:"slack_kit_video"});case n.r.PLACEHOLDER_CARD_PROFILE:return a.t("Profile",{fallbackHash:"ff4fc0276e960c348647b647235f68200887c9d2",fallbackHashNs:"menu"});case n.r.PLACEHOLDER_CARD_AUDIO:return a.t("Audio",{fallbackHash:"acdac205f5e24cb75113c4b281a2c13f08b75159",fallbackHashNs:"files"});case n.r.PLACEHOLDER_CARD_WORKFLOW:return a.t("Workflow",{fallbackHash:"d7a484140f5f9f7f5427e1f2c44dbfc1d3ad9eea",fallbackHashNs:"slack_docs"});case n.r.PLACEHOLDER_CARD_IMAGE:return a.t("Image");case n.r.PLACEHOLDER_CARD_CANVAS:return a.t("Canvas");case n.r.PLACEHOLDER_CARD_FILE:return a.t("File");case n.r.PLACEHOLDER_CARD_LINK:return a.t("Link");case n.r.PLACEHOLDER_CARD_LIST:return a.t("List");case n.r.PLACEHOLDER_CARD_SALESFORCE_RECORD:return d?a.t("Salesforce record"):"";case n.r.DATE_MENTION:return a.t("Date",{fallbackHash:"eb9a4bc1c0c153e4e4b042a79113b815b7e3021d",fallbackHashNs:"calendar"});case n.r.CALLOUT:return r?a.t("Callout"):"";default:return o}},"getQuipButtonLabel")},9084547259:(j,p,e)=>{"use strict";e.d(p,{B:()=>a,L:()=>n});var t=e(5244168417),n;(function(c){c.BOLD="bold",c.STRIKE="strike",c.ITALIC="italic",c.CODE="code",c.LINK="link",c.UNDERLINE="underline"})(n||(n={}));const s=new Map([[t.DocInlineStyle.BOLD,n.BOLD],[t.DocInlineStyle.STRIKETHROUGH,n.STRIKE],[t.DocInlineStyle.ITALIC,n.ITALIC],[t.DocInlineStyle.CODE,n.CODE],[t.DocInlineStyle.LINK,n.LINK]]);function a(c){return s.get(c)}u(a,"inlineStyleToFormat")},7731278967:(j,p,e)=>{"use strict";e.d(p,{r:()=>s});var t=e(5645915081),n;(function(a){a.UNKNOWN="unknown",a.TITLE="title",a.FILE="file",a.IMAGE="image",a.VIDEO_CLIP="video-clip",a.AUDIO_CLIP="audio-clip",a.DIVIDER="divider",a.TABLE="table",a.SHORTCUT="shortcut",a.MENU_SEPARATOR="menu-separator",a.PINS="pins",a.BOOKMARKS="bookmarks",a.USER_UNFURL="user-unfurl",a.CANVAS_UNFURL="canvas-unfurl",a.MESSAGE_UNFURL="message-unfurl",a.PUBLIC_LINK_UNFURL="public-link-unfurl",a.SHORTCUT_UNFURL="shortcut-unfurl",a.USER_PROFILE_UNFURL="user-profile-unfurl",a.UNFURL="unfurl",a.CANVAS="canvas",a.GENERIC="generic",a.WORKFLOW="workflow",a.FILE_UPLOAD_BLOCKED_MESSAGE_BANNER="file-upload-blocked-message-banner",a.SMART_SUMMARY="smart-summary",a.RECENT_FILES="recent-files",a.ACTIVE_DISCUSSIONS="active-discussions",a.CHANNEL_HUDDLES="channel-huddles",a.LIST="list",a.WIDGET="widget",a.LAYOUT_2_COLUMNS="layout-2-columns",a.LAYOUT_3_COLUMNS="layout-3-columns",a.PLACEHOLDER_CARD_SUBMENU="placeholder-card-submenu",a.PLACEHOLDER_CARD_VIDEO="placeholder-card-video",a.PLACEHOLDER_CARD_PROFILE="placeholder-card-profile",a.PLACEHOLDER_CARD_AUDIO="placeholder-card-audio",a.PLACEHOLDER_CARD_WORKFLOW="placeholder-card-workflow",a.PLACEHOLDER_CARD_IMAGE="placeholder-card-image",a.PLACEHOLDER_CARD_CANVAS="placeholder-card-canvas",a.PLACEHOLDER_CARD_FILE="placeholder-card-file",a.PLACEHOLDER_CARD_LINK="placeholder-card-link",a.PLACEHOLDER_CARD_LIST="placeholder-card-list",a.PLACEHOLDER_CARD_SALESFORCE_RECORD="placeholder-card-salesforce-record",a.SALESFORCE_RECORD="salesforce-record",a.DATE_MENTION="date-mention",a.CALLOUT="callout"})(n||(n={}));const s={...t.zF,...n}},1069376685:(j,p,e)=>{"use strict";e.d(p,{D:()=>t});var t;(function(n){n.SpecificMembers="add-specific-members",n.AllMembers="add-all-members"})(t||(t={}))},8414606991:(j,p,e)=>{"use strict";e.d(p,{v:()=>o});var t=e(3134334389),n=e(5255740490),s=e(207659888),a=e(8683010724),c=e(1610251172);const o=u(i=>{let{type:l,spacing:_="medium"}=i;const d=(0,n.A)("three_fourths_opacity",{margin_right_0:_==="none",margin_right_25:_==="small",margin_right_50:_==="medium"});return l===s.VZ.Channels||l===s.VZ.OrgChannels?t.createElement(c.A,{type:"channel",size:"inherit",className:d}):l===s.VZ.DirectMessages?t.createElement(c.A,{type:"dm",size:"inherit",className:d}):l===s.VZ.RecentApps?t.createElement(c.A,{type:"gn-menu",size:"inherit",className:d}):l===s.aw||l===s.oX?t.createElement(c.A,{type:"shared-channels-outline",size:"inherit",className:d}):l===s.VH?t.createElement(c.A,{type:"star-o",size:"inherit",className:d}):l===s.VZ.UserGroup?t.createElement("div",{className:(0,n.A)("c-icon","c-icon--inherit",d)},t.createElement(a.A,{variation:"filled",name:"user-groups"})):t.createElement(c.A,{type:"star-o",size:"inherit",className:d})},"InlineChannelSectionFallbackIcon");o.displayName="InlineChannelSectionFallbackIcon"},126225536:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(3134334389),n=e(8300007136),s=e(5255740490),a=e(4308550795),c=e(1030162945),o=e(207659888),i=e(863162513),l=e(1033870301),_=e(8414606991);function d(m){let{channelSection:h,className:v,spacing:y="medium",showIcon:I=!0}=m;const f=(0,n.wA)()((0,l.i1)({channelSection:h})),g=f&&f.split(" "),M=g&&g[0],A=g&&(g.length>1?` ${g.slice(1).join(" ")}`:null),O=u(()=>{if(!I)return null;if(h.type===o.VZ.UserGroup)return t.createElement(_.v,{type:h.type,spacing:y});const D=(0,s.A)({margin_right_0:y==="none",margin_right_25:y==="small",margin_right_50:y==="medium"});return h.emoji?t.createElement(c.Ay,{className:D,shouldFallbackOnLoadError:!0,text:h.emoji,stopAnimations:!0,emojiSize:c.lw.SMALL,forceDisplay:!0,isEmojiInlineWithText:!0,renderEmojiFallback:!0}):h.type===o.VZ.ExternalWorkspace?t.createElement(a.A,{workspaceId:(0,i.de)(h.id),size:15,className:D}):t.createElement(_.v,{type:h.type,spacing:y})},"getIcon");return O.displayName="getIcon",t.createElement("span",{className:(0,s.A)("p-inline_channel_section",v)},t.createElement("span",{className:"p-inline_channel_section__lockup"},O(),M),A)}u(d,"InlineChannelSection"),d.displayName="InlineChannelSection";const r=d},4308550795:(j,p,e)=>{"use strict";e.d(p,{A:()=>T});var t=e(3134334389),n=e(5255740490),s=e(6023831373),a=e(9950739645),c=e(698013937),o=e(3391133100),i=e(5865611660),l=e(3677514771),_=e(5672691263),d=e.n(_);const r=20,m=.8,h=.2,v={width:"auto"};function y(f){let{id:g,size:M,spacing:A}=f;const O=`${Math.ceil(M/2-1)}px`,D=`${M}px`,E=`${A}px`;return t.createElement("svg",{className:"sr-only"},t.createElement("mask",{id:g},t.createElement("rect",{x:O,y:O,width:D,height:D,rx:E,ry:E,fill:"white"})))}u(y,"SecondaryIconMask"),y.displayName="SecondaryIconMask";function I(f){let{size:g=r,className:M,workspaceId:A,externalWorkspaceHostId:O}=f;const D=(0,t.useMemo)(()=>`scw-icon-mask-${(0,o.r9)()}`,[]),E=(0,t.useMemo)(()=>({mask:`url(#${D}) exclude, linear-gradient(#000 0 0)`}),[D]),C=Math.floor(g*m),S=Math.floor(g*h),b=(0,t.useMemo)(()=>({marginRight:`-${S}px`,marginBottom:`-${S}px`}),[S]);return t.createElement("span",{style:v,className:(0,n.A)(M,d().container)},t.createElement("span",{style:E,className:d().primaryIcon},t.createElement(c.A,{id:A,size:g,allowTeamInitials:!0})),t.createElement("span",{style:b,className:d().secondaryIcon},t.createElement(c.A,{id:O,size:C,allowTeamInitials:!0})),t.createElement(y,{id:D,size:C,spacing:S}))}u(I,"ExternalWorkspaceIconStack"),I.displayName="ExternalWorkspaceIconStack";function T(f){let{size:g=r,className:M,workspaceId:A}=f;const O=(0,s.d4)(E=>(0,l._J)(E,A)),D=(0,s.d4)(E=>(0,i.m)(E,O));return(0,a.N)(O)?D?t.createElement(I,{workspaceId:A,externalWorkspaceHostId:D,size:g,className:M}):t.createElement(c.A,{id:A,size:g,className:M,allowTeamInitials:!0}):null}u(T,"ExternalWorkspaceIcon"),T.displayName="ExternalWorkspaceIcon"},9399618736:(j,p,e)=>{"use strict";e.d(p,{AV:()=>l,Cu:()=>m,Gu:()=>i,g4:()=>d,qn:()=>_});var t=e(4423055085),n=e(796111729),s=e(6188550760);let a=1,c=1;const o=(0,n.Wo)({label:"HISTORY-NAVIGATION"}),i=u(()=>{c!==a&&(o.info("Incrementing the users current position in the history stack"),c+=1)},"onNavigateForward"),l=u(()=>{c!==1&&(o.info("Decrementing the users current position in the history stack"),c-=1)},"onNavigateBack"),_=u(()=>c===1,"isBackDisabled"),d=u(()=>c===a,"isForwardDisabled");function r(){o.info("Adding route to the history stack"),c+=1,a=c}u(r,"incrementHistoryLength");function m(v){let{shouldReplaceState:y,reason:I}=v;y||I!==s.GB&&r()}u(m,"maybeIncrementHistoryLength"),(0,t.ul)("history",{getHistoryLength:()=>a,getHistoryIndex:()=>c});const h={maybeIncrementHistoryLength:m}},5670315214:(j,p,e)=>{"use strict";e.d(p,{Hu:()=>h,OJ:()=>E,q8:()=>O,vU:()=>D,wZ:()=>C});var t=e(6249041335),n=e(735940183),s=e(4813703725),a=e(5597672932),c=e(462591818),o=e(6565762531),i=e(1223723593),l=e(6575028637),_=e(3677514771),d=e(6470070112),r=e(4181200404),m=e(6790819894);const h={video:"video",audio:"audio",profileFieldOptions:"profile_field_options"},v=new n.Ay("huddles"),y=u((S,b)=>({video:[...S&&S.video?S.video:[]],audio:[...!b&&S&&S.audio?S.audio:[]],profile_field_options:[]}),"getInnerCallsAppsFromTeamPref"),I=u(S=>{const b=S.reduce((W,N)=>(Object.entries(N).forEach(V=>{let[R,P]=V;(R==="video"||R==="audio")&&(W[R]=W[R]?[...W[R],...P]:[...P])}),W),{}),k={video:[],audio:[]};return Object.entries(b).forEach(W=>{let[N,V]=W;(N==="video"||N==="audio")&&(k[N]=V.filter((R,P,z)=>P===z.findIndex($=>$.id===R.id&&$.id!==void 0)))}),k},"combineCallApps"),T=u(S=>{const k=(0,_.FR)(S).map(N=>(0,a.x)(S,"calls_apps",N.id)).filter(r.b);return I(k)},"retrieveCallsAppsForUnifiedOrg"),f=u(S=>(0,l.ss)(S)?T(S):(0,a.x)(S,"calls_apps"),"retrieveCallsAppsFromPrefs"),g=u((S,b)=>{const k=f(S);if(b){var W;const N=k==null||(W=k.video)===null||W===void 0?void 0:W.findIndex(V=>V.id===c.rq);N>=0&&k.video.splice(N,1)}return k},"filterCallsAppsFromTeamPref"),M=(0,s.ik)((S,b)=>g(S,b),S=>y(S,!1)),A=(0,s.ik)((S,b)=>g(S,b),S=>y(S,!0)),O=u(function(S){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?A(S,!0):M(S,!0)},"getCallsAppsFromTeamPref"),D=(0,m.F)(O,d.pt,(S,b)=>{const k={},W=S&&S.video?S.video:[],N=S&&S.audio?S.audio:[],V=v.t("Start a huddle"),R=b?[{id:"A01",name:V,image:"/marketing/img/homepage/icons/huddle-icon.png"}]:[];return[...W,...N,...R].forEach(P=>{let z;P.id===c.rq?z={id:P.id,name:P.name,image:P.image}:["A5GE9BMQC","A649AA069","A5W4BRDNX","ARQS1U88Y","ARUFE7YMU"].findIndex($=>P.id===$)!==-1?z={id:P.id,name:P.name,image:"/marketing/img/homepage/icons/zoom-icon.png"}:z=P,k[z.id]=z}),k}),E=u(S=>{let{callsApp:b,memberPhoneNumber:k,hideVideoApps:W=!1}=S;const N=[];return b&&(!W&&b.video&&N.push(...b.video.map(V=>({...V,type:i.JG.Video}))),b.audio&&(0,o.A)((0,t.A)(k))&&N.push(...b.audio.map(V=>({...V,type:i.JG.Audio})))),N},"getCallAppList"),C=u(S=>{const b=g(S,!0),k=b&&b.video?b.video:[],W=b&&b.audio?b.audio:[];return[...k,...W]},"getFlattenTeamPrefCallsApps")},4980558152:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(3134334389),n=e(4103274853),s=e(7715417323),a=e(3245843483),c=e(8737667238),o=e(3514831633),i=e(3753517560),l=e(4776067035);function _(){return _=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},_.apply(this,arguments)}u(_,"_extends");let d=u(class extends t.Component{onDesktopContextMenu(h){const{getTemplate:v,overrideDefaultMenu:y}=this.props,I=u(M=>({...M,id:(0,c.A)(),submenu:M.submenu&&M.submenu.map(I)}),"addIdsToItem"),T=v?v().map(I):[];if(!T.length)return;const{x:f,y:g}=(0,n.A)(this.getCoordinatesForContextMenu(h),M=>(0,a.xhB)()*M);(0,a.O0f)(T,{x:f,y:g,overrideDefaultMenu:y}),this.props.onClick&&this.props.onClick()}getCoordinatesForContextMenu(h){if(!this.props.hasKeyboardFocus||!h)return{};const{left:v,top:y,width:I,height:T}=h.currentTarget.getBoundingClientRect(),f=v+I/2,g=y+T/2;return{x:f,y:g}}renderMenuFromTemplate(h){const{getTemplate:v,width:y,showSlackKitContextMenuOnDesktop:I,menuAriaLabel:T}=this.props;function f(M){return M.replace(/&([\w&])/g,(A,O)=>O)}u(f,"removeKeyboardAccelerators");const g=v?v().map(M=>!M.label||I?M:{...M,label:f(M.label)}):[];return g.length?t.createElement(o.a,_({"aria-label":T,width:y},h,{template:g,isContextMenu:!0,stripTerminalSeparators:!0})):null}render(){if((0,a.g9M)()&&!this.props.showSlackKitContextMenuOnDesktop)return(0,l.A)(this.props.children,{onContextMenu:this.onDesktopContextMenu});const{forceOpen:h,onClick:v,onClose:y,isDisabled:I,renderMenu:T,preventScroll:f}=this.props;return this.props.desktopAppOnly?(0,l.A)(this.props.children):t.createElement(o.cQ,{isContextMenu:!0,position:"right-bottom",tryOppositePosition:!0,forceOpen:h,shouldFade:!1,renderMenu:T||this.renderMenuFromTemplate,onClick:v,onClose:y,isDisabled:I,preventScroll:f},this.props.children)}constructor(h){super(h),this.onDesktopContextMenu=this.onDesktopContextMenu.bind(this),this.renderMenuFromTemplate=this.renderMenuFromTemplate.bind(this)}},"ContextMenuTrigger");d.displayName="ContextMenuTrigger",d.defaultProps={overrideDefaultMenu:!1,desktopAppOnly:!0,hasKeyboardFocus:!1,showSlackKitContextMenuOnDesktop:!1,onClick:s.A,onClose:s.A,isDisabled:!1,forceOpen:!1,stripTerminalSeparators:!1};const r=(0,i.A)(d)},2837660778:(j,p,e)=>{"use strict";e.d(p,{$g:()=>M,Mo:()=>I,rp:()=>g});var t=e(6217320234),n=e(7823346015),s=e(3385422400),a=e(9829579108),c=e(735940183),o=e(3707193570),i=e(6839188756),l=e(9950739645),_=e(6536982570),d=e(8276911661),r=e(3677514771),m=e(8847766420),h=e(241752795),v=e(5962670951);const y=new c.Ay("create_channel_modal"),I=(0,a.Ay)(A=>{const O=(0,d.cA)(A),D=(0,_.HI)(O),E=(0,r.H7)(A);if(!E)return[];const C=(0,m.VO)(A)||[],S=[E.id,...D,...C],b=[...new Set(S)].filter(k=>!(0,o.JV)(k)).map(k=>(0,r._J)(A,k)).filter(k=>!!k&&!(0,i.Zx)(k));return(0,t.A)(b,k=>(0,i.F1)(k))});I.meta={name:"createSelector",key:"createSelectorgetAllInvitableWorkspaces",description:A=>{const O=(0,d.cA)(A),D=(0,_.HI)(O),E=(0,r.H7)(A);if(!E)return[];const C=(0,m.VO)(A)||[],S=[E.id,...D,...C],b=[...new Set(S)].filter(k=>!(0,o.JV)(k)).map(k=>(0,r._J)(A,k)).filter(k=>!!k&&!(0,i.Zx)(k));return(0,t.A)(b,k=>(0,i.F1)(k))}};const T=u((A,O)=>{const D=O==null?void 0:O.map(E=>E.id);return A.map(E=>{var C,S;return{label:(0,i.F1)(E),value:E,optgroup:E.enterprise_name,key:E.id,isDisabled:!!(D!==void 0&&D.includes(E.id)),displayReason:(S=(C=O==null?void 0:O.find(b=>b.id===E.id))===null||C===void 0?void 0:C.displayReason)!==null&&S!==void 0?S:""}})},"mapWorkspacesToSelectOptionItems"),f=u((A,O)=>{let{ineligibleWorkspaces:D,excludeExternalWorkspaces:E}=O;const[C,S]=(0,n.A)(A,k=>(0,l.N)(k)),b={value:void 0,label:"",type:"divider"};return[...T(S,D),...!E&&C.length>0?[b,...T(C,D)]:[]]},"mapInvitableWorkspacesToSelectOptions"),g=(0,a.Ay)(A=>{const O=(0,h.y5)(A),D=(0,v.S)(A),E=I(A),C=E.filter(S=>!O.includes(S.id)&&!D.includes(S.id)).map(S=>({id:S.id,displayReason:y.t("You don\u2019t have access to this")}));return f(E,{ineligibleWorkspaces:C})});g.meta={name:"createSelector",key:"createSelectorgetAllInvitableWorkspaceSelectOptions",description:A=>{const O=(0,h.y5)(A),D=(0,v.S)(A),E=I(A),C=E.filter(S=>!O.includes(S.id)&&!D.includes(S.id)).map(S=>({id:S.id,displayReason:y.t("You don\u2019t have access to this")}));return f(E,{ineligibleWorkspaces:C})}};const M=(0,s.Mz)(I,A=>A.length>1)},4212246463:(j,p,e)=>{"use strict";e.d(p,{D:()=>Vt,A:()=>pn});var t=e(3134334389),n=e(8300007136),s=e(6023831373),a=e(5255740490),c=e(9003400431),o=e(980293773),i=e(3214129289);function l(et){return et&&et.id}u(l,"getEmojiCollectionId");var _=e(370406050);function d(et){return et&&et.author}u(d,"getEmojiCollectionAuthor");var r=e(6045879501);function m(et){return et&&et.localEmoji}u(m,"getEmojiCollectionLocalEmoji");var h=e(735940183),v=e(4761125736),y=e(9113979368),I=e(2101927269),T=e(2141441167),f=e(6217320234),g=e(3783303734),M=e(4978843660),A=e(3297051565),O=e.n(A),D=e(3004085654),E=e(7564917982);function C(et){return et&&et.date_create}u(C,"getEmojiCollectionDateCreate");var S=e(5071545805),b=e(2047021170),k=e(387484329),W=e(8840779375),N=e(5331686899),V=e(1610251172),R=e(7420598276),P=e(2036354333);const z=new h.Ay("custom_emoji_list"),$="emoji_packs_clicked_collection_cta",x=u(et=>{let{id:At,name:Rt,author:Ft,emoji:$t,installed:vn,onClick:Rn}=et;const hn=(0,n.wA)(),gn=(0,s.d4)(Yt=>(0,b.ty)(Yt,$)),Cn=(0,s.d4)(D.fl),fn=(0,s.d4)(D._J);if(!$t)return null;const ke=l(fn)===At&&Cn&&!gn;function je(){ke&&hn((0,k.AZ)({pref:$,value:!0})),Rn()}u(je,"handleOnClick");const Be=(0,W.A)($t,(Yt,tn)=>({name:tn,url:Yt})),st=(0,M.A)(Be,4),St=z.t("by {author}",{author:Ft});return t.createElement(P.A,{className:"p-emoji_pack_card p-emoji_pack_card--clickable",onClick:je},t.createElement("div",{className:"display_flex align_items_center margin_bottom_100"},t.createElement("div",{className:"flex_one"},t.createElement("div",{className:"p-emoji_pack_card__header"},Rt,ke&&t.createElement("span",{className:"margin_left_25"},t.createElement(R.A,null,z.t("NEW")))),t.createElement("div",{className:"p-emoji_pack_card__subheader"},St)),vn&&!ke&&t.createElement("div",{className:"flex_none"},t.createElement(V.A,{size:"inherit",type:"circle-checkbox-checked",className:"p-emoji_pack_card__checkmark"}))),t.createElement("div",{className:"p-emoji_pack_card_rows"},st.map(Yt=>t.createElement("div",{key:Yt.map(tn=>`${tn.name}-card-`).join(),className:"p-emoji_pack_card__row"},Yt.map(tn=>t.createElement(N.Ay,{key:`emoji-pack-${tn.name}`,showTooltip:!1,text:`:${tn.name}:`,url:tn.url,emojiSize:N.lw.LARGE})),[...new Array(4-Yt.length)].map((tn,at)=>`emoji-pack-spacer-${at}`).map(tn=>t.createElement("div",{key:tn,className:"p-emoji_pack_card__spacer"}))))))},"EmojiPackCard");x.displayName="EmojiPackCard";const Y=x,ne=new h.Ay("custom_emoji_list"),re=u(()=>{const et=ne.t("STAY TUNED"),At=ne.t("More emoji packs are on the way");return t.createElement("div",{className:"p-emoji_pack_card p-emoji_pack_coming_soon"},t.createElement(R.A,{className:"p-emoji_pack_coming_soon__pill"},et),t.createElement("div",{className:"p-emoji_pack_coming_soon__text"},At),t.createElement("div",{className:"p-emoji_pack_coming_soon__illustrations"},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"198",height:"30",viewBox:"0 0 198 30",fill:"none"},t.createElement("g",{opacity:"0.8"},t.createElement("g",{clipPath:"url(#clip0)"},t.createElement("path",{d:"M22.7 30C35.2 30 45.3 19.9 45.3 7.3 45.3-5.2 35.2-15.3 22.7-15.3 10.1-15.3 0-5.2 0 7.3 0 19.9 10.1 30 22.7 30Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M24 20C25.5 20 26.7 18.5 26.7 16.7 26.7 14.8 25.5 13.3 24 13.3 22.5 13.3 21.3 14.8 21.3 16.7 21.3 18.5 22.5 20 24 20Z",fill:"#664500"}),t.createElement("path",{d:"M10.8 10.5C10.6 10.5 10.3 10.4 10.1 10.3 9.5 9.9 9.3 9.1 9.7 8.5 10.9 6.5 14.6 3.2 19.9 4.5 20.7 4.7 21.1 5.4 20.9 6.1 20.7 6.8 20 7.3 19.3 7.1 14.5 5.9 12 9.8 11.9 9.9 11.7 10.3 11.3 10.5 10.8 10.5V10.5ZM26.8 5.5C26.4 5.5 26 5.4 25.7 5 25.3 4.5 25.4 3.6 25.9 3.2 30.2-0.3 34.9 1.1 36.9 2.3 37.5 2.7 37.7 3.5 37.3 4.1 36.9 4.8 36.1 4.9 35.5 4.6 35.3 4.4 31.4 2.1 27.6 5.2 27.4 5.4 27.1 5.5 26.8 5.5Z",fill:"#664500"}),t.createElement("path",{d:"M17.8 23.7C17.7 23.7 17.6 23.7 17.5 23.7 17 23.5 16.7 23 16.8 22.4 17.4 20.4 17.2 18.4 16.2 17 15.5 16 14.6 15.5 13.6 15.4 13 15.4 12.6 14.9 12.7 14.3 12.7 13.8 13.2 13.3 13.7 13.4 15.3 13.5 16.8 14.4 17.8 15.8 19.2 17.7 19.5 20.3 18.8 23 18.6 23.4 18.2 23.7 17.8 23.7ZM32.5 19.6C32.3 19.6 32.1 19.6 32 19.5 30.4 18.4 29.5 16.6 29.6 14.5 29.6 12.3 30.7 10.3 32.2 9.4 32.7 9.1 33.3 9.2 33.6 9.7 33.9 10.2 33.7 10.8 33.3 11.1 32.3 11.7 31.6 13.1 31.6 14.6 31.5 16 32.1 17.1 33.1 17.8 33.5 18.1 33.6 18.7 33.3 19.2 33.2 19.5 32.8 19.6 32.5 19.6V19.6Z",fill:"#E2A62D"}),t.createElement("path",{d:"M22.9-14.4C22.8-14.4 22.8-14.5 22.7-14.5 22.7-14.5 1.4-18.5 0.5-17.7 -0.4-16.9 1 4.7 1 4.7 1 4.8 1 4.9 1.1 4.9 1.9 5.8 7.4 2.3 13.4-3.1 19.5-8.4 23.7-13.5 22.9-14.4V-14.4Z",fill:"#DD2E44"}),t.createElement("path",{d:"M0.5-17.6C0.4-17.6 0.4-17.5 0.4-17.5 0.6-15.6 2.7-0.6 4 4.1 5.9 3 7.8 1.6 10.1-0.2 8.2-3.8 1.5-17.8 0.5-17.6Z",fill:"#EA596E"}),t.createElement("path",{d:"M39.9 21L25.8 19.2C24.3 19.1 21.6 19.1 21.8 16.7 21.9 14.5 24.5 14.9 26.4 15.2L40.6 17.5 39.9 21V21Z",fill:"#3B88C3"}),t.createElement("path",{d:"M40.6 17.5L34.9 16.6C34.3 16.4 33.7 17.4 33.7 18.5 33.6 19.6 34 20.2 34.6 20.3L40.2 21 40.6 17.5V17.5Z",fill:"#88C9F9"}),t.createElement("path",{d:"M46.6 17.1L43.1 20.3 36.8 13.5 40.3 10.3C42.1 8.7 45 8.8 46.6 10.6L46.8 10.8C48.5 12.6 48.4 15.5 46.6 17.1Z",fill:"#3B88C3"}),t.createElement("path",{d:"M43.1 20.3C44.6 19 44.4 16.3 42.7 14.4 40.9 12.6 38.3 12.2 36.8 13.5 35.3 14.9 35.5 17.6 37.2 19.4 38.9 21.3 41.6 21.7 43.1 20.3Z",fill:"#88C9F9"}),t.createElement("path",{d:"M41.8 19C42.6 18.3 42.3 16.8 41.3 15.7 40.3 14.6 38.8 14.2 38.1 14.9 37.3 15.6 37.5 17.1 38.6 18.2 39.6 19.3 41.1 19.7 41.8 19Z",fill:"#269"}),t.createElement("path",{d:"M3.3 28.7C4.4 28.7 5.3 27.8 5.3 26.7 5.3 25.6 4.4 24.7 3.3 24.7 2.2 24.7 1.3 25.6 1.3 26.7 1.3 27.8 2.2 28.7 3.3 28.7Z",fill:"#55ACEE"}),t.createElement("path",{d:"M6.5 21L3.4 13.5 0.5 21.6 6.5 21ZM34.7-11.3L29.3-10 30.7-15.3 34.7-11.3Z",fill:"#EA596E"}))),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M123 6C123 19.3 112.3 30 99 30 85.7 30 75 19.3 75 6 75-7.3 85.7-18 99-18 112.3-18 123-7.3 123 6Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M99 11.3C94.2 11.3 91 10.8 87 10 86.1 9.8 84.3 10 84.3 12.7 84.3 18 90.5 24.7 99 24.7 107.5 24.7 113.7 18 113.7 12.7 113.7 10 111.9 9.8 111 10 107 10.8 103.8 11.3 99 11.3Z",fill:"#664500"}),t.createElement("path",{d:"M87 12.7C87 12.7 91 14 99 14 107 14 111 12.7 111 12.7 111 12.7 108.3 18 99 18 89.7 18 87 12.7 87 12.7Z",fill:"white"}),t.createElement("path",{d:"M115.8 6.3C115.6 6.2 113.2 4.4 109.6 3.1 109.6 3 109.7 2.8 109.7 2.7 109.7 2.2 109.5 1.7 109.2 1.4 111.6 0.7 113.6 0.7 113.7 0.7 114.4 0.7 115 0.1 115-0.7 115-1.4 114.4-2 113.7-2 113.4-2 106.4-1.9 102.1 2.4 101.7 2.8 101.6 3.3 101.8 3.8 102 4.3 102.5 4.7 103 4.7 109.1 4.7 114.2 8.4 114.2 8.4 114.4 8.6 114.7 8.7 115 8.7 115.4 8.7 115.8 8.5 116.1 8.1 116.5 7.5 116.4 6.7 115.8 6.3V6.3ZM95.9 2.4C91.6-1.9 84.6-2 84.3-2 83.6-2 83-1.4 83-0.7 83 0.1 83.6 0.7 84.3 0.7 84.4 0.7 86.4 0.7 88.8 1.4 88.5 1.7 88.3 2.2 88.3 2.7 88.3 2.8 88.4 3 88.4 3.1 84.8 4.4 82.4 6.2 82.2 6.3 81.6 6.7 81.5 7.5 81.9 8.1 82.2 8.5 82.6 8.7 83 8.7 83.3 8.7 83.6 8.6 83.8 8.4 83.8 8.4 88.8 4.7 95 4.7 95.5 4.7 96 4.3 96.2 3.8 96.4 3.3 96.3 2.8 95.9 2.4V2.4Z",fill:"#664500"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M198 6C198 19.3 187.3 30 174 30 160.7 30 150 19.3 150 6 150-7.3 160.7-18 174-18 187.3-18 198-7.3 198 6Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M188.7 19.3C192.3 19.3 195.3 16.3 195.3 12.7 195.3 9 192.3 6 188.7 6 185 6 182 9 182 12.7 182 16.3 185 19.3 188.7 19.3Z",fill:"#FF7892"}),t.createElement("path",{d:"M159.3 19.3C163 19.3 166 16.3 166 12.7 166 9 163 6 159.3 6 155.7 6 152.7 9 152.7 12.7 152.7 16.3 155.7 19.3 159.3 19.3Z",fill:"#FF7892"}),t.createElement("path",{d:"M182.7 11.3C186.7 11.3 190 8.1 190 4 190-0.1 186.7-3.3 182.7-3.3 178.6-3.3 175.3-0.1 175.3 4 175.3 8.1 178.6 11.3 182.7 11.3Z",fill:"#F5F8FA"}),t.createElement("path",{d:"M165.3 11.3C169.4 11.3 172.7 8.1 172.7 4 172.7-0.1 169.4-3.3 165.3-3.3 161.3-3.3 158-0.1 158 4 158 8.1 161.3 11.3 165.3 11.3Z",fill:"#F5F8FA"}),t.createElement("path",{d:"M165.3 7.3C167.2 7.3 168.7 5.8 168.7 4 168.7 2.2 167.2 0.7 165.3 0.7 163.5 0.7 162 2.2 162 4 162 5.8 163.5 7.3 165.3 7.3Z",fill:"#664500"}),t.createElement("path",{d:"M182.7 7.3C184.5 7.3 186 5.8 186 4 186 2.2 184.5 0.7 182.7 0.7 180.8 0.7 179.3 2.2 179.3 4 179.3 5.8 180.8 7.3 182.7 7.3Z",fill:"#664500"}),t.createElement("path",{d:"M179.3 22H168.7C167.9 22 167.3 21.4 167.3 20.7 167.3 19.9 167.9 19.3 168.7 19.3H179.3C180.1 19.3 180.7 19.9 180.7 20.7 180.7 21.4 180.1 22 179.3 22ZM190-3.3C189.6-3.3 189.2-3.5 188.9-3.9 185.4-8.6 180.9-8.7 180.7-8.7 179.9-8.7 179.3-9.3 179.3-10 179.3-10.7 179.9-11.3 180.7-11.3 180.9-11.3 186.7-11.3 191.1-5.5 191.5-4.9 191.4-4 190.8-3.6 190.6-3.4 190.3-3.3 190-3.3V-3.3ZM158-3.3C157.7-3.3 157.4-3.4 157.2-3.6 156.6-4 156.5-4.9 156.9-5.5 161.3-11.3 167.1-11.3 167.3-11.3 168.1-11.3 168.7-10.7 168.7-10 168.7-9.3 168.1-8.7 167.3-8.7 167.1-8.7 162.6-8.6 159.1-3.9 158.8-3.5 158.4-3.3 158-3.3Z",fill:"#664500"})),t.createElement("defs",null,t.createElement("clipPath",null,t.createElement("rect",{y:"-18",width:"48",height:"48",fill:"white"})))),t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"198",height:"30",viewBox:"0 0 198 30",fill:"none"},t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M48 24C48 37.3 37.3 48 24 48 10.7 48 0 37.3 0 24 0 10.7 10.7 0 24 0 37.3 0 48 10.7 48 24Z",fill:"#DA2F47"}),t.createElement("path",{d:"M34 39.8C33.9 39.6 32.4 34 24 34 15.6 34 14.1 39.6 14 39.8 13.9 40.1 14.1 40.4 14.3 40.6 14.6 40.7 14.9 40.7 15.1 40.5 15.2 40.4 17.7 38 24 38 30.3 38 32.8 40.4 32.9 40.5 33 40.6 33.2 40.7 33.3 40.7 33.4 40.7 33.6 40.6 33.7 40.6 33.9 40.4 34.1 40.1 34 39.8V39.8ZM20.9 23.1C16.6 18.7 9.6 18.7 9.3 18.7 8.6 18.7 8 19.3 8 20 8 20.7 8.6 21.3 9.3 21.3 9.4 21.3 11.9 21.4 14.6 22.3 13.9 23.2 13.3 24.5 13.3 26 13.3 28.6 14.8 30.7 16.7 30.7 18.5 30.7 20 28.6 20 26 20 25.8 20 25.5 20 25.3 20 25.3 20 25.3 20 25.3 20.3 25.3 20.7 25.2 20.9 24.9 21.5 24.4 21.5 23.6 20.9 23.1V23.1ZM38.7 18.7C38.4 18.7 31.4 18.7 27.1 23.1 26.5 23.6 26.5 24.4 27.1 24.9 27.3 25.2 27.7 25.3 28 25.3 28 25.3 28 25.3 28 25.3 28 25.5 28 25.8 28 26 28 28.6 29.5 30.7 31.3 30.7 33.2 30.7 34.7 28.6 34.7 26 34.7 24.5 34.1 23.2 33.4 22.3 36.1 21.4 38.6 21.3 38.7 21.3 39.4 21.3 40 20.7 40 20 40 19.3 39.4 18.7 38.7 18.7V18.7Z",fill:"#292F33"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M198 24C198 37.3 187.3 48 174 48 160.7 48 150 37.3 150 24 150 10.7 160.7 0 174 0 187.3 0 198 10.7 198 24Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M174 28C169.2 28 166 27.4 162 26.7 161.1 26.5 159.3 26.7 159.3 29.3 159.3 34.7 165.5 41.3 174 41.3 182.5 41.3 188.7 34.7 188.7 29.3 188.7 26.7 186.9 26.5 186 26.7 182 27.4 178.8 28 174 28Z",fill:"#664500"}),t.createElement("path",{d:"M162 29.3C162 29.3 166 30.7 174 30.7 182 30.7 186 29.3 186 29.3 186 29.3 183.3 34.7 174 34.7 164.7 34.7 162 29.3 162 29.3Z",fill:"white"}),t.createElement("path",{d:"M170.9 5.9L164.9 7 161.7 1.3C161.4 0.7 160.7 0.3 160 0.4 159.3 0.6 158.7 1.1 158.6 1.8L157.6 8.2 151.6 9.3C150.9 9.4 150.3 10 150.2 10.7 150.1 11.4 150.5 12.1 151.2 12.4L156.6 15 155.6 21.4C155.5 22.1 155.8 22.9 156.5 23.2 156.7 23.3 157 23.4 157.2 23.4 157.7 23.4 158.1 23.2 158.4 22.9L163.1 18.1 169.1 21C169.8 21.3 170.6 21.1 171.1 20.6 171.5 20.1 171.6 19.3 171.3 18.7L168.2 13 172.4 8.7C172.9 8.2 173 7.4 172.7 6.8 172.3 6.1 171.6 5.8 170.9 5.9V5.9ZM177.1 5.9L183.1 7 186.3 1.3C186.6 0.7 187.3 0.3 188 0.4 188.7 0.6 189.3 1.1 189.4 1.8L190.4 8.2 196.4 9.3C197.1 9.4 197.7 10 197.8 10.7 197.9 11.4 197.5 12.1 196.8 12.4L191.4 15 192.4 21.4C192.5 22.1 192.2 22.9 191.5 23.2 191.3 23.3 191 23.4 190.8 23.4 190.3 23.4 189.9 23.2 189.6 22.9L184.9 18.1 178.9 21C178.2 21.3 177.4 21.1 176.9 20.6 176.5 20.1 176.4 19.3 176.7 18.7L179.8 13 175.6 8.7C175.1 8.2 175 7.4 175.3 6.8 175.7 6.1 176.4 5.8 177.1 5.9V5.9Z",fill:"#E95F28"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M99 48C112.3 48 123 37.3 123 24 123 10.7 112.3 0 99 0 85.7 0 75 10.7 75 24 75 37.3 85.7 48 99 48Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M98.1 22.1C97.8 22 97.5 22 97.3 22.1 97.3 22.1 95.6 23.3 92.3 23.3 89.1 23.3 87.4 22.1 87.4 22.1 87.2 22 86.8 22 86.6 22.1 86.3 22.3 86.3 22.7 86.4 22.9 86.5 23.1 88.4 27.3 92.3 27.3 96.3 27.3 98.2 23.1 98.3 22.9 98.4 22.7 98.3 22.3 98.1 22.1V22.1ZM111.4 22.1C111.2 22 110.8 22 110.6 22.1 110.6 22.1 108.9 23.3 105.7 23.3 102.4 23.3 100.7 22.1 100.7 22.1 100.5 22 100.2 22 99.9 22.1 99.7 22.3 99.6 22.7 99.7 22.9 99.8 23.1 101.7 27.3 105.7 27.3 109.6 27.3 111.5 23.1 111.6 22.9 111.7 22.7 111.7 22.3 111.4 22.1V22.1Z",fill:"#664500"}),t.createElement("path",{d:"M120.9 16.7C120.9 16.7 120.9 16.6 120.9 16.5 120.9 15.5 120.2 15 119.3 15H114.5L120.2 7C120.5 6.6 120.6 6.4 120.6 5.9 120.6 4.9 119.8 4.8 119.4 4.8H112.3L112.3 3.8C112.3 3.8 110.4 5 110.3 5 110.1 5.1 109.6 5.5 109.6 6.3 109.6 7.3 110.3 7.9 111.2 7.9H115.4L109.7 15.9C109.6 16.1 109.4 16.5 109.4 16.9 109.4 17.7 110.1 18.1 110.9 18.1H119.3C119.6 18.1 120 18 120.2 17.9L122.2 16.7H120.9V16.7Z",fill:"#FFAC33"}),t.createElement("path",{d:"M117.4 6.8H113.2C112.3 6.8 111.5 6.2 111.5 5.2 111.5 4.2 112.3 3.6 113.2 3.6H121.4C121.7 3.6 122.6 3.8 122.6 4.7 122.6 5.2 122.5 5.4 122.2 5.8L116.5 13.8H121.3C122.2 13.8 122.9 14.4 122.9 15.4 122.9 16.4 122.2 17 121.3 17H112.8C112 17 111.4 16.6 111.4 15.7 111.4 15.3 111.6 15 111.7 14.8L117.4 6.8V6.8Z",fill:"#2A6797"}),t.createElement("path",{d:"M108.2 10C108.2 9.9 108.2 9.9 108.2 9.9 108.2 9.1 107.7 8.7 107 8.7H103.4L107.7 2.7C107.9 2.4 108 2.2 108 1.9 108 1.1 107.3 1 107.1 1H101.7L101.7 0.3C101.7 0.3 100.3 1.2 100.2 1.2 100.1 1.3 99.7 1.6 99.7 2.2 99.7 3 100.2 3.4 100.9 3.4H104.1L99.8 9.4C99.7 9.5 99.6 9.8 99.6 10.1 99.6 10.7 100.1 11 100.7 11H107C107.2 11 107.5 11 107.7 10.9L109.2 10H108.2V10Z",fill:"#FFAC33"}),t.createElement("path",{d:"M105.5 2.5H102.4C101.7 2.5 101.2 2.1 101.2 1.4 101.2 0.6 101.7 0.2 102.4 0.2H108.5C108.8 0.2 109.4 0.3 109.4 1 109.4 1.4 109.3 1.5 109.1 1.8L104.9 7.8H108.4C109.1 7.8 109.7 8.2 109.7 9 109.7 9.7 109.1 10.2 108.4 10.2H102.1C101.5 10.2 101 9.9 101 9.3 101 9 101.2 8.7 101.3 8.5L105.5 2.5V2.5Z",fill:"#2A6797"}),t.createElement("path",{d:"M98.7 13.9C98.7 13.9 98.7 13.8 98.7 13.8 98.7 13.2 98.2 12.8 97.6 12.8H94.6L98.2 7.7C98.4 7.4 98.5 7.3 98.5 7 98.5 6.3 97.9 6.2 97.7 6.2H93.1L93.1 5.7 91.8 6.4C91.7 6.5 91.4 6.7 91.4 7.3 91.4 7.9 91.9 8.3 92.4 8.3H95.1L91.5 13.4C91.4 13.5 91.3 13.8 91.3 14 91.3 14.6 91.7 14.8 92.2 14.8H97.6C97.8 14.8 98.1 14.7 98.2 14.7L99.5 13.9H98.7Z",fill:"#FFAC33"}),t.createElement("path",{d:"M96.4 7.5H93.7C93.1 7.5 92.6 7.2 92.6 6.5 92.6 5.9 93.1 5.5 93.7 5.5H99C99.2 5.5 99.7 5.6 99.7 6.2 99.7 6.5 99.7 6.7 99.5 6.9L95.8 12H98.9C99.5 12 99.9 12.4 99.9 13.1 99.9 13.7 99.5 14.1 98.9 14.1H93.5C93 14.1 92.5 13.8 92.5 13.3 92.5 13 92.7 12.8 92.7 12.7L96.4 7.5V7.5Z",fill:"#2A6797"})))))},"EmojiPackComingSoon");re.displayName="EmojiPackComingSoon";const _e=re,G=new h.Ay("custom_emoji_list");function ge(et){let{row:At,className:Rt,onPackClick:Ft}=et;return t.createElement("div",{key:At.map($t=>`${l($t)}-row`).join(),className:Rt},At.map($t=>{if($t.type==="coming_soon")return t.createElement(_e,{key:"emoji-pack-coming-soon"});if($t.type==="spacer")return t.createElement("div",{key:"emoji-pack-spacer",className:"p-emoji_pack__spacer"});const vn=(0,S.j)($t);return t.createElement(Y,{key:`emoji-pack-${l($t)}`,installed:vn,id:l($t)||void 0,name:(0,_.M)($t),author:d($t),emoji:(0,r.H)($t),onClick:()=>Ft($t,{installed:vn})})}))}u(ge,"Row"),ge.displayName="Row",ge.propTypes={row:O().arrayOf(O().object),className:O().string,onPackClick:O().func.isRequired},ge.defaultProps={row:[],className:void 0};function oe(et){let{orgName:At,onPackClick:Rt}=et;const Ft=(0,n.wA)(),$t=(0,s.d4)(D.uI);if((0,t.useEffect)(()=>{Ft((0,E.H)({reason:"emojiPack:dialog"}))},[Ft]),(0,y.A)($t))return null;const vn=(0,I.A)($t,Cn=>(0,S.j)(Cn)).length;let Rn=(0,T.A)($t);Rn=(0,f.A)(Rn,Cn=>-1*C(Cn)),(0,g.A)($t)<2&&Rn.push({type:"coming_soon"}),Rn.length%2!==0&&Rn.push({type:"spacer"});const hn=(0,M.A)(Rn,2);let gn;return At?gn=G.rt("Emoji packs let you add a whole set new of emoji to every {orgName} workspace. They\u2019ll appear in the custom tab of the emoji picker (the one with the Slack icon!).",{orgName:t.createElement("b",null,At)}):gn=G.t("Emoji packs let you add a whole set new of emoji for your team. They\u2019ll appear in the custom tab of the emoji picker (the one with the Slack icon!)."),t.createElement(o.$m,null,t.createElement(o.qf,null,t.createElement("div",null,vn>0&&t.createElement("div",{className:"p-emoji_pack__header"},G.t("Added"),t.createElement("div",{className:"p-emoji_pack__pill"},vn)),t.createElement("div",{className:"p-emoji_pack__list"},hn.map(Cn=>t.createElement(ge,{key:Cn.map(fn=>`${l(fn)}-rp-`).join(),className:"p-emoji_pack__pack_row",row:Cn,onPackClick:Rt}))),t.createElement("div",{className:"p-emoji_pack__help"},gn))))}u(oe,"AddEmojiPackDialogContent"),oe.displayName="AddEmojiPackDialogContent";const me=oe;var ue=e(9391594207),ae=e(2003990933),he=e(7715417323),ce=e(9268023148),ee=e(2322735331),J=e(56548687),X=e(2219904496),F=e(1030162945),L=e(5733135148),K=e(581167618),B=e(6084388622),Q=e(1563996154),q=e(5795074931),le=e(5060694341),Te=e(3842747943),Ie=e(6244014364),De=e(9746734072),pe=e(7156798807),fe=e(1269227002),Z=e(5257368278),se=e(330221449),Ae=e(9829579108);const Ce=(0,Ae.Ay)(et=>!et||!et.customizeEmoji||!et.customizeEmoji.customEmojiData||!et.customizeEmoji.customEmojiData.length?[]:et.customizeEmoji.customEmojiData);Ce.meta={name:"createSelector",key:"createSelectorgetCustomEmojiData",description:et=>!et||!et.customizeEmoji||!et.customizeEmoji.customEmojiData||!et.customizeEmoji.customEmojiData.length?[]:et.customizeEmoji.customEmojiData};const Le=(0,Ae.Ay)(et=>et&&et.customizeEmoji&&et.customizeEmoji.customEmojiTotalCount?et.customizeEmoji.customEmojiTotalCount:0);Le.meta={name:"createSelector",key:"createSelectorgetCustomEmojiTotalCount",description:et=>et&&et.customizeEmoji&&et.customizeEmoji.customEmojiTotalCount?et.customizeEmoji.customEmojiTotalCount:0};const Ue=(0,Ae.Ay)(et=>et&&et.customizeEmoji&&et.customizeEmoji.currentPage?et.customizeEmoji.currentPage:0);Ue.meta={name:"createSelector",key:"createSelectorgetLastPageRetrieved",description:et=>et&&et.customizeEmoji&&et.customizeEmoji.currentPage?et.customizeEmoji.currentPage:0};const Pe=(0,Ae.Ay)(et=>et&&et.customizeEmoji&&et.customizeEmoji.totalPages?et.customizeEmoji.totalPages:0);Pe.meta={name:"createSelector",key:"createSelectorgetTotalPages",description:et=>et&&et.customizeEmoji&&et.customizeEmoji.totalPages?et.customizeEmoji.totalPages:0};const He=(0,Ae.Ay)(et=>et&&et.customizeEmoji&&et.customizeEmoji.isLoadingNewPage?et.customizeEmoji.isLoadingNewPage:!1);He.meta={name:"createSelector",key:"createSelectorgetIsLoadingNewPage",description:et=>et&&et.customizeEmoji&&et.customizeEmoji.isLoadingNewPage?et.customizeEmoji.isLoadingNewPage:!1};const Qe=(0,Ae.Ay)(et=>et&&et.customizeEmoji&&et.customizeEmoji.isLoadingNewSearchQuery?et.customizeEmoji.isLoadingNewSearchQuery:!1);Qe.meta={name:"createSelector",key:"createSelectorgetIsLoadingNewSearchQuery",description:et=>et&&et.customizeEmoji&&et.customizeEmoji.isLoadingNewSearchQuery?et.customizeEmoji.isLoadingNewSearchQuery:!1};const lt=(0,Ae.Ay)(et=>et&&et.customizeEmoji&&et.customizeEmoji.deletedEmojiList?et.customizeEmoji.deletedEmojiList:[]);lt.meta={name:"createSelector",key:"createSelectorgetDeletedEmojiList",description:et=>et&&et.customizeEmoji&&et.customizeEmoji.deletedEmojiList?et.customizeEmoji.deletedEmojiList:[]};const qe=(0,Ae.Ay)(et=>et&&et.customizeEmoji&&et.customizeEmoji.disabledEmoji?et.customizeEmoji.disabledEmoji:{});qe.meta={name:"createSelector",key:"createSelectorgetDisabledEmoji",description:et=>et&&et.customizeEmoji&&et.customizeEmoji.disabledEmoji?et.customizeEmoji.disabledEmoji:{}};const ct=(0,Ae.Ay)(et=>et&&et.customizeEmoji&&et.customizeEmoji.sortDir?et.customizeEmoji.sortDir:"asc");ct.meta={name:"createSelector",key:"createSelectorgetSortDirection",description:et=>et&&et.customizeEmoji&&et.customizeEmoji.sortDir?et.customizeEmoji.sortDir:"asc"};const tt=(0,Ae.Ay)(et=>et&&et.customizeEmoji&&et.customizeEmoji.sortBy?et.customizeEmoji.sortBy:"name");tt.meta={name:"createSelector",key:"createSelectorgetSortBy",description:et=>et&&et.customizeEmoji&&et.customizeEmoji.sortBy?et.customizeEmoji.sortBy:"name"};const it=(0,Z.A)("Load the next page of custom emoji data",function(et,At){let{count:Rt=100,queries:Ft,userIds:$t,reason:vn="customize-emoji-next-page"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Rn=At();et((0,se.en)(!0));const gn={page:Ue(Rn)+1,count:Rt,sort_by:tt(Rn),sort_dir:ct(Rn)};return Ft&&(gn.queries=JSON.stringify(Ft)),$t&&(gn.user_ids=JSON.stringify($t)),et((0,fe.apiCall)({method:"emoji.adminList",reason:vn,args:gn})).then(Cn=>{et((0,se.en)(!1));const fn=(0,De.A)(Cn.disabled_emoji)?(0,pe.A)(Cn.disabled_emoji,"name"):Cn.disabled_emoji;et((0,se.X8)({newCustomEmojiData:Cn.emoji,disabledEmoji:fn,customEmojiTotalCount:Cn.custom_emoji_total_count,customEmojiSearchCount:Cn.paging.total,currentPage:Cn.paging.page,totalPages:Cn.paging.pages}))}).catch(Cn=>{throw Cn})});it.meta={name:"createFetcher",key:"createFetcherfetchCustomEmojiNextPage",description:"Load the next page of custom emoji data"},it.propTypes={queries:O().array,userIds:O().array};const Ge=(0,Z.A)("Load custom emoji data with a new search query",function(et,At){let{queries:Rt,page:Ft=1,count:$t=100,sortBy:vn,sortDir:Rn,userIds:hn,reason:gn="customize-emoji-new-query"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};et((0,se.d$)(!0));const Cn={page:Ft,count:$t};return Rt&&(Cn.queries=JSON.stringify(Rt)),hn&&(Cn.user_ids=JSON.stringify(hn)),vn&&Rn&&(Cn.sort_by=vn,Cn.sort_dir=Rn),et((0,fe.apiCall)({method:"emoji.adminList",reason:gn,args:Cn})).then(fn=>{et((0,se.d$)(!1));const Oe=(0,De.A)(fn.disabled_emoji)?(0,pe.A)(fn.disabled_emoji,"name"):fn.disabled_emoji;et((0,se.Ot)({newCustomEmojiData:fn.emoji,disabledEmoji:Oe,customEmojiTotalCount:fn.custom_emoji_total_count,customEmojiSearchCount:fn.paging.total,currentPage:fn.paging.page,totalPages:fn.paging.pages,sortBy:vn,sortDir:Rn}))}).catch(fn=>{throw fn})});Ge.meta={name:"createFetcher",key:"createFetcherfetchResetCustomEmoji",description:"Load custom emoji data with a new search query"},Ge.propTypes={queries:O().array,page:O().number,count:O().number,sortBy:O().oneOf(["created","name"]),sortDir:O().oneOf(["asc","desc"]),userIds:O().array};const We=(0,Z.A)("Deletes the given custom emoji",function(et,At){let{emojiName:Rt,isPrimaryEmoji:Ft=!1,synonyms:$t=[],reason:vn="customize-emoji-remove"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return et((0,se.gx)({emojiName:Rt,isPrimaryEmoji:Ft,synonyms:$t})),et((0,fe.apiCall)({method:"emoji.remove",reason:vn,args:{name:Rt}})).then(Rn=>Rn).then(()=>{(0,J.e)({state:At()}).track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"delete",action:"remove",action_status:"success"}}})}).catch(Rn=>{throw(0,J.e)({state:At()}).track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"delete",action:"remove",action_status:"fail"}}}),Rn})});We.meta={name:"createFetcher",key:"createFetchersubmitRemoveCustomEmoji",description:"Deletes the given custom emoji"},We.propTypes={emojiName:O().string,isPrimaryEmoji:O().bool,synonyms:O().array};const xe=(0,Z.A)("Creates a new custom emoji or alias",function(et,At){let{mode:Rt,name:Ft,aliasFor:$t,image:vn,searchArgs:Rn={},reason:hn="customize-emoji-add"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return et((0,fe.apiCall)({method:"emoji.add",reason:hn,args:{mode:Rt,name:Ft,alias_for:$t,image:vn}})).then(gn=>gn).then(()=>{et(Ge(Rn))}).catch(gn=>{throw gn})});xe.meta={name:"createFetcher",key:"createFetchersubmitAddCustomEmoji",description:"Creates a new custom emoji or alias"},xe.propTypes={mode:O().string,name:O().string,aliasFor:O().string,image:O().object};const ze=(0,Z.A)("Gets the emoji data for a given emoji",function(et,At){let{name:Rt,reason:Ft="customize-emoji-get-info"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return et((0,fe.apiCall)({method:"emoji.getInfo",reason:Ft,args:{name:Rt}})).then($t=>$t).catch($t=>{throw $t})});ze.meta={name:"createFetcher",key:"createFetchergetEmojiInfo",description:"Gets the emoji data for a given emoji"},ze.propTypes={name:O().string};const mt=(0,Z.A)("Renames the custom emoji with the new name",function(et,At){let{oldName:Rt,newName:Ft,reason:$t="customize-emoji-rename"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return et((0,fe.apiCall)({method:"emoji.rename",reason:$t,args:{name:Rt,new_name:Ft}})).then(vn=>vn).then(()=>{et(Ge()),et((0,se.S9)(Rt))}).catch(vn=>{throw vn})});mt.meta={name:"createFetcher",key:"createFetchersubmitRenameEmoji",description:"Renames the custom emoji with the new name"},mt.propTypes={oldName:O().string,newName:O().string};var pt=e(3456937405),It=e(6247499644),bt=e(4244379358),gt=e(4675837085);const ht=new h.Ay("custom_emoji_list"),Zt={ADD_DIALOG_INPUT:"customize_emoji_add_dialog_input",ADD_DIALOG_ERROR:"customize_emoji_add_dialog_error",ADD_DIALOG_FILE_INPUT:"customize_emoji_add_dialog_file_input",ADD_DIALOG_FILE_INFO:"customize_emoji_add_dialog_file_info",ADD_DIALOG_IMAGE_PREVIEW:"customize_emoji_add_dialog_image_preview",ADD_DIALOG_IMAGE_PREVIEW_ERROR:"customize_emoji_add_dialog_image_preview_error",ADD_DIALOG_MESSAGE:"customize_emoji_add_dialog_message",ADD_DIALOG_UPLOAD:"customize_emoji_add_dialog_upload",ADD_DIALOG_UPLOAD_IMAGE_PROMPT:"customize_emoji_add_dialog_upload_image_prompt",ADD_DIALOG_UPLOAD_PREVIEW:"customize_emoji_add_dialog_upload_preview",ADD_DIALOG:"customize_emoji_add_dialog",ADD_DIALOG_DUPLICATE_PREVIEW:"customize_emoji_add_dialog_duplicate_preview"};let rn=u(class extends t.PureComponent{componentDidMount(){const{clogger:At}=this.props;At.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"impression",ui_component:"dialog",ui_properties:{element_type:"dialog",element_name:"add_custom_emoji_dialog"}}}}),this.maybeLoadEmojiPreviewFromUrl(),this.props.emojiNameSuggestion&&this.state.newEmojiName&&this.checkIfEmojiNameAlreadyExistsImmediate(this.props.emojiNameSuggestion)}shouldPreventSubmit(){const{newEmojiName:At,uploadedImage:Rt,nameErrorText:Ft}=this.state,{emojiUrl:$t}=this.props,vn=At.length>100;return!At||vn||!!Ft||!$t&&!Rt}onDragOver(At){At.preventDefault(),At.dataTransfer.dropEffect="copy"}onDrop(At){At.preventDefault();const Rt=At.dataTransfer.files[0];if(Rt){const Ft=Rt.name,$t=URL.createObjectURL(Rt);this.updateAfterUpload({uploadedImage:Rt,fileName:Ft,previewImageUrl:$t})}else this.setState(()=>({uploadedImage:null,fileName:"",previewImageUrl:"",imagePreviewError:!1}))}onEmojiNameChange(At){const{standardEmojiData:Rt}=this.props;let Ft="";this.setState(()=>({newEmojiName:At})),/[A-Z]/.test(At)||/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/.test(At)?Ft=ht.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."):At in Rt?Ft=ht.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name."):(0,It.q)(At)?this.checkIfEmojiNameAlreadyExists(At):Ft=ht.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."),this.setState(()=>({nameErrorText:Ft}))}onImagePreviewError(){this.setState(()=>({imagePreviewError:!0}))}onSubmit(At){At&&At.preventDefault();const{newEmojiName:Rt,uploadedImage:Ft}=this.state,{emojiUrl:$t,experimentAddEmojiFiletypesGroupOn:vn}=this.props;if(this.shouldPreventSubmit())return;this.setState(()=>({goButtonIsPending:!0}));const hn={...{reason:"add-custom-emoji-dialog-content",name:Rt},...$t?{mode:"url",url:$t}:{mode:"data",searchArgs:this.props.searchArgs,...Ft?{image:Ft}:{}}};this.props.addCustomEmoji(hn).then(()=>{this.props.closeModal();const gn=this.renderToastMessage();this.props.enqueueToast({element:gn}),this.setState(()=>({goButtonIsPending:!1})),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:$t?"import_custom_emoji":"add_custom_emoji",action:$t?"import":"add",action_status:"success",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})}).catch(gn=>{let Cn;const fn=(0,ae.A)(gn,"data.error");(fn===pt.W.NoUrlProvided||fn===pt.W.NoUrlImage)&&(Cn=ht.t("Something happened that prevented the image from being imported. Try again?")),fn==="error_bad_upload"?Cn=ht.t("Something happened that prevented your file from being uploaded. Try again?"):fn==="error_bad_format"?Cn=vn?ht.t("Please make sure your file is a GIF, JPEG, PNG, or WEBP."):ht.t("Please make sure your file is a GIF, JPEG, or PNG."):fn==="resized_but_still_too_large"||fn==="too_many_frames"?Cn=ht.t("This image is a bit too big, even after resizing. A smaller file might help?"):fn==="error_too_big"?Cn=ht.t("Please choose an image smaller than 64KB."):fn==="error_name_taken_i18n"?Cn=ht.rt("Unfortunately, the international emoji set already includes an emoji named <b>{newEmojiName}</b>. Mind trying a different name?",{newEmojiName:Rt}):fn==="error_name_taken"?Cn=ht.rt("The name <b>{newEmojiName}</b> is already in use by another emoji.",{newEmojiName:Rt}):(fn==="error_bad_name"||fn==="error_bad_name_i18n")&&(Cn=ht.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation.")),this.setState(()=>({apiErrorText:Cn,goButtonIsPending:!1})),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"add",action_status:"fail",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})})}onTextBlur(){this.setState(()=>({placeholder:!0}))}onTextFocus(){this.setState(()=>({placeholder:!1}))}onUploadChange(){var At,Rt;const Ft=!((At=this.fileInput)===null||At===void 0||(Rt=At.current)===null||Rt===void 0)&&Rt.files?this.fileInput.current.files[0]:null;if(Ft){const $t=Ft.name,vn=URL.createObjectURL(Ft);this.updateAfterUpload({uploadedImage:Ft,fileName:$t,previewImageUrl:vn})}else this.setState(()=>({uploadedImage:null,fileName:"",previewImageUrl:"",imagePreviewError:!1}))}maybeLoadEmojiPreviewFromUrl(){const{emojiUrl:At}=this.props;At&&this.setState(()=>({previewImageUrl:At,imagePreviewError:!1}))}convertFileNameToEmojiName(At){if(!At)return null;const Rt=At.lastIndexOf("."),Ft=Rt>0?At.substring(0,Rt):At;return Ft?Ft.toLowerCase().replace(/\s/g,"-").replace(/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/g,""):null}updateAfterUpload(At){let{uploadedImage:Rt,fileName:Ft,previewImageUrl:$t}=At;const{newEmojiName:vn,fileName:Rn}=this.state;let hn=vn;(!vn||vn===this.convertFileNameToEmojiName(Rn))&&(hn=this.convertFileNameToEmojiName(Ft)||hn),this.setState(()=>({uploadedImage:Rt,fileName:Ft,previewImageUrl:$t,imagePreviewError:!1}),()=>this.onEmojiNameChange(hn))}fileUpload(){var At;const Rt=(At=this.props.windowRef.deref())===null||At===void 0?void 0:At.document.getElementById("emojiimg");Rt==null||Rt.click(),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"click",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"upload_image"}}}})}renderChooseNamePrompt(){const{newEmojiName:At,nameErrorText:Rt}=this.state;return t.createElement("ol",{className:"black margin_bottom_0",start:2},t.createElement("li",{className:"margin_bottom_0"},t.createElement("div",null," ",ht.t("Give it a name")," "),t.createElement("div",{className:"normal sk_foreground_max p-add_custom_emoji_dialog__choose_name_container"},ht.t("This is also what you\u2019ll type to add this emoji to your messages.")),t.createElement("div",{className:"p_add_custom_emoji_dialog__name_input"},t.createElement(X.A,{id:"emojiname",name:"name",value:At,onChange:this.onEmojiNameChange,onFocus:this.onTextFocus,onBlur:this.onTextBlur,placeholder:this.renderPlaceholderText(),prefix:":",suffix:":",maxCharacterLimit:100,counterMinimumCharacters:101,errorText:Rt,"data-qa":Zt.ADD_DIALOG_INPUT,useInlineAlert:!0}))))}maybeRenderDuplicateNameErrorPreview(){const{newEmojiName:At,nameErrorText:Rt}=this.state,Ft=ht.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name.");return Rt===Ft?t.createElement("div",{className:"inline_flex full_width","data-qa":Zt.ADD_DIALOG_DUPLICATE_PREVIEW},t.createElement(F.Ay,{text:At,alt:At,emojiSize:"larger",className:"flex_shrink_none"}),t.createElement("div",{className:"padding_left_50 overflow_hidden"},t.createElement("strong",null,ht.t("Existing emoji")),t.createElement("span",{className:"block normal overflow_ellipsis"},":",At,":"))):null}renderDialogMessage(){const{orgName:At}=this.props;let Rt;return At?Rt=ht.rt("Your custom emoji will be available in every <b>{orgName}</b> workspace. You\u2019ll find it in the custom tab of the emoji picker. (Hint: it\u2019s the one with the Slack icon!)",{orgName:At}):Rt=ht.t("Your custom emoji will be available to everyone in your workspace. You\u2019ll find it in the custom tab of the emoji picker. (Hint: it\u2019s the one with the Slack icon!)"),t.createElement("div",{className:"p-add_custom_emoji_dialog","data-qa":Zt.ADD_DIALOG_MESSAGE},t.createElement("div",null,Rt),t.createElement("div",null,this.renderErrorMessage()),t.createElement("form",{className:"p-add_custom_emoji_dialog__form",onSubmit:this.onSubmit},this.renderUploadImagePrompt(),t.createElement("hr",null),this.renderChooseNamePrompt(),this.maybeRenderDuplicateNameErrorPreview()))}renderErrorMessage(){const{apiErrorText:At}=this.state;return At?t.createElement(K.Ay,{level:"error",className:"margin_top_50 margin_bottom_100","data-qa":Zt.ADD_DIALOG_ERROR},t.createElement("span",null," ",At," ")):null}renderImagePreview(){const{previewImageUrl:At}=this.state,Rt=t.createElement("img",{src:At,alt:ht.t("image preview"),className:"p-add_custom_emoji_dialog__image",onError:this.onImagePreviewError,draggable:!1}),{imagePreviewError:Ft}=this.state;return Ft?t.createElement("div",{className:"p-add_custom_emoji_dialog__icon_container","data-qa":Zt.ADD_DIALOG_IMAGE_PREVIEW_ERROR},t.createElement(Q.Ay,{tip:ht.t("We couldn't preview your image. Make sure it's a GIF, JPEG, or PNG."),zIndex:"above_fs"},t.createElement(V.A,{type:"exclamation-circle",size:"inherit",className:"p-add_custom_emoji_dialog__icon_broken block"}))):t.createElement("div",{className:"align_center p-add_custom_emoji_dialog__image_container","data-qa":Zt.ADD_DIALOG_IMAGE_PREVIEW},Rt)}renderPlaceholderText(){const{placeholder:At}=this.state;let Rt;return At?Rt=ht.t("avocado"):Rt="",Rt}renderToastMessage(){const{newEmojiName:At,previewImageUrl:Rt}=this.state,Ft=t.createElement(F.Ay,{text:At,url:Rt,emojiSize:F.lw.MEDIUM}),$t=ht.rt("{emoji} :{newEmojiName}: has been added and is ready for use.",{emoji:Ft,newEmojiName:At});return t.createElement(L.Ay,{toastClasses:"p-customize_emoji_list__toast"},t.createElement("span",null,$t))}renderUploadImagePrompt(){const{emojiUrl:At}=this.props,Rt=ht.t("Square images under 128KB and with transparent backgrounds work best. If your image is too large, we\u2019ll try to resize it for you."),Ft=t.createElement(t.Fragment,null,t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_preview rounded bordered"},this.renderUploadPreview()),t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_preview p-add_custom_emoji_dialog__upload_preview--dark rounded bordered margin_left_50"},this.renderUploadPreview())),$t=At?ht.t("Import external emoji"):ht.t("Upload an image");return t.createElement("ol",{className:"black",onDragOver:this.onDragOver,onDrop:this.onDrop,"data-qa":Zt.ADD_DIALOG_UPLOAD_IMAGE_PROMPT},t.createElement("li",{className:"large_bottom_margin"},t.createElement("div",null," ",$t," "),!At&&t.createElement("div",{className:"normal sk_foreground_max"},Rt),t.createElement("div",{className:"normal p-add_custom_emoji_dialog__upload_container"},Ft,!At&&t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_button margin_left_100"},this.renderUploadedFileText(),t.createElement("input",{type:"file",className:"p-add_custom_emoji_dialog__upload_input",id:"emojiimg",name:"img",accept:"image/*;capture=camera",ref:this.fileInput,onChange:this.onUploadChange,"data-qa":Zt.ADD_DIALOG_FILE_INPUT}),t.createElement(B.Ay,{type:"outline",size:"medium",onClick:this.fileUpload,"data-qa":Zt.ADD_DIALOG_UPLOAD}," ",ht.t("Upload Image")," ")))))}renderUploadPreview(){const{fileName:At}=this.state,{emojiUrl:Rt}=this.props;let Ft;return At||Rt?Ft=this.renderImagePreview():Ft=t.createElement("div",{className:"p-add_custom_emoji_dialog__icon_container","data-qa":Zt.ADD_DIALOG_UPLOAD_PREVIEW},t.createElement(V.A,{type:"file-image",size:"inherit",className:"p-add_custom_emoji_dialog__icon block "})),Ft}renderUploadedFileText(){const{fileName:At}=this.state;let Rt;return At?Rt=t.createElement("div",{className:"margin_bottom_25 p-add_custom_emoji_dialog__filename"}," ",At," "):Rt=t.createElement("div",{className:"sk_foreground_max margin_bottom_25"}," ",ht.t("Select an image")," "),Rt}render(){const{goButtonIsPending:At}=this.state,Rt=this.shouldPreventSubmit();return t.createElement(t.Fragment,null,t.createElement(o.$m,null,t.createElement(o.qf,{"data-qa":`${Zt.ADD_DIALOG}_body`},this.renderDialogMessage())),t.createElement(o.jl,null,t.createElement(o.ox,null,t.createElement(o.s_,{type:"outline"},ht.t("Cancel")),t.createElement(B.lV,{type:"primary",onClick:this.onSubmit,loading:At,disabled:Rt,"data-qa":`${Zt.ADD_DIALOG}_go`},ht.t("Save")))))}constructor(At){super(At),this.fileInput=t.createRef(),this.checkIfEmojiNameAlreadyExistsImmediate=Rt=>{this.props.getEmojiInfo({name:Rt}).then(()=>{this.state.newEmojiName===Rt&&this.setState(()=>({nameErrorText:ht.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name.")}))}).catch(he.A)},this.checkIfEmojiNameAlreadyExists=(0,ce.A)(this.checkIfEmojiNameAlreadyExistsImmediate,200),this.state={uploadedImage:null,newEmojiName:this.props.emojiNameSuggestion,fileName:"",previewImageUrl:this.props.emojiUrl||"",placeholder:!0,nameErrorText:"",apiErrorText:null,imagePreviewError:!1,goButtonIsPending:!1},this.fileInput=t.createRef(),this.eventId=At.clientApp?Ie.EventId.ADD_CUSTOM_EMOJI_IN_CLIENT:Ie.EventId.PAGE_CUSTOMIZE_EMOJI,(0,ee.v)(this,["onEmojiNameChange","onTextFocus","onTextBlur","onUploadChange","onImagePreviewError","onSubmit","renderUploadedFileText","renderUploadPreview","renderUploadImagePrompt","renderPlaceholderText","renderChooseNamePrompt","renderDialogMessage","renderToastMessage","renderErrorMessage","renderImagePreview","fileUpload","onDrop","onDragOver","maybeLoadEmojiPreviewFromUrl","maybeRenderDuplicateNameErrorPreview"])}},"AddCustomEmojiDialogContent");rn.displayName="AddCustomEmojiDialogContent",rn.defaultProps={standardEmojiData:{},addCustomEmoji:he.A,enqueueToast:he.A,clientApp:!1,closeModal:he.A,getEmojiInfo:he.A,searchArgs:{},emojiNameSuggestion:"",experimentAddEmojiFiletypesGroupOn:!1,windowRef:(0,gt.O)(window)};const zt=u(et=>({addCustomEmoji:At=>et((0,pt.l)(At)),enqueueToast:function(){for(var At=arguments.length,Rt=new Array(At),Ft=0;Ft<At;Ft++)Rt[Ft]=arguments[Ft];return et((0,le.M)(...Rt))},closeModal:()=>et((0,c.O)()),getEmojiInfo:function(){for(var At=arguments.length,Rt=new Array(At),Ft=0;Ft<At;Ft++)Rt[Ft]=arguments[Ft];return et(ze(...Rt))}}),"mapDispatchToProps"),In=u(et=>({standardEmojiData:(0,Te.O)(et),clientApp:(0,q.TZ)(et),clogger:(0,J.e)({state:et})}),"mapStateToProps"),cn=(0,ue.N)(In,zt)((0,bt.A)(rn));var Jt=e(1194535350),dn=e(4318855015),sn=e(5510392579),Xt=e(9236644324),xt=e(6105929840),en=e(5305906809);const un=new h.Ay("custom_emoji_list"),yn=u(et=>{let{adding:At,name:Rt}=et;const Ft=(0,n.wA)();return t.createElement(L.Ay,{onCloseComplete:()=>{At&&Ft((0,dn.su)())}},t.createElement("span",{"data-qa":"emoji-pack-action"},At&&un.rt("The {name} emoji pack has been added to your workspace.",{name:t.createElement("b",null,Rt)}),!At&&un.rt("The {name} emoji pack has been removed from your workspace.",{name:t.createElement("b",null,Rt)})))},"InstallToast");yn.displayName="InstallToast";const ut=u(et=>{let{name:At,url:Rt,index:Ft,copyToClipboard:$t,onClose:vn}=et;const Rn=(0,n.wA)(),hn=t.createElement(N.Ay,{showTooltip:!0,text:At,url:Rt,emojiSize:N.lw.LARGE});function gn(){(0,Xt.x3)(At),vn&&vn(),Rn((0,c.O)()),Rn((0,le.M)({element:t.createElement(L.Ay,null,t.createElement("span",null,un.rt("Emoji copied to clipboard",{name:At})))}))}return u(gn,"onClick"),gn.displayName="onClick",$t&&(0,Xt.tD)()?t.createElement(P.A,{className:"p-emoji_pack_details__button","data-color-index":Ft%en.dX,onClick:gn},hn):hn},"EmojiButton");ut.displayName="EmojiButton";const Ot=u(et=>{let{collectionId:At,name:Rt,author:Ft,installed:$t,emoji:vn,onCancelClick:Rn,onClose:hn}=et;const gn=(0,n.wA)(),Cn=(0,s.d4)(sn.h3),[fn,Oe]=(0,t.useState)(!1),ke=(0,t.useCallback)(()=>{Oe(!0),gn((0,Jt._J)({collectionId:At,reason:"emojiPack:dialog"})).then(()=>{Oe(!1),hn&&hn(),gn((0,c.O)()),gn((0,le.M)({element:t.createElement(yn,{adding:!0,name:Rt})}))})},[gn,At,Rt,hn]),[je,Be]=(0,t.useState)(!1),st=(0,t.useCallback)(()=>{Be(!0),gn((0,Jt.zx)({collectionId:At,reason:"emojiPack:dialog"})).then(()=>{Be(!1),hn&&hn(),gn((0,c.O)()),gn((0,le.M)({element:t.createElement(yn,{adding:!1,name:Rt})}))})},[gn,At,Rt,hn]);if(!vn)return null;const St=(0,W.A)(vn,(Bt,Qt)=>({name:Qt,url:Bt})).map((Bt,Qt)=>({...Bt,index:Qt})),Yt=(0,M.A)(St,5),tn=un.t("{emojiCount, plural, =1 {# emoji} other {# emoji}}",{emojiCount:(0,g.A)(vn)}),at=un.t("by {author}",{author:Ft}),Et=t.createElement(t.Fragment,null,t.createElement("span",{className:"p-emoji_pack_details__subtitle_author"},at),tn),_t=t.createElement(xt.A,{"aria-label":un.t("Go back"),icon:"chevron-large-left",onClick:()=>Rn()});return t.createElement(t.Fragment,null,t.createElement(o.rQ,null,t.createElement(o.Rc,{icon:_t,title:Rt,subtitle:Et})),t.createElement(o.$m,null,t.createElement(o.qf,null,Yt.map(Bt=>t.createElement("div",{key:Bt.map(Qt=>Qt.name).join("-details-"),className:"p-emoji_pack_details__emoji_row"},Bt.map(Qt=>t.createElement(ut,{key:`emoji-pack-details-${Qt.name}`,name:`:${Qt.name}:`,url:Qt.url,index:Qt.index,copyToClipboard:$t,onClose:hn})),[...new Array(5-Bt.length)].map((Qt,Fe)=>`emoji-pack-details-spacer-${Fe}`).map(Qt=>t.createElement("div",{key:Qt,className:"p-emoji_pack_details__emoji_spacer"})))))),t.createElement(o.jl,null,$t&&(0,Xt.tD)()&&t.createElement("span",{className:"p-emoji_pack_details__tip"},un.t("Click an emoji to copy to clipboard")),t.createElement(o.ox,null,$t&&Cn&&t.createElement(B.lV,{autoFocus:!0,type:"danger",loading:je,onClick:st},un.t("Remove pack")),!$t&&t.createElement(B.lV,{autoFocus:!0,loading:fn,onClick:ke},un.t("Add pack")))))},"EmojiPackDetails");Ot.displayName="EmojiPackDetails";const kt=Ot;var be=e(1655938719);const Kt=new h.Ay("custom_emoji_list"),Vt={CUSTOM:"custom",PACKS:"packs"},on=u(et=>{let{orgName:At="",searchArgs:Rt={},showEmojiPacks:Ft,initialTab:$t=Vt.CUSTOM,emojiNameSuggestion:vn="",emojiUrl:Rn,megaphoneEventOnClose:hn}=et;const gn=(0,n.wA)(),Cn=(0,s.d4)(U=>(0,v._Z)(U,"add_emoji_filetypes")==="on"),[fn,Oe]=(0,t.useState)($t),[ke,je]=(0,t.useState)(!1),[Be,st]=(0,t.useState)(null),St=Rn?Kt.t("Add emoji to your organization"):void 0,Yt=Ft?Kt.t("Add emoji"):Kt.t("Add custom emoji"),tn=St??Yt,at=Kt.t("Emoji packs"),Et=Kt.t("Custom emoji"),_t=(0,t.useMemo)(()=>[{title:Et,id:Vt.CUSTOM,onClick:()=>Oe(Vt.CUSTOM),"data-qa":"add_emoji_dialog_tab_custom"},{title:at,id:Vt.PACKS,onClick:()=>Oe(Vt.PACKS),"data-qa":"add_emoji_dialog_tab_packs"}],[Et,at]),Bt=(0,t.useCallback)(()=>{hn&&gn((0,be.iR)({event:{type:hn}}))},[gn,hn]),Qt=(0,t.useCallback)(()=>{Bt(),gn((0,c.O)())},[gn,Bt]),Fe=Ft&&fn===Vt.PACKS,Xe=Ft?t.createElement(i.A,{tabs:_t,currentTabId:fn,className:"p-add_custom_emoji_dialog__tabs"}):null,Me=(0,a.A)("p-add_emoji_dialog",{"p-add_emoji_dialog--without_tabs":!Ft});return Ft&&Be?t.createElement(o.dW,{closeModal:Qt,isOpen:!0,className:Me},t.createElement(kt,{collectionId:l(Be),name:(0,_.M)(Be),author:d(Be),emoji:ke?m(Be):(0,r.H)(Be),installed:ke,onCancelClick:()=>{st(null)},onClose:Bt})):t.createElement(o.dW,{overlayClassName:"p-add_emoji_dialog_overlay",closeModal:Qt,isOpen:!0,className:Me},t.createElement(o.rQ,null,t.createElement(o.Rc,{title:tn,className:"no_min_height padding_bottom_50"}),Xe),Fe&&t.createElement(me,{orgName:At,onPackClick:(U,H)=>{let{installed:te}=H;je(te),st(U)}}),!Fe&&t.createElement(cn,{orgName:At,searchArgs:Rt,emojiNameSuggestion:vn,emojiUrl:Rn,experimentAddEmojiFiletypesGroupOn:Cn}))},"AddEmojiDialog");on.displayName="AddEmojiDialog";const pn=on},5331686899:(j,p,e)=>{"use strict";e.d(p,{lw:()=>W,Ay:()=>z});var t=e(7752974446),n=e.n(t),s=e(3134334389),a=e(6023831373),c=e(9391594207),o=e(5255740490),i=e(2047021170),l=e(8525228540),_=e(8847766420),d=e(3829348308),r=e(3043682041),m=e(9599231336),h=e(735940183),v=e(8556787853),y=e(5799716058),I=e(4921059838),T=e(6795568989),f=e(3695531806),g=e(1563996154),M=e(1610251172),A=e(796111729);function O(){return O=Object.assign||function($){for(var x=1;x<arguments.length;x++){var Y=arguments[x];for(var ne in Y)Object.prototype.hasOwnProperty.call(Y,ne)&&($[ne]=Y[ne])}return $},O.apply(this,arguments)}u(O,"_extends");function D($){return class extends s.PureComponent{componentDidCatch(x,Y){this.setState(()=>({hasError:!0})),(0,A.Wo)().error({label:"Error rendering emoji component",error:x,message:Y})}render(){return this.state.hasError?s.createElement("span",{"data-qa":"missing_emoji",className:"c-emoji c-emoji__medium c-emoji--inline"},s.createElement("img",{src:n()})):s.createElement($,O({},this.props))}constructor(x){super(x),this.state={hasError:!1}}}}u(D,"withEmojiErrorBoundary"),D.displayName="withEmojiErrorBoundary";const E=D;var C=e(9580887194),S=e(8021873188),b=e(9936232041);function k(){return k=Object.assign||function($){for(var x=1;x<arguments.length;x++){var Y=arguments[x];for(var ne in Y)Object.prototype.hasOwnProperty.call(Y,ne)&&($[ne]=Y[ne])}return $},k.apply(this,arguments)}u(k,"emoji_extends");const W={SMALL:"small",MEDIUM:"medium",LARGE:"large",LARGER:"larger",XLARGE:"xlarge"},N=u($=>{const x=(0,a.d4)(Y=>{if(!$.isStandard)return $.url;var ne;const re=(ne=$.sourceTeamId)!==null&&ne!==void 0?ne:(0,_.ZT)(Y);return $.isStandard?(0,d.Ez)(Y,{text:$.text||"",teamId:re,emojiMode:(0,r.w)(Y,{forceDisplay:!!$.forceDisplay}),emojiSize:W.XLARGE}):$.url});return s.createElement(V,{shouldFallbackOnLoadError:!0,renderAsText:!1,showTooltip:!1,emojiSize:W.LARGER,text:$.text,displayText:$.displayText,url:x||"",sourceTeamId:$.sourceTeamId,ariaLabel:$.ariaLabel,alt:$.alt,unicode:$.unicode,emojiNameFromText:$.emojiNameFromText,dispatch:$.dispatch,stopAnimations:$.stopAnimations,fallbackUrl:$.fallbackUrl,isStandard:$.isStandard})},"EmojiTooltipEmoji");N.displayName="EmojiTooltipEmoji";let V=u(class extends s.PureComponent{onLoadError(){this.setState(()=>({isLoadError:!0}))}renderIconFallback(){return s.createElement(M.A,{legacy:!0,className:"c-emoji__text_mode_icon",type:"info-circle",align:"top",inherit:!0})}isImportable(){const{isLoadError:x}=this.state,{isImportAllowed:Y,isStandard:ne}=this.props;return Y&&!ne&&!x}renderEmojiElement(){const{text:x,displayText:Y,url:ne,emojiSize:re,isEmojiInlineWithText:_e,className:G,shouldFallbackOnLoadError:ge,fallbackUrl:oe,ariaLabel:me,alt:ue}=this.props,{isLoadError:ae}=this.state,he=(0,o.A)("c-emoji",`c-emoji__${re}`,G,{"c-emoji--inline":_e}),ce=me??(Y&&(0,y.A)(Y)),ee={"data-stringify-type":"emoji","data-stringify-emoji":x},J=this.isImportable()?this.handleEmojiImport:void 0;return _e?s.createElement("span",{className:he,"data-qa":(ae||!ne)&&ge?"emoji-fallback":"emoji"},s.createElement("img",k({src:(ae||!ne)&&ge?oe:ne,onError:this.onLoadError,onContextMenu:J,"aria-label":ce,alt:Y},ee))):s.createElement("img",k({src:(ae||!ne)&&ge?oe:ne,onError:this.onLoadError,"aria-label":ce,alt:ue??Y,className:he,onContextMenu:J,"data-qa":(ae||!ne)&&ge?"emoji-fallback":"emoji"},ee))}renderUnicodeAsEmoji(x){if(x&&(0,T.d)(x)){const{emojiSize:Y}=this.props,ne=(0,f.z)({codePointLikeString:x});return s.createElement("span",{className:(0,o.A)("c-emoji__unicode",{"c-emoji__unicode--large":Y===W.LARGE})},ne)}}renderTooltip(){const{renderAsText:x,displayText:Y,text:ne,isStandard:re,url:_e,unicode:G,sourceTeamId:ge,ariaLabel:oe,alt:me,emojiNameFromText:ue,stopAnimations:ae,fallbackUrl:he,forceDisplay:ce}=this.props;if(x)return Y;const ee=re?void 0:_e;return s.createElement(s.Fragment,null,s.createElement("div",{className:"c-emoji__emoji-tooltip"},s.createElement(N,{text:ne,displayText:Y,url:ee,sourceTeamId:ge,ariaLabel:oe,alt:me,unicode:G,emojiNameFromText:ue,dispatch:this.props.dispatch,stopAnimations:ae,fallbackUrl:he,isStandard:re,forceDisplay:ce})),Y,this.isImportable()&&s.createElement(S.K,{emojiName:Y,emojiUrl:_e}))}render(){const{displayText:x,url:Y,renderAsText:ne,showTooltip:re,iconInTextMode:_e,renderEmojiFallback:G,unicode:ge,emojiNameFromText:oe}=this.props;if(!Y&&!x&&!ge)return null;if((ne||!Y)&&!G&&!ge)return _e?this.renderIconFallback():x;if(ge&&!oe){var me;return(me=this.renderUnicodeAsEmoji(ge))!==null&&me!==void 0?me:x}return re?s.createElement(g.Ay,{tip:this.renderTooltip,delay:g.PK,zIndex:"above_fs"},this.renderEmojiElement()):this.renderEmojiElement()}constructor(x){super(x),this.handleEmojiImport=Y=>{if(Y!=null&&Y.altKey)return;const{url:ne,dispatch:re,displayText:_e}=this.props;re((0,C.a)({emojiName:_e,emojiUrl:ne,event:Y}))},this.onLoadError=this.onLoadError.bind(this),this.renderTooltip=this.renderTooltip.bind(this),this.state={isLoadError:!1}}},"Emoji");V.displayName="Emoji",V.defaultProps={text:"",showTooltip:!1,className:void 0,stopAnimations:!1,iconInTextMode:!1,url:void 0,emojiSize:W.MEDIUM,isEmojiInlineWithText:!1,isImportAllowed:!1,displayText:"",sourceTeamId:void 0,shouldFallbackOnLoadError:!1,renderEmojiFallback:!1,ariaLabel:void 0,alt:void 0};const R=u(($,x)=>{const{stopAnimations:Y,forceDisplay:ne,emojiSize:re=W.MEDIUM,url:_e,unicode:G}=x;let{text:ge}=x,oe=(0,d.qJ)($,G??"");oe&&oe.charAt(oe.length-1)!==":"&&oe.charAt(0)!==":"&&(oe=`:${oe}:`),ge=oe||ge||"";let me=_e;const ue=(0,_.ZT)($)||"",ae=!(0,i.ty)($,"a11y_animations"),he=Y||ae,ce=(0,h.Yp)({teamOrEnterpriseId:ue,recalc:!1}),ee=(0,l.bR)({state:$,locale:ce,name:ge}),J=!ne&&(0,m.P)($),X=(0,b.A)(ge),F=(0,I.R)($,X);if(!J&&!me){const B=(0,r.w)($,{forceDisplay:!!ne});var L;const Q=(L=x.sourceTeamId)!==null&&L!==void 0?L:ue;me=(0,d.Ez)($,{text:ge,parsedEmoji:X,teamId:Q,emojiMode:B,emojiSize:re===W.LARGER?W.XLARGE:re})||void 0}if(he&&!F){var K;me=(K=(0,v.Ay)($,{url:me,stopAnimations:he,isEmoji:!0}))!==null&&K!==void 0?K:void 0}return{text:ge,url:me,renderAsText:J,emojiSize:re,displayText:ee||"",stopAnimations:he,fallbackUrl:n(),isStandard:F,emojiNameFromText:oe}},"mapStateToProps"),P={mapStateToProps:R},z=E((0,c.N)(R)(V))},1030162945:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>n,lw:()=>t.lw});var t=e(5331686899);const n=t.Ay},8980195295:(j,p,e)=>{"use strict";e.d(p,{A:()=>A});var t=e(3134334389),n=e(9391594207),s=e(5255740490),a=e(3879245650),c=e(4887323608),o=e(4724591729),i=e(735940183),l=e(6084388622),_=e(8739505998),d=e(796111729),r=e(2786906754),m=e(9190452268),h=e(6968387112),v=e(6220662016),y=e(2229064554),I=e(8022922400),T=e(6338445630);const f=new i.Ay("error_boundary"),g="REB";let M=u(class extends t.Component{componentDidUpdate(D){this.state.hasError&&D.id!==this.props.id&&this.resetHasError()}componentDidCatch(D,E){let C=null;try{C=`${g}${(0,a.B)((0,I.A)(D.message)).substr(0,9).toUpperCase()}`}catch{}if(this.setState(()=>({hasError:!0,errCode:C}),()=>{var S,b;return(b=(S=this.props).onError)===null||b===void 0?void 0:b.call(S,D)}),!(0,o.Cu)()){const S=E.componentStack.split(`
`).slice(0,Error.stackTraceLimit).join(`
`);this.props.logger.error("ERROR-BOUNDARY",D,C,S,{subtype:this.props.subtype||"component_error_boundary"})}}onClickReloadButton(D){D.preventDefault();let E=window.location.href;this.props.telemeter.count("react_error_boundary_reload_click"),(0,c.A)()?(E=(0,r.M6)(window.location.href,"force_cold_boot",1),this.props.logger.info("GANTRY",`Reloading at ${E} after hitting ErrorBoundary`),(0,T.Lz)().finally(()=>{window.location.href=E})):(this.props.logger.info("LEGACY",`Reloading at ${E} after hitting ErrorBoundary`),window.location.href=E)}resetHasError(){this.setState(()=>({hasError:!1,errCode:null}))}renderReloadLinkMsg(){const D=u(E=>{let{text:C,key:S}=E;return t.createElement(_.A,{href:`https://${(0,h.qF)()}/help/contact`,rel:"noopener noreferrer",key:S},C)},"renderLink");return this.state.errCode==="REBD7A8C1099"?f.rt("This particular hiccup is something we know about and are working to fix. Please reload and things should be cleared up. If this issue persists, please <a>drop us a line.</a>",{fallbackHash:"e429542887f26442dba7a085bd05bea15803edd9",fallbackHashNs:"error_boundary"},D):f.rt("Reloading Slack might clear things up. If it doesn\u2019t, <a>drop us a line.</a>",null,D)}render(){if(this.state.hasError){if(this.props.telemeter.count("react_error_boundary_rendered"),this.props.renderError)return this.props.renderError({errCode:this.state.errCode});const D=(0,s.A)("p-error_boundary",this.props.className,{"p-error_boundary--short":this.props.variant==="short"});return t.createElement("div",{className:D},t.createElement("div",{className:"p-error_boundary__content"},t.createElement("div",{className:"p-error_boundary__message"},t.createElement("h1",{className:"p-error_boundary__heading"},t.createElement("span",null,f.t("Something went wrong")),t.createElement("span",{className:"p-error_boundary__icon p-error_boundary__icon--turtle",role:"img","aria-label":f.t("Something went wrong")},"\u{1F422}")),t.createElement("p",{className:"p-error_boundary__contact_msg"},this.renderReloadLinkMsg())),this.state.errCode&&t.createElement(y.A,{errCode:this.state.errCode}),t.createElement(l.Ay,{type:"primary",className:"margin_right_50",onClick:this.onClickReloadButton,"data-qa":"error_reload"},f.t("Reload"))))}return this.props.children}constructor(D){super(D),this.state={hasError:!1,errCode:null},this.onClickReloadButton=this.onClickReloadButton.bind(this)}},"ErrorBoundary");M.displayName="ErrorBoundary";const A=(0,n.N)(O=>({logger:(0,v.A)(O)?(0,d.Ay)({state:O}):(0,d.Wo)(),telemeter:(0,v.A)(O)?(0,m.Cy)({state:O}):(0,m.rh)()}))(M)},2229064554:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(3134334389),n=e(735940183);const s=new n.Ay("error_boundary");function a(c){let{errCode:o}=c;return t.createElement("p",{className:"p-error_boundary__error_code_container"},t.createElement("span",{className:"p-error_boundary__error_code","data-qa":"error_code"},s.t("Error: "),o))}u(a,"ErrorCode")},3837503631:(j,p,e)=>{"use strict";e.d(p,{H:()=>o,A:()=>i});var t=e(8980195295),n=e(3134334389);function s(){return s=Object.assign||function(l){for(var _=1;_<arguments.length;_++){var d=arguments[_];for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(l[r]=d[r])}return l},s.apply(this,arguments)}u(s,"_extends");const a=u(()=>null,"renderError"),o=u(l=>n.createElement(t.A,s({renderError:a},l)),"QuietErrorBoundary"),i=t.A},8022922400:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});const t=/\bA[A-Z0-9]{8,}\b/g,n=/\bB[A-Z0-9]{8,}\b/g,s=/\b(C|G|D)[A-Z0-9]{8,}\b/g,a=/\bF[A-Z0-9]{8,}\b/g,c=/\b(U|W)[A-Z0-9]{8,}\b/g,o=/\b[\d]{10}\.[\d]{6}\b/g,i=/\bS[A-Z0-9]{8,}\b/g,l=/\bT[A-Z0-9]{8,}\b/g;function _(d){return String(d).replace(t,"[APP_ID]").replace(n,"[BOT_ID]").replace(s,"[CHANNEL_ID]").replace(a,"[FILE_ID]").replace(c,"[MEMBER_ID]").replace(o,"[MESSAGE_TS]").replace(i,"[USER_GROUP_ID]").replace(l,"[TEAM_ID]")}u(_,"normalizeError")},5141066605:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(735940183),n=e(5549390246),s=e(4761125736);const a=new t.Ay("files");function c(o,i){if(!o.is_external)return null;if((0,s._Z)(i,"file_consistency")==="treatment"){let _="File";switch(o.external_type){case"gdrive":switch(o.filetype){case"gsheet":_=a.t("Google Sheet");break;case"gdoc":_=a.t("Google Doc");break;case"gpres":_=a.t("Google Slide");break;case"gdraw":_=a.t("Google Drawing");break;default:_=a.t("Google {fileType}",{fileType:o.pretty_type})}break;case"dropbox":case"box":case"onedrive":case"app":_=a.t("{fileType}",{fileType:o.pretty_type});break;default:_=a.t("File")}return _}switch(o.external_type){case"gdrive":switch(o.filetype){case"gsheet":return a.t("Spreadsheet from Google Drive");case"gdoc":return a.t("Document from Google Drive");case"gpres":return a.t("Presentation from Google Drive");case"gdraw":return a.t("Drawing from Google Drive");default:return a.t("{fileType} from Google Drive",{fileType:o.pretty_type})}case"dropbox":return a.t("{fileType} from Dropbox",{fileType:o.pretty_type});case"box":return a.t("{fileType} from Box",{fileType:o.pretty_type});case"onedrive":return a.t("{fileType} from OneDrive",{fileType:o.pretty_type});case"app":return a.t("{fileType} from {appName}",{fileType:o.pretty_type,appName:(0,n.Y)(i,o)||""});default:return a.t("File")}}u(c,"getExternalFiletypeDescription")},8642919232:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(8950789382),c=e(8677230210);const o=(0,s.Ay)("Opens a member profile in a tile",function(){var l=(0,t.coroutine)(function*(_,d,r){(0,c.wC)(d(),r)&&_((0,a.s)({viewId:"rimeto_profile",params:{memberId:r}}))});return function(_,d,r){return l.apply(this,arguments)}}());o.meta={name:"createThunk",key:"createThunkopenProfileInWindow",description:"Opens a member profile in a tile"};const i=o},6565762531:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});function t(n){return!!(n&&n!=="-")}u(t,"isValidFieldValue")},7969928607:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(3134334389),n=e(5734673180),s=e(647040695),a=e(1030162945),c=e(6818330210);function o(l){let{text:_="",inputIsEscaped:d=!1,emojiSize:r=a.lw.SMALL,showTooltips:m=!0,stopAnimations:h=!1,emojiDisplayInfo:v={}}=l;const y=[];let I=0;const T=d?(0,n.A)(_??""):_??"";if(T.replace((0,s.A)(),(f,g,M)=>{if(M>I){const D=T.slice(I,M);y.push(t.createElement(t.Fragment,{key:`${M}-${D}`},D))}const{name:A=f,url:O=void 0}=(0,c.H)(f,v);return y.push(t.createElement(a.Ay,{text:A,emojiSize:r,key:`${M}-${A}`,showTooltip:m,stopAnimations:h,isEmojiInlineWithText:!0,url:O})),I=M+f.length,""}),!y.length)return t.createElement(t.Fragment,null,T);if(I<T.length){const f=T.substr(I);y.push(t.createElement(t.Fragment,{key:`last-${f}`},f))}return t.createElement(t.Fragment,null,y)}u(o,"FormatTextWithEmoji"),o.displayName="FormatTextWithEmoji";const i=t.memo(o)},6159136815:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3134334389),n=e(5734673180),s=e(7969928607);const a=/\ue000([^\ue001]*)\ue001/g;function c(i){let{text:l="",inputIsEscaped:_=!1,showTooltips:d=!0,stopAnimations:r=!1}=i;const m=[];let h=0;const v=_?(0,n.A)(l??""):l??"";if(v.replace(a,(y,I,T)=>{if(T>h){const f=v.slice(h,T);m.push(t.createElement(s.A,{key:`${T}-${f}`,text:f,showTooltips:d,inputIsEscaped:_,stopAnimations:r}))}m.push(t.createElement("span",{className:"c-mrkdwn__highlight",key:`${T}-${I}`},t.createElement(s.A,{text:I,showTooltips:d,inputIsEscaped:_,stopAnimations:r}))),h=T+y.length}),!m.length&&l)return t.createElement(t.Fragment,null,t.createElement(s.A,{text:l,showTooltips:d,inputIsEscaped:_,stopAnimations:r}));if(l&&h<l.length){const y=v.substr(h);m.push(t.createElement(s.A,{key:`last-${y}`,text:y,showTooltips:d,inputIsEscaped:_,stopAnimations:r}))}return t.createElement(t.Fragment,null,m)}u(c,"FormatTextWithHighlightMarkers"),c.displayName="FormatTextWithHighlightMarkers";const o=t.memo(c)},1743656885:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(8951118047);const n=t.A},8481467080:(j,p,e)=>{"use strict";e.d(p,{A:()=>h,U:()=>y});var t=e(9552526132),n=e(2927826522),s=e(796111729),a=e(3398586081);const c=u(I=>{const{functionTriggerId:T,workflowId:f,title:g,description:M,isWorkflowApp:A,salesHomeWorkflowAppType:O,owningTeamId:D,developerTraceId:E,botUserId:C,appCollaborators:S,appId:b,shareUrl:k}=(0,n.t)(I);return{triggerId:T,workflowId:f,title:g,description:M,isWorkflowApp:A,salesHomeWorkflowAppType:O,owningTeamId:D,developerTraceId:E,botUserId:C,appCollaborators:S,appId:b,shareUrl:k}},"getCommonMetadataFromBlock"),o=u(I=>I.url?{...c(I),triggerType:t.M.Shortcut,url:I.url}:{...c(I),triggerType:t.M.Shortcut,url:""},"createLinkShortcutFromBlock"),i=u(I=>({...c(I),triggerType:t.M.Webhook}),"createWebhookShortcutFromBlock"),l=u(I=>({...c(I),triggerType:t.M.External}),"createExternalShortcutFromBlock"),_=u(I=>({...c(I),triggerType:t.M.Service,serviceName:I.serviceName}),"createServiceShortcutFromBlock"),d=u(I=>{const{triggerSubtype:T}=I,f={eventType:T||""};return{...c(I),triggerType:t.M.Event,event:f}},"createEventShortcutFromBlock"),r=u(I=>c(I),"createUnknownShortcutFromBlock"),m=u(I=>{const T={startTime:""};return{...c(I),triggerType:t.M.Scheduled,schedule:T}},"createScheduledShortcutFromBlock"),h=u(I=>{switch(I.triggerType){case t.M.Event:return d(I);case t.M.Scheduled:return m(I);case t.M.Shortcut:return o(I);case t.M.Webhook:return i(I);case t.M.External:return l(I);case t.M.Service:return _(I);case void 0:return o(I);default:return r(I)}},"createShortcutFromBlock"),v=u(I=>{try{return JSON.stringify(I)}catch(T){throw(0,s.Wo)().error("stringify failed for workflow/trigger obj shortcut info"),T}},"memoizeCacheKeyResolver"),y=(0,a.A)(h,v)},3799600789:(j,p,e)=>{"use strict";e.d(p,{V:()=>T,j:()=>y});var t=e(3398586081),n=e(3126601217),s=e(9552526132),a=e(2927826522),c=e(796111729),o=e(3906734293);const i=u((f,g,M)=>{var A,O,D,E;return{triggerId:(f==null?void 0:f.id)||"",workflowId:(f==null?void 0:f.workflow.workflow_id)||(g==null?void 0:g.id),isWorkflowPublished:(f==null||(A=f.workflow_details)===null||A===void 0?void 0:A.is_published)||(g==null?void 0:g.is_published),appId:(f==null?void 0:f.workflow.app_id)||((O=f==null?void 0:f.workflow.app)===null||O===void 0?void 0:O.id),app:f==null?void 0:f.workflow.app,inputs:f==null?void 0:f.inputs,owningTeamId:f==null?void 0:f.owning_team_id,isWorkflowApp:(D=f==null?void 0:f.workflow.app)===null||D===void 0?void 0:D.is_workflow_app,salesHomeWorkflowAppType:(E=f==null?void 0:f.workflow.app)===null||E===void 0?void 0:E.sales_home_workflow_app_type,title:(f==null?void 0:f.name)||(f==null?void 0:f.workflow.title)||(g==null?void 0:g.title)||(M==null?void 0:M.title),description:(f==null?void 0:f.description)||(f==null?void 0:f.workflow.description)||(g==null?void 0:g.description)||(M==null?void 0:M.description),appCollaborators:(g==null?void 0:g.collaborators)||(M==null?void 0:M.appCollaborators),shareUrl:(f==null?void 0:f.share_url)||(M==null?void 0:M.shareUrl)}},"getCommonMetadataFromTriggerAndWorkflow"),l=u((f,g,M)=>({...i(f,g,M),triggerType:s.M.Shortcut,url:f.shortcut_url}),"createLinkShortcut"),_=u((f,g,M)=>({...i(f,g,M),triggerType:s.M.Webhook}),"createWebhookShortcut"),d=u((f,g,M)=>({...i(f,g,M),triggerType:s.M.External}),"createExternalShortcut"),r=u((f,g,M)=>{const{eventType:A,channelIds:O,teamIds:D,filter:E}=(0,a.t)(f),C={eventType:A,channelIds:O,teamIds:D,filter:E};return{...i(f,g,M),triggerType:s.M.Event,event:C}},"createEventShortcut"),m=u((f,g,M)=>{const A=(0,a.t)(f.schedule);return{...i(f,g,M),triggerType:s.M.Scheduled,schedule:A}},"createScheduledShortcut"),h=u((f,g,M)=>{var A,O,D;return{...i(f,g,M),triggerType:s.M.Service,serviceName:(D=(O=f==null||(A=f.service_config)===null||A===void 0?void 0:A.function.app)===null||O===void 0?void 0:O.name)!==null&&D!==void 0?D:""}},"createServiceShortcut"),v=u((f,g,M)=>i(f,g,M),"createUnknownShortcut"),y=u(f=>{let{passedShortcutInfo:g,trigger:M,workflow:A}=f;return(0,o.G)(M)?(0,n.BI)(M)?l(M,A,g):(0,n.QW)(M)?r(M,A,g):(0,n.uS)(M)?m(M,A,g):(0,n.A4)(M)?d(M,A,g):(0,n.cS)(M)?_(M,A,g):(0,n.O4)(M)?h(M,A,g):v(M,A,g):v(void 0,A,g)},"createShortcutFromTriggerAndWorkflow"),I=u(f=>{try{return JSON.stringify(f)}catch(g){throw(0,c.Wo)().error("stringify failed for workflow/trigger obj shortcut info"),g}},"memoizeCacheKeyResolver"),T=(0,t.A)(y,I)},8808892924:(j,p,e)=>{"use strict";e.d(p,{i:()=>S});var t=e(3134334389),n=e(7562930286),s=e(5255740490),a=e(7715417323),c=e(3391133100),o=e(6023831373),i=e(8847766420),l=e(3288846409),_=e(6533394955),d=e(6470070112),r=e(4775127335),m=e(1563996154),h=e(5286203919),v=e(1766818988),y=e(9548972574),I=e(8683010724),T=e(543174729);const f=t.memo(b=>{let{id:k}=b;return t.createElement("svg",{className:"sr-only"},t.createElement("clipPath",{id:k,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M0.03,1 h0.742 a0.258,0.2,0,0,0,0.258,-0.2 V0.2 a0.258,0.2,0,0,0,-0.258,-0.2 H0.03 a0.385,0.299,0,0,1,0.098,0.2 v0.6 A0.385,0.299,0,0,1,0.03,1"})))});var g=e(1407713935),M=e(9101533895),A=e(796111729);function O(){return O=Object.assign||function(b){for(var k=1;k<arguments.length;k++){var W=arguments[k];for(var N in W)Object.prototype.hasOwnProperty.call(W,N)&&(b[N]=W[N])}return b},O.apply(this,arguments)}u(O,"_extends");const D=2;function E(b){let{channelId:k,withTooltip:W,className:N,excludeIcon:V,excludeMemberOverflowCount:R,maxMembers:P=D,avatarSize:z=r.RG.verySmall,includeChannelNameInTooltip:$=!1,excludeSelf:x=!1}=b;const Y=(0,t.useMemo)(()=>`huddles-mask-${(0,c.r9)()}`,[]),ne=(0,t.useMemo)(()=>({"--huddles-mask":`url(#${Y})`,"--huddles-avatar-size":`${z}px`}),[Y,z]),re=(0,o.d4)(L=>(0,d.pt)(L)||(0,v.s)(L)),_e=(0,o.d4)(L=>(0,M.OL)(L,k)),G=(0,l.cw)(h.hc),ge=(0,l.cw)(h.vO),me=G===k&&(0,d.pZ)(ge),ue=(0,o.Z2)(L=>(0,y.A7)(L,k,x)),ae=ue.length,he=ae>P,ce=he?ae-2:0,ee=he?ue.slice(0,P):ue,J=(0,t.useMemo)(()=>{const L=$&&!(0,g.PC)(_e),K=t.createElement(T.A,{channelId:k,includeChannelName:L});return K||(0,A.Wo)().info("HUDDLE-FACEPILE",`channelId: ${k}, includeChannelName: ${L}`),K},[k,$,_e]);if(!re||!ae)return null;const X=t.createElement("div",{className:(0,s.A)("p-huddle_avatar_stack",N),"data-qa":"huddle_avatar_stack__avatars_container",style:ne},t.createElement(f,{id:Y}),!V&&t.createElement("div",{className:"p-huddle_avatar_stack__icon_container"},t.createElement(I.A,{name:"headphones",size:"18"})),ee.map((L,K)=>t.createElement(r.Ay,{key:L,"data-qa":"huddle_avatar_stack__member",className:(0,s.A)("p-huddle_avatar_stack__avatar",{"p-huddle_avatar_stack__avatar--first":K===0}),userId:L,size:z,renderCustomBadge:a.A,isInteractive:!1})),!R&&he&&t.createElement("div",{className:"p-huddle_avatar_stack__plus-member-count","data-qa":"huddle_avatar_stack__plus_member_count"},`+${ce}`)),F=W&&J?t.createElement(m.Ay,{tip:J},X):X;return me?null:F}u(E,"HuddleAvatarStackContent"),E.displayName="HuddleAvatarStackContent";const C=t.memo(E),S=t.memo(b=>{const{channelId:k}=b,W=(0,o.d4)(P=>(0,y.LY)(P,k)),N=(0,l.cw)(h.l4),V=(0,l.cw)(h.hc),R=(0,o.d4)(i.ZT);if(!W)return null;if(V===k){const P=(0,_.getStoreInstanceByTeamId)(N||R);return t.createElement(n.Kq,{store:P},t.createElement(C,O({},b)))}return t.createElement(C,O({},b))})},3496486794:(j,p,e)=>{"use strict";e.d(p,{A:()=>x,g:()=>z});var t=e(3134334389),n=e(735940183),s=e(9679390338),a=e.n(s),c=e(4553218033),o=e.n(c),i=e(5475210953),l=e.n(i),_=e(7485089530),d=e.n(_),r=e(3342291988),m=e.n(r),h=e(9631995895),v=e.n(h),y=e(5908540923),I=e.n(y),T=e(553949882),f=e.n(T),g=e(7000154057),M=e.n(g),A=e(1672115571),O=e.n(A),D=e(7234375712),E=e.n(D),C=e(4136357865),S=e.n(C),b=e(8514307482),k=e.n(b),W=e(5738074488),N=e.n(W),V=e(3607863955),R=e.n(V);const P=new n.Ay("huddles"),z=[{key:"NONE",preview:I()},{key:"BLUR",preview:I()},{key:"LIVING_ROOM",url:N(),preview:R()},{key:"REMOTE_WORK",url:S(),preview:k()},{key:"TOKYO_SIGHT",url:O(),preview:E()},{key:"GYM",url:f(),preview:M()},{key:"HOME",url:m(),preview:v()},{key:"OFFICE",url:l(),preview:d()},{key:"BEACH",url:a(),preview:o()}],x=u(()=>(0,t.useMemo)(()=>z.map(ne=>{let re,_e;switch(ne.key){case"NONE":re=P.t("No Background",{fallbackHash:"e47fc484f6e2f4bb4d93eff83f6dd16ed8da67a6",fallbackHashNs:"canvas"});break;case"BLUR":re=P.t("Blur",{fallbackHash:"900aa998d3550d438fc20a414d3938fc3a1630ab",fallbackHashNs:"canvas"});break;case"LIVING_ROOM":re=P.t("Living Room",{fallbackHash:"c7b60f3edf3318e80575d5e28c1ce24aa99a9025",fallbackHashNs:"canvas"}),_e=P.t("Art by Haley Tippmann",{fallbackHash:"e81e1f67d7c01d9dd464871bece52a2c87443190",fallbackHashNs:"canvas"});break;case"REMOTE_WORK":re=P.t("Remote Work",{fallbackHash:"42a38f6c51f22fed5086c12e2e747c90b17a2201",fallbackHashNs:"canvas"}),_e=P.t("Art by Hudson Christie",{fallbackHash:"4f5fdc61766b987aced4c5fc5854a0401f8e44ea",fallbackHashNs:"canvas"});break;case"TOKYO_SIGHT":re=P.t("Tokyo Sight",{fallbackHash:"eccff2285de126d6179c36b1fbc60c06b039a6e0",fallbackHashNs:"canvas"}),_e=P.t("Art by Luis Mendo",{fallbackHash:"4c1b393549c87100c23c7fe3e258fb7380736dfa",fallbackHashNs:"canvas"});break;case"GYM":re=P.t("Gym",{fallbackHash:"bc4359231d615dc65e372bac1bb5e0f2bf37639f",fallbackHashNs:"canvas"}),_e=P.t("Art by Hudson Christie",{fallbackHash:"4f5fdc61766b987aced4c5fc5854a0401f8e44ea",fallbackHashNs:"canvas"});break;case"HOME":re=P.t("Home",{fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65",fallbackHashNs:"canvas"});break;case"OFFICE":re=P.t("Office",{fallbackHash:"6c3a72eaf6235dfa967f2bba4dfc3e431c3e1180",fallbackHashNs:"canvas"});break;case"BEACH":re=P.t("Beach",{fallbackHash:"911fbb65335023a0800e5bf4a2dcc3ff13b2f9e3",fallbackHashNs:"canvas"});break;default:re="NO_NAME",_e="NO_DESCRIPTION"}return{...ne,name:re,description:_e}}),[]),"useGetVideoBackgrounds")},2457673737:(j,p,e)=>{"use strict";e.d(p,{LD:()=>a,O9:()=>c,Qs:()=>n,cg:()=>i,hX:()=>s});var t=e(4423055085);const n=450,s=450,a=25,c=500;let o;const i=u(()=>o||[s,n,a,c],"getHuddleCameraQualityConstants");(0,t.ul)("huddlesVideoConstants",{resetCameraQualityToDefaults:()=>{o=void 0},overrideCameraQuality:function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:c;o=[l,_,d,r]},maxOutCameraQuality:()=>{o=[1280,720,30,2500]}})},9680914051:(j,p,e)=>{"use strict";e.d(p,{$s:()=>oe,Bq:()=>D,CY:()=>E,Cu:()=>_e,K7:()=>g,Nh:()=>m,OC:()=>v,Pg:()=>re,Qp:()=>S,Rv:()=>G,VD:()=>o,W_:()=>h,XG:()=>ue,aN:()=>T,aW:()=>a,bQ:()=>W,bW:()=>c,bv:()=>C,cJ:()=>P,cP:()=>y,ck:()=>r,dP:()=>_,dk:()=>d,iE:()=>i,ir:()=>A,ne:()=>N,oI:()=>ge,pz:()=>f,qK:()=>l,qb:()=>I,qr:()=>s,sQ:()=>O,xA:()=>b,xN:()=>V,xl:()=>k,xx:()=>R,yL:()=>me});var t=e(735940183);const n=new t.Ay("huddles"),s="huddle_start_mark",a="huddle_rooms_join_start_mark",c="huddle_rooms_join_end_mark",o="huddle_render_player_tti",i="huddle_time_rooms_join",l="huddle_time_audio_session_started",_="huddle_time_first_presence_received",d="huddle_time_chime_session_started_connecting",r="huddle_time_chime_session_started",m="huddle_time_audio_video_observer_start",h="huddle_time_meeting_session_initialized",v="huddle_time_you_joined_sound",y="huddle_time_free_willy_sdk_init",I="huddle_time_voice_focus_loaded",T="huddle_time_voice_focus_start_loading",f="huddle_time_voice_focus_loading_time",g="huddle_quick_join",M="huddle_quick_join_failure",A="huddle_quick_join_credentials_received",O="huddle_quick_join_credentials_cleared",D="huddle_chime_credentials_received_mark",E="huddle_chime_sdk_bootstrap_time",C="huddle_chime_voice_focus_init_time",S=150,b="connect_to_media_service",k="fetch_credentials",W="huddles:time_to_interactive",N="huddles_metrics",V="reconnect_count",R="reconnect_count:success",P="reconnect_count:failure",z="start_attempt",$="huddles:start_attempt",x="start_huddle",Y="huddles:no_audio_input",ne="no_audio_input",re="A01",_e="prog_disc_huddles_explainer_tip_text",G=u(ae=>{let{experimentHuddlesLoungeMusicPlayerGroupOn:he}=ae;return[{label:he?n.t("Right when I join"):"",value:1,key:"when_joining"},{label:he?n.t("After 30 seconds"):"",value:30,key:"after_30_secs"},{label:he?n.t("After 1 minute"):"",value:60,key:"after_1_min"}]},"getMusicTimeoutPickerOptions"),ge=u(ae=>{let{experimentIsStandaloneHuddlesZChannelGroupOn:he}=ae;return[{label:he?n.t("Only people in your org"):"",value:"org_access",key:"org_access",subtext:he?n.t("Within your org, people in your workspace can join automatically. Other workspaces must request."):""},{label:he?n.t("By request only"):"",value:"knock_access",key:"knock_access",subtext:he?n.t("Everyone must knock, including people who are invited."):""}]},"getCalendarHuddleInvitePreferences"),oe=50,me=250,ue=50},5203103513:(j,p,e)=>{"use strict";e.d(p,{Mz:()=>s,NY:()=>a,VW:()=>n,_q:()=>t});const t="huddles_play_music_when_last",n="huddles_play_music_timeout",s="huddles_music_player_song_key",a="calendar_huddles_default_access_policy"},3622858354:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(7969928607),s=e(1030162945);const a=u(o=>{let{text:i,emojiSize:l=s.lw.SMALL}=o;return t.createElement(t.Fragment,null,t.createElement(n.A,{text:i,emojiSize:l}))},"FormattedHuddleTopic");a.displayName="FormattedHuddleTopic";const c=a},7723800688:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>r,Hi:()=>_,uV:()=>d});var t=e(3134334389),n=e(8300007136),s=e(6023831373),a=e(3288846409),c=e(6251210828),o=e(8239363237),i=e(5286203919),l=e(6470070112),_;(function(m){m.CANVAS_OPEN="canvas_open",m.CANVAS_JOIN="canvas_join",m.CANVAS_LEAVE="canvas_leave",m.CANVAS_TOOLBAR="canvas_toolbar",m.EMOJI_PICKER_OPEN="emoji_picker_open",m.EMOJI_SENT="emoji_sent",m.LINK_OPEN="link_open",m.FOCUS_OPEN="focus_open",m.FOCUS_CLOSE="focus_close",m.MINI_PLAYER_THREAD_BUTTON="mini_player_thread_button",m.MINI_PLAYER_OPEN_WINDOW_BUTTON="mini_player_open_window_button",m.MINI_PLAYER_VIEW_START="mini_player_view_start",m.MINI_PLAYER_VIEW_END="mini_player_view_end",m.SCREENSHARE_START="screenshare_start",m.SCREENSHARE_END="screenshare_end",m.THREAD_FLEXPANE_VIEW_START="thread_flexpane_view_start",m.THREAD_FLEXPANE_VIEW_END="thread_flexpane_view_end",m.THREAD_WINDOW_VIEW_START="thread_window_view_start",m.THREAD_WINDOW_VIEW_END="thread_window_view_end",m.THREAD_OPEN="thread_open",m.THREAD_CLOSE="thread_close",m.SELF_VIDEO="self_video",m.WINDOW_COMPACT_VIEW_START="window_compact_view_start",m.WINDOW_COMPACT_VIEW_END="window_compact_view_end",m.WINDOW_FULL_VIEW_START="window_full_view_start",m.WINDOW_FULL_VIEW_END="window_full_view_end",m.WINDOW_RESIZE_BUTTON="window_resize_button",m.BACKGROUND_CHANGED="background_changed",m.JUKEBOX_SONG_SELECTED="huddles_jukebox_song_selected",m.JUKEBOX_STOP_MUSIC="huddles_jukebox_stop_music",m.CAPTIONS_START="huddles_captions_start",m.CAPTIONS_STOP="huddles_captions_stop",m.INVITATION_SENT="invitation_sent",m.MUSIC_PLAYER_STARTED="huddles_music_player_start_music",m.MUSIC_PLAYER_SONG_SELECTED="huddles_music_player_song_selected",m.MUSIC_PLAYER_STOP="huddles_music_player_stop_music",m.NOTES_OPEN="notes_open",m.NOTES_CLOSE="notes_close",m.CHANNEL_SPACE_OPEN="channel_space_open",m.CHANNEL_SPACE_CLOSE="channel_space_close",m.CHANNEL_SPACE_AUTO_OPEN="channel_space_auto_open"})(_||(_={}));var d;(function(m){m.HUDDLE_MINI_PLAYER_BADGE_ICON="huddle_mini_player_badge_icon",m.HUDDLE_MINI_PLAYER_SCREENSHARE="huddle_mini_player_screenshare",m.HUDDLE_MINI_PLAYER_PEER_TILES="huddle_mini_player_peer_tiles",m.HUDDLE_MINI_PLAYER_OVERFLOW_BUTTON="huddle_mini_player_overflow_button",m.HUDDLE_MINI_PLAYER_OPEN_WINDOW_BUTTON="huddle_mini_player_open_window_button",m.HUDDLE_MINI_PLAYER_THREAD_BUTTON="huddle_mini_player_thread_button",m.CANVAS_WINDOW="canvas_window",m.LEAVE_CALL="leave_call",m.CLOSE_MODAL="close_modal",m.EMOJI_PICKER="emoji_picker",m.JUKEBOX_MENU="jukebox_menu",m.JUKEBOX_MUSIC_BANNER="jukebox_menu_banner",m.REACTION_BUBBLE="reaction_bubble",m.CHANGE_BACKGROUND_DIALOG="change_background_dialog",m.CONNECT_WITH_HUDDLES_CANVAS_EDUCATION="connect_with_huddles_canvas_education",m.HUDDLE_MINI_PLAYER_MUSIC_PLAYER="huddle_music_player",m.HUDDLE_WINDOW_MUSIC_PLAYER="huddle_window_music_player"})(d||(d={}));function r(){const m=(0,a.cw)(i.E9),h=(0,s.Z2)(g=>(0,l.$t)(g,{huddleId:m})),v=(0,a.cw)(l.kn,n.bN),y=(0,a.cw)(l.UE,n.bN),I=(0,s.d4)(g=>(0,c.Ec)(g,{huddleId:m})),T=(0,s.d4)(o.Tk);return(0,t.useMemo)(()=>({canvasThreadChannelId:h.canvas_thread_channel_id,canvasThreadId:h.canvas_thread_id,canvasHuddleSessionId:v.canvas_huddle_session_id,callsRoomId:y.room_id,callsChannelId:y.channel_id,uiPage:I?I.toString():null,fileId:T}),[h.canvas_thread_channel_id,h.canvas_thread_id,v.canvas_huddle_session_id,y.room_id,y.channel_id,I,T])}u(r,"useHuddleClogContext")},4233000497:(j,p,e)=>{"use strict";e.d(p,{A:()=>c,H:()=>a});var t=e(3134334389),n=e(6023831373),s=e(6470070112),a;(function(o){o.HUDDLES_SCHEDULED_ADD="huddles_scheduled_add",o.HUDDLES_SCHEDULED_NUX="huddles_scheduled_nux",o.HUDDLES_SCHEDULED_CANCEL="huddles_scheduled_cancel"})(a||(a={}));function c(o){const i=(0,n.Z2)(l=>o?(0,s.w1)(l,o):{});return(0,t.useMemo)(()=>({callsChannelId:i.channel_id,callsChannelType:i.channel_type,callsNumParticipants:i.num_participants,callsRoomId:i.room_id}),[i.channel_id,i.channel_type,i.num_participants,i.room_id])}u(c,"useHuddlesClogContext")},4385664584:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(7562930286),s=e(5950652755);const a=u(o=>{let{store:i,children:l}=o;const _=(0,t.useMemo)(()=>({...i,subscribe:d=>i.subscribeImmediate((0,s.A)(d,16))}),[i]);return t.createElement(n.Kq,{store:_}," ",l," ")},"BackgroundableProvider");a.displayName="BackgroundableProvider";const c=a},543174729:(j,p,e)=>{"use strict";e.d(p,{A:()=>A,z:()=>M});var t=e(3134334389),n=e(6023831373),s=e(4394722864),a=e(9548972574),c=e(1766818988),o=e(4742719639),i=e(5795074931),l=e(4775127335),_=e(3622858354),d=e(6470070112),r=e(3534324375),m=e(8701485242),h=e(735940183),v=e(9101533895),y=e(9289081806),I=e(796111729);const T=new h.Ay("huddles"),f=5,g=8,M=u(O=>{let{channelId:D}=O;const E=(0,n.Z2)(k=>(0,a.A7)(k,D,!1)),C=E.length,S=C>f,b=S?E.slice(0,f):E;return C===0?null:t.createElement("div",{className:"p-huddle_channel_tooltip__avatar_stack"},b.map((k,W)=>{const N=W===b.length-1;return t.createElement("div",{key:k,className:"p-huddle_channel_tooltip__avatar_container",style:{width:N?"auto":l.RG.medium-g}},t.createElement(l.Ay,{className:"p-huddle_channel_tooltip__avatar",userId:k,size:l.RG.medium,renderCustomBadge:s.Q,isInteractive:!1,additionalOverlay:S&&N?C-b.length+1:void 0}))}))},"HuddleTooltipAvatarStack");M.displayName="HuddleTooltipAvatarStack";function A(O){let{channelId:D,includeChannelName:E=!1}=O;const C=(0,n.d4)(ne=>(0,v.OL)(ne,D)),S=(0,n.d4)(ne=>{const re=(0,d.Bn)(ne,C),_e=(0,c.s)(ne),G=re||_e;return G||(0,I.Wo)().info("HUDDLE-FACEPILE",`isHuddlesEnabled: ${G}, doesChannelSupportHuddles: ${re}, isHuddlesEnabledForSponsoredTeam: ${_e}`),G}),b=(0,n.d4)(i.WR),k=(0,n.Z2)(ne=>(0,a.ft)(ne,D)),W=(0,n.d4)(d.df),N=(0,y.Mn)(C),V=k.length,P=V>f?k.slice(0,f):k,z=(0,n.Z2)(ne=>P.map(re=>({id:re.id,name:re.id===b?T.t("you",{fallbackHash:"8af56de68279cb6f5ed022f31af18b9fcdcc2e92",fallbackHashNs:"a11y"}):(0,r.sE)(ne,re)})).sort((re,_e)=>re.id===b?1:_e.id===b?-1:(0,m.Ay)(re.name,_e.name)).map(re=>{let{name:_e}=re;return _e})),$=(0,n.d4)(ne=>(0,o.o)(ne,D)),x=(0,t.useMemo)(()=>E?z.length===1?k[0].id===b?T.rt("Just you in the huddle #{channelName}",{fallbackHash:"9c06151657f5f165820e8137ffe359a9f128d6a4",channelName:N}):T.rt("{name} is in the huddle #{channelName}",{name:z[0],fallbackHash:"296abf823386caa202e6d84323121c5454a50ff0",channelName:N}):T.rt("{memberCount} people in the huddle #{channelName}",{memberCount:V,fallbackHash:"d8a4c5ef1bc88840241821fced733296db51cc36",channelName:N}):z.length===1?k[0].id===b?T.rt("Just you in the huddle"):T.rt("{name} is in the huddle",{name:z[0]}):T.rt("{memberCount} people in the huddle",{memberCount:V}),[E,z,V,N,k,b]);let Y=$!=null&&$.trim()?t.createElement(_.A,{text:$}):null;return k.length>=W&&(Y=T.t("Only {maxParticipants} people can join a huddle",{maxParticipants:W})),S?t.createElement("div",{className:"p-huddle_channel_tooltip"},t.createElement(M,{channelId:D}),t.createElement("div",{className:"margin_bottom_25","data-qa":"tooltip_action_text"},Y),t.createElement("div",{className:"c-tooltip__subtitle","data-qa":"tooltip_member_text"},x)):null}u(A,"HuddleChannelTooltip")},9477894139:(j,p,e)=>{"use strict";e.d(p,{A:()=>_,g:()=>l});var t=e(3134334389),n=e(8300007136),s=e(5253428843),a=e(9712681361),c=e(3837503631),o=e(2825968873);const i=(0,o.tZ)("HUDDLE-ERROR");var l;(function(d){d.Huddles="huddles",d.Sidebar="huddles_pro_max-sidebar",d.Flexpane="huddles_pro_max-flexpane",d.CompactWindow="huddles_pro_max-compact_window",d.LargeWindow="huddles_pro_max-large_window",d.WindowFooter="huddles_pro_max-window_footer",d.AlertBanner="huddles_pro_max-alert_banner",d.InviteWindow="huddles_invite_window",d.ControlStripButton="huddles_control_strip_button",d.ChannelHeader="huddles_channel_header",d.Composer="huddles_composer",d.HuddleSpecialReactions="huddle_special_reactions"})(l||(l={}));function _(d){let{children:r,onError:m,isQuiet:h=!0,shouldStopHuddle:v=!1,subtype:y=l.Huddles}=d;const I=(0,n.wA)(),T=(0,t.useCallback)(()=>{v&&I((0,s.A)({terminalState:a.M6.ClientUIError}))},[I,v]),f=(0,t.useCallback)(M=>{i.error(`${y} ${M}`),m?m():T()},[T,m,y]),g=h?c.H:c.A;return t.createElement(g,{subtype:y,onError:f},r)}u(_,"HuddleErrorBoundary")},4695727674:(j,p,e)=>{"use strict";e.d(p,{A:()=>G});var t=e(3134334389),n=e(8300007136),s=e(462591818),a=e(6023831373),c=e(825587348),o=e(8739505998),i=e(6470070112),l=e(9712681361),_=e(735940183),d=e(5363983309),r=e(9101533895),m=e(9289081806),h=e(5881236351),v=e(5286203919),y=e(3037015781),I=e(2350349607),T=e(3288846409),f=e(5332875232),g=e(3677514771),M=e(6839188756),A=e(6323355797),O=e(7914553163),D=e(5267010247),E=e(8822892075),C=e(7940058138),S=e(4096483543),b=e(6533394955),k=e(3810478625),W=e(6236252386),N=e(8193414630),V=e(3245843483);function R(ge,oe,me){const ue=(0,b.getStoreInstanceByTeamId)(me);if(!ue)return null;const ae=(0,S.A)(),he=(0,k.g)(ue.getState());if(!ge||ge===O.MX.TrialFetching)return null;const ce=(0,W.FK)(ge,he);switch(ge){case O.MX.TrialIneligible:return{text:ce,onClick:()=>{(0,V.Pxz)((0,A.m6)(ue.getState()))}};case O.MX.TrialEligible:return{text:ce,onClick:(0,W.w9)(ue.dispatch,oe)};case O.MX.TrialIneligibleUserCannotUpgrade:return{text:ce,onClick:()=>{if(ae){ue.dispatch((0,D.o)((0,E.ZF)(C.c.PaidBenefits)));return}(0,V.Pxz)((0,W.aD)(ge))}};case O.MX.TrialTeam:return{text:ce,onClick:()=>{if(ae){(0,W.uY)(ue.dispatch)();return}(0,V.Pxz)((0,W.aD)(ge))}};case O.MX.TrialExpiry:return{text:ce,onClick:()=>{(0,V.Pxz)((0,A.m6)(ue.getState(),{action:A.um.CHECKOUT}))}};default:(0,N.Kh)(ge)}}u(R,"freemiumPrimaryCtaAttributes");var P=e(8847766420);const z=new _.Ay("huddles");function $(ge){let{closeModal:oe}=ge;const me=(0,a.d4)(f.Q_),ue=A.zG.Vhq,ae=(0,O.Ay)({promoSubtype:ue}),he=(0,a.d4)(P.ZT)||"",ce=(0,t.useMemo)(()=>R(ae,ue,he),[ae,ue,he]),ee=(0,t.useCallback)(()=>{ce==null||ce.onClick(),oe==null||oe()},[oe,ce]);return!ce||ae!==O.MX.TrialEligible&&ae!==O.MX.TrialIneligible&&ae!==O.MX.TrialIneligibleUserCannotUpgrade?null:t.createElement(c.A,{overlayClassName:"p-huddle_error_modal__overlay",onClose:oe,onSubmit:ee,showCancelButton:!0,cancelButtonText:z.t("Dismiss"),showSubmitButton:!0,title:me?z.t("Your huddle has ended"):"Your huddle has ended",submitButtonText:ce.text},me?z.t("On the free version of Slack, your huddles are limited to {min} minutes. You may restart the huddle if you\u2019d like.",{min:30}):"On the free version of Slack, your huddles are limited to 30 minutes. You may restart the huddle if you\u2019d like.")}u($,"HuddleTimeLimitReachedModal"),$.displayName="HuddleTimeLimitReachedModal";const x=new _.Ay("huddles");function Y(ge){let{errorCode:oe,isJoinError:me,closeModal:ue}=ge;var ae;const he=(0,n.wA)(),ce=(ae=(0,T.cw)(v.Qn))===null||ae===void 0?void 0:ae.channelId,ee=(0,a.d4)(f.TM),J=(0,a.d4)(fe=>(0,r.OL)(fe,ce)),X=(0,a.d4)(fe=>(0,y.uz)(J)?(0,m.SB)(fe,J,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}):void 0),F=(0,a.d4)(i.df),L=x.rt("This huddle already has {maxAmount} people, which is the maximum allowed.",{maxAmount:F}),K=(0,t.useCallback)(()=>{he((0,h.RX)())},[he]),B=(0,t.useCallback)(()=>{he((0,h.e$)())},[he]),Q=(0,I.V)(J),q=(0,a.d4)(g.H7),le=u(fe=>t.createElement(o.A,{target:"_blank",href:`${(0,M.Zl)(q)}help/requests/new`},fe),"renderContactUsLink");if(!(0,a.d4)(i.pl)&&!ee)return null;if(oe===l.M6.FreemiumMaxParticipants)return K(),null;const Ie=(()=>{switch(oe){case l.M6.MaxParticipants:return L;case l.M6.AudioJoinedFromAnotherDevice:return x.rt("To keep things nice and neat, you\u2019re no longer in the huddle here.");case l.M6.ChimeMeetingEnded:return me?x.rt("The Huddle has ended."):Q?x.rt("We ended the huddle since you were the only one there for a bit."):x.rt("We ended your huddle since you were the only one there for a bit.");case l.M6.PermissionDenied:return ee?x.rt("You are unable to join the Huddle as you do not have permission to join Huddles."):null;case s.uZ.CallEnded:return x.rt("The Huddle has ended.");case l.M6.DeviceLocked:return x.rt("When your computer locks, you automatically leave any huddle you\u2019re in. You can change this in <a>Preferences</a>.",null,fe=>{let{text:Z,tag:se}=fe;return se==="a"?t.createElement(o.A,{onClick:B},Z):null});case l.M6.FailedStartingRecording:case l.M6.FailedResumingRecording:return x.rt("We\u2019re not sure what went wrong, but try giving it another go in a few minutes.");case l.M6.FailedStartingRecordingUser:case l.M6.FailedResumingRecordingUser:return x.rt("It looks like not everyone on this huddle has access to this feature just yet.");case l.M6.FailedPausingRecording:return x.rt("We\u2019re not sure what went wrong, but please give it another go. If this continues to be an issue, you can try deleting the notes, or <a>contact us</a> for support.",null,fe=>{let{text:Z,tag:se}=fe;return se==="a"?le(Z):null});case l.M6.FailedDeletingRecording:return x.rt("We\u2019re not sure what went wrong, but please give it another go. If this continues to be an issue, you can try ending the huddle and deleting the canvas once it\u2019s ready, or <a>contact us</a> for support.",null,fe=>{let{text:Z,tag:se}=fe;return se==="a"?le(Z):null});default:return x.rt("You\u2019ll have to go back and give it another try.")}})(),De=(()=>me?x.t("Can\u2019t join the huddle"):oe===l.M6.AudioJoinedFromAnotherDevice?x.t("You\u2019ve joined the huddle on a different device"):oe===l.M6.ChimeMeetingEnded&&!me?Q?x.t("You\u2019re no longer in a huddle in #{channelDisplayName}",{channelDisplayName:X}):x.t("You\u2019re no longer in a huddle"):oe===l.M6.DeviceLocked?x.t("You\u2019re no longer in a huddle"):oe===l.M6.FailedStartingRecording||oe===l.M6.FailedStartingRecordingUser?x.rt("Couldn\u2019t start Slack AI notes"):oe===l.M6.FailedResumingRecording||oe===l.M6.FailedResumingRecordingUser?x.rt("Couldn\u2019t resume Slack AI notes"):oe===l.M6.FailedPausingRecording?x.rt("Couldn\u2019t stop Slack AI notes"):oe===l.M6.FailedDeletingRecording?x.rt("Couldn\u2019t delete Slack AI notes"):x.t("Something went wrong with your huddle"))(),pe=(()=>oe===l.M6.AudioInputStreamEnded||oe===l.M6.MaxParticipants||oe===l.M6.ChimeMeetingEnded&&!me?x.t("Got It"):x.t("OK"))();return t.createElement(c.A,{overlayClassName:"p-huddle_error_modal__overlay",onClose:ue,onSubmit:ue,showCancelButton:!1,showSubmitButton:!0,title:De,submitButtonText:pe},Ie)}u(Y,"HuddleErrorModal"),Y.displayName="HuddleErrorModal";const ne={HuddleErrorModal:Y},re="huddle_error_modal";function _e(ge){switch(ge.errorCode){case l.M6.ChimeMeetingEndedFromTimeLimit:return $(ge);default:return Y(ge)}}u(_e,"HuddleErrorModalManager");const G=(0,d.A)(_e,{modalName:re,allowMultiple:!1,isStackable:!0})},5933621899:(j,p,e)=>{"use strict";e.d(p,{Wx:()=>z,YM:()=>W});var t=e(2003990933),n=e(3134334389),s=e(8300007136),a=e(735940183),c=e(6023831373),o=e(825587348),i=e(5363983309),l=e(1407713935),_=e(9101533895),d=e(8661826718),r=e(8286248123),m=e(1779488764),h=e.n(m),v=e(7268021173),y=e(3677514771),I=e(6839188756),T=e(8871937520),f=e(6244014364),g=e(4481313819),M=e(7003004874),A=e(6259241484),O=e(4902318931),D=e(2938177083),E=e(1273480023);function C(){return C=Object.assign||function($){for(var x=1;x<arguments.length;x++){var Y=arguments[x];for(var ne in Y)Object.prototype.hasOwnProperty.call(Y,ne)&&($[ne]=Y[ne])}return $},C.apply(this,arguments)}u(C,"_extends");const S=new a.Ay("huddles"),b={elementName:"cancel",onClick:{enableClogAction:!0}},k={elementName:"start-huddle",onClick:{enableClogAction:!0}},W=u($=>{let{channelId:x,channelType:Y,channelMembersCount:ne,isTeamOnTrial:re,isFreeTeam:_e,trialExpirationTS:G,handleOnSubmit:ge,closeModal:oe,UNSAFE_parentSelector:me,isCurrentTeamSponsoredInSlackConnectChannel:ue=!1}=$;const ae=S.t("Continue this conversation in a huddle",{fallbackHash:"e5dda045c4edc7e85d1a347f7051533c494e1904"}),he=n.createElement(d.A,{channelId:x});let ce,ee;switch(Y){case l.Cu.mpim:re?(ce=S.rt("Use this message as a jumping off point for a huddle with anyone in this conversation. Huddles with more than 2 people are a paid feature, available with your free trial through {trialEndDate}.",{trialEndDate:(0,T.Pd)(G),fallbackHash:"2955534d96227983f0f85447fb8f3f044131c94f"}),ee=f.UiComponentVariant.TRIAL_TEAM):_e?(ce=S.rt("Use this message as a jumping off point for a huddle. On the free version of Slack, one other person from the conversation will be able to join."),ee=f.UiComponentVariant.FREE_TEAM):(ce=S.rt("Use this message as a jumping off point for a huddle. All <strong>{channelMembersCount}</strong> members of this conversation will be able to join.",{channelMembersCount:ne}),ee=f.UiComponentVariant.PAID_TEAM);break;case l.Cu.im:ce=S.t("Use this message as a jumping off point for a huddle.",{fallbackHash:"563c2f46cf094d773cfedd52e582a385faea3753"});break;default:re&&!ue?(ce=S.rt("Use this message as a jumping off point for a huddle with anyone in <strong>{channelName}</strong>. Huddles with more than 2 people are a paid feature, available with your free trial through {trialEndDate}.",{channelName:he,trialEndDate:(0,T.Pd)(G)}),ee=f.UiComponentVariant.TRIAL_TEAM):_e&&!ue?(ce=S.rt("Use this message as a jumping off point for a huddle. On the free version of Slack, one other person from <strong>{channelName}</strong> will be able to join.",{channelName:he}),ee=f.UiComponentVariant.FREE_TEAM):(ce=S.rt("Use this message as a jumping off point for a huddle. All <strong>{channelMembersCount}</strong> members of <strong>{channelName}</strong> will be able to join.",{channelMembersCount:ne,channelName:he}),ee=f.UiComponentVariant.PAID_TEAM)}return n.createElement(g.A,{uiComponentName:f.UiComponentName.HUDDLES_IN_THREAD_SPEEDBUMP,eventId:f.EventId.CANVAS_EVENT,uiComponentVariant:ee},n.createElement(o.A,{onClose:oe,"data-qa":"huddle_in_thread_speed_bump_modal",submitButtonText:S.t("Start Huddle",{fallbackHash:"d9a37dbb2c259a1534d34ec9a94d2e9013f7b445"}),title:ae,onSubmit:ge,submitAutoClogProps:k,onCancel:oe,cancelAutoClogProps:b,headerImageSrc:h(),className:"p-huddle_in_thread_speed_bump_modal",headerImageAlt:S.t("Brainstorm, make decisions or have a lightweight catch-up with whoever\u2019s online."),UNSAFE_parentSelector:me},n.createElement("p",{className:"p-huddle_in_thread_speed_bump_modal__body_text",id:"huddle-in-thread-speed-bump-modal-body-text"},ce)))},"BaseHuddleInThreadSpeedBumpModalBase");W.displayName="BaseHuddleInThreadSpeedBumpModalBase";const N=u($=>{let{channelId:x,onConfirm:Y,closeModal:ne}=$;const re=(0,s.wA)(),_e=(0,c.d4)(ee=>(0,_.OL)(ee,x)),G=(0,l.mz)(_e),ge=(0,c.d4)(ee=>(0,r.q8)(ee,x)),oe=(0,t.A)(ge,"counts.member_count")||0,me=(0,I.tc)((0,c.d4)(y.H7)),ue=(0,c.d4)(v.iH),ae=(0,c.d4)(v.Sk),he=(0,c.d4)(ee=>(0,E.u)(ee,_e));(0,n.useEffect)(()=>(re((0,M.A)({notificationName:A.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL,action:A.hw.IMPRESSION})),()=>{re((0,D.A)({spaceName:A.xu.LAUNCH_MODAL,action:A.hw.DISMISS}))}),[re]);const ce=(0,n.useCallback)(()=>{Y(),ne==null||ne()},[ne,Y]);return n.createElement(W,{channelType:G,channelMembersCount:oe,isFreeTeam:me,isTeamOnTrial:ue,trialExpirationTS:ae,handleOnSubmit:ce,channelId:x,onConfirm:Y,closeModal:ne,isCurrentTeamSponsoredInSlackConnectChannel:he})},"HuddleInThreadSpeedBumpModalBase");N.displayName="HuddleInThreadSpeedBumpModalBase";const V={spaceName:A.xu.LAUNCH_MODAL,notifications:{[A.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL]:{component:N}}},R=u($=>{let{channelId:x,onConfirm:Y,closeModal:ne}=$;return n.createElement(O.Ay,C({},V,{channelId:x,onConfirm:Y,closeModal:ne}))},"HuddleInThreadSpeedBumpModal");R.displayName="HuddleInThreadSpeedBumpModal";var P=null;const z=(0,i.A)(R)},7843142872:(j,p,e)=>{"use strict";e.d(p,{D7:()=>r,Lk:()=>v,Vp:()=>y,g6:()=>h});var t=e(3134334389),n=e(1031947056),s=e(6533394955),a=e(4423055085),c=e(8300007136),o=e(6023831373),i=e(5492559860),l=e(9719951405),_=e(2832209848);let d=1;const r=u((I,T)=>{let{experimentHuddlesDiscoveryCallsGroupTreatment:f=!1,component:g=_.G7.HuddleCallNudgesBanner}=T;if(!f||!(0,l.kI)(I,g,_.X8.Click)&&!(0,l.kI)(I,g,_.X8.Dismiss))return!1;var M;const A=(M=(0,l.ky)(I,g,_.X8.Click))!==null&&M!==void 0?M:0;var O;const D=(O=(0,l.ky)(I,g,_.X8.Dismiss))!==null&&O!==void 0?O:0;return!(A>=d||D>=d)},"shouldShowHuddleDiscoveryBanner"),m=u(function(){let{experimentHuddlesDiscoveryCallsGroupTreatment:I=!1,component:T=UiComponent.HuddleCallNudgesBanner}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{experimentHuddlesDiscoveryCallsGroupTreatment:!1,component:UiComponent.HuddleCallNudgesBanner};const f=useDispatch();useEffect(()=>{I&&f(loadUserInteractions({interactions:[{component:T,type:InteractionType.Click},{component:T,type:InteractionType.Dismiss}],useCache:!0,cacheFilter:hasLoadedInteraction,reason:"huddle-discovery-calls"}))},[f,I,T])},"useHuddleDiscoveryCallsUserInteractions"),h=(0,n.Ay)("Send interaction to dismiss nudge",(I,T,f)=>{let{experimentHuddlesDiscoveryCallsGroupTreatment:g,interactionType:M}=f;if(!g)return;const A=T();(0,l.ky)(A,_.G7.HuddleCallNudgesBanner,M)>d||I((0,i.z)({component:_.G7.HuddleCallNudgesBanner,type:M,reason:"huddle-discovery-calls"}))});h.meta={name:"createThunk",key:"createThunkincrementUserInteractionCount",description:"Send interaction to dismiss nudge"};const v=u(I=>{let{component:T,type:f}=I;const g=(0,c.wA)();return(0,t.useEffect)(()=>{g((0,i.b)({interactions:[{component:T,type:f}],reason:T}))},[g,T,f]),(0,o.d4)(M=>(0,l.kI)(M,T,f)?(0,l.PU)(M,T):null)},"useTrialProBannerInteraction"),y=(0,n.Ay)("Record trial pro banner interaction",(I,T,f)=>{let{component:g,type:M}=f;return I((0,i.z)({component:g,type:M,reason:g}))});y.meta={name:"createThunk",key:"createThunkrecordTrialProBannerInteraction",description:"Record trial pro banner interaction"},(0,a.ul)("huddleInteractionUtils",{addOneMoreThanClickCount:I=>{const T=(0,s.getStateByTeamId)(I);d=(0,l.ky)(T,_.G7.HuddleCallNudgesBanner,_.X8.Click)+1},addOneMoreThanDismissCount:I=>{const T=(0,s.getStateByTeamId)(I);d=(0,l.ky)(T,_.G7.HuddleCallNudgesBanner,_.X8.Dismiss)+1}})},8330768070:(j,p,e)=>{"use strict";e.d(p,{G$:()=>S,Oe:()=>N,Y6:()=>k});var t=e(3134334389),n=e(8300007136),s=e(3037015781),a=e(6023831373),c=e(8661826718),o=e(6496493732),i=e(7138682671),l=e(3989454579),_=e(4481313819),d=e(1407713935),r=e(5363983309),m=e(5795074931),h=e(9101533895),v=e(8286248123),y=e(9289081806),I=e(8798294025),T=e(8921478798),f=e(6244014364),g=e(735940183),M=e(387484329),A=e(2047021170);function O(){return O=Object.assign||function(V){for(var R=1;R<arguments.length;R++){var P=arguments[R];for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&(V[z]=P[z])}return V},O.apply(this,arguments)}u(O,"_extends");const D=new g.Ay("huddles"),E={elementName:"huddles_confirmation_dialog_ok",eventId:f.EventId.HUDDLES_JOIN_CONFIRM,onClick:{enableClogAction:!0}},C={elementName:"huddles_confirmation_dialog_cancel",eventId:f.EventId.HUDDLES_JOIN_CANCEL,onClick:{enableClogAction:!0}},S=u(V=>{let{children:R,closeModal:P,onConfirm:z,uiComponentName:$,...x}=V;const Y=(0,t.useCallback)(()=>{z(),P==null||P()},[P,z]);return t.createElement(_.A,{uiComponentName:$,eventId:f.EventId.HUDDLES_CONFIRM_DIALOG_SHOWN,clogImpression:!0},t.createElement(o.A,O({overlayClassName:"p-huddle_join_modal__overlay","data-qa":"huddle_join_modal",onCancel:P,onClose:P,onSubmit:Y,submitButtonText:D.t("OK"),submitAutoClogProps:E,cancelAutoClogProps:C},x),R))},"HuddleJoinModal");S.displayName="HuddleJoinModal";const b=u(V=>{let{prevChannelId:R,nextChannelId:P,onConfirm:z,closeModal:$}=V;const x=(0,a.d4)(ge=>(0,h.OL)(ge,R)),Y=(0,a.Z2)(ge=>{if(!x)return[];let oe=[];if((0,d.LI)(x))oe=[(0,I.e)(x)];else if((0,d.yz)(x)){const me=(0,y.Ug)(x);if(me&&me.length){const ue=(0,m.WR)(ge);oe=me.filter(ae=>ae!==ue)}}return oe.map(me=>(0,T.I)(ge,me))}),ne=(0,a.d4)(ge=>(0,h.OL)(ge,P)),re=(0,a.Z2)(ge=>{if(!ne)return[];let oe=[];if((0,d.LI)(ne))oe=[(0,I.e)(ne)];else if((0,d.yz)(ne)){const me=(0,y.Ug)(ne);if(me&&me.length){const ue=(0,m.WR)(ge);oe=me.filter(ae=>ae!==ue)}}return oe.map(me=>(0,T.I)(ge,me))});let _e=D.rt("You\u2019re already in a huddle.");Y.length?_e=D.rt("You\u2019re already in a huddle with {listOfPersons}.",{listOfPersons:(0,g.jd)(Y).join("")}):x&&(0,s.uz)(x)&&(_e=D.rt("You\u2019re already in a huddle in {channel}.",{channel:t.createElement(c.A,{channel:x,channelId:R})}));let G=D.rt("Would you like to leave it and join this one instead?");return re.length?G=D.rt("Would you like to leave it and join a huddle with {listOfPersons} instead?",{listOfPersons:t.createElement("strong",null,(0,g.jd)(re).join(""))}):ne&&(0,s.uz)(ne)&&(G=D.rt("Would you like to leave it and join a huddle in {channel} instead?",{channel:t.createElement("strong",null,t.createElement(c.A,{channel:ne,channelId:P}))})),t.createElement(S,{uiComponentName:f.UiComponentName.HUDDLES_CONFIRMATION_DIALOG,title:D.t("Switch to this huddle?"),onConfirm:z,closeModal:$},t.createElement("p",null,_e," ",G))},"HuddleSwitchModal");b.displayName="HuddleSwitchModal";const k=(0,r.A)(b),W=u(V=>{let{channelId:R,onConfirm:P,closeModal:z}=V;const $=(0,a.d4)(ue=>(0,h.OL)(ue,R));var x;const Y=(0,a.d4)(ue=>{var ae,he;return(x=(ae=(0,v.q8)(ue,R))===null||ae===void 0||(he=ae.counts)===null||he===void 0?void 0:he.member_count)!==null&&x!==void 0?x:0}),ne=(0,a.d4)(ue=>(0,A.ty)(ue,"huddles_show_shouty_rooster")),[re,_e]=(0,t.useState)(ne),G=(0,n.wA)(),ge=$&&(0,s.uz)($)&&t.createElement("strong",null,t.createElement(c.A,{channelId:R,channel:$})),oe=Y>1?D.rt("You\u2019ll be starting a huddle that all {count} members of {channel} can join.",{count:t.createElement("strong",null,Y),channel:ge}):D.rt("You\u2019ll be starting a huddle that every member of {channel} can join.",{channel:ge}),me=(0,t.useCallback)(()=>{const ue=!re;_e(ue),G((0,M.AZ)({pref:"huddles_show_shouty_rooster",value:ue}))},[re,G]);return t.createElement(S,{uiComponentName:f.UiComponentName.HUDDLES_SHOUTY_ROOSTER_DIALOG,title:D.t("Start a huddle in this channel?"),onConfirm:P,closeModal:z},t.createElement("p",null,oe),t.createElement(i.A,{text:D.t("Don\u2019t show this message again."),type:"inline",cursor:"pointer"},t.createElement(l.A,{name:"ns",checked:!re,onChange:me,"data-qa":"huddle_join_modal_show_checkbox"})))},"HuddleShoutyRoosterModal");W.displayName="HuddleShoutyRoosterModal";const N=(0,r.A)(W)},3143500799:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3134334389),n=e(5255740490);const s=t.memo(i=>{let{className:l,iconClassName:_,allowMuteAnimation:d,wasMicEverEnabled:r,isMicStrikethroughRed:m}=i;return t.createElement("div",{className:(0,n.A)("p-huddle_mic_icon p-huddle_mic_icon__container",l),"data-qa":"huddle_mic_icon_unmute"},t.createElement("svg",{className:_,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},t.createElement("path",{d:"M5.35086 10.3436C5.12445 9.77312 5 9.15109 5 8.5V8.25C5 7.83579 4.66421 7.5 4.25 7.5C3.83579 7.5 3.5 7.83579 3.5 8.25V8.5C3.5 9.60794 3.7772 10.6511 4.26603 11.564L5.35086 10.3436ZM7.62904 14.554C8.36362 14.8419 9.16335 15 10 15C13.5899 15 16.5 12.0899 16.5 8.5V8.25C16.5 7.83579 16.1642 7.5 15.75 7.5C15.3358 7.5 15 7.83579 15 8.25V8.5C15 11.2614 12.7614 13.5 10 13.5C9.55549 13.5 9.12453 13.442 8.71427 13.3331L7.62904 14.554Z",fill:"currentColor"}),t.createElement("path",{d:"M10 14.25V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.25 17.25L7.75 17.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.1271 2.72031C11.5376 2.2685 10.8001 2 10 2C8.067 2 6.5 3.567 6.5 5.5V8.5C6.5 8.67302 6.51255 8.84311 6.5368 9.0094L8 7.3633V5.5C8 4.39543 8.89543 3.5 10 3.5C10.4175 3.5 10.8051 3.62793 11.1258 3.84674L12.1271 2.72031ZM9.90052 11.9986C9.93357 11.9995 9.96673 12 10 12C11.933 12 13.5 10.433 13.5 8.5V7.9492L9.90052 11.9986Z",fill:"currentColor"}),t.createElement("path",{className:(0,n.A)({"p-huddle_mic_icon__microphone--slash_animated":d&&r,"p-huddle_mic_icon__microphone--slash":m}),d:"M4 15.25L15.5 2.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})))}),a=t.memo(i=>{let{volumeLevel:l=0,className:_,iconClassName:d}=i;const[r,m]=(0,t.useState)(0);return(0,t.useEffect)(()=>{if(l!=="auto"){m(Math.min(1,l||0));return}const h=setInterval(()=>{const v=(Math.floor(Math.random()*100)+1)/100;m(v)},100);return()=>{clearInterval(h)}},[l]),t.createElement("div",{className:(0,n.A)("p-huddle_mic_icon p-huddle_mic_icon__container",_),"data-qa":"huddle_mic_icon_mute"},t.createElement("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},t.createElement("path",{className:"p-huddle_mic_icon__microphone--input_level",style:{transform:`scaleY(${r})`},d:"M10 11V3",stroke:"currentColor",strokeWidth:"4"}),t.createElement("path",{d:"M7.25 5.5C7.25 3.98122 8.48122 2.75 10 2.75V2.75C11.5188 2.75 12.75 3.98122 12.75 5.5V8.5C12.75 10.0188 11.5188 11.25 10 11.25V11.25C8.48122 11.25 7.25 10.0188 7.25 8.5V5.5Z",stroke:"currentColor",strokeWidth:"1.5"}),t.createElement("path",{d:"M4.25 8.25V8.5C4.25 11.6756 6.82436 14.25 10 14.25V14.25C13.1756 14.25 15.75 11.6756 15.75 8.5V8.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M10 14.25V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.25 17.25L7.75 17.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})))}),c=u(i=>{let{type:l,volumeLevel:_,className:d,iconClassName:r,allowMuteAnimation:m=!1,isMicStrikethroughRed:h=!1}=i;const[v,y]=(0,t.useState)(l==="unmuted");return(0,t.useEffect)(()=>{l==="unmuted"&&y(!0)},[l]),l==="unmuted"?t.createElement(a,{className:d,iconClassName:r,volumeLevel:_}):t.createElement(s,{className:d,iconClassName:r,allowMuteAnimation:m,wasMicEverEnabled:v,isMicStrikethroughRed:h})},"HuddleMicIcon");c.displayName="HuddleMicIcon";const o=t.memo(c)},5043394918:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3134334389),n=e(7715417323),s=e(1829947126),a=e(1337358413),c=e(3143500799);function o(i){let{peerId:l,isMicrophoneEnabled:_,className:d,allowMuteIconAnimation:r=!1,isMicStrikethroughRed:m=!1}=i;const[h,v]=(0,t.useState)(0);return(0,t.useEffect)(()=>{if(!_)return n.A;const y=u(I=>{const T=(0,a.Ft)(I);v(T)},"onLevelUpdated");return s.A.subscribe(l,y),()=>{s.A.unsubscribe(l,y)}},[l,_]),t.createElement(c.A,{type:_?"unmuted":"muted",volumeLevel:h,className:d||"",allowMuteAnimation:r,isMicStrikethroughRed:m})}u(o,"HuddleMicVolumeIndicator")},438845125:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(3134334389),n=e(444524526);function s(c){let{slackId:o,displayName:i}=c;return!o&&!i?null:o?t.createElement(n.A,{isBold:!1,id:o}):t.createElement("span",null,i)}u(s,"HuddleMsgTextUser"),s.displayName="HuddleMsgTextUser";const a=s},1051015021:(j,p,e)=>{"use strict";e.d(p,{V:()=>y});var t=e(3134334389),n=e(7120433284),s=e(9548972574),a=e(6023831373),c=e(735940183),o=e(5255740490),i=e(7914553163),l=e(6005700845),_=e(6323355797),d=e(7949425452),r=e(3810478625),m=e(7573583373),h=e.n(m);const v=new c.Ay("huddles");function y(I){let{showProBadge:T,className:f}=I;const g=(0,a.d4)(s.qr),M=(0,a.d4)(r.g),A=_.zG.Vhq,O=(0,i.Ay)({promoSubtype:A}),D=(0,t.useMemo)(()=>t.createElement(l.A,{useLink:!0,variant:O,promoSubtype:_.zG.Vhq,ctaClassName:h().cta}),[O]);return!g||!M||O!==i.MX.TrialEligible&&O!==i.MX.TrialIneligible&&O!==i.MX.TrialIneligibleUserCannotUpgrade?null:t.createElement("div",{className:(0,o.A)(h().container,f)},t.createElement(n.A,null,t.createElement("div",{className:h().alertBanner},T&&t.createElement(d.Ay,{size:d.vj.Medium,className:h().proBadge}),t.createElement("span",null,v.t("On the free version of Slack, your huddles are limited to {min} minutes.",{min:30}),"\xA0",D))))}u(y,"HuddleTimeLimitUpgradeAlert"),y.displayName="HuddleTimeLimitUpgradeAlert"},8320929653:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>L,e3:()=>ee,lc:()=>J});var t=e(9706240641),n=e.n(t),s=e(3134334389),a=e(5255740490),c=e(8300007136),o=e(6023831373),i=e(3288846409),l=e(1149563359),_=e(3037015781),d=e(9012396182),r=e(1289024643),m=e(5795074931),h=e(9101533895),v=e(5286203919),y=e(8746998952),I=e(9712681361),T=e(4742719639),f=e(5332875232),g=e(6251210828),M=e(2802517438),A=e(4481313819),O=e(3622858354),D=e(4233000497),E=e(6749400491),C=e(9373230523),S=e(1407713935),b=e(8798294025),k=e(9289081806),W=e(6470070112),N=e(8683010724),V=e(3708320478),R=e(4775127335),P=e(2683115972),z=e(3165300465),$=e(8661826718),x=e(2527782504),Y=e(4275787242),ne=e(735940183),re=e(6244014364),_e=e(8869383561),G=e(5519146941),ge=e(3193155968),oe=e(7429662208);function me(){return me=Object.assign||function(K){for(var B=1;B<arguments.length;B++){var Q=arguments[B];for(var q in Q)Object.prototype.hasOwnProperty.call(Q,q)&&(K[q]=Q[q])}return K},me.apply(this,arguments)}u(me,"_extends");const ue=new ne.Ay("huddles"),ae={elementName:"huddles_invite_decline",eventId:re.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},he={elementName:"huddles_invite_joining_soon",eventId:re.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},ce={elementName:"huddles_invite_join",eventId:re.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},ee=u(K=>{let{topic:B,formattedTopic:Q,channel:q,channelName:le,otherMemberNamesString:Te,imMemberName:Ie,experimentHuddlesLaterGroupOn:De}=K;if(!De)return s.createElement(s.Fragment,null);let pe=B?ue.rt("Join the scheduled huddle about {topic}",{topic:Q}):ue.rt("Join the scheduled huddle");return(0,S.LI)(q)&&Ie?pe=B?ue.rt("Join the scheduled huddle with {imMemberName} about {topic}",{topic:Q,imMemberName:Ie}):ue.rt("Join the scheduled huddle with {imMemberName}",{imMemberName:Ie}):(0,S.yz)(q)?pe=B?ue.rt("Join the scheduled huddle about {topic} with {otherMemberNamesString}",{topic:Q,otherMemberNamesString:Te}):ue.rt("Join the scheduled huddle with {otherMemberNamesString}",{otherMemberNamesString:Te}):(0,_.uz)(q)&&!(0,S.LI)(q)&&(pe=B?ue.rt("Join the scheduled huddle in {channelName} about {topic}",{topic:Q,channelName:le}):ue.rt("Join the scheduled huddle in {channelName}",{channelName:le})),pe},"getScheduledHuddleInviteCopy");function J(K){let{channelId:B,senderUserId:Q,callId:q,teamId:le,isInviter:Te}=K;const Ie=(0,c.wA)(),{shouldUseNavigate:De,activeTab:pe}=(0,s.useContext)(G.A),fe=(0,o.d4)(f.MJ),Z=(0,o.d4)(m.WR),se=(0,o.d4)(cn=>(0,C.A)(cn,Q)),Ae=(0,o.d4)(cn=>(0,h.OL)(cn,B)),Ce=(0,o.d4)(cn=>{if(!Ae||!fe||!(0,S.LI)(Ae))return;const Jt=(0,b.e)(Ae);if(Jt)return(0,C.A)(cn,Jt)}),Le=(0,o.Z2)(cn=>(0,S.yz)(Ae)?((0,k.Ug)(Ae)||[]).filter(dn=>dn!==Q&&dn!==Z).map(dn=>(0,C.A)(cn,dn)).filter(dn=>dn):[]),Ue=(0,i.cw)(v.vO),Pe=(0,W.eu)(Ue),Qe=(0,o.d4)(cn=>(0,r.Ck)(cn,q,Z))==="joining_soon",lt=(0,o.d4)(cn=>(0,r.H6)(cn,q));var qe;const ct=(qe=lt==null?void 0:lt.isScheduled)!==null&&qe!==void 0?qe:!1,tt=(0,o.d4)(M.A),it=(0,o.d4)(cn=>{if(De){var Jt;return(Jt=(0,oe.F8)(cn,{tab:pe,container:ge.mq.Primary}))===null||Jt===void 0?void 0:Jt.id}return tt}),Ge=(0,i.cw)(d.getFocusedWorkspace),We=B===it&&Ge&&le&&Ge===le,xe=(0,s.useCallback)(()=>{Ie((0,E.A)({callId:q,channelId:B,inviteResponse:E.J.DECLINE}))},[q,B,Ie]),[ze,mt]=(0,s.useState)(!1),[pt,It]=(0,s.useState)(!1),bt=(0,s.useCallback)(()=>{(function(){var Jt=(0,t.coroutine)(function*(){It(!0),mt(!1);const dn=Ie((0,E.A)({callId:q,channelId:B,inviteResponse:E.J.JOINING_SOON}));if(dn)try{yield dn}catch{mt(!0)}finally{It(!1)}else It(!1)});return u(function(){return Jt.apply(this,arguments)},"respondToInvite")})()()},[q,B,Ie]),gt=(0,s.useCallback)(()=>{Ie((0,y.A)({channelId:B,callId:q,entryPoint:I.su.SIDEBAR_HUDDLE_INVITE}))},[B,q,Ie]),ht=(0,o.d4)(cn=>B&&(0,T.o)(cn,B))||"",Zt=ht?s.createElement("span",{className:"p-huddle_invite__topic"},s.createElement(O.A,{text:ht})):null,rn=s.createElement("span",{className:"p-huddle_invite__sender_name"},se);let zt;if(ct){const cn=s.createElement($.A,{channelId:B,boldIcon:!0});zt=ee({topic:ht,formattedTopic:Zt,channel:Ae,channelName:cn,experimentHuddlesLaterGroupOn:!0})}else if((0,S.LI)(Ae))Te?zt=ee({topic:ht,formattedTopic:Zt,channel:Ae,imMemberName:Ce,experimentHuddlesLaterGroupOn:fe}):zt=ue.rt("Join huddle with {senderName}",{senderName:rn});else if((0,S.yz)(Ae)){const cn=(0,_e.A)(Le,{react:!0}).join("");if(Te)zt=ee({topic:ht,formattedTopic:Zt,channel:Ae,otherMemberNamesString:cn,experimentHuddlesLaterGroupOn:fe});else{const Jt=(0,_e.A)([se].concat(Le),{react:!0}).join(""),dn=s.createElement("span",{className:"p-huddle_invite__all_member_names"},Jt);zt=ue.rt("Join huddle with {allMemberNames}",{allMemberNames:dn})}}else{const cn=s.createElement($.A,{channelId:B,boldIcon:!0});Te?zt=ee({topic:ht,formattedTopic:Zt,channel:Ae,channelName:cn,experimentHuddlesLaterGroupOn:fe}):We?zt=ue.rt("{senderName} is inviting you to a huddle in this channel",{senderName:rn}):zt=ue.rt("{senderName} is inviting you to a huddle in {channelName}",{senderName:rn,channelName:cn})}return{avatarOverflowBadgeCount:(0,S.yz)(Ae)?Le.length+1:0,didRespondingToInviteFail:ze,formattedTopic:Zt,handleDecline:xe,handleJoiningSoon:bt,handleJoin:gt,inviteText:zt,isCurrentUserJoiningSoon:Qe,isJoiningSoonResponsePending:pt,isLoading:Pe}}u(J,"useHuddleInviteProps"),J.displayName="useHuddleInviteProps";const X={name:"warning"},F=u(K=>{let{channelId:B,senderUserId:Q,callId:q,teamId:le}=K;const Te=(0,o.d4)(f.MJ),Ie=(0,o.d4)(m.WR),De=Te&&Ie===Q,pe=(0,D.A)(B),{avatarOverflowBadgeCount:fe,didRespondingToInviteFail:Z,formattedTopic:se,handleDecline:Ae,handleJoiningSoon:Ce,handleJoin:Le,inviteText:Ue,isCurrentUserJoiningSoon:Pe,isJoiningSoonResponsePending:He,isLoading:Qe}=J({channelId:B,senderUserId:Q,callId:q,teamId:le,isInviter:De}),lt=(0,s.useRef)(null),qe=(0,s.useCallback)(()=>{var It;(It=lt.current)===null||It===void 0||It.focus()},[]);(0,l.A)(x.Ay.HUDDLE_INVITE_JOIN,qe);const ct="huddle-invite-text",tt=s.createElement(P.Ay,{type:"outline",className:"p-huddle_invite__button",onClick:Ae,"data-qa":"huddle_invite_declined",disabled:Qe,autoClogProps:ae},s.createElement("span",{className:"p-huddle_invite__label"},ue.t("Decline"))),it=s.createElement(z.A,{type:"outline",className:"p-huddle_invite__button p-huddle_invite__button--joining_soon",loading:He,onClick:Ce,disabled:Qe,autoClogProps:he},s.createElement("span",{className:"p-huddle_invite__label"},ue.t("Be there soon"))),[Ge,We]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let It=0;return Pe&&(We(!0),It=window.setTimeout(()=>{We(!1)},6e3)),()=>{It&&clearTimeout(It)}},[Pe]);const xe=Ge?s.createElement("div",{className:"p-huddle_invite__header_notif"},s.createElement("div",{className:"p-huddle_invite__header_notif_content"},s.createElement(N.A,{name:"clock",size:"20"}),s.createElement("span",{className:"margin_left_50"},ue.t("Join when you\u2019re ready!")))):null,ze=s.createElement(z.A,{ref:lt,type:"primary",className:"p-huddle_invite__button p-huddle_invite__button--accept",loading:Qe,onClick:Le,"data-qa":"huddle_invite_join",autoClogProps:ce},s.createElement("span",{className:"p-huddle_invite__label p-huddle_invite__label--join"},ue.t("Join"))),mt=(0,o.d4)(g.jI),pt=mt?{width:mt}:null;return s.createElement(A.A,me({eventId:re.EventId.CANVAS_EVENT,uiComponentName:re.UiComponentName.HUDDLES_INVITE,clogImpression:!0},pe),s.createElement("div",me({className:(0,a.A)("p-huddle_invite",{"p-huddle_invite--with_header":!!se})},pt&&{style:pt}),s.createElement("div",{className:"p-huddle_invite__content"},xe,se&&s.createElement("div",{className:"p-huddle_invite__message_header"},se),s.createElement("div",{className:"p-huddle_invite__message"},!De&&s.createElement("div",{className:(0,a.A)("p-huddle_invite__avatar_container",{"p-huddle_invite__avatar_container--with_overflow":!!fe})},s.createElement(R.Ay,{key:Q,className:"p-huddle_invite__avatar",size:fe?14:20,userId:Q,isInteractive:!1}),!!fe&&s.createElement("div",{className:"p-huddle_invite__avatar_overflow_overlay"},fe)),s.createElement(V.z,null,s.createElement("div",{className:"p-huddle_invite__text",id:ct},Ue,s.createElement("span",{className:"offscreen"},ue.rt("Press {key} to join",{key:(0,W.$z)(),fallbackHash:"bd062cb22cea3388535c0f834ebf6df702757691",fallbackHashNs:"keyboard_keys"}))))),s.createElement("div",{className:"p-huddle_invite__buttons",role:"group","aria-labelledby":ct},ze,!Pe&&it,tt)),Z&&s.createElement(Y.A,{svgIconProps:X},ue.t("Something went wrong responding to the invite."))))},"HuddleInvite");F.displayName="HuddleInvite";const L=F},6749400491:(j,p,e)=>{"use strict";e.d(p,{A:()=>_,J:()=>i});var t=e(1031947056),n=e(6533394955),s=e(4250409994),a=e(1070786785),c=e(5319025363),o=e(5170073955),i;(function(d){d.ACCEPT="accept",d.DECLINE="decline",d.JOINING_SOON="joining_soon"})(i||(i={}));const l=(0,t.Ay)("Respond to an invitation to a huddle",(d,r,m)=>{let{channelId:h,inviteResponse:v,callId:y}=m;d((0,c.z)());let I;return v!==i.ACCEPT&&(I=d((0,o.Q)({response:v,channelId:h,roomId:y,reason:"respond-to-huddle-invite"}))),v===i.DECLINE&&((0,n.dispatchForClientStore)((0,s.u8)(h)),d((0,a.V3)(h))),I});l.meta={name:"createThunk",key:"createThunkrespondToHuddleInvite",description:"Respond to an invitation to a huddle"};const _=l},4983989341:(j,p,e)=>{"use strict";e.d(p,{x:()=>i});var t=e(6422693406),n=e(1031947056),s=e(1070786785),a=e(1452921056),c=e(9712681361),o=e(7631186994);const i=(0,n.Ay)("Creates a new huddle in mpim where all huddle participants are channel members",(l,_,d)=>{let{channelId:r,memberIds:m}=d;return l((0,o.r)({memberIds:m})).then(h=>{l((0,s.Ay)(r)),l((0,a.A)({channelId:h.id,entryPoint:c.su.CREATE_NEW_MPIM}))}).catch(h=>t.S.reject(h))});i.meta={name:"createThunk",key:"createThunkcreateNewHuddleInMpimWithUsers",description:"Creates a new huddle in mpim where all huddle participants are channel members"}},5907086961:(j,p,e)=>{"use strict";e.d(p,{A:()=>N});var t=e(3134334389),n=e(6084388622),s=e(8300007136),a=e(9003400431),c=e(6023831373),o=e(2527994834),i=e(4761125736),l=e(3288846409),_=e(7076189804),d=e(581167618),r=e(980293773),m=e(9101533895),h=e(5286203919),v=e(735940183),y=e(4446301238),I=e(8661826718),T=e(5363983309),f=e(7868634217),g=e(4061200313),M=e(9183417278),A=e(1612857492),O=e(9892470785),D=e(8847766420);const E=new v.Ay("huddles"),C=u(V=>{let{numOfExternalMembers:R,members:P}=V;const z=(0,c.d4)(D.Kc),$=(0,l.cw)(h.hc)||"",x=(0,c.d4)(Q=>(0,m.OL)(Q,$)),Y=(0,c.d4)(Q=>(0,i._Z)(Q,"invite_to_channel_permission")==="on"),ne=(0,c.d4)(Q=>(0,i._Z)(Q,"restrict_channel_manager_ext_invites")==="on"),re=(0,c.d4)(Q=>(0,M.Q)(Q,x)),_e=(0,c.d4)(Q=>(0,A.q)(Q,x));if(!ne)return null;const G=!Y&&ne,ge=Y&&ne,oe=R===P.length,me=R>0,ue=!R,ae=P.length-R>0,he=!(P.length-R),ce=E.rt("They can join the huddle, but since you are not allowed to invite external people to this channel, they won\u2019t be able to see messages or reply to the thread."),ee=t.createElement(t.Fragment,null,t.createElement("p",null,E.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,E.rt("You can add people from {org} to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(O.A,{id:z}),channelName:t.createElement(I.A,{className:"bold",channel:x})})),t.createElement("p",null,E.t("You don\u2019t have permission to add external people to this channel."))),J=t.createElement(t.Fragment,null,t.createElement("p",null,E.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,E.rt("You can add people from {org} to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(O.A,{id:z}),channelName:t.createElement(I.A,{className:"bold",channel:x})}))),X=E.rt("They can join the huddle, but since you are not allowed to invite people from {org} to this channel, they won\u2019t be able to see messages or reply to the thread.",{org:t.createElement(O.A,{id:z})}),F=t.createElement(t.Fragment,null,t.createElement("p",null,E.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,E.rt("You can add external people (not from {org}) to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(O.A,{id:z}),channelName:t.createElement(I.A,{className:"bold",channel:x})})),t.createElement("p",null,E.t("You don\u2019t have permission to add internal people to this channel."))),L=t.createElement(t.Fragment,null,t.createElement("p",null,E.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,E.rt("You can add external people (not from {org}) to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(O.A,{id:z}),channelName:t.createElement(I.A,{className:"bold",channel:x})}))),K=E.rt("They can join the huddle, but since you are not allowed to invite people to this channel, they won\u2019t be able to see messages or reply to the thread."),B=E.rt("They can join the huddle but won\u2019t be able to see messages or reply to the thread unless they are members of {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{channelName:t.createElement(I.A,{className:"bold",channel:x})});switch(!0){case(G&&!_e&&oe):return ce;case(G&&!_e&&me):return ee;case(G&&!_e&&ue):return J;case(G&&_e):return B;case(ge&&re&&!_e&&oe):return ce;case(ge&&re&&!_e&&me):return ee;case(ge&&re&&!_e&&ue):return J;case(ge&&!re&&_e&&ue):return X;case(ge&&!re&&_e&&ae):return F;case(ge&&!re&&_e&&he):return L;case(ge&&!re&&!_e):return K;default:return B}},"DisallowedHuddleInviteSubtitle");C.displayName="DisallowedHuddleInviteSubtitle";const S=C,b=new v.Ay("huddles");function k(V){let{members:R}=V;const P=(0,s.wA)(),[z,$]=(0,t.useState)(null),[x,Y]=(0,t.useState)([]),[ne,re]=(0,t.useState)(!1),_e=(0,l.cw)(h.hc)||"",G=(0,c.d4)(Z=>(0,m.OL)(Z,_e)),ge=(0,t.useCallback)(()=>P((0,a.O)()),[P]),oe=(0,t.useCallback)(()=>P((0,a.O)({closeAll:!0})),[P]),me=(0,t.useCallback)(Z=>{$(Z),P((0,y.Cw)({channelId:_e,users:Z})).then(()=>{x.push(Z),Y(x),$(null)}).catch(()=>{$(null),re(!0)})},[_e,P,x]),ue=(0,c.d4)(Z=>(0,i._Z)(Z,"invite_to_channel_permission")==="on"),ae=(0,c.d4)(Z=>(0,i._Z)(Z,"restrict_channel_manager_ext_invites")==="on"),he=(0,c.d4)(Z=>(0,i._Z)(Z,"shared_channel_invite_requested_event_ga")==="on"),ce=(0,c.d4)(Z=>(0,o.Q)(Z,"shared_channel_invite_requested",G.id)&&he),ee=(0,c.d4)(Z=>(0,f.Z)(Z,R)),J=(0,t.useMemo)(()=>({addedToChannel:b.t("Added to channel"),notInChannel:b.t("Not in channel"),inviteRequestPending:he?b.t("Invitation request pending approval"):"",added:b.t("Added"),pending:he?b.t("Pending"):"",inviteToChannel:b.t("Invite to channel"),cantBeInvitedToChannel:ae?b.t("Can\u2019t be invited to channel"):""}),[he,ae]),X=(0,c.d4)(Z=>(0,M.Q)(Z,G)),F=(0,c.d4)(Z=>(0,A.q)(Z,G)),L=(0,c.Z2)(Z=>R.filter(se=>(0,g.i)(Z,se))),K=L.length,B=!ue&&ae,Q=ue&&ae,q=B&&!F,le=Q&&X&&!F,Te=K===R.length,Ie=!K,De=(0,t.useMemo)(()=>ae?b.rt("{count, plural, =1 {This person is not a member} other {These people are not members}} of {channelName}",{count:R.length,channelName:t.createElement(I.A,{channel:G})}):b.rt("These people are not a member of {channelName}",{channelName:t.createElement(I.A,{channel:G})}),[ae,G,R]),pe=(0,t.useCallback)(Z=>Z&&ce?J.inviteRequestPending:Z?J.addedToChannel:J.notInChannel,[ce,J.addedToChannel,J.inviteRequestPending,J.notInChannel]),fe=(0,t.useCallback)((Z,se)=>{let Ae;switch(se&&ce?Ae=J.pending:Ae=se?J.added:J.inviteToChannel,!0){case((q||le)&&Te):return null;case((q||le)&&L.includes(Z)):return t.createElement("span",{className:"p-huddle_invite_add_to_channel__user_list_no_invite_text"},J.cantBeInvitedToChannel);case(Q&&!X&&F&&Ie):return null;case(Q&&!X&&F&&!L.includes(Z)):return t.createElement("span",{className:"p-huddle_invite_add_to_channel__user_list_no_invite_text"},J.cantBeInvitedToChannel);case(Q&&!X&&!F):return null;default:return t.createElement(n.lV,{type:"outline",size:"small",disabled:se,loading:z===Z,onClick:()=>me(Z)},Ae)}},[q,le,ce,Te,L,J.cantBeInvitedToChannel,J.added,J.inviteToChannel,J.pending,Q,X,F,Ie,z,me]);return t.createElement(r.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:ge,contentLabel:De,shouldReturnFocusAfterClose:!0},t.createElement(r.rQ,null,t.createElement(r.Rc,{title:De,subtitle:ae?null:b.rt("They can join the huddle but won\u2019t be able to see messages or reply to the thread unless they are members of {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{channelName:t.createElement(I.A,{className:"bold",channel:G})})}),ae&&t.createElement("div",{className:"p-huddle_invite_add_to_channel__subtitle"},t.createElement(S,{numOfExternalMembers:K,members:R}))),t.createElement(r.$m,null,t.createElement(r.qf,null,ne&&t.createElement(d.Ay,{className:"margin_bottom_150",level:d.A_.error,type:d.QE.inline},b.t("Oops, something went wrong. Please try again.",{fallbackHash:"92c404bc05c04cc6c63491f463f0ec39688f741a",fallbackHashNs:"client"})),(ae?ee:R).map(Z=>{const se=x.includes(Z);return t.createElement("div",{className:"p-huddle_invite_add_to_channel__user_list",key:Z},t.createElement(_.Ay,{id:Z,useShortMode:!0,showPresence:!0,showStatus:!0,showSubtext:!0,subtext:t.createElement("small",{className:"sk_dark_gray"},pe(se))}),ae?fe(Z,se):t.createElement(n.lV,{type:"outline",size:"small",disabled:se,loading:z===Z,onClick:()=>me(Z)},se?J.added:J.inviteToChannel))}),ae?null:t.createElement(d.Ay,{className:"margin_top_50",level:d.A_.info,type:d.QE.custom},b.t("If you don\u2019t add them, they won\u2019t be able to see messages in the huddle.")))),t.createElement(r.jl,null,t.createElement(r.ox,null,ae?null:t.createElement(r.s_,{onClick:ge,type:"outline"},b.t("Cancel")),t.createElement(n.Ay,{onClick:oe,type:"primary"},ue&&!X||ae&&!F?b.t("OK"):b.t("Done")))))}u(k,"HuddleInviteAddToChannel"),k.displayName="HuddleInviteAddToChannel";const W={HuddleInviteAddToChannel:k},N=(0,T.A)(k,{isStackable:!0})},5911067953:(j,p,e)=>{"use strict";e.d(p,{A:()=>mt});var t=e(9706240641),n=e(3134334389),s=e(8300007136),a=e(235108050),c=e(4775127335),o=e(6084388622),i=e(581167618),l=e(444524526),_=e(1563996154),d=e(6023831373),r=e(7937864072),m=e(5751973043),h=e(980293773),v=e(3339229351),y=e(5795074931),I=e(5332875232),T=e(6470070112),f=e(7631186994),g=e(735940183),M=e(3730613858),A=e(666760496),O=e(1407713935),D=e(8746998952),E=e(9712681361),C=e(4481313819),S=e(6244014364),b=e(7268021173),k=e(3677514771),W=e(6839188756),N=e(9548972574),V=e(716227588),R=e(1743656885),P=e(6259241484),z=e(9953252450),$=e(3288846409),x=e(9101533895),Y=e(5286203919),ne=e(8661826718),re=e(3534324375),_e=e(8276911661),G=e(7576317051),ge=e(5333401344);function oe(pt){let{memberId:It}=pt;const bt=(0,d.d4)(ht=>(0,_e.nv)(ht,It)),gt=(0,d.d4)(ht=>(0,re.sE)(ht,bt,!1,!1));return(0,ge.mX)(bt)?n.createElement(G.A,{type:"unknown"}):(0,ge.lv)(bt)?n.createElement(G.A,{type:"non-existent"}):n.createElement("span",null,gt)}u(oe,"DeprecatedHuddleName"),oe.displayName="DeprecatedHuddleName";const me=new g.Ay("huddles");function ue(pt){let{unknownMemberIds:It}=pt;const bt=(0,$.cw)(Y.hc),gt=(0,d.d4)(rn=>(0,x.OL)(rn,bt)),ht=(0,n.useMemo)(()=>bt?It:[],[bt,It]);let Zt;if(ht.length===1)Zt=me.rt("{name1} is not a member of {channel}.",{name1:n.createElement(oe,{memberId:ht[0]}),channel:n.createElement(ne.A,{channel:gt})});else if(ht.length===2)Zt=me.rt("{name1} and {name2} are not a member of {channel}.",{name1:n.createElement(oe,{memberId:ht[0]}),name2:n.createElement(oe,{memberId:ht[1]}),channel:n.createElement(ne.A,{channel:gt})});else if(ht.length===3)Zt=me.rt("{name1}, {name2}, and {name3} are not a member of {channel}.",{name1:n.createElement(oe,{memberId:ht[0]}),name2:n.createElement(oe,{memberId:ht[1]}),name3:n.createElement(oe,{memberId:ht[2]}),channel:n.createElement(ne.A,{channel:gt})});else if(ht.length>3){const[rn,zt,In,...cn]=ht,Jt=cn.map(dn=>n.createElement(oe,{key:dn,memberId:dn}));Zt=me.rt("{name1}, {name2}, {name3} and {numOthers} more are not a member of {channel}.",{name1:n.createElement(oe,{memberId:rn}),name2:n.createElement(oe,{memberId:zt}),name3:n.createElement(oe,{memberId:In}),channel:n.createElement(ne.A,{channel:gt}),numOthers:ht.length-3},dn=>{let{text:sn}=dn;return n.createElement(_.Ay,{tip:(0,g.jd)(Jt,{noEscape:!0})},n.createElement("span",null,sn))})}return n.createElement("small",null,Zt)}u(ue,"HuddleInviteNotAMember"),ue.displayName="HuddleInviteNotAMember";const ae=ue;var he=e(5907086961),ce=e(7396657731),ee=e(9236164662),J=e(9645800439),X=e(6011052675),F=e(3109955471),L=e(5103024697),K=e(4822627003),B=e(5103164797),Q=e(3214129289),q=e(9163492386),le=e(6007206761),Te=e(8170643398),Ie=e(4562579337),De=e(8040098042),pe=e(181849556);const fe=new g.Ay("huddles");var Z;(function(pt){pt.CHANNEL="channel",pt.PEOPLE="people"})(Z||(Z={}));const se=u(pt=>{let{isFreeTeam:It,onSuggestedChannelSelected:bt,onSuggestedUserSelected:gt,selectedChannelId:ht,selectedMemberIds:Zt}=pt;const rn=(0,d.d4)(y.WR),zt=(0,d.wz)(pe.b5),In=(0,d.wz)(pe.mc),cn=(0,d.wz)(Vt=>{if(!zt)return[];if(Zt.length)return[];const on=[];return zt.forEach(pn=>{if(pn.id===ht)return;const et=(0,x.OL)(Vt,pn.id);(0,le.F)(et)||on.push(pn)}),on}),Jt=(0,n.useMemo)(()=>cn.map(Vt=>Vt.id),[cn]),dn=(0,d.wz)(Vt=>{if(!In)return[];if(ht)return[];const on=[];return In.forEach(pn=>{if(pn.id===rn||Zt.includes(pn.id))return;const et=(0,_e.nv)(Vt,pn.id);(0,Ie.A)(et)||(0,Te.oy)(et)||on.push(pn)}),on}),sn=(0,n.useMemo)(()=>dn.map(Vt=>Vt.id),[dn]),Xt=(0,n.useMemo)(()=>{const pn=sn.length*60,et=32,At=Jt.length*et;return Math.min(Math.max(pn,At),240)},[Jt,sn]),xt=(0,n.useCallback)(Vt=>{if(!Vt.id)return;(0,De.A)(Vt.id)?bt(Vt.id):gt(Vt.id)},[bt,gt]),en=(0,n.useCallback)(Vt=>{const on=cn[Vt];if(on)return n.createElement("div",{className:"p-huddle_start_suggestion_tabs__menu_item_button__list_entity"},n.createElement(B.A,{channelId:on.id}))},[cn]),un=(0,n.useCallback)(()=>n.createElement(L.A,{disableHeight:!0},Vt=>{let{width:on}=Vt;return n.createElement(q.A,{"aria-label":fe.t("Channel"),keys:Jt,rowRenderer:en,onItemClick:xt,width:on,height:Xt})}),[xt,en,Jt,Xt]),yn=(0,n.useCallback)(Vt=>{const on=dn[Vt];if(on)return n.createElement("div",{className:"p-huddle_start_suggestion_tabs__menu_item_button__list_entity"},n.createElement(K.A,{id:on.id}))},[dn]),ut=(0,n.useCallback)(()=>n.createElement(L.A,{disableHeight:!0},Vt=>{let{width:on}=Vt;return n.createElement(q.A,{"aria-label":fe.t("People"),keys:sn,rowRenderer:yn,onItemClick:xt,width:on,height:Xt})}),[xt,yn,sn,Xt]),[Ot,kt]=(0,n.useState)(Z.PEOPLE),be=(0,n.useCallback)(Vt=>{kt(Vt)},[]);(0,n.useEffect)(()=>{Ot===Z.PEOPLE&&ht?kt(Z.CHANNEL):Ot===Z.CHANNEL&&Zt.length&&kt(Z.PEOPLE)},[Ot,ht,Zt]);const Kt=(0,n.useMemo)(()=>{const Vt=[];return sn.length&&Vt.push({title:fe.t("People"),id:Z.PEOPLE,content:ut()}),Jt.length&&Vt.push({title:fe.t("Channels",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}),id:Z.CHANNEL,content:un()}),Vt},[Jt,sn,un,ut]);return It?null:n.createElement("div",{className:"p-huddle_start_suggestion_tabs"},n.createElement(Q.A,{fullHeight:!0,tabs:Kt,currentTabId:Ot,onTabChange:be,tabMenuClassnames:"p-huddle_start_suggestion_tabs__tab_menu"}))},"HuddleStartSuggestionTabs");se.displayName="HuddleStartSuggestionTabs";const Ae=n.memo(se);var Ce=e(8808892924),Le=e(1794107122),Ue=e(1064007131),Pe=e(5142752606);const He=new g.Ay("huddles"),Qe=n.memo(pt=>{let{error:It}=pt;const bt=(0,d.d4)(rn=>(0,_e.nv)(rn,It.invitedMemberId)),gt=(0,d.d4)(rn=>(0,re.sE)(rn,bt));if(!(0,d.d4)(I.TM))return null;let Zt=He.t("{userName} could not be invited to the Huddle.",{userName:gt});return It.inviteRejectionReason===Pe.g.RecipientHuddlesDisabled&&(Zt=He.t("{userName} could not be invited as Huddles is not enabled for them.",{userName:gt})),n.createElement(i.Ay,{level:"error"},Zt)});var lt=e(3810478625),qe=e(5255740490),ct=e(1051015021),tt=e(952756744);function it(){return it=Object.assign||function(pt){for(var It=1;It<arguments.length;It++){var bt=arguments[It];for(var gt in bt)Object.prototype.hasOwnProperty.call(bt,gt)&&(pt[gt]=bt[gt])}return pt},it.apply(this,arguments)}u(it,"_extends");var Ge;(function(pt){pt.COMPOSER="composer",pt.PUBLIC_CHANNEL="public_channel",pt.PRIVATE_CHANNEL="private_channel"})(Ge||(Ge={}));function We(pt){let{channel:It}=pt;return It?It&&(0,O.Zp)(It)?Ge.PRIVATE_CHANNEL:Ge.PUBLIC_CHANNEL:Ge.COMPOSER}u(We,"getModalContext");const xe=new g.Ay("huddles");function ze(pt){let{closeModal:It,callId:bt,channel:gt,channelSuggestion:ht,memberSuggestionId:Zt,selectedMemberIds:rn=m.Ml}=pt;const zt=(0,s.wA)(),In=(0,r.A)(),cn=We({channel:gt}),Jt=cn===Ge.PRIVATE_CHANNEL&&!(0,O.PC)(gt),dn=cn===Ge.COMPOSER,[sn,Xt]=(0,n.useState)(rn),[xt,en]=(0,n.useState)(),[un,yn]=(0,n.useState)(!1),[ut,Ot]=(0,n.useState)(!1),kt=(0,d.d4)(I.TM),[be,Kt]=(0,n.useState)(void 0),Vt=(0,d.d4)(y.WR),on=(0,d.d4)(k.H7),pn=(0,W.tc)(on),et=(0,d.d4)(b.iH),At=(0,d.d4)(ot=>(0,Le.$)(ot,(gt==null?void 0:gt.id)||"")),Rt=(0,d.d4)(I.Si),Ft=(0,d.d4)(N.qr),$t=(0,d.d4)(Ue.SX),vn=$t===Ue.mF.TREATMENT_1,Rn=$t===Ue.mF.TREATMENT_2,hn=vn||Rn,gn=(0,d.d4)(lt.g),fn=(0,d.d4)(ot=>(0,V.Hp)(ot,P.xu.HUDDLE_INVITE_MODAL))===P.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER,Oe=(0,d.Z2)(ot=>(0,N.ft)(ot,gt==null?void 0:gt.id).filter(Mt=>Mt.id!==Vt).map(Mt=>Mt.id)),ke=(0,d.d4)(T.pl),je=(0,d.Z2)(ot=>Jt?sn.filter(Mt=>{const jt=gt&&(0,M.Sv)(ot,gt.id,Mt);return jt&&jt.isKnown&&!(jt!=null&&jt.isMember)}):[]);(0,n.useEffect)(()=>{ht&&en({id:ht.id,isCurrentSuggestedChannel:!0})},[ht]),(0,n.useEffect)(()=>{Zt&&Xt([Zt])},[Zt]);const Be=(0,n.useCallback)(ot=>Xt(ot),[]),st=(0,n.useCallback)(ot=>{if(ot===(xt==null?void 0:xt.id)&&(xt!=null&&xt.isCurrentSuggestedChannel)){en({id:ot,isCurrentSuggestedChannel:!0});return}en({id:ot,isCurrentSuggestedChannel:!1})},[xt==null?void 0:xt.id,xt==null?void 0:xt.isCurrentSuggestedChannel]),St=(0,n.useCallback)(ot=>{Xt(sn.concat(ot))},[sn]),Yt=(0,n.useCallback)(()=>{en({id:gt==null?void 0:gt.id,isCurrentSuggestedChannel:!0})},[gt==null?void 0:gt.id]),tn=(0,n.useCallback)(()=>{xt!=null&&xt.id&&(zt((0,D.A)({channelId:xt.id,entryPoint:E.su.COMPOSER_HUDDLE_START})),It())},[xt,zt,It]),at=(0,n.useCallback)((0,t.coroutine)(function*(){yn(!0),yield zt((0,f.r)({memberIds:sn})).then(ot=>{zt((0,D.A)({channelId:ot.id,entryPoint:E.su.COMPOSER_HUDDLE_START})),It(),yn(!1),Ot(!1)}).catch(ot=>{In.error(ot),yn(!1);const{message:Mt}=ot;(Mt==null?void 0:Mt.indexOf(v.O3.INVALID_USER_COMBINATION))!==-1&&Ot(!0)})}),[sn,zt,In,It]),Et=(0,n.useCallback)((0,t.coroutine)(function*(){if(!gt)return;yn(!0);let ot=sn;(xt==null?void 0:xt.id)===gt.id&&(xt!=null&&xt.isCurrentSuggestedChannel)&&(ot=(0,a.A)([...sn,...At])),yield zt((0,A.A)({channelId:gt.id,userIds:ot})).then(()=>{yn(!1),je&&je.length>0&&Jt?zt((0,he.A)({members:je})):It()}).catch(Mt=>{In.error(Mt),yn(!1),kt&&Kt(Mt)})}),[gt,At,It,zt,kt,Jt,In,xt==null?void 0:xt.id,xt==null?void 0:xt.isCurrentSuggestedChannel,sn,je]),_t=(0,n.useMemo)(()=>cn===Ge.COMPOSER?xt!=null&&xt.id?tn:at:Et,[Et,at,cn,xt,tn]),Bt={[Ge.COMPOSER]:{eventId:S.EventId.HUDDLES_COMPOSER_HEADER_CLICKED,uiStep:S.UiStep.HUDDLE_COMPOSER_INVITES_SENT,elementName:"huddle_composer_dialog",entryPoint:"composer"},[Ge.PUBLIC_CHANNEL]:{eventId:S.EventId.HUDDLES_PUBLIC_CHANNEL_INVITE,elementName:"huddle_public_channel_invite"},[Ge.PRIVATE_CHANNEL]:{eventId:S.EventId.HUDDLES_PRIVATE_CHANNEL_INVITE,elementName:"huddle_private_channel_invite"}},Qt=u(()=>pn&&!Rt&&!Ft?n.createElement(ce.A,null):gn&&!dn?null:et&&!hn?n.createElement(z.A,{v2ClassName:(0,qe.A)({"p-huddle_invite_modal_banner":gn})}):hn&&et&&!fn?n.createElement(z.A,{v2ClassName:(0,qe.A)({"p-huddle_invite_modal_banner":gn})}):null,"maybeRenderBanner");Qt.displayName="maybeRenderBanner";const Fe=Bt[cn],Xe=(0,n.useMemo)(()=>dn?xe.t("Start a Huddle"):sn.length>1?xe.t("Send Invites"):xe.t("Send Invite"),[dn,sn]);if(!ke)return null;const Me=xe.t("You can invite people from outside this private conversation, but they may have restricted access to messages."),U=u(ot=>n.createElement(R.A,{articleId:4402059015315,ariaLabel:xe.t("Learn more about Huddles"),forceOpenInBrowser:!0},ot),"renderLearnMoreLink");let H,te,de,Re;const Ye=u(ot=>{const Mt=ot.map(jt=>n.createElement(l.A,{key:jt,isBold:!1,id:jt}));return Mt&&(0,g.jd)(Mt)},"listifiedOverflowMembers");if(Ye.displayName="listifiedOverflowMembers",pn&&Rt&&!Ft)te=xe.t("Invite someone to your huddle"),H=Jt?xe.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. You can invite anyone until someone joins \u2014 they won\u2019t be added to {channelName}. <a>Learn more</a>",{channelName:n.createElement(ne.A,{channel:gt}),"<a>":ot=>{let{text:Mt}=ot;return U(Mt)}}):xe.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. They\u2019ll receive a notification to join. <a>Learn more</a>",{"<a>":ot=>{let{text:Mt}=ot;return U(Mt)}});else if(dn?(te=xe.t("Start a Huddle"),de=gn?xe.t("You can invite whomever you\u2019d like to the huddle, they\u2019ll receive a notification in Slack to join."):xe.t("Find a person or channel to huddle with")):(te=xe.t("Invite people to your huddle"),de=Jt?Me:xe.t("You can invite whomever you\u2019d like to the huddle, and they\u2019ll receive a notification to join.")),gt!=null&&gt.id&&Oe.length){const ot=xe.rt("{participants, plural, =0 {{firstParticipant} and <b>you</b> are} =1 {{firstParticipant}, {secondParticipant}, and <b>you</b> are} other {{firstParticipant}, {secondParticipant}, <a>and # others</a> are}} in this huddle.",{participants:Oe.length-1,firstParticipant:n.createElement(l.A,{isBold:!0,id:Oe[0]}),secondParticipant:n.createElement(l.A,{isBold:!0,id:Oe[1]}),"<a>":Mt=>{let{text:jt}=Mt;return n.createElement(_.Ay,{zIndex:"above_fs",tip:Ye(Oe.slice(2))},n.createElement("span",null,jt))}});Re=n.createElement("div",{className:"p-huddle_invite_channel_or_start__active_members_container"},n.createElement(Ce.i,{channelId:gt.id,className:"p-huddle_invite_channel_or_start__avatar_stack",avatarSize:c.RG.tiny,excludeIcon:!0,excludeMemberOverflowCount:!0,maxMembers:3}),n.createElement("div",null,ot))}const we=kt&&be!==void 0,vt="huddle-invite-description";return n.createElement(h.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:It,contentLabel:te,describedby:vt,shouldReturnFocusAfterClose:!0,dataQa:"huddle_invite_channel_modal"},n.createElement(h.rQ,null,n.createElement(h.Rc,{title:te,subtitle:de})),n.createElement(h.$m,null,n.createElement(h.qf,null,Re,H&&n.createElement("p",{id:vt},H),n.createElement(J.A,{isFreeTeam:pn&&!Ft,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:Rt,channel:gt,otherMembersInHuddle:Oe,onSelectedMembersChange:Be,onSelectedChannelChange:st,selectedMemberIds:sn,selectedChannel:xt}),Jt&&je&&je.length>0&&n.createElement(ae,{unknownMemberIds:je}),ut&&n.createElement(i.Ay,{"data-qa":"huddle-invite-invalid-user-combo-alert",level:"error"},xe.t("All external people must already be in at least one channel together to send this invitation.")),we&&n.createElement(Qe,{error:be})),Qt(),n.createElement(tt.s,null),Ft&&pn&&!fn&&n.createElement(ct.V,{showProBadge:!0,className:"p-huddle_invite_channel_or_start__upgrade_alert"}),bt&&n.createElement(F.A,{activeHuddleCallId:bt,channel:gt,isFreeTeam:pn&&!Ft,onSuggestedUserSelected:St,otherMembersInHuddle:Oe,selectedMemberIds:sn,onChannelSelected:Yt,channelSuggestionOptionSelected:xt==null?void 0:xt.isCurrentSuggestedChannel}),!bt&&n.createElement(Ae,{isFreeTeam:pn&&!Ft,onSuggestedChannelSelected:st,onSuggestedUserSelected:St,selectedChannelId:xt==null?void 0:xt.id,selectedMemberIds:sn})),n.createElement(h.jl,null,n.createElement(h.ox,{className:"p-huddle_invite_channel_or_start_footer_actions"},n.createElement(X.A,{channelId:gt==null?void 0:gt.id}),n.createElement(h.s_,{type:"outline",className:"p-huddle_invite_channel_or_start_footer_actions_close"},xe.t("Cancel")),n.createElement(C.A,it({},Fe,{clogImpression:!0}),n.createElement(o.lV,{"data-qa":"send_invite_button",loading:un,onClick:_t,type:"primary",disabled:!sn.length&&!(xt!=null&&xt.id)},Xe)))),Rt&&pn&&!Ft&&n.createElement(ee.A,{selectedMemberIds:sn}))}u(ze,"HuddleInviteChannelOrStart"),ze.displayName="HuddleInviteChannelOrStart";const mt=ze},6011052675:(j,p,e)=>{"use strict";e.d(p,{A:()=>l});var t=e(3134334389),n=e(8300007136),s=e(735940183),a=e(6084388622),c=e(5904726069);const o=new s.Ay("huddles"),i=u(_=>{let{channelId:d}=_;const r=(0,n.wA)(),m=(0,t.useCallback)(()=>{r((0,c.r)({channelId:d}))},[r,d]);return d?t.createElement(a.Ay,{onClick:m,type:"outline",className:"p-huddle_invite_link_button__copy_link"},o.t("Copy Huddle Link")):null},"HuddleInviteLinkButton");i.displayName="HuddleInviteLinkButton";const l=i},9236164662:(j,p,e)=>{"use strict";e.d(p,{A:()=>C});var t=e(4481313819),n=e(6244014364),s=e(5751973043),a=e(735940183),c=e(3134334389),o=e(6023831373),i=e(8739505998),l=e(6323355797),_=e(8300007136),d=e(1267040415),r=e(236241007),m=e(5641442783),h=e(3994181705),v=e(5332875232),y=e(5881236351),I=e(7268021173),T=e(1384076438),f=e(2607644860),g=e(8112788848),M=e(8214116048);const A=new a.Ay("trials_highlight_paid_features"),O={onClick:{enableClogAction:!0},elementName:"start_trial"},D={elementName:"upgrade_link",onClick:{enableClogAction:!0}},E=u(S=>{let{selectedMemberIds:b=s.Ml}=S;const k=(0,_.wA)(),W=l.ZO.PaidFeatureTrial,N=l.zG.Vhq,V=(0,o.d4)(Y=>(0,I.hq)(Y,W,N)),R=(0,o.d4)(Y=>(0,I.bp)(Y,W,N)),P=(0,o.d4)(v.Si),z=(0,c.useCallback)(()=>{k((0,y.Ov)(b))},[k,b]),$=(0,c.useCallback)(()=>{k((0,r.A)({uiComponentVariant:n.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,onSpeedbumpContinue:z}))},[k,z]);if((0,c.useEffect)(()=>{k((0,T.A)({campaignType:W,campaignSubType:N,reason:"huddle_invite_modal",context:f.y.huddleInviteModal}))},[k,W,N]),!P||R)return null;const x=V?A.rt("To use huddles with more people, <a>start a free trial.</a>",{"<a>":Y=>{let{text:ne}=Y;return c.createElement(i.A,{"data-qa":"huddle_invite_modal_footer_banner_cta",onClick:$,autoClogProps:O},ne)}}):A.rt("To use huddles with more people, <a>see upgrade options.</a>",{"<a>":Y=>{let{text:ne}=Y;return c.createElement(d.A,{"data-qa":"huddle_invite_modal_footer_banner_cta",autoClogProps:D,useLink:!0},ne)}});return c.createElement(t.A,{eventId:n.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,uiComponentName:n.UiComponentName.HUDDLE_INVITE_MODAL_FREE_BANNER,clogImpression:!0},c.createElement("div",{className:"p-huddle_invite_modal_footer_banner"},c.createElement(m.A,{variant:h.G.HuddlesFreemium,promoType:W,promoSubtype:N,uiComponentVariant:n.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,toolTipZIndex:g.m.AboveFullScreen,toolTipPosition:M.yX.Bottom}),c.createElement("span",{className:"margin_left_50"},x)))},"HuddleInviteModalFooterBanner");E.displayName="HuddleInviteModalFooterBanner";const C=E},7396657731:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(3134334389),n=e(735940183),s=e(6244014364),a=e(4481313819),c=e(1743656885),o=e(7433432223),i=e(5712872315);const l=new n.Ay("trials_highlight_paid_features"),_=u(m=>{let{text:h}=m;return t.createElement(c.A,{articleId:4402059015315,ariaLabel:l.t("Learn more about Huddles")},h)},"AlertBannerHelpLink"),r=u(()=>t.createElement(a.A,{eventId:s.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,uiComponentName:s.UiComponentName.HUDDLE_INVITE_MODAL_FREE_BANNER,clogImpression:!0},t.createElement("div",{className:"p-huddle_invite_modal_banner"},t.createElement(o.A,{theme:i.B.NONE,"data-qa":"huddle_invite_modal_free_banner"},l.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. <a>Learn more</a>",{"<a>":_,fallbackHash:"302b7b76d1085ff1532e888a72d2b35f253d5e82"})))),"HuddleInviteModalFreeBanner")},9645800439:(j,p,e)=>{"use strict";e.d(p,{A:()=>D});var t=e(3134334389),n=e(6023831373),s=e(735940183),a=e(5103164797),c=e(8300576667),o=e(1407713935),i=e(3730613858),l=e(1289024643),_=e(8040098042),d=e(4327331459);const r=new s.Ay("huddles");var m;(function(E){E.CHANNEL="channel",E.MEMBER="member"})(m||(m={}));function h(E){let{id:C,entity:S,channel:b,huddleId:k}=E,W;(0,_.A)(C)?W=m.CHANNEL:(0,d.A)(C)&&(W=m.MEMBER);const N=(0,n.d4)(Y=>b&&(0,i.Sv)(Y,b.id,C)),V=N&&N.isKnown&&(N==null?void 0:N.isMember),R=b&&(0,o.JM)(b),P=(0,n.d4)(Y=>(0,l.Ck)(Y,k,C)),z=!!P&&P==="joining_soon";let $=null;if(P?$=z?r.t("Joining soon"):r.t("Invited"):b&&R&&!V?$=r.t("Not in conversation"):b&&!R&&!V&&($=r.t("Not in channel")),!W)return null;let x;return W===m.CHANNEL?x=t.createElement(a.A,{channelId:C,channel:S}):W===m.MEMBER&&(x=t.createElement(c.A,{id:C,member:S,showPresence:!0,secondaryContent:$})),t.createElement("div",{className:"display_flex"},x)}u(h,"HuddleInviteMultiSelectRenderOption"),h.displayName="HuddleInviteMultiSelectRenderOption";const v=(0,t.memo)(h);var y=e(7090824688),I=e(630868093),T=e(3288846409),f=e(5286203919),g=e(5751973043);function M(){return M=Object.assign||function(E){for(var C=1;C<arguments.length;C++){var S=arguments[C];for(var b in S)Object.prototype.hasOwnProperty.call(S,b)&&(E[b]=S[b])}return E},M.apply(this,arguments)}u(M,"_extends");const A=new s.Ay("huddles"),O=u(E=>{let{isFreeTeam:C,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:S,channel:b,otherMembersInHuddle:k,onSelectedMembersChange:W,onSelectedChannelChange:N,selectedMemberIds:V=g.Ml,selectedChannel:R}=E;const P=(0,T.cw)(f.E9),z=(0,t.useMemo)(()=>N&&!b&&!C&&!(V!=null&&V.length),[b,C,N,V]),$=(0,t.useMemo)(()=>R!=null&&R.id&&R.isCurrentSuggestedChannel?!0:!(R!=null&&R.id),[R]),x=(0,t.useMemo)(()=>({entities:{...z&&{channels:{canPost:!0,includeArchived:!1}},...$&&{members:{includeSelf:!1,includeSlackbot:!1,includeBots:!1},userGroups:!1}},sort:{frecency:!0,preferChannelMembers:!0,preferChannelsUserBelongsTo:!0,currentChannel:b},allowEmptyQuery:!0,filter:oe=>!k.includes(oe.id)}),[z,$,b,k]),Y=(0,t.useCallback)(oe=>{N&&(0,_.A)(oe.value)?N(oe.value):W([oe.value])},[N,W]),ne=(0,t.useCallback)(oe=>{const me=[];let ue;oe.forEach(ae=>{(0,_.A)(ae.value)?(!ue||ae.value!==(R==null?void 0:R.id))&&(ue=ae.value):me.push(ae.value)}),N==null||N(ue),W(me)},[N,W,R]),re=(0,t.useCallback)(oe=>{let{value:me,entity:ue}=oe;return t.createElement(v,{channel:b,id:me,entity:ue,huddleId:P})},[b,P]),_e=(0,t.useCallback)(oe=>{let{value:me}=oe;return(0,_.A)(me)?t.createElement(a.A,{channelId:me}):t.createElement(c.A,{id:me,showAvatar:!0})},[]),G=(0,t.useMemo)(()=>({className:"padding_top_50 padding_bottom_50",searcherOptions:x,renderOption:re,selectId:"invite_participants",size:"medium",width:"100%",expandOnFocus:C,focusOnMount:!0}),[x,re,C]),ge=(0,t.useMemo)(()=>{const oe=V.map(me=>({value:me}));return R!=null&&R.id&&oe.push({value:R.id}),oe},[R,V]);return C&&S?t.createElement(I.uR,M({},G,{onOptionSelected:Y,placeholderText:A.t("Find someone to invite\u2026"),renderSelectedOption:_e,selectedOption:ge[0]})):t.createElement(y.h7,M({},G,{onSelectedItemsChange:ne,selectedOptions:ge,placeholderText:A.t("Search by name")}))},"HuddleInviteModalSelect");O.displayName="HuddleInviteModalSelect";const D=O},605594140:(j,p,e)=>{"use strict";e.d(p,{A:()=>le});var t=e(3134334389),n=e(6023831373),s=e(3288846409),a=e(7715417323),c=e(5751973043),o=e(5363983309),i=e(9101533895),l=e(5286203919),_=e(6470070112),d=e(1407713935),r=e(5911067953),m=e(9706240641),h=e(4075246222),v=e(8300007136),y=e(6084388622),I=e(7937864072),T=e(3730613858),f=e(666760496),g=e(1563996154),M=e(444524526),A=e(980293773),O=e(9548972574),D=e(5795074931),E=e(5332875232),C=e(735940183),S=e(9289081806),b=e(581167618),k=e(3534324375),W=e(8276911661),N=e(8739505998),V=e(438845125);const R=new C.Ay("huddles");function P(Te){let{members:Ie,createNewMpim:De}=Te;var pe,fe,Z;const se=(0,n.Z2)(Le=>Ie.map(Ue=>(0,k.sE)(Le,(0,W.nv)(Le,Ue.slackId))));if(!Ie)return null;const Ae=se&&se.slice(3),Ce=R.rt("{unknownMembers, plural, =1 {<strong>{name1}</strong>} =2 {<strong>{name1}</strong> and <strong>{name2}</strong>} =3 {<strong>{name1}</strong>, <strong>{name2}</strong>, and <strong>{name3}</strong>} other {<strong>{name1}</strong>, <strong>{name2}</strong>, <strong>{name3}</strong> and <strong>{numOthers}</strong> more}} won\u2019t be able to see messages sent in thread because this huddle began in a direct message. You can <a>start a new huddle</a> instead.",{unknownMembers:Ie.length,name1:t.createElement(V.A,{slackId:(pe=Ie[0])===null||pe===void 0?void 0:pe.slackId}),name2:t.createElement(V.A,{slackId:(fe=Ie[1])===null||fe===void 0?void 0:fe.slackId}),name3:t.createElement(V.A,{slackId:(Z=Ie[2])===null||Z===void 0?void 0:Z.slackId}),numOthers:t.createElement(g.Ay,{zIndex:"above_fs",position:"top",tip:(0,C.jd)(Ae)},t.createElement("span",null,Ie.length-3))},Le=>{let{text:Ue,tag:Pe}=Le;return Pe==="a"?t.createElement(N.A,{onClick:De},Ue):null});return t.createElement(b.Ay,{level:b.A_.info,type:b.QE.custom},Ce)}u(P,"HuddleInviteMpimAlert"),P.displayName="HuddleInviteMpimAlert";const z=P;var $=e(7268021173),x=e(3677514771),Y=e(6839188756),ne=e(4983989341),re=e(4481313819),_e=e(6244014364),G=e(1743656885),ge=e(9953252450),oe=e(7396657731),me=e(9236164662),ue=e(9645800439),ae=e(6011052675),he=e(3109955471),ce=e(3810478625),ee=e(1051015021),J=e(952756744),X=e(716227588),F=e(6259241484);const L=new C.Ay("huddles"),K={elementName:"learn_more",onClick:{enableClogAction:!0}};function B(Te){let{closeModal:Ie,callId:De,channelId:pe,selectedMemberIds:fe=c.Ml}=Te;const Z=(0,v.wA)(),se=(0,I.A)(),Ae=(0,n.d4)(D.WR),Ce=(0,n.d4)(_.pl),Le=(0,n.d4)(Xt=>(0,i.OL)(Xt,pe)),Ue=(0,n.d4)(O.qr),Pe=(0,n.d4)(E.Si),He=(0,n.d4)(ce.g),Qe=(0,n.Z2)(Xt=>(0,O.ft)(Xt,pe).filter(xt=>xt.id!==Ae).map(xt=>xt.id)),qe=(0,n.d4)(Xt=>(0,X.Hp)(Xt,F.xu.HUDDLE_INVITE_MODAL))===F.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER,[ct,tt]=(0,t.useState)(fe),[it,Ge]=(0,t.useState)(!1),We=(0,n.Z2)(Xt=>!pe||!(ct!=null&&ct.length)?[]:ct.filter(en=>{const un=(0,T.Sv)(Xt,pe,en);return un&&un.isKnown&&!(un!=null&&un.isMember)?en:!1})),xe=(0,n.d4)(x.H7),ze=(0,Y.tc)(xe),mt=(0,n.d4)($.iH),pt=(0,t.useCallback)(Xt=>{tt(Xt)},[]),It=(0,t.useCallback)(Xt=>{tt(ct.concat(Xt))},[ct]),bt=(0,t.useMemo)(()=>{const Xt=(0,S.Hd)(Le);return Array.isArray(Xt)?Xt:[]},[Le]),gt=bt.filter(Xt=>Xt!==Ae),ht=(0,t.useCallback)((0,m.coroutine)(function*(){if(!pe)return;let Xt=ct.concat(Qe);return bt&&(Xt=(0,h.A)(Xt,bt)),Z((0,ne.x)({channelId:pe,memberIds:Xt})).then(()=>{Ie()}).catch(xt=>{se.error(xt),Ge(!1)})}),[pe,ct,Qe,bt,Z,Ie,se]),Zt=(0,t.useCallback)((0,m.coroutine)(function*(){if(!pe)return;Ge(!0);const Xt=ct.concat(Qe);return Z((0,f.A)({channelId:pe,userIds:Xt})).then(()=>{Ie()}).catch(xt=>{se.error(xt),Ge(!1)})}),[pe,Ie,Z,se,Qe,ct]),rn=u(()=>ze&&!Pe&&!Ue?t.createElement(oe.A,null):mt&&!Ue&&!He?t.createElement(ge.A,null):null,"maybeRenderBanner");rn.displayName="maybeRenderBanner";let zt,In,cn,Jt;const dn=u(Xt=>{const xt=Xt.map(en=>t.createElement(M.A,{key:en,isBold:!1,id:en}));return xt&&(0,C.jd)(xt)},"listifiedOverflowMembers");dn.displayName="listifiedOverflowMembers",ze&&Pe&&!Ue?(zt=L.t("Invite someone else to your huddle"),cn=L.rt("{participants, plural, =0 {<b>{firstParticipant}</b> is} =1 {<b>{firstParticipant}</b> and <b>{secondParticipant}</b> were} other {<b>{firstParticipant}</b> <a>and # others</a> were}} already invited, but {participants, plural, =0 {hasn\u2019t} =1 {haven\u2019t} other {haven\u2019t}} joined. ",{participants:(gt==null?void 0:gt.length)-1,firstParticipant:t.createElement(M.A,{isBold:!1,id:gt[0]}),secondParticipant:t.createElement(M.A,{isBold:!1,id:gt[1]}),"<a>":Xt=>{let{text:xt}=Xt;return t.createElement(g.Ay,{zIndex:"above_fs",tip:dn(gt==null?void 0:gt.slice(1))},t.createElement("span",null,xt))},"<b>":Xt=>{let{text:xt}=Xt;return t.createElement("b",null,xt)}}),Jt=L.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. Invite anyone until someone joins. <a>Learn more</a>",{"<a>":Xt=>{let{text:xt}=Xt;return t.createElement(G.A,{articleId:4402059015315,ariaLabel:L.t("Learn more about Huddles"),forceOpenInBrowser:!0,autoClogProps:K},xt)},fallbackHash:"53e44c4bd8bcf67461de7b54ef1ec275b05f4829"})):(zt=L.t("Invite people to your huddle"),In=L.t("You can invite people from outside this private conversation, but they may have restricted access to messages."));const sn=(0,t.useMemo)(()=>ct.length>1?L.t("Send Invites"):L.t("Send Invite"),[ct]);return!Ce||!pe?null:t.createElement(A.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:Ie,contentLabel:zt,shouldReturnFocusAfterClose:!0},t.createElement(A.rQ,null,t.createElement(A.Rc,{title:zt,subtitle:In})),t.createElement(A.$m,null,t.createElement(A.qf,null,(cn||Jt)&&t.createElement("p",null,cn,Jt),t.createElement(ue.A,{isFreeTeam:ze&&!Ue,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:Pe,channel:Le,otherMembersInHuddle:Qe,onSelectedMembersChange:pt,selectedMemberIds:ct}),(We==null?void 0:We.length)>0&&t.createElement(z,{members:We.map(Xt=>({slackId:Xt})),createNewMpim:ht})),rn(),He&&t.createElement(J.s,null),Ue&&ze&&!qe&&t.createElement(ee.V,{showProBadge:!0,className:"p-huddle_invite_channel_or_start__upgrade_alert"}),t.createElement(he.A,{activeHuddleCallId:De,channel:Le,isFreeTeam:ze&&!Ue,onSuggestedUserSelected:It,otherMembersInHuddle:Qe,selectedMemberIds:ct})),t.createElement(A.jl,null,t.createElement(ae.A,{channelId:pe}),t.createElement(A.ox,null,t.createElement(A.s_,{type:"outline"},L.t("Cancel")),t.createElement(re.A,{clogImpression:!0,eventId:_e.EventId.HUDDLES_MPIM_INVITE},t.createElement(y.lV,{loading:it,onClick:Zt,type:"primary",disabled:!ct.length},sn)))),Pe&&ze&&!Ue&&t.createElement(me.A,{selectedMemberIds:ct}))}u(B,"HuddleInviteMpim"),B.displayName="HuddleInviteMpim";const Q=B;function q(Te){let{closeModal:Ie=a.A,selectedMemberIds:De=c.Ml}=Te;const pe=(0,n.d4)(_.pl),fe=(0,s.cw)(l.E9),Z=(0,s.cw)(l.hc),se=(0,n.d4)(Ae=>(0,i.OL)(Ae,Z));return pe?(0,d.JM)(se)?t.createElement(Q,{callId:fe,channelId:Z,closeModal:Ie,selectedMemberIds:De}):t.createElement(r.A,{callId:fe,channel:se,closeModal:Ie,selectedMemberIds:De}):null}u(q,"HuddleInviteOrStartModal"),q.displayName="HuddleInviteOrStartModal";const le=(0,o.A)(q,{isStackable:!0})},3109955471:(j,p,e)=>{"use strict";e.d(p,{A:()=>re});var t=e(3134334389),n=e(2003990933),s=e(7156798807),a=e(5103024697),c=e(6023831373),o=e(5795074931),i=e(3730613858),l=e(8276911661),_=e(1289024643),d=e(4822627003),r=e(3214129289),m=e(9163492386),h=e(8683010724),v=e(9289081806),y=e(1407713935),I=e(8798294025),T=e(4562579337),f=e(8170643398),g=e(863407566),M=e(181849556),A=e(735940183),O=e(2828836153),D=e(3877384923);const E=new A.Ay("huddles");var C;(function(_e){_e[_e.Channel=0]="Channel",_e[_e.Here=1]="Here"})(C||(C={}));const S=u(_e=>{let{variation:G}=_e;const ge=(0,t.useMemo)(()=>{const oe=G===C.Channel?E.t("@channel",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}):E.t("@here",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}),me=G===C.Channel?E.t("Invite every member in this channel",{fallbackHash:"356143f00ea36746c3a9c41765b940644ca651cf",fallbackHashNs:"broadcast_keywords"}):E.t("Invite every online member in this channel",{fallbackHash:"d6f32ea27e0fd9186b386de54a63fc72a17a2075",fallbackHashNs:"broadcast_keywords"});return t.createElement("div",{className:"p-huddle_invite_channel_list_entity"},t.createElement("div",{className:"p-huddle_invite_channel_list_entity__icon_container"},t.createElement(h.A,{name:"mentions",size:"24",variation:"large"})),t.createElement("div",{className:"p-huddle_invite_channel_list_entity_text_container"},t.createElement("span",{className:"c-base_entity__text p-huddle_invite_channel_list_entity__title"},oe),t.createElement("span",{className:"c-base_entity__subtext"},me)))},[G]);return t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item_button__list_entity"},t.createElement(O.A,{size:D.ny.medium,padding:D.FK.normal,primaryContent:ge}))},"HuddleInviteChannelListEntity");S.displayName="HuddleInviteChannelListEntity";const b=S;var k=e(8286248123),W=e(9548972574),N=e(5751973043),V=e(9680914051),R=e(6470070112);const P=new A.Ay("huddles");var z;(function(_e){_e.SUGGESTIONS="suggestions",_e.INVITED="invited"})(z||(z={}));function $(_e,G,ge,oe,me,ue,ae){return!(!_e||G||ge||_e===oe||me.includes(_e)||ue.includes(_e)||ae.includes(_e))}u($,"shouldSuggestMember");const x="channelEntityId",Y="channelHereEntityId",ne=u(_e=>{let{activeHuddleCallId:G,channel:ge,isFreeTeam:oe,onSuggestedUserSelected:me,onChannelSelected:ue,onChannelHereSelected:ae,otherMembersInHuddle:he,selectedMemberIds:ce,channelSuggestionOptionSelected:ee=!1}=_e;const J=(0,c.d4)(o.WR),X=(0,c.d4)(xe=>(0,k.q8)(xe,ge==null?void 0:ge.id)),F=(0,c.d4)(R.df),L=(0,n.A)(X,"counts.member_count")||void 0,K=(0,y.JM)(ge),B=(0,c.d4)(W.Sx),Q=(0,c.d4)(xe=>(0,_.k9)(xe,G)),q=(0,c.d4)(xe=>(0,_.I1)(xe,G)),Te=B+1+Q+q,Ie=(0,c.Z2)(xe=>(0,_.Kx)(xe,G)),De=(0,t.useMemo)(()=>Ie?Object.keys(Ie):[],[Ie]),pe=De.length,fe=25,Z=(0,c.Z2)(xe=>(0,g.A)(xe,(ge==null?void 0:ge.id)||"",fe,fe,!0).map(mt=>mt.id));let se=[];if((0,y.LI)(ge)){const xe=(0,I.e)(ge);xe&&se.push(xe)}else if((0,y.yz)(ge)){const xe=(0,v.Ug)(ge);xe&&xe.length&&(se=[...xe])}else se=Z;const Ae=(0,c.wz)(xe=>{if(ee||!se||!se.length)return N.Ml;const ze=[];return se.forEach(mt=>{const pt=(0,l.nv)(xe,mt);$(mt,(0,T.A)(pt),(0,f.oy)(pt),J,he,De,ce)&&ze.push({id:mt,isMemberOfChannel:!0})}),ze}),Ce=(0,c.wz)(M.mc),Le=(0,c.wz)(xe=>{if(!Ce||!Ce.length)return N.Ml;const ze=[];return Ce.forEach(mt=>{const pt=(0,l.nv)(xe,mt.id);if(!$(mt.id,(0,T.A)(pt),(0,f.oy)(pt),J,he,De,ce)||se.includes(mt.id))return;const It=ge&&(0,i.Sv)(xe,ge.id,mt.id),bt=It&&It.isKnown&&It.isMember;ze.push({id:mt.id,isMemberOfChannel:bt})}),ze}),Ue=(0,t.useMemo)(()=>!ue||(0,y.PC)(ge)?!1:L<=V.XG&&Te+L<=F&&!ee,[L,ee,Te,F,ue,ge]),Pe=(0,t.useMemo)(()=>Ae.length>=fe?Ae.slice(0,fe):[...Ae,...Le].slice(0,fe),[Ae,Le]),He=(0,t.useMemo)(()=>Pe.map(xe=>xe.id),[Pe]),Qe=(0,t.useMemo)(()=>(0,s.A)(Pe,"id"),[Pe]),lt=(0,t.useMemo)(()=>Math.min(60*Math.max(pe,He.length),240),[He,pe]),qe=(0,t.useCallback)((xe,ze)=>{if(ze.key===x)return t.createElement(b,{variation:C.Channel});if(ze.key===Y)return t.createElement(b,{variation:C.Here});const mt=Qe[ze.key];if(!mt)return;let pt=null;return mt.isMemberOfChannel===!1&&(K||(0,y.PC)(ge)?pt=P.t("Not in conversation"):pt=P.t("Not in channel")),t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item_button__list_entity"},t.createElement(d.A,{id:mt.id,secondaryContent:pt}))},[K,Qe,ge]),ct=(0,t.useCallback)(xe=>{if(xe.id){if(xe.id===x){ue&&ue();return}if(xe.id===Y){ae&&ae();return}me(xe.id)}},[ae,ue,me]),tt=(0,t.useCallback)(()=>{let xe=He;return Ue&&(xe=[x,...He]),t.createElement(a.A,{disableHeight:!0},ze=>{let{width:mt}=ze;return t.createElement(m.A,{"aria-label":P.t("Suggested"),keys:xe,rowRenderer:qe,onItemClick:ct,width:mt,height:lt})})},[Ue,qe,He,ct,lt]),it=(0,t.useCallback)(xe=>{const ze=De[xe],mt=Ie==null?void 0:Ie[ze];if(!mt)return null;const pt=mt==="joining_soon",It=t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item__pending_status_container"},t.createElement(h.A,{name:pt?"clock":"paper-plane",size:"20"}),t.createElement("span",null,pt?P.t("Joining soon"):P.t("Invited")));return t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item__list_entity"},t.createElement(d.A,{id:ze,secondaryContent:It}))},[De,Ie]),Ge=(0,t.useCallback)(()=>t.createElement(a.A,{disableHeight:!0},xe=>{let{width:ze}=xe;return t.createElement(m.A,{"aria-label":P.t("Invited"),keys:De,rowRenderer:it,width:ze,height:lt})}),[De,it,lt]),We=(0,t.useMemo)(()=>{const xe=[];return He.length&&xe.push({title:P.t("Suggested"),id:z.SUGGESTIONS,content:tt()}),xe.push({title:P.t("Invited"),id:z.INVITED,titleCount:pe,content:Ge()}),xe},[He,pe,Ge,tt]);return!G||oe?null:t.createElement("div",{className:"p-huddle_invite_suggestion_tabs"},t.createElement(r.A,{fullHeight:!0,tabs:We,tabMenuClassnames:"p-huddle_invite_suggestion_tabs__tab_menu"}))},"HuddleInviteSuggestionTabs");ne.displayName="HuddleInviteSuggestionTabs";const re=t.memo(ne)},4869203191:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>f,Gr:()=>T,Lv:()=>r,jc:()=>y,z2:()=>I});var t=e(9706240641),n=e.n(t),s=e(735940183),a=e(2778217221),c=e(8664881451),o=e(2854284421),i=e(2047021170),l=e(5203103513),_=e(2001112473);const d=new s.Ay("huddles"),r="LOUNGE_MUSIC_PLAYER",m=[o.N3,o._4,o.j1,o._V,o.PM,o.tn,o.uu,o.jc];var h;(function(g){g.WaitingRoom="waiting",g.Subway="subway",g.Whistle="whistle",g.Jazz="jazz",g.Focus="focus",g.DiscoParty="disco",g.Zen="zen",g.Nature="nature"})(h||(h={}));const v=h.Jazz,y=u(g=>g?!!Object.values(h).includes(g):!1,"isValidSongKey"),I=u(g=>(0,i.ty)(g,l.Mz)||v,"getSongKeyFromUserPref"),T=u(()=>({[h.WaitingRoom]:{key:h.WaitingRoom,urlName:"waitingRoom",url:o.tn,displayName:d.t("Waiting Room")},[h.Subway]:{key:h.Subway,urlName:"subwayMusic",url:o.PM,displayName:d.t("Subway Music")},[h.Whistle]:{key:h.Whistle,urlName:"whistleTune",url:o.jc,displayName:d.t("Whistle Tune")},[h.Jazz]:{key:h.Jazz,urlName:"waitingMuzak",url:o.uu,displayName:d.t("Smooth Jazz")},[h.Focus]:{key:h.Focus,urlName:"focusBeats",url:o._4,displayName:d.t("Focus Beats")},[h.DiscoParty]:{key:h.DiscoParty,urlName:"discoParty",url:o.N3,displayName:d.t("Happy Bass")},[h.Zen]:{key:h.Zen,urlName:"momentOfZen",url:o.j1,displayName:d.t("Sound Bath")},[h.Nature]:{key:h.Nature,urlName:"natureMeditation",url:o._V,displayName:d.t("Nature Meditation")}}),"getSongsMetadata");let f=u(class uo{static getInstance(M){let{experimentHuddlesLoungeMusicPlayerGroupOn:A}=M;return uo.instance||(uo.instance=new uo({experimentHuddlesLoungeMusicPlayerGroupOn:A})),uo.instance}constructor({experimentHuddlesLoungeMusicPlayerGroupOn:M}){this.getCurrentTrackDisplayName=()=>{const O=m[this.activeTrackIndex],D=T(),E=Object.values(D).find(C=>C.url===O);return E==null?void 0:E.displayName};var A=this;this.playMusic=(0,t.coroutine)(function*(){let{songKey:O,registerOnEndedCallback:D,logger:E,fromFirstTrack:C,loopSong:S}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{registerOnEndedCallback:!1,fromFirstTrack:!0,loopSong:!1};C&&(A.activeTrackIndex=0),D&&m.forEach(V=>{(0,c.TQ)(V,{ended:A.playNextTrack})});let b=m[A.activeTrackIndex];const k=(0,c.Dd)(b);if(O){var W;k&&(0,c.ds)(b);const R=(W=T()[O])===null||W===void 0?void 0:W.url,P=R?m.findIndex(z=>z===R):-1;P>-1&&(b=R,A.activeTrackIndex=P)}const N=(0,_._o)();if(N&&k)try{yield k.setSinkId(N),E==null||E.info(a.o7,`setSinkId success for lounge music on deviceID: ${N}`)}catch{E==null||E.info(a.o7,`setSinkId failed for lounge music on deviceID: ${N}`)}(0,c.ZH)(b,{loop:!!S})}),this.stopMusic=O=>{let{clearOnEndedCallback:D,logger:E,logContext:C}=O;D&&m.forEach(S=>{(0,c.Rj)(S,"ended",this.playNextTrack)}),(0,c.ds)(m[this.activeTrackIndex],{logFailure:!1}),E.info(a.o7,`stopped lounge music [${C}]`)},this.incrementActiveTrackIndex=()=>{this.activeTrackIndex<m.length-1?this.activeTrackIndex+=1:this.activeTrackIndex=0},this.playNextTrack=()=>{(0,c.ds)(m[this.activeTrackIndex]),this.incrementActiveTrackIndex(),(0,c.ZH)(m[this.activeTrackIndex],{loop:!1})},this.activeTrackIndex=0,this.experimentHuddlesLoungeMusicPlayerGroupOn=M}},"HuddleLoungeMusicManager")},124213367:(j,p,e)=>{"use strict";e.d(p,{A:()=>h});var t=e(3134334389),n=e(9391594207),s=e(3297051565),a=e.n(s),c=e(4979382452),o=e(4636370173),i=e(2465132699),l=e(6308822),_=e(9003400431);const d={className:a().string,closeModal:a().func.isRequired},r={className:void 0};function m(v){return t.createElement(c.A,{className:v.className,closeModal:v.closeModal},t.createElement(o.A,null,t.createElement(i.A,null,t.createElement("div",{className:"c-lazy_modal"},t.createElement(l.A,null)))))}u(m,"LoadingModal"),m.displayName="LoadingModal",m.propTypes=d,m.defaultProps=r;const h=(0,n.N)(null,v=>({closeModal:function(){for(var y=arguments.length,I=new Array(y),T=0;T<y;T++)I[T]=arguments[T];return v((0,_.O)(...I))}}))(m)},79199995:(j,p,e)=>{"use strict";e.d(p,{WJ:()=>_,eW:()=>l,fJ:()=>h,g2:()=>m,kY:()=>d,oE:()=>i});var t=e(4418517660),n=e.n(t),s=e(583204418),a=e(735940183),c=e(6471801899);const o=new a.Ay("lists");var i;(function(v){v.Today="today",v.Yesterday="yesterday",v.Tomorrow="tomorrow",v.ThisWeek="this_week",v.NextWeek="next_week",v.LastWeek="last_week",v.SinceILastViewed="since_i_last_viewed"})(i||(i={}));const l=u(v=>!v.options||v.options.dateFormat===s.cf.Default?c.Wl:v.options.dateFormat,"getDateFormat"),_=u(v=>Object.values(i).includes(v),"isDateFilterOption"),d=u(v=>{switch(v){case i.Today:return o.t("Today");case i.Yesterday:return o.t("Yesterday");case i.Tomorrow:return o.t("Tomorrow");case i.ThisWeek:return o.t("This week");case i.NextWeek:return o.t("Next week");case i.LastWeek:return o.t("Last week");case i.SinceILastViewed:return o.t("Since last time you viewed");default:return v}},"formatDateForMenu"),r=u(v=>{const y=n()(v).startOf("isoWeek"),I=n()(v).endOf("isoWeek"),T=[];let f=y;for(;f<=I;)T.push(f),f=f.clone().add(1,"days");return T},"getWeekdays"),m=u(v=>{let y;switch(v){case i.Today:y=n()().format(c.DX);break;case i.Yesterday:y=n()().subtract(1,"days").format(c.DX);break;case i.Tomorrow:y=n()().add(1,"days").format(c.DX);break;case i.ThisWeek:y=r(n()()).map(I=>I.format(c.DX));break;case i.NextWeek:y=r(n()().add(1,"weeks")).map(I=>I.format(c.DX));break;case i.LastWeek:y=r(n()().subtract(1,"weeks")).map(I=>I.format(c.DX));break;case i.SinceILastViewed:y=n()().format(c.DX);break;default:y=v}return y},"getStaticDateValue"),h=n()().format(c.DX)},3001769570:(j,p,e)=>{"use strict";e.d(p,{OQ:()=>I,PL:()=>l,R8:()=>M,UE:()=>v,Ui:()=>y,aI:()=>h,aN:()=>T,bV:()=>m,bw:()=>r,lx:()=>f,nM:()=>g,rD:()=>d});var t=e(1649982175),n=e(166097325),s=e(7682358855),a=e(8191156954),c=e(4097827290),o=e(735940183);const i=new o.Ay("lists"),l=u((A,O)=>A.indexOf(O)===-1?[...A,O]:A.filter(E=>E!==O),"toggleValueInFilterValues"),_=u(A=>{if(!A.length)return A;const O=A==null?void 0:A.flatMap(E=>E.split("|"));return[...new Set(O)]},"parseUserIdsAndRemoveDupes"),d=u((A,O)=>{const D=[];return Object.values(A??{}).forEach(C=>{if(C.fields&&C.fields[O]){const S=C.fields[O];D.push(S.trim())}}),[s._4,..._(D)]},"getUserIdsInUserColumns"),r=u((A,O,D)=>{const E=A.map(S=>(0,t.A)(S,[D])),C=O.map(S=>(0,t.A)(S,[D]));return(0,n.A)(E,C)},"isLocalAndServerFilterSortsEqual"),m=u((A,O)=>{var D;const E=O.get((D=A.key)!==null&&D!==void 0?D:"");return E?!(0,n.A)(E.operator,A.operator)||!(0,n.A)(new Set(E.values),new Set(A.values)):!0},"isFilterUnsavedOrModified"),h=u(A=>{let O=A;return Boolean(O.find(E=>E.type===a.$.CreatedTime))||(O=[...O,{id:a.$.CreatedTime,name:"Created time",key:a.$.CreatedTime,type:a.$.CreatedTime,isPrimaryColumn:!1}]),O},"appendCreatedTimeDataColumn"),v=u(A=>{switch(A.type){case a.$.Checkbox:case a.$.Completed:case a.$.Message:return[c.t.IsEmpty,c.t.IsNotEmpty];case a.$.Assignee:case a.$.CreatedBy:case a.$.LastEditedBy:case a.$.Rating:case a.$.Select:case a.$.User:case a.$.Text:return[c.t.Contains,c.t.DoesNotContain,c.t.IsEmpty,c.t.IsNotEmpty];case a.$.Currency:case a.$.Number:case a.$.Date:return[c.t.Equal,c.t.NotEqual,c.t.LessThan,c.t.GreaterThan,c.t.IsEmpty,c.t.IsNotEmpty];default:return[c.t.Equal,c.t.NotEqual,c.t.IsEmpty,c.t.IsNotEmpty]}},"getOperatorsFromColumn"),y=u(A=>A.type===a.$.Checkbox,"isCheckboxFilter"),I=u(A=>A.type===a.$.Completed,"isCompletedFilter"),T=u(A=>A.operator===c.t.IsEmpty||A.operator===c.t.IsNotEmpty,"isEmptyOperator"),f=u(A=>A.operator===c.t.IsMe||A.operator===c.t.IsNotMe,"isMeOperator"),g=u(A=>A.type===a.$.Date||A.type===a.$.DueDate||A.type===a.$.CreatedTime||A.type===a.$.LastEditedTime,"isDateFilter"),M=u((A,O)=>{switch(A){case c.t.IsEmpty:return y(O)?i.t("is not checked"):I(O)?i.t("Not completed"):i.t("is empty");case c.t.IsNotEmpty:return y(O)?i.t("is checked"):I(O)?i.t("Completed"):i.t("is not empty");case c.t.Equal:return g(O)?i.t("is"):i.t("is equal to");case c.t.NotEqual:return g(O)?i.t("is not"):i.t("is not equal to");case c.t.GreaterThan:return g(O)?i.t("is after"):i.t("is greater than");case c.t.LessThan:return g(O)?i.t("is before"):i.t("is less than");case c.t.GreaterThanOrEqual:return i.t("is greater than or equal to");case c.t.LessThanOrEqual:return i.t("is less than or equal to");case c.t.Contains:return i.t("includes");case c.t.DoesNotContain:return i.t("does not include");case c.t.IsMe:return i.t("is me");case c.t.IsNotMe:return i.t("is not me");default:return""}},"getFilterOperatorLabel")},9216332371:(j,p,e)=>{"use strict";e.d(p,{AO:()=>oe,Hs:()=>J,Jn:()=>A,M1:()=>ae,Nh:()=>ge,Po:()=>V,Q6:()=>P,Rw:()=>X,Sb:()=>ue,c$:()=>ce,g2:()=>ee,iT:()=>he,kv:()=>$,u1:()=>me,us:()=>_e});var t=e(3783723764),n=e(1703559452),s=e(2240330919),a=e(2101927269),c=e(4418517660),o=e.n(c),i=e(7682358855),l=e(79199995),_=e(8191156954),d=e(4097827290),r=e(2188787324),m=e(7334104107),h=e(4919145213),v=e(583204418),y=e(5045557812),I=e(3342113153),T=e(3802883493),f=e(8088280230),g=e(6471801899),M=e(7606781622);const A=u(F=>{let{record:L,colKey:K}=F;var B,Q,q,le,Te;if(!(L==null||(B=L.fallback)===null||B===void 0)&&B[K])return L.fallback[K];if(!(L==null||(Q=L.fields)===null||Q===void 0||(q=Q.fallback)===null||q===void 0)&&q[K])return L==null||(le=L.fields)===null||le===void 0||(Te=le.fallback)===null||Te===void 0?void 0:Te[K];if(L[K]){if((0,y.A)(L[K])){var Ie,De,pe,fe,Z;return(Z=(fe=(pe=(Ie=L[K])===null||Ie===void 0||(De=Ie[0])===null||De===void 0?void 0:De.elements[0])===null||pe===void 0?void 0:pe.elements[0])===null||fe===void 0?void 0:fe.text)!==null&&Z!==void 0?Z:""}return L[K].toString()}return""},"getStringValue"),O=u(F=>{const L=o()(F).startOf("isoWeek"),K=o()(F).endOf("isoWeek"),B=[];let Q=L;for(;Q<=K;)B.push(Q),Q=Q.clone().add(1,"days");return B},"getWeekdays"),D=u((F,L)=>{const K="YYYY-MM-DD";let B;switch(F){case l.oE.Today:B=o()().format(K);break;case l.oE.Yesterday:B=o()().subtract(1,"days").format(K);break;case l.oE.Tomorrow:B=o()().add(1,"days").format(K);break;case l.oE.ThisWeek:B=O(o()()).map(q=>q.format(K));break;case l.oE.NextWeek:B=O(o()().add(1,"weeks")).map(q=>q.format(K));break;case l.oE.LastWeek:B=O(o()().subtract(1,"weeks")).map(q=>q.format(K));break;case l.oE.SinceILastViewed:return B=o().unix(L),B;default:B=o()(F,K).format(K)}return Array.isArray(B)?B.map(q=>o()(q,K)):o()(B,K)},"convertDynamicDateToStatic"),E=u(function(F,L,K){let B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const Q=B?L:L==null?void 0:L.clone().startOf("day"),q=B?K:K==null?void 0:K.clone().startOf("day");switch(F){case d.t.NotEqual:return!(Q!=null&&Q.isSame(q));case d.t.GreaterThan:return Q==null?void 0:Q.isBefore(q);case d.t.GreaterThanOrEqual:return Q==null?void 0:Q.isSameOrBefore(q);case d.t.LessThan:return Q==null?void 0:Q.isAfter(q);case d.t.LessThanOrEqual:return Q==null?void 0:Q.isSameOrAfter(q);case d.t.Equal:default:return Q==null?void 0:Q.isSame(q)}},"multiDateOperatorFilterValueCheck"),C=u((F,L,K,B,Q)=>{if(!L.values[0])return F;let q=K;const le=L.values[0]===l.oE.SinceILastViewed;return le&&(q=d.t.GreaterThan),F.filter(Te=>{if(Q!=null&&Q.has(Te.id))return!0;const Ie=Te[L.key];let De=Ie?o()(Ie).startOf("day"):void 0;return isNaN(Ie)||(De=o().unix(Ie)),L.values.some(pe=>{if(!pe)return!1;const fe=D(pe.toString(),B);return Array.isArray(fe)?q===d.t.NotEqual?!fe.some(Z=>Z&&De?Z.clone().startOf("day").isSame(De):!1):fe.some(Z=>Z&&De?E(q,Z,De):!1):fe&&De?E(q,fe,De,le):!1})})},"multiDateFilter"),S=u((F,L,K,B)=>{const Q=L.values[0]||"";return F.filter(q=>{if(B!=null&&B.has(q.id))return!0;const le=q[L.key]||"";switch(K){case d.t.DoesNotContain:return!le.toLowerCase().includes(Q.toString().toLowerCase());case d.t.Contains:default:return le.toLowerCase().includes(Q.toString().toLowerCase())}})},"textFilter"),b=u((F,L,K,B)=>{const Q=L.values[0]||"";return F.filter(q=>{if(B!=null&&B.has(q.id))return!0;const le=A({record:q,colKey:L.key});switch(K){case d.t.DoesNotContain:return!le.toLowerCase().includes(Q.toString().toLowerCase());case d.t.Contains:default:return le.toLowerCase().includes(Q.toString().toLowerCase())}})},"richTextFilter"),k=u((F,L,K,B)=>{if(!L.values.length)return F;var Q;const q=Number((Q=L.values[0])!==null&&Q!==void 0?Q:"");return F.filter(le=>{if(B!=null&&B.has(le.id))return!0;var Te;const Ie=Number((Te=le[L.key])!==null&&Te!==void 0?Te:"");if(!(q&&!Ie))switch(K){case d.t.NotEqual:return Ie!==q;case d.t.GreaterThan:return Ie>q;case d.t.GreaterThanOrEqual:return Ie>=q;case d.t.LessThan:return Ie<q;case d.t.LessThanOrEqual:return Ie<=q;case d.t.Equal:default:return Ie===q}})},"numberFilter"),W=u((F,L,K,B)=>{const Q=new Set(L.values);return Q.size?F.filter(q=>{if(B!=null&&B.has(q.id))return!0;var le;const Te=String((le=q[L.key])!==null&&le!==void 0?le:"");switch(K){case d.t.Contains:return Q.has(Te);case d.t.DoesNotContain:return!Q.has(Te);case d.t.IsEmpty:return Te===null;case d.t.IsNotEmpty:return Te!==null;default:return!0}}):F},"multiRatingFilter"),N=u((F,L,K,B,Q,q)=>{const le=L.values.map(Ie=>Ie===i._4&&q?q:Ie),Te=new Set(le);return Te.size?F.filter(Ie=>{if(Q!=null&&Q.has(Ie.id))return!0;const De=Ie[L.key],pe=(De??"").split(i.eY).filter(Boolean);let fe=!1;for(const Z of pe){if(Te.has(Z)){fe=!0;break}if(!B)break}return K===d.t.Equal?fe:K===d.t.NotEqual?!fe:K===d.t.Contains?fe:K===d.t.DoesNotContain?!fe:!0}):F},"multiOptionFilter");function V(F){return F===0?!1:!F||Array.isArray(F)&&F.length===0}u(V,"isEmptyValue");const R=u((F,L,K,B,Q,q)=>{let le=F;return L.forEach(Te=>{const Ie=K.find(Z=>Z.key===Te.key);if(!Ie)return;const De=Te.operator;if(De===d.t.IsEmpty){le=le.filter(Z=>q!=null&&q.has(Z.id)?!0:V(Z[Te.key]));return}if(De===d.t.IsNotEmpty){le=le.filter(Z=>q!=null&&q.has(Z.id)?!0:!V(Z[Te.key]));return}switch(Ie.type){case _.$.Text:le=b(le,Te,De,q);break;case _.$.Email:case _.$.Phone:le=S(le,Te,De,q);break;case _.$.Number:case _.$.Currency:le=k(le,Te,De,q);break;case _.$.Rating:le=W(le,Te,De,q);break;case _.$.Date:case _.$.DueDate:case _.$.CreatedTime:case _.$.LastEditedTime:le=C(le,Te,De,Q,q);break;case _.$.Checkbox:case _.$.Completed:return;case _.$.Select:var pe;le=N(le,Te,De,((pe=Ie.options)===null||pe===void 0?void 0:pe.format)===v.YP.MultiSelect,q);break;case _.$.Channel:case _.$.Canvas:case _.$.User:case _.$.Assignee:case _.$.CreatedBy:case _.$.LastEditedBy:switch(De){case d.t.IsMe:le=le.filter(Z=>{var se;return q!=null&&q.has(Z.id)?!0:(se=Z[Te.key])===null||se===void 0?void 0:se.includes(B)});break;case d.t.IsNotMe:le=le.filter(Z=>{var se;return q!=null&&q.has(Z.id)?!0:!(!((se=Z[Te.key])===null||se===void 0)&&se.includes(B))});break;default:var fe;le=N(le,Te,De,((fe=Ie.options)===null||fe===void 0?void 0:fe.format)===v.hx.MultiEntity,q,B)}break;default:le=S(le,Te,De,q);break}}),le},"applyFiltersToRecords"),P=new Map([[_.$.Text,""],[_.$.Email,""],[_.$.Date,""],[_.$.Checkbox,!1],[_.$.Completed,!1],[_.$.Number,0],[_.$.Rating,0],[_.$.CreatedTime,0],[_.$.LastEditedTime,0],[_.$.Channel,""],[_.$.User,""],[_.$.CreatedBy,""],[_.$.LastEditedBy,""]]);function z(F){if(!Array.isArray(F)||F.length===0)return"";const L=u(K=>{for(const B of K){if(B.type==="text"&&B.text)return B.text;if(B.elements&&Array.isArray(B.elements)){const Q=L(B.elements);if(Q)return Q}}return""},"findTextRecursively");for(const K of F)if(K.elements&&Array.isArray(K.elements)){const B=L(K.elements);if(B)return B}return""}u(z,"extractFirstTextElement");const $=u((F,L,K,B)=>{const Q=L.map(Ie=>Ie.ascending?"asc":"desc"),q=new Map;for(const Ie of K)if(Ie.type===_.$.Select){var le;const De=((le=Ie.options)===null||le===void 0?void 0:le.choices)||[];for(let pe=0;pe<De.length;pe++){const fe=De[pe],Z=`${Ie.key}:${fe.value}`;q.set(Z,pe)}}const Te=L.map(Ie=>De=>{const pe=K.find(Le=>Le.key===Ie.key),fe=Ie.ascending;if(!pe)return"";const Z=De[Ie.key];let se=Z??P.get(pe.type||_.$.Text);if(se==null&&(se=fe?Number.MAX_SAFE_INTEGER:-1/0),pe.type===_.$.Select){var Ae;const Le=(((Ae=pe.options)===null||Ae===void 0?void 0:Ae.choices)||[]).length,Ue=(Z??"").split(i.eY).filter(Boolean);if(Le===0||Ue.length===0)se=fe?Number.MAX_SAFE_INTEGER:-1/0;else{let Pe=Le;for(const He of Ue){const Qe=`${pe.key}:${He}`;var Ce;const lt=(Ce=q.get(Qe))!==null&&Ce!==void 0?Ce:Le;Pe=Math.min(Pe,lt)}Pe<Le?se=Pe:se=fe?Number.MAX_SAFE_INTEGER:-1/0}}if(pe.type===_.$.User&&B&&(Z==null||Z===""?se=fe?"zzzzzzzz":"":B[Z]?se=B[Z].toLowerCase():se=fe?"zzzzzzzz":""),pe.type===_.$.Text&&(Z==null||Z===""||Array.isArray(Z)&&Z.length===0?se=fe?"zzzzzzzz":"":typeof Z=="string"?se=Z.toLowerCase():se=z(Z).toLowerCase()),pe.type===_.$.Vote){const Le=(Z??"").split(i.eY).filter(Boolean);Le.length>0?se=Le.length:fe?se=Number.MAX_SAFE_INTEGER:se=-1/0}if((pe.type===_.$.Number||pe.type===_.$.Currency||pe.type===_.$.Rating)&&(Z==null||Z===""?se=fe?Number.MAX_SAFE_INTEGER:-1/0:se=Number(Z)),pe.type===_.$.Date||pe.type===_.$.DueDate||pe.type===_.$.CreatedTime||pe.type===_.$.LastEditedTime){const Le=new Date(Z);Z==null||Z===""?se=fe?Number.MAX_SAFE_INTEGER:-1/0:isNaN(Le.getTime())||(se=Le.getTime())}return se});return(0,t.A)(F,Te,Q)},"applySortToRecords"),x=new Set([_.$.Text,_.$.Email,_.$.Phone,_.$.Number,_.$.Rating,_.$.Select,_.$.User]),Y=u((F,L,K,B)=>{const Q=L.filter(De=>x.has(De.type)),q=new Map;for(const De of Q)if(De.type===_.$.Select){var le,Te;const pe=(Te=(le=De.options)===null||le===void 0?void 0:le.choices)!==null&&Te!==void 0?Te:[];for(const{value:fe,label:Z}of pe){const se=`${De.key}:${fe}`;q.set(se,Z)}}const Ie=K.toLowerCase();return F.filter(De=>(0,n.A)(Q,pe=>{const fe=A({record:De,colKey:pe.key});if(pe.type===_.$.Select){var Z;let Ce=fe.split(i.eY).filter(Boolean);((Z=pe.options)===null||Z===void 0?void 0:Z.format)===v.YP.MultiSelect||(Ce=Ce.slice(0,1));for(const Ue of Ce){const Pe=`${pe.key}:${Ue}`;var se;if(((se=q.get(Pe))!==null&&se!==void 0?se:fe).toLowerCase().includes(Ie))return!0}}if(pe.type===_.$.User&&B){var Ae;const Ce=(Ae=B[fe])!==null&&Ae!==void 0?Ae:"";return Ce&&Ce.toLowerCase().includes(Ie)}return fe.toLowerCase().includes(Ie)}))},"applySearchStringToRecords"),ne=u(F=>{let{listRecords:L,records:K}=F;return K.map(B=>{const Q=L==null?void 0:L[B.id];return{...B,highlightAsNew:Q==null?void 0:Q.highlightAsNew}})},"applyHighlightAsNew"),re=u(F=>{let{listRecords:L,records:K}=F;return K.map(B=>{const Q=L==null?void 0:L[B.id];return{...B,isOpenInFlexpane:Q==null?void 0:Q.isOpenInFlexpane}})},"applyIsOpenInFlexpane"),_e=u(F=>{let{listRecords:L,records:K,schema:B,filterObj:Q,sorts:q,searchString:le,lastReadTimestamp:Te,bottomRecordIds:Ie,userNames:De}=F,pe=K;if(Q){const{filters:fe,currentUserId:Z}=Q;pe=R(pe,fe,B,Z,Te,Ie)}return q&&(pe=$(pe,q,B,De)),le&&(pe=Y(pe,B,le,De)),pe=ne({listRecords:L,records:pe}),pe=re({listRecords:L,records:pe}),pe},"applyModifiersToRecords");function G(F,L,K){const B=(0,M.Ld)(F,L,K);return B&&!(0,h.A)(B)&&!(0,m.aw)(B)&&!(0,m.aH)(B)}u(G,"isValidMarkedMessageForListThread");function ge(F,L,K){return(0,s.A)((0,a.A)(K,B=>G(F,L,B)))}u(ge,"maxRealTsForListThread");function oe(F,L,K,B){const Q=(0,g.Dv)(B,Object.values(K)),q=Q.get(F==null?void 0:F.id),le=Q.get(L==null?void 0:L.id);let Te=null,Ie=null;if(F&&L){if(q)Te=q;else{var De,pe;Te=!((De=K[F.id])===null||De===void 0)&&De.position?`${(pe=K[F.id])===null||pe===void 0?void 0:pe.position}`:null}if(le)Ie=le;else{var fe,Z;Ie=!((fe=K[L.id])===null||fe===void 0)&&fe.position?`${(Z=K[L.id])===null||Z===void 0?void 0:Z.position}`:null}}else if(F)if(q)Te=q;else{var se,Ae;Te=!((se=K[F.id])===null||se===void 0)&&se.position?`${(Ae=K[F.id])===null||Ae===void 0?void 0:Ae.position}`:null}else if(L)if(le)Ie=le;else{var Ce,Le;Ie=!((Ce=K[L.id])===null||Ce===void 0)&&Ce.position?`${(Le=K[L.id])===null||Le===void 0?void 0:Le.position}`:null}return(0,T.TU)(Te,Ie)}u(oe,"calculateFractionalRecordPosition");const me=u(F=>{var L;const K=(0,f.A)({input:F});return K&&K[0]&&K[0].offset===0&&((L=K[0].url)===null||L===void 0?void 0:L.length)===(F==null?void 0:F.length)?[{type:"rich_text",elements:[{type:"rich_text_section",elements:[{type:"link",url:K[0].url||""}]}]}]:[{type:"rich_text",elements:[{type:"rich_text_section",elements:[{type:"text",text:F||""}]}]}]},"convertStringToBlocks"),ue=u(F=>{if(F instanceof HTMLElement){if(F instanceof HTMLInputElement&&["checkbox","radio"].includes(F.type))return!0;if(["input","textarea","select"].includes(F.tagName.toLowerCase())||F.isContentEditable)return!1}return!0},"shouldHandleUndoFrom"),ae=u((F,L)=>{const K=[];var B;const Q=(B=(0,r.Df)(F))!==null&&B!==void 0?B:[],q=(0,r.Jq)(F).length||(0,r.Si)(F);return L.forEach((le,Te)=>{const Ie=Q.some(Ae=>(Ae==null?void 0:Ae.user_id)===(le==null?void 0:le.id));var De;const pe=(De=le==null?void 0:le.is_profile_only_user)!==null&&De!==void 0?De:!1;var fe;const Z=(fe=le==null?void 0:le.is_self)!==null&&fe!==void 0?fe:!1;!pe&&!Z&&!Ie&&!q&&K.push(Te)}),K},"getRestrictedSelectedTokenIndexes"),he=u(F=>["created_time","created_by","last_edited_time","last_edited_by"].includes(F.type),"isMetaColumn"),ce=u((F,L)=>{if(!F)return"";const K=A({record:F,colKey:"name"});if(!K)return"";let B=(0,I.Kx)(K==null?void 0:K.toLowerCase().split(/[ :/-]/).filter(Boolean).join("-"));return B=B.split("-").filter(Boolean).join("-"),L&&!B.startsWith(L)&&(B=`${L}${B}`),B.slice(0,(0,I.zU)())},"generateChannelNameFromRecordName"),ee=u((F,L)=>((L==null?void 0:L.editors)||[]).filter(K=>K!==F),"getListRecordChannelInitialInvitedMemberIds"),J=u((F,L)=>{var K,B;return F?L&&(L.type===_.$.MultiSelect||L.type===_.$.Select&&(L==null||(K=L.options)===null||K===void 0?void 0:K.format)===v.YP.MultiSelect||(L.type===_.$.User||L.type===_.$.Channel||L.type===_.$.Canvas)&&(L==null||(B=L.options)===null||B===void 0?void 0:B.format)===v.hx.MultiEntity)?new Set(F.split(i.eY).filter(Boolean)):new Set([F]):new Set},"splitMultiValueField"),X=u(F=>F==null?void 0:F.includes("/lists/"),"isListLink")},2670882607:(j,p,e)=>{"use strict";e.d(p,{e:()=>o});var t=e(3134334389),n=e(5255740490),s=e(6023831373),a=e(6422693406),c=e(2047021170);const o=t.memo(t.forwardRef((i,l)=>{let{getAnimationImport:_,className:d,height:r,svgClassName:m,loadingClassName:h,errorClassName:v,description:y,loop:I=!1,autoplay:T=!1,renderLoading:f,renderError:g,preserveAspectRatio:M}=i;const A=(0,s.d4)(N=>(0,c.ty)(N,"a11y_animations")),[O,D]=(0,t.useState)(!0),[E,C]=(0,t.useState)(!1),S=(0,t.useRef)(null),b=(0,t.useRef)(null),k=(0,t.useRef)(null);k.current||(k.current=a.S.all([e.e("gantry-v2-async-lottie-web").then(e.t.bind(e,221124150,23)),_()]).then(N=>{let[V,R]=N;if(!S.current)throw new Error("Lottie animation missing container");return D(!1),b.current=V.loadAnimation({container:S.current,renderer:"svg",loop:I,autoplay:!!(A&&T),animationData:R,rendererSettings:{className:(0,n.A)("p-lottie__svg",m),description:y,preserveAspectRatio:M}}),a.S.resolve(b.current)}).catch(N=>(C(!0),a.S.reject(N)))),(0,t.useEffect)(()=>()=>{k.current&&k.current.cancel(),b.current&&b.current.destroy()},[k,b]),(0,t.useImperativeHandle)(l,()=>k.current,[k]);const W=(0,t.useMemo)(()=>O&&f?f():E&&g?g():null,[f,g,O,E]);return t.createElement("div",{ref:S,style:r!==void 0?{height:r}:void 0,className:(0,n.A)("p-lottie",d,O&&h,E&&v)},W)}))},5460331959:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(3134334389),n=e(7715417323),s=e(4978843660),a=e(166097325),c=e(6696292586),o=e(6650208157);const i=4;function l(d){let{children:r,fallbackWidth:m=void 0,onResize:h=n.A}=d;const[v,y]=(0,t.useState)({width:0,height:0}),[I,T]=(0,t.useState)(!1),f=(0,t.useRef)([]);function g(A){let{width:O}=A;if(f.current.unshift(O),f.current.length<i)return!1;f.current.length>i&&(f.current.length=i);const D=(0,s.A)(f.current,2);return D.slice(1).every(E=>(0,a.A)(E,D[0]))}u(g,"looksLikeResizeLoop");const M=(0,t.useCallback)(A=>{h(A),y(A.bounds),(0,c.A)(m)&&!I&&T(g(A.bounds))},[m,h,I]);return t.createElement(o.A,{bounds:!0,onResize:M},A=>{let{measureRef:O}=A;return r({...v,width:I&&m?m:v.width,measureRef:O})})}u(l,"Measure"),l.displayName="Measure";const _=l},9758574739:(j,p,e)=>{"use strict";e.d(p,{e:()=>A});var t=e(3134334389),n=e(2683115972),s=e(7138682671),a=e(5375115868),c=e(4967176632),o=e(7811786890),i=e(6259241484),l=e(8300007136),_=e(3603672985),d=e(8452232783),r=e(2432967967),m=e(581167618),h=e(8739505998),v=e(6244014364),y=e(4481313819),I=e(3416652175),T=e.n(I);const f={elementName:"dispatch",onClick:{enableClogAction:!0}},g=(0,o.Wz)({notificationName:[o.mw]}),M={picked:"",notificationName:""},A=u(O=>{let{initialValues:D=M,validate:E=g,onCloseModal:C,megaphoneSpaceName:S,notificationList:b}=O;const[k,W]=(0,t.useState)(""),[N,V]=(0,t.useState)(!1),[R,P]=(0,t.useState)(!1),z=(0,l.wA)(),[$,x]=(0,t.useState)(""),Y=(0,t.useCallback)(_e=>x(_e),[]),ne=(0,t.useCallback)(()=>{if(!k){V(!0);return}let _e={};if($.length)try{_e=JSON.parse($)}catch{P(!0);return}C==null||C(),z((0,_.G0)({spaceName:S,notificationName:k,notificationData:_e})),S===i.xu.LAUNCH_MODAL&&z((0,r.A)())},[k,$,z,S,C]),re=(0,t.useCallback)((_e,G)=>{W(_e),G("picked",_e),V(!1),P(!1)},[]);return t.createElement(y.A,{eventId:v.EventId.ANALYTICS_EVENT,uiComponentName:v.UiComponentName.MEGAPHONE_DISPATCHER,megaphoneSpaceName:S,clogImpression:!0},t.createElement(c.A,{initialValues:D,validate:E,onSubmit:ne},_e=>{let{isSubmitting:G,values:ge,setFieldValue:oe}=_e;return t.createElement(t.Fragment,null,t.createElement("h2",null,"\u{1F4E3} Megaphone Dispatcher"),"Click the Dispatch button below to instantly render Megaphone Notifications on the UI.",t.createElement("div",{className:T().spaceNameContainer},"Space Name",t.createElement("div",{className:T().spaceName},S)),t.createElement("div",{className:T().notificationName},"Notification Name"),t.createElement("div",{className:T().notificationList},Object.keys(b).sort().map((me,ue)=>t.createElement(s.A,{text:me,htmlFor:`field-radio-${ue}`,type:"inline",cursor:"pointer",key:me},t.createElement(a.A,{id:`field-radio-${ue}`,name:"picked",value:me,checked:ge.picked===me,onChange:()=>re(me,oe)})))),t.createElement(s.A,{text:"Notification Data",optional:!0},t.createElement(d.A,{name:"notification_data",id:"notification_data",placeholder:'Ex: { "Field Name": "<String Value>", "Field Name": <Numeric Value> }',onChange:Y,value:$,className:T().textArea})),t.createElement("div",{className:T().alert},t.createElement(m.Ay,{type:"boxed",level:"warning",icon:"warning",align:"left"},t.createElement("span",{className:T().alertText},t.createElement("b",null,"Some Megaphone notifications may not be dispatched due to various reasons, such as but not limited to:"),t.createElement("li",null," Missing notification data "),t.createElement("li",null,"The notification being part of an experiment "),"For questions or further assistance, reach out to us at"," ",t.createElement("b",null,t.createElement(h.A,{href:"https://app.slack.com/client/E12KS1G65/C0765PUTPDL",target:"_blank"},"#proj-megaphone-dispatcher")),"."))),N&&t.createElement("div",{className:T().formError},"Please select a notification."),R&&t.createElement("div",{className:T().formError},"There was an error parsing Notification Data, please try again."),t.createElement(n.Ay,{autoClogProps:f,onClick:ne,disabled:G},"Dispatch"))}))},"DispatcherForm");A.displayName="DispatcherForm"},4445888975:(j,p,e)=>{"use strict";e.d(p,{R:()=>i,h:()=>l});var t=e(3134334389),n=e(8300007136),s=e(6023831373),a=e(3603672985),c=e(716227588),o=e(4724591729);const i=u(()=>{const _=!(0,o.KV)()||(0,o.b3)(),d=(0,n.wA)(),r=(0,s.d4)(c.y$);return(0,t.useEffect)(()=>{const m=u(h=>{_&&h.ctrlKey&&h.shiftKey&&h.key==="M"&&d((0,a.cv)(!r))},"handleKeydown");return window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}},[_,d,r]),{shouldShowDispatcherViewer:r}},"useDispatcherToggleShortcut"),l=u(function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const[d,r]=(0,t.useState)(_),m=(0,t.useCallback)(h=>{r(h)},[]);return{isModalOpen:d,toggleModal:m}},"useModal")},5062503310:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});const t={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)",border:0,padding:0,background:"transparent"},overlay:{backgroundColor:"rgba(208, 208, 208, 0.4)",zIndex:1e4}}},4902318931:(j,p,e)=>{"use strict";e.d(p,{$W:()=>R,sl:()=>z,Ay:()=>$});var t=e(3134334389),n=e(8300007136),s=e(6023831373),a=e(716227588),c=e(6259241484),o=e(7487228876),i=e(7003004874),l=e(1655938719),_=e(2938177083),d=e(101973425),r=e(4481313819),m=e(2567914105),h=e(3603672985),v=e(9881565722),y=e(4761125736),I=e(169770637),T=e(4003148341),f=e(4244379358),g=e(6258289677),M=e(9758574739),A=e(2312625946),O=e(4445888975),D=e(5062503310),E=e(397939223),C=e.n(E);const S=u(x=>{let{megaphoneSpaceName:Y,notificationList:ne}=x;const{isModalOpen:re,toggleModal:_e}=(0,O.h)(!1);return t.createElement("div",{className:C().container},t.createElement(A.Ay,{tip:Y,position:"top",zIndex:"menu_above_fs"},t.createElement("span",{className:C().dispatcherViewerIcon,role:"button",tabIndex:0,"aria-label":"Open Viewer Modal",onClick:()=>_e(!0)})),t.createElement(g.A,{isOpen:re,onRequestClose:()=>_e(!1),style:D.A},t.createElement("div",{className:C().dispatcherViewerDetails},t.createElement(M.e,{megaphoneSpaceName:Y,notificationList:ne,onCloseModal:()=>_e(!1)}))))},"DispatcherViewer");S.displayName="DispatcherViewer";const b=(0,f.A)(S),k=u(x=>{let{children:Y,megaphoneSpaceName:ne,notificationList:re}=x;const{shouldShowDispatcherViewer:_e}=(0,O.R)();return t.createElement(t.Fragment,null,_e&&t.createElement("div",{className:C().dispatcherViewer},t.createElement(b,{megaphoneSpaceName:ne,notificationList:re})),Y)},"DispatcherToggle");k.displayName="DispatcherToggle";const W=(0,f.A)(k),N={isInMegaphoneContainerContext:!0},V={isInMegaphoneContainerContext:!1},R=(0,t.createContext)(V),P=u(x=>{let{fetchDataOnMount:Y,notifications:ne,spaceName:re,children:_e,shouldAlwaysRenderChildren:G,shouldPassPropsToChildren:ge,channelScopedId:oe,componentClassName:me,...ue}=x;var ae;const he=(0,n.wA)(),ce=(0,T.x)(),ee=(0,s.d4)(m.oY),J=(0,s.d4)(a.up),X=(0,s.d4)(De=>(0,y._Z)(De,"megaphone_coachmark_suppression")==="on"),{isInsideModal:F}=(0,v.k)(),L=(0,s.d4)(De=>(0,a.Hp)(De,re,oe)),K=(0,s.d4)(De=>(0,a.OL)(De,re,oe)),B=(0,t.useCallback)(()=>{he((0,i.A)({notificationName:L,action:c.hw.IMPRESSION}))},[he,L]),Q=(0,t.useCallback)(De=>{he((0,_.A)({spaceName:re,action:De}))},[he,re]),q=(0,t.useCallback)(()=>{he((0,l.iR)({event:{type:c.jo.REQUEST_SPACES,spaces:[re]}}))},[he,re]),le=u(()=>G?ge&&t.isValidElement(_e)?t.cloneElement(_e,{...ue}):t.createElement(W,{megaphoneSpaceName:re,notificationList:ne},_e):t.createElement(W,{megaphoneSpaceName:re,notificationList:ne},null),"maybeRenderChildren");le.displayName="maybeRenderChildren",(0,t.useEffect)(()=>{re&&Y&&q()},[Y,re,q]);const Te=ne==null||(ae=ne[L])===null||ae===void 0?void 0:ae.component,Ie=X&&Te&&!F&&ee&&re===c.xu.IN_PRODUCT_COACHMARK;if(Ie&&!J){he((0,h.co)(!0));const De=ce.createMetricsTrace({label:"megaphone",samplingOptions:{sampleType:I.tS.SESSION,sampleRate:.1}}),pe=De.count({name:"megaphone_coachmark_suppress"});pe.addTags({notification:L}),pe.close(),ce.reportTrace(De)}return!re||!L||X&&re===c.xu.IN_PRODUCT_COACHMARK&&J||Ie?le():Te?t.createElement(r.A,{megaphoneSpaceName:re,megaphoneNotificationName:L},t.createElement(R.Provider,{value:N},t.createElement(W,{megaphoneSpaceName:re,notificationList:ne},null),t.createElement(t.Suspense,{fallback:null},t.createElement(Te,{...K,recordNotificationEventImpression:B,recordAndClearNotificationEvent:Q,notificationName:L,className:me,channelScopedId:oe,...ue},_e)))):(ne||(0,o.h)({spaceName:re,notificationName:L}),le())},"MegaphoneContainer");P.displayName="MegaphoneContainer";const z=(0,d.Ay)(P),$=P},3656161791:(j,p,e)=>{"use strict";e.d(p,{C:()=>t});const t={showStrangerProfile:!1,hideRestriction:!0,maybeShowPresenceIndicator:!1,maybeShowTitle:!1,maybeShowVerifiedFooter:!0,maybeShowEmailField:{showLabel:!1,showValue:!0},showFullProfileLink:!1,showOrganizationField:{showLabel:!0,showValue:!0},showProfilePicture:!0,showMemberProfileFields:!1,showMemberProfileButtons:!1}},1293324111:(j,p,e)=>{"use strict";e.d(p,{V:()=>n});var t=e(3134334389);class n extends t.PureComponent{render(){return t.createElement(t.Fragment,null,this.props.children)}}u(n,"PassThrough"),n.displayName="PassThrough"},8950789382:(j,p,e)=>{"use strict";e.d(p,{s:()=>f});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(352142497),c=e(82287009),o=e(8999545852),i=e(3193155968),l=e(7573598208),_=e(3110884894),d=e(6514066170),r=e(755982243),m=e(796111729),h=e(485355941),v=e(6695353875),y=e(9932860381),I=e(7176966205),T=e(9629572172);const f=(0,s.Ay)("Opens a view in a new child window",function(){var g=(0,t.coroutine)(function*(M,A,O,D){let{viewId:E,params:C,clogParams:S}=O;if(!(0,h.M2)())return;const b=A(),{isMainWindow:k}=D(T.U);if((0,v.yZ)(b)&&k&&(0,y.Xy)(E)){M((0,I.$)({viewId:E,params:C}));return}let W=!1;if((0,d.A)(b,E)){let N,V={[i.mq.Primary]:{id:E,params:C,viewType:(0,l.A)(E)}};V=M((0,o.VO)({viewSet:V,windowId:i.N2}));const R=(0,r.w)(E),P=R;if(E==="thread"&&(C!=null&&C.threadId)){const z=(0,_.Sb)(C==null?void 0:C.threadId).channelId;W=!0,V={[i.mq.Primary]:{id:z||(C==null?void 0:C.entityId),params:void 0,viewType:a.D.Channel},[i.mq.Secondary]:{id:E,params:C,viewType:a.D.Thread}},N=i.mq.Secondary}E==="channel_canvas"&&(V={[i.mq.Primary]:{id:C==null?void 0:C.channelId,params:void 0,viewType:a.D.Channel},[i.mq.Secondary]:{id:"channel_canvas",params:C,viewType:a.D.ChannelCanvas}}),M((0,c.Bb)({viewSet:V,shouldNavigateInContext:R,shouldShowSearch:P,...N&&{containerOrigin:N},clogParams:S??{uiComponentName:origin,entryPoint:"cmd_click"},forceSingleColumnMode:W}))}else(0,m.Ay)({getState:A}).action("CHILD-WINDOWS","skipped opening a Conversation View because the ID is not supported:",E)});return function(M,A,O,D){return g.apply(this,arguments)}}());f.meta={name:"createThunk",key:"createThunkmaybeOpenInWindow",description:"Opens a view in a new child window"}},3652828077:(j,p,e)=>{"use strict";e.d(p,{O:()=>_});var t=e(3134334389),n=e(2844658640),s=e.n(n),a=e(1641606663),c=e(2233780559);function o(){return o=Object.assign||function(d){for(var r=1;r<arguments.length;r++){var m=arguments[r];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(d[h]=m[h])}return d},o.apply(this,arguments)}u(o,"_extends");const i=(0,c.eF)(c.vt.REACT_VIRTUALIZED,d=>s()(d));function l(d){let{refToForward:r,...m}=d;const{windowRef:h}=(0,t.useContext)(a.M),v=i(h.deref()).List;return t.createElement(v,o({ref:r},m))}u(l,"PortableReactVirtualizedList"),l.displayName="PortableReactVirtualizedList";const _=t.forwardRef((d,r)=>t.createElement(l,o({refToForward:r},d)))},3564619745:(j,p,e)=>{"use strict";e.d(p,{UJ:()=>g,Z2:()=>O,av:()=>a,ew:()=>f,fd:()=>c,k7:()=>M,mZ:()=>I,p6:()=>n,qA:()=>s,qH:()=>v,qL:()=>y,qS:()=>D,tH:()=>o,xo:()=>E,xw:()=>T,zZ:()=>A});var t=e(571104883);const n="use-theme-font",s="San Francisco Pro",a="Segoe UI",c='-apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"',o="Slack-Lato, Slack-Fractions,appleLogo,sans-serif",i="Arial",l="Courier",_="Open Dyslexic",d='"Comic Sans MS", cursive, sans-serif',r="Georgia",m="Noto Sans, sans-serif",h="Verdana",v="Lato",y=(()=>{if((0,t.cX)())return s;if((0,t.uF)())return a})(),I={default:!0,fontFamily:o,label:v,value:"lato"},T={label:"OpenDyslexic",value:"opendyslexic",fontFamily:_},f={label:"Arial",value:"arial",fontFamily:i},g={label:"Courier",value:"courier",fontFamily:l},M={label:"Comic Sans",value:"comicsans",fontFamily:d},A={label:"Georgia",value:"georgia",fontFamily:r},O={label:"Noto Sans",value:"notosans",fontFamily:m},D={label:"Verdana",value:"verdana",fontFamily:h},E={lato:["lato","slack-lato"],arial:["arial"],courier:["courier"],opendyslexic:["open dyslexic"],comicsans:["comic sans","comic sans ms"],verdana:["verdana"],georgia:["georgia"],notosans:["noto sans"],"system-font":(0,t.cX)()?["san francisco","san francisco pro","sf pro","sf"]:["segoe","segoe ui"]}},4173072539:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(3134334389),n=e(6839188756),s=e(9892470785),a=e(2312625946),c=e(6968387112);const o=u(l=>{let{invitingTeam:_}=l;const d=_.domain&&`${(0,n.k7)(_.id,_.domain)}.${(0,c.Xk)()}`,r=t.createElement(s.A,{id:_.id,team:_,shouldMaybeOpenOrgCard:!0,shouldMaybeShowVerified:!0,bold:!0,tabIndex:d?0:void 0});return d?t.createElement(a.Ay,{tip:d},t.createElement("span",null,r)):r},"InvitingTeamName");o.displayName="InvitingTeamName";const i=o},3694049677:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(9574544148),s=e(2312625946);const a=u(o=>{let{invitingUser:i,showEmailTooltip:l=!0}=o;var _;const d=i==null||(_=i.profile)===null||_===void 0?void 0:_.email,r=l&&d,m=t.createElement(n.A,{member:i,skipPrefCompliance:!0,tabIndex:r?0:void 0});return r?t.createElement(s.Ay,{tip:d},m):m},"InvitingUserName");a.displayName="InvitingUserName";const c=a},2408732225:(j,p,e)=>{"use strict";e.d(p,{n:()=>_});var t=e(3134334389),n=e(3656161791),s=e(4775127335),a=e(698013937),c=e(6415587347);let o=null;const l=u(()=>(o===null&&(o=document&&document.documentElement&&document.documentElement.hasAttribute("data-primer")),o),"isPrimer");class _ extends t.PureComponent{render(){var r,m;const{className:h,team:v,user:y,size:I,allowDefaultProfileImage:T,fallbackUserIcon:f,fallbackUserIcon2x:g,isInteractive:M,hideUserIcon:A}=this.props,O=!!(!((r=y.profile)===null||r===void 0)&&r.is_custom_image),D=!!f||!!g,E=!(!((m=v.icon)===null||m===void 0)&&m.image_default),{imageUrl:C,imageUrl2x:S}=this.getProfileImages();if((O||T||D)&&!A){const b=y.profile.real_name;return t.createElement(s.f1,{className:h,imageUrl:O||T?C:f,imageUrl2x:O||T?S:g,memberOrBotName:b,size:I,teamId:v.id,team:v,isInteractive:M&&!l()&&!!y.id,renderCustomBadge:this.renderTeamBadge,showCard:!0,userId:y.id,profileCardProps:{allowOutsideOfSonic:!0,maybeAllowInteract:!1,...n.C}})}return E?t.createElement(a.U,{teamName:v.name,icon:v.icon,size:I,className:h}):null}constructor(r){super(r),this.renderTeamBadge=()=>null,this.getProfileImages=()=>{var I;const{team:T,user:f,size:g}=this.props,M=(0,c.Ay)({size:g,teamOrEnterpriseId:T.id,memberId:f.id,avatarHash:(I=f.profile)===null||I===void 0?void 0:I.avatar_hash}),A=(M==null?void 0:M.imageUrl)||"",O=M!=null&&M.imageUrl2x?`${M.imageUrl2x} 2x`:"";return{imageUrl:A,imageUrl2x:O}};const{team:m,allowTeamInitials:h,shouldRenderTeamBadge:v,teamIconSize:y}=r;v&&(this.renderTeamBadge=(0,s.fp)({isExternal:!0,team:m,teamId:m.id,allowTeamInitials:h,teamIconSize:y}))}}u(_,"UserIcon"),_.displayName="UserIcon",_.defaultProps={shouldRenderTeamBadge:!1,allowTeamInitials:!1,allowDefaultProfileImage:!1,className:"p-shared_channel_invite_header__avatar",isInteractive:!0,hideUserIcon:!1}},7599421656:(j,p,e)=>{"use strict";e.d(p,{B:()=>s});var t=e(2384831516),n=e(4761125736);const s=(0,t.Mz)(a=>(0,n._Z)(a,"shortcuts_workspace_picker")==="on");s.meta={name:"createSelector",key:"createSelectorshouldShowShortcutsSpeedbump",description:a=>(0,n._Z)(a,"shortcuts_workspace_picker")==="on"}},9874616273:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(3134334389),n=e(8214116048);const s=u(c=>{let{width:o=20,height:i=20,className:l="",theme:_}=c;const d=_===n.Sx.Dark?"/img/slack_logo_white_text.svg":"/img/slack_logo.svg";return t.createElement("div",{role:"banner"},t.createElement("img",{className:l,src:d,alt:"Slack",width:o,height:i}))},"SlackLogo");s.displayName="SlackLogo";const a=s},6989432693:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(3134334389),n=e(6023831373),s=e(8276911661),a=e(8921478798),c=e(8170643398),o=e(735940183),i=e(7576317051);const l=new o.Ay("channel_token"),_=u(r=>{let{userId:m,isFirst:h,isSelf:v}=r;var y;const I=(y=(0,n.d4)(f=>(0,s.nv)(f,m)))!==null&&y!==void 0?y:void 0;let T=(0,n.d4)(f=>(0,a.I)(f,m));return(0,c.t8)(I)?t.createElement(i.A,{type:"unknown",subtler:!0}):(0,c.QR)(I)?t.createElement(i.A,{type:"non-existent",subtler:!0}):(v&&(T=h?l.t("You"):l.t("you")),t.createElement(t.Fragment,null,T))},"TooltipMemberName");_.displayName="TooltipMemberName";const d=t.memo(_)},8734174229:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(5737576046),n=e(7884000776);function s(a){let{inputText:c,inputDelta:o,channelId:i,threadTs:l}=a;const _=(0,t.zC)({viewContext:n.Y.THREAD,channelId:i,threadTs:l});_&&(o?_.setContents({contents:o.ops}):_.setText(c));const d=(0,t.zC)({viewContext:n.Y.THREADS_VIEW,channelId:i,threadTs:l});d&&(o?d.setContents({contents:o.ops}):d.setText(c))}u(s,"populateThreadInputs")},8011352381:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(1035168942);const a=t.forwardRef((o,i)=>{let{children:l,lines:_,breakWords:d=!0,withTooltip:r,shouldForceTooltipVisible:m,customTooltipText:h,tooltipClassName:v}=o;const y={"--lines":_},I=t.createElement("span",{className:(0,n.A)("c-truncate",{"c-truncate--break_words":d}),style:y,ref:i},l);return r?t.createElement(s.A,{tip:h||l,zIndex:"above_fs",shouldForceVisible:m,tipClassName:v},I):I});a.displayName="Truncate";const c=a},1267040415:(j,p,e)=>{"use strict";e.d(p,{A:()=>f});var t=e(3134334389),n=e(735940183),s=e(9391594207),a=e(6244014364),c=e(6323355797),o=e(6023831373),i=e(3677514771),l=e(7268021173),_=e(4481313819),d=e(2683115972),r=e(8739505998),m=e(2312625946);function h(){return h=Object.assign||function(g){for(var M=1;M<arguments.length;M++){var A=arguments[M];for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(g[O]=A[O])}return g},h.apply(this,arguments)}u(h,"_extends");const v=new n.Ay("plan_change"),y=u(g=>{let{children:M,planLevel:A,entryPoint:O,feature:D,hash:E,action:C,useLink:S,refToForward:b,productId:k,productLevel:W,team:N,isTeamInTrial:V,tooltipProps:R,...P}=g;const z=(0,o.d4)(Y=>(0,c.m6)(Y,{entryPoint:O,productId:k,productLevel:W,action:C,feature:D,hash:E,planLevel:A})),$=S?r.A:d.z9,x=t.createElement($,h({ref:b},P,{href:z}),M);return t.createElement(_.A,{eventId:a.EventId.UPGRDEXP_UPSELL_PROMPTS,clogImpression:!0},R?t.createElement(m.Ay,h({tip:v.t("Upgrade")},R),x):x)},"PlansPageCTABase");y.displayName="PlansPageCTABase";const I=u(g=>({team:(0,i.H7)(g),isTeamInTrial:(0,l.iH)(g)}),"mapStateToProps"),T=(0,s.N)(I)(y),f=t.forwardRef((g,M)=>t.createElement(T,h({},g,{refToForward:M})))},4177200783:(j,p,e)=>{"use strict";e.d(p,{A:()=>g});var t=e(3134334389),n=e(8300007136),s=e(6023831373),a=e(735940183),c=e(6244014364),o=e(4761125736),i=e(9003400431),l=e(4481313819),_=e(8719380546),d=e(5712872315),r=e(1743656885);const m=new a.Ay("msg_input"),h={elementName:"learn_more",onClick:{enableClogAction:!0}},v=u(M=>{let{isScheduledMessage:A}=M;const O=(0,n.wA)(),D=(0,t.useCallback)(()=>{O((0,i.O)())},[O]);if(!(0,s.d4)(b=>(0,o._Z)(b,"upgrd_5684")==="on"))return null;const C=A?m.t("Message not scheduled"):m.t("Message not sent"),S=m.rt("Your team isn\u2019t able to send messages right now. Review any apps or webhooks that may be sending a high-volume of messages. <learnMoreLink>Learn more</learnMoreLink> about message limits.",{fallbackHash:"a15c5b3859af53dcefc79016b421009c7adc9bf6","<learnMoreLink>":b=>{let{text:k}=b;return t.createElement(r.A,{"data-qa":"Message-limit-error-modal-learn-more-link",articleId:115002422943,hash:"message-and-file-visibility-limit",autoClogProps:h,forceOpenInBrowser:!0},k)}});return t.createElement(l.A,{eventId:c.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,clogImpression:!0,uiComponentName:c.UiComponentName.MESSAGE_LIMIT_ERROR_MODAL},t.createElement(_.A,{"data-qa":"message-limit-error-modal",title:C,titleIcon:"warning",bodyContent:S,onRequestClose:D,theme:d.B.ERROR}))},"MessageLimitErrorModal");v.displayName="MessageLimitErrorModal";const y=v;var I=e(1031947056),T=e(2375333597);const f=(0,I.Ay)("Open modal when a message send fails due to team having hit the message limit",function(M,A){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M((0,T.q)({element:t.createElement(y,O)}))});f.meta={name:"createThunk",key:"createThunkopenMessageLimitErrorModal",description:"Open modal when a message send fails due to team having hit the message limit"};const g=f},1064007131:(j,p,e)=>{"use strict";e.d(p,{J6:()=>y,SX:()=>v,mF:()=>m});var t=e(4761125736),n=e(3677514771),s=e(6839188756),a=e(6323355797),c=e(7268021173),o=e(1960898919),i=e(716227588),l=e(6259241484),_=e(8327608922);const d=u(I=>isShowcaseBestPracticesEnabled(I,!1),"isShowcaseBestPracticesEnabledWithoutExposures"),r=u(I=>[{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.V3},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.MessageLimit},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Vhq},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Canvas},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.WorkflowBuilder},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.SharedChannels},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.SharedChannels14Days},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.MessageLimit14Days},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Vhq14Days},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Canvas14Days},{promoType:a.ZO.ImmediateStartTrial,promoSubtype:a.zG.ImmediateStartTrial14Days},{promoType:a.ZO.SharedChannelsFreeTrial,promoSubtype:a.zG.Inviter14},{promoType:a.ZO.BringBackSlackToWorkTrial},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.WorkflowBuilder14Days}].some(f=>{let{promoType:g,promoSubtype:M}=f;return(0,c.hq)(I,g,M)}),"checkIfEligibleForShorterGuidedTrial"),m={CONTROL:"control",TREATMENT_1:"treatment1",TREATMENT_2:"treatment2"},h=u((I,T)=>{const f=[{spaceName:l.xu.SIDEBAR_MENU_HEADER,notificationName:l.ze.SUPPORT_UPGRADE_DECISION_TRIAL_USAGE_SIDEBAR_MENU_HEADER},{spaceName:l.xu.SYNTHETIC_CANVAS_HEADER,notificationName:l.ze.SUPPORT_UPGRADE_DECISION_CANVAS_PAGE_BANNER},{spaceName:l.xu.MESSAGE_PANE,notificationName:l.ze.SUPPORT_UPGRADE_DECISION_SHARED_CHANNEL_BANNER}];for(let g=0;g<f.length;g++){const{spaceName:M,notificationName:A}=f[g];if((0,i.Hp)(I,M,T)===A){const D=(0,i.OL)(I,M,T)||null,E=D?D.experimentGroup:null;if(E===m.TREATMENT_1||E===m.TREATMENT_2)return E}}return null},"getExperimentGroupFromMegaPhone"),v=u(function(I){let{isAlreadyEligibleForTrial:T=!1,shouldLogExposure:f=!1,channelId:g}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const M=(0,n.H7)(I);return(0,s.tc)(M)&&(T||r(I))?(0,t._Z)(I,"shorter_guided_trials",f):(0,c.iH)(I)?h(I,g)||(0,o.ax)(I,"shorter_guided_trials"):null},"isInExperimentShorterGuidedTrialsGroup"),y=u(function(I,T){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return v(I,{isAlreadyEligibleForTrial:T,shouldLogExposure:f})===m.TREATMENT_2?a.ew.SHORTENED_FEATURE_TRIAL:a.ew.PAID_FEATURE_TRIAL},"getTrialLength")},6236252386:(j,p,e)=>{"use strict";e.d(p,{FK:()=>P,aD:()=>R,w9:()=>z,uY:()=>$});var t=e(7914553163),n=e(8193414630),s=e(6968387112),a=e(735940183),c=e(5267010247),o=e(8822892075),i=e(7940058138),l=e(9706240641),_=e(3134334389),d=e(1031947056),r=e(6323355797),m=e(2375333597),h=e(7268021173),v=e(6023831373),y=e(1267040415),I=e(5791262841),T=e(4761125736),f=e(9240394198),g=e(266169032),M=e(6244014364),A=e(1064007131);const O=new a.Ay("trials_highlight_paid_features"),D=u(x=>{let{isEligibleForTrial:Y,promoType:ne,promoSubtype:re,uiComponentVariant:_e,uiPage:G}=x;const ge=(0,v.d4)(L=>(0,T._Z)(L,"wfb_freemium")==="on"),oe=(0,v.d4)(L=>(0,A.J6)(L,Y,!0)),me=(0,_.useMemo)(()=>ge?[O.t("Automate repetitive, simple tasks"),O.t("Create code-free solutions"),O.t("Customize and share with your team")]:[],[ge]),ue=(0,_.useMemo)(()=>ge?[O.t("Bring tools you already use into Slack"),O.t("Use apps just for you or with your whole team"),O.t("Streamline your work right from Slack")]:[],[ge]);if(!ge)return null;const ae=u(L=>{let{text:K}=L;return _.createElement(y.A,{"data-qa":"workflow_builder_freemium_trial_offer_modal-plans_page_link",useLink:!0},K)},"renderPlansPageLink"),he=_e===M.UiComponentVariant.UNLIMITED_WORKFLOWS_TRIAL_OFFER_MODAL;let ce,ee,J,X,F;return he?(ce=O.t("Save time with unlimited workflows"),J=O.t("With workflows, you can:"),ee=Y?O.rt(" You can also install unlimited apps, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:oe,"<plansPageLink>":ae}):O.rt("You can also install unlimited apps, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":ae}),X=me,F="/marketing/img/feature/workflow-builder/hero-wfb-lp.jpg"):(ce=O.t("Bring all your tools into Slack"),J=O.t("With apps, you can:"),ee=Y?O.rt(" You can also publish unlimited workflows, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:oe,"<plansPageLink>":ae}):O.rt("You can also install unlimited workflows, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":ae}),X=ue,F="/marketing/img/feature/workflow-builder/hero-wfb-apps.png"),_.createElement(I.A,{"data-qa":"workflow_builder_freemium_trial_offer_modal",imgSrc:F,modalBannerBackgroundColor:"#4a144a",modalCloseButtonTheme:f.N.LIGHT,modalTitle:ce,modalSubtitle:ee,modalChecklistHeading:J,modalChecklistItems:X,onSpeedbumpContinueLabel:G===M.UiPage.WORKFLOW_BUILDER_FREEMIUM_TRIAL_PUBLISH?O.t("Publish Workflow"):O.t("Continue"),promoType:ne,promoSubtype:re,startTrialContext:g.M.workflowBuilderFreemiumTrialOfferModal,uiComponentVariant:_e,isEligibleForTrial:Y})},"WorkflowBuilderFreemiumTrialOfferModal");D.displayName="WorkflowBuilderFreemiumTrialOfferModal";const E=D;var C=e(8300630630),S=e(6422693406),b=e(1152226587);function k(){return k=Object.assign||function(x){for(var Y=1;Y<arguments.length;Y++){var ne=arguments[Y];for(var re in ne)Object.prototype.hasOwnProperty.call(ne,re)&&(x[re]=ne[re])}return x},k.apply(this,arguments)}u(k,"_extends");const W=(0,d.Ay)("Open freemium trial offer modal",function(){var x=(0,l.coroutine)(function*(Y,ne,re){const _e=r.ZO.PaidFeatureTrial,{promoSubtype:G}=re;let ge=null;switch(G){case r.zG.WorkflowBuilder:ge=E;break;case r.zG.Vhq:ge=b.A;break;default:return S.S.resolve()}yield Y((0,C.A)({campaignType:_e,campaignSubType:G,reason:G}));const oe=(0,h.hq)(ne(),_e,G);return Y((0,m.q)({element:_.createElement(ge,k({},re,{promoType:_e,promoSubtype:G,isEligibleForTrial:oe}))}))});return function(Y,ne,re){return x.apply(this,arguments)}}());W.meta={name:"createThunk",key:"createThunkopenFreemiumTrialOfferModal",description:"Open freemium trial offer modal"};const N=W,V=new a.Ay("trials_highlight_paid_features");function R(x){switch(x){case t.MX.TrialTeam:return`https://${(0,s.Xk)()}/help/articles/115003205446-Slack-plans-and-features`;case t.MX.TrialIneligibleUserCannotUpgrade:return`https://${(0,s.Xk)()}/help/articles/115002422943`;default:(0,n.Kh)(x)}}u(R,"getHref");function P(x){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(x){case void 0:case null:case t.MX.TrialFetching:return"";case t.MX.TrialIneligible:return Y?V.t("Upgrade Now"):V.t("See Upgrade Options");case t.MX.TrialEligible:return Y?V.t("Try Slack Pro"):V.t("Start Free Trial");case t.MX.TrialIneligibleUserCannotUpgrade:case t.MX.TrialTeam:return Y?V.t("Compare Plans"):V.t("Learn More");case t.MX.TrialExpiry:return V.t("Upgrade Now");default:(0,n.Kh)(x)}}u(P,"getDefaultCopy");function z(x,Y,ne){return()=>{x(N({uiComponentVariant:ne,promoSubtype:Y}))}}u(z,"getTrialEligibleHandler");function $(x){return()=>x((0,c.o)((0,o.ZF)(i.c.PaidBenefits)))}u($,"getTrialTeamHandler")},6005700845:(j,p,e)=>{"use strict";e.d(p,{A:()=>g});var t=e(1267040415),n=e(7914553163),s=e(6084388622),a=e(8739505998),c=e(6323355797),o=e(3134334389),i=e(8300007136),l=e(4096483543),_=e(6023831373),d=e(3810478625),r=e(6236252386),m=e(8193414630);const h={elementName:"start_trial",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},v={elementName:"learn_more_usage_limits",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},y={elementName:"learn_more_plans_and_features",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},I={isPrimaryCTA:!0,elementName:"upgrade_link",onClick:{enableClogAction:!0}},T={isPrimaryCTA:!0,elementName:"upgrade_now",onClick:{enableClogAction:!0}},f=u(M=>{let{variant:A,children:O,promoSubtype:D,modalVariant:E,useLink:C=!1,ctaClassName:S}=M;const b=(0,i.wA)(),k=(0,_.d4)(d.g),W=(0,l.A)();if(!A||A===n.MX.TrialFetching)return null;const N=C?a.A:s.z9,V=(0,r.FK)(A,k);switch(A){case n.MX.TrialIneligible:return o.createElement(t.A,{useLink:C,autoClogProps:I,className:S},O??V);case n.MX.TrialEligible:return o.createElement(N,{onClick:(0,r.w9)(b,D,E),autoClogProps:h,className:S},O??V);case n.MX.TrialIneligibleUserCannotUpgrade:return o.createElement(N,{href:(0,r.aD)(A),autoClogProps:v,className:S},O??V);case n.MX.TrialTeam:return o.createElement(N,{href:W?void 0:(0,r.aD)(A),autoClogProps:y,onClick:W?(0,r.uY)(b):void 0,className:S},O??V);case n.MX.TrialExpiry:return o.createElement(t.A,{useLink:C,action:c.um.CHECKOUT,autoClogProps:T},O??V);default:(0,m.Kh)(A)}},"FreemiumPrimaryCTA");f.displayName="FreemiumPrimaryCTA";const g=f},7914553163:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>y,MX:()=>r});var t=e(7268021173),n=e(1384076438),s=e(6839188756),a=e(3134334389),c=e(6023831373),o=e(3677514771),i=e(8300007136),l=e(6323355797),_=e(8871937520),d=e(677609895);const r={TrialFetching:"trial_fetching",TrialTeam:"trial_team",TrialExpiry:"trial_expiry",TrialEligible:"trial_eligible",TrialIneligible:"trial_ineligible",TrialIneligibleUserCannotUpgrade:"trial_ineligible_user_cannot_upgrade"},m=u(I=>I===r.TrialFetching||I===r.TrialEligible||I===r.TrialIneligible||I===r.TrialIneligibleUserCannotUpgrade,"isFreeVariant"),h=u(I=>I===r.TrialTeam||I===r.TrialExpiry,"isTrialVariant"),y=u(I=>{let{promoSubtype:T,context:f,reason:g,isEligibleForTrial:M,trialEndDate:A,isEnabled:O=!0}=I;const D=l.ZO.PaidFeatureTrial,E=(0,i.wA)(),C=(0,c.d4)(P=>(0,s.tc)((0,o.H7)(P))),S=(0,c.d4)(t.iH),b=(0,c.d4)(d.X),k=(0,c.d4)(P=>(0,t.hq)(P,D,T)),[W,N]=(0,a.useState)(C);if((0,a.useEffect)(()=>{O&&C&&E((0,n.A)({campaignType:D,campaignSubType:T,context:f,reason:g})).then(()=>{N(!1)})},[E,C,D,T,f,g,k,O]),!O||!(C||S))return null;const V=M!=null;if(W&&!V)return r.TrialFetching;if(S){const z=(0,_.qe)(A);return A!==void 0&&z<=7?r.TrialExpiry:r.TrialTeam}const R=V&&W?M:k;return!R&&!b?r.TrialIneligibleUserCannotUpgrade:R?r.TrialEligible:r.TrialIneligible},"useFreemium")},952756744:(j,p,e)=>{"use strict";e.d(p,{s:()=>c});var t=e(3134334389),n=e(4902318931),s=e(6259241484);const a={[s.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER]:{component:t.lazy(()=>Promise.resolve().then(e.bind(e,8240993983)))}},c=u(()=>t.createElement(n.Ay,{spaceName:s.xu.HUDDLE_INVITE_MODAL,notifications:a}),"HuddleInviteModalTrialBannerV2MegaphoneWrapper");c.displayName="HuddleInviteModalTrialBannerV2MegaphoneWrapper"},8240993983:(j,p,e)=>{"use strict";e.r(p),e.d(p,{HuddleInviteModalTrialBannerV2:()=>f,default:()=>g});var t=e(3134334389),n=e(735940183),s=e(6323355797),a=e(6244014364),c=e(4481313819),o=e(6023831373),i=e(6084388622),l=e(1267040415),_=e(7949425452),d=e(5641442783),r=e(7120433284),m=e(8112788848),h=e(8871937520),v=e(3810478625);const y=new n.Ay("guided_trials"),I={elementName:"upgrade_now_cta",onClick:{enableClogAction:!0}},T={elementName:"see_upgrade_options_cta",onClick:{enableClogAction:!0}},f=u(M=>{let{trialEndDate:A,canUserPurchase:O}=M;const D=(0,o.d4)(v.g),E=(0,o.d4)(S=>(0,s.m6)(S,{action:s.um.CHECKOUT,productLevel:s.i6.standard.id,entryPoint:"guided_trials_peek_upgrade_cta"})),C=u(()=>O?t.createElement(i.z9,{autoClogProps:I,href:E,className:"p-huddle_invite_modal__cta_upgrade",size:"small","data-qa":"huddle-invite-modal-upgrade-cta"},D?y.t("Upgrade to Pro"):y.t("Upgrade Now")):t.createElement(l.A,{feature:s.c4.SLACK_HUDDLES,autoClogProps:T,size:"small",type:D?"primary":"outline"},D?y.t("Compare plans"):y.t("See Upgrade Options")),"getCTA");return C.displayName="getCTA",t.createElement(c.A,{eventId:a.EventId.UPGRDEXP_TRIAL,uiComponentName:a.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement(r.A,{className:"p-huddle_invite_modal_trial_banner_v2__container","data-qa":"huddle_invite_modal_trial_banner",primaryCTA:C(),withMargins:!0},t.createElement("div",null,D?y.rt("<strong>Huddles will soon have time limits</strong>"):y.rt("<strong>Group huddles aren\u2019t available for much longer</strong>",{fallbackHash:"8537d8568b35f2305ac4d9e650f9c5a9cca955b8"}),t.createElement(d.A,{className:"p-huddle_invite_modal_trial_banner_v2__pro_tooltip",uiComponentVariant:a.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,toolTipZIndex:m.m.MenuAboveFullScreen,badgeSize:_.vj.Small})),D?y.rt("Upgrade to continue using huddles longer than 30 minutes."):y.rt("If you choose not to upgrade by {trialEndDate}, your team won\u2019t be able to huddle with more than one other person.",{trialEndDate:(0,h.Pd)(A),fallbackHash:"e680e704766e6c0c74ca66a78c581927a4b36bdf"})))},"HuddleInviteModalTrialBannerV2");f.displayName="HuddleInviteModalTrialBannerV2";const g=f},9953252450:(j,p,e)=>{"use strict";e.d(p,{A:()=>M,x:()=>f});var t=e(3134334389),n=e(6023831373),s=e(8300007136),a=e(735940183),c=e(6244014364),o=e(7268021173),i=e(8871937520),l=e(4481313819),_=e(7433432223),d=e(7120433284),r=e(3810478625),m=e(2481088989),h=e(8739505998),v=e(2612353366),y=e(9003400431);const I=new a.Ay("trials_highlight_paid_features"),T={elementName:"view_all_pro_features",onClick:{enableClogAction:!0}},f=u(A=>{let{trialEndTs:O,experimentPnpE2eGroupOn:D,viewAllProFeaturesLink:E,v2ClassName:C}=A;return D?t.createElement(l.A,{eventId:c.EventId.UPGRDEXP_TRIAL,uiComponentName:c.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement("div",{className:C},t.createElement(d.A,{className:"padding_left_125"},(0,m.A)(I.rt("Huddles without limits is a paid feature, available with your free trial through <strong>{trialExpirationDate}. <viewAllProFeaturesLink>View all Pro features</viewAllProFeaturesLink></strong>",{trialExpirationDate:(0,i.Pd)(O),"<viewAllProFeaturesLink>":E}),{position:m.D.LEFT_ALIGNED})))):t.createElement(l.A,{eventId:c.EventId.UPGRDEXP_TRIAL,uiComponentName:c.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement("div",{className:"p-huddle_invite_modal_banner"},t.createElement(_.A,{iconType:"clock-o","data-qa":"huddle_invite_modal_trial_banner"},I.rt("<strong>Huddles with more than two people is a paid feature,</strong> available with your free trial through {trialExpirationDate}.",{trialExpirationDate:(0,i.Pd)(O),fallbackHash:"5848c5eb4b061ac0a4abef27be6bc8b2c736d087"}))))},"HuddleInviteModalTrialBanner");f.displayName="HuddleInviteModalTrialBanner";const g=u(A=>{let{v2ClassName:O}=A;const D=(0,s.wA)(),E=(0,n.d4)(r.g),C=(0,n.d4)(o.Sk),S=(0,t.useCallback)(()=>{D((0,y.O)()),D((0,v.A)())},[D]),b=(0,t.useCallback)(k=>{let{text:W}=k;return t.createElement(h.A,{onClick:S,autoClogProps:T},W)},[S]);return t.createElement(f,{trialEndTs:C,experimentPnpE2eGroupOn:E,viewAllProFeaturesLink:b,v2ClassName:O})},"ConnectedHuddleInviteModalTrialBanner");g.displayName="ConnectedHuddleInviteModalTrialBanner";const M=g},1152226587:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(3134334389),n=e(266169032),s=e(735940183),a=e(1267040415),c=e(5791262841),o=e(2670882607),i=e(6023831373),l=e(1064007131);const _=new s.Ay("huddles"),d=u(m=>{let{startTrialContext:h=n.M.huddlesTrialEntryPointModal,uiComponentVariant:v,onSpeedbumpContinue:y,promoType:I,promoSubtype:T,isEligibleForTrial:f}=m;const g=u(b=>{let{text:k}=b;return t.createElement(a.A,{"data-qa":"huddles_trial_entry_point-plans_page_link",useLink:!0},k)},"renderPlansPageLink"),M=(0,i.d4)(b=>(0,l.J6)(b,f,!0)),A=_.t("Try huddles with more people"),O=f?_.rt("Get access to huddles with more than two people, and other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:M,"<plansPageLink>":g}):_.rt("Get access to huddles with more than two people, and other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":g}),D=_.t("With more people, you can:"),E=(0,t.useCallback)(()=>[_.t("Host a team brainstorm from anywhere"),_.t("Get the group\u2019s feedback with a live screenshare"),_.t("Touch base on the go, without all the typing")],[]),C=(0,t.useCallback)(()=>e.e("gantry-v2-async-lottie-huddles-trial").then(e.t.bind(e,7378585700,23)),[]),S=(0,t.useMemo)(()=>t.createElement(o.e,{getAnimationImport:C,autoplay:!0,loop:!0}),[C]);return t.createElement(c.A,{modalTitle:A,modalSubtitle:O,modalLottieAnimation:S,modalBannerBackgroundColor:"#fdd37f",modalChecklistHeading:D,modalChecklistItems:E(),promoType:I,promoSubtype:T,startTrialContext:h,uiComponentVariant:v,onSpeedbumpContinue:y,isEligibleForTrial:f})},"HuddleTrialEntryPointModal");d.displayName="HuddleTrialEntryPointModal";const r=d},236241007:(j,p,e)=>{"use strict";e.d(p,{A:()=>m});var t=e(9706240641),n=e.n(t),s=e(3134334389),a=e(1031947056),c=e(6323355797),o=e(2375333597),i=e(7268021173),l=e(1152226587),_=e(8300630630);function d(){return d=Object.assign||function(h){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var I in y)Object.prototype.hasOwnProperty.call(y,I)&&(h[I]=y[I])}return h},d.apply(this,arguments)}u(d,"_extends");const r=(0,a.Ay)("Open huddles trial entry point modal",function(){var h=(0,t.coroutine)(function*(v,y,I){const T=c.ZO.PaidFeatureTrial,f=c.zG.Vhq;yield v((0,_.A)({campaignType:T,campaignSubType:f,reason:"huddle_trial_entry_point_modal"}));const g=(0,i.hq)(y(),T,f);return v((0,o.q)({element:s.createElement(l.A,d({},I,{promoType:T,promoSubtype:f,isEligibleForTrial:g}))}))});return function(v,y,I){return h.apply(this,arguments)}}());r.meta={name:"createThunk",key:"createThunkopenHuddlesTrialEntryPointModal",description:"Open huddles trial entry point modal"};const m=r},2612353366:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(1031947056),n=e(5267010247),s=e(7940058138),a=e(8822892075);const c=(0,t.Ay)("Navigates to paid benefits page",i=>{i((0,n.o)((0,a.ZF)(s.c.PaidBenefits)))});c.meta={name:"createThunk",key:"createThunkopenPaidBenefitsPage",description:"Navigates to paid benefits page"};const o=c},8300630630:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(9706240641),n=e.n(t),s=e(3134334389),a=e(1031947056),c=e(1384076438),o=e(2375333597),i=e(124213367);const l=(0,a.Ay)("Display loading modal and fetch data for trial entry point modal",function(){var d=(0,t.coroutine)(function*(r,m,h){return r((0,o.q)({element:s.createElement(i.A,{className:"p-trial_entry_point_modal__loading_modal"})})),r((0,c.A)(h))});return function(r,m,h){return d.apply(this,arguments)}}());l.meta={name:"createThunk",key:"createThunkopenTrialLoadingModal",description:"Display loading modal and fetch data for trial entry point modal"};const _=l},7949425452:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>h,Vu:()=>_,vj:()=>d});var t=e(3134334389),n=e(9113979368),s=e(5255740490),a=e(735940183),c=e(4481313819),o=e(6244014364);function i(){return i=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var I=arguments[y];for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(v[T]=I[T])}return v},i.apply(this,arguments)}u(i,"_extends");const l=new a.Ay("trials"),_={Purple:"purple",White:"white"},d={Small:"small",Medium:"medium",Large:"large"},r={eventId:o.EventId.UPGRDEXP_TRIAL,uiComponentName:o.UiComponentName.TRIAL_PRO_BADGE,clogImpression:!0},m=u(v=>{let{ariaHidden:y=!1,className:I,autoClogProps:T,badgeTheme:f=_.Purple,size:g=d.Medium}=v;const M=y?{"aria-hidden":!0}:{"aria-label":l.t("Pro feature",{fallbackHash:"f3b218b5b69cf46f83217a4c553335005e49633f"}),role:"img"},A=t.createElement("div",i({className:(0,s.A)("p-pro_badge",`p-pro_badge--${f}`,`p-pro_badge--${g}`,I),"data-qa":"pro_badge"},M),l.t("PRO"));return(0,n.A)(T)?A:t.createElement(c.A,i({},r,T),A)},"ProBadge");m.displayName="ProBadge";const h=m},5641442783:(j,p,e)=>{"use strict";e.d(p,{A:()=>v});var t=e(3134334389),n=e(5255740490),s=e(735940183),a=e(6023831373),c=e(6839188756),o=e(3677514771),i=e(7268021173),l=e(6323355797),_=e(7949425452),d=e(9371668729);function r(){return r=Object.assign||function(y){for(var I=1;I<arguments.length;I++){var T=arguments[I];for(var f in T)Object.prototype.hasOwnProperty.call(T,f)&&(y[f]=T[f])}return y},r.apply(this,arguments)}u(r,"_extends");const m=new s.Ay("trials"),h=u(y=>{let{badgeTheme:I=_.Vu.Purple,badgeSize:T=_.vj.Medium,className:f,hideTooltip:g,uiComponentVariant:M,...A}=y;const O=(0,a.d4)(S=>(0,c.tc)((0,o.H7)(S))),D=(0,a.d4)(S=>(0,i.tu)(S)===l.i6.standard.id),E=(0,t.useMemo)(()=>({uiComponentVariant:M}),[M]);if(!(O||D))return null;const C=m.t("PRO");return g?t.createElement(_.Ay,{autoClogProps:E,badgeTheme:I,className:f,size:T}):t.createElement(d.A,r({ariaLabel:C,uiComponentVariant:M},A),t.createElement("span",{className:(0,n.A)("p-trial_pro_badge",f),"data-qa":"trial_pro_badge"},t.createElement(_.Ay,{autoClogProps:E,badgeTheme:I,size:T})))},"TrialProBadge");h.displayName="TrialProBadge";const v=h},3994181705:(j,p,e)=>{"use strict";e.d(p,{A:()=>r,G:()=>_});var t=e(3134334389),n=e(6023831373),s=e(8300007136),a=e(735940183),c=e(7268021173),o=e(1384076438),i=e(1064007131);const l=new a.Ay("trials");var _;(function(m){m.HuddlesFreemium="huddles_freemium"})(_||(_={}));const r=u(m=>{let{isFreemium:h,tooltipText:v,promoType:y,promoSubtype:I,variant:T}=m;const f=(0,s.wA)(),g=(0,n.d4)(c.iH);(0,t.useEffect)(()=>{y&&f((0,o.A)({campaignType:y,campaignSubType:I,reason:"trial_tooltip"}))},[f,y,I]);const M=(0,n.d4)(S=>y?(0,c.bp)(S,y,I):!1),A=(0,n.d4)(S=>y?(0,c.hq)(S,y,I):!1),O=(0,n.d4)(S=>(0,i.J6)(S,A)),D=u(()=>{if(g)switch(T){case _.HuddlesFreemium:return l.t("Huddles with more than two people are a paid feature, available with your free trial");default:return l.t("This is a paid feature, available with your free trial")}if(A)switch(T){case _.HuddlesFreemium:return l.t("Huddles with more than two people are a paid feature, available with a free, {trialLength}-day trial",{trialLength:O});default:return l.t("This is a paid feature, available with a free, {trialLength}-day trial",{trialLength:O})}switch(T){case _.HuddlesFreemium:return l.t("Huddles with more than two people are a paid feature, available with an upgrade");default:return l.t("This is a paid feature, available with an upgrade")}},"getTooltipText"),E=u(()=>g?l.t("This feature is unlimited with your free trial"):A?l.t("This feature is unlimited with a free trial, {trialLength}-day trial",{trialLength:O}):l.t("This feature is unlimited with an upgrade"),"getFreemiumTooltipText");if(M)return{};const C=h?E():D();return v?{tooltipTitle:v,tooltipBody:C}:{tooltipTitle:C}},"useTrialProBadgeTooltipText")},2481088989:(j,p,e)=>{"use strict";e.d(p,{A:()=>o,D:()=>a});var t=e(3134334389),n=e(7949425452),s=e(5641442783);const a={RIGHT_ALIGNED:"right_aligned",LEFT_ALIGNED:"left_aligned"};function c(i){let{position:l=a.RIGHT_ALIGNED,isTrialVariant:_,uiComponentVariant:d,size:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{position:a.RIGHT_ALIGNED,isTrialVariant:!1,uiComponentVariant:void 0,size:n.vj.Medium};const m=t.createElement("span",{className:`p-with_pro_badge__text--${l}`},i),h=_?t.createElement(s.A,{className:"p-with_pro_badge__badge",uiComponentVariant:d,badgeSize:r}):t.createElement(n.Ay,{className:"p-with_pro_badge__badge",size:r});let v;return l===a.RIGHT_ALIGNED?v=t.createElement(t.Fragment,null,m,h):v=t.createElement(t.Fragment,null,h,m),t.createElement("div",{className:"p-with_pro_badge"},v)}u(c,"WithProBadge"),c.displayName="WithProBadge";const o=c},5791262841:(j,p,e)=>{"use strict";e.d(p,{A:()=>R});var t=e(9706240641),n=e(3134334389),s=e(8300007136),a=e(6023831373),c=e(735940183),o=e(6244014364),i=e(8871937520),l=e(9003400431),_=e(1655938719),d=e(6259241484),r=e(5512605238),m=e(8719380546),h=e(267465465),v=e(8683010724);const I=u(P=>{let{checklistItems:z,checklistHeading:$}=P;return n.createElement("div",{className:"p-modal_content_checklist__checklist"},n.createElement("div",{className:"p-modal_content_checklist__heading"},$),z.map(x=>n.createElement("div",{key:x,className:"p-modal_content_checklist__checklist_item"},n.createElement("div",{className:"p-modal_content_checklist__checklist_check"},n.createElement(v.A,{name:"check",size:"16",variation:"filled"})),n.createElement("div",null,x))))},"ModalContentChecklist");var T=e(280819219),f=e(4481313819),g=e(1267040415),M=e(5360912544),A=e(2934784510),O=e(980293773),D=e(5267010247),E=e(8822892075),C=e(7940058138),S=e(5751973043),b=e(1064007131);const k=new c.Ay("trials"),W={elementName:"start_trial",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},N={elementName:"upgrade_link",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},V=u(P=>{let{modalClassName:z,modalCloseButtonTheme:$,modalSubtitle:x,modalTitle:Y,modalType:ne=h.H.VERTICAL_BANNER,modalVideoClassName:re,modalVideoFileName:_e,modalLottieAnimation:G,modalVideoPosterExtension:ge="",modalBannerBackgroundColor:oe="",modalChecklistHeading:me="",modalChecklistItems:ue=S.Ml,promoType:ae,promoSubtype:he,imgSrc:ce,isEligibleForTrial:ee,startTrialContext:J,uiPage:X,uiComponentVariant:F,uiStep:L,onSpeedbumpContinue:K,onSpeedbumpContinueLabel:B,onTrialStart:Q,skipSpeedbump:q,"data-qa":le,omitSecondaryCTA:Te=!1}=P;const Ie=(0,s.wA)(),De=(0,a.d4)(r.F),pe=(0,a.d4)(b.SX),fe=pe===b.mF.TREATMENT_1,Z=pe===b.mF.TREATMENT_2,se=fe||Z,[Ae,Ce]=(0,n.useState)(!1),Le=(0,n.useRef)(""),Ue=(0,n.useCallback)(()=>{Ie((0,l.O)())},[Ie]),Pe=(0,n.useCallback)((0,t.coroutine)(function*(){let{trialExpirationDate:xe}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xe&&(Le.current=xe,yield Ie((0,_.iR)({event:{type:d.jo.REQUEST_SPACES,spaces:[d.xu.SIDEBAR_FOOTER]}})),Q==null||Q(),q?Ue():Ce(!0))}),[Ie,Ue,Q,q]),He=(0,n.useCallback)(()=>{Ue(),Ie((0,D.o)((0,E.ZF)(C.c.PaidBenefits)))},[Ie,Ue]),Qe=(0,n.useCallback)(()=>{Ue(),K==null||K()},[Ue,K]),lt=n.createElement(I,{checklistHeading:me,checklistItems:ue}),qe=n.createElement(M.A,{"data-qa":"trial_entry_point_modal_start_trial_button",autoClogProps:W,reason:"start_trial_from_trial_entry_point_modal",context:J,promoType:ae,promoSubtype:he,onRequestComplete:Pe},k.t("Start Free Trial")),ct=n.createElement(g.A,{"data-qa":"trial_entry_point_modal_plans_page_button",type:"primary",autoClogProps:N,onClick:Ue},k.t("See Upgrade Options")),tt=ee?qe:ct,it=u(()=>{if(!Le.current)return null;const xe=n.createElement("div",{className:"display_flex"},n.createElement(T.A,{className:"p-trial_entry_point_modal__speedbump_icon",type:"sparkles-filled"}),k.t("Ta-da! Your team\u2019s on a free trial")),ze=n.createElement("div",{className:"p-trial_entry_point_modal__speedbump_description"},k.rt("You\u2019re on the most popular premium plan, Slack Pro \u2014 with features designed to help teams work better, together \u2014 through {trialExpirationDate}, absolutely free.",{trialExpirationDate:(0,i.Pd)(Le.current)})),pt=u(()=>B||(K?k.t("Continue"):k.t("Find Out More")),"getContinueButtonLabel")();let It=k.t("Dismiss"),bt=He,gt=Ue,ht="speedbump_learn_more",Zt="speedbump_dismiss";return K&&(It=k.t("Learn More"),bt=Qe,gt=He,ht="speedbump_continue",Zt="speedbump_learn_more"),n.createElement(O.ty,{className:"p-trial_entry_point_modal__speedbump","data-qa":"trial_entry_point_modal_speedbump",heading:xe,description:ze,continueButtonLabel:pt,cancelButtonLabel:It,onCancel:Te?void 0:gt,onContinue:bt,continueButtonType:"primary",autoFocusContinueButton:!0,autoClogProps:{continueButton:{elementName:ht,onClick:{enableClogAction:!0}},cancelButton:{elementName:Zt,onClick:{enableClogAction:!0}}}})},"renderSpeedbump");it.displayName="renderSpeedbump";const Ge=n.createElement("div",{className:"p-trial_entry_point_modal__footer_text","data-qa":"trial_entry_point_modal_footer_text"},k.t("No credit card required.")),We=n.createElement("div",{className:"p-trial_entry_point_modal__footer"},tt,ee&&Ge,ee&&se&&n.createElement(A.A,{shouldShow:De}),Ae&&it());return n.createElement(f.A,{eventId:o.EventId.UPGRDEXP_TRIAL,clogImpression:!0,uiComponentName:o.UiComponentName.TRIAL_ENTRY_POINT_MODAL,uiComponentVariant:F,uiStep:L,uiPage:X},n.createElement(m.A,{bannerBackgroundColor:oe,"data-qa":le,imgSrc:ce,title:Y,subtitle:x,bodyContent:lt,footerContent:We,onRequestClose:Ue,maxWidth:"586px",className:z,closeButtonTheme:$,type:ne,videoFilename:_e,videoPosterExtension:ge,videoClassName:re,lottieAnimation:G}))},"TrialEntryPointModal");V.displayName="TrialEntryPointModal";const R=V},2934784510:(j,p,e)=>{"use strict";e.d(p,{A:()=>l});var t=e(3134334389),n=e(8300007136),s=e(6023831373),a=e(2670882607),c=e(2047021170),o=e(1939990292);const l=t.memo(_=>{let{shouldShow:d=!1}=_;const r=(0,n.wA)(),[m,h]=(0,t.useState)(),[v,y]=(0,t.useState)(!1),I=(0,t.useCallback)(g=>{g&&g.then(M=>h(M))},[h]),T=(0,s.d4)(g=>!(0,c.ty)(g,"a11y_animations")),f=(0,t.useCallback)(()=>e.e("trial-celebration-confetti.json").then(e.t.bind(e,4831955131,23)),[]);return!d||T||v?null:(m&&m._cbs&&m.addEventListener("complete",()=>{r((0,o.DJ)(!1)),y(!0)}),t.createElement(a.e,{autoplay:!0,className:"p-trial_start_confetti",getAnimationImport:f,ref:I}))})},5360912544:(j,p,e)=>{"use strict";e.d(p,{A:()=>A});var t=e(3134334389),n=e(8300007136),s=e(7715417323),a=e(735940183),c=e(6244014364),o=e(4585652590),i=e(1939990292),l=e(4481313819),_=e(6084388622),d=e(8739505998),r=e(5733135148),m=e(6023831373),h=e(1064007131),v=e(1655938719),y=e(6259241484);function I(){return I=Object.assign||function(O){for(var D=1;D<arguments.length;D++){var E=arguments[D];for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(O[C]=E[C])}return O},I.apply(this,arguments)}u(I,"_extends");const T=new a.Ay("trials"),f={name:"warning"},g=u(O=>{let{children:D,reason:E,context:C,megaphoneSpacesToRefresh:S,promoType:b,promoSubtype:k,onClick:W,onRequestComplete:N=s.A,onRequestError:V=s.A,useLink:R,refToForward:P,...z}=O;const $=(0,n.wA)(),[x,Y]=(0,t.useState)(!1),[ne,re]=(0,t.useState)(!1),_e=(0,m.d4)(h.SX),G=_e===h.mF.TREATMENT_1||_e===h.mF.TREATMENT_2,ge=(0,t.useCallback)(()=>{Y(!0),re(!1),V()},[V]),oe=(0,t.useCallback)(()=>{ne||(re(!0),Y(!1),$((0,o.a)({reason:E,campaignType:b,campaignSubType:k,context:C})).then(ae=>{let{trial_expiration_date:he}=ae;$((0,i.DJ)(!0)),N({trialExpirationDate:he}),G&&$((0,v.iR)({event:{type:y.jo.REQUEST_SPACES,spaces:[y.xu.SIDEBAR_MENU_HEADER]}})),S&&S.length>0&&$((0,v.iR)({event:{type:y.jo.REQUEST_SPACES,spaces:S}})),he||ge()}).catch(ge))},[ne,$,E,b,k,C,ge,N,G,S]),me=(0,t.useCallback)(()=>{oe(),W==null||W()},[W,oe]),ue=R?t.createElement(d.A,I({ref:P},z,{onClick:me}),D):t.createElement(_.lV,I({ref:P},z,{onClick:me,loading:ne}),D);return t.createElement(l.A,{eventId:c.EventId.UPGRDEXP_TRIAL_START,clogImpression:!0},ue,x&&t.createElement(r.Ay,{svgIconProps:f,svgIconClassName:"align_self_start",shouldAutoFade:!1},T.t("Something went wrong. Try again later.",{fallbackHash:"248cbe7878bb83237a17ae6abe635e6251a6517a",fallbackHashNs:"channel_modal"})))},"TrialStartCTABase");g.displayName="TrialStartCTABase";const A=t.forwardRef((O,D)=>t.createElement(g,I({},O,{refToForward:D})))},5712872315:(j,p,e)=>{"use strict";e.d(p,{B:()=>n,D:()=>t});var t;(function(s){s.SMALL="small",s.MEDIUM="medium",s.LARGE="large"})(t||(t={}));var n;(function(s){s.NONE="none",s.PURPLE="purple",s.LIGHT_PURPLE="light_purple",s.BLUE="blue",s.ERROR="error",s.HORCHATA="horchata",s.SUNFLOWER="sunflower"})(n||(n={}))},7120433284:(j,p,e)=>{"use strict";e.d(p,{A:()=>y});var t=e(3134334389),n=e(5255740490),s=e(735940183),a=e(581167618),c=e(6105929840),o=e(6308822),i=e(6084388622),l=e(6244014364),_=e(5712872315),d=e(8683010724);function r(){return r=Object.assign||function(I){for(var T=1;T<arguments.length;T++){var f=arguments[T];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(I[g]=f[g])}return I},r.apply(this,arguments)}u(r,"_extends");const m=new s.Ay("upgrades_kit"),h={action:l.UiAction.CLOSE,onClick:{enableClogAction:!0},elementName:"close",elementType:l.ElementType.X},v=u(I=>{let{className:T,image:f,heading:g,isLoading:M,children:A,onDismiss:O,useRoundedCorners:D=!0,showBorder:E=!0,size:C=_.D.MEDIUM,theme:S=_.B.HORCHATA,primaryCTA:b,secondaryCTA:k,withMargins:W,iconProps:N,"data-qa":V}=I;const R=u(()=>t.createElement(c.A,{className:"p-upgrades_alert_banner_v2__close_icon",icon:"times",size:"small","aria-label":m.t("Dismiss"),onClick:O,autoClogProps:h}),"renderCloseIcon"),P=u(()=>{const x=t.createElement("div",null,t.createElement("div",{className:"p-upgrades_alert_banner_v2__heading"},g),t.createElement("div",{className:"p-upgrades_alert_banner_v2__body"},A));if(N){const Y={inline:!0,size:"20",...N};return t.createElement("div",{className:"display_flex"},t.createElement("span",{className:`margin_right_50 p-upgrades_alert_banner_v2__icon--${S}`},t.createElement(d.A,r({},Y))),t.createElement("div",{className:"display_flex flex_direction_column"},x))}return x},"renderContent");P.displayName="renderContent";const z=u(()=>!b&&!k?null:t.createElement("div",{className:"p-upgrades_alert_banner_v2__button_container"},M?t.createElement(i.lV,{loading:!0}):t.createElement(t.Fragment,null,b,k)),"renderButtons");z.displayName="renderButtons";const $=(0,n.A)("p-upgrades_alert_banner_v2",`p-upgrades_alert_banner_v2--${C}`,`p-upgrades_alert_banner_v2--${S}`,T,{"p-upgrades_alert_banner_v2--with_close_icon":!!O,"p-upgrades_alert_banner_v2--rounded_corners":D,"p-upgrades_alert_banner_v2--no_border":!E,"p-upgrades_alert_banner_v2--with_image":!!f,"p-upgrades_alert_banner_v2--with_margins":W});return t.createElement("div",{className:"full_width"},t.createElement(a.Ay,{className:$,type:a.QE.inline,"data-qa":V},t.createElement("div",{className:"p-upgrades_alert_banner_v2__content"},M?t.createElement(o.A,{color:"white",inline:!0}):P(),z(),O&&R())))},"AlertBannerV2");v.displayName="AlertBannerV2";const y=v},7433432223:(j,p,e)=>{"use strict";e.d(p,{A:()=>m});var t=e(3134334389),n=e(5255740490),s=e(735940183),a=e(6244014364),c=e(581167618),o=e(6105929840),i=e(280819219),l=e(5712872315);const _=new s.Ay("upgrades_kit"),d={action:a.UiAction.CLOSE,onClick:{enableClogAction:!0},elementName:"close",elementType:a.ElementType.X},r=u(h=>{let{className:v,iconType:y,customIcon:I,image:T,heading:f,children:g,onDismiss:M,useRoundedCorners:A=!0,showBorder:O=!0,size:D=l.D.MEDIUM,theme:E=l.B.PURPLE,"data-qa":C="",primaryCTA:S,secondaryCTA:b}=h;const k=u(()=>{let P;const z="p-upgrades_alert_banner__icon";return I?P=t.createElement("div",{className:z},I):T?P=t.createElement("div",{className:(0,n.A)(z,"p-upgrades_alert_banner__icon--image")},T):y&&(P=t.createElement(i.A,{className:z,size:D,theme:E,type:y})),P},"renderIcon");k.displayName="renderIcon";const W=u(()=>t.createElement(o.A,{className:"p-upgrades_alert_banner__close_icon","data-qa":"alert_banner_close_button",icon:"times",size:"small","aria-label":_.t("Dismiss",{fallbackHash:"70afe9eff3f2888493d9b5169fec8331af1810de",fallbackHashNs:"trials_highlight_paid_features"}),onClick:M,autoClogProps:d}),"renderCloseIcon");W.displayName="renderCloseIcon";const N=u(()=>!S&&!b?null:t.createElement("div",{className:"p-upgrades_alert_banner__button_container"},S,b),"renderButtons");N.displayName="renderButtons";const V=k(),R=(0,n.A)("p-upgrades_alert_banner",`p-upgrades_alert_banner--${D}`,`p-upgrades_alert_banner--${E}`,v,{"p-upgrades_alert_banner--with_close_icon":!!M,"p-upgrades_alert_banner--rounded_corners":A,"p-upgrades_alert_banner--no_border":!O,"p-upgrades_alert_banner--with_image":!!T});return t.createElement("div",{className:"full_width"},t.createElement(c.Ay,{className:R,"data-qa":C,customIcon:V,heading:f,type:V?c.QE.boxed:c.QE.custom},t.createElement("div",{className:"p-upgrades_alert_banner__body"},g),N(),M&&W()))},"AlertBanner");r.displayName="AlertBanner";const m=r},267465465:(j,p,e)=>{"use strict";e.d(p,{H:()=>t});var t;(function(n){n.MULTI_PANE="multi_pane",n.SINGLE_PANE="single_pane",n.VERTICAL_BANNER="vertical_banner",n.HORIZONTAL_BANNER="horizontal_banner"})(t||(t={}))},280819219:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(3134334389),n=e(5255740490),s=e(1610251172);const c=t.memo(d=>{let{animationDelay:r,size:m="large"}=d;const h=48,v=h-(m==="large"?48:36),y=h*2,I="#1D9BD1",T="#F2C744",f="#007A5A",g="#E01E5A",M={animationDelay:`${r||0}s`},A=u((C,S)=>t.createElement("path",{d:"M2 10.3L6 10.39C8.2 10.4 10 8.6 10 6.3C10 4 8.2 2.1 6 2C3.79 2 2 3.85 2 6.15L2 10.3Z",fill:S,className:C,style:M}),"renderDrop"),O=u((C,S)=>t.createElement("circle",{r:"4",fill:S,className:C,style:M}),"renderCircle"),D=u((C,S)=>t.createElement("path",{d:"M6.47 1.27C6.3 0.83 5.69 0.83 5.53 1.27L4.46 4.16C4.4 4.3 4.3 4.41 4.16 4.46L1.27 5.53C0.83 5.69 0.831 6.3 1.27 6.47L4.16 7.5C4.3 7.59 4.41 7.7 4.46 7.84L5.53 10.73C5.69 11.17 6.31 11.17 6.47 10.73L7.54 7.84C7.59 7.7 7.7 7.59 7.84 7.54L10.73 6.47C11.17 6.31 11.17 5.69 10.73 5.53L7.84 4.46C7.7 4.41 7.59 4.3 7.54 4.16L6.47 1.27Z",fill:S,className:C,style:M}),"renderStar"),E=u((C,S)=>t.createElement("path",{d:"M1 5.5C1 4.12 2.12 3 3.5 3H8.5C9.88 3 11 4.12 11 5.5V5.5C11 6.88 9.88 8 8.5 8H3.5C2.12 8 1 6.88 1 5.5V5.5Z",fill:S,className:C,style:M}),"renderSprinkle");return t.createElement("svg",{className:(0,n.A)("position_absolute",`p-upgrades_icon_celebration_animation--${m}`),style:{top:`-${h/2+v/2}px`,left:`-${h/2+v/2}px`},width:y,height:y,viewBox:`0 0 ${y} ${y}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},A("p-upgrades_icon_celebration_animation__drop_top_right",I),O("p-upgrades_icon_celebration_animation__circle_top_right",T),O("p-upgrades_icon_celebration_animation__circle_right",f),D("p-upgrades_icon_celebration_animation__star_bottom_right",T),O("p-upgrades_icon_celebration_animation__circle_bottom_right",T),E("p-upgrades_icon_celebration_animation__sprinkle_bottom_left",g),A("p-upgrades_icon_celebration_animation__drop_left",T),O("p-upgrades_icon_celebration_animation__circle_top_left",I),D("p-upgrades_icon_celebration_animation__star_top_left",f),E("p-upgrades_icon_celebration_animation__sprinkle_top_left",g))});var o=e(5712872315);function i(){return i=Object.assign||function(d){for(var r=1;r<arguments.length;r++){var m=arguments[r];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(d[h]=m[h])}return d},i.apply(this,arguments)}u(i,"_extends");const l=u(d=>{let{className:r,animationProps:m,hasBorder:h,type:v,size:y=o.D.MEDIUM,theme:I=o.B.PURPLE,showAnimation:T}=d;const f=(0,n.A)(`p-upgrades_icon--${y}`,`p-upgrades_icon--${I}`,r),g=t.createElement(s.A,{className:f,size:"inherit",type:v});if(!h)return g;const M=(0,n.A)("p-upgrades_icon_container",`p-upgrades_icon_container--${y}`,`p-upgrades_icon_container--${I}`,{"p-upgrades_icon_container--with_animation":T});return t.createElement("div",{className:M},g,T&&t.createElement(c,i({size:y},m)))},"UpgradesIcon");l.displayName="UpgradesIcon";const _=l},5207331754:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(980293773);const c=u(o=>{let{children:i,className:l}=o;return t.createElement(s.qf,{className:(0,n.A)("p-upgrades_modal__content_section",l)},i)},"ModalBody")},9240394198:(j,p,e)=>{"use strict";e.d(p,{N:()=>f,A:()=>M});var t=e(3134334389),n=e(5255740490),s=e(980293773),a=e(9421999304),c=e(267465465),o=e(581167618),i=e(7949425452),l=e(3357053101),_=e(1935364562),d=e(5207331754),r=e(6000244203),m=e(3801841745);const v=u(A=>{let{banner:O,bodyContent:D,footerContent:E,showProBadge:C=!0,subtitle:S,title:b,error:k}=A;return t.createElement(t.Fragment,null,t.createElement("div",{className:"p-upgrades_modal_with_banner_horizontal__left_panel"},t.createElement(m.A,{flexDirection:"column",gap:20},k&&t.createElement(o.Ay,{icon:"warning",level:"error",className:"p-upgrades_modal_with_banner_horizontal__error_alert"},k),t.createElement(l.A,{headerClassName:"p-upgrades_modal_with_banner_horizontal__header",titleClassName:"padding_top_0",title:b},C&&t.createElement(i.Ay,{className:"p-upgrades_modal_with_banner_horizontal__pro_badge"}))),t.createElement(s.$m,null,S&&t.createElement(_.A,{className:"p-upgrades_modal_with_banner_horizontal__subtitle",subtitle:S}),t.createElement(d.A,{className:"p-upgrades_modal_with_banner_horizontal__body"},D)),t.createElement(r.A,{className:"p-upgrades_modal_with_banner_horizontal__footer"},E)),O)},"ModalContentHorizontalBanner"),y=u(A=>{let{banner:O,bodyContent:D,footerContent:E,showProBadge:C=!0,subtitle:S,title:b}=A;const k=t.createElement(t.Fragment,null,b,C&&t.createElement(i.Ay,{className:"p-upgrades_modal_with_banner_vertical__pro_badge"}));return t.createElement(t.Fragment,null,t.createElement(l.A,{titleClassName:"p-upgrades_modal_with_banner_vertical__title",title:k},O),t.createElement(s.$m,null,S&&t.createElement(_.A,{className:"p-upgrades_modal_with_banner_vertical__subtitle",subtitle:S}),t.createElement(d.A,{className:"p-upgrades_modal_with_banner_vertical__body"},D)),t.createElement(r.A,null,E))},"ModalContentVerticalBanner");y.displayName="ModalContentVerticalBanner";const I=y;function T(){return T=Object.assign||function(A){for(var O=1;O<arguments.length;O++){var D=arguments[O];for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&(A[E]=D[E])}return A},T.apply(this,arguments)}u(T,"_extends");var f;(function(A){A.LIGHT="light",A.DARK="dark",A.GOLD="gold",A.GRAY="gray"})(f||(f={}));const g=u(A=>{let{bannerBackgroundColor:O,bodyContent:D,centered:E,className:C,closeButtonTheme:S=f.DARK,closeModal:b,dataQa:k,footerContent:W,imgSrc:N,imgSrcSet:V,maxWidth:R,shouldCloseOnOverlayClick:P,showProBadge:z=!0,subtitle:$,title:x,error:Y,type:ne,videoFilename:re,videoPosterExtension:_e="png",videoClassName:G,lottieAnimation:ge,...oe}=A;const me=(0,a.JK)(),ue=`${re}${me==="en-US"?"":`.${me}`}`,ae=`p-upgrades_modal_with_banner__banner--${ne}`,he=u(()=>V?t.createElement("img",{className:ae,alt:"",srcSet:V}):N?t.createElement("img",{className:ae,alt:"",src:N}):re?t.createElement("video",{playsInline:!0,autoPlay:!0,muted:!0,className:(0,n.A)(ae,G),poster:`${ue}.${_e}`},t.createElement("source",{type:"video/mp4",src:`${ue}.mp4`}),t.createElement("source",{type:"video/webm",src:`${ue}.webm`})):ge?t.createElement("div",{className:"p-upgrades_modal__lottie_container"},ge):null,"getModalBanner");he.displayName="getModalBanner";const ce=t.createElement("div",{style:{backgroundColor:O},className:`p-upgrades_modal_with_banner__banner_container--${ne}`},he());return t.createElement(s.dW,T({className:(0,n.A)("p-upgrades_modal_with_banner",`p-upgrades_modal_with_banner__base_modal--${ne}`,`p-upgrades_modal_with_banner--close_button_${S}`,"p-upgrades_modal_with_banner--close_button",C),centered:E,closeModal:b,dataQa:k,maxWidth:R,shouldCloseOnOverlayClick:P},oe),ne===c.H.VERTICAL_BANNER?t.createElement(I,{banner:ce,bodyContent:D,footerContent:W,showProBadge:z,subtitle:$,title:x}):t.createElement(v,{banner:ce,bodyContent:D,footerContent:W,showProBadge:z,subtitle:$,title:x,error:Y}))},"ModalContentWithBanner");g.displayName="ModalContentWithBanner";const M=g},6000244203:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(980293773);const c=u(o=>{let{children:i,className:l}=o;return t.createElement(s.jl,{className:"p-upgrades_modal__footer"},t.createElement(s.ox,{className:(0,n.A)("p-upgrades_modal__footer_actions",l)},i))},"ModalFooter")},3357053101:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(980293773);const c=u(o=>{let{headerClassName:i,titleClassName:l,children:_,title:d}=o;return t.createElement(s.rQ,{className:(0,n.A)("p-upgrades_modal__header",i)},_,t.createElement(s.Rc,{className:(0,n.A)("p-upgrades_modal__title",l),title:d}))},"ModalHeader")},1935364562:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(3134334389),n=e(5255740490);const a=u(c=>{let{className:o,subtitle:i}=c;return t.createElement("div",{className:(0,n.A)("p-upgrades_modal__subtitle",o)},i)},"ModalSubtitle")},8719380546:(j,p,e)=>{"use strict";e.d(p,{A:()=>T});var t=e(3134334389),n=e(5255740490),s=e(980293773),a=e(4376397139),c=e(3357053101),o=e(5207331754),i=e(1935364562),l=e(6000244203),_=e(280819219),d=e(5712872315);const m=u(f=>{let{subtitle:g,bodyContent:M,footerContent:A,title:O,titleImage:D,titleVideo:E,titleVideoClassName:C,titleIcon:S,showTitleIconAnimation:b,headerClassName:k,footerActionsClassName:W,theme:N}=f;return t.createElement(t.Fragment,null,t.createElement(c.A,{headerClassName:(0,n.A)(k,{"p-upgrades_modal__header--with_animation":b}),title:O},D,E&&t.createElement("div",{className:(0,n.A)(C)},E),S&&t.createElement("div",{className:"p-upgrades_modal__icon"},t.createElement(_.A,{hasBorder:!0,size:d.D.LARGE,type:S,showAnimation:!!b,theme:N}))),g&&t.createElement(i.A,{subtitle:g}),M&&t.createElement(s.$m,null,t.createElement(o.A,null,M)),t.createElement(l.A,{className:W},A))},"ModalContent");var h=e(9240394198),v=e(267465465);function y(){return y=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var M=arguments[g];for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(f[A]=M[A])}return f},y.apply(this,arguments)}u(y,"_extends");const I=u(f=>{const{className:g,maxWidth:M,onRequestClose:A,type:O,"data-qa":D,UNSAFE_parentSelector:E}=f,S={className:(0,n.A)("p-upgrades_modal__container",g),closeModal:A,shouldCloseOnOverlayClick:!0,centered:!0,maxWidth:M,dataQa:D,UNSAFE_parentSelector:E};return O===v.H.MULTI_PANE?t.createElement(a.A,y({},f,S)):O===v.H.VERTICAL_BANNER||O===v.H.HORIZONTAL_BANNER?t.createElement(h.A,y({},f,S)):t.createElement(s.dW,y({},S),t.createElement(m,y({},f)))},"Modal");I.displayName="Modal";const T=I},9371668729:(j,p,e)=>{"use strict";e.d(p,{A:()=>m});var t=e(3134334389),n=e(6023831373),s=e(5255740490),a=e(2312625946),c=e(7268021173),o=e(3994181705),i=e(4481313819),l=e(7949425452),_=e(6244014364);function d(){return d=Object.assign||function(h){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var I in y)Object.prototype.hasOwnProperty.call(y,I)&&(h[I]=y[I])}return h},d.apply(this,arguments)}u(d,"_extends");const r=u(h=>{let{ariaLabel:v,tooltipText:y,children:I,onClick:T,isFreemium:f,promoType:g,promoSubtype:M,showProBadge:A,tooltipClassName:O,uiComponentVariant:D,variant:E,toolTipZIndex:C,toolTipPosition:S,...b}=h;const{tooltipTitle:k,tooltipBody:W}=(0,o.A)({isFreemium:f,tooltipText:y,promoType:g,promoSubtype:M,variant:E}),N=(0,n.d4)(P=>(0,c.bp)(P,g,M)),V=W?`${k} - ${W}`:k;if(N)return I;const R=t.createElement(i.A,{clogImpression:!0,eventId:_.EventId.UPGRDEXP_TRIAL,uiComponentName:_.UiComponentName.TRIAL_FEATURE_TOOLTIP,uiComponentVariant:D},t.createElement("div",{className:"p-trial_feature_tooltip"},t.createElement("span",{className:"p-trial_feature_tooltip__title"},A&&t.createElement(l.Ay,{badgeTheme:l.Vu.White,className:"p-trial_feature_tooltip__pro_badge"}),t.createElement("div",{className:"p-trial_feature_tooltip__title_text"},k)),t.createElement("div",{className:"p-trial_feature_tooltip__body"},W)));return t.createElement(a.Ay,d({tipClassName:(0,s.A)("p-trial_feature_tooltip__container",O),tip:R,onClick:T,zIndex:C,position:S,"aria-label":v?`${v}: ${V}`:`${V}`},b),I)},"TrialFeatureTooltip");r.displayName="TrialFeatureTooltip";const m=r},4387298515:(j,p,e)=>{"use strict";e.d(p,{$m:()=>c,AH:()=>T,Ac:()=>i,D0:()=>h,Mh:()=>y,VR:()=>r,th:()=>_});var t=e(9706240641),n=e.n(t),s=e(6045824189);const a=(0,s.Nh)(["callsScreenshare","createBorderWindow"]),c=function(){var f=(0,t.coroutine)(function*(g,M){a.isAvailable()&&a(g,M)});return u(function(M,A){return f.apply(this,arguments)},"createBorderWindow")}(),o=(0,s.Nh)(["callsScreenshare","showBorder"]),i=function(){var f=(0,t.coroutine)(function*(){o.isAvailable()&&o()});return u(function(){return f.apply(this,arguments)},"showBorder")}(),l=(0,s.Nh)(["callsScreenshare","hideBorder"]),_=function(){var f=(0,t.coroutine)(function*(){l.isAvailable()&&l()});return u(function(){return f.apply(this,arguments)},"hideBorder")}(),d=(0,s.Nh)(["callsScreenshare","setWindowOrScreenId"]),r=function(){var f=(0,t.coroutine)(function*(g){d.isAvailable()&&d(g)});return u(function(M){return f.apply(this,arguments)},"setWindowOrScreenId")}(),m=(0,s.Nh)(["callsScreenshare","setWindowBorderWidth"]),h=function(){var f=(0,t.coroutine)(function*(g){m.isAvailable()&&m(g)});return u(function(M){return f.apply(this,arguments)},"setWindowBorderWidth")}(),v=(0,s.Nh)(["callsScreenshare","setWindowBorderColor"]),y=function(){var f=(0,t.coroutine)(function*(g,M,A,O){v.isAvailable()&&v(g,M,A,O)});return u(function(M,A,O,D){return f.apply(this,arguments)},"setWindowBorderColor")}(),I=(0,s.Nh)(["callsScreenshare","getWindowPositionAndDimensions"]),T=function(){var f=(0,t.coroutine)(function*(){if(I.isAvailable())return I()});return u(function(){return f.apply(this,arguments)},"getWindowPositionAndDimensions")}()},1583163054:(j,p,e)=>{"use strict";e.d(p,{Ce:()=>r,Pe:()=>_,fI:()=>m,zS:()=>c});var t=e(3245843483),n=e(571104883),s=e(735940183);const a=new s.Ay("prefs"),c=(0,t.g9M)()&&t.MD7.isAvailable()?(0,t.MD7)():"nightly",o={PROD:"prod",BETA:"beta",DOGFOOD:c},i=[o.PROD,o.BETA],l=[o.PROD,o.BETA,o.DOGFOOD];function _(h){return(h?l:i).map(y=>({value:y,label:d(y)}))}u(_,"getReleaseChannelOptions");function d(h){switch(h){case o.PROD:return a.t("Production");case o.BETA:return a.t("Beta");case o.DOGFOOD:return a.t("Dogfood",{fallbackHash:"c9e429b1798d0142b8b31e82c1f9da5d8e0c9420"});default:return a.t("Unknown")}}u(d,"getReleaseChannelDisplayName");function r(){return(0,t.g9M)()&&!(0,t.Z9F)()&&!(0,n.j9)()}u(r,"canSeeReleaseChannel");function m(){return r()&&["MSI","SlackSonic","SlackPilot"].every(h=>!navigator.userAgent.includes(h))}u(m,"canModifyReleaseChannel")},4923013394:(j,p,e)=>{"use strict";e.d(p,{Jd:()=>d,X6:()=>r,bO:()=>o,c6:()=>l,fD:()=>y,lJ:()=>v,ve:()=>i,zb:()=>_});var t=e(3398586081),n=e(571104883),s=e(3259512346),a=e(3245843483);const c="sunroof_init",o="fullscreen-ui",i=(0,t.A)(()=>!1),l=(0,t.A)(()=>(0,s.s)("25.1.1")),_=(0,t.A)(()=>(0,a.Z9F)()?(0,n.dY)("38.0.0"):!0),d=(0,t.A)(()=>{if(!(0,n.y3)())return!1;const{titleBarStyle:I}=(0,a.oQe)("environment")||{},{debugFeatures:T}=(0,a.oQe)("settings")||{};return I==="custom-extension"||(T==null?void 0:T.includes("window-chrome"))}),r=(0,t.A)(()=>(0,n.WB)()&&(0,n.dY)("4.33.90")),m=u(()=>{if(!r())return!1;const{useHwAcceleration:I,windowVibrancy:T}=(0,a.oQe)("settings")||{};return I&&T},"shouldEnableWindowSunroof"),h=(0,t.A)(()=>!(0,n.dY)("4.35.97")),v=u(()=>m()?(0,n.cX)()?{transparent:h(),vibrancy:o,backgroundColor:null}:{}:{},"maybeGetSunroofWindowOptions");function y(I){const{windowVibrancy:T}=(0,a.oQe)("settings")||{};if(typeof T>"u")return;if(T&&(!I.experimentDesktopIa4SunroofEnabled||!m())){(0,a.cGU)({name:"windowVibrancy",value:!1});try{localStorage.removeItem(c)}catch{}return}const f=!!localStorage.getItem(c);if(I.experimentDesktopIa4SunroofEnabled&&!f&&!T&&r()){(0,a.cGU)({name:"windowVibrancy",value:!0});try{localStorage.setItem(c,"1")}catch{}}}u(y,"maybeToggleSunroof")},4979734995:(j,p,e)=>{"use strict";e.d(p,{d:()=>o,j:()=>c});var t=e(6422693406),n=e(4724591729),s=e(796111729),a=e(4096483543);function c(i,l,_){const d="noversion",r=Date.now()/1e3,m=`/api/${i}?_x_id=${d}-${r}`,h=new XMLHttpRequest;h.onreadystatechange=()=>{if(h.readyState===4){h.onreadystatechange=null;let T;if(h.status===200||h.status===429)try{T=JSON.parse(h.responseText)}catch{(0,s.Wo)().warn("API","Unable to do anything with api response")}T=T||{ok:!1},_?_(T.ok,T,l):(0,n.Cu)()&&((0,s.Wo)().warn("API","No callback provided. Printing response"),(0,s.Wo)().warn("API",T.ok,T,l))}};const v=!0;h.open("POST",m,v);const y=new FormData;let I=!1;l?Object.keys(l).forEach(T=>{T[0]!=="_"&&(y.append(T,l[T]),I=!0)}):(0,n.Cu)()&&(0,s.Wo)().warn("API","No args provided. Bold, very bold."),I?h.send(y):h.send()}u(c,"callSlackApiUnauthed");const o=u((i,l)=>new t.S(_=>{c(i,l,(d,r)=>{_(r)})}),"callSlackApiUnauthedAsync");(0,a.A)()||(window.callSlackAPIUnauthed=(i,l,_)=>{(0,s.Wo)().warn("API","Don't use me directly! Please import callSlackApiUnauthed from api-unauthed.ts"),c(i,l,_)})},4540171876:(j,p,e)=>{"use strict";e.d(p,{Db:()=>_,O3:()=>d,OB:()=>r,TE:()=>h,xB:()=>m});var t=e(2101927269),n=e(4525554634),s=e(2384831516),a=e(1269227002),c=e(6422693406),o=e(796111729),i=e(462591818),l=e(8935621861);const _=(0,s.C6)("Get call info from callId",(v,y,I)=>{let{callIds:T,reason:f}=I;const g=(0,o.Ay)({getState:y});return T.length>3&&g.warn(`fetchCallByIds being called for unexpectedly many calls at once: ${T.length}`),c.S.map(T,M=>v((0,a.apiCall)({method:"screenhero.rooms.info",args:{room:M},reason:f||"huddles-call-info"})).then(A=>{let{room:O}=A;return(0,n.Q)(O)}).catch(A=>(g.error(A,`Error while fetching call: ${M}`),null))).then(t.A)});_.meta={name:"createFetcher",key:"createFetcherfetchCallsByIds",description:"Get call info from callId"};const d=(0,s.C6)("Join a calls / huddle room",(v,y,I)=>{let{channelId:T,roomId:f,threadTs:g,shouldFetchRegion:M,teamId:A,traceId:O,parentSpanId:D,reason:E,isMultiDevice:C=!1}=I;return(M?l.A.getInstance().getNearestChimeMediaRegion(A):c.S.resolve("")).then(S=>v((0,a.apiCall)({method:"rooms.join",args:{...f&&{id:f},...T&&{channel_id:T},...g&&{thread_ts:g},regions:S,multidevice:C},traceId:O,parentSpanId:D,reason:E||"calls-api/joinRoom"})).then(b=>{var k;return{server:(0,i.YY)(b.call),roomId:b.call.call_id,regions:"",inviteResponses:void 0,virtualRoomId:f,channelId:(k=b.huddle)===null||k===void 0?void 0:k.channels[0],...b.canvas&&b.canvas.root_thread_ts&&{rootThreadTs:b.canvas.root_thread_ts},...b.canvas&&b.canvas.canvas_file_id&&{canvasFileId:b.canvas.canvas_file_id}}}))});d.meta={name:"createFetcher",key:"createFetcherjoinRoom",description:"Join a calls / huddle room"};const r=(0,s.C6)("Notify member to join huddle",(v,y,I)=>{let{reason:T,channelId:f,userId:g}=I;return v((0,a.apiCall)({method:"rooms.notifyMember",args:{channel_id:f,user_id:g},reason:T}))});r.meta={name:"createFetcher",key:"createFetchernotifyMember",description:"Notify member to join huddle"};const m=(0,s.C6)("Set a huddle topic / rename the call",(v,y,I)=>{let{roomId:T,name:f}=I;return v((0,a.apiCall)({method:"screenhero.rooms.rename",reason:"huddles-topic",args:{room:T,room_name:f}}))});m.meta={name:"createFetcher",key:"createFetcherrenameCall",description:"Set a huddle topic / rename the call"};const h=(0,s.C6)("Get a link to a huddle",(v,y,I)=>{let{reason:T,channelId:f}=I;return v((0,a.apiCall)({method:"rooms.getLink",reason:T,args:{channel_id:f}}))});h.meta={name:"createFetcher",key:"createFetchergetLink",description:"Get a link to a huddle"}},6580433553:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(3297051565),n=e.n(t),s=e(5257368278),a=e(1269227002),c=e(6932877194),o=e(4423055085),i=e(6422693406),l=e(1874577777);let _=!1;const d=(0,s.A)("Sends a message",function(h,v){let{message:y,traceId:I,parentSpanId:T}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f={...y},g=v();return y.blocks&&typeof y.blocks=="object"&&(f.blocks=JSON.stringify(y.blocks)),y.unfurl&&typeof y.unfurl=="object"&&(f.unfurl=JSON.stringify(y.unfurl)),_?new i.K((M,A)=>{setTimeout(()=>{A(new Error({data:{error:"testing"},message:"testing"}))},2e3)}):(0,l.A)(g)?h((0,c.apiCallPersisted)({method:"chat.postMessage",args:f,reason:"webapp_message_send_offline",EXPEDITED:!0,traceId:I,parentSpanId:T})):h((0,a.apiCall)({method:"chat.postMessage",args:f,reason:"webapp_message_send",EXPEDITED:!0,traceId:I,parentSpanId:T}))});d.meta={name:"createFetcher",key:"createFetcherchatPostMessage",description:"Sends a message"},d.propTypes={message:n().shape({channel:n().string.isRequired,client_msg_id:n().string}).isRequired,traceId:n().string,parentSpanId:n().string};const r=d,m=u(h=>{_=!!h},"setForceMessageFailure");(0,o.ul)("setForceMessageFailure",m)},9694536345:(j,p,e)=>{"use strict";e.d(p,{O:()=>d});var t=e(8840779375),n=e(3297051565),s=e.n(n),a=e(5257368278),c=e(1269227002),o=e(796111729),i=e(5873468694),l=e(5795074931),_=e(5657872960);const d=(0,a.A)("Calls client.counts endpoint",function(r,m){let{reason:h="client-counts-api/fetchClientCounts"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r((0,c.apiCall)({method:"client.counts",args:{thread_counts_by_channel:!0,org_wide_aware:!0,include_file_channels:!0},reason:h})).then(v=>{if(!v||!v.ok)return{};try{const E=["U0620EL8G","WFKHTCZ29","WKLQEGRRB"],C=(0,l.WR)(m());if(E.indexOf(C)>-1){const S=(0,t.A)(v.ims,k=>({id:k.id})),b=(0,t.A)(v.mpims,k=>({id:k.id}));(0,o.Ay)({getState:m}).error("guest_to_guest_visibility",{type:"client_counts_api_results",im_list:S,mpim_list:b})}}catch(E){(0,o.Ay)({getState:m}).error("guest_to_guest_visibility",{type:"client_counts_api_results",error:E})}const{activity:y={},channels:I=[],ims:T=[],mpims:f=[],threads:g={},file_channels:M={has_unreads:!1,mention_count:0},channel_badges:A={},alerts:O=null}=v,D={activity:y,channels:I,ims:T.map(E=>({...E,is_im:!0})),mpims:f.map(E=>({...E,is_mpim:!0})),threads:g,alerts:O,fileChannels:M,channelBadges:A};return(0,_.c)(m())&&v.saved&&(D.saved=(0,i.XK)(v.saved)),D})});d.meta={name:"createFetcher",key:"createFetcherfetchClientCounts",description:"Calls client.counts endpoint"},d.propTypes={reason:s().string}},1194535350:(j,p,e)=>{"use strict";e.d(p,{KO:()=>o,_J:()=>i,zx:()=>l});var t=e(3297051565),n=e.n(t),s=e(1269227002),a=e(5257368278),c=e(4318855015);const o=(0,a.A)("Fetch all available and installed emoji collections from the API",function(_,d){let{reason:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _((0,s.apiCall)({method:"emoji.collections.list",reason:r,args:{installed_only:"0"}}))});o.meta={name:"createFetcher",key:"createFetcherfetchEmojiCollections",description:"Fetch all available and installed emoji collections from the API"},o.propTypes={reason:n().string.isRequired};const i=(0,a.A)("Add an emoji collection",(_,d,r)=>{let{collectionId:m,reason:h}=r;return _((0,s.apiCall)({method:"emoji.addCollection",args:{collection_id:m},reason:h})).catch(v=>{if(v.name!=="already_installed")throw v})});i.meta={name:"createFetcher",key:"createFetcheraddEmojiCollection",description:"Add an emoji collection"},i.propTypes={collectionId:n().string.isRequired,reason:n().string.isRequired};const l=(0,a.A)("Remove an emoji collection",(_,d,r)=>{let{collectionId:m,reason:h}=r;return _((0,c.$x)({collectionId:m})),_((0,s.apiCall)({method:"emoji.removeCollection",reason:h,args:{collection_id:m}}))});l.meta={name:"createFetcher",key:"createFetcherremoveEmojiCollection",description:"Remove an emoji collection"},l.propTypes={collectionId:n().string.isRequired,reason:n().string.isRequired}},490494914:(j,p,e)=>{"use strict";e.d(p,{Cl:()=>_,Is:()=>d,af:()=>l});var t=e(9706240641),n=e.n(t),s=e(5257368278),a=e(6892115804),c=e(8847766420),o=e(2149300053),i=e(1026257987);const l=(0,s.A)("Queries Flannel for a list of external connected orgs/teams",(r,m,h)=>{let{count:v,filter:y,marker:I}=h;return(0,o.P)((0,c.JY)(m()),{method:o.J8.EXTERNAL_TEAMS_LIST,args:{count:v,filter:y,marker:I}}).then(T=>T)});l.meta={name:"createFetcher",key:"createFetcherfetchExternalTeamsList",description:"Queries Flannel for a list of external connected orgs/teams"};const _=(0,s.A)("Queries Flannel for channel counts of external connected orgs/teams",(r,m,h)=>{let{teamIds:v,count:y,marker:I}=h;return(0,o.P)((0,c.JY)(m()),{method:o.J8.EXTERNAL_TEAMS_COUNTS,args:{team_ids:v,count:y,marker:I}}).then(T=>T)});_.meta={name:"createFetcher",key:"createFetcherfetchExternalTeamsCounts",description:"Queries Flannel for channel counts of external connected orgs/teams"};const d=(0,s.A)("Fetches and upserts external teams that match a query",function(){var r=(0,t.coroutine)(function*(m,h,v){const y=(0,c.JY)(h());return(0,i.Cj)(y,v).then(I=>{let{objects:T,next_marker:f}=I;return m((0,a.OU)({teams:T})),{externalTeams:T,nextMarker:f}})});return function(m,h,v){return r.apply(this,arguments)}}());d.meta={name:"createFetcher",key:"createFetcherfetchAndUpsertExternalTeamsWithQuery",description:"Fetches and upserts external teams that match a query"}},9109082163:(j,p,e)=>{"use strict";e.d(p,{Rs:()=>m,eS:()=>r,xs:()=>d});var t=e(3297051565),n=e.n(t),s=e(8703681551),a=e(8571983633),c=e(5257368278),o=e(1269227002),i=e(9676369204),l=e(9101533895);const _={"pins.list":{}},d=(0,c.A)("Get pinned items for channel",function(v,y){let{channelId:I,reason:T}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=_["pins.list"];return f[I]||(f[I]=v((0,o.apiCall)({method:"pins.list",args:{channel:I},reason:T})),f[I].then(g=>{const M=y(),A=(0,l.OL)(M,I);A&&(0,i.YJ)(g,A)}),f[I].finally(()=>delete f[I])),f[I]});d.meta={name:"createFetcher",key:"createFetcherpinsList",description:"Get pinned items for channel"},d.propTypes={channelId:n().string.isRequired,reason:n().string.isRequired};const r=(0,c.A)("Pin Message to channel",(v,y,I)=>{let{ts:T,fileId:f,fileCommentId:g,channelId:M,reason:A}=I;return v((0,o.apiCall)({method:"pins.add",reason:A,args:(0,s.A)({channel:M,timestamp:T,file:f,file_comment:g},a.A)}))});r.meta={name:"createFetcher",key:"createFetcherpinsAdd",description:"Pin Message to channel"},r.propTypes={channelId:n().string.isRequired,ts:n().string,fileId:n().string,fileCommentId:n().string,reason:n().string.isRequired};const m=(0,c.A)("Unpin Message from channel",(v,y,I)=>{let{ts:T,fileId:f,fileCommentId:g,channelId:M,reason:A}=I;return v((0,o.apiCall)({method:"pins.remove",reason:A,args:(0,s.A)({channel:M,timestamp:T,file:f,file_comment:g},a.A)}))});m.meta={name:"createFetcher",key:"createFetcherpinsRemove",description:"Unpin Message from channel"},m.propTypes={channelId:n().string.isRequired,ts:n().string,fileId:n().string,fileCommentId:n().string,reason:n().string.isRequired};const h={resetActiveCalls:()=>{Object.keys(_).forEach(v=>{_[v]={}})}}},6987519067:(j,p,e)=>{"use strict";e.d(p,{lp:()=>Xe,SI:()=>ms,DC:()=>Tn,Yb:()=>mn,aw:()=>Ps,g2:()=>Rs,U7:()=>Mt,eR:()=>we,sr:()=>vt,Do:()=>Un,EM:()=>bn,AC:()=>U,FF:()=>bs,A$:()=>Es,mi:()=>H,mK:()=>es,bE:()=>jt,AQ:()=>xn,Cs:()=>ln,J6:()=>te,LR:()=>de,cD:()=>zn,jl:()=>ve,QH:()=>ot,DF:()=>Dn,UC:()=>Re,fx:()=>Ye,lS:()=>vs,A1:()=>Ln,H9:()=>On,ZD:()=>ls,$P:()=>Ne,G2:()=>dt,S:()=>ys});var t=e(8571983633),n=e(7715417323),s=e(7174777686),a=e(2141441167),c=e(897091071),o=e(1703559452),i=e(9113979368),l=e(9746734072),_=e(5503876160),d=e(4103274853),r=e(1566461842),m=e(6422693406),h=e(8737667238),v=e(5513050121),y=e(7599421656),I=e(6644049054),T=e(8956161330),f=e(2628468636),g=e(1190344069),M=e(1340402138),A=e(4446301238),O=e(6554371307),D=e(8017028002),E=e(490494914),C=e(5984521287),S=e(8419094353),b=e(9552526132),k=e(8352634987),W=e(4423055085),N=e(5613323535),V=e(735940183),R=e(571104883),P=e(7148679525),z=e(3677514771),$=e(3683888369),x=e(6839188756),Y=e(1507833885);const ne=new V.Ay("modals");function re(Ve){return[{id:"downloads",name:ne.t("Downloads"),icon:"download",isEnabled:()=>(0,R.y3)()},{id:"invite_to_workspace",name:ne.t("Invite people to {workspaceName}",{workspaceName:(0,x.F1)((0,z.H7)(Ve))}),icon:"add-user",isEnabled:()=>(0,P.Lz)(Ve)},{id:"create_a_channel",name:ne.t("Create a Channel"),icon:"plus",isEnabled:()=>(0,Y.MM)(Ve)},{id:"create_a_canvas",name:ne.t("Create a canvas",{fallbackHash:"6ac4a1edc6d12317e9fc711b1fd00c073b191bdd",fallbackHashNs:"classic_nav"}),icon:"plus",isEnabled:()=>(0,$.l)(Ve)}]}u(re,"getAllModals");function _e(Ve){return re(Ve).filter(Ct=>Ct.isEnabled())}u(_e,"getAllEnabledModals");var G=e(7940058138),ge=e(7520119303),oe=e(8414867410),me=e(9289081806),ue=e(1407713935),ae=e(5274604535),he=e(2298581483),ce=e(7969244833),ee=e(6007206761),J=e(6495946979),X=e(4001737397),F=e(1197508738),L=e(2188787324),K=e(5455782105),B=e(8170643398),Q=e(4562579337),q=e(5096647761),le=e(3792998666),Te=e(3479134063),Ie=e(6536982570),De=e(9889493721),pe=e(6120301420),fe=e(9001455011),Z=e(340763958),se=e(3212336858),Ae=e(2801540778),Ce=e(2023092677),Le=e(4827886670),Ue=e(9931116838),Pe=e(3559837422),He=e(3307632080),Qe=e(4919351998),lt=e(411655882),qe=e(2229186),ct=e(6244014364),tt=e(5751973043),it=e(82287009),Ge=e(9190452268),We=e(5770715593),xe=e(6617433054),ze=e(352142497);const mt=new V.Ay("ia4"),pt={get[ze.D.BrowseCanvases](){return mt.t("All canvases",{fallbackHash:"50a279de829f2dc398ac2ac7c9367508ea4b5df5",fallbackHashNs:"channel_sidebar"})},get[ze.D.BrowseChannels](){return mt.t("All channels",{fallbackHash:"50a279de829f2dc398ac2ac7c9367508ea4b5df5",fallbackHashNs:"channel_sidebar"})},get[ze.D.BrowsePeople](){return mt.t("All people",{fallbackHash:"7aeeec03f7c076af275e9b7c0e187a40bd193acc",fallbackHashNs:"enterprise_dashboard"})},get[ze.D.BrowseFiles](){return mt.t("All files",{fallbackHash:"f7857dcc71d3ce6a9095d1fbca5acb8cc9319005",fallbackHashNs:"search"})},get[ze.D.ExternalWorkspaceAllowedOrgPane](){return mt.t("Organization",{fallbackHash:"519255ae1f74ffc5ddd29979295c7572f048ad81",fallbackHashNs:"member_profile"})},get[ze.D.RecentFiles](){return mt.t("Recently Viewed Files",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[ze.D.FilesSharedWithYou](){return mt.t("Files shared with you",{fallbackHash:"72f2b0dfa1e68a34813db5999ff8098f60ef699d",fallbackHashNs:"search"})},get[ze.D.FilesCreatedByYou](){return mt.t("Files created by you",{fallbackHash:"8c292710d9aa5d3b598cf24b70f804cb0341e24e",fallbackHashNs:"search"})},get[ze.D.RecentCanvases](){return mt.t("Recently Viewed Canvases",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[ze.D.CanvasesSharedWithYou](){return mt.t("Canvases shared with you",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[ze.D.CanvasesCreatedByYou](){return mt.t("Canvases created by you",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},[ze.D.DeletedCanvases]:void 0,[ze.D.DmsList]:void 0,[ze.D.LaterList]:void 0,[ze.D.Channel]:void 0,[ze.D.AppSpace]:void 0,[ze.D.Quip]:void 0,[ze.D.BrowseApps]:void 0,get[ze.D.ExternalOrganizations](){return mt.t("External organizations",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[ze.D.ExternalOrganization](){return mt.t("External organization",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[ze.D.ExternalPeople](){return mt.t("External people",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[ze.D.SlackConnectChannels](){return mt.t("Slack Connect channels",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[ze.D.SlackConnectInvitations](){return mt.t("Slack Connect invitations",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},[ze.D.BrowseExternalWorkspace]:void 0,[ze.D.PostEvent]:void 0,[ze.D.BrowseShortcuts]:void 0,[ze.D.BrowseWorkflowsManagedByYou]:void 0,[ze.D.BrowseYourWorkflowTemplates]:void 0,[ze.D.BrowseWorkflowTemplates]:void 0,[ze.D.BrowseUserGroups]:void 0,[ze.D.OrgDirectory]:void 0,get[ze.D.RecentPlatform](){return mt.t("Recently used workflows",{fallbackHash:"f97d1ab1f281e78d5e61024eee5be84679fd60ac",fallbackHashNs:"search"})},[ze.D.SlackConnect]:void 0,[ze.D.Page]:void 0,[ze.D.Threads]:void 0,[ze.D.Thread]:void 0,[ze.D.Profile]:void 0,[ze.D.FileDetails]:void 0,[ze.D.Help]:void 0,[ze.D.UserGroup]:void 0,[ze.D.KeyboardShortcuts]:void 0,[ze.D.WhatsNew]:void 0,[ze.D.Feedback]:void 0,[ze.D.List]:void 0,[ze.D.ListRecord]:void 0,[ze.D.ListRecordDetails]:void 0,[ze.D.ListRecordThread]:void 0,[ze.D.ListRecordHistory]:void 0,[ze.D.ComposeList]:void 0,[ze.D.Compose]:void 0,[ze.D.QuipCommentThread]:void 0,[ze.D.QuipCommentStream]:void 0,[ze.D.QuipActivityHistory]:void 0,[ze.D.QuipAutomationsOverview]:void 0,[ze.D.Canvas]:void 0,[ze.D.ChannelCanvas]:void 0,[ze.D.CanvasBrowser]:void 0,[ze.D.HuddlePageCanvas]:void 0,[ze.D.PaidBenefits]:void 0,[ze.D.Setup]:void 0,[ze.D.SearchEmpty]:void 0,[ze.D.AboutWorkspace]:void 0,[ze.D.Unknown]:void 0,[ze.D.MorePeopleSidebar]:void 0,[ze.D.MoreCanvasesSidebar]:void 0,[ze.D.AppPopout]:void 0,[ze.D.MorePlatformSidebar]:void 0,[ze.D.Search]:void 0,[ze.D.ChannelList]:void 0,[ze.D.BrowseLists]:void 0,[ze.D.MyItems]:void 0,[ze.D.DeletedLists]:void 0,[ze.D.Tasks]:void 0,[ze.D.AssignedTasks]:void 0,[ze.D.Reminders]:void 0,[ze.D.Saved]:void 0,[ze.D.BrowseList]:void 0,[ze.D.ActivityList]:void 0,[ze.D.MoreFilesSidebar]:void 0,[ze.D.MoreListsSidebar]:void 0,[ze.D.MoreTodosSidebar]:void 0,[ze.D.FilesPrototypeSidebar]:void 0,[ze.D.MoreChannelsSidebar]:void 0,[ze.D.MoreHuddlesSidebar]:void 0,[ze.D.MoreExternalConnectionsSidebar]:void 0,[ze.D.HelpBrowser]:void 0,[ze.D.Huddle]:void 0,[ze.D.BrowseHuddles]:void 0,[ze.D.KeyboardShortcutsBrowser]:void 0,[ze.D.WhatsNewBrowser]:void 0,[ze.D.FeedbackBrowser]:void 0,[ze.D.ExternalWorkspaceSidebar]:void 0,[ze.D.ExternalWorkspacePeopleBrowser]:void 0,[ze.D.ExternalWorkspaceChannelBrowser]:void 0,[ze.D.AiSummaryDetails]:void 0,[ze.D.DailyDigest]:void 0,[ze.D.MoreAiSummarySidebar]:void 0,[ze.D.SearchSummary]:void 0,[ze.D.AssistantList]:void 0,[ze.D.BrowseFilesPrototype]:void 0,[ze.D.Today]:void 0,[ze.D.Record]:void 0,[ze.D.RecordChannelCreate]:void 0,[ze.D.RecordChannelRelatedList]:void 0,[ze.D.SalesAdministration]:void 0,[ze.D.SalesBulkGrid]:void 0,[ze.D.SalesHome]:void 0,[ze.D.SalesListViewBrowser]:void 0,[ze.D.SalesLogActivity]:void 0,[ze.D.SalesNotifications]:void 0,[ze.D.SalesSidebar]:void 0,[ze.D.AssistantThread]:void 0,[ze.D.Solutions]:void 0,[ze.D.ChannelFiles]:void 0,[ze.D.SlackKitPlayground]:void 0,[ze.D.AiApp]:void 0,[ze.D.BookmarksFolder]:void 0,[ze.D.ActionItems]:void 0,[ze.D.Inbox]:void 0,[ze.D.HuddleTranscriptDetails]:void 0,get[ze.D.WorkflowDetails](){return mt.t("Workflow details",{fallbackHash:"badd385121c5861ac693b59ad8c160fdf7994344",fallbackHashNs:"channel_details"})},get[ze.D.WorkflowEditor](){return mt.t("Workflow Editor",{fallbackHash:"792c81a4cfdcb5b45d688cb03c2fd2e816f86d44",fallbackHashNs:"workflow_builder"})},[ze.D.BBMMain]:void 0,[ze.D.BBMWorkspaceSwitcher]:void 0,[ze.D.SearchInChannel]:void 0,[ze.D.BBMMore]:void 0},bt=u(Ve=>Ve in pt?pt[Ve]:"","getDisplayNameForViewType");var gt=e(4240442510),ht=e(6910192640),Zt=e(505908973),rn=e(4096483543),zt=e(5600190572),In=e(5276466411),cn=e(7948868735),Jt=e(6533394955);class dn extends cn.F{fetchData(){return(0,Jt.dispatchForTeamId)(this.teamId,(0,In.z)({reason:"fetch-search-autocomplete-top-engaged-files"})).then(Ct=>Ct.files)}constructor(Ct,Ke){super(),this.teamId=Ct,this.timeoutMs=Ke}}u(dn,"AutocompleteTopEngagedFilesCache");const sn={};function Xt(Ve){let{teamId:Ct,timeoutMs:Ke}=Ve;const nt=Ct||"_default";return sn[nt]||(sn[nt]=new dn(Ct,Ke)),sn[nt]}u(Xt,"getAutocompleteTopEngagedFilesCache");var xt=e(8195161e3),en=e(1948374838),un=e(1917953477),yn=e(181849556),ut=e(2825917518),Ot=e(1072784641),kt=e(1399977320),be=e(8956261571),Kt=e(4342685672),Vt=e(1031947056),on=e(8847766420),pn=e(4119164726),et=e(6451390137),At=e(2854654447),Rt=e(5795074931),Ft=e(9107158149),$t=e(7688940281),vn=e(207659888),Rn=e(2235302340),hn=e(9101533895),gn=e(6728717861),Cn=e(3829348308),fn=e(4761125736),Oe=e(937317117),ke=e(761034736),je=e(7478895768),Be=e(4224126550),st=e(8276911661),St=e(5688490863),Yt=e(8149648525),tn=e(2047021170),at=e(8515087389),Et=e(136400070),_t=e(4135820365),Bt=e(6892115804),Qt=e(1835177371),Fe=e(6508028729);const Xe={entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeIms:!1,includeArchived:!0,onlyIfMember:!1,onlyVisibleMpims:!1,onlyVisibleIms:!1,includeExternallyShared:!0,includeOnlyExternallyShared:!0,allowedInternalTeams:void 0,shouldAllowedInternalTeamsMatchAny:void 0,onlyExternallyShared:!1,onlyFromTeamId:void 0,includeRecordChannels:!0},members:{includeSelf:!1,includeSlackbot:!0,includeBots:!0,includeWorkflows:!1,includeExternal:!0,includeAllExternal:!1,onlyLocalTeam:!1,includeGuests:!0,includeProfileOnlyUsers:!1,onlyExternalFromTeams:void 0,onlyFromExternalTeamId:void 0},userGroups:{includeDeleted:!1,includeFromAnotherTeam:!1},channelSections:{includeTypes:{[vn.VZ.Standard]:!0,[vn.VH]:!0}}},limit:24,sort:{preferExactMatch:!0,frecency:!0,preferChannelsUserBelongsTo:!0,preferMpimsWithActiveMembers:!0,model:Kt.KV},fuzzyLimit:3,fuzzyJumpLimit:20,fuzzyCJK:!0,returnMetadata:!1};function Me(Ve){let{query:Ct,options:Ke}=Ve;var nt,Tt,Lt;const Pt=(Lt=Ke==null?void 0:Ke.entities)!==null&&Lt!==void 0?Lt:{},Ht=Pt==null?void 0:Pt.members;let nn=!1;return Ht&&Ht!==!0&&(nn=!!(Ht!=null&&Ht.matchEmailField)),{source:Ke==null||(nt=Ke.sort)===null||nt===void 0?void 0:nt.source,tiered:Ke==null?void 0:Ke.tiered,is_searcher_sessions:!1,entities:Object.keys(Pt).filter(An=>!!Pt[An]).sort().toString(),query_length:Ct.length,is_member_email_search:(Ke==null||(Tt=Ke.sort)===null||Tt===void 0?void 0:Tt.source)==="use-team-and-people-search"&&nn}}u(Me,"getTraceTags");function U(Ve,Ct){var Ke,nt;const{excludeElmChannels:Tt,includePublic:Lt,includePrivate:Pt,includeFromAnotherTeam:Ht,allowedInternalTeams:nn,shouldAllowedInternalTeamsMatchAny:An}=(nt=(Ke=Ct.entities)===null||Ke===void 0?void 0:Ke.channels)!==null&&nt!==void 0?nt:{};let _n=[];return Lt&&(_n=[..._n,...(0,hn.Wr)(Ve,{includeFromAnotherTeam:!!Ht})]),Pt&&(_n=[..._n,...(0,hn.sE)(Ve,{includeFromAnotherTeam:!!Ht})]),Tt&&(_n=_n.filter(Gt=>!(0,He.A)(Ve,Gt))),nn&&(_n=_n.filter(Gt=>{if((0,X.O)(Gt))return!!An;const En=(0,he.R)(Ve,Gt),Wn=An?En==null?void 0:En.some(Sn=>nn.includes(Sn)):En==null?void 0:En.every(Sn=>nn.includes(Sn));return(En==null?void 0:En.length)&&Wn})),_n}u(U,"getLocalChannels");function H(Ve,Ct){var Ke;const nt=(0,on.ZT)(Ve),Tt=Ct==null||(Ke=Ct.entities)===null||Ke===void 0?void 0:Ke.teams;var Lt;const Pt=Object.values((Lt=Fe._===null||Fe._===void 0?void 0:(0,Fe._)())!==null&&Lt!==void 0?Lt:{}).filter(Gt=>Gt.id!==nt);if(Tt!=null&&Tt.onlyNavigable){const Gt=(0,_t._)(Ve);return Gt.length?[...Pt,...Gt]:Pt}var Ht;const nn=(Ht=(0,z.iK)(Ve))!==null&&Ht!==void 0?Ht:{},An=Pt.map(Gt=>Gt.id),_n=Object.values(nn).filter(Gt=>!An.includes(Gt.id));return[...Pt,..._n].filter(Ln(Ve,Tt))}u(H,"getLocalTeams");const te=(0,Vt.Ay)("Get channels from flannel by query",(Ve,Ct,Ke)=>{let{query:nt,options:Tt}=Ke;var Lt,Pt,Ht,nn;const{includeFromAnotherTeam:An,includeExternallyShared:_n,includeOnlyExternallyShared:Gt,onlyExternallyShared:En,onlyFromTeamId:Wn,onlyFromExternalWorkspaceId:Sn,allowedInternalTeams:wn,shouldAllowedInternalTeamsMatchAny:Kn,includeRecordChannels:_s}=(nn=(Lt=Tt.entities)===null||Lt===void 0?void 0:Lt.channels)!==null&&nn!==void 0?nn:{},Wt=((Pt=Tt.entities)===null||Pt===void 0||(Ht=Pt.channels)===null||Ht===void 0?void 0:Ht.remoteLimit)||Tt.limit,Xn=Ct(),Hn=[],ts=" AND ",Jn={query:nt,count:Wt||Xe.limit||24,fuzz:(0,fn._Z)(Xn,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"?0:1,uax29_tokenizer:(0,fn._Z)(Xn,"searcher_flannel_cjk")==="cjk"};return An&&Hn.push("xws"),!(0,t.A)(_n)&&!_n&&Hn.push("NOT shared"),!(0,t.A)(Gt)&&!Gt&&Hn.push("NOT external"),!(0,t.A)(En)&&En&&Hn.push("shared"),Hn.length&&(Jn.filter=Hn.join(ts)),Wn&&(Jn.external_team=Wn),Sn&&(Jn.external_team=Sn),wn&&(Jn.allowed_internal_teams=wn),Kn&&(Jn.should_allowed_internal_teams_match_any=Kn),_s&&!(0,g.Ht)(Xn)&&(Jn.include_record_channels=!0),Ve((0,A.hq)({query:Jn})).timeout(2e3).catch(n.A)});te.meta={name:"createThunk",key:"createThunkgetRemoteChannels",description:"Get channels from flannel by query"};const de=(0,Vt.Ay)("Get emoji from flannel by query",(Ve,Ct,Ke)=>{let{query:nt,options:Tt}=Ke;var Lt,Pt;const Ht=((Lt=Tt.entities)===null||Lt===void 0||(Pt=Lt.emoji)===null||Pt===void 0?void 0:Pt.remoteLimit)||Tt.limit;return Ve((0,D.l8)({query:{query:nt,count:Ht}})).timeout(2e3).catch(n.A)});de.meta={name:"createThunk",key:"createThunkgetRemoteEmoji",description:"Get emoji from flannel by query"};const Re=(0,Vt.Ay)("Get user groups from the search.team endpoint by query",(Ve,Ct,Ke)=>{let{query:nt,options:Tt}=Ke;var Lt,Pt,Ht,nn,An,_n;const Gt=((Lt=Tt.entities)===null||Lt===void 0||(Pt=Lt.userGroups)===null||Pt===void 0?void 0:Pt.remoteLimit)||Tt.limit;return Ve((0,S.cn)({query:{query:nt,count:Gt,org_wide:(Ht=Tt.entities)===null||Ht===void 0||(nn=Ht.userGroups)===null||nn===void 0?void 0:nn.includeFromAnotherTeam,channel:(An=Tt.entities)===null||An===void 0||(_n=An.userGroups)===null||_n===void 0?void 0:_n.channel}})).timeout(2e3).catch(n.A)});Re.meta={name:"createThunk",key:"createThunkgetRemoteUserGroups",description:"Get user groups from the search.team endpoint by query"};const Ye=(0,Vt.Ay)("Get remote triggers with query",(Ve,Ct,Ke)=>{let{query:nt,includeAutomatedTriggers:Tt,strictExposureRules:Lt}=Ke;return Ve((0,je.tP)({query:nt,includeAutomatedTriggers:Tt,strictExposureRules:Lt}))});Ye.meta={name:"createThunk",key:"createThunkgetRemoteWorkflowTriggers",description:"Get remote triggers with query"};const we=(0,Vt.Ay)("Get bulk user groups from the userGroups.searchBulk endpoint by query",(Ve,Ct,Ke)=>{let{queries:nt,options:Tt}=Ke;var Lt,Pt,Ht,nn,An,_n;const Gt=((Lt=Tt.entities)===null||Lt===void 0||(Pt=Lt.userGroups)===null||Pt===void 0?void 0:Pt.remoteLimit)||Tt.limit;return Ve((0,S.MZ)({query:{queries:nt,count:Gt,org_wide:(Ht=Tt.entities)===null||Ht===void 0||(nn=Ht.userGroups)===null||nn===void 0?void 0:nn.includeFromAnotherTeam,channel:(An=Tt.entities)===null||An===void 0||(_n=An.userGroups)===null||_n===void 0?void 0:_n.channel}})).timeout(2e3).catch(n.A)});we.meta={name:"createThunk",key:"createThunkgetBulkRemoteUserGroups",description:"Get bulk user groups from the userGroups.searchBulk endpoint by query"};function vt(Ve,Ct){const{includeArchived:Ke,includeRequired:nt,onlyIfMember:Tt,canPost:Lt,includeExternallyShared:Pt,includeOnlyExternallyShared:Ht,onlyExternallyShared:nn,onlyFromTeamId:An,onlyFromExternalWorkspaceId:_n}=Ct??{};return Gt=>{let En=!0;if(Ke||(En=En&&!(0,ee.F)(Gt)),!(0,t.A)(nt)&&!nt&&(En=En&&!(0,ue.gx)(Gt)),nn&&(En=En&&(0,Z.ju)(Gt)),(!Pt||!Ht)&&(En=En&&!(0,Z.ju)(Gt)),Tt&&(En=En&&(0,J.b)(Gt)),Lt&&(En=En&&(0,Le.E)(Ve,Gt.id)),An){var Wn;En=En&&(((Wn=(0,ae.A)(Ve,Gt))===null||Wn===void 0?void 0:Wn.includes(An))||!1)}return _n&&(En=En&&(0,me.ne)(Ve,Gt)===_n),En}}u(vt,"getChannelFilterFunction");const ot=(0,Vt.Ay)("Get members from flannel by query",(Ve,Ct,Ke)=>{let{query:nt,options:Tt}=Ke;var Lt,Pt,Ht;const{includeDeleted:nn,matchEmailField:An,onlyExternal:_n,includeExternal:Gt,includeAllExternal:En,includeBots:Wn,onlyFromExternalTeamId:Sn,onlyFromExternalWorkspaceId:wn}=(Ht=Tt.entities.members)!==null&&Ht!==void 0?Ht:{},Kn=((Lt=Tt.entities)===null||Lt===void 0||(Pt=Lt.members)===null||Pt===void 0?void 0:Pt.remoteLimit)||Tt.limit,_s=Ct(),Wt=[],Xn=(0,x.r7)((0,z.H7)(_s))||!!(0,on.jV)(_s),Hn=Xn?["NOT org"]:["NOT team"],ts=Xn?["org"]:["team"],Jn=!nn,Yn=" AND ",Vn={query:nt,count:Kn||Xe.limit||24,fuzz:(0,fn._Z)(_s,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"||Tt.fuzzyLimit===0?0:1,uax29_tokenizer:(0,fn._Z)(_s,"searcher_flannel_cjk")==="cjk"};return Jn&&Wt.push("NOT deactivated"),(_n||Sn)&&Wt.push(...Hn),(Sn||wn)&&(Vn.external_team=Sn||wn),Wn||Wt.push("NOT bots"),Gt||Wt.push(...ts),Gt&&En&&(Vn.include_all_external=!0),An&&(Vn.search_email=!0),Wt.length&&(Vn.filter=Wt.join(Yn)),Ve((0,C.Wr)({query:Vn})).timeout(2e3).catch(n.A)});ot.meta={name:"createThunk",key:"createThunkgetRemoteMembers",description:"Get members from flannel by query"};const Mt=(0,Vt.Ay)("Get members from flannel by query",(Ve,Ct,Ke)=>{let{queries:nt,options:Tt}=Ke;var Lt,Pt,Ht,nn;const{includeDeleted:An,matchEmailField:_n}=(nn=(Lt=Tt.entities)===null||Lt===void 0?void 0:Lt.members)!==null&&nn!==void 0?nn:{},Gt=((Pt=Tt.entities)===null||Pt===void 0||(Ht=Pt.members)===null||Ht===void 0?void 0:Ht.remoteLimit)||Tt.limit||24,En=Ct(),Wn=[],Sn=!An,wn=" AND ",Kn={queries:nt,count:Gt,fuzz:(0,fn._Z)(En,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"?0:1,uax29_tokenizer:(0,fn._Z)(En,"searcher_flannel_cjk")==="cjk"};return Sn&&Wn.push("NOT deactivated"),_n&&(Kn.match_email=!0),Wn.length&&(Kn.filter=Wn.join(wn)),Ve((0,C.W9)({query:Kn})).timeout(2e3).catch(n.A)});Mt.meta={name:"createThunk",key:"createThunkgetBulkRemoteMembers",description:"Get members from flannel by query"};function jt(Ve,Ct){const{includeSelf:Ke,includeSlackbot:nt,includeBots:Tt,includeWorkflows:Lt,includeDeleted:Pt,includeExternal:Ht,includeGuests:nn,includeProfileOnlyUsers:An,onlyLocalTeam:_n,onlyExternal:Gt,onlyExternalFromTeams:En,onlyFromExternalTeamId:Wn}=Ct??{};return Sn=>{let wn=!0;if(Gt&&(wn=wn&&(0,q.g)(Sn)&&!(0,Q.A)(Sn)),Ke||(wn=wn&&!(0,B.fy)(Sn)),nt||(wn=wn&&!(0,Te.U)(Sn)),En)return(0,s.A)(En,(0,Ie.dQ)(Sn));if(Wn)return Ke&&(0,B.fy)(Sn)?!0:(0,q.g)(Sn)&&(0,Ie.dQ)(Sn)===Wn;if(Tt||(wn=wn&&!(0,Q.A)(Sn)&&!(0,Te.U)(Sn)),Lt||(wn=wn&&!(0,B.v3)(Sn)),Pt||(wn=wn&&!(0,B.oy)(Sn)),Ht||(wn=wn&&!(0,q.g)(Sn)),nn||(wn=wn&&!(0,le.P)(Sn)),An||(wn=wn&&!(0,B.hh)(Sn)),An&&(0,B.hh)(Sn)&&(wn=wn&&!(0,B.oy)(Sn)),_n){const Kn=(0,on.ZT)(Ve);(0,B.hh)(Sn)&&An||(wn=wn&&(0,Ie.nO)(Sn,Kn))}return wn}}u(jt,"getMemberFilterFunction");function Ln(Ve,Ct){var Ke;const{includeCurrentTeam:nt,includeExternal:Tt,onlyExternal:Lt,onlyCurrentOrg:Pt,onlyAvailableToCurrentOrg:Ht,onlyMemberOnCurrentOrg:nn}=Ct??{},An=(0,on.Kc)(Ve),_n=(0,Rt.WR)(Ve),Gt=(0,st.nv)(Ve,_n),En=(Gt==null||(Ke=Gt.enterprise_user)===null||Ke===void 0?void 0:Ke.teams)||[];return Wn=>!(!nt&&Wn.id===(0,on.ZT)(Ve)||Lt&&!(0,Ae.z)(Ve,Wn)||!Tt&&!Lt&&!Ht&&(0,Ae.z)(Ve,Wn)||Pt===!0&&Wn.id!==An&&(0,x.Ss)(Wn)!==An||Ht===!0&&Wn.id!==An&&(0,x.Ss)(Wn)!==An&&!(0,Ae.z)(Ve,Wn)||nn===!0&&!En.includes(Wn.id))}u(Ln,"getTeamFilterFunction");function xn(Ve,Ct){const{onlyVisibleMpims:Ke,onlyExternallyShared:nt,includeExternallyShared:Tt,onlyFromTeamId:Lt}=Ct??{};return Pt=>{let Ht=!0;if(Ke&&(Ht=Ht&&(0,me.w6)(Ve,Pt)),nt&&(Ht=Ht&&(0,Z.ju)(Pt)),Tt===!1&&(Ht=Ht&&!(0,Z.ju)(Pt)),Lt){var nn;Ht=Ht&&(((nn=(0,ae.A)(Ve,Pt))===null||nn===void 0?void 0:nn.includes(Lt))||!1)}return Ht}}u(xn,"getMpimFilterFunction");function bn(Ve,Ct){const{onlyExternallyShared:Ke,includeExternallyShared:nt,onlyFromTeamId:Tt,onlyVisibleIms:Lt}=Ct??{};return Pt=>{let Ht=!0;if(Lt&&(Ht=Ht&&(0,me.PE)(Ve,Pt)),Ke&&(Ht=Ht&&(0,Z.ju)(Pt)),nt||(Ht=Ht&&!(0,Z.ju)(Pt)),Tt){var nn;Ht=Ht&&(((nn=(0,ae.A)(Ve,Pt))===null||nn===void 0?void 0:nn.includes(Tt))||!1)}return Ht}}u(bn,"getImFilterFunction");function On(Ve,Ct){const{includeDeleted:Ke,includeFromAnotherTeam:nt,onlyFromExternalWorkspaceId:Tt}=Ct??{};return Lt=>{let Pt=!0;return nt||(Pt=Pt&&!(0,Qt.dk)(Ve,Lt.id)),Ke||(Pt=Pt&&(0,Ce.V1)(Lt)),Tt&&(Pt=Pt&&(0,Ce.$Q)(Lt)===Tt),Pt}}u(On,"getUserGroupFilterFunction");function Un(Ve,Ct){const{onlyCanvases:Ke=!1,onlyLists:nt=!1,onlyWriteable:Tt=!1,onlyChannelCanvases:Lt=!1,onlyTemplateCanvases:Pt=!1,includeChannelCanvases:Ht=!1,excludeTemplateCanvases:nn=!1}=Ct??{},An=(0,pe.hq)(Ve),_n=(0,on.Kc)(Ve),Gt=(0,z._J)(Ve,_n),En=Gt&&!(0,x.qR)(Gt);return Wn=>{let Sn=!0;return Ke&&(Sn=Sn&&((0,L.wL)(Wn)&&!En||An&&Ht&&(0,L.aD)(Wn)),(0,L.dE)(Wn)&&nn)?!1:(An&&(Lt||En)&&(Sn=Sn&&!(0,L.wL)(Wn)&&(0,L.aD)(Wn)),Pt&&(Sn=Sn&&(0,L.dE)(Wn)),nt&&(Sn=Sn&&(0,L.l7)(Wn)),Tt&&(Sn=Sn&&(0,L.mW)(Wn)),Sn)}}u(Un,"getFileFilterFunction");const Dn=(0,Vt.Ay)("Get teams via API by query",(Ve,Ct,Ke)=>{let{query:nt,options:Tt}=Ke;var Lt,Pt;const{onlyExternal:Ht,includeExternal:nn,remoteLimit:An}=(Pt=(Lt=Tt.entities)===null||Lt===void 0?void 0:Lt.teams)!==null&&Pt!==void 0?Pt:{},_n=Ct();if((0,Pe.DM)(_n))return m.S.resolve();if(Ht||nn)return Ve((0,E.Is)(nt)).timeout(2e3).catch(n.A);const Gt=An||Tt.limit||24;return Ve((0,Bt.vB)({query:nt,count:Gt})).timeout(2e3).catch(n.A)});Dn.meta={name:"createThunk",key:"createThunkgetRemoteTeams",description:"Get teams via API by query"};const zn=(0,Vt.Ay)("Get files via API by query",(Ve,Ct,Ke)=>{let{query:nt,options:Tt}=Ke;var Lt,Pt;const{onlyCanvases:Ht,onlyChannelCanvases:nn,onlyTemplateCanvases:An,onlyLists:_n,excludeTemplateCanvases:Gt,bypassCache:En}=(Pt=(Lt=Tt.entities)===null||Lt===void 0?void 0:Lt.files)!==null&&Pt!==void 0?Pt:{};let Wn=nt;return An?Wn=`type:canvas_template ${nt}`:Ht||nn?Wn=`${Gt?"type:quip -type:canvas_template":"type:quip"} ${nt}`:_n&&(Wn=`type:list ${nt}`),Ve((0,O.yF)({query:Wn,includeShares:!0,bypassCache:En})).timeout(2e3).catch(n.A)});zn.meta={name:"createThunk",key:"createThunkgetRemoteFiles",description:"Get files via API by query"};function es(Ve){const Ct=(0,oe.A4)(),Ke={},nt=[];v.cw.forEach(Lt=>{const Pt=(0,gt.A)({tab:Lt});(0,ht.A)(Ve,Lt)&&Pt&&!(Pt in Ke)&&(nt.push({id:Lt,name:Pt,is_view:!0,is_tab_view:!0}),Ke[Pt]=Pt)}),v.g5.forEach(Lt=>{const Pt=bt(Lt);(0,Zt.A)(Ve,Lt)&&Pt&&!(Pt in Ke)&&(nt.push({id:Lt,name:Pt,is_view:!0,is_mva_view:!0}),Ke[Pt]=Pt)}),Ct.forEach(Lt=>{if(!(0,oe.cH)(Ve,Lt)&&!(Lt.id==="Pslack-connect"&&!(0,I.A)(Ve))&&Lt.id!=="Pactivity"&&!(Lt.id===G.c.Apps&&!(0,fe.t)(Ve))&&!(Lt.id===G.c.Shortcuts&&!(0,De.Bf)(Ve))&&!(Lt.id===G.c.BrowseWorkflowTemplates&&!(0,De.fh)(Ve))&&!(Lt.id===G.c.BrowseWorkflowsManagedByYou&&!(0,De.EH)(Ve))&&!(Lt.id===G.c.BrowseYourWorkflowTemplates&&!(0,De.M7)(Ve))&&((0,oe.l1)(Ve,Lt)||Lt.id==="Punreads"&&(0,tn.ty)(Ve,"enable_unread_view"))){const Pt=(0,ge.yb)(Ve,Lt);Pt&&!(Pt in Ke)&&(nt.push({...Lt,name:Pt,is_view:!0,is_page_view:!0}),Ke[Pt]=Pt)}});const Tt=(0,zt.lI)("Vall_threads");return Tt&&(0,tn.ty)(Ve,"enable_threads_view")&&!(0,M.R)(Ve)&&nt.push(Tt),nt}u(es,"getLocalViews");function Es(Ve){return _e(Ve)}u(Es,"getLocalModals");function bs(Ve){return(0,Qe.xf)(Ve)?[{id:Ve,score:0,item:{id:Ve,value:Ve,isEmail:!0}}]:[]}u(bs,"getLocalEmails");function Rs(Ve,Ct){const Ke=!Ct;let nt=tt.Ml;if(Ct){const Tt=(0,hn.OL)(Ve,Ct);nt=Tt&&(0,ce.f)(Ve,Tt)||tt.Ml}return(0,et.PL)(Ve).flatMap(Tt=>{if(Tt.teams&&(nt.length||Ke)&&!Tt.isWorkspaceAgnostic){const Lt=Ke?Tt.teams:Tt.teams.filter(Pt=>nt.includes(Pt));if(Lt.length>1)return Lt.map(Pt=>{const Ht=(0,z._J)(Ve,Pt),nn=(0,x.F1)(Ht);return{...Tt,name:`${Tt.name} ${nn}`,applicableTeamId:Pt}})}return[Tt]})}u(Rs,"getAppActionsWithEntriesPerApplicableTeam");function vs(Ve,Ct,Ke){const nt=(0,hn.OL)(Ve,Ct),Tt=nt?(0,ce.f)(Ve,nt)||[]:[];return(0,it.A_)(Ve,Ct,!!Ke,!0).flatMap(Lt=>{if(Lt.teams&&Tt.length&&Lt.appName!=="Slack"&&!Lt.isWorkspaceAgnostic){const Pt=Lt.teams.filter(Ht=>Tt.includes(Ht));if(Pt.length>1)return Pt.map(Ht=>({...Lt,id:(0,se.Bs)(Lt),isSlashCommand:!0,applicableTeamId:Ht}))}return[{...Lt,id:(0,se.Bs)(Lt),isSlashCommand:!0}]})}u(vs,"getSlashCommandsListWithEntriesPerApplicableTeam");function us(Ve,Ct){let Ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";ls(Ct);const nt={},{members:Tt,channels:Lt,teams:Pt,userGroups:Ht,appActions:nn,views:An,broadcastKeywords:_n,emoji:Gt,files:En,topEngagedFiles:Wn,lists:Sn,channelSections:wn,emails:Kn,modals:_s,shortcuts:Wt,workflowTriggers:Xn,helpArticles:Hn,salesforceRecords:ts,salesListViews:Jn}=Ct.entities;if(Lt&&(Lt.includePublic||Lt.includePrivate)&&(nt.channels=U(Ve,Ct)),Lt&&Lt.includeMpims&&(nt.mpims=(0,hn.FS)(Ve)),Lt&&Lt.includeIms&&(nt.ims=(0,hn._B)(Ve)),Tt&&(nt.members=Tt.onlyFromExternalWorkspaceId?tt.Ml:(0,st.I_)(Ve).filter(ss=>(0,Ft.zP)(Ve,ss.id))),Pt&&(nt.teams=H(Ve,Ct)),Ht&&(nt.userGroups=(0,Qt.jJ)(Ve)),nn&&(nt.appActions=(0,y.B)(Ve)?(0,et.PL)(Ve):Rs(Ve,nn.channel)),En&&(nt.files=(0,Oe.Gn)(Ve)),(0,fn._Z)(Ve,"top_engaged_files_autocomplete")==="on"&&Wn){const ss=(0,on.ZT)(Ve),ns=36e5;if(ss){const Ss=Xt({teamId:ss,timeoutMs:ns}).getStaleWhileRevalidate([]);nt.topEngagedFiles=Ss}}if(Sn&&(nt.lists=(0,Be.C0)(Ve)),An&&(nt.views=es(Ve)),_s&&(nt.modals=Es(Ve)),_n){var Vn;if(_n.includeAll)nt.broadcastKeywords=(0,lt.A)();else if(!(_n==null||(Vn=_n.currentChannel)===null||Vn===void 0)&&Vn.id){var qn;nt.broadcastKeywords=(0,qe.A)(Ve,_n==null||(qn=_n.currentChannel)===null||qn===void 0?void 0:qn.id)}else nt.broadcastKeywords=[]}if(Gt&&(nt.emoji=(0,Cn.Gt)(Ve)),wn&&(nt.channelSections=(0,a.A)((0,Rn.jV)(Ve))),(Wt!=null&&Wt.slashCommands||Wt!=null&&Wt.fakeGlobalActions)&&!(Wt!=null&&Wt.isAnnounceOnly)&&(nt.slashCommands=(0,it.A_)(Ve,Wt.channel,!!Wt.threadTs,!0).map(ss=>({...ss,id:(0,se.Bs)(ss),isSlashCommand:!0}))),Wt!=null&&Wt.slackGlobalActions&&(nt.slackGlobalActions=(0,it.Yk)(Ve,Wt.channel,Wt.threadTs)),Wt!=null&&Wt.quipShortcutCommands&&(nt.quipShortcutCommands=(0,pn.Aw)(Ve,!!Ke)),Wt!=null&&Wt.channelActions&&(nt.channelActions=(0,$t.fo)(Ve,Wt.channel)),Wt!=null&&Wt.fakeGlobalActions&&(nt.fakeGlobalActions=(0,it.JL)(Ve,Wt.channel,Wt.threadTs)),Wt!=null&&Wt.callActions&&(nt.callActions=(0,it.Uw)(Ve,Wt.channel,Wt.threadTs,Wt.isAnnounceOnly)),Xn){const ss=(0,it.NJ)(Ve);Xn.includeAutomated?nt.workflowTriggers=ss:nt.workflowTriggers=ss.filter(ns=>ns.type===b.M.Shortcut)}Kn&&(nt.emails=bs(Ke));const gs=(0,We.dL)(Ve);if(Hn&&gs&&(nt.helpArticles=(0,ke.Fb)(Ve,"searcher/fetch_all_articles")),ts&&(0,g.Ht)(Ve)&&(nt.salesforceRecords=Object.values((0,at.Ie)(Ve))),Jn){const{objectType:ss,salesforceOrgId:ns}=Jn,Ss=(0,St.Up)(Ve),Ls=ss?(0,St.Zs)(Ve,ns,ss):(0,c.A)(Object.values((0,St.m3)(Ve,ns)));nt.salesListViews=Ls.map(As=>Ss[As])}return ys(),nt}u(us,"fetchLocal");const w=(0,Vt.Ay)("Search for local entities within Slack based on options",(Ve,Ct,Ke)=>{let{query:nt,options:Tt,autoTraceId:Lt,parentSpanId:Pt}=Ke;var Ht;const nn=Ct(),An=(Ht=N.LI.get({label:N.gC.Searcher,id:Lt}))===null||Ht===void 0?void 0:Ht.createChildSpan({name:"searcher:fetch_remote",additionalSpanOptions:{parentSpanId:Pt}}),_n=[],Gt=[],{channels:En,files:Wn,members:Sn,teams:wn,userGroups:Kn,appActions:_s,emoji:Wt,helpArticles:Xn,workflowTriggers:Hn,salesforceRecords:ts,salesListViews:Jn}=Tt.entities;if(Sn){const Vn=Ve(ot({query:nt,options:Tt}));Sn.runaway?Gt.push(Vn):_n.push(Vn)}if(En){const Vn=Ve(te({query:nt,options:Tt}));En.runaway?Gt.push(Vn):_n.push(Vn)}if(Wt){const Vn=Ve(de({query:nt,options:Tt}));Wt.runaway?Gt.push(Vn):_n.push(Vn)}if(Wn&&((0,xe.A)(nt)||nt.length>3)){const Vn=(0,xt.G)(Ct());if(!Vn.contains(nt)&&!Vn.isRequestInFlight()){Vn.add(nt),Vn.setRequestInFlight();const qn=Ve(zn({query:nt,options:Tt}));Wn.runaway?Gt.push(qn):_n.push(qn)}}if(Kn){const Vn=Ve(Re({query:nt,options:Tt}));Kn.runaway?Gt.push(Vn):_n.push(Vn)}if(wn&&((0,K.k)(nn)||wn.onlyExternal||wn.includeExternal)&&!wn.onlyLocal){const Vn=Ve(Dn({query:nt,options:Tt}));wn.runaway?Gt.push(Vn):_n.push(Vn)}if(Hn){const Vn=(0,en.X)(nn);if(!Vn.contains(nt)&&!Vn.isRequestInFlight()){Vn.add(nt),Vn.setRequestInFlight();const qn=Ve(Ye({query:nt,includeAutomatedTriggers:Hn.includeAutomated,strictExposureRules:Hn.strictExposureRules}));qn&&(Hn.runaway?Gt.push(qn):_n.push(qn))}}if((0,Ue.e)(nn)&&_s){const Vn=Ve((0,At.G)()).timeout(2e3).catch(n.A);_s.runaway?Gt.push(Vn):_n.push(Vn)}const Yn=(0,We.dL)(nn);if(Xn&&Yn&&(0,ke.Fb)(nn,"searcher/fetch_all_articles"),(0,f.A)(nt)){if(ts){const Vn=Ve((0,Et.l)({query:nt,limit:5,reason:"Searcher"}));_n.push(Vn)}if(Jn){const{objectType:Vn,salesforceOrgId:qn}=Jn;_n.push(Ve((0,Yt.b)({query:nt,objectType:Vn,salesforceOrgId:qn})))}}return m.S.all(_n).then(Vn=>{const qn=Ct(),gs=us(qn,Tt,nt);if(gs.remoteIds=ve(Vn),Sn&&Sn.onlyFromExternalWorkspaceId){var ss,ns;gs.members=(ns=(ss=Vn.find(Ls=>!!Ls.members))===null||ss===void 0?void 0:ss.members)!==null&&ns!==void 0?ns:tt.Ml}const Ss=(0,o.A)((0,a.A)(gs),"length");return Gt.length&&!Ss?m.S.all(Gt).then(()=>us(Ct(),Tt)):(An==null||An.close(),gs)})});w.meta={name:"createThunk",key:"createThunkfetchRemote",description:"Search for local entities within Slack based on options"};function ve(Ve){const Ct={};return Ve.forEach(Ke=>{Ke&&(Ke.appActions&&(Ct.appActions=new Set(Ke.appActions.map(nt=>nt.id))),Ke.channels&&(Ct.channels=new Set(Ke.channels.map(nt=>nt.id))),Ke.emoji&&(Ct.emoji=new Set(Ke.emoji.map(nt=>nt.name))),Ke.files&&(Ct.files=new Set(Ke.files.map(nt=>nt.id))),Ke.members&&(Ct.members=new Set(Ke.members.map(nt=>nt.id))),Ke.userGroups&&(Ct.userGroups=new Set(Ke.userGroups.map(nt=>nt.id))),Ke.teams&&(Ct.teams=new Set(Ke.teams.map(nt=>nt.id))))}),Ct}u(ve,"getRemoteIds");const Ne=(0,Vt.Ay)("Search for entities within Slack by query",(Ve,Ct,Ke)=>{let{query:nt="",options:Tt=Xe}=Ke;var Lt;if(!nt.length&&!Tt.allowEmptyQuery)return m.S.resolve([]);const Pt=Ct(),Ht=(0,Ge.Cy)({state:Pt}),nn=(0,h.A)();Ht.mark(`modern-searcher-search-mark-${nn}`);const An=(0,un.O)(nt,{shouldTrimEmoji:!1,shouldTrimDocument:!1});var _n;N.LI.start({label:N.gC.Searcher,id:nn,options:{teamId:(_n=(0,on.ZT)(Pt))!==null&&_n!==void 0?_n:null,tags:Me({query:An,options:Tt})}});const Gt=(Lt=N.LI.get({label:N.gC.Searcher,id:nn}))===null||Lt===void 0?void 0:Lt.createChildSpan({name:"searcher:search"}),En=Ps(Tt,Xe,nt);if((0,i.A)(En))return m.S.resolve([]);if((0,F.x)(Pt)!==gn.M9.ONLINE||!(Tt!=null&&Tt.allowEmptyQueryRemoteSearch)&&!An.length&&(0,rn.A)()&&(0,fn._Z)(Pt,"searcher_local_empty_string")==="treatment")return m.S.resolve(dt(Pt,{query:An,options:En,autoTraceId:nn,parentSpanId:Gt==null?void 0:Gt.getId()}));const Wn=m.S.delay(0).then(()=>Ve(w({query:An,options:En,autoTraceId:nn,parentSpanId:Gt==null?void 0:Gt.getId()}))).then(Sn=>{const wn=Ct();return is(wn,{query:An,data:Sn,options:En,autoTraceId:nn,parentSpanId:Gt==null?void 0:Gt.getId()})});if(En.tiered){const Sn=dt(Pt,{query:An,options:En,autoTraceId:nn,parentSpanId:Gt==null?void 0:Gt.getId()}),wn=Wn.finally(()=>{Gt==null||Gt.close(),N.LI.stop({label:N.gC.Searcher,id:nn})}),Kn=Object.assign(Sn,{promise:wn});return m.S.resolve(Kn).finally(()=>{Ht.measureAndClear(`modern-searcher-search-mark-${nn}`,"modern-searcher-search-tiered")})}return Wn.finally(()=>{Ht.measureAndClear(`modern-searcher-search-mark-${nn}`,"modern-searcher-search"),Gt==null||Gt.close(),N.LI.stop({label:N.gC.Searcher,id:nn})})});Ne.meta={name:"createThunk",key:"createThunksearch",description:"Search for entities within Slack by query"};function dt(Ve,Ct){let{query:Ke="",options:nt,autoTraceId:Tt,parentSpanId:Lt}=Ct;var Pt;let Ht=Tt;if(!Ht){Ht=(0,h.A)();var nn;N.LI.start({label:N.gC.Searcher,id:Ht,options:{teamId:(nn=(0,on.ZT)(Ve))!==null&&nn!==void 0?nn:null,tags:Me({query:Ke,options:nt})}})}const An=(Pt=N.LI.get({label:N.gC.Searcher,id:Ht}))===null||Pt===void 0?void 0:Pt.createChildSpan({name:"searcher:search_local",additionalSpanOptions:{parentSpanId:Lt}});if(!Ke.length&&!nt.allowEmptyQuery)return[];const _n=Ps(nt,Xe,Ke);if((0,i.A)(_n))return[];const Gt=(0,un.O)(Ke,{shouldTrimEmoji:!1}),En=us(Ve,_n),Wn=is(Ve,{query:Gt,data:En,options:_n,autoTraceId:Ht,parentSpanId:An==null?void 0:An.getId()});return An==null||An.close(),Wn}u(dt,"searchLocal");const Mn=15,Tn=u(Ve=>{let{clogger:Ct,data:Ke}=Ve;const{source:nt,query:Tt,results:Lt,selectedItemId:Pt,displayedItemIds:Ht,openMethod:nn}=Ke,An=Ht?Ht.length:Lt.length,_n=Ht&&Pt?Ht.indexOf(Pt):Lt.findIndex(Hn=>Hn.item.id===Pt);if(_n<0)return;const Gt=Lt.find(Hn=>Hn.item.id===Pt);if(!Gt)return;const En=Gt.type||"other",Wn=(0,un.O)(Tt),Sn=Gt.source||"local";let wn;Gt.type==="mpim"?wn=Gt.scoreDetailsByMember:Gt.type==="member"&&Pt?wn={[Pt]:{is_exact_match:Gt.isExactMatch,exact_match_details:Gt.exactMatchDetails,score_details:Gt.scoreDetails}}:Gt.type==="emoji"&&Pt&&(wn={[Pt]:{is_exact_match:Gt.isExactMatch}});let Kn=[];Lt.some(Hn=>Hn.featureVector)&&(Ht?Kn=Ht.map(Hn=>{const ts=Lt.find(Jn=>Jn.item.id===Hn);return ts&&ts.featureVector.serialize()||""}):Kn=Lt.map(Hn=>{var ts,Jn;return Hn==null||(ts=Hn.featureVector)===null||ts===void 0||(Jn=ts.serialize)===null||Jn===void 0?void 0:Jn.call(ts)}));let Wt;(0,l.A)(Tt)?Wt=Tt.reduce((Hn,ts)=>Hn+ln((0,un.O)(ts)),0):Wt=ln(Wn);const Xn={source:nt,query_length:Wn.length?Wn.length:0,query_terms_length:Wt,results_length:An,selected_position:_n,selected_type:En,selected_source:Sn,selected_match_details:wn,feature_vector_list:Kn.slice(0,Mn),open_method:nn};Ct.track(ct.EventId.SEARCHER_ACCEPT,Xn)},"clogSearcherAccept"),mn=u(Ve=>{let{clogger:Ct,data:Ke}=Ve;const{source:nt,query:Tt,results:Lt,displayedItemIds:Pt}=Ke,Ht=Pt!==void 0?Pt.length:Lt.length,nn=(0,un.O)(Tt);let An;(0,l.A)(Tt)?An=Tt.reduce((Gt,En)=>Gt+ln((0,un.O)(En)),0):An=ln(nn);const _n={source:nt,query_length:nn.length?nn.length:0,query_terms_length:An,results_length:Ht};Ct.track(ct.EventId.SEARCHER_REJECT,_n)},"clogSearcherReject");function ln(Ve){return Ve?Ve.split(ut.u).filter(Ct=>Ct.length).length:0}u(ln,"getQueryTermsLength");function is(Ve,Ct){let{query:Ke,data:nt,options:Tt,autoTraceId:Lt,parentSpanId:Pt}=Ct;var Ht,nn,An,_n,Gt;const En=(Ht=N.LI.get({label:N.gC.Searcher,id:Lt}))===null||Ht===void 0?void 0:Ht.createChildSpan({name:"searcher:process",additionalSpanOptions:{parentSpanId:Pt}});ls(Tt);const Wn=(0,fn._Z)(Ve,"searcher_avoid_exact_member_match")==="treatment",Sn=(0,fn._Z)(Ve,"top_engaged_files_autocomplete")==="on",wn=(0,fn._Z)(Ve,"nerf_email_fuzzy_match")==="treatment",Kn={},_s=u((As,Us)=>{const Is=new Map;return[...As,...Us].forEach(xs=>{Is.set(xs.id,xs)}),Array.from(Is.values())},"mergeAndDeduplicate"),Wt=new Ot.A({query:Ke,options:{...Tt,sort:{...Tt.sort,avoidExactMatchForMembers:Wn},fuzzyEmailSearchForwardOnly:wn}}),Xn=(0,Ge.Cy)({state:Ve});Xn.mark("modern-searcher-matching-mark");const Hn=(nn=N.LI.get({label:N.gC.Searcher,id:Lt}))===null||nn===void 0?void 0:nn.createChildSpan({name:"searcher:searcher_match",additionalSpanOptions:{parentSpanId:En==null?void 0:En.getId()}});nt.channels&&(Kn.channels=Wt.filterChannels(Ve,nt.channels,vt(Ve,Tt.entities.channels))),nt.members&&(Kn.members=Wt.filterMembers(Ve,nt.members,jt(Ve,Tt.entities.members))),nt.emails&&nt.members&&!(!(Kn==null||(An=Kn.members)===null||An===void 0)&&An.length)&&(Kn.emails=nt.emails),nt.mpims&&(Kn.mpims=Wt.filterMpims(Ve,nt.mpims,xn(Ve,Tt.entities.channels))),nt.ims&&(Kn.ims=Wt.filterIms(Ve,nt.ims,bn(Ve,Tt.entities.channels))),nt.userGroups&&(Kn.userGroups=Wt.filterUserGroups(Ve,nt.userGroups,On(Ve,Tt.entities.userGroups))),nt.teams&&(Kn.teams=Wt.filterTeams(Ve,nt.teams,Ln(Ve,Tt.entities.teams))),nt.views&&(Kn.views=Wt.filterViews(Ve,nt.views)),nt.modals&&(Kn.modals=Wt.filterModals(Ve,nt.modals)),nt.appActions&&(Kn.appActions=Wt.filterAppActions(Ve,nt.appActions)),nt.slashCommands&&(Kn.slashCommands=Wt.filterShortcuts(Ve,nt.slashCommands,!0)),nt.slackGlobalActions&&(Kn.slackGlobalActions=Wt.filterShortcuts(Ve,nt.slackGlobalActions)),nt.quipShortcutCommands&&(Kn.quipShortcutCommands=Wt.filterShortcuts(Ve,nt.quipShortcutCommands)),nt.channelActions&&(Kn.channelActions=Wt.filterShortcuts(Ve,nt.channelActions)),nt.fakeGlobalActions&&(Kn.fakeGlobalActions=Wt.filterShortcuts(Ve,nt.fakeGlobalActions)),nt.callActions&&(Kn.callActions=Wt.filterShortcuts(Ve,nt.callActions)),nt.workflowTriggers&&(Kn.workflowTriggers=Wt.filterWorkflowTriggers(Ve,nt.workflowTriggers)),nt.appActions&&(!(Tt==null||(_n=Tt.entities)===null||_n===void 0||(Gt=_n.shortcuts)===null||Gt===void 0)&&Gt.apps)&&(Kn.apps=Wt.filterApps(Ve,nt.appActions,nt.fakeGlobalActions,nt.slashCommands)),nt.broadcastKeywords&&(Kn.broadcastKeywords=Wt.filterBroadcastKeywords(Ve,nt.broadcastKeywords)),nt.emoji&&(Kn.emoji=Wt.filterEmoji(Ve,nt.emoji)),nt.channelSections&&(Kn.channelSections=Wt.filterChannelSections(Ve,nt.channelSections,As=>{var Us,Is;return!!(!((Us=Tt.entities.channelSections)===null||Us===void 0||(Is=Us.includeTypes)===null||Is===void 0)&&Is[As.type])})),nt.files&&(Kn.files=Wt.filterFiles(Ve,nt.files,Un(Ve,Tt.entities.files))),nt.topEngagedFiles&&Sn&&(Kn.topEngagedFiles=Wt.filterFiles(Ve,nt.topEngagedFiles,Un(Ve,Tt.entities.topEngagedFiles))),nt.lists&&(Kn.lists=Wt.filterLists(Ve,nt.lists));const ts=(0,We.dL)(Ve);nt.helpArticles&&ts&&(Kn.helpArticles=Wt.filterHelpArticles(Ve,nt.helpArticles)),nt.salesforceRecords&&(0,g.Ht)(Ve)&&(Kn.salesforceRecords=Wt.filterSalesforceRecordSuggestions(Ve,nt.salesforceRecords)),nt.salesListViews&&(0,T.hx)(Ve)&&(Kn.salesListViews=Wt.filterSalesListViews(Ve,nt.salesListViews)),Xn.measureAndClear("modern-searcher-matching-mark","modern-searcher-matching"),Hn==null||Hn.close();const Jn=ms(Kn,nt.remoteIds||{});let Yn;Sn&&(Yn=Jn.topEngagedFiles,delete Jn.topEngagedFiles);const Vn=500,qn=3;var gs;const ss=Math.min(((gs=Tt==null?void 0:Tt.limit)!==null&&gs!==void 0?gs:1)*qn,Vn);let ns=(0,c.A)(Object.values(Jn));if(Tt.sort&&!Tt.sort.bypassSorting){var Ss;let As=!1;ns.length<ss&&(As=!0);const Us=new kt.A({query:Ke,options:{modelOnly:As,...Tt.sort}}),Is=(Ss=N.LI.get({label:N.gC.Searcher,id:Lt}))===null||Ss===void 0?void 0:Ss.createChildSpan({name:"searcher:searcher_sort",additionalSpanOptions:{parentSpanId:En==null?void 0:En.getId()}});ns=Us.sort(Ve,Jn),Is==null||Is.close(),Yn&&Sn&&(Yn=(0,yn.jW)(Ve,{query:Ke,list:Yn,bonusPoints:Us.getFrecencyBonusPointsFunction(Ve)}))}if(Yn&&Sn&&(ns=_s(Yn,ns)),Tt.sort&&Tt.sort.frecency&&!Tt.sort.bypassSorting){var Ls;const As=(Ls=N.LI.get({label:N.gC.Searcher,id:Lt}))===null||Ls===void 0?void 0:Ls.createChildSpan({name:"searcher:sorter_sort",additionalSpanOptions:{parentSpanId:En==null?void 0:En.getId()}});ns=new be.A({query:Ke,options:{...Tt.sort},teamId:(0,on.ZT)(Ve),enterpriseId:(0,K.k)(Ve)&&(0,on.jV)(Ve)?(0,on.jV)(Ve):void 0}).sort(Ve,ns.slice(0,ss)),As==null||As.close()}return Tt.limit&&(ns=(0,_.A)(ns,Tt.limit)),Tt.returnMetadata||(ns=ns.map(As=>As.item)),ys(),ns||[]}u(is,"processFetchedEntities");function ms(Ve,Ct){return(0,d.A)(Ve,(Ke,nt)=>{const Tt=Ts(nt),Lt=Ct[nt];let Pt=!1;return nt==="topEngagedFiles"&&(Pt=!0),Ke.map(Ht=>{const nn=Lt&&Lt.has(Ht.item.id)?"remote":"local";return{...Ht,type:Tt,source:nn,isTopEngagedFile:Pt}})})}u(ms,"addResultMetadata");function Ts(Ve){switch(Ve){case"channels":return"channel";case"members":return"member";case"mpims":return"mpim";case"ims":return"ims";case"userGroups":return"userGroup";case"teams":return"team";case"views":return"view";case"modals":return"modal";case"appActions":return"appAction";case"apps":return"app";case"broadcastKeywords":return"broadcastKeyword";case"emoji":return"emoji";case"files":return"file";case"topEngagedFiles":return"file";case"slashCommands":return"slashCommand";case"quipShortcutCommands":return"quipShortcutCommand";case"slackGlobalActions":return"globalAction";case"channelActions":return"channelAction";case"fakeGlobalActions":return"appAction";case"callActions":return"channelAction";case"workflowTriggers":return"workflowTrigger";case"helpArticles":return"helpArticles";case"salesforceRecords":return"salesforceRecord";case"salesListViews":return"salesListViews";default:return"other"}}u(Ts,"getTypeFromGroup");function Ps(Ve,Ct,Ke){const{members:nt,channels:Tt,userGroups:Lt,broadcastKeywords:Pt,emoji:Ht}=Ve.entities,{members:nn,channels:An,userGroups:_n}=Ct.entities;let Gt={},En="";Ke!=null&&Ke.length&&(En=Array.isArray(Ke)?"@":Ke.charAt(0)),(En==="@"||En==="\uFF20")&&(nt||Lt||Pt)?(nt&&(Gt.members=ps(nt,nn)),Lt&&(Gt.userGroups=ps(Lt,_n)),Pt&&(Gt.broadcastKeywords=ps(Pt,{}))):(En==="#"||En==="\uFF03")&&Tt?Gt.channels=ps(Tt,An):En===":"&&Ht?Gt.emoji=ps(Ht,{}):Gt=Object.keys(Ve.entities).reduce((gs,ss)=>{const ns=Ve.entities[ss];return ns&&(gs[ss]=ps(ns,Ct.entities[ss])),gs},{});var Wn;const Sn=ps((Wn=Ve==null?void 0:Ve.sort)!==null&&Wn!==void 0?Wn:{},Ct.sort);var wn;const Kn=(wn=Ve.limit)!==null&&wn!==void 0?wn:Ct.limit;var _s;const Wt=(_s=Ve.fuzzyLimit)!==null&&_s!==void 0?_s:Ct.fuzzyLimit;var Xn;const Hn=(Xn=Ve.fuzzyJumpLimit)!==null&&Xn!==void 0?Xn:Ct.fuzzyJumpLimit,ts=Ve.fuzzyCJK||Ct.fuzzyCJK,Jn=Ve.tiered,Yn=Ve.filter,Vn=Ve.allowEmptyQuery,qn=Ve.returnMetadata||Ct.returnMetadata;return Sn&&(Sn.model=Sn.model||(0,Kt.In)()),{entities:Gt,sort:Sn,limit:Kn,tiered:Jn,filter:Yn,allowEmptyQuery:Vn,fuzzyLimit:Wt,fuzzyJumpLimit:Hn,fuzzyCJK:ts,returnMetadata:qn}}u(Ps,"getAllOptions");function ps(Ve,Ct){if(!Ct||Ve===!1)return Ve;const Ke=Ve===!0?{}:Ve,nt=Ct===!0?{}:Ct;return(0,r.A)(Ke,nt)}u(ps,"mergeOptions");function ls(Ve){const{members:Ct,channels:Ke,teams:nt,userGroups:Tt,appActions:Lt,files:Pt}=Ve.entities;(Ct||Ke||nt||Tt||Lt||Pt)&&k.Ay.pauseRefetchIndefinitely()}u(ls,"pauseConditionalFetching");function ys(){k.Ay.unpauseRefetchImmediately()}u(ys,"unpauseConditionalFetching"),(0,W.ul)("searcher",{search:(Ve,Ct)=>(0,Jt.dispatchForTeamId)(Ve,Ne({options:Ct})),searchLocal:(Ve,Ct)=>{const Ke=(0,Jt.getStateByTeamId)(Ve);return dt(Ke,{options:Ct})}})},3275490582:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(5519146941);function s(){return s=Object.assign||function(o){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var _ in l)Object.prototype.hasOwnProperty.call(l,_)&&(o[_]=l[_])}return o},s.apply(this,arguments)}u(s,"_extends");function a(o){const i=o,l=t.forwardRef((_,d)=>t.createElement(n.A.Consumer,null,r=>{let{view:m,closeView:h,windowId:v,container:y,isMainWindow:I,isChildWindow:T,shouldUseNavigate:f,activeTab:g,forceTabWhenNavigating:M,getSiblingView:A,getPrimaryView:O,getSecondaryView:D,getViewSet:E}=r;return t.createElement(i,s({ref:d},_,{view:m,closeView:h,windowId:v,container:y,isMainWindow:I,isChildWindow:T,shouldUseNavigate:f,activeTab:g,forceTabWhenNavigating:M,getSiblingView:A,getPrimaryView:O,getSecondaryView:D,getViewSet:E}))}));return l.displayName=`withViewContainerContext(${i.displayName})`,l}u(a,"withViewContainerContext"),a.displayName="withViewContainerContext";const c=a},1149563359:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(3134334389),n=e(9053431150);function s(a,c){const{addFocusTransitionListener:o,removeFocusTransitionListener:i}=(0,t.useContext)(n.Ay);(0,t.useEffect)(()=>(o(a,c),()=>{i(a,c)}),[o,c,i,a])}u(s,"useFocusTransitionListener")},8362292758:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(8300007136),n=e(5534420337);function s(){const{getState:a}=(0,t.Pj)();return(0,n.Ay)({getState:a})}u(s,"useLogger")},3107743571:(j,p,e)=>{"use strict";e.d(p,{Z:()=>n});var t=e(3134334389);const n=u(function(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const o=(0,t.useRef)(),i=(0,t.useCallback)(()=>{const l=o.current;l&&(window.clearTimeout(l),o.current=void 0)},[]);return(0,t.useEffect)(()=>(i(),o.current=window.setTimeout(s,a),i),[s,i,a].concat(c)),i},"useTimeout")},4003148341:(j,p,e)=>{"use strict";e.d(p,{x:()=>s});var t=e(8300007136),n=e(3855029223);function s(){const{getState:a}=(0,t.Pj)();return(0,n.E)({getState:a})}u(s,"useTracer")},3320454392:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});function t(n){const s=u(()=>{window.Cypress||n()},"unloadHandler");window.addEventListener("beforeunload",s)}u(t,"addUnloadHandler")},9853754481:(j,p,e)=>{"use strict";e.d(p,{Ep:()=>c,n2:()=>i,Ay:()=>_});var t=e(6313685253),n=e(7299481592);const s=window.AudioContext||window.webkitAudioContext,a=window.AnalyserNode,c=6;function o(d){let r=1;for(;r*2<d;)r*=2;return r}u(o,"getPowerof2LessThan");function i(d){let m=.01;for(const v of d)m=Math.max(m,(v-128)/128);const h=(Math.log(.01)-Math.log(m))/Math.log(.01);return Math.min(Math.max(h,0),1)}u(i,"computeStrength");function l(d){return(0,t.A)(d,(r,m)=>{const h=m.getSettings().sampleRate;return h!==void 0&&r!==void 0?Math.max(r,h):h},void 0)}u(l,"getMaxTrackSampleRate");let _=u(class{getLevel(){var r;return(r=this.analyserNode)===null||r===void 0||r.getByteTimeDomainData(this.data),i(this.data)/c}stop(){var r;if(this.analyserNode){var m;(m=this.audioNode)===null||m===void 0||m.disconnect(this.analyserNode)}delete this.audioNode,this.audioNode=void 0,delete this.analyserNode,this.analyserNode=void 0,(r=this.audioCtx)===null||r===void 0||r.close(),delete this.audioCtx,this.audioCtx=void 0}constructor(r,m){(0,n.M)(m>=0,"Level poll interval must be positive"),this.audioCtx=new s;const h=r.getAudioTracks();(0,n.M)(!!h.length,"Need audio tracks to run analyser");const y=(l(h)||48e3)*m/1e3,I=Math.max(32,Math.min(32768,o(y)));this.data=new Uint8Array(I),this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.fftSize=I,this.audioNode=this.audioCtx.createMediaStreamSource(r),this.audioNode.connect(this.analyserNode)}},"AudioAnalyser")},1829947126:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(6267571562);class n{createPublisher(c){return this.publishers[c]=new t.G,this.publishers[c]}createAllPublisher(){return this.allPublisher=new t.G,this.allPublisher}publish(c,o){const i=this.publishers[c];i&&i.publish(o)}publishAll(c,o){var i;const l={peerId:c,value:o};(i=this.allPublisher)===null||i===void 0||i.publish(l)}subscribe(c,o){(this.publishers[c]||this.createPublisher(c)).subscribe(o)}subscribeAll(c){this.createAllPublisher().subscribe(c)}unsubscribe(c,o){const i=this.publishers[c];i&&i.unsubscribe(o)}constructor(){this.publishers={}}}u(n,"PeerPubSub");const s=new n},9009528296:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(6267571562);const n=new t.G},5046160032:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(2016742660);const n=window.navigator&&typeof window.navigator.sendBeacon=="function";function s(a){let{apiUrl:c,method:o,token:i,args:l={},versionTs:_="",versionUid:d=""}=a,r=!1;const m=(0,t.DI)();let h=`${c}${o}?_x_id=${d.substring(0,8)}-${Date.now()/1e3}`;m!==null&&(h+=`&fp=${m}`);const v=new FormData;if(v.append("token",i),Object.keys(l).forEach(y=>v.append(y,l[y])),n)r=navigator.sendBeacon(h,v);else{const y=new XMLHttpRequest;y.addEventListener("load",()=>{const{readyState:I,status:T,DONE:f}=y;I===f&&T===200&&(r=!0)}),y.open("POST",h,!0),y.setRequestHeader("X-Slack-Version-Ts",_),y.send(v)}return r}u(s,"beaconApiCall")},8935621861:(j,p,e)=>{"use strict";e.d(p,{A:()=>h});var t=e(9706240641),n=e(6273911963),s=e(9687310625);function a(v){return c.apply(this,arguments)}u(a,"fetchNearestChimeMediaRegion");function c(){return c=(0,t.coroutine)(function*(v){const y=new n.A({url:v?"https://nearest-us-gov-media-region.l.chime.aws/":"https://nearest-media-region.l.chime.aws"});try{const I=yield new s.Ay().q(y);return JSON.parse(I).region}catch{return""}}),c.apply(this,arguments)}u(c,"_fetchNearestChimeMediaRegion");var o=e(6422693406),i=e(3390261877),l=e(3320454392),_=e(7595282574),d=e(322597465),r=e(796111729);let m=u(class Zs{writeRegions(y,I){const T=I?Zs.GOV_REGION_STORAGE_KEY:Zs.REGION_STORAGE_KEY,f={regions:y,timestamp:Date.now(),version:Zs.VERSION};try{localStorage.setItem(T,JSON.stringify(f))}catch(g){(0,r.Wo)({label:"REGION-PROVIDER"}).error("Could not write chime media regions to localStorage: ",g.message)}}readRegions(y){const I=y?Zs.GOV_REGION_STORAGE_KEY:Zs.REGION_STORAGE_KEY,T=localStorage.getItem(I);if(!T)return null;let f=null;try{f=JSON.parse(T)}catch(g){return(0,r.Wo)({label:"REGION-PROVIDER"}).error("Could not parse chime media regions from localStorage: ",g.message),null}return f.version!==Zs.VERSION||this.ttl&&Date.now()-f.timestamp>this.ttl?null:f}constructor(y){this.ttl=y}},"ChimeRegionStorage");m.REGION_STORAGE_KEY="ChimeRegionStorage-chimeRegionCache",m.GOV_REGION_STORAGE_KEY="ChimeRegionStorageGov-chimeRegionCache",m.VERSION=1;let h=u(class Ws{static getInstance(){return Ws.instance||(Ws.instance=new Ws),Ws.instance}getNearestChimeMediaRegion(y){var I=this;return(0,t.coroutine)(function*(){return(y?(0,d.H)(y):!1)?I.getNearestChimeGovMediaRegion():I.getNearestChimeCommercialMediaRegion()})()}getNearestChimeCommercialMediaRegion(){var y=this;return(0,t.coroutine)(function*(){if(!y.commercialRegions){const I=y.storage.readRegions(!1);I&&(y.commercialRegions=I.regions)}return y.commercialRegions?y.commercialRegions:y.remoteGetNearestChimeMediaRegion(!1)})()}getNearestChimeGovMediaRegion(){var y=this;return(0,t.coroutine)(function*(){if(!y.govRegions){const I=y.storage.readRegions(!0);I&&(y.govRegions=I.regions)}return y.govRegions?y.govRegions:y.remoteGetNearestChimeMediaRegion(!0)})()}remoteGetNearestChimeMediaRegion(y){var I=this;return(0,t.coroutine)(function*(){const T=yield o.S.resolve(a(y));return y?I.govRegions=T:I.commercialRegions=T,I.storage.writeRegions(T,y),T})()}init(){if(this.initialized)return 0;this.initialized=!0;const y=(0,_.z$)();let I=Ws.INITIAL_LOAD_DELAY;const T=this.storage.readRegions(y);T&&(y?this.govRegions=T.regions:this.commercialRegions=T.regions,I=Math.max(Ws.INITIAL_LOAD_DELAY,Ws.REFRESH_INTERVAL-(Date.now()-T.timestamp)));var f=this;const g=setTimeout((0,t.coroutine)(function*(){yield f.remoteGetNearestChimeMediaRegion(y);const M=new i.A(Ws.REFRESH_INTERVAL);M.start((0,t.coroutine)(function*(){yield f.remoteGetNearestChimeMediaRegion(y)})),(0,l.A)(()=>{M.stop()})}),I);return(0,l.A)(()=>{clearTimeout(g)}),I}getRawRegions(){return this.commercialRegions}clear(){this.commercialRegions=null,this.govRegions=null,this.initialized=!1}constructor(){this.commercialRegions=null,this.govRegions=null,this.initialized=!1,this.storage=new m(Ws.REFRESH_INTERVAL)}},"ChimeRegionProvider");h.REFRESH_INTERVAL=3*24*60*60*1e3,h.INITIAL_LOAD_DELAY=5*1e3},3390261877:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});let t=u(class{start(s){this.stop(),this.timer=setInterval(s,this.intervalMs)}stop(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)}constructor(s){this.intervalMs=s,this.timer=null}},"IntervalScheduler")},6728003438:(j,p,e)=>{"use strict";e.d(p,{F4:()=>S,GC:()=>V,lP:()=>N,no:()=>E});var t=e(9113979368),n=e(6533394955),s=e(4423055085),a=e(8847766420),c=e(3346431019),o=e(3855029223),i=e(2250002584),l=e(796111729),_=e(3158767748),d=e(8802876335),r=e(169770637);const m="RTM-EVENT-METRICS",h=4;let v=!1,y;const I=50;function T(){return v?!0:(0,c.A)()?(y===void 0&&(y=(0,_.A)(I),y&&(0,l.Wo)({label:m}).info("Metrics collection enabled for the current interval.")),y):!1}u(T,"shouldSampleForInterval");let f={},g={},M={},A={},O={},D={};function E(x){let{teamOrEnterpriseId:Y,rtmEventType:ne,rtmEventSubtype:re,duration:_e,msgs:G,fromEvtLog:ge}=x;var oe;if(!T())return;const me=(0,a.Kc)((oe=(0,n.getStoreOrSharedStoreInstanceByTeamOrEnterpriseId)(Y))===null||oe===void 0?void 0:oe.getState());if(!me)return;const ue=ne==="message"?`message/${re}`:ne;ge&&C({bucket:O,teamOrEnterpriseId:me,eventType:ue,value:G.length}),C({bucket:g,teamOrEnterpriseId:me,eventType:ue,value:1}),C({bucket:M,teamOrEnterpriseId:me,eventType:ue,value:G.length}),C({bucket:A,teamOrEnterpriseId:me,eventType:ue,value:_e})}u(E,"incrementMetrics");function C(x){let{bucket:Y,teamOrEnterpriseId:ne,eventType:re,value:_e}=x;var G;const ge=(G=Y[ne])!==null&&G!==void 0?G:{};var oe;const me=(oe=ge[re])!==null&&oe!==void 0?oe:0;ge[re]=me+_e,Y[ne]=ge}u(C,"incrementBucket");function S(x,Y){if((0,t.A)(M)&&(0,t.A)(f)){R();return}const ne=Object.keys({...M,...f}),re=setInterval(()=>{const _e=(0,l.Wo)({label:m}),G=ne.pop();if(!G){_e.info("Completed metrics aggregation",{traceId:x.getTraceId()}),clearInterval(re);return}_e.info(`Sending metric report for id: ${G}`),W({teamOrEnterpriseId:G,clientMetricsTrace:x,performanceTracingTags:Y}),k({teamOrEnterpriseId:G,clientMetricsTrace:x,performanceTracingTags:Y}),P(G)},1e3)}u(S,"reportRtmMetrics");function b(x,Y){const ne=(0,n.getStateByTeamId)(x);return{...Y,metric_version:h,slow_connection_count:(0,d.d4)(ne)}}u(b,"getMetricsTraceMetatags");function k(x){let{teamOrEnterpriseId:Y,clientMetricsTrace:ne,performanceTracingTags:re}=x;const _e=f[Y];if(!_e)return;const G=(0,o.E)({teamOrEnterpriseId:Y}),ge=G.createMetricsTrace({label:"rtm_incoming",tags:b(Y,re),traceId:ne.getTraceId(),parentSpanId:ne.getRootSpanId()});var oe;const me=(oe=D[Y])!==null&&oe!==void 0?oe:{};let ue=0,ae=0;Object.entries(_e).forEach(he=>{let[ce,ee=0]=he;var J;const X=(J=me[ce])!==null&&J!==void 0?J:0;ue+=ee,ae+=X,ge.store({name:"rtm_incoming:event_count",value:ee}).addTags({event_type:ce,eventlog_count:X,socket_count:ee-X})}),ge.store({name:"rtm_incoming:total_event_count",value:ue}),ge.store({name:"rtm_incoming:total_event_count:socket",value:ue-ae}),ge.store({name:"rtm_incoming:total_event_count:eventlog",value:ae}),(0,l.Wo)({label:m}).info(`${Y} total incoming event count: ${ue}`),G.reportTrace(ge)}u(k,"maybeReportRawEventCount");function W(x){let{teamOrEnterpriseId:Y,clientMetricsTrace:ne,performanceTracingTags:re}=x;const _e=M[Y];if(!_e)return;const G=(0,o.E)({teamOrEnterpriseId:Y}),ge=G.createMetricsTrace({label:"rtm_dispatch",tags:b(Y,re),traceId:ne.getTraceId(),parentSpanId:ne.getRootSpanId()});var oe;const me=(oe=g[Y])!==null&&oe!==void 0?oe:{};var ue;const ae=(ue=A[Y])!==null&&ue!==void 0?ue:{};var he;const ce=(he=O[Y])!==null&&he!==void 0?he:{};let ee=0,J=0;Object.entries(_e).forEach(X=>{let[F,L]=X;const K=me[F],B=ae[F];if(K===void 0||B===void 0)return;var Q;const q=(Q=ce[F])!==null&&Q!==void 0?Q:0;ee+=L,J+=q,ge.store({name:"rtm_dispatch:duration",value:B}).addTags({event_type:F,total_events:L,total_batches:K,per_event_duration:B/L,eventlog_count:q,socket_count:L-q})}),ge.store({name:"rtm_dispatch:total_event_count",value:ee}),ge.store({name:"rtm_dispatch:total_event_count:socket",value:ee-J}),ge.store({name:"rtm_dispatch:total_event_count:eventlog",value:J}),(0,l.Wo)({label:m}).info(`${Y} total dispatch event count: ${ee}`),G.reportTrace(ge)}u(W,"maybeReportEventMetrics");function N(x){let{teamId:Y,msgs:ne}=x;if(!T())return;const re=(0,n.getStateByTeamId)(Y);var _e;const G=(_e=(0,a.Kc)(re))!==null&&_e!==void 0?_e:Y,ge=ne.reduce((oe,me)=>(!me||!me.type||(oe[me.type]?oe[me.type]+=1:oe[me.type]=1),oe),{});Object.entries(ge).forEach(oe=>{let[me,ue]=oe;C({bucket:f,teamOrEnterpriseId:G,eventType:me,value:ue}),C({bucket:D,teamOrEnterpriseId:G,eventType:me,value:ue})})}u(N,"countRawEventsVolumeFromEventLog");function V(x){let{teamId:Y,msg:ne}=x;if(!T()||!ne||!ne.type)return;const re=(0,n.getStateByTeamId)(Y);var _e;const G=(_e=(0,a.Kc)(re))!==null&&_e!==void 0?_e:Y;C({bucket:f,teamOrEnterpriseId:G,eventType:ne.type,value:1})}u(V,"countRawEventVolume");function R(){y=void 0,f={},M={},g={},A={},O={},D={},(0,l.Wo)({label:m}).info("Metrics collection sampling has been reset.")}u(R,"resetAllCollections");function P(x){y=void 0,delete f[x],delete M[x],delete g[x],delete A[x],delete O[x],delete D[x],(0,l.Wo)({label:m}).info(`Metrics collection sampling has been reset for id: ${x}`)}u(P,"resetCollections");const z=u(()=>({rawEventCountBuckets:f,eventCountBuckets:M,batchCountBuckets:g,durationBuckets:A,eventLogEventCountBuckets:O,eventLogRawEventCountBuckets:D}),"debugGetBuckets");(0,s.ul)("rtmEventMetrics",{debugGetBuckets:z,debugToggleSampling:()=>{v=!v,R(),(0,l.Wo)({label:m}).info(`Interval sampling: ${v?"ON":"OFF"}`)},debugReportMetrics:()=>{const x=(0,i.F)(),Y=x.createMetricsTrace({samplingOptions:{sampleType:r.tS.ALWAYS}});S(Y,{}),x.reportTrace(Y)}}),Object.defineProperty({resetAllCollections:R,debugGetBuckets:z,reportRtmMetrics:S,intervalSampleCache:y},"intervalSampleCache",{get:()=>y,set:x=>{y=x}})},7542104324:(j,p,e)=>{"use strict";e.d(p,{dj:()=>Zt,d1:()=>rn,uH:()=>ht,bo:()=>In,lI:()=>je,sw:()=>st,mt:()=>Be,jQ:()=>qe,rH:()=>lt});var t=e(9706240641),n=e(6422693406),s=e(3398586081),a=e(7715417323),c=e(796111729),o=e(1031947056),i=e(6533394955),l=e(8847766420),_=e(5795074931),d=e(8003339552),r=e(7139225017),m=e(4423055085),h=e(8352634987),v=e(4096483543),y=e(8233775522),I=e(6728003438),T=e(3078252698),f=e(9101533895),g=e(7042557635),M=e(4446301238),A=e(8040098042),O=e(7334104107),D=e(1407713935),E=e(9289081806);function C(at,Et,_t){return!at.text||!(O.$2.test(at.text)||O.Oh.test(at.text)||O.K0.test(at.text)||O.y7.test(at.text))||!(0,f.hh)(_t(),at.channel)?n.K.resolve():Et((0,g.L)({channelId:at.channel})).catch(a.A)}u(C,"maybeEnsureMemberCount");let S=function(){var at=(0,t.coroutine)(function*(Et,_t){const Bt=_t(),Qt=u(function(){for(var U=arguments.length,H=new Array(U),te=0;te<U;te++)H[te]=arguments[te];return(0,i.dispatchForTeamId)((0,l.ZT)(Bt),...H)},"dispatch"),Fe=Et.subtype?`preprocess-rtm-message/ensureModelObsInMessageArePresent for type: ${Et.type} and subtype: ${Et.subtype}`:`preprocess-rtm-message/ensureModelObsInMessageArePresent for type: ${Et.type}`,Me=(0,T.A)(Et.channel)&&(0,A.A)(Et.channel)&&!(0,f.hh)(Bt,Et.channel)?Qt((0,M.pX)({ids:[Et.channel],reason:Fe,callSource:M.aI.EnsureModelObsArePresent})):n.K.resolve();yield n.K.all([Me,C(Et,Qt,_t)]).catch(a.A)});return u(function(_t,Bt){return at.apply(this,arguments)},"ensureModelObsInMessageArePresent")}();function b(at,Et){return k.apply(this,arguments)}u(b,"ensureModelObsInMessageAreOpen");function k(){return k=(0,t.coroutine)(function*(at,Et){if(at.subtype)return;const _t=!1,Bt=(0,f.OL)(Et(),at.channel,_t);Bt&&(0,D.JM)(Bt)&&((0,E.nT)(Bt)||(yield(0,i.dispatchForTeamId)((0,l.ZT)(Et()),(0,M.jP)({channel:Bt.id,reason:"preprocess-rtm-message/ensureModelObsInMessageAreOpen"}))))}),k.apply(this,arguments)}u(k,"_ensureModelObsInMessageAreOpen");function W(at,Et){return N.apply(this,arguments)}u(W,"preprocessRtmMessage");function N(){return N=(0,t.coroutine)(function*(at,Et){if(at.type==="message")try{yield S(at,Et),yield b(at,Et)}catch{}}),N.apply(this,arguments)}u(N,"_preprocessRtmMessage"),Object.defineProperty({maybeEnsureMemberCount:C,ensureModelObsInMessageAreOpen:b},"ensureModelObsInMessageArePresent",{get:()=>S,set:at=>{S=at}});var R=e(5154341017),P=e(6890312250),z=e(2240330919),$=e(5238395322),x=e(9190452268),Y=e(2250002584),ne=e(3158767748),re=e(169770637),_e=e(2791814261);const G=7;let ge;const oe=[],me=[];let ue,ae;(0,m.zv)("rtmMetrics",()=>({enqueuedEventCounts:{allTeams:oe.concat(ue),backgroundTeams:me.concat(ae)}}));const he=(0,s.A)(()=>(0,ne.A)(1)||(0,_e.c)());function ce(){let at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!(0,v.A)()||!he())return;const Et=Math.floor(Date.now()/1e3);if(ge!==Et){let _t=0;if(ge){const Bt=Et-ge;Bt>60?(ue=void 0,ae=void 0,oe.length=0,me.length=0):Bt>1&&(_t=Et-ge)}if(ge=Et,ue!==void 0){oe.push(ue),me.push(ae);for(let Qt=0;Qt<_t;Qt++)oe.push(0),me.push(0);const Bt=15*60;if(oe.length>=Bt){const Qt=(0,x.rh)(),Fe=(0,R.A)((0,P.A)(oe),1),Xe=(0,z.A)(oe)||0,Me=(0,$.A)(oe);(0,c.Wo)({label:"RTM-ENQUEUE-STATS"}).info(`Enqueue times (all teams): ${Me} total, ${Xe} per second at peak, ${Fe} per second average`);const H={is_count:!0,allow_zero:!0};Qt.store(`rtm_nq_at${G}_avg`,Fe,H),Qt.store(`rtm_nq_at${G}_max`,Xe,H),Qt.store(`rtm_nq_at${G}_total`,Me,H),oe.length=0,me.length=0}}ue=0,ae=0}ue=(ue||0)+at}u(ce,"maybeMeasureEnqueueVelocity");let ee=0,J=0,X=Date.now(),F=Date.now();const L=5*60*1e3;function K(at){const Et=Date.now();ee=Math.max(ee,at.length),X+L<Et&&((0,x.rh)().count("rtm_queue_length_max",ee),ee=0,X=Et)}u(K,"maybeMeasureMaxQueueLength");function B(at){const _t=at[0]._enqueuedAt,Bt=Date.now(),Qt=_t&&Bt-_t;if(J=Qt?Math.max(J,Qt):J,F+L<Bt){const Fe=(0,Y.F)(),Xe=Fe.createMetricsTrace({label:"rtm_queue"});Xe.store({name:"rtm_queue_delay_max",value:J}),Fe.reportTrace(Xe),J=0,F=Bt}}u(B,"maybeMeasureMaxQueueDelay");function Q(at,Et){const _t=(0,Y.F)(),Bt=_t.createMetricsTrace({label:"rtm_state_modified",samplingOptions:{sampleType:re.tS.CALL,sampleRate:.01}}),Qt=Et?`${at}/${Et}`:at;Bt.count({name:`rtm_state_modified:${Qt}`}),_t.reportTrace(Bt)}u(Q,"countRTMStateModified");var q=e(7578217447),le=e(5071086688),Te=e(5470425448),Ie=e(7645722292),De=e(4761125736),pe=e(1462104702),fe=e(8634352961),Z=e(1763226059);const se="RTM",Ae=100;let Ce={};const Le=u(function(){let at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return Ce[`${at}${Et?`_${Et}`:""}`]||1},"getCurrentMaxBatchSize"),Ue=u(function(){let at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",_t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;Ce[`${at}${Et?`_${Et}`:""}`]=_t},"setCurrentMaxBatchSize");let Pe=!1,He=!1;const Qe={},lt=u(at=>{Pe=at},"setIsActiveHuddle"),qe=u(at=>{He=at},"setDisableRtmScheduler"),ct=u(at=>{let{teamOrEnterpriseId:Et,msg:_t}=at;Qe[Et]||(Qe[Et]=[]),Qe[Et].push(_t)},"queueUntilHuddleEnds"),tt=u(at=>{const Et=Qe[at];Qe[at]=[],Et.length&&je(at,Et)},"drainHuddleQueue"),it=16;let Ge={},We={},xe={},ze={};function mt(at){var Et;return(Et=We[at])!==null&&Et!==void 0?Et:Ge[at]}u(mt,"getHandler");function pt(at){return at.__isShared}u(pt,"isSharedHandler");function It(at){return at.teamOrEnterpriseId}u(It,"getTeamOrEnterpriseId");function bt(at){let{messages:Et,teamOrEnterpriseId:_t}=at;if(Et.msgs.length===0)return;const Bt=mt(Et.rtmEventType);if(Bt)return{handler:Bt,messages:Et,teamOrEnterpriseId:_t}}u(bt,"getRoutedHandler");function gt(at,Et){if(xe[at]){const Bt=isJasmine()||isJest()?`addRtmErrorHandler: duplicate call to add a handler for ${at}; this is probably caused by using inject-loader/import mocking. If so, \`import { test as rtmTest } from '@slack/infra/rtm/rtm'; mockProperty(rtmTest, 'handlers', {});\` to work around it.`:`addRtmErrorHandler: a handler is already registered for ${at}`;throw new Error(Bt)}xe[at]=Et}u(gt,"addRtmErrorHandler");function ht(at,Et){zt({functionName:"addSharedRtmHandler",handlersName:"sharedHandlers",rtmEventType:at});const _t=Object.assign(Et,{__isShared:!0});We[at]=_t}u(ht,"addSharedRtmHandler");function Zt(at,Et){zt({functionName:"addBatchRtmHandler",handlersName:"handlers",rtmEventType:at}),Ge[at]=Et}u(Zt,"addBatchRtmHandler");function rn(at,Et){Zt(at,(_t,Bt,Qt)=>{for(const Fe of _t)Et(Fe,Bt,Qt)})}u(rn,"addRtmHandler");function zt(at){let{functionName:Et,handlersName:_t,rtmEventType:Bt}=at;if(!Ge[Bt]&&!We[Bt])return;const Fe=(0,d.A)()||(0,r.A)()?`${Et}: duplicate call to add a handler for ${Bt}; this is probably caused by using inject-loader/import mocking. If so, \`import { test as rtmTest } from '@slack/infra/rtm/rtm'; mockProperty(rtmTest, '${_t}', {});\` to work around it.`:`${Et}: a handler is already registered for ${Bt}`;throw new Error(Fe)}u(zt,"throwIfHandlerRegistered");function In(at){return!!Ge[at]}u(In,"doesHandlerExist");function cn(){return Ge}u(cn,"debugGetHandlers");function Jt(){return ze}u(Jt,"debugGetPendingMessages");const dn=(0,s.A)(at=>{var Et;if(!(0,Z.M)())return!1;const _t=(Et=(0,i.getStoreInstanceByTeamId)(at))===null||Et===void 0?void 0:Et.getState();return _t&&(0,De._Z)(_t,"profile_rtm")==="on"});let sn=null,Xt={},xt=null;function en(){Xt={},sn=new Profiler({maxBufferSize:1e4,sampleInterval:0}),sn.addEventListener("samplebufferfull",u(function(){const Et=this.sampleInterval,_t=Xt;this.stop().then(Bt=>{const Qt=performance.timeOrigin;for(const[Fe,Xe]of Object.entries(_t)){if(!Xe.length)continue;const Me=new Date(Qt+Xe[0].start),U=new Date(Qt+Xe[Xe.length-1].end);(0,pe.l)("rtm",Fe,(0,Z.W)(Bt,Xe),{from:Me,until:U,sample_interval:Et})}}),en()},"samplebufferfull"))}u(en,"startProfiling");let un=!1;function yn(at){try{if(un||!dn(at))return;sn||en(),xt=performance.now()}catch(Et){un=!0,(0,c.Ay)({label:se,teamOrEnterpriseId:at}).warn("Unable to begin profiled section",Et)}}u(yn,"beginProfiledSection");function ut(at){!sn||xt===null||(at in Xt||(Xt[at]=[]),Xt[at].push({start:xt,end:performance.now()}),xt=null)}u(ut,"endProfiledSection");function Ot(at){const{rtmEventType:Et,rtmEventSubtype:_t,msgs:Bt,fromEvtLog:Qt}=at.messages,Fe=It(at),Xe=(0,c.Ay)({label:se,teamOrEnterpriseId:Fe});yn(Fe);const Me=performance.now();try{h.Ay.pauseRefetchIndefinitely();const te=at.handler,de=(0,i.getStoreInstanceByTeamId)(at.teamOrEnterpriseId),Re=de==null?void 0:de.getState();pt(te)?te(Bt,at.teamOrEnterpriseId):te(Bt,de.dispatch,de.getState);const Ye=de==null?void 0:de.getState();Re!==Ye&&Q(Et,_t)}catch(te){throw Xe.error(`Error processing ${Et}: ${te.message}`),te}finally{h.Ay.unpauseRefetchImmediately()}const U=performance.now();ut(Fe);const H=U-Me;try{(0,I.no)({teamOrEnterpriseId:Fe,rtmEventType:Et,rtmEventSubtype:_t,duration:H,msgs:Bt,fromEvtLog:Qt}),le.A.publish({type:Te.lx.RtmMetrics,update:H})}catch{}if(H>it){let te=`Processed ${Bt.length} ${Et}`;_t&&(te+=`:${_t}`),te+=" event(s)";const de=[];Bt.forEach(Re=>{var Ye;const we=(Ye=Re)===null||Ye===void 0?void 0:Ye.channel;we&&de.push(we)}),de.length&&(te+=` in channel(s) ${de.join(",")}`),te+=` over ${H.toFixed(2)}ms`,Xe.info(te)}}u(Ot,"dispatchMessages");const kt=50,be=100,Kt=.75,Vt=1.1;function on(at){return at>kt}u(on,"shouldDefer");function pn(at){return et.apply(this,arguments)}u(pn,"preprocessRtmMessagesWithTimeout");function et(){return et=(0,t.coroutine)(function*(at){let{msgs:Et,getState:_t}=at;const Bt={},Qt=3e4,Fe=n.S.delay(Qt,Bt),Xe=n.S.map(Et,U=>W(U,_t).catch(a.A),{concurrency:1});(yield n.S.race([Xe,Fe]))===Bt&&(0,c.Ay)({getState:_t}).warn("Preprocessing messages took too long; continue to process queue")}),et.apply(this,arguments)}u(et,"_preprocessRtmMessagesWithTimeout");function At(at){return Rt.apply(this,arguments)}u(At,"routeMessages");function Rt(){return Rt=(0,t.coroutine)(function*(at){let{messages:Et,teamOrEnterpriseId:_t,elapsed:Bt}=at;const Qt=bt({messages:Et,teamOrEnterpriseId:_t});return!Qt||St(_t)?Bt:Ft({routedHandler:Qt,elapsed:Bt})}),Rt.apply(this,arguments)}u(Rt,"_routeMessages");function Ft(at){return $t.apply(this,arguments)}u(Ft,"dispatchMessagesWithPreprocessing");function $t(){return $t=(0,t.coroutine)(function*(at){let{routedHandler:Et,elapsed:_t}=at;const Bt=performance.now(),Qt=(0,i.getStoreInstanceByTeamId)(Et.teamOrEnterpriseId);yield pn({msgs:Et.messages.msgs,getState:Qt.getState});const Fe=performance.now();Ot(Et);let Xe=_t;return Fe-Bt>kt&&(Xe=0),Xe+=performance.now()-Fe,Xe}),$t.apply(this,arguments)}u($t,"_dispatchMessagesWithPreprocessing");function vn(at){return Rn.apply(this,arguments)}u(vn,"handleNextMessageFromQueue");function Rn(){return Rn=(0,t.coroutine)(function*(at){let{queue:Et,teamOrEnterpriseId:_t,elapsed:Bt=0}=at;for(var Qt;Et&&Et.length>0&&!(!((Qt=Et[0])===null||Qt===void 0)&&Qt.type);)Et.shift();if(!Et||!Et.length)return n.S.resolve();const Fe=(0,c.Ay)({teamOrEnterpriseId:_t,label:se});try{K(Et),B(Et)}catch{}const Xe=Et[0].type,Me=Et[0].subtype,U=(0,q.Wu)(Et[0]);let H=Le(Xe,Me);const te=[Et[0]],de=[];for(let ot=1;ot<Et.length&&te.length<H&&de.length<H;ot++)if(Et[ot].type===Xe&&Et[ot].subtype===Me)te.push(Et[ot]);else if(q.Sj.has(Et[ot].type))de.push(Et[ot]);else break;const Re=te.length;Re>1&&Fe.debug(se,`Batch processing ${Re} of type ${Xe}, skipping ${de.length} interleaved events ${de.map(ot=>ot.type).join(",")}`);let Ye=Bt;try{Ye=yield At({messages:{rtmEventType:Xe,rtmEventSubtype:Me,msgs:te,fromEvtLog:U},teamOrEnterpriseId:_t,elapsed:Ye})}catch(ot){Fe.error(`Error while processing ${Re} ${Xe} event(s)`,ot)}finally{Re!==te.length&&(Fe.error(`Message batch size for type (${Xe}) changed during handling`),Fe.warn(`Original batch size: ${Re} Post-handler batch size: ${te.length}`));const ot=Re+de.length;Et.splice(0,ot,...de)}const we=on(Ye),vt=document.visibilityState==="visible";return H=Le(Xe,Me),vt&&(we?H>1&&Ye>be&&(Ue(Xe,Me,Math.max(1,Math.floor(H*Kt))),Fe.debug(se,`Maximum batch size decreased to ${Le(Xe,Me)}`)):H<Ae&&te.length===H&&(Ue(Xe,Me,Math.min(Ae,Math.ceil(H*Vt))),Fe.debug(se,`Maximum batch size increased to ${Le(Xe,Me)}`))),Et.length?vt&&we?n.S.delay(kt).then(()=>{ke(_t)}):vn({queue:Et,teamOrEnterpriseId:_t,elapsed:Ye}):n.S.resolve()}),Rn.apply(this,arguments)}u(Rn,"_handleNextMessageFromQueue");let hn=0,gn,Cn=100;function fn(){let at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,c.Wo)();if(gn)return;const Et=Date.now()-hn;if(Et<Cn){const _t=Math.min(Cn-Et,Cn),Bt=(0,v.A)()&&!(0,y.ko)((0,i.getStateForClientStore)());Bt&&at.info(se,`Setting a timeout of ${_t} ms to process more rtm events`),gn=window.setTimeout(()=>{gn=void 0,Bt&&at.info(se,`Waited ${_t} ms, processing more rtm events now`),Oe()},_t);return}Oe()}u(fn,"maybeDrainQueues");function Oe(){hn=Date.now();const at=u(()=>{const Et=Object.keys(ze);for(const _t of Et)ke(_t)},"drainQueuesFn");!Pe||He?at():(0,Ie.Gl)(at)}u(Oe,"drainQueues");function ke(at){!ze[at]||!ze[at].length||vn({queue:ze[at],teamOrEnterpriseId:at})}u(ke,"drainQueue");function je(at,Et){var _t;let Bt=0;const Qt=Et.filter(Me=>Me!=null&&Me.type?Pe&&(0,fe.Zr)(Me)?(ct({teamOrEnterpriseId:at,msg:Me}),!1):((0,q.Wu)(Me)||(Bt+=1),!0):((0,c.Ay)({teamOrEnterpriseId:at,label:se}).warn("Received attempt to enqueue an invalid message; dropping it",Me),!1));try{ce(Bt)}catch{}ze[at]=ze[at]||[];const Fe=ze[at].length,Xe=Date.now();for(const Me of Qt)Me._enqueuedAt=Xe;ze[at].push(...Qt),!Fe&&ze[at].length>0&&fn(),!Pe&&(!((_t=Qe[at])===null||_t===void 0)&&_t.length)&&tt(at)}u(je,"enqueueMessages");const Be=(0,o.Ay)("Calls the relevant rtm handlers with the given rtm message, skipping the queue and without preprocessing (this is intended for degraded mode usage only)",(at,Et,_t)=>{const Bt=(0,l.ZT)(Et()),Qt=bt({messages:{rtmEventType:_t.type,rtmEventSubtype:_t.subtype,msgs:[_t],fromEvtLog:(0,q.Wu)(_t)},teamOrEnterpriseId:Bt});Qt&&Ot(Qt)});Be.meta={name:"createThunk",key:"createThunkhandleMessageImmediatelyWithoutPreprocessing",description:"Calls the relevant rtm handlers with the given rtm message, skipping the queue and without preprocessing (this is intended for degraded mode usage only)"};const st=(0,o.Ay)("Calls the relevant handler for the given message",(at,Et,_t)=>{if(!xe[_t]){if(_t&&_t.includes&&_t.includes("started_with_org_token")){var Bt;(0,c.Ay)({getState:Et}).error(new Error(`Unexpected start error: ${_t}`),JSON.stringify({error:_t,pathname:window==null||(Bt=window.location)===null||Bt===void 0?void 0:Bt.pathname}),{subtype:"gs_start_error"})}else(0,c.Ay)({getState:Et}).error(new Error(`Unexpected start error: ${_t}`),JSON.stringify({error:_t}),{subtype:"gs_start_error"});return}xe[_t](_t,at,Et)});st.meta={name:"createThunk",key:"createThunkhandleErrorMessage",description:"Calls the relevant handler for the given message"};function St(at){const Et=(0,i.getStateByTeamId)(at);return(0,_.wx)(Et)&&!(0,_.$U)(Et)}u(St,"shouldIgnoreRtmStream");const Yt=(0,o.Ay)("Fake an RTM event for testing only",(at,Et,_t)=>{const Bt=(0,l.ZT)(Et()),Qt=bt({messages:{rtmEventType:_t[0].type,rtmEventSubtype:_t[0].subtype,msgs:_t,fromEvtLog:(0,q.Wu)(_t[0])},teamOrEnterpriseId:Bt});Qt&&Ot(Qt)});Yt.meta={name:"createThunk",key:"createThunkhandleMessagesForTest",description:"Fake an RTM event for testing only"};const tn={handleNextMessageFromQueue:vn,shouldIgnoreRtmStream:St,errorHandlers:xe,handlers:Ge,sharedHandlers:We,currentMaxBatchSize:Ce,drainQueues:Oe,drainQueue:ke,maybeDrainQueues:fn,queueDrainTimeout:gn,lastQueueDrainTimestamp:hn,pendingMessages:ze};Object.defineProperty(tn,"handleNextMessageFromQueue",{get:()=>vn,set:at=>{vn=at}}),Object.defineProperty(tn,"errorHandlers",{get:()=>xe,set:at=>{xe=at}}),Object.defineProperty(tn,"handlers",{get:()=>Ge,set:at=>{Ge=at}}),Object.defineProperty(tn,"sharedHandlers",{get:()=>We,set:at=>{We=at}}),Object.defineProperty(tn,"currentMaxBatchSize",{get:()=>Ce,set:at=>{Ce=at}}),Object.defineProperty(tn,"drainQueues",{get:()=>Oe,set:at=>{Oe=at}}),Object.defineProperty(tn,"drainQueue",{get:()=>ke,set:at=>{ke=at}}),Object.defineProperty(tn,"maybeDrainQueues",{get:()=>fn,set:at=>{fn=at}}),Object.defineProperty(tn,"queueDrainTimeout",{get:()=>gn,set:at=>{gn=at}}),Object.defineProperty(tn,"lastQueueDrainTimestamp",{get:()=>hn,set:at=>{hn=at}}),Object.defineProperty(tn,"pendingMessages",{get:()=>ze,set:at=>{ze=at}}),(0,m.ul)("rtm",{handlers:Ge,errorHandlers:xe,interceptHandler:(at,Et)=>{const _t=Ge[at];Ge[at]=function(){for(var Bt=arguments.length,Qt=new Array(Bt),Fe=0;Fe<Bt;Fe++)Qt[Fe]=arguments[Fe];Et(_t,...Qt)}},getPendingMessages:()=>ze,globalQueue:{drainQueues:Oe,drainQueue:ke,maybeDrainQueues:fn,getCurrentMaxBatchSize:()=>Ce,setCurrentMaxBatchSize:at=>{Ce=at},setQueueDrainInterval:at=>{Cn=at}}})},5387083734:(j,p,e)=>{"use strict";e.d(p,{IE:()=>v});var t=e(862210999),n=e(9804928153),s=e(796111729),a=e(4473827453),c=e.n(a),o;(function(y){y.Background="background",y.UserVisible="user-visible",y.UserBlocking="user-blocking"})(o||(o={}));const i=(0,s.Wo)({label:"SCHEDULER"}),l="scheduler"in n.J&&(0,t.A)(n.J.scheduler.postTask),_=50;let d=0,r=null;const m=u((y,I)=>{let{label:T,priority:f,delay:g}=I;if(!l)return y();d+=1;const M=performance.now();return n.J.scheduler.postTask(()=>{const A=performance.now(),O=A-M,D=r?A-r:0;r=A,O-g>_&&i.debug(`${T} task (${f}) executed with delay of ${Math.round(O)}ms and a configured delay of ${g}ms - time since last task: ${D}ms - Task queue length: ${d}`);const C=y();return d-=1,C},{priority:f,delay:g})},"runWithPriority"),h=u(()=>{if(l)return d},"getTaskQueueLength"),v=u((y,I,T)=>m(I,{label:y,priority:o.Background,delay:(T==null?void 0:T.delay)||0}),"runWithBackgroundPriority")},2180140255:(j,p,e)=>{"use strict";e.d(p,{A:()=>T});var t=e(3134334389),n=e(5255740490),s=e(1251564078),a=e(4887323608),c=e(735940183),o=e(268083624),i=e(1610251172),l=e(6084388622),_=e(5249175977),d=e(9874616273),r=e(2568070692),m=e(2786906754);function h(){return h=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var M=arguments[g];for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(f[A]=M[A])}return f},h.apply(this,arguments)}u(h,"_extends");const v=new c.Ay("find_team");function y(f,g){if((0,a.A)())return(0,m.M6)(location.href,"locale",g);const M=location.href.replace(`${location.protocol}//${location.hostname}`,"").replace(/^\/intl\/[^/]+\//,"/");return f==="en-us"?M:`/intl/${f}${M}`}u(y,"getUrlForLocale");let I=u(class extends t.Component{render(){const{hideRegionPicker:g,showLogo:M,govSlackTheme:A,joinerRedesignTreatment:O}=this.props,D=(0,n.A)("p-refreshed_page__footer_link p-refreshed_page__footer_link--main",{"p-refreshed_page__footer_link--gov_slack":A}),E=(0,n.A)("full_width",{"p-refreshed_page__full_width_footer":O}),C=t.createElement("footer",{className:"p-refreshed_page__footer"},t.createElement(l.jV,{href:(0,s.v)("/legal"),className:D,autoClogProps:{elementName:"get_started_footer_link_legal",onClick:{enableClogAction:!0}}},v.rt("Privacy & Terms")),t.createElement(l.jV,{href:(0,s.v)("/help/requests/new"),className:D,autoClogProps:{elementName:"get_started_footer_link_contact",onClick:{enableClogAction:!0}}},v.rt("Contact Us")),!g&&t.createElement(_.Wv,{allowanceX:0,overlayClassName:"p-refreshed_page__footer_overlay",position:"top",renderPopover:S=>t.createElement(_.AM,h({offsetX:-9,offsetY:-5,modalBodyOpenClassName:"p-refreshed_page__footer_modal--open",ariaLabel:v.t("Change region"),ariaRole:"dialog",shouldAnchorAtInitialPosition:!0},S),t.createElement("div",{className:"p-refreshed_page__footer_locales"},t.createElement("div",{className:"bold margin_bottom_50"},v.rt("Change region")),t.createElement("div",{className:"margin_bottom_100"},v.rt("Selecting a different region will change the language and content of Slack.com.")),t.createElement("div",{className:"display_flex"},[{title:v.t("Americas"),locales:[{locale:"es-LA",geocode:"es-la",name:"Latinoam\xE9rica (Espa\xF1ol)"},{locale:"pt-BR",geocode:"pt-br",name:"Brasil (Portugu\xEAs)"},{locale:"en-US",geocode:"en-us",name:"United States (English)"}]},{title:v.t("Europe"),locales:[{locale:"de-DE",geocode:"de-de",name:"Deutschland (Deutsch)"},{locale:"es-ES",geocode:"es-es",name:"Espa\xF1a (Espa\xF1ol)"},{locale:"fr-FR",geocode:"fr-fr",name:"France (Fran\xE7ais)"},{locale:"it-IT",geocode:"it-it",name:"Italia (italiano)"},{locale:"en-GB",geocode:"en-gb",name:"United Kingdom (English)"}]},{title:v.t("Asia Pacific"),locales:[{locale:"zh-CN",geocode:"zh-cn",name:"\u7B80\u4F53\u4E2D\u6587"},{locale:"zh-TW",geocode:"zh-tw",name:"\u7E41\u9AD4\u4E2D\u6587"},{locale:"en-IN",geocode:"en-in",name:"India (English)"},{locale:"ja-JP",geocode:"ja-jp",name:"\u65E5\u672C (\u65E5\u672C\u8A9E)"},{locale:"ko-KR",geocode:"ko-kr",name:"\uD55C\uAD6D\uC5B4"}]}].map(b=>{let{title:k,locales:W}=b;return t.createElement("div",{className:"margin_right_50 display_flex flex_direction_column",key:k},t.createElement("div",{className:"bold margin_bottom_50"},k),W.map(N=>{let{locale:V,geocode:R,name:P}=N;return t.createElement(l.jV,{key:V,href:y(R,V),target:"_self",className:"p-refreshed_page__footer_link margin_bottom_50",autoClogProps:{elementName:"get_started_footer_link_change_region_locale",elementValue:V,onClick:{enableClogAction:!0}},onClick:this.onClickLocale({locale:V,geocode:R})},P)}))}))))},t.createElement("div",null,t.createElement(l.jV,{onClick:this.onClickChangeRegion,href:"#",className:D,autoClogProps:{elementName:"get_started_footer_link_change_region",onClick:{enableClogAction:!0}}},t.createElement(i.A,{type:"globe",size:"inherit",className:"margin_right_25"}),v.rt("Change region"),t.createElement(i.A,{type:"chevron-medium-down",size:"inherit"})))));return t.createElement("div",{className:E},t.createElement("div",{className:(0,n.A)("p-refreshed_page__footer_container",{"p-refreshed_page__footer_container--gov_slack":A})},t.createElement(t.Fragment,null,M&&t.createElement(d.A,{width:80,height:20,className:"p-app_slack_logo"}),C)))}constructor(g){super(g),this.onClickChangeRegion=M=>{M.preventDefault()},this.onClickLocale=M=>{let{locale:A,geocode:O}=M;return()=>{const D=(0,r.LL)((0,o.v8)("c")||"")||{};D.geocode=O;const E=(0,r.Zf)(D,{space:""});(0,o.n0)("i18n_locale",A,365*10,"slack.com"),E&&(0,o.n0)("c",E,365*10,"slack.com")}},this.popoverTriggerRef=t.createRef(),this.state={}}},"RefreshedFooter");I.displayName="RefreshedFooter";const T=I},2308565927:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(3134334389),n=e(5255740490);const s=u(c=>{let{children:o,heading:i,subHeading:l,titleImage:_,headingClassName:d,subHeadingClassName:r,dataQa:m,showFullWidthContent:h,className:v,isSharedWorkspaceInvite:y}=c;return t.createElement("div",{className:(0,n.A)("p-refreshed_page",{"p-refreshed_page--workspace":y,full_width:h},v),"data-qa":m},_&&_,i&&t.createElement("h1",{className:(0,n.A)("p-refreshed_page__heading",d,{margin_bottom_200:!l,full_width:h,"p-refreshed_page__heading--workspace":y})},i),l&&t.createElement("div",{className:(0,n.A)("p-refreshed_page__sub_heading",r,{full_width:h})},l),o)},"RefreshedPageContent");s.displayName="RefreshedPageContent";const a=s},6176558010:(j,p,e)=>{"use strict";e.d(p,{EU:()=>n});var t=e(6244014364),n;(function(i){i.Start="/",i.Find="/find",i.Create="/create",i.CreateNew="/createnew",i.Confirm="/confirm",i.Check="/check",i.FindAgain="/find_again",i.Email="/email",i.Error="/error",i.ConfirmationCode="/confirmemail",i.DomainClaimed="/domain",i.Landing="/landing",i.ConfirmTrust="/confirmtrust",i.IgnoreInvite="/ignoreinvite",i.SignIn="/signin",i.Workspaces="/workspaces",i.SharedInviteLoggedOut="/sharedinvite",i.SharedInviteLanding="/sharedinvitelanding",i.SelectWorkspaces="/select",i.AppleSignIn="/apple",i.AddName="/addname"})(n||(n={}));var s;(function(i){i.SharedChannelInviteAlreadyAccepted="invite_used",i.SharedChannelInviteInvlidLink="invalid_link",i.DirectMessageInviteInactive="inactive_invite",i.Generic="generic"})(s||(s={}));const a={[n.Start]:t.UiStep.START_WITH_A_WORKSPACE,[n.Create]:t.UiStep.CREATE_NEW_WORKSPACE,[n.CreateNew]:t.UiStep.CREATE_NEW_WORKSPACE,[n.Find]:t.UiStep.FIND_YOUR_WORKSPACE,[n.Check]:t.UiStep.CHECK_YOUR_EMAIL,[n.FindAgain]:t.UiStep.FIND_YOUR_WORKSPACE,[n.Email]:t.UiStep.ENTER_EMAIL,[n.Confirm]:t.UiStep.ENTER_EMAIL,[n.Error]:t.UiStep.GET_STARTED_ERROR,[n.ConfirmationCode]:t.UiStep.GET_STARTED_CONFIRM_CODE,[n.DomainClaimed]:t.UiStep.GET_STARTED_DOMAIN_CLAIMED,[n.Landing]:t.UiStep.GET_STARTED_CREATOR_LANDING,[n.SignIn]:t.UiStep.GET_STARTED_SIGN_IN,[n.Workspaces]:t.UiStep.GET_STARTED_WORKSPACES,[n.SharedInviteLoggedOut]:t.UiStep.SHARED_INVITE_LOGGED_OUT,[n.SharedInviteLanding]:t.UiStep.SHARED_INVITE_LANDING,[n.SelectWorkspaces]:t.UiStep.GET_STARTED_SELECT_WORKSPACES,[n.AppleSignIn]:t.UiStep.GET_STARTED_APPLE_SIGN_IN,[n.ConfirmTrust]:t.UiStep.GET_STARTED_CONFIRM_TRUST,[n.IgnoreInvite]:t.UiStep.GET_STARTED_IGNORE_INVITE,[n.AddName]:t.UiStep.GET_STARTED_ADD_NAME};var c;(function(i){i.Invited="invited",i.Joined="joined",i.Whitelisted="whitelisted"})(c||(c={}));var o;(function(i){i.Email="email",i.GoogleIdToken="google_id_token",i.Apple="apple_id_token"})(o||(o={}))},3700949338:(j,p,e)=>{"use strict";e.d(p,{$:()=>n,A:()=>t});function t(s){return s>=48&&s<=57}u(t,"isNumericKey");function n(s){const a=String.fromCharCode(s);return!!/[a-zA-Z0-9]/.test(a)}u(n,"isAlphaNumericKey")},7520119303:(j,p,e)=>{"use strict";e.d(p,{K_:()=>D,XR:()=>A,yb:()=>O});var t=e(735940183),n=e(7909758472),s=e(7940058138),a=e(796111729),c=e(6642124196),o=e(4465846026),i=e(847279891),l=e(7100005318),_=e(3856748711),d=e(760547858);const r=new t.Ay("channel_sidebar"),m=new t.Ay("lists"),h=new t.Ay("app_launcher"),v=new t.Ay("setup_page"),y=new t.Ay("client"),I=new t.Ay("search"),T=new t.Ay("solution_guide"),f=new t.Ay("tenured_team_solutions"),g={[s.c.Composer]:()=>r.t("New message"),[s.c.Drafts]:()=>r.t("Drafts & sent"),[s.c.ScheduledMessages]:()=>r.t("Scheduled",{ns:"channel_sidebar"}),[s.c.Sent]:()=>r.t("Sent"),Pthread:()=>r.t("Thread"),[s.c.Empty]:()=>{},[s.c.Unreads]:()=>r.t("Unreads"),[s.c.Apps]:()=>h.t("Apps",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"}),[s.c.Shortcuts]:()=>h.t("Workflows",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"}),[s.c.BrowseWorkflowsManagedByYou]:E=>(0,o.oF)(E)?r.t("Workflows managed by you"):"",[s.c.BrowseYourWorkflowTemplates]:()=>r.t("Your workflow templates"),[s.c.BrowseWorkflowTemplates]:()=>h.t("Templates",{fallbackHash:"f25b700ed9f092123a43acb205a6869342cf9dd6",fallbackHashNs:"workflow_builder"}),[s.c.Activity]:()=>r.t("Activity"),[s.c.Saved]:()=>r.t("Saved items"),[s.c.PaidBenefits]:()=>r.t("Paid Plan Benefits"),[s.c.BrowseChannels]:()=>r.t("All channels"),[s.c.SetupTeamName]:()=>v.t("Setup Team Name"),[s.c.SetupProfile]:()=>v.t("Profile"),[s.c.SetupChannels]:()=>v.t("Setup Channels"),[s.c.SetupInvites]:()=>v.t("Setup Invites"),[s.c.SetupCalendarContactImport]:()=>"Setup Contact Import",[s.c.SetupTada]:()=>"Setup Tada",[s.c.SetupWelcome]:()=>v.t("Setup Welcome"),[s.c.SetupPeople]:()=>v.t("Setup People"),[s.c.SetupStraightToPaidPlans]:()=>v.t("Setup Plans"),[s.c.JoinerLaunchpad]:()=>r.t("Get started"),[s.c.ResurrectedUserWelcome]:E=>(0,i.Yo)(E)?r.t("Welcome back"):"",[s.c.SolutionGuide]:E=>(0,l.qV)(E)?T.t("Set up your workspace"):"",[s.c.TenuredTeamSolutions]:E=>(0,d.OO)(E)?f.t("Tips for how you work"):"","Pbrowse-channels-prototype":()=>r.t("All channels"),[s.c.BrowseFiles]:()=>I.t("All files"),[s.c.Calendar]:E=>(0,n.A)(E)?r.t("Calendar"):"",[s.c.BrowsePeople]:()=>r.t("All people"),[s.c.BrowseExternalContacts]:()=>r.t("External people"),[s.c.BrowseUserGroups]:()=>r.t("User groups"),[s.c.BrowseExternalWorkspaces]:()=>r.t("External workspaces"),[s.c.AllDms]:()=>r.t("Direct messages"),[s.c.Search]:()=>y.t("Search Results",{fallbackHash:"bce06414177f72ab70e6387b6af9f8ceef0d6049",fallbackHashNs:"search"}),[s.c.SlackConnect]:()=>r.t("Slack Connect"),[s.c.SlackConnectInvitation]:()=>r.t("Slack Connect Invitation"),[s.c.OfflineOutbox]:()=>"Offline outbox",[s.c.Huddles]:()=>"Huddles",[s.c.BrowseHuddles]:()=>"Huddles",[s.c.Today]:()=>"Today",[s.c.Later]:()=>r.t("Later"),[s.c.BrowseOrgChart]:()=>I.t("Org chart"),[s.c.Items]:E=>(0,c.$7)(E)?m.t("Items"):"Items","Pasync-modals":()=>"Modals",[s.c.BrowseCanvases]:()=>r.t("Canvases"),[s.c.BrowseLists]:()=>"Lists",[s.c.Todos]:()=>"Todos",[s.c.Recents]:()=>I.t("Recently viewed"),[s.c.DailyDigest]:()=>r.t("Recap"),[s.c.ActionItems]:E=>(0,_.y)(E)?r.t("Action items"):"Action items",[s.c.Inbox]:E=>(0,_.y)(E)?r.t("Inbox"):"Inbox"},M={Pdms:()=>r.t("All direct messages")};function A(E){return!E||!g[E]?((0,a.Wo)().error(`getLabelFunctionForPage called with invalid pageId: ${E}`),null):g[E]}u(A,"getLabelFunctionForPage");const O=u((E,C)=>A(C.id)(E),"getPageLabel");function D(E){if(E)return M[E]}u(D,"getAriaLabelFunctionForPage")},3639008527:(j,p,e)=>{"use strict";e.d(p,{Z:()=>m});var t=e(9706240641),n=e.n(t),s=e(3134334389),a=e(1031947056),c=e(6772985425),o=e(9132066222),i=e(735940183),l=e(4275787242),_=e(5060694341);const d=new i.Ay("tabbed-channel"),r={name:"warning"},m=(0,a.Ay)("Adds a new tab to a channel",function(){var h=(0,t.coroutine)(function*(v,y,I){let{channelId:T,type:f,data:g,label:M,reason:A}=I;const O=y(),D=(0,o.U6)(O);let E={ok:!1,tabs:[]};try{E=yield v((0,c.y)({type:f,data:g,channelId:T,label:M,reason:A}))}catch(C){let S;switch(C.name){case c.d.TooManyTabs:S=D?d.t("Maximum number of tabs added."):"Maximum number of tabs added.";break;default:S=D?d.t("Cannot add tab."):"Cannot add tab."}throw v((0,_.M)({element:s.createElement(l.A,{svgIconProps:r},s.createElement("span",null,S))})),C}return E});return function(v,y,I){return h.apply(this,arguments)}}());m.meta={name:"createThunk",key:"createThunkaddTabToChannel",description:"Adds a new tab to a channel"}},1049138627:(j,p,e)=>{"use strict";e.d(p,{A:()=>R});var t=e(1031947056),n=e(9536404279),s=e(4350638406),a=e(2416684575),c=e(10127715),o=e(8847766420),i=e(7334104107),l=e(7201482752),_=e(6533394955),d=e(4096483543),r=e(1407713935),m=e(8517785520),h=e(5795074931),v=e(9101533895),y=e(3603672985),I=e(9290914927),T=e(4293996456),f=e(2802517438),g=e(3051870320),M=e(9829579108);const A=(0,M.Ay)((P,z)=>{var $,x;return(P==null||($=P.messageActivity)===null||$===void 0||(x=$.recentActivity)===null||x===void 0?void 0:x[z])||[]});A.meta={name:"createSelector",key:"createSelectorselectMessageActivityForType",description:(P,z)=>{var $,x;return(P==null||($=P.messageActivity)===null||$===void 0||(x=$.recentActivity)===null||x===void 0?void 0:x[z])||[]}};var O;(function(P){P.DM="dm"})(O||(O={}));var D=e(9012396182);function E(){if(!(0,d.A)()||!D.getFocusedWorkspace)return!1;const P=(0,_.getStateForClientStore)(),z=(0,D.getFocusedWorkspace)(P);return(0,f.A)((0,_.getStateByTeamId)(z))}u(E,"getFocusedWorkspacePrimaryView");const C=(0,t.Ay)("process dm messages for Megaphone client event",(P,z,$)=>{const x=z();if(!(0,r.LI)((0,v.OL)(x,(0,i.WY)($))))return;const ne=5,re=1,_e=60*3,G=Date.now()/1e3,ge=O.DM,oe=A(x,ge);oe.push($);const me=(0,h.WR)(x),ue=E();let ae,he=0,ce=0,ee=[];oe.forEach(J=>{const X=(0,i.WY)(J);if(ue!==X)return;const F=+(0,m.j)(J);if(G-F>_e)return;const L=(0,i.F6)(J);me===L?he+=1:(ce+=1,ae=L),ee.push(J)}),he+ce>=ne&&he>=re&&ce>=re&&(0,I.gd)(x,ae)===T.hR&&(P((0,y.JL)({type:"messaging_activity"})),ee=[]),P((0,g.m)({type:ge,messages:ee}))});C.meta={name:"createThunk",key:"createThunkprocessDmMegaphoneClientEvent",description:"process dm messages for Megaphone client event"};const S=C,b=(0,t.Ay)("Process received/sent messages",(P,z,$)=>{if(!(0,d.A)()||!D.isFocusedWorkspaceInTeamOrEnterprise)return;const x=(0,o.JY)(z());if(!x)return;const Y=(0,_.getStateForClientStore)();if(!(0,D.isFocusedWorkspaceInTeamOrEnterprise)(Y,x))return;const ne=E();ne&&$.forEach(re=>{const _e=re,G=(0,i.WY)(_e);!G||ne!==G||(0,l.A)(_e)||(0,_.dispatchForTeamId)(x,S(_e))})});b.meta={name:"createThunk",key:"createThunkprocessIncomingMessages",description:"Process received/sent messages"};const k=b;var W=e(4365697073),N=e(3110884894);const V=(0,t.Ay)("Appends raw / unprocessed messages to the messages and history stores",(P,z,$)=>{const x=P((0,a.A)({imsgs:$}));P((0,c.Kc)(x));const Y=(0,o.JY)(z());if(!Y)return;P(k(x));const ne=new Map;for(const _e of $)_e.channel!=null&&(ne.has(_e.channel)||ne.set(_e.channel,[]),ne.get(_e.channel).push(_e.ts));for(const[_e,G]of ne.entries()){const ge={channelId:_e,timestamps:G,oldest:G[0],hasMore:!1,append:!0};P((0,n.VG)(ge)),(0,s.mY)(Y,_e,G)}const re=new Map;for(const _e of $){if(!(0,W.n)(_e))continue;const G=(0,N.Iu)(_e.channel,_e.thread_ts);G!=null&&(re.has(G)||re.set(G,[]),re.get(G).push(_e.ts))}for(const[_e,G]of re.entries())P((0,n.VG)({channelId:_e,timestamps:G,oldest:G[0],hasMore:!1,append:!0}));return x});V.meta={name:"createThunk",key:"createThunkappendMessages",description:"Appends raw / unprocessed messages to the messages and history stores"};const R=V},4066669727:(j,p,e)=>{"use strict";e.d(p,{KH:()=>W,MC:()=>P,PL:()=>R,SV:()=>N,a$:()=>S,gO:()=>b});var t=e(9706240641),n=e.n(t),s=e(7542104324),a=e(2141099977),c=e(8802876335),o=e(796111729),i=e(6533394955),l=e(1345902898),_=e(8778137680),d=e(5795074931),r=e(7592559649),m=e(4949104520),h=e(6066600258),v=e(9240258658),y=e(1031947056),I=e(5332875232);const T="AWARENESS-MANAGER",f="AWARENESS-MANAGER-CHIME",g=`[${T}] unknown awareness subtype`,M=3e4,A=250,O=5e3,D=15,E=(0,y.Ay)("Query for awareness state from other users who are subscribed to the topic",function(){var $=(0,t.coroutine)(function*(x,Y,ne){const re=Y();if(!(0,c.ON)(re))return;const _e=(0,d.WR)(re),G={channel:ne,type:"awareness",subtype:l.Pz.QUERY,user:_e};try{x((0,a.tN)(G))}catch(ge){(0,o.Ay)({getState:Y}).warn("Failed to send awareness query: ",ge)}});return function(x,Y,ne){return $.apply(this,arguments)}}());E.meta={name:"createThunk",key:"createThunkmaybeSendAwarenessQuery",description:"Query for awareness state from other users who are subscribed to the topic"};const C=(0,y.Ay)("Send awareness state to other users who are subscribed to the topic",function(){var $=(0,t.coroutine)(function*(x,Y,ne){const re=Y();if(!(0,c.ON)(re))return;const _e=(0,d.WR)(re),G=(0,r.fL)(re,ne,_e),ge={channel:ne,type:"awareness",subtype:l.Pz.BROADCAST,user:_e,awareness_state:G};try{x((0,a.tN)(ge))}catch(oe){(0,o.Ay)({getState:Y}).warn("Failed to send awareness query: ",oe)}});return function(x,Y,ne){return $.apply(this,arguments)}}());C.meta={name:"createThunk",key:"createThunkmaybeSendCurrentAwarenessState",description:"Send awareness state to other users who are subscribed to the topic"};const S=(0,y.Ay)("Temporarily subscribe to a topic for updates",($,x,Y)=>{const ne=x();if((0,c.ON)(ne))try{$((0,a.tN)({channel_id:Y,type:"temp_channel_sub"}))}catch(re){(0,o.Ay)({getState:x}).warn("Failed to subscribe to awareness topic: ",re)}});S.meta={name:"createThunk",key:"createThunksubscribeToAwarenessTopic",description:"Temporarily subscribe to a topic for updates"};const b=(0,y.Ay)("Temporarily unsubscribe from topic updates",($,x,Y)=>{const ne=x();if((0,c.ON)(ne))try{$((0,a.tN)({channel_id:Y,type:"temp_channel_unsub"}))}catch(re){(0,o.Ay)({getState:x}).warn("Failed to unsubscribe from awareness topic: ",re)}});b.meta={name:"createThunk",key:"createThunkunsubscribeFromAwarenessTopic",description:"Temporarily unsubscribe from topic updates"};const k=(0,y.Ay)("Alert other users who are subscribed to the topic that a subscriber has left",function(){var $=(0,t.coroutine)(function*(x,Y,ne){const re=Y();if(!(0,c.ON)(re))return;const _e=(0,d.WR)(re),G={channel:ne,type:"awareness",subtype:l.Pz.CLOSE,user:_e};try{x((0,a.tN)(G))}catch(ge){(0,o.Ay)({getState:Y}).warn("Failed to send awareness query: ",ge)}});return function(x,Y,ne){return $.apply(this,arguments)}}());k.meta={name:"createThunk",key:"createThunkmaybeSendCloseState",description:"Alert other users who are subscribed to the topic that a subscriber has left"};class W{maybeSendCurrentAwarenessState(x){const Y=(0,i.getStoreInstanceByTeamId)(this.teamId);return Y?(Y.dispatch(C(x)),!0):!1}maybeSendAwarenessQuery(x){const Y=(0,i.getStoreInstanceByTeamId)(this.teamId);return Y?(Y.dispatch(E(x)),!0):!1}maybeSendAwarenessCloseState(x){const Y=(0,i.getStoreInstanceByTeamId)(this.teamId);return Y?(Y.dispatch(k(x)),!0):!1}constructor({teamId:x}){this.onShutdownDataChannelSubscriber=()=>{},this.teamId=x}}u(W,"RtmBroadcaster");class N{onDisconnectDataChannel(){var x;(x=this.audioVideoFacade)===null||x===void 0||x.realtimeUnsubscribeFromReceiveDataMessage(this.dataChannelTopic),this.connected=!1}onConnectDatachannel(x){this.audioVideoFacade=x,this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback),this.connected=!0,(0,o.Wo)().warn(f,`broadcaster connected ${this.peerId}`),this.maybeSendAwarenessQuery(this.topicId)}onInitializeDataChannelSubscriber(){}realtimeReceiveDataMessageCallback(x){}maybeSendCurrentAwarenessState(x){var Y;if(!this.connected)return(0,o.Wo)().info(f,`${this.connected} ${x} Can't send yet, not connected`),!1;const ne=(0,i.getStoreInstanceByTeamId)(this.teamId);if(!ne)return(0,o.Wo)().warn(f,`${this.connected} ${x} Can't find teamstore for ${this.teamId}, not sending awareness state`),!1;const re=ne.getState(),_e=(0,d.WR)(re);ne.dispatch((0,_.c6)({topicId:x,userId:_e}));const G=(0,I.pL)(re),oe=(0,r.fL)(re,x,_e,G?"self":void 0).map(ue=>new v.Y.AwarenessPayload({fieldName:ue.field_name,fieldValue:ue.field_value,...this.isHuddlesAwarenessTimestampEnabled&&!!ue.field_timestamp_ms&&{fieldTimestampMs:ue.field_timestamp_ms}})),me=new v.Y.AwarenessBroadcast({channel:x,user:(0,d.WR)(ne.getState()),awarenessState:oe});return(Y=this.audioVideoFacade)===null||Y===void 0||Y.realtimeSendDataMessage(this.dataChannelTopic,v.Y.encode(new v.Y({awarenessBroadcast:me})).finish()),!0}maybeSendAwarenessQuery(x){var Y;if(!this.connected)return(0,o.Wo)().info(f,`${this.connected} ${x} Can't send yet, not connected`),!1;(0,o.Wo)().warn(f,`${this.connected} ${x} Sending awareness query`);const ne=(0,i.getStoreInstanceByTeamId)(this.teamId);if(!ne)return(0,o.Wo)().warn(f,`${this.connected} ${x} Can't find teamstore for ${this.teamId}, not sending awareness query`),!1;const re=new v.Y.AwarenessQuery({channel:x,user:(0,d.WR)(ne.getState())});return(Y=this.audioVideoFacade)===null||Y===void 0||Y.realtimeSendDataMessage(this.dataChannelTopic,v.Y.encode(new v.Y({awarenessQuery:re})).finish()),!0}maybeSendAwarenessCloseState(x){var Y;if(!this.connected)return(0,o.Wo)().info(f,`${this.connected} ${x} Can't send yet, not connected`),!1;(0,o.Wo)().warn(f,`${this.connected} ${x} Sending awareness query`);const ne=(0,i.getStoreInstanceByTeamId)(this.teamId);if(!ne)return(0,o.Wo)().warn(f,`${this.connected} ${x} Can't find teamstore for ${this.teamId}, not sending awareness query`),!1;const re=new v.Y.AwarenessClose({channel:x,user:(0,d.WR)(ne.getState())});return(Y=this.audioVideoFacade)===null||Y===void 0||Y.realtimeSendDataMessage(this.dataChannelTopic,v.Y.encode(new v.Y({awarenessClose:re})).finish()),!0}constructor({teamId:x,peerId:Y,topicId:ne,isHuddlesAwarenessTimestampEnabled:re}){this.dataChannelTopic="awareness-sync-channel",this.isHuddlesAwarenessTimestampEnabled=!1,this.onShutdownDataChannelSubscriber=()=>{this.maybeSendAwarenessCloseState(this.topicId),this.connected=!1},this.teamId=x,this.peerId=Y,this.connected=!1,this.topicId=ne,this.isHuddlesAwarenessTimestampEnabled=!!re}}u(N,"ChimeChannelBroadcaster");class V{maybeTTL(){[...new Set(this.topicToTeamMap.values())].forEach(Y=>{(0,o.Wo)().debug(T,`Running TTL for ${Y}`);const ne=(0,i.getStoreInstanceByTeamId)(Y);ne&&ne.dispatch((0,_._y)())}),this.watchedTopics.size===0&&((0,o.Wo)().info(T,"Stopping the TTL timer, nothing to watch"),clearInterval(this.periodicTTLId),this.periodicTTLId=null)}broadcastChanges(){if(Date.now()-this.lastDirtyBroadcastTime<500)return;const x=(0,m.A)(D,-.25,.25);this.dirtyTopics.forEach(Y=>{(0,h.A)(()=>{const ne=this.dataChannels.get(Y);ne&&ne.maybeSendCurrentAwarenessState(Y)&&this.dirtyTopics.delete(Y)},x)}),this.lastDirtyBroadcastTime=Date.now(),this.watchedTopics.size===0&&((0,o.Wo)().info(T,"Stopping the dirty broadcast timer, nothing to watch"),clearInterval(this.dirtyBroadcastTimeoutId),this.dirtyBroadcastTimeoutId=null)}broadcastPerodicallyToWatchedTopics(){this.watchedTopics.forEach(x=>{const Y=this.dataChannels.get(x);Y&&Y.maybeSendCurrentAwarenessState(x)&&this.dirtyTopics.delete(x)}),this.watchedTopics.size===0&&((0,o.Wo)().info(T,"Stopping the periodic broadcast timer, nothing to watch"),clearInterval(this.perodicBroadcastTimeoutId),this.perodicBroadcastTimeoutId=null)}query(){Date.now()-this.lastQueryTime<15e3||(this.watchedTopics.forEach(x=>{if(this.topicToTeamMap.get(x)){const ne=this.dataChannels.get(x);ne&&ne.maybeSendAwarenessQuery(x)&&this.dirtyTopics.delete(x)}}),this.broadcastChanges(),this.lastQueryTime=Date.now())}markTopicChanged(x){if(!this.watchedTopics.has(x)){(0,o.Wo)().info(T,`Ignoring topic change for unwatched topic ${x}`);return}this.dirtyTopics.add(x),this.dirtyBroadcastTimeoutId||((0,o.Wo)().info(T,"Starting the dirty broadcast timer"),this.dirtyBroadcastTimeoutId=setInterval(this.broadcastChanges.bind(this),A)),this.perodicBroadcastTimeoutId||((0,o.Wo)().info(T,"Starting the periodic broadcast timer"),this.perodicBroadcastTimeoutId=setInterval(this.broadcastPerodicallyToWatchedTopics.bind(this),M)),this.periodicTTLId||((0,o.Wo)().info(T,"Starting the TTL timer"),this.periodicTTLId=setInterval(this.maybeTTL.bind(this),O))}removeTopicId(x){this.dirtyTopics.delete(x),this.watchedTopics.delete(x)}watch(x,Y,ne){this.watchedTopics.add(Y),this.topicToTeamMap.set(Y,x),this.dataChannels.set(Y,ne),this.markTopicChanged(Y),this.query()}unwatch(x){this.broadcastChanges(),this.removeTopicId(x)}unwatchAll(){if(this.watchedTopics.size){const x=[...this.watchedTopics].join(" ");(0,o.Wo)().warn(T,`Clearing unexpected remaining topics: ${x}`),this.broadcastChanges(),this.watchedTopics.clear()}this.dataChannels.clear()}constructor(){this.dirtyTopics=new Set,this.watchedTopics=new Set,this.topicToTeamMap=new Map,this.dataChannels=new Map,this.lastDirtyBroadcastTime=0,this.lastQueryTime=0}}u(V,"AwarenessManager");const R=new V;class P{onConnectDatachannel(x){this.audioVideoFacade=x,this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback.bind(this)),(0,o.Wo)().warn(f,"listener connected")}onDisconnectDataChannel(){}onInitializeDataChannelSubscriber(){}onShutdownDataChannelSubscriber(){}realtimeReceiveDataMessageCallback(x){let Y;try{Y=v.Y.decode(x.data)}catch(ne){(0,o.Wo)().debug(f,`Peer Message failed during decode, ignoring peer message.
				| Error: ${ne}
				| Data Sender Attendee ID: ${x.senderAttendeeId}
				| Data Sender External Attendee ID: ${x.senderExternalUserId}
				| Topic: ${x.topic}`);return}if(Y.awarenessQuery&&Y.awarenessQuery.channel)R.markTopicChanged(Y.awarenessQuery.channel);else if(Y.awarenessBroadcast){const ne=(0,i.getStoreInstanceByTeamId)(this.teamId),re=(0,I.pL)(ne.getState()),_e=Y.awarenessBroadcast.user,G=Y.awarenessBroadcast.channel,ge=Y.awarenessBroadcast.awarenessState;if(_e&&G&&ge){const oe=ge.map(ue=>{var ae,he;return{field_name:(ae=ue.fieldName)!==null&&ae!==void 0?ae:"unknown_field",field_value:(he=ue.fieldValue)!==null&&he!==void 0?he:"unknown_value",...!!ue.fieldTimestampMs&&{field_timestamp_ms:ue.fieldTimestampMs}}}),me={user:_e,channel:G,awarenessEntries:oe,...re&&{uniqueId:x.senderAttendeeId}};ne&&ne.dispatch((0,_.zZ)(me))}}else if(Y.awarenessClose){const ne=(0,i.getStoreInstanceByTeamId)(this.teamId),re=(0,I.pL)(ne.getState()),_e=Y.awarenessClose.user,G=Y.awarenessClose.channel;_e&&G&&ne&&ne.dispatch((0,_.DQ)({topicId:G,userId:_e,...re&&{uniqueId:x.senderAttendeeId}}))}}constructor({teamId:x}){this.dataChannelTopic="awareness-sync-channel",this.teamId=x}}u(P,"ChimeChannelListener");const z=u(($,x,Y)=>{const ne=Y(),re=(0,d.WR)(ne),_e=$.awareness_state;switch($.subtype){case"query":re!==$.user&&R.markTopicChanged($.channel);break;case"broadcast":if(_e&&re!==$.user){const G={user:$.user,channel:$.channel,awarenessEntries:_e};x((0,_.zZ)(G))}break;case"close":re!==$.user&&x((0,_.DQ)({topicId:$.channel,userId:$.user}));break;default:throw new Error(g)}},"onAwarenessEvent");(0,s.d1)("awareness",z)},9781145568:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(1031947056),n=e(7053828403),s=e(395285811),a=e(1407713935),c=e(9101533895),o=e(56548687),i=e(6244014364);const l=(0,t.Ay)("Clogs a message sent or resent",function(d,r){let{channelId:m,msgTs:h,resent:v=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const y=r(),I=m?(0,c.OL)(y,m):null;let T={message_timestamp:h,channel_id:m,channel_type:m?m.charAt(0):null,channel_privacy_type:I?(0,a.K5)(I):null,is_file_channel:I?(0,s.jT)(I):null};const f=(0,n.ZR)(y);f!==null&&(T={...T,channel_session_id:f});const g=(0,o.e)({state:y}),M=v?i.EventId.MSG_RESENT:i.EventId.MSG_SENT;g.track(M,T)});l.meta={name:"createThunk",key:"createThunkclogMessageSent",description:"Clogs a message sent or resent"};const _=l},5904726069:(j,p,e)=>{"use strict";e.d(p,{r:()=>r});var t=e(3134334389),n=e(1031947056),s=e(4540171876),a=e(9236644324),c=e(5258584090),o=e(5060694341),i=e(4275787242),l=e(735940183),_=e(5332875232);const d=new l.Ay("huddles"),r=(0,n.Ay)("Copies Huddle link by Channel Id",(m,h,v,y)=>{let{channelId:I,suppressToast:T}=v;const{windowRef:f}=y(c.S),g=(0,_.Eo)(h());if(I&&(m((0,s.TE)({reason:"copy",channelId:I})).then(M=>{(0,a.x3)(M.link,f.deref())}),g&&!T)){const M={name:"check"};m((0,o.M)({element:t.createElement(i.A,{svgIconProps:M,duration:3e3},d.rt("Huddle link copied"))}))}});r.meta={name:"createThunk",key:"createThunkcopyHuddleLinkByChannelId",description:"Copies Huddle link by Channel Id"}},3694676182:(j,p,e)=>{"use strict";e.d(p,{Q7:()=>J,TE:()=>ge.A,Uf:()=>Ie});var t=e(6422693406),n=e(362134992),s=e(7530630315),a=e(1031947056),c=e(5795074931),o=e(157328471),i=e(1827030018),l=e(9132245692),_=e(796111729),d=e(9665027958),r=e(9706240641),m=e(9113979368),h=e(8840779375),v=e(9746734072),y=e(2101927269),I=e(9101533895),T=e(5467378328),f=e(9530687876);const g=(0,a.Ay)(f.rd.BULK_UPDATE_CHANNELS,function(De,pe){let{channels:fe}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Z=pe();if(!fe||!fe.length||!(0,v.A)(fe))return;const se=(0,y.A)(fe,"id"),Ae=[],Ce=!1;se.length&&(se.forEach(Le=>{const Ue=(0,I.OL)(Z,Le.id,Ce);Ae.push({...Ue,...Le})}),De((0,T.U)({channels:Ae,reason:f.rd.BULK_UPDATE_CHANNELS})))});g.meta={name:"createThunk",key:"createThunkbulkUpdateChannels",description:f.rd.BULK_UPDATE_CHANNELS};var M=e(6613382951),A=e(7438375976),O=e(4446301238),D=e(8455301571),E=e(8571983633),C=e(4013618389),S=e(7486305635),b=e(8802876335),k=e(3683482182),W=e(4459831283);const N=(0,a.Ay)("Update the unread counts in response to client.counts",(De,pe,fe)=>{if(!fe)return;const Z=pe(),se={},Ae={},Ce={},Le=(0,W.FT)(Z);fe.forEach(Ue=>{const{id:Pe,unread_cnt:He,unread_highlight_cnt:Qe}=Ue,lt=Le&&!(0,E.A)(Ue==null?void 0:Ue.vip_count)?Ue==null?void 0:Ue.vip_count:void 0;se[Pe]={unreadCnt:He||0,unreadHighlightCnt:Qe||0,unreadVIPMentionCnt:Le?lt||0:void 0};const qe=(0,I.OL)(Z,Pe);if(!He&&!Qe||!(0,C.F)(Z,qe))return;(0,S.d$)(Z,qe)&&(Ce[Pe]=!0);const ct=(0,C.v)(Z,qe)?He:Qe,{reachedEnd:tt}=(0,D.tp)(Z,Pe),it=(0,b.UJ)(Z);tt&&it?Ae[Pe]=(0,k.Lh)(Z,Pe):Ae[Pe]={unreadCnt:He,unreadHighlightCnt:ct||Qe,unreadVIPMentionCnt:Le?lt:void 0}}),De((0,o.SO)({initialUnreads:se,countsPerChannel:Ae,channelsToSuppress:Ce}))});N.meta={name:"createThunk",key:"createThunkinitializeUnreadCountsFromChannels",description:"Update the unread counts in response to client.counts"};var V=e(4368281601),R=e(6007206761),P=e(9289081806),z=e(6495946979),$=e(395285811),x=e(1407713935),Y=e(9762304444);const ne=(0,Y.Ay)("TS.ensureFullyBooted",()=>{throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")});var re=e(4096483543),_e=e(1949656963),G=e(4191588167),ge=e(4660031767),oe=e(6695353875);const me="COUNTS",ue=(0,a.Ay)("Apply counts to channel objects and update stores",function(){var De=(0,r.coroutine)(function*(pe,fe){let{counts:Z=[]}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,re.A)()||(yield ne());let se=fe();const Ae=[],Ce={},Le={},Ue=[],Pe=(0,b.UJ)(se),He=(0,b.yf)(se),Qe=(0,oe.lc)(se),lt=(0,W.FT)(se);(0,_.Ay)({state:se}).info(me,`Applying counts to channels. wasLastConnectFast: ${He} isConnected: ${Pe}`);const qe=Z.filter(tt=>{let{has_unreads:it,mention_count:Ge}=tt;return it||Ge}).filter(function(){let{id:tt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return!(0,I.hh)(se,tt)}).map(function(){let{id:tt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return tt});qe.length&&(yield pe((0,O.pX)({ids:qe,reason:"apply-counts-to-channels/ensure-channels",callSource:O.aI.ApplyCounts})),se=fe());const ct=(0,D.jg)(se);Z.forEach(tt=>{const it=(0,I.OL)(se,tt.id,!1);if(!it||(0,x.QR)(it)){if(!tt.has_unreads&&!tt.mention_count)return;(0,_.Ay)({state:se}).warn(me,{id:tt.id,has_unreads:tt.has_unreads,nonExistent:(0,x.QR)(it)},"applyCountsToChannels_missing_channel");return}if((0,R.F)(it)||(0,x.rW)(it)&&!(0,z.b)(it))return;if((0,$.jT)(it)){pe((0,V.k)({channelId:it.id,mentionCount:tt.mention_count,shouldSuppress:(0,S.d$)(se,it)}));return}const Ge={},{reachedEnd:We}=(0,D.tp)(se,it.id),ze=tt.has_unreads?1:0;let mt=0,pt=0,It=0,bt=!1;(0,x.LI)(it)||(0,x.LI)(tt)||(0,x.yz)(it)||(0,x.yz)(tt)?mt=tt.mention_count||ze:(bt=!0,mt=ze,pt=tt.mention_count||0,It=(tt==null?void 0:tt.vip_count)||0),!mt&&pt&&((0,_.Ay)({state:se}).warn(me,`Ignoring positive mention_count_display because has_unreads == false for ${it.id}`,{subtype:"ignoring_positive_mention_count_display"}),pt=0),Le[it.id]={unreadCnt:mt,unreadHighlightCnt:pt,unreadVIPMentionCnt:lt?It:void 0},!Qe&&We&&Pe?Ue.push(it.id):(mt!==(0,P.$M)(it)&&(Ge.unread_cnt=mt),lt&&It!==(0,P.OJ)(it)&&(Ge.vip_count=It),bt&&pt!==(0,P.BP)(it)&&(Ge.unread_highlight_cnt=pt)),tt.updated&&tt.history_invalid&&(Ce[it.id]={historyInvalidTs:tt.history_invalid,updatedTs:tt.updated},ct!=null&&ct[it.id]&&pe((0,G.A)({channelId:it.id,newHistoryInvalidTs:tt.history_invalid,newUpdatedTs:tt.updated}))),(0,m.A)(Ge)||(Ge.id=it.id,Ae.push(Ge))}),(0,m.A)(Ae)||pe(g({channels:Ae})),(0,m.A)(Ce)||pe((0,_e.ih)({updates:Ce})),pe((0,M.M)(Z)),pe((0,A.f)(Z.map(tt=>({channelId:tt.id,ts:tt.last_read})))),pe((0,o.iz)(Le)),pe(N((0,h.A)(Le,function(){let{unreadCnt:tt,unreadHighlightCnt:it,unreadVIPMentionCnt:Ge}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:arguments.length>1?arguments[1]:void 0,unread_cnt:tt,unread_highlight_cnt:it,vip_count:lt?Ge:void 0}}))),Ue.forEach(tt=>{pe((0,ge.A)({channelId:tt}));const it=(0,I.OL)(fe(),tt,!1);if(it){const Ge={unreadCnt:(0,P.$M)(it),unreadHighlightCnt:(0,P.BP)(it),unreadVIPMentionCnt:(0,P.OJ)(it)};(0,_.Ay)({state:se}).info(me,`Recounted ${tt}; initial: ${JSON.stringify(Le[tt])}; after: ${JSON.stringify(Ge)}`)}})});return function(pe,fe){return De.apply(this,arguments)}}());ue.meta={name:"createThunk",key:"createThunkapplyCountsToChannels",description:"Apply counts to channel objects and update stores"};const ae=ue,he="COUNTS",ce=(0,a.Ay)("Apply counts to channels and threads",function(De,pe){let{channels:fe,groups:Z,ims:se,mpims:Ae,threads:Ce,alerts:Le,saved:Ue,fileChannels:Pe,channelBadges:He}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Qe=pe();if(!(0,c.TZ)(Qe))return t.S.resolve();De((0,o.iz)({})),De((0,l.y)(Le||{}));const lt=ee(Pe),qe=(0,n.A)((0,s.A)(fe,Z,se,Ae,lt));return De(ae({counts:qe})).then(()=>{const ct=(0,_.Ay)({getState:pe});Ce&&(ct.info(he,`Threads has_unreads:${Ce.has_unreads} mention_count:${Ce.mention_count}`),De((0,i._)({threadsHasUnreads:Ce.has_unreads,threadsUnreadCountByChannel:Ce.unread_count_by_channel,threadsMentionCountByChannel:Ce.mention_count_by_channel}))),Ue&&De((0,d.yO)(Ue)),He&&De((0,o.$m)(He)),ct.info(he,"Completed counts processing")})});ce.meta={name:"createThunk",key:"createThunkapplyCountsToChannelsAndThreads",description:"Apply counts to channels and threads"};function ee(De){if(!De||!De.quip)return[];const pe=De.quip.mention_count_by_channel;return Object.keys(pe).map(se=>({id:se,mention_count:pe[se],has_unreads:!0}))}u(ee,"transformFileChannels");const J=ce;var X=e(9290914927),F=e(6957597272),L=e(7606781622),K=e(8276911661),B=e(6866036454),Q=e(5899351761),q=e(4726390364);const le="COUNTS",Te=(0,a.Ay)("Update unread counts",function(De,pe){let{channelId:fe,messageTs:Z}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const se=pe(),Ae=!1,Ce=(0,I.OL)(se,fe,Ae);if(!Ce||!(0,q.A)(Ce,{countFileChannels:!0}))return t.S.resolve(!0);const Le=(0,K.cA)(se),Ue=(0,X.gd)(se,Le.id)==="away",Pe=Le._presence_last_changed||(0,c.tV)(se,"start_ms"),He=(0,Q.A)({state:se,messages:[(0,L.Ld)(se,Ce.id,Z)],channel:Ce,currentUserId:Le.id,userIsAway:Ue,userPresenceLastChanged:Pe,highlightWords:(0,B.A)(se)}),Qe=He==null?void 0:He.unreadHighlightCnt;return Qe!==Ce.unread_highlight_cnt&&((0,_.Ay)({state:se}).info(le,`Updated unread_highlight_cnt for ${Ce.id}: ${Qe}`),De((0,F.b)({id:Ce.id,unread_highlight_cnt:Qe}))),t.S.resolve(!1)});Te.meta={name:"createThunk",key:"createThunkupdateUnreadCountsForThreadMentionBroadcasts",description:"Update unread counts"};const Ie=Te},574001087:(j,p,e)=>{"use strict";e.d(p,{o:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Triggers a side-effect that fetches and upserts list records");n.meta={name:"createAction",key:"createActionfetchAndUpsertRecordsCircular",description:"Triggers a side-effect that fetches and upserts list records"};var s=null},2522627261:(j,p,e)=>{"use strict";e.d(p,{w:()=>c});var t=e(1031947056),n=e(6244014364),s=e(56548687),a=e(497761763);const c=(0,t.Ay)("Clog the opening of a list",(o,i,l)=>{let{listId:_,source:d,openInNewWindow:r,channelId:m}=l;const h=(0,a.A)(_)?_:"";let v=n.UiComponentName.LISTS_MAIN_EMBED;r&&(v=n.UiComponentName.LISTS_NEW_WINDOW_EMBED),(0,s.e)({getState:i}).track(n.EventId.SLACK_LISTS,{contexts:{ui_context:{action:n.UiAction.CLICK,ui_properties:{element_name:d??"open_list"},ui_component_name:v,ui_step:n.UiStep.SLACK_LISTS_OPEN},core:{file_id:h,channel_id:m}}})});c.meta={name:"createThunk",key:"createThunkclogOpenList",description:"Clog the opening of a list"}},36177209:(j,p,e)=>{"use strict";e.d(p,{B:()=>t});var t;(function(n){n.STARRED_LISTS_SIDEBAR="starred-lists-sidebar",n.CHANNEL_TAB="channel_tab",n.CANVAS_CREATE_LIST="canvas_create_list",n.CANVAS_LIST_UNFURL="canvas_list_unfurl",n.CANVAS_LIST_UNFURL_MENU="canvas_list_unfurl_menu",n.CANVAS_FROM_QUIP="canvas_from_quip",n.LISTS_PEEK_ITEM="lists_peek_item",n.LIST_TEMPLATE_PREVIEW="list_template_preview",n.LIST_RECORD_DETAIL_CONTENT="list_record_detail_content",n.LISTS_MY_ITEMS="lists_my_items",n.LISTS_DELETED_PAGE="lists_deleted_page",n.LISTS_BROWSE_PAGE_ITEM="lists_browse_page_item"})(t||(t={}))},4191588167:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(1031947056),n=e(8847766420),s=e(4405788578),a=e(8455301571),c=e(4350638406),o=e(796111729),i=e(9536404279);const l=(0,t.Ay)("Possibly purge or invalidate channel history .",(d,r,m)=>{let{channelId:h,newHistoryInvalidTs:v,newUpdatedTs:y}=m;const I=r(),T=(0,s.Kq)(I,h),f=(0,s.QO)(I,h);v!=="0000000000.000000"&&(!T||v>T)?((0,o.Ay)({state:I}).info("COUNTS",`purging cached history for channel ${h} since counts history_invalid ${v} > cached historyInvalidTs ${T}`),d((0,i.bz)({channelId:h,includeThreads:!0}))):y!=="0000000000.000000"&&(!f||y>f)&&((0,o.Ay)({state:I}).info("COUNTS",`invalidating history for channel ${h} since counts updated ${y} > cached updatedTs ${f}`),(0,c.D1)((0,n.ZT)(I),h,(0,a.m3)(I,h)))});l.meta={name:"createThunk",key:"createThunkmaybePurgeChannelHistoryAfterMutations",description:"Possibly purge or invalidate channel history ."};const _=l},9609912577:(j,p,e)=>{"use strict";e.d(p,{A:()=>h});var t=e(3134334389),n=e(1031947056),s=e(2375333597),a=e(3677514771),c=e(56548687),o=e(6244014364),i=e(4212246463),l=e(8847766420),_=e(3707193570),d=e(5795074931),r=e(6839188756);const m=(0,n.Ay)("Opens the apps browser modal",function(v,y){let{initialTab:I,emojiNameSuggestion:T,elementName:f,emojiUrl:g,megaphoneEventOnClose:M}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const A=y(),O=(0,l.JY)(A);let D;O&&(0,_.JV)(O)?D=(0,a.H2)(A):(0,d.u8)(A)&&(D=(0,r.mf)((0,a.H7)(A))),(0,c.e)({getState:y}).track(o.EventId.ADD_CUSTOM_EMOJI_IN_CLIENT,{contexts:{ui_context:{step:"add_custom_emoji",action:"click",ui_properties:{element_type:"button",element_name:f}}}}),v((0,s.q)({element:t.createElement(i.A,{showEmojiPacks:!g,orgName:D,initialTab:I,emojiNameSuggestion:T,emojiUrl:g,megaphoneEventOnClose:M}),isStackable:!0}))});m.meta={name:"createThunk",key:"createThunkopenAddCustomEmojiModal",description:"Opens the apps browser modal"};const h=m},9786721596:(j,p,e)=>{"use strict";e.d(p,{U:()=>m});var t=e(1031947056),n=e(8677230210),s=e(613926746),a=e(8847766420),c=e(3244118357),o=e(4910963364),i=e(8276911661),l=e(5267010247),_=e(8822892075),d=e(4427921758);const r=(0,t.Ay)("Shows message pane for bots",function(h,v){let{memberId:y,serviceId:I,botProfile:T}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var f;const{member:g,bot:M,memberIsHuman:A}=(0,n.Od)(v(),{userId:y,botId:I,botProfile:T}),O=(0,a.ZT)(v())||"",D=!A||I?(0,c.AW)({member:g||void 0,bot:M,botProfile:T,currentTeamId:O}):void 0,E=(0,o.G2)(v(),{serviceId:I,homeWorkspaceId:D,memberId:y});var C;const S=(0,i.nv)(v(),y||((C=E==null||(f=E.app_user)===null||f===void 0?void 0:f.id)!==null&&C!==void 0?C:void 0));var b;return h((0,s.Z)({memberId:(b=S==null?void 0:S.id)!==null&&b!==void 0?b:void 0}))});r.meta={name:"createThunk",key:"createThunkopenMessagesForBot",description:"Shows message pane for bots"};const m=(0,t.Ay)("Shows the flexpane profile for humans or messages for bots",(h,v,y,I)=>{let{memberId:T,serviceId:f,botProfile:g}=y;const{currentTab:M,channelId:A}=I(d.j);return T&&(0,n.wC)(v(),T)?h(M?(0,l.o)((0,_.sL)((0,_.Fo)({memberId:T}),A,M.id)):(0,l.o)((0,_.Fo)({memberId:T}))):h(r({memberId:T,serviceId:f,botProfile:g}))});m.meta={name:"createThunk",key:"createThunkopenProfile",description:"Shows the flexpane profile for humans or messages for bots"}},5241075893:(j,p,e)=>{"use strict";e.d(p,{ET:()=>I,Fd:()=>f,Wb:()=>g,xz:()=>T});var t=e(3297051565),n=e.n(t),s=e(5950652755),a=e(1031947056),c=e(2141099977),o=e(796111729),i=e(8847766420),l=e(4423055085),_=e(440999534),d=e(8802876335);const r="PRESENCE-MANAGER",m={},h=u((O,D)=>{const E=(0,i.ZT)(D()),C=Object.keys(m[E]),S={type:"presence_sub",ids:C},b=(0,o.Ay)({getState:D});b.debug(r,`Sending a 'presence_sub' event with the following ids: ${C}`),O((0,c.tN)(S)).catch(k=>{k&&k.message===_.qk||b.error(`Received an error while trying to send 'presence_sub' with the following ids: ${C}, error = ${k}`)})},"sendMessageEvent");let v;function y(){return v||(v=(0,s.A)(h,100,{leading:!1})),v}u(y,"getThrottledSendMessageEvent");const I=(0,a.Ay)("Send a presence_sub event with the list of members we want to subscribe to receive presence_change events for",(O,D)=>{if(!(0,d.ON)(D())){(0,o.Ay)({getState:D}).debug(r,"The presence subscription changed while the WebSocket disconnected; will send the updated subscription once we are connected");return}y()(O,D)});I.meta={name:"createThunk",key:"createThunksendPresenceSubEvent",description:"Send a presence_sub event with the list of members we want to subscribe to receive presence_change events for"};const T=(0,a.Ay)("Adds the member to the presence subscription or increments the associated count",function(O,D){let{memberId:E}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!E||E==="USLACKBOT")return;const C=(0,i.ZT)(D());if(m[C]||(m[C]={}),m[C][E]){(0,o.Ay)({getState:D}).debug(r,`Increasing the count for ${E} by 1`),m[C][E]+=1;return}(0,o.Ay)({getState:D}).debug(r,`Adding ${E} to the presence subscription`),m[C][E]=1,O(I())});T.meta={name:"createThunk",key:"createThunkaddMemberToPresenceSubscription",description:"Adds the member to the presence subscription or increments the associated count"},T.propTypes={memberId:n().string.isRequired};const f=(0,a.Ay)("Removes the member from the presence subscription or decrements the associated count",function(O,D){let{memberId:E}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!E)return;const C=(0,i.ZT)(D());if(!(!m[C]||!m[C][E])){if(m[C][E]>1){(0,o.Ay)({getState:D}).debug(r,`Decreasing the count for ${E} by 1`),m[C][E]-=1;return}(0,o.Ay)({getState:D}).debug(r,`Removing ${E} from the presence subscription`),delete m[C][E],O(I())}});f.meta={name:"createThunk",key:"createThunkremoveMemberFromPresenceSubscription",description:"Removes the member from the presence subscription or decrements the associated count"},f.propTypes={memberId:n().string.isRequired};const g=u(O=>m[O],"getPresenceSubscriptionByTeamId"),M=u(O=>{delete m[O]},"deletePresenceSubscriptionByTeamId"),A={sendMessageEvent:h};(0,l.ul)("presenceManager",{getPresenceSubscriptionByTeamId:g})},5583430912:(j,p,e)=>{"use strict";e.d(p,{Ap:()=>a,Pv:()=>n,Ui:()=>s});var t=e(7223729463);const n=new t.a;function s(){return n.entries().filter(c=>c.value&&!c.value.isRejected()&&!c.value.isCancelled()).length}u(s,"getActiveCollabClientCount");const a=u(c=>{const o=n.get(c);return o!=null&&o.isFulfilled()?o.value():void 0},"getInitializedClient")},2580646391:(j,p,e)=>{"use strict";e.d(p,{P:()=>t});var t;(function(n){n.BOOKMARK_BAR="bookmark_bar",n.COMPOSE_BUTTON="compose_button",n.SIDEBAR_CANVAS_CMD_CLICK="sidebar_canvas_cmd_click",n.SIDEBAR_ADD_BUTTON="sidebar_add_button",n.SIDEBAR_CONTEXT_MENU="sidebar_context_menu",n.QUIP_FILE_BROWSER_NUX_CREATE_DOC="quip_file_browser_nux_create_doc",n.SHORTCUT_MENU="shortcut_menu",n.QUIP_SHORTCUT_MENU="quip_shortcut_menu",n.HEADER_OVERFLOW_MENU="header_overflow_menu",n.QUIP_CANVAS_CABINET_CREATE_DOC="quip_canvas_cabinet_create_doc",n.SHORTCUT="shortcut",n.CANVAS_PAGE_EMPTY_STATE_FREEMIUM="canvas_page_empty_state_freemium",n.TRIAL_OFFER_MODAL="trial_offer_modal",n.HUDDLE_ATTACHMENTS_CREATE="huddle_attachments_create",n.QUIP_FILE_BROWSER_CREATE_DOC="quip_file_browser_create_doc",n.BOOKMARKS_BAR_CREATE="bookmarks_bar_create",n.CREATE_CHANNEL_SPACE="create-channel-space",n.QUICKSWITCHER="quickswitcher",n.FILE_MENU="file_menu",n.CREATE_MENU="create_menu",n.MORE_CANVASES_SIDEBAR="more_canvases_sidebar",n.SLACK_DOCS_SIDEBAR="slack_docs_sidebar",n.CALL_ATTACHMENTS_CREATE="call_attachments_create",n.INSERT_CANVAS_MODAL_CREATE="insert_canvas_modal_create",n.CREATE_HUDDLE_NOTES_DOC="create_huddles_notes_doc",n.CREATE_SIDECAR_NOTES="create_sidecar_notes",n.QUIP_BOOT_HOOKS="quip_boot_hooks",n.INSERT_CANVAS_SHORTCUTS_MENU="insert_canvas_shortcuts_menu",n.SHORTCUTS_MENU_V2_ITEM_CLICK="shortcuts_menu_v2_item_click",n.INTERNAL_TEST="internal_test",n.CANVASES_PEEK_VIEW="canvases_peek_view",n.SLACK_DOCS_PEEK_VIEW="slack_docs_peek_view",n.RESURRECTED_USER_WELCOME="resurrected_user_welcome",n.SLASH_COMMAND="slash_command",n.CREATE_DOC_FROM_LIST="create_doc_from_list",n.CREATE_TEMPLATE="create_template",n.CREATE_CANVAS_FROM_MESSAGE="create_canvas_from_message",n.HUDDLE_MEETING_NOTES_AUTO_OPEN="huddle_meeting_notes_auto_open",n.CREATE_MEETING_NOTES_FROM_PLACEHOLDER="create_meeting_notes_from_placeholder"})(t||(t={}))},4849735859:(j,p,e)=>{"use strict";e.d(p,{A:()=>M});var t=e(9706240641),n=e(6422693406),s=e(4761125736),a=e(1031947056),c=e(3577873706),o=e(2985066322),i=e(1552255081),l=e(82287009),_=e(5534420337),d=e(6244014364),r=e(56548687);const m=(0,a.Ay)("Clog the creation of a doc",(A,O,D)=>{let{fileId:E,source:C}=D;(0,r.e)({getState:O}).track(d.EventId.QUIP_DOC_CREATION,{contexts:{ui_context:{ui_properties:{element_name:C},ui_component_name:d.UiComponentName.QUIP_MAIN_EMBED,ui_step:d.UiStep.QUIP_CREATION},core:{quip_file_id:E,file_id:E}}})});m.meta={name:"createThunk",key:"createThunkclogCreateDoc",description:"Clog the creation of a doc"};const h=m;var v=e(5492559860),y=e(2832209848),I=e(2494018541);const T=40*1e3,f=(0,a.Ay)("Finalize a temporary document",function(){var A=(0,t.coroutine)(function*(O,D,E){let{tempId:C,finalId:S,onCreate:b,source:k}=E;const W=yield O((0,c.A)({quipThreadId:S,reason:"finalize-quip-doc"}));O((0,I.O)({fileId:W,tempId:C})),O((0,o.A)({fileId:W,lastReadByUser:Date.now()})),b&&(k!=="create-channel-space"&&O(h({fileId:W,source:k})),b({tempId:C,finalId:S,fileId:W}))});return function(O,D,E){return A.apply(this,arguments)}}());f.meta={name:"createThunk",key:"createThunkfinalizeDoc",description:"Finalize a temporary document"};const g=(0,a.Ay)("Create a Quip doc",function(){var A=(0,t.coroutine)(function*(O,D,E){let{onCreate:C,options:S,isChannelCanvas:b,source:k}=E;const W=(0,s._Z)(D(),"canvas_tab_customization_ga")==="on";if(!(0,i.F)(D()))return(0,_.Ay)({getState:D}).error(new Error("Failed to create a canvas - user does not have permission")),n.S.reject(new Error("Cannot create canvas"));const V={usesOnlyInlineTextComments:!0,...S},P=yield(yield O((0,l.lN)())).docs.create(V);if(P.isCreated())O(f({tempId:"",finalId:P.id.get(),onCreate:C,source:k}));else{const z=setTimeout(()=>{(0,_.Ay)({getState:D}).error(new Error("createDoc timeout"),{source:k,isChannelCanvas:b})},T),$=u((x,Y)=>{P.isCreated()&&(clearTimeout(z),O(f({tempId:x,finalId:Y,onCreate:C,source:k})),P.id.unlisten($))},"listener");P.id.listen($)}return W&&!b&&O((0,v.z)({component:y.G7.CanvasTabCanvasCreated,type:y.X8.Click,reason:"canvas-created"})),P});return function(O,D,E){return A.apply(this,arguments)}}());g.meta={name:"createThunk",key:"createThunkcreateDoc",description:"Create a Quip doc"};const M=g},4119164726:(j,p,e)=>{"use strict";e.d(p,{Aw:()=>f,Zj:()=>v,vK:()=>y});var t=e(3385422400),n=e(735940183),s=e(9421999304),a=e(4761125736),c=e(8079225585),o=e(7731278967),i=e(9084547259),l=e(4843305308),_=e(5244168417),d=e(3677514771),r=e(6839188756),m=e(6642124196);const h=new n.Ay("quip_shortcut_handlers");var v;(function(g){g[g.BASICS=0]="BASICS",g[g.MEDIA=1]="MEDIA",g[g.SLACK=2]="SLACK",g[g.LAYOUT=3]="LAYOUT"})(v||(v={}));const y=u(()=>({[v.BASICS]:h.t("Basics"),[v.MEDIA]:h.t("Media"),[v.SLACK]:h.t("Slack"),[v.LAYOUT]:h.t("Layout")}),"getCategoryDetailsV2"),I=u(g=>{let{currentTeam:M,experimentCanvasInsertWorkflowMenuGroupOn:A,experimentCanvasDateMentionsGroupOn:O,experimentCanvasSetReminderFromDatePickerOn:D,experimentCanvasCreateListPrototypeGroupOn:E,teamHasListsAccess:C}=g;const S=(0,r.qR)(M),b=y(),k=b[v.BASICS],W=b[v.MEDIA],N=b[v.SLACK],V=b[v.LAYOUT],R=u((P,z,$,x)=>({id:P,name:z,canonicalName:$,hideOnEmptyQuery:x,autocomplete:!0,icon:(0,l.P)(o.r.DATE_MENTION).name,category:v.BASICS}),"dateShortcut");return[{id:_.SlackShortcutCommandType.CANVAS,name:(0,c.O)(o.r.CANVAS),canonicalName:"/canvas",autocomplete:!0,icon:(0,l.P)(o.r.CANVAS).name,category:v.BASICS,aliases:[k]},{id:_.SlackShortcutCommandType.CHECKLIST,name:(0,c.O)(o.r.CHECK_LIST),canonicalName:"/checklist",autocomplete:!0,icon:(0,l.P)(o.r.CHECK_LIST).name,category:v.BASICS,aliases:[k]},{id:_.SlackShortcutCommandType.H1,name:(0,c.O)(o.r.H1),canonicalName:"/largeheading",autocomplete:!0,icon:(0,l.P)(o.r.H1).name,category:v.BASICS,aliases:["h1",k]},{id:_.SlackShortcutCommandType.H2,name:(0,c.O)(o.r.H2),canonicalName:"/mediumheading",autocomplete:!0,icon:(0,l.P)(o.r.H2).name,category:v.BASICS,aliases:["h2",k]},{id:_.SlackShortcutCommandType.H3,name:(0,c.O)(o.r.H3),canonicalName:"/smallheading",autocomplete:!0,icon:(0,l.P)(o.r.H3).name,category:v.BASICS,aliases:["h3",k]},{id:_.SlackShortcutCommandType.PLAIN,name:(0,c.O)(o.r.PARAGRAPH),canonicalName:"/paragraph",autocomplete:!0,icon:(0,l.P)(o.r.PARAGRAPH).name,category:v.BASICS,aliases:[h.t("plain"),k]},{id:_.SlackShortcutCommandType.TABLE,name:(0,c.O)(o.r.TABLE),canonicalName:"/table",autocomplete:!0,icon:(0,l.P)(o.r.TABLE).name,category:v.BASICS,aliases:[h.t("grid"),h.t("spreadsheet"),k]},{id:_.SlackShortcutCommandType.DIVIDER,name:(0,c.O)(o.r.DIVIDER),canonicalName:"/divider",autocomplete:!0,icon:(0,l.P)(o.r.DIVIDER).name,category:v.BASICS,aliases:[h.t("horizontal line"),k]},{id:_.SlackShortcutCommandType.BULLET_LIST,name:(0,c.O)(o.r.BULLET_LIST),canonicalName:"/bulletedlist",autocomplete:!0,icon:(0,l.P)(o.r.BULLET_LIST).name,category:v.BASICS,aliases:[k]},{id:_.SlackShortcutCommandType.ORDERED_LIST,name:(0,c.O)(o.r.ORDERED_LIST),canonicalName:"/orderedlist",autocomplete:!0,icon:(0,l.P)(o.r.ORDERED_LIST).name,category:v.BASICS,aliases:[k]},{id:_.SlackShortcutCommandType.BLOCKQUOTE,name:(0,c.O)(o.r.BLOCKQUOTE),canonicalName:"/blockquote",autocomplete:!0,icon:(0,l.P)(o.r.BLOCKQUOTE).name,category:v.BASICS,aliases:[k]},{id:_.SlackShortcutCommandType.CODE,name:(0,c.O)(i.L.CODE),canonicalName:"/code",autocomplete:!0,icon:(0,l.P)(i.L.CODE).name,category:v.BASICS,aliases:[k]},...O?[{...R(_.SlackShortcutCommandType.DATE_GENERIC,(0,c.O)(o.r.DATE_MENTION),"/date"),aliases:[k]},R(_.SlackShortcutCommandType.DATE_TODAY,h.t("Today"),"/today",!0),R(_.SlackShortcutCommandType.DATE_TOMORROW,h.t("Tomorrow"),"/tomorrow",!0),R(_.SlackShortcutCommandType.DATE_YESTERDAY,h.t("Yesterday"),"/yesterday",!0)]:[],...D?[{...R(_.SlackShortcutCommandType.DATE_GENERIC,h.t("Reminder",{fallbackHash:"b87a1929f78bee9f6f3a2ac9e30465cd226ab5ec",fallbackHashNs:"slack_docs"}),"/reminder"),aliases:[k]}]:[],{id:_.SlackShortcutCommandType.VIDEO,name:(0,c.O)(o.r.VIDEO_CLIP),canonicalName:"/videoclip",autocomplete:!0,icon:(0,l.P)(o.r.VIDEO_CLIP).name,category:v.MEDIA,aliases:[W]},{id:_.SlackShortcutCommandType.AUDIO,name:(0,c.O)(o.r.AUDIO_CLIP),canonicalName:"/audioclip",autocomplete:!0,icon:(0,l.P)(o.r.AUDIO_CLIP).name,category:v.MEDIA,aliases:[W]},{id:_.SlackShortcutCommandType.IMAGE,name:(0,c.O)(o.r.IMAGE),canonicalName:"/image",autocomplete:!0,icon:(0,l.P)(o.r.IMAGE).name,category:v.MEDIA,aliases:[W]},{id:_.SlackShortcutCommandType.FILE,name:(0,c.O)(o.r.FILE),canonicalName:"/file",autocomplete:!0,icon:"file",category:v.MEDIA,aliases:[W]},...A&&S?[{id:_.SlackShortcutCommandType.WORKFLOW,name:(0,c.O)(o.r.WORKFLOW,{experimentCanvasInsertWorkflowMenuGroupOn:A}),canonicalName:"/workflow",autocomplete:!0,icon:(0,l.P)(o.r.WORKFLOW).name,category:v.SLACK,aliases:[N]}]:[],...E&&C?[{id:_.SlackShortcutCommandType.LIST,name:(0,c.O)(o.r.LIST),canonicalName:"/list",autocomplete:!0,icon:(0,l.P)(o.r.LIST).name,category:v.SLACK,aliases:[N]}]:[],{id:_.SlackShortcutCommandType.PROFILE,name:h.t("Profile"),canonicalName:"/profile",autocomplete:!0,icon:"user",category:v.SLACK,aliases:[N,h.t("user"),h.t("mention")]},{id:_.SlackShortcutCommandType.CHANNEL,name:h.t("Channel"),canonicalName:"/channel",autocomplete:!0,icon:"channel-add",category:v.SLACK,aliases:[N]},{id:_.SlackShortcutCommandType.TWO_COLUMNS,name:(0,c.O)(o.r.LAYOUT_2_COLUMNS),canonicalName:"/twocolumns",autocomplete:!0,icon:(0,l.P)(o.r.LAYOUT_2_COLUMNS).name,category:v.LAYOUT,aliases:[V]},{id:_.SlackShortcutCommandType.THREE_COLUMNS,name:(0,c.O)(o.r.LAYOUT_3_COLUMNS),canonicalName:"/threecolumns",autocomplete:!0,icon:(0,l.P)(o.r.LAYOUT_3_COLUMNS).name,category:v.LAYOUT,aliases:[V]},{id:_.SlackShortcutCommandType.CODEBLOCK,name:(0,c.O)(o.r.CODE_BLOCK),canonicalName:"/codeblock",autocomplete:!0,icon:(0,l.P)(o.r.CODE_BLOCK).name,category:v.LAYOUT,aliases:[V]}]},"getCommandsV2");function T(g){return{...g,type:"client"}}u(T,"formatShortcut");const f=(0,t.Mz)([d.H7,g=>(0,a._Z)(g,"canvas_insert_workflow_menu")==="on",g=>(0,a._Z)(g,"canvas_date_mentions")==="on",g=>(0,a._Z)(g,"canvas_set_reminder_from_date_picker")==="on",g=>(0,a._Z)(g,"canvas_create_list_prototype")==="on",g=>(0,m.Il)(g),()=>(0,s.JK)(),(g,M)=>M],(g,M,A,O,D,E,C,S)=>I({currentTeam:g,experimentCanvasInsertWorkflowMenuGroupOn:M,experimentCanvasDateMentionsGroupOn:A,experimentCanvasSetReminderFromDatePickerOn:O,experimentCanvasCreateListPrototypeGroupOn:D,teamHasListsAccess:E}).map(T).filter(k=>S||!k.hideOnEmptyQuery))},9121476043:(j,p,e)=>{"use strict";e.d(p,{A:()=>l});var t=e(1031947056),n=e(9536404279),s=e(10127715),a=e(7606781622),c=e(3164289453),o=e(3110884894);const i=(0,t.Ay)("Remove a message and its timestamp",function(_,d){let{channelId:r,ts:m,threadTs:h,broadcastDelete:v=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!r||!m))if(v)_((0,s.E$)({channelId:r,ts:m}));else{_((0,n.Np)({channelId:r,timestamp:m}));const y=!1,I=(0,a.Ld)(d(),r,m,y),T=I&&I.thread_ts||h;if(T){const f=(0,o.Iu)(r,T)||"";_((0,n.Np)({channelId:f,timestamp:m}))}_((0,s.QN)({message:{channel:r,ts:m}})),_((0,c.A)({channelId:r,item:I}))}});i.meta={name:"createThunk",key:"createThunkremoveMessageAndTimestamp",description:"Remove a message and its timestamp"};const l=i},3164289453:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3297051565),n=e.n(t),s=e(2140362605);const a=(0,s.Ay)("(noop) Remove a pinned item via side-effect");a.meta={name:"createAction",key:"createActionremovePinnedItemCircular",description:"(noop) Remove a pinned item via side-effect"},a.propTypes=n().shape({item:n().object.isRequired,channelId:n().string.isRequired}).isRequired;const c=a},8391820676:(j,p,e)=>{"use strict";e.d(p,{A:()=>k});var t=e(6422693406),n=e(6696292586),s=e(8086952004),a=e(12126472),c=e(3398586081),o=e(5950652755),i=e(1031947056),l=e(6533394955),_=e(5795074931),d=e(8847766420),r=e(2155512519),m=e(1116859610),h=e(9101533895),v=e(9536404279),y=e(1407713935),I=e(1581380967),T=e(3110884894),f=e(10127715),g=e(3087402890),M=e(6704899486),A=e(796111729),O=e(8802876335);const D=1e3,E=u((N,V,R)=>{if(V==="Vall_threads")return(0,l.dispatchForTeamId)(N,(0,g.r8)()),t.K.resolve();const P=!1,z=(0,h.OL)((0,l.getStateByTeamId)(N),V,P);if(!z)return t.K.resolve();if(R)return C(N,V,R);const $=(0,y.mz)(z);return(0,l.dispatchForTeamId)(N,(0,r.Ay)({channelId:V,type:$,oldest:null,latest:null,reason:"requestOfflineHistory"})).then(function(){let{msgs:x,hasMore:Y,isLimited:ne,pinCount:re,deleted:_e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const G=(0,l.getStateByTeamId)(N);(0,O.UJ)(G)&&!(0,M.N)(G,V)&&!(0,M.N)(G,(0,_.WR)(G))||((0,l.dispatchForTeamId)(N,(0,v.Jt)({channelId:V})),(0,l.dispatchForTeamId)(N,(0,m.A)({msgs:x,channelId:V,isLimited:ne,pinCount:re,hasMore:{hasMoreStart:Y,hasMoreEnd:!1},oldest:null,latest:null,deleted:_e})),(0,n.A)(re)&&(0,l.dispatchForTeamId)(N,(0,I.K)({channelId:V,count:re})))}).catch(x=>{(0,A.Ay)({state:(0,l.getStateByTeamId)(N)}).error(`Failed to fetch offline history for ${V}: ${x}`)})},"fetchOfflineHistory");function C(N,V,R){const P=(0,T.Iu)(V,R);return(0,l.dispatchForTeamId)(N,(0,r.$b)({channelId:V,threadTs:R,oldest:null,latest:null,reason:"requestOfflineHistory"})).then(function(){let{msgs:z,deleted:$,hasMore:x}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Y=(0,l.getStateByTeamId)(N);if((0,O.UJ)(Y)&&!(0,M.N)(Y,V)&&!(0,M.N)(Y,(0,_.WR)(Y)))return;let ne=z;const re=(0,s.A)(z,{ts:R});x&&(ne=(0,a.A)(z,{ts:R})),(0,l.dispatchForTeamId)(N,(0,v.Jt)({channelId:P})),(0,l.dispatchForTeamId)(N,(0,m.A)({msgs:ne,channelId:P,hasMore:{hasMoreStart:x,hasMoreEnd:!1},oldest:null,latest:null,deleted:$})),re&&(0,l.dispatchForTeamId)(N,(0,f.Kc)([re]))})}u(C,"fetchOfflineHistoryForThread");const S=(()=>{const N=(0,c.A)(()=>(0,o.A)(E,D),function(){for(var V=arguments.length,R=new Array(V),P=0;P<V;P++)R[P]=arguments[P];return JSON.stringify(R)});return function(){for(var V=arguments.length,R=new Array(V),P=0;P<V;P++)R[P]=arguments[P];return N(...R)(...R)}})(),b=(0,i.Ay)("Request offline history",function(N,V){let{channelId:R,threadTs:P}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return S((0,d.ZT)(V()),R,P)});b.meta={name:"createThunk",key:"createThunkrequestOfflineHistory",description:"Request offline history"},b.propTypes={};const k=b,W={fetchOfflineHistory:E,fetchOfflineHistoryForThread:C}},4587446194:(j,p,e)=>{"use strict";e.d(p,{NU:()=>X,e8:()=>F,Ay:()=>De,IY:()=>le});var t=e(2003990933),n=e(7174777686),s=e(3571452446),a=e(1649982175),c=e(3110884894),o=e(5795074931),i=e(8847766420),l=e(9536404279),_=e(9101533895),d=e(10127715),r=e(6483201417),m=e(6704899486),h=e(1031947056),v=e(796111729),y=e(9190452268),I=e(3855029223),T=e(3158767748),f=e(7715417323),g=e(9762304444);const M=(0,g.Ay)("TS.channels.read_only.stashAndFetchChannelPostingUpdates",f.A);var A=e(8737667238),O=e(662226046),D=e(9121476043),E=e(8391820676),C=e(6422693406),S=e(6580433553),b=e(6533394955),k=e(2872463257);const W={},N="cse-message-send",V="cse-message-send";let R=u(class{_send(){var fe;const{message:Z,trace:se,parentSpanId:Ae}=this._activeRequest||{};(0,v.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Sending message with clientMsgId ${Z==null?void 0:Z.client_msg_id}`);const Ce=u(()=>{var Le;return(Le=this._store)===null||Le===void 0?void 0:Le.dispatch((0,S.A)({message:Z,traceId:se==null?void 0:se.getTraceId(),parentSpanId:Ae}))},"postMessageP");return(fe=this._maybeTraceMessageSend(Ce))===null||fe===void 0?void 0:fe.then(this._activeRequest?this._activeRequest.resolve:f.A).catch(this._activeRequest?this._activeRequest.reject:f.A).finally(()=>this.resolve(Z))}_next(){if(this._activeRequest||!this._queue.length)return!1;this._activeRequest=this._queue.shift();const{messageEnqueueSpan:fe}=this._activeRequest||{};return fe==null||fe.addTags({count:this._queue.length}),fe==null||fe.close(),this._send(),(0,v.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Shifting queue, now has ${this._queue.length} messages`),!0}_maybeTraceMessageSend(fe){var Z;if(!this.shouldTraceMessageSend())return fe();const se=(Z=this._tracer)===null||Z===void 0?void 0:Z.createTrace({traceName:N,tags:{event_type:"/api/chat.postMessage"},samplingOptions:{sampleType:k.nl.ALWAYS}}),Ae=u(()=>{var Le;se&&((Le=this._tracer)===null||Le===void 0||Le.clearTrace(se))},"onResolve"),Ce=u((Le,Ue)=>{var Pe;const He={state:k.$m.ERROR};Ue.status&&(He.status=Ue.status),Ue.message&&(He.message=Ue.message),Ue.data&&Ue.data.error&&(He.reason=Ue.data.error),Le==null||Le.addTags(He),Le==null||Le.close(),se&&((Pe=this._tracer)===null||Pe===void 0||Pe.reportTrace(se))},"onError");return se==null?void 0:se.traceFn({name:V,onError:Ce,onResolve:Ae},fe)}enqueue(fe){let{trace:Z,parentSpanId:se}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new C.S((Ae,Ce)=>{const Le=Z==null?void 0:Z.startSpan("message_send_attempt:enqueue",{parentSpanId:se});this._queue.push({message:fe,messageEnqueueSpan:Le,trace:Z,parentSpanId:se,resolve:Ae,reject:Ce}),(0,v.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Enqueueing message with clientMsgId ${fe.client_msg_id}, queue has ${this._queue.length} messages`),this._next()})}resolve(fe){return!fe||!this._activeRequest||!this._activeRequest.message||fe.client_msg_id!==this._activeRequest.message.client_msg_id?!1:((0,v.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Resolving active request with clientMsgId ${fe.client_msg_id}`),this._activeRequest=null,this._next())}shouldTraceMessageSend(){return this._tracer}constructor(fe){if(!fe)throw new Error("MessageQueue requires a teamId.");if(this._teamId=fe,this._activeRequest=null,this._queue=[],this._store=(0,b.getStoreInstanceByTeamId)(fe),!this._store)throw new Error(`MessageQueue requires a store; No store matching ${fe} found.`);const Z=this._store.getState();this._tracer=(0,I.E)({state:Z})}},"MessageQueue");function P(pe){return W[pe]||(W[pe]=new R(pe)),W[pe]}u(P,"getInstance");const z={MESSAGE_SEND_TRACE_LABEL:N,MESSAGE_SEND_SPAN_LABEL:V};var $=e(9781145568),x=e(8802876335),Y=e(5345057011),ne=e(5774398667),re=e(4177200783),_e=e(7759525289),G=e(4761125736);const ge=6,oe=7,me=8,ue="restricted_action_read_only_channel",ae="restricted_action_thread_only_channel",he="restricted_action_non_threadable_channel",ce="ekm_access_denied",ee="dlp_user_warning",J="message_limit_exceeded";var X;(function(pe){pe.BLOCK_FILES_LINK_TYPE="slack_connect_file_link_sharing_blocked",pe.BLOCK_CANVAS_CONTAIN_FILES_TYPE="slack_connect_canvas_contain_file_sharing_blocked",pe.BLOCK_CANVAS_CONTAIN_EMBEDDED_FILES_TYPE="slack_connect_canvas_contain_embedded_files_blocked",pe.BLOCK_LIST_CONTAIN_FILES_TYPE="slack_connect_list_contain_file_sharing_blocked"})(X||(X={}));var F;(function(pe){pe.SLACK_CONNECT_CANVAS_SHARING_BLOCKED="slack_connect_canvas_sharing_blocked",pe.SLACK_CONNECT_FILE_UPLOAD_SHARING_BLOCKED="slack_connect_file_upload_sharing_blocked",pe.SLACK_CONNECT_TEAM_BLOCKED="slack_connect_team_blocked"})(F||(F={}));const L={[ue]:ge,[ae]:oe,[he]:me};function K(pe,fe){pe((0,d.Kc)([fe]));const Z={channelId:fe.channel,timestamps:[fe.ts],oldest:fe.ts,hasMore:!1,append:!0};if(pe((0,l.VG)(Z)),fe.thread_ts){const se=(0,c.Iu)(fe.channel,fe.thread_ts);pe((0,l.VG)({...Z,channelId:se}))}}u(K,"addMsgToEnd");const B={};function Q(pe,fe,Z){B[pe]||(B[pe]={}),B[pe][fe]=Z}u(Q,"addResolutionTimer");function q(pe,fe){!B[pe]||!B[pe][fe]||(clearTimeout(B[pe][fe]),delete B[pe][fe])}u(q,"cancelResolutionTimer");function le(pe,fe,Z,se){const Ae=(0,i.ZT)(pe())||"",Ce=(0,ne.I)(pe(),se.client_msg_id);if(Ce){(0,v.Ay)({getState:pe}).action("MESSAGE",`Resolved a message with clientMsgId ${se.client_msg_id} in ${Z.channel} with ts ${se.ts}`),fe((0,Y.s)(Ce.clientMsgId)),q(Ae,Ce.clientMsgId),fe((0,D.A)({channelId:Ce.channelId,ts:Ce.ts}));const Le=!1;(0,_.OL)(pe(),Z.channel,Le)&&fe((0,$.A)({channelId:Z.channel,msgTs:Z.ts,resent:!1}))}P(Ae).resolve(se)}u(le,"resolveMessage");const Te="cse-message-send:send",Ie=(0,h.Ay)("Send a message",(pe,fe,Z)=>{let{messageSendTrace:se,notificationTracePassthroughData:Ae,skipDLPUserWarning:Ce,...Le}=Z;const Ue=(0,I.E)({getState:fe});let Pe,He;se&&(Pe=se.startSpan("message_send_attempt:send"),He=se.startSpan("message_send_attempt:placeholder",{parentSpanId:Pe==null?void 0:Pe.getId()}));const Qe=Ue.createMetricsTrace({label:"cse-message-send"});Qe.count({name:Te,label:"pending"}),Ue.reportTrace(Qe);const lt=(0,T.A)(1),{channel:qe,reply_broadcast:ct,thread_ts:tt,client_msg_id:it,xArgs:Ge}=Le,We=(0,v.Ay)({getState:fe}),xe=(0,i.ZT)(fe())||"",ze=tt?{_hidden_reply:!0,_was_reply_broadcast:ct}:null,mt=it||(0,A.A)();Ae&&(0,O.qe)(fe(),{notificationTracePassthroughData:Ae,clientMsgId:mt});const pt=(0,G._Z)(fe(),"fe_message_rendering_perf_m1")==="on",It=Le.blocks,bt={...Le,...ze,user:(0,o.WR)(fe()),showResend:!1,showCancel:!1,is_pending:!0,client_msg_id:mt,blocksProcessed:(0,_e.R)({blocks:It,experimentFeMessageRenderingPerfM1GroupOn:pt})};We.action("MESSAGE",`Sent a message to ${qe} via HTTP, clientMsgId: ${mt}`);const gt={...Le,...Ge,include_channel_perm_error:!0,client_msg_id:mt,skip_dlp_user_warning:Ce};lt&&Q(xe,mt,window.setTimeout(()=>{if((0,ne.I)(fe(),bt.client_msg_id)){const rn=fe();(0,x.UJ)(rn)&&(0,y.Cy)({state:rn}).count("msg_send_placeholder_not_resolved_connected_60s")}},1e3*60));const ht=P((0,i.ZT)(fe())||"").enqueue(gt,{trace:se,parentSpanId:Pe==null?void 0:Pe.getId()});K(pe,bt),pe((0,Y.T)({clientMsgId:bt.client_msg_id,channelId:bt.channel,ts:bt.ts})),tt||pe((0,r.A)({ts:null})),He==null||He.close();const Zt=(0,G._Z)(fe(),"ecompl_custom_dlp_text")==="on";return ht.tap(()=>{const rn=fe();(!(0,x.UJ)(rn)||(0,m.N)(rn,qe)||(0,m.N)(rn,(0,o.WR)(rn)))&&(pe((0,E.A)({channelId:qe,threadTs:tt})),ct&&pe((0,E.A)({channelId:qe}))),Qe.count({name:Te,label:"success"}),Ue.reportTrace(Qe),se&&(se.addTags({success:!0}),Pe==null||Pe.close(),Ue.reportTrace(se))}).catch(rn=>{const zt=(0,t.A)(rn,"data.error"),In=Zt?(0,t.A)(rn,"data.dlp_custom_message"):void 0;Qe.count({name:Te,label:"failure"}).setTag("error",zt||(rn==null?void 0:rn.message)),Ue.reportTrace(Qe);const cn=zt===ce,Jt=zt===ee,dn=zt===J,sn=Object.values(F).includes(zt)?zt:void 0,Xt=Object.values(X).includes(zt)?zt:void 0;if(!zt&&!(0,ne.I)(fe(),bt.client_msg_id)){We.info("MESSAGE","Ignoring non-backend chat.postMessage error since the message already came in over socket");return}const xt=L[zt];let en=!0;const un=!0,yn=[ge,oe,me,ue,ae,he];(0,n.A)(yn,zt)&&(M(qe,xt,"send-message/sendMessage.catch"),en=!1),cn&&(en=!1),Xt&&(en=!1),dn&&(en=!1,pe((0,re.A)())),sn&&(en=!1);const ut="Message failed to send",Ot=(0,s.A)(rn,["status","retryAfter","attempts","data.ok","data.error","args._x_reason","args.channel","args.ts","args.thread_ts","args.reply_broadcast"]);Ot.client_msg_id=mt,Ot.channel=qe,Ot.thread_ts=tt;const kt=rn&&rn.status===429?"message_send_ratelimit":"message_send_fail";We.error(Ot instanceof Error?Ot:new Error(ut),`${ut}: ${zt} | ${JSON.stringify(Ot)}`,{subtype:kt});const be=zt?(0,a.A)(Ot,["response"]):rn;We.error("MESSAGE",ut,zt,be);const Kt={...bt,showResend:en,showCancel:un,isEKMError:cn,isDLPUserWarningError:Jt,canvasSharingError:sn,blockFileLinkSharingError:Xt,...Zt?{dlpCustomMessage:In}:{}};(0,ne.I)(fe(),bt.client_msg_id)?pe((0,d.Kc)([Kt])):K(pe,Kt),!en&&lt&&q(xe,bt.client_msg_id),se&&(en?(se.addTags({success:!1}),Pe==null||Pe.close(),Ue.reportTrace(se)):Ue.clearTrace(se))})});Ie.meta={name:"createThunk",key:"createThunksendMessage",description:"Send a message"};const De=Ie},5363983309:(j,p,e)=>{"use strict";e.d(p,{A:()=>h});var t=e(3134334389),n=e(7562930286),s=e(1031947056),a=e(6533394955),c=e(8847766420),o=e(2567914105),i=e(2375333597),l=e(8726613433),_=e(5258584090),d=e(9804928153);function r(){return r=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var I=arguments[y];for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(v[T]=I[T])}return v},r.apply(this,arguments)}u(r,"_extends");const h=u((v,y)=>(0,s.Ay)(`XWS open ${v.displayName} modal`,(I,T,f,g)=>{const{modalName:M,allowMultiple:A=!0,isStackable:O=!1,renderInChildWindow:D=!1}=y||{};let E,C=D;const S=g(_.S);if((S==null?void 0:S.windowRef.deref())!==d.J&&(S!=null&&S.windowId)&&(C=!0,E=S.windowId),!A&&M&&(0,o.wc)(T(),E).find(z=>{let{name:$}=z;return $===M}))return;const b=(0,c.ZT)(T()),k=(0,l.vB)(T()),W=(0,a.getStoreInstanceByTeamId)(b);let N,V=t.createElement(v,r({},f,{closeModal:()=>N==null?void 0:N()}));C||(V=t.createElement(n.Kq,{store:W},V));let R;return C?R=I((0,i.q)({element:V,name:M||void 0,isStackable:O})):R=(0,a.dispatchForTeamId)(k,(0,i.q)({element:V,name:M||void 0,isStackable:O})),N=R.close,R}),"createXWSModalThunk")},9488048047:(j,p,e)=>{"use strict";e.d(p,{z:()=>k});var t=e(166097325),n=e(1031947056),s=e(6601726845),a=e(1839426804),c=e(2708016366),o=e(9327462766),i=e(296612764),l=e(8585228397),_=e(2768794130),d=e(3653269953),r=e(2036289572),m=e(2505585477),h=e(6729174604),v=e(832411022);const y=u((W,N,V)=>W&&Object.values(N).includes(W)?W:N[V],"validateMessageSearchSort"),I=u((W,N,V)=>W&&Object.values(N).includes(W)?W:N[V],"validateFileSearchSort"),T=u((W,N,V)=>W&&Object.values(N).includes(W)?W:N[V],"validateChannelSearchSort"),f=u((W,N,V)=>W&&Object.values(N).includes(W)?W:N[V],"validatePeopleSearchSort"),g=u((W,N,V)=>W&&Object.values(N).includes(W)?W:N[V],"validateResultCountToggle");var M=e(57760199),A=e(197186845),O=e(30533254),D=e(5446033290),E=e(532953487),C=e(2864477491),S=e(8847766420),b=e(5513050121);const k=(0,n.Ay)("Runs search from given encoded search state string",(W,N,V)=>{let{encodedSearchString:R}=V;if(!R)return;const P=N(),z=(0,E.$)(P),$=(0,C.GJ)(P),x=v.Jx.OMNISWITCHER;if($&&R===z)return;const Y=(0,s.Wj)(R),{displayQuery:ne,requestQuery:re,tab:_e,page:G,messageAndFileSearchExcludeBots:ge,messageAndFileSearchOnlyMyChannels:oe,activeEnterpriseTeamIdFilter:me,channelSearchFilterType:ue,channelSearchOrgFilters:ae,channelSearchHideMemberChannels:he,peopleSearchFilterType:ce,peopleSearchOrgFilters:ee,peopleSearchHideDeactivatedUsers:J,messageSearchSort:X,fileSearchSort:F,channelSearchSort:L,peopleSearchSort:K,resultCountToggle:B,peopleSearchLocationFilters:Q,peopleSearchDivisionFilters:q,peopleSearchDepartmentFilters:le,peopleSearchTitleFilters:Te,peopleSearchCelebrationFilters:Ie,salesforceSearchFilterOrgId:De,salesforceSearchFilterRecordType:pe}=Y;W((0,h.N9)({query:ne,inputId:x}));const fe=(0,O.vA)(P,re);W((0,r.c3)({queryFilter:fe}));const Z=y(X,v.kK,"relevantMessages"),se=I(F,v.VU,"relevant"),Ae=T(L,v.aJ,"relevant"),Ce=f(K,v.iO,"relevant"),Le=g(B,v.LV,20);Z!==(0,o.WJ)(P)&&W((0,i.g)({sort:Z})),se!==(0,l.r)(P,v.c5.FILES)&&W((0,_.f)({sort:se})),Ae!==(0,o.Kn)(P)&&W((0,c.Ak)({sort:Ae})),Ce!==(0,o.y6)(P)&&W((0,c.Yn)({sort:Ce})),Le!==(0,o.jn)(P)&&W((0,c.BS)({count:Le})),W((0,a.O6)({tab:_e})),W((0,a.BL)({moduleType:v.Sv[_e],page:G}));const{displayQuery:Ue,requestQuery:Pe,messageAndFileSearchExcludeBots:He,messageAndFileSearchOnlyMyChannels:Qe,activeEnterpriseTeamIdFilter:lt,channelSearchFilterType:qe,channelSearchOrgFilters:ct,channelSearchHideMemberChannels:tt,peopleSearchFilterType:it,peopleSearchOrgFilters:Ge,peopleSearchHideDeactivatedUsers:We,messageSearchSort:xe,fileSearchSort:ze,channelSearchSort:mt,peopleSearchSort:pt,resultCountToggle:It,peopleSearchDepartmentFilters:bt,peopleSearchDivisionFilters:gt,peopleSearchLocationFilters:ht,peopleSearchTitleFilters:Zt,peopleSearchCelebrationFilters:rn,salesforceSearchFilterOrgId:zt,salesforceSearchFilterRecordType:In}=(0,s.Wj)(z||""),cn=(0,m._G)(P,{module:_e});if(_e===v.gs.CHANNELS&&(ue&&W((0,a.Ev)({type:ue})),ae&&W((0,a.H)({orgFilters:ae}))),_e===v.gs.PEOPLE&&(ce&&W((0,a.kC)({type:ce})),ee&&W((0,a.XT)({orgFilters:ee})),Q&&W((0,a.Ic)({locations:Q})),Te&&W((0,a.t_)({titles:Te})),le&&W((0,a.Vm)({departments:le})),q&&W((0,a.qV)({divisions:q})),Ie&&W((0,a.H4)({celebrations:Ie}))),De&&W((0,a.lu)({salesforceOrgId:De})),pe&&W((0,a.xJ)({salesforceRecordType:pe})),ge!==He&&W((0,c.V1)({value:!!ge})),oe!==Qe&&W((0,c.le)({value:!!oe})),me!==lt&&me&&W((0,a.y0)({selectedEnterpriseTeamId:me})),ce===v.Dx.guests){const dn=(0,S.s_)(P);dn&&W((0,a.y0)({selectedEnterpriseTeamId:dn}))}he!==tt&&W((0,c.kZ)({value:!!he})),J!==We&&W((0,c.sA)({value:!!J})),Z!==xe&&W((0,i.g)({sort:Z})),se!==ze&&W((0,_.f)({sort:se})),Ae!==mt&&W((0,c.Ak)({sort:Ae})),Ce!==pt&&W((0,c.Yn)({sort:Ce})),Le!==It&&W((0,c.BS)({count:Le}));const Jt=ge!==He||oe!==Qe||me!==lt||ue!==qe||!(0,t.A)(ae,ct)||he!==tt||ce!==it||!(0,t.A)(ee,Ge)||J!==We||!(0,t.A)(Q,ht)||!(0,t.A)(Te,Zt)||!(0,t.A)(q,gt)||!(0,t.A)(le,bt)||!(0,t.A)(Ie,rn)||!(0,t.A)(De,zt)||!(0,t.A)(pe,In);re!==Pe||ne!==Ue?W((0,d.A)({query:re,page:G,encodedSearchString:R})):cn!=null&&cn.items&&(cn!=null&&cn.items[G])?Jt?((0,M.d1)(W,N,"search-filters-history-stack"),W((0,D.b)({value:R}))):Z!==xe?(W((0,A.u3)({module:"messages",reason:"search-message-sort-changed-history-stack",context:b.Oj.MessagesTab})),W((0,D.b)({value:R}))):se!==ze?(W((0,A.u3)({module:"files",reason:"search-files-sort-changed-history-stack",context:b.Oj.FilesTab})),W((0,D.b)({value:R}))):Ae!==mt?(W((0,A.u3)({module:"channels",reason:"search-channels-sort-changed-history-stack",context:b.Oj.ChannelsTab})),W((0,D.b)({value:R}))):Ce!==pt?(W((0,A.u3)({module:"people",reason:"search-people-sort-changed-history-stack",context:b.Oj.PeopleTab})),W((0,D.b)({value:R}))):Le!==It?((0,M.d1)(W,N,"result-count-toggle-history-stack"),W((0,D.b)({value:R}))):W((0,D.b)({value:R})):W((0,d.A)({query:re,module:v.Sv[_e],page:G,encodedSearchString:R}))});k.meta={name:"createThunk",key:"createThunkrunSearchFromEncodedSearchState",description:"Runs search from given encoded search state string"}},8010516507:(j,p,e)=>{"use strict";e.d(p,{L:()=>o});var t=e(1031947056),n=e(5446033290),s=e(6601726845),a=e(5267010247),c=e(8822892075);const o=(0,t.Ay)("Adds a search history item and updates the url with its id",(i,l)=>{const _=l(),d=(0,s._t)(_);d&&(i((0,n.b)({value:d})),i((0,a.o)((0,c.oV)(d))))});o.meta={name:"createThunk",key:"createThunkrunSearchFromReduxState",description:"Adds a search history item and updates the url with its id"}},57760199:(j,p,e)=>{"use strict";e.d(p,{$q:()=>P,AW:()=>N,CK:()=>G,F5:()=>E,FG:()=>R,HE:()=>_e,HX:()=>re,Hj:()=>W,J0:()=>oe,Jv:()=>g,O7:()=>ne,OH:()=>$,T9:()=>D,VX:()=>M,V_:()=>z,YV:()=>ee,_I:()=>O,ap:()=>ae,bQ:()=>S,cI:()=>he,cf:()=>x,d1:()=>f,dY:()=>V,g:()=>C,iX:()=>k,m0:()=>X,s7:()=>ue,sf:()=>b,v6:()=>me,w2:()=>A,wr:()=>ce,yH:()=>ge,yU:()=>Y});var t=e(1031947056),n=e(197186845),s=e(2036289572),a=e(2505585477),c=e(7435861102),o=e(832411022),i=e(296612764),l=e(2768794130),_=e(5234724663),d=e(9436609557),r=e(1839426804),m=e(2708016366),h=e(8847766420),v=e(8010516507),y=e(304127728),I=e(8538260492),T=e(5513050121);function f(L,K,B){let Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const q=(0,a.iq)(K()),le=q?q.query:"";return L((0,s.p4)({windowId:y.I})),Q&&L((0,c.z)()),L((0,n.Ad)({query:le,reason:B,fetchSuggestions:!0}))}u(f,"refetchAllSearchResults");const g=(0,t.Ay)("Message/file search: exclude bots checkbox changed",(L,K,B)=>{let{value:Q}=B;L((0,m.V1)({value:Q})),f(L,K,"search-exclude-bots-changed"),L((0,v.L)())});g.meta={name:"createThunk",key:"createThunkmessageAndFileSearchExcludeBotsChanged",description:"Message/file search: exclude bots checkbox changed"};const M=(0,t.Ay)("Message/file search: only my channels checkbox changed",(L,K,B)=>{let{value:Q}=B;L((0,m.le)({value:Q})),Q&&L((0,m.kZ)({value:!1})),f(L,K,"search-only-my-channels-changed"),L((0,v.L)())});M.meta={name:"createThunk",key:"createThunksearchOnlyMyChannelsChanged",description:"Message/file search: only my channels checkbox changed"};const A=(0,t.Ay)("Channel search: hide member channels flag changed",(L,K,B)=>{let{value:Q,refetch:q=!0}=B;L((0,m.kZ)({value:Q})),Q&&L((0,m.le)({value:!1})),q&&f(L,K,"search-hide-member-channels-changed"),L((0,v.L)())});A.meta={name:"createThunk",key:"createThunkchannelSearchHideMemberChannelsChanged",description:"Channel search: hide member channels flag changed"};const O=(0,t.Ay)("Message search: sort changed",(L,K,B)=>{let{sort:Q,shouldUpdateUrl:q=!0,shouldClogSearchSort:le=!0}=B;le&&L((0,_.Yj)({sortValue:Q,entity:"messages"})),L((0,i.g)({sort:Q})),L((0,n.u3)({module:"messages",reason:"search-messages-sort-changed",context:T.Oj.MessagesTab})),q&&L((0,v.L)())});O.meta={name:"createThunk",key:"createThunkmessageSearchSortChanged",description:"Message search: sort changed"};const D=(0,t.Ay)("File search: sort changed",(L,K,B)=>{let{sort:Q,shouldUpdateUrl:q=!0,shouldClogSearchSort:le=!0}=B;le&&L((0,_.Yj)({sortValue:Q,entity:"files"})),L((0,l.f)({sort:Q})),L((0,n.u3)({module:"files",reason:"search-files-sort-changed",context:T.Oj.FilesTab})),q&&L((0,v.L)())});D.meta={name:"createThunk",key:"createThunkfileSearchSortChanged",description:"File search: sort changed"};const E=(0,t.Ay)("Canvas search: sort changed",(L,K,B)=>{let{sort:Q,shouldUpdateUrl:q=!0,shouldClogSearchSort:le=!0}=B;le&&L((0,_.Yj)({sortValue:Q,entity:"files"})),L((0,l.f)({sort:Q})),L((0,n.u3)({module:"canvases",reason:"search-canvases-sort-changed",context:T.Oj.CanvasesTab})),q&&L((0,v.L)())});E.meta={name:"createThunk",key:"createThunkcanvasSearchSortChanged",description:"Canvas search: sort changed"};const C=(0,t.Ay)("Lists search: sort changed",(L,K,B)=>{let{sort:Q,shouldUpdateUrl:q=!0,shouldClogSearchSort:le=!0}=B;le&&L((0,_.Yj)({sortValue:Q,entity:"lists"})),L((0,l.f)({sort:Q})),L((0,n.u3)({module:"lists",reason:"search-lists-sort-changed",context:T.Oj.ListsTab})),q&&L((0,v.L)())});C.meta={name:"createThunk",key:"createThunklistsSearchSortChanged",description:"Lists search: sort changed"};const S=(0,t.Ay)("List records search: sort changed",(L,K,B)=>{let{sort:Q,shouldUpdateUrl:q=!0,shouldClogSearchSort:le=!0}=B;le&&L((0,_.Yj)({sortValue:Q,entity:"listRecords"})),L((0,l.f)({sort:Q})),L((0,n.u3)({module:"listRecords",reason:"search-list-records-sort-changed",context:T.Oj.ListsTab})),q&&L((0,v.L)())});S.meta={name:"createThunk",key:"createThunklistRecordsSearchSortChanged",description:"List records search: sort changed"};const b=(0,t.Ay)("Channel search: sort changed",(L,K,B)=>{let{sort:Q,shouldUpdateUrl:q=!0,shouldClogSearchSort:le=!0}=B;le&&L((0,_.Yj)({sortValue:Q,entity:"channels"})),L((0,m.Ak)({sort:Q})),L((0,n.u3)({module:"channels",reason:"search-channels-sort-changed",context:T.Oj.ChannelsTab})),q&&L((0,v.L)())});b.meta={name:"createThunk",key:"createThunkchannelSearchSortChanged",description:"Channel search: sort changed"};const k=(0,t.Ay)("People search: sort changed",(L,K,B)=>{let{sort:Q,shouldUpdateUrl:q=!0,shouldClogSearchSort:le=!0}=B;le&&L((0,_.Yj)({sortValue:Q,entity:"people"})),L((0,m.Yn)({sort:Q})),L((0,n.u3)({module:"people",reason:"search-people-sort-changed",context:T.Oj.PeopleTab})),q&&L((0,v.L)())});k.meta={name:"createThunk",key:"createThunkpeopleSearchSortChanged",description:"People search: sort changed"};const W=(0,t.Ay)("result count toggle changed",(L,K,B)=>{let{count:Q}=B;L((0,m.BS)({count:Q})),f(L,K,"result-count-toggle-changed",!1),L((0,r.Cr)({windowId:y.I})),L((0,r.Di)({windowId:y.I})),L((0,v.L)())});W.meta={name:"createThunk",key:"createThunkresultCountToggleChanged",description:"result count toggle changed"};const N=(0,t.Ay)("Channel search: filter type changed",(L,K,B)=>{let{type:Q}=B;L((0,r.Ev)({type:Q})),f(L,K,"search-channels-filter-type-changed"),L((0,v.L)())});N.meta={name:"createThunk",key:"createThunkchannelSearchFilterTypeChanged",description:"Channel search: filter type changed"};const V=(0,t.Ay)("Channel search: filter type changed",(L,K,B)=>{let{type:Q}=B;L((0,r.HR)({type:Q})),f(L,K,"search-channels-filter-record-type-changed"),L((0,v.L)())});V.meta={name:"createThunk",key:"createThunkchannelSearchFilterRecordTypeChanged",description:"Channel search: filter type changed"};const R=(0,t.Ay)("Salesforce record search: Salesforce org id changed",(L,K,B)=>{let{salesforceOrgId:Q}=B;L((0,r.lu)({salesforceOrgId:Q})),f(L,K,"search-salesforce-org-id-changed"),L((0,v.L)())});R.meta={name:"createThunk",key:"createThunksalesforceSearchFilterOrgIdChanged",description:"Salesforce record search: Salesforce org id changed"};const P=(0,t.Ay)("Salesforce record search: Salesforce record type changed",(L,K,B)=>{let{salesforceRecordType:Q}=B;L((0,r.xJ)({salesforceRecordType:Q})),f(L,K,"search-salesforce-record-type-changed"),L((0,v.L)())});P.meta={name:"createThunk",key:"createThunksalesforceSearchFilterRecordTypeChanged",description:"Salesforce record search: Salesforce record type changed"};const z=(0,t.Ay)("All of search: search by selected enterprise team id",(L,K,B)=>{let{value:Q,refetch:q=!0}=B;L((0,r.y0)({selectedEnterpriseTeamId:Q})),q&&f(L,K,"search-only-by-enterprise-team-id"),L((0,v.L)())});z.meta={name:"createThunk",key:"createThunksearchOnlyByEnterpriseTeamId",description:"All of search: search by selected enterprise team id"};const $=(0,t.Ay)("Channel search: bulk update an external org filter",(L,K,B)=>{let{teamIds:Q}=B;const q=K(),le=(0,d.tL)(q);L((0,r.RR)({teamIds:Array.from(new Set([...le,...Q]))})),L((0,r.H)({orgFilters:Q})),f(L,K,"search-channels-org-filter-bulk-changed"),L((0,v.L)())});$.meta={name:"createThunk",key:"createThunksetChannelSearchOrgFilter",description:"Channel search: bulk update an external org filter"};const x=(0,t.Ay)("Channel search: update an external org filter",(L,K,B)=>{let{teamId:Q,value:q}=B;const le=K();let Te=[...(0,d.lB)(le)];const Ie=(0,d.tL)(le);q?Te.push(Q):Te=Te.filter(De=>De!==Q),L((0,r.RR)({teamIds:Array.from(new Set([...Ie,Q]))})),L((0,r.H)({orgFilters:Te})),f(L,K,"search-channels-org-filter-changed"),L((0,v.L)())});x.meta={name:"createThunk",key:"createThunktoggleChannelSearchOrgFilter",description:"Channel search: update an external org filter"};const Y=(0,t.Ay)("People search: bulk update an external org filter",(L,K,B)=>{let{teamIds:Q}=B;const q=K(),le=(0,d.tw)(q);L((0,r.PZ)({teamIds:Array.from(new Set([...le,...Q]))})),L((0,r.XT)({orgFilters:Q})),f(L,K,"search-people-org-filter-changed"),L((0,v.L)())});Y.meta={name:"createThunk",key:"createThunksetPeopleSearchOrgFilter",description:"People search: bulk update an external org filter"};const ne=(0,t.Ay)("People search: update an external org filter",(L,K,B)=>{let{teamId:Q,value:q}=B;const le=K();let Te=[...(0,d.fL)(le)];const Ie=(0,d.tw)(le);q?Te.push(Q):Te=Te.filter(De=>De!==Q),L((0,r.PZ)({teamIds:Array.from(new Set([...Ie,Q]))})),L((0,r.XT)({orgFilters:Te})),f(L,K,"search-people-org-filter-changed"),L((0,v.L)())});ne.meta={name:"createThunk",key:"createThunktogglePeopleSearchOrgFilter",description:"People search: update an external org filter"};const re=(0,t.Ay)("People search: bulk update location filter",(L,K,B)=>{let{values:Q}=B;L((0,r.Ic)({locations:Q})),f(L,K,"search-people-location-filter-changed"),L((0,v.L)())});re.meta={name:"createThunk",key:"createThunksetPeopleSearchLocationFilter",description:"People search: bulk update location filter"};const _e=(0,t.Ay)("People search: update location filter",(L,K,B)=>{let{location:Q,value:q}=B;const le=K();let Te=[...(0,d.aJ)(le)];q?Te.push(Q):Te=Te.filter(Ie=>Ie!==Q),L((0,r.Ic)({locations:Te})),f(L,K,"search-people-location-filter-changed"),L((0,v.L)())});_e.meta={name:"createThunk",key:"createThunktogglePeopleSearchLocationFilter",description:"People search: update location filter"};const G=(0,t.Ay)("People search: bulk update title filter",(L,K,B)=>{let{values:Q}=B;L((0,r.t_)({titles:Q})),f(L,K,"search-people-title-filter-changed"),L((0,v.L)())});G.meta={name:"createThunk",key:"createThunksetPeopleSearchTitleFilter",description:"People search: bulk update title filter"};const ge=(0,t.Ay)("People search: update title filter",(L,K,B)=>{let{title:Q,value:q}=B;const le=K();let Te=[...(0,d.LX)(le)];q?Te.push(Q):Te=Te.filter(Ie=>Ie!==Q),L((0,r.t_)({titles:Te})),f(L,K,"search-people-title-filter-changed"),L((0,v.L)())});ge.meta={name:"createThunk",key:"createThunktogglePeopleSearchTitleFilter",description:"People search: update title filter"};const oe=(0,t.Ay)("People search: bulk update division filter",(L,K,B)=>{let{values:Q}=B;L((0,r.qV)({divisions:Q})),f(L,K,"search-people-division-filter-changed"),L((0,v.L)())});oe.meta={name:"createThunk",key:"createThunksetPeopleSearchDivisionFilter",description:"People search: bulk update division filter"};const me=(0,t.Ay)("People search: update division filter",(L,K,B)=>{let{division:Q,value:q}=B;const le=K();let Te=[...(0,d.YM)(le)];q?Te.push(Q):Te=Te.filter(Ie=>Ie!==Q),L((0,r.qV)({divisions:Te})),f(L,K,"search-people-division-filter-changed"),L((0,v.L)())});me.meta={name:"createThunk",key:"createThunktogglePeopleSearchDivisionFilter",description:"People search: update division filter"};const ue=(0,t.Ay)("People search: bulk update department filter",(L,K,B)=>{let{values:Q}=B;L((0,r.Vm)({departments:Q})),f(L,K,"search-people-department-filter-changed"),L((0,v.L)())});ue.meta={name:"createThunk",key:"createThunksetPeopleSearchDepartmentFilter",description:"People search: bulk update department filter"};const ae=(0,t.Ay)("People search: update department filter",(L,K,B)=>{let{department:Q,value:q}=B;const le=K();let Te=[...(0,d.DL)(le)];q?Te.push(Q):Te=Te.filter(Ie=>Ie!==Q),L((0,r.Vm)({departments:Te})),f(L,K,"search-people-department-filter-changed"),L((0,v.L)())});ae.meta={name:"createThunk",key:"createThunktogglePeopleSearchDepartmentFilter",description:"People search: update department filter"};const he=(0,t.Ay)("People search: bulk update celebration filter",(L,K,B)=>{let{values:Q}=B;L((0,r.H4)({celebrations:Q})),f(L,K,"search-people-celebration-filter-changed"),L((0,v.L)())});he.meta={name:"createThunk",key:"createThunksetPeopleSearchCelebrationFilter",description:"People search: bulk update celebration filter"};const ce=(0,t.Ay)("People search: update celebration filter",(L,K,B)=>{let{celebration:Q,value:q}=B;const le=K();let Te=[...(0,d.Lq)(le)];q?Te.push(Q):Te=Te.filter(Ie=>Ie!==Q),L((0,r.H4)({celebrations:Te})),f(L,K,"search-people-celebration-filter-changed"),L((0,v.L)())});ce.meta={name:"createThunk",key:"createThunktogglePeopleSearchCelebrationFilter",description:"People search: update celebration filter"};const ee=(0,t.Ay)("People search: filter type changed",(L,K,B)=>{let{type:Q,refetch:q=!0}=B;const le=K(),Te=(0,h.s_)(le),Ie=(0,d.Xh)(le);L((0,r.kC)({type:Q})),Q===o.Dx.guests&&Te?L((0,r.y0)({selectedEnterpriseTeamId:Te})):Q===I.Qg.ORG_OWNERS||Q===I.Qg.ORG_ADMINS?L((0,r.y0)({selectedEnterpriseTeamId:""})):(Q===I.Qg.WORKSPACE_OWNERS||Q===I.Qg.WORKSPACE_ADMINS)&&!Ie&&Te&&L((0,r.y0)({selectedEnterpriseTeamId:Te})),q&&f(L,K,"search-people-filter-type-changed"),L((0,v.L)())});ee.meta={name:"createThunk",key:"createThunkpeopleSearchFilterTypeChanged",description:"People search: filter type changed"};const J=(0,t.Ay)("People search: custom filter changed",(L,K,B)=>{let{id:Q,value:q,checked:le}=B;L((0,r.FI)({id:Q,value:q,checked:le})),f(L,K,"search-people-custom-filter-changed")});J.meta={name:"createThunk",key:"createThunkpeopleSearchCustomFilterChanged",description:"People search: custom filter changed"};const X=(0,t.Ay)("People search: hide deactivated users pref changed",(L,K,B)=>{let{value:Q,refetch:q=!0}=B;L((0,m.sA)({value:Q})),q&&f(L,K,"search-people-hide-deactivated-users-changed"),L((0,v.L)())});X.meta={name:"createThunk",key:"createThunkpeopleSearchHideDeactivatedUsersChanged",description:"People search: hide deactivated users pref changed"};const F=(0,t.Ay)("People search: timezone filter changed",(L,K,B)=>{let{label:Q,value:q,checked:le}=B;L((0,r.pU)({label:Q,value:q,checked:le})),f(L,K,"search-people-timezone-filter-changed")});F.meta={name:"createThunk",key:"createThunkpeopleSearchTimezoneFilterChanged",description:"People search: timezone filter changed"}},2708016366:(j,p,e)=>{"use strict";e.d(p,{Ak:()=>c,BS:()=>i,V1:()=>_,Yn:()=>o,kZ:()=>a,le:()=>d,sA:()=>l});var t=e(1031947056),n=e(387484329),s=e(832411022);const a=(0,t.Ay)("Channel search: set hide my channels",(r,m,h)=>{let{value:v}=h;r((0,n.AZ)({pref:s.gT,value:v}))});a.meta={name:"createThunk",key:"createThunksetChannelSearchHideMemberChannels",description:"Channel search: set hide my channels"};const c=(0,t.Ay)("Channel Search: set sort method",(r,m,h)=>{let{sort:v}=h;r((0,n.AZ)({pref:s.UB,value:v}))});c.meta={name:"createThunk",key:"createThunksetChannelSearchSort",description:"Channel Search: set sort method"};const o=(0,t.Ay)("People Search: set sort method",(r,m,h)=>{let{sort:v}=h;r((0,n.AZ)({pref:s.gZ,value:v}))});o.meta={name:"createThunk",key:"createThunksetPeopleSearchSort",description:"People Search: set sort method"};const i=(0,t.Ay)("Setting result Count Toggle",(r,m,h)=>{let{count:v}=h;r((0,n.AZ)({pref:"result_count_toggle",value:v}))});i.meta={name:"createThunk",key:"createThunksetResultCountToggle",description:"Setting result Count Toggle"};const l=(0,t.Ay)("People search: set hiding deactivated users",(r,m,h)=>{let{value:v}=h;r((0,n.AZ)({pref:s.Sj,value:v}))});l.meta={name:"createThunk",key:"createThunksetPeopleSearchHideDeactivatedUsers",description:"People search: set hiding deactivated users"};const _=(0,t.Ay)("Message/File search: set exclude bots",(r,m,h)=>{let{value:v}=h;r((0,n.AZ)({pref:s.jv,value:v}))});_.meta={name:"createThunk",key:"createThunksetMessageAndFileSearchExcludeBots",description:"Message/File search: set exclude bots"};const d=(0,t.Ay)("Message/File search: search only my channels",(r,m,h)=>{let{value:v}=h;r((0,n.AZ)({pref:s.wA,value:v}))});d.meta={name:"createThunk",key:"createThunksetSearchOnlyMyChannelsChanged",description:"Message/File search: search only my channels"}},296612764:(j,p,e)=>{"use strict";e.d(p,{g:()=>o});var t=e(1031947056),n=e(387484329),s=e(796111729);const a="IMPROVED_SEARCH",c="search_sort",o=(0,t.Ay)("Message Search: set sort method",(i,l,_)=>{let{sort:d}=_;(0,s.Ay)({getState:l}).info(a,`Set message sort method. messageSort: ${d}`),i((0,n.AZ)({pref:c,value:d}))});o.meta={name:"createThunk",key:"createThunksetMessageSort",description:"Message Search: set sort method"}},2371143272:(j,p,e)=>{"use strict";e.d(p,{b:()=>c,i:()=>a});var t=e(3398586081),n=e(3530725200),s=e(7139225017);const a="sentry_fe_perf",c=(0,t.A)(()=>(0,s.A)()?!1:(0,n.fW)(a))},7206394193:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(8571983633),n=e(9686962598),s=e(6926388022),a=e(1527536225),c=e(5219503691);const o=(0,a.Ay)("Logs helpful messages to the console if you do something incorrect",(l,_,d)=>{if((0,t.A)(d)||(0,n.A)(d))return c.Qs&&(0,s.z3)("It looks like you dispatched null or undefined, instead of an action or a thunk. Check the stack trace of this error to see where this mistake is occurring."),null;if(d.isThunkCreator||d.isActionCreator){if(c.Qs){const r=d.isThunkCreator?"thunk":"action",m=d.meta?d.meta.name:`${r}Creator`;(0,s.z3)(`
	It looks like you dispatched a ${r} creator instead of the ${r} itself!
	This is a common mistake, and the solution is to call dispatch(${m}(payload)) instead of just dispatch(${m}), note the extra parens at the end.
				`)}return null}return(0,c.ZR)(d),_(d)});o.meta={name:"createMiddleware",key:"createMiddlewarehelpfulMessagingMiddleware",description:"Logs helpful messages to the console if you do something incorrect"};const i=o},773865333:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(862210999),n=e(796111729),s=e(4724591729),a=e(1527536225),c=e(4423055085);let o=[];const i=(0,n.Wo)(),l=(0,a.Ay)("Allows devs to get console logging or trigger breakpoints when state they care about changes",(m,h,v)=>{const y=[],I=m.getState();o.forEach(g=>{y.push(g(I,v))});const T=h(v),f=m.getState();return o.forEach((g,M)=>{const A=g(f,v);if(y[M]!==A){const O=["Redux Watcher:",`Value has changed! 
Action: `,v,`
Before: `,y[M],`
After:  `,A];if(y[M]!==void 0&&A!==void 0){const D=y[M]===void 0?{}:y[M],E=A===void 0?{}:A;O.push(`
Diff: `,Object.keys({...D,...E}).filter(C=>D[C]!==E[C]).map(C=>({key:C,before:D[C],after:E[C]})))}if(i.warn(...O),(0,s.Cu)()||(0,s.b3)())debugger}}),T});l.meta={name:"createMiddleware",key:"createMiddlewarereduxWatcherMiddleware",description:"Allows devs to get console logging or trigger breakpoints when state they care about changes"};const _=l;function d(m){if(!(0,t.A)(m)){i.error("watcherFn passed in to addWatcher must be a function");return}o.push(m)}u(d,"addWatcher");function r(){o=[]}u(r,"clearAllWatchers"),(0,c.ul)("reduxWatcher",{addWatcher:d,clearAllWatchers:r})},7156104699:(j,p,e)=>{"use strict";e.d(p,{N:()=>m,A:()=>r});var t=e(1527536225),n=e(6152845331),s=e(9829579108);const a=(0,s.Ay)(h=>{var v;return h==null||(v=h.sideEffects)===null||v===void 0?void 0:v.sideEffectsMap});a.meta={name:"createSelector",key:"createSelectorgetSideEffectsMap",description:h=>{var v;return h==null||(v=h.sideEffects)===null||v===void 0?void 0:v.sideEffectsMap}};const c=(0,s.Ay)(h=>{var v;return h==null||(v=h.clientSideEffects)===null||v===void 0?void 0:v.clientSideEffectsMap});c.meta={name:"createSelector",key:"createSelectorgetClientSideEffectsMap",description:h=>{var v;return h==null||(v=h.clientSideEffects)===null||v===void 0?void 0:v.clientSideEffectsMap}};var o=e(796111729),i=e(6422693406);function l(){return(0,t.Ay)("Handle client side effects",(h,v,y)=>{var I;if(!((I=y.__test)===null||I===void 0)&&I.disableSideEffects)return v(y);const T=h.getState(),f=c(T);return d({store:h,action:y,sideEffectsMap:f}),v(y)})}u(l,"createClientSideEffectsMiddleware");function _(){return(0,t.Ay)("Handle side effects",(h,v,y)=>{var I;if(!((I=y.__test)===null||I===void 0)&&I.disableSideEffects)return v(y);const T=h.getState(),f=a(T);return d({store:h,action:y,sideEffectsMap:f}),v(y)})}u(_,"createSideEffectsMiddleware");function d(h){let{store:v,action:y,sideEffectsMap:I}=h;const T=I&&I[y.type],f=u(g=>((0,n.S$)(y,g),v.dispatch(g)),"wrappedDispatch");T!=null&&T.length&&i.S.resolve().then(()=>{T.forEach(g=>{if(!g)return;const{thunk:M}=g;try{f(M(y))}catch(A){(0,o.Ay)({getState:v.getState}).error("SIDE-EFFECTS",`Error in side effect for '${y.type}'`,A,{subtype:"side_effect_error"})}})})}u(d,"runSideEffects");const r=_(),m=l()},8333842125:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(1416482128),n=e(4724591729),s=e(4887323608),a=e(4157777698);const c=u(d=>{switch(d.type){case a.f0.getType():return{...d,payload:"Channel bulk add payload is too big to output to redux devtools"};default:return d}},"actionSanitizer"),o=(0,s.A)()?void 0:()=>({apologies:"Serializing our large state kept crashing redux devtools. I hope to bring it back someday, but for now you can see the state by using `TS.redux.getState()` in the console"}),l={autoPause:!0,actionSanitizer:c,stateSanitizer:o,maxAge:1e3,features:{pause:!0}};function _(d){let{teamOrEnterpriseId:r,appName:m="",customEnhancers:h,middlewares:v,disableDevTools:y}=d;return(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&!y&&((0,n.Cu)()||(0,n.b3)())?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({...l,name:["Slack",r,m].filter(f=>f&&f.length>0).join("-")}):t.Zz)((0,t.Tw)(...v??[]),...h??[])}u(_,"configureEnhancers")},582577127:(j,p,e)=>{"use strict";e.d(p,{g:()=>n});var t=e(3371371503);function n(s){const o={sideEffectsMap:{},clientSideEffectsMap:{}};return!s||!s.length?o:s.reduce((i,l)=>{const{actions:_,scope:d}=l;let r;switch(d){case t.RE.client:r=i.clientSideEffectsMap;break;default:case t.RE.workspace:r=i.sideEffectsMap;break}return _.forEach(m=>{var h;const v=m==null||(h=m.getType)===null||h===void 0?void 0:h.call(m);v&&(r[v]=r[v]||[],r[v].push(l))}),i},o)}u(n,"generateSideEffectsMaps")},2732935554:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(1185969935),n=e(1004520977);const s={hasKeyboardFocus:!1},c=(0,t.Ay)({},s,{storeKey:"accessibilityPersistent",persistenceEnabled:!0,persistImmediately:!0}).on(n.w,function(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return o.hasKeyboardFocus===i?o:{...o,hasKeyboardFocus:i}})},5105455463:(j,p,e)=>{"use strict";e.d(p,{As:()=>c,N9:()=>n,V_:()=>s,WB:()=>d,X8:()=>a,bb:()=>l,c7:()=>r,dH:()=>i,lf:()=>_,og:()=>t,rf:()=>o});const t="(prefers-contrast: more)",n="useAriaApplicationForListViews",s="composerUpArrowShortcutBehavior",a="messageTextLineSpacing",c="messageSpacing",o="messageTextWordSpacing",i="conversationIncomingMessageSound",l="conversationSentMessageSound",_="conversationIncomingMessageAnnouncement",d="peeksEnabledOnMouseEnter",r=!0},3034787354:(j,p,e)=>{"use strict";e.d(p,{A:()=>D});var t=e(3245843483),n=e(8646192222),s=e(1185969935),a=e(25586007),c=e(5105455463),o=e(8439865561),i=e(9733150292);let l=!1;(0,n.Nu)()?l=window.matchMedia(c.og).matches:(0,n.hk)()&&(l=(0,t.oQe)("settings","shouldUseHighContrastColors"));let _=!1;try{_=!!(0,i.W6)(c.N9)}catch{}let d;try{d=(0,i.W6)(c.V_)}catch{}let r;try{r=(0,i.W6)(c.X8)||1}catch{}let m;try{m=(0,i.W6)(c.As)||1}catch{}let h;try{h=(0,i.W6)(c.rf)||"0"}catch{}let v;try{var y;v=(y=(0,i.W6)(c.dH))!==null&&y!==void 0?y:""}catch{v=""}let I;try{var T;I=(T=(0,i.W6)(c.bb))!==null&&T!==void 0?T:""}catch{I=""}let f;try{f=(0,i.W6)(c.lf)}catch{f=void 0}let g;try{var M;g=(M=(0,i.W6)(c.WB))!==null&&M!==void 0?M:c.c7}catch{g=c.c7}const A={screenReaderEnabled:!1,shouldUseHighContrastColors:l,useARIAApplicationForListViews:_,composerUpArrowShortcutBehavior:d,messageTextLineSpacing:r,messageSpacing:m,messageTextWordSpacing:h,conversationIncomingMessageSound:v,conversationSentMessageSound:I,conversationIncomingMessageAnnouncement:f,peeksEnabledOnMouseEnter:g},D=(0,s.Ay)({},A,{storeKey:"accessibility",persistenceEnabled:!1}).on(o.rl,(E,C)=>C!=null&&C.message?{...E,announcerAPIAnnouncement:C}:E).on(o.Jq,(E,C)=>typeof C!="boolean"||C===E.screenReaderEnabled?E:{...E,screenReaderEnabled:C}).on(o.N,function(E){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof C!="boolean"||C===E.shouldUseHighContrastColors?E:{...E,shouldUseHighContrastColors:C}}).on(o.KQ,function(E){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{...E,useARIAApplicationForListViews:C}}).on(o.Tv,function(E){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.v.LIST;return{...E,composerUpArrowShortcutBehavior:C}}).on(o.C_,function(E){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{...E,messageTextLineSpacing:C}}).on(o.XE,function(E){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{...E,messageSpacing:C}}).on(o.Mq,function(E){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return{...E,messageTextWordSpacing:C}}).on(o.Sr,(E,C)=>({...E,conversationIncomingMessageSound:C})).on(o.mw,(E,C)=>({...E,conversationSentMessageSound:C})).on(o.Ap,(E,C)=>({...E,conversationIncomingMessageAnnouncement:C})).on(o.V_,(E,C)=>({...E,peeksEnabledOnMouseEnter:C}))},8365110903:(j,p,e)=>{"use strict";e.d(p,{T:()=>o});var t=e(1031947056),n=e(4134037340),s=e(5105455463),a=e(8439865561),c=e(9733150292);const o=(0,t.Ay)("Set the behavior of the up arrow shortcut when focus is in the MessageInput",(i,l,_)=>{if((0,n.A)(l()))try{(0,c.q9)(s.V_,_)}catch{}i((0,a.Tv)(_))});o.meta={name:"createThunk",key:"createThunksetComposerUpArrowShortcutBehavior",description:"Set the behavior of the up arrow shortcut when focus is in the MessageInput"}},2633701976:(j,p,e)=>{"use strict";e.d(p,{p:()=>o});var t=e(1031947056),n=e(4134037340),s=e(5105455463),a=e(8439865561),c=e(9733150292);const o=(0,t.Ay)("Set the pref for the sound that plays when a message arrives to the focused conversation",(i,l,_)=>{if((0,n.A)(l()))try{(0,c.q9)(s.lf,_)}catch{}i((0,a.Ap)(_))});o.meta={name:"createThunk",key:"createThunksetPersistentConversationIncomingMessageAnnouncement",description:"Set the pref for the sound that plays when a message arrives to the focused conversation"}},2517531287:(j,p,e)=>{"use strict";e.d(p,{R:()=>o,r:()=>i});var t=e(1031947056),n=e(4134037340),s=e(5105455463),a=e(8439865561),c=e(9733150292);const o=(0,t.Ay)("Set the pref for the sound that plays when a message arrives to the focused conversation",(l,_,d)=>{if((0,n.A)(_()))try{(0,c.q9)(s.dH,d)}catch{}l((0,a.Sr)(d))});o.meta={name:"createThunk",key:"createThunksetPersistentConversationIncomingMessageSound",description:"Set the pref for the sound that plays when a message arrives to the focused conversation"};const i=(0,t.Ay)("Set the pref for the sound that plays when a message is sent to the focused conversation",(l,_,d)=>{if((0,n.A)(_()))try{(0,c.q9)(s.bb,d)}catch{}l((0,a.mw)(d))});i.meta={name:"createThunk",key:"createThunksetPersistentConversationSentMessageSound",description:"Set the pref for the sound that plays when a message is sent to the focused conversation"}},25586007:(j,p,e)=>{"use strict";e.d(p,{v:()=>t});var t;(function(n){n[n.LIST=1]="LIST",n[n.LIST_IF_EMPTY=2]="LIST_IF_EMPTY",n[n.EDIT=3]="EDIT"})(t||(t={}))},3087402890:(j,p,e)=>{"use strict";e.d(p,{FX:()=>o,X5:()=>c,ZY:()=>h,cD:()=>_,cQ:()=>d,cw:()=>l,dj:()=>r,fe:()=>a,lB:()=>m,qK:()=>n,r8:()=>i,s2:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Set the thread root keys");n.meta={name:"createAction",key:"createActionsetThreads",description:"Set the thread root keys"};const s=(0,t.Ay)("Append more thread root keys");s.meta={name:"createAction",key:"createActionappendThreads",description:"Append more thread root keys"};const a=(0,t.Ay)("Insert a thread at the beginning");a.meta={name:"createAction",key:"createActionprependThread",description:"Insert a thread at the beginning"};const c=(0,t.Ay)("Increments totalUnreadReplies");c.meta={name:"createAction",key:"createActionincrementTotalUnreadReplies",description:"Increments totalUnreadReplies"};const o=(0,t.Ay)("Sets totalNewThreads to 0");o.meta={name:"createAction",key:"createActionclearTotalNewThreads",description:"Sets totalNewThreads to 0"};const i=(0,t.Ay)("Increments allThreadsRefreshCounter");i.meta={name:"createAction",key:"createActionincrementAllThreadsRefreshCounter",description:"Increments allThreadsRefreshCounter"};const l=(0,t.Ay)("Set the thread key that should be focused");l.meta={name:"createAction",key:"createActionsetFocusRequestedThreadKey",description:"Set the thread key that should be focused"};const _=(0,t.Ay)("Set the thread timestamp that should be focused");_.meta={name:"createAction",key:"createActionsetFocusRequestedReplyTs",description:"Set the thread timestamp that should be focused"};const d=(0,t.Ay)("Add a thread key to an array of threads that were manually marked unread");d.meta={name:"createAction",key:"createActionappendThreadToManuallyMarkedUnread",description:"Add a thread key to an array of threads that were manually marked unread"};const r=(0,t.Ay)("set object of threads that have been manually marked as unread");r.meta={name:"createAction",key:"createActionsetManuallyMarkedThreads",description:"set object of threads that have been manually marked as unread"};const m=(0,t.Ay)("Remove a thread key from an array of threads that were manually marked unread");m.meta={name:"createAction",key:"createActionremoveThreadFromManuallyMarkedUnread",description:"Remove a thread key from an array of threads that were manually marked unread"};const h=(0,t.Ay)("Sets manuallyMarkedUnread to empty");h.meta={name:"createAction",key:"createActionclearThreadsFromManuallyMarkedUnread",description:"Sets manuallyMarkedUnread to empty"}},8778137680:(j,p,e)=>{"use strict";e.d(p,{DQ:()=>c,Lm:()=>i,RZ:()=>_,S:()=>h,X$:()=>a,_y:()=>d,c6:()=>r,fv:()=>o,rk:()=>s,yT:()=>m,z7:()=>l,zZ:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set Awareness State for another user");n.meta={name:"createAction",key:"createActionsetAwarenessStateForOtherUser",description:"Set Awareness State for another user"};const s=(0,t.Ay)("Set Awareness State for me");s.meta={name:"createAction",key:"createActionsetMyAwarenessState",description:"Set Awareness State for me"};const a=(0,t.Ay)("Remove Awareness State for me");a.meta={name:"createAction",key:"createActionremoveMyAwarenessState",description:"Remove Awareness State for me"};const c=(0,t.Ay)("Clear the full awareness state for a user");c.meta={name:"createAction",key:"createActionclearUserAwarenessState",description:"Clear the full awareness state for a user"};const o=(0,t.Ay)("Set my screenshare view");o.meta={name:"createAction",key:"createActionsetMyScreenshareView",description:"Set my screenshare view"};const i=(0,t.Ay)("Remove my screenshare view");i.meta={name:"createAction",key:"createActionremoveMyScreenshareView",description:"Remove my screenshare view"};const l=(0,t.Ay)("Set my sticky reaction");l.meta={name:"createAction",key:"createActionsetMyStickyReaction",description:"Set my sticky reaction"};const _=(0,t.Ay)("Remove my sticky reaction");_.meta={name:"createAction",key:"createActionremoveMyStickyReaction",description:"Remove my sticky reaction"};const d=(0,t.Ay)("Clear any stale awareness entries");d.meta={name:"createAction",key:"createActionttlAwarenessEntries",description:"Clear any stale awareness entries"};const r=(0,t.Ay)("Sets updatedTimestamp for my awareness entries to current time");r.meta={name:"createAction",key:"createActionrenewMyUpdatedTimestamps",description:"Sets updatedTimestamp for my awareness entries to current time"};const m=(0,t.Ay)("Set my active song");m.meta={name:"createAction",key:"createActionsetMyActiveSong",description:"Set my active song"};const h=(0,t.Ay)("Remove my active song");h.meta={name:"createAction",key:"createActionremoveMyActiveSong",description:"Remove my active song"}},7592559649:(j,p,e)=>{"use strict";e.d(p,{$G:()=>g,Ae:()=>O,Fb:()=>f,M3:()=>I,b1:()=>A,fL:()=>T,gV:()=>M,sW:()=>y,xP:()=>v});var t=e(9829579108),n=e(3385422400),s=e(6418055367),a=e(166097325),c=e(9113979368),o=e(5751973043),i=e(1345902898),l=e(6324645806);const _=(0,n.Ad)(s.UI,a.A),d=u(E=>{var C;return(E==null||(C=E.awareness)===null||C===void 0?void 0:C.awarenessEntries)||o.Ml},"selectAwarenessEntries"),r=(0,n.Mz)([d,(E,C)=>C,(E,C,S)=>S,(E,C,S,b)=>b],(E,C,S,b)=>{if(C===void 0)return o.t0;const k=E.filter(N=>{const V=N.channel===C,R=N.fieldName===S,P=b?N.uniqueId===b:!0,z=!(0,l.h)(N);return V&&R&&P&&z}).map(N=>[N.user,N.fieldValue]),W=Object.fromEntries(k);return(0,c.A)(W)?o.t0:W}),m=(0,n.Mz)([d,(E,C)=>C,(E,C,S)=>S],(E,C,S)=>{if(C===void 0)return o.t0;const b=E.filter(W=>{const N=W.channel===C,V=W.fieldName===S,R=!(0,l.h)(W);return N&&V&&R}).map(W=>[W.uniqueId,[W.user,W.fieldValue]]),k=Object.fromEntries(b);return(0,c.A)(k)?o.t0:k}),h=(0,n.Mz)([d,(E,C)=>C,(E,C,S)=>S],(E,C,S)=>{if(C===void 0)return o.t0;var b,k;const W=E.filter(V=>{const R=V.channel===C,P=V.fieldName===S,z=!(0,l.h)(V);return R&&P&&z}).sort((V,R)=>((b=V.fieldTimestampMs)!==null&&b!==void 0?b:Number.MAX_SAFE_INTEGER)-((k=R.fieldTimestampMs)!==null&&k!==void 0?k:Number.MAX_SAFE_INTEGER)).map(V=>[V.user,V.fieldValue]);return Object.fromEntries(W)}),v=(0,t.Ay)((E,C)=>{const S=h(E,C,i.p4.STICKYEMOJI);return(0,c.A)(S)?o.t0:S});v.meta={name:"createSelector",key:"createSelectorgetStickyEmojisForTopicByUser",description:(E,C)=>{const S=h(E,C,i.p4.STICKYEMOJI);return(0,c.A)(S)?o.t0:S}};const y=(0,t.Ay)((E,C)=>r(E,C,i.p4.CONTENTVIEW));y.meta={name:"createSelector",key:"createSelectorgetContentViewsForTopicByUser",description:(E,C)=>r(E,C,i.p4.CONTENTVIEW)};const I=(0,t.Ay)((E,C)=>m(E,C,i.p4.CONTENTVIEW));I.meta={name:"createSelector",key:"createSelectorgetContentViewsKeyedByPeerId",description:(E,C)=>m(E,C,i.p4.CONTENTVIEW)};const T=(0,t.Ay)((E,C,S,b)=>{var k;return(E==null||(k=E.awareness)===null||k===void 0?void 0:k.awarenessEntries).filter(V=>{const R=V.channel===C,P=V.user===S,z=!b||(0,l.I)(V.fieldName)?!0:V.uniqueId===b,$=!(0,l.h)(V);return R&&P&&z&&$}).map(V=>({field_name:V.fieldName,field_value:V.fieldValue,...!!V.fieldTimestampMs&&{field_timestamp_ms:V.fieldTimestampMs}}))});T.meta={name:"createSelector",key:"createSelectorgetAwarenessForMe",description:(E,C,S,b)=>{var k;return(E==null||(k=E.awareness)===null||k===void 0?void 0:k.awarenessEntries).filter(V=>{const R=V.channel===C,P=V.user===S,z=!b||(0,l.I)(V.fieldName)?!0:V.uniqueId===b,$=!(0,l.h)(V);return R&&P&&z&&$}).map(V=>({field_name:V.fieldName,field_value:V.fieldValue,...!!V.fieldTimestampMs&&{field_timestamp_ms:V.fieldTimestampMs}}))}};const f=(0,t.Ay)((E,C,S,b)=>{const k=T(E,C,S,b);for(const W of k)if(W.field_name===i.p4.STICKYEMOJI)return W;return null});f.meta={name:"createSelector",key:"createSelectorgetAwarenessStickyEmoji",description:(E,C,S,b)=>{const k=T(E,C,S,b);for(const W of k)if(W.field_name===i.p4.STICKYEMOJI)return W;return null}};const g=(0,t.Ay)((E,C)=>{let{callId:S,userId:b,uniqueId:k}=C;return S?r(E,S,i.p4.STICKYEMOJI,k)[b]:void 0});g.meta={name:"createSelector",key:"createSelectorgetStickyReactionsByUserId",description:(E,C)=>{let{callId:S,userId:b,uniqueId:k}=C;return S?r(E,S,i.p4.STICKYEMOJI,k)[b]:void 0}};const M=(0,t.Ay)((E,C)=>{let{callId:S,userId:b}=C;if(!S)return;const k=r(E,S,i.p4.HUDDLE_ACTIVE_SONG);if((0,c.A)(k))return;if(b)return k[b];const W=Object.values(k);if(W.length!==0)return W[0]});M.meta={name:"createSelector",key:"createSelectorgetRequestedSong",description:(E,C)=>{let{callId:S,userId:b}=C;if(!S)return;const k=r(E,S,i.p4.HUDDLE_ACTIVE_SONG);if((0,c.A)(k))return;if(b)return k[b];const W=Object.values(k);if(W.length!==0)return W[0]}};const A=(0,t.Ay)((E,C)=>{let{callId:S,userId:b,uniqueId:k}=C;return S?r(E,S,i.p4.STEPS,k)[b]:void 0});A.meta={name:"createSelector",key:"createSelectorgetStepsByUserId",description:(E,C)=>{let{callId:S,userId:b,uniqueId:k}=C;return S?r(E,S,i.p4.STEPS,k)[b]:void 0}};const O=_([d,(E,C,S,b,k)=>`${C},${S},${b},${k}`],(E,C)=>{const[S,b,k,W]=C.split(","),N=E.filter(V=>{const R=V.channel===S,P=V.user!==b,z=V.fieldName===i.p4.ACTIVE_CELL&&V.fieldValue&&V.fieldValue.rowId===k&&V.fieldValue.colId===W,$=!(0,l.h)(V);return R&&P&&z&&$}).map(V=>[[`${V.fieldValue.rowId},${V.fieldValue.colId}`],V.user]);return N.length?Object.fromEntries(N):o.t0}),D=(0,n.Mz)([d,(E,C)=>C],(E,C)=>C===void 0?o.Ml:E.filter(b=>{const k=b.channel===C,W=b.fieldName===i.p4.ACTIVE_CELL;return k&&W}).map(b=>b.user))},1345902898:(j,p,e)=>{"use strict";e.d(p,{Pz:()=>t,mO:()=>s,p4:()=>n});var t;(function(a){a.BROADCAST="broadcast",a.QUERY="query",a.CLOSE="close"})(t||(t={}));var n;(function(a){a.CONTENTVIEW="contentView",a.STICKYEMOJI="stickyEmoji",a.ACTIVE_CELL="activeCell",a.HUDDLE_ACTIVE_SONG="huddleActiveSong",a.STEPS="steps"})(n||(n={}));const s=60*1e3},6324645806:(j,p,e)=>{"use strict";e.d(p,{I:()=>s,h:()=>n});var t=e(1345902898);const n=u(a=>{const c=Date.now();var o;return c-((o=a.updatedTimestamp)!==null&&o!==void 0?o:c)>=t.mO},"isAwarenessEntryExpired"),s=u(a=>a?[t.p4.HUDDLE_ACTIVE_SONG].includes(a):!1,"skipUniquenessCheck")},3749529250:(j,p,e)=>{"use strict";e.d(p,{K:()=>s,z:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Enable big button mode");n.meta={name:"createAction",key:"createActionenableBBM",description:"Enable big button mode"};const s=(0,t.Ay)("Disable big button mode");s.meta={name:"createAction",key:"createActiondisableBBM",description:"Disable big button mode"}},4614661813:(j,p,e)=>{"use strict";e.d(p,{Y:()=>a});var t=e(1185969935),n=e(3749529250);const s={enabled:!1},a=(0,t.Ay)({},s,{storeKey:"bbm",persistenceEnabled:!0,persistImmediately:!0}).on(n.z,c=>({...c,enabled:!0})).on(n.K,c=>({...c,enabled:!1}))},8677230210:(j,p,e)=>{"use strict";e.d(p,{pO:()=>y,AF:()=>v,E6:()=>g,vu:()=>f,wC:()=>I,Od:()=>T});var t=e(3037015781),n=e(9829579108),s=e(9464746668),a=e(4588963228),c=e(8847766420),o=e(2762206868),i=e(8276911661);const l=["B01","BSLACKBOT","B03"];var _=e(3447104916),d=e(4562579337);function r(M){return!!(M&&(0,t.uz)(M)&&!(0,d.A)(M))}u(r,"isMemberHuman");var m=e(9887599716),h=e(9354158662);const v=(0,n.Ay)(function(M,A){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const D=(0,c.ZT)(M);if(!A)return!1;const E=(0,m.o)(M,A);return!E&&(0,a.A)(A)&&O&&l.indexOf(A)<0?(0,_.Ss)().fetchObjectWithId(D,A):((0,_.ez)(D,A),E||!1)});v.meta={name:"createSelector",key:"createSelectorgetBotById",description:function(M,A){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const D=(0,c.ZT)(M);if(!A)return!1;const E=(0,m.o)(M,A);return!E&&(0,a.A)(A)&&O&&l.indexOf(A)<0?(0,_.Ss)().fetchObjectWithId(D,A):((0,_.ez)(D,A),E||!1)}};const y=(0,n.Ay)((M,A)=>{if(!A)return;const O=(0,h.iO)(M);let D;return O&&(D=Object.values(O).find(E=>E.app_id===A)),D});y.meta={name:"createSelector",key:"createSelectorgetBotByAppId",description:(M,A)=>{if(!A)return;const O=(0,h.iO)(M);let D;return O&&(D=Object.values(O).find(E=>E.app_id===A)),D}};const I=(0,n.Ay)((M,A)=>{const O=(0,i.nv)(M,A);return r(O)});I.meta={name:"createSelector",key:"createSelectorgetMemberIsHuman",description:(M,A)=>{const O=(0,i.nv)(M,A);return r(O)}};const T=(0,n.Ay)(function(M){let{userId:A,botId:O,botProfile:D}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E,C;A&&(E=(0,i.nv)(M,A)),O&&(C=v(M,O)||void 0);const S=E?r(E):!1;let b;!(0,t.uz)(C)&&(0,t.uz)(E)&&(b=(0,s.A)(M,E),b&&b!==O&&(C=v(M,b)||void 0));let k;if(!(0,t.uz)(C)&&D&&(k=D.id,k&&k!==b&&k!==O&&(C=v(M,k)||void 0),(0,t.uz)(C)||(C=D)),!(0,t.uz)(E)&&(0,t.uz)(C)&&C.app_id){const W=(0,o.sO)(M,C.app_id);if((0,t.uz)(W)){const N=W.app_user_id;N&&N!==A&&(E=(0,i.nv)(M,N))}}return{bot:C,member:E,memberIsHuman:S}});T.meta={name:"createSelector",key:"createSelectormaybeGetBotAndMemberByIds",description:function(M){let{userId:A,botId:O,botProfile:D}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E,C;A&&(E=(0,i.nv)(M,A)),O&&(C=v(M,O)||void 0);const S=E?r(E):!1;let b;!(0,t.uz)(C)&&(0,t.uz)(E)&&(b=(0,s.A)(M,E),b&&b!==O&&(C=v(M,b)||void 0));let k;if(!(0,t.uz)(C)&&D&&(k=D.id,k&&k!==b&&k!==O&&(C=v(M,k)||void 0),(0,t.uz)(C)||(C=D)),!(0,t.uz)(E)&&(0,t.uz)(C)&&C.app_id){const W=(0,o.sO)(M,C.app_id);if((0,t.uz)(W)){const N=W.app_user_id;N&&N!==A&&(E=(0,i.nv)(M,N))}}return{bot:C,member:E,memberIsHuman:S}}};const f=(0,n.Ay)((M,A)=>{const O=v(M,A);if(O&&O.name)return O.name});f.meta={name:"createSelector",key:"createSelectorgetBotNameById",description:(M,A)=>{const O=v(M,A);if(O&&O.name)return O.name}};const g=(0,n.Ay)((M,A)=>{if(!M||!A)return null;const O=(0,i.nv)(M,A.user),D=A.bot_id||(0,s.A)(M,O);if(!D)return null;if(A.bot_profile)return A.bot_profile.id!==D?{...A.bot_profile,id:D}:A.bot_profile;const E=v(M,D);return E||null});g.meta={name:"createSelector",key:"createSelectorgetBotByMsg",description:(M,A)=>{if(!M||!A)return null;const O=(0,i.nv)(M,A.user),D=A.bot_id||(0,s.A)(M,O);if(!D)return null;if(A.bot_profile)return A.bot_profile.id!==D?{...A.bot_profile,id:D}:A.bot_profile;const E=v(M,D);return E||null}}},8980478045:(j,p,e)=>{"use strict";e.d(p,{HR:()=>a,Pf:()=>s,Vp:()=>c});var t=e(9829579108);const n=(0,t.Ay)((o,i)=>{var l;return(l=o.channelCanvas)===null||l===void 0?void 0:l.byChannelId[i]});n.meta={name:"createSelector",key:"createSelectorgetByChannelIdState",description:(o,i)=>{var l;return(l=o.channelCanvas)===null||l===void 0?void 0:l.byChannelId[i]}};const s=(0,t.Ay)((o,i)=>{var l;return(l=n(o,i))===null||l===void 0?void 0:l.tempId});s.meta={name:"createSelector",key:"createSelectorgetChannelCanvasTempId",description:(o,i)=>{var l;return(l=n(o,i))===null||l===void 0?void 0:l.tempId}};const a=(0,t.Ay)((o,i)=>{var l;return(l=o.channelCanvas)===null||l===void 0?void 0:l.byTempId[i]});a.meta={name:"createSelector",key:"createSelectorgetChannelIdForTempId",description:(o,i)=>{var l;return(l=o.channelCanvas)===null||l===void 0?void 0:l.byTempId[i]}};const c=(0,t.Ay)((o,i)=>{var l,_;return(_=(l=n(o,i))===null||l===void 0?void 0:l.waitingForLock)!==null&&_!==void 0?_:!1});c.meta={name:"createSelector",key:"createSelectorgetChannelCanvasWaitingForLock",description:(o,i)=>{var l,_;return(_=(l=n(o,i))===null||l===void 0?void 0:l.waitingForLock)!==null&&_!==void 0?_:!1}}},9536404279:(j,p,e)=>{"use strict";e.d(p,{CD:()=>i,Jt:()=>c,Np:()=>s,VG:()=>n,bz:()=>a,fp:()=>o,hX:()=>l});var t=e(2140362605);const n=(0,t.Ay)("Add timestamps to channel history");n.meta={name:"createAction",key:"createActionaddTimestamps",description:"Add timestamps to channel history"};const s=(0,t.Ay)("Remove timestamps from channel history");s.meta={name:"createAction",key:"createActionremoveTimestamp",description:"Remove timestamps from channel history"};const a=(0,t.Ay)("Remove all history for a channel");a.meta={name:"createAction",key:"createActionremoveAllTimestamps",description:"Remove all history for a channel"};const c=(0,t.Ay)("Was disconnected; reset reachedEnd to false");c.meta={name:"createAction",key:"createActionresetReachedEnd",description:"Was disconnected; reset reachedEnd to false"};const o=(0,t.Ay)("Drop messages from before a given timestamp");o.meta={name:"createAction",key:"createActiontruncateChannelHistoryPriorToTimestamp",description:"Drop messages from before a given timestamp"};const i=(0,t.Ay)("Drop old messages if there are too many");i.meta={name:"createAction",key:"createActiontruncateChannelHistory",description:"Drop old messages if there are too many"};const l=(0,t.Ay)("Remove all history for every channel");l.meta={name:"createAction",key:"createActionclearChannelHistory",description:"Remove all history for every channel"}},4350638406:(j,p,e)=>{"use strict";e.d(p,{Hw:()=>ae,e3:()=>J,mY:()=>oe,D1:()=>me,Zc:()=>ee,ez:()=>ge});var t=e(3398586081),n=e(7715417323),s=e(6533394955),a=e(8352634987);function c(X,F){return`${X}:${F}`}u(c,"serialize_serialize");function o(X){const[F,L]=X.split(":");return{channelId:F,ts:L}}u(o,"deserialize");var i=e(4423055085),l=e(2208015175),_=e(1703559452),d=e(9816084745),r=e(8289365785),m=e(8786006583),h=e(6422693406),v=e(1031947056),y=e(796111729),I=e(7334104107),T=e(6457401668),f=e(4919145213),g=e(9986847041),M=e(4365697073),A=e(3110884894),O=e(7606781622),D=e(8040098042),E=e(2155512519),C=e(12126472),S=e(1116859610);const b="HISTORY-CFM";function k(X,F){return u(function L(){let{channelId:K,oldest:B,latest:Q,cursor:q="",msgsInRange:le=[],deletedInRange:Te=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Ie={channelId:K,oldest:B,latest:Q,cursor:q,inclusive:!0,includePinCount:!1,reason:"channel-history-store.CFM.fetch"};return X((0,E.Ay)(Ie)).then(function(){let{msgs:De=[],deleted:pe=[],isLimited:fe,hasMore:Z,responseMetadata:se={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.push(...De),Te.push(...pe),Z&&!fe&&se.next_cursor?L({channelId:K,oldest:B,latest:Q,cursor:se.next_cursor,msgsInRange:le,deletedInRange:Te}):(X((0,S.A)({msgs:le,channelId:K,isLimited:fe,latest:Q,oldest:B,deletedInRange:Te})),h.S.resolve())})},"fetchHistoryRangeHelper")(F)}u(k,"fetchHistoryRange");function W(X,F){return u(function L(){let{channelId:K,threadTs:B,oldest:Q,latest:q,cursor:le="",msgsInRange:Te=[],deletedInRange:Ie=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const De={channelId:K,threadTs:B,oldest:Q,latest:q,cursor:le,inclusive:!0,reason:"channel-history-store.CFM.fetch"};return X((0,E.$b)(De)).then(function(){let{msgs:pe=[],deleted:fe=[],hasMore:Z,responseMetadata:se={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Te.push(...le?(0,C.A)(pe,{ts:B}):pe),Ie.push(...fe),Z&&se.next_cursor)return L({channelId:K,threadTs:B,oldest:Q,latest:q,cursor:se.next_cursor,msgsInRange:Te,deletedInRange:Ie});const Ce=Q===B||q===B?Te:(0,C.A)(Te,{ts:B});return X((0,S.A)({msgs:Ce,channelId:(0,A.Iu)(K,B),latest:q,oldest:Q,deletedInRange:Ie})),h.S.resolve()})},"fetchRepliesRangeHelper")(F)}u(W,"fetchRepliesRange");const N=(0,v.Ay)("Fetches a range of messages",(X,F,L)=>{let{channelId:K,oldest:B,latest:Q}=L;return(0,y.Ay)({getState:F,label:b}).info(`Re-fetching ${K} ${B} - ${Q}`),(0,D.A)(K)?k(X,{channelId:K,oldest:B,latest:Q}):W(X,{...(0,A.Sb)(K),oldest:B,latest:Q})});N.meta={name:"createThunk",key:"createThunkfetchRange",description:"Fetches a range of messages"};var V=e(8455301571);function R(X){const F={};return X.forEach(L=>{const{channelId:K,ts:B}=o(L);F[K]=F[K]||[],F[K].push(B)}),F}u(R,"groupTimestampsByChannel");function P(X){let F,L;return(0,l.A)(X,(K,B)=>{F===void 0&&(F=B),L===void 0&&(L=B),B<F&&(F=B),B>L&&(L=B)}),{minTs:F,maxTs:L}}u(P,"getMinAndMaxTs");function z(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,_.A)(F,(L,K)=>X[K])}u(z,"hasIntersection");function $(X,F){return(0,d.A)(F,(L,K)=>X[K])}u($,"isSuperset");function x(X){let{ranges:F={},tsMaps:L=[]}=X;const K={...F};let B=L[0];return L.forEach(Q=>{B!==Q&&(z(B,Q)?$(B,Q)?delete K[Q.rangeId]:$(Q,B)?(delete K[B.rangeId],B=Q):(0,l.A)(Q,(q,le)=>delete B[le]):B=Q)}),Object.values(K)}u(x,"dedupe");function Y(X,F){let L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const K=(0,y.Ay)({state:X,label:b}),B={},Q=[];return L.sort().forEach(q=>{const Te=(0,O.Ld)(X,F,q,!1);if(!Te){K.warn(`No message for ${q} in ${F}`);return}if((0,I.aw)(Te)||(0,f.A)(Te))return;const Ie=[];(!(0,M.n)(Te)||(0,I.jX)(Te)||(0,T.SM)(Te))&&Ie.push(F),((0,I.jX)(Te)||(0,M.n)(Te))&&Ie.push((0,A.Iu)(F,(0,g.L)(Te))),Ie.forEach(De=>{if(!De)return;const pe=(0,V.tp)(X,De,q);if(!pe||pe===V.Vl)return;const{start:fe,end:Z,timestamps:se}=pe,Ae=`${fe}-${Z}`;if(!B[Ae]){const Le={};Object.defineProperty(Le,"rangeId",{enumerable:!1,value:Ae}),B[Ae]={id:De,firstTs:(0,r.A)(se),lastTs:(0,m.A)(se),start:fe,end:Z,tsMap:Le},Q.push(Le)}const Ce=B[Ae];Ce.tsMap[q]=!0})}),{ranges:B,tsMaps:Q}}u(Y,"segment");function ne(X,F){let L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return(x(Y(X,F,L))||[{}]).map(B=>{let{id:Q,firstTs:q,lastTs:le,start:Te,end:Ie,tsMap:De}=B;const{minTs:pe,maxTs:fe}=P(De);return{id:Q,oldest:pe===q?Te:pe,latest:fe===le?Ie:fe}})}u(ne,"rangify");const re=(0,v.Ay)("Fetches chunks of channel history for the given message IDs",(X,F,L)=>{let{ids:K}=L;const B=R(K),Q={};return(0,l.A)(B,(q,le)=>{const Te=ne(F(),le,q);Q[le]=h.S.map(Te,Ie=>{let{oldest:De,latest:pe,id:fe}=Ie;return X(N({channelId:fe,oldest:De,latest:pe}))})}),h.S.all(Object.values(Q))});re.meta={name:"createThunk",key:"createThunkrefetchChannelHistory",description:"Fetches chunks of channel history for the given message IDs"};const _e=re,G=(0,t.A)(()=>new a.Ay({storeKey:"channelHistory",fetch:(X,F)=>(0,s.dispatchForTeamId)(X,_e({ids:F})),metricsName:"channel-history",isEnabled:()=>!0,markStaleAfterSlowReconnect:()=>!1})),ge=u((X,F,L)=>G().maybeRefetch(X,c(F,L)),"maybeRefetch"),oe=u((X,F,L)=>G().markObjectsAsFresh(X,L.map(K=>c(F,K))),"markObjectsAsFresh"),me=u((X,F,L)=>G().markObjectsAsStale(X,L.map(K=>c(F,K))),"markObjectsAsStale"),ue=u((X,F,L)=>G().isObjectFresh(X,serialize(F,L)),"isObjectFresh"),ae=u(X=>G().getFreshObjects(X).map(o),"getFreshObjects");(0,i.zv)("conditionalFetchManagerChannelHistory",G);const he="reachedEnd",ce=(0,t.A)(()=>new a.Ay({storeKey:"channelHistory",fetch:n.A,metricsName:"channel-history-reached-end",isEnabled:()=>!0})),ee=u(X=>ce().markObjectsAsFresh(X,[he]),"markReachedEndAsFresh"),J=u(X=>ce().isObjectFresh(X,[he]),"isReachedEndFresh")},7097022175:(j,p,e)=>{"use strict";e.d(p,{Y:()=>s,r:()=>n});var t=e(7933637612);const{addObjects:n,removeObjects:s}=t.o1},7933637612:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>o,Tp:()=>c,o1:()=>a});var t=e(7538465478);const n={storeKey:"channelLoading",persistenceEnabled:!1},{reducer:s,actions:a,selectors:c}=(0,t.A)(n,{idKey:"channelId",transform:i=>{const{channelId:l,..._}=i;return{id:l,object:_}}}),o=s},8298125694:(j,p,e)=>{"use strict";e.d(p,{Ah:()=>a,Qr:()=>c,c:()=>o});var t=e(9829579108),n=e(7933637612);const{getObjectById:s}=n.Tp,a=u((l,_)=>s(l,_),"innerGetChannelLoadingDataById"),c=(0,t.Ay)((l,_)=>{var d;return!!(!((d=a(l,_))===null||d===void 0)&&d.loading)});c.meta={name:"createSelector",key:"createSelectorisChannelLoading",description:(l,_)=>{var d;return!!(!((d=a(l,_))===null||d===void 0)&&d.loading)}};const o=(0,t.Ay)((l,_)=>{const d=a(l,_);return!!(d!=null&&d.loading&&(d!=null&&d.loadingOlder))});o.meta={name:"createSelector",key:"createSelectorisChannelLoadingOlder",description:(l,_)=>{const d=a(l,_);return!!(d!=null&&d.loading&&(d!=null&&d.loadingOlder))}};const i={innerGetChannelLoadingDataById:a}},3528815215:(j,p,e)=>{"use strict";e.d(p,{f:()=>s});var t=e(1031947056),n=e(7097022175);const s=(0,t.Ay)("Finished loading history for a channel",(a,c,o)=>{const{channelId:i}=o||{};a((0,n.Y)({ids:[i]}))});s.meta={name:"createThunk",key:"createThunkdoneLoading",description:"Finished loading history for a channel"}},1284885799:(j,p,e)=>{"use strict";e.d(p,{v:()=>a});var t=e(1031947056),n=e(8298125694),s=e(7097022175);const a=(0,t.Ay)("Started loading history for a channel",(c,o,i)=>{const{channelId:l,loadingOlder:_,request:d}=i||{},r=(0,n.Ah)(o(),l);r&&r.loading&&r.request&&r.request.cancel(),c((0,s.r)({objects:[{channelId:l,loading:!0,loadingOlder:_,request:d}]}))});a.meta={name:"createThunk",key:"createThunkstartLoading",description:"Started loading history for a channel"}},1949656963:(j,p,e)=>{"use strict";e.d(p,{U:()=>s,ih:()=>a,k9:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set the history invalid timestamp for a channel");n.meta={name:"createAction",key:"createActionsetHistoryInvalidTimestamp",description:"Set the history invalid timestamp for a channel"};const s=(0,t.Ay)("Set the updated timestamp for a channel");s.meta={name:"createAction",key:"createActionsetUpdatedTimestamp",description:"Set the updated timestamp for a channel"};const a=(0,t.Ay)("Bulk update the history invalid timestamps for a channel");a.meta={name:"createAction",key:"createActionbulkUpdateMutationTimestamps",description:"Bulk update the history invalid timestamps for a channel"}},4405788578:(j,p,e)=>{"use strict";e.d(p,{Kq:()=>c,QO:()=>a});var t=e(9829579108);const n=(0,t.Ay)(o=>o==null?void 0:o.channelMutationTimestamps);n.meta={name:"createSelector",key:"createSelectorgetAllMutationTimestamps",description:o=>o==null?void 0:o.channelMutationTimestamps};const s=(0,t.Ay)((o,i)=>{var l;return(l=n(o))===null||l===void 0?void 0:l[i]});s.meta={name:"createSelector",key:"createSelectorgetMutationTimestampsByChannelId",description:(o,i)=>{var l;return(l=n(o))===null||l===void 0?void 0:l[i]}};const a=(0,t.Ay)((o,i)=>{var l;return(l=s(o,i))===null||l===void 0?void 0:l.updatedTs});a.meta={name:"createSelector",key:"createSelectorgetUpdatedTimestamp",description:(o,i)=>{var l;return(l=s(o,i))===null||l===void 0?void 0:l.updatedTs}};const c=(0,t.Ay)((o,i)=>{var l;return(l=s(o,i))===null||l===void 0?void 0:l.historyInvalidTs});c.meta={name:"createSelector",key:"createSelectorgetHistoryInvalidTimestamp",description:(o,i)=>{var l;return(l=s(o,i))===null||l===void 0?void 0:l.historyInvalidTs}}},9606603587:(j,p,e)=>{"use strict";e.d(p,{B:()=>a});var t=e(1031947056),n=e(3430841143),s=e(9530687876);const a=(0,t.Ay)(s.rd.ADD_CHANNEL,function(c,o){let{channel:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};!i||!i.id||c((0,n.F)({channel:i,reason:s.rd.ADD_CHANNEL}))});a.meta={name:"createThunk",key:"createThunkaddChannel",description:s.rd.ADD_CHANNEL}},1761027239:(j,p,e)=>{"use strict";e.d(p,{t:()=>l});var t=e(6422693406),n=e(1031947056),s=e(4446301238),a=e(3430841143),c=e(9530687876),o=e(5267010247),i=e(8822892075);const l=(0,n.Ay)("Archives a private channel, creates and upserts a new one with the same name, then adds users",(_,d,r)=>{let{channelId:m,users:h,subteams:v,inviteAll:y,force:I,propagateInviteResult:T}=r;return _((0,s.wb)({channelId:m,reason:c.rd.CHILD_CHANNEL_CREATED})).then(function(){let{channel:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return _((0,a.F)({channel:f,reason:c.rd.CHILD_CHANNEL_CREATED})),_((0,o.o)((0,i.pr)(f.id))),T?y||h||v?_((0,s.Cw)({channelId:f.id,users:h,subteams:v,inviteAll:y,force:I})).then(g=>({channel:f,inviteResult:g})):t.S.resolve({channel:f,inviteResult:{ok:!0}}):(_((0,s.Cw)({channelId:f.id,users:h,subteams:v})),t.S.resolve({channel:f}))})});l.meta={name:"createThunk",key:"createThunkcreateChildChannelAndAddMembers",description:"Archives a private channel, creates and upserts a new one with the same name, then adds users"}},613926746:(j,p,e)=>{"use strict";e.d(p,{Z:()=>s});var t=e(1031947056),n=e(7631186994);const s=(0,t.Ay)("Create or open an IM",function(a,c){let{memberId:o,shouldNavigateToChannel:i=!0,reason:l}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const _=o?[o]:[];return a((0,n.r)({memberIds:_,shouldNavigateToChannel:i,reason:l}))});s.meta={name:"createThunk",key:"createThunkstartImByMemberId",description:"Create or open an IM"}},7631186994:(j,p,e)=>{"use strict";e.d(p,{r:()=>m});var t=e(6422693406),n=e(9113979368),s=e(235108050),a=e(1031947056),c=e(5795074931),o=e(9289081806),i=e(4446301238),l=e(8822892075),_=e(9101533895),d=e(3430841143),r=e(5267010247);const m=(0,a.Ay)("Create or open an MPIM",function(h,v){let{memberIds:y,shouldNavigateToChannel:I=!0,isQuiet:T=!1,reason:f="startMpimByMemberIds"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if((0,n.A)(y))return t.S.resolve();const g=v(),M=u(D=>(h((0,r.o)((0,l.pr)(D.id))),t.S.resolve(D)),"navigateToChannel");let A,O;if(y.length===1)O=y,A=(0,_.Pu)(g,y[0]);else{const D=(0,c.WR)(g);O=(0,s.A)([D,...y]),A=(0,_.FB)(g,O)}return(0,o.nT)(A)?I?M(A):t.S.resolve(A):h((0,i.jP)({isQuiet:T,memberIds:O,reason:f})).then(D=>!D||!D.channel?t.S.reject(new Error("missing-channel")):(h((0,d.F)({channel:D.channel})),I?M(D.channel):t.S.resolve(D.channel)))});m.meta={name:"createThunk",key:"createThunkstartMpimByMemberIds",description:"Create or open an MPIM"}},4653418008:(j,p,e)=>{"use strict";e.d(p,{LA:()=>a,Th:()=>c,kl:()=>s,yg:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set the current theme field in redux (do not use this)");n.meta={name:"createAction",key:"createActionsetClientThemeInternal",description:"Set the current theme field in redux (do not use this)"};const s=(0,t.Ay)("Set the OS system sync field in redux (do not use this)");s.meta={name:"createAction",key:"createActionsetSystemSyncInternal",description:"Set the OS system sync field in redux (do not use this)"};const a=(0,t.Ay)("Set the OS system theme field in redux (do not use this)");a.meta={name:"createAction",key:"createActionsetSystemTheme",description:"Set the OS system theme field in redux (do not use this)"};const c=(0,t.Ay)("Set the client typeface");c.meta={name:"createAction",key:"createActionsetClientTypeface",description:"Set the client typeface"}},5922222922:(j,p,e)=>{"use strict";e.d(p,{C3:()=>s,k4:()=>t,u7:()=>n});const t="slack-client-theme",n="slack-client-theme-os-sync",s="client-typeface"},5923036663:(j,p,e)=>{"use strict";e.d(p,{A:()=>M});var t=e(1703559452),n=e(796111729),s=e(4096483543),a=e(958961878),c=e(3245843483),o=e(1185969935),i=e(6533394955),l=e(5922222922),_=e(4653418008),d=e(3328068409),r=e(767804497),m=e(3564619745),h=e(9012396182),v=e(9733150292);let y="light",I=!1,T="light",f;try{f=(0,v.W6)(l.C3)||void 0}catch{}try{a.w2&&(0,s.A)()&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addListener(A=>{const O=A.matches?"dark":"light";T=O,I&&(y=T);const D=(0,i.getClientStoreInstance)();if(D){const E=D.getState(),C=(0,h.getBootedWorkspaces)(E),S=(0,t.A)(C.map(b=>(0,a.Ay)((0,i.getStateByTeamId)(b))));D.dispatch((0,_.LA)(O)),S&&(0,d.FW)(E)&&D.dispatch((0,r.P)(O))}})}catch(A){(0,n.Wo)().warn("CLIENT-THEME-STORE","window.matchMedia hook failed; system theme will not be updated.",A)}try{const A=window.localStorage.getItem(l.k4),O=window.localStorage.getItem(l.u7);y=A||"light",a.w2&&(O?I=O==="true":I=!A,window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(T="dark"),I&&(y=T)),(0,c.g9M)()&&((0,c.cGU)({name:"userTheme",value:y}),(0,c.cGU)({name:"systemThemeSyncEnabled",value:I}))}catch(A){(0,n.Wo)().warn("CLIENT-THEME-STORE","localStorage read failed; client theme will not be persisted.",A)}const M=(0,o.Ay)({},{clientTheme:y,systemSync:I,systemTheme:T,clientTypeface:f},{storeKey:"clientTheme",persistenceEnabled:!1}).on(_.yg,function(A){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"light";return{...A,clientTheme:O}}).on(_.kl,function(A){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{...A,systemSync:O}}).on(_.LA,function(A){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"light";return{...A,systemTheme:O}}).on(_.Th,function(A){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.mZ;return{...A,clientTypeface:O}})},767804497:(j,p,e)=>{"use strict";e.d(p,{P:()=>o});var t=e(796111729),n=e(3245843483),s=e(1031947056),a=e(5922222922),c=e(4653418008);const o=(0,s.Ay)("Set the current theme for the device",function(i,l){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"light";try{window.localStorage.setItem(a.k4,_)}catch{(0,t.Wo)().warn("CLIENT-THEME-STORE","localStorage write failed; client theme will not be persisted.")}i((0,c.yg)(_)),(0,n.cGU)({name:"userTheme",value:_})});o.meta={name:"createThunk",key:"createThunksetClientTheme",description:"Set the current theme for the device"}},5670953896:(j,p,e)=>{"use strict";e.d(p,{$_:()=>v,Ci:()=>c,Dn:()=>a,F8:()=>d,N2:()=>l,RX:()=>i,Xc:()=>h,ij:()=>s,pq:()=>r,qE:()=>o,rj:()=>m,sR:()=>n,vN:()=>_});var t=e(2140362605);const n=(0,t.Ay)("Resets Slack Connect Invites to the provided inbound/outbound connect invites");n.meta={name:"createAction",key:"createActionresetConnectInvites",description:"Resets Slack Connect Invites to the provided inbound/outbound connect invites"};const s=(0,t.Ay)("Resets Slack Connect Invites to the provided inbound/outbound pending connect invites");s.meta={name:"createAction",key:"createActionresetPendingConnectInvites",description:"Resets Slack Connect Invites to the provided inbound/outbound pending connect invites"};const a=(0,t.Ay)("Upserts a Slack Connect Invite");a.meta={name:"createAction",key:"createActionupsertConnectInvite",description:"Upserts a Slack Connect Invite"};const c=(0,t.Ay)("Upserts a pending Slack Connect Invite");c.meta={name:"createAction",key:"createActionupsertPendingConnectInvite",description:"Upserts a pending Slack Connect Invite"};const o=(0,t.Ay)("Removes a Slack Connect Invite");o.meta={name:"createAction",key:"createActionremoveConnectInvite",description:"Removes a Slack Connect Invite"};const i=(0,t.Ay)("Removes a pending Slack Connect Invite");i.meta={name:"createAction",key:"createActionremovePendingConnectInvite",description:"Removes a pending Slack Connect Invite"};const l=(0,t.Ay)("Sets freshness flag for Slack Connect invites");l.meta={name:"createAction",key:"createActionsetAreInvitesFresh",description:"Sets freshness flag for Slack Connect invites"};const _=(0,t.Ay)("Sets whether logged-in member's email has been verified for Slack Connect visibility purposes");_.meta={name:"createAction",key:"createActionsetIsEmailVerified",description:"Sets whether logged-in member's email has been verified for Slack Connect visibility purposes"};const d=(0,t.Ay)("Sets whether logged-in member's email verification has failed");d.meta={name:"createAction",key:"createActionsetIsUserVerificationFetchError",description:"Sets whether logged-in member's email verification has failed"};const r=(0,t.Ay)("Upserts an acceptance eligibility result for a Slack Connect channel invite");r.meta={name:"createAction",key:"createActionupsertChannelConnectInviteAcceptanceEligibilityResult",description:"Upserts an acceptance eligibility result for a Slack Connect channel invite"};const m=(0,t.Ay)("Upserts an acceptance eligibility result for a Slack Connect DM invite");m.meta={name:"createAction",key:"createActionupsertDmConnectInviteAcceptanceEligibilityResult",description:"Upserts an acceptance eligibility result for a Slack Connect DM invite"};const h=(0,t.Ay)("Upserts whether an acceptance attempt has failed for a specific Slack Connect invite");h.meta={name:"createAction",key:"createActionupsertHasConnectInviteAcceptanceFailed",description:"Upserts whether an acceptance attempt has failed for a specific Slack Connect invite"};const v=(0,t.Ay)("Sets whether we are currently switching workspaces");v.meta={name:"createAction",key:"createActionsetIsSwitchingWorkspaces",description:"Sets whether we are currently switching workspaces"}},1496122061:(j,p,e)=>{"use strict";e.d(p,{d:()=>d});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(320199792),c=e(5914498199),o=e(5670953896),i=e(1605540670),l=e(3243667193),_=e(2368561198);const d=(0,s.Ay)("Fetch and reset the result of connectInvites.listPending for inbound/outbound invites",function(){var r=(0,t.coroutine)(function*(m,h,v){let{reason:y}=v,I;const T=[l.k.Channel,l.k.Im];(0,_.i)(h())&&T.push(l.k.Workspace);const g=yield m((0,i.O)({reason:y,inviteTypes:T,onlyPendingInvites:!0}));if(g!=null&&g.connect_invites){I=g.connect_invites;const M=I.filter(a.Ef),A=I.filter(a.I4);m((0,c.R)({connectInvites:I})),m((0,o.ij)({pendingInboundConnectInvites:M,pendingOutboundConnectInvites:A}))}return I||[]});return function(m,h,v){return r.apply(this,arguments)}}());d.meta={name:"createThunk",key:"createThunkfetchAndResetAllPendingConnectInvites",description:"Fetch and reset the result of connectInvites.listPending for inbound/outbound invites"}},6111266013:(j,p,e)=>{"use strict";e.d(p,{p:()=>d});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(3622175906),c=e(1605540670),o=e(5914498199),i=e(5670953896),l=e(3243667193),_=e(2368561198);const d=(0,s.Ay)("Fetch and upsert the result of connectInvites.list for inbound/outbound invites",function(){var r=(0,t.coroutine)(function*(m,h,v){let{reason:y,direction:I,includeInviteRequests:T}=v,f;const g=[l.k.Channel,l.k.Im];(0,_.i)(h())&&g.push(l.k.Workspace);const A=yield m((0,c.O)({reason:y,direction:I,inviteTypes:g,includeInviteRequests:T}));if(A!=null&&A.connect_invites){f=A.connect_invites,m((0,o.R)({connectInvites:f}));const O={inboundConnectInvites:I===a.D.Incoming?f:void 0,outboundConnectInvites:I===a.D.Outgoing?f:void 0};m((0,i.sR)(O))}return f||[]});return function(m,h,v){return r.apply(this,arguments)}}());d.meta={name:"createThunk",key:"createThunkfetchAndResetConnectInvites",description:"Fetch and upsert the result of connectInvites.list for inbound/outbound invites"}},5914498199:(j,p,e)=>{"use strict";e.d(p,{R:()=>o});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(7679955939),c=e(320199792);const o=(0,s.Ay)("Upsert any non-local members referenced in the specified connect invites",function(){var i=(0,t.coroutine)(function*(l,_,d){let{connectInvites:r}=d;const m=[];r.forEach(h=>{const v=(0,c.$N)(h);if((0,c.I4)(h)&&v&&v.forEach(y=>{m.push((0,c.mZ)(y))}),(0,c.Ef)(h)){m.push((0,c.y1)(h));const y=(0,c.kR)(h);y&&m.push(y)}}),l((0,a.Ay)({members:m}))});return function(l,_,d){return i.apply(this,arguments)}}());o.meta={name:"createThunk",key:"createThunkupsertMembersFromConnectInvites",description:"Upsert any non-local members referenced in the specified connect invites"}},6168781067:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(1185969935),n=e(2456103428);const s={serviceOnline:!0,lastSocketActivity:0,clientOnline:!0,lastClientConnection:Date.now(),lastSocketConnection:0},c=(0,t.Ay)({},s,{storeKey:"connectivity",persistenceEnabled:!1}).on(n.pm,(o,i)=>({...o,serviceOnline:!!i})).on(n.Uj,o=>o===s?{...o,lastSocketActivity:Date.now()}:(o.lastSocketActivity=Date.now(),o)).on(n.p9,(o,i)=>({...o,clientOnline:!!i,lastClientConnection:Date.now()})).on(n.hM,o=>({...o,lastSocketConnection:Date.now()}))},1314103953:(j,p,e)=>{"use strict";e.d(p,{b:()=>s,k:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set a value that represents whether we are currently in the boot phase");n.meta={name:"createAction",key:"createActionsetBootInFlight",description:"Set a value that represents whether we are currently in the boot phase"};const s=(0,t.Ay)("Set a value that represents whether we are currently performing a warm boot");s.meta={name:"createAction",key:"createActionsetWarmBootInFlight",description:"Set a value that represents whether we are currently performing a warm boot"}},9469211187:(j,p,e)=>{"use strict";e.d(p,{d:()=>s,f:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Remove prefs for a given channel");n.meta={name:"createAction",key:"createActionremovePrefsForConversation",description:"Remove prefs for a given channel"};const s=(0,t.Ay)("Set channel prefs associated with a given channel");s.meta={name:"createAction",key:"createActionsetConversationsListPrefs",description:"Set channel prefs associated with a given channel"}},7914670207:(j,p,e)=>{"use strict";e.d(p,{Dq:()=>v,YO:()=>y,im:()=>T});var t=e(9706240641),n=e.n(t),s=e(3398586081),a=e(6639221719),c=e(8352634987),o=e(6422693406),i=e(4423055085),l=e(1031947056),_=e(6533394955),d=e(9469211187),r=e(8081461848);const m=(0,l.Ay)("Fetch and upsert channel list prefs",function(){var g=(0,t.coroutine)(function*(M,A,O){let{channelId:D,teamId:E}=O;const C=yield M((0,a.U)({channel:D,reason:"client_redux_store"})),{prefs:S}=C;M((0,d.d)({channelId:D,prefs:S})),I(E,D)});return function(M,A,O){return g.apply(this,arguments)}}());m.meta={name:"createThunk",key:"createThunkfetchAndUpsertConversationsListPrefs",description:"Fetch and upsert channel list prefs"};const h=(0,s.A)(()=>new c.Ay({storeKey:r.U,fetch:(g,M)=>o.S.map(M,A=>(0,_.dispatchForTeamId)(g,m({channelId:A,teamId:g}))),isEnabled:()=>!0,metricsName:r.U})),v=u((g,M)=>h().markObjectsAsStale(g,[M]),"markConversationsListPrefsAsStale"),y=u((g,M)=>h().markObjectsAsStale(g,M),"markConversationsListPrefsAsStaleForMultipleChannels"),I=u((g,M)=>h().markObjectsAsFresh(g,[M]),"markConversationsListPrefsAsFresh"),T=u((g,M)=>h().maybeRefetch(g,M),"maybeRefetchConversationsListPrefs"),f={fetchAndUpsertConversationsListPrefs:m};(0,i.zv)("conditionalFetchManagerConversationsListPrefs",h)},8081461848:(j,p,e)=>{"use strict";e.d(p,{A:()=>o,U:()=>s});var t=e(1185969935),n=e(9469211187);const s="conversationsListPrefs",a={},o=(0,t.Ay)({},a,{storeKey:s,persistenceEnabled:!0}).on(n.f,(i,l)=>{let{channelId:_}=l;if(!_||!i[_])return i;const d={...i};return delete d[_],d}).on(n.d,(i,l)=>{let{channelId:_,prefs:d}=l;return _?{...i,[_]:d}:i})},2527994834:(j,p,e)=>{"use strict";e.d(p,{Q:()=>o});var t=e(3385422400),n=e(8847766420),s=e(7914670207),a=e(8040098042);const c=u((i,l)=>{var _;const d=(0,n.ZT)(i);if(!d||!(0,a.A)(l))return null;(0,s.im)(d,l);var r;return(r=i==null||(_=i.conversationsListPrefs)===null||_===void 0?void 0:_[l])!==null&&r!==void 0?r:null},"getConversationsListPrefsByChannelId"),o=(0,t.Mz)((i,l,_)=>c(i,_),(i,l)=>l,(i,l)=>i==null?void 0:i[l])},330221449:(j,p,e)=>{"use strict";e.d(p,{Ot:()=>s,S9:()=>c,X8:()=>n,d$:()=>i,d1:()=>l,en:()=>o,gx:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Adds the new set of custom emoji to the existing store");n.meta={name:"createAction",key:"createActionaddCustomEmoji",description:"Adds the new set of custom emoji to the existing store"};const s=(0,t.Ay)("Resets the array of custom emoji in the store");s.meta={name:"createAction",key:"createActionsetNewCustomEmojiData",description:"Resets the array of custom emoji in the store"};const a=(0,t.Ay)("Removes the specified custom emoji from the store");a.meta={name:"createAction",key:"createActionremoveCustomEmoji",description:"Removes the specified custom emoji from the store"};const c=(0,t.Ay)("Renames a disabled custom emoji");c.meta={name:"createAction",key:"createActionrenameCustomEmoji",description:"Renames a disabled custom emoji"};const o=(0,t.Ay)("Set the loading status for the API request when a new page is loading");o.meta={name:"createAction",key:"createActionsetIsLoadingNewPage",description:"Set the loading status for the API request when a new page is loading"};const i=(0,t.Ay)("Set the loading status for the API request when a user searches for emojis");i.meta={name:"createAction",key:"createActionsetIsLoadingNewSearchQuery",description:"Set the loading status for the API request when a user searches for emojis"};const l=(0,t.Ay)("Set the current sort category and direction for the table");l.meta={name:"createAction",key:"createActionsetSort",description:"Set the current sort category and direction for the table"}},1484767411:(j,p,e)=>{"use strict";e.d(p,{o:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Record that a message was deleted");n.meta={name:"createAction",key:"createActionrecordMessageDeleted",description:"Record that a message was deleted"}},6739248722:(j,p,e)=>{"use strict";e.d(p,{k:()=>n});var t=e(9829579108);const n=(0,t.Ay)((s,a)=>{let{channelId:c,ts:o}=a;return s&&s.deletedMessages&&s.deletedMessages[c]&&!!s.deletedMessages[c][o]});n.meta={name:"createSelector",key:"createSelectorwasMessageDeleted",description:(s,a)=>{let{channelId:c,ts:o}=a;return s&&s.deletedMessages&&s.deletedMessages[c]&&!!s.deletedMessages[c][o]}}},1378315125:(j,p,e)=>{"use strict";e.d(p,{$3:()=>l,Bt:()=>o,Ez:()=>s,LS:()=>d,Mk:()=>a,NN:()=>m,XF:()=>c,Y$:()=>h,Yv:()=>n,_F:()=>_,jC:()=>r,n9:()=>v,oR:()=>I,um:()=>y,yz:()=>i});var t=e(2140362605);const n=(0,t.Ay)("Sets the highlight property of a download");n.meta={name:"createAction",key:"createActioninternalSetDownloadHighlight",description:"Sets the highlight property of a download"};const s=(0,t.Ay)("An update of the desktop state from the desktop app");s.meta={name:"createAction",key:"createActionupdateFromDesktop",description:"An update of the desktop state from the desktop app"};const a=(0,t.Ay)("An update of the window frame state");a.meta={name:"createAction",key:"createActionupdateWindowFrameState",description:"An update of the window frame state"};const c=(0,t.Ay)("Starts a download on the desktop app");c.meta={name:"createAction",key:"createActionstartDesktopDownload",description:"Starts a download on the desktop app"};const o=(0,t.Ay)("Pauses a download on the desktop app");o.meta={name:"createAction",key:"createActionpauseDesktopDownload",description:"Pauses a download on the desktop app"};const i=(0,t.Ay)("Resumes a download on the desktop app");i.meta={name:"createAction",key:"createActionresumeDesktopDownload",description:"Resumes a download on the desktop app"};const l=(0,t.Ay)("Cancels a download on the desktop app");l.meta={name:"createAction",key:"createActioncancelDesktopDownload",description:"Cancels a download on the desktop app"};const _=(0,t.Ay)("Clears all stopped downloads for the active team");_.meta={name:"createAction",key:"createActionclearTeamDesktopDownloads",description:"Clears all stopped downloads for the active team"};const d=(0,t.Ay)("Removes a download on the desktop app");d.meta={name:"createAction",key:"createActionremoveDesktopDownload",description:"Removes a download on the desktop app"};const r=(0,t.Ay)("Retries a download on the desktop app");r.meta={name:"createAction",key:"createActionretryDesktopDownload",description:"Retries a download on the desktop app"};const m=(0,t.Ay)("Opens a file downloaded by the desktop app");m.meta={name:"createAction",key:"createActionopenDesktopDownload",description:"Opens a file downloaded by the desktop app"};const h=(0,t.Ay)("Shows the folder that contains the downloaded file");h.meta={name:"createAction",key:"createActionshowDesktopDownload",description:"Shows the folder that contains the downloaded file"};const v=(0,t.Ay)("Toggles the performance monitor");v.meta={name:"createAction",key:"createActiontogglePerformanceMonitor",description:"Toggles the performance monitor"};const y=(0,t.Ay)("Sets the currently active team in the SSB");y.meta={name:"createAction",key:"createActionsetActiveTeam",description:"Sets the currently active team in the SSB"};const I=(0,t.Ay)("Update canvas system text settings in the SSB");I.meta={name:"createAction",key:"createActionsetCanvasSystemTextSettings",description:"Update canvas system text settings in the SSB"}},7902571278:(j,p,e)=>{"use strict";e.d(p,{A:()=>m});var t=e(1185969935),n=e(4103274853),s=e(3571452446),a=e(2003990933),c=e(7715417323),o=e(3245843483),i=e(1378315125);const l=u((h,v)=>(0,n.A)(h,(y,I)=>(0,n.A)(y,(T,f)=>v(I,f,T))),"mapDownloads"),_=u(h=>({...{app:{},environment:{},settings:{},...(0,s.A)(h,["app","settings","environment"]),windows:(0,n.A)((h==null?void 0:h.windows)||{},y=>({frame:(0,s.A)(y.frame,["isFullScreen","isFocused","isVisible","hasVibrancy","isCurrentlyAudible"])})),downloads:l((h==null?void 0:h.downloads)||{},(y,I,T)=>({...T,highlight:!1})),debug:{isPerformanceMonitorEnabled:!1}},activeTeamId:(0,a.A)(window,"desktop.reduxHelper.state.selectedTeamId")}),"initializeState"),d=(0,o.g9M)()?_((0,a.A)(window,"desktop.redux.getState",c.A)()):null,m=(0,t.Ay)({},d,{storeKey:"desktop",persistenceEnabled:!1}).on(i.Ez,(h,v)=>{const y=v.downloads?l(v.downloads,(I,T,f)=>({...f,highlight:(0,a.A)(h.downloads,[I,T,"highlight"],!1)})):h.downloads;return{...h,...v,downloads:y}}).on(i.Mk,(h,v)=>{let{windowId:y,property:I,value:T}=v;var f,g,M;return{...h,windows:{...h.windows,[y]:{...((f=h.windows)===null||f===void 0?void 0:f[y])||{},frame:{...((g=h.windows)===null||g===void 0||(M=g[y])===null||M===void 0?void 0:M.frame)||{},[I]:T}}}}}).on(i.Yv,(h,v)=>{let{fileId:y,teamId:I,highlight:T}=v;return(0,a.A)(h.downloads,[I,y])?{...h,downloads:{...h.downloads,[I]:{...h.downloads[I],[y]:{...h.downloads[I][y],highlight:T}}}}:h}).on(i.n9,h=>({...h,debug:{...h.debug,isPerformanceMonitorEnabled:!h.debug.isPerformanceMonitorEnabled}})).on(i.um,(h,v)=>v?{...h,activeTeamId:v}:h)},700984029:(j,p,e)=>{"use strict";e.d(p,{AS:()=>s,Fb:()=>n,J3:()=>f,NH:()=>T,Oh:()=>l,Yr:()=>I,ZY:()=>r,cH:()=>d,e$:()=>g,er:()=>y,in:()=>m,lW:()=>h,px:()=>_,tG:()=>v,u7:()=>i});var t=e(2140362605);const n=(0,t.Ay)("Add an array of devices to the device store");n.meta={name:"createAction",key:"createActionclobberDevices",description:"Add an array of devices to the device store"};const s=(0,t.Ay)("Set the sink device for media elements");s.meta={name:"createAction",key:"createActionsetSinkDevice",description:"Set the sink device for media elements"};const a=(0,t.Ay)("Notify middleware of a new preferred device");a.meta={name:"createAction",key:"createActionsetNewPreferredDevice",description:"Notify middleware of a new preferred device"};const c=(0,t.Ay)("");c.meta={name:"createAction",key:"createActionrequestPreviewStreamForDeviceId",description:""};const o=(0,t.Ay)("Stop preview streams");o.meta={name:"createAction",key:"createActionstopPreviewStreams",description:"Stop preview streams"};const i=(0,t.Ay)("");i.meta={name:"createAction",key:"createActionsetPreviewStreams",description:""};const l=(0,t.Ay)("Get screen thumbnails");l.meta={name:"createAction",key:"createActiongetScreenThumbnails",description:"Get screen thumbnails"};const _=(0,t.Ay)("The browser has blocked getUserMedia for cameras");_.meta={name:"createAction",key:"createActionsetCameraIsBlockedByBrowser",description:"The browser has blocked getUserMedia for cameras"};const d=(0,t.Ay)("The browser has blocked getUserMedia for microphones");d.meta={name:"createAction",key:"createActionsetMicrophoneIsBlockedByBrowser",description:"The browser has blocked getUserMedia for microphones"};const r=(0,t.Ay)("The browser has granted getUserMedia access for microphones");r.meta={name:"createAction",key:"createActionsetMicrophoneIsGrantedByBrowser",description:"The browser has granted getUserMedia access for microphones"};const m=(0,t.Ay)("The browser has granted getUserMedia access for cameras");m.meta={name:"createAction",key:"createActionsetCameraIsGrantedByBrowser",description:"The browser has granted getUserMedia access for cameras"};const h=(0,t.Ay)("The browser has blocked getUserMedia for screen recording");h.meta={name:"createAction",key:"createActionsetScreenRecordingIsBlockedByBrowser",description:"The browser has blocked getUserMedia for screen recording"};const v=(0,t.Ay)("The system has blocked getUserMedia access for microphones");v.meta={name:"createAction",key:"createActionsetMicrophoneIsBlockedBySystem",description:"The system has blocked getUserMedia access for microphones"};const y=(0,t.Ay)("The system has granted getUserMedia access for microphones");y.meta={name:"createAction",key:"createActionsetMicrophoneIsGrantedBySystem",description:"The system has granted getUserMedia access for microphones"};const I=(0,t.Ay)("The system has blocked getUserMedia access for cameras");I.meta={name:"createAction",key:"createActionsetCameraIsBlockedBySystem",description:"The system has blocked getUserMedia access for cameras"};const T=(0,t.Ay)("The system has granted getUserMedia access for cameras");T.meta={name:"createAction",key:"createActionsetCameraIsGrantedBySystem",description:"The system has granted getUserMedia access for cameras"};const f=(0,t.Ay)("The system has blocked screen recording");f.meta={name:"createAction",key:"createActionsetScreenshareRecordingIsBlockedBySystem",description:"The system has blocked screen recording"};const g=(0,t.Ay)("Check for system media access");g.meta={name:"createAction",key:"createActionmaybeCheckSystemMediaAccess",description:"Check for system media access"};const M=(0,t.Ay)("Notify middleware that automatic gain control setting has changed");M.meta={name:"createAction",key:"createActionsetAGC",description:"Notify middleware that automatic gain control setting has changed"};const A=(0,t.Ay)("Notify middleware that noise suppression setting has changed");A.meta={name:"createAction",key:"createActionsetNoiseSuppression",description:"Notify middleware that noise suppression setting has changed"}},9365970888:(j,p,e)=>{"use strict";e.d(p,{AZ:()=>r,Ae:()=>h,Hc:()=>O,IO:()=>C,JM:()=>S,SR:()=>D,aA:()=>b,f3:()=>m,ly:()=>d,oG:()=>o,ql:()=>l,yp:()=>T});var t=e(8289365785),n=e(1703559452),s=e(3385422400),a=e(8736071954),c=e(2384831516);const o=(0,c.Mz)(k=>k.device.devices);o.meta={name:"createSelector",key:"createSelectorgetDevices",description:k=>k.device.devices};const i=(0,c.Mz)(k=>k.device.sinkDevice);i.meta={name:"createSelector",key:"createSelectorgetSinkDevice",description:k=>k.device.sinkDevice};const l=(0,c.Mz)((k,W)=>(0,t.A)(k.device.devices[W]));l.meta={name:"createSelector",key:"createSelectorgetPreferredDevice",description:(k,W)=>(0,t.A)(k.device.devices[W])};const _=(0,c.Mz)(k=>k.device.isMicrophoneBlockedByBrowser);_.meta={name:"createSelector",key:"createSelectorisMicrophoneBlockedByBrowser",description:k=>k.device.isMicrophoneBlockedByBrowser};const d=(0,c.Mz)(k=>k.device.isCameraBlockedByBrowser);d.meta={name:"createSelector",key:"createSelectorisCameraBlockedByBrowser",description:k=>k.device.isCameraBlockedByBrowser};const r=(0,s.Mz)(o,_,(k,W)=>y(k)&&!W),m=(0,s.Mz)(o,d,(k,W)=>I(k)&&!W),h=(0,s.Mz)(o,d,(k,W)=>{var N,V;if(!(!I(k)||W))return k==null||(N=k.camera)===null||N===void 0||(V=N[0])===null||V===void 0?void 0:V.id}),v=(0,c.Mz)(k=>k.device.previewStreams);v.meta={name:"createSelector",key:"createSelectorgetPreviewStreams",description:k=>k.device.previewStreams};function y(k){return k.microphone.length>0}u(y,"isMicrophoneAvailableInDevices");function I(k){return k.camera.length>0}u(I,"isCameraAvailableInDevices");function T(k){var W;return k==null||(W=k.microphone)===null||W===void 0?void 0:W.some(N=>N.label!==void 0)}u(T,"isMicrophoneAvailableForCapturingInDevices");function f(k){return k.camera.some(W=>W.label!==void 0)}u(f,"isCameraAvailableForCapturingInDevices");function g(k){return k.output.some(W=>W.label!==void 0)}u(g,"isOutputAvailableForDisplay");const M=(0,c.Mz)(k=>k.device.isMicrophoneBlockedBySystem);M.meta={name:"createSelector",key:"createSelectorisMicrophoneBlockedBySystem",description:k=>k.device.isMicrophoneBlockedBySystem};const A=(0,c.Mz)(k=>k.device.isCameraBlockedBySystem);A.meta={name:"createSelector",key:"createSelectorisCameraBlockedBySystem",description:k=>k.device.isCameraBlockedBySystem};const O=(0,s.Mz)(_,M,(k,W)=>k||W),D=(0,s.Mz)(d,A,(k,W)=>k||W),E=u(k=>{if(!k)return!1;const W=["bluetooth","hands-free","airpods","wireless"];return(0,n.A)(W,N=>k==null?void 0:k.toLowerCase().includes(N))},"doesLabelHintBluetooth"),C=(0,c.Mz)(k=>{const W=k.device.devices,N=(0,t.A)(W[a.lW.Microphone]);return E(N==null?void 0:N.label)});C.meta={name:"createSelector",key:"createSelectorisSelectedMicrophoneBluetooth",description:k=>{const W=k.device.devices,N=(0,t.A)(W[a.lW.Microphone]);return E(N==null?void 0:N.label)}};const S=(0,c.Mz)(k=>{const W=k.device.devices,N=(0,t.A)(W[a.Q4]);return E(N==null?void 0:N.label)});S.meta={name:"createSelector",key:"createSelectorisSelectedSpeakerBluetooth",description:k=>{const W=k.device.devices,N=(0,t.A)(W[a.Q4]);return E(N==null?void 0:N.label)}};const b=(0,c.Mz)(k=>{const W=k.device.devices,N=(0,t.A)(W[a.lW.Microphone]),V=(0,t.A)(W[a.Q4]);return!!N&&!!V&&N.groupId===V.groupId});b.meta={name:"createSelector",key:"createSelectorisAudioOnSameDevice",description:k=>{const W=k.device.devices,N=(0,t.A)(W[a.lW.Microphone]),V=(0,t.A)(W[a.Q4]);return!!N&&!!V&&N.groupId===V.groupId}}},7600673124:(j,p,e)=>{"use strict";e.d(p,{y:()=>n});var t=e(5818203962);const n=u((s,a)=>(0,t.I$)(s,a),"getIsMemberDisconnectedById")},4318855015:(j,p,e)=>{"use strict";e.d(p,{$x:()=>c,H9:()=>n,at:()=>i,j_:()=>_,jy:()=>l,o2:()=>a,qw:()=>s,su:()=>o});var t=e(2140362605);const n=(0,t.Ay)("Mark emoji collections as fetch (or not fetched");n.meta={name:"createAction",key:"createActionsetEmojiCollectionsFetched",description:"Mark emoji collections as fetch (or not fetched"};const s=(0,t.Ay)("Set and replace emoji collections");s.meta={name:"createAction",key:"createActionsetEmojiCollections",description:"Set and replace emoji collections"};const a=(0,t.Ay)("Signals that an emoji collection has been installed");a.meta={name:"createAction",key:"createActioninstallEmojiCollection",description:"Signals that an emoji collection has been installed"};const c=(0,t.Ay)("Signals that an emoji collection has been uninstalled");c.meta={name:"createAction",key:"createActionuninstallEmojiCollection",description:"Signals that an emoji collection has been uninstalled"};const o=(0,t.Ay)("Signals that badges should be added post-install");o.meta={name:"createAction",key:"createActionbadgeEmojiCollection",description:"Signals that badges should be added post-install"};const i=(0,t.Ay)("Signals that the message input badge should be removed");i.meta={name:"createAction",key:"createActionremoveEmojiCollectionInputBadge",description:"Signals that the message input badge should be removed"};const l=(0,t.Ay)("Signals that the message tab badge should be removed from the emoji picker");l.meta={name:"createAction",key:"createActionremoveEmojiCollectionTabBadge",description:"Signals that the message tab badge should be removed from the emoji picker"};const _=(0,t.Ay)("Increments emoji click count");_.meta={name:"createAction",key:"createActionincrementEmojiClickCount",description:"Increments emoji click count"}},3004085654:(j,p,e)=>{"use strict";e.d(p,{Cs:()=>m,Ur:()=>I,_J:()=>T,_o:()=>v,fl:()=>f,nQ:()=>h,pG:()=>y,uI:()=>r});var t=e(2101927269),n=e(9113979368),s=e(2141441167),a=e(2048121586),c=e(6696292586),o=e(9829579108),i=e(3385422400),l=e(2047021170);const _=60*60*24*14,d=(0,o.Ay)((g,M)=>g&&g.emojiCollections&&g.emojiCollections.collections&&g.emojiCollections.collections[M]);d.meta={name:"createSelector",key:"createSelectorgetEmojiCollection",description:(g,M)=>g&&g.emojiCollections&&g.emojiCollections.collections&&g.emojiCollections.collections[M]};const r=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.collections);r.meta={name:"createSelector",key:"createSelectorgetEmojiCollections",description:g=>g&&g.emojiCollections&&g.emojiCollections.collections};const m=(0,i.Mz)(r,g=>(0,t.A)(g,M=>M.installed)),h=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.hasFetched);h.meta={name:"createSelector",key:"createSelectorhasFetchedEmojiCollections",description:g=>g&&g.emojiCollections&&g.emojiCollections.hasFetched};const v=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.inputBadge);v.meta={name:"createSelector",key:"createSelectorgetInputBadge",description:g=>g&&g.emojiCollections&&g.emojiCollections.inputBadge};const y=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.tabBadge);y.meta={name:"createSelector",key:"createSelectorgetTabBadge",description:g=>g&&g.emojiCollections&&g.emojiCollections.tabBadge};const I=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.emojiClickCount);I.meta={name:"createSelector",key:"createSelectorgetEmojiClickCount",description:g=>g&&g.emojiCollections&&g.emojiCollections.emojiClickCount};const T=(0,o.Ay)(g=>{const M=r(g);if((0,n.A)(M))return null;const A=(0,s.A)(M);return(0,a.A)(A,O=>O.date_create)});T.meta={name:"createSelector",key:"createSelectorgetMostRecentPack",description:g=>{const M=r(g);if((0,n.A)(M))return null;const A=(0,s.A)(M);return(0,a.A)(A,O=>O.date_create)}};const f=(0,o.Ay)(g=>{const M=(0,l.ty)(g,"emoji_packs_most_recent_available_time");if(!(0,c.A)(M))return!1;const A=M+_;return Date.now()/1e3<A});f.meta={name:"createSelector",key:"createSelectorisWithinExpirationDateOfNewPack",description:g=>{const M=(0,l.ty)(g,"emoji_packs_most_recent_available_time");if(!(0,c.A)(M))return!1;const A=M+_;return Date.now()/1e3<A}}},7564917982:(j,p,e)=>{"use strict";e.d(p,{H:()=>h});var t=e(7156798807),n=e(1031947056),s=e(1194535350),a=e(4724591729),c=e(3004085654),o=e(4318855015),i=e(2048121586),l=e(2047021170),_=e(5510392579),d=e(387484329);const r=(0,n.Ay)("handle updating prefs if new emoji pack has become available",(v,y,I)=>{let{collections:T}=I;const f=y(),g=(0,_.h3)(f),M=(0,l.ty)(f,"emoji_packs_most_recent_available_time")||0,A=(0,i.A)(T,C=>C.date_create),{date_create:O,installed:D}=A||{};(g||D)&&O>M&&v((0,d.Hj)({emoji_packs_most_recent_available_time:Date.now()/1e3,emoji_packs_clicked_picker_cta:!1,emoji_packs_clicked_picker_post_install_cta:!1,emoji_packs_clicked_collection_cta:!1}))});r.meta={name:"createThunk",key:"createThunkhandlePotentialNewPack",description:"handle updating prefs if new emoji pack has become available"};const m=r,h=(0,n.Ay)("Process and add emoji collections",(v,y,I)=>{let{reason:T}=I;const f=y();(0,c.nQ)(f)||(v((0,o.H9)({hasFetched:!0})),v((0,s.KO)({reason:T})).then(g=>{const M=g.installed||[],A=g.available||[],O=(0,t.A)(M,"id"),D=A.map(E=>({...E,installed:!!O[E.id],localEmoji:O[E.id]?O[E.id].emoji:E.emoji}));v(m({collections:D})),(0,a.Cu)()?v((0,o.qw)({collections:D.filter(E=>!["1044122771874","11"].includes(E.id))})):v((0,o.qw)({collections:D}))}).catch(()=>{v((0,o.H9)({hasFetched:!1}))}))});h.meta={name:"createThunk",key:"createThunkfetchAllEmojiCollections",description:"Process and add emoji collections"}},4060284745:(j,p,e)=>{"use strict";e.d(p,{D:()=>n,V:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Add ephemeral message reference to store");n.meta={name:"createAction",key:"createActionaddToEphemeralMessageMap",description:"Add ephemeral message reference to store"};const s=(0,t.Ay)("Remove ephemeral message reference");s.meta={name:"createAction",key:"createActionremoveFromEphemeralMessageMap",description:"Remove ephemeral message reference"}},5468652247:(j,p,e)=>{"use strict";e.d(p,{F:()=>t});const t={disconnectedFeedback:"disconnected_feedback",createdGoogleDriveDocument:"created_google_drive_document",enablePopups:"enable_popups",generalPostingRestricted:"general_posting_restricted",genericPostingRestricted:"generic_posting_restricted",fileTypeHasNoHandler:"file_type_has_no_handler",boxFilePickerError:"box_file_picker_error",gdriveShareFileError:"gdrive_share_file_error",onedriveSdkError:"onedrive_sdk_error",tempSlashCmdFeedback:"temp_slash_cmd_feedback",threadsTempSlashCmdFeedback:"threads_temp_slash_cmd_feedback",uncaughtThirdPartyCallError:"uncaught_third_party_call_error",findAnAdminPrompt:"find_an_admin_prompt",unhandledGdriveCreate:"unhandled_gdrive_create",fileCreatedViaBookmark:"file_created_via_bookmark",scheduleSendError:"schedule_send_error"}},1479277172:(j,p,e)=>{"use strict";e.d(p,{H:()=>_});var t=e(6313685253),n=e(3571452446),s=e(2208015175),a=e(9829579108),c=e(796111729),o=e(7606781622);const i="EPHEMERAL MESSAGES",l=(0,a.Ay)(d=>d.ephemeralMessages);l.meta={name:"createSelector",key:"createSelectorgetEphemeralMessagesState",description:d=>d.ephemeralMessages};const _=(0,a.Ay)((d,r)=>{const{ephemeralType:m,channelId:h,threadTs:v}=r,y=(0,c.Ay)({state:d});if(v&&!h)return y.error(i,"Can't remove ephemeral messages by thread without channel ID"),[];r.channel&&!h&&y.warn(i,"`channel` passed to `getEphemeralMessagesByType`. Did you mean `channelId`?");const T=l(d)[m];return(0,t.A)(h?(0,n.A)(T,[h]):T,(f,g,M)=>((0,s.A)(g,(A,O)=>{if(!A)return;const D=(0,o.Ld)(d,M,O);D&&(!v||D.thread_ts===v)&&f.push(D)}),f),[])});_.meta={name:"createSelector",key:"createSelectorgetEphemeralMessagesByType",description:(d,r)=>{const{ephemeralType:m,channelId:h,threadTs:v}=r,y=(0,c.Ay)({state:d});if(v&&!h)return y.error(i,"Can't remove ephemeral messages by thread without channel ID"),[];r.channel&&!h&&y.warn(i,"`channel` passed to `getEphemeralMessagesByType`. Did you mean `channelId`?");const T=l(d)[m];return(0,t.A)(h?(0,n.A)(T,[h]):T,(f,g,M)=>((0,s.A)(g,(A,O)=>{if(!A)return;const D=(0,o.Ld)(d,M,O);D&&(!v||D.thread_ts===v)&&f.push(D)}),f),[])}}},359615813:(j,p,e)=>{"use strict";e.d(p,{F:()=>i});var t=e(1031947056),n=e(9608395637),s=e(1049138627),a=e(4060284745),c=e(4241074559);const o=(0,t.Ay)("Add an ephemeral message to messages-store and ephemeral message map",(l,_,d)=>{let{ephemeralType:r,message:m}=d;const h=_(),v=(0,c.$)(h,m);v.ts||(v.ts=(0,n.A)()),r&&(v._ephemeral_type=r),l((0,s.A)([v])),r&&l((0,a.D)({ephemeralType:r,channelId:v.channel,ts:v.ts}))});o.meta={name:"createThunk",key:"createThunkaddEphemeralMessage",description:"Add an ephemeral message to messages-store and ephemeral message map"};const i=(0,t.Ay)("Add an ephemeral message from a bot (defaults to Slackbot)",(l,_,d)=>{let{ephemeralType:r,message:m}=d,h;m.username?h={...m,subtype:"bot_message"}:h={...m,user:"USLACKBOT"},l(o({ephemeralType:r,message:h}))});i.meta={name:"createThunk",key:"createThunkaddEphemeralBotMessage",description:"Add an ephemeral message from a bot (defaults to Slackbot)"}},7610481478:(j,p,e)=>{"use strict";e.d(p,{w:()=>i});var t=e(8786006583),n=e(1031947056),s=e(10127715),a=e(4241074559),c=e(359615813),o=e(1479277172);const i=(0,n.Ay)("Add or update the last ephemeral message of a certain type",(l,_,d)=>{let{ephemeralType:r,message:m,ignoreExistingMessage:h=!1}=d;const v=_(),y=m.channel,I=m.thread_ts;if(r){const T=r&&(0,t.A)((0,o.H)(v,{ephemeralType:r,channelId:y,threadTs:I}));if(T&&T.ts&&!h){l((0,s.Kc)([{...(0,a.$)(v,m),ts:T.ts,channel:y,thread_ts:I}]));return}}l((0,c.F)({ephemeralType:r,message:m}))});i.meta={name:"createThunk",key:"createThunkaddOrFlashEphemeralBotMsg",description:"Add or update the last ephemeral message of a certain type"}},5221490142:(j,p,e)=>{"use strict";e.d(p,{P:()=>c});var t=e(1031947056),n=e(9121476043),s=e(1479277172),a=e(4060284745);const c=(0,t.Ay)("Remove ephemeral messages by type, channel, and/or thread",(o,i,l)=>{const _=i();(0,s.H)(_,l).forEach(r=>{o((0,n.A)({channelId:r.channel,ts:r.ts||""})),o((0,a.V)({ephemeralType:l.ephemeralType,channelId:r.channel,ts:r.ts}))})});c.meta={name:"createThunk",key:"createThunkremoveEphemeralMsgsByType",description:"Remove ephemeral messages by type, channel, and/or thread"}},4241074559:(j,p,e)=>{"use strict";e.d(p,{$:()=>n});var t=e(6333950786);const n=u((s,a)=>{const c={...a,type:"message",is_ephemeral:!0,text:(0,t.A)(s,a.text,{isInternalMessage:!0})};return c.username?c.subtype="bot_message":c.user="USLACKBOT",c},"buildBotMessage")},1835683237:(j,p,e)=>{"use strict";e.d(p,{N:()=>n,Y:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Overwrites our store of the teams in a given externally shared channel");n.meta={name:"createAction",key:"createActionupdateExtSharedChannelTeams",description:"Overwrites our store of the teams in a given externally shared channel"};const s=(0,t.Ay)("Updates whether or not disconnect is in progress for the given team");s.meta={name:"createAction",key:"createActionupdateIsDisconnectInProgressForTeam",description:"Updates whether or not disconnect is in progress for the given team"}},642120761:(j,p,e)=>{"use strict";e.d(p,{D1:()=>l,ap:()=>_,ez:()=>i});var t=e(6422693406),n=e(3398586081),s=e(8352634987),a=e(6533394955),c=e(7212217314);const o=(0,n.A)(()=>new s.Ay({storeKey:"extSharedChannelTeams",fetch:(d,r)=>{const m=r.slice(0,5);return t.S.map(m,h=>(0,a.dispatchForTeamId)(d,(0,c.N)({channelId:h})))},isEnabled:()=>!0,metricsName:"team-connections"})),i=u((d,r)=>{!d||!r||o().maybeRefetch(d,r)},"maybeRefetch"),l=u((d,r)=>o().markObjectsAsStale(d,r),"markObjectsAsStale"),_=u((d,r)=>o().isObjectFresh(d,r),"isObjectFresh")},6303366080:(j,p,e)=>{"use strict";e.d(p,{NQ:()=>h,dE:()=>v,df:()=>m,kz:()=>y,s3:()=>d,xT:()=>r});var t=e(9829579108),n=e(3385422400),s=e(8847766420),a=e(642120761),c=e(5373179915),o=e(5751973043),i=e(2105507084);function l(I,T){var f;if(!(0,c.x)(I,T))return(0,a.ez)((0,s.ZT)(I),T),I==null||(f=I.extSharedChannelTeams)===null||f===void 0?void 0:f[T]}u(l,"getBaseState");const _=(0,n.Mz)((I,T)=>(0,i.X)(I,T),I=>I.length?I.map(T=>({teamId:T})):o.Ml),d=(0,t.Ay)((I,T)=>{var f;return(0,c.x)(I,T)?_(I,T):((f=l(I,T))===null||f===void 0?void 0:f.connections)||o.Ml});d.meta={name:"createSelector",key:"createSelectorgetTeamConnectionsForChannelId",description:(I,T)=>{var f;return(0,c.x)(I,T)?_(I,T):((f=l(I,T))===null||f===void 0?void 0:f.connections)||o.Ml}};const r=(0,t.Ay)((I,T)=>{var f;return(0,c.x)(I,T)?o.Ml:((f=l(I,T))===null||f===void 0?void 0:f.pendingConnections)||o.Ml});r.meta={name:"createSelector",key:"createSelectorgetPendingTeamConnectionsForChannelId",description:(I,T)=>{var f;return(0,c.x)(I,T)?o.Ml:((f=l(I,T))===null||f===void 0?void 0:f.pendingConnections)||o.Ml}};const m=(0,t.Ay)((I,T)=>{var f;return(0,c.x)(I,T)?o.Ml:((f=l(I,T))===null||f===void 0?void 0:f.previousConnections)||o.Ml});m.meta={name:"createSelector",key:"createSelectorgetPreviousTeamConnectionsForChannelId",description:(I,T)=>{var f;return(0,c.x)(I,T)?o.Ml:((f=l(I,T))===null||f===void 0?void 0:f.previousConnections)||o.Ml}};const h=(0,t.Ay)((I,T)=>{var f;if(!(0,c.x)(I,T))return(f=l(I,T))===null||f===void 0?void 0:f.conversationHostId});h.meta={name:"createSelector",key:"createSelectorgetConversationHostTeamIdForChannelId",description:(I,T)=>{var f;if(!(0,c.x)(I,T))return(f=l(I,T))===null||f===void 0?void 0:f.conversationHostId}};const v=(0,t.Ay)((I,T)=>{var f;return!T||(0,c.x)(I,T)?!1:!!(!((f=l(I,T))===null||f===void 0)&&f.isChannelSponsored)});v.meta={name:"createSelector",key:"createSelectorgetChannelIsSponsored",description:(I,T)=>{var f;return!T||(0,c.x)(I,T)?!1:!!(!((f=l(I,T))===null||f===void 0)&&f.isChannelSponsored)}};const y=(0,t.Ay)((I,T)=>{var f,g,M;if((0,c.x)(I,T))return!!(0,i.X)(I,T).length;const A=l(I,T),O=(A==null||(f=A.connections)===null||f===void 0?void 0:f.length)||0,D=(A==null||(g=A.pendingConnections)===null||g===void 0?void 0:g.length)||0,E=(A==null||(M=A.previousConnections)===null||M===void 0?void 0:M.length)||0;return O>1||D>0||E>0});y.meta={name:"createSelector",key:"createSelectordoesChannelHaveExternalTeamConnections",description:(I,T)=>{var f,g,M;if((0,c.x)(I,T))return!!(0,i.X)(I,T).length;const A=l(I,T),O=(A==null||(f=A.connections)===null||f===void 0?void 0:f.length)||0,D=(A==null||(g=A.pendingConnections)===null||g===void 0?void 0:g.length)||0,E=(A==null||(M=A.previousConnections)===null||M===void 0?void 0:M.length)||0;return O>1||D>0||E>0}}},7212217314:(j,p,e)=>{"use strict";e.d(p,{N:()=>i});var t=e(1031947056),n=e(6422693406),s=e(1835683237),a=e(8040098042),c=e(796111729),o=e(8864306005);const i=(0,t.Ay)("Fetch teams connected to a shared channel and upsert into frontend store.",(l,_,d)=>{let{channelId:r,reason:m="fetchAndUpsertSharedChannelTeamConnections"}=d;return(0,a.A)(r)?l((0,o.I)({reason:m,channel:r})).then(h=>{const{channel:v,connections:y=[],pending_connections:I=[],previous_connections:T=[]}=h;return l((0,s.N)({id:v.id,conversationHostId:v.conversation_host_id,isChannelSponsored:v.is_sponsored,connections:y,pendingConnections:I,previousConnections:T})),h}).catch(h=>{throw h}):((0,c.Ay)({getState:_}).warn(`fetchAndUpsertSharedChannelTeamConnections called with incorrect channelId type: ${r}`),n.S.resolve())});i.meta={name:"createThunk",key:"createThunkfetchAndUpsertSharedChannelTeamConnections",description:"Fetch teams connected to a shared channel and upsert into frontend store."}},1890276164:(j,p,e)=>{"use strict";e.d(p,{R:()=>n,t:()=>a});var t=e(9829579108);const n=(0,t.Ay)((o,i)=>{var l;return!!(!((l=o.externalTeamIds)===null||l===void 0)&&l[i])});n.meta={name:"createSelector",key:"createSelectorisTeamExternalById",description:(o,i)=>{var l;return!!(!((l=o.externalTeamIds)===null||l===void 0)&&l[i])}};var s;const a=(0,t.Ay)(o=>!!Object.keys((s=o.externalTeamIds)!==null&&s!==void 0?s:{}).length);var c;a.meta={name:"createSelector",key:"createSelectorhasAnyExternalTeam",description:o=>!!Object.keys((c=o.externalTeamIds)!==null&&c!==void 0?c:{}).length}},5549390246:(j,p,e)=>{"use strict";e.d(p,{Y:()=>v});var t=e(9113979368),n=e(9829579108),s=e(2188787324),a=e(8276911661),c=e(8677230210),o=e(8170643398),i=e(9464746668),l=e(3244118357),_=e(1002129445),d=e(4910963364),r=e(8847766420),m=e(735940183);const h=new m.Ay("files"),v=(0,n.Ay)((y,I)=>{if(!I||!(0,s.Vx)(I))return null;let T=h.t("External App");const f=(I==null?void 0:I.bot_user_id)||(I==null?void 0:I.user);if(f){var g;const M=(g=(0,a.nv)(y,f))!==null&&g!==void 0?g:void 0;if((0,o.po)(M)){const A=(0,i.A)(y,M),O=(0,c.AF)(y,A)||void 0,D=(0,l.Hg)(O);if(T=D||T,(0,t.A)(D)&&A){const E=(0,d.G2)(y,{serviceId:A,homeWorkspaceId:(0,l.AW)({bot:O,member:M,currentTeamId:(0,r.ZT)(y)})});T=(0,_.fj)(E)||T}}}return T});v.meta={name:"createSelector",key:"createSelectorgetAppNameForRemoteFile",description:(y,I)=>{if(!I||!(0,s.Vx)(I))return null;let T=h.t("External App");const f=(I==null?void 0:I.bot_user_id)||(I==null?void 0:I.user);if(f){var g;const M=(g=(0,a.nv)(y,f))!==null&&g!==void 0?g:void 0;if((0,o.po)(M)){const A=(0,i.A)(y,M),O=(0,c.AF)(y,A)||void 0,D=(0,l.Hg)(O);if(T=D||T,(0,t.A)(D)&&A){const E=(0,d.G2)(y,{serviceId:A,homeWorkspaceId:(0,l.AW)({bot:O,member:M,currentTeamId:(0,r.ZT)(y)})});T=(0,_.fj)(E)||T}}}return T}}},6415612447:(j,p,e)=>{"use strict";e.d(p,{Y:()=>l,r:()=>i});var t=e(9829579108),n=e(9101533895),s=e(3634593162),a=e(497761763),c=e(2960290117),o=e(6078549397);const i=u(_=>{if((0,c.Ay)(_)){const{fileIdOrQuipThreadId:m=null}=(0,o.EX)(_)||{};if(m&&(0,a.A)(m)){const h=m,v=(0,s.p)(h);return{fileId:h,channelId:v}}}if((0,a.A)(_)){const m=_,h=(0,s.p)(m);return{fileId:m,channelId:h}}const d=_;return{fileId:(0,s.l)(d),channelId:d}},"getIds"),l=(0,t.Ay)(function(_,d){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const{channelId:m}=i(d);return(0,n.OL)(_,m,r)});l.meta={name:"createSelector",key:"createSelectorgetFileChannelById",description:function(_,d){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const{channelId:m}=i(d);return(0,n.OL)(_,m,r)}}},6403218297:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(8086952004),n=e(3571452446),s=e(6217320234),a=e(6626377467),c=e(7231740695);function o(i,l){if(!i||!l)return l;const _=l.comments||[],d=(0,t.A)(_,T=>T.id===i.id),r=(0,n.A)(d,["is_starred","_rxn_key"]),m={...d,...i,...r},h=(0,s.A)((0,a.A)([m,..._],"id"),"timestamp"),v=l.initial_comment&&i.id===l.initial_comment.id,y=v?m:l.initial_comment;d||(0,c.bG)(l,i),v&&(0,c.Sx)(l);const I={...l,comments:h};return y&&(I.initial_comment=y),I}u(o,"addCommentToFile")},56562029:(j,p,e)=>{"use strict";e.d(p,{G:()=>a});var t=e(1185969935),n=e(848813706);const s={enabled:!1,container:void 0},a=(0,t.Ay)({},s,{storeKey:"fullscreen",persistenceEnabled:!1}).on(n.K$,c=>({...c,enabled:!0})).on(n.sM,c=>({...c,enabled:!1,container:void 0})).on(n.Hm,(c,o)=>c.container===o?c:{...c,container:o})},2332058678:(j,p,e)=>{"use strict";e.d(p,{r:()=>t,u:()=>n});const t={openCount:0,unreadCount:0},n={issues:{},stats:t,locale:"",zdLocale:"",helpSearchArticles:[],productReleaseCards:[],recommendedArticles:{articles:[],requestId:""},helpSections:[],helpCategories:[],helpNavigation:{categoryId:null},helpTour:null,anchorId:null,isArticleLoaded:!1,isHelpTipHistoryTourActive:!1}},761034736:(j,p,e)=>{"use strict";e.d(p,{fE:()=>me,ZL:()=>he,Fb:()=>x,wB:()=>ge,Cb:()=>_e,sv:()=>G,wg:()=>oe,tL:()=>ue,aN:()=>ce,Mu:()=>ae,Kb:()=>Y,cN:()=>re,ZO:()=>ne,Eq:()=>ee,PN:()=>J});var t=e(9829579108),n=e(8847766420),s=e(3398586081),a=e(2141441167),c=e(8352634987),o=e(6533394955),i=e(4848430086),l=e(1031947056),_=e(930270247),d=e(7629299684),r=e(2927826522);const m=(0,l.Ay)("Fetch product release cards into the store",(F,L,K)=>{let{locale:B}=K;return F((0,_.l)({count:3,type:"product_release_card",locale:B,reason:"client/fetch_published_product_release_cards"})).then(Q=>{let{cards:q}=Q;F((0,d.M0)((0,r.t)(q)))})});m.meta={name:"createThunk",key:"createThunkfetchProductReleaseCards",description:"Fetch product release cards into the store"};var h=e(9532047472);const v=(0,l.Ay)("Fetch helpdesk articles into the store",(F,L,K)=>{let{locale:B,reason:Q}=K;return F((0,h.a)({locale:B,reason:Q})).then(q=>{let{articles:le}=q;F((0,d.NX)((0,r.t)(le))),F((0,d.a4)(B))})});v.meta={name:"createThunk",key:"createThunkfetchHelpArticles",description:"Fetch helpdesk articles into the store"};var y=e(9706240641),I=e(3593297427),T=e(138202077),f=e(6422693406);const g=(0,l.Ay)("Fetch recommended articles into the store",(F,L,K)=>{let{locale:B,reason:Q}=K;return F((0,T.H)({reason:Q})).then(function(){var q=(0,y.coroutine)(function*(le){let{articles:Te,request_id:Ie}=le;const De=yield f.S.all(Te.map(function(){var pe=(0,y.coroutine)(function*(fe){return F((0,I.w)({articleId:fe.id,locale:B,reason:Q})).then(Z=>{let{article:se}=Z;return{id:se.article_id,title:se.title}})});return function(fe){return pe.apply(this,arguments)}}()));F((0,d.LV)({articles:De,requestId:Ie??""}))});return function(le){return q.apply(this,arguments)}}())});g.meta={name:"createThunk",key:"createThunkfetchRecommendedArticles",description:"Fetch recommended articles into the store"};var M=e(8745755260);const A=(0,l.Ay)("Fetch help sections into the store",(F,L,K)=>{let{categoryId:B,locale:Q,reason:q}=K;return F((0,M.h)({categoryId:B,locale:Q,reason:q})).then(le=>{let{sections:Te}=le;return F((0,d.CK)((0,r.t)(Te)))})});A.meta={name:"createThunk",key:"createThunkfetchHelpSections",description:"Fetch help sections into the store"};var O=e(6936450040);const D=(0,l.Ay)("Fetch help categories into the store",(F,L,K)=>{let{locale:B,reason:Q}=K;return F((0,O.G)({locale:B,reason:Q})).then(q=>{let{categories:le}=q;F((0,d.KO)((0,r.t)(le))),F((0,d.WL)(B))})});D.meta={name:"createThunk",key:"createThunkfetchHelpCategories",description:"Fetch help categories into the store"};const E=(0,s.A)(()=>new c.Ay({storeKey:"help",fetch:F=>(0,o.dispatchForTeamId)(F,(0,i.w)()),isEnabled:()=>!0})),C=(0,s.A)(F=>new c.Ay({storeKey:"help",fetch:L=>(0,o.dispatchForTeamId)(L,m({locale:F})),isEnabled:()=>!0})),S=(0,s.A)((F,L)=>new c.Ay({storeKey:"help",fetch:K=>(0,o.dispatchForTeamId)(K,v({locale:F,reason:L})),isEnabled:()=>!0})),b=(0,s.A)((F,L)=>new c.Ay({storeKey:"help",fetch:K=>(0,o.dispatchForTeamId)(K,g({locale:F,reason:L})),isEnabled:()=>!0,maxAge:()=>86400})),k=(0,s.A)((F,L,K)=>new c.Ay({storeKey:"help",fetch:B=>(0,o.dispatchForTeamId)(B,A({categoryId:F,locale:L,reason:K})),isEnabled:()=>!0}),(F,L)=>(0,a.A)([F,L]).join("_")),W=(0,s.A)((F,L)=>new c.Ay({storeKey:"help",fetch:K=>(0,o.dispatchForTeamId)(K,D({locale:F,reason:L})),isEnabled:()=>!0}));var N=e(2332058678),V=e(735940183),R=e(9907843289);const P=new V.Ay("help"),z="",$=(0,t.Ay)(F=>F&&F.help||N.u);$.meta={name:"createSelector",key:"createSelectorgetHelpState",description:F=>F&&F.help||N.u};const x=(0,t.Ay)((F,L)=>{const K=(0,n.ZT)(F),B=(0,R.db)();return $(F).zdLocale!==B&&S(B,L).markObjectsAsStale(K,[B]),S(B,L).maybeRefetch(K,B),$(F).helpSearchArticles||[]});x.meta={name:"createSelector",key:"createSelectorgetHelpArticles",description:(F,L)=>{const K=(0,n.ZT)(F),B=(0,R.db)();return $(F).zdLocale!==B&&S(B,L).markObjectsAsStale(K,[B]),S(B,L).maybeRefetch(K,B),$(F).helpSearchArticles||[]}};const Y=(0,t.Ay)(F=>{const L=(0,n.ZT)(F),K=(0,V.Yp)();return $(F).locale!==K&&C(K).markObjectsAsStale(L,[K]),C(K).maybeRefetch(L,K),$(F).productReleaseCards||[]});Y.meta={name:"createSelector",key:"createSelectorgetProductReleaseCards",description:F=>{const L=(0,n.ZT)(F),K=(0,V.Yp)();return $(F).locale!==K&&C(K).markObjectsAsStale(L,[K]),C(K).maybeRefetch(L,K),$(F).productReleaseCards||[]}};const ne=(0,t.Ay)((F,L)=>{var K;const B=(0,n.ZT)(F),Q=(0,V.Yp)();return $(F).locale!==Q&&b(Q,L).markObjectsAsStale(B,[Q]),b(Q,L).maybeRefetch(B,Q),((K=$(F).recommendedArticles)===null||K===void 0?void 0:K.articles)||[]});ne.meta={name:"createSelector",key:"createSelectorgetRecommendedArticles",description:(F,L)=>{var K;const B=(0,n.ZT)(F),Q=(0,V.Yp)();return $(F).locale!==Q&&b(Q,L).markObjectsAsStale(B,[Q]),b(Q,L).maybeRefetch(B,Q),((K=$(F).recommendedArticles)===null||K===void 0?void 0:K.articles)||[]}};const re=(0,t.Ay)(F=>{var L;return((L=$(F).recommendedArticles)===null||L===void 0?void 0:L.requestId)||""});re.meta={name:"createSelector",key:"createSelectorgetRecommendArticlesRequestId",description:F=>{var L;return((L=$(F).recommendedArticles)===null||L===void 0?void 0:L.requestId)||""}};const _e=(0,t.Ay)(F=>$(F).helpNavigation||N.u.helpNavigation);_e.meta={name:"createSelector",key:"createSelectorgetHelpNavigation",description:F=>$(F).helpNavigation||N.u.helpNavigation};const G=(0,t.Ay)((F,L,K)=>{var B,Q;const q=(0,n.ZT)(F),le=(0,V.Yp)(),Te=$(F).locale,Ie=K??((B=$(F).helpNavigation)===null||B===void 0?void 0:B.categoryId),De=(Q=$(F).helpSections[0])===null||Q===void 0?void 0:Q.categoryId;return Ie?(De&&Ie!==De?(k(Ie,le,L).markObjectsAsStale(q,[Ie.toString()]),k(Ie,le,L).maybeRefetch(q,Ie.toString())):Te!==le&&k(Ie,le,L).markObjectsAsStale(q,[le]),k(Ie,le,L).maybeRefetch(q,le),$(F).helpSections||[]):$(F).helpSections||[]});G.meta={name:"createSelector",key:"createSelectorgetHelpSections",description:(F,L,K)=>{var B,Q;const q=(0,n.ZT)(F),le=(0,V.Yp)(),Te=$(F).locale,Ie=K??((B=$(F).helpNavigation)===null||B===void 0?void 0:B.categoryId),De=(Q=$(F).helpSections[0])===null||Q===void 0?void 0:Q.categoryId;return Ie?(De&&Ie!==De?(k(Ie,le,L).markObjectsAsStale(q,[Ie.toString()]),k(Ie,le,L).maybeRefetch(q,Ie.toString())):Te!==le&&k(Ie,le,L).markObjectsAsStale(q,[le]),k(Ie,le,L).maybeRefetch(q,le),$(F).helpSections||[]):$(F).helpSections||[]}};const ge=(0,t.Ay)((F,L)=>{const K=(0,n.ZT)(F),B=(0,V.Yp)();return $(F).locale!==B&&W(B,L).markObjectsAsStale(K,[B]),W(B,L).maybeRefetch(K,B),$(F).helpCategories||[]});ge.meta={name:"createSelector",key:"createSelectorgetHelpCategories",description:(F,L)=>{const K=(0,n.ZT)(F),B=(0,V.Yp)();return $(F).locale!==B&&W(B,L).markObjectsAsStale(K,[B]),W(B,L).maybeRefetch(K,B),$(F).helpCategories||[]}};const oe=(0,t.Ay)(F=>$(F).helpTour||N.u.helpTour);oe.meta={name:"createSelector",key:"createSelectorgetHelpTour",description:F=>$(F).helpTour||N.u.helpTour};const me=(0,t.Ay)(F=>$(F).anchorId||N.u.anchorId);me.meta={name:"createSelector",key:"createSelectorgetAnchorId",description:F=>$(F).anchorId||N.u.anchorId};const ue=(0,t.Ay)(F=>$(F).isArticleLoaded||N.u.isArticleLoaded);ue.meta={name:"createSelector",key:"createSelectorgetIsHelpArticleLoaded",description:F=>$(F).isArticleLoaded||N.u.isArticleLoaded};const ae=(0,t.Ay)(F=>{var L,K;if(!((L=F.desktop)===null||L===void 0||(K=L.app)===null||K===void 0)&&K.updateInfo){var B;const{releaseName:Q}=F.desktop.app.updateInfo;if(!((B=F.desktop)===null||B===void 0)&&B.environment){const{appVersion:q}=F.desktop.environment;if(Q.endsWith(q))return null}return Q}return null});ae.meta={name:"createSelector",key:"createSelectorgetPendingAppUpdateReleaseName",description:F=>{var L,K;if(!((L=F.desktop)===null||L===void 0||(K=L.app)===null||K===void 0)&&K.updateInfo){var B;const{releaseName:Q}=F.desktop.app.updateInfo;if(!((B=F.desktop)===null||B===void 0)&&B.environment){const{appVersion:q}=F.desktop.environment;if(Q.endsWith(q))return null}return Q}return null}};const he=(0,t.Ay)(F=>{if(F.desktop&&F.desktop.app&&F.desktop.app.updateInfo){const{releaseName:L,releaseNotes:K,releaseDate:B}=F.desktop.app.updateInfo;return{timestamp:B?B.getTime():Date.now(),title:L,description:P.t("A new version of the app is available.",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),url:K,url_title:P.t("See release notes",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),is_app_update:!0}}return null});he.meta={name:"createSelector",key:"createSelectorgetAppUpdate",description:F=>{if(F.desktop&&F.desktop.app&&F.desktop.app.updateInfo){const{releaseName:L,releaseNotes:K,releaseDate:B}=F.desktop.app.updateInfo;return{timestamp:B?B.getTime():Date.now(),title:L,description:P.t("A new version of the app is available.",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),url:K,url_title:P.t("See release notes",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),is_app_update:!0}}return null}};const ce=(0,t.Ay)(F=>{const L=he(F)||null;return L?L.timestamp:-1});ce.meta={name:"createSelector",key:"createSelectorgetLatestAppUpdateTimeStamp",description:F=>{const L=he(F)||null;return L?L.timestamp:-1}};const ee=(0,t.Ay)(F=>{const L=(0,n.ZT)(F);return E().maybeRefetch(L,z),$(F).stats||N.r});ee.meta={name:"createSelector",key:"createSelectorgetTicketStats",description:F=>{const L=(0,n.ZT)(F);return E().maybeRefetch(L,z),$(F).stats||N.r}};const J=(0,t.Ay)(F=>ee(F).unreadCount);J.meta={name:"createSelector",key:"createSelectorgetUnreadTickets",description:F=>ee(F).unreadCount};const X=(0,t.Ay)(F=>$(F).isHelpTipHistoryTourActive||N.u.isHelpTipHistoryTourActive);X.meta={name:"createSelector",key:"createSelectorgetIsHelpTipHistoryTourActive",description:F=>$(F).isHelpTipHistoryTourActive||N.u.isHelpTipHistoryTourActive}},4848430086:(j,p,e)=>{"use strict";e.d(p,{w:()=>a});var t=e(1031947056),n=e(8726791251),s=e(7629299684);const a=(0,t.Ay)("Fetch and upsert ticket stats into the store",c=>c((0,n.I)({reason:"fetchAndUpsertTicketStats"})).then(o=>{const i={unreadCount:o.unread_count||0,openCount:o.open_count||0};return c((0,s.SX)(i)),i}));a.meta={name:"createThunk",key:"createThunkfetchAndUpsertTicketStats",description:"Fetch and upsert ticket stats into the store"}},6121742712:(j,p,e)=>{"use strict";e.d(p,{NJ:()=>ge,uQ:()=>R,q1:()=>z,Yl:()=>he,pM:()=>_e,N6:()=>re,zZ:()=>G,bn:()=>W,Rz:()=>oe,nd:()=>N,ad:()=>V,i8:()=>P,qC:()=>Y,Iy:()=>me,VT:()=>ne,jo:()=>x});var t=e(2101927269),n=e(2141441167),s=e(4423055085),a=e(9829579108),c=e(4813703725),o=e(3385422400),i=e(8847766420),l=e(2569545045),_=e(1521013946),d=e(5333401344),r=e(9706240641),m=e(6422693406),h=e(3398586081),v=e(3037015781),y=e(6533394955),I=e(4947933789),T=e(5209876365),f=e(5380461521);const g=(0,h.A)(()=>new v.Ay({fetch:M,metricsName:"hermesTriggers",upsertKnown:A,upsertNonExistent:A}));function M(ce){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return m.S.map(ee,function(){var J=(0,r.coroutine)(function*(X){try{return(yield(0,y.dispatchForTeamId)(ce,(0,I.B)({triggerId:X,includeWorkflowDetails:!0,reason:"hermes_triggers_ufm"}))).trigger}catch(F){return{id:X,error:F.name}}});return function(X){return J.apply(this,arguments)}}())}u(M,"fetchTriggersForTeamId");function A(ce,ee){const J=ee.map(X=>X.id);(0,f.X)().markObjectsAsFresh(ce,J),(0,y.dispatchForTeamId)(ce,(0,T.z4)({triggers:ee}))}u(A,"upsertTriggersForTeamId");var O=e(5751973043),D=e(8481467080),E=e(9552526132),C=e(3799600789),S=e(3906734293);const b=(0,a.Ay)(ce=>{var ee;return ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.triggersById});b.meta={name:"createSelector",key:"createSelectorgetTriggersById",description:ce=>{var ee;return ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.triggersById}};const k=(0,a.Ay)(ce=>{var ee;return ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.recentlyRunTriggerIds});k.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggerIds",description:ce=>{var ee;return ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.recentlyRunTriggerIds}};const W=(0,a.Ay)((ce,ee,J)=>{let{triggerId:X}=ee;var F,L;const K=ce==null||(F=ce.hermesTriggers)===null||F===void 0||(L=F.triggersById)===null||L===void 0?void 0:L[X],B=(0,i.ZT)(ce);return B?K?((0,f.X)().maybeRefetch(B,X),K):J?g().fetchObjectWithId(B,X):(0,d.WQ)(X):(0,d.WQ)(X)});W.meta={name:"createSelector",key:"createSelectorgetTriggerById",description:(ce,ee,J)=>{let{triggerId:X}=ee;var F,L;const K=ce==null||(F=ce.hermesTriggers)===null||F===void 0||(L=F.triggersById)===null||L===void 0?void 0:L[X],B=(0,i.ZT)(ce);return B?K?((0,f.X)().maybeRefetch(B,X),K):J?g().fetchObjectWithId(B,X):(0,d.WQ)(X):(0,d.WQ)(X)}};const N=(0,c.eI)((ce,ee)=>{let{triggerIds:J}=ee;const X=(0,i.ZT)(ce);return X?J.length?J.map(F=>{var L,K;const B=ce==null||(L=ce.hermesTriggers)===null||L===void 0||(K=L.triggersById)===null||K===void 0?void 0:K[F];return B?((0,f.X)().maybeRefetch(X,F),B):g().fetchObjectWithId(X,F)}):O.Ml:J.map(F=>(0,d.WQ)(F))}),V=(0,a.Ay)(ce=>{var ee;return(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.workflowPickerSearchResults)||O.Ml});V.meta={name:"createSelector",key:"createSelectorgetWorkflowPickerSearchResults",description:ce=>{var ee;return(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.workflowPickerSearchResults)||O.Ml}};const R=(0,a.Ay)(ce=>{var ee;return(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.channelPrimaryActionSearchResults)||O.Ml});R.meta={name:"createSelector",key:"createSelectorgetChannelPrimaryActionSearchResults",description:ce=>{var ee;return(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.channelPrimaryActionSearchResults)||O.Ml}};const P=(0,a.Ay)((ce,ee)=>{const J=b(ce)||{},X=new RegExp(ee,"i"),F=Object.keys(J).map(K=>J[K]||{});return(0,t.A)(F,K=>K&&((K==null?void 0:K.name)||"").match(X))||[]});P.meta={name:"createSelector",key:"createSelectorgetWorkflowPickerSearchResultsCached",description:(ce,ee)=>{const J=b(ce)||{},X=new RegExp(ee,"i"),F=Object.keys(J).map(K=>J[K]||{});return(0,t.A)(F,K=>K&&((K==null?void 0:K.name)||"").match(X))||[]}};const z=(0,a.Ay)((ce,ee)=>{const J=b(ce)||{},X=new RegExp(ee,"i"),F=Object.keys(J).map(K=>J[K]||{});return(0,t.A)(F,K=>K&&K.type===E.M.Shortcut&&((K==null?void 0:K.name)||"").match(X))||[]});z.meta={name:"createSelector",key:"createSelectorgetChannelPrimaryActionSearchResultsCached",description:(ce,ee)=>{const J=b(ce)||{},X=new RegExp(ee,"i"),F=Object.keys(J).map(K=>J[K]||{});return(0,t.A)(F,K=>K&&K.type===E.M.Shortcut&&((K==null?void 0:K.name)||"").match(X))||[]}};const $=(0,a.Ay)(ce=>{var ee;return(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.openTourId)||null});$.meta={name:"createSelector",key:"createSelectorgetGuidedTourCoachmark",description:ce=>{var ee;return(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.openTourId)||null}};const x=(0,a.Ay)(ce=>{var ee;const J=(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.openTourId)||"";return J==="platform-coachmark-tour"||J==="announce-only-platform-coachmark-tour"});x.meta={name:"createSelector",key:"createSelectorisWorkflowCoachmarkOpen",description:ce=>{var ee;const J=(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.openTourId)||"";return J==="platform-coachmark-tour"||J==="announce-only-platform-coachmark-tour"}};const Y=(0,a.Ay)(ce=>{var ee;return((ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.openTourId)||"")==="announce-only-platform-coachmark-tour"});Y.meta={name:"createSelector",key:"createSelectorisAnnounceOnlyWorkflowCoachmarkOpen",description:ce=>{var ee;return((ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.openTourId)||"")==="announce-only-platform-coachmark-tour"}};const ne=(0,a.Ay)(ce=>{var ee;return((ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.openTourId)||"")==="slash-commands-coachmark-tour"});ne.meta={name:"createSelector",key:"createSelectorisSlashCommandsCoachmarkOpen",description:ce=>{var ee;return((ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.openTourId)||"")==="slash-commands-coachmark-tour"}};const re=(0,a.Ay)(ce=>{var ee;return(ee=k(ce))===null||ee===void 0?void 0:ee.map(J=>W(ce,{triggerId:J}))});re.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggers",description:ce=>{var ee;return(ee=k(ce))===null||ee===void 0?void 0:ee.map(J=>W(ce,{triggerId:J}))}};const _e=(0,a.Ay)(ce=>{var ee;return(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.recentlyRunTriggerTimestamps)||{}});_e.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggerTimestamps",description:ce=>{var ee;return(ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.recentlyRunTriggerTimestamps)||{}}};const G=(0,a.Ay)(ce=>{var ee;return ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.recentlyRunTriggerWorkflowActivity});G.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggersWorkflowActivity",description:ce=>{var ee;return ce==null||(ee=ce.hermesTriggers)===null||ee===void 0?void 0:ee.recentlyRunTriggerWorkflowActivity}};const ge=(0,o.Mz)(ce=>b(ce),ce=>{if(!ce)return O.Ml;const ee=(0,n.A)(ce);return(0,t.A)(ee,X=>!(!(0,S.G)(X)||X.workflow_details&&!X.workflow_details.is_published))}),oe=(0,a.Ay)((ce,ee)=>{let{appId:J}=ee;const X=b(ce)||{};return Object.values(X).find(L=>{var K;return(L==null||(K=L.workflow)===null||K===void 0?void 0:K.app_id)===J})});oe.meta={name:"createSelector",key:"createSelectorgetTriggerFromSlackAppId",description:(ce,ee)=>{let{appId:J}=ee;const X=b(ce)||{};return Object.values(X).find(L=>{var K;return(L==null||(K=L.workflow)===null||K===void 0?void 0:K.app_id)===J})}};const me=(0,a.Ay)((ce,ee)=>{const J=(0,_.$N)(ce,ee);return J?(J==null?void 0:J.type)===_.im.SHORTCUT_LINK_TRIGGER:!1});me.meta={name:"createSelector",key:"createSelectorisHermesLinkTriggerFormat",description:(ce,ee)=>{const J=(0,_.$N)(ce,ee);return J?(J==null?void 0:J.type)===_.im.SHORTCUT_LINK_TRIGGER:!1}};const ue=(0,a.Ay)((ce,ee)=>{let{triggerId:J}=ee;const X=W(ce,{triggerId:J},!1);return X==null?void 0:X.shortcut_url});ue.meta={name:"createSelector",key:"createSelectorgetShortcutUrl",description:(ce,ee)=>{let{triggerId:J}=ee;const X=W(ce,{triggerId:J},!1);return X==null?void 0:X.shortcut_url}};const ae=(0,a.Ay)((ce,ee)=>{let{triggerId:J}=ee;var X;return!!(!(ce==null||(X=ce.hermesTriggers)===null||X===void 0)&&X.triggersMarkedStaleInSession[J])});ae.meta={name:"createSelector",key:"createSelectorhasTriggerBeenMarkedStaleInSession",description:(ce,ee)=>{let{triggerId:J}=ee;var X;return!!(!(ce==null||(X=ce.hermesTriggers)===null||X===void 0)&&X.triggersMarkedStaleInSession[J])}};const he=(0,a.Ay)((ce,ee)=>{let{block:J}=ee;var X;const F=J.functionTriggerId,L=(0,D.U)(J);if(!ae(ce,{triggerId:F}))return L;const B=W(ce,{triggerId:F},!0),Q=B==null||(X=B.workflow)===null||X===void 0?void 0:X.workflow_id,q=Q?(0,l.g)(ce,Q):void 0;return(0,d.mX)(B)||!q||(0,d.mX)(q)?L:(0,C.V)({passedShortcutInfo:L,trigger:B,workflow:q})});he.meta={name:"createSelector",key:"createSelectorgetFreshShortcutInfoForShareShortcutBlock",description:(ce,ee)=>{let{block:J}=ee;var X;const F=J.functionTriggerId,L=(0,D.U)(J);if(!ae(ce,{triggerId:F}))return L;const B=W(ce,{triggerId:F},!0),Q=B==null||(X=B.workflow)===null||X===void 0?void 0:X.workflow_id,q=Q?(0,l.g)(ce,Q):void 0;return(0,d.mX)(B)||!q||(0,d.mX)(q)?L:(0,C.V)({passedShortcutInfo:L,trigger:B,workflow:q})}},(0,s.ul)("hermesTriggers",function(ce,ee){let{triggerId:J}=ee,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return W(ce,{triggerId:J},X)})},7478895768:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>T,tP:()=>I});var t=e(9706240641),n=e.n(t),s=e(8840779375),a=e(9268023148),c=e(6494470131),o=e(1031947056),i=e(5380461521),l=e(8847766420),_=e(5209876365),d=e(796111729),r=e(1948374838),m=e(6121742712);const h=(0,o.Ay)("Fetch triggers with query",function(){var g=(0,t.coroutine)(function*(M,A,O){let{query:D,currentChannelId:E,useLegacyCacheing:C=!1,includeAutomatedTriggers:S=!1,strictExposureRules:b=!0}=O;const k=A(),W=(0,l.ZT)(k),N=(0,r.X)(k),V=S?["shortcut","event","webhook","scheduled","service"]:["shortcut"];if(N.containsPrefixOf(D)){if(C){const R=S?(0,m.i8)(k,D):(0,m.q1)(k,D);return M(S?(0,_.we)({results:R}):(0,_.S8)({results:R})),R}}else try{const P=(yield M((0,c.v)({query:D,currentChannelId:E,strictExposureRules:b,triggerTypes:V,reason:"hermes_triggers_store:fetch_and_upsert_triggers"}))).triggers,z=5;return P.length<z&&(N.addAsPrefix(D),N.clearRequestInFlight()),W&&(0,i.X)().markObjectsAsFresh(W,(0,s.A)(P,"id")),M((0,_.z4)({triggers:P})),C&&M(S?(0,_.we)({results:P}):(0,_.S8)({results:P})),P}catch(R){return(0,d.Wo)().error(R,"There was an issue fetching triggers with query"),[]}return[]});return function(M,A,O){return g.apply(this,arguments)}}());h.meta={name:"createThunk",key:"createThunkfetchAndUpsertTriggersWithQuery",description:"Fetch triggers with query"};const v=500,y=(0,a.A)((g,M)=>{let{query:A,includeAutomatedTriggers:O,strictExposureRules:D}=M;return g(h({query:A,includeAutomatedTriggers:O,strictExposureRules:D}))},v,{leading:!0,trailing:!0}),I=(0,o.Ay)("debounced fetch and upsert triggers with query",(g,M,A)=>{let{query:O,includeAutomatedTriggers:D,strictExposureRules:E}=A;return y(g,{query:O,includeAutomatedTriggers:D,strictExposureRules:E})});I.meta={name:"createThunk",key:"createThunkdebouncedFetchAndUpsertTriggersWithQuery",description:"debounced fetch and upsert triggers with query"};const T=h,f={DEBOUNCE_MS:v}},2569545045:(j,p,e)=>{"use strict";e.d(p,{g:()=>T,R:()=>f});var t=e(9829579108),n=e(5333401344),s=e(8847766420),a=e(8032027544),c=e(9706240641),o=e(3398586081),i=e(8840779375),l=e(6422693406),_=e(3037015781),d=e(6533394955),r=e(3118461857),m=e(4134951078);const h=(0,o.A)(()=>new _.Ay({fetch:v,upsertKnown:y,upsertNonExistent:y,isEnabled:()=>!0}));function v(g,M){return l.S.map(M,function(){var A=(0,c.coroutine)(function*(O){try{return(yield(0,d.dispatchForTeamId)(g,(0,r.D)({workflowId:O,reason:"hermes_workflows_store_unknown_fetching"}))).workflow}catch{var D;const C=(D=(0,d.getStateByTeamId)(g).hermesWorkflows)===null||D===void 0?void 0:D[O];return(0,_.GU)(C)?null:C}});return function(O){return A.apply(this,arguments)}}()).filter(A=>A)}u(v,"fetchWorkflowsForTeamId");function y(g,M){(0,a.G)().markObjectsAsFresh(g,(0,i.A)(M,"id")),(0,d.dispatchForTeamId)(g,(0,m.uY)({workflows:M}))}u(y,"upsertWorkflowsForTeamId");const I={fetchWorkflowsForTeamId:v,upsertWorkflowsForTeamId:y},T=(0,t.Ay)(function(g,M){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;var O;const D=(0,s.ZT)(g),E=(O=g.hermesWorkflows)===null||O===void 0?void 0:O[M];return D?E?((0,a.G)().maybeRefetch(D,M),E):A?h().fetchObjectWithId(D,M):(0,n.WQ)(M):(0,n.WQ)(M)});T.meta={name:"createSelector",key:"createSelectorgetWorkflowById",description:function(g,M){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;var O;const D=(0,s.ZT)(g),E=(O=g.hermesWorkflows)===null||O===void 0?void 0:O[M];return D?E?((0,a.G)().maybeRefetch(D,M),E):A?h().fetchObjectWithId(D,M):(0,n.WQ)(M):(0,n.WQ)(M)}};const f=(0,t.Ay)((g,M)=>{const A=T(g,M);return(0,n.GU)(A)?[]:A.steps});f.meta={name:"createSelector",key:"createSelectorgetWorkflowStepsById",description:(g,M)=>{const A=T(g,M);return(0,n.GU)(A)?[]:A.steps}}},8239363237:(j,p,e)=>{"use strict";e.d(p,{GF:()=>_,Tk:()=>d,UI:()=>I,X_:()=>r,iN:()=>y,pm:()=>h,t6:()=>T,vc:()=>m,xA:()=>v});var t=e(3385422400),n=e(2188787324),s=e(937317117),a=e(1990810649),c=e(387328355);const o=u((f,g)=>{var M;return g?(M=(0,s.Lp)(f,g))===null||M===void 0?void 0:M.localUpdated:null},"getFileLocalUpdated"),i=u(f=>(0,c.lt)(f),"getFileId"),l=u(f=>(0,t.Mz)([g=>(0,c.JC)(g),g=>{const M=i(g);return o(g,M)},g=>{const M=i(g);return M?(0,s.Lp)(g,M):null}],(g,M,A)=>A!=null&&A.id&&(g===a.cM.CanvasFile||g===a.cM.QuipFile)?f(A):null),"selectFromUpdatedFile"),_=l(f=>f),d=l(f=>f==null?void 0:f.id),r=l(f=>f?(0,n.sJ)(f):!1),m=l(f=>f?(0,n.uO)(f):!1),h=l(f=>f?(0,n.WP)(f):null),v=l(f=>f==null?void 0:f.user),y=l(f=>!!f),I=l(f=>f?(0,n.l7)(f):!1),T=l(f=>f?(0,n.wL)(f):!1)},5145584581:(j,p,e)=>{"use strict";e.d(p,{x:()=>f});var t=e(8628145494),n=e(1031947056),s=e(6533394955),a=e(4250409994),c=e(5286203919),o=e(387328355),i=e(1990810649),l=e(7434063642),_=e(6251210828),d=e(7723800688),r=e(8737667238),m=e(6470070112),h=e(6244014364),v=e(56548687),y=e(5737576046),I=e(7884000776);const T=u((M,A,O,D)=>{const E=(0,s.getStateForClientStore)(),C=(0,c.E9)(E),S=(0,m.$t)(A,{huddleId:C}),b=(0,m.kn)(E),k=(0,m.UE)(E),W=(0,_.Ec)(A,{huddleId:C});let N,V,R=null,P=null,z=null;if(O===i.cM.None)N=d.Hi.FOCUS_CLOSE,V=(0,_.U7)(A,{key:d.Hi.FOCUS_OPEN});else{var $;switch(N=d.Hi.FOCUS_OPEN,V=(0,r.A)(),z=(D==null||($=D.item)===null||$===void 0?void 0:$.id)||null,O){case i.cM.Screenshare:R="focus_screenshare",P="screenshare";break;default:R="focus_file",P="file"}M((0,l.Mn)({key:d.Hi.FOCUS_OPEN,value:V}))}(0,v.e)({state:A}).track(h.EventId.CANVAS_EVENT,{contexts:{ui_context:{ui_page:W?W.toString():null,ui_properties:{element_name:N},action:h.UiAction.IMPRESSION},calls:k},...S,...b,interaction_id:V,canvas_dimension_marker:R,type:P,item_file_id:z})},"clogCanvasEvent"),f=(0,n.Ay)("Sets a user content view which represents what the user is focused on in the canvas",(M,A,O)=>{if(!O||(0,t.A)(O.contentViewType))return;const D=A(),E=O.contentViewType,C=!1;if(E===i.cM.Screenshare){const b=(0,o.JC)(D),k=g(D);b===i.cM.None&&!k&&M((0,l.fI)({isThreadOpen:!1})),M((0,l.Zx)({userId:""}))}M((0,l.YC)({isFullscreen:C})),M((0,l.s7)({isNotesOpen:E===i.cM.QuipFile}));const S=O.contentViewType===i.cM.None||!O.contentViewConfig?{}:O.contentViewConfig;M((0,o.sK)({id:O.peerId,contentViewType:E,contentViewConfig:S})),(0,s.dispatchForClientStore)((0,a.xq)({contentViewType:E,contentViewConfig:S})),T(M,D,E,S)});f.meta={name:"createThunk",key:"createThunksetContentView",description:"Sets a user content view which represents what the user is focused on in the canvas"};function g(M){const A=(0,s.getStateForClientStore)(),O=(0,c.E9)(A),D=(0,c.hc)(A),E=(0,_.fG)(M,{huddleId:O});if(!(E!=null&&E.ts)||!D)return!1;const C=(0,y.zC)({viewContext:I.Y.HUDDLE_THREADS,channelId:D,threadTs:E.ts});return(C==null?void 0:C.hasFocus())||!1}u(g,"doesThreadInputHaveFocus")},6758774099:(j,p,e)=>{"use strict";e.d(p,{Lm:()=>a,T3:()=>s,U$:()=>c,WO:()=>n,dD:()=>i,h2:()=>o,jL:()=>l});var t=e(2140362605);const n=(0,t.Ay)("Enable huddle event log");n.meta={name:"createAction",key:"createActionenableEventLog",description:"Enable huddle event log"};const s=(0,t.Ay)("Disable huddle event log");s.meta={name:"createAction",key:"createActiondisableEventLog",description:"Disable huddle event log"};const a=(0,t.Ay)("Set loading state for huddle event log");a.meta={name:"createAction",key:"createActionsetEventLogLoading",description:"Set loading state for huddle event log"};const c=(0,t.Ay)("Add non-transcription event");c.meta={name:"createAction",key:"createActionpushNonTranscriptionEvent",description:"Add non-transcription event"};const o=(0,t.Ay)("Update with latest transcription events");o.meta={name:"createAction",key:"createActionupdateTranscriptions",description:"Update with latest transcription events"};const i=(0,t.Ay)("Set enabled state for huddle captions side-by-side view");i.meta={name:"createAction",key:"createActionsetSideBySideEnabled",description:"Set enabled state for huddle captions side-by-side view"};const l=(0,t.Ay)("Set enabled state for huddle closed captions view");l.meta={name:"createAction",key:"createActionsetClosedCaptionsEnabled",description:"Set enabled state for huddle closed captions view"}},8409540889:(j,p,e)=>{"use strict";e.d(p,{u:()=>n,y:()=>t});const t=2e3,n=2e3},4988306802:(j,p,e)=>{"use strict";e.d(p,{Cb:()=>r,M3:()=>l,TP:()=>o,VN:()=>_,gL:()=>i,iv:()=>m});var t=e(3385422400),n=e(9829579108),s=e(8409540889),a=e(8783285437);const c=(0,n.Ay)(h=>h.huddleEvents);c.meta={name:"createSelector",key:"createSelectorgetHuddleEventsData",description:h=>h.huddleEvents};const o=(0,n.Ay)(h=>c(h).enabled);o.meta={name:"createSelector",key:"createSelectorareHuddleEventsEnabled",description:h=>c(h).enabled};const i=(0,n.Ay)(h=>c(h).isLoading);i.meta={name:"createSelector",key:"createSelectorareHuddleEventsLoading",description:h=>c(h).isLoading};const l=(0,n.Ay)(h=>h.huddleEvents.isSideBySideEnabled);l.meta={name:"createSelector",key:"createSelectorisHuddleSideBySideCaptionsEnabled",description:h=>h.huddleEvents.isSideBySideEnabled};const _=(0,n.Ay)(h=>h.huddleEvents.isClosedCaptionsEnabled);_.meta={name:"createSelector",key:"createSelectorisHuddleClosedCaptionsEnabled",description:h=>h.huddleEvents.isClosedCaptionsEnabled};const d=(0,n.Ay)(h=>h.huddleEvents.isClosedCaptionsEnabled);d.meta={name:"createSelector",key:"createSelectorHuddlesPersistTranscriptToggle",description:h=>h.huddleEvents.isClosedCaptionsEnabled};const r=(0,t.Mz)(h=>c(h).events,h=>{const v=[];let y,I=[];const T=u(()=>{y&&v.push({...y,content:I.join(" ")})},"maybeCommit");return h.forEach(f=>{y&&f.type===a.v.TRANSCRIBE&&y.memberId===f.memberId&&f.timestampMs-y.endTimeMs<s.y?(I.push(f.content),y.endTimeMs=f.endTimeMs):(T(),f.type===a.v.TRANSCRIBE?(y={type:a.v.TRANSCRIBE,resultId:"",memberId:f.memberId,content:"",timestampMs:f.timestampMs,endTimeMs:f.endTimeMs},I=[f.content]):(y=null,I=[],v.push(f)))}),T(),v}),m=(0,t.Mz)(h=>r(h),h=>h.filter(v=>v.type===a.v.TRANSCRIBE||v.type===a.v.START_TRANSCRIPTION).slice(-5))},1889537412:(j,p,e)=>{"use strict";e.d(p,{A:()=>g});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(727128009),c=e(6422693406),o=e(9640070512),i=e(2527782504),l=e(6758774099),_=e(4988306802),d=e(7004355564),r=e(6533394955),m=e(796111729),h=e(5286203919),v=e(8783285437),y=e(6694086724),I=e(8872167513),T=e(2709531527);const f=(0,s.Ay)("Start transcription for current huddle",function(){var M=(0,t.coroutine)(function*(A,O){if((0,_.TP)(O())||(0,_.gL)(O()))return c.S.resolve();const D=(0,r.getStateForClientStore)(),E=(0,h.E9)(D);return E?(A((0,l.WO)()),A((0,l.Lm)(!0)),yield(0,d.A)(),A((0,y.e)({clearOnEndedCallback:!0,logContext:"huddles-captions-turned-on",isStoppedByUser:!0})),A((0,a.i)({reason:"start-event-log",callId:E})).catch(C=>{var S;if(((S=C.data)===null||S===void 0?void 0:S.error)==="permission_denied")return c.S.delay(5e3).then(()=>A((0,a.i)({reason:"start-event-log/retry",callId:E})));throw C}).catch(C=>{(0,m.Ay)({getState:O}).error(C),A((0,l.T3)())}).finally(()=>{A((0,l.Lm)(!1)),A((0,o.H)({focusKey:i.Ay.HUDDLE_CAPTIONS_TAB})),A((0,l.U$)({type:v.v.START_TRANSCRIPTION,memberId:"USLACKBOT",timestampMs:Date.now()}));const{huddleEventsTrace:C}=(0,I.A)().getAllTraceHandlers();C==null||C.update({name:T.p.TRANSCRIPT,type:T.G.START})})):c.S.reject(new Error("No active call ID for huddle"))});return function(A,O){return M.apply(this,arguments)}}());f.meta={name:"createThunk",key:"createThunkstartEventLog",description:"Start transcription for current huddle"};const g=f},6855917924:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(1031947056),n=e(580220061),s=e(6422693406),a=e(6758774099),c=e(4988306802),o=e(6533394955),i=e(5286203919),l=e(8872167513),_=e(2709531527);const d=(0,t.Ay)("Stop transcription for current huddle",(m,h)=>{if(!(0,c.TP)(h())||(0,c.gL)(h()))return s.S.resolve();const v=(0,o.getStateForClientStore)(),y=(0,i.E9)(v);return y?(m((0,a.T3)()),m((0,a.Lm)(!0)),m((0,n.W)({reason:"stop-event-log",callId:y})).finally(()=>{m((0,a.Lm)(!1));const{huddleEventsTrace:I}=(0,l.A)().getAllTraceHandlers();I==null||I.update({name:_.p.TRANSCRIPT,type:_.G.STOP})})):s.S.reject(new Error("No active call ID for huddle"))});d.meta={name:"createThunk",key:"createThunkstopEventLog",description:"Stop transcription for current huddle"};const r=d},8783285437:(j,p,e)=>{"use strict";e.d(p,{v:()=>t});var t;(function(n){n.JOIN="JOIN",n.LEAVE="LEAVE",n.SCREENSHARE_START="SCREENSHARE_START",n.SCREENSHARE_STOP="SCREENSHARE_STOP",n.TRANSCRIBE="TRANSCRIBE",n.SEND_REACTION="SEND_REACTION",n.START_TRANSCRIPTION="START_TRANSCRIPTION"})(t||(t={}))},4250409994:(j,p,e)=>{"use strict";e.d(p,{Ag:()=>Y,B5:()=>q,Bk:()=>k,Db:()=>L,Dj:()=>pe,Gx:()=>ue,HC:()=>E,HF:()=>D,Hg:()=>Te,I9:()=>_,JM:()=>ce,Jc:()=>y,Ko:()=>W,Lx:()=>X,M4:()=>r,OA:()=>F,QZ:()=>A,Rb:()=>b,Rh:()=>v,Rr:()=>O,Sd:()=>c,Sn:()=>g,TK:()=>Ie,VU:()=>s,WB:()=>V,WM:()=>$,WY:()=>J,YA:()=>M,Yi:()=>N,_H:()=>oe,_I:()=>o,_U:()=>re,_u:()=>ee,aO:()=>z,bV:()=>_e,bk:()=>he,cx:()=>ae,f2:()=>P,fP:()=>f,hB:()=>I,kg:()=>le,kn:()=>a,nI:()=>Q,nU:()=>d,nw:()=>K,o9:()=>B,og:()=>Qe,ol:()=>C,pl:()=>l,qW:()=>i,qr:()=>G,so:()=>m,t2:()=>De,u8:()=>T,xf:()=>h,xq:()=>ne,yR:()=>S,yi:()=>me});var t=e(2140362605),n=e(1031947056);const s=(0,t.Ay)("Set flag to indicate if Huddles is enabled.");s.meta={name:"createAction",key:"createActionsetIsHuddlesEnabled",description:"Set flag to indicate if Huddles is enabled."};const a=(0,t.Ay)("Stores audio reference that will be passed to SDK");a.meta={name:"createAction",key:"createActionstoreHuddlesAudioRef",description:"Stores audio reference that will be passed to SDK"};const c=(0,t.Ay)("Start video shariing");c.meta={name:"createAction",key:"createActionstartVideoSharing",description:"Start video shariing"};const o=(0,t.Ay)("Stop video shariing");o.meta={name:"createAction",key:"createActionstopVideoSharing",description:"Stop video shariing"};const i=(0,t.Ay)("Connect to Huddle media server");i.meta={name:"createAction",key:"createActionconnectToHuddlesMediaServer",description:"Connect to Huddle media server"};const l=(0,t.Ay)("Leave the huddle and stop media transmission");l.meta={name:"createAction",key:"createActiondisconnectHuddlesFromMediaServer",description:"Leave the huddle and stop media transmission"};const _=(0,t.Ay)("Enable or disable local microphone");_.meta={name:"createAction",key:"createActionenableSelfMicrophone",description:"Enable or disable local microphone"};const d=(0,t.Ay)("Send an emoji reaction");d.meta={name:"createAction",key:"createActionsendReactionMessage",description:"Send an emoji reaction"};const r=(0,t.Ay)("Send a sticky emoji reaction");r.meta={name:"createAction",key:"createActionsendStickyReactionMessage",description:"Send a sticky emoji reaction"};const m=(0,t.Ay)("Send a mute request");m.meta={name:"createAction",key:"createActionsendMuteRequestMessage",description:"Send a mute request"};const h=(0,t.Ay)("Insert new active huddle reference with teamId channelId, etc.");h.meta={name:"createAction",key:"createActionaddActiveHuddleReference",description:"Insert new active huddle reference with teamId channelId, etc."};const v=(0,t.Ay)("Upsert existing active huddle reference");v.meta={name:"createAction",key:"createActionupdateActiveHuddleReference",description:"Upsert existing active huddle reference"};const y=(0,t.Ay)("Upsert existing active huddle channel");y.meta={name:"createAction",key:"createActionupdateActiveHuddleChannel",description:"Upsert existing active huddle channel"};const I=(0,t.Ay)("Set active huddle invite");I.meta={name:"createAction",key:"createActionupsertInvite",description:"Set active huddle invite"};const T=(0,t.Ay)("Clear invite for given channel ID");T.meta={name:"createAction",key:"createActionclearInviteForChannelId",description:"Clear invite for given channel ID"};const f=(0,t.Ay)("Mark invite notifications as viewed by clearing them.");f.meta={name:"createAction",key:"createActionmarkInvitesSeenForTeam",description:"Mark invite notifications as viewed by clearing them."};const g=(0,n.Ay)("Mark invite notifications as viewed by clearing them after a delay",(lt,qe,ct)=>{let{delay:tt,teamId:it}=ct;setTimeout(()=>{lt(f({teamId:it,markBeforeMs:Date.now()-tt}))},tt)});g.meta={name:"createThunk",key:"createThunkmarkInvitesReadOnDelay",description:"Mark invite notifications as viewed by clearing them after a delay"};const M=(0,t.Ay)("Start screen share for current user with given mediaSourceId");M.meta={name:"createAction",key:"createActionstartScreenShare",description:"Start screen share for current user with given mediaSourceId"};const A=(0,t.Ay)("Stop screen share for current user");A.meta={name:"createAction",key:"createActionstopScreenShare",description:"Stop screen share for current user"};const O=(0,t.Ay)("Notify peers of changes to isDrawEnabled");O.meta={name:"createAction",key:"createActionpropagateDrawEnabled",description:"Notify peers of changes to isDrawEnabled"};const D=(0,t.Ay)("Enabled annotations for screen share host");D.meta={name:"createAction",key:"createActionpropagateHostDrawEnabled",description:"Enabled annotations for screen share host"};const E=(0,t.Ay)("Notify middleware that a new preferred device was selected");E.meta={name:"createAction",key:"createActionsetNewPreferredDevice",description:"Notify middleware that a new preferred device was selected"};const C=(0,t.Ay)("Notify middleware that automatic gain control setting has changed");C.meta={name:"createAction",key:"createActionsetAGC",description:"Notify middleware that automatic gain control setting has changed"};const S=(0,t.Ay)("Notify middleware that noise suppression setting has changed");S.meta={name:"createAction",key:"createActionsetNoiseSuppression",description:"Notify middleware that noise suppression setting has changed"};const b=(0,t.Ay)("Notify middleware that video background setting has changed");b.meta={name:"createAction",key:"createActionsetVideoBackgroundEffect",description:"Notify middleware that video background setting has changed"};const k=(0,t.Ay)("Toggle global keyboard shortcut support for muting / unmuting a huddle");k.meta={name:"createAction",key:"createActiontoggleGlobalMuteShortcut",description:"Toggle global keyboard shortcut support for muting / unmuting a huddle"};const W=(0,t.Ay)("Internal store update for mini-panel visibility");W.meta={name:"createAction",key:"createActioninternalUpdateMiniPanelVisibility",description:"Internal store update for mini-panel visibility"};const N=(0,t.Ay)("Upsert join credentials for a channel");N.meta={name:"createAction",key:"createActionupsertJoinCredentialsForChannel",description:"Upsert join credentials for a channel"};const V=(0,t.Ay)("Clear the join credentials for a specific channel");V.meta={name:"createAction",key:"createActionclearJoinCredentialsForChannel",description:"Clear the join credentials for a specific channel"};const R=(0,t.Ay)("Store and/or remote push Chime meeting events");R.meta={name:"createAction",key:"createActionhandleMeetingEvents",description:"Store and/or remote push Chime meeting events"};const P=(0,t.Ay)("Transition from the prejoin state to started");P.meta={name:"createAction",key:"createActiontransitionFromPrejoinToStarted",description:"Transition from the prejoin state to started"};const z=(0,t.Ay)("Action to update the store to either show or hide discovery banner");z.meta={name:"createAction",key:"createActionupdateDiscoveryBannerVisibility",description:"Action to update the store to either show or hide discovery banner"};const $=(0,t.Ay)("Toggle Video");$.meta={name:"createAction",key:"createActiontoggleVideo",description:"Toggle Video"};const x=(0,t.Ay)("Reporting CPU and memory usage stats");x.meta={name:"createAction",key:"createActionreportAppMetrics",description:"Reporting CPU and memory usage stats"};const Y=(0,t.Ay)("Set true to specify that lounge music is playing, false otherwise.");Y.meta={name:"createAction",key:"createActionsetIsLoungeMusicPlaying",description:"Set true to specify that lounge music is playing, false otherwise."};const ne=(0,t.Ay)("Set current focused view type");ne.meta={name:"createAction",key:"createActionsetContentView",description:"Set current focused view type"};const re=(0,t.Ay)("Set last huddle start time");re.meta={name:"createAction",key:"createActionsetLastHuddleStartTs",description:"Set last huddle start time"};const _e=(0,t.Ay)("Set last huddle end time");_e.meta={name:"createAction",key:"createActionsetLastHuddleEndTs",description:"Set last huddle end time"};const G=(0,t.Ay)("Set last huddle duration time");G.meta={name:"createAction",key:"createActionsetLastHuddleDurationTs",description:"Set last huddle duration time"};const ge=(0,t.Ay)("Toggle video background filter");ge.meta={name:"createAction",key:"createActiontoggleVideoBackgroundFilter",description:"Toggle video background filter"};const oe=(0,t.Ay)("Starts the video preview on the video element using the specified device");oe.meta={name:"createAction",key:"createActionstartVideoPreview",description:"Starts the video preview on the video element using the specified device"};const me=(0,t.Ay)("Stops the video preview on the video element");me.meta={name:"createAction",key:"createActionstopVideoPreview",description:"Stops the video preview on the video element"};const ue=(0,t.Ay)("Identifies which screenshare is being viewed in the mini-player");ue.meta={name:"createAction",key:"createActionsetScreenshareActivePanel",description:"Identifies which screenshare is being viewed in the mini-player"};const ae=(0,t.Ay)("Resets the store");ae.meta={name:"createAction",key:"createActionresetClientHuddleStore",description:"Resets the store"};const he=(0,t.Ay)("Start the canvas jukebox using content share");he.meta={name:"createAction",key:"createActionstartContentShareJukebox",description:"Start the canvas jukebox using content share"};const ce=(0,t.Ay)("Stop the canvas jukebox");ce.meta={name:"createAction",key:"createActionstopJukebox",description:"Stop the canvas jukebox"};const ee=(0,t.Ay)("Set selected song");ee.meta={name:"createAction",key:"createActionsetSongPlaying",description:"Set selected song"};const J=(0,t.Ay)("Send jukebox active song");J.meta={name:"createAction",key:"createActionsendJukeboxActiveSong",description:"Send jukebox active song"};const X=(0,t.Ay)("Request a jukebox song");X.meta={name:"createAction",key:"createActionrequestJukeboxSong",description:"Request a jukebox song"};const F=(0,t.Ay)("Request the jukebox stops");F.meta={name:"createAction",key:"createActionrequestJukeboxStop",description:"Request the jukebox stops"};const L=(0,t.Ay)("Send recording start notification");L.meta={name:"createAction",key:"createActionsendRecordingStartNotification",description:"Send recording start notification"};const K=(0,t.Ay)("Sets whether the active invite card in the sidebar can be rendered");K.meta={name:"createAction",key:"createActionsetCanRenderActiveInviteCardInSidebar",description:"Sets whether the active invite card in the sidebar can be rendered"};const B=(0,t.Ay)("Sets whether the huddle window of an active huddle is in focus or not.");B.meta={name:"createAction",key:"createActionsetIsHuddleWindowFocused",description:"Sets whether the huddle window of an active huddle is in focus or not."};const Q=(0,t.Ay)("Sets whether the huddle window of an active huddle is open or not.");Q.meta={name:"createAction",key:"createActiontoggleAllIncomingVideo",description:"Sets whether the huddle window of an active huddle is open or not."};const q=(0,t.Ay)("Reports to the SDK when the client is offline");q.meta={name:"createAction",key:"createActionreportClientOffline",description:"Reports to the SDK when the client is offline"};const le=(0,t.Ay)("Sets whether audio only mode is active or not.");le.meta={name:"createAction",key:"createActionsetIsAudioOnlyMode",description:"Sets whether audio only mode is active or not."};const Te=(0,t.Ay)("Sets whether the camera was enabled when audio only mode was activated.");Te.meta={name:"createAction",key:"createActionsetAudioOnlyModeCameraWasEnabled",description:"Sets whether the camera was enabled when audio only mode was activated."};const Ie=(0,t.Ay)("Sets whether the huddle window of an active huddle is open or not.");Ie.meta={name:"createAction",key:"createActionsetIsHuddleWindowOpen",description:"Sets whether the huddle window of an active huddle is open or not."};const De=(0,t.Ay)("True if huddle mini player is hidden, false if shown.");De.meta={name:"createAction",key:"createActionsetIsHuddleMiniPlayerHidden",description:"True if huddle mini player is hidden, false if shown."};const pe=(0,t.Ay)("Asks for video permission and enumerates devices");pe.meta={name:"createAction",key:"createActioninitVideoPermission",description:"Asks for video permission and enumerates devices"};const fe=(0,t.Ay)("Execute readiness check for audio input");fe.meta={name:"createAction",key:"createActionexecuteHuddlesAudioInputReadinessCheck",description:"Execute readiness check for audio input"};const Z=(0,t.Ay)("Execute readiness check for audio output");Z.meta={name:"createAction",key:"createActionexecuteHuddlesAudioOutputReadinessCheck",description:"Execute readiness check for audio output"};const se=(0,t.Ay)("Execute readiness check for video input");se.meta={name:"createAction",key:"createActionexecuteHuddlesVideoInputReadinessCheck",description:"Execute readiness check for video input"};const Ae=(0,t.Ay)("Execute readiness check for a particular camera resolution");Ae.meta={name:"createAction",key:"createActionexecuteHuddlesCameraResolutionReadinessCheck",description:"Execute readiness check for a particular camera resolution"};const Ce=(0,t.Ay)("Execute readiness check for audio connectivity");Ce.meta={name:"createAction",key:"createActionexecuteHuddlesAudioConnectivityReadinessCheck",description:"Execute readiness check for audio connectivity"};const Le=(0,t.Ay)("Execute readiness check for video connectivity");Le.meta={name:"createAction",key:"createActionexecuteHuddlesVideoConnectivityReadinessCheck",description:"Execute readiness check for video connectivity"};const Ue=(0,t.Ay)("Execute readiness check for content share connectivity");Ue.meta={name:"createAction",key:"createActionexecuteHuddlesContentShareConnectivityReadinessCheck",description:"Execute readiness check for content share connectivity"};const Pe=(0,t.Ay)("Execute readiness check for network UDP connectivity");Pe.meta={name:"createAction",key:"createActionexecuteHuddlesNetworkUDPConnectivityReadinessCheck",description:"Execute readiness check for network UDP connectivity"};const He=(0,t.Ay)("Execute readiness check for network TCP connectivity");He.meta={name:"createAction",key:"createActionexecuteNetworkTCPConnectivityReadinessCheck",description:"Execute readiness check for network TCP connectivity"};const Qe=(0,t.Ay)("Sets that the Huddle was joined via prejoin");Qe.meta={name:"createAction",key:"createActionsetHuddleWasJoinedFromPrejoin",description:"Sets that the Huddle was joined via prejoin"}},5702042015:(j,p,e)=>{"use strict";e.d(p,{A:()=>c,p:()=>o});var t=e(5286203919),n=e(4250409994),s=e(1031947056);let a;const c=(0,s.Ay)("Temporarily show mini-panel",function(i,l){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2500;clearTimeout(a),i((0,n.Ko)(!0)),a=setTimeout(()=>i((0,n.Ko)(!1)),_)});c.meta={name:"createThunk",key:"createThunkshowMiniPanelForDuration",description:"Temporarily show mini-panel"};const o=(0,s.Ay)("Temporarily pause mini-panel visibility transition",(i,l)=>{const _=l();(0,t.Ae)(_)&&clearTimeout(a)});o.meta={name:"createThunk",key:"createThunkpauseMiniPanelTimeout",description:"Temporarily pause mini-panel visibility transition"}},2778217221:(j,p,e)=>{"use strict";e.d(p,{WS:()=>s,nq:()=>n,o7:()=>t});const t="HUDDLES",n=864e5,s=2},5378147939:(j,p,e)=>{"use strict";e.d(p,{A:()=>pe});var t=e(9706240641),n=e(3398586081),s=e(387328355),a=e(1289024643),c=e(462591818),o=e(6533394955),i=e(5795074931),l=e(2047021170),_=e(1889537412),d=e(6758774099),r=e(4250409994),m=e(5881236351),h=e(1031947056),v=e(6562711329);const y=(0,h.Ay)("Fetch channel membership info for huddle member",(fe,Z,se)=>{let{channelId:Ae,userId:Ce}=se;return fe((0,v.z)({channelId:Ae,userIds:[Ce]})).then(Le=>{let{membershipInfo:Ue}=Le;return Ue[Ce]&&"isMember"in Ue[Ce]?!Ue[Ce].isMember:!0})});y.meta={name:"createThunk",key:"createThunkisUserNotHuddleChannelMember",description:"Fetch channel membership info for huddle member"};var I=e(2778217221),T=e(7434063642),f=e(9548972574),g=e(5332875232),M=e(3677514771),A=e(8305649700),O=e(1883693579),D=e(9712681361),E=e(9680914051),C=e(4695727674),S=e(4540171876),b=e(6422693406),k=e(6470070112),W=e(6839188756),N=e(56548687),V=e(6244014364),R=e(5741354339),P=e(6929023741),z=e(4476913522),$=e(5286203919),x=e(4423055085),Y=e(2141441167),ne=e(4949104520),re=e(796111729),_e=e(9190452268),G=e(1651628626),ge=e(8737667238),oe=e(1921074781),me=e(5203103513);const ue=60*1e3,ae=15*1e3,he=1e3*10,ce=1e3*60,ee=5e3;let J=!1;const X=500,F=25;let L=u(class{setTargetState(Z){var se=this;return(0,t.coroutine)(function*(){se.targetState=Z;const{huddleState:Ae,huddleSubState:Ce}=se.targetState;se.isValidHuddleSubState(Ae,Ce)||(se.targetState.huddleSubState=se.getInitialSubStateForHuddleState(Ae)),(0,o.dispatchForClientStore)((0,r.Rh)(se.getOptimisticState(Z))),yield se.process()})()}setTargetChannel(Z){this.targetState.channelId=Z}setTargetSubState(Z){var se=this;return(0,t.coroutine)(function*(){se.isValidHuddleSubState(se.targetState.huddleState,Z)&&(se.targetState.huddleSubState=Z,yield se.process())})()}transitionFromPrejoinToStarted(){this.setTargetState({huddleState:D.RJ.STARTED,teamId:this.targetState.teamId,channelId:this.targetState.channelId,muted:this.targetState.muted,callId:this.targetState.callId,experimentHuddlesLoungeMusicPlayerGroupOn:this.targetState.experimentHuddlesLoungeMusicPlayerGroupOn})}getTimeOfLastStateChange(){return this.timeOfLastStateChange}getTimeOfLastSubStateChange(){return this.timeOfLastSubStateChange}waitForStartStop(){var Z=this;return(0,t.coroutine)(function*(){return Z.startStopDeferred||b.S.resolve()})()}isProcessing(){var Z;return(Z=this.startStopDeferred)===null||Z===void 0?void 0:Z.isPending()}isTargetState(){const{teamId:Z,channelId:se,huddleState:Ae}=this.getClientHuddleState();return(0,k.Ft)(this.targetState.huddleState)?Ae===this.targetState.huddleState:Z===this.targetState.teamId&&se===this.targetState.channelId&&Ae===this.targetState.huddleState}isTargetSubState(){return this.getClientHuddleState().huddleSubState===this.targetState.huddleSubState}hasBeenInSubStateForAtLeastApproxTime(Z){return this.timeOfLastSubStateChange?Date.now()-this.timeOfLastSubStateChange>Z-X:!1}isValidHuddleSubState(Z,se){return Z===D.RJ.STARTED?se===void 0?!1:(0,Y.A)(D.J_).includes(se):se===void 0}getInitialSubStateForHuddleState(Z){if(Z===D.RJ.STARTED)return D.J_.INITIAL_ALONE}process(){var Z=this;return(0,t.coroutine)(function*(){if(Z.isProcessing())return Z.waitForStartStop();Z.startStopDeferred=(0,R.u)();const se=setTimeout((0,t.coroutine)(function*(){var Ae;if(!((Ae=Z.startStopDeferred)===null||Ae===void 0)&&Ae.isPending()){const Ce=new b.S.TimeoutError("HuddleStateManager timeout");yield Z.handleErrorAndDisconnect(Ce)}}),Z.startStopTimeout);try{yield Z.runLoop(),clearTimeout(se),Z.startStopDeferred.resolve()}catch(Ae){yield Z.handleErrorAndDisconnect(Ae)}finally{clearTimeout(se)}Z.startStopDeferred=null})()}runLoop(){var Z=this;return(0,t.coroutine)(function*(){let se=0;for(;!Z.isTargetState();){if(!Z.isProcessing())return;if(se+=1,se>F)throw new Error("runLoop was stuck");const{teamId:Le,channelId:Ue,huddleState:Pe}=Z.getClientHuddleState(),{teamId:He,channelId:Qe,huddleState:lt,callId:qe}=Z.targetState;if(Le!==He&&(delete Z.clogger,delete Z.logger,delete Z.telemeter),[D.RJ.STARTED,D.RJ.PRE_JOINED].includes(lt)){if(Le!==He||Ue!==Qe){switch(Pe){case D.RJ.PENDING:case D.RJ.STARTED:case D.RJ.PRE_JOINED:yield Z.goToNext(D.RJ.ENDING);break;default:yield Z.goToNext(D.RJ.STARTING)}continue}switch(Pe){case D.RJ.NOT_STARTED:yield Z.goToNext(D.RJ.STARTING);break;case D.RJ.STARTING:try{yield Z.goToNext(D.RJ.PENDING)}catch(ct){var Ae;if(!((Ae=Z.credentials)===null||Ae===void 0)&&Ae.isQuickJoinCredentials){if(delete Z.credentials,yield Z.clearQuickJoinCredentials(),ct.message===D.M6.ChimeMeetingEnded)throw ct;if(qe){const tt=(0,f.P_)(Z.getState(),qe);if(tt&&tt.hasEnded)throw new Error(D.M6.ChimeMeetingEnded)}if((0,g.ZG)(Z.getState())){const tt=Date.now(),it=!0;yield Z.safelyDisconnect(it);const We=Date.now()-tt;Z.getLogger().info(`Disconnecting after failed attempt to join huddle added ${We}ms to TTI`)}else Z.getLogger().warn("Initializing a new huddle without disconnecting the last one");yield Z.goToNext(D.RJ.STARTING)}else throw ct}break;case D.RJ.PENDING:yield Z.goToNext(Z.targetState.huddleState);break;case D.RJ.PRE_JOINED:yield Z.goToNext(D.RJ.COMPLETING_PRE_JOIN);break;case D.RJ.COMPLETING_PRE_JOIN:yield Z.completePrejoin({isStartMuted:Z.targetState.muted}),yield Z.goToNext(D.RJ.STARTED);break;case D.RJ.STARTED:throw new Error("This should not be possible");case D.RJ.ENDING:case D.RJ.SURVEY:case D.RJ.SURVEY_GOOD:default:yield Z.goToNext(D.RJ.STARTING);break}continue}if([D.RJ.PENDING,D.RJ.STARTED,D.RJ.PRE_JOINED].includes(Pe)){yield Z.goToNext(D.RJ.ENDING);continue}yield Z.goToNext(lt)}let Ce=0;for(;!Z.isTargetSubState();){if(Ce+=1,Ce>F)throw new Error("runLoop() for huddle substate was stuck");const{huddleState:Le,huddleSubState:Ue}=Z.getClientHuddleState(),{huddleSubState:Pe}=Z.targetState;if(!Z.isValidHuddleSubState(Le,Pe)){const He=Z.getInitialSubStateForHuddleState(Le);Z.targetState.huddleSubState=He,yield Z.goToNextSubState(He),Z.getLogger().warn(I.o7,`attempted to reach invalid huddleSubstate (${Pe}) for the given huddleState (${Le})`);continue}if(Le===D.RJ.STARTED){switch(Ue){case D.J_.INITIAL_ALONE:if(Pe===D.J_.INITIAL_ALONE_NOTICE_ACTIVE){yield Z.goToNextSubState(Pe);break}yield Z.goToNextSubState(D.J_.IN_PROGRESS_TOGETHER);break;case D.J_.INITIAL_ALONE_NOTICE_ACTIVE:if(Pe===D.J_.INITIAL_ALONE_NOTICE_DISMISSED){yield Z.goToNextSubState(Pe);break}yield Z.goToNextSubState(D.J_.IN_PROGRESS_TOGETHER);break;case D.J_.INITIAL_ALONE_NOTICE_DISMISSED:yield Z.goToNextSubState(D.J_.IN_PROGRESS_TOGETHER);break;case D.J_.IN_PROGRESS_TOGETHER:yield Z.goToNextSubState(D.J_.IN_PROGRESS_ALONE);break;case D.J_.IN_PROGRESS_ALONE:if(Pe===D.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE){yield Z.goToNextSubState(Pe);break}yield Z.goToNextSubState(D.J_.IN_PROGRESS_TOGETHER);break;case D.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE:if(Pe===D.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED){yield Z.goToNextSubState(Pe);break}yield Z.goToNextSubState(D.J_.IN_PROGRESS_TOGETHER);break;case D.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED:yield Z.goToNextSubState(D.J_.IN_PROGRESS_TOGETHER);break;default:yield Z.goToNextSubState(D.J_.INITIAL_ALONE)}continue}yield Z.goToNextSubState(void 0)}})()}goToNext(Z){var se=this;return(0,t.coroutine)(function*(){var Ae,Ce,Le,Ue;se.getLogger().info(`Marking huddle as ${Z} [${(Le=(Ae=se.targetState)===null||Ae===void 0?void 0:Ae.teamId)!==null&&Le!==void 0?Le:"N/A"}, ${(Ue=(Ce=se.targetState)===null||Ce===void 0?void 0:Ce.channelId)!==null&&Ue!==void 0?Ue:"N/A"}]`);const Pe=Date.now();se.timeOfLastStateChange=Pe,se.timeOfLastSubStateChange=Pe;const He=se.getInitialSubStateForHuddleState(Z);if(Z===D.RJ.STARTING){var Qe,lt;const tt=se.assertTargetTeamAndChannel(D.RJ.STARTING),it=se.getOptimisticState(se.targetState);se.getLogger().info(`Optimistic state: ${it.optimisticHuddleState}`),(0,o.dispatchForClientStore)((0,r.xf)({huddleState:Z,huddleSubState:He,...tt,...it,isPrejoin:((Qe=se.targetState)===null||Qe===void 0?void 0:Qe.huddleState)===D.RJ.PRE_JOINED,sessionId:(0,ge.A)()})),se.credentials=yield se.fetchCredentials(),(lt=se.getTelemeter())===null||lt===void 0||lt.mark(E.Bq);return}if(Z===D.RJ.PENDING){const tt=se.assert(se.credentials,"Expected credentials to be set before PENDING");(0,o.dispatchForClientStore)((0,r.Rh)({huddleState:Z,huddleSubState:He,...se.assertTargetTeamAndChannel(D.RJ.PENDING),callId:tt.roomId})),yield se.connectToChime(tt,se.targetState),delete se.credentials;return}if(Z===D.RJ.STARTED){var qe;const tt=se.assertTargetTeamAndChannel(D.RJ.STARTED);(0,o.dispatchForClientStore)((0,r.Rh)({huddleState:Z,huddleSubState:He,optimisticHuddleState:null,...tt,isPrejoin:!1})),(0,l.ty)(se.getState(),"huddles_set_status")&&se.scheduleHuddleStateExpirationIncrement(),se.setCoachmarkTimeout(He),(qe=oe.F.getInstance())===null||qe===void 0||qe.request()}else{var ct;(ct=oe.F.getInstance())===null||ct===void 0||ct.release()}if(Z===D.RJ.PRE_JOINED&&(0,o.dispatchForClientStore)((0,r.Rh)({huddleState:Z,huddleSubState:He,optimisticHuddleState:null,...se.assertTargetTeamAndChannel(D.RJ.PRE_JOINED)})),Z===D.RJ.ENDING){(0,o.dispatchForClientStore)((0,r.Rh)({huddleState:Z,huddleSubState:He})),yield se.safelyDisconnect();return}(0,o.dispatchForClientStore)((0,r.Rh)({huddleState:Z,huddleSubState:He,optimisticHuddleState:null}))})()}goToNextSubState(Z){var se=this;return(0,t.coroutine)(function*(){Z===D.J_.IN_PROGRESS_ALONE&&setTimeout(()=>{var Ae;((Ae=se.getClientHuddleState())===null||Ae===void 0?void 0:Ae.huddleSubState)===D.J_.IN_PROGRESS_ALONE&&se.hasBeenInSubStateForAtLeastApproxTime(he)&&(se.isMicEnabled()||se.targetState.experimentHuddlesLoungeMusicPlayerGroupOn)&&se.setTargetSubState(D.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE)},he),se.timeOfLastSubStateChange=Date.now(),(0,o.dispatchForClientStore)((0,r.Rh)({huddleSubState:Z}))})()}handleErrorAndDisconnect(Z){var se=this;return(0,t.coroutine)(function*(){var Ae;se.getLogger().error(Z);const{huddleState:Ce}=se.getClientHuddleState();if([D.RJ.PENDING,D.RJ.STARTED].includes(Ce))try{yield b.S.race([new b.S((Le,Ue)=>{setTimeout(()=>Ue(new Error("HuddleStateManager disconnect timeout")),se.disconnectTimeout)}),se.safelyDisconnect()])}catch(Le){se.getLogger().error(Le)}(0,o.dispatchForClientStore)((0,r.Rh)({huddleState:D.RJ.NOT_STARTED,optimisticHuddleState:null})),yield b.S.resolve(se.handleError(Z,Ce)),(Ae=se.startStopDeferred)===null||Ae===void 0||Ae.reject(Z)})()}getInitialAloneInHuddleTimeOutValue(){if(J)return ee;if(!this.targetState.experimentHuddlesLoungeMusicPlayerGroupOn)return ce;const Z=this.getState(),se=(0,l.ty)(Z,me.VW);return se?se*1e3:(this.getLogger().info("User pref 'huddles_play_music_timeout' is undefined, using default 60 seconds"),ce)}setCoachmarkTimeout(Z){Z===D.J_.INITIAL_ALONE&&(setTimeout(()=>{var se;((se=this.getClientHuddleState())===null||se===void 0?void 0:se.huddleSubState)===D.J_.INITIAL_ALONE&&this.hasBeenInSubStateForAtLeastApproxTime(this.getInitialAloneInHuddleTimeOutValue())&&(this.isMicEnabled()||this.targetState.experimentHuddlesLoungeMusicPlayerGroupOn)&&(this.setTargetSubState(D.J_.INITIAL_ALONE_NOTICE_ACTIVE),this.getLogger().info("setTimeout executed on substate: initial_alone"))},this.getInitialAloneInHuddleTimeOutValue()),this.getLogger().info("setTimeout started on substate: initial_alone"))}isMicEnabled(){var Z;return!!(!((Z=(0,s.Ng)(this.getState()))===null||Z===void 0)&&Z.isMicrophoneEnabled)}getClientHuddleState(){const Z=(0,o.getStateForClientStore)(),se=(0,$.EG)(Z),{channelId:Ae,teamId:Ce}=(0,$.Qn)(Z)||{};if(!se||se===D.RJ.NOT_STARTED)return{huddleState:D.RJ.NOT_STARTED,channelId:Ae,teamId:Ce};const Le=(0,$.EO)(Z);return{huddleState:se,huddleSubState:Le,channelId:Ae,teamId:Ce}}assertTargetTeamAndChannel(Z){const{teamId:se,channelId:Ae}=this.targetState;return{teamId:this.assert(se,`Expected teamId to be set for ${Z}`),channelId:this.assert(Ae,`Expeted channelId to be set for ${Z}`)}}getChannelIdOrDie(){const{channelId:Z}=this.getClientHuddleState(),{channelId:se}=this.targetState,Ae=Z||se;return this.assert(Ae,"No channel ID or active huddle")}getThreadTsOrNothing(){const{threadTs:Z}=this.getClientHuddleState(),{threadTs:se}=this.targetState;return Z||se}getIsMultiDevice(){return!!this.targetState.isMultiDevice}getIsExperimentStandaloneHuddlesOn(){return!!this.targetState.experimentStandaloneHuddlesOn}getTeamIdOrDie(){const{teamId:Z}=this.getClientHuddleState(),{teamId:se}=this.targetState,Ae=Z||se;return this.assert(Ae,"No team ID or active huddle")}getCallIdOrDie(){const Z=(0,o.getStateForClientStore)(),se=(0,$.E9)(Z);return this.assert(se,"No call ID or active huddle")}getHuddleState(){const{huddleState:Z}=this.getClientHuddleState();return Z}dispatch(Z){const se=this.getTeamIdOrDie();return(0,o.dispatchForTeamId)(se,Z)}getState(Z){const se=Z||this.getTeamIdOrDie();return(0,o.getStateByTeamId)(se)}assert(Z,se){if(Z==null)throw new Error(se);return Z}getClogger(){if(this.clogger)return this.clogger;const{teamId:Z}=this.getClientHuddleState();return this.clogger=Z?(0,N.e)({state:(0,o.getStateByTeamId)(Z)}):(0,N.e)(),this.clogger}getLogger(){return this.logger?this.logger:(this.logger=(0,re.Wo)({label:this.logLabel}),this.logger)}getTelemeter(){if(this.telemeter)return this.telemeter;const{teamId:Z}=this.getClientHuddleState();return Z?this.telemeter=(0,_e.Cy)({state:(0,o.getStateByTeamId)(Z)}):this.telemeter=(0,_e.rh)(),this.telemeter}constructor({logLabel:Z=I.o7,startStopTimeout:se=ue,disconnectTimeout:Ae=ae}={}){this.targetState={huddleState:D.RJ.NOT_STARTED},this.startStopDeferred=null;var Ce=this;this.safelyDisconnect=(0,t.coroutine)(function*(){let Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;try{yield Ce.disconnect(Ue)}catch(Pe){Ce.getLogger().error("Failed to disconnect from the Huddle. This may mean the user is still connected to the media server",Pe)}});var Le=this;this.scheduleHuddleStateExpirationIncrement=(0,t.coroutine)(function*(){if(Le.isTargetState()&&Le.targetState.huddleState!==D.RJ.STARTED)return;const Ue=60*5,Pe={huddle_state_expiration_ts:new Date().getTime()/1e3+Ue};yield Le.dispatch((0,G.c)({profile:Pe,reason:"increment-huddle-state-expiration-ts"})),setTimeout(Le.scheduleHuddleStateExpirationIncrement,(0,ne.A)(12e4,-.1,.1))}),this.logLabel=Z,this.startStopTimeout=se,this.disconnectTimeout=Ae,this.timeOfLastStateChange=null,this.timeOfLastSubStateChange=null}},"BaseHuddleStateManager");(0,x.ul)("baseHuddleStateManager",{setShortTimeoutValue:()=>{J=!0},resetShortTimeoutValue:()=>{J=!1}}),Object.defineProperty({shouldUseDebugTimeout:J},"shouldUseDebugTimeout",{get:()=>J,set:()=>{J=!0}});var B=e(7004355564),Q=e(4715430489),q=e(6251210828),le=e(415910655),Te=e(8872167513);class Ie extends L{start(Z,se,Ae,Ce,Le,Ue,Pe,He){var Qe=this;return(0,t.coroutine)(function*(){yield Qe.startHuddleWithTargetState(D.RJ.STARTED,Z,se,Ae,Ce,Le,Ue,Pe,He)})()}prejoin(Z,se,Ae,Ce,Le){var Ue=this;return(0,t.coroutine)(function*(){yield Ue.startHuddleWithTargetState(D.RJ.PRE_JOINED,Z,se,Ae,Ce,void 0,Le)})()}setOthersInHuddle(){var Z=this;return(0,t.coroutine)(function*(){yield Z.setTargetSubState(D.J_.IN_PROGRESS_TOGETHER)})()}setAloneInHuddle(){var Z=this;return(0,t.coroutine)(function*(){yield Z.setTargetSubState(D.J_.IN_PROGRESS_ALONE)})()}dismissAloneInHuddleWarning(Z){var se=this;return(0,t.coroutine)(function*(){const Ae=Z?D.J_.INITIAL_ALONE_NOTICE_DISMISSED:D.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED;yield se.setTargetSubState(Ae)})()}startHuddleWithTargetState(Z,se,Ae,Ce,Le,Ue,Pe,He,Qe){var lt=this;return(0,t.coroutine)(function*(){var qe;!((qe=lt.currentHuddleDeferred)===null||qe===void 0)&&qe.isPending()||(lt.currentHuddleDeferred=(0,R.u)()),yield lt.setTargetState({huddleState:Z,teamId:se,channelId:Ae,muted:Ce,callId:Le,threadTs:Ue,experimentHuddlesLoungeMusicPlayerGroupOn:Pe,isMultiDevice:He,experimentStandaloneHuddlesOn:Qe})})()}stop(){var Z=this;return(0,t.coroutine)(function*(){var se;const Ae=Z.getState(),Ce=Z.getHuddleState()!==D.RJ.PRE_JOINED&&(0,f.Cd)(Ae)&&!Z.isProcessing();Ce&&(Z.getLogger().info(`Show huddle survey in ${Z.getChannelIdOrDie()}`),Z.dispatch((0,O.Cd)({timeSeen:new Date().toISOString()}))),yield Z.setTargetState({huddleState:Ce?D.RJ.SURVEY:D.RJ.NOT_STARTED}),Z.getHuddleState()===D.RJ.NOT_STARTED&&(!((se=Z.currentHuddleDeferred)===null||se===void 0)&&se.isPending())&&Z.currentHuddleDeferred.resolve()})()}enterTerminalState(Z){var se=this;return(0,t.coroutine)(function*(){var Ae;!((Ae=se.pendingHuddleStart)===null||Ae===void 0)&&Ae.isPending()?se.pendingHuddleStart.reject(Z):yield se.handleErrorAndDisconnect(Z)})()}waitForHuddleToEnd(){return b.S.resolve(this.currentHuddleDeferred)}handleError(Z,se){var Ae;this.getLogger().error(Z);const Ce=se===D.RJ.STARTING||se===D.RJ.PENDING;this.dispatch((0,C.A)({errorCode:(0,D.dJ)(Z.name)?Z.name:Z.message,isJoinError:Ce})),!((Ae=this.currentHuddleDeferred)===null||Ae===void 0)&&Ae.isPending()&&this.currentHuddleDeferred.resolve()}getOptimisticState(Z){let{teamId:se,channelId:Ae,huddleState:Ce}=Z;if([D.RJ.NOT_STARTED].includes(Ce))return{optimisticHuddleState:D.RJ.ENDING};if([D.RJ.SURVEY].includes(Ce))return{optimisticHuddleState:null};if(Ce===D.RJ.PRE_JOINED)return{optimisticHuddleState:D.RJ.PRE_JOINED,isPrejoin:!0};if(Ce===D.RJ.STARTED&&se){var Le,Ue;const Pe=(0,o.getStateByTeamId)(se),He=(0,o.getStateForClientStore)(),Qe=(0,$.aQ)(He),lt=(Qe==null?void 0:Qe.channelId)===Ae||!((Le=(0,f.Yw)(Pe,Ae))===null||Le===void 0||(Ue=Le.activeParticipants)===null||Ue===void 0)&&Ue.length?null:D.RJ.STARTED;return(0,l.ty)(Pe,"huddles_global_mute")&&(0,o.dispatchForClientStore)((0,r.Bk)(!0)),{isPrejoin:!1,optimisticHuddleState:lt}}return{}}fetchCredentials(){var Z=this;return(0,t.coroutine)(function*(){const se=Z.getTeamIdOrDie(),Ae=Z.getChannelIdOrDie(),Ce=Z.getThreadTsOrNothing(),Le=(0,o.getStateForClientStore)(),Ue=(0,f.Yw)(Z.getState(),Ae),{ttiTrace:Pe}=(0,Te.A)().getAllTraceHandlers(),He=(0,$.WL)(Le,Ae),Qe=Z.getIsMultiDevice(),lt=(0,Q.x)(Z.getState());if(Pe==null||Pe.createFetchCredentialsSpan(),He){Pe==null||Pe.setCachedTag({cached:!0});const qe=(Ue==null?void 0:Ue.id)||(0,k.RW)(He.credentials);if(qe){const ct=(0,f.P_)(Z.getState(),qe);if(ct&&ct.hasEnded)throw yield Z.clearQuickJoinCredentials(),new Error(D.M6.ChimeMeetingEnded)}return Z.getTelemeter().count(E.K7),Pe==null||Pe.closeFetchCredentialsSpan(),{roomId:qe,server:He.credentials,isQuickJoinCredentials:!0}}if((0,g.CI)(Z.getState(se))){const qe=(0,q._6)(Z.getState(),{channelId:Ae});if(qe)return{roomId:(0,k.RW)(qe),server:qe,isQuickJoinCredentials:!1}}return Z.getTelemeter().mark(E.aW),Pe==null||Pe.setCachedTag({cached:!1}),Z.dispatch((0,S.O3)({teamId:se,channelId:Ae,shouldFetchRegion:!Ue,traceId:Pe==null?void 0:Pe.getTTITraceId(),parentSpanId:Pe==null?void 0:Pe.getFetchCredentialsSpanId(),...Ce&&{threadTs:Ce},...Qe&&{isMultiDevice:Qe}})).then(qe=>{var ct,tt;if(!(!(qe==null||(ct=qe.server)===null||ct===void 0)&&ct.meeting)||!(!(qe==null||(tt=qe.server)===null||tt===void 0)&&tt.attendee))throw new Error("create_meeting_failed");Pe==null||Pe.closeFetchCredentialsSpan(),Z.getTelemeter().mark(E.bW);const it=Z.getTelemeter().measure(E.aW,E.iE,E.bW);Z.getTelemeter().count(E.iE,it),(0,le.jm)({roomsJoinTime:it});let Ge=Ae;return Z.getIsExperimentStandaloneHuddlesOn()&&qe.channelId&&(Ge=qe.channelId,Z.setTargetChannel(Ge),(0,o.dispatchForClientStore)((0,r.Jc)(Ge))),(0,o.dispatchForClientStore)((0,r.Yi)({channelId:Ge,joinCredentials:qe.server,expiry:Date.now()+I.nq,fromInvite:!1})),qe.rootThreadTs&&qe.roomId&&(Z.dispatch((0,T.ZL)({huddleId:qe.roomId,thread:{channelId:Ge,ts:qe.rootThreadTs}})),Z.dispatch((0,A.KN)({channelId:Ge,threadTs:qe.rootThreadTs,lastRead:qe.rootThreadTs,reason:"canvas-rooms-join-api"})),Z.dispatch(lt?(0,z.a)({channelId:Ge,threadTs:qe.rootThreadTs,oldest:qe.rootThreadTs}):(0,P.a)({channelId:Ge,threadTs:qe.rootThreadTs,oldest:qe.rootThreadTs}))),qe})})()}connectToChime(Z,se){let{server:Ae,roomId:Ce}=Z,{muted:Le,huddleState:Ue}=se;var Pe=this;return(0,t.coroutine)(function*(){const{ttiTrace:He}=(0,Te.A)().getAllTraceHandlers();return He==null||He.createConnectToMediaServiceSpan(),(0,o.dispatchForClientStore)((0,r.qW)({callResult:{server:Ae,roomId:Ce,regions:"",inviteResponses:[],virtualRoomId:""},isStartMuted:Le,waitForHuddleStart:(0,R.u)(),isPrejoin:Ue===D.RJ.PRE_JOINED})),Pe.pendingHuddleStart=(0,R.u)(),Ue===D.RJ.PRE_JOINED?b.S.resolve():Pe.pendingHuddleStart})()}resolvePendingJoin(Z){var se=this;return(0,t.coroutine)(function*(){try{var Ae;const Le=se.getChannelIdOrDie(),{ttiTrace:Ue}=(0,Te.A)().getAllTraceHandlers(),Pe=se.getState(),He=(0,o.getStateForClientStore)(),{callId:Qe,optimisticHuddleState:lt}=(0,$.Qn)(He)||{},qe=(0,f.dy)(Pe);if(se.getLogger().info(`Resolve pending huddle (${Le}, optimisticHuddleState: ${lt}, has optimisticTopic: ${!!qe})`),!(!((Ae=se.pendingHuddleStart)===null||Ae===void 0)&&Ae.isPending()))throw new Error("No pending huddle start in resolvePendingJoin");const ct=se.assert(Qe,"Room ID is not defined for pending join"),tt=(0,l.ty)(Pe,"huddles_cc_by_default");if((0,k.UA)(Pe,Le)&&tt&&(se.dispatch((0,_.A)()),se.dispatch((0,d.dD)(!0)),se.dispatch((0,d.jL)(!0))),qe){try{yield se.dispatch((0,S.xB)({roomId:ct,name:qe})),se.dispatch((0,a.oU)({id:ct,name:qe}))}catch(Ge){se.getLogger().error(Ge)}se.dispatch((0,m.Jc)(null))}(0,o.dispatchForClientStore)((0,r.u8)(Le)),Ue==null||Ue.closeConnectToMediaServiceSpan(),(0,N.e)({state:Pe}).track(V.EventId.HUDDLES_TIME_AUDIO_SESSION_STARTED,{contexts:{calls:{room_id:ct,duration_ms:Math.round(Z),channel_id:Le}}}),(0,le.jm)({audioConnectedTime:Z}),(0,o.dispatchForClientStore)((0,r.Rh)({isSelfJoined:!0})),se.pendingHuddleStart.resolve()}catch(Le){var Ce;(Ce=se.pendingHuddleStart)===null||Ce===void 0||Ce.reject(Le)}})()}completePrejoin(Z){var se=this;return(0,t.coroutine)(function*(){const Ae=se.getChannelIdOrDie(),Ce=(0,o.getStateForClientStore)(),{ttiTrace:Le}=(0,Te.A)().getAllTraceHandlers(),Ue=(0,$.WL)(Ce,Ae);return Le==null||Le.setCachedTag({cached:!!Ue}),Le==null||Le.createConnectToMediaServiceSpan(),(0,o.dispatchForClientStore)((0,r.f2)({...Z}))})()}clearQuickJoinCredentials(){return(0,t.coroutine)(function*(){const Z=(0,o.getStateForClientStore)(),{channelId:se}=(0,$.Qn)(Z)||{};return(0,o.dispatchForClientStore)((0,r.WB)({channelId:se}))})()}disconnect(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;var se=this;return(0,t.coroutine)(function*(){var Ae;const Ce=se.getState(),Le=(0,o.getStateForClientStore)(),{channelId:Ue,teamId:Pe}=(0,$.Qn)(Le)||{};if(!Z)try{(0,Te.A)().cleanup()}catch(He){se.getLogger().error(`Error cleaning up huddle tracing: ${He}`)}try{(0,o.dispatchForClientStore)((0,r.Bk)(!1)),(0,g.lV)(Ce)&&((0,o.dispatchForClientStore)((0,r.JM)()),(0,o.dispatchForClientStore)((0,r._u)({song:void 0}))),(0,o.dispatchForClientStore)((0,r.Rh)({isSelfJoined:!1}));const Qe=(0,i.WR)(Ce),lt=Ue&&(0,f.Yw)(Ce,Ue);if(lt&&Ue){const qe=(lt.activeParticipants||[]).filter(tt=>!((0,c.MZ)(tt)&&tt.slackId===Qe));se.dispatch((0,a.oU)({id:lt.id,activeParticipants:qe}));const ct=(0,a.H6)(se.getState(),lt.id);ct&&se.dispatch((0,m.mr)({call:ct,channelId:Ue}))}if(Ue){const qe=yield(0,o.dispatchForTeamId)(Pe,y({channelId:Ue,userId:Qe})),ct=(0,M.H7)(Ce),tt=(0,W.tc)(ct);(qe||tt)&&(yield se.clearQuickJoinCredentials()),(0,o.dispatchForClientStore)((0,r.u8)(Ue))}}catch(He){se.getLogger().error("An error occurred cleaning up huddle redux state. Proceeding to disconnect from media server.",He)}try{const He=(0,R.u)();(0,o.dispatchForClientStore)((0,r.pl)({waitForHuddleEnd:He})),yield He}catch(He){se.getLogger().error("An error occurred while disconnecting from the media server.",He)}se.dispatch((0,s.VL)({huddlesVideoActive:!1})),se.dispatch((0,T.np)()),(0,o.dispatchForClientStore)((0,r.cx)()),!((Ae=se.pendingHuddleStart)===null||Ae===void 0)&&Ae.isPending()&&se.pendingHuddleStart.reject(new Error("HuddleStateManager shutdown"))})()}}u(Ie,"HuddleStateManager");const pe=(0,n.A)(()=>{const fe=new Ie;return(0,B.R)(fe.waitForStartStop.bind(fe)),fe})},7004355564:(j,p,e)=>{"use strict";e.d(p,{A:()=>a,R:()=>s});var t=e(6422693406);let n;const s=u(c=>{n=c},"setWaitForStartStop"),a=u(()=>n?n():t.S.resolve(),"__WEBPACK_DEFAULT_EXPORT__")},3065433701:(j,p,e)=>{"use strict";e.d(p,{CE:()=>o,Gu:()=>i,vT:()=>n.vT});var t=e(1031947056),n=e(7366481123);const s=3*1e3,a={[n.vT.NoUserAudioStream]:!0,[n.vT.NoUserVideoStream]:!0,[n.vT.NoAudioOutputAudioElementError]:!0,[n.vT.NoAudioOutputAudioLevelError]:!0,[n.vT.SlowNetwork]:!0,[n.vT.PeerMuteRequest]:!0};let c={};const o=(0,t.Ay)("Display alert message for huddle call",(_,d,r)=>{let{alert:m,peerId:h}=r;if(!c[m]){if(a[m]){c[m]=setTimeout(()=>{c[m]&&(clearTimeout(c[m]),delete c[m]),_((0,n.Sb)({alert:m,peerId:h}))},s);return}_((0,n.Sb)({alert:m,peerId:h}))}});o.meta={name:"createThunk",key:"createThunkdisplayAlertMessage",description:"Display alert message for huddle call"};const i=(0,t.Ay)("Undisplay an alert message for huddle call",(_,d,r)=>{c[r]&&(clearTimeout(c[r]),delete c[r]),_((0,n.LL)(r))});i.meta={name:"createThunk",key:"createThunkhideAlertMessage",description:"Undisplay an alert message for huddle call"},Object.defineProperty({alertTimeouts:c},"alertTimeouts",{get:()=>c,set:_=>{c=_}})},5253428843:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(1031947056),n=e(5378147939);const s=(0,t.Ay)("Handle huddle error",(c,o,i)=>(0,n.A)().enterTerminalState(new Error(i.terminalState)));s.meta={name:"createThunk",key:"createThunkenterTerminalState",description:"Handle huddle error"};const a=s},2766373332:(j,p,e)=>{"use strict";e.d(p,{N$:()=>Ce,KD:()=>Z,kq:()=>fe,HU:()=>se});var t=e(9706240641),n=e(1031947056),s=e(6533394955),a=e(387328355),c=e(9864164947),o=e(7067820909),i=e(7621809678),l=e(3245843483),_=e(2778217221),d=e(6134475965),r=e(1049642794),m=e(2802517438),h=e(3134334389),v=e(3288846409),y=e(3037015781),I=e(4979382452),T=e(8029613601),f=e(4947127560),g=e(4636370173),M=e(2465132699),A=e(8523371695),O=e(3606117573),D=e(2683115972),E=e(3165300465),C=e(1610251172),S=e(4481313819),b=e(6023831373),k=e(5363983309),W=e(5286203919),N=e(9101533895),V=e(9289081806),R=e(8921478798),P=e(1407713935),z=e(6244014364),$=e(735940183),x=e(8320929653),Y=e(4233000497);function ne(){return ne=Object.assign||function(Le){for(var Ue=1;Ue<arguments.length;Ue++){var Pe=arguments[Ue];for(var He in Pe)Object.prototype.hasOwnProperty.call(Pe,He)&&(Le[He]=Pe[He])}return Le},ne.apply(this,arguments)}u(ne,"_extends");const re=new $.Ay("huddles"),_e={elementName:"huddles_invite_confirmation_dialog_cancel",eventId:z.EventId.HUDDLES_JOIN_CANCEL,onClick:{enableClogAction:!0}},G={elementName:"huddles_invite_confirmation_dialog_ok",eventId:z.EventId.HUDDLES_JOIN_CONFIRM,onClick:{enableClogAction:!0}};function ge(Le){let{closeModal:Ue,...Pe}=Le;const{channelId:He,senderUserId:Qe}=Pe,lt=(0,Y.A)(He),{handleDecline:qe,handleJoin:ct,isLoading:tt,inviteText:it}=(0,x.lc)(Pe),Ge=(0,b.d4)(bt=>(0,R.I)(bt,Qe));let We=re.t("Huddle with {dmPersons}",{dmPersons:Ge,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"});const xe=(0,b.d4)(bt=>(0,N.OL)(bt,He)),ze=(0,b.d4)(bt=>(0,y.uz)(xe)?(0,V.SB)(bt,xe,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}):void 0);ze&&(We=(0,P.JM)(xe)?re.t("Huddle with {dmPersons}",{dmPersons:ze,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"}):re.t("Huddle in {channelName}",{channelName:ze,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"}));const mt=(0,v.cw)(W.hc)===He;(0,h.useEffect)(()=>{mt&&!tt&&(Ue==null||Ue())},[mt,tt,Ue]);const pt=(0,h.useCallback)(()=>{qe(),Ue==null||Ue()},[Ue,qe]),It="huddle-invite-join-modal";return h.createElement(S.A,ne({uiComponentName:z.UiComponentName.HUDDLES_INVITE_CONFIRMATION_DIALOG},lt),h.createElement(I.A,{labelledby:It,dataQa:It,closeModal:Ue,role:"dialog",className:"p-huddle_invite_join_modal",overlayClassName:"p-huddle_invite_join_modal__overlay",shouldReturnFocusAfterClose:!0},h.createElement(T.A,null,h.createElement(f.A,{title:We,id:It})),h.createElement(g.A,null,h.createElement(M.A,null,it)),h.createElement(A.A,null,h.createElement(O.A,null,h.createElement(D.Ay,{type:"outline",onClick:pt,"data-qa":"huddle_invite_join_cancel",autoClogProps:_e},re.t("Not Now")),h.createElement(E.A,{type:"primary",loading:tt,onClick:ct,"data-qa":"huddle_invite_join_go",autoClogProps:G,autoFocus:!0},h.createElement(C.A,{type:"headphones"}),h.createElement("span",{className:"p-huddle_invite_join_modal__join_label"},re.t("Join")))))))}u(ge,"HuddleInviteJoinModal"),ge.displayName="HuddleInviteJoinModal";const oe={HuddleInviteJoinModal:ge},me=(0,k.A)(ge);var ue=e(605594140),ae=e(6422693406),he=e(796111729),ce=e(8040098042),ee=e(2960290117),J=e(6415612447),X=e(6470070112),F=e(56548687),L=e(571104883),K=e(8746998952),B=e(9712681361),Q=e(5702042015),q=e(7429662208),le=e(3193155968),Te=e(6695353875),Ie=e(9629572172),De=e(352142497);const pe=u((Le,Ue,Pe)=>{(0,F.e)({state:Le}).track(Ue,{contexts:{calls:(0,X.gG)(Le,Pe),ui_context:{action:z.UiAction.KEYDOWN}}})},"clogHuddlesEvent"),fe=(0,n.Ay)("Start huddle in highlighted channel or current primary view",function(){var Le=(0,t.coroutine)(function*(Ue,Pe,He){let{highlightedChannelId:Qe}=He;const lt=(0,s.getStateForClientStore)(),qe=Pe(),ct=(0,Te.cc)(qe),tt=ct,it=(0,q.e6)(qe),Ge=(0,m.A)(qe),We=tt?(0,q.F8)(qe,{tab:it,container:le.mq.Primary}):null,xe=tt?We==null?void 0:We.id:Ge,ze=Qe||xe,{channelId:mt,teamId:pt}=(0,W.Ak)(lt)||{};if(mt&&pt&&(!Qe||Qe===mt)){(0,s.dispatchForTeamId)(pt,(0,d.A)()),pe(qe,z.EventId.HUDDLES_LEAVE,mt);return}const It=(0,W.aQ)(lt);if(It&&!Qe){const{channelId:gt,senderUserId:ht,callId:Zt,teamId:rn}=It;(0,s.dispatchForTeamId)(rn,me({channelId:gt,senderUserId:ht,callId:Zt}));return}if(!ze||!(0,ce.A)(ze)&&!(0,ee.Ay)(ze)){ct&&Ue((0,ue.A)());return}const bt=(0,J.Y)(qe,ze);bt&&(0,X.Bn)(qe,bt)&&(pe(qe,z.EventId.HUDDLES_JOIN,bt.id),Ue((0,K.A)({channelId:bt.id,forceFocus:!0,entryPoint:B.su.KEYBOARD_SHORTCUT_JOIN_HUDDLE})))});return function(Ue,Pe,He){return Le.apply(this,arguments)}}());fe.meta={name:"createThunk",key:"createThunktoggleHuddleInHighlightedChannel",description:"Start huddle in highlighted channel or current primary view"};const Z=(0,n.Ay)("Start huddle in the current view",function(){var Le=(0,t.coroutine)(function*(Ue,Pe,He,Qe){var lt,qe;const ct=Pe(),{shouldUseNavigate:tt,isChildWindow:it,getViewSet:Ge}=Qe(Ie.U),We=Ge(ct);(!tt||!it||(We==null||(lt=We[le.mq.Primary])===null||lt===void 0?void 0:lt.viewType)!==De.D.Channel)&&Ue(fe({highlightedChannelId:void 0}));const xe=We==null||(qe=We[le.mq.Primary])===null||qe===void 0?void 0:qe.id;Ue(fe({highlightedChannelId:xe}))});return function(Ue,Pe,He,Qe){return Le.apply(this,arguments)}}());Z.meta={name:"createThunk",key:"createThunktoggleHuddleInCurrentView",description:"Start huddle in the current view"};const se=(0,n.Ay)("Toggle microphone from current value to opposite value",(Le,Ue)=>{const Pe=(0,s.getStateForClientStore)(),{teamId:He,channelId:Qe}=(0,W.Ak)(Pe)||{};if(!He)return;const lt=(0,s.getStateByTeamId)(He),qe=(0,a.Ng)(lt),ct=qe==null?void 0:qe.isMicrophoneEnabled;(0,s.dispatchForTeamId)(He,(0,r.A)(!ct)),Le(ct?(0,c.Ho)():(0,c.qc)()),(0,he.Ay)({state:lt}).info(_.o7,`Keyboard shortcut invoked -- toggling mic to ${ct?z.EventId.HUDDLES_MUTE:z.EventId.HUDDLES_UNMUTE}`),Qe&&pe(lt,ct?z.EventId.HUDDLES_MUTE:z.EventId.HUDDLES_UNMUTE,Qe)});se.meta={name:"createThunk",key:"createThunktoggleSelfMicrophone",description:"Toggle microphone from current value to opposite value"};let Ae=!1;const Ce=u(Le=>{var Ue;return(0,L.dY)("4.13.0")?(Le&&!Ae&&((0,l.zin)(i.Sr.TOGGLE_MUTE,(0,t.coroutine)(function*(){const Pe=(0,s.getStateForClientStore)(),{teamId:He}=(0,W.Ak)(Pe)||{};He&&((0,s.dispatchForTeamId)(He,se()),(0,o.Sr)((0,s.getStateForClientStore)())||(0,s.dispatchForClientStore)((0,Q.A)()))})),Ae=!0),(Ue=(0,l.wzE)(i.Sr.TOGGLE_MUTE,Le))===null||Ue===void 0?void 0:Ue.then(()=>Le)):ae.S.resolve(!1)},"maybeToggleGlobalMuteShortcut")},1883693579:(j,p,e)=>{"use strict";e.d(p,{uZ:()=>ae,Tn:()=>ce,Cd:()=>he});var t=e(796111729),n=e(1031947056),s=e(6533394955),a=e(387484329),c=e(2778217221),o=e(4250409994),i=e(9712681361),l=e(6422693406),_=e(5046160032),d=e(4914127094),r=e(8848660647),m=e(7299481592),h;(function(ee){ee.HuddleSurvey="huddle-survey",ee.ListsSurvey="lists-survey"})(h||(h={}));var v;(function(ee){ee.NoAudioInput="no-audio-input",ee.NoAudioOutput="no-audio-output",ee.LowVideoQuality="low-video-quality",ee.LowAudioQuality="low-audio-quality",ee.VideoNotWorking="video-not-working",ee.DeviceSelectionError="device-selection-error",ee.Disconnected="disconnected",ee.SomethingElse="something-else",ee.Dismiss="dismiss"})(v||(v={}));function y(ee){return ee.isOk}u(y,"isOkResult");const I=(0,n.Ay)("Send survey results",(ee,J,X)=>{var F,L;const K=J();var B;const Q=(B=X.callId)!==null&&B!==void 0?B:K.activeCall.id;if(!Q)return(0,m.M)(!1,"There should have been a call in order to send survey results."),l.S.reject(new Error("SendSurveyResult: No call"));var q;const le=(q=X.type)!==null&&q!==void 0?q:"vo-survey",Te=y(X)?void 0:{response_requested:!1,comments:X.comments,is_video:(F=K.activeCall)===null||F===void 0?void 0:F.hasVideoBeenEnabled,is_ss:(L=K.activeCall)===null||L===void 0?void 0:L.hasScreenshareBeenEnabled,list_id:X==null?void 0:X.listId,list_entry_point:X==null?void 0:X.listEntryPoint},Ie=y(X)||le===h.ListsSurvey?"ok":X.notOkResponses.join(","),De={room:Q,event_type:le,event_value:Ie,event_metadata:JSON.stringify(Te)};return(0,_.A)({apiUrl:"/api/",method:"screenhero.rooms.userEvent",token:(0,d.F)(K),versionTs:(0,r.HF)(),versionUid:(0,r.X3)(),args:De})?l.S.resolve():l.S.reject(new Error("SendSurveyResult: beacon failed"))});I.meta={name:"createThunk",key:"createThunksendSurveyResult",description:"Send survey results"};var T=e(3134334389),f=e(6023831373),g=e(6313685253),M=e(8300007136),A=e(6084388622),O=e(3989454579),D=e(6948117092),E=e(5016574668),C=e(3855029223),S=e(169770637),b=e(6310192986),k=e(1616072515);const W="survey";var N;(function(ee){ee.Good="good",ee.Bad="bad",ee.Dismiss="dismiss"})(N||(N={}));const V="HUDDLES-SURVEY-TRACE",R=u(ee=>{let{teamId:J,callId:X,results:F}=ee;const L=J?(0,t.Ay)({label:V,teamId:J}):(0,t.Wo)({label:V});if(!J){L.warn("Missing team id. Exiting early");return}const K=(0,C.E)({teamOrEnterpriseId:J}),B=K.createTrace({traceName:E.Sq,tags:{__dataset:E.RN},samplingOptions:{sampleRate:1,sampleType:S.tS.SESSION}}),Q=B.startSpan(W),q={...F};(0,D.A)(q,"comments");const{notOkResponses:le,summary:Te}=q||{};if(!X){L.warn("Missing callId. Exiting early");return}if(!Te){L.warn("Missing summary. Exiting early");return}try{L.info(`Processing huddle survey response. callId: ${X} - traceId: ${B.getTraceId()} - results: ${JSON.stringify(q)}`)}catch(pe){L.error(pe)}const Ie={teamId:J,callId:X,surveySummary:Te,surveyResponseCount:(le==null?void 0:le.length)||0,surveyResponses:le==null?void 0:le.join(" ")},De=(0,k.tT)({...Ie,...(0,b.vP)()});Q.addTags(De),Q.close(),L.info(`Reporting huddle survey trace with ${Object.keys(De).length} tags (${B.getTraceId()})`),L.debug("Tags attached",De),K.reportTrace(B),K.clearTrace(B)},"reportHuddleSurveyResultsTrace");var P=e(8847766420),z=e(980293773),$=e(7138682671),x=e(8472205500),Y=e(735940183),ne=e(8739505998),re=e(5363983309),_e=e(6968387112);const G=new Y.Ay("huddles");function ge(ee){return(0,g.A)(ee,(J,X,F)=>(X&&J.push(F),J),[])}u(ge,"collectResponses");const oe=u(ee=>{let{closeModal:J,callId:X}=ee;const F=(0,f.d4)(P.ZT),[L,K]=(0,T.useState)({}),[B,Q]=(0,T.useState)(""),[q,le]=(0,T.useState)(!1),Te=`https://${(0,_e.qF)()}`,Ie=(0,M.wA)(),De=[{value:v.NoAudioInput,text:G.t("Others couldn\u2019t hear me")},{value:v.NoAudioOutput,text:G.t("I couldn\u2019t hear others")},{value:v.DeviceSelectionError,text:G.t("Slack selected the wrong microphone/speaker, or couldn\u2019t find my device")},{value:v.LowAudioQuality,text:G.t("Audio was low quality (e.g., it lagged or sounded choppy/robotic)")},{value:v.LowVideoQuality,text:G.t("Video was low quality (e.g., slow, not in sync with audio, or pixelated)")},{value:v.VideoNotWorking,text:G.t("Video didn\u2019t work at all")},{value:v.Disconnected,text:G.t("I got disconnected from the Huddle")},{value:v.SomethingElse,text:G.t("Something else went wrong")}],pe=h.HuddleSurvey,fe=(0,T.useCallback)(()=>{le(!0);const Le={isOk:!1,notOkResponses:ge(L),comments:B,callId:X,type:pe};Ie(I(Le)).then(()=>{F&&R({teamId:F,callId:X,results:{summary:N.Bad,...Le}}),le(!1),J==null||J()})},[X,L,J,F,B,Ie,pe]),Z=(0,T.useCallback)(()=>{Ie(I({isOk:!1,notOkResponses:[v.Dismiss],callId:X,type:pe})),J==null||J()},[J,X,pe,Ie]),se=(0,T.useCallback)(Le=>Q(Le),[]),Ce=!!L[v.SomethingElse];return T.createElement(z.dW,{closeModal:Z,showCloseButton:!0,centered:!0,maxWidth:600},T.createElement(T.Fragment,null,T.createElement(z.rQ,null,T.createElement(z.Rc,{title:G.t("What went wrong?")})),T.createElement(z.$m,null,T.createElement(z.qf,null,De.map(Le=>{let{value:Ue,text:Pe}=Le;return T.createElement($.A,{text:Pe,key:Ue,id:Ue,type:"inline",cursor:"pointer",className:"p-huddle_survey_modal_checkbox"},T.createElement(O.A,{name:Ue,value:Ue,checked:!!L[Ue],onChange:He=>K(Qe=>({...Qe,[Ue]:He.target.checked}))}))}),Ce&&T.createElement($.A,{className:"padding_top_75",text:G.t("If you\u2019d like, please share any other details here:"),id:"details",optional:!0},T.createElement(x.A,{name:"details",id:"details",onChange:se,value:B})))),T.createElement(z.jl,null,T.createElement(ne.A,{href:`${Te}/privacy-policy`,target:"_blank"},G.t("Privacy Policy")),T.createElement(z.ox,null,T.createElement(A.$n,{onClick:Z,type:"outline"},G.t("Dismiss")),T.createElement(A.lV,{loading:q,onClick:fe},G.t("Send"))))))},"HuddleSurveyModal");oe.displayName="HuddleSurveyModal";const me=(0,re.A)(oe);var ue=e(5286203919);const ae=(0,n.Ay)("Close the mini survey after a postive response",(ee,J,X)=>{let{channelId:F}=X;(0,s.dispatchForClientStore)((0,o.Rh)({channelId:F,optimisticHuddleState:null,huddleState:i.RJ.NOT_STARTED}))});ae.meta={name:"createThunk",key:"createThunkcloseMiniSurvey",description:"Close the mini survey after a postive response"};const he=(0,n.Ay)("Set the date for when the user last saw the huddle survey",(ee,J,X)=>{let{timeSeen:F}=X;ee((0,a.AZ)({pref:"huddle_survey_last_seen",value:F}))});he.meta={name:"createThunk",key:"createThunksetHuddleLastSeenSurvey",description:"Set the date for when the user last saw the huddle survey"};const ce=(0,n.Ay)("Record the result of the mini survey we first display the user after a huddle ends.",(ee,J,X)=>{let{result:F}=X;const L=(0,s.getStateForClientStore)(),K=(0,ue.E9)(L),B=(0,ue.hc)(L),Q=(0,ue.l4)(L),q=h.HuddleSurvey;let le=i.RJ.NOT_STARTED,Te;switch(F){case"bad":K&&ee(me({callId:K}));break;case"good":le=i.RJ.SURVEY_GOOD,ee(I({isOk:!0,callId:K,type:q})),Te=N.Good;break;case"dismiss":Te=N.Dismiss,ee(I({isOk:!1,callId:K,notOkResponses:[v.Dismiss]}));break;default:}Te&&R({teamId:Q,callId:K,results:{summary:Te}}),(0,s.dispatchForClientStore)((0,o.Rh)({channelId:B,optimisticHuddleState:null,huddleState:le})),(0,t.Ay)({getState:J}).info(c.o7,`Marking huddle as ${le} in component: huddle-survey`)});ce.meta={name:"createThunk",key:"createThunkrecordMiniSurvey",description:"Record the result of the mini survey we first display the user after a huddle ends."}},6741408957:(j,p,e)=>{"use strict";e.d(p,{GD:()=>v,Ss:()=>I,iz:()=>f});var t=e(3398586081),n=e(1289024643),s=e(4540171876),a=e(6422693406),c=e(3037015781),o=e(8352634987),i=e(1031947056),l=e(6533394955),_=e(9640070512),d=e(2527782504),r=e(5286203919),m=e(5881236351);const h=u((M,A)=>(0,l.dispatchForTeamId)(M,(0,s.Db)({callIds:A,reason:"all-calls-store/conditional-fetch"})).then(O=>O.map(D=>(0,l.dispatchForTeamId)(M,(0,n.oU)(D)))),"fetchAndUpsert"),v=(0,t.A)(()=>new o.Ay({storeKey:"allCalls",fetch:h,isEnabled:()=>!0})),y=u((M,A)=>{const O=A.map(D=>((0,l.dispatchForTeamId)(M,(0,n.oU)(D)),D.id));v().markObjectsAsFresh(M,O)},"upsertCalls"),I=(0,t.A)(()=>new c.Ay({fetch:(M,A)=>(0,l.dispatchForTeamId)(M,(0,s.Db)({callIds:A,reason:"all-calls-store/unknown-fetch"})),upsertKnown:y,upsertNonExistent:(M,A)=>y(M,A.map(O=>{let{id:D}=O;return{id:D,name:""}}))}));let T=0;const f=(0,i.Ay)("Set a huddle topic",(M,A,O)=>{let{channelId:D,topic:E}=O;const C=(0,l.getStateForClientStore)();if((0,r.aS)(C))return M((0,m.Jc)(E)),a.S.resolve();const S=(0,r.E9)(C);if(!S)return a.S.reject(new Error(`No callId for channel ${D}`));M((0,m.Jc)(E)),T+=1;const b=T;return M((0,s.xB)({roomId:S,name:E})).then(()=>M((0,n.oU)({id:S,name:E}))).finally(()=>{b===T&&M((0,m.Jc)(null)),M((0,_.H)({focusKey:d.Ay.HUDDLE_SIDEBAR_TOPIC,forceFocus:!0}))})});f.meta={name:"createThunk",key:"createThunksetHuddleTopic",description:"Set a huddle topic"};const g={fetchAndUpsert:h}},666760496:(j,p,e)=>{"use strict";e.d(p,{A:()=>v});var t=e(9706240641),n=e.n(t),s=e(4540171876),a=e(6422693406),c=e(1031947056),o=e(387328355),i=e(6533394955),l=e(9548972574),_=e(7723800688),d=e(6244014364),r=e(56548687),m=e(6470070112);const h=(0,c.Ay)("Notify members to join huddle",function(){var y=(0,t.coroutine)(function*(I,T,f){let{channelId:g,userIds:M}=f;const A=[];if(M&&M.length>0){M.forEach(k=>{I((0,o.oN)({userId:k})),A.push(new a.S((W,N)=>{I((0,s.OB)({userId:k,channelId:g,reason:"huddle-notify-member"})).then(W).catch(V=>{const R=new Error(V.message);R.invitedMemberId=k,R.inviteRejectionReason=V.name,N(R)})}))});const O=(0,i.getStateForClientStore)(),D=T(),E=(0,l.Yw)(D,g),C=(0,m.$t)(D,{huddleId:E==null?void 0:E.id}),S=(0,m.kn)(O),b=(0,m.UE)(O);(0,r.e)({state:D}).track(d.EventId.CANVAS_EVENT,{contexts:{ui_context:{ui_properties:{element_name:_.Hi.INVITATION_SENT},action:d.UiAction.INVITE_PEOPLE},calls:b},invited_user_ids:M,...C,...S})}return a.S.all(A).then(O=>O)});return function(I,T,f){return y.apply(this,arguments)}}());h.meta={name:"createThunk",key:"createThunkinviteMembers",description:"Notify members to join huddle"};const v=h},1070786785:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>l,V3:()=>o,kb:()=>i});var t=e(1031947056),n=e(6533394955),s=e(6134475965),a=e(5286203919);const c=(0,t.Ay)("End huddle for channelId if any",(_,d,r)=>{const m=(0,n.getStateForClientStore)(),h=(0,a.hc)(m);h&&h===r&&_((0,s.A)())});c.meta={name:"createThunk",key:"createThunkmaybeEndHuddle",description:"End huddle for channelId if any"};const o=(0,t.Ay)("End last active huddle for channelId if any",(_,d,r)=>{var m;const h=(0,n.getStateForClientStore)(),v=(m=(0,a.Qn)(h))===null||m===void 0?void 0:m.channelId,y=(0,a.Ak)(h);(v&&v===r||y===null&&v&&v!==r)&&_((0,s.A)())});o.meta={name:"createThunk",key:"createThunkmaybeEndLastActiveHuddleByChannelId",description:"End last active huddle for channelId if any"};const i=(0,t.Ay)("End huddle for call Id and channelId if any",(_,d,r)=>{let{channelId:m,callId:h}=r;const v=(0,n.getStateForClientStore)(),{channelId:y,callId:I}=(0,a.Qn)(v)||{};y&&y===m&&I===h&&_((0,s.A)())});i.meta={name:"createThunk",key:"createThunkmaybeEndHuddleByChannelAndCallId",description:"End huddle for call Id and channelId if any"};const l=c},9864164947:(j,p,e)=>{"use strict";e.d(p,{Gt:()=>V,Ho:()=>b,LW:()=>S,Md:()=>D,OF:()=>$,Ux:()=>W,Wf:()=>z,dr:()=>T,fH:()=>E,gA:()=>C,gV:()=>P,qc:()=>k,rV:()=>N,s5:()=>R});var t=e(6998663753),n=e(5950652755),s=e(1031947056),a=e(2778217221),c=e(796111729),o=e(8664881451),i=e(2854284421),l=e(2047021170),_=e(3986753718),d=e(7022928841),r=e(5332875232),m=e(2791814261),h=e(5387083734),v=e(735940183);const y=(0,c.Wo)({label:"HUDDLE-SOUNDS"}),I=[i.o8,i.CZ,i.Ji,i.PV,i.wg,i.sQ,i.o3,i.nP,i.zd,i.qP],T=(0,t.A)(()=>{(0,h.IE)("pre-cache-huddles-sounds",()=>{I.forEach(x=>{y.info(`Adding huddle sound effect to in-memory cache: ${x}`),(0,o.qG)(x)})},{delay:1e3})}),f=(0,n.A)(function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,o.ZH)(x?i.Ji:i.o8,{loop:!1})},7e3,{leading:!0,trailing:!1}),g=(0,n.A)(function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,o.ZH)(x?i.PV:i.CZ,{loop:!1})},7e3,{leading:!0,trailing:!1}),M=(0,n.A)(function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,o.ZH)(x?i.DT:i.o,{loop:!1})},0,{leading:!0,trailing:!1}),A=(0,n.A)((x,Y,ne)=>{let re=Y?i.sQ:i.wg;const _e=.25,G=(0,m.L)(ne),ge=(0,r.DR)(ne);Y&&x==="gong"&&ge&&G&&(re=i.o3);const oe=(0,r.Ey)(ne);Y&&x==="duck"&&oe&&G&&(re=i.nP),(0,o.ZH)(re,{loop:!1,volume:_e})},5e3,{leading:!0,trailing:!1}),O=u(x=>!(0,l.ty)(x,"mute_huddle_sounds"),"canPlayHuddleSound"),D=(0,s.Ay)("Play sound when user joins",(x,Y)=>{O(Y())&&((0,c.Ay)({getState:Y}).info(a.o7,"playSoundOnUserJoin"),f(!1))});D.meta={name:"createThunk",key:"createThunkplaySoundOnUserJoin",description:"Play sound when user joins"};const E=(0,s.Ay)("Play sound when user leaves",(x,Y)=>{O(Y())&&((0,c.Ay)({getState:Y}).info(a.o7,"playSoundOnUserLeft"),g(!1))});E.meta={name:"createThunk",key:"createThunkplaySoundOnUserLeft",description:"Play sound when user leaves"};const C=(0,s.Ay)("Play sound when you join",(x,Y)=>{O(Y())&&((0,c.Ay)({getState:Y}).info(a.o7,"playSoundOnYouJoin"),f(!0))});C.meta={name:"createThunk",key:"createThunkplaySoundOnYouJoin",description:"Play sound when you join"};const S=(0,s.Ay)("Play sound when you leave",(x,Y)=>{O(Y())&&((0,c.Ay)({getState:Y}).info(a.o7,"playSoundOnYouLeft"),g(!0))});S.meta={name:"createThunk",key:"createThunkplaySoundOnYouLeft",description:"Play sound when you leave"};const b=(0,s.Ay)("Play sound when user mutes the mic using keyboard shortcut",(x,Y)=>{O(Y())&&((0,c.Ay)({getState:Y}).info(a.o7,"playSoundOnMicMute"),M(!0))});b.meta={name:"createThunk",key:"createThunkplaySoundOnMicMute",description:"Play sound when user mutes the mic using keyboard shortcut"};const k=(0,s.Ay)("Play sound when user unmutes the mic using keyboard shortcut",(x,Y)=>{O(Y())&&((0,c.Ay)({getState:Y}).info(a.o7,"playSoundOnMicUnmute"),M(!1))});k.meta={name:"createThunk",key:"createThunkplaySoundOnMicUnmute",description:"Play sound when user unmutes the mic using keyboard shortcut"};const W=(0,s.Ay)("Play sound when reaction is received",(x,Y,ne)=>{let{emoji:re,isEffect:_e}=ne;const G=Y();(0,l.ty)(G,"huddles_reactions_play_sound")&&O(G)?((0,c.Ay)({getState:Y}).info(a.o7,"playSoundOnReaction"),A(re,_e,G)):(0,c.Ay)({getState:Y}).info(a.o7,"did not playSoundOnReaction")});W.meta={name:"createThunk",key:"createThunkplaySoundOnReaction",description:"Play sound when reaction is received"};const N=(0,s.Ay)("Plays the huddle invite sound",(x,Y)=>{const ne=Y();(0,_.YX)(ne)||!O(ne)||(0,o.ZH)((0,d.qF)(ne))});N.meta={name:"createThunk",key:"createThunkplayHuddleInviteSound",description:"Plays the huddle invite sound"};const V=(0,s.Ay)("Plays the huddle new requester sound",(x,Y)=>{O(Y())&&((0,c.Ay)({getState:Y}).info(a.o7,"playHuddleNewRequesterSound"),(0,o.ZH)(i.rT,{loop:!1}))});V.meta={name:"createThunk",key:"createThunkplayHuddleNewRequesterSound",description:"Plays the huddle new requester sound"};const R=(0,s.Ay)("Plays the huddle request accepted sound",(x,Y)=>{O(Y())&&((0,c.Ay)({getState:Y}).info(a.o7,"playHuddleNewRequestAcceptedSound"),(0,o.ZH)(i.rT,{loop:!1}))});R.meta={name:"createThunk",key:"createThunkplayHuddleNewRequestAcceptedSound",description:"Plays the huddle request accepted sound"};const P=(0,s.Ay)("Plays the huddle request expired sound",(x,Y)=>{O(Y())&&((0,c.Ay)({getState:Y}).info(a.o7,"playHuddleNewRequestExpiredSound"),(0,o.ZH)(i.xE,{loop:!1}))});P.meta={name:"createThunk",key:"createThunkplayHuddleNewRequestExpiredSound",description:"Plays the huddle request expired sound"};const z=(0,s.Ay)("Plays the huddle recording on sound",(x,Y)=>{if(!(0,r.bM)(Y()))return;const re=(0,v.Yp)();let _e=null;switch(re){case"ja-JP":_e=i.Q6;break;case"es-LA":case"es-ES":_e=i.ll;break;default:_e=i.sH;break}_e&&(0,o.ZH)(_e,{loop:!1})});z.meta={name:"createThunk",key:"createThunkplayHuddleRecordingOnSound",description:"Plays the huddle recording on sound"};const $=(0,s.Ay)("Plays the huddle recording off sound",(x,Y)=>{if(!(0,r.bM)(Y()))return;const re=(0,v.Yp)();let _e=null;switch(re){case"ja-JP":_e=i.uv;break;case"es-LA":case"es-ES":_e=i.PK;break;default:_e=i.IZ;break}_e&&(0,o.ZH)(_e,{loop:!1})});$.meta={name:"createThunk",key:"createThunkplayHuddleRecordingOffSound",description:"Plays the huddle recording off sound"}},4156857608:(j,p,e)=>{"use strict";e.d(p,{a:()=>m});var t=e(1031947056),n=e(6533394955),s=e(4250409994),a=e(7434063642),c=e(8783285437),o=e(6758774099),i=e(1990810649),l=e(387328355),_=e(8872167513),d=e(2709531527),r=e(5795074931);const m=(0,t.Ay)("Dispatch a reaction to the middleware and the current store to notify user has sent a reaction",(h,v,y)=>{let{emoji:I,reactionType:T=i.o.Standard}=y;if(T===i.o.Sticker)h((0,a.Kp)({emoji:I})),(0,n.dispatchForClientStore)((0,s.M4)(I));else{(0,n.dispatchForClientStore)((0,s.nU)({emoji:I,reactionType:T})),h((0,l._x)({peerId:"self",emoji:I,isEmoji:!0,reactionType:T}));const{huddleEventsTrace:g}=(0,_.A)().getAllTraceHandlers();g==null||g.update({name:d.p.REACTION,type:d.G.ONCE,tags:{reactionType:T}})}const f=(0,r.WR)(v());f&&h((0,o.U$)({type:c.v.SEND_REACTION,memberId:f,timestampMs:Date.now(),emoji:I}))});m.meta={name:"createThunk",key:"createThunksendReaction",description:"Dispatch a reaction to the middleware and the current store to notify user has sent a reaction"}},1049642794:(j,p,e)=>{"use strict";e.d(p,{A:()=>A});var t=e(9706240641),n=e.n(t),s=e(8571983633),a=e(1031947056),c=e(6533394955),o=e(8847766420),i=e(2778217221),l=e(4250409994),_=e(6694086724),d=e(5286203919),r=e(571104883),m=e(796111729),h=e(462591818),v=e(7434063642),y=e(6251210828),I=e(387328355),T=e(9365970888),f=e(3065433701),g=e(700984029);const M=(0,a.Ay)("Enable or disable local microphone",function(){var O=(0,t.coroutine)(function*(D,E,C){const S=(0,c.getStateForClientStore)(),b=E(),k=(0,m.Ay)({state:b}),W=(0,T.Hc)(b);if((0,y.RT)(b)||D((0,v.G4)({canShowMutedBanner:!0})),(0,r.y3)()||(yield(0,c.dispatchForClientStore)((0,g.e$)({mediaResourceType:h.mT.MICROPHONE}))),k.info(i.o7,`Set microphone to ${C}`),W&&C){k.warn(i.o7,"Microphone could not be set to enabled as access to the device was blocked"),(0,r.y3)()?D((0,f.CE)({alert:f.vT.NoSystemAudio})):D((0,f.CE)({alert:f.vT.NoBrowserAudioPermission}));return}const{teamId:V}=(0,d.Qn)(S)||{};if(V&&V!==(0,o.ZT)(b)){(0,c.dispatchForTeamId)(V,M(C));return}(0,s.A)(C)||((0,c.dispatchForClientStore)((0,l.I9)(C)),C&&(0,d.wQ)(S)&&D((0,_.e)({clearOnEndedCallback:!0,logContext:"huddle-set-self-microphone"}))),D((0,I.kT)({id:"self",isMicrophoneEnabled:C}))});return function(D,E,C){return O.apply(this,arguments)}}());M.meta={name:"createThunk",key:"createThunksetSelfMicrophone",description:"Enable or disable local microphone"};const A=M},8746998952:(j,p,e)=>{"use strict";e.d(p,{A:()=>A});var t=e(1031947056),n=e(6422693406),s=e(796111729),a=e(9190452268),c=e(1452921056),o=e(5319025363),i=e(6533394955),l=e(6470070112),_=e(5286203919),d=e(5933621899),r=e(9680914051),m=e(8330768070),h=e(6259241484),v=e(716227588),y=e(1655938719),I=e(5332875232),T=e(5881236351),f=e(9712681361);const g=(0,t.Ay)("Join/start huddle, but confirm with shouty rooster modal first",(O,D,E)=>{let{channelId:C,threadTs:S,muted:b,callId:k,forceFocus:W,entryPoint:N,forceConfirmation:V,markTelemeter:R,isMultiDevice:P,isStandaloneHuddle:z}=E;const $=u(()=>{var x;R&&(0,a.Cy)({state:D()}).mark(r.qr),(x=O((0,c.A)({channelId:C,threadTs:S,muted:b,callId:k,forceFocus:W,entryPoint:N,isMultiDevice:P,isStandaloneHuddle:z})))===null||x===void 0||x.catch(Y=>{(0,s.Ay)({getState:D}).error("Could not start huddle",Y)})},"onConfirm");if((0,l.Qj)(D(),C,S)||V){S?O((0,y.iR)({event:{type:h.jo.HUDDLE_STARTED_FROM_THREAD}})).then(()=>{(0,v.Hp)(D(),h.xu.LAUNCH_MODAL)===h.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL?O((0,d.Wx)({channelId:C??"",onConfirm:$})):$()}):O((0,m.Oe)({channelId:C??"",onConfirm:$}));return}$()});g.meta={name:"createThunk",key:"createThunkstartHuddleWithShoutyRooster",description:"Join/start huddle, but confirm with shouty rooster modal first"};const M=(0,t.Ay)("Join/start huddle, but confirm if already in another huddle",(O,D,E)=>{const{channelId:C}=E,S=D(),b=(0,I.pL)(S),k=(0,i.getStateForClientStore)(),W=(0,_.hc)(k),N=(0,_.EG)(k),V=(0,_.$V)(k),R=(0,l.r5)(S,{channelId:C});if(O((0,o.z)()),W&&C!==W&&!V)return O((0,m.Y6)({prevChannelId:W,nextChannelId:C??"",onConfirm:()=>{O(g({...E,markTelemeter:!1}))}}));if(b&&R){O((0,T.$Z)({channelId:C??"",onConfirm:P=>{let{isMultiDevice:z}=P;return O(g({...E,markTelemeter:!1,isMultiDevice:z}))}}));return}return W&&C===W&&N===f.RJ.STARTED?n.S.resolve():O(g({...E,markTelemeter:!0}))});M.meta={name:"createThunk",key:"createThunkstartHuddleWithConfirmation",description:"Join/start huddle, but confirm if already in another huddle"};const A=M},1452921056:(j,p,e)=>{"use strict";e.d(p,{A:()=>ee});var t=e(9706240641),n=e(92886754);let s=null;const a=u(()=>s,"getOpenChannelId"),c=u(J=>{s=J},"setOpenChannelId");var o=e(3134334389),i=e(6023831373),l=e(3051824855),_=e(825587348),d=e(8739505998),r=e(4481313819),m=e(6244014364),h=e(6968387112),v=e(735940183),y=e(3078708518),I=e(4761125736);const T=new v.Ay("huddles");function f(J){let{closeModal:X}=J;const F=(0,i.d4)(y.A),L=(0,i.d4)(Q=>(0,I._Z)(Q,"adoption_instant_slack"))==="treatment";let K,B;if((0,n.yh)())K=T.t("Your browser does not support Huddles"),B=F&&L?T.rt("Unfortunately, Huddles aren\u2019t available in this browser. We recommend switching to <chrome-link>Chrome</chrome-link>.",{},Q=>{let{text:q}=Q;return o.createElement(d.A,{href:"https://www.google.com/chrome"},q)}):T.rt("Unfortunately, Huddles aren\u2019t available in this browser. We recommend downloading the <desktop-link>Slack desktop app</desktop-link>, or you can switch to <chrome-link>Chrome</chrome-link>.",{},Q=>{let{tag:q,text:le}=Q;switch(q){case"desktop-link":return o.createElement(d.A,{href:`https://${(0,h.qF)()}/downloads`},le);case"chrome-link":return o.createElement(d.A,{href:"https://www.google.com/chrome"},le);default:return null}});else if((0,n.WT)())K=T.t("Please update Slack"),B=T.t("Unfortunately, this version of Slack is out of date. Update your Slack app for access to Huddles \u2014 as well as bug fixes and an all-around smoother experience.");else return null;return o.createElement(r.A,{eventId:m.EventId.HUDDLES_ALERT_SHOWN,uiComponentName:m.UiComponentName.HUDDLES_UNSUPPORTED_ALERRT,clogImpression:!0},o.createElement(_.A,{onClose:X,onSubmit:X,showCancelButton:!1,showSubmitButton:!0,title:K,submitButtonText:T.t("OK")},B))}u(f,"HuddleUnsupportedAlert"),f.displayName="HuddleUnsupportedAlert";const g=(0,l.e)(f);var M=e(6422693406),A=e(1031947056),O=e(5881236351),D=e(5378147939),E=e(6758774099),C=e(8847766420),S=e(1289024643),b=e(7304871158);const k=(0,A.Ay)("End active call",(J,X)=>{const F=(0,S.J2)(X());if(F){const L=(0,S.Ms)(F);L&&!L.isClosed()&&(0,b.R)(L,"endActiveCall")}});k.meta={name:"createThunk",key:"createThunkmaybeEndActiveCall",description:"End active call"};var W=e(9640070512),N=e(2527782504),V=e(2832209848),R=e(7843142872),P=e(6533394955),z=e(9548972574),$=e(8935621861),x=e(5332875232),Y=e(5795074931),ne=e(2791814261),re=e(5286203919),_e=e(9712681361),G=e(7723800688),ge=e(56548687),oe=e(6470070112),me=e(5470425448),ue=e(5071086688),ae=e(4250409994),he=e(8872167513);const ce=(0,A.Ay)("Start huddle",function(){var J=(0,t.coroutine)(function*(X,F,L){let{channelId:K,threadTs:B,muted:Q,callId:q,forceFocus:le,entryPoint:Te=_e.su.UNKNOWN,isMultiDevice:Ie,isStandaloneHuddle:De}=L;(0,P.dispatchForClientStore)((0,ae.t2)(!1));const pe=F();if(X(k()),X((0,E.Lm)(!1)),X((0,E.T3)()),(0,n.WT)()||(0,n.yh)())return X(g()),M.S.resolve();X((0,R.g6)({experimentHuddlesDiscoveryCallsGroupTreatment:(0,x.Ms)(pe),interactionType:V.X8.Click})),a()!==K&&X((0,O.Es)({channelId:K??"",open:!1}));const fe=(0,ne.L)(pe),Z=(0,C.ZT)(pe);(0,he.A)().initializeTraces({teamId:Z,isTinySpeck:fe});const se=!!(0,re.gj)((0,P.getStateForClientStore)()),Ae=yield $.A.getInstance().getNearestChimeMediaRegion(Z),{ttiTrace:Ce,huddleEventsTrace:Le}=(0,he.A)().getAllTraceHandlers();Ce.addTTIMetaTags({entryPoint:Te,preferredMediaRegion:Ae,isPrejoin:se,isCreate:!(0,z.Yw)(pe,K)}),Le==null||Le.recordEntryPoint(Te),ue.A.publish({type:me.lx.PreferredMediaRegion,update:{mediaRegionPreferred:Ae}});const Ue=(0,D.A)(),Pe=(0,x.Q3)(pe),He=(0,Y.WR)(pe);return Ue.start(Z,K??"",Q,q,B,Pe,Ie,De).then((0,t.coroutine)(function*(){const Qe=(0,P.getStateForClientStore)(),lt=(0,oe.$t)(pe,{huddleId:q}),qe=(0,oe.kn)(Qe),ct=(0,oe.UE)(Qe);(0,ge.e)({state:pe}).track(m.EventId.CANVAS_EVENT,{contexts:{ui_context:{entry_point:Te,ui_properties:{element_name:G.Hi.CANVAS_JOIN},action:m.UiAction.TOGGLE},calls:ct},...lt,...qe}),X((0,W.H)({focusKey:N.Ay.HUDDLE_SIDEBAR_FOOTER,forceFocus:le})),X((0,O.xb)(!1)),q&&X((0,S.r_)({callId:q,userId:He}))}))});return function(X,F,L){return J.apply(this,arguments)}}());ce.meta={name:"createThunk",key:"createThunkstartHuddle",description:"Start huddle"};const ee=ce},5319025363:(j,p,e)=>{"use strict";e.d(p,{z:()=>a});var t=e(1031947056),n=e(7022928841),s=e(8664881451);const a=(0,t.Ay)("Stop the huddle invite sound",(c,o)=>{(0,s.ds)((0,n.qF)(o()),{logFailure:!1})});a.meta={name:"createThunk",key:"createThunkstopHuddleInviteSound",description:"Stop the huddle invite sound"}},6694086724:(j,p,e)=>{"use strict";e.d(p,{e:()=>d});var t=e(1031947056),n=e(796111729),s=e(4869203191),a=e(4250409994),c=e(6533394955),o=e(5332875232),i=e(5286203919),l=e(7434063642),_=e(6251210828);const d=(0,t.Ay)("Stops huddle lounge music from playing",(r,m,h)=>{let{clearOnEndedCallback:v,logContext:y,isStoppedByUser:I}=h;const T=m(),f=(0,n.Ay)({state:T}),g=(0,o.Q3)(T),M=(0,o.CI)(T),A=(0,_.jr)(T),O=(0,_.K8)(T),D=(0,c.getStateForClientStore)(),E=(0,i.E9)(D);s.Ay.getInstance({experimentHuddlesLoungeMusicPlayerGroupOn:g}).stopMusic({clearOnEndedCallback:v,logger:f,logContext:y}),(0,c.dispatchForClientStore)((0,a.Ag)(!1)),I&&E&&r((0,l.sH)({huddleId:E,hasUserStoppedLoungeMusic:I})),M&&(I||O)&&A&&r((0,l.ju)({stopMusic:!0}))});d.meta={name:"createThunk",key:"createThunkstopHuddleLoungeMusic",description:"Stops huddle lounge music from playing"}},6134475965:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(1031947056),n=e(5378147939),s=e(6533394955),a=e(6694086724),c=e(6855917924),o=e(5332875232),i=e(4250409994),l=e(7366481123);const _=(0,t.Ay)("Stop the active huddle",(r,m)=>{const h=m(),v=(0,o.lV)(h);return(0,s.dispatchForClientStore)((0,i.yi)({})),r((0,c.A)()),r((0,a.e)({clearOnEndedCallback:!0,logContext:"stop-huddle-thunk"})),v&&(0,s.dispatchForClientStore)((0,i.JM)()),r((0,l.LL)(l.vT.HiddenUserJoinedHuddle)),(0,n.A)().stop()});_.meta={name:"createThunk",key:"createThunkstopHuddle",description:"Stop the active huddle"};const d=_},6310192986:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>L,vP:()=>J});var t=e(6313685253),n=e(9137897911),s=e(3398586081),a=e(716022512),c=e(6696292586),o=e(9804928153),i=e(9548972574),l=e(8233775522),_=e(6470070112),d=e(3245843483),r=e(5286203919),m=e(4988306802),h=e(9012396182),v=e(9101533895),y=e(6533394955),I=e(2767624118),T=e(6664301844),f=e(7429662208),g=e(387328355),M=e(1990810649),A=e(9365970888),O=e(6117529990),D=e(8736071954),E=e(610288365),C=e(5332875232),S=e(6251210828),b=e(2465464861),k=e(571104883),W=e(9195837907),N=e(1473609332),V=e(3193155968),R=e(6839188756);function P(K){return K?(0,R.tc)(K)?"free":(0,R.r7)(K)?"enterprise":"pro":"unknown"}u(P,"getTeamTier");var z=e(3677514771),$=e(4724591729),x=e(7645722292),Y=e(4761125736),ne=e(8634352961),re=e(415910655),_e=e(5795074931),G=e(7366481123);const ge=navigator.hardwareConcurrency,oe=navigator.platform,me=(0,k.zS)(),ue=(0,$.b3)(),ae=(0,$.$i)(),he=u(K=>(0,t.A)(K,(B,Q,q)=>{if(q===V.N2)return B;const le=q.split(/-|_/).slice(0,-1).join("-"),Te=(0,n.A)(`windows-${le}-count`);return B[Te]?B[Te]+=1:B[Te]=1,B},{}),"countWindowsByType"),ce=u(K=>{if(!K)return"";let B=K;const Q=/Default -/g;B=K.replace(Q,"");const q=/ *?\([^)]*?\) *?/g;return B=B.replace(q,""),B=B.trim(),B},"scrubDeviceLabelForReporting");let ee;const J=u(()=>ee,"getMostRecentStableTags"),X=(0,s.A)((K,B)=>{let{teamState:Q,clientState:q}=K;var le,Te,Ie,De,pe,fe,Z;const se=(0,r.E9)(q),Ae=(0,r.hc)(q),Ce=(0,O.OV)(Q),Le=(0,C.MJ)(Q),Ue=(0,C.nC)(Q),Pe=(0,C.ZI)(Q),He=(0,C.DP)(Q),Qe=(0,C.JQ)(Q),lt=(0,Y._Z)(Q,"huddles_h264_baseline",!1),qe=(0,Y._Z)(Q,"huddles_h264_baseline_screenshare",!1),ct=(0,C.Cu)(Q),tt=T.zF.sdkVersion,it=(0,_.R8)(Q),Ge=(0,C.Qq)(Q),We=(0,r.sQ)(q),xe=(0,C.kf)(Q),ze=(0,Y._Z)(Q,"huddles_filter_worker",!1),mt=(0,r.l4)(q),pt=(0,z.H7)(Q),It=P(pt);var bt;const gt=(bt=(le=(0,h.getBootedWorkspaces)(q))===null||le===void 0?void 0:le.length)!==null&&bt!==void 0?bt:0,ht=(0,N.Bh)(),Zt=(ht==null||(Te=ht.deviceIdPriorities)===null||Te===void 0||(Ie=Te.camera)===null||Ie===void 0?void 0:Ie.length)||0,rn=(ht==null||(De=ht.deviceIdPriorities)===null||De===void 0||(pe=De.microphone)===null||pe===void 0?void 0:pe.length)||0,zt=(ht==null||(fe=ht.deviceIdPriorities)===null||fe===void 0||(Z=fe.output)===null||Z===void 0?void 0:Z.length)||0,In=(0,v.D5)(Q),cn=(In==null?void 0:In.length)||0,Jt=(0,re.s2)()||{},dn=(0,k.pr)(),sn={teamId:mt,huddleId:se,huddleChannelId:Ae,workspaceCount:gt,chimeSdkVersion:tt,teamTier:It,isPreWarmed:Ge,isPrejoin:We,isHuddlesIncreaseMaxParticipantsEnabled:Ue,isTranscriptAllowed:it,isChimeSdkExpEnabled:Ce,isRtmThrottlingDisabled:xe,isHuddlesLaterEnabled:Le,disableAudioRedundancyGroup:Qe,h264BaselineGroup:lt,h264BaselineScreenshareGroup:qe,isDevicesExpEnabled:Pe,isRtmFilteringEnabled:He,osPlatform:oe,osVersion:me,devicePriorityListCameraCount:Zt,devicePriorityListMicrophoneCount:rn,devicePriorityListSpeakerCount:zt,envIsJsPath:ue,envIsQa:ae,xwsChannelCount:cn,isAv1ScreenshareEnabled:ct,filterWorkerGroup:ze,isCitrixBrowser:dn,...Jt};return ee=sn,sn},(K,B)=>B),L=u(K=>{let{state:B,appMetrics:Q}=K;var q,le,Te,Ie,De,pe,fe,Z;const se=(0,y.getClientStoreInstance)().getState(),Ae=(0,r.cN)(se),Ce=(0,r.E9)(se),Le=`${Ae}${Ce??""}`,Ue=X({teamState:B,clientState:se},Le),{huddleId:Pe,huddleChannelId:He,workspaceCount:Qe,isRtmFilteringEnabled:lt,isRtmThrottlingDisabled:qe}=Ue,ct={},tt=(0,f.e6)(B),it=tt?(0,f.Le)(B,{tab:tt}):{},{primary:Ge,secondary:We,sidebar:xe}=it||{};Object.assign(ct,{viewPrimary:Ge==null?void 0:Ge.viewType,viewSecondary:We==null?void 0:We.viewType,viewSidebar:xe==null?void 0:xe.viewType,viewTab:tt});const ze=(0,A.Hc)(B),mt=(0,A.AZ)(B),pt=(0,A.IO)(B),It=(0,A.JM)(B),bt=(0,A.SR)(B),gt=(0,A.f3)(B),ht=(0,A.aA)(B),Zt={microphoneIsBlocked:ze,microphoneIsAvailable:mt,cameraIsBlocked:bt,cameraIsAvailable:gt,isMicrophoneBluetooth:pt,isSpeakerBluetooth:It,isMicrophoneAndSpeakerOnSameDevice:ht},rn=(0,l.fq)(B),zt={};if(rn){const ot=Object.keys(rn);Object.assign(zt,{windowsTotalOpen:ot.length,windowsOpenTypes:ot.length?ot.join(" "):"",windowsTypeWithFocus:(0,a.A)(rn,Mt=>!!Mt.isFocused),...he(rn)})}const In=(0,_.Fm)(B),cn=In&&In.type===G.vT.AudioOnlyModeRecommended,Jt=(0,b._R)(B),dn=Jt!==null,sn={isTroubleshootingPanelOpen:dn,isAudioOnlyModeEnabled:(0,r.Rv)(se),troubleshootingPanelTab:dn?(0,b.Eh)(B):null,troubleshootingPillPage:(0,b.Wg)(B),troubleshootingEntryPointWas:(0,b.qV)(B),troubleshootingSessionId:dn?`${(0,_e.WR)(B)}${Pe}:${(0,b.$i)(B)}`:null,troubleshootingBannerInView:cn,troubleshootingSource:Jt},Xt=(0,i.UK)(B),xt=(q=(0,A.ql)(B,D.lW.Camera))===null||q===void 0?void 0:q.label,en=(le=(0,A.ql)(B,D.lW.Microphone))===null||le===void 0?void 0:le.label,un=(Te=(0,A.ql)(B,D.Q4))===null||Te===void 0?void 0:Te.label,{isScreenshareEnabled:yn,isHostDrawEnabled:ut,isHostDrawRendererActive:Ot,isCameraEnabled:kt,isMicrophoneEnabled:be,isConnected:Kt}=(0,g.Ng)(B),Vt=!!yn,on=!!kt,pn=(0,g.fU)(B,{id:"self"}),et=(0,g.MY)(B),At=et==="self",Rt=Xt.filter(ot=>ot.isCameraEnabled).length,Ft=(0,I.H)(He),$t=(0,N.Bh)(),vn=on&&($t==null||(Ie=$t.video)===null||Ie===void 0?void 0:Ie.effect)===W.t.Blur,Rn=!!(!($t==null||(De=$t.audio)===null||De===void 0)&&De.enableNoiseSuppression),hn=Rn&&At,gn=on&&($t==null||(pe=$t.video)===null||pe===void 0?void 0:pe.effect)===W.t.Background&&($t==null||(fe=$t.video)===null||fe===void 0?void 0:fe.effectBgKey)!==void 0,Cn=!!et,fn=!!Rt,ke=(0,g.nD)(B).length,je=!!ke,Be=ke+(Vt?1:0),st=Be===2,St=je||Vt,Yt=(0,b.gA)(B),tn=(0,m.VN)(B),at=(0,m.M3)(B),Et=Cn?(Z=Xt.find(ot=>ot.id===et))===null||Z===void 0?void 0:Z.userId:void 0,_t=o.J.document.visibilityState==="visible",Bt={isBackgroundBlurActive:vn,isNoiseSuppressionEnabled:Rn,isNoiseSuppressionActive:hn,isCustomVideoBackgroundActive:gn,isClosedCaptionsEnabled:tn,isSideBySideCaptionsEnabled:at},Qt=qe?void 0:(0,x.V_)(),Fe=qe?void 0:(0,x.nu)(),Xe=lt?(0,ne.zT)():void 0,Me=lt?(0,ne.kB)():void 0,U=(0,ne.oB)(),H={callId:Ce,isMicrophoneEnabled:be,isActiveSpeaker:At,isSomeoneSpeaking:Cn,isSomeoneSharingScreen:St,isVideoEnabledForSomeone:Yt,isSharingScreen:Vt,isHostDrawEnabled:ut,isHostDrawActive:Ot,isSelfVideoEnabled:on,isPeerVideoEnabled:fn,isHuddleWindowVisible:Ft,selectedCamera:ce(xt),selectedMicrophone:ce(en),selectedSpeakers:ce(un),activeSpeakerUserId:Et,isPeerSharingScreen:je,isDualScreenshareActive:st,cpuCount:ge,remotePeerCount:Xt.length,remotePeersWithVideoCount:Rt,peersScreensharingCount:ke,activeScreenshareCount:Be,workspaceCount:Qe,huddleStartTimestamp:Ae,isDisconnected:Kt===!1,isMainWindowVisible:_t,rtmTaskQueueLength:Fe,rtmProcessingDelay:Qt,rtmPercentSkipped:Xe,rtmTopAllowedTypes:Me,rtmRatePerSecond:U};let te={};if(Q){const{cpu:ot,memory:Mt,gpu:jt,thermalState:Ln,speedLimit:xn}=Q,bn=(0,c.A)(ot)?Math.round(ot*ge):void 0,On=(0,c.A)(jt)?Math.round(jt*ge):void 0,{useHwAcceleration:Un}=(0,d.oQe)("settings")||{};te={cpuUseRelative:ot?Math.round(ot):void 0,cpuUse:bn,gpuUse:On,memoryUse:(Mt==null?void 0:Mt.workingSetSize)||void 0,isHardwareAccelerationEnabled:Un,osThermalState:Ln,osSpeedLimit:xn,osIsThrottlingCpu:xn&&xn!==0?xn<30:void 0}}let de={huddleViewMode:(0,S.HH)(B,{huddleId:Pe})};if(Ft){var Re;const ot=(0,S.Ec)(B,{huddleId:Pe}),Mt=(0,S.SC)(B,{huddleId:Pe,surface:ot});de={...de,huddleWindowSurface:ot,huddleWindowFocusedContentType:(pn==null||(Re=pn.item)===null||Re===void 0?void 0:Re.type)||M.cM.None,huddleWindowIsFullscreen:(0,S.g0)(B),huddleWindowIsSelfDrawingEnabled:(0,S.ny)(B),huddleWindowWindowHeight:Mt==null?void 0:Mt.height,huddleWindowWindowWidth:Mt==null?void 0:Mt.width}}const Ye=(0,E.Ay)(),we={batteryIsUsing:Ye.isUsingBatteryPower(),batteryPercentRemaining:Ye.getLevel()};return{...H,...Bt,...te,...de,...ct,...Zt,...we,...sn,...zt,...Ue}},"getHuddleStateSnapshot")},4742719639:(j,p,e)=>{"use strict";e.d(p,{o:()=>c});var t=e(2384831516),n=e(9548972574),s=e(8847766420),a=e(6741408957);const c=(0,t.Mz)((o,i)=>{const l=(0,n.dy)(o);if(l)return l;const _=(0,n.Yw)(o,i);if(!_)return null;const d=(0,s.ZT)(o);return _.name===void 0?((0,a.Ss)().fetchObjectWithId(d,_.id),null):((0,a.GD)().maybeRefetch(d,_.id),_.name)});c.meta={name:"createSelector",key:"createSelectorgetHuddleTopic",description:(o,i)=>{const l=(0,n.dy)(o);if(l)return l;const _=(0,n.Yw)(o,i);if(!_)return null;const d=(0,s.ZT)(o);return _.name===void 0?((0,a.Ss)().fetchObjectWithId(d,_.id),null):((0,a.GD)().maybeRefetch(d,_.id),_.name)}}},1766818988:(j,p,e)=>{"use strict";e.d(p,{I:()=>d,s:()=>_});var t=e(3398586081),n=e(3677514771),s=e(340763958),a=e(1407713935),c=e(6839188756),o=e(6303366080),i=e(9101533895);const l=(0,t.A)((r,m)=>(0,c.tc)(r)&&(m==null?void 0:m.some(h=>(0,s.ju)(h)&&!(0,a.JM)(h)))),_=u(r=>{const m=(0,n.H7)(r),h=(0,i.DM)(r);return l(m,h)},"isHuddlesEnabledForSponsoredTeam"),d=u((r,m)=>{const h=(0,n.H7)(r);return!!m&&(0,c.tc)(h)&&(0,o.dE)(r,m)},"isHuddlesEnabledForSponsoredChannel")},1921074781:(j,p,e)=>{"use strict";e.d(p,{F:()=>i});var t=e(9706240641),n=e.n(t),s=e(8571983633),a=e(6422693406),c=e(796111729),o=e(2778217221);class i{static getInstance(){if(!i.wakeLockManager)try{i.wakeLockManager=new i}catch(_){(0,c.Wo)({label:o.o7}).warn("Error instantiating WakeLockManager,",_.message)}return i.wakeLockManager}static doesInstanceExist(){return!(0,s.A)(i.wakeLockManager)}request(){var _=this;return(0,t.coroutine)(function*(){if(_.wakeLockSentinel)return a.S.resolve();_.wakeLockSentinel=yield _.wakeLock.request("screen").catch(d=>(_.logger.warn("WakeLock acquire failed",d.message),null)),_.addHandlers()})()}release(){var _=this;return(0,t.coroutine)(function*(){if(!_.wakeLockSentinel)return a.S.resolve();_.shouldRemoveVisibilityHandler=!0,yield _.wakeLockSentinel.release(),_.logger.info("WakeLock released")})()}addHandlers(){this.wakeLockSentinel&&(this.wakeLockSentinel.addEventListener("release",this.handleWakeLockReleased),document.addEventListener("visibilitychange",this.handleDocumentVisibilityChange))}cleanupHandlers(){this.wakeLockSentinel&&(this.wakeLockSentinel.removeEventListener("release",this.handleWakeLockReleased),this.wakeLockSentinel=null,this.shouldRemoveVisibilityHandler&&(document.removeEventListener("visibilitychange",this.handleDocumentVisibilityChange),this.shouldRemoveVisibilityHandler=!1))}handleWakeLockReleased(){var _=this;return(0,t.coroutine)(function*(){_.logger.info("WakeLock released by browser"),_.cleanupHandlers()})()}handleDocumentVisibilityChange(){var _=this;return(0,t.coroutine)(function*(){document.visibilityState==="visible"&&_.request()})()}constructor(){if(this.logger=(0,c.Wo)({label:o.o7}),this.shouldRemoveVisibilityHandler=!1,!navigator.wakeLock)throw Error("navigator.wakeLock undefined");this.wakeLock=navigator.wakeLock,this.handleDocumentVisibilityChange=this.handleDocumentVisibilityChange.bind(this),this.handleWakeLockReleased=this.handleWakeLockReleased.bind(this)}}u(i,"WakeLockManager")},8478954380:(j,p,e)=>{"use strict";e.d(p,{Li:()=>h,ML:()=>c,Rt:()=>i,_6:()=>m,aS:()=>l,al:()=>o,bW:()=>d,it:()=>r,qO:()=>_});var t=e(2140362605),n=e(1031947056),s=e(5071086688),a=e(5470425448);const c=(0,t.Ay)("Update the state of the active tab in the huddle troubleshooting panel");c.meta={name:"createAction",key:"createActionupdateTroubleshootingActiveAccordionViewTrace",description:"Update the state of the active tab in the huddle troubleshooting panel"};const o=(0,t.Ay)("Makes troubleshoot panel V2 visible in source view or clears it");o.meta={name:"createAction",key:"createActionsetTroubleshootingSource",description:"Makes troubleshoot panel V2 visible in source view or clears it"};const i=(0,n.Ay)("Set the screen sharing of a peer.",(v,y,I)=>{s.A.publish({type:a.lx.TroubleshootingEntryPoint,update:(I==null?void 0:I.entryPoint)||null}),v(o(I))});i.meta={name:"createThunk",key:"createThunksetTroubleshootingSourceWithTrace",description:"Set the screen sharing of a peer."};const l=(0,t.Ay)("Sets active pill page for tracing.");l.meta={name:"createAction",key:"createActionsetTroubleshootingPillPageTrace",description:"Sets active pill page for tracing."};const _=(0,t.Ay)("Update stable metrics state");_.meta={name:"createAction",key:"createActionupdateStableMetrics",description:"Update stable metrics state"};const d=(0,t.Ay)("Update unstable metrics and warnings state");d.meta={name:"createAction",key:"createActionupdateUnstableMetricsAndWarnings",description:"Update unstable metrics and warnings state"};const r=(0,t.Ay)("Update stable warnings state");r.meta={name:"createAction",key:"createActionupdateStableWarnings",description:"Update stable warnings state"};const m=(0,t.Ay)("Update stable alert state");m.meta={name:"createAction",key:"createActionupdateStableAlerts",description:"Update stable alert state"};const h=(0,t.Ay)("Update unstable alert state");h.meta={name:"createAction",key:"createActionupdateUnstableAlerts",description:"Update unstable alert state"}},2465464861:(j,p,e)=>{"use strict";e.d(p,{$i:()=>d,Eh:()=>i,FP:()=>T,Ku:()=>g,Wf:()=>I,Wg:()=>_,Z8:()=>o,_R:()=>l,cB:()=>v,gA:()=>M,h:()=>y,m:()=>f,qV:()=>r});var t=e(9829579108),n=e(5751973043),s=e(6790819894),a=e(7091646278),c=e(387328355);const o=3,i=(0,t.Ay)(A=>A.huddleTroubleshooting.view.activeAccordionView);i.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPanelActiveAccordionView",description:A=>A.huddleTroubleshooting.view.activeAccordionView};const l=(0,t.Ay)(A=>A.huddleTroubleshooting.view.source);l.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPanelSource",description:A=>A.huddleTroubleshooting.view.source};const _=(0,t.Ay)(A=>A.huddleTroubleshooting.view.activePillPage);_.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPillPageTrace",description:A=>A.huddleTroubleshooting.view.activePillPage};const d=(0,t.Ay)(A=>A.huddleTroubleshooting.view.source?A.huddleTroubleshooting.view.openCounter:-1);d.meta={name:"createSelector",key:"createSelectorgetTroubleshootingSessionCounterIdTrace",description:A=>A.huddleTroubleshooting.view.source?A.huddleTroubleshooting.view.openCounter:-1};const r=(0,t.Ay)(A=>A.huddleTroubleshooting.view.entryPoint);r.meta={name:"createSelector",key:"createSelectorgetTroubleshootingEntryPointTrace",description:A=>A.huddleTroubleshooting.view.entryPoint};const m=(0,t.Ay)(A=>A.huddleTroubleshooting.view.alertCount>=o);m.meta={name:"createSelector",key:"createSelectorshouldDisplaySupportLink",description:A=>A.huddleTroubleshooting.view.alertCount>=o};const h=(0,t.Ay)(A=>A.huddleTroubleshooting.metrics.stable);h.meta={name:"createSelector",key:"createSelectorgetStableMetrics",description:A=>A.huddleTroubleshooting.metrics.stable};const v=(0,t.Ay)(A=>A.huddleTroubleshooting.metrics.unstable);v.meta={name:"createSelector",key:"createSelectorgetUnstableMetrics",description:A=>A.huddleTroubleshooting.metrics.unstable};const y=(0,t.Ay)(A=>A.huddleTroubleshooting.warnings.stable);y.meta={name:"createSelector",key:"createSelectorgetStableWarnings",description:A=>A.huddleTroubleshooting.warnings.stable};const I=(0,t.Ay)(A=>A.huddleTroubleshooting.warnings.unstable);I.meta={name:"createSelector",key:"createSelectorgetUnstableWarnings",description:A=>A.huddleTroubleshooting.warnings.unstable};const T=(0,t.Ay)(A=>A.huddleTroubleshooting.alerts.stable);T.meta={name:"createSelector",key:"createSelectorgetStableAlerts",description:A=>A.huddleTroubleshooting.alerts.stable};const f=(0,t.Ay)(A=>A.huddleTroubleshooting.alerts.unstable);f.meta={name:"createSelector",key:"createSelectorgetUnstableAlerts",description:A=>A.huddleTroubleshooting.alerts.unstable};const g=(0,s.F)(A=>T(A)||n.t0,A=>f(A)||n.t0,A=>y(A)||n.t0,(A,O,D)=>{const{isMicrophoneBlocked:E,isCameraBlocked:C,isDisconnected:S,isMicrophoneNotSendingAudio:b}=A,{isAudioQualityPoor:k,isCpuCompetitionPoor:W,isNetworkQualityPoor:N,networkQualityHealth:V}=O,{isCameraProbablyIphone:R,isSpeakerBluetooth:P}=D,z=!!(k&&N),$=!!(k&&W),x=!!(P&&k||C||E||b||R),Y=!!(z||$||C||E||b||S),ne=k||S?a.bz.Bad:V;return{shouldSurfaceGeneralWarning:Y,shouldSurfaceSystemWarning:$,shouldSurfaceDevicesWarning:x,aggregateNetworkHealth:ne}}),M=(0,s.F)(c.Ng,c.nt,(A,O)=>{const{isCameraEnabled:D}=A;return!!(D||O)})},7091646278:(j,p,e)=>{"use strict";e.d(p,{ML:()=>n,bz:()=>s,pK:()=>t});var t;(function(a){a.Network="network",a.System="system",a.Devices="devices",a.Overview="overview"})(t||(t={}));var n;(function(a){a.EnlargedWindow="EnlargedWindow",a.CompactWindow="CompactWindow",a.MiniPlayer="MiniPlayer"})(n||(n={}));var s;(function(a){a.Good="good",a.Warn="warn",a.Bad="bad"})(s||(s={}))},9943020700:(j,p,e)=>{"use strict";e.d(p,{$W:()=>_,$o:()=>y,Am:()=>v,At:()=>ce,C2:()=>D,CO:()=>r,Cj:()=>I,DB:()=>oe,Dx:()=>E,EX:()=>$,Fm:()=>m,GI:()=>d,IC:()=>W,I_:()=>o,KF:()=>me,KJ:()=>_e,Lu:()=>G,OG:()=>h,Ot:()=>ae,Qk:()=>s,RL:()=>b,TD:()=>he,TW:()=>R,To:()=>C,Tt:()=>Y,U_:()=>T,Uo:()=>ne,VV:()=>i,XB:()=>k,ZE:()=>S,_L:()=>A,_R:()=>P,ab:()=>O,av:()=>ee,d0:()=>x,fg:()=>z,g:()=>f,qD:()=>ue,tK:()=>n,w$:()=>N,wW:()=>re,w_:()=>V,yw:()=>l,zD:()=>M,zl:()=>ge});var t=e(2140362605);const n=(0,t.Ay)("Remove a list");n.meta={name:"createAction",key:"createActionremoveList",description:"Remove a list"};const s=(0,t.Ay)("trigger animation for view");s.meta={name:"createAction",key:"createActiontriggerAnimationForViewId",description:"trigger animation for view"};const a=(0,t.Ay)("Add / update a list column");a.meta={name:"createAction",key:"createActionupsertColumn",description:"Add / update a list column"};const c=(0,t.Ay)("Remove a list column");c.meta={name:"createAction",key:"createActionremoveColumn",description:"Remove a list column"};const o=(0,t.Ay)("Fill column with info data or default value");o.meta={name:"createAction",key:"createActionfillColumnData",description:"Fill column with info data or default value"};const i=(0,t.Ay)("Replace all of a list's records");i.meta={name:"createAction",key:"createActionreplaceRecords",description:"Replace all of a list's records"};const l=(0,t.Ay)("Add / update multiple records");l.meta={name:"createAction",key:"createActionbulkUpsertRecords",description:"Add / update multiple records"};const _=(0,t.Ay)("Add / update a list record");_.meta={name:"createAction",key:"createActionupsertRecord",description:"Add / update a list record"};const d=(0,t.Ay)("Remove a list record");d.meta={name:"createAction",key:"createActionremoveRecord",description:"Remove a list record"};const r=(0,t.Ay)("Add/update a record position in a view");r.meta={name:"createAction",key:"createActionupsertRecordPosition",description:"Add/update a record position in a view"};const m=(0,t.Ay)("Add / update multiple templates");m.meta={name:"createAction",key:"createActionbulkUpsertTemplates",description:"Add / update multiple templates"};const h=(0,t.Ay)("Add / update multiple starter templates");h.meta={name:"createAction",key:"createActionbulkUpsertStarterTemplates",description:"Add / update multiple starter templates"};const v=(0,t.Ay)("Remove a starter template by ID");v.meta={name:"createAction",key:"createActionremoveStarterTemplate",description:"Remove a starter template by ID"};const y=(0,t.Ay)("Set the list's banner message");y.meta={name:"createAction",key:"createActionsetBannerMessageForList",description:"Set the list's banner message"};const I=(0,t.Ay)("Clear the specified type of banner message for this list");I.meta={name:"createAction",key:"createActionclearBannerMessageForList",description:"Clear the specified type of banner message for this list"};const T=(0,t.Ay)("Add / update a list record field");T.meta={name:"createAction",key:"createActionupsertField",description:"Add / update a list record field"};const f=(0,t.Ay)("Add / update a list cell");f.meta={name:"createAction",key:"createActionupsertCell",description:"Add / update a list cell"};const g=(0,t.Ay)("Add / update a workflow for a list");g.meta={name:"createAction",key:"createActionupsertWorkflow",description:"Add / update a workflow for a list"};const M=(0,t.Ay)("Apply an edit action to a list");M.meta={name:"createAction",key:"createActionapplyEditAction",description:"Apply an edit action to a list"};const A=(0,t.Ay)("Clear edit history for a list");A.meta={name:"createAction",key:"createActionclearEditHistory",description:"Clear edit history for a list"};const O=(0,t.Ay)("Update local filters");O.meta={name:"createAction",key:"createActionchangeViewLocalFilters",description:"Update local filters"};const D=(0,t.Ay)("Update local sorts");D.meta={name:"createAction",key:"createActionchangeViewLocalSorts",description:"Update local sorts"};const E=(0,t.Ay)("Update local collapsed grids");E.meta={name:"createAction",key:"createActionchangeViewLocalCollapsedGrids",description:"Update local collapsed grids"};const C=(0,t.Ay)("Update the current viewId set by refine in the active window");C.meta={name:"createAction",key:"createActionsetRefineView",description:"Update the current viewId set by refine in the active window"};const S=(0,t.Ay)("Set filter pill to auto open");S.meta={name:"createAction",key:"createActionsetFilterPillKeyById",description:"Set filter pill to auto open"};const b=(0,t.Ay)("Set group by pill to auto open");b.meta={name:"createAction",key:"createActionsetGroupByPillAutoOpen",description:"Set group by pill to auto open"};const k=(0,t.Ay)("Set search query for list");k.meta={name:"createAction",key:"createActionsetListSearchQuery",description:"Set search query for list"};const W=(0,t.Ay)("Destroy local refinements");W.meta={name:"createAction",key:"createActiondestroyLocalRefinements",description:"Destroy local refinements"};const N=(0,t.Ay)("Add / update my items");N.meta={name:"createAction",key:"createActionupsertMyItems",description:"Add / update my items"};const V=(0,t.Ay)("Add / update a list cell edit");V.meta={name:"createAction",key:"createActionupsertCellEdit",description:"Add / update a list cell edit"};const R=(0,t.Ay)("set refinement pill to auto open in view");R.meta={name:"createAction",key:"createActionsetRefinePillAutoOpenByViewId",description:"set refinement pill to auto open in view"};const P=(0,t.Ay)("Add / update last read timestamp by list ID");P.meta={name:"createAction",key:"createActionupsertLastReadTimestampById",description:"Add / update last read timestamp by list ID"};const z=(0,t.Ay)("Mark records as new to highlight it");z.meta={name:"createAction",key:"createActionhighlightRecordsAsNew",description:"Mark records as new to highlight it"};const $=(0,t.Ay)("Mark record read to unhighlight it");$.meta={name:"createAction",key:"createActionremoveRecordHighlight",description:"Mark record read to unhighlight it"};const x=(0,t.Ay)("Set record as open in flexpane");x.meta={name:"createAction",key:"createActionrecordFlexpaneOpen",description:"Set record as open in flexpane"};const Y=(0,t.Ay)("Set record flexpane closed");Y.meta={name:"createAction",key:"createActionrecordFlexpaneClosed",description:"Set record flexpane closed"};const ne=(0,t.Ay)("Load all recently viewed lists");ne.meta={name:"createAction",key:"createActionloadRecentlyViewedLists",description:"Load all recently viewed lists"};const re=(0,t.Ay)("Add recently opened list to the store");re.meta={name:"createAction",key:"createActionaddToRecentlyViewedLists",description:"Add recently opened list to the store"};const _e=(0,t.Ay)("Remove deleted lists from the store");_e.meta={name:"createAction",key:"createActionremoveFromRecentlyViewedLists",description:"Remove deleted lists from the store"};const G=(0,t.Ay)("Update local field visibility");G.meta={name:"createAction",key:"createActionchangeLocalViewFieldVisibility",description:"Update local field visibility"};const ge=(0,t.Ay)("Update local view type");ge.meta={name:"createAction",key:"createActionchangeLocalViewType",description:"Update local view type"};const oe=(0,t.Ay)("Update local group by");oe.meta={name:"createAction",key:"createActionchangeLocalViewGroupBy",description:"Update local group by"};const me=(0,t.Ay)("Subscribe/unsubscribe a list record");me.meta={name:"createAction",key:"createActionsetRecordIsSubscribed",description:"Subscribe/unsubscribe a list record"};const ue=(0,t.Ay)("Set new view ids for badging");ue.meta={name:"createAction",key:"createActionsetListNewViewBadgingById",description:"Set new view ids for badging"};const ae=(0,t.Ay)("Set highlight column in the item flexpane");ae.meta={name:"createAction",key:"createActionsetHighlightColumnId",description:"Set highlight column in the item flexpane"};const he=(0,t.Ay)("Clear highlight column in the item flexpane");he.meta={name:"createAction",key:"createActionclearHighlightColumnId",description:"Clear highlight column in the item flexpane"};const ce=(0,t.Ay)("Set local views for optimistic updates");ce.meta={name:"createAction",key:"createActionsetLocalViewsByListId",description:"Set local views for optimistic updates"};const ee=(0,t.Ay)("TBD");ee.meta={name:"createAction",key:"createActionrefineEditViewMenuComponentState",description:"TBD"}},4001611198:(j,p,e)=>{"use strict";e.d(p,{ez:()=>i,mY:()=>l});var t=e(3398586081),n=e(8352634987),s=e(574001087),a=e(6533394955);const c=(0,t.A)(_=>new n.Ay({storeKey:"lists",fetch:(d,r)=>(0,a.dispatchForTeamId)(d,(0,s.o)({idsToFetch:r,listId:_})),isEnabled:()=>!0,metricsName:"lists-record-fetcher"})),o=u((_,d,r)=>c(r).markObjectsAsStale(_,d),"markObjectsAsStale"),i=u((_,d,r)=>c(r).maybeRefetch(_,d),"maybeRefetch"),l=u((_,d,r)=>c(r).markObjectsAsFresh(_,d),"markObjectsAsFresh")},4224126550:(j,p,e)=>{"use strict";e.d(p,{w9:()=>fe,uu:()=>Rt,mJ:()=>mt,vg:()=>oe,K0:()=>xe,rm:()=>J,kS:()=>X,E4:()=>ut,Yq:()=>cn,k7:()=>sn,$8:()=>Ot,nh:()=>kt,Jc:()=>Ce,$N:()=>In,zH:()=>rn,lq:()=>Ge,Te:()=>lt,YI:()=>He,dR:()=>Kt,iP:()=>Ft,qC:()=>gn,Ws:()=>hn,hA:()=>At,Tj:()=>gt,jv:()=>ht,vS:()=>_e,PZ:()=>et,I9:()=>Z,DU:()=>ae,C0:()=>Q,C5:()=>Vt,vD:()=>q,Rl:()=>G,jH:()=>un,P6:()=>ge,Mr:()=>ue,bA:()=>Jt,ot:()=>on,Bj:()=>vn,qO:()=>ze,df:()=>be,Cf:()=>Cn,iM:()=>It,dE:()=>bt,EI:()=>ce,kG:()=>F,_H:()=>pn,wx:()=>ee,Xb:()=>pe,nZ:()=>De,X0:()=>pt,hL:()=>en,BO:()=>Zt,K1:()=>Pe,gu:()=>yn,aY:()=>ct,Yb:()=>Rn,XR:()=>tt,WE:()=>it,x2:()=>B,$F:()=>L,yv:()=>K,n7:()=>Qe,iX:()=>me,Es:()=>Xt,mc:()=>fn,TF:()=>$t});var t=e(166097325),n=e(3385422400),s=e(1737183214),a=e(3001769570),c=e(9216332371),o=e(8191156954),i=e(9289081806),l=e(2188787324),_=e(5917710436),d=e(6642124196),r=e(2009641291),m=e(1521013946),h=e(6106034567),v=e(3110884894),y=e(1305633231),I=e(3339229351),T=e(5751973043),f=e(796111729),g=e(6471801899),M=e(9829579108),A=e(8847766420),O=e(4813703725),D=e(8455301571),E=e(937317117),C=e(6415612447),S=e(4001611198),b=e(3398586081),k=e(3037015781),W=e(6533394955),N=e(164394607);const V=(0,b.A)(Oe=>new k.Ay({fetch:(ke,je)=>(0,W.dispatchForTeamId)(ke,(0,N.q5)({idsToFetch:je,listId:Oe})),upsertKnown:(ke,je)=>(0,W.dispatchForTeamId)(ke,(0,N.x3)({records:je,listId:Oe})),upsertNonExistent:(ke,je)=>(0,W.dispatchForTeamId)(ke,(0,N.x3)({records:je,listId:Oe})),isEnabled:()=>!0}));var R=e(5942687316),P=e(7606781622),z=e(2567914105),$=e(9113979368);const x=(0,M.Ay)(Oe=>!(0,$.A)(Oe.overlays));x.meta={name:"createSelector",key:"createSelectorisOverlayOpen",description:Oe=>!(0,$.A)(Oe.overlays)};var Y=e(2047021170);const ne=1e3*60*60*24,re=u(Oe=>Oe.lists,"getListsState"),_e=(0,M.Ay)((Oe,ke)=>(0,E.Lp)(Oe,ke));_e.meta={name:"createSelector",key:"createSelectorgetList",description:(Oe,ke)=>(0,E.Lp)(Oe,ke)};const G=(0,M.Ay)((Oe,ke)=>{var je;return ke&&((je=re(Oe).listsById[ke])===null||je===void 0?void 0:je.records)||T.t0});G.meta={name:"createSelector",key:"createSelectorgetListRecords",description:(Oe,ke)=>{var je;return ke&&((je=re(Oe).listsById[ke])===null||je===void 0?void 0:je.records)||T.t0}};const ge=(0,n.Mz)(_e,Oe=>Oe==null?void 0:Oe.title),oe=(0,M.Ay)(Oe=>re(Oe).clock);oe.meta={name:"createSelector",key:"createSelectorgetClock",description:Oe=>re(Oe).clock};const me=(0,M.Ay)(Oe=>re(Oe).triggerAnimationForViewId);me.meta={name:"createSelector",key:"createSelectorgetViewToAnimate",description:Oe=>re(Oe).triggerAnimationForViewId};const ue=(0,M.Ay)(Oe=>(0,E.Im)(Oe));ue.meta={name:"createSelector",key:"createSelectorgetLists",description:Oe=>(0,E.Im)(Oe)};const ae=(0,M.Ay)((Oe,ke)=>Oe.files[ke].list_limits);ae.meta={name:"createSelector",key:"createSelectorgetListLimits",description:(Oe,ke)=>Oe.files[ke].list_limits};const he=(0,M.Ay)((Oe,ke,je)=>{var Be,st;const St=(0,A.ZT)(Oe);if(!St)return;const Yt=(Be=re(Oe).listsById[ke])===null||Be===void 0||(st=Be.records)===null||st===void 0?void 0:st[je];return Yt?(!(0,_.z7)(Yt)&&!V(ke).isFetchPendingForId(St,je)&&(0,S.ez)(St,je,ke),Yt):V(ke).fetchObjectWithId(St,je)});he.meta={name:"createSelector",key:"createSelectorgetRecordSmart",description:(Oe,ke,je)=>{var Be,st;const St=(0,A.ZT)(Oe);if(!St)return;const Yt=(Be=re(Oe).listsById[ke])===null||Be===void 0||(st=Be.records)===null||st===void 0?void 0:st[je];return Yt?(!(0,_.z7)(Yt)&&!V(ke).isFetchPendingForId(St,je)&&(0,S.ez)(St,je,ke),Yt):V(ke).fetchObjectWithId(St,je)}};const ce=(0,M.Ay)((Oe,ke,je,Be)=>{var st,St;return Be?he(Oe,ke,je):(st=re(Oe).listsById[ke])===null||st===void 0||(St=st.records)===null||St===void 0?void 0:St[je]});ce.meta={name:"createSelector",key:"createSelectorgetRecord",description:(Oe,ke,je,Be)=>{var st,St;return Be?he(Oe,ke,je):(st=re(Oe).listsById[ke])===null||st===void 0||(St=st.records)===null||St===void 0?void 0:St[je]}};const ee=(0,M.Ay)((Oe,ke,je)=>{var Be,st;return(0,y.A)(Oe,(Be=ce(Oe,ke,je))===null||Be===void 0||(st=Be.fields)===null||st===void 0?void 0:st.name)});ee.meta={name:"createSelector",key:"createSelectorgetRecordNameAsPlainText",description:(Oe,ke,je)=>{var Be,st;return(0,y.A)(Oe,(Be=ce(Oe,ke,je))===null||Be===void 0||(st=Be.fields)===null||st===void 0?void 0:st.name)}};const J=(0,M.Ay)((Oe,ke,je)=>{const Be=_e(Oe,ke),st=(0,_.uA)(Be);return st==null?void 0:st.find(St=>St.key===je)});J.meta={name:"createSelector",key:"createSelectorgetColumnByKey",description:(Oe,ke,je)=>{const Be=_e(Oe,ke),st=(0,_.uA)(Be);return st==null?void 0:st.find(St=>St.key===je)}};const X=(0,M.Ay)((Oe,ke,je)=>{var Be;return(Be=J(Oe,ke,je))===null||Be===void 0?void 0:Be.id});X.meta={name:"createSelector",key:"createSelectorgetColumnIdByColumnKey",description:(Oe,ke,je)=>{var Be;return(Be=J(Oe,ke,je))===null||Be===void 0?void 0:Be.id}};const F=(0,M.Ay)((Oe,ke,je)=>{var Be;const st=(Be=re(Oe).listsById[ke])===null||Be===void 0?void 0:Be.records;if(st)return Object.values(st).find(St=>St.threadTs===je)});F.meta={name:"createSelector",key:"createSelectorgetRecordByThreadTs",description:(Oe,ke,je)=>{var Be;const st=(Be=re(Oe).listsById[ke])===null||Be===void 0?void 0:Be.records;if(st)return Object.values(st).find(St=>St.threadTs===je)}};const L=(0,M.Ay)((Oe,ke)=>re(Oe).templatesById[ke]);L.meta={name:"createSelector",key:"createSelectorgetTemplate",description:(Oe,ke)=>re(Oe).templatesById[ke]};const K=(0,M.Ay)(Oe=>re(Oe).templatesById);K.meta={name:"createSelector",key:"createSelectorgetTemplates",description:Oe=>re(Oe).templatesById};const B=(0,M.Ay)(Oe=>re(Oe).starterTemplatesById);B.meta={name:"createSelector",key:"createSelectorgetStarterTemplates",description:Oe=>re(Oe).starterTemplatesById};const Q=(0,M.Ay)(Oe=>{const ke=[],je=ue(Oe);for(const st of je){var Be;const St={id:st.id,title:(Be=st.title)!==null&&Be!==void 0?Be:""};ke.push(St)}return ke});Q.meta={name:"createSelector",key:"createSelectorgetListMentions",description:Oe=>{const ke=[],je=ue(Oe);for(const st of je){var Be;const St={id:st.id,title:(Be=st.title)!==null&&Be!==void 0?Be:""};ke.push(St)}return ke}};const q=(0,M.Ay)((Oe,ke)=>{const je=ue(Oe),Be=(0,g.V3)(ke);if(!Be)return[];const{listTitle:st}=Be,St=(0,g.xL)(je,st);if(!St)return[];const Yt=(0,E.Lp)(Oe,St.id),tn=le(St),at=[],Et=G(Oe,St.id);for(const Fe of Object.values(Et??{})){var _t,Bt;const Xe=(Bt=Fe==null||(_t=Fe.fields)===null||_t===void 0?void 0:_t[tn])!==null&&Bt!==void 0?Bt:[];var Qt;const Me={id:Fe.id,name:(0,y.A)(Oe,Xe),blocks:Xe,listId:Yt.id,listTitle:(Qt=Yt.title)!==null&&Qt!==void 0?Qt:""};at.push(Me)}return at});q.meta={name:"createSelector",key:"createSelectorgetListRecordMentions",description:(Oe,ke)=>{const je=ue(Oe),Be=(0,g.V3)(ke);if(!Be)return[];const{listTitle:st}=Be,St=(0,g.xL)(je,st);if(!St)return[];const Yt=(0,E.Lp)(Oe,St.id),tn=le(St),at=[],Et=G(Oe,St.id);for(const Fe of Object.values(Et??{})){var _t,Bt;const Xe=(Bt=Fe==null||(_t=Fe.fields)===null||_t===void 0?void 0:_t[tn])!==null&&Bt!==void 0?Bt:[];var Qt;const Me={id:Fe.id,name:(0,y.A)(Oe,Xe),blocks:Xe,listId:Yt.id,listTitle:(Qt=Yt.title)!==null&&Qt!==void 0?Qt:""};at.push(Me)}return at}};function le(Oe){let ke;const je=(0,_.uA)(Oe);for(const Be of je??[])if(Be.type==="text"&&(ke||(ke=Be),Be.key.toUpperCase()==="NAME"))return Be.key;return ke?ke.key:"name"}u(le,"findColumnKeyForMention");const Te=(0,M.Ay)(Oe=>(0,d.Fh)(Oe)?!!(0,Y.ty)(Oe,"seen_onboarding_lists"):!0);Te.meta={name:"createSelector",key:"createSelectorhasSeenOnboardingLists",description:Oe=>(0,d.Fh)(Oe)?!!(0,Y.ty)(Oe,"seen_onboarding_lists"):!0};const Ie=(0,M.Ay)((Oe,ke)=>{var je;const Be=_e(Oe,ke);return(je=(0,_.uA)(Be))===null||je===void 0?void 0:je.find(st=>(st==null?void 0:st.key)==="name")});Ie.meta={name:"createSelector",key:"createSelectorgetListDefaultColumn",description:(Oe,ke)=>{var je;const Be=_e(Oe,ke);return(je=(0,_.uA)(Be))===null||je===void 0?void 0:je.find(st=>(st==null?void 0:st.key)==="name")}};const De=(0,M.Ay)((Oe,ke,je)=>{const Be=ce(Oe,ke,je),st=(0,C.Y)(Oe,ke),St=(0,i.FB)(st),Yt=Be!=null&&Be.threadTs?(0,P.Ld)(Oe,St,Be.threadTs):void 0;var tn;return(tn=Yt==null?void 0:Yt.reply_count)!==null&&tn!==void 0?tn:null});De.meta={name:"createSelector",key:"createSelectorgetRecordThreadReplyCount",description:(Oe,ke,je)=>{const Be=ce(Oe,ke,je),st=(0,C.Y)(Oe,ke),St=(0,i.FB)(st),Yt=Be!=null&&Be.threadTs?(0,P.Ld)(Oe,St,Be.threadTs):void 0;var tn;return(tn=Yt==null?void 0:Yt.reply_count)!==null&&tn!==void 0?tn:null}};const pe=(0,M.Ay)((Oe,ke,je)=>{const Be=ce(Oe,ke,je),st=(0,C.Y)(Oe,ke),St=(0,i.FB)(st),Yt=Be!=null&&Be.threadTs?(0,P.Ld)(Oe,St,Be.threadTs):void 0,tn=(0,v.Iu)(St,Be==null?void 0:Be.threadTs),at=Yt&&tn?(0,D.r7)(Oe,tn)||{timestamps:[],reachedStart:!0}:null,Et=Yt?(0,c.Nh)(Oe,St,(at==null?void 0:at.timestamps)||[])||(Yt==null?void 0:Yt.ts):"";var _t;const Bt=(_t=Yt==null?void 0:Yt._subscribed)!==null&&_t!==void 0?_t:!1;var Qt;const Fe=(Qt=Yt==null?void 0:Yt._last_read)!==null&&Qt!==void 0?Qt:"0";return Bt?Et>Fe:!1});pe.meta={name:"createSelector",key:"createSelectorgetRecordThreadIsUnread",description:(Oe,ke,je)=>{const Be=ce(Oe,ke,je),st=(0,C.Y)(Oe,ke),St=(0,i.FB)(st),Yt=Be!=null&&Be.threadTs?(0,P.Ld)(Oe,St,Be.threadTs):void 0,tn=(0,v.Iu)(St,Be==null?void 0:Be.threadTs),at=Yt&&tn?(0,D.r7)(Oe,tn)||{timestamps:[],reachedStart:!0}:null,Et=Yt?(0,c.Nh)(Oe,St,(at==null?void 0:at.timestamps)||[])||(Yt==null?void 0:Yt.ts):"";var _t;const Bt=(_t=Yt==null?void 0:Yt._subscribed)!==null&&_t!==void 0?_t:!1;var Qt;const Fe=(Qt=Yt==null?void 0:Yt._last_read)!==null&&Qt!==void 0?Qt:"0";return Bt?Et>Fe:!1}};const fe=(0,M.Ay)((Oe,ke)=>re(Oe).listBannerMessagesbyId[ke]);fe.meta={name:"createSelector",key:"createSelectorgetBannerMessagesForList",description:(Oe,ke)=>re(Oe).listBannerMessagesbyId[ke]};const Z=(0,M.Ay)((Oe,ke)=>{const je=(0,r.A)(Oe),Be=(0,E.Lp)(Oe,ke);return!Be||!Be.access||!(0,l.mW)(Be)||!je});Z.meta={name:"createSelector",key:"createSelectorgetListIsViewOnly",description:(Oe,ke)=>{const je=(0,r.A)(Oe),Be=(0,E.Lp)(Oe,ke);return!Be||!Be.access||!(0,l.mW)(Be)||!je}};const se=(0,M.Ay)(Oe=>(0,A.ZT)(Oe)==="T024BE7LD");se.meta={name:"createSelector",key:"createSelectoronTinySpeckDevOrg",description:Oe=>(0,A.ZT)(Oe)==="T024BE7LD"};const Ae=(0,M.Ay)(Oe=>(0,A.jV)(Oe)===I.uh);Ae.meta={name:"createSelector",key:"createSelectoronTinySpeckOrg",description:Oe=>(0,A.jV)(Oe)===I.uh};const Ce=(0,M.Ay)((Oe,ke)=>re(Oe).historyById[ke]);Ce.meta={name:"createSelector",key:"createSelectorgetEditHistory",description:(Oe,ke)=>re(Oe).historyById[ke]};const Le=(0,M.Ay)((Oe,ke)=>{const je=_e(Oe,ke),Be=G(Oe,ke);if(!je||!Be)return null;let st="";for(const Yt of Object.values(Be)){Yt.position&&st<Yt.position&&(st=Yt.position);var St;for(const tn of Object.values((St=Yt.viewPositions)!==null&&St!==void 0?St:{}))st<tn&&(st=tn)}return st||null});Le.meta={name:"createSelector",key:"createSelectorgetBiggestRecordPosition",description:(Oe,ke)=>{const je=_e(Oe,ke),Be=G(Oe,ke);if(!je||!Be)return null;let st="";for(const Yt of Object.values(Be)){Yt.position&&st<Yt.position&&(st=Yt.position);var St;for(const tn of Object.values((St=Yt.viewPositions)!==null&&St!==void 0?St:{}))st<tn&&(st=tn)}return st||null}};const Ue=(0,M.Ay)((Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localFiltersById[Be]});Ue.meta={name:"createSelector",key:"createSelectorgetLocalFiltersByViewId",description:(Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localFiltersById[Be]}};const Pe=(0,O.ow)((Oe,ke,je)=>{const Be=_e(Oe,ke),st=(0,_.Qq)(Be,je);var St;const Yt=(St=st==null?void 0:st.filters)!==null&&St!==void 0?St:[];var tn;return Yt.concat((tn=st==null?void 0:st.infoColumnFilters)!==null&&tn!==void 0?tn:[])}),He=(0,n.Mz)(Ue,Pe,(Oe,ke)=>Oe?Oe.length!==(ke==null?void 0:ke.length)?!0:!(0,a.bw)(Oe,ke,"columnId"):!1),Qe=(0,n.Mz)(Ue,Pe,(Oe,ke)=>{if(!Oe)return new Set;const je=new Map(ke==null?void 0:ke.map(st=>[st.key,st])),Be=Oe.filter(st=>(0,a.bV)(st,je)).map(st=>st.key);return new Set(Be)}),lt=(0,n.Mz)(Ue,Pe,(Oe,ke)=>Oe!==void 0?Oe:ke||[]),qe=(0,M.Ay)((Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localSortsById[Be]});qe.meta={name:"createSelector",key:"createSelectorgetLocalSortsByViewId",description:(Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localSortsById[Be]}};const ct=(0,O.ow)((Oe,ke,je)=>{const Be=_e(Oe,ke),st=(0,_.Qq)(Be,je);return(st==null?void 0:st.sorts)||[]}),tt=(0,n.Mz)(qe,ct,(Oe,ke)=>Oe!==void 0?Oe:ke||[]),it=(0,n.Mz)(qe,ct,(Oe,ke)=>Oe?Oe.length!==(ke==null?void 0:ke.length)?!0:!(0,a.bw)(Oe,ke,"columnId"):!1),Ge=(0,M.Ay)((Oe,ke,je)=>{var Be,st;const St=(0,R.zZ)({listId:ke,viewId:je});return(Be=re(Oe))===null||Be===void 0||(st=Be.filterPillKeyById)===null||st===void 0?void 0:st[St]});Ge.meta={name:"createSelector",key:"createSelectorgetFilterPillKeyById",description:(Oe,ke,je)=>{var Be,st;const St=(0,R.zZ)({listId:ke,viewId:je});return(Be=re(Oe))===null||Be===void 0||(st=Be.filterPillKeyById)===null||st===void 0?void 0:st[St]}};const We=(0,M.Ay)(Oe=>{var ke;return(ke=re(Oe))===null||ke===void 0?void 0:ke.groupByPillAutoOpen});We.meta={name:"createSelector",key:"createSelectorgetGroupByPillAutoOpen",description:Oe=>{var ke;return(ke=re(Oe))===null||ke===void 0?void 0:ke.groupByPillAutoOpen}};const xe=(0,M.Ay)((Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localCollapsedGridsById[Be]});xe.meta={name:"createSelector",key:"createSelectorgetCollapsedGridsByViewId",description:(Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localCollapsedGridsById[Be]}};const ze=(0,M.Ay)(Oe=>re(Oe).myItemMap);ze.meta={name:"createSelector",key:"createSelectorgetMyItemMap",description:Oe=>re(Oe).myItemMap};const mt=(0,M.Ay)((Oe,ke)=>re(Oe).editActivityMap[ke]);mt.meta={name:"createSelector",key:"createSelectorgetCellEditByTimestamp",description:(Oe,ke)=>re(Oe).editActivityMap[ke]};const pt=(0,M.Ay)((Oe,ke)=>{var je;return(je=re(Oe).refinePillAutoOpenByViewId)===null||je===void 0?void 0:je[ke]});pt.meta={name:"createSelector",key:"createSelectorgetRefinePillAutoOpenByViewId",description:(Oe,ke)=>{var je;return(je=re(Oe).refinePillAutoOpenByViewId)===null||je===void 0?void 0:je[ke]}};const It=(0,M.Ay)(Oe=>re(Oe).recentlyViewedLists);It.meta={name:"createSelector",key:"createSelectorgetRecentlyViewedLists",description:Oe=>re(Oe).recentlyViewedLists};const bt=(0,M.Ay)(Oe=>re(Oe).recentlyViewedListsLastLoadedMs);bt.meta={name:"createSelector",key:"createSelectorgetRecentlyViewedListsLastLoadedMs",description:Oe=>re(Oe).recentlyViewedListsLastLoadedMs};const gt=(0,M.Ay)(Oe=>{const ke=bt(Oe);return ke?Date.now()-ke>ne:!0});gt.meta={name:"createSelector",key:"createSelectorgetIsRecentlyViewedListsExpired",description:Oe=>{const ke=bt(Oe);return ke?Date.now()-ke>ne:!0}};const ht=(0,M.Ay)((Oe,ke)=>{var je;return(je=re(Oe).lastReadTimestampById)===null||je===void 0?void 0:je[ke]});ht.meta={name:"createSelector",key:"createSelectorgetLastReadTimestampByListId",description:(Oe,ke)=>{var je;return(je=re(Oe).lastReadTimestampById)===null||je===void 0?void 0:je[ke]}};const Zt=(0,n.Mz)((Oe,ke,je)=>{const Be=_e(Oe,ke);return(0,_.cv)(Be,je)},Oe=>{var ke;return Oe==null||(ke=Oe.columns)===null||ke===void 0?void 0:ke.reduce((Be,st)=>{let{key:St,visible:Yt}=st;return Yt!==void 0&&(Be[St]=Yt),Be},{})}),rn=(0,M.Ay)((Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je}),st=re(Oe).localFieldVisibilityByViewId[Be];if(!st)return;const St=Zt(Oe,ke,je);return Object.entries(st).filter(tn=>{let[at,Et]=tn;return Et!==(St==null?void 0:St[at])}).map(tn=>{let[at,Et]=tn;return{key:at,visible:Et}})});rn.meta={name:"createSelector",key:"createSelectorgetFieldsThatChangedVisibility",description:(Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je}),st=re(Oe).localFieldVisibilityByViewId[Be];if(!st)return;const St=Zt(Oe,ke,je);return Object.entries(st).filter(tn=>{let[at,Et]=tn;return Et!==(St==null?void 0:St[at])}).map(tn=>{let[at,Et]=tn;return{key:at,visible:Et}})}};const zt=(0,O.eI)((Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je}),st=re(Oe).localFieldVisibilityByViewId[Be],St=Zt(Oe,ke,je);return st&&{...St,...st}}),In=(0,n.Mz)(zt,Zt,(Oe,ke)=>Oe?!(0,t.A)(Oe,ke):!1),cn=(0,M.Ay)((Oe,ke,je)=>{const Be=zt(Oe,ke,je);return Be||Zt(Oe,ke,je)});cn.meta={name:"createSelector",key:"createSelectorgetCurrentViewFieldVisibilityByViewId",description:(Oe,ke,je)=>{const Be=zt(Oe,ke,je);return Be||Zt(Oe,ke,je)}};const Jt=(0,M.Ay)((Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localViewTypeByViewId[Be]});Jt.meta={name:"createSelector",key:"createSelectorgetLocalViewType",description:(Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localViewTypeByViewId[Be]}};const dn=(0,O.ow)((Oe,ke,je)=>{const Be=_e(Oe,ke),st=(0,_.Qq)(Be,je);return st==null?void 0:st.type}),sn=(0,M.Ay)((Oe,ke,je)=>{const Be=Jt(Oe,ke,je);return Be!==void 0?Be:dn(Oe,ke,je)});sn.meta={name:"createSelector",key:"createSelectorgetCurrentViewTypeByViewId",description:(Oe,ke,je)=>{const Be=Jt(Oe,ke,je);return Be!==void 0?Be:dn(Oe,ke,je)}};const Xt=(0,M.Ay)((Oe,ke,je)=>{const Be=Jt(Oe,ke,je);if(!Be)return!1;const st=dn(Oe,ke,je);return Be!==st});Xt.meta={name:"createSelector",key:"createSelectorgetViewTypeHasChanged",description:(Oe,ke,je)=>{const Be=Jt(Oe,ke,je);if(!Be)return!1;const st=dn(Oe,ke,je);return Be!==st}};const xt=(0,M.Ay)((Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localGroupByViewId[Be]});xt.meta={name:"createSelector",key:"createSelectorgetLocalGroupBy",description:(Oe,ke,je)=>{const Be=(0,R.zZ)({listId:ke,viewId:je});return re(Oe).localGroupByViewId[Be]}};const en=(0,M.Ay)((Oe,ke)=>{var je;return(je=re(Oe))===null||je===void 0?void 0:je.refineViewByWindowId[ke]});en.meta={name:"createSelector",key:"createSelectorgetRefineView",description:(Oe,ke)=>{var je;return(je=re(Oe))===null||je===void 0?void 0:je.refineViewByWindowId[ke]}};const un=(0,M.Ay)((Oe,ke)=>{var je;return(je=re(Oe))===null||je===void 0?void 0:je.listSearchQueriesByWindowId[ke]});un.meta={name:"createSelector",key:"createSelectorgetListSearchQuery",description:(Oe,ke)=>{var je;return(je=re(Oe))===null||je===void 0?void 0:je.listSearchQueriesByWindowId[ke]}};const yn=(0,O.ow)((Oe,ke,je)=>{const Be=_e(Oe,ke),st=(0,_.Qq)(Be,je);return st==null?void 0:st.grouping}),ut=(0,M.Ay)((Oe,ke,je)=>{const Be=xt(Oe,ke,je);return Be||yn(Oe,ke,je)});ut.meta={name:"createSelector",key:"createSelectorgetCurrentGroupByViewId",description:(Oe,ke,je)=>{const Be=xt(Oe,ke,je);return Be||yn(Oe,ke,je)}};const Ot=(0,M.Ay)(Oe=>(0,Y.ty)(Oe,"lists_add_to_list_default_list"));Ot.meta={name:"createSelector",key:"createSelectorgetDefaultListForAddToList",description:Oe=>(0,Y.ty)(Oe,"lists_add_to_list_default_list")};const kt=(0,n.Mz)(Oe=>(0,Y.ty)(Oe,"lists_default_view"),Oe=>{try{return JSON.parse(Oe||"{}")}catch(ke){return(0,f.Ay)({label:"lists"}).error("error parsing default lists view prefs",ke),{}}}),be=(0,n.Mz)(Oe=>(0,Y.ty)(Oe,"lists_my_items"),function(){let Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"{}";const ke={starred:{},completed:{}};let je={};try{je=JSON.parse(Oe)}catch(Be){(0,f.Ay)({label:"lists"}).error("error parsing my items prefs",Be)}return{...ke,...je}}),Kt=(0,M.Ay)((Oe,ke,je)=>{const Be=xt(Oe,ke,je);if(!Be)return!1;const st=yn(Oe,ke,je);return(Be==null?void 0:Be.groupBy)!==(st==null?void 0:st.groupBy)});Kt.meta={name:"createSelector",key:"createSelectorgetHasGroupByChanged",description:(Oe,ke,je)=>{const Be=xt(Oe,ke,je);if(!Be)return!1;const st=yn(Oe,ke,je);return(Be==null?void 0:Be.groupBy)!==(st==null?void 0:st.groupBy)}};const Vt=(0,M.Ay)((Oe,ke)=>re(Oe).listNewViewBadgingById[ke]);Vt.meta={name:"createSelector",key:"createSelectorgetListNewViewBadgingById",description:(Oe,ke)=>re(Oe).listNewViewBadgingById[ke]};const on=(0,M.Ay)((Oe,ke)=>{var je;return((je=re(Oe).localViewsByListId)===null||je===void 0?void 0:je[ke])||T.Ml});on.meta={name:"createSelector",key:"createSelectorgetLocalViewsByListId",description:(Oe,ke)=>{var je;return((je=re(Oe).localViewsByListId)===null||je===void 0?void 0:je[ke])||T.Ml}};const pn=(0,M.Ay)((Oe,ke,je)=>{var Be,st,St;return(Be=re(Oe).listsById[ke])===null||Be===void 0||(st=Be.records)===null||st===void 0||(St=st[je])===null||St===void 0?void 0:St.isSubscribed});pn.meta={name:"createSelector",key:"createSelectorgetRecordIsSubscribed",description:(Oe,ke,je)=>{var Be,st,St;return(Be=re(Oe).listsById[ke])===null||Be===void 0||(st=Be.records)===null||st===void 0||(St=st[je])===null||St===void 0?void 0:St.isSubscribed}};const et=(0,M.Ay)((Oe,ke)=>{var je;if(Z(Oe,ke))return!1;const Be=(0,E.Lp)(Oe,ke);if(!Be||!((je=Be.editors)===null||je===void 0)&&je.length)return!1;const st=Ce(Oe,ke);if(st!=null&&st.undoStack.length||st!=null&&st.redoStack.length)return!1;const St=G(Oe,ke);for(const Yt of Object.values(St??{}))if(String(Yt.dateCreated)!==Yt.updatedTimestamp)return!1;return!0});et.meta={name:"createSelector",key:"createSelectorgetListIsEditableAndNeverUpdated",description:(Oe,ke)=>{var je;if(Z(Oe,ke))return!1;const Be=(0,E.Lp)(Oe,ke);if(!Be||!((je=Be.editors)===null||je===void 0)&&je.length)return!1;const st=Ce(Oe,ke);if(st!=null&&st.undoStack.length||st!=null&&st.redoStack.length)return!1;const St=G(Oe,ke);for(const Yt of Object.values(St??{}))if(String(Yt.dateCreated)!==Yt.updatedTimestamp)return!1;return!0}};const At=(0,M.Ay)(Oe=>(0,Y.ty)(Oe,"lists_template_sidebar_collapsed"));At.meta={name:"createSelector",key:"createSelectorgetIsListsTemplateSidebarCollapsedUserPref",description:Oe=>(0,Y.ty)(Oe,"lists_template_sidebar_collapsed")};const Rt=(0,M.Ay)((Oe,ke)=>{const je=_e(Oe,ke);return et(Oe,ke)&&(0,_.BS)(je)});Rt.meta={name:"createSelector",key:"createSelectorgetCanShowListEmptyStateSidebar",description:(Oe,ke)=>{const je=_e(Oe,ke);return et(Oe,ke)&&(0,_.BS)(je)}};const Ft=(0,M.Ay)((Oe,ke,je,Be)=>{const st=(0,R.pe)(ke,je,Be);return re(Oe).highlightColumnMap[st]});Ft.meta={name:"createSelector",key:"createSelectorgetHighlightColumnId",description:(Oe,ke,je,Be)=>{const st=(0,R.pe)(ke,je,Be);return re(Oe).highlightColumnMap[st]}};const $t=(0,M.Ay)(Oe=>(0,z.oY)(Oe)||x(Oe));$t.meta={name:"createSelector",key:"createSelectorisModalOrOverlayOpen",description:Oe=>(0,z.oY)(Oe)||x(Oe)};const vn=(0,M.Ay)((Oe,ke)=>{if(!ke)return null;const je=(0,m.$N)(Oe,ke);return!je||je.type!==m.im.MESSAGE||!je.channelId||!je.ts?null:(0,P.Ld)(Oe,je.channelId,je.ts)});vn.meta={name:"createSelector",key:"createSelectorgetMessageFromCellValue",description:(Oe,ke)=>{if(!ke)return null;const je=(0,m.$N)(Oe,ke);return!je||je.type!==m.im.MESSAGE||!je.channelId||!je.ts?null:(0,P.Ld)(Oe,je.channelId,je.ts)}};const Rn=(0,M.Ay)((Oe,ke)=>(0,d.Is)(Oe)&&(0,s.I)(Oe)&&!Z(Oe,ke));Rn.meta={name:"createSelector",key:"createSelectorgetShowListAutomationsEntrypoint",description:(Oe,ke)=>(0,d.Is)(Oe)&&(0,s.I)(Oe)&&!Z(Oe,ke)};const hn=(0,M.Ay)(Oe=>{const ke=(0,h.p)(Oe),je=ke===h.v.IMAGES_ONLY,Be=ke===h.v.DISABLE_ALL;return je||Be});hn.meta={name:"createSelector",key:"createSelectorgetIsListCsvImportDisabled",description:Oe=>{const ke=(0,h.p)(Oe),je=ke===h.v.IMAGES_ONLY,Be=ke===h.v.DISABLE_ALL;return je||Be}};const gn=(0,M.Ay)((Oe,ke,je)=>{const Be=(0,R.o2)(ke,je),st=re(Oe).refineComponentsState[Be];var St;return(St=st==null?void 0:st.isEditViewMenuOpen)!==null&&St!==void 0?St:!1});gn.meta={name:"createSelector",key:"createSelectorgetIsEditViewMenuComponentOpen",description:(Oe,ke,je)=>{const Be=(0,R.o2)(ke,je),st=re(Oe).refineComponentsState[Be];var St;return(St=st==null?void 0:st.isEditViewMenuOpen)!==null&&St!==void 0?St:!1}};const Cn=(0,M.Ay)((Oe,ke)=>{var je;if(!(0,d.tl)(Oe))return;const Be=(0,Y.N$)(Oe);var st;const St=(st=Be==null?void 0:Be[0])!==null&&st!==void 0?st:void 0,Yt=_e(Oe,St),tn=(0,_.uA)(Yt),at=G(Oe,St),Et=tn==null?void 0:tn.find(Bt=>Bt.type===o.$.Reference);return!Et||!at?null:(je=Object.values(at))===null||je===void 0?void 0:je.find(Bt=>{var Qt,Fe,Xe;const Me=Bt==null||(Qt=Bt.fields)===null||Qt===void 0?void 0:Qt[Et.key];return(Me==null||(Fe=Me.message)===null||Fe===void 0?void 0:Fe.channel_id)===ke.channel&&(Me==null||(Xe=Me.message)===null||Xe===void 0?void 0:Xe.ts)===ke.ts})});Cn.meta={name:"createSelector",key:"createSelectorgetMyTasksItem",description:(Oe,ke)=>{var je;if(!(0,d.tl)(Oe))return;const Be=(0,Y.N$)(Oe);var st;const St=(st=Be==null?void 0:Be[0])!==null&&st!==void 0?st:void 0,Yt=_e(Oe,St),tn=(0,_.uA)(Yt),at=G(Oe,St),Et=tn==null?void 0:tn.find(Bt=>Bt.type===o.$.Reference);return!Et||!at?null:(je=Object.values(at))===null||je===void 0?void 0:je.find(Bt=>{var Qt,Fe,Xe;const Me=Bt==null||(Qt=Bt.fields)===null||Qt===void 0?void 0:Qt[Et.key];return(Me==null||(Fe=Me.message)===null||Fe===void 0?void 0:Fe.channel_id)===ke.channel&&(Me==null||(Xe=Me.message)===null||Xe===void 0?void 0:Xe.ts)===ke.ts})}};const fn=(0,M.Ay)((Oe,ke)=>(0,d.tl)(Oe)&&!!Cn(Oe,ke));fn.meta={name:"createSelector",key:"createSelectorisAddedToMyTasks",description:(Oe,ke)=>(0,d.tl)(Oe)&&!!Cn(Oe,ke)}},4525672255:(j,p,e)=>{"use strict";e.d(p,{E:()=>d});var t=e(9706240641),n=e.n(t),s=e(5513050121),a=e(6554371307),c=e(197186845),o=e(796111729),i=e(1031947056),l=e(2947836378),_=e(832411022);const d=(0,i.Ay)("Fetch lists",function(){var r=(0,t.coroutine)(function*(m,h){let{query:v,sort:y,reason:I}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{const T=yield v?m((0,a.yz)({query:`type:list ${v}`,includeShares:!0,reason:I||"get-lists",bypassCache:!0})):m((0,c.jQ)({module:"files",query:"type:list",sort:y||_.VU.lastRead,reason:I||"get-lists",context:s.Oj.ListsDefault})).then(f=>{let{items:g}=f;return g});m((0,l.b)({files:T}))}catch(T){(0,o.Ay)({label:"lists"}).error("error fetching lists",T)}});return function(m,h){return r.apply(this,arguments)}}());d.meta={name:"createThunk",key:"createThunkfetchLists",description:"Fetch lists"}},164394607:(j,p,e)=>{"use strict";e.d(p,{Kd:()=>h,ky:()=>I,q5:()=>v,x3:()=>y});var t=e(9706240641),n=e.n(t),s=e(2694081143),a=e(2927826522),c=e(796111729),o=e(6471801899),i=e(1031947056),l=e(8847766420),_=e(5795074931),d=e(9943020700),r=e(4001611198),m=e(9629831899);const h=(0,i.Ay)("Fetch list and list record",function(){var T=(0,t.coroutine)(function*(f,g,M){let{listId:A,id:O,includeIsSubscribed:D,reason:E="get-list-record"}=M;try{const R=yield f((0,s.T)({listId:A,id:O,includeIsSubscribed:D,reason:E}));f((0,m.y)({lists:[R.list]}));const P=(0,a.t)(R.record,100);var C,S,b,k,W,N;const z=(0,o.jG)({id:P.id,fields:P.fields,dateCreated:P.dateCreated,createdBy:(C=P.createdBy)!==null&&C!==void 0?C:"",threadTs:P.threadTs,position:(S=P.position)!==null&&S!==void 0?S:"",updatedTimestamp:(b=P.updatedTimestamp)!==null&&b!==void 0?b:"",updatedBy:(k=P.updatedBy)!==null&&k!==void 0?k:"",viewPositions:(W=P.viewPositions)!==null&&W!==void 0?W:{},platformRefs:(N=P.platformRefs)!==null&&N!==void 0?N:{},isSubscribed:P.isSubscribed,saved:R.record.saved,savedFields:R.record.saved_fields});return f((0,d.$W)({listId:A,record:z})),null}catch(R){var V;return(0,c.Ay)({label:"lists"}).error("error fetching list record",R),{error:R==null||(V=R.data)===null||V===void 0?void 0:V.error}}});return function(f,g,M){return T.apply(this,arguments)}}());h.meta={name:"createThunk",key:"createThunkfetchRecord",description:"Fetch list and list record"};const v=(0,i.Ay)("Fetch and upsert list record",function(){var T=(0,t.coroutine)(function*(f,g,M){let{idsToFetch:A,listId:O}=M;return n().all(A.map(function(){var D=(0,t.coroutine)(function*(E){try{const V=(yield f((0,s.T)({listId:O,id:E,includeIsSubscribed:!0,reason:"get-list-record"}))).record;var C,S,b,k,W;return(0,o.jG)({id:V.id,fields:V.fields,dateCreated:V.date_created,createdBy:(C=V.created_by)!==null&&C!==void 0?C:"",threadTs:(S=V.thread_ts)!==null&&S!==void 0?S:"",position:(b=V.position)!==null&&b!==void 0?b:"",updatedTimestamp:(k=V.updated_timestamp)!==null&&k!==void 0?k:"",updatedBy:(W=V.updated_by)!==null&&W!==void 0?W:"",viewPositions:V.view_positions,platformRefs:V.platform_refs,saved:V.saved,savedFields:V.saved_fields})}catch(N){return N.data.error==="record_deleted"?{id:E,isDeleted:!0}:{id:E,isNonExistent:!0}}});return function(E){return D.apply(this,arguments)}}()))});return function(f,g,M){return T.apply(this,arguments)}}());v.meta={name:"createThunk",key:"createThunkfetchRecordsForList",description:"Fetch and upsert list record"};const y=(0,i.Ay)("Format and upsert list records",(T,f,g)=>{let{records:M,listId:A}=g;T((0,d.yw)({listId:A,records:M}));const O=(0,_.WR)(f());T((0,d.fg)({listId:A,currentUserId:O}));const D=M.map(C=>C.id),E=(0,l.ZT)(f())||"";(0,r.mY)(E,D,A)});y.meta={name:"createThunk",key:"createThunkupsertRecordsForList",description:"Format and upsert list records"};const I=(0,i.Ay)("Fetch and upsert list record",function(){var T=(0,t.coroutine)(function*(f,g,M){let{idsToFetch:A,listId:O}=M;return f(v({idsToFetch:A,listId:O})).then(D=>{f(y({records:D,listId:O}))})});return function(f,g,M){return T.apply(this,arguments)}}());I.meta={name:"createThunk",key:"createThunkfetchAndUpsertRecordsForList",description:"Fetch and upsert list record"}},9174292896:(j,p,e)=>{"use strict";e.d(p,{D:()=>l});var t=e(9706240641),n=e.n(t),s=e(444762595),a=e(796111729),c=e(6471801899),o=e(1031947056),i=e(9943020700);const l=(0,o.Ay)("Fetch list records",function(){var _=(0,t.coroutine)(function*(d,r,m){let{listId:h,currentUserId:v}=m;try{const I=(yield d((0,s.z)({listId:h,reason:"get-list-records"}))).records.map(T=>{var f,g,M,A,O;return(0,c.jG)({id:T.id,fields:T.fields,dateCreated:T.date_created,createdBy:(f=T.created_by)!==null&&f!==void 0?f:"",threadTs:(g=T.thread_ts)!==null&&g!==void 0?g:"",position:(M=T.position)!==null&&M!==void 0?M:"",updatedTimestamp:(A=T.updated_timestamp)!==null&&A!==void 0?A:"",updatedBy:(O=T.updated_by)!==null&&O!==void 0?O:"",viewPositions:T.view_positions,platformRefs:T.platform_refs,saved:T.saved,savedFields:T.saved_fields})});d((0,i.VV)({listId:h,records:I})),d((0,i.fg)({listId:h,currentUserId:v}))}catch(y){(0,a.Ay)({label:"lists"}).error("error fetching list records",y)}});return function(d,r,m){return _.apply(this,arguments)}}());l.meta={name:"createThunk",key:"createThunkfetchRecords",description:"Fetch list records"}},9629831899:(j,p,e)=>{"use strict";e.d(p,{y:()=>o});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(3237710044),c=e(937317117);const o=(0,s.Ay)("Fetch list",function(){var i=(0,t.coroutine)(function*(l,_,d){let{lists:r}=d;r.forEach(m=>{const h=(0,c.Lp)(_(),m.id);l((0,a.sM)({...h,...m}))})});return function(l,_,d){return i.apply(this,arguments)}}());o.meta={name:"createThunk",key:"createThunkupsertLocalListFiles",description:"Fetch list"}},5942687316:(j,p,e)=>{"use strict";e.d(p,{o2:()=>s,pe:()=>n,zZ:()=>t});const t=u(a=>{let{listId:c,viewId:o}=a;return`${c}-${o}`},"getLocalRefinementsId"),n=u((a,c,o)=>`${a.toString()}-${c}-${o}`,"makeHighlightStoreKey"),s=u((a,c)=>`${a.toString()}-${c}`,"makeRefineComponentStateStoreKey")},2938177083:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(796111729),n=e(1031947056),s=e(6422693406),a=e(6259241484),c=e(716227588),o=e(3603672985),i=e(7003004874),l=e(3707193570);const _=(0,n.Ay)("record a dismissal on a megaphone notification",(r,m,h)=>{const{spaceName:v,...y}=h,I=h.channelId||h.entityId,T=(0,t.Wo)();if(!v)return T.error(a.cK,"spaceName is required when dispatching recordAndClearNotification."),s.S.resolve();const f=m(),g=(0,c.Hp)(f,v,I);return(0,l.Ay)(I)&&h.entityType==="team"?r((0,o.pn)({spaceName:v,channelId:I})):r((0,o.KT)({spaceName:v,channelId:I})),r((0,i.A)({notificationName:g,...y}))});_.meta={name:"createThunk",key:"createThunkrecordAndClearNotification",description:"record a dismissal on a megaphone notification"};const d=_},7003004874:(j,p,e)=>{"use strict";e.d(p,{A:()=>r,j:()=>d});var t=e(796111729),n=e(1031947056),s=e(8760181906),a=e(6485511687),c=e(6422693406),o=e(6259241484);const i=(0,n.Ay)("record an event (e.g. dismissal, impression, etc) on a megaphone notification",(m,h,v)=>{const{notificationName:y,...I}=v,T=(0,t.Wo)();var f;const g=(f=v.reason)!==null&&f!==void 0?f:"record-notification-event";if(!y)return T.error(o.cK,"notificationName is required when dispatching recordNotificationEvent."),c.S.resolve();const M={notification:y,...I,reason:g};return m((0,a.a)(M))});i.meta={name:"createThunk",key:"createThunkrecordNotificationEvent",description:"record an event (e.g. dismissal, impression, etc) on a megaphone notification"};const l=6e4,_=!1,d=(0,s.A)(i,l,_,void 0,!1),r=i},7487228876:(j,p,e)=>{"use strict";e.d(p,{h:()=>a});var t=e(796111729),n=e(6259241484);const s=(0,t.Wo)(),a=u(c=>{let{spaceName:o,notificationName:i}=c;i&&s.error(n.cK,`${i} is not a recognized notification name for space ${o}.`)},"maybeLogUnrecognizedNotification")},2374999399:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(9829579108),n=e(8276911661);const s=(0,t.Ay)((c,o)=>(0,n.nv)(c,o).profile.statusEmojiDisplayInfo||void 0);s.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusEmojiDisplayInfo",description:(c,o)=>(0,n.nv)(c,o).profile.statusEmojiDisplayInfo||void 0};const a=s},1345620242:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(9829579108),n=e(8170643398),s=e(8276911661),a=e(3428522109);const c=(0,t.Ay)((i,l)=>{const _=(0,s.nv)(i,l),{status_text_canonical:d}=_.profile;return d?(0,n.UM)(_):(0,a.K)(i,_)?0:(0,n.UM)(_)});c.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusExpiration",description:(i,l)=>{const _=(0,s.nv)(i,l),{status_text_canonical:d}=_.profile;return d?(0,n.UM)(_):(0,a.K)(i,_)?0:(0,n.UM)(_)}};const o=c},2072540560:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(8086952004),n=e(9829579108),s=e(8276911661),a=e(8956918631),c=e(3428522109);const o=(0,n.Ay)((l,_)=>{const d=(0,s.nv)(l,_),{status_text_canonical:r}=d.profile;if(r){let m;const h=(0,a.A)(l);return h&&(m=((0,t.A)(h,v=>v.canonical===r)||{}).text||null),r.toLowerCase()==="on a call"&&(m=s.Ru.t("On a call")),m||d.profile.status_text||""}return(0,c.K)(l,d)?s.Ru.t("In a huddle"):d.profile.status_text||""});o.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusText",description:(l,_)=>{const d=(0,s.nv)(l,_),{status_text_canonical:r}=d.profile;if(r){let m;const h=(0,a.A)(l);return h&&(m=((0,t.A)(h,v=>v.canonical===r)||{}).text||null),r.toLowerCase()==="on a call"&&(m=s.Ru.t("On a call")),m||d.profile.status_text||""}return(0,c.K)(l,d)?s.Ru.t("In a huddle"):d.profile.status_text||""}};const i=o},1651628626:(j,p,e)=>{"use strict";e.d(p,{c:()=>o});var t=e(5797466484),n=e(1031947056),s=e(6422693406),a=e(6333950786),c=e(9291336591);const o=(0,n.Ay)("Submits changes to the current user\u2019s profile",(i,l,_)=>{let{profile:d,reason:r="submitProfileChange"}=_;if(!(0,t.A)(d))return s.S.resolve();const m={...d},h=l();return d.status_text&&(m.status_text=(0,a.A)(h,d.status_text)),i((0,c.n)({profile:JSON.stringify(m),reason:r}))});o.meta={name:"createThunk",key:"createThunksubmitProfileChange",description:"Submits changes to the current user\u2019s profile"}},7651407571:(j,p,e)=>{"use strict";e.d(p,{p:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Upsert fetched ordered membership list for channel");n.meta={name:"createAction",key:"createActionupsertFetchedChannelOrderedMemberList",description:"Upsert fetched ordered membership list for channel"}},8188087967:(j,p,e)=>{"use strict";e.d(p,{GD:()=>v,Nd:()=>I});var t=e(3398586081),n=e(8352634987),s=e(6422693406),a=e(6533394955),c=e(3339229351),o=e(7058495549),i=e(8847766420),l=e(7651407571),_=e(1031947056),d=e(8760181906),r=e(4949104520),m=e(796111729);const h=1e4,v=(0,t.A)(()=>new n.Ay({storeKey:"membershipOrdered",fetch:(f,g)=>s.S.all(g.map(M=>(0,a.dispatchForTeamId)(f,T({channelId:M,count:c.Ql})))),isEnabled:()=>!0,metricsName:"member-list"})),y=(0,_.Ay)("marks objects as stale via CFM for Membership List",function(f,g){let{teamId:M,channelId:A}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v().markObjectsAsStale(M,[A])});y.meta={name:"createThunk",key:"createThunkmarkObjectsAsStale",description:"marks objects as stale via CFM for Membership List"};const I=(0,d.A)(y,(0,r.A)(h,0,.5)),T=(0,_.Ay)("Fetches top members for the channel",function(f,g){let{channelId:M,count:A}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(0,o.ds)(f,g,M,A).then(O=>{const D=(0,i.ZT)(g());if(!D){(0,m.Wo)().info("MOS","No teamId found");return}return v().markObjectsAsFresh(D,[M]),f((0,l.p)({channelId:M,memberList:O}))})});T.meta={name:"createThunk",key:"createThunkfetchAndUpsertFirstNMembersForChannel",description:"Fetches top members for the channel"}},1794107122:(j,p,e)=>{"use strict";e.d(p,{$:()=>c});var t=e(9829579108),n=e(8847766420),s=e(8188087967),a=e(5751973043);const c=(0,t.Ay)((o,i)=>{const l=(0,n.ZT)(o);return l&&(0,s.GD)().maybeRefetch(l,i),o&&o.membershipOrdered&&o.membershipOrdered[i]?o.membershipOrdered[i]:a.Ml});c.meta={name:"createSelector",key:"createSelectorgetMemberListForChannel",description:(o,i)=>{const l=(0,n.ZT)(o);return l&&(0,s.GD)().maybeRefetch(l,i),o&&o.membershipOrdered&&o.membershipOrdered[i]?o.membershipOrdered[i]:a.Ml}}},6562711329:(j,p,e)=>{"use strict";e.d(p,{z:()=>h});var t=e(6422693406),n=e(7823346015),s=e(8403493408),a=e(1031947056),c=e(1407713935),o=e(8798294025),i=e(6533394955),l=e(5795074931),_=e(8847766420),d=e(9101533895),r=e(3730613858),m=e(2480881364);const h=(0,a.Ay)("Gets the channel membership for a set of users and returns a promise when the store is updated accordingly",function(v,y){let{channelId:I,userIds:T}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=y(),[g,M]=(0,n.A)(T,D=>(0,r.wr)(f,I,D)),A=(0,d.OL)(f,I);if((0,c.LI)(A)){const D=(0,o.e)(A),E=(0,l.WR)(f);(0,s.A)(M,D,E),T!=null&&T.includes(D)&&g.push(D),T!=null&&T.includes(E)&&g.push(E)}const O={};return g.forEach(D=>{O[D]=(0,r.Ql)(f,I,D)}),M.length?(0,i.dispatchForTeamId)((0,_.ZT)(f),(0,m.R)({channelId:I,userIds:M})).then(D=>D&&D.payload&&D.payload.membershipInfo?{membershipInfo:{...D.payload.membershipInfo,...O}}:{membershipInfo:O}):t.S.resolve({membershipInfo:O})});h.meta={name:"createThunk",key:"createThunkgetChannelMembershipInfoForUsers",description:"Gets the channel membership for a set of users and returns a promise when the store is updated accordingly"}},3051870320:(j,p,e)=>{"use strict";e.d(p,{m:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Updates latest message activity for a specified type");n.meta={name:"createAction",key:"createActionupdateMessageActivity",description:"Updates latest message activity for a specified type"}},5345057011:(j,p,e)=>{"use strict";e.d(p,{T:()=>n,s:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Add a placeholder to the store");n.meta={name:"createAction",key:"createActionaddPlaceholder",description:"Add a placeholder to the store"};const s=(0,t.Ay)("Remove a placeholder from the store by client_msg_id");s.meta={name:"createAction",key:"createActionremovePlaceholder",description:"Remove a placeholder from the store by client_msg_id"}},6445408916:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(9829579108);const n=(0,t.Ay)(s=>s==null?void 0:s.messagePlaceholders);n.meta={name:"createSelector",key:"createSelectorgetAllPlaceholders",description:s=>s==null?void 0:s.messagePlaceholders}},5774398667:(j,p,e)=>{"use strict";e.d(p,{I:()=>s});var t=e(9829579108),n=e(6445408916);const s=(0,t.Ay)((a,c)=>{var o;return(o=(0,n.A)(a))===null||o===void 0?void 0:o[c]});s.meta={name:"createSelector",key:"createSelectorgetPlaceholderByClientMsgId",description:(a,c)=>{var o;return(o=(0,n.A)(a))===null||o===void 0?void 0:o[c]}}},6347367879:(j,p,e)=>{"use strict";e.d(p,{o:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Start delete animation for a message");n.meta={name:"createAction",key:"createActionanimateDeleteMessage",description:"Start delete animation for a message"}},1508337910:(j,p,e)=>{"use strict";e.d(p,{h:()=>c});var t=e(9829579108),n=e(5751973043);const s=(0,t.Ay)(i=>i==null?void 0:i.messagesMeta);s.meta={name:"createSelector",key:"createSelectorgetMessagesMetaState",description:i=>i==null?void 0:i.messagesMeta};var a;const c=(0,t.Ay)((i,l)=>{let{channelId:_,ts:d}=l;var r,m;return(a=(r=s(i))===null||r===void 0||(m=r[_])===null||m===void 0?void 0:m[d])!==null&&a!==void 0?a:n.t0});var o;c.meta={name:"createSelector",key:"createSelectorgetMessageMetaData",description:(i,l)=>{let{channelId:_,ts:d}=l;var r,m;return(o=(r=s(i))===null||r===void 0||(m=r[_])===null||m===void 0?void 0:m[d])!==null&&o!==void 0?o:n.t0}}},3521202413:(j,p,e)=>{"use strict";e.d(p,{j:()=>f});var t=e(1031947056),n=e(7606781622),s=e(9101533895),a=e(8289365785),c=e(8726613433),o=e(8233775522),i=e(6347367879),l=e(9121476043),_=e(9629572172),d=e(4096483543),r=e(3110884894);const m=(0,t.Ay)("Checks if the message is in an active view before doing the animation",function(g,M){let{channelId:A,ts:O,threadTs:D}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments.length>3?arguments[3]:void 0;const C=M(),{getViewSet:S}=E(_.U),b=!(0,d.A)()||(0,c.T2)(C),k=(0,o.ko)(C)&&b,W=(0,c.Qm)(C);var N;const{primary:V,secondary:R}=(N=S(C))!==null&&N!==void 0?N:{},P=V==null?void 0:V.id,z=R==null?void 0:R.id,$=u(()=>g((0,i.o)({channelId:A,ts:O})),"doAnimation");if(k){if(D&&(z==="convo"||z==="thread")&&(0,a.A)(W)===(0,r.Iu)(A,D)){$();return}if(P===A){$();return}}g((0,l.A)({channelId:A,ts:O,threadTs:D}))});m.meta={name:"createThunk",key:"createThunkmaybeAnimateDeleteMessage",description:"Checks if the message is in an active view before doing the animation"};const h=m;var v=e(1484767411),y=e(2986581466),I=e(1508337910),T=e(796111729);const f=(0,t.Ay)("Delete a message by channel ID and timestamp",function(g,M){let{deleted_ts:A,channel:O,_from_evt_log:D,previous_message:E}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var C;const S=M(),b=(0,T.Ay)({state:S});if(!A){b.error("Error in messageDeleted: no deleted_ts");return}const k=(0,s.gT)(S,O)&&(0,s.OL)(S,O);if(!k){b.error(`Unknown channelId: ${O}`);return}if((C=(0,I.h)(S,{channelId:O,ts:A}))===null||C===void 0?void 0:C.isDeleting)return;(0,y.yj)(k,{deleted_ts:A});const N=!1,R=(0,n.Ld)(S,O,A,N)||E;g(R?h({channelId:O,ts:A,threadTs:R.thread_ts,fromEvtLog:D}):(0,l.A)({channelId:O,ts:A})),g((0,v.o)({channelId:O,ts:A}))});f.meta={name:"createThunk",key:"createThunksetMessageDeleted",description:"Delete a message by channel ID and timestamp"}},5688490863:(j,p,e)=>{"use strict";e.d(p,{J_:()=>l,PB:()=>d,Up:()=>c,Zs:()=>i,iN:()=>a,m3:()=>o,oh:()=>m,qA:()=>r,qj:()=>h,yw:()=>_});var t=e(5751973043),n=e(9829579108);const s=(0,n.Ay)(v=>v.modernSelling.salesListViews);s.meta={name:"createSelector",key:"createSelectorgetSalesListViews",description:v=>v.modernSelling.salesListViews};const a=(0,n.Ay)(v=>s(v).listViewActiveObjectOption);a.meta={name:"createSelector",key:"createSelectorgetListViewActiveObjectOption",description:v=>s(v).listViewActiveObjectOption};const c=(0,n.Ay)(v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.listViewSearchResults});c.meta={name:"createSelector",key:"createSelectorgetListViewSearchResults",description:v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.listViewSearchResults}};const o=(0,n.Ay)((v,y)=>{var I;const T=(I=s(v))===null||I===void 0?void 0:I.listViewIdSearchResultsMap;return(T==null?void 0:T[y])||t.t0});o.meta={name:"createSelector",key:"createSelectorgetListViewObjectMapByOrg",description:(v,y)=>{var I;const T=(I=s(v))===null||I===void 0?void 0:I.listViewIdSearchResultsMap;return(T==null?void 0:T[y])||t.t0}};const i=(0,n.Ay)((v,y,I)=>o(v,y)[I]||t.Ml);i.meta={name:"createSelector",key:"createSelectorgetListViewIdsByOrgAndObject",description:(v,y,I)=>o(v,y)[I]||t.Ml};const l=(0,n.Ay)(v=>{var y;return((y=s(v))===null||y===void 0?void 0:y.listViewActiveSearchResultIds)||t.Ml});l.meta={name:"createSelector",key:"createSelectorgetListViewActiveSearchResultIds",description:v=>{var y;return((y=s(v))===null||y===void 0?void 0:y.listViewActiveSearchResultIds)||t.Ml}};const _=(0,n.Ay)(v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.listViewActiveSearchQuery});_.meta={name:"createSelector",key:"createSelectorgetListViewActiveSearchQuery",description:v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.listViewActiveSearchQuery}};const d=(0,n.Ay)(v=>s(v).shouldShowOpportunitiesListViewBanner);d.meta={name:"createSelector",key:"createSelectorgetShouldShowOpportunitiesListViewBanner",description:v=>s(v).shouldShowOpportunitiesListViewBanner};const r=(0,n.Ay)(v=>{var y;return((y=s(v))===null||y===void 0?void 0:y.adminSuggestedListViews)||t.Ml});r.meta={name:"createSelector",key:"createSelectorgetAdminSuggestedListViewsForSidebar",description:v=>{var y;return((y=s(v))===null||y===void 0?void 0:y.adminSuggestedListViews)||t.Ml}};const m=(0,n.Ay)(v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.areAdminSuggestedListViewsForSidebarFresh});m.meta={name:"createSelector",key:"createSelectorgetAreAdminSuggestedListViewsForSidebarFresh",description:v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.areAdminSuggestedListViewsForSidebarFresh}};const h=(0,n.Ay)(v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.adminConfiguredObjects});h.meta={name:"createSelector",key:"createSelectorgetAdminConfiguredObjects",description:v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.adminConfiguredObjects}}},8149648525:(j,p,e)=>{"use strict";e.d(p,{b:()=>l});var t=e(5104468117),n=e(8956161330),s=e(1031947056),a=e(7146087658),c=e(5688490863),o=e(1670025826),i=e(146149780);const l=(0,s.Ay)("Search list views by query",(_,d,r)=>{let{isFullSearch:m=!1,objectType:h,query:v,salesforceOrgId:y}=r;const I=d(),T=m?t.Iq:t.TD,f=(0,n.Qb)(I);let g;return h?g=[h]:g=(0,c.qj)(I).map(A=>A.sobject_api_name),_((0,o.R)({limit:T,listviewObjectScopes:g,query:v,sobjects:[{sobjectApiName:"ListView",fields:["Name","LastViewedDate","SobjectType"]}],salesforceOrgId:y,reason:"list_view_search"})).then(M=>{let{records:A}=M;const O=A.map(E=>({id:E.value,label:E.label,lastViewedDate:f?void 0:E.extras.LastViewedDate,objectType:E.extras.SobjectType,salesforceOrgId:y})),D=_((0,i.x)({listViews:O,salesforceOrgId:y}));return m&&_((0,a.hA)(D)),O})});l.meta={name:"createThunk",key:"createThunksearchListViews",description:"Search list views by query"}},146149780:(j,p,e)=>{"use strict";e.d(p,{x:()=>s});var t=e(1031947056),n=e(7146087658);const s=(0,t.Ay)("Upsert list views fetched by search or other API",(a,c,o)=>{let{listViews:i,salesforceOrgId:l}=o;const _=[],d={},r={};return i.forEach(m=>{const h=m.id,v=m.objectType;d[h]={id:h,label:m.label,lastViewedDate:m.lastViewedDate,objectType:v,salesforceOrgId:l},r[v]=r[v]||[],r[v].push(h),_.push(h)}),a((0,n.TO)(d)),a((0,n.KT)({salesforceOrgId:l,listViewObjMap:r})),_});s.meta={name:"createThunk",key:"createThunkupsertFetchedListViews",description:"Upsert list views fetched by search or other API"}},2413251042:(j,p,e)=>{"use strict";e.d(p,{p$:()=>n,rB:()=>s,x8:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Set whether inverted sidebar was enabled before starting BBM");n.meta={name:"createAction",key:"createActionsetInvertedSidebarInternal",description:"Set whether inverted sidebar was enabled before starting BBM"};const s=(0,t.Ay)("Set whether peeks were enabled on mouse enter before starting BBM");s.meta={name:"createAction",key:"createActionsetPeeksEnabledOnMouseEnterInternal",description:"Set whether peeks were enabled on mouse enter before starting BBM"};const a=(0,t.Ay)("Set what zoom value was set in the client before starting BBM");a.meta={name:"createAction",key:"createActionsetZoomInternal",description:"Set what zoom value was set in the client before starting BBM"}},6303140164:(j,p,e)=>{"use strict";e.d(p,{UY:()=>s,Vb:()=>t,_J:()=>n});const t="slack-inverted-sidebar-initial-setting",n="slack-peeks-enabled-on-mouse-enter-initial-setting",s="slack-zoom-initial-setting"},1838435986:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(4423055085),n=e(1185969935),s=e(2140362605);const a=(0,s.Ay)("NOOP");a.meta={name:"createAction",key:"createActionnoopAction",description:"NOOP"};var c=e(6533394955),o=e(7893624209);const i=0,_=(0,n.Ay)({},i,{storeKey:"noop",persistenceEnabled:!1}).on(a,d=>d+1);(0,t.ul)("dispatchNoop",()=>{(0,c.dispatchForTeamId)((0,o.oI)(),a())})},4309043566:(j,p,e)=>{"use strict";e.d(p,{l:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Relay observed overlays state from OverlaysContextProvider to Redux");n.meta={name:"createAction",key:"createActionrelayOverlays",description:"Relay observed overlays state from OverlaysContextProvider to Redux"}},3180420025:(j,p,e)=>{"use strict";e.d(p,{y:()=>o});var t=e(2384831516),n=e(4309043566),s=e(5751973043);const a=s.t0,c={persistenceEnabled:!1,storeKey:"overlays"},o=(0,t.vy)({},a,c).on(n.l,(i,l)=>l)},983004675:(j,p,e)=>{"use strict";e.d(p,{OI:()=>o,cg:()=>s,kK:()=>n,ot:()=>c,us:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Sets the current loading state for a channel");n.meta={name:"createAction",key:"createActionsetLoadingState",description:"Sets the current loading state for a channel"};const s=(0,t.Ay)("Adds pinned item identifiers for files and messages to list of pinned items");s.meta={name:"createAction",key:"createActionaddPinnedItems",description:"Adds pinned item identifiers for files and messages to list of pinned items"};const a=(0,t.Ay)("Remove an item from the pinned items list for a channel");a.meta={name:"createAction",key:"createActionremovePinnedItem",description:"Remove an item from the pinned items list for a channel"};const c=(0,t.Ay)("Clears the existing pinned items for a channel and sets the loading state");c.meta={name:"createAction",key:"createActionclearPinnedItems",description:"Clears the existing pinned items for a channel and sets the loading state"};const o=(0,t.Ay)("Sets the scrollTop value of the pins popover so that it can be opened to the same spot again");o.meta={name:"createAction",key:"createActionsetPopoverScrollTop",description:"Sets the scrollTop value of the pins popover so that it can be opened to the same spot again"}},4352409775:(j,p,e)=>{"use strict";e.d(p,{G:()=>i});var t=e(3398586081),n=e(6422693406),s=e(8352634987),a=e(6533394955),c=e(983004675),o=e(6701536972);const i=(0,t.A)(()=>new s.Ay({storeKey:"pins",fetch:(l,_)=>n.S.map(_,d=>((0,a.dispatchForTeamId)(l,(0,c.ot)({channelId:d})),(0,a.dispatchForTeamId)(l,(0,o.b)({channelId:d})))),isEnabled:()=>!0,metricsName:"pins"}))},6247263305:(j,p,e)=>{"use strict";e.d(p,{R:()=>t,b:()=>n});const t={FILE:"file",FILE_COMMENT:"file_comment",MESSAGE:"message"},n={NOT_LOADED:void 0,LOADING:"loading",LOADED:"loaded"}},7158699554:(j,p,e)=>{"use strict";e.d(p,{$U:()=>d,A_:()=>r,Wt:()=>m,YG:()=>v,c7:()=>h,jR:()=>_});var t=e(2384831516),n=e(8847766420),s=e(7606781622),a=e(6457401668),c=e(937317117),o=e(4352409775),i=e(6247263305),l=e(4813703725);const _=(0,t.Mz)(function(I,T){let{refetchIfNeeded:f=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(f){const g=(0,n.ZT)(I);(0,o.G)().maybeRefetch(g,T)}return I&&I.pins&&I.pins.pinsByChannel[T]});_.meta={name:"createSelector",key:"createSelectorgetPinnedItemsForChannel",description:function(I,T){let{refetchIfNeeded:f=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(f){const g=(0,n.ZT)(I);(0,o.G)().maybeRefetch(g,T)}return I&&I.pins&&I.pins.pinsByChannel[T]}};const d=(0,t.Mz)((I,T)=>{var f,g;return I&&I.pins&&I.pins.pinsByChannel[T]?(f=I.pins.pinsByChannel)===null||f===void 0||(g=f[T])===null||g===void 0?void 0:g.length:0});d.meta={name:"createSelector",key:"createSelectorgetPinCountForChannel",description:(I,T)=>{var f,g;return I&&I.pins&&I.pins.pinsByChannel[T]?(f=I.pins.pinsByChannel)===null||f===void 0||(g=f[T])===null||g===void 0?void 0:g.length:0}};const r=(0,t.Mz)((I,T)=>I&&I.pins&&I.pins.loadingStateByChannel[T]);r.meta={name:"createSelector",key:"createSelectorgetLoadingState",description:(I,T)=>I&&I.pins&&I.pins.loadingStateByChannel[T]};const m=(0,t.Mz)((I,T)=>{let{channelId:f,ts:g}=T;const M=!1,A=(0,s.Ld)(I,f,g,M);if(!A)return!1;if((0,a.m)(A)&&A.comment){const O=(0,c.yd)(I,A.file,A.comment.id);return O?!!(O.pinned_to&&O.pinned_to.includes(f)):!1}return!!(A.pinned_to&&A.pinned_to.includes(f))});m.meta={name:"createSelector",key:"createSelectorisMessagePinned",description:(I,T)=>{let{channelId:f,ts:g}=T;const M=!1,A=(0,s.Ld)(I,f,g,M);if(!A)return!1;if((0,a.m)(A)&&A.comment){const O=(0,c.yd)(I,A.file,A.comment.id);return O?!!(O.pinned_to&&O.pinned_to.includes(f)):!1}return!!(A.pinned_to&&A.pinned_to.includes(f))}};const h=u((I,T)=>{switch(T.type){case i.R.MESSAGE:return{...(0,s.Ld)(I,T.channel,T.ts),type:i.R.MESSAGE};case i.R.FILE:return{...(0,c.Lp)(I,T.id),type:i.R.FILE};case i.R.FILE_COMMENT:return{...(0,c.yd)(I,T.fileId,T.id),fileId:T.fileId,type:i.R.FILE_COMMENT};default:return{}}},"getItemWithPinIdentifier"),v=(0,l.eI)((I,T)=>{const f=_(I,T);return f?f.map(g=>h(I,g)):[]}),y=(0,t.Mz)(I=>I&&I.pins&&I.pins.popoverScrollTop);y.meta={name:"createSelector",key:"createSelectorgetPopoverScrollTop",description:I=>I&&I.pins&&I.pins.popoverScrollTop}},6701536972:(j,p,e)=>{"use strict";e.d(p,{b:()=>v});var t=e(796111729),n=e(9109082163),s=e(2947836378),a=e(1031947056),c=e(8847766420),o=e(6403218297),i=e(2416684575),l=e(10127715),_=e(6247263305),d=e(983004675),r=e(1581380967),m=e(4352409775),h=e(5792544570);const v=(0,a.Ay)("Fetch pinned items list for channel",(y,I,T)=>{const f=T.channelId;return y((0,d.kK)({loadingState:_.b.LOADING,channelId:f})),y((0,n.xs)({reason:"fetchPinsList",...T})).then(function(){let{items:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const M=g.filter(D=>D.type.includes(_.R.FILE)).map(D=>{if(D.type===_.R.FILE_COMMENT){const{comment:E,file:C,...S}=D,b=(0,o.A)(E,C);return{...S,file:b}}return D}),A=g.filter(D=>D.type===_.R.MESSAGE);if(M.length){const D=M.filter(C=>C.type!==_.R.FILE_COMMENT),E=M.filter(C=>C.type===_.R.FILE_COMMENT);y((0,s.b)({files:D.map(C=>C.file)})),y((0,s.b)({files:E.map(C=>C.file)}))}if(A.length){const D=A.map(C=>{let{message:S}=C;return S}),E=y((0,i.A)({imsgs:D,channelId:f}));y((0,l.Kc)(E))}y((0,r.K)({channelId:f,count:g.length})),y((0,d.cg)({items:g.map(h.B),channelId:f})),y((0,d.kK)({loadingState:_.b.LOADED,channelId:f}));const O=(0,c.ZT)(I());(0,m.G)().markObjectsAsFresh(O,[f])}).catch(g=>{throw y((0,d.kK)({loadingState:_.b.NOT_LOADED,channelId:f})),(0,t.Ay)({getState:I}).error(`Error in fetchPinsList: ${JSON.stringify(g)}`),g})});v.meta={name:"createThunk",key:"createThunkfetchPinsList",description:"Fetch pinned items list for channel"}},1581380967:(j,p,e)=>{"use strict";e.d(p,{K:()=>l});var t=e(1031947056),n=e(9606603587),s=e(9101533895),a=e(796111729),c=e(9676369204),o=e(6247263305),i=e(7158699554);const l=(0,t.Ay)("update a pin count for a channel",(_,d,r)=>{let{channelId:m,count:h,forceUpdate:v=!1}=r;const y=d(),I={...(0,s.OL)(y,m)},T=(0,i.jR)(y,m,{refetchIfNeeded:!1}),f=(0,i.A_)(y,m),g=!v&&f===o.b.LOADED?T==null?void 0:T.length:h;if(g===I.pinned_items_count)return;(0,a.Ay)({state:y}).info("PINS",`Pins count updated for channel ${m}: ${g}`);const M={...I,pinned_items_count:g};_((0,n.B)({channel:M})),(0,c.L6)(I,h)});l.meta={name:"createThunk",key:"createThunkupdatePinCount",description:"update a pin count for a channel"}},5792544570:(j,p,e)=>{"use strict";e.d(p,{B:()=>n});var t=e(6247263305);const n=u(s=>{switch(s.type){case t.R.MESSAGE:var a;return{type:s.type,channel:s.channel,ts:(a=s.message)===null||a===void 0?void 0:a.ts};case t.R.FILE:var c,o;return{type:s.type,id:s.file?s.file.id:(c=s.files)===null||c===void 0||(o=c[0])===null||o===void 0?void 0:o.id};case t.R.FILE_COMMENT:var i;return{type:s.type,id:s.comment.id,fileId:(i=s.file)===null||i===void 0?void 0:i.id};default:return{}}},"formatPinFromAPI")},4079686795:(j,p,e)=>{"use strict";e.d(p,{j:()=>s,z:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set a channel pref");n.meta={name:"createAction",key:"createActionsetChannelPref",description:"Set a channel pref"};const s=(0,t.Ay)("Bulk set channel prefs");s.meta={name:"createAction",key:"createActionbulkSetChannelsPrefs",description:"Bulk set channel prefs"}},8163773562:(j,p,e)=>{"use strict";e.d(p,{d:()=>n});var t=e(9829579108);const n=(0,t.Ay)((s,a,c)=>{var o,i,l;return s==null||(o=s.prefs)===null||o===void 0||(i=o.channel)===null||i===void 0||(l=i[a])===null||l===void 0?void 0:l[c]});n.meta={name:"createSelector",key:"createSelectorgetChannelPref",description:(s,a,c)=>{var o,i,l;return s==null||(o=s.prefs)===null||o===void 0||(i=o.channel)===null||i===void 0||(l=i[a])===null||l===void 0?void 0:l[c]}}},1523378513:(j,p,e)=>{"use strict";e.d(p,{E:()=>l,d:()=>i});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(4446301238),c=e(8243083011),o=e(4079686795);const i=(0,s.Ay)("Fetch and upsert channel pref data",function(){var _=(0,t.coroutine)(function*(d,r,m){let{channelId:h,prefName:v,reason:y}=m;if(v==="enable_at_channel"&&!(0,c.q)(r(),h))return;const I=yield d((0,a.d9)({channelId:h,prefName:v,reason:y||"fetch-channel-pref"}));d((0,o.z)({channelId:h,pref:v,value:I==null?void 0:I.pref_value}))});return function(d,r,m){return _.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkgetChannelPref",description:"Fetch and upsert channel pref data"};const l=(0,s.Ay)("Set and upsert channel pref data",function(){var _=(0,t.coroutine)(function*(d,r,m){let{channelId:h,newPrefs:v,reason:y}=m;const I=yield d((0,a.E9)({channelId:h,newPrefs:v,reason:y||"set-channel-prefs"})),T={[h]:I.prefs};d((0,o.j)(T))});return function(d,r,m){return _.apply(this,arguments)}}());l.meta={name:"createThunk",key:"createThunksetChannelPrefs",description:"Set and upsert channel pref data"}},7665060966:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(9829579108),n=e(2047021170);const s=(0,t.Ay)(c=>(0,n.ty)(c,"messages_theme")==="dense"?"dense":"light");s.meta={name:"createSelector",key:"createSelectorgetUserMessagesTheme",description:c=>(0,n.ty)(c,"messages_theme")==="dense"?"dense":"light"};const a=s},1317368584:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(9829579108),n=e(9599231336),s=e(2047021170),a=e(7665060966);const c=(0,t.Ay)(i=>!(0,n.P)(i)&&!!(0,s.ty)(i,"jumbomoji")&&(0,a.A)(i)!=="dense");c.meta={name:"createSelector",key:"createSelectorshouldDisplayJumbomoji",description:i=>!(0,n.P)(i)&&!!(0,s.ty)(i,"jumbomoji")&&(0,a.A)(i)!=="dense"};const o=c},5512605238:(j,p,e)=>{"use strict";e.d(p,{F:()=>n});var t=e(9829579108);const n=(0,t.Ay)(s=>s&&s.promo&&s.promo.showTrialStartedCelebration);n.meta={name:"createSelector",key:"createSelectorgetShowTrialStartedCelebration",description:s=>s&&s.promo&&s.promo.showTrialStartedCelebration}},1384076438:(j,p,e)=>{"use strict";e.d(p,{A:()=>m});var t=e(6422693406),n=e(1031947056),s=e(8760181906),a=e(2607644860),c=e(1939990292),o=e(3677514771),i=e(9869343146),l=e(6839188756),_=e(796111729);const d=(0,n.Ay)("Fetch promo campaign eligibility",(v,y,I)=>{let{campaignType:T,campaignSubType:f,context:g,reason:M}=I;const A=(0,o.H7)(y());return(0,l.tc)(A)?(v((0,c.zg)({campaignType:T,campaignSubType:f,isFetching:!0})),v((0,i.V)({campaignType:T,campaignSubType:f,context:g,reason:M})).then(D=>{const{isEligible:E,discountPercent:C,expirationTimestamp:S,discountDuration:b}=D;return v((0,c.xt)({campaignType:T,campaignSubType:f,isEligible:E,discountPercent:C,expirationTimestamp:S,discountDuration:b})),v((0,c.zg)({campaignType:T,campaignSubType:f,isFetching:!1})),D}).catch(D=>((0,_.Ay)({state:y()}).error(D.message),v((0,c.zg)({campaignType:T,campaignSubType:f,isFetching:!1})),D))):t.S.resolve({isEligible:!1})});d.meta={name:"createThunk",key:"createThunkfetchPromoEligibility",description:"Fetch promo campaign eligibility"};const m=(0,s.A)(d,a.C,!0,["context","reason"]),h={fetchPromoEligibility:d}},2607644860:(j,p,e)=>{"use strict";e.d(p,{C:()=>t,y:()=>n});const t=3e5,n={shareChannelPaywall:"share_channel_paywall",sharedChannelsIntro:"shared_channels_intro",trialStart:"trial_start",limitedHistoryForeword:"limited_history_foreword",slackConnectHub:"slack_connect_hub",slackConnectHubHeader:"slack_connect_hub_header",slackConnectDMBanner:"slack_connect_dm_banner",addMoreItemsLink:"add_more_items_link",connectionsChannelSection:"connections_channel_section",paidBenefitsPage:"paid_benefits_page",adminBillingOverview:"admin_billing_overview",channelInviteModal:"channel_invite_modal",huddleChannelJoinMsgText:"huddle_channel_join_msg_text",fileStorageWarning:"file_storage_warning",huddleInviteModal:"huddle_invite_modal",canvasPageSyntheticView:"canvas_page_synthetic_view",workflowBuilderFreemiumBanner:"workflow_builder_freemium_banner",workflowPublishButton:"workflow_publish_button",workflowBuilderSidebar:"workflow_builder_sidebar"}},6822097892:(j,p,e)=>{"use strict";e.d(p,{A:()=>h});var t=e(9706240641),n=e.n(t),s=e(7307560139),a=e(2346425530),c=e(9629572172),o=e(3193155968),i=e(6078549397),l=e(5033667e3),_=e(7429662208),d=e(9108490430),r=e(1031947056);const m=(0,r.Ay)("Open a document on a specific version",function(){var v=(0,t.coroutine)(function*(y,I,T,f){const{fileId:g,windowId:M,version:A,isFromCloseActivityHistory:O,replaceHistoryState:D}=T,E=I(),{versionId:C,sequence:S}={...A};if(!g)return;const{isMainWindow:b,closeView:k,getViewSet:W}=f(c.U),N=(0,_.e6)(E),V=(0,a.xu)(E,M),{versionId:R,sequence:P}={...V},z=O?void 0:C||R,$=O?void 0:S||P;if(O||y((0,s.fw)({windowId:M,versionId:C||R})),D){const x=b?W(E):(0,_.hZ)(E,{windowId:M});if(x){const Y=x[o.mq.Primary];if(Y){const ne={...x,[o.mq.Primary]:{...x[o.mq.Primary],params:{...Y.params,versionId:z,sequence:$}}};y(b?(0,l.A)({windowId:o.N2,tab:N,viewSet:ne}):(0,l.A)({windowId:M.toString(),viewSet:ne}))}}}else{const x={id:(0,i.Lo)({id:g}),versionId:z,sequence:$,preserveExistingSecondaryView:!O};y(b?(0,d.IZ)({windowId:o.N2,tab:N,container:o.mq.Primary,params:x}):(0,d.IZ)({windowId:M.toString(),container:o.mq.Primary,params:x})),O&&k(o.mq.Secondary)}O&&y((0,s.NA)({windowId:M}))});return function(y,I,T,f){return v.apply(this,arguments)}}());m.meta={name:"createThunk",key:"createThunkopenDocVersion",description:"Open a document on a specific version"};const h=m},7115106069:(j,p,e)=>{"use strict";e.d(p,{Bi:()=>s,d0:()=>c,oj:()=>a});var t=e(9829579108);const n=(0,t.Ay)(o=>o==null?void 0:o.quipDocEmbeds);n.meta={name:"createSelector",key:"createSelectorgetQuipDocEmbedsStoreState",description:o=>o==null?void 0:o.quipDocEmbeds};const s=(0,t.Ay)(o=>{const i=n(o);return i&&Object.keys(i).length>0});s.meta={name:"createSelector",key:"createSelectorisSpaceOpen",description:o=>{const i=n(o);return i&&Object.keys(i).length>0}};const a=(0,t.Ay)(o=>{const i=n(o);return Object.keys(i)});a.meta={name:"createSelector",key:"createSelectorgetOpenSpaces",description:o=>{const i=n(o);return Object.keys(i)}};const c=(0,t.Ay)((o,i)=>{const l=n(o);var _;return((_=l[i])!==null&&_!==void 0?_:0)>0});c.meta={name:"createSelector",key:"createSelectorisSpaceOpenForThreadId",description:(o,i)=>{const l=n(o);var _;return((_=l[i])!==null&&_!==void 0?_:0)>0}}},2494018541:(j,p,e)=>{"use strict";e.d(p,{O:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Store the corresponding file id for temp quip id");n.meta={name:"createAction",key:"createActionsetFileIdForTempId",description:"Store the corresponding file id for temp quip id"}},4368281601:(j,p,e)=>{"use strict";e.d(p,{N:()=>l,al:()=>o,jw:()=>c,k:()=>n,uo:()=>s,yw:()=>a,z5:()=>i});var t=e(2140362605);const n=(0,t.Ay)("Store/replace client.counts for this channel");n.meta={name:"createAction",key:"createActionsetQuipUnreadCount",description:"Store/replace client.counts for this channel"};const s=(0,t.Ay)("increment mention count for the channel");s.meta={name:"createAction",key:"createActionincQuipUnreadCountForChannel",description:"increment mention count for the channel"};const a=(0,t.Ay)("decrement mention count for the channel");a.meta={name:"createAction",key:"createActiondecQuipUnreadCountForChannel",description:"decrement mention count for the channel"};const c=(0,t.Ay)("Add canvases to hide on undo");c.meta={name:"createAction",key:"createActionsetCanvasesToHideOnClearAll",description:"Add canvases to hide on undo"};const o=(0,t.Ay)("clear new mention flag for the channel");o.meta={name:"createAction",key:"createActionclearNewMentionFlagForChannel",description:"clear new mention flag for the channel"};const i=(0,t.Ay)("Set the list of enterprise file channels (canvases) to exclude from total counts");i.meta={name:"createAction",key:"createActionsetCanvasesToSuppress",description:"Set the list of enterprise file channels (canvases) to exclude from total counts"};const l=(0,t.Ay)("Set the last seen timestamp for a badged channel canvas animation");l.meta={name:"createAction",key:"createActionsetLastSeenChannelCanvasAnimationTimestamp",description:"Set the last seen timestamp for a badged channel canvas animation"}},8515087389:(j,p,e)=>{"use strict";e.d(p,{Bs:()=>s,Ie:()=>n,S7:()=>a});var t=e(9829579108);const n=(0,t.Ay)(c=>c.salesforceSearchRecords.records);n.meta={name:"createSelector",key:"createSelectorgetSalesforceRecords",description:c=>c.salesforceSearchRecords.records};const s=(0,t.Ay)(c=>c.salesforceSearchRecords.fullSearchActiveRecordIds);s.meta={name:"createSelector",key:"createSelectorgetFullSearchActiveRecordIds",description:c=>c.salesforceSearchRecords.fullSearchActiveRecordIds};const a=(0,t.Ay)(c=>c.salesforceSearchRecords.recordScope);a.meta={name:"createSelector",key:"createSelectorgetSearchRecordScope",description:c=>c.salesforceSearchRecords.recordScope}},5446033290:(j,p,e)=>{"use strict";e.d(p,{b:()=>n,q:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Set the last executed encoded search string");n.meta={name:"createAction",key:"createActionsetLastExecutedEncodedSearchString",description:"Set the last executed encoded search string"};const s=(0,t.Ay)("Clear the last executed encoded search string");s.meta={name:"createAction",key:"createActionclearLastExecutedEncodedSearchString",description:"Clear the last executed encoded search string"}},532953487:(j,p,e)=>{"use strict";e.d(p,{$:()=>s});var t=e(9829579108),n=e(304127728);const s=(0,t.Ay)(function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.I;var o,i;return a==null||(o=a.searchHistory)===null||o===void 0||(i=o[c])===null||i===void 0?void 0:i.lastExecutedEncodedSearchString});s.meta={name:"createSelector",key:"createSelectorgetLastExecutedEncodedSearchString",description:function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.I;var o,i;return a==null||(o=a.searchHistory)===null||o===void 0||(i=o[c])===null||i===void 0?void 0:i.lastExecutedEncodedSearchString}}},3653269953:(j,p,e)=>{"use strict";e.d(p,{A:()=>g});var t=e(1031947056),n=e(2036289572),s=e(1839426804),a=e(30533254),c=e(6249041335),o=e(6125148745),i=e(6313685253),l=e(9846149684),_=e(2414816894),d=e(1707481146),r=e(6106767915);function m(M){let{highlightWords:A,shouldRenderEmojiAsText:O,emojiNames:D,locale:E}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const C=(0,l.A)(M,{highlightWords:A,shouldRenderEmojiAsText:O,emojiNames:D,locale:E,useChannelTagging:!1});return(0,i.A)(C.contents,(S,b)=>{if(b.attributes&&b.attributes.slackmention){const k=b.attributes.slackmention.id;return(0,_.A)(k)?`${S}@${(0,r.A)(k)}`:(0,d.A)(k)?`${S}${b.attributes.slackmention.label}`:k.charAt(0)==="S"?`${S}<!subteam^${k}|${b.attributes.slackmention.label}>`:`${S}<@${k}>`}return b.insert&&b.insert.slackemoji?S+b.insert.slackemoji.text:S+b.insert},"")}u(m,"convertContentsStringForEncodedMembers");function h(M,A,O){let D=(0,c.A)(O);return D=m(D,{shouldRenderEmojiAsText:!0}),(0,o.O)(M,A,D)}u(h,"convertClientQueryToAPIQuery");var v=e(2354384409),y=e(304127728),I=e(352142497),T=e(4139359963);const f=(0,t.Ay)("Set the query in the request which is being edited",(M,A,O)=>{let{query:D,mode:E,module:C,page:S,encodedSearchString:b,preventQueryRewrite:k}=O;const W=A(),N=!!b,V=(0,T.A)(W,{viewType:I.D.Search});M((0,n.p4)({windowId:y.I})),!N&&!V&&M((0,s.Vx)({windowId:y.I})),M((0,s.Cr)({windowId:y.I})),M((0,s.Di)({windowId:y.I})),M((0,s.FS)({moduleType:"messages",loading:!0})),M((0,s.FS)({moduleType:"files",loading:!0})),M((0,s.FS)({moduleType:"canvases",loading:!0}));const R=(0,a.vA)(W,D);return M((0,n.c3)({queryFilter:R})),h(M,A,D).then(P=>(M((0,n.Rm)({query:P})),M((0,v.A)({query:P,fetchSuggestions:!0,mode:E,module:C,page:S,preventQueryRewrite:k}))))});f.meta={name:"createThunk",key:"createThunksetEditableRequestQueryThenRequest",description:"Set the query in the request which is being edited"};const g=f},2354384409:(j,p,e)=>{"use strict";e.d(p,{A:()=>f});var t=e(1031947056),n=e(6422693406),s=e(2036289572),a=e(197186845),c=e(2505585477),o=e(796111729),i=e(9046992894),l=e(9436609557),_=e(6601726845),d=e(5446033290),r=e(1839426804),m=e(832411022),h=e(304127728),v=e(5267010247),y=e(8822892075),I=e(5513050121);const T=(0,t.Ay)("Set a request from the editable request",(g,M,A)=>{let{query:O,fetchSuggestions:D=!0,module:E,mode:C,page:S,preventQueryRewrite:b=!1}=A;g((0,s.qo)({windowId:h.I}));const k=M(),W=O||(0,c.Uz)(k)||"",N=(0,o.Ay)({getState:M}),V=(0,c.nI)(k);let R;if(E){N.info(i.Y,`Retrying previous search for ${E} module`);const z=(0,l.oL)(k,E)||{};R=g((0,a.u3)({page:S??z.page,module:E,reason:"search-retry-module",context:(0,I.Z_)(E)}))}else N.info(i.Y,"Starting new search"),g((0,s.p4)({windowId:h.I})),R=g((0,a.Ad)({query:W,reason:"search-new-query",fetchSuggestions:D,preventQueryRewrite:b}));const P=(0,_._t)(M());return P?(g((0,d.b)({value:P})),g((0,v.o)((0,y.oV)(P))),g((0,r.y8)({tab:E?m.Ai[E]:"all",position:0})),W&&g((0,a.Q3)({query:W,type:C||"unknown"})),V&&g((0,s.aZ)({windowId:h.I})),R):n.S.reject(new Error("Error getting route param from search state"))});T.meta={name:"createThunk",key:"createThunksetRequestFromEditableRequest",description:"Set a request from the editable request"};const f=T},2169241232:(j,p,e)=>{"use strict";e.d(p,{_:()=>a});var t=e(1031947056),n=e(678604478),s=e(304127728);const a=(0,t.Ay)("Sets a new ID for the query session",c=>{c((0,n.Ko)({windowId:s.I}))});a.meta={name:"createThunk",key:"createThunkendQuerySession",description:"Sets a new ID for the query session"}},6189112794:(j,p,e)=>{"use strict";e.d(p,{u:()=>_});var t=e(1031947056),n=e(4761125736),s=e(1839426804),a=e(2169241232),c=e(678604478),o=e(304127728),i=e(796111729),l=e(9046992894);const _=(0,t.Ay)("Sets a new ID for the search and query sessions",(d,r)=>{const m=(0,i.Ay)({getState:r}),h=(0,n._Z)(r(),"search_sort_reset")==="treatment";d((0,a._)()),d((0,c.gA)({windowId:o.I})),d((0,c.Z8)({windowId:o.I})),d((0,s.bZ)({windowId:o.I})),d((0,s.pQ)({windowId:o.I})),h&&d((0,s.Dl)({windowId:o.I})),m.info(l.Y,"Ending search session")});_.meta={name:"createThunk",key:"createThunkendSearchSession",description:"Sets a new ID for the search and query sessions"}},2939274763:(j,p,e)=>{"use strict";e.d(p,{s:()=>D,w:()=>E});var t=e(1031947056),n=e(9436609557),s=e(7143409288),a=e(2864477491),c=e(796111729),o=e(9046992894),i=e(7435861102),l=e(3998401757),_=e(2036289572),d=e(1839426804),r=e(6189112794),m=e(2169241232),h=e(6729174604),v=e(832411022),y=e(304127728),I=e(5446033290);const T=(0,t.Ay)("Clear query session data on session expiration",C=>{C((0,d.LM)({querySessionTimeoutId:null})),C((0,m._)()),C((0,_.Pz)({windowId:y.I})),C((0,h.o2)({inputId:v.Jx.OMNISWITCHER})),C((0,d.Vx)({windowId:y.I}))});T.meta={name:"createThunk",key:"createThunkclearQuerySessionData",description:"Clear query session data on session expiration"};const f=(0,t.Ay)("Clear search session data on session expiration",C=>{C((0,d.jT)({sessionTimeoutId:null})),C((0,r.u)()),C((0,_.Pz)({windowId:y.I})),C((0,h.o2)({inputId:v.Jx.OMNISWITCHER})),C((0,d.Vx)({windowId:y.I})),C((0,I.q)({windowId:y.I}))});f.meta={name:"createThunk",key:"createThunkclearSearchSessionData",description:"Clear search session data on session expiration"};var g=e(3606346624),M=e(5234724663),A=e(2527782504),O=e(9640070512);const D=(0,t.Ay)("Clear session timeouts on search mount",(C,S)=>{const b=S();(0,n.nj)(b)?((0,c.Ay)({getState:S}).info(o.Y,"Navigated to search page and session is already active: Clearing timer"),C((0,s.A)())):(0,a.G0)(b)||((0,c.Ay)({getState:S}).info(o.Y,"Navigated to search page without active session: Starting new session"),C((0,i.N)())),(0,n.a1)(b)||C((0,d.O3)({lastOpenMethod:"history"})),C((0,M.Ih)()),C((0,O.H)({focusKey:A.Ay.Search,forceFocus:!0}))});D.meta={name:"createThunk",key:"createThunkclearSessionTimeoutsOnSearchMount",description:"Clear session timeouts on search mount"};const E=(0,t.Ay)("Start session timeouts on search unmount",(C,S)=>{const b=S(),k=v.Jx.OMNISWITCHER;if(!(0,l.NR)(b,k))return;(0,c.Ay)({getState:S}).info(o.Y,"Navigated from search page with active query: Starting timeout to clear session");const W=setTimeout(()=>{const V=S();(0,n.hz)(V)===W&&C(T())},g.R);C((0,d.LM)({querySessionTimeoutId:W}));const N=setTimeout(()=>{const V=S();(0,n.nj)(V)===N&&C(f())},g.l);C((0,d.jT)({sessionTimeoutId:N})),C((0,M.yW)()),C((0,d.O3)({lastOpenMethod:null}))});E.meta={name:"createThunk",key:"createThunkstartSessionTimeoutsOnSearchUnmount",description:"Start session timeouts on search unmount"}},7143409288:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(1031947056),n=e(9436609557),s=e(1839426804);const a=(0,t.Ay)("Reset session timeout ids when someone returns to their search",(o,i)=>{clearTimeout((0,n.nj)(i())),o((0,s.jT)({sessionTimeoutId:null})),o((0,s.LM)({querySessionTimeoutId:null}))});a.meta={name:"createThunk",key:"createThunkresetSessionTimeoutIds",description:"Reset session timeout ids when someone returns to their search"};const c=a},117899263:(j,p,e)=>{"use strict";e.d(p,{_:()=>s});var t=e(9829579108),n=e(1960898919);const s=(0,t.Ay)(a=>{var c;return(c=(0,n.ax)(a,"is_new_human"))!==null&&c!==void 0?c:!1});s.meta={name:"createSelector",key:"createSelectorisNewHuman",description:a=>{var c;return(c=(0,n.ax)(a,"is_new_human"))!==null&&c!==void 0?c:!1}}},6962478097:(j,p,e)=>{"use strict";e.d(p,{ds:()=>o,fG:()=>c,m6:()=>a,m8:()=>n,rm:()=>s,st:()=>i,vU:()=>_,wr:()=>l});var t=e(2140362605);const n=(0,t.Ay)("Upserts inbound shared workspace invitations that are pending");n.meta={name:"createAction",key:"createActionupsertPendingInboundSharedWorkspaceInvitations",description:"Upserts inbound shared workspace invitations that are pending"};const s=(0,t.Ay)("Upserts outbound shared workspace invitations that are pending");s.meta={name:"createAction",key:"createActionupsertPendingOutboundSharedWorkspaceInvitations",description:"Upserts outbound shared workspace invitations that are pending"};const a=(0,t.Ay)("Upserts all inbound shared workspace invitations");a.meta={name:"createAction",key:"createActionupsertAllInboundSharedWorkspaceInvitations",description:"Upserts all inbound shared workspace invitations"};const c=(0,t.Ay)("Upserts all outbound shared workspace invitations");c.meta={name:"createAction",key:"createActionupsertAllOutboundSharedWorkspaceInvitations",description:"Upserts all outbound shared workspace invitations"};const o=(0,t.Ay)("Upserts a SharedWorkspace Invite");o.meta={name:"createAction",key:"createActionupsertSharedWorkspaceInvite",description:"Upserts a SharedWorkspace Invite"};const i=(0,t.Ay)("Upserts a SharedWorkspace Invite that is pending");i.meta={name:"createAction",key:"createActionupsertPendingSharedWorkspaceInvite",description:"Upserts a SharedWorkspace Invite that is pending"};const l=(0,t.Ay)("Removes a Shared Workspace Invite");l.meta={name:"createAction",key:"createActionremoveSharedWorkspaceInvite",description:"Removes a Shared Workspace Invite"};const _=(0,t.Ay)("Removes a Shared Workspace Invite that is pending");_.meta={name:"createAction",key:"createActionremovePendingSharedWorkspaceInvite",description:"Removes a Shared Workspace Invite that is pending"}},2479677519:(j,p,e)=>{"use strict";e.d(p,{A:()=>m});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(4875732686),c=e(2368561198),o=e(6422693406),i=e(6962478097),l=e(1605540670),_=e(320199792),d=e(3243667193);const r=(0,s.Ay)("Fetch and reset the results for pending all shared connection invites",function(){var h=(0,t.coroutine)(function*(v,y,I){let{reason:T}=I;if(!(0,a.y)(y()))return o.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});let g,M;if((0,c.i)(y())){const O=yield v((0,l.O)({reason:T,inviteTypes:[d.k.Workspace]}));if(O!=null&&O.connect_invites){const D=O.connect_invites.filter(E=>(0,_.mj)(E));g=D.filter(_.Ef),M=D.filter(_.I4),v((0,i.m8)({pendingInboundSharedWorkspaceInvites:g})),v((0,i.rm)({pendingOutboundSharedWorkspaceInvites:M}))}}return{inboundConnectInvites:g||[],outboundConnectInvites:M||[]}});return function(v,y,I){return h.apply(this,arguments)}}());r.meta={name:"createThunk",key:"createThunkfetchAndResetAllPendingSharedWorkspaceInvites",description:"Fetch and reset the results for pending all shared connection invites"};const m=r},1392261213:(j,p,e)=>{"use strict";e.d(p,{A:()=>m});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(4875732686),c=e(2368561198),o=e(6422693406),i=e(6962478097),l=e(1605540670),_=e(320199792),d=e(3243667193);const r=(0,s.Ay)("Fetch and reset the results for all shared connection invites",function(){var h=(0,t.coroutine)(function*(v,y,I){let{reason:T}=I;if(!(0,a.y)(y()))return o.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});let g,M;if((0,c.i)(y())){const O=yield v((0,l.O)({reason:T,inviteTypes:[d.k.Workspace]}));O!=null&&O.connect_invites&&(g=O.connect_invites.filter(_.Ef),M=O.connect_invites.filter(_.I4),v((0,i.m6)({inboundSharedWorkspaceInvites:g})),v((0,i.fG)({outboundSharedWorkspaceInvites:M})))}return{inboundConnectInvites:g||[],outboundConnectInvites:M||[]}});return function(v,y,I){return h.apply(this,arguments)}}());r.meta={name:"createThunk",key:"createThunkfetchAndResetAllSharedWorkspaceInvites",description:"Fetch and reset the results for all shared connection invites"};const m=r},3577873706:(j,p,e)=>{"use strict";e.d(p,{A:()=>l});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(2332966328),c=e(8910811843),o=e(4144687165);const i=(0,s.Ay)("Fetch Slack Doc file IDs for and re-map",function(){var _=(0,t.coroutine)(function*(d,r,m){let{quipThreadId:h,reason:v="get-and-upsert-slack-doc-file-id"}=m;const y=(0,o.R)(r(),h);if(y)return y;const{file_id:I}=yield d((0,a.I)({quipThreadId:h,reason:v}));return d((0,c.Gc)({objects:[{id:h,fileId:I}]})),I});return function(d,r,m){return _.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkgetAndUpsertSlackDocFileId",description:"Fetch Slack Doc file IDs for and re-map"};const l=i},7359239710:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>_,I$:()=>l,iJ:()=>i});var t=e(5571264920),n=e(1031947056),s=e(5502459222);const a=(0,n.Ay)("Fetch slack doc last read timestamps and re-map",(d,r,m)=>{let{ids:h}=m;return d((0,s.R)({fileIds:h,reason:"fetch-slack-doc-last-read"})).then(v=>{let{files:y}=v;return y.map(I=>({id:I.file_id,lastReadByUser:I.last_read_timestamp}))})});a.meta={name:"createThunk",key:"createThunkfetchSlackDocLastReadTimestamps",description:"Fetch slack doc last read timestamps and re-map"};const c=a,{reducer:o,actions:{upsertObjects:i},selectors:{getObjectById:l}}=(0,t.A)({storeKey:"slackDocLastRead",persistenceEnabled:!0},{fetchObjects:c}),_=o},2985066322:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(1031947056),n=e(7359239710);const s=(0,t.Ay)("Upsert a slack doc last read for a given file ID",(c,o,i)=>{let{fileId:l,lastReadByUser:_}=i;return c((0,n.iJ)({objects:[{id:l,lastReadByUser:_}]}))});s.meta={name:"createThunk",key:"createThunkupsertSlackDocLastReadByUserForFileId",description:"Upsert a slack doc last read for a given file ID"};const a=s},1302213854:(j,p,e)=>{"use strict";e.d(p,{C7:()=>n,Ln:()=>a,Mb:()=>s,UM:()=>c});var t=e(2140362605);const n=(0,t.Ay)("Have we already sent boot metrics");n.meta={name:"createAction",key:"createActionsetShouldLogAppBootMetrics",description:"Have we already sent boot metrics"};const s=(0,t.Ay)("Should we log team switch metrics");s.meta={name:"createAction",key:"createActionsetShouldLogTeamSwitchMetrics",description:"Should we log team switch metrics"};const a=(0,t.Ay)("Set whether we should continue logging time to visible metrics");a.meta={name:"createAction",key:"createActionsetShouldLogTTVMetrics",description:"Set whether we should continue logging time to visible metrics"};const c=(0,t.Ay)("Set whether we should continue logging time to usable metrics");c.meta={name:"createAction",key:"createActionsetShouldLogTTUMetrics",description:"Set whether we should continue logging time to usable metrics"}},4476913522:(j,p,e)=>{"use strict";e.d(p,{a:()=>h});var t=e(8086952004),n=e(12126472),s=e(6626377467),a=e(235108050),c=e(7530630315),o=e(5729325965),i=e(2240330919),l=e(1116859610),_=e(6422693406),d=e(1031947056),r=e(3110884894),m=e(2155512519);const h=(0,d.Ay)("gets thread replies from the API",(v,y,I)=>{const{channelId:T,threadTs:f,oldest:g,limit:M}=I;let A=I.latest;g===A&&A===I.threadTs&&(A=null);const O=(0,r.Iu)(T,f);return g&&A?_.S.all([v((0,m.$b)({channelId:T,threadTs:f,latest:A,limit:M})),v((0,m.$b)({channelId:T,threadTs:f,oldest:g,limit:M}))]).then(D=>{let[E,C]=D;const S=(0,t.A)(E.msgs,{ts:f})||(0,t.A)(C.msgs,{ts:f}),b=(0,n.A)(E.msgs,{ts:f}),k=(0,n.A)(C.msgs,{ts:f}),W=E.deleted,N=C.deleted,V=(0,s.A)(b.concat(k),"ts"),R=(0,a.A)((0,c.A)(W,N));!E.hasMore&&S&&V.unshift(S);const P=V.map(z=>z.ts);return v((0,l.A)({msgs:V,channelId:O,hasMore:{hasMoreStart:E.hasMore,hasMoreEnd:C.hasMore},oldest:(0,o.A)([g,(0,o.A)(P)]),latest:(0,i.A)([A,(0,i.A)(P)]),deleted:R})),{msgs:V}}):v((0,m.$b)({channelId:T,threadTs:f,oldest:g,latest:A,limit:M})).then(function(){let{msgs:D,deleted:E,hasMore:C}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const S=A&&!C||g===f||A===f||!g&&!A&&!C;let b=D;S||(b=(0,n.A)(D,{ts:f}));let k=C;!g&&!A&&(k={hasMoreStart:C,hasMoreEnd:!1}),v((0,l.A)({msgs:b,channelId:O,hasMore:k,oldest:g,latest:A,deleted:E}));const W=(0,t.A)(D,{ts:f});return W&&g===f&&v((0,l.A)({msgs:[W],channelId:O,hasMore:!1,latest:f})),{msgs:b}})});h.meta={name:"createThunk",key:"createThunkrequestReplies",description:"gets thread replies from the API"}},6929023741:(j,p,e)=>{"use strict";e.d(p,{a:()=>h});var t=e(8086952004),n=e(12126472),s=e(6626377467),a=e(235108050),c=e(7530630315),o=e(5729325965),i=e(2240330919),l=e(1116859610),_=e(6422693406),d=e(1031947056),r=e(3110884894),m=e(2155512519);const h=(0,d.Ay)("gets thread replies from the API",(v,y,I)=>{const{channelId:T,threadTs:f,oldest:g,limit:M}=I;let A=I.latest;g===A&&A===I.threadTs&&(A=null);const O=(0,r.Iu)(T,f);return g&&A?_.S.all([v((0,m.$b)({channelId:T,threadTs:f,latest:A,limit:M})),v((0,m.$b)({channelId:T,threadTs:f,oldest:g,limit:M}))]).then(D=>{let[E,C]=D;const S=(0,t.A)(E.msgs,{ts:f})||(0,t.A)(C.msgs,{ts:f}),b=(0,n.A)(E.msgs,{ts:f}),k=(0,n.A)(C.msgs,{ts:f}),W=E.deleted,N=C.deleted,V=(0,s.A)(b.concat(k),"ts"),R=(0,a.A)((0,c.A)(W,N));!E.hasMore&&S&&V.unshift(S);const P=V.map(z=>z.ts);return v((0,l.A)({msgs:V,channelId:O,hasMore:{hasMoreStart:E.hasMore,hasMoreEnd:C.hasMore},oldest:(0,o.A)([g,(0,o.A)(P)]),latest:(0,i.A)([A,(0,i.A)(P)]),deleted:R})),{msgs:V}}):v((0,m.$b)({channelId:T,threadTs:f,oldest:g,latest:A,limit:M})).then(function(){let{msgs:D,deleted:E,hasMore:C}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const S=A&&!C||g===f||A===f||!g&&!A&&!C;let b=D;S||(b=(0,n.A)(D,{ts:f}));let k=C;!g&&!A&&(k={hasMoreStart:C,hasMoreEnd:!1}),v((0,l.A)({msgs:b,channelId:O,hasMore:k,oldest:g,latest:A,deleted:E}));const W=(0,t.A)(D,{ts:f});return W&&g===f&&v((0,l.A)({msgs:[W],channelId:O,hasMore:!1,latest:f})),{msgs:b}})});h.meta={name:"createThunk",key:"createThunkrequestReplies",description:"gets thread replies from the API"}},1827030018:(j,p,e)=>{"use strict";e.d(p,{_:()=>l});var t=e(9746734072),n=e(5238395322),s=e(2101927269),a=e(7486305635),c=e(1031947056),o=e(9101533895),i=e(157328471);const l=(0,c.Ay)("Update the unread count for the all threads view",(_,d,r)=>{let{threadsHasUnreads:m,threadsUnreadCountByChannel:h,threadsMentionCountByChannel:v,threadsLastUpdatedTimestamp:y}=r;const I=(0,t.A)(v)?{}:v,T=d(),f=(0,n.A)((0,s.A)(I,(M,A)=>{const O=(0,o.OL)(T,A);return(0,a.WK)(T,O)&&!(0,a.fA)(T,O)}));let g=0;h?g=(0,n.A)((0,s.A)(h,(M,A)=>{const O=(0,o.OL)(T,A);return(0,a.WK)(T,O)})):g=m?1:0,_((0,i.LI)({threadsUnreadCount:g,threadsUnreadCountByChannel:h,threadsMentionCount:f,threadsMentionCountByChannel:I,threadsLastUpdatedTimestamp:y,suppressThreads:(0,a.dQ)(T)}))});l.meta={name:"createThunk",key:"createThunkthreadsUnreadCountChanged",description:"Update the unread count for the all threads view"}},9132245692:(j,p,e)=>{"use strict";e.d(p,{g:()=>n,y:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Update unread counts for the specified user alert types");n.meta={name:"createAction",key:"createActionupdateUserAlertsUnreadCount",description:"Update unread counts for the specified user alert types"};const s=(0,t.Ay)("Reset the user alerts store to the specified alert counts map");s.meta={name:"createAction",key:"createActionresetAllUserAlertsUnreadCounts",description:"Reset the user alerts store to the specified alert counts map"}},2696160384:(j,p,e)=>{"use strict";e.d(p,{D_:()=>s,FI:()=>n,Sr:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Sets whether the mini player is open or not");n.meta={name:"createAction",key:"createActionsetIsDocked",description:"Sets whether the mini player is open or not"};const s=(0,t.Ay)("Sets mini video player config");s.meta={name:"createAction",key:"createActionsetMiniPlayerConfig",description:"Sets mini video player config"};const a=(0,t.Ay)("Clears mini video player config");a.meta={name:"createAction",key:"createActionclearMiniPlayerConfig",description:"Clears mini video player config"}},9813790040:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(3750057149),n=e(9121100949),s=e(1185969935),a=e(1201539379),c=e(965001959),o=e(9733150292);const i={persistenceEnabled:!1,storeKey:"viewLayout"},l={sidebarWidthIntent:void 0,sidebarWidthMode:c.tR.AUTO,sidebarWideWidthIntent:void 0,sidebarWideWidthMode:c.tR.AUTO,sidebarExtraWideWidthIntent:void 0,sidebarExtraWideWidthMode:c.tR.AUTO,secondaryWidthIntent:void 0,secondaryWidthMode:c.tR.AUTO,splitWidthIntent:void 0,splitWidthMode:c.tR.AUTO,isSidebarVisible:!0,isSidebarVisibleWhenFloating:!1,isWorkspaceSwitcherVisible:!1,isCompactModeEnabled:!1};try{l.sidebarWidthIntent=(0,o.W6)(n.ke)||void 0,l.sidebarWideWidthIntent=(0,o.W6)(n.u1)||void 0,l.sidebarExtraWideWidthIntent=(0,o.W6)(n.jt)||void 0,l.secondaryWidthIntent=(0,o.W6)(n.gN)||void 0,l.sidebarWidthMode=(0,o.W6)(n.ts)||c.tR.AUTO,l.splitWidthIntent=(0,o.W6)(n.qD)||void 0,l.splitWidthMode=(0,o.W6)(n.$D)||c.tR.AUTO,l.sidebarWidthMode=(0,o.W6)(n.ts)||c.tR.AUTO,l.sidebarWideWidthMode=(0,o.W6)(n.r1)||c.tR.AUTO,l.sidebarExtraWideWidthMode=(0,o.W6)(n.OR)||c.tR.AUTO,l.secondaryWidthMode=(0,o.W6)(n.Ts)||c.tR.AUTO;const r=(0,o.W6)(n.jG);l.isSidebarVisible=(0,t.A)(r)?r:!0;const m=(0,o.W6)(n.WU);l.isWorkspaceSwitcherVisible=(0,t.A)(m)?m:!1;const h=(0,o.W6)(n.RC);l.isCompactModeEnabled=(0,t.A)(h)?h:!1}catch{}const d=(0,s.Ay)({},l,i).on(a.SP,(r,m)=>{let{sidebarWidthIntent:h,sidebarWidthMode:v}=m;return{...r,sidebarWidthIntent:h,sidebarWidthMode:v}}).on(a.hk,(r,m)=>{let{sidebarWideWidthIntent:h,sidebarWideWidthMode:v}=m;return{...r,sidebarWideWidthIntent:h,sidebarWideWidthMode:v}}).on(a.$t,(r,m)=>{let{sidebarExtraWideWidthIntent:h,sidebarExtraWideWidthMode:v}=m;return{...r,sidebarExtraWideWidthIntent:h,sidebarExtraWideWidthMode:v}}).on(a.ie,(r,m)=>{let{secondaryWidthIntent:h,secondaryWidthMode:v}=m;return{...r,secondaryWidthIntent:h,secondaryWidthMode:v}}).on(a.yL,(r,m)=>{let{splitWidthIntent:h,splitWidthMode:v}=m;return{...r,splitWidthIntent:h,splitWidthMode:v}}).on(a.KY,(r,m)=>({...r,isSidebarVisible:m})).on(a.Eo,(r,m)=>({...r,isSidebarVisibleWhenFloating:m})).on(a.mV,(r,m)=>({...r,isWorkspaceSwitcherVisible:m})).on(a.Fe,(r,m)=>({...r,isCompactModeEnabled:m}))},4172221507:(j,p,e)=>{"use strict";e.d(p,{F:()=>o});var t=e(9121100949),n=e(1031947056),s=e(6533394955),a=e(1201539379),c=e(9733150292);const o=(0,n.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes",(i,l,_)=>{(0,c.q9)(t.jG,_),i((0,a.KY)(_)),(0,s.dispatchForClientStore)((0,a.KY)(_))});o.meta={name:"createThunk",key:"createThunksetIsSidebarVisible",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes"}},8707579690:(j,p,e)=>{"use strict";e.d(p,{J:()=>o});var t=e(9121100949),n=e(1031947056),s=e(1201539379),a=e(6533394955),c=e(9733150292);const o=(0,n.Ay)("Set the user-specified secondary width and mode",(i,l,_)=>{let{secondaryWidthIntent:d,secondaryWidthMode:r}=_;(0,c.q9)(t.gN,d),(0,c.q9)(t.Ts,r),i((0,s.ie)({secondaryWidthIntent:d,secondaryWidthMode:r})),(0,a.dispatchForClientStore)((0,s.ie)({secondaryWidthIntent:d,secondaryWidthMode:r}))});o.meta={name:"createThunk",key:"createThunksetSecondaryColumn",description:"Set the user-specified secondary width and mode"}},2779520532:(j,p,e)=>{"use strict";e.d(p,{R:()=>o});var t=e(9121100949),n=e(1031947056),s=e(1201539379),a=e(6533394955),c=e(9733150292);const o=(0,n.Ay)("Set the user-specified sidebar width and mode",(i,l,_)=>{let{sidebarWidthIntent:d,sidebarWidthMode:r}=_;(0,c.q9)(t.ke,d),(0,c.q9)(t.ts,r),i((0,s.SP)({sidebarWidthIntent:d,sidebarWidthMode:r})),(0,a.dispatchForClientStore)((0,s.SP)({sidebarWidthIntent:d,sidebarWidthMode:r}))});o.meta={name:"createThunk",key:"createThunksetSidebarColumn",description:"Set the user-specified sidebar width and mode"}},7128275929:(j,p,e)=>{"use strict";e.d(p,{a:()=>o});var t=e(9121100949),n=e(1031947056),s=e(1201539379),a=e(6533394955),c=e(9733150292);const o=(0,n.Ay)("Set the user-specified extra wide sidebar width and mode",(i,l,_)=>{let{sidebarExtraWideWidthIntent:d,sidebarExtraWideWidthMode:r}=_;(0,c.q9)(t.jt,d),(0,c.q9)(t.OR,r),i((0,s.$t)({sidebarExtraWideWidthIntent:d,sidebarExtraWideWidthMode:r})),(0,a.dispatchForClientStore)((0,s.$t)({sidebarExtraWideWidthIntent:d,sidebarExtraWideWidthMode:r}))});o.meta={name:"createThunk",key:"createThunksetSidebarExtraWideColumn",description:"Set the user-specified extra wide sidebar width and mode"}},9341298:(j,p,e)=>{"use strict";e.d(p,{q:()=>o});var t=e(9121100949),n=e(1031947056),s=e(1201539379),a=e(6533394955),c=e(9733150292);const o=(0,n.Ay)("Set the user-specified wide sidebar width and mode",(i,l,_)=>{let{sidebarWideWidthIntent:d,sidebarWideWidthMode:r}=_;(0,c.q9)(t.u1,d),(0,c.q9)(t.r1,r),i((0,s.hk)({sidebarWideWidthIntent:d,sidebarWideWidthMode:r})),(0,a.dispatchForClientStore)((0,s.hk)({sidebarWideWidthIntent:d,sidebarWideWidthMode:r}))});o.meta={name:"createThunk",key:"createThunksetSidebarWideColumn",description:"Set the user-specified wide sidebar width and mode"}},4139359963:(j,p,e)=>{"use strict";e.d(p,{A:()=>l});var t=e(2384831516),n=e(7429662208);const s=(0,t.Mz)((_,d)=>{let{viewType:r}=d;const m=(0,n.zi)(_);return Object.keys(m).map(I=>m[I]).some(I=>Object.keys(I).some(f=>{var g;return((g=I[f])===null||g===void 0?void 0:g.viewType)===r}))});s.meta={name:"createSelector",key:"createSelectorisViewTypeVisibleInChildWindow",description:(_,d)=>{let{viewType:r}=d;const m=(0,n.zi)(_);return Object.keys(m).map(I=>m[I]).some(I=>Object.keys(I).some(f=>{var g;return((g=I[f])===null||g===void 0?void 0:g.viewType)===r}))}};const a=s,c=(0,t.Mz)((_,d)=>{let{viewType:r}=d;const m=(0,n.e6)(_),h=(0,n.Le)(_,{tab:m});return h?Object.keys(h).some(I=>{var T;return((T=h[I])===null||T===void 0?void 0:T.viewType)===r}):!1});c.meta={name:"createSelector",key:"createSelectorisViewTypeVisibleInMainWindow",description:(_,d)=>{let{viewType:r}=d;const m=(0,n.e6)(_),h=(0,n.Le)(_,{tab:m});return h?Object.keys(h).some(I=>{var T;return((T=h[I])===null||T===void 0?void 0:T.viewType)===r}):!1}};const o=c,i=(0,t.Mz)((_,d)=>{let{viewType:r}=d;return a(_,{viewType:r})||o(_,{viewType:r})});i.meta={name:"createSelector",key:"createSelectorisViewTypeVisible",description:(_,d)=>{let{viewType:r}=d;return a(_,{viewType:r})||o(_,{viewType:r})}};const l=i},7573598208:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(352142497),n=e(8834730594),s=e(2960290117),a=e(8040098042),c=e(1826991857),o=e(4862221402),i=e(8813411026),l=e(8414867410);const _={activity:t.D.ActivityList,threads:t.D.Threads,rimeto_profile:t.D.Profile,files:t.D.FileDetails,help:t.D.Help,shortcuts:t.D.KeyboardShortcuts,whats_new:t.D.WhatsNew,feedback:t.D.Feedback,comment_thread:t.D.QuipCommentThread,comment_stream:t.D.QuipCommentStream,activity_history:t.D.QuipActivityHistory,quip_automations_overview:t.D.QuipAutomationsOverview,channel_canvas:t.D.ChannelCanvas,thread:t.D.Thread,ai_summary_details:t.D.AiSummaryDetails,search_summary:t.D.SearchSummary,channel_files:t.D.ChannelFiles,ai_app:t.D.AiApp,workflow_details:t.D.WorkflowDetails},r=u(m=>m?(0,n.A)(m)?t.D.AppSpace:(0,s.Ay)(m)?t.D.Quip:(0,a.A)(m)?t.D.Channel:(0,i.T)(m)?(0,l.F8)(m):m&&m[0]==="V"?t.D.Threads:(0,c.A)(m)?t.D.Thread:(0,o.A)(m)?t.D.UserGroup:_[m]?_[m]:t.D.Unknown:t.D.Unknown,"convertIdToViewType")},9936094925:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>I,cB:()=>h,ds:()=>m,w9:()=>v,wg:()=>r});var t=e(9113979368),n=e(498506970),s=e(1618349278),a=e(1649982175),c=e(1185969935),o=e(3193155968),i=e(7590914282);const l=100,_={},d={persistenceEnabled:!1,storeKey:"windowHistory"};function r(T){let{windowState:f,entry:g}=T;const M=f?f.stack:[],A=(0,t.A)(M)?null:1;return{stack:[(0,n.A)(g)].concat(M).slice(0,l),index:0,previousIndex:A}}u(r,"handlePushHistoryEntryForWindow");function m(T){let{windowState:f,index:g,previousIndex:M}=T;return{stack:f.stack,index:g,previousIndex:M}}u(m,"handleUpdateIndexForWindow");function h(T){let{windowState:f,index:g}=T;return{stack:(0,s.A)(f.stack,g),index:f.index,previousIndex:null}}u(h,"handlePopHistoryAboveIndexForWindow");function v(T){let{windowState:f,entry:g}=T;const M=[...f.stack];return M[f.index]=(0,n.A)(g),{...f,stack:M}}u(v,"handleReplaceCurrentHistoryEntryForWindowInternal");const I=(0,c.Ay)({},_,d).on(i.xU,(T,f)=>{let{windowId:g,entry:M}=f;return!g||!M?T:{...T,[g]:r({windowState:T[g],entry:M})}}).on(i.aV,(T,f)=>{let{windowId:g}=f;return(0,a.A)(T,g)}).on(i.Nr,(T,f)=>{let{windowId:g,index:M,previousIndex:A}=f;return{...T,[g]:m({windowState:T[g],index:M,previousIndex:A})}}).on(i.o1,(T,f)=>{let{windowId:g,viewSet:M}=f;return{...T,[g]:{stack:[(0,n.A)(M)],index:0,previousIndex:null}}}).on(i.s0,(T,f)=>{let{windowId:g,index:M}=f;return T[g]?{...T,[g]:h({windowState:T[g],index:M})}:T}).on(i.iV,(T,f)=>{let{windowId:g,entry:M}=f;return T[g]?{...T,[g]:v({windowState:T[g],entry:M})}:T}).on(i.$Z,(T,f)=>{let{windowId:g,viewParams:M,index:A}=f;if(!T[g])return T;const D=[...T[g]?T[g].stack:[]];if(!D[A])return T;const E=(0,n.A)(D[A]),C=E[o.mq.Primary];if(!(C!=null&&C.id))return T;const S={...E,[o.mq.Primary]:{...C,params:{...C.params,...M}}};return D[A]=S,{...T,[g]:{...T[g],stack:D}}})},4256476552:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(1185969935),n=e(1780675971),s=e(3193155968);const a={[s.N2]:{isFocused:void 0,isUnloading:!1,timeCreation:0,timeLastBlurEvent:0,timeLastFocusEvent:0}},o=(0,t.Ay)({},a,{storeKey:"window",persistenceEnabled:!1}).on(n._p,(i,l)=>{let{windowId:_=s.N2,...d}=l;if(!i[_])return i;const r={[s.N2]:{...i[s.N2]}};return r[_]={...i[_],...d},Reflect.ownKeys(i).forEach(m=>{m!==_&&d.isFocused&&(r[m]={...i[m],isFocused:!1})}),{...i,...r}}).on(n.w3,(i,l)=>{let{windowId:_=s.N2,...d}=l;return i[_]?{...i,[_]:{...i[_],isUnloading:d.isUnloading}}:i}).on(n.d1,(i,l)=>{let{windowId:_=s.N2,...d}=l;return{...i,[_]:{...i[_],...d,windowId:_}}}).on(n.pb,(i,l)=>{let{windowId:_=s.N2,...d}=l;return i[_]?{...i,[_]:{...i[_],bootType:d.bootType}}:i}).on(n.jO,(i,l)=>{let{windowId:_}=l;if(_===s.N2||!i[_])return i;const d={...i};return delete d[_],d}).on(n.NV,(i,l)=>{let{windowId:_,viewport:d}=l;return i[_]?{...i,[_]:{...i[_],viewport:d}}:i})},2591023465:(j,p,e)=>{"use strict";e.d(p,{FO:()=>a,KY:()=>c,SP:()=>n,iJ:()=>i,lT:()=>s,vm:()=>o});var t=e(2140362605);const n=(0,t.Ay)("Set the user-specified sidebar width and mode (use setSidebarColumn instead)");n.meta={name:"createAction",key:"createActionsetSidebarColumnInternal",description:"Set the user-specified sidebar width and mode (use setSidebarColumn instead)"};const s=(0,t.Ay)("Set the user-specified sidebar width and mode (use setInspectorColumn instead)");s.meta={name:"createAction",key:"createActionsetInspectorColumnInternal",description:"Set the user-specified sidebar width and mode (use setInspectorColumn instead)"};const a=(0,t.Ay)("Sets whether or not the team sidebar is part of the grid layout (use setIsTeamSidebarVisible instead)");a.meta={name:"createAction",key:"createActionsetIsTeamSidebarVisibleInternal",description:"Sets whether or not the team sidebar is part of the grid layout (use setIsTeamSidebarVisible instead)"};const c=(0,t.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes (use setIsSidebarVisible instead)");c.meta={name:"createAction",key:"createActionsetIsSidebarVisibleInternal",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes (use setIsSidebarVisible instead)"};const o=(0,t.Ay)("Sets whether or not the sidebar is currently visible when in collapsed mode");o.meta={name:"createAction",key:"createActionsetIsSidebarVisibleWhenFloating",description:"Sets whether or not the sidebar is currently visible when in collapsed mode"};const i=(0,t.Ay)("Sets whether the user prefers a responsive sidebar");i.meta={name:"createAction",key:"createActionsetUserPrefersResponsiveSidebarInternal",description:"Sets whether the user prefers a responsive sidebar"}},894072650:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(3750057149),n=e(965001959),s=e(1185969935),a=e(2591023465),c=e(9733150292);const o={persistenceEnabled:!1,storeKey:"workspaceLayout"},i={inspectorWidthIntent:null,inspectorWidthMode:n.tR.AUTO,isSidebarVisible:!0,isSidebarVisibleWhenFloating:!1,isTeamSidebarVisible:!0,sidebarWidthIntent:null,sidebarWidthMode:n.tR.AUTO,userPrefersResponsiveSidebar:!0};try{i.sidebarWidthIntent=(0,c.W6)(n.ke)||null,i.inspectorWidthIntent=(0,c.W6)(n.j0)||null,i.sidebarWidthMode=(0,c.W6)(n.ts)||"auto",i.inspectorWidthMode=(0,c.W6)(n.mu)||"auto";const d=(0,c.W6)(n.jG);i.isSidebarVisible=(0,t.A)(d)?d:!0;const r=(0,c.W6)(n.Xg);i.isTeamSidebarVisible=(0,t.A)(r)?r:!0;const m=(0,c.W6)(n.Lb);i.userPrefersResponsiveSidebar=(0,t.A)(m)?m:!0}catch{}const _=(0,s.Ay)({},i,o).on(a.SP,(d,r)=>{let{sidebarWidthIntent:m,sidebarWidthMode:h}=r;return{...d,sidebarWidthIntent:m,sidebarWidthMode:h}}).on(a.lT,(d,r)=>{let{inspectorWidthIntent:m,inspectorWidthMode:h}=r;return{...d,inspectorWidthIntent:m,inspectorWidthMode:h}}).on(a.KY,(d,r)=>({...d,isSidebarVisible:r})).on(a.vm,(d,r)=>({...d,isSidebarVisibleWhenFloating:r})).on(a.FO,(d,r)=>({...d,isTeamSidebarVisible:r})).on(a.iJ,(d,r)=>({...d,userPrefersResponsiveSidebar:r}))},3674298388:(j,p,e)=>{"use strict";e.d(p,{In:()=>l,Vo:()=>o,r8:()=>i,xx:()=>_});var t=e(9829579108);const n=(0,t.Ay)(d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.sidebarWidthIntent});n.meta={name:"createSelector",key:"createSelectorgetSidebarWidthIntent",description:d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.sidebarWidthIntent}};const s=(0,t.Ay)(d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.sidebarWidthMode});s.meta={name:"createSelector",key:"createSelectorgetSidebarWidthMode",description:d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.sidebarWidthMode}};const a=(0,t.Ay)(d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.inspectorWidthIntent});a.meta={name:"createSelector",key:"createSelectorgetInspectorWidthIntent",description:d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.inspectorWidthIntent}};const c=(0,t.Ay)(d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.inspectorWidthMode});c.meta={name:"createSelector",key:"createSelectorgetInspectorWidthMode",description:d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.inspectorWidthMode}};const o=(0,t.Ay)(d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.isSidebarVisible});o.meta={name:"createSelector",key:"createSelectorgetIsSidebarVisible",description:d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.isSidebarVisible}};const i=(0,t.Ay)(d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.isSidebarVisibleWhenFloating});i.meta={name:"createSelector",key:"createSelectorgetIsSidebarVisibleWhenFloating",description:d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.isSidebarVisibleWhenFloating}};const l=(0,t.Ay)(d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.isTeamSidebarVisible});l.meta={name:"createSelector",key:"createSelectorgetIsTeamSidebarVisible",description:d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.isTeamSidebarVisible}};const _=(0,t.Ay)(d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.userPrefersResponsiveSidebar});_.meta={name:"createSelector",key:"createSelectorgetUserPrefersResponsiveSidebar",description:d=>{var r;return d==null||(r=d.workspaceLayout)===null||r===void 0?void 0:r.userPrefersResponsiveSidebar}}},2802517438:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(4096483543),n=e(8414867410),s=e(5084575109),a=e(4522919696),c=e(3080748521);const i=u(l=>{if((0,t.A)()){const _=(0,c.MC)(l),d=_&&_.entityId,r=(0,n.US)(d);return(0,n.l1)(l,r)?r.id:(0,s.n)(d)?Object.keys(a.F).find(m=>a.F[m]===d):d}return l&&l.workspace&&l.workspace.primaryViewId},"getPrimaryView")},9083290776:(j,p,e)=>{"use strict";e.d(p,{Gy:()=>d,HO:()=>n,Hu:()=>o,K$:()=>i,Lo:()=>c,fw:()=>l,j0:()=>m,k0:()=>r,lH:()=>h,nG:()=>a,ne:()=>_,xW:()=>v});var t=e(2140362605);const n=(0,t.Ay)("Sets the primary view in workspace store");n.meta={name:"createAction",key:"createActionsetPrimaryViewInternal",description:"Sets the primary view in workspace store"};const s=n.getType(),a=(0,t.Ay)("Sets the secondary view in workspace store");a.meta={name:"createAction",key:"createActionsetSecondaryViewInternal",description:"Sets the secondary view in workspace store"};const c=(0,t.Ay)("Sets the flexpane origin store");c.meta={name:"createAction",key:"createActionsetFlexOriginInternal",description:"Sets the flexpane origin store"};const o=(0,t.Ay)("Sets the flexpane restore store");o.meta={name:"createAction",key:"createActionsetFlexRestoreInternal",description:"Sets the flexpane restore store"};const i=(0,t.Ay)("Sets the focused workspaces from the client-store");i.meta={name:"createAction",key:"createActionsetRecentlyFocusedWorkspaces",description:"Sets the focused workspaces from the client-store"};const l=(0,t.Ay)("Sets an object where the key is a workspace id and the value is the timestamp reflecting the last time the workspace was focused");l.meta={name:"createAction",key:"createActionsetRecentlyFocusedWorkspacesTimestamps",description:"Sets an object where the key is a workspace id and the value is the timestamp reflecting the last time the workspace was focused"};const _=(0,t.Ay)("Sets the props we need to re-open the last flexpane");_.meta={name:"createAction",key:"createActionsetPreviousFlexpane",description:"Sets the props we need to re-open the last flexpane"};const d=(0,t.Ay)("Sets channelDetailsOpen");d.meta={name:"createAction",key:"createActionsetChannelDetailsOpen",description:"Sets channelDetailsOpen"};const r=(0,t.Ay)("Sets flexpane highlight state");r.meta={name:"createAction",key:"createActionsetFlexpaneHighlight",description:"Sets flexpane highlight state"};const m=(0,t.Ay)("Sets flexpane section currently docked");m.meta={name:"createAction",key:"createActionsetDockedFlexpaneSection",description:"Sets flexpane section currently docked"};const h=(0,t.Ay)("Add or remove from list expanded inputs");h.meta={name:"createAction",key:"createActionsetMessageInputExpanded",description:"Add or remove from list expanded inputs"};const v=(0,t.Ay)("Sets the last tab for a given channel id");v.meta={name:"createAction",key:"createActionsetLastTabForChannelId",description:"Sets the last tab for a given channel id"}},5215813485:(j,p,e)=>{"use strict";e.d(p,{A:()=>m,U:()=>d});var t=e(8734174229),n=e(1031947056),s=e(5468652247),a=e(359615813),c=e(7610481478),o=e(5221490142),i=e(5737576046),l=e(7884000776),_=e(8439865561),d;(function(h){h.fancy="fancy",h.frowny="frowny",h.neutral="neutral",h.sadSurprise="sad_surprise"})(d||(d={}));const r=(0,n.Ay)("Add ephemeral feedback message to channel or thread",(h,v,y)=>{const{message:I,inputText:T,inputDelta:f,ephemeralType:g,ignoreExistingMessage:M}=y,A=y.temporary!==!1,O=I.channel,D=I.thread_ts,E=D?s.F.threadsTempSlashCmdFeedback:s.F.tempSlashCmdFeedback;if((T||f)&&O)if(D)(0,t.A)({inputText:T,inputDelta:f,channelId:O,threadTs:D});else{const C=(0,i.zC)({viewContext:l.Y.MESSAGE_PANE,channelId:O});C&&(f?C.setContents({contents:f.ops}):T&&C.setText(T))}A?h((0,c.w)({ephemeralType:g||E,message:I,ignoreExistingMessage:M})):(h((0,o.P)({ephemeralType:g||E,channelId:O})),h((0,a.F)({message:I}))),I!=null&&I.text&&h((0,_.rl)({message:I.text}))});r.meta={name:"createThunk",key:"createThunkaddEphemeralFeedback",description:"Add ephemeral feedback message to channel or thread"};const m=r},1116859610:(j,p,e)=>{"use strict";e.d(p,{A:()=>A});var t=e(2101927269),n=e(8840779375),s=e(3750057149),a=e(1031947056),c=e(9536404279),o=e(4350638406),i=e(10127715),l=e(3521202413),_=e(8847766420),d=e(3110884894),r=e(8040098042),m=e(6739248722),h=e(2791814261),v=e(4587446194),y=e(796111729),I=e(9190452268),T=e(1284885799),f=e(3528815215),g=e(5751973043);const M=(0,a.Ay)("Add messages from history",(O,D,E)=>{let{msgs:C,channelId:S,isLimited:b,latest:k,oldest:W,hasMore:N,loading:V,forceUnreadCount:R,deleted:P=[]}=E;const z=D(),$=(0,I.Cy)({getState:D});(0,h.L)(z)&&$.mark("rmsgs_addMessagesFromHistory");const x=(0,t.A)(C,_e=>{const G=(0,m.k)(z,{channelId:S,ts:_e.ts});return G&&(0,y.Ay)({getState:D}).warn(`Filtering out ${_e.ts} in ${S} history response because it was deleted`),!G}),Y=b?C.filter(_e=>_e.is_beyond_free_limit).map(_e=>_e.ts):g.Ml,ne=(0,n.A)(x,"ts"),re=(0,r.A)(S)?S:(0,d.Sb)(S).channelId;re&&(0,o.mY)((0,_.ZT)(z),re,ne),O((0,i.tT)(x)),O((0,c.VG)({channelId:S,timestamps:ne,isLimited:b,blurredMessages:Y,latest:k,oldest:W,hasMore:N,loading:V,forceUnreadCount:R})),(0,s.A)(V)&&O(V?(0,T.v)({channelId:S,loadingOlder:!!k}):(0,f.f)({channelId:S})),(0,h.L)(z)&&$.measureAndClear("rmsgs_addMessagesFromHistory","rmsgs_addMessagesFromHistory"),P.forEach(_e=>O((0,l.j)({deleted_ts:_e,channel:re}))),x.forEach(_e=>(0,v.IY)(D,O,_e,_e))});M.meta={name:"createThunk",key:"createThunkaddMessagesFromHistory",description:"Add messages from history"};const A=M},8243624171:(j,p,e)=>{"use strict";e.d(p,{Fj:()=>W,Vq:()=>k});var t=e(9706240641),n=e.n(t),s=e(6422693406),a=e(1069376685),c=e(4446301238),o=e(5274604535),i=e(5373179915),l=e(8170643398),_=e(5096647761),d=e(148278831),r=e(6536982570),m=e(2023092677),h=e(5184226701),v=e(3339229351),y=e(4327331459),I=e(4862221402),T=e(1031947056),f=e(1761027239),g=e(4761125736),M=e(8276911661),A=e(3730613858);const O=u((N,V)=>V.map(R=>R.pasted&&!R.entity?{value:R.value,entity:(0,M.nv)(N,R.value)}:R),"getMemberInfoForPastedMembers"),D=u(N=>{const V=N.entity||{};return(0,y.A)(N==null?void 0:N.value)||(0,l.NB)(V)},"isAMember"),E=u(N=>{const V=N.entity||{};return(0,I.A)(N.value)||(0,m.PH)(V)},"isAUserGroup"),C={[v.IS.ALREADY_IN_CHANNEL]:!0,[v.IS.CANNOT_INVITE_SELF]:!0,[v.IS.ALREADY_IN_CHANNEL_UG]:!0},S={},b=u(N=>{let{shouldPreserve:V,teamId:R}=N;S[R]=V},"setShouldPreserveModalsOnNavigation"),k=u(N=>{let{teamId:V}=N;return S[V]},"getShouldPreserveModalsOnNavigation"),W=(0,T.Ay)("Add users and user groups to channel",function(){var N=(0,t.coroutine)(function*(V,R,P){let{selectedMembers:z,addMemberMode:$,channel:x,keepChannelHistory:Y,teamId:ne,shouldSkipInitialStage:re}=P;const _e={channelId:x.id,force:!0,reason:"submit-invite-channel-invite-modal"};let G,ge;if($===a.D.AllMembers)_e.inviteAll=!0,G=[],ge=[];else{const ee=O(R(),z),J=(0,o.A)(R(),x),X=(0,i.R)(R(),x);G=ee.reduce((F,L)=>{if(L&&D(L)&&L.entity){const K=L,B=(0,A.Sv)(R(),x.id,K.value);if(!B.isKnown||!B.isMember){const Q=(0,r.dQ)(K.entity),q=(0,d.S)(R(),K.entity,x);(X||(0,_.g)(K.entity)&&Q&&J.includes(Q)||q)&&F.push(K.value)}}return F},[]),_e.users=G.join(","),ge=z.reduce((F,L)=>(L&&E(L)&&F.push(L.value),F),[]),_e.subteams=ge.join(",")}const oe=_e.inviteAll||!!_e.users||!!_e.subteams,me=(0,g._Z)(R(),"shared_channel_invite_requested_event")==="on",ue={addedExistingMembers:oe,userInviteResults:G.map(ee=>({ok:!0,invitee:ee,inviteeType:h.T0.User,accessType:h.BD.Member,error:""})),groupInviteResults:ge.map(ee=>({ok:!0,invitee:ee,inviteeType:h.T0.UserGroup,accessType:h.BD.Member})),newChannelId:void 0};let ae;try{if(Y)oe&&(yield V((0,c.Cw)(_e)).then(ee=>{const{requested_invites:J=[]}=ee;ae=J}),me&&(ue.userInviteResults=ue.userInviteResults.map(ee=>{const J=ae.find(X=>X.user_id===ee.invitee);return{...ee,accessType:J?h.BD.SharedChannel:ee.accessType,inviteeType:J?h.T0.Email:ee.inviteeType,...me&&{isRequestedInvite:!!J}}})));else{b({shouldPreserve:!re,teamId:ne}),_e.propagateInviteResult=!0;const{channel:ee}=yield V((0,f.t)(_e));ue.newChannelId=ee.id,b({shouldPreserve:!1,teamId:ne})}}catch(ee){var he;b({shouldPreserve:!1,teamId:ne});const J=ee==null||(he=ee.data)===null||he===void 0?void 0:he.errors;if(!J){var ce;if(!C[ee==null||(ce=ee.data)===null||ce===void 0?void 0:ce.error])throw ee}J==null||J.forEach(X=>{if(C[X.error])return;const F=ue.userInviteResults.filter(K=>K.invitee===X.user);if(F.length)F[0].ok=!1,F[0].error=X.error;else if(z.length===1&&!X.user&&re){var L;ue.userInviteResults=[{ok:!1,invitee:(L=z[0])===null||L===void 0?void 0:L.value,inviteeType:h.T0.User,error:X.error,accessType:h.BD.Member}]}else ue.userInviteResults.push({ok:!1,invitee:X.user,inviteeType:h.T0.User,error:X.error,accessType:h.BD.Member})})}return s.S.resolve(ue)});return function(V,R,P){return N.apply(this,arguments)}}());W.meta={name:"createThunk",key:"createThunkaddUsersAndGroupsToChannel",description:"Add users and user groups to channel"}},5661379004:(j,p,e)=>{"use strict";e.d(p,{r:()=>_});var t=e(1031947056),n=e(8620339321),s=e(6533394955),a=e(6695353875),c=e(5223893135),o=e(8646192222);const i=(0,t.Ay)("Go back in history in fullscreen mode",(d,r)=>{window.history.back()});i.meta={name:"createThunk",key:"createThunkgoBackInFullscreenMode",description:"Go back in history in fullscreen mode"};var l=e(4326266690);const _=(0,t.Ay)("Go back in history",(d,r)=>{const m=r(),h=(0,a.yZ)(m),v=(0,o.iB)(m),y=(0,c.V)(m);if(v&&y)return d(i());if(h){(0,l.ud)((0,s.getStateForClientStore)())||(0,s.dispatchForClientStore)((0,n.oX)());return}window.history.back()});_.meta={name:"createThunk",key:"createThunkgoBackInWindowHistory",description:"Go back in history"}},7606925238:(j,p,e)=>{"use strict";e.d(p,{h:()=>s});var t=e(1031947056),n=e(6695353875);const s=(0,t.Ay)("Go forward in history",(a,c)=>{const o=c();(0,n.yZ)(o)||window.history.forward()});s.meta={name:"createThunk",key:"createThunkgoForwardInWindowHistory",description:"Go forward in history"}},8496310524:(j,p,e)=>{"use strict";e.d(p,{I:()=>c,u:()=>a});var t=e(5751973043),n=e(7969244833),s=e(9101533895);const a=u(o=>(o==null?void 0:o.name)||"","getActionName"),c=u((o,i,l)=>{const _=!l;let d=t.Ml;if(l){const r=(0,s.OL)(o,l);d=r&&(0,n.f)(o,r)||t.Ml}return i.teams&&(d.length||_)&&!i.isWorkspaceAgnostic?_?i.teams:i.teams.filter(m=>d.includes(m)):t.Ml},"getActionRelatedWorkspaces")},3982416567:(j,p,e)=>{"use strict";e.d(p,{O4:()=>a,OB:()=>o});var t=e(937317117),n=e(5597672932);const s="canvas_version_history_enabled",a=u(i=>(0,n.x)(i,s),"getCanvasVersionHistoryEnabledTeamPref"),c=u((i,l)=>{const _=(0,t.Lp)(i,l);return _?_.team_pref_version_history_enabled:!1},"getOwnerCanvasVersionHistoryEnabledTeamPref"),o=u((i,l)=>l?!!a(i)&&!!c(i,l):!1,"isCanvasVersionHistoryEnabled")},2063075339:(j,p,e)=>{"use strict";e.d(p,{Z:()=>a});var t=e(1407713935),n=e(6007206761),s=e(6113051341);const a=u((c,o)=>!(0,t.JM)(o)&&!(0,n.F)(o)&&!(0,s.N)(o),"canBeExternallyShared")},2912967402:(j,p,e)=>{"use strict";e.d(p,{B2:()=>i,Bw:()=>v,CM:()=>m,FA:()=>_,Jr:()=>h,Kg:()=>g,QS:()=>o,Vp:()=>T,bS:()=>f,bw:()=>l,oP:()=>r});var t=e(3078252698),n=e(735940183),s=e(4724591729),a=e(796111729);const c=new n.Ay("channels"),o=250,i=250;function l(A){return(0,t.A)(A)?A.length>o:((0,s.Cu)()&&(0,a.Wo)().warn("Argument `topic` passed to `channelTopicExceedsLimit()` is not a string"),!1)}u(l,"channelTopicExceedsLimit");const _="too_long",d="restricted_action",r="user_is_restricted",m="method_not_supported_for_channel_type",h="method_not_supported_for_dm";function v(A){switch(A){case _:return c.t("Channel topics can only include up to {max} characters \u2014 please make this topic shorter.",{max:o});case d:case r:return c.t("It looks like you don\u2019t have permission to change the channel topic. Please check with your workspace admin.");case m:return c.t("It\u2019s not possible to set a topic here, unfortunately.");case h:return c.t("Regrettably, direct messages do not have topics.");default:return c.t("It looks like setting the channel topic didn\u2019t work, for some reason. Try again?")}}u(v,"getChannelTopicError");const y="too_long",I="restricted_action",T="user_is_restricted",f="method_not_supported_for_channel_type",g="method_not_supported_for_dm";function M(A){switch(A){case y:return c.t("That purpose is too long. Please try again with fewer than {max} characters.",{max:i});case I:case T:return c.t("Uh oh! You don\u2019t have permission to change the purpose. Talk to your workspace admin.");case f:return c.t("It\u2019s not possible to set a purpose here, unfortunately.");case g:return c.t("Regrettably, direct messages do not have purposes.");default:return c.t("Uh oh! Something went wrong with setting the purpose. Please try again.")}}u(M,"getChannelPurposeError")},8243083011:(j,p,e)=>{"use strict";e.d(p,{q:()=>i});var t=e(3677514771),n=e(9101533895),s=e(1407713935),a=e(6113051341),c=e(6839188756),o=e(8040098042);const i=u((l,_)=>{if(!_||!(0,o.A)(_))return!1;const d=(0,t.H7)(l),r=(0,n.OL)(l,_),m=(0,s.JM)(r),h=(0,a.N)(r),v=(0,c.Ny)(d);return!(m||!v&&!h)},"doBroadcastKeywordPrefsApplyForChannel")},4559887502:(j,p,e)=>{"use strict";e.d(p,{i:()=>s});var t=e(9289081806),n=e(1407713935);const s=u((a,c)=>{if((0,n.JM)(c)||!a)return!1;const o=(0,t.mG)(c),i=o?a.get(o):null;return i?(i==null?void 0:i.length)>1:!1},"doesChannelHaveNonUniqueName")},7868634217:(j,p,e)=>{"use strict";e.d(p,{Z:()=>l,Y:()=>_});var t=e(5751973043),n=e(8701485242),s=e(8921478798),a=e(8276911661),c=e(3037015781),o=e(9262712126);function i(d,r,m){const h=!m;var v;const y=(v=(0,a.nv)(d,r,{preferNonExistentToNull:!1,fetchIfMissing:h}))!==null&&v!==void 0?v:void 0;return!y||m&&(0,c.mX)(y)?r:(0,o.wg)(y)}u(i,"getRealMemberNameById");const l=u((d,r)=>r?r.map(m=>({id:m,name:(0,s.I)(d,m)})).sort((m,h)=>(0,n.Ay)(m.name,h.name)).map(m=>m.id):t.Ml,"getAlphabeticallySortedMemberIds"),_=u((d,r)=>!r||!r.length?t.Ml:r.map(m=>({id:m,name:i(d,m)})).sort((m,h)=>(0,n.Ay)(m.name,h.name)).map(m=>m.id),"getRealNameAlphabeticallySortedMemberIds")},6045879501:(j,p,e)=>{"use strict";e.d(p,{H:()=>t});function t(n){return n&&n.emoji}u(t,"getEmojiCollectionEmoji")},370406050:(j,p,e)=>{"use strict";e.d(p,{M:()=>t});function t(n){return n&&n.name}u(t,"getEmojiCollectionName")},5071545805:(j,p,e)=>{"use strict";e.d(p,{j:()=>t});function t(n){return n&&n.installed}u(t,"isEmojiCollectionInstalled")},3890290905:(j,p,e)=>{"use strict";e.d(p,{Y:()=>t});const t=u(n=>n&&n.name,"getEmojiName")},4282439381:(j,p,e)=>{"use strict";e.d(p,{x:()=>n});var t=e(4761125736);const n=u(s=>(0,t._Z)(s,"a11y_emoji_group")==="on","isEmojiGroupEnabled")},6247499644:(j,p,e)=>{"use strict";e.d(p,{q:()=>t});function t(n){return/^[a-zA-Z0-9\u00E0\u00E1\u00E2\u00E4\u00E3\u00E8\u00E9\u00EA\u00EB\u00ED\u00EE\u00EF\u00F3\u00F6\u00F4\u00F5\u0153\u00FA\u00F9\u00FB\u00FC\u00FF\u00E7\u00DF\u00F1\u00C0\u00C1\u00C2\u00C4\u00C3\u00C8\u00C9\u00CA\u00CB\u00CD\u00CE\u00CF\u00D3\u00D6\u00D4\u00D5\u0152\u00DA\u00D9\u00DB\u00DC\u0178\u00C7\u00D1\uFF41-\uFF5A\uFF10-\uFF19-_+'\uFF3F\uFF0B\u30FC\u3005\u3041-\u3096\u30A0-\u30FF\uFF61-\uFF9F\u3400-\u4DB5\u4E00-\u9FFF\u2E80-\u2FD5\u1100-\u11FF\uA960-\uA97F\uAC00-\uD7A3\uD7B0-\uD7FF\u3139-\u318F\uF900-\uFAFF\u0400-\u04FF\u0500-\u052F]*$/.test(n)}u(t,"isValidEmojiName")},102566929:(j,p,e)=>{"use strict";e.d(p,{Fh:()=>_,Iz:()=>l,gC:()=>i});var t=e(9829579108),n=e(937317117),s=e(497761763),a=e(6078549397),c=e(5333401344);const o=(0,t.Ay)((d,r)=>{const{fileIdOrQuipThreadId:m}=(0,a.EX)(r);if((0,s.A)(m)){var h;return(h=(0,n.Lp)(d,m))!==null&&h!==void 0?h:null}return null});o.meta={name:"createSelector",key:"createSelectormaybeGetFileByCompoundId",description:(d,r)=>{const{fileIdOrQuipThreadId:m}=(0,a.EX)(r);if((0,s.A)(m)){var h;return(h=(0,n.Lp)(d,m))!==null&&h!==void 0?h:null}return null}};const i=(0,t.Ay)((d,r)=>{const m=o(d,r);return m&&(0,c.uz)(m)?m:null});i.meta={name:"createSelector",key:"createSelectormaybeGetExistentFileByCompoundId",description:(d,r)=>{const m=o(d,r);return m&&(0,c.uz)(m)?m:null}};function l(d){return d.linked_channel_id}u(l,"getLinkedChannelId");function _(d){return["spaces-example-onboarding-canvas","spaces-example-team-meeting"].includes(d)}u(_,"isSampleCanvas")},6470070112:(j,p,e)=>{"use strict";e.d(p,{$t:()=>Cn,$z:()=>rn,A5:()=>en,Bn:()=>Ce,F7:()=>Rn,Fm:()=>Qe,Ft:()=>xe,Gb:()=>pe,Gf:()=>qe,J6:()=>Be,K8:()=>be,Lb:()=>Jt,MY:()=>bt,NZ:()=>Z,Pn:()=>le,Qj:()=>ht,Qw:()=>kt,R1:()=>gt,R8:()=>cn,RW:()=>pt,Rc:()=>Vt,S9:()=>zt,TA:()=>Ot,U6:()=>at,UA:()=>In,UE:()=>Oe,Ul:()=>Et,VQ:()=>St,Vh:()=>yn,WH:()=>Xt,Wd:()=>_t,Xx:()=>Le,ZP:()=>It,bD:()=>mt,cq:()=>st,df:()=>Zt,eu:()=>it,ew:()=>Qt,gG:()=>tt,gO:()=>tn,hp:()=>un,hv:()=>At,kn:()=>fn,oz:()=>ze,pZ:()=>We,pl:()=>se,pt:()=>De,pw:()=>Ft,qp:()=>Kt,r5:()=>et,rl:()=>Bt,sp:()=>vn,sx:()=>Ge,uc:()=>Yt,uz:()=>ke,vw:()=>Te,w1:()=>ct,wc:()=>Rt,wu:()=>pn,xe:()=>on,xv:()=>je,xz:()=>fe});var t=e(9113979368),n=e(8571983633),s=e(1703559452),a=e(2101927269),c=e(7174777686),o=e(5333401344),i=e(5795074931),l=e(8170643398),_=e(9262712126),d=e(3479134063),r=e(9101533895),m=e(7067820909),h=e(4761125736),v=e(5761207079),y=e(5597672932),I=e(2047021170),T=e(8163773562),f=e(387328355),g=e(9548972574),M=e(6251210828),A=e(9712681361),O=e(6007206761),D=e(395285811),E=e(4630136761),C=e(4262121634),S=e(9289081806),b=e(8798294025),k=e(1407713935),W=e(4827886670),N=e(6533394955),V=e(5332875232),R=e(92886754),P=e(8276911661),z=e(8286248123),$=e(8233775522),x=e(7366481123),Y=e(1990810649),ne=e(9680914051),re=e(9744874022),_e=e(571104883),G=e(735940183),ge=e(8921478798),oe=e(5286203919),me=e(462591818),ue=e(4159322694),ae=e(3848681746),he=e(6575028637),ce=e(8645544190),ee=e(1766818988),J=e(279118289),X=e(7884000776),F=e(3474336343),L=e(6827180593),K=e(1340402138),B=e(1289024643),Q=e(6839188756),q=e(3677514771),le;(function(Fe){Fe.EXTERNALLY_SHARED_CHANNEL="externally_shared_channel",Fe.ADMIN_DISABLED="admin_disabled",Fe.UNSUPPORTED_BROWSER="unsupported_browser"})(le||(le={}));var Te;(function(Fe){Fe[Fe.BROWSER=1]="BROWSER",Fe[Fe.MAC=2]="MAC",Fe[Fe.WINDOWS=3]="WINDOWS"})(Te||(Te={}));const Ie=new G.Ay("huddles"),De=(0,J.A)(Fe=>{const Xe=(0,K.R)(Fe);return(((0,he.ss)(Fe)?gn(Fe,"allow_huddles"):(0,y.x)(Fe,"allow_huddles"))||!1)&&!Xe});var pe;(function(Fe){Fe.ACTIVE="active",Fe.INACTIVE_BUT_LIVE="inactive-but-live",Fe.MISSED="missed"})(pe||(pe={}));function fe(Fe,Xe){if(!Xe)return[!1,void 0];if((0,D.jT)(Xe))return[!1,void 0];const Me=De(Fe),U=Me||(0,ee.I)(Fe,Xe.id);if(!Me&&!(0,ee.I)(Fe,Xe.id))return[!1,le.ADMIN_DISABLED];if(!(0,o.uz)(Xe)||(0,C.V)(Fe,Xe)||(0,S.Gh)(Fe,Xe.id)||!(0,W.E)(Fe,Xe.id)&&!(0,k.PC)(Xe)||(0,S.bU)(Xe)||(0,O.F)(Xe)||(0,E.Zz)(Xe)||(0,ue.M)(Xe)||(0,S.dq)(Fe,Xe)||!U)return[!1,void 0];if((0,R.yh)())return[!1,le.UNSUPPORTED_BROWSER];const H=(0,h._Z)(Fe,"huddles_channel_properties")==="on";let te=!1;if(H){var de;te=!!(!(Xe==null||(de=Xe.properties)===null||de===void 0)&&de.huddles_restricted)}else{const Ye=(0,T.d)(Fe,Xe.id,"can_huddle");te=Ye&&(Ye==null?void 0:Ye.enabled)===!1}const Re=$t(Fe,Xe.id);return te?[!1,le.ADMIN_DISABLED]:Re===!1?[!1,le.ADMIN_DISABLED]:[!0,void 0]}u(fe,"doesChannelSupportHuddlesWithReason");const Z=u(()=>{const Fe=(0,N.getClientStoreInstance)();if(!Fe)return!1;const Xe=Fe.getState(),Me=(0,oe.Ak)(Xe);return!(0,t.A)(Me)},"hasActiveHuddleReferenceInClientStore"),se=u(Fe=>{const Xe=De(Fe),Me=Z();return Xe||Me},"isHuddleEnabledOrHasActiveHuddle");function Ae(Fe,Xe){var Me;const U=(Me=getMemberById(Fe,Xe))!==null&&Me!==void 0?Me:void 0;return!isBotUser(U)&&!isSlackbot(U)&&!isExternal(U)}u(Ae,"canUserBeInvitedToHuddle");function Ce(Fe,Xe){return fe(Fe,Xe)[0]}u(Ce,"doesChannelSupportHuddles");function Le(Fe,Xe){return De(Fe)?(0,g.LY)(Fe,Xe)>0:!1}u(Le,"doesChannelHaveHuddle");function Ue(Fe,Xe){const Me=getDisplayNameForChannel(Fe,Xe,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1});let U=[],H="";if(isMpim(Xe))U=getMpimMembersInAlphabeticalOrder(Fe,Xe)||[],H="Waiting for others...";else if(isIm(Xe)){const Re=getMemberIdFromIm(Xe);Re&&U.push(Re),H=`Waiting for ${Me}`}else return Me;const te=getAllConnectedPeers(Fe)||[];if(te.length===0)return H;const de=te.map(Re=>Re.userId);return U.filter(Re=>de.includes(Re)).map(Re=>getPrefCompliantMemberNameById(Fe,Re)).join(", ")}u(Ue,"getDisplayNameActiveParticipants");const Pe=new Set([x.vT.SpeakingWhenMuted,x.vT.UpdateSlack,x.vT.RemotePeerMuted,x.vT.RemotePeerSlowConnection,x.vT.ScreenShareFreeTeam,x.vT.NoGroupCallsForFreeTeam,x.vT.PeerMuteRequest]),He=new Set([x.vT.SpeakingWhenMuted,x.vT.UpdateSlack,x.vT.RemotePeerMuted,x.vT.RemotePeerSlowConnection,x.vT.ScreenShareFreeTeam,x.vT.NoGroupCallsForFreeTeam]);function Qe(Fe){return(0,x.xw)(Fe).find(Me=>!Pe.has(Me.type))}u(Qe,"getAlertForHuddlesBanner");function lt(Fe){return se(Fe)&&!!Qe(Fe)}u(lt,"shouldShowHuddlesBanner");function qe(Fe){const Xe=(0,N.getStateForClientStore)();return lt(Fe)&&!(0,oe.j)(Xe)}u(qe,"shouldShowHuddlesBannerInWorkspace");function ct(Fe,Xe,Me){const U=(0,g.LY)(Fe,Xe),H=(0,r.OL)(Fe,Xe),te=(0,k.mz)(H)||void 0,de=(0,N.getStateForClientStore)(),{callId:Re}=(0,oe.Qn)(de)||{};return{channel_id:Xe,channel_type:te,num_participants:U,is_recommended:Me,room_id:Re}}u(ct,"getHuddlesClogContext");function tt(Fe,Xe){return{...ct(Fe,Xe),window_focused:(0,$.ko)(Fe),window_visible:(0,m.Sr)(Fe)}}u(tt,"getHuddlesClogContextForBackgroundActions");function it(Fe){return[A.RJ.STARTING,A.RJ.PENDING,A.RJ.COMPLETING_PRE_JOIN].includes(Fe)}u(it,"isHuddleLoadingState");function Ge(Fe){return it(Fe)||Fe===A.RJ.STARTED}u(Ge,"isHuddleActiveState");function We(Fe){return it(Fe)||Fe===A.RJ.ENDING}u(We,"isHuddleTransitionState");function xe(Fe){return[A.RJ.NOT_STARTED,A.RJ.SURVEY,A.RJ.SURVEY_GOOD].includes(Fe)}u(xe,"isHuddleEndState");function ze(Fe){return[A.RJ.SURVEY,A.RJ.SURVEY_GOOD].includes(Fe)}u(ze,"isHuddleSurveyState");function mt(Fe,Xe){const Me=(0,i.WR)(Fe);return!!(0,g.ft)(Fe,Xe).find(U=>{let{id:H}=U;return H===Me})}u(mt,"isUserHuddlingInChannel");function pt(Fe){var Xe;const Me=Fe==null||(Xe=Fe.meeting)===null||Xe===void 0?void 0:Xe.ExternalMeetingId;var U;return(U=Me==null?void 0:Me.split("-")[1])!==null&&U!==void 0?U:null}u(pt,"getRoomIdFromCredentials");function It(Fe,Xe,Me){if(!Xe)return!1;const U=(0,S.Mi)((0,r.Pu)(Fe,Xe.id));return!(!De(Fe)||!(0,o.uz)(Xe)||(0,l.fy)(Xe)&&!Me||!(0,l.ls)(Xe)||U)}u(It,"canHuddleWithMember");function bt(Fe){return Fe===A.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE||Fe===A.J_.INITIAL_ALONE_NOTICE_ACTIVE}u(bt,"isAloneInHuddleCoachmarkOpen");function gt(Fe){return Fe===A.J_.INITIAL_ALONE_NOTICE_DISMISSED||Fe===A.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED}u(gt,"isAloneInHuddleCoachmarkDismissed");function ht(Fe,Xe,Me){var U,H;if(Xe===null||(0,g.LY)(Fe,Xe)>0||((U=(0,oe.aQ)((0,N.getStateForClientStore)()))===null||U===void 0?void 0:U.channelId)===Xe)return!1;const te=(0,r.OL)(Fe,Xe);if(!te||!(0,o.uz)(te))return!1;if(Me)return!0;if(!te||(0,k.JM)(te))return!1;const de=(0,z.q8)(Fe,Xe),Re=(0,I.ty)(Fe,"huddles_show_shouty_rooster"),Ye=de==null||(H=de.counts)===null||H===void 0?void 0:H.member_count;return!(!Ye||Ye<=ne.Qp||Re===!1)}u(ht,"shouldShowHuddlesShoutyRoosterWarning");function Zt(Fe){return(0,V.nC)(Fe)?ne.yL:ne.$s}u(Zt,"getParticipantLimit");function rn(){return(0,_e.cX)()?(0,_e.y3)()?Ie.t("Command + Shift + H"):Ie.t("Command + Shift + Option + H"):(0,_e.y3)()?Ie.t("Ctrl + Shift + H"):Ie.t("Ctrl + Shift + Alt + H")}u(rn,"getHuddleToggleKeyboardShortcutString");const zt=u((Fe,Xe,Me)=>{const U=De(Fe)&&(0,V.Ms)(Fe);if(Xe)return U&&It(Fe,Xe);if(Me){const H=(0,r.OL)(Fe,Me),te=H&&Ce(Fe,H);return U&&te}return U},"shouldShowCallMenuHuddleDiscoveryLink"),In=u((Fe,Xe)=>(0,n.A)(Xe)?(0,y.x)(Fe,"allow_huddles_transcriptions")||!1:(0,he.ss)(Fe)?hn(Fe,"allow_huddles_transcriptions",Xe):(0,y.x)(Fe,"allow_huddles_transcriptions")||!1,"isHuddlesTranscriptionsEnabledForChannel"),cn=u(Fe=>(0,he.ss)(Fe)?gn(Fe,"allow_huddles_transcriptions"):(0,y.x)(Fe,"allow_huddles_transcriptions")||!1,"isHuddlesTranscriptionsEnabledForOrgWorkspaces"),Jt=u((Fe,Xe)=>{const Me=(0,i.WR)(Fe);return(0,P.nv)(Fe,(0,f.fy)(Xe)?Me:Xe.userId)},"getMemberFromPeer"),dn=u((Fe,Xe)=>(0,v.a)(Fe,Xe==null?void 0:Xe.id)?Ie.t("Name hidden"):(0,_.wg)(Xe)||(0,_.Fh)(Xe),"getMemberName"),sn=u((Fe,Xe)=>{const Me=getCurrentUserId(Fe);if(isSelfPeerId({id:Xe}))return getMemberById(Fe,Me);const U=getPeerById(Fe,Xe);if(U)return Jt(Fe,U)},"getMemberFromPeerId"),Xt=u((Fe,Xe)=>{const Me=Jt(Fe,Xe);return dn(Fe,Me)},"getMemberNameFromPeer"),xt=u((Fe,Xe)=>{if(!Xe)return;const Me=sn(Fe,Xe);return dn(Fe,Me)},"getMemberNameFromPeerId"),en=u((Fe,Xe)=>{const Me=(0,P.nv)(Fe,Xe);return dn(Fe,Me)},"getMemberNameFromUserId"),un=u((Fe,Xe)=>{const Me=(0,P.nv)(Fe,Xe);return(0,l.fD)(Me)},"getMemberPronounsFromUserId"),yn=u(Fe=>{let{state:Xe,roomId:Me}=Fe;const U=(0,g.P_)(Xe,Me);return!U||U.hasEnded?!1:U.allParticipants.length===0?!0:!(U.allParticipants.length>0&&U.activeParticipants.length===0)},"isHuddleActive"),ut=u(Fe=>{let{state:Xe,roomId:Me}=Fe;const U=(0,g.P_)(Xe,Me);return!U||!!U.hasEnded},"isHuddleEnded"),Ot=u(Fe=>{let{state:Xe,roomId:Me,userId:U}=Fe;if(!Me||!U||!yn({state:Xe,roomId:Me}))return!1;const H=(0,g.P_)(Xe,Me);return H?(0,s.A)(H.activeParticipants,te=>(0,me.MZ)(te)&&te.slackId===U):!1},"isUserInActiveHuddle"),kt=u((Fe,Xe)=>{if(!Xe||!(0,V.Z0)(Fe))return!1;const Me=(0,B.H6)(Fe,Xe);if(!Me)return!1;const U=(0,i.WR)(Fe);return(0,V.Z0)(Fe)&&!!Me.hasEnded&&U in(Me.missedParticipants||{})},"getDidUserMissHuddleInvite"),be=u((Fe,Xe)=>{switch(!0){case yn({state:Fe,roomId:Xe}):return pe.ACTIVE;case!ut({state:Fe,roomId:Xe}):return pe.INACTIVE_BUT_LIVE;case kt(Fe,Xe):return pe.MISSED;default:return}},"getHuddleActivityStatus"),Kt=u(Fe=>{let{state:Xe,roomId:Me,userId:U}=Fe;if(!Me||!U||yn({state:Xe,roomId:Me}))return!1;const H=(0,g.P_)(Xe,Me);return H?(0,s.A)(H.allParticipants,te=>(0,me.MZ)(te)&&te.slackId===U):!1},"wasUserInEndedHuddle"),Vt=u(Fe=>{let{participantsIds:Xe,userIdsToExclude:Me}=Fe;return!Xe||!Xe.length?[]:(0,a.A)(Xe,U=>!(0,c.A)(Me,U))},"getParticipantIdsFiltered"),on=u(Fe=>{let{state:Xe,channel:Me,roomId:U}=Fe;if(!Me||!U||!(0,k.LI)(Me))return!1;const H=(0,b.e)(Me),te=(0,g.P_)(Xe,U);return te?!Ot({state:Xe,roomId:U,userId:H})&&(0,s.A)(te.allParticipants,de=>(0,me.MZ)(de)&&de.slackId===H):!1},"hasImUserJoinedAndLeft"),pn=u((Fe,Xe)=>{if(!Xe)return!1;const Me=(0,r.OL)(Fe,Xe);if(!Me)return!1;const U=Ce(Fe,Me);return!!Me&&!(0,S.Ur)(Me)&&!(0,C.V)(Fe,Me)&&!!U},"isValidChannelForHuddleNux"),et=u((Fe,Xe)=>{let{channelId:Me}=Xe;if(!Me)return!1;const U=(0,N.getStateForClientStore)(),te=(0,oe.hc)(U)===Me;return mt(Fe,Me)&&!te},"isUserHuddlingOnAnotherDevice"),At=u(Fe=>{let{isDM:Xe,escImOrMpimMemberIds:Me,huddlesDisabledUserIds:U}=Fe;return Xe&&Me&&U&&U.length===1&&U[0]===Me[0]},"isHuddleDisabledForDM"),Rt=u(Fe=>{let{isMPDM:Xe,escImOrMpimMemberIds:Me,huddlesDisabledUserIds:U}=Fe;return Xe&&Me&&U&&U.length===Me.length-1},"isHuddleDisabledForMPDM"),Ft=u(()=>(0,ce.xY)()?(0,_e.cX)()?Te.MAC:Te.WINDOWS:Te.BROWSER,"getTitlebarVariant");function $t(Fe,Xe){return hn(Fe,"allow_huddles",Xe)}u($t,"getIsHuddlesAllowedTeamPrefForChannel");function vn(Fe,Xe){return(0,n.A)(Xe)?(0,y.x)(Fe,"allow_huddles_video")||!1:(0,he.ss)(Fe)?hn(Fe,"allow_huddles_video",Xe):(0,y.x)(Fe,"allow_huddles_video")||!1}u(vn,"isHuddlesVideoEnabledForChannel");function Rn(Fe){return(0,he.ss)(Fe)?gn(Fe,"allow_huddles_video"):(0,y.x)(Fe,"allow_huddles_video")||!1}u(Rn,"isHuddlesVideoEnabledForOrgWorkspaces");function hn(Fe,Xe,Me){if((0,he.ss)(Fe)){const U=(0,r.OL)(Fe,Me);return(0,k.QR)(U)?(0,ae.p$)(Fe,Xe):(0,ae.Bx)(Fe,Xe,Me)}return(0,y.x)(Fe,Xe)||!1}u(hn,"getIsHuddlesOrgAllowedPrefEnabledForChannel");function gn(Fe,Xe){return(0,ae.p$)(Fe,Xe)}u(gn,"isCurrentUserWhoCanDoTeamPrefOnSelfWorkspaces");function Cn(Fe,Xe){let{huddleId:Me}=Xe;var U;const H=(0,M.fG)(Fe,{huddleId:Me});return{canvas_thread_channel_id:H==null?void 0:H.channelId,canvas_thread_id:H==null||(U=H.ts)===null||U===void 0?void 0:U.replace(".","")}}u(Cn,"getHuddleClogContext");function fn(Fe){return{canvas_huddle_session_id:(0,oe.oK)(Fe)}}u(fn,"getHuddleClogClientContext");function Oe(Fe){const Xe=(0,oe.E9)(Fe),Me=(0,oe.hc)(Fe);return{room_id:Xe,channel_id:Me}}u(Oe,"getHuddleClogCallsContext");function ke(){const Fe=(0,N.getStateForClientStore)();return(0,oe.j)(Fe)}u(ke,"isHuddleWindowOpenInClientStore");function je(Fe){return!Fe||Fe.closed?null:Fe.innerWidth<=re.m3?Y.yG.WINDOW_COMPACT:Y.yG.WINDOW_FULL}u(je,"getHuddleSurfaceFromWindowSize");function Be(Fe){const Me=Fe.screen.availTop,U=isNaN(Me)?!0:Math.abs(Me-Fe.screenTop)<=20,H=Fe.screen.availLeft,te=isNaN(H)?!0:Math.abs(H-Fe.screenLeft)<=20,de=Math.abs(Fe.screen.availHeight-Fe.outerHeight)<=20,Re=Math.abs(Fe.screen.availWidth-Fe.outerWidth)<=20;return U&&te&&(de&&Re)}u(Be,"isHuddleWindowMaximized");function st(Fe){let{self:Xe,peers:Me}=Fe;const H=Me.filter(de=>de.isCameraEnabled).length||Xe.isCameraEnabled&&!Xe.isHidingSelf,te=Me.length+(Xe.isHidingSelf?0:1);if(H){if(te>=5)return re.ef;if(te===4)return re.oP;if(te===3)return re.v2}return re.v_}u(st,"getCompactWindowDefaultHeight");const St=u(Fe=>(0,ce.qp)()?!!Fe.document.fullscreenEnabled:!1,"isFullscreenEnabled"),Yt=u(Fe=>!!Fe.document.fullscreenElement,"isWindowFullscreen"),tn=u((Fe,Xe)=>Xe?Fe.document.body.requestFullscreen():Fe.document.exitFullscreen(),"setFullscreen");function at(Fe){let{message:Xe,parentMessage:Me,viewContext:U}=Fe;return!!(Me&&Me.room_id&&(!U||X.Y.MESSAGE_PANE===U)&&(Xe==null?void 0:Xe.ts)!==(Xe==null?void 0:Xe.thread_ts))}u(at,"isMessageHuddleRecapMessage");function Et(Fe){if((0,F.Si)(Fe))return!1;const Me=(0,L.H)(Fe);return Me?Me<=5:!0}u(Et,"isSelfUserNewToHuddles");function _t(Fe){return!!De(Fe)}u(_t,"isHuddlesPageEnabled");function Bt(Fe){const Me=(0,r.h3)(Fe),U=[];return Me.forEach(H=>{U.length<3&&Ce(Fe,H)&&U.push(H)}),U}u(Bt,"getChannelHuddleSuggestionsForNUX");function Qt(Fe){const Xe=(0,g.qr)(Fe),Me=(0,N.getClientStoreInstance)().getState(),U=(0,oe.Qn)(Me),{expiration:H}=(0,B.H6)(Fe,U==null?void 0:U.callId)||{};return!!((0,Q.tc)((0,q.H7)(Fe))&&Xe&&H&&Date.now()/1e3>=H)}u(Qt,"wasHuddleTimeLimitReached")},7148679525:(j,p,e)=>{"use strict";e.d(p,{eY:()=>D,QX:()=>S,dL:()=>E,oG:()=>b,Lz:()=>C,L7:()=>P,J5:()=>R,XH:()=>k,nY:()=>W});var t=e(2837660778),n=e(1340402138),s=e(7969244833),a=e(3792998666),c=e(8323393403),o=e(6839188756),i=e(7112191091),l=e(6693783993),_=e(4761125736),d=e(9951956014),r=e(8289365785);function m(z){return z&&{...z,type:(0,r.A)(z==null?void 0:z.type)==="owner"?["org_admin"]:["admin"]}}u(m,"mapToWhoCanStyle");function h(z,$){return(0,d.g)(z,"who_can_manage_guests",[$],m)}u(h,"canUserDoManageGuestsTeamPrefForTeamId");const v={mapToWhoCanStyle:m};var y=e(5795074931);const I=u((z,$)=>{if((0,_._Z)(z,"light_read_who_can_manage_guests_pref_migration")==="on"){const Y=(0,y.TZ)(z);return $&&Y?(0,l.l0)(z).includes($.id):(0,l.mZ)(z)}return $?(0,o.r7)($)?h(z,$.id)||!1:(0,i.Me)(z,$.id):!1},"canUserInviteGuests");var T=e(5184226701),f=e(7595282574),g=e(9101533895),M=e(8276911661),A=e(5597672932),O=e(3677514771);function D(z){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const x=(0,M.cA)(z),Y=$??(0,O.H7)(z);if(!Y)return!1;const ne=(0,i.Me)(z,Y.id),re=(0,l.tx)(z,{teamOrEnterpriseIds:[Y.id]});return ne||re?!0:(0,a.P)(x)?!1:(0,A.x)(z,"invites_only_admins",$==null?void 0:$.id)?I(z,Y):!0}u(D,"canUserInviteMembersToWorkspace");function E(z,$,x){const Y=$||(0,M.cA)(z),ne=x||(0,O.H7)(z);return!(!ne&&!ne||(0,a.P)(Y)||!(0,A.x)(z,"invite_requests_enabled",ne.id))}u(E,"canUserRequestToInvite");function C(z){const $=(0,M.cA)(z),x=(0,O.H7)(z);return!x||(0,n.R)(z)?!1:(0,o.r7)(x)?!!(0,t.Mo)(z).filter(ne=>E(z,$,ne)||D(z,ne)).length:!!(E(z,$,x)||D(z))}u(C,"canUserSeeInviteModal");function S(z,$){const x=(0,O.H7)(z);if(!x)return!1;const Y=(0,g.OL)(z,$),ne=(0,o.tc)(x),re=(0,o.r7)(x),_e=(0,c.D7)(z,$),G=re?!W(z,Y):C(z);return ne&&G||!ne&&(G||_e)}u(S,"canUserInviteToChannelByEmail");function b(z,$){const x=(0,M.cA)(z),Y=$?(0,O._J)(z,$):(0,O.H7)(z);return!Y||(0,o.tc)(Y)?!1:E(z,x,Y)?!0:I(z,Y)}u(b,"canUserSeeAccountTypeOptions");function k(z,$){let{ignoreGuestSettings:x}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Y=(0,M.cA)(z),ne=$?(0,O._J)(z,$):(0,O.H7)(z);if(!(0,o.r7)(ne))return!1;const re=(0,i.Me)(z,ne.id),_e=(0,l.tx)(z,{teamOrEnterpriseIds:[ne.id]});return re||_e||!(0,A.x)(z,"invites_only_admins",ne.id)||E(z,Y,ne)?!1:x?!0:I(z,ne)}u(k,"shouldDisableFullMemberInviteOption");function W(z,$){const x=(0,s.f)(z,$);return!!(x!=null&&x.every(Y=>k(z,Y,{ignoreGuestSettings:!0})))}u(W,"shouldDisableFullMemberInviteOptionForChannel");function N(z){let{state:$,team:x,inviteType:Y}=z,ne=x;if(!x&&(ne=getCurrentTeam($),!ne))return!1;const re=getTeamPref($,"auth_mode"),_e=re==="google"||re==="saml";return isEnterpriseOrEnterpriseWorkspace(ne)&&Y===AccessType.Member||_e&&getTeamPref($,"sso_auth_restrictions")===0}u(N,"shouldShowSsoAlert");function V(z){let{state:$,inviteType:x}=z;const Y=getTeamPref($,"auth_mode"),ne=getTeamPref($,"sso_auth_restrictions");return Y==="google"?x===AccessType.Member&&(ne===0||ne===1)||(x===AccessType.MultiChannelGuest||x===AccessType.SingleChannelGuest)&&ne===0:!1}u(V,"shouldShowGoogleDomainsNotice");function R(z){let{state:$,inviteType:x,team:Y}=z;if(!x||!(0,T.LX)(x))throw new Error(`Invalid invite type: ${x}`);const ne=Y||(0,O.H7)($);if(!ne)return!1;const re=(0,A.x)($,"invites_only_admins",ne==null?void 0:ne.id),_e=(0,i.Me)($,ne.id),G=(0,l.tx)($,{teamOrEnterpriseIds:[ne.id]}),ge=I($,ne);switch(x){case T.BD.Member:return _e||G?!1:!!re;case T.BD.MultiChannelGuest:case T.BD.SingleChannelGuest:return!ge;default:return!0}}u(R,"isRequestingInvitesForType");function P(z){let{state:$}=z;const x=(0,O.H7)($);return(0,f.z$)()?!0:(0,o.r7)(x)?!!(0,A.x)($,"hide_gsuite_invite_option"):!1}u(P,"isGoogleDirectoryDisabled")},9438480351:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(9101533895),n=e(9289081806);function s(a,c){const o=(0,t.Pu)(a,c&&c.id);return o?(0,n.$M)(o):null}u(s,"getImUnreadCountByMember")},9541658228:(j,p,e)=>{"use strict";e.d(p,{P:()=>o});var t=e(2003990933),n=e(5096647761),s=e(8847766420),a=e(6536982570),c=e(8170643398);function o(i,l){if(!i||!l||(0,n.g)(l))return!1;const _=(0,a.QI)(l);return(0,c.dk)(l)&&(_===(0,s.jV)(i)||_===(0,t.A)(l,"enterprise_user.enterprise_id"))}u(o,"isMemberFromOrg")},148278831:(j,p,e)=>{"use strict";e.d(p,{S:()=>l});var t=e(918457931),n=e(2298581483),s=e(6536982570),a=e(5096647761),c=e(2003903489),o=e(9541658228),i=e(893266994);const l=u((_,d,r)=>{if((0,a.g)(d))return!1;if((0,o.P)(_,d)){if((0,c.S)(r))return!0;if((0,t.t)(r))return(0,n.R)(_,r).some(v=>(0,s.nO)(d,v))}const m=(0,i.c)(r);return(0,s.nO)(d,m)},"isMemberOnSomeChannelWorkspace")},863407566:(j,p,e)=>{"use strict";e.d(p,{A:()=>I});var t=e(8455301571),n=e(2155512519),s=e(7606781622),a=e(3730613858),c=e(5795074931),o=e(8276911661),i=e(8170643398),l=e(4562579337),_=e(7334104107),d=e(9187449049),r=e(7616363684),m=e(1794107122),h=e(9290914927),v=e(1809170903);const y=23;function I(T,f,g){let M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Math.max((0,n.UL)(),g),A=arguments.length>4?arguments[4]:void 0;if(!(0,t.si)(T,f))return[];const O=(0,t.r7)(T,f);if(!O||!O.timestamps)return[];const D=(0,s.h8)(T,f),E=O.timestamps.slice(-M),C=(0,c.WR)(T);let S=[],b=[],k=!1;const W=[],N=[],V=[],R=[],P=[],z=[];let $=!1;for(let Y=E.length-1;Y>=0;Y--){const ne=D[E[Y]],re=(0,_.Hr)(ne);if(!re)continue;if(A&&re===C){$=!0;continue}if(!(A?W.includes(re)||V.includes(re)||P.includes(re):S.includes(re))&&!(0,r.A)(ne)&&(0,d.A)(ne,C)){const G=(0,a.Sv)(T,f,re),ge=(0,o.nv)(T,re);if(k||(k=!(G!=null&&G.isKnown)||(0,i.t8)(ge)),!k&&(G!=null&&G.isKnown)&&(G!=null&&G.isMember)&&!(0,l.A)(ge)&&!(0,i.oy)(ge)){if(A){if((0,h.gd)(T,re)==="active"?(0,v.Vd)(T,re)?(V.push(re),R.push(ge)):(W.push(re),N.push(ge)):(P.push(re),z.push(ge)),N.length===g||V.length+z.length===y-g)break}else if(S.push(re),b.push(ge),b.length===g)break}}}if(k)return[];if(A&&(N.length===g?(b=N,S=W):(b=N.concat(R.slice(0,g-N.length)),S=W.concat(V.slice(0,g-P.length)),b.length<g&&(b=b.concat(z.slice(0,g-N.length)),S=S.concat(P.slice(0,g-P.length))))),b.length>=g)return b;const x=(0,m.$)(T,f);if(!x.length)return[];for(let Y=0;Y<x.length;Y++){const ne=x[Y];if(ne&&!S.includes(ne)&&(A&&ne===C?$=!0:(S.push(ne),b.push((0,o.nv)(T,ne)))),b.length===g)break}return b.length===0&&$&&(S.push(C),b.push((0,o.nv)(T,C))),b}u(I,"getLastNRelevantMembersInChannel")},7201482752:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(7334104107),n=e(7616363684),s=e(6457401668);const c=u(o=>!!((0,t.dK)(o)||(0,t.aw)(o)||(0,s.ys)(o)||(0,n.A)(o)),"isNonHumanMessage")},7616363684:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(7334104107),n=e(3339229351);function s(a){return(0,t.Hr)(a)===n.Q$}u(s,"isSlackbotMessage")},1521013946:(j,p,e)=>{"use strict";e.d(p,{$N:()=>A,Tg:()=>D,WJ:()=>E,Wm:()=>g,XN:()=>O,im:()=>T});var t=e(362134992),n=e(9101533895),s=e(3677514771),a=e(9457206156),c=e(4204210053),o=e(8234448831),i=e(497761763),l=e(4327331459),_=e(1233969417),d=e(110305600),r=e(8040098042),m=e(6212362990),h=e(462591818),v=e(6188550760),y=e(8959118205),I=e(311893736),T;(function(C){C.MESSAGE="message",C.FILE="file",C.MEMBER="member",C.ROOM="room",C.FREE_WILLY="free-willy",C.QUIP="quip",C.SEARCH="search",C.SLACKHELP="slackhelp",C.SHORTCUT_LINK_TRIGGER="shortcuts",C.HUDDLE="huddle",C.LIST="list",C.CHANNEL_CANVAS="canvas",C.ORG_CHART="org_chart",C.WIDGETS="widgets"})(T||(T={}));function f(C,S){if(!S)return null;const b=!1;return(0,n.OL)(C,S,b)||(0,n.Pu)(C,S.replace(/^@/,""))||(0,n.Os)(C,S)}u(f,"findChannelByIdentifier");function g(C){switch(C){case"archives":case"messages":case"conversation":return T.MESSAGE;case"file":case"files":return T.FILE;case"team":return T.MEMBER;case"calls":return T.ROOM;case"free-willy":return T.FREE_WILLY;case"docs":return T.QUIP;case"search":return T.SEARCH;case"slackhelp":return T.SLACKHELP;case"shortcuts":return T.SHORTCUT_LINK_TRIGGER;case"huddle":return T.HUDDLE;case"lists":return T.LIST;case"canvas":return T.CHANNEL_CANVAS;case"org_chart":return T.ORG_CHART;case"widgets":return T.WIDGETS;default:return null}}u(g,"getPermalinkType");function M(C,S,b,k){const W=(0,t.A)(S.split("/")),N=g(W[0]);switch(N){case T.MESSAGE:{var V;const _e=W[1],G=f(C,_e),ge=G&&G.id||_e;if(!ge)return null;if(W[2]==="tabs"){var R;return{type:N,channelId:ge,tabId:(R=W[3])===null||R===void 0?void 0:R.toString()}}const oe=(0,a.nT)(b),me=(0,m.A)(W[2]),ue=(0,m.A)((V=oe.thread_ts)===null||V===void 0?void 0:V.toString());return{type:N,channelId:ge,ts:me,threadTs:ue}}case T.HUDDLE:{if(!W[1])return null;let _e=null,G;if((0,r.A)(W[1])?_e=W[1]:(0,r.A)(W[2])&&(G=W[1],_e=W[2]),_e){const ge=f(C,_e),oe=ge&&ge.id||_e;return oe?{type:N,channelId:oe,teamId:G}:null}return(0,h.bU)(W[1])?{type:N,roomId:W[1]}:null}case T.FILE:{const _e=W[2];return(0,i.A)(_e)?{type:N,fileId:_e}:null}case T.MEMBER:{const _e=W[1];return(0,l.A)(_e)?{type:N,memberId:_e}:null}case T.ROOM:{const _e=W[1];if(_e&&(0,h.bU)(_e))return{type:N,roomId:_e};const G=W.length>2?W[2]:null;return G&&(0,h.cd)(G)?{type:N,callId:G,channelId:W[1]}:G&&(0,h.bU)(G)?{type:N,roomId:G,teamId:W[1]}:null}case T.FREE_WILLY:{const _e=W[2];return _e&&(0,h.cd)(_e)?{type:N,callId:_e,channelId:W[1]}:_e&&(0,h.bU)(_e)?{type:N,roomId:_e,teamId:W[1]}:null}case T.QUIP:{const _e=W[1],G=W[2];if(G&&(0,i.A)(G)&&k!=="app"){var P,z;const ge=(0,a.nT)(b),oe=(0,m.A)((P=ge.focus_thread_ts)===null||P===void 0?void 0:P.toString())||"";return{type:N,fileId:G,teamId:_e,focusThreadTs:oe,focusSectionId:((z=ge.focus_section_id)===null||z===void 0?void 0:z.toString())||""}}return null}case T.LIST:{const _e=W[2];if(_e&&(0,i.A)(_e)){var $,x,Y;const G=(0,a.nT)(b),ge=(0,m.A)(($=G.focus_thread_ts)===null||$===void 0?void 0:$.toString())||"";return{type:N,fileId:_e,recordId:((x=G.record_id)===null||x===void 0?void 0:x.toString())||"",viewId:((Y=G.view_id)===null||Y===void 0?void 0:Y.toString())||"",focusThreadTs:ge}}return null}case T.SEARCH:{const _e=W[1];return{type:N,encodedSearchString:_e}}case T.SLACKHELP:{if(W.length>=2){if((0,_.A)(W[2]))return{type:N,articleId:W[2]};if(W[1]==="whats_new")return{type:N,articleId:"whats_new"}}return{type:N}}case T.SHORTCUT_LINK_TRIGGER:return(0,d.A)(W[1])?{type:N,triggerId:W[1]}:null;case T.CHANNEL_CANVAS:{var ne,re;const _e=W[1],G=f(C,_e),ge=G&&G.id||_e;if(!ge)return null;const oe={type:N,channelId:ge},me=(0,a.nT)(b),ue=(ne=me.focus_section_id)===null||ne===void 0?void 0:ne.toString(),ae=(re=me.last_read_ts)===null||re===void 0?void 0:re.toString();if(ue&&(oe.focusSectionId=ue),ae){const he=ae.length<13?1e3:1;oe.lastReadTs=Number(ae)*he}return oe}case T.ORG_CHART:{const _e=W[1];return(0,l.A)(_e)?{type:N,memberId:_e}:null}case T.WIDGETS:return{type:N,widgetId:W[1]};default:return null}}u(M,"getPermalinkParams");function A(C,S){if(!S)return null;const b=(0,o.Ay)(S);return O(C,b)}u(A,"parsePermalink");function O(C,S){const{hostname:b,pathname:k,search:W}=S;if(!b||!k||!(0,c.A)(b))return null;let N;b!=="slack.com"&&(N=b.split(".")[0]);const V=M(C,k,W,N);return V?{subdomain:N,...V}:null}u(O,"parsePermalinkFromParsedUrl");function D(C,S){const b={channel:null,team:null};if(!C||!S)return b;const k=A(C,S);if(!k)return b;const{subdomain:W,channelId:N}=k,V=(0,n.OL)(C,N),R=(0,s.lL)(C,W);return{channel:V,team:R}}u(D,"getTeamAndChannelFromPermalink");function E(C,S){const b=(0,I.A)(C,S.subdomain);if(b)switch(S.type){case T.FILE:if(S.channelId&&S.fileId)return(0,v.M5)(y.De,{teamId:b,entityId:S.channelId,fileId:S.fileId});break;case T.MEMBER:if(S.channelId&&S.memberId)return S.ts?(0,v.M5)(y.Q$,{teamId:b,entityId:S.channelId,memberId:S.memberId,timestamp:S.ts}):(0,v.M5)(y.Q$,{teamId:b,entityId:S.channelId,memberId:S.memberId});break;case T.MESSAGE:if(S.channelId)return S.ts&&S.threadTs?(0,v.M5)(y.lM,{teamId:b,entityId:S.channelId,threadId:`${S.channelId}-${S.threadTs}`,replyTs:S.threadTs}):S.ts?(0,v.M5)(y._G,{teamId:b,entityId:S.channelId,timestamp:S.ts}):(0,v.M5)(y._G,{teamId:b,entityId:S.channelId});break;default:}}u(E,"getSonicUrlForPermalink")},9951956014:(j,p,e)=>{"use strict";e.d(p,{L:()=>_,g:()=>i});var t=e(9507365519),n=e(1328783052),s=e(8847766420),a=e(7969244833),c=e(9101533895),o=e(497537177);const i=u((d,r,m,h)=>{if((0,o.X)(d))return!0;const v=(0,t.p)(d,r,m);return Object.entries(v).map(y=>{let[I,T]=y;return[I,h(T)]}).some(y=>{let[I,T]=y;return(0,n.Ic)(d,T,I)})},"canUserDoCustomTeamPrefForTeamIds"),l=u((d,r,m,h)=>{if(!m)return!1;const v=(0,a.f)(d,m);return v?i(d,r,v,h):!1},"canUserDoCustomTeamPrefForChannel"),_=u(d=>({getWorkspaceIdsOnWhichUserCanDoCustomTeamPref:(r,m)=>(0,s.VO)(r).filter(v=>i(r,m,[v],d)),canUserDoCustomTeamPrefInSomeWorkspace:(r,m)=>{const h=(0,s.VO)(r);return i(r,m,h,d)},canUserDoCustomTeamPrefForChannel:(r,m,h)=>l(r,m,h,d),canUserDoCustomTeamPrefForChannelById:(r,m,h)=>{const v=(0,c.OL)(r,h);return l(r,m,v,d)}}),"createUserCanDoCustomTeamPrefRules")},5169892262:(j,p,e)=>{"use strict";e.d(p,{Cr:()=>c,DH:()=>a});var t=e(9951956014),n=e(1328783052);const s=u(l=>l?n.eT.ADMIN:n.eT.RA,"mapOnlyAdminToWhoCanStyle"),{getWorkspaceIdsOnWhichUserCanDoCustomTeamPref:a,canUserDoCustomTeamPrefInSomeWorkspace:c,canUserDoCustomTeamPrefForChannel:o,canUserDoCustomTeamPrefForChannelById:i}=(0,t.L)(s)},3769619294:(j,p,e)=>{"use strict";e.d(p,{V:()=>c,X:()=>a});var t=e(9101533895),n=e(7969244833),s=e(1328783052);const a=u((o,i,l)=>{if(!l)return!1;const _=(0,n.f)(o,l);return _?(0,s.TE)(o,i,_):!1},"canUserDoTeamPrefForChannel"),c=u((o,i,l)=>{const _=(0,t.OL)(o,l);return a(o,i,_)},"canUserDoTeamPrefForChannelById")},3683888369:(j,p,e)=>{"use strict";e.d(p,{l:()=>a});var t=e(1552255081),n=e(6839188756),s=e(3677514771);const a=u(c=>(0,t.F)(c)&&!(0,n.tc)((0,s.H7)(c)),"teamCanCreateStandaloneCanvas")},5757070316:(j,p,e)=>{"use strict";e.d(p,{J:()=>s});var t=e(78546762),n=e(1802262330);const s=u((a,c)=>{var o,i;let l,_,d;a&&(a.subtype==="file_comment"?[_,l]=["file_comment",a.comment]:(0,t.A)(a.subtype)?[_,l]=["file",c]:[_,l,d]=["message",a,a.channel]);const r=_==="message"?(o=l)===null||o===void 0?void 0:o.ts:(i=l)===null||i===void 0?void 0:i.id;return l&&(l._rxn_key||(0,n.B)(_,r,d))},"getReactionKey")},9001455011:(j,p,e)=>{"use strict";e.d(p,{t:()=>s});var t=e(9829579108),n=e(9889493721);const s=(0,t.Ay)(a=>!((0,n.Bf)(a)||!(0,n.pr)(a)));s.meta={name:"createSelector",key:"createSelectorshouldShowAppsLink",description:a=>!((0,n.Bf)(a)||!(0,n.pr)(a))}},2585735826:(j,p,e)=>{"use strict";e.d(p,{R:()=>_});var t=e(3677514771),n=e(1407713935),s=e(340763958),a=e(6113051341);const c=u((d,r)=>!(0,n.JM)(r)&&(0,s.ju)(r)&&!(0,a.N)(r),"canBeDisconnected");var o=e(1359849784),i=e(6839188756),l=e(6025726268);function _(d,r){if(r&&!c(d,r))return!1;if(r&&(0,l.M)(d,r))return!0;const m=(0,t.H7)(d);return(0,i.tc)(m)?!0:(0,o.I)(d,r)}u(_,"canUserDisconnectExternalSharedChannel")},8323393403:(j,p,e)=>{"use strict";e.d(p,{D7:()=>g,JO:()=>I,NU:()=>f,wi:()=>r});var t=e(6027162153),n=e(9101533895),s=e(3677514771),a=e(2063075339),c=e(7969244833),o=e(1407713935),i=e(5455782105),l=e(3916100664),_=e(6839188756),d=e(6841796315);const r={InvalidParams:Symbol("invalid_params"),FreeTeam:Symbol("free_team"),CannotRequest:Symbol("cannot_request_ext_shared"),InvalidChannel:Symbol("invalid_channel")},m={ok:!1,reason:r.InvalidParams},h={ok:!1,reason:r.FreeTeam},v={ok:!1,reason:r.CannotRequest},y={ok:!1,reason:r.InvalidChannel},I=u((M,A)=>{if(!(0,o.jq)(A))return m;const O=(0,i.k)(M),D=(0,_.qR)((0,s.H7)(M));if(!O&&!D)return h;const C=(0,l.lR)(M,{mustEveryWorkspaceBeAllowed:!0,teamIds:(0,c.f)(M,A)});return!(C!=null&&C.ok)&&(0,t.A)(C==null?void 0:C.reasons,l.jM.UserCannotCreateChannel,l.jM.AllowedWorkspacePref).length>0?v:(0,a.Z)(M,A)?d.O:y},"canUserInviteExternalMembersToChannelWithReason"),T=u((M,A)=>{const D=(0,n.OL)(M,A,!1);return D?I(M,D):m},"canUserInviteExternalMembersToChannelWithReasonById"),f=u((M,A)=>I(M,A).ok,"canUserInviteExternalMembersToChannel"),g=u((M,A)=>T(M,A).ok,"canUserInviteExternalMembersToChannelById")},1359849784:(j,p,e)=>{"use strict";e.d(p,{I:()=>g,r:()=>f});var t=e(4761125736),n=e(8276911661),s=e(6693783993),a=e(3677514771),c=e(598369692),o=e(9289081806),i=e(1407713935),l=e(5455782105),_=e(7224980887),d=e(3792998666),r=e(5861086925),m=e(5331698805),h=e(6839188756),v=e(7112191091),y=e(5510392579),I=e(7174777686),T=e(9087248458);function f(M){const A=(0,t._Z)(M,"light_read_who_can_manage_ext_shared_channels_pref_migration")==="on",O=(0,a.H7)(M);if(A)return(0,h.tc)(O)?!1:(0,s.Du)(M);const D=(0,n.cA)(M),E=(0,m.u)(M);if(!(E!=null&&E.value))return!1;if((0,l.k)(M)){let C=[];switch(E.value){case r.GX.ALL_ADMINS_AND_OWNERS:return(0,v.EC)(M)||(0,_.n5)(D)||(0,_.rr)(D);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return(0,_.n5)(D)||(0,_.rr)(D)?!0:(C=(0,c.QF)(M),!!((0,I.A)(E.users,D==null?void 0:D.id)||(0,T.A)(E.userGroups,C).length));case r.GX.EVERYONE:return!(0,d.Ez)(D);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,_.n5)(D)||(0,_.rr)(D)}}if((0,h.qR)(O))switch(E.value){case r.GX.TOPLEVEL_OWNERS:return(0,y.p2)(M);case r.GX.EVERYONE:return!(0,d.Ez)(D);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,y.p2)(M)||(0,y.Zo)(M)}return!1}u(f,"canUserManageExternalSharedChannels");function g(M,A){const O=(0,t._Z)(M,"light_read_who_can_manage_ext_shared_channels_pref_migration")==="on",D=(0,a.H7)(M);if(O){if((0,h.tc)(D)||!(0,i.jq)(A))return!1;const S=(0,o.FB)(A);return(0,s.Du)(M,{channelId:S})}const E=(0,n.cA)(M),C=(0,m.u)(M);if(!(C!=null&&C.value))return!1;if((0,l.k)(M)){let S=[];switch(C.value){case r.GX.ALL_ADMINS_AND_OWNERS:return(0,v.S4)(M,A);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return(0,_.n5)(E)||(0,_.rr)(E)?!0:(S=(0,c.QF)(M),!!((0,I.A)(C.users,E==null?void 0:E.id)||(0,T.A)(C.userGroups,S).length));case r.GX.EVERYONE:return!(0,d.Ez)(E);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,_.n5)(E)||(0,_.rr)(E)}}if((0,h.qR)(D))switch(C.value){case r.GX.TOPLEVEL_OWNERS:return(0,y.p2)(M);case r.GX.EVERYONE:return!(0,d.Ez)(E);case r.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,y.p2)(M)||(0,y.Zo)(M)}return!1}u(g,"canUserManageSlackConnectChannel")},1273480023:(j,p,e)=>{"use strict";e.d(p,{u:()=>c});var t=e(3677514771),n=e(340763958),s=e(6839188756),a=e(2063075339);const c=u((o,i)=>{const l=(0,t.H7)(o);return(0,s.tc)(l)&&(0,n.ju)(i)&&(0,a.Z)(o,i)},"getIsCurrentTeamSponsoredInSlackConnectChannel")},8767621462:(j,p,e)=>{"use strict";e.d(p,{S:()=>o});var t=e(7600673124),n=e(8276911661),s=e(5096647761),a=e(8170643398),c=e(9107158149);const o=u((i,l)=>{const _=(0,n.nv)(i,l);return(0,a.Zx)(_)?!1:(0,s.g)(_)?!!((0,c.bo)(i,l)&&(0,c.zP)(i,l)&&!(0,t.y)(i,l)):!0},"isMemberConnectedById")},5331698805:(j,p,e)=>{"use strict";e.d(p,{u:()=>s});var t=e(5861086925),n=e(8087758879);const s=u(a=>{const c=t.yY.WHO_CAN_MANAGE_SHARED_CHANNELS;return(0,n.o)(a,c)},"getWhoCanManageSharedChannelsPref")},3212336858:(j,p,e)=>{"use strict";e.d(p,{DP:()=>X,qc:()=>Q,qA:()=>Te,Bs:()=>B,Hv:()=>L,fK:()=>F,tY:()=>Ie,GE:()=>q,b:()=>K,iH:()=>De,mE:()=>Z});var t=e(7174777686),n=e(3245843483),s=e(5597672932),a=e(8276911661),c=e(9101533895),o=e(3792998666),i=e(3339229351),l=e(2791814261),_=e(8904182388),d=e(6165525655),r=e(591259428),m=e(9289081806),h=e(918457931),v=e(340763958),y=e(2585735826),I=e(6693783993),T=e(4761125736),f=e(1407713935),g=e(5343157203),M=e(9416626),A=e(395285811);const O={...M.u9,CantDisconnectExtShared:Symbol("cant_disconnect_ext_shared"),WhoCanManagePref:Symbol("who_can_manage_shared_channels")},D={ok:!1,reason:O.ChannelNotFound},E={ok:!1,reason:O.ChannelTypeNotSupported},C={ok:!1,reason:O.CantDisconnectExtShared},S={ok:!1,reason:O.WhoCanManagePref},b={ok:!0},k=u((Ae,Ce)=>{const Le=(0,T._Z)(Ae,"light_read_who_can_manage_shared_channels_pref_migration")==="on";if(!(0,f.jq)(Ce))return D;if((0,A.K3)(Ae,Ce))return E;if((0,v.ju)(Ce)&&!(0,y.R)(Ae,Ce))return C;const Ue=(0,m.FB)(Ce),Pe=(0,I.Om)(Ae,{channelId:Ue});if(!Le&&(0,h.t)(Ce)){if(Pe)return b;if(!(0,g.E)(Ae))return S}return(0,M.iz)(Ae,Ce)},"canUserArchiveChannelWithReasons"),W=u((Ae,Ce)=>k(Ae,Ce).ok,"canUserArchiveChannel");var N=e(7563681762),V=e(7148679525),R=e(6495946979),P=e(2912967402),z=e(571104883),$=e(735940183),x=e(5156662944);const Y=u(Ae=>Ae&&(0,T._Z)(Ae,"feedback_disabled_orgs")==="treatment","isOrgInFeedbackDisabledList");var ne=e(529357503),re=e(7969244833),_e=e(6934022494);const G=new $.Ay("cmd_handlers"),{UNKNOWN_COMMAND:ge,UNSUPPORTED_IN_THREAD:oe,UNSUPPORTED_IN_SHORTCUTS_MENU:me,CUSTOM_ERROR:ue}=i.gu,ae=["/away","/collapse","/color","/colour","/dm","/expand","/feedback","/keys","/me","/msg","/s","/search","/shortcuts","/shrug","/slack_diagnostic_report","/slackdevtools","/star","/gif","/active","/giphy","/iamcal","/mute","/remind"],he=["/away","/active","/keys","/shortcuts","/apps","/rename","/feedback","/mute","/dnd","/leave","/part","/close","/call"],ce=["/slackdebugunreads","/slackgov","/slackjspath","/slackstaging"],ee=["/slackaccessibility","/slackgov"],J=["/leave","/close","/part","/archive","/topic"],X=u(Ae=>Ae&&Ae.alias_of,"getCommandAliasOf"),F=u(Ae=>Ae&&Ae.name,"getCommandName"),L=u(Ae=>Ae&&(Ae.desc||Ae.description),"getCommandDesc"),K=u(Ae=>Ae&&Ae.usage,"getCommandUsage"),B=u(Ae=>Ae&&(Ae.canonical_name||Ae.name),"getCommandCanonicalName"),Q=u(Ae=>Ae&&Ae.aliases,"getCommandAliases"),q=u(Ae=>Ae&&Ae.type,"getCommandType"),le=u(Ae=>Ae&&Ae.app,"getCommandApp"),Te=u(Ae=>Ae==null?void 0:Ae.appName,"getCommandAppName"),Ie=u((Ae,Ce,Le)=>{const Ue=(0,c.OL)(Ae,Le),Pe=Ue?(0,re.f)(Ae,Ue)||[]:[];return Ce.teams&&Pe.length&&Ce.appName!=="Slack"&&!Ce.isWorkspaceAgnostic?Ce.teams.filter(Qe=>Pe.includes(Qe)):[]},"getCommandRelatedWorkspaces"),De=u(function(Ae,Ce){let{channelId:Le}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!Ce)return!1;const Ue=B(Ce);return Ue==="/leave"?(0,d.Y9)(Ae,Le):Ue==="/remove"?(0,_.Vj)(Ae,Le):["/topic","/search","/invite","/invite_people","/status","/dm","/msg"].indexOf(Ue)>-1?!1:!!Ce.autocomplete},"isAutocompleteCommand"),pe=u(Ae=>!!(Ae&&Ae.isServer),"isServerCommand"),fe=u(function(Ae){let Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(Ae){case N.a_.InvalidDm:return G.t("Direct messages don\u2019t even have a name! Ergo, regrettably, you can\u2019t change it.");case N.a_.OwnerRequired:return G.t("Only Workspace Admins (or the channel creator) are allowed to rename channels.");case N.a_.InvalidParams:return Ce?G.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?"):G.t("You don\u2019t have permission to rename.");case N.a_.RestrictedUser:return Ce?G.t("Your admins have limited who can rename multi-workspace channels."):G.t("You don\u2019t have permission to rename.");case N.a_.OrgSharedSettings:return Ce?G.t("Your admins have limited who can rename multi-workspace channels."):G.t("You don\u2019t have permission to rename.");case N.a_.InvalidChannelType:return G.t("This channel can\u2019t be renamed.",{fallbackHash:"796ff139eccb4a046e980e400012eb16b22449d8"});default:return G.t("You don\u2019t have permission to rename.")}},"getRenameDisabledFeedback"),Z=u(function(Ae,Ce){let{channelId:Le,isThread:Ue,isShortcutsMenu:Pe}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!Ae||!Ce)return{isEnabled:!1,reason:ge};const He=B(Ce),Qe=q(Ce),lt=(0,c.OL)(Ae,Le);if(!(0,l.L)(Ae)&&(0,t.A)(ce,He))return{isEnabled:!1,reason:ge};if(!(0,z.y3)()&&(0,t.A)(ee,He))return{isEnabled:!1,reason:ge};if((0,A.jT)(lt)&&(0,t.A)(J,He))return{isEnabled:!1,reason:ge};if(Ue&&!(0,t.A)(ae,He))return{isEnabled:!1,reason:oe};if(Pe&&(0,t.A)(he,He))return{isEnabled:!1,reason:me};if(Qe==="custom"||Qe==="service"){const ct=(0,s.x)(Ae,"commands_only_regular"),tt=(0,a.cA)(Ae);if(ct&&(0,o.Ez)(tt))return{isEnabled:!1,reason:ge}}if(Ce.teams){const ct=(0,re.f)(Ae,lt)||[];if(!Ce.teams.filter(it=>ct.includes(it)).length){const it=`Command not run. No intersection found between channel teams (${ct}) and command teams (${Ce.teams})`;return{isEnabled:!1,reason:ue,logString:it,feedback:G.t("This command is not available in this channel")}}}if(He==="/open"||He==="/feed"){const ct=(0,a.cA)(Ae);if((0,o.Ez)(ct))return{isEnabled:!1,reason:ge}}else if(He==="/topic"){const{ok:ct,reason:tt}=(0,r.X)(Ae,Le);if(!ct)return{isEnabled:!1,reason:ue,feedback:(0,P.Bw)(tt)}}else if(He==="/invite"){const ct=(0,a.cA)(Ae);if((0,o.Yd)(ct))return{isEnabled:!1,reason:ge};if(!(0,R.b)(lt))return{isEnabled:!1,reason:ue,feedback:G.t("You don\u2019t have permission to invite people.")};if((0,o.Ez)(ct)&&!(0,f.Zp)(lt)||(0,ne.A)(Ae,ct,lt))return{isEnabled:!1,reason:ue,feedback:G.t("You don\u2019t have permission to invite people.")}}else if(He==="/invite_people"){if(!(0,V.Lz)(Ae))return{isEnabled:!1,reason:ue,feedback:G.t("You don\u2019t have permission to invite people.")}}else if(He==="/rename"){const{ok:ct,reason:tt}=(0,N.be)(Ae,Le);if(!ct)return{isEnabled:!1,reason:ue,feedback:fe(tt)}}else if(He==="/archive"){if(!W(Ae,lt))return{isEnabled:!1,reason:ge}}else if(He==="/call"){if(!(0,x.lp)(Ae,Le)||(0,x.tO)(Ae))return{isEnabled:!1,reason:ge}}else if(He==="/slacktrace"){if(!(0,n.Rg4)())return{isEnabled:!1,reason:ue,feedback:G.t("Please run /slacktrace in the latest version of the Slack desktop app.")}}else if(He==="/feedback"){if(Y(Ae))return{isEnabled:!1,reason:ge}}else if(He==="/gif"){if(!(0,_e.R4)(Ae))return{isEnabled:!1,reason:ge};if(!(0,_e.BH)(Ae))return{isEnabled:!1,reason:ue,feedback:G.t("Attach a GIF is not enabled.")}}return{isEnabled:!0}},"isSlashCommandEnabled"),se={getRenameDisabledFeedback:fe,TS_ONLY_COMMANDS:ce,DESKTOP_APP_ONLY_COMMANDS:ee}},2105507084:(j,p,e)=>{"use strict";e.d(p,{X:()=>l,p:()=>i});var t=e(9829579108),n=e(8596717184),s=e(9289081806),a=e(9101533895),c=e(3677514771);const o=!1,i=(0,t.Ay)((_,d)=>{const r=(0,s.ne)(_,d),m=(0,c._J)(_,r,o);return(0,n.f)(m)});i.meta={name:"createSelector",key:"createSelectorgetExternalSelfWorkspaceAllowedOrgIdsForChannel",description:(_,d)=>{const r=(0,s.ne)(_,d),m=(0,c._J)(_,r,o);return(0,n.f)(m)}};const l=(0,t.Ay)((_,d)=>{const r=(0,a.OL)(_,d,o);return i(_,r)});l.meta={name:"createSelector",key:"createSelectorgetExternalSelfWorkspaceAllowedOrgIdsForChannelById",description:(_,d)=>{const r=(0,a.OL)(_,d,o);return i(_,r)}}},8596717184:(j,p,e)=>{"use strict";e.d(p,{f:()=>s});var t=e(5751973043),n;const s=u(a=>(n=a==null?void 0:a.allowed_org_ids)!==null&&n!==void 0?n:t.Ml,"getExternalSelfWorkspaceAllowedOrgIds")},2801540778:(j,p,e)=>{"use strict";e.d(p,{z:()=>a});var t=e(8847766420),n=e(1890276164),s=e(6839188756);function a(c,o){if(!c||!o)return!1;const i=(0,s.ZT)(o);if((0,t.Kc)(c)===i||(0,t.ZT)(c)===i)return!1;const l=(0,t.jV)(c);return l&&l===o.enterprise_id?!1:(0,n.R)(c,o.id)}u(a,"isTeamExternal")},958961878:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>T,w2:()=>y});var t=e(9829579108),n=e(4887323608),s=e(4096483543),a=e(6564475562),c=e(2249017398),o=e(2615100822),i=e(5731054235),l=e(7823691483);const d=u(()=>(0,n.A)(),"isDarkModeFeatureEnabled");var r=e(571104883),m=e(506684971),h=e.n(m);const v=u(()=>{var g;const M=(0,r.y3)()||((g=window.matchMedia)===null||g===void 0?void 0:g.call(window,"(prefers-color-scheme)").media)!=="not all",A=(0,r.cX)()&&(0,l.Z)((0,l.P)(h().osversion),(0,l.P)("10.14"))>=0,O=(0,r.jy)(),D=(0,r.j9)()&&(0,r.dY)("4.36.136"),E=A||O||D,C=(0,r.y3)()||(0,s.A)()||(0,a.A)()||(0,c.A)()||(0,o.A)()||(0,i.A)();return(0,n.A)()&&M&&E&&C},"computeSystemSyncIsSupportedOnBoot"),y=v(),I=(0,t.Ay)(g=>!!y&&!!d(g));I.meta={name:"createSelector",key:"createSelectorgetSystemSyncIsSupported",description:g=>!!y&&!!d(g)};const T=I,f={computeSystemSyncIsSupportedOnBoot:v}},677609895:(j,p,e)=>{"use strict";e.d(p,{X:()=>c});var t=e(2384831516),n=e(5510392579),s=e(5597672932),a=e(3677514771);const c=(0,t.Mz)(o=>{const i=(0,a.Yc)(o);return(0,n.p2)(o,i.id)||(0,s.x)(o,"all_users_can_purchase")});c.meta={name:"createSelector",key:"createSelectorgetCanCurrentUserUpgradeSlack",description:o=>{const i=(0,a.Yc)(o);return(0,n.p2)(o,i.id)||(0,s.x)(o,"all_users_can_purchase")}}},4400471894:(j,p,e)=>{"use strict";e.d(p,{i:()=>c});var t=e(8276911661),n=e(5795074931),s=e(7224980887),a=e(3769619294);const c=u((o,i)=>{const l=(0,t.cA)(o);return(0,n.u8)(o)&&(0,s.n5)(l)?!0:(0,a.V)(o,"who_can_at_channel",i)},"canNonAdminsAtChannelOrGroupBySettings")},4746276247:(j,p,e)=>{"use strict";e.d(p,{g:()=>n});var t=e(3769619294);const n=u((s,a)=>(0,t.V)(s,"who_can_at_everyone",a),"canNonAdminsAtMentionEveryoneBySettings")},317660850:(j,p,e)=>{"use strict";e.d(p,{D:()=>c});var t=e(3559837422),n=e(5169892262),s=e(4761125736),a=e(6693783993);const c=u(o=>(0,s._Z)(o,"light_read_emoji_only_admins_pref_migration")==="on"?(0,a.eq)(o):!(0,t.sV)(o)&&(0,n.Cr)(o,"emoji_only_admins"),"canUserAddEmoji")},324756633:(j,p,e)=>{"use strict";e.d(p,{S:()=>_});var t=e(9101533895),n=e(4400471894),s=e(201941576),a=e(7112191091),c=e(4761125736),o=e(6693783993),i=e(1407713935);const l=u(d=>(0,c._Z)(d,"light_read_who_can_at_channel_pref_migration")==="on","shouldUsePermissions");function _(d,r){const m=(0,t.gT)(d,r)&&(0,t.OL)(d,r)||void 0;return l(d)?((0,i.yz)(m)?(0,o.E2)(d):(0,o.E2)(d,{channelId:r}))&&!(0,s.i)(d,m==null?void 0:m.id,{allowToAdmins:!0}):(0,a.yG)(d,m)?!0:(0,n.i)(d,r)&&!(0,s.i)(d,m==null?void 0:m.id,{allowToAdmins:!0})}u(_,"canUserAtChannelInChannelById")},641827819:(j,p,e)=>{"use strict";e.d(p,{W:()=>_});var t=e(4746276247),n=e(9101533895),s=e(201941576),a=e(6113051341),c=e(5795074931),o=e(4761125736),i=e(6693783993);const l=u(d=>(0,o._Z)(d,"light_read_who_can_at_everyone_pref_migration")==="on","shouldUsePermissions"),_=u((d,r)=>{const m=(0,n.gT)(d,r)&&(0,n.OL)(d,r)||void 0;return!r||!m||!(0,a.N)(m)?!1:l(d)?(0,c.u8)(d)?(0,i._7)(d,{channelId:r})&&!(0,s.i)(d,m==null?void 0:m.id,{allowToAdmins:!0}):(0,i._7)(d,{channelId:r}):(0,c.u8)(d)?(0,t.g)(d,r)&&!(0,s.i)(d,m==null?void 0:m.id,{allowToAdmins:!0}):(0,t.g)(d,r)},"canUserAtEveryoneInChannelById")},1612857492:(j,p,e)=>{"use strict";e.d(p,{i:()=>d,q:()=>_});var t=e(9289081806),n=e(6495946979),s=e(7112191091),a=e(1407713935),c=e(9101533895),o=e(4761125736),i=e(6693783993),l=e(8250322877);const _=u((r,m)=>{const h=(0,o._Z)(r,"restrict_channel_manager_ext_invites");if(!(0,a.jq)(m))return!1;const v=(0,t.FB)(m),y=(0,l.D)(r,m);return h?y&&((0,s.S4)(r,m)||(0,n.b)(m)&&(0,i.MN)(r,{channelId:v})):y},"canUserInviteExternalUsersToChannel"),d=u((r,m)=>{const v=(0,c.OL)(r,m,!1);return v?_(r,v):!1},"canUserInviteExternalUsersToChannelById")},9183417278:(j,p,e)=>{"use strict";e.d(p,{Q:()=>_,e:()=>d});var t=e(9289081806),n=e(6495946979),s=e(1407713935),a=e(7112191091),c=e(9101533895),o=e(4761125736),i=e(6693783993),l=e(8250322877);const _=u((r,m)=>{const h=(0,o._Z)(r,"invite_to_channel_permission")==="on";if(!(0,s.jq)(m))return!1;const v=(0,t.FB)(m),y=(0,l.D)(r,m);return h&&(0,s.Zp)(m)?y&&((0,a.S4)(r,m)||(0,n.b)(m)&&(0,i.oo)(r,{channelId:v})):y},"canUserInviteInternalUsersToChannel"),d=u((r,m)=>{const v=(0,c.OL)(r,m,!1);return v?_(r,v):!1},"canUserInviteInternalUsersToChannelById")},8250322877:(j,p,e)=>{"use strict";e.d(p,{D:()=>h,X:()=>v});var t=e(1340402138),n=e(9289081806),s=e(1407713935),a=e(6007206761),c=e(5373179915),o=e(6495946979),i=e(2350349607),l=e(7112191091),_=e(3559837422),d=e(9101533895),r=e(4761125736),m=e(6693783993);const h=u((y,I)=>{const T=(0,r._Z)(y,"invite_to_channel_permission")==="on",f=(0,r._Z)(y,"restrict_channel_manager_ext_invites")==="on";if(!(0,s.jq)(I))return!1;const g=(0,n.FB)(I);if((0,_.AB)(y)||(0,a.F)(I)||!(0,i.V)(I)||(0,t.R)(y)&&(0,c.R)(y,I))return!1;const M=f?(0,m.MN)(y,{channelId:g}):!0;return T&&(0,s.Zp)(I)?(0,l.S4)(y,I)||(0,o.b)(I)&&((0,m.oo)(y,{channelId:g})||M):(0,l.S4)(y,I)||(0,o.b)(I)},"canUserInviteToChannel"),v=u((y,I)=>{const f=(0,d.OL)(y,I,!1);return f?h(y,f):!1},"canUserInviteToChannelById")},8904182388:(j,p,e)=>{"use strict";e.d(p,{CE:()=>I,Vj:()=>O,VJ:()=>A});var t=e(9101533895),n=e(4761125736),s=e(6693783993),a=e(1407713935),c=e(6007206761),o=e(6841796315);const i={InvalidDm:Symbol("invalid_dm"),ArchivedChannel:Symbol("archived_channel"),RequiredChannel:Symbol("required_channel")},l={ok:!1,reason:i.ArchivedChannel},_={ok:!1,reason:i.InvalidDm},d={ok:!1,reason:i.RequiredChannel};function r(D,E){const C=(0,t.gT)(D,E)?(0,t.OL)(D,E):null;return(0,c.F)(C)?l:(0,a.LI)(C)||(0,a.yz)(C)?_:(0,a.gx)(C)?d:o.O}u(r,"isChannelKickableWithReason");function m(D,E){return r(D,E).ok}u(m,"isChannelKickable");var h=e(3559837422),v=e(3769619294),y=e(641744444);const I={...i,InvalidParams:Symbol("invalid_params"),UserIsRestricted:Symbol("user_is_restricted"),RestrictedPublicChannel:Symbol("restricted_public_channel"),RestrictedPrivateChannel:Symbol("restricted_private_channel")},T={ok:!1,reason:I.InvalidParams},f={ok:!1,reason:I.UserIsRestricted},g={ok:!1,reason:I.RestrictedPublicChannel},M={ok:!1,reason:I.RestrictedPrivateChannel};function A(D,E){const C=(0,t.gT)(D,E)?(0,t.OL)(D,E):null;if(!(0,a.jq)(C))return T;if((0,h.sV)(D))return f;const S=r(D,E);if(!S.ok)return{ok:!1,reason:S.reason};const b=(0,s.ou)(D,{channelId:E}),k=(0,s.sX)(D,{channelId:E});if((0,n._Z)(D,"channel_manager_enhancements")==="on"&&(0,a.rW)(C)&&b)return o.O;const N=(0,n._Z)(D,"light_read_who_can_kick_channels_migration")==="on",V=(0,n._Z)(D,"light_read_who_can_kick_groups_pref_migration")==="on",R=(0,a.rW)(C)?"public":"private",P=R==="private"?y.Po:y.LI,z=R==="private"?y.tU:y.H7,$=P(D)||z(D);let x;if(N&&R==="public")x=b;else if(V&&R==="private")x=k;else{const Y=R==="private"?"who_can_kick_groups":"who_can_kick_channels";x=(0,v.X)(D,Y,C)}return!$&&!x?R==="private"?M:g:o.O}u(A,"canUserKickFromChannelWithReason");function O(D,E){return A(D,E).ok}u(O,"canUserKickFromChannel")},641744444:(j,p,e)=>{"use strict";e.d(p,{Po:()=>T,tU:()=>g,LI:()=>I,H7:()=>f});var t=e(7174777686),n=e(8276911661),s=e(5597672932),a=e(3677514771),c=e(5455782105),o=e(9113979368),i=e(7224980887),l=e(8170643398),_=e(3559837422),d=e(5510392579),r=e(766806);const m=u((M,A)=>{let{prefName:O}=A;if((0,o.A)(O))return!1;const D=(0,n.cA)(M);if((0,l.QR)(D)||(0,_.sV)(M))return!1;const{type:E,user:C}=(0,r.SI)(M,O)||{};if((0,t.A)(C,D.id))return!0;switch(E==null?void 0:E[0]){case"PRIMARY_OWNER":return(0,i.nA)(D);case"ORG_OWNERS":return(0,i.rr)(D);case"ORG_ADMINS_AND_OWNERS":return(0,i.n5)(D);default:return(0,d.$G)(M)}},"checkChannelMgmtPrefCascade");var h=e(6839188756),v=e(4761125736),y=e(6693783993);const I=u(M=>(0,c.k)(M)?(0,v._Z)(M,"light_read_who_can_manage_public_channels_pref_migration")==="on"?(0,y.fl)(M):m(M,{prefName:"who_can_manage_public_channels"}):!1,"canUserManagePublicChannelsInOrgDash"),T=u(M=>(0,c.k)(M)?(0,v._Z)(M,"light_read_who_can_manage_private_channels_pref_migration")==="on"?(0,y.$5)(M):m(M,{prefName:"who_can_manage_private_channels"}):!1,"canUserManagePrivateChannelsInOrgDash"),f=u(M=>{const A=(0,a.H7)(M);return(0,h.Ny)(A)?(0,d.h3)(M):!1},"canUserManagePublicChannelsInTeamSite"),g=u(M=>{const A=(0,a.H7)(M),O=(0,v._Z)(M,"light_read_who_can_manage_private_channels_pref_migration")==="on";if(!(0,h.Ny)(A)||(0,h.NB)(A)&&!(0,s.x)(M,"has_compliance_export"))return!1;if(O)return(0,y.Ny)(M);const D=(0,s.x)(M,"who_can_manage_private_channels_at_workspace_level");if(!D)return!1;const E=(0,n.cA)(M);if((0,t.A)(D.user,E.id))return(0,d.h3)(M);const C=D.type;switch(C&&C.length!==0?C[0]:null){case"NO_ONE":return!1;case"WORKSPACE_PRIMARY_OWNER":return(0,d.$G)(M);case"WORKSPACE_OWNERS":return(0,d.p2)(M);default:return!1}},"canUserManagePrivateChannelsInTeamSite")},7563681762:(j,p,e)=>{"use strict";e.d(p,{JJ:()=>C,a_:()=>v,be:()=>D,rY:()=>E});var t=e(9101533895),n=e(6693783993),s=e(3490825458),a=e(5795074931),c=e(4761125736),o=e(641744444),i=e(918457931),l=e(1407713935),_=e(3559837422),d=e(7112191091),r=e(6025726268),m=e(5343157203),h=e(6841796315);const v={InvalidChannelType:Symbol("invalid_channel_type"),InvalidDm:Symbol("invalid_dm"),InvalidParams:Symbol("invalid_params"),OrgSharedSettings:Symbol("org_shared_settings"),OwnerRequired:Symbol("owner_required"),RestrictedUser:Symbol("restricted_user"),RestrictedAction:Symbol("restricted_action"),UserHasNoPermissions:Symbol("user_has_no_permissions")},y={ok:!1,reason:v.InvalidParams},I={ok:!1,reason:v.InvalidDm},T={ok:!1,reason:v.InvalidChannelType},f={ok:!1,reason:v.RestrictedUser},g={ok:!1,reason:v.OrgSharedSettings},M={ok:!1,reason:v.OwnerRequired},A={ok:!1,reason:v.UserHasNoPermissions},O=u((S,b)=>{const k=(0,c._Z)(S,"light_read_who_can_manage_shared_channels_pref_migration")==="on";if(!(0,l.jq)(b))return y;if((0,l.LI)(b)||(0,l.yz)(b))return I;if((0,l.rI)(b))return T;const W=(0,a.TZ)(S),N=(0,s.s)(S),V=(0,s.R)(S);if(!W)return N&&((0,l.Zp)(b)&&(0,o.Po)(S)||(0,l.rW)(b)&&(0,o.LI)(S))||V&&((0,l.Zp)(b)&&(0,o.tU)(S)||(0,l.rW)(b)&&(0,o.H7)(S))?h.O:A;if(k)return(0,n.bT)(S,{channelId:b.id})?h.O:A;const R=(0,m.E)(S)||(0,n.LN)(S);return(0,i.t)(b)&&!R?g:(0,r.M)(S,b)||(0,n.bT)(S,{channelId:b.id})?h.O:(0,_.sV)(S)||(0,_.AB)(S)?f:(0,d.S4)(S,b)?h.O:M},"canUserRenameChannelWithReason"),D=u((S,b)=>{const W=(0,t.OL)(S,b,!1);return W?O(S,W):y},"canUserRenameChannelWithReasonById"),E=u((S,b)=>O(S,b).ok,"canUserRenameChannel"),C=u((S,b)=>D(S,b).ok,"canUserRenameChannelById")},9416626:(j,p,e)=>{"use strict";e.d(p,{NG:()=>S,iz:()=>C,u9:()=>h});var t=e(5343157203),n=e(4761125736),s=e(6693783993),a=e(9289081806),c=e(6495946979),o=e(1407713935),i=e(6007206761),l=e(918457931),_=e(340763958),d=e(9846841407),r=e(7112191091),m=e(2585735826);const h={ChannelNotFound:Symbol("channel_not_found"),ChannelTypeNotSupported:Symbol("channel_type_not_supported"),CantArchiveGeneral:Symbol("cant_archive_general"),NotInChannel:Symbol("not_in_channel"),AlreadyArchived:Symbol("already_archived"),NotAllowedHomeExternallyShared:Symbol("not_allowed_home_ext_shared"),AwayExternallyShared:Symbol("away_ext_shared"),UserHasNoPermissions:Symbol("user_has_no_permissions"),DefaultOrgWideChannel:Symbol("default_org_wide_channel"),WhoCanManagePref:Symbol("who_can_manage_shared_channels")},v={ok:!1,reason:h.ChannelNotFound},y={ok:!1,reason:h.ChannelTypeNotSupported},I={ok:!1,reason:h.CantArchiveGeneral},T={ok:!1,reason:h.NotInChannel},f={ok:!1,reason:h.AlreadyArchived},g={ok:!1,reason:h.NotAllowedHomeExternallyShared},M={ok:!1,reason:h.AwayExternallyShared},A={ok:!1,reason:h.UserHasNoPermissions},O={ok:!1,reason:h.DefaultOrgWideChannel},D={ok:!1,reason:h.WhoCanManagePref},E={ok:!0},C=u((b,k)=>{const W=(0,n._Z)(b,"restrict_channel_permission_archive_channel")==="on",N=(0,n._Z)(b,"light_read_who_can_manage_shared_channels_pref_migration")==="on";if(!(0,o.jq)(k))return v;if((0,o.LI)(k)||(0,o.yz)(k))return y;if((0,o.gx)(k))return I;if((0,i.F)(k))return f;if((0,d.b)(b,k))return M;if(!(0,r.S4)(b,k)&&!(0,c.b)(k))return T;const R=(0,a.FB)(k);if(W&&(0,_.ju)(k)&&!(0,d.b)(b,k)&&!(0,m.R)(b,k))return g;const P=(0,s.Om)(b,{channelId:R});return!N&&(0,l.t)(k)&&!(0,t.E)(b)&&!(0,s.LN)(b,{channelId:R})?D:P?E:A},"canUserSeeArchiveChannelOptionWithReasons"),S=u((b,k)=>C(b,k).ok,"canUserSeeArchiveChannelOption")},591259428:(j,p,e)=>{"use strict";e.d(p,{P:()=>I,X:()=>y});var t=e(9101533895),n=e(4761125736),s=e(6495946979),a=e(2912967402),c=e(1407713935),o=e(6007206761),i=e(3559837422),l=e(340763958),_=e(4827886670),d=e(6693783993);const r={ok:!0},m={ok:!1,reason:a.CM},h={ok:!1,reason:a.Jr},v={ok:!1,reason:a.oP},y=u((T,f)=>{const g=(0,t.gT)(T,f)&&(0,t.OL)(T,f);return g?(0,c.JM)(g)&&(0,l.ju)(g)?h:(0,o.F)(g)?v:(0,n._Z)(T,"channel_manager_enhancements")==="on"&&(0,d.ig)(T,{channelId:f})?r:!(0,s.b)(g)||!(0,_.c)(T,g)||(0,i.sV)(T)||(0,i.AB)(T)?v:r:m},"canUserSetTopicForChannelWithReasonById"),I=u((T,f)=>y(T,f).ok,"canUserSetTopicForChannelById")},6025726268:(j,p,e)=>{"use strict";e.d(p,{M:()=>s});var t=e(8276911661),n=e(9289081806);const s=u((a,c)=>{const o=(0,t.cA)(a);return c?o.id===(0,n.Wb)(c):!1},"isCurrentUserChannelCreator")},4919351998:(j,p,e)=>{"use strict";e.d(p,{XT:()=>_,Xw:()=>n,gU:()=>c,l0:()=>i,xf:()=>s});var t=e(8234448831);const n=new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i");function s(d){const r=typeof d=="string"&&d.match(n);return r&&r.length===1&&r[0]===d||!1}u(s,"isEmail");function a(d){const{pathname:r,protocol:m}=parseUrl(d);return m==="mailto:"&&s(r)}u(a,"isEmailUrl");function c(d){const{pathname:r,protocol:m}=d;return m==="mailto:"&&s(r)}u(c,"isEmailUrlFromUrlObject");const o=/^[\w.-]+(?:\.[\w.-]+)+[\w\-.]+$/i;function i(d){const r=typeof d=="string"&&d.match(o);return r&&r.length===1&&r[0]===d||!1}u(i,"isDomain");function l(d){return d.includes("@slack-bots.com")}u(l,"isSlackBotEmail");function _(d){let{csv:r,min:m=0,max:h=10}=d;const v=r.split(/\s*,\s*/).length;return{minViolation:v<m,maxViolation:v>h}}u(_,"validateCSV")},8049923572:(j,p,e)=>{"use strict";e.d(p,{BM:()=>r,IN:()=>i});var t=e(3134334389),n=e(5950652755),s=e(5460331959),a=e(1641606663),c=e(4761125736);function o(){return o=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},o.apply(this,arguments)}u(o,"_extends");const i=u(m=>(0,c._Z)(m,"sk_responsive_menus")==="on","isSkResponsiveMenusEnabled");function l(m){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250;const{windowRef:v}=(0,t.useContext)(a.M),y=u(T=>{!Array.isArray(T)||!T.length||requestAnimationFrame(()=>m(T))},"observer"),I=v.deref();return new I.ResizeObserver((0,n.A)(y,h))}u(l,"useResizeObserver");const _=u(()=>{var m,h,v;const{windowRef:y}=(0,t.useContext)(a.M),I=(0,t.useRef)((m=y.deref())===null||m===void 0?void 0:m.document.body),T=((h=I.current)===null||h===void 0?void 0:h.clientWidth)||0,f=((v=I.current)===null||v===void 0?void 0:v.clientHeight)||0,[g,M]=(0,t.useState)(T),[A,O]=(0,t.useState)(f),D=l(()=>{var E,C;M(((E=I.current)===null||E===void 0?void 0:E.clientWidth)||0),O(((C=I.current)===null||C===void 0?void 0:C.clientHeight)||0)},100);return(0,t.useEffect)(()=>{const E=I.current;return E&&D.observe(E),()=>{y&&E&&D.unobserve(E)}},[D,y]),{width:g,height:A}},"useWindowSize");function d(m){return h=>{const v=_();return t.createElement(m,o({},h,{windowSize:v}))}}u(d,"withWindowSize"),d.displayName="withWindowSize";function r(m){return h=>h.experimentSkResponsiveMenusGroupOn?t.createElement(s.A,null,v=>{let{measureRef:y,width:I,height:T}=v;return t.createElement(m,o({},h,{measureRef:y,containerSize:{width:I,height:T}}))}):t.createElement(m,o({},h))}u(r,"withContainerSize"),r.displayName="withContainerSize"},3824874166:(j,p,e)=>{"use strict";e.d(p,{RG:()=>S,f1:()=>W,fp:()=>k});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(1030162945),c=e(8822892075),o;(function(N){N.BaseHeart="mask__base-heart",N.SmallHeart="mask__small-heart",N.BaseSingleChannelGuestDnd="mask__base-single-channel-guest-dnd",N.BaseSingleChannelGuest="mask__base-single-channel-guest",N.SmallSingleChannelGuestDnd="mask__small-single-channel-guest-dnd",N.SmallSingleChannelGuest="mask__small-single-channel-guest",N.BaseGuestDnd="mask__base-guest-dnd",N.BaseGuest="mask__base-guest",N.SmallGuestDnd="mask__small-guest-dnd",N.SmallGuest="mask__small-guest",N.BaseMemberDnd="mask__base-member-dnd",N.BaseMember="mask__base-member",N.SmallMemberDnd="mask__small-member-dnd",N.SmallMember="mask__small-member"})(o||(o={}));function i(N){let{size:V="base",userType:R="member",isDnd:P=!1}=N;return t.createElement("svg",{className:"sr-only"},R==="slackbot"&&(V==="base"?t.createElement("clipPath",{id:o.BaseHeart,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M0,0 H1 V0.673 C0.986,0.669,0.971,0.667,0.954,0.667 C0.929,0.667,0.907,0.673,0.889,0.682 C0.87,0.673,0.849,0.667,0.824,0.667 C0.764,0.667,0.719,0.697,0.694,0.736 C0.672,0.77,0.667,0.807,0.667,0.832 C0.667,0.854,0.669,0.894,0.696,0.942 C0.707,0.962,0.721,0.981,0.739,1 H0 V0"})):t.createElement("clipPath",{id:o.SmallHeart,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.801 C0.75,0.958,0.714,0.915,0.69,0.872 C0.653,0.807,0.65,0.753,0.65,0.723 C0.65,0.689,0.658,0.64,0.687,0.594 C0.721,0.541,0.781,0.5,0.862,0.5 C0.896,0.5,0.925,0.508,0.95,0.521 C0.965,0.513,0.982,0.507,1,0.504 V0"}))),R==="ura"&&(V==="base"?P?t.createElement("clipPath",{id:o.BaseSingleChannelGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.688 C0.673,0.958,0.68,0.907,0.718,0.87 L0.825,0.763 C0.821,0.752,0.819,0.741,0.819,0.729 C0.819,0.672,0.866,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:o.BaseSingleChannelGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.688 C0.673,0.958,0.68,0.907,0.718,0.87 L0.87,0.718 C0.907,0.68,0.958,0.673,1,0.688 V0"})):P?t.createElement("clipPath",{id:o.SmallSingleChannelGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.707 C0.657,0.937,0.652,0.841,0.719,0.774 L0.864,0.63 C0.859,0.615,0.856,0.6,0.856,0.584 C0.856,0.507,0.919,0.444,0.997,0.444 H1 V0"})):t.createElement("clipPath",{id:o.SmallSingleChannelGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.707 C0.657,0.937,0.652,0.841,0.719,0.774 L0.924,0.569 C0.947,0.546,0.973,0.532,1,0.525 V0"}))),(R==="ra"||R==="external")&&(V==="base"?P?t.createElement("clipPath",{id:o.BaseGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.704 C0.698,0.985,0.694,0.969,0.694,0.951 V0.826 C0.694,0.754,0.753,0.695,0.825,0.694 C0.84,0.654,0.878,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:o.BaseGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.704 C0.698,0.985,0.694,0.969,0.694,0.951 V0.826 C0.694,0.754,0.754,0.694,0.826,0.694 H0.951 C0.969,0.694,0.985,0.698,1,0.704 V0"})):P?t.createElement("clipPath",{id:o.SmallGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.73 C0.704,0.969,0.688,0.929,0.688,0.884 V0.716 C0.688,0.617,0.767,0.538,0.866,0.538 H1 V0"})):t.createElement("clipPath",{id:o.SmallGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.73 C0.704,0.969,0.688,0.929,0.688,0.884 V0.716 C0.688,0.617,0.767,0.538,0.866,0.538 H1 V0"}))),R==="member"&&(V==="base"?P?t.createElement("clipPath",{id:o.BaseMemberDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.713 C0.692,0.968,0.681,0.93,0.681,0.889 C0.681,0.795,0.742,0.716,0.827,0.69 C0.843,0.652,0.88,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:o.BaseMember,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.713 C0.692,0.968,0.681,0.93,0.681,0.889 C0.681,0.774,0.774,0.681,0.889,0.681 C0.93,0.681,0.968,0.692,1,0.713 V0"})):P?t.createElement("clipPath",{id:o.SmallMemberDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.752 C0.701,0.949,0.669,0.878,0.669,0.8 C0.669,0.674,0.752,0.567,0.867,0.531 C0.888,0.48,0.938,0.444,0.997,0.444 H1 V0"})):t.createElement("clipPath",{id:o.SmallMember,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.752 C0.701,0.949,0.669,0.878,0.669,0.8 C0.669,0.645,0.795,0.519,0.95,0.519 C0.967,0.519,0.984,0.52,1,0.523 V0"}))))}u(i,"AvatarMasks");var l=e(9270432170),_=e(9332393661),d=e(2036354333),r=e(1610251172),m=e(9742374352),h=e(3501104594),v=e(698013937),y=e(2855755676),I=e(1563996154),T=e(82287009),f=e(735940183),g=e(485355941),M=e(1060768686),A=e.n(M),O=e(2979422297),D=e.n(O);function E(){return E=Object.assign||function(N){for(var V=1;V<arguments.length;V++){var R=arguments[V];for(var P in R)Object.prototype.hasOwnProperty.call(R,P)&&(N[P]=R[P])}return N},E.apply(this,arguments)}u(E,"_extends");const C=new f.Ay("avatar"),S={xlarge:72,large:56,medium:36,small:24,verySmall:20,tiny:16},b=t.memo(N=>{let{botEmoji:V,canRenderEmoji:R}=N;return V?R?t.createElement(a.Ay,{className:"c-avatar__emoji",text:V,emojiSize:a.lw.LARGE,stopAnimations:!0,forceDisplay:!0}):t.createElement("img",{className:"c-avatar__image c-avatar__image--fallback",src:A(),srcSet:`${D()} 2x`,alt:""}):null});function k(N){let{isExternal:V,teamId:R,team:P,showTooltip:z,badgeIconType:$,badgeIconClassName:x,allowTeamInitials:Y=!0}=N;if($){const ne=x?{[x]:!!x}:{};return()=>t.createElement(r.A,{className:(0,n.A)("c-avatar__icon c-avatar__nonteam_icon",{...ne}),type:$})}return V&&R?()=>t.createElement(v.A,{className:"c-avatar__icon c-avatar__team_icon",id:R,team:P,size:16,showTooltip:z,allowTeamInitials:Y,ariaHidden:!0}):()=>null}u(k,"getCustomBadgeIconRenderer"),k.displayName="getCustomBadgeIconRenderer";const W=u(N=>{let{size:V,userId:R,isAdHocMember:P,botId:z,botProfile:$=void 0,imageUrl:x,imageUrl2x:Y,additionalOverlay:ne,onClick:re=void 0,className:_e,teamId:G,isExternal:ge=!1,isRestricted:oe=!1,isUltraRestricted:me=!1,isInToken:ue=!1,isDeleted:ae=!1,tokenSize:he=void 0,memberOrBotName:ce=void 0,showTooltip:ee=!1,showCard:J=!1,showBadge:X=!0,showPresence:F=!1,badgeIconType:L=void 0,badgeIconClassName:K=void 0,isInteractive:B=!0,clogLinkClick:Q=s.A,tabIndex:q=0,ariaHidden:le=void 0,team:Te=void 0,botEmoji:Ie=void 0,canRenderEmoji:De=void 0,renderCustomBadge:pe=void 0,autoClogProps:fe=void 0,openProfile:Z=s.A,showMemberProfileInWindow:se=s.A,propagateClickEvent:Ae=!1,fromQuipDoc:Ce=!1,allowTeamInitials:Le=!0,disableLink:Ue=!1,isUserHidden:Pe=!1,onLoad:He=s.A,onError:Qe=s.A,navigate:lt,resetIA:qe,userType:ct,isDnd:tt,isSlackbot:it,"data-qa":Ge,"data-stringify-ignore":We}=N;const xe=(0,t.useCallback)(Kt=>(Kt.preventDefault(),B?(Ae||Kt.stopPropagation(),Q(),Ce||((0,g.Cz)(Kt)?se(R):lt&&R?lt((0,c.Fo)({memberId:R})):Z({memberId:R,serviceId:z,botProfile:$})),re?re(Kt):null):null),[R,z,$,Q,Ce,re,B,lt,Z,Ae,se]),ze=u(()=>R?`/team/${R}`:z&&!Ue?`/services/${z}`:"","getHrefAttr"),mt=u(()=>Y?`${Y} 2x`:"","getSrcSetAttribute"),pt=u(()=>{if(ne){const Kt=ne>9?"9+":`+${ne}`;return t.createElement("div",{className:"c-avatar__additional_overlay"},Kt)}return null},"renderAdditionalOverlay");pt.displayName="renderAdditionalOverlay";const It=u(Kt=>{let{tooltipText:Vt,className:on}=Kt,pn=t.createElement("span",{className:"c-avatar__badge_inner"});ee&&(pn=t.createElement(I.Ay,{tip:Vt},pn));const et=(0,n.A)("c-avatar__badge",on);return t.createElement("span",{className:et},pn)},"renderBadgeElement");It.displayName="renderBadgeElement";const bt=u(()=>{const Kt=he?y.n[he]:V;if(pe!==void 0&&Kt>=32){const Vt=pe();if(Vt)return Vt}if(pe===void 0&&Kt>=32){const Vt=k({isExternal:ge,teamId:G,team:Te,showTooltip:ee,badgeIconType:L,badgeIconClassName:K,allowTeamInitials:Le})();if(Vt)return Vt}return F?t.createElement(h.A,{memberId:R,inline:!1,className:"c-avatar__presence",inheritIconSize:!0}):me&&Kt>=32?It({tooltipText:u(()=>C.rt("Single-Channel Guests <span>see a partial directory and can only access messages and files from the channel they belong to.</span>",null,on=>{let{text:pn}=on;return t.createElement("span",{className:"c-avatar__tooltip_detail"},pn)}),"tooltipText"),className:"c-avatar__badge--ultra_restricted"}):oe&&Kt>=32?It({tooltipText:u(()=>C.rt("Multi-Channel Guests <span>see only a partial directory and can only access messages and files from selected channels.</span>",null,on=>{let{text:pn}=on;return t.createElement("span",{className:"c-avatar__tooltip_detail"},pn)}),"tooltipText"),className:"c-avatar__badge--restricted"}):null},"renderBadgeOrPresence");bt.displayName="renderBadgeOrPresence";const gt=u(()=>{let Kt=x||Y;return he?(he==="large"&&Y&&(Kt=Y),t.createElement(_.A,{image:Kt,classes:"c-base_icon--token",srcSet:mt(),size:y.n[he],ariaHidden:!0,ariaRole:"img",widthOnly:!0,onLoad:He,onError:Qe,resetIA:qe})):null},"renderTokenAvatar");gt.displayName="renderTokenAvatar";const ht=u(()=>x||Y?he||ue?gt():t.createElement(_.A,{image:x||Y,size:V,srcSet:mt(),ariaHidden:!0,widthOnly:!0,onLoad:He,onError:Qe,resetIA:qe}):null,"renderImageTag");ht.displayName="renderImageTag";const Zt=u(Kt=>{let{fallback:Vt=null}=Kt,on=Vt;return(x||Y)&&(on=ht()),on},"renderImageOrFallback"),rn=Ie?t.createElement(b,{botEmoji:Ie,canRenderEmoji:De}):null,zt=V>26?"base":"small",In=ct==="member",cn=ct==="ra"||ct==="external",Jt=ct==="ura",dn=t.useMemo(()=>F?it&&zt==="base"?o.BaseHeart:it&&zt==="small"?o.SmallHeart:In&&zt==="base"&&tt?o.BaseMemberDnd:In&&zt==="base"?o.BaseMember:In&&zt==="small"&&tt?o.SmallMemberDnd:In&&zt==="small"?o.SmallMember:cn&&zt==="base"&&tt?o.BaseGuestDnd:cn&&zt==="base"?o.BaseGuest:cn&&zt==="small"&&tt?o.SmallGuestDnd:cn&&zt==="small"?o.SmallGuest:Jt&&zt==="base"&&tt?o.BaseSingleChannelGuestDnd:Jt&&zt==="base"?o.BaseSingleChannelGuest:Jt&&zt==="small"&&tt?o.SmallSingleChannelGuestDnd:Jt&&zt==="small"?o.SmallSingleChannelGuest:"":"",[F,tt,zt,cn,In,Jt,it]),sn=(0,n.A)(_e,"c-avatar",{"c-avatar--no_image":!(x||Y||rn),"c-avatar--interactive":B&&!P&&!Ue,"c-avatar--ad_hoc_member":P,"c-avatar--deleted_member":ae,"c-avatar--resetIA":qe}),Xt=he?y.n[he]:V,xt={height:`${Xt}px`,width:`${Xt}px`};let en;z&&(en=B&&ze());const un=ce&&(B||en)?C.t("View {name}\u2019s Profile",{name:ce}):void 0,yn=Zt({fallback:rn}),ut={...xt,"--avatar-image-size":`${Xt}px`},Ot=it?"slackbot":ct,kt=F||X;let be=t.createElement(t.Fragment,null,F&&ct&&t.createElement(i,{isDnd:tt,userType:Ot,size:zt}),Pe?t.createElement(l.A,{className:_e,size:Xt}):yn,kt&&bt(),pt());return en?be=t.createElement(m.A,{href:en,target:"_blank",rel:"noopener noreferrer",style:xt,className:sn,onClick:xe,tabIndex:q,"aria-hidden":le,"aria-label":un,autoClogProps:fe,"data-qa":Ge,"data-stringify-ignore":We},be):B&&!Ue?be=t.createElement(d.A,{style:xt,className:sn,"data-qa":Ge,"data-stringify-ignore":We,"aria-hidden":le,"aria-label":un,tabIndex:q,onClick:xe,autoClogProps:fe},be):be=t.createElement("span",E({style:ut,className:sn},dn?{"data-mask":dn}:{},{"data-qa":Ge,"data-stringify-ignore":We,"aria-hidden":le}),be),B&&J&&V>=S.medium?(0,T.yN)({memberId:R,serviceId:z,botProfile:$,children:be}):be},"BaseAvatar");W.displayName="BaseAvatar"},1912114396:(j,p,e)=>{"use strict";e.d(p,{A:()=>R});var t=e(3134334389),n=e(8300007136),s=e(8642919232),a=e(8032081845),c=e(5267010247),o=e(8822892075),i=e(3275490582),l=e(3244118357),_=e(6052448919),d=e(8170643398),r=e(3534324375),m=e(4562579337),h=e(6536982570),v=e(3824874166),y=e(3339229351),I=e(4724591729),T=e(6415587347),f=e(92812954),g=e(6045540917),M=e(8847766420),A=e(9786721596),O=e(6023831373),D=e(8677230210),E=e(6273556946),C=e(3829348308),S=e(4761125736),b=e(5761207079),k=e(3677514771);function W(){return W=Object.assign||function(P){for(var z=1;z<arguments.length;z++){var $=arguments[z];for(var x in $)Object.prototype.hasOwnProperty.call($,x)&&(P[x]=$[x])}return P},W.apply(this,arguments)}u(W,"_extends");const N=(0,t.forwardRef)((P,z)=>{const $=(0,n.wA)();t.useImperativeHandle(z,()=>({props:P}),[P]);const{user:x,userId:Y,botId:ne,botProfile:re,size:_e,icons:G,emoji:ge,team:oe,slackbotFeels:me,isUnknown:ue,showPresence:ae,isExternal:he}=P;let ce=null,ee=null,J,X,F,L,K,B=ge,Q,q;const{member:le,bot:Te,memberIsHuman:Ie}=(0,O.Z2)(We=>(0,D.Od)(We,{userId:Y,botId:ne,botProfile:re})),{currentTab:De,channelId:pe}=(0,t.useContext)(a.d),fe=x||Y||ue,Z=fe?x||le:void 0,se=Z&&!Z.isUnknown&&!Z.is_unknown,Ae=(0,O.d4)(We=>(0,S._Z)(We,"bot_team_id_from_member")==="on");if(se){var Ce;ne||(Q=Te==null?void 0:Te.id);let We;Ae?We=(0,h.dQ)(Z):We=(0,m.A)(Z)?(0,h.D5)(Z):(0,h.dQ)(Z);const xe=(0,T.Ay)({size:_e,teamOrEnterpriseId:We,memberId:Z==null?void 0:Z.id,avatarHash:Z==null||(Ce=Z.profile)===null||Ce===void 0?void 0:Ce.avatar_hash,slackbotFeels:me});ce=xe==null?void 0:xe.imageUrl,ee=xe==null?void 0:xe.imageUrl2x,J=he||(Z==null?void 0:Z.isExternal),X=Z==null?void 0:Z.is_restricted,F=Z.is_ultra_restricted,L=Z.id,K=(0,d.oy)(Z)}q=(0,O.d4)(We=>se&&J?(0,h.Ux)(We,Z):void 0);let Le=fe?void 0:G||re&&re.icons;if(!fe){if(Te){Le=Le||Te.icons;const We=(0,I.Cu)()?E.O:E.U;(Te==null?void 0:Te.app_id)===We&&(Le=(Te==null?void 0:Te.icons)||Le)}if(!B&&Le&&(B=Le.emoji),!B){const We=(0,T.Ay)({size:_e,botImages:Le,isBot:!0});ce=We.imageUrl,ee=We.imageUrl2x}}q=(0,O.d4)(We=>fe?q:(oe==null?void 0:oe.id)||(0,_.s)(We,{bot:Te,botProfile:re,botId:ne})||void 0),J=(0,O.d4)(We=>fe?J:q?q!==(0,M.Kc)(We):!1);const Ue=(0,O.d4)(We=>{if(se)return(0,r.sE)(We,Z);if(!fe)return(0,l.Hg)(Te)}),Pe=(0,O.d4)(We=>{let xe=B&&q&&(0,C.ux)(We,{text:B,teamId:q});if(!xe&&B&&q===(0,M.Kc)(We)){const ze=(0,k.H7)(We),mt=ze&&ze.id;mt&&mt!==q&&(xe=(0,C.ux)(We,{text:B,teamId:mt}))}return xe}),He=(0,O.d4)(We=>ae?(0,f.d)(We,Y):void 0),Qe=(0,O.d4)(We=>ae?(0,g.h)(We,Y):!1);var lt;const qe=(lt=Y??L)!==null&&lt!==void 0?lt:"",ct=(0,O.d4)(We=>qe?(0,b.a)(We,qe):!1),tt=(0,t.useCallback)(We=>$((0,A.U)(We)),[$]),it=(0,t.useCallback)(We=>$((0,s.A)(We)),[$]),Ge=(0,t.useCallback)(We=>$(De&&pe?(0,c.o)((0,o.sL)(We,pe,De.id)):(0,c.o)(We)),[$,De,pe]);return t.createElement(v.f1,W({},P,{userId:Y,imageUrl:ce||void 0,imageUrl2x:ee||void 0,botEmoji:B,canRenderEmoji:!!Pe,teamId:q,isRestricted:X,isUltraRestricted:F,isDeleted:K,memberOrBotName:Ue,botId:Q||ne,disableLink:!Ie&&(!Te||(0,d.v3)(Te)),isExternal:J,isUserHidden:ct,userType:He,isDnd:Qe,isSlackbot:Y===y.Q$,size:_e,openProfile:tt,showMemberProfileInWindow:it,navigate:Ge}))}),V=(0,i.A)(t.memo(N));V.displayName="ConnectedAvatar";const R=V},4775127335:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>s,RG:()=>n.RG,f1:()=>n.f1,fp:()=>n.fp});var t=e(1912114396),n=e(3824874166);const s=t.A},9270432170:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(8683010724);function a(o){let{className:i="",size:l,"data-qa":_}=o;return t.createElement("span",{className:(0,n.A)(i,"c-hidden_user_avatar",{"c-hidden_user_avatar--small":l===16}),style:{width:`${l}px`,height:`${l}px`},"data-qa":_},t.createElement("span",{className:"c-hidden_user_avatar--icon"},t.createElement(s.A,{size:l<=24?"16":"24",name:"user-hide"})))}u(a,"HiddenUserAvatar"),a.displayName="HiddenUserAvatar";const c=t.memo(a)},9332393661:(j,p,e)=>{"use strict";e.d(p,{A:()=>m});var t=e(3134334389),n=e(5255740490),s=e(3398586081),a=e(7715417323),c=e(1610251172);const o=(0,s.A)(h=>({height:`${h}px`,width:`${h}px`}));function i(h){let{icon:v,classes:y=null,size:I=20,ariaHidden:T=void 0,ariaRole:f="img",ariaLabel:g=void 0}=h;const M=(0,n.A)("c-base_font_icon",y);return t.createElement("div",{className:M,style:o(I),"aria-hidden":T,role:f,"aria-label":g},t.createElement(c.A,{type:v}))}u(i,"BaseFontIcon"),i.displayName="BaseFontIcon";const l=i,_=(0,s.A)(h=>({height:`${h}px`,width:`${h}px`})),d=(0,s.A)(h=>({width:`${h}px`}));function r(h){let{image:v=void 0,size:y=20,srcSet:I="",classes:T=void 0,icon:f=void 0,ariaHidden:g=!1,ariaRole:M="img",ariaLabel:A=void 0,widthOnly:O=!1,onLoad:D=a.A,onError:E=a.A,resetIA:C,"data-qa":S}=h;if(v&&f)throw Error("Cannot pass in both image and icon!");if(!g&&!A)throw Error("If ariaHidden is false, we must have an ariaLabel for a11y!");const b=(0,n.A)("c-base_icon",T,{"c-base_icon--unknown":!v&&!f,"c-base_icon--image":v,"c-base_icon--resetIA":C});if(f)return t.createElement(l,{icon:f,classes:b,size:y,ariaHidden:g,ariaRole:M,ariaLabel:A});const k=t.createElement("img",{src:v,srcSet:I,className:b,style:O?d(y):_(y),"aria-hidden":g,role:M,"aria-label":A,alt:"",onLoad:D,onError:E,"data-qa":S});return O?t.createElement("span",{className:(0,n.A)("c-base_icon__width_only_container",{"c-base_icon--resetIA":C}),style:_(y)},k):k}u(r,"BaseIcon"),r.displayName="BaseIcon";const m=r},9574544148:(j,p,e)=>{"use strict";e.d(p,{A:()=>T});var t=e(3134334389),n=e(1649982175),s=e(3297051565),a=e.n(s),c=e(9262712126),o=e(8921478798),i=e(3534324375),l=e(735940183),_=e(9391594207),d=e(5761207079);function r(){return r=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var M=arguments[g];for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(f[A]=M[A])}return f},r.apply(this,arguments)}u(r,"_extends");const m=new l.Ay("files"),h={name:a().string.isRequired,isChannelFiles:a().bool,showMemberNameIfHidden:a().bool},v={isChannelFiles:!1,showMemberNameIfHidden:!1},y=u(f=>{const g=(0,n.A)(f,["id","name","dispatch","firstName","skipPrefCompliance","isChannelFiles","showMemberNameIfHidden"]);let M=f.name;if(f.isChannelFiles){const A=f.name;M=m.t("Shared by {memberName}",{memberName:A})}return t.createElement("span",r({},g),M)},"MemberName");y.displayName="MemberName",y.propTypes=h,y.defaultProps=v;const I=u((f,g)=>{const{id:M,member:A,skipPrefCompliance:O,showMemberNameIfHidden:D}=g;if(O)return{name:(0,c.wg)(A)};let E;return!D&&(0,d.a)(f,M)?E=m.t("Name hidden"):E=A?(0,i.sE)(f,A,!1,!1,O,!1):(0,o.I)(f,M,!1,!1,!1,!1),{name:E}},"mapStateToProps"),T=(0,_.N)(I)(y)},6496493732:(j,p,e)=>{"use strict";e.d(p,{A:()=>v});var t=e(3134334389),n=e(7715417323),s=e(6084388622),a=e(4979382452),c=e(4636370173),o=e(2465132699),i=e(8523371695),l=e(3606117573),_=e(8029613601),d=e(4947127560),r=e(735940183);const m=new r.Ay("generic_dialog"),h=u(y=>{let{title:I,children:T,submitButtonType:f="primary",submitButtonText:g=m.t("Confirm"),submitButtonIsDisabled:M=!1,submitButtonIsLoading:A=!1,showCancelButton:O=!0,showCloseButton:D=!0,showSubmitButton:E=!0,cancelButtonText:C=m.t("Cancel"),onSubmit:S=n.A,onCancel:b=n.A,onClose:k=n.A,"aria-describedby":W,"data-qa":N="dialog",className:V,overlayClassName:R,submitAutoClogProps:P,cancelAutoClogProps:z,shouldReturnFocusAfterClose:$=!0}=y;return t.createElement(a.A,{describedby:W,closeModal:k,role:"dialog",className:V,overlayClassName:R,dataQa:N,shouldReturnFocusAfterClose:$,showCloseButton:D},t.createElement(_.A,null,t.createElement(d.A,{title:I,"data-qa":`${N}_header`})),t.createElement(c.A,null,t.createElement(o.A,{"data-qa":`${N}_body`},T)),(O||E)&&t.createElement(i.A,{"data-qa":`${N}_footer`},t.createElement(l.A,null,O&&t.createElement(s.Ay,{type:"outline",onClick:b,"data-qa":`${N}_cancel`,autoClogProps:z},C),E&&t.createElement(s.lV,{type:f,onClick:S,loading:A,disabled:M,"data-qa":`${N}_go`,autoClogProps:P},g))))},"DialogModalProps");h.displayName="DialogModalProps";const v=h},8661826718:(j,p,e)=>{"use strict";e.d(p,{A:()=>O,k:()=>T});var t=e(3134334389),n=e(5255740490),s=e(1407713935),a=e(4559887502),c=e(6007206761),o=e(6194667569),i=e(3914799651),l=e(3654840599),_=e(2671211451),d=e(3877384923),r=e(9285382326),m=e(796111729),h=e(5356156303),v=e(9391594207),y=e(9101533895);function I(){return I=Object.assign||function(D){for(var E=1;E<arguments.length;E++){var C=arguments[E];for(var S in C)Object.prototype.hasOwnProperty.call(C,S)&&(D[S]=C[S])}return D},I.apply(this,arguments)}u(I,"_extends");function T(D){return!(0,s.LI)(D)&&!(0,s.yz)(D)}u(T,"shouldUseInlineChannelEntity");const f="INLINE-CHANNEL-ENTITY";function g(D){let{className:E,channel:C,bestFormerName:S,displayFormerNames:b=d.P.false,logger:k,boldIcon:W=!1,showTeam:N=!0,truncate:V=!1,truncateWidth:R,overrideHiddenName:P,overrideHiddenIcon:z,withTruncationTooltip:$,channelNameClassName:x,omitNonExistentTooltip:Y,channelHasNonUniqueName:ne=!1,showDisambiguatingTeamName:re=!1}=D;const _e=(0,s.t8)(C),G=(0,s.QR)(C||null),ge=(0,t.useCallback)(ee=>{let{className:J,...X}=ee;return(!G||z)&&t.createElement(l.A,I({},X,{bold:W,className:J,channel:C,overrideHiddenIcon:z}))},[C,W,G,z]);if(!T(C||null))return k==null||k.warn(f,"InlineChannelEntity should not display IMs or MPIMs"),null;const oe=(0,n.A)(E,"c-inline_channel_entity"),me=(0,c.F)(C)?d.pI.dim:void 0,ue=C&&P?{...C,name:P}:C||void 0,ae=(0,n.A)(x,"c-inline_channel_entity__content"),he=ne&&re,ce=(_e||G)&&!P?t.createElement(r.A,{"data-qa":"inline_channel_entity__missing",type:_e?"unknown":"non-existent",size:"small",width:R,omitNonExistentTooltip:Y}):t.createElement("span",{className:ae},t.createElement(o.A,{bold:W,channel:ue,bestFormerName:S,displayFormerNames:b,showTeam:N,showTeamForLocalChannel:he,width:R,"data-qa":"inline_channel_entity__name",overrideHiddenName:P}));return t.createElement(_.A,{avatar:ge,className:oe,"data-qa":"inline_channel_entity","data-channel-id":C&&C.id,style:me,truncate:V,truncateWidth:R,withTruncationTooltip:$,primaryContent:ce,secondaryContent:R&&t.createElement(t.Fragment,null,N&&t.createElement(i.A,{className:"c-inline_channel_entity__team",iconSize:14,channel:ue,"data-qa":"inline_channel_entity__team"}))})}u(g,"InlineChannelEntity"),g.displayName="InlineChannelEntity";function M(D){return Object.prototype.hasOwnProperty.call(D,"channel")}u(M,"propsContainsChannel");function A(D,E){const C=M(E)?E.channel:(0,y.OL)(D,E.channelId);let S;return E.showDisambiguatingTeamName&&(S=(0,a.i)((0,y.MS)(D),C)),{channel:C,channelHasNonUniqueName:S,logger:(0,m.Ay)({state:D})}}u(A,"mapStateToProps");const O=(0,v.N)(A,null,null,{areStatePropsEqual:h.kt})(g)},5387475318:(j,p,e)=>{"use strict";e.d(p,{A:()=>E});var t=e(3134334389),n=e(5255740490),s=e(6696292586),a=e(9289081806),c=e(1407713935),o=e(4559887502),i=e(6007206761),l=e(6119417095),_=e(6194667569),d=e(5273017660),r=e(3877384923),m=e(9285382326),h=e(796111729),v=e(735940183),y=e(9391594207),I=e(9101533895),T=e(8286248123);function f(){return f=Object.assign||function(C){for(var S=1;S<arguments.length;S++){var b=arguments[S];for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&(C[k]=b[k])}return C},f.apply(this,arguments)}u(f,"_extends");const g=new v.Ay("channel_entity"),M="SMALL-CHANNEL-ENTITY";function A(C){let{className:S,channel:b,bestFormerName:k,inlineNameSuffix:W,invert:N=!1,logger:V,displayFormerNames:R=r.P.false,showTeamForLocalChannel:P,showDraftIcon:z=!1,showFilledIcon:$=!1,showTeam:x,memberCount:Y,onlyBoldIfUnread:ne=!1,showTruncatedChannelNameTooltip:re=!1,"data-qa":_e="small_channel_entity",channelHasNonUniqueName:G=!1,showDisambiguatingTeamName:ge=!1}=C;const oe=(0,t.useCallback)(K=>t.createElement(l.A,f({},K,{className:"c-small_channel_entity__icon",channel:b,size:r.RG.small,showDraftIcon:z,showFilledIcon:$})),[b,z,$]);if((0,c.LI)(b)||(0,c.yz)(b))return V==null||V.warn(M,"SmallChannelEntity should not display IMs or MPIMs"),null;const me=(0,n.A)(S,"c-small_channel_entity"),ue=!ne||(0,a.KJ)(b),ae=(0,c.t8)(b),he=(0,c.QR)(b);let ce=(0,i.F)(b)?r.pI.dim:void 0;N&&(ce=r.pI.highlightDark);let ee=null;if((0,s.A)(Y)){const K=g.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:Y,fallbackHash:"c8e3bc8a761a13ce8f87cea7ebb3009bccee1a21",fallbackHashNs:"user_group_entity"});ee=t.createElement("span",{className:"c-small_channel_entity__inline_name_suffix normal","aria-label":K},"(",Y,")")}const J=G&&ge,X=t.createElement(_.A,{channel:b,bestFormerName:k,inlineNameSuffix:W,displayFormerNames:R,showTeamForLocalChannel:P||J,showTeam:x,bold:!!ue}),F=re?t.createElement(d.CG,{withTruncationTooltip:!0},X):X,L=(0,n.A)("c-small_channel_entity__content","c-small_channel_entity__content--xws",{"c-small_channel_entity__content--show-truncated-tooltip":re});return t.createElement(d.Ay,{avatar:oe,className:me,"data-qa":_e,size:"small",style:ce,text:t.createElement(d.CG,null,ae||he?t.createElement(m.A,{type:ae?"unknown":"non-existent",invert:N,size:"small"}):t.createElement("span",{className:L},F,W&&t.createElement("span",{className:"c-small_channel_entity__inline_name_suffix"},W),ee))})}u(A,"SmallChannelEntity"),A.displayName="SmallChannelEntity";function O(C){return Object.prototype.hasOwnProperty.call(C,"channel")}u(O,"propsContainsChannel");function D(C,S){let b;if(S.showMemberCounts){var k;const V=(0,T.q8)(C,O(S)?(0,a.FB)(S.channel):S.channelId);b=V?V==null||(k=V.counts)===null||k===void 0?void 0:k.member_count:null}const W=O(S)?S.channel:(0,I.OL)(C,S.channelId);let N;return S.showDisambiguatingTeamName&&(N=(0,o.i)((0,I.MS)(C),W)),{memberCount:b,channel:W,logger:(0,h.Ay)({state:C,label:M}),channelHasNonUniqueName:N}}u(D,"mapStateToProps");const E=(0,y.N)(D)(A)},5103164797:(j,p,e)=>{"use strict";e.d(p,{A:()=>h});var t=e(3134334389),n=e(5387475318),s=e(2828836153),a=e(3877384923),c=e(9163962844),o=e(9391594207),i=e(9101533895);function l(){return l=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var I=arguments[y];for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(v[T]=I[T])}return v},l.apply(this,arguments)}u(l,"_extends");function _(v,y,I){if(v)return y||I?a.pI.highlightDim:a.pI.highlightDark;if(y||I)return a.pI.dim}u(_,"getBaseStyle");function d(v){let{className:y,secondaryContent:I,isActive:T=!1,isDeactivated:f=!1,isDisabled:g=!1,showUnreadBadge:M=!1,badgeCount:A=0,onlyBoldIfUnread:O=!1,...D}=v,E=I;M&&(E=t.createElement("div",{className:"c-small_channel_entity__secondary-content-badge"},I,t.createElement(c.A,{count:A,className:"c-channel_entity__mentions",style:T?"white":"red"})));const C=_(T,g,f);return t.createElement(s.A,{className:y,primaryContent:t.createElement(n.A,l({invert:C===a.pI.highlightDark,onlyBoldIfUnread:O},D)),secondaryContent:E,size:"small",style:C})}u(d,"SmallChannelListEntity"),d.displayName="SmallChannelListEntity";function r(v){return Object.prototype.hasOwnProperty.call(v,"channel")}u(r,"propsContainsChannel");function m(v,y){const I=r(y)?y.channel:(0,i.OL)(v,y.channelId),T=y.showUnreadBadge?y.badgeCount||(0,i.TJ)(v,I):0;return{channel:I,badgeCount:T}}u(m,"mapStateToProps");const h=(0,o.N)(m)(d)},6119417095:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(3134334389),n=e(5255740490),s=e(1407713935),a=e(890457517),c=e(3877384923),o=e(8683010724),i=e(6023831373);function l(){return l=Object.assign||function(r){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(r[v]=h[v])}return r},l.apply(this,arguments)}u(l,"_extends");function _(r){let{size:m=c.RG.medium,className:h,channel:v,showDraftIcon:y=!1,showFilledIcon:I=!1}=r;const T=(0,s.t8)(v),f=(0,i.d4)(g=>(0,a.Ay)(g,v,{filled:I,showDraftIcon:y}));return m!==c.RG.small&&(f.inline=!0),t.createElement("span",{className:(0,n.A)("c-channel_icon",{"c-channel_icon--unknown":T,"c-channel_icon--with-background":m!==c.RG.small},h),"data-channel-type-icon":(f==null?void 0:f.name)||"unknown"},!T&&t.createElement(o.A,l({},m===c.RG.small?{size:"18"}:{},f)))}u(_,"ChannelIcon"),_.displayName="ChannelIcon";const d=_},6194667569:(j,p,e)=>{"use strict";e.d(p,{A:()=>S});var t=e(3134334389),n=e(5255740490),s=e(9113979368),a=e(6159136815),c=e(9289081806),o=e(6007206761),i=e(395285811),l=e(4630136761),_=e(2188787324),d=e(3634593162),r=e(6839188756),m=e(3914799651),h=e(3654840599),v=e(3877384923),y=e(82287009),I=e(1596328926),T=e(735940183),f=e(9391594207),g=e(937317117),M=e(3677514771);function A(){return A=Object.assign||function(b){for(var k=1;k<arguments.length;k++){var W=arguments[k];for(var N in W)Object.prototype.hasOwnProperty.call(W,N)&&(b[N]=W[N])}return b},A.apply(this,arguments)}u(A,"_extends");const O=new T.Ay("search"),D=new T.Ay("inline_channel");function E(b){const{bestFormerName:k,bold:W=!0,channel:N,channelName:V,overrideHiddenName:R,width:P,displayFormerNames:z=v.P.true,isChannelFrozenAndInGracePeriod:$,showTeam:x=!0,showTeamForLocalChannel:Y=!1,showTeamName:ne,titleBlocks:re}=b,_e=(0,o.F)(N)&&!$;let G=`${R??V}${_e?` ${O.t("(archived)")}`:""}`,ge;if(z)if(k){const me=t.createElement(h.A,{bold:W,className:"c-channel_name__former_channel_icon",channel:N}),ue=t.createElement("span",{className:"c-channel_name__former_name_text"},t.createElement(a.A,{text:k,showTooltips:!1}));ge=k&&t.createElement("span",{className:"c-channel_name__suffix"},D.rt(" (formerly {icon}{name})",{icon:me,name:ue,note:'Shown when a user is typing the old name of a channel, e.g. "#dogs (formerly #cats)" or "#dogs (archived) (formerly #cats)"',fallbackHash:"b574996f0134b62e0fae6797e7d969b04de6b482"}))}else{let me;const ue=(0,c.Hx)(N);if(ue&&!(0,s.A)(ue)){const ae=ue.map(ce=>`#${ce}`);me=(0,T.jd)(ae,{noConj:!0}).join("")}me&&(G+=` ${D.t("(formerly {names})",{names:me,note:'Shown when a user is typing the old name of a channel, e.g. "#dogs (formerly #cats)" or "#dogs (archived) (formerly #cats)"'})}`)}const oe=(0,n.A)("c-channel_entity__name",{"c-channel_entity__name--bold":W});return t.createElement(t.Fragment,null,t.createElement("span",A({className:oe},(0,I.A)(b)),re??t.createElement(t.Fragment,null,t.createElement(a.A,{text:G,showTooltips:!1}),z&&ge)),!P&&t.createElement(t.Fragment,null,x&&t.createElement(m.A,{className:"c-channel_entity__team",iconSize:v.RG.inline,channel:N,"data-qa":"channel_entity__team",shouldRender:Y,showTeamName:ne})))}u(E,"ChannelName"),E.displayName="ChannelName";function C(b,k){let{channel:W,includeChannelPrefix:N}=k;const V=(0,M.H7)(b)||(0,M.lp)(b),R=(0,r.ZT)(V),P=W&&(0,i.jT)(W)&&(0,d.l)(W.id),z=P?(0,g.Lp)(b,P):void 0,$=z&&(0,_.U9)(z)?(0,y.GU)({id:P,fileId:P,size:"caption",truncate:!1}):null;var x;return{channelName:(x=(0,c.SB)(b,W,{publicChannelIncludeHashSign:!!N,imIncludeAtSign:!1}))!==null&&x!==void 0?x:void 0,titleBlocks:$,isChannelFrozenAndInGracePeriod:(0,l.sP)(R,W)}}u(C,"mapStateToProps");const S=(0,f.N)(C)(E)},3914799651:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(3134334389),n=e(5255740490),s=e(9289081806),a=e(6839188756),c=e(9950739645),o=e(9391594207),i=e(9101533895),l=e(3677514771);let _=u(class extends t.Component{render(){const{shouldRender:h,team:v,className:y}=this.props;return!h||!v?null:t.createElement("div",{className:(0,n.A)("c-channel_team","c-channel_team--xws",y),"data-qa":"channel_team"},t.createElement("span",{className:"c-channel_team__name"},(0,a.F1)(v)))}},"ChannelTeam");_.displayName="ChannelTeam";const d=u((m,h)=>{let{channel:v,channelId:y,shouldRender:I}=h;const T=v||(0,i.OL)(m,y),f=!!(T!=null&&T.context_team_id&&(0,c.B)(m,T.context_team_id));let g;if((0,s.lo)(T))g=(0,l._J)(m,(0,s.bK)(m,T));else if(I||f){const M=(0,s.ne)(m,T);g=(M?(0,l._J)(m,M):void 0)||(0,l.H7)(m)}return{shouldRender:I||f||!!(0,s.lo)(T),team:g??void 0}},"mapStateToProps"),r=(0,o.N)(d)(_)},3654840599:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(3134334389),n=e(5255740490),s=e(1407713935),a=e(890457517),c=e(8683010724),o=e(6023831373);function i(){return i=Object.assign||function(d){for(var r=1;r<arguments.length;r++){var m=arguments[r];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(d[h]=m[h])}return d},i.apply(this,arguments)}u(i,"_extends");const l=u(d=>{let{className:r,filled:m,bold:h,channel:v,disableArchived:y,overrideHiddenIcon:I}=d;const T=(0,o.d4)(g=>I||(0,a.Ay)(g,v,{filled:m||(0,s.Zp)(v),bold:h,disableArchived:y})),f=(0,n.A)(r,{"c-inline_channel_icon c-inline_channel_icon--space":!0});return t.createElement("span",{className:f,"data-inline-channel-type-icon":T.name},t.createElement(c.A,i({inline:!0},T)))},"InlineChannelIcon");l.displayName="InlineChannelIcon";const _=t.memo(l)},890457517:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>E,PR:()=>O,pH:()=>M});var t=e(5892132962),n=e(9289081806),s=e(1407713935),a=e(6007206761),c=e(395285811),o=e(4630136761),i=e(2188787324),l=e(3634593162),_=e(6839188756),d=e(9101533895),r=e(937317117),m=e(3677514771);const h={name:"archive"},v={name:"archive",variation:"filled"},y={name:"edit"},I={name:"edit",variation:"filled"},T={name:"file"},f={name:"lists"},g={name:"lock"},M={name:"lock",variation:"filled"},A={name:"channel"},O={name:"channel",variation:"filled"},D={name:"canvas"};function E(C,S){let{filled:b,bold:k,disableArchived:W,showDraftIcon:N}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{filled:!1,bold:!1,disableArchived:!1,showDraftIcon:!1};const V=(0,m.H7)(C)||(0,m.lp)(C),R=(0,_.ZT)(V);if(!(0,o.sP)(R,S)&&((0,a.F)(S)&&!W||(0,o.Zz)(S)))return b?v:h;if(N&&(0,n.yc)(C,S.id))return b?I:y;if((0,c.jT)(S)){const z=(0,r.Lp)(C,(0,l.l)(S.id));if((0,i.wL)(z))return D;if((0,i.aD)(z)){const $=(0,d.Pf)(C,z.id),x=(0,d.OL)(C,$);return(0,s.Zp)(x)||(0,s.JM)(x)?b?M:g:D}return(0,i.l7)(z)?f:T}const P=(0,t.sc)(S);return P||((0,s.Zp)(S)?b?M:g:k?O:A)}u(E,"getChannelIconType")},444524526:(j,p,e)=>{"use strict";e.d(p,{A:()=>T});var t=e(3134334389),n=e(5255740490),s=e(3750057149),a=e(3037015781),c=e(8170643398),o=e(9262712126),i=e(4562579337),l=e(1084169413),_=e(2671211451),d=e(3877384923),r=e(9391594207),m=e(5761207079),h=e(8276911661),v=e(3146663623);function y(f){const{className:g,forceRealName:M=!1,id:A,member:O,truncate:D=!1,truncateWidth:E,withTruncationTooltip:C=!1,"data-qa":S="inline_member_entity",isBold:b=!0,showAppOrBotBadge:k,isUserHidden:W=!1}=f,N=(0,n.A)(g,"c-inline_member_entity"),V=(0,i.A)(O),R=(0,c.v3)(O),P=(0,c.oy)(O),z=(0,a.lv)(O),$=(0,a.mX)(O),x=(0,o.wg)(O),Y=(0,o.Fh)(O);let ne;M||!Y?ne=x:ne=Y;const re=P?d.pI.dim:void 0;return t.createElement(_.A,{className:N,"data-qa":S,"data-member-id":A||(O==null?void 0:O.id),style:re,truncate:D,truncateWidth:E,withTruncationTooltip:C,primaryContent:t.createElement("span",{className:"c-inline_member_entity__content"},t.createElement(l.A,{isBold:b,name:ne,inline:!0,"data-qa":"inline_member_entity__name",isAppOrBot:V,isWorkflowBot:R,isDeleted:P,isNonExistent:z,isUnknown:$,showAppOrBotBadge:k,isUserHidden:W}))})}u(y,"InlineMemberEntity"),y.displayName="InlineMemberEntity";function I(f,g){let{forceRealName:M,member:A,id:O}=g;const D=A||(0,h.nv)(f,O);return{member:D??void 0,forceRealName:(0,s.A)(M)?M:(0,v.E)(f),isUserHidden:D&&(0,m.a)(f,D.id)}}u(I,"mapStateToProps");const T=(0,r.N)(I)(y)},7076189804:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>k,lP:()=>C});var t=e(3134334389),n=e(5255740490),s=e(2486585453),a=e(3037015781),c=e(9289081806),o=e(8170643398),i=e(9262712126),l=e(3534324375),_=e(4562579337),d=e(4775127335),r=e(1084169413),m=e(1464713483),h=e(51460783),v=e(161084047),y=e(3534100833),I=e(3877384923),T=e(9828955991),f=e(8683010724),g=e(82287009),M=e(9391594207),A=e(9101533895),O=e(5761207079),D=e(8276911661);function E(){return E=Object.assign||function(W){for(var N=1;N<arguments.length;N++){var V=arguments[N];for(var R in V)Object.prototype.hasOwnProperty.call(V,R)&&(W[R]=V[R])}return W},E.apply(this,arguments)}u(E,"_extends");const C={right:"right",bottom:"bottom"};function S(W){const{className:N,id:V,invert:R=!1,member:P,memberPrimaryName:z,memberSecondaryName:$,secondaryContent:x,secondaryContentPosition:Y=C.bottom,subtext:ne,showSubtext:re=!0,showAvatar:_e=!0,showDraftIcon:G=!1,showPresence:ge=!0,showStatus:oe=!0,showTooltip:me=!0,showAppOrBotBadge:ue=!0,isDeactivated:ae=!1,useShortMode:he,showHoverCard:ce=!1,forwardedRef:ee,"data-sk":J="medium_member_entity","data-qa":X="medium_member_entity",isUserHidden:F=!1,noStatusText:L=!1}=W,K=(0,_.A)(P),B=(0,o.v3)(P),Q=(0,o.oy)(P),q=(0,o.fy)(P),le=(0,o.hh)(P),Te=(0,a.lv)(P),Ie=(0,a.mX)(P),De=t.createElement(r.A,{"data-qa":"member-entity__primary-name",name:z,invert:R&&!ae,isAppOrBot:K,isWorkflowBot:B,showAppOrBotBadge:ue,isDeleted:Q,isSelf:q,isNonExistent:Te,isUnknown:Ie,isUserHidden:F}),pe=(0,g.yN)({memberId:V,children:De}),fe=!F&&t.createElement(y.A,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},$),Z=P&&t.createElement(v.A,{className:"c-member__title","data-qa":"member-entity__title"},(0,o.rN)(P)),se=!Q&&!le&&t.createElement(T.Ay,{memberId:V,className:"c-member__presence",invert:R&&!ae,"data-qa":"member-entity__presence",inline:!1}),Ae=t.createElement(s.A,{memberId:V,tooltip:me,animated:he,className:"c-member__current-status c-member__current-status--medium","data-qa":"member-entity__status",noText:L}),Ce=Y===C.bottom&&x?t.createElement(h.A,{"data-qa":"member-entity__metadata"},x):null,Le=t.createElement("span",{className:"c-member__primary_content"},ce?pe:De,ge&&se,!he&&fe,oe&&Ae),Ue=Q||ae?I.pI.dim:void 0,Pe=(0,n.A)(N,"c-member","c-member--medium",{"c-member--with-presence":ge}),He=(0,t.useCallback)(Qe=>_e&&(G?t.createElement("span",{className:"c-member__draft_icon"},t.createElement(f.A,{name:"edit"})):t.createElement(d.Ay,E({},Qe,{size:I.RG.medium,userId:V,"data-qa":"member-entity__avatar",isInteractive:!1}))),[_e,G,V]);return t.createElement(m.A,{avatar:He,className:Pe,size:"medium",style:Ue,text:Le,subtext:re&&(ne||Z),metadata:!Q&&Ce,"data-qa":X,"data-sk":J,forwardedRef:ee})}u(S,"MediumMemberEntity"),S.displayName="MediumMemberEntity";function b(W,N){let{id:V,isDraftContext:R,member:P,showStatus:z}=N;const $=P||(0,D.nv)(W,V);let x=!1;if(R&&V){const ne=(0,A.Pu)(W,V);x=!!(ne&&(0,c.yc)(W,ne.id))}const Y=V||($==null?void 0:$.id);return{id:Y,member:$??void 0,memberPrimaryName:(0,l.sE)(W,$,!1,!1),memberSecondaryName:(0,i.Mu)(W,$),showDraftIcon:x,showStatus:z&&(0,o.aH)($),isUserHidden:!!Y&&(0,O.a)(W,Y)}}u(b,"mapStateToProps");const k=(0,M.N)(b)(S)},4822627003:(j,p,e)=>{"use strict";e.d(p,{A:()=>h});var t=e(3134334389),n=e(5255740490),s=e(9438480351),a=e(7076189804),c=e(2828836153),o=e(3877384923),i=e(2762351398),l=e(9391594207),_=e(8276911661);function d(){return d=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var I=arguments[y];for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(v[T]=I[T])}return v},d.apply(this,arguments)}u(d,"_extends");let r=u(class extends t.Component{render(){const{className:y,isActive:I=!1,isDeactivated:T=!1,isDisabled:f=!1,secondaryContent:g,secondaryContentPosition:M=a.lP.right,showUnreadCount:A=!1,showStatus:O,showPresence:D,useShortMode:E=!1,showHoverCard:C,forwardedRef:S,unreadCount:b,ariaLabel:k}=this.props,W=A&&b&&t.createElement(i.Ay,{className:"c-member__unread_count",count:b,style:i.rY.red}),N=g&&t.createElement("span",{className:"c-member__details","data-qa":"member-entity__secondary-content"},g),V=(M===a.lP.right&&N||W)&&t.createElement("span",{className:"c-member__secondary_content"},M===a.lP.right&&N,W),R=(0,n.A)(y,"c-medium_member_list_entity");let P;return I?f||T?P=o.pI.highlightDim:P=o.pI.highlightLight:(f||T)&&(P=o.pI.dim),t.createElement(c.A,{"data-qa":"medium_member_list_entity",className:R,style:P,primaryContent:t.createElement(a.Ay,d({},this.props,{secondaryContent:M===a.lP.right?null:g,showStatus:O,showPresence:D,showHoverCard:C,useShortMode:E,forwardedRef:S})),secondaryContent:V,size:"medium",ariaLabel:k})}},"MediumMemberListEntity");r.displayName="MediumMemberListEntity";function m(v,y){let{id:I}=y;const T=(0,_.nv)(v,I);return{member:T??void 0,unreadCount:(0,s.A)(v,T)}}u(m,"mapStateToProps");const h=(0,l.N)(m,null,null,{forwardRef:!0})(r)},5289504844:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>x,Cg:()=>R});var t=e(3134334389),n=e(5255740490),s=e(3750057149),a=e(7278430876),c=e(3037015781),o=e(9289081806),i=e(8170643398),l=e(9438480351),_=e(9262712126),d=e(4562579337),r=e(5096647761),m=e(6536982570),h=e(4775127335),v=e(1084169413),y=e(5273017660),I=e(3534100833),T=e(3877384923),f=e(2762351398),g=e(8028620372),M=e(9828955991),A=e(8683010724),O=e(5484624422),D=e(735940183),E=e(9391594207),C=e(9101533895),S=e(4761125736),b=e(5761207079),k=e(8276911661),W=e(3146663623);function N(){return N=Object.assign||function(Y){for(var ne=1;ne<arguments.length;ne++){var re=arguments[ne];for(var _e in re)Object.prototype.hasOwnProperty.call(re,_e)&&(Y[_e]=re[_e])}return Y},N.apply(this,arguments)}u(N,"_extends");const V=20,R=16,P=new D.Ay("members");function z(Y){const{className:ne,id:re,invert:_e=!1,member:G,teamId:ge,showAvatar:oe=!0,showDraftIcon:me=!1,showPresence:ue=!0,showBadge:ae=!0,showStatus:he=!0,showTooltip:ce=!0,showUnreadCount:ee=!1,showDeactivated:J=!0,isDeactivated:X=!1,unreadCount:F,useShortMode:L=!1,forceRealName:K=!1,tokenSize:B,truncateStatus:Q=!1,withTruncationTooltip:q,"data-sk":le="small_member_entity","data-qa":Te="small_member_entity",isBold:Ie,experimentSidebarPrefsApplyToMenusGroupOn:De=!1,isUserHidden:pe=!1}=Y,fe=(0,d.A)(G),Z=(0,i.v3)(G),se=(0,i.oy)(G),Ae=(0,r.g)(G),Ce=(0,i.fy)(G),Le=(0,i.hh)(G),Ue=(0,c.lv)(G),Pe=(0,c.mX)(G),He=Ue||Pe,Qe=_e&&!X,lt=J&&se,qe=(0,_.wg)(G),ct=(0,_.Fh)(G);let tt,it;pe?(tt=P.t("Name hidden"),it=P.t("Name hidden")):K||!ct?(tt=qe,it=ct):(tt=ct,it=qe);const Ge=t.createElement(v.A,{"data-qa":"member-entity__primary-name",className:"c-member__member-name",name:tt,invert:Qe,isAppOrBot:fe,isWorkflowBot:Z,isDeleted:lt,isSelf:Ce,isNonExistent:Ue,isUnknown:Pe,withTruncationTooltip:q,isBold:Ie}),We=!pe&&!Le&&t.createElement(I.A,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},it),xe=(0,t.useMemo)(()=>!pe&&!se&&!Le&&t.createElement(M.Ay,{memberId:re||(G==null?void 0:G.id),className:"c-member__presence",invert:Qe,inline:!1}),[pe,se,Le,re,Qe,G]),ze=(0,t.useCallback)(rn=>oe?pe?t.createElement("span",{className:"c-search_autocomplete__hidden_member_icon "},t.createElement(A.A,{size:"20",name:"user-hide"})):He?t.createElement(g.A,N({},rn,{"data-qa":"member-entity__missing",isNonExistent:Ue,size:V})):me?t.createElement("span",{className:"c-member__draft_icon"},t.createElement(A.A,{name:"edit"})):t.createElement(h.Ay,N({},rn,{"data-qa":"member-entity__avatar",size:T.RG.small,userId:re,user:G,showBadge:ae,tabIndex:-1,isInteractive:!1,tokenSize:B})):ue&&De?xe:null,[oe,re,Ue,He,G,B,me,pe,xe,ue,ae,De]),mt=Ae&&t.createElement(O.A,N({},Y,{"data-qa":"member-entity__team-icon",id:ge,size:R,className:"c-member__team_icon"})),pt=t.createElement(a.A,{memberId:re||"",tooltip:ce,animated:L,className:(0,n.A)("c-member__current-status","c-member__current-status--small",{overflow_ellipsis:Q}),"data-qa":"member-entity__status"}),It=ee&&!!F&&t.createElement(f.Ay,{className:"c-member__unread_count",count:F,style:Qe?"white":"red","data-qa":"member-entity__mention-badge"}),bt=t.createElement("span",{className:"c-member__primary_content"},Ge,ue&&!He&&oe&&xe,!L&&We,he&&pt),gt=(mt||It)&&t.createElement("span",{className:"c-member__secondary_content"},mt,It),ht=se&&!_e?T.pI.dim:void 0,Zt=(0,n.A)(ne,"c-member","c-member--small",{"c-member--with-presence":ue,"c-member--deleted":se,"c-base_entity--dim":pe});return t.createElement(y.Ay,{avatar:ze,className:Zt,text:bt,size:"small",style:ht,subtext:gt,"data-qa":Te,"data-sk":le})}u(z,"SmallMemberEntity"),z.displayName="SmallMemberEntity";function $(Y,ne){let{forceRealName:re,member:_e,id:G,isDraftContext:ge,showStatus:oe,onlyBoldIfUnread:me,useShortMode:ue,neverBold:ae}=ne;const he=_e||(0,k.nv)(Y,G);let ce;const ee=G||(he==null?void 0:he.id);ee&&(ge||me)&&(ce=(0,C.Pu)(Y,ee));const J=(0,b.a)(Y,ee);let X=!0;J?X=!!ue:me?X=!!(ce&&(0,o.KJ)(ce)):ae&&(X=!1);let F;return ge&&(F=!!(ce&&(0,o.yc)(Y,ce.id))),{id:G||(he==null?void 0:he.id),member:he??void 0,teamId:(0,m.Ux)(Y,he),forceRealName:(0,s.A)(re)?re:(0,W.E)(Y),unreadCount:(0,l.A)(Y,he),showDraftIcon:F,showStatus:oe&&(0,i.aH)(he),isBold:X,experimentSidebarPrefsApplyToMenusGroupOn:(0,S._Z)(Y,"sidebar_prefs_apply_to_menus")==="on",isUserHidden:J}}u($,"mapStateToProps");const x=(0,E.N)($)(z)},8300576667:(j,p,e)=>{"use strict";e.d(p,{A:()=>l});var t=e(3134334389),n=e(5255740490),s=e(5289504844),a=e(2828836153),c=e(3877384923);function o(){return o=Object.assign||function(_){for(var d=1;d<arguments.length;d++){var r=arguments[d];for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(_[m]=r[m])}return _},o.apply(this,arguments)}u(o,"_extends");let i=u(class extends t.Component{render(){const{className:d,id:r,isActive:m=!1,isDeactivated:h=!1,isDisabled:v=!1,isDraftContext:y,showAvatar:I,showBadge:T,showPresence:f,showStatus:g,showTooltip:M,withTruncationTooltip:A,showUnreadCount:O,useShortMode:D,secondaryContent:E,onlyBoldIfUnread:C=!1,forceRealName:S}=this.props;let b;return m?v||h?b=c.pI.highlightDim:b=c.pI.highlightDark:(v||h)&&(b=c.pI.dim),t.createElement(a.A,{className:(0,n.A)(d,"c-small_member_list_entity"),primaryContent:t.createElement(s.Ay,o({id:r,invert:b===c.pI.highlightDark,isDeactivated:h,truncateStatus:!!E,showAvatar:I,showPresence:f,showBadge:T,useShortMode:D,showStatus:g,showTooltip:M,withTruncationTooltip:A,showUnreadCount:O,isDraftContext:y,onlyBoldIfUnread:C,forceRealName:S},this.props)),secondaryContent:E,size:"small",style:b})}},"SmallMemberListEntity");i.displayName="SmallMemberListEntity";const l=i},1084169413:(j,p,e)=>{"use strict";e.d(p,{A:()=>h});var t=e(3134334389),n=e(5255740490),s=e(9509635375),a=e(5273017660),c=e(3229001818),o=e(1596328926),i=e(3474919656),l=e(6023831373),_=e(4761125736);function d(){return d=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var I=arguments[y];for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(v[T]=I[T])}return v},d.apply(this,arguments)}u(d,"_extends");const r=new i.Ay("inline_member");function m(v){const{className:y,multiline:I=!1,inline:T=!1,invert:f=!1,name:g,isSelf:M=!1,isAppOrBot:A=!1,isWorkflowBot:O=!1,showAppOrBotBadge:D=!0,isDeleted:E=!1,isUnknown:C=!1,isNonExistent:S=!1,withTruncationTooltip:b=!1,isBold:k=!0,isUserHidden:W=!1,isChannelFiles:N=!1,isCreator:V=!1,showMemberNameIfHidden:R=!1}=v,P=(0,l.d4)(Y=>(0,_._Z)(Y,"member_name_channel_files_view_two")==="on");let z;if(C||S)z=t.createElement(c.A,{type:S?"non-existent":"unknown","data-qa":"member_name__missing"});else if(W&&!R)z=r.t("Name hidden");else if(N){const Y=P?r.rt("Created by {name}",{name:g}):`Created by ${g}`;z=V?Y:r.rt("Shared by {name}",{name:g})}else z=g;const $=(0,n.A)(y,"c-member_name",{"c-member_name--deactivated":E,"c-member_name--inverted":f}),x=k?"strong":"span";return t.createElement(a.CG,d({className:$,multiline:I,inline:T,withTruncationTooltip:b},(0,o.A)(v)),t.createElement(x,{"data-qa":"member_name"},z,M&&t.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__you"},r.t("(you)")),E&&t.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__deactivated"},r.t("(deactivated)")),(A||O)&&D&&t.createElement(s.A,{className:"c-member_name__indicator","data-qa":"member_name__app",inverse:f,isWorkflow:O})))}u(m,"MemberName"),m.displayName="MemberName";const h=m},8460568133:(j,p,e)=>{"use strict";e.d(p,{A:()=>ue});var t=e(3134334389),n=e(5255740490),s=e(3297051565),a=e.n(s),c=e(6023831373),o=e(5795074931),i=e(6989432693),l=e(735940183);const _=new l.Ay("channel_token"),d=10,r=u(ae=>{let{memberIds:he}=ae;var ce;const ee=(ce=(0,c.d4)(o.WR))!==null&&ce!==void 0?ce:void 0;let J=he.map((X,F)=>t.createElement(i.A,{key:X,userId:X,isFirst:F===0,isSelf:ee===X}));return he.length>d+1&&(J=J.slice(0,d).concat(_.rt("{count} others",{count:he.length-d}))),t.createElement(t.Fragment,null,(0,l.jd)(J))},"TooltipMemberNames");r.displayName="TooltipMemberNames";const m=r;var h=e(3037015781),v=e(9289081806),y=e(4775127335),I=e(5146991437),T=e(8170643398),f=e(3534324375),g=e(4562579337),M=e(1084169413),A=e(3877384923),O=e(8028620372),D=e(9391594207),E=e(8276911661);const C=20,S={id:a().string.isRequired,invert:a().bool,isDeactivated:a().bool,isHidden:a().bool,member:a().object,memberPrimaryName:a().string},b={member:void 0,memberPrimaryName:void 0,invert:!1,isDeactivated:!1,isHidden:!1},k=t.forwardRef((ae,he)=>{const{id:ce,invert:ee,member:J,memberPrimaryName:X,isDeactivated:F,isHidden:L}=ae,K=(0,g.A)(J),B=(0,T.v3)(J),Q=(0,T.oy)(J),q=(0,h.lv)(J),le=(0,h.mX)(J),Te=q||le,Ie=ee&&!F,De=t.createElement(M.A,{"data-qa":"mpim-entity__name",name:X,invert:Ie,isAppOrBot:K,isWorkflowBot:B,isDeleted:Q,isNonExistent:q,isUnknown:le});let pe;Te?pe=t.createElement(O.A,{isNonExistent:q,size:C}):pe=t.createElement(y.Ay,{className:"c-small_mpim_entity__member_avatar","data-qa":"mpim-entity__avatar",size:A.RG.small,userId:ce,tabIndex:-1,isInteractive:!1});const fe=(0,n.A)("c-small_mpim_entity__member",{"c-small_mpim_entity__member--deleted":Q,"c-small_mpim_entity__member--hidden":L});return t.createElement("div",{className:fe,"data-id":ce,ref:he},pe,De)});k.propTypes=S,k.defaultProps=b;function W(ae,he){let{id:ce}=he;const ee=(0,E.nv)(ae,ce);return{member:ee,memberPrimaryName:(0,f.sE)(ae,ee,!1,!1)}}u(W,"mapStateToProps");const N=(0,D.N)(W,null,null,{forwardRef:!0})(k);var V=e(5273017660),R=e(2762351398),P=e(2312625946),z=e(8170659516),$=e(3852424459),x=e(9101533895),Y=e(3328068409),ne=e(4761125736);function re(){return re=Object.assign||function(ae){for(var he=1;he<arguments.length;he++){var ce=arguments[he];for(var ee in ce)Object.prototype.hasOwnProperty.call(ce,ee)&&(ae[ee]=ce[ee])}return ae},re.apply(this,arguments)}u(re,"_extends");const _e=A.RG.small,G={className:a().string,"data-qa":a().string,"data-sk":a().string,mpim:a().object,id:a().string,invert:a().bool,isDeactivated:a().bool,memberIds:a().array,isActive:a().bool,clientTheme:a().oneOf(["light","dark"]),matchData:a().array,onlyBoldIfUnread:a().bool,showUnreadBadge:a().bool,unreadCount:a().number,shortenTooltipContents:a().bool,showAvatar:a().bool,experimentSidebarPrefsApplyToMenusGroupOn:a().bool},ge={className:void 0,"data-qa":void 0,"data-sk":"small_mpim_entity",mpim:void 0,id:void 0,invert:!1,isDeactivated:!1,memberIds:[],isActive:!1,clientTheme:"light",matchData:[],onlyBoldIfUnread:!1,showUnreadBadge:!1,unreadCount:0,shortenTooltipContents:!1,showAvatar:!0,experimentSidebarPrefsApplyToMenusGroupOn:!1};function oe(ae){let{className:he,"data-qa":ce,"data-sk":ee,id:J,invert:X,isDeactivated:F,mpim:L,memberIds:K,isActive:B,clientTheme:Q,matchData:q,onlyBoldIfUnread:le,showUnreadBadge:Te,unreadCount:Ie,shortenTooltipContents:De,showAvatar:pe,experimentSidebarPrefsApplyToMenusGroupOn:fe}=ae;const Z=(0,h.lv)(L),se=(0,h.mX)(L),Ae=(0,v.N4)(L),Ce=J||(L==null?void 0:L.id),Le=X&&!F,Ue=Te&&!!Ie&&t.createElement(R.Ay,{className:"c-member__unread_count",count:Ie,style:Le?"white":"red","data-qa":"member-entity__mention-badge"}),Pe=Ue&&t.createElement("span",{className:"c-member__secondary_content"},Ue),He=(0,t.useCallback)(ct=>{if(Z||se)return t.createElement(O.A,re({},ct,{isNonExistent:Z,size:_e,invert:Le}));const tt=K==null?void 0:K[0];return t.createElement("span",{className:(0,n.A)("c-small_mpim_entity__mpim_avatars","c-small_mpim_entity__count",he,{"c-small_mpim_entity__mpim_avatars--inverted":Le,[`c-small_mpim_entity__mpim_avatars--${Q}`]:Q!=="light"})},pe&&t.createElement(y.Ay,{userId:tt,className:"c-small_mpim_entity__mpim_avatars_mpim1",size:14,isInteractive:!1,"data-qa":"small-mpim-entity-mpim-avatar"}),t.createElement("div",{className:(0,n.A)("c-small_mpim_entity__mpim_counter",{"c-small_mpim_entity__mpim_counter--count-only":!pe&&fe}),"data-qa":"small-mpim-entity-mpim-counter"},t.createElement("div",{"aria-hidden":!0,className:"c-small_mpim_entity__mpim_counter_inner"},Ae)))},[he,Q,Z,se,Ae,Le,K,pe,fe]),Qe=(0,t.useCallback)(()=>{let ct;return De?ct=t.createElement(m,{memberIds:K}):ct=K.map(tt=>t.createElement(N,{id:tt,key:tt})),t.createElement(t.Fragment,null,ct)},[K,De]);let lt=F?A.pI.dim:null;Le&&(lt=A.pI.highlightDark);const qe=t.createElement(V.Ay,{"data-id":Ce,"data-qa":ce,"data-sk":ee,avatar:He,className:he,size:"small",style:lt,subtext:Pe,text:t.createElement(I.A,{"data-qa":"name",id:Ce,mpim:L,invert:Le,matchData:q,onlyBoldIfUnread:le})});return t.createElement(P.Ay,{tip:Qe(),tipClassName:De?"":"c-small_mpim_entity__tooltip",position:"top-right",shouldForceVisible:B,shouldOnlyShowWhenTruncated:B,zIndex:"above_fs"},t.createElement("div",null,qe))}u(oe,"SmallMpimEntity"),oe.displayName="SmallMpimEntity",oe.propTypes=G,oe.defaultProps=ge;function me(ae,he){let{id:ce,mpim:ee,matchData:J}=he;const X=ee||(0,x.OL)(ae,ce),F=(0,$.B)(ae,ce),L=(0,ne._Z)(ae,"sidebar_prefs_apply_to_menus")==="on",K=(0,z.A)({state:ae,mpim:X,matchData:J}),B=(0,Y.to)(ae),Q=(0,v.kR)(X,F);return{mpim:X,experimentSidebarPrefsApplyToMenusGroupOn:L,memberIds:K,clientTheme:B,unreadCount:Q}}u(me,"small_mpim_entity_mapStateToProps");const ue=(0,D.N)(me)(oe)},5146991437:(j,p,e)=>{"use strict";e.d(p,{A:()=>g});var t=e(3134334389),n=e(9867500491),s=e(1703559452),a=e(3297051565),c=e.n(a),o=e(3037015781),i=e(9289081806),l=e(5273017660),_=e(7026348746),d=e(8170659516),r=e(9391594207),m=e(9101533895),h=e(8276911661);const v=4,y={className:c().string,mpim:c().object,multiline:c().bool,name:c().string,isAnyMemberUnknown:c().bool,invert:c().bool,inline:c().bool,onlyBoldIfUnread:c().bool},I={className:void 0,mpim:void 0,multiline:!1,name:void 0,isAnyMemberUnknown:!1,invert:!1,inline:void 0,onlyBoldIfUnread:!1};function T(M){let{className:A,mpim:O,multiline:D,name:E,invert:C,isAnyMemberUnknown:S,inline:b,onlyBoldIfUnread:k}=M;const W=(0,o.lv)(O),N=(0,o.mX)(O),V=(0,i.N4)(O),R=!k||(0,i.KJ)(O);let P;return N||W||S?P=(0,n.A)(V||v).map(z=>t.createElement(_.A,{key:z,className:"c-mpim_entity__missing_text",isNonExistent:W,size:"random",invert:C})):P=R?t.createElement("strong",{"data-qa":"mpim_name"},E):t.createElement("span",{"data-qa":"mpim_name"},E),t.createElement(l.CG,{className:A,multiline:D,breakWords:!1,inline:b},P)}u(T,"MpimName"),T.displayName="MpimName",T.propTypes=y,T.defaultProps=I;const f=u((M,A)=>{let{id:O,mpim:D,matchData:E}=A;const C=D||(0,m.OL)(M,O),S=(0,d.A)({state:M,mpim:C,matchData:E}),b=S&&S.map(N=>(0,h.nv)(M,N)),k=(0,s.A)(b,o.GU),W=(0,i.Xx)(M,C,S);return{mpim:C,name:W,isAnyMemberUnknown:k}},"mapStateToProps"),g=(0,r.N)(f)(T)},51460783:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3134334389),n=e(5255740490),s=e(1596328926);function a(){return a=Object.assign||function(i){for(var l=1;l<arguments.length;l++){var _=arguments[l];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(i[d]=_[d])}return i},a.apply(this,arguments)}u(a,"_extends");function c(i){const{children:l,className:_}=i;return l?t.createElement("span",a({className:(0,n.A)(_,"c-base_entity__metadata")},(0,s.A)(i)),l):null}u(c,"BaseEntityMetadata"),c.displayName="BaseEntityMetadata";const o=c},161084047:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3134334389),n=e(5255740490),s=e(1596328926);function a(){return a=Object.assign||function(i){for(var l=1;l<arguments.length;l++){var _=arguments[l];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(i[d]=_[d])}return i},a.apply(this,arguments)}u(a,"_extends");function c(i){const{children:l,className:_}=i;return l?t.createElement("span",a({className:(0,n.A)(_,"c-base_entity__subtext")},(0,s.A)(i)),l):null}u(c,"BaseEntitySubtext"),c.displayName="BaseEntitySubtext";const o=c},3534100833:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(3134334389),n=e(5255740490),s=e(8011352381),a=e(1596328926);function c(){return c=Object.assign||function(l){for(var _=1;_<arguments.length;_++){var d=arguments[_];for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(l[r]=d[r])}return l},c.apply(this,arguments)}u(c,"_extends");function o(l){const{children:_=null,className:d="",multiline:r=!1,inline:m=!1,breakWords:h=!0,withTruncationTooltip:v=!1}=l;if(!_)return null;const y=r?2:1;return m?t.createElement("span",c({className:(0,n.A)(d,"c-base_entity__text")},(0,a.A)(l)),_):t.createElement("span",c({className:(0,n.A)(d,"c-base_entity__text")},(0,a.A)(l)),t.createElement(s.A,{lines:y,breakWords:h,withTooltip:v},_))}u(o,"BaseEntityText"),o.displayName="BaseEntityText";const i=o},1464713483:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3877384923),c=e(1596328926);function o(){return o=Object.assign||function(r){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(r[v]=h[v])}return r},o.apply(this,arguments)}u(o,"_extends");const i=u((r,m,h,v)=>!(r!==a.ny.medium||!h||v||m),"shouldVerticallyCenter"),l={className:"c-base_entity__avatar"},_=u(r=>{const{size:m,style:h=a.pI.normal,text:v=null,className:y="",subtext:I=null,avatar:T=s.A,metadata:f=null,forwardedRef:g=null}=r,M=T(l),A=!!M;return t.createElement("div",o({className:(0,n.A)(y,"c-base_entity",`c-base_entity--${m}`,{"c-base_entity--has-avatar":A,"c-base_entity--dim":h===a.pI.dim,"c-base_entity--vertically-center":i(m,I,A,f)})},(0,c.A)(r),{ref:g}),M,t.createElement("div",{className:"c-base_entity__text-contents"},v,I,f))},"BaseEntity");_.displayName="BaseEntity";const d=_},5273017660:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>c,CG:()=>a.A,Q:()=>n.A,sT:()=>s.A});var t=e(1464713483),n=e(51460783),s=e(161084047),a=e(3534100833);const c=t.A},2671211451:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(8011352381),c=e(3877384923),o=e(1596328926);function i(){return i=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},i.apply(this,arguments)}u(i,"_extends");const l=u(m=>{let{children:h,truncate:v=!1,truncateWidth:y,withTruncationTooltip:I=!1}=m;const T=(0,t.useMemo)(()=>({maxWidth:y||void 0}),[y]);if(!v)return t.createElement("span",null,h);let f;return y?f=t.createElement("span",{className:"c-base_inline_entity__inline_wrapper",style:T},h):f=t.createElement("span",null,t.createElement(a.A,{lines:1,withTooltip:I},h)),f},"MaybeTruncate");l.displayName="MaybeTruncate";const _={className:"c-base_inline_entity__avatar","data-qa":"base_inline_entity__avatar"};let d=u(class extends t.Component{render(){const{className:h,avatar:v=s.A,primaryContent:y,secondaryContent:I,style:T=c.pI.normal,truncate:f=!1,truncateWidth:g,withTruncationTooltip:M=!1}=this.props,A=v(_),O=!!A;return t.createElement("span",i({className:(0,n.A)(h,"c-base_inline_entity",{"c-base_inline_entity--has_avatar":O,"c-base_inline_entity--truncate_block":f&&!g,"c-base_inline_entity--truncate_inline":f&&g,"c-base_inline_entity--dim":T===c.pI.dim,"c-base_inline_entity--highlight-dark":T===c.pI.highlightDark,"c-base_inline_entity--highlight-dim":T===c.pI.highlightDim,"c-base_inline_entity--highlight-light":T===c.pI.highlightLight})},(0,o.A)(this.props)),t.createElement(l,{truncate:f,truncateWidth:g,withTruncationTooltip:M},A,t.createElement("span",{className:"c-base_inline_entity__primary_content"},y),I&&t.createElement("span",{className:"c-base_inline_entity__secondary_content"},I)))}},"BaseInlineEntity");d.displayName="BaseInlineEntity";const r=d},2828836153:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(3134334389),n=e(5255740490),s=e(3877384923),a=e(1596328926);function c(){return c=Object.assign||function(l){for(var _=1;_<arguments.length;_++){var d=arguments[_];for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(l[r]=d[r])}return l},c.apply(this,arguments)}u(c,"_extends");let o=u(class extends t.Component{render(){const{className:_,ariaLabel:d,primaryContent:r,secondaryContent:m,size:h=s.ny.medium,style:v=s.pI.normal,padding:y=s.FK.normal}=this.props;return t.createElement("div",c({className:(0,n.A)(_,"c-base_list_entity",`c-base_list_entity--${h}`,{"c-base_list_entity--dim":v===s.pI.dim,"c-base_list_entity--highlight-dark":v===s.pI.highlightDark,"c-base_list_entity--highlight-dim":v===s.pI.highlightDim,"c-base_list_entity--highlight-light":v===s.pI.highlightLight,"c-base_list_entity--no-pad":y===s.FK.none})},(0,a.A)(this.props),{"aria-label":d}),t.createElement("div",{className:"c-base_list_entity__primary_content"},r),m&&t.createElement("div",{className:"c-base_list_entity__secondary_content"},m))}},"BaseListEntity");o.displayName="BaseListEntity";const i=o},5415825258:(j,p,e)=>{"use strict";e.d(p,{A:()=>f});var t=e(3134334389),n=e(5255740490),s=e(6839188756),a=e(2023092677),c=e(5273017660),o=e(3877384923),i=e(4816967449),l=e(8683010724),_=e(735940183),d=e(9391594207),r=e(8847766420),m=e(3677514771),h=e(1835177371);function v(){return v=Object.assign||function(g){for(var M=1;M<arguments.length;M++){var A=arguments[M];for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(g[O]=A[O])}return g},v.apply(this,arguments)}u(v,"_extends");const y=new _.Ay("user_group_entity");function I(g){let{className:M,invert:A,showDescription:O=!0,userGroup:D,userGroupTeamName:E,isDeactivated:C}=g;const S=C||!(0,a.V1)(D),b=(0,t.useCallback)(z=>t.createElement("span",{className:"margin_right_50"},t.createElement(l.A,v({},z,{name:"user-groups",size:"18"}))),[]);if((0,a.t8)(D)||(0,a.QR)(D)){const z=(0,n.A)("c-small_user_group__missing_icon",{"c-small_user_group__missing_icon--inverted":A});return t.createElement("div",{className:"c-small_user_group__missing"},t.createElement("div",{className:z},t.createElement(l.A,{name:"user-groups",size:"18"})),t.createElement(i.A,{type:(0,a.t8)(D)?"unknown":"non-existent",invert:A}))}const k=(0,a.ue)(D),W=t.createElement("span",{className:"c-user_group__name c-small_user_group__name"},k),N=(0,a.Br)(D),V=E&&t.createElement(t.Fragment,null,"\xA0\xA0",t.createElement("span",{className:"c-small_user_group__team"},E)),R=t.createElement(t.Fragment,null,t.createElement("span",{className:"c-small_user_group__count"},"(",y.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:N}),")"),V);let P;return S?P=o.pI.dim:A&&(P=o.pI.highlightDark),t.createElement(c.Ay,{avatar:b,className:M,size:"small",style:P,text:t.createElement(c.CG,null,W,O&&R),"data-usergroup-id":D.id})}u(I,"SmallUserGroupEntity"),I.displayName="SmallUserGroupEntity";const T=u((g,M)=>{let{id:A,userGroup:O}=M;const D=O||(0,h.lJ)(g,A),E=(0,r.ZT)(g),C=(0,a.$Q)(D),S=C!==E&&(0,s.F1)((0,m._J)(g,C));return{userGroup:D,userGroupTeamName:S}},"mapStateToProps"),f=(0,d.N)(T)(I)},3877384923:(j,p,e)=>{"use strict";e.d(p,{FK:()=>s,P:()=>c,RG:()=>t,ny:()=>a,pI:()=>n});const t={xxlarge:102,xlarge:72,large:56,medium:36,small:20,inline:14},n={normal:"normal",dim:"dim",highlightDark:"highlight-dark",highlightDim:"highlight-dim",highlightLight:"highlight-light"},s={normal:"12px",none:"0"},a={small:"small",medium:"medium"},c={true:!0,bestOnly:"best_only",false:!1}},5375115868:(j,p,e)=>{"use strict";e.d(p,{A:()=>l});var t=e(3134334389),n=e(5255740490),s=e(5617110048),a=e(6244014364);function c(){return c=Object.assign||function(_){for(var d=1;d<arguments.length;d++){var r=arguments[d];for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(_[m]=r[m])}return _},c.apply(this,arguments)}u(c,"_extends");const o={onChange:{action:a.UiAction.CLICK}};let i=u(class extends t.PureComponent{componentDidMount(){this.mayBeFocus()}componentDidUpdate(){this.mayBeFocus()}focus(){var d;(d=this.inputRef.current)===null||d===void 0||d.focus()}mayBeFocus(){const{autoFocus:d}=this.props;d&&this.focus()}render(){const{className:d,autoClogProps:r,autoFocus:m,...h}=this.props,v=(0,n.A)("c-input_radio",d),y=t.createElement("input",c({},h,{className:v,ref:this.inputRef,type:"radio"}));return r?t.createElement(s.A,{autoClogProps:r,actionProps:o,elementType:a.ElementType.RADIO},y):y}constructor(d){super(d),this.inputRef=t.createRef()}},"Radio");i.displayName="Radio",i.defaultProps={autoFocus:!1};const l=i},8472205500:(j,p,e)=>{"use strict";e.d(p,{A:()=>I});var t=e(3134334389),n=e(5255740490),s=e(2003990933),a=e(7715417323),c=e(5617110048),o=e(581167618),i=e(3391133100),l=e(2660476100),_=e(9205344153),d=e(8452232783),r=e(9665283624),m=e(2322735331),h=e(6244014364);function v(){return v=Object.assign||function(T){for(var f=1;f<arguments.length;f++){var g=arguments[f];for(var M in g)Object.prototype.hasOwnProperty.call(g,M)&&(T[M]=g[M])}return T},v.apply(this,arguments)}u(v,"_extends");const y={onChange:{action:h.UiAction.ENTER_TEXT}};let I=u(class extends t.PureComponent{componentDidMount(){if(this.getTextStyle(),this.props.focusOnMount){var f;(f=this.input.current)===null||f===void 0||f.focus()}}componentDidUpdate(f,g){if((this.props.value!==f.value||this.state.isFocused!==g.isFocused)&&this.getTextStyle(),this.props.value!==f.value&&!this.state.everReceivedUserInput&&this.setEverReceivedUserInput(),this.props.focusOnMount&&f.focusOnMount!==this.props.focusOnMount&&!this.state.isFocused){var M;(M=this.input.current)===null||M===void 0||M.focus()}}onBlur(){const{onBlur:f}=this.props;this.setFocus(!1),f&&f()}onFocus(){const{onFocus:f}=this.props;this.setFocus(!0),f&&f()}getTextStyle(){var f;const{maxCharacterLimit:g}=this.props;if(!g){this.setTextStyle({});return}const A={paddingRight:(f=this.characterCount)===null||f===void 0?void 0:f.getCharacterCountWidth()};this.setTextStyle(A)}setCharacterCountRef(f){this.characterCount=f}setEverReceivedUserInput(){this.setState(()=>({everReceivedUserInput:!0}))}setFocus(f){this.setState(()=>({isFocused:f}))}setInputRef(f){this.input=f}setTextStyle(f){this.setState(()=>({textStyle:f}))}blur(){this.input.current&&this.input.current.blur()}focus(){this.input.current&&this.input.current.focus()}getIsInputLengthTooShort(){const{isRequired:f,minCharacterLimit:g,value:M}=this.props,{everReceivedUserInput:A}=this.state;return!A||g==null||!f&&M.length===0?!1:M.length<g}getIsInputLengthTooLong(){const{maxCharacterLimit:f,value:g}=this.props;return f==null?!1:g.length>f}renderDeprecatedErrorMaybe(){const{showError:f,errorLevel:g,errorText:M,errorType:A,isRequired:O,maxCharacterLimit:D,minCharacterLimit:E,value:C}=this.props;return f?M?t.createElement(o.Ay,{id:this.state.errorId,level:g,type:A,className:"margin_bottom_100"},M):!O&&C.length===0?null:this.getIsInputLengthTooLong()?t.createElement(o.Ay,{id:this.state.errorId,level:o.A_.error,type:A,className:"margin_bottom_100"},(0,i.zI)(D)):this.getIsInputLengthTooShort()&&!this.state.isFocused?t.createElement(o.Ay,{id:this.state.errorId,level:o.A_.error,type:A,className:"margin_bottom_100"},(0,i.r7)(E)):null:null}renderErrorMaybe(){const{showError:f,errorText:g,isRequired:M,maxCharacterLimit:A,minCharacterLimit:O,value:D}=this.props;return f?g?t.createElement(r.A,{"data-qa":"form-text-area-inline-alert",id:this.state.errorId},g):!M&&D.length===0?null:this.getIsInputLengthTooLong()?t.createElement(r.A,{id:this.state.errorId,"data-qa":"form-text-area-max-char-alert"},(0,i.zI)(A)):this.getIsInputLengthTooShort()&&!this.state.isFocused?t.createElement(r.A,{id:this.state.errorId,"data-qa":"form-text-area-min-char-alert"},(0,i.r7)(O)):null:null}renderHintMaybe(){const{hintText:f}=this.props;return f?t.createElement(l.A,{id:this.state.hintId},f):null}renderTextArea(){const{className:f,showError:g,errorId:M,errorLevel:A,errorText:O,errorType:D,hintId:E,hintText:C,useInlineAlert:S,id:b,isRequired:k,isInvalid:W,labelId:N,name:V,onChange:R,onFocus:P,onBlur:z,maxCharacterLimit:$,minCharacterLimit:x,focusOnMount:Y,autoClogProps:ne,ariaDescribedById:re,inputRef:_e,...G}=this.props,{textStyle:ge}=this.state,oe=!!O||this.getIsInputLengthTooLong()||this.getIsInputLengthTooShort()||W,me=(0,n.A)({[`c-input_textarea--with_${A}`]:oe,"c-input_textarea--with_hint":C,"c-input_textarea--with_character_count":!!$,"c-input_text--with_inline_alert":S},f),ue=(0,i.Yk)([N,oe?this.state.errorId:void 0]),ae=(0,i.Yk)([re,this.state.hintId,this.characterCounterId]),he=t.createElement(d.A,v({},G,{ref:this.setInputRef,style:ge,ariaDescribedby:ae,isInvalid:oe,ariaLabelledby:ue,ariaRequired:k,className:me,id:b,"data-qa":G["data-qa"]||b,name:V,onChange:R,onFocus:this.onFocus,onBlur:this.onBlur}));return ne?t.createElement(c.A,{autoClogProps:ne,actionProps:y,elementType:h.ElementType.TEXTAREA},he):he}renderWrappedTextareaMaybe(){const{value:f,maxCharacterLimit:g,size:M,isDisabled:A}=this.props;let O=this.renderTextArea();return g&&(O=t.createElement(_.A,{id:this.characterCounterId,ref:this.setCharacterCountRef,currentCount:f==null?void 0:f.length,isDisabled:A,maxCharacterLimit:g,type:"multiline",size:M},O)),O}render(){const f=this.props.useInlineAlert?this.renderErrorMaybe():this.renderDeprecatedErrorMaybe();return t.createElement("div",{"data-qa-formtextarea":!0,className:"c-input_textarea__wrapper"},this.renderWrappedTextareaMaybe(),f,this.renderHintMaybe())}constructor(f){super(f);const{id:g}=this.props;(0,m.v)(this,["onFocus","onBlur","setInputRef","setCharacterCountRef"]),this.state={errorId:(0,s.A)(this.props,"errorId",(0,i.Es)(g,"error")),hintId:(0,s.A)(this.props,"hintId",(0,i.Es)(g,"hint")),isFocused:!1,everReceivedUserInput:!1,textStyle:{}},this.props.maxCharacterLimit&&(this.characterCounterId=(0,i.Es)(g,"character-count")),this.input=t.createRef()}},"FormTextareaInput");I.displayName="FormTextareaInput",I.defaultProps={className:null,showError:!0,errorId:void 0,errorLevel:o.A_.error,errorText:null,errorType:o.QE.nestedBox,useInlineAlert:!1,hintText:null,hintId:void 0,isDisabled:!1,isRequired:!1,isInvalid:!1,labelId:null,onChange:a.A,onFocus:a.A,onBlur:a.A,placeholder:void 0,size:d.F.medium,value:"",maxCharacterLimit:null,minCharacterLimit:null,focusOnMount:!1,autoClogProps:void 0,type:void 0,ariaDescribedById:void 0,role:void 0,inputRef:void 0}},8452232783:(j,p,e)=>{"use strict";e.d(p,{A:()=>m,F:()=>l});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(5617110048),c=e(5797272849),o=e(6244014364);function i(){return i=Object.assign||function(h){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var I in y)Object.prototype.hasOwnProperty.call(y,I)&&(h[I]=y[I])}return h},i.apply(this,arguments)}u(i,"_extends");const l={small:"small",medium:"medium",large:"large"},_={onBlur:{action:o.UiAction.SAVE}};var d;let r=u(class extends(d=t.Component){componentDidMount(){var v;this.props.focusOnMount&&(!((v=this.textAreaRef)===null||v===void 0)&&v.current)&&this.textAreaRef.current.focus()}onChange(v){this.props.onChange(v.target.value)}render(){const{ariaDescribedby:v,isInvalid:y,ariaLabelledby:I,ariaRequired:T,className:f,placeholder:g,id:M,isDisabled:A,name:O,resize:D,size:E,focusOnMount:C,autoClogProps:S,...b}=this.props,k=(0,n.A)("c-input_textarea",{"c-input_textarea--large":E===l.large,"c-input_textarea--small":E===l.small,"c-input_textarea--resize_none":D==="none","c-input_textarea--resize_both":D==="both","c-input_textarea--resize_h":D==="horizontal","c-input_textarea--with_error":y,"c-input_textarea--with_inline_alert":y,[c.E.small]:E===l.small,[c.E.large]:E===l.large},f),W=t.createElement("textarea",i({},b,{"aria-describedby":v,"aria-invalid":y,"aria-labelledby":I,"aria-required":T,className:k,disabled:A,id:M,name:O,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:g,ref:this.textAreaRef,value:this.props.value,style:this.props.style,maxLength:this.props.maxLength}));return S?t.createElement(a.A,{autoClogProps:S,actionProps:_,elementType:o.ElementType.TEXTAREA},W):W}constructor(v){super(v),this.onChange=this.onChange.bind(this),this.textAreaRef=t.createRef()}},"TextareaInput");r.displayName="TextareaInput",r.defaultProps={ariaDescribedby:"",isInvalid:!1,ariaLabelledby:"",ariaRequired:!1,className:null,isDisabled:!1,onChange:s.A,onFocus:s.A,onBlur:s.A,placeholder:"",resize:null,size:l.medium,style:void 0,maxLength:void 0,value:"",focusOnMount:!1,autoClogProps:void 0};const m=r},4967176632:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(3564666345);function s(){return s=Object.assign||function(o){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var _ in l)Object.prototype.hasOwnProperty.call(l,_)&&(o[_]=l[_])}return o},s.apply(this,arguments)}u(s,"_extends");function a(o){let{className:i=void 0,initialValues:l,initialErrors:_=void 0,validate:d=void 0,validationSchema:r=void 0,validateOnBlur:m=!0,validateOnChange:h=!0,validateOnMount:v=!1,onReset:y=void 0,onSubmit:I,children:T,...f}=o;const g=y?{onReset:y}:{};return t.createElement(n.l1,s({initialValues:l,initialErrors:_,validate:d,validationSchema:r,validateOnBlur:m,validateOnChange:h,validateOnMount:v,onSubmit:I},g,f),M=>{let{handleSubmit:A,handleReset:O,...D}=M;return t.createElement("form",{className:i,onSubmit:A,onReset:O},T({...D}))})}u(a,"Form"),a.displayName="Form";const c=a},3155323475:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(3134334389),n=e(5255740490),s=e(9665283624);function a(c){let{className:o,errors:i}=c;var l;return i&&i.length>0?t.createElement(t.Fragment,null,i.map(_=>(0,t.isValidElement)(_.message)?t.cloneElement(_.message,{key:_.id,id:_.id,className:(0,n.A)(o,"c-field_input__helpers")}):(l=!!_.message&&t.createElement(s.A,{className:(0,n.A)(o,"c-field_input__helpers"),key:_.id,id:_.id},_.message))!==null&&l!==void 0?l:null)):null}u(a,"FieldErrors")},7811786890:(j,p,e)=>{"use strict";e.d(p,{DQ:()=>d,IM:()=>o,T$:()=>_,Wz:()=>h,Zr:()=>v,m4:()=>a,mw:()=>c});var t=e(9746734072),n=e(6313685253),s=e(9113979368);const a={email:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,phone:/^[0-9._+-]{8,15}$/i},c=u(y=>{const I=typeof y=="boolean",T=typeof y=="string",f=I&&!y,g=T&&(!y||!y.trim()),M=(0,t.A)(y)&&!y.length;return f||g||M||y===null?"Required":null},"required"),o=u((y,I)=>T=>(a[y]||y).test(T)?null:I,"regexPattern"),i=o(a.email,"Please enter a valid email address."),l=o(a.phone,"Please enter a valid phone number."),_=u(y=>I=>!I||I.length<y?`Minimum of ${y} characters`:null,"minCharacterCount"),d=u(y=>I=>I.length>y?`Max character limit is ${y}`:null,"maxCharacterCount"),r=u(y=>I=>{let T=null;return y.forEach(f=>{I===f&&(T=`Cannot use ${I}`)}),T},"tokenNotAllowed"),m=u(y=>I=>{let T=null,f;return I&&I.length&&(I.includes(",")?(f=I.split(",").filter(g=>!!y.includes(g)),T=`Cannot use ${f}`):y.includes(I)&&(f=I,T=`Cannot use ${f}`)),T},"tokensNotAllowed"),h=u(y=>I=>{const T=(0,n.A)(y,(f,g,M)=>{const A=g.map(O=>O(I[M],I)).filter(Boolean);return A.length>0&&(f[M]=A),f},{});return(0,s.A)(T)?void 0:T},"createValidation"),v=u(y=>I=>{const T=y.map(f=>f(I)).filter(Boolean);return(0,s.A)(T)?void 0:T},"createValidate")},9742374352:(j,p,e)=>{"use strict";e.d(p,{A:()=>r});var t=e(3134334389),n=e(5255740490),s=e(5617110048),a=e(3753517560),c=e(6538933722),o=e(6244014364),i=e(2907415594);function l(){return l=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},l.apply(this,arguments)}u(l,"_extends");const _={onClick:{action:o.UiAction.CLICK}},d=t.forwardRef(u(function(h,v){let{autoClogProps:y,className:I,href:T,invert:f=!1,children:g,hasKeyboardFocus:M=!1,...A}=h;const O=(0,n.A)("c-link",{"c-link--focus-visible":M,"c-link--invert":f},I),D=A.target==="_blank"||(T==null?void 0:T.startsWith("mailto:")),E=t.createElement("a",l({},(0,i.A)(A),{className:O,href:T,ref:v}),g,D&&t.createElement(c.A,null));return y?t.createElement(s.A,{autoClogProps:y,actionProps:_,elementType:o.ElementType.LINK},E):E},"BaseLink"));d.displayName="BaseLink";const r=(0,a.A)(d)},9163962844:(j,p,e)=>{"use strict";e.d(p,{A:()=>n,r:()=>t.rY});var t=e(2762351398);const n=t.Ay},2762351398:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>l,rY:()=>c});var t=e(3134334389),n=e(5255740490),s=e(2312625946);function a(){return a=Object.assign||function(_){for(var d=1;d<arguments.length;d++){var r=arguments[d];for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(_[m]=r[m])}return _},a.apply(this,arguments)}u(a,"_extends");const c={transparent:"transparent",black:"black",red:"red",white:"white",blue:"blue",minGray:"min_gray",minGrayDarken:"min_gray_darken",themed:"themed"},o=u((_,d)=>_>d?`${d}+`:String(_),"getCountText"),i=u(_=>{let{className:d,count:r,maxCount:m=9,style:h="black",toolTipText:v=""}=_;if(!r||r<0)return null;const y=v?s.Ay:t.Fragment,I=v?{tip:v}:{};return t.createElement(y,a({},I),t.createElement("span",{"aria-hidden":"true",className:(0,n.A)(d,"c-mention_badge",`c-mention_badge--${h}`,{"c-mention_badge--max":r>m},v&&"c-mention_badge--default"),"data-qa":"mention_badge"},o(r,m)))},"MentionBadge");i.displayName="MentionBadge";const l=t.memo(i)},3514831633:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>l,Dr:()=>s.A,YJ:()=>t.YJ,a:()=>n.A,bX:()=>c.Ay,c$:()=>a.Ay,cQ:()=>o.A});var t=e(5152183509),n=e(8383646472),s=e(8245211418),a=e(7417231112),c=e(8184841524),o=e(7433650413),i=e(101973425);const l=t.Ay},8383646472:(j,p,e)=>{"use strict";e.d(p,{A:()=>g});var t=e(3134334389),n=e(2141441167),s=e(862210999),a=e(3297051565),c=e.n(a),o=e(7139225017),i=e(4902318931),l=e(6308822),_=e(5152183509),d=e(8245211418),r=e(7417231112),m=e(8184841524),h=e(8773153312),v=e(1959847761);function y(){return y=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var O=arguments[A];for(var D in O)Object.prototype.hasOwnProperty.call(O,D)&&(M[D]=O[D])}return M},y.apply(this,arguments)}u(y,"_extends");const I={type:c().oneOf((0,n.A)(h.A)),label:c().node,description:c().oneOfType([c().string,c().element]),children:c().element,key:c().string,click:c().func,danger:c().bool,dataQa:c().string,checked:c().bool,indeterminate:c().bool,ariaHidden:c().bool,target:c().string,href:c().string,download:c().string,action:c().func,payload:c().object,autoClogProps:c().object},T={template:c().arrayOf(c().shape({...I,renderSubmenu:c().func,template:c().arrayOf(c().shape(I)),submenu:c().arrayOf(c().shape(I)),checked:c().bool})).isRequired};let f=u(class Ya extends t.PureComponent{render(){const{template:A,...O}=this.props,D=A.map((E,C)=>{if(!E)return null;if(E.type===h.A.separator)return t.createElement(m.Ay,y({},E,{key:E.key||`separator-${C}`}));if(E.type===h.A.sub_separator)return t.createElement(m.Ay,y({},E,{className:"c-menu_separator__li--sub",key:E.key||`separator-${C}`}));if(E.type===h.A.header)return t.createElement(r.Ay,{key:E.key||`header-${C}`,label:E.label,className:E.className});if(E.type===h.A.loading)return t.createElement(l.A,{key:E.key||"loading",size:"large"});const S={children:E.children,className:E.className,classNameListItem:E.classNameListItem,label:E.label,description:E.description,icon:E.icon,badgeCount:E.badgeCount,badgeLabel:E.badgeLabel,badgeClassName:E.badgeClassName,shortcut:E.shortcut,showEnter:E.showEnter,onSelected:E.click,target:E.target,href:E.href,download:E.download,danger:E.danger,type:E.type,"data-qa":E.dataQa,disabled:E.disabled,showOfflineIcon:E.showOfflineIcon,showLinkIndicatorIcon:E.showLinkIndicatorIcon,checked:E.checked,indeterminate:E.indeterminate,width:E.submenuWidth,autoClogProps:E.autoClogProps,megaphoneSpaceName:E.megaphoneSpaceName,megaphoneNotificationName:E.megaphoneNotificationName,onMount:E.onMount,onUnmount:E.onUnmount,ariaDescribedBy:E.ariaDescribedBy,ariaRole:E.ariaRole},b=E.key||E.label;if(E.type===h.A.submenu){const W=(0,s.A)(E.renderSubmenu)?E.renderSubmenu:N=>t.createElement(Ya,y({template:E.template||E.submenu},N,{width:E.submenuWidth}));return t.createElement(v.A,y({},S,{label:E.label,renderSubmenu:W,key:b}))}if(E.type===h.A.custom)return E.ariaHidden===!1&&!(0,o.A)()?E.children:t.createElement("div",{"aria-hidden":E.ariaHidden===!1?"false":"true",key:E.key,"data-qa":E.dataQa},E.children);if(E.type===h.A.subheaderChild)return t.createElement(d.A,y({key:b,type:h.A.subheaderChild},S));const k=t.createElement(d.A,y({key:b},S));return E.megaphoneSpaceName&&E.megaphoneNotificationName?t.createElement(i.Ay,{key:b,spaceName:E.megaphoneSpaceName,notifications:{[E.megaphoneNotificationName]:{component:()=>k}}}):k});return t.createElement(_.Ay,y({},O),D)}},"MenuFromTemplate");f.displayName="MenuFromTemplate",f.propTypes=T;const g=f},7417231112:(j,p,e)=>{"use strict";e.d(p,{$b:()=>_,Ay:()=>i,a6:()=>l});var t=e(3134334389),n=e(5255740490),s=e(7715417323);function a(){return a=Object.assign||function(d){for(var r=1;r<arguments.length;r++){var m=arguments[r];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(d[h]=m[h])}return d},a.apply(this,arguments)}u(a,"_extends");const c="_isSlackMenuItemHeader";function o(d){let{for:r,label:m,className:h,onMouseEnter:v=s.A}=d;return t.createElement("div",a({},r&&{id:_(r)},{"aria-hidden":"true",className:(0,n.A)("c-menu_item__header",h),onMouseEnter:v,"data-qa":"menu-item-header"}),m)}u(o,"MenuItemHeader"),o.displayName="MenuItemHeader",o[c]=!0;const i=o;function l(d){return!!(d!=null&&d[c])}u(l,"isMenuItemHeader");function _(d){return`${d}-label`}u(_,"getMenuItemHeaderIdForGroup")},8245211418:(j,p,e)=>{"use strict";e.d(p,{A:()=>A});var t=e(3134334389),n=e(5255740490),s=e(3078252698),a=e(7715417323),c=e(8049923572),o=e(6084388622),i=e(7420598276),l=e(1610251172),_=e(2762351398),d=e(8773153312),r=e(101973425),m=e(8683010724),h=e(6244014364),v=e(571104883),y=e(735940183),I=e(9391594207);const T=new y.Ay("menu");let f=u(class extends t.Component{componentDidMount(){this.props.onMount&&this.props.onMount()}componentWillUnmount(){this.props.onUnmount&&this.props.onUnmount()}onSelected(D){var E,C;(C=(E=this.props).menuCallbackBefore)===null||C===void 0||C.call(E,D),this.props.onSelected(D),this.props.menuCallback(this.props.menuCallbackId,D)}determineMenuRole(){const{type:D,ariaRole:E}=this.props;if(E)return E;switch(D){case d.A.radio:return"menuitemradio";case d.A.checkbox:return"menuitemcheckbox";default:return"menuitem"}}renderBadgeMaybe(){const{badgeLabel:D,badgeCount:E,badgeClassName:C,highlighted:S}=this.props;return E?t.createElement(_.Ay,{count:E,style:S?_.rY.white:_.rY.red}):D?t.createElement(i.A,{className:C},D):null}renderAdditionalIconMaybe(){const{additionalIcon:D}=this.props;return D?t.createElement("div",{className:"c-menu_item__additional-icon","data-qa":"menu_item_additional_icon",role:"presentation"},D):null}renderCaret(){return!this.props.withSubmenu||this.props.disabled?null:t.createElement("div",{className:"c-menu_item__submenu-indicator","data-qa":"menu_item_submenu_indicator",role:"presentation"},t.createElement(m.A,{name:this.props.showFullCarat?"caret-right-full":"caret-right"}))}renderEnterMaybe(){const{showEnter:D,highlighted:E}=this.props;return!D||!E?null:t.createElement(l.A,{legacy:!0,type:"enter",className:"c-menu_item__enter","data-qa":"menu_item_enter",role:"presentation"})}renderCheckmarkMaybe(){const{type:D,checked:E,indeterminate:C}=this.props,S=D===d.A.radio||D===d.A.checkbox;return S&&C?t.createElement(l.A,{className:"c-menu_item__checkbox_dash","data-qa":"menu_item_checkbox_dash",type:"form-checkbox-dash",size:"inherit",inline:!0}):S&&E?t.createElement("div",{className:"c-menu_item__checkmark"},t.createElement(m.A,{name:"check",size:"16",inline:!0,"data-qa":"menu_item_checkmark"})):null}renderIconMaybe(){const{icon:D}=this.props;return D?t.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},D):null}renderLinkIconMaybe(){const{href:D,showLinkIndicatorIcon:E}=this.props;return E===!1||E!==!0&&!D?null:t.createElement("div",{className:"c-menu_item__link_icon","data-qa":"menu_item_link_icon",role:"presentation"},t.createElement(m.A,{name:"new-window","data-qa":"menu_item_link_indicator"}))}renderShortcutMaybe(){const{shortcut:D,containerSize:E,experimentSkResponsiveMenusGroupOn:C,isResponsive:S}=this.props;if(!D||C&&S&&E&&E.width<300)return null;if(!(0,s.A)(D)&&"label"in D){const{label:b}=D;if(b&&(0,s.A)(b))return t.createElement("div",{className:"c-menu_item__shortcut"},b)}return t.createElement("div",{className:"c-menu_item__shortcut"},D)}render(){const{autoClogProps:D,children:E,className:C,classNameListItem:S,danger:b,description:k,disabled:W,showOfflineIcon:N,highlighted:V,label:R,onMouseEnter:P,onMouseLeave:z,href:$,target:x,download:Y,type:ne,withSubmenu:re,standaloneHoverEffect:_e,checked:G,indeterminate:ge,measureRef:oe,containerSize:me,experimentSkResponsiveMenusGroupOn:ue,isResponsive:ae,ariaDescribedBy:he,ariaLabelledBy:ce,ariaLabel:ee,disableHoverStyling:J}=this.props,X=(0,n.A)(C,"c-menu_item__button",{"c-menu_item__button--highlighted":V&&!W&&!J,"c-menu_item__button--danger":b,"c-menu_item__button--disabled":W,"c-menu_item__button--with_submenu":re,"c-menu_item--button--subheader_child":ne===d.A.subheaderChild,"c-menu_item__button--checked":(ne===d.A.radio||ne===d.A.checkbox)&&(G||ge),"c-menu_item--compact":ne===d.A.compactItem,"c-menu_item--standalone":_e}),F=(0,n.A)(S,"c-menu_item__li",{"c-menu_item__li--highlighted":V&&!J}),L=(0,n.A)(S,"c-menu_item__label",{"c-menu_item__label--with_description":k}),K=re?"true":void 0,B=k?t.createElement("div",{className:"c-menu_item__description"},k):"",Q=this.props.activeMenuId,q=this.props.featureSubmenuRoleDescription?T.t("submenu"):void 0,le=(0,v.cX)()&&re?q:void 0;return t.createElement("div",{ref:oe,className:F,onMouseEnter:P,onMouseLeave:z,"data-qa":`${this.props["data-qa"]}-wrapper`},t.createElement(o.Nm,{autoClogProps:{...D,elementType:h.ElementType.MENU_ITEM},ref:this.buttonRef,id:Q,className:X,disabled:W,onClick:this.onSelected,href:$,target:x,download:Y,"data-qa":this.props["data-qa"],role:this.determineMenuRole(),checked:G,"aria-checked":ge?"mixed":G,"aria-haspopup":K,tabIndex:-1,"aria-roledescription":le,"aria-describedby":he,"aria-labelledby":ce,"aria-label":ee},this.renderCheckmarkMaybe(),this.renderIconMaybe(),t.createElement("div",{className:L},R,E,!(ue&&ae&&me&&me.width<300)&&B),this.renderShortcutMaybe(),this.renderBadgeMaybe(),this.renderAdditionalIconMaybe(),this.renderCaret(),this.renderEnterMaybe(),this.renderLinkIconMaybe(),N&&t.createElement("div",{className:"c-menu_item__icon c-menu_item__icon--offline","data-qa":"menu_item_icon",role:"presentation"},t.createElement(l.A,{type:"cloud-offline-small"}))))}constructor(D){super(D),this.onSelected=this.onSelected.bind(this),this.buttonRef=t.createRef()}},"MenuItem");f.displayName="MenuItem",f.defaultProps={children:void 0,highlighted:!1,onMouseEnter:a.A,onMouseLeave:a.A,onSelected:a.A,menuCallback:a.A,menuCallbackBefore:a.A,menuCallbackId:null,className:"",classNameListItem:"",label:"",description:"",danger:!1,disabled:!1,showOfflineIcon:!1,href:null,showLinkIndicatorIcon:void 0,icon:null,shortcut:void 0,badgeCount:void 0,badgeLabel:void 0,badgeClassName:void 0,showEnter:!1,target:void 0,download:void 0,type:d.A.default,withSubmenu:!1,"data-qa":"menu_item_button",activeMenuId:void 0,standaloneHoverEffect:void 0,autoClogProps:void 0,checked:void 0,indeterminate:void 0,featureSubmenuRoleDescription:!1,group:void 0,experimentSkResponsiveMenusGroupOn:!1,isResponsive:!0,ariaDescribedBy:void 0,ariaLabel:void 0,onMount:a.A,onUnmount:a.A,showFullCarat:!1,disableHoverStyling:!1};const g={MenuItem:f},M=u(O=>({experimentSkResponsiveMenusGroupOn:(0,c.IN)(O)}),"mapStateToProps"),A=(0,r.Ay)((0,I.N)(M)((0,c.BM)(f)))},8184841524:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>c,HP:()=>o});var t=e(3134334389),n=e(5255740490);const s="_isSlackMenuSeparator";function a(i){let{className:l,noPadding:_,noPaddingAbove:d,noPaddingBelow:r,noFirstChild:m,noLastChild:h,dataQa:v="menu_separator__separator"}=i;const y=(0,n.A)("c-menu_separator__li",{padding_0:_,padding_top_0:d,padding_bottom_0:r,"c-menu_separator__li--no_first_child":m,"c-menu_separator__li--no_last_child":h},l);return t.createElement("div",{className:y},t.createElement("hr",{className:"c-menu_separator__separator","data-qa":v}))}u(a,"MenuSeparator"),a.displayName="MenuSeparator",a[s]=!0;const c=a;function o(i){return!!(i!=null&&i[s])}u(o,"isMenuSeparator")},7433650413:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3134334389),n=e(5249175977),s=e(5751973043);function a(){return a=Object.assign||function(i){for(var l=1;l<arguments.length;l++){var _=arguments[l];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(i[d]=_[d])}return i},a.apply(this,arguments)}u(a,"_extends");const c=u(i=>{const{renderMenu:l,onPopoverOpen:_,onPopoverClose:d,isDisabled:r=!1,closeOnSelect:m=!0,onTriggerClose:h,onMenuItemSelected:v,onMenuKeyDown:y,...I}=i,T=u(()=>{_&&_()},"onOpenProp"),f=u(M=>{const{onClose:A,...O}=M,D=u((b,k)=>{A&&A(b),d&&d(b)},"onCloseProp"),S=l({...M,onTriggerClose:u(b=>{A&&A(b),h&&h(b)},"onTriggerClose"),onMenuItemSelected:u((b,k)=>{m&&(A&&A(k),d&&d(k)),v&&v(b,k)},"onMenuItemSelected"),onMenuKeyDown:y});return S?t.createElement(n.AM,a({shouldFade:!1,onClose:D,onOpen:T},O),S):!1},"renderPopover");if(f.displayName="renderPopover",r)return typeof i.children=="function"?i.children(s.t0):i.children;const g=i.isContextMenu?s.t0:{"aria-haspopup":"menu"};return t.createElement(n.Wv,a({},I,{triggerProps:g,renderPopover:f}),i.children)},"MenuTrigger");c.displayName="MenuTrigger";const o=c},8773153312:(j,p,e)=>{"use strict";e.d(p,{A:()=>n,y:()=>t});const t={default:"default",compactItem:"compact_item",separator:"separator",sub_separator:"sub_separator",submenu:"submenu",header:"header",loading:"loading",custom:"custom",subheaderChild:"subheader_child",radio:"radio",checkbox:"checkbox"},n=t},5152183509:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>z,YJ:()=>N});var t=e(3134334389),n=e(5255740490),s=e(3078252698),a=e(9746734072),c=e(8424846741),o=e(7715417323),i=e(4481313819),l=e(4244379358),_=e(8049923572);const d=u($=>{let{"aria-labelledby":x,"aria-owns":Y}=$;return Y?t.createElement("div",{className:"offscreen",role:"group","aria-owns":Y,"aria-labelledby":x}):null},"MenuItemGroup");d.displayName="MenuItemGroup";const r=d;var m=e(7417231112),h=e(8184841524),v=e(101973425),y=e(1959847761),I=e(6244014364);function T($){return t.isValidElement($)&&"children"in $.props}u(T,"hasChildren");function f($){return $!=null&&typeof $=="object"&&"type"in $&&$.type===t.Fragment}u(f,"isFragment");function g($){return $ instanceof Array?$.map(g):f($)&&T($)?g($.props.children):$}u(g,"defragment");function M($){return t.Children.toArray(g($))}u(M,"flattenChildren");var A=e(796111729),O=e(3821598679),D=e(9391594207);function E(){return E=Object.assign||function($){for(var x=1;x<arguments.length;x++){var Y=arguments[x];for(var ne in Y)Object.prototype.hasOwnProperty.call(Y,ne)&&($[ne]=Y[ne])}return $},E.apply(this,arguments)}u(E,"_extends");function C($){const x=$&&$.type;return!!x&&(0,v.l0)(x)}u(C,"isMenuItem");function S($){const x=$&&$.type;return!!x&&(0,y.e)(x)}u(S,"isSubmenu");function b($){const x=$&&$.type;return x&&(0,h.HP)(x)}u(b,"isSeparator");function k($){const x=$&&$.type;return x&&(0,m.a6)(x)}u(k,"isMenuItemHeader");let W=0;function N(){return W>0}u(N,"isMenuVisible");const V={ArrowUp:"selectprevious",Up:"selectprevious",ArrowDown:"selectnext",Down:"selectnext",ArrowLeft:"closesubmenu",Left:"closesubmenu",ArrowRight:"opensubmenu",Right:"opensubmenu",Escape:"closemenu",Enter:"select"," ":"select",Home:"selectfirst",End:"selectlast"};let R=u(class extends t.Component{componentDidMount(){this.focus(),W+=1}componentDidUpdate(x){this.props.kbNavActive&&!x.kbNavActive&&this.activateKBNav()}componentWillUnmount(){W-=1,this.props.onUnmount&&this.props.onUnmount()}onMenuNavigation(x){const Y=this.getIndexOfNextMenuItemInDirection(x);this.setState(()=>({highlightedMenuItemIndex:Y,highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0}))}onMouseEnterMenuItem(x){const Y=this.state.highlightCanChangeOnMouseMovement?x:this.state.highlightedMenuItemIndex;if(this.setState(()=>({highlightedMenuItemIndex:Y,contingentHighlightedMenuItemIndex:x,highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!1})),!!this.state.highlightCanChangeOnMouseMovement&&document.activeElement!==this.ariaMenuNode){var ne;(ne=this.ariaMenuNode)===null||ne===void 0||ne.focus()}}getAllMenuItemIndices(){const x=[];return M(this.props.children).filter(t.isValidElement).forEach((Y,ne)=>{(C(Y)||S(Y))&&x.push(ne)}),x}getIndexOfNextMenuItemInDirection(x){const Y=this.getAllMenuItemIndices(),ne=Y.indexOf(this.state.highlightedMenuItemIndex),re=Y.length-1;if(x==="selectnext"){const G=ne<re?ne+1:0;return Y[G]}const _e=ne-1>=0?ne-1:re;return Y[_e]}getSelectedMenuItem(){const{highlightedMenuItemIndex:x}=this.state;if(!(x<0)&&this.menuChildren)return this.menuChildren[x]}focus(){const{kbNavActive:x,isSubmenu:Y}=this.props;if(!x)return;if(!Y){this.ariaMenuNode&&this.ariaMenuNode.focus();return}const ne=this.getAllMenuItemIndices();if(!ne.length){var re;(re=this.ariaMenuNode)===null||re===void 0||re.focus();return}this.setState(()=>({highlightedMenuItemIndex:ne[0]}),()=>{var _e;(_e=this.ariaMenuNode)===null||_e===void 0||_e.focus()})}registerKeyboardShortcutForMenuItem(x,Y){if(!x||!Y)return;const{label:ne,key:re}=x;(0,s.A)(ne)&&((0,s.A)(re)||(0,a.A)(re))&&(0,c.A)(re).forEach(_e=>{this.keyboardShortcutsMap[_e]=Y})}renderMenuItem(x,Y){const ne=this.onMouseEnterMenuItem.bind(this,Y),{highlightedMenuItemIndex:re,highlightedMenuItemKbNavActive:_e,isKeyboardHighlight:G}=this.state,{onMenuItemSelectedBefore:ge,stripTerminalSeparators:oe,isResponsive:me}=this.props;k(x)&&x.props.for&&(this.menuGroups||(this.menuGroups={}),this.menuGroups[x.props.for]={key:x.props.for,"aria-labelledby":(0,m.$b)(x.props.for),"aria-owns":[],index:Y});const ue={...x.props,onMouseEnter:ne,key:Y},ae=`${this.activeMenuId}-${Y}`,{shortcut:he}=x.props;if(he&&this.registerKeyboardShortcutForMenuItem(he,ae),C(x)||S(x)){const X=re===Y;if(ue.activeMenuId=ae,X&&G){var ce,ee,J;(ee=(ce=this.ariaMenuNode)===null||ce===void 0?void 0:ce.querySelector(`#${ue.activeMenuId}`))===null||ee===void 0||(J=ee.scrollIntoView)===null||J===void 0||J.call(ee)}ue.menuCallbackBefore=ge,ue.menuCallback=this.onMenuItemSelected,ue.menuCallbackId||(ue.menuCallbackId=Y),ue.highlighted=re===Y,ue.isKeyboardHighlight=ue.highlighted&&G,ue.group&&(this.menuGroups||(this.menuGroups={}),this.menuGroups[ue.group]||(this.menuGroups[ue.group]={key:ue.group,"aria-owns":[],index:Y}),this.menuGroups[ue.group]["aria-owns"].push(ue.activeMenuId))}if(S(x)&&(ue.isOpen=ue.highlighted&&!G||ue.highlighted&&_e,ue.kbNavActive=ue.highlighted&&_e,ue.returnKBNav=this.activateKBNav,ue.preventHighlightChange=this.preventHighlightChange,ue.allowHighlightChange=this.allowHighlightChange),b(x)&&oe)if(!this.menuChildren)(0,A.Wo)().warn("Menu.renderMenuItem called without this.menuChildren");else{const X=this.menuChildren[Y-1];if(b(X))return null;ue.noFirstChild=!0,ue.noLastChild=!0}return C(x)&&(ue.isResponsive=me),t.cloneElement(x,ue)}renderMenuGroups(){return this.menuGroups?Object.values(this.menuGroups).filter(x=>x["aria-owns"].length>0).map(x=>({group:t.createElement(r,{key:x.key,"aria-labelledby":x["aria-labelledby"],"aria-owns":x["aria-owns"].join(" ")}),index:x.index})).sort((x,Y)=>Y.index-x.index):[]}renderMenuItems(){this.menuChildren=M(this.props.children).filter(t.isValidElement);const x=this.menuChildren.map(this.renderMenuItem,this);return this.renderMenuGroups().forEach(ne=>{let{group:re,index:_e}=ne;x.splice(_e,0,re)}),x}renderMenu(){const{noMargin:x,menuClassNames:Y,"data-qa":ne,isUnstyled:re,isResponsive:_e,experimentSkResponsiveMenusGroupOn:G}=this.props,ge=(0,n.A)("c-menu__items",{"c-menu__items--no_margin":x}),oe=this.state.highlightedMenuItemIndex!==-1?`${this.activeMenuId}-${this.state.highlightedMenuItemIndex}`:null,me=(0,n.A)({"c-menu":!re,"c-menu--responsive":_e&&G},Y);return t.createElement("div",{className:me,"data-qa":ne,style:{width:this.props.width}},t.createElement("div",{className:"c-menu__items_scroller"},t.createElement("div",{"aria-activedescendant":oe??void 0,ref:this.setAriaMenuRef,className:ge,onKeyDown:this.onMenuKeyDown,onMouseLeave:this.onMouseLeaveMenu,"data-qa":"menu_items",role:"menu","aria-label":this.props["aria-label"],"aria-describedby":this.props["aria-describedby"],"aria-labelledby":this.props["aria-labelledby"],tabIndex:-1,"no-bootstrap":1},this.renderMenuItems())))}render(){const x=this.renderMenu(),{autoClogProps:Y}=this.props;return Y?t.createElement(i.A,E({elementType:I.ElementType.MENU},Y),x):x}constructor(x){super(x),this.activeMenuId=`menu-${(0,O.A)()}`,this.menuChildren=[],this.keyboardShortcutsMap={},this.menuGroups={},this.onMenuItemSelected=(Y,ne)=>{this.props.onMenuItemSelected&&this.props.onMenuItemSelected(Y,ne)},this.onMenuKeyDown=Y=>{var ne;const{kbNavActive:re,onMenuKeyDown:_e,onCloseSubmenu:G,onTriggerClose:ge,windowRef:oe}=this.props;if(!re)return;const{key:me}=Y,ue=V[me],ae=(ne=this.keyboardShortcutsMap)===null||ne===void 0?void 0:ne[me],he=this.getSelectedMenuItem(),ce=he&&S(he),ee=this.getAllMenuItemIndices();(ue||ae)&&(Y.stopPropagation(),Y.preventDefault()),(ue==="selectnext"||ue==="selectprevious")&&this.onMenuNavigation(ue),ue==="closesubmenu"&&(G==null||G(Y)),(ue==="select"||ue==="opensubmenu")&&ce&&this.setState(()=>({highlightedMenuItemKbNavActive:!0})),ue==="closemenu"&&(ge==null||ge(Y)),ue==="selectfirst"&&this.setState(()=>({highlightedMenuItemIndex:ee[0],highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0})),ue==="selectlast"&&this.setState(()=>({highlightedMenuItemIndex:ee[ee.length-1],highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0}));const J=`${this.activeMenuId}-${this.state.highlightedMenuItemIndex}`;if(ue==="select"&&J&&!ce){var X,F;(F=(X=oe.deref())===null||X===void 0?void 0:X.document.getElementById(J))===null||F===void 0||F.click(),ge==null||ge(Y)}if(ae){var L,K;(K=(L=oe.deref())===null||L===void 0?void 0:L.document.getElementById(ae))===null||K===void 0||K.click(),ge==null||ge(Y)}_e==null||_e(Y,{isCurrentItemSubmenu:ce,closeMenu:ge,selectedMenuItem:he})},this.onMouseLeaveMenu=()=>{const Y=this.state.highlightCanChangeOnMouseMovement?-1:this.state.highlightedMenuItemIndex;this.setState(()=>({highlightedMenuItemIndex:Y,contingentHighlightedMenuItemIndex:-1}))},this.setAriaMenuRef=Y=>{this.ariaMenuNode=Y},this.activateKBNav=()=>{var Y;(Y=this.ariaMenuNode)===null||Y===void 0||Y.focus(),this.setState(ne=>({highlightedMenuItemKbNavActive:!1,highlightedMenuItemIndex:ne.highlightedMenuItemIndex===-1?this.getIndexOfNextMenuItemInDirection("selectnext"):ne.highlightedMenuItemIndex}))},this.allowHighlightChange=()=>{this.setState(Y=>({highlightedMenuItemIndex:Y.contingentHighlightedMenuItemIndex,highlightCanChangeOnMouseMovement:!0})),this.props.allowHighlightChange&&this.props.allowHighlightChange()},this.preventHighlightChange=()=>{this.setState(()=>({highlightCanChangeOnMouseMovement:!!this.props.resetHighlightOnChange})),this.props.preventHighlightChange&&this.props.preventHighlightChange()},this.state={highlightedMenuItemIndex:-1,contingentHighlightedMenuItemIndex:-1,highlightedMenuItemKbNavActive:!1,highlightCanChangeOnMouseMovement:!0,isKeyboardHighlight:!1}}},"Menu");R.displayName="Menu",R.defaultProps={menuClassNames:void 0,onMenuItemSelected:o.A,onMenuItemSelectedBefore:o.A,onTriggerClose:o.A,onCloseSubmenu:o.A,width:void 0,noMargin:!1,kbNavActive:!0,stripTerminalSeparators:!1,preventHighlightChange:o.A,allowHighlightChange:o.A,resetHighlightOnChange:!1,"data-qa":"menu","aria-label":void 0,onMenuKeyDown:o.A,onUnmount:o.A,isSubmenu:!1,isUnstyled:!1,autoClogProps:void 0,experimentSkResponsiveMenusGroupOn:!1,isResponsive:!0};const P=u($=>({experimentSkResponsiveMenusGroupOn:(0,_.IN)($)}),"mapStateToProps"),z=(0,l.A)((0,D.N)(P,null,null,{forwardRef:!0})(R))},101973425:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>_,KJ:()=>o,LN:()=>i,l0:()=>l});var t=e(2208015175),n=e(3297051565),s=e.n(n),a=e(4724591729),c=e(796111729);const o="_isSlackMenuItem",i={menuCallback:s().func,menuCallbackId:s().number,highlighted:s().bool};function l(d){return!!d[o]}u(l,"isMenuItem");function _(d){if((0,a.Cu)()){const r=d.propTypes||{};let m;Object.defineProperty(d,"propTypes",{get:()=>m,set:h=>{const v=d.displayName||d.name||"Component";(0,t.A)(i,(y,I)=>{const T=h[I];T&&T!==y&&T!==y.isRequired&&(0,c.Wo)().warn(`${v}'s ${I} prop type doesn't match menu item`)}),m={...i,...h}}}),d.propTypes=r}return d[o]=!0,d}u(_,"wrapMenuItem")},9285382326:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(6162189146);const n=t.A},6162189146:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(3134334389),n=e(5255740490),s=e(7026348746),a=e(8683010724),c=e(2312625946),o=e(653780586),i=e(735940183);const l=new i.Ay("channel_token"),_=u(r=>{let{type:m=o.A.Unknown,subtler:h=!1,size:v=o.o.Small,width:y="random",invert:I=!1,showHash:T=!0,omitNonExistentTooltip:f=!1}=r;const g=(0,n.A)("c-missing_channel",{"c-missing_channel--unknown":m===o.A.Unknown,"c-missing_channel--nonexistent":m===o.A.Nonexistent,"c-missing_channel--subtler":h,"c-missing_channel--medium":v===o.o.Medium,"c-missing_channel--unknown_inverted":m===o.A.Unknown&&I,"c-missing_channel--non_existent_inverted":m===o.A.Nonexistent&&I}),M=(0,n.A)("c-missing_channel--medium_hash",{"c-missing_channel--subtler":h});let A;if(m===o.A.Unknown)A=l.t("Loading...");else if(m===o.A.Nonexistent)A=l.t("You don\u2019t have access to this channel (ex. it\u2019s private or in a workspace you\u2019re not a part of), so its name isn\u2019t shown",{fallbackHash:"b63975b75ce4c6d6e1e8b8057209fc25f351bbcf"});else return null;if(m===o.A.Nonexistent){const O=t.createElement("span",{className:"c-missing_channel--private"},t.createElement(a.A,{name:"lock"}),t.createElement("span",null,l.t("private channel")));return f?O:t.createElement(c.Ay,{tip:A},O)}return v===o.o.Medium?t.createElement("div",null,t.createElement("div",{className:"c-missing_channel--medium-top"},T&&t.createElement("span",{className:M},t.createElement(a.A,{name:"channel"})),t.createElement(s.A,{tooltip:A,isNonExistent:!1,size:y,className:g})),t.createElement(s.A,{tooltip:A,isNonExistent:!1,size:y,className:g})):t.createElement(s.A,{tooltip:A,isNonExistent:!1,size:y,className:g})},"MissingChannel");_.displayName="MissingChannel";const d=t.memo(_)},8028620372:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(653780586);const a=u(o=>{let{className:i,isNonExistent:l=!1,size:_,subtler:d=!1,invert:r=!1,dataQa:m}=o;const{Unknown:h,Nonexistent:v}=s.A,y=l?v:h,I=(0,t.useMemo)(()=>({height:_,width:_}),[_]);return t.createElement("span",{className:(0,n.A)(i,"c-missing_icon",`c-missing_icon--${y}`,{"c-missing_icon--unknown_inverted":y===h&&r,"c-missing_icon--non_existent_inverted":y===v&&r,"c-missing_icon--subtler":d}),style:I,"data-qa":m})},"MissingIcon");a.displayName="MissingIcon";const c=a},7576317051:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(3229001818);const n=t.A},3229001818:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(3134334389),n=e(7026348746),s=e(653780586),a=e(735940183);const c=new a.Ay("member_token"),{Unknown:o,Nonexistent:i}=s.A,l=u(d=>{let{type:r=o,subtler:m=!1,className:h,"data-qa":v}=d;const y=r===o?c.t("Loading\u2026"):c.t("Private user info");return t.createElement(n.A,{className:h??"",isNonExistent:r===i,subtler:m,tooltip:y,"data-qa":v})},"MissingMember");l.displayName="MissingMember";const _=t.memo(l)},4816967449:(j,p,e)=>{"use strict";e.d(p,{A:()=>m});var t=e(3134334389),n=e(7026348746),s=e(653780586),a=e(735940183);const c=new a.Ay("user_group_token"),{Unknown:o,Nonexistent:i}=s.A,{Small:l,Medium:_}=s.o,d=u(h=>{let{invert:v=!1,size:y=l,type:I=o,subtler:T=!1}=h;const f=I===o?c.t("Loading..."):c.t("Private user group info");if(y===_){const g="\xA0\xA0\xB7\xA0\xA0";return t.createElement("div",{className:"p-browse_page_user_group_entity--missing"},t.createElement("div",null,t.createElement(n.A,{tooltip:f,isNonExistent:I===i,size:"small",invert:v})," ",t.createElement(n.A,{tooltip:f,isNonExistent:I===i,size:"small",invert:v})),t.createElement("div",null,t.createElement(n.A,{tooltip:f,isNonExistent:I===i,size:"small",invert:v}),g,t.createElement(n.A,{tooltip:f,isNonExistent:I===i,size:"large",invert:v})))}return t.createElement(n.A,{tooltip:f,isNonExistent:I===i,size:"random",subtler:T,invert:v})},"MissingUserGroup");d.displayName="MissingUserGroup";const m=d},4376397139:(j,p,e)=>{"use strict";e.d(p,{j:()=>o,A:()=>l});var t=e(3134334389),n=e(6105929840),s=e(735940183);const a=new s.Ay("generic_dialog");function c(_){let{onClick:d,...r}=_;return t.createElement(n.A,{className:"c-multi_pane_modal__back",icon:"chevron-large-left",onClick:d,"aria-label":a.t("Back",{fallbackHash:"b52b36b7269fbfc58ec24bb724691951a3decbe8",fallbackHashNs:"member_actions"}),"data-qa":r["data-qa"]})}u(c,"ModalBackButton"),c.displayName="ModalBackButton";const o=t.memo(c);var i=e(1427522952);const l=i.A},1427522952:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(3134334389),n=e(5255740490),s=e(7937864072),a=e(4979382452);function c(){return c=Object.assign||function(l){for(var _=1;_<arguments.length;_++){var d=arguments[_];for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(l[r]=d[r])}return l},c.apply(this,arguments)}u(c,"_extends");function o(l){let{defaultPane:_,panes:d,forceFullRerenderOnPageChange:r=!0,...m}=l;const h=(0,s.A)(),[v,y]=(0,t.useState)({pane:_}),I=(0,t.useCallback)((g,M)=>y({pane:g,props:M}),[]),{render:T,modalProps:f}=d[v.pane];return T||h.error("MULTI_PANE_MODAL",`Unknown pane "${v.pane}"`),t.createElement(a.A,c({},m,f,{className:(0,n.A)(m.className,f==null?void 0:f.className,"c-multi_pane_modal")}),r?t.createElement(t.Fragment,{key:v.pane},T({switchPane:I,...v.props})):T({switchPane:I,...v.props}))}u(o,"MultiPaneModal"),o.displayName="MultiPaneModal";const i=o},3501104594:(j,p,e)=>{"use strict";e.d(p,{A:()=>T});var t=e(3134334389),n=e(7715417323),s=e(348699080),a=e(1251589538);function c(){return c=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var M=arguments[g];for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(f[A]=M[A])}return f},c.apply(this,arguments)}u(c,"_extends");const o=(0,t.memo)(f=>{let{addMemberToPresenceSubscription:g=n.A,memberId:M,removeMemberFromPresenceSubscription:A=n.A,renderDoublePresence:O=!1,firstElementExtraClassName:D="",...E}=f;return(0,s.A)(()=>(g(M),()=>A(M)),[M]),O?t.createElement(t.Fragment,null,t.createElement(a.Ay,c({},E,{className:`${E.className||""} ${D}`})),t.createElement(a.Ay,c({},E))):t.createElement(a.Ay,c({},E))});o.displayName="PresenceWithSubscriptions";const i=o;var l=e(3339229351),_=e(92812954),d=e(6045540917),r=e(9391594207),m=e(5241075893),h=e(5795074931),v=e(9290914927);const y=u((f,g)=>{const M=(0,v.gd)(f,g.memberId),A=(0,_.d)(f,g.memberId),O=(0,d.h)(f,g.memberId),D=(0,h.WR)(f)===g.memberId;return{...g,userType:A,isDnd:O,isSelf:D,isSlackbot:g.memberId===l.Q$,isActive:M==="active"}},"mapStateToProps"),I=u(f=>({addMemberToPresenceSubscription:g=>f((0,m.xz)({memberId:g})),removeMemberFromPresenceSubscription:g=>f((0,m.Fd)({memberId:g}))}),"mapDispatchToProps"),T=(0,r.N)(y,I)(i)},9828955991:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>s});var t=e(3501104594),n=e(1251589538);const s=t.A},1251589538:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>r});var t=e(3134334389),n=e(5255740490),s=e(2036354333),a=e(8683010724),c=e(1563996154),o=e(735940183);function i(){return i=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},i.apply(this,arguments)}u(i,"_extends");const l=new o.Ay("presence");function _(m,h){return m?h?l.t("Active, notifications snoozed"):l.t("Active"):h?l.t("Away, notifications snoozed"):l.t("Away")}u(_,"getPresenceText");const d=u(m=>{let{inheritIconSize:h=!1,inline:v=!0,isActive:y=!1,isDnd:I=!1,isSelf:T=!1,isSlackbot:f=!1,invert:g=!1,userType:M="member",focusable:A=!1,showText:O=!1,resetIA:D=!1,className:E}=m,C=y?{name:"status-member",variation:"filled"}:{name:"status-member"};const S=(0,n.A)(E,"c-presence",{"c-presence--active":y&&!g,"c-presence--resetIA":D,"c-presence--away":!y&&!g,"c-presence--inverted":g,"is-inline":v,block:!v}),b=_(y,I);M==="member"?I?C=y?{name:"status-member-dnd",variation:"filled"}:{name:"status-member-dnd"}:f&&(C={name:"status-slackbot",variation:"filled"}):M==="ra"||M==="external"?I?C=y?{name:"status-guest-dnd",variation:"filled"}:{name:"status-guest-dnd"}:C=y?{name:"status-guest",variation:"filled"}:{name:"status-guest"}:M==="ura"&&(I?C=y?{name:"status-single-channel-guest-dnd",variation:"filled"}:{name:"status-single-channel-guest-dnd"}:C=y?{name:"status-single-channel-guest",variation:"filled"}:{name:"status-single-channel-guest"});const k=t.createElement("span",{className:S},t.createElement(a.A,i({},C,{title:b,"aria-label":b,"aria-hidden":"false",size:h?"inherit":"20",inline:v,"data-qa":"presence_indicator","data-qa-type":C.name,"data-qa-presence-self":T,"data-qa-presence-active":y,"data-qa-presence-dnd":I})));return A?t.createElement(t.Fragment,null,t.createElement(c.Ay,{tip:b},t.createElement(s.A,null,k)),O&&t.createElement("span",{className:"padding_left_50","aria-hidden":"true"},b)):t.createElement(t.Fragment,null,k,O&&t.createElement("span",{className:"padding_left_50","aria-hidden":"true"},b))},"Presence");d.displayName="Presence";const r=t.memo(d)},5846524816:(j,p,e)=>{"use strict";e.d(p,{A:()=>N});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3398586081),c=e(5617110048),o=e(3391133100),i=e(2660476100),l=e(3155323475),_=e(4505564445),d=e(4244379358),r=e(7193040700),m=e(8683010724),h=e(2322735331),v=e(735940183),y=e(5356156303);function I(){return I=Object.assign||function(V){for(var R=1;R<arguments.length;R++){var P=arguments[R];for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&(V[z]=P[z])}return V},I.apply(this,arguments)}u(I,"_extends");const T=new v.Ay("select");let f=u(class extends t.Component{componentDidMount(){const{focusOnMount:R=!1}=this.props;R&&this.onClick()}componentDidUpdate(R){const{selectState:P}=this.props,{options:z}=P,{selectState:$}=R,{options:x}=$;!(0,y.Ay)(x,z,4)&&this.flattenOptions()}flattenOptions(){const{selectState:R}=this.props,{options:P}=R;this.allOptions=P&&P.reduce((z,$)=>(Object.prototype.hasOwnProperty.call($,"options")&&Array.isArray($.options)?z.push(...$.options):z.push($),z),[])}onEscPressed(R){const{selectState:P,setSelectState:z}=this.props;P.isExpanded&&(R.stopPropagation(),z(()=>({isExpanded:!1})))}onKeyDown(R){if(!(R.shiftKey||R.ctrlKey||R.metaKey||R.altKey))switch(R.keyCode){case _._f:this.onEscPressed(R);break;case _.Fm:case _.I6:this.onClick();break;case _.i7:case _.n6:this.onUpOrDownPressed(R);break;case _.wn:this.onTabPressed();break;default:break}}onTabPressed(){const{setSelectState:R}=this.props;R(()=>({isExpanded:!1}))}onClick(){const{onClick:R=s.A,setSelectState:P,selectState:z}=this.props;this.updateOptionsListPosition(),R&&R(),P(()=>({isExpanded:!z.isExpanded}))}onUpOrDownPressed(R){const{selectState:P,setSelectState:z}=this.props,{isExpanded:$}=P;$||(R.stopPropagation(),this.updateOptionsListPosition(),z(()=>({isExpanded:!0})))}getSelectedOptionIndex(){const{selectState:R}=this.props,{selectedOption:P}=R;return P?this.allOptions.findIndex(z=>z.label===P.label&&z.value===P.value):-1}updateOptionsListPosition(){const{selectState:R}=this.props,{isExpanded:P}=R;if(!P&&this.measurePopoverEvent){var z;(z=this.props.windowRef.deref())===null||z===void 0||z.dispatchEvent(this.measurePopoverEvent)}}renderContent(R){var P;const{renderSelectedOption:z,selectState:$,textSelect:x=!1,textSelectLabel:Y=void 0,selectDataQa:ne=void 0,placeholderText:re=void 0}=this.props,{selectedOption:_e}=$,G=_e?z(_e):t.createElement("span",{className:"c-select_button__placeholder"},re||T.t("Please select an option")),ge=x&&Y?t.createElement("span",{className:"c-select_button--text-select-label"},Y):void 0,oe=(P=this.allOptions)===null||P===void 0?void 0:P.length,me=oe||void 0,ue=oe?this.getSelectedOptionIndex()+1:void 0,he=ue===void 0||ue===0?{}:{role:"option","aria-selected":!0,"aria-setsize":me,"aria-posinset":ue};return t.createElement("div",I({id:R},he,{"data-qa":ne?`${ne}-button-content`:null,className:"c-select_button__content"}),ge,G)}render(){const{ariaLabelledBy:R=void 0,ariaDescribedBy:P=void 0,ariaLabel:z=void 0,selectState:$,size:x,width:Y,textSelect:ne=!1,selectDataQa:re=void 0,classPrefix:_e=void 0,onBlur:G=s.A,onMouseEnter:ge=void 0,onMouseLeave:oe=void 0,refToForward:me}=this.props,{isDisabled:ue,isExpanded:ae,isInvalid:he,selectId:ce}=$,ee=(0,n.A)("c-select_button",`c-select_button--${x}`,{"c-select_button--disabled":ue,"c-select_button--expanded":ae,"c-select_button--text-select":ne,"c-select_button--invalid":he,[`${_e}__select_button`]:_e}),J=ne?{}:{width:Y},X=(0,o.Es)(ce,"button"),F=`${X}-option`;return t.createElement("div",{role:"listbox",tabIndex:0,className:ee,onClick:this.onClick,onKeyDown:this.onKeyDown,style:J,"aria-disabled":ue?!0:void 0,"data-qa":re?`${re}-button`:null,id:X,onBlur:G,onMouseEnter:ge,onMouseLeave:oe,"aria-labelledby":R,"aria-describedby":P,"aria-label":z,"aria-invalid":he,"aria-activedescendant":he?void 0:F,ref:me,"aria-expanded":ae,"aria-multiselectable":!1},this.renderContent(F),t.createElement("div",{className:`c-select_button__icon c-select_button__icon--${x}`},t.createElement(m.A,{name:"caret-down",size:x===r.hu.SMALL?"inherit":"20"})))}constructor(R){super(R),this.allOptions=[],(0,h.v)(this,["onUpOrDownPressed","onKeyDown","updateOptionsListPosition","onClick","onEscPressed","onTabPressed"]);const{measurePopoverEventName:P=null}=this.props;P&&(this.measurePopoverEvent=new Event(P)),this.flattenOptions()}},"SelectButton");f.displayName="SelectButton";const g=(0,d.A)(f),M=t.forwardRef((V,R)=>t.createElement(g,I({},V,{refToForward:R})));var A=e(1162627626),O=e(4640201401),D=e(3650946343),E=e(6244014364);function C(){return C=Object.assign||function(V){for(var R=1;R<arguments.length;R++){var P=arguments[R];for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&(V[z]=P[z])}return V},C.apply(this,arguments)}u(C,"basic_select_extends");const S={onClick:{action:E.UiAction.CLICK}},b=u(V=>V.map(R=>{let{id:P}=R;return P}),"getIdsFromHintOrErrors");let k=u(class extends t.Component{renderOptionsList(){const{ariaLabel:R,onOptionSelected:P,onOptionsListClose:z,renderOption:$,resultsInPopover:x,overlayClassName:Y,listClassName:ne,selectState:re,setSelectState:_e,width:G,classPrefix:ge,minOptionsListWidth:oe,optionsRowHeight:me,maxListHeight:ue,onScrollablePage:ae,dynamicHeight:he,forceMaxHeight:ce,includePadding:ee,includeDividers:J,preventScroll:X}=this.props,{isDisabled:F}=re;return F?null:x?t.createElement(O.A,{className:ne,selectState:re,setSelectState:_e,renderOption:$,ariaLabel:R,onOptionSelected:P,onOptionsListClose:z,width:G,inputRef:this.inputContainerRef,measurePopoverEventName:this.measurePopoverEventName,classPrefix:ge,selectDataQa:this.fallbackDataQa,minOptionsListWidth:oe,optionsRowHeight:me,focusOnMount:!0,popoverProps:Y?{overlayClassName:Y}:void 0,shouldAlwaysHaveActiveRow:!0,maxListHeight:ue,onScrollablePage:ae,dynamicHeight:he,forceMaxHeight:ce,includePadding:ee,includeDividers:J,preventScroll:X}):t.createElement(A.A,{className:ne,selectState:re,setSelectState:_e,renderOption:$,ariaLabel:R,onOptionSelected:P,onOptionsListClose:z,width:G,inputRef:this.inputContainerRef,classPrefix:ge,selectDataQa:this.fallbackDataQa,optionsRowHeight:me,maxListHeight:ue,focusOnMount:!0,shouldAlwaysHaveActiveRow:!0,dynamicHeight:he,forceMaxHeight:ce,includePadding:ee,includeDividers:J,preventScroll:X})}render(){const{resultsInPopover:R,selectState:P,setSelectState:z,className:$,textSelect:x,textSelectLabel:Y,focusOnMount:ne,onBlur:re,ariaLabel:_e,ariaLabelledBy:G,ariaDescribedBy:ge,autoClogProps:oe,buttonRef:me,errors:ue,hints:ae,size:he,renderSelectedOption:ce}=this.props,{isInvalid:ee}=P,J=(0,D.A)(ue),X=(0,D.A)(ae);let F;ue&&(F=J?b(ue):void 0);let L;ae&&(L=X?b(ae):void 0);const K=(0,o.Yk)([ge,F,L]),B=t.createElement("div",{className:(0,n.A)($,"c-basic-select"),"data-qa":this.fallbackDataQa,ref:this.inputContainerRef},t.createElement(M,C({},this.props,{size:he,renderSelectedOption:ce,selectDataQa:this.fallbackDataQa,selectState:P,setSelectState:z,measurePopoverEventName:R?this.measurePopoverEventName:void 0,textSelect:x,textSelectLabel:Y,focusOnMount:ne,onBlur:re,ariaLabel:_e,ariaLabelledBy:G,ariaDescribedBy:K,"aria-invalid":ee,ref:me})),J&&ue&&t.createElement(l.A,{errors:ue}),X&&ae&&ae.map(Q=>{let{id:q,message:le}=Q;return t.createElement(i.A,{key:q,id:q},le)}),this.renderOptionsList());return oe?t.createElement(c.A,{autoClogProps:oe,actionProps:S,elementType:E.ElementType.DROPDOWN},B):B}constructor(R){super(R),(0,h.v)(this,["renderOptionsList"]),this.inputContainerRef=t.createRef();const{selectId:P}=R.selectState;this.measurePopoverEventName=`measureSelectPopover--${P}`,this.fallbackDataQa=R.selectDataQa||P}},"ControlledBasicSelect");k.displayName="ControlledBasicSelect",k.defaultProps={renderOption:V=>V.label,renderSelectedOption:V=>V.label,size:r.hu.MEDIUM,width:225,optionsRowHeight:r.bJ,errors:[],hints:[],ariaLabelledBy:void 0,ariaDescribedBy:void 0,placeholderText:void 0,selectDataQa:void 0,resultsInPopover:!0,overlayClassName:void 0,listClassName:void 0,onClick:s.A,onOptionSelected:s.A,onOptionsListClose:s.A,className:void 0,classPrefix:void 0,textSelect:!1,textSelectLabel:void 0,minOptionsListWidth:void 0,focusOnMount:!1,onBlur:s.A,maxListHeight:void 0,autoClogProps:void 0,onScrollablePage:!1,buttonRef:void 0,dynamicHeight:!1,forceMaxHeight:!1,includePadding:!0,includeDividers:!0};let W=u(class extends t.Component{static getDerivedStateFromProps(R,P){const{selectedOption:z}=R,{selectedOption:$}=P;return!$||z!==void 0&&z!==$?{selectedOption:z}:null}setSelectState(R,P){return this.setState(R,P)}render(){const{isDisabled:R,isInvalid:P,isRequired:z,errors:$}=this.props,x=P||(0,D.A)($),Y=(0,a.A)(()=>({...this.state,isDisabled:R,isInvalid:x,isRequired:z}));return t.createElement(k,C({},this.props,{selectState:Y(),setSelectState:this.setSelectState}))}constructor(R){super(R),this.state={activeRowIndex:null,isDisabled:R.isDisabled,isExpanded:R.isExpanded,isInvalid:R.isInvalid,isRequired:R.isRequired,options:R.options,selectId:R.selectId,selectedOption:R.selectedOption,selectType:r.US.BASIC},(0,h.v)(this,["setSelectState"])}},"BasicSelect");W.displayName="BasicSelect",W.defaultProps={isDisabled:!1,isExpanded:!1,isRequired:!0,isInvalid:!1,errors:[],hints:[],onOptionSelected:s.A,onOptionsListClose:s.A,selectedOption:void 0,selectId:`basic-select-${(0,o.r9)()}`,maxListHeight:void 0,autoClogProps:void 0};const N=W},5536692738:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>c,HH:()=>s.A,P2:()=>a.A,Z1:()=>n.A});var t=e(5846524816),n=e(2727264612),s=e(8274994582),a=e(320706952);const c=t.A},7090824688:(j,p,e)=>{"use strict";e.d(p,{$c:()=>b,Ay:()=>C,Gn:()=>k,h7:()=>S,xn:()=>W,yW:()=>D});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3398586081),c=e(5617110048),o=e(3391133100),i=e(2660476100),l=e(3155323475),_=e(868047630),d=e(1162627626),r=e(4640201401),m=e(9573786552),h=e(2742076544),v=e(3239909785),y=e(7193040700),I=e(3650946343),T=e(7772530643),f=e(2322735331),g=e(6244014364);function M(){return M=Object.assign||function(N){for(var V=1;V<arguments.length;V++){var R=arguments[V];for(var P in R)Object.prototype.hasOwnProperty.call(R,P)&&(N[P]=R[P])}return N},M.apply(this,arguments)}u(M,"_extends");const A={onOptionSelected:{action:g.UiAction.SELECT}},O=u(N=>N.map(V=>{let{id:R}=V;return R}),"getIdsFromHintOrErrors");let D=u(class extends t.Component{renderOptionsList(V){var R,P;const{selectState:z,setSelectState:$,renderOption:x,emptyStateMessage:Y,enableLoadingState:ne,width:re,maxOptionsListHeight:_e,inputRef:G,resultsInPopover:ge,isLoading:oe,classPrefix:me,optionsRowHeight:ue,onOptionsListOpen:ae,onOptionsListClose:he,overlayClassName:ce,onScrollablePage:ee,onOptionSelected:J,shouldOptionBeSelected:X,shouldTokenizeOnComma:F,shouldTokenizeOnSpace:L,autoClogProps:K,dynamicHeight:B,shouldAllowUnselectInMultiSelectMode:Q,stayExpandedAfterSelection:q,optionsListFooterBannerContent:le,offsetY:Te,offsetX:Ie}=this.props,{isDisabled:De,loadInBackground:pe}=z;if(De)return null;const fe={key:`${z.selectId}-popover`};ce&&(fe.overlayClassName=ce),Te&&(fe.offsetY=Te);var Z,se;fe.offsetY=V?(se=fe.offsetY)!==null&&se!==void 0?se:0-((Z=(R=this.additionalInfoContainerRef)===null||R===void 0||(P=R.current)===null||P===void 0?void 0:P.offsetHeight)!==null&&Z!==void 0?Z:0):fe.offsetY,Ie&&(fe.offsetX=Ie);const Ae=ge?t.createElement(r.A,{selectState:z,setSelectState:$,renderOption:x,emptyStateMessage:Y,enableLoadingState:ne,width:re,maxListHeight:_e,multiSelectMode:!0,inputRef:G,inputContainerRef:this.inputContainerRef,measurePopoverEventName:this.measurePopoverEventName,isLoading:oe&&!pe,classPrefix:me,selectDataQa:this.fallbackDataQa,optionsRowHeight:ue,onOpen:ae,onOptionsListClose:he,popoverProps:fe,onScrollablePage:ee,onOptionSelected:J,shouldOptionBeSelected:X,shouldTokenizeOnComma:F,shouldTokenizeOnSpace:L,autoClogProps:K,dynamicHeight:B,shouldAllowUnselectInMultiSelectMode:Q,stayExpandedAfterSelection:q,footerBannerContent:le}):t.createElement(d.A,{selectState:z,setSelectState:$,renderOption:x,emptyStateMessage:Y,enableLoadingState:ne,width:re,maxListHeight:_e,multiSelectMode:!0,classPrefix:me,selectDataQa:this.fallbackDataQa,optionsRowHeight:ue,onOptionsListClose:he,onOptionSelected:J,shouldOptionBeSelected:X,shouldTokenizeOnComma:F,shouldTokenizeOnSpace:L,dynamicHeight:B,footerBannerContent:le});return K?t.createElement(c.A,{elementType:g.ElementType.DROPDOWN,actionProps:A,autoClogProps:K},Ae):Ae}render(){const{selectState:V,setSelectState:R,inputRef:P,maxHeight:z,placeholderText:$,size:x,width:Y,isLoading:ne,focusOnMount:re,resultsInPopover:_e,onSelectedItemsChange:G,onKeyDown:ge,onKeyUp:oe,className:me,classPrefix:ue,onFilterQueryChange:ae,onFilterQueryPaste:he,processOptions:ce,onBlur:ee,onOptionsListClosedBlur:J,onOptionsListClose:X,expandOnFocus:F,ariaLabel:L,ariaLabelledBy:K,ariaDescribedBy:B,onTokenSelect:Q,onInputFocused:q,forceRealName:le,autoClogProps:Te,errors:Ie,hints:De,disableIdParsing:pe,customizeTokenProps:fe,iconType:Z,isTokenEditable:se,ignoreSelectAllTokensAfterMount:Ae,disableCloseOnTab:Ce,throttleForceRenderSelectContainer:Le,forceRenderSelectContainerThrottleRate:Ue}=this.props;let Pe;Ie&&(Pe=(0,I.A)(Ie));let He;De&&(He=(0,I.A)(De));let Qe;Ie&&(Qe=Pe?O(Ie):void 0);let lt;De&&(lt=He?O(De):void 0);const qe=(0,o.Yk)([B,Qe,lt]),ct=!!(Pe&&Ie||He&&De);return t.createElement("div",{className:(0,n.A)(me,"c-multi-select"),"data-qa":this.fallbackDataQa,ref:this.inputContainerRef},t.createElement(_.A,{selectState:V,setSelectState:R,size:x,width:Y,maxHeight:z,placeholderText:$,isLoading:ne,inputRef:P,focusOnMount:re,measurePopoverEventName:_e&&this.measurePopoverEventName,onSelectedItemsChange:G,selectDataQa:this.fallbackDataQa,onKeyDown:ge,onKeyUp:oe,classPrefix:ue,onFilterQueryChange:ae,onFilterQueryPaste:he,processOptions:ce,onBlur:ee,onOptionsListClosedBlur:J,onOptionsListClose:X,expandOnFocus:F,ariaLabel:L,ariaLabelledBy:K,ariaDescribedBy:qe,onTokenSelect:Q,onInputFocused:q,forceRealName:le,autoClogProps:Te,customizeTokenProps:fe,iconType:Z,disableIdParsing:pe,isTokenEditable:se,ignoreSelectAllTokensAfterMount:Ae,disableCloseOnTab:Ce,throttleForceRenderSelectContainer:Le,forceRenderSelectContainerThrottleRate:Ue}),t.createElement("div",{ref:this.additionalInfoContainerRef},Pe&&Ie&&t.createElement(l.A,{errors:Ie}),He&&De&&De.map(tt=>{let{id:it,message:Ge}=tt;return t.createElement(i.A,{key:it,id:it},Ge)})),this.renderOptionsList(ct))}constructor(V){super(V),(0,f.v)(this,["renderOptionsList"]),this.inputContainerRef=t.createRef(),this.additionalInfoContainerRef=t.createRef();const{selectId:R}=V.selectState;this.measurePopoverEventName=`measureSelectPopover--${R}`,this.fallbackDataQa=V.selectDataQa||R}},"ControlledMultiSelect");D.displayName="ControlledMultiSelect",D.defaultProps={renderOption:N=>N.label,size:y.hu.MEDIUM,width:300,optionsRowHeight:y.bJ,maxHeight:void 0,maxOptionsListHeight:void 0,errors:[],hints:[],placeholderText:"",prefix:void 0,emptyStateMessage:void 0,isLoading:!1,resultsInPopover:!0,overlayClassName:void 0,offsetY:void 0,offsetX:void 0,enableLoadingState:!0,selectDataQa:void 0,focusOnMount:!1,onSelectedItemsChange:s.A,onKeyDown:s.A,onKeyUp:s.A,className:void 0,classPrefix:void 0,onFilterQueryChange:s.A,onFilterQueryPaste:s.A,processOptions:s.A,onBlur:s.A,onOptionsListClosedBlur:s.A,ariaLabel:void 0,ariaLabelledBy:void 0,ariaDescribedBy:void 0,expandOnFocus:!1,onTokenSelect:s.A,onInputFocused:s.A,forceRealName:void 0,onOptionsListOpen:s.A,onOptionsListClose:s.A,onScrollablePage:!1,onOptionSelected:s.A,shouldOptionBeSelected:s.A,shouldTokenizeOnComma:!1,shouldTokenizeOnSpace:!1,autoClogProps:void 0,dynamicHeight:!1,customizeTokenProps:{},iconType:void 0,disableIdParsing:!1,isTokenEditable:!1,ignoreSelectAllTokensAfterMount:!1,optionsListFooterBannerContent:void 0,throttleForceRenderSelectContainer:!1,forceRenderSelectContainerThrottleRate:void 0};let E=u(class extends t.Component{setSelectState(V,R){this.setState(P=>{let z=V();const{filter:$,options:x}=this.props;return z.filterQuery!==void 0&&z.filterQuery!==P.filterQuery&&$&&(z=$(x,z)),z},R)}render(){const{isDisabled:V,isInvalid:R,isRequired:P,customControlledMultiSelectComponent:z,errors:$}=this.props,x=R||(0,I.A)($),Y=z??D,ne=(0,a.A)(()=>({...this.state,isDisabled:V,isInvalid:x,isRequired:P}));return t.createElement(Y,M({},this.props,{selectState:ne(),setSelectState:this.setSelectState,inputRef:this.inputRef}))}constructor(V){super(V),this.state={filterQuery:"",options:V.options,isDisabled:V.isDisabled,isExpanded:V.isExpanded,isInvalid:V.isInvalid,isRequired:V.isRequired,selectId:V.selectId,selectedOptions:V.selectedOptions||[],shouldRefocusInputAfterSelection:!!V.showConfirmDialog,selectedTokenIndexes:V.selectedTokenIndexes||[]},this.inputRef=t.createRef(),(0,f.v)(this,["setSelectState"])}},"MultiSelect");E.displayName="MultiSelect",E.defaultProps={selectedOptions:null,isDisabled:!1,isExpanded:!1,isInvalid:!1,isRequired:!0,className:void 0,errors:[],hints:[],filter:T.k,selectId:`multi-select-${(0,o.r9)()}`,customControlledMultiSelectComponent:null,showConfirmDialog:void 0,autoClogProps:void 0,selectedTokenIndexes:[]};const C=E,S=(0,v.A)(D),b=(0,v.A)((0,m.A)(D)),k=(0,m.A)(D),W=(0,h.A)(D)},630868093:(j,p,e)=>{"use strict";e.d(p,{AM:()=>k,Ay:()=>S,Fw:()=>E,JJ:()=>D,mH:()=>W,uR:()=>b});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3398586081),c=e(5617110048),o=e(3391133100),i=e(2660476100),l=e(3155323475),_=e(581574686),d=e(1162627626),r=e(4640201401),m=e(9573786552),h=e(2742076544),v=e(3239909785),y=e(7193040700),I=e(3650946343),T=e(7772530643),f=e(2322735331),g=e(6244014364);function M(){return M=Object.assign||function(N){for(var V=1;V<arguments.length;V++){var R=arguments[V];for(var P in R)Object.prototype.hasOwnProperty.call(R,P)&&(N[P]=R[P])}return N},M.apply(this,arguments)}u(M,"_extends");const A={onOptionSelected:{action:g.UiAction.SELECT}},O=u(N=>N.map(V=>{let{id:R}=V;return R}),"getIdsFromHintOrErrors");let D=u(class extends t.Component{maybeRenderOptionsList(){const{selectState:V,setSelectState:R,renderOption:P,width:z,inputRef:$,ariaLabel:x,resultsInPopover:Y,overlayClassName:ne,offsetY:re,offsetX:_e,onOptionSelected:G,className:ge,classPrefix:oe,optionsRowHeight:me,onOpen:ue,emptyStateMessage:ae,minOptionsListWidth:he,maxOptionsListHeight:ce,isLoading:ee,onOptionsListClose:J,onScrollablePage:X,enableLoadingState:F,autoClogProps:L,shouldAllowUnselectInSingleSelectMode:K,shouldOptionBeSelected:B,optionsListFooterBannerContent:Q}=this.props;if(Y&&(!this.props.inputRef||!this.props.inputRef.current))return null;const q={key:`${V.selectId}-popover`};ne&&(q.overlayClassName=ne),re&&(q.offsetY=re),_e&&(q.offsetX=_e);const le=Y?t.createElement(r.A,{selectState:V,setSelectState:R,renderOption:P,width:z,inputRef:$,ariaLabel:x,onOptionSelected:G,popoverProps:q,measurePopoverEventName:this.measurePopoverEventName,className:ge,classPrefix:oe,selectDataQa:this.fallbackDataQa,optionsRowHeight:me,onOpen:ue,emptyStateMessage:ae,minOptionsListWidth:he,maxListHeight:ce,isLoading:ee,onOptionsListClose:J,onScrollablePage:X,enableLoadingState:F,autoClogProps:L,dropdownContainer:this.dropdownContainer,shouldAllowUnselectInSingleSelectMode:K,shouldOptionBeSelected:B,footerBannerContent:Q}):t.createElement(d.A,{selectState:V,setSelectState:R,renderOption:P,width:z,inputRef:$,ariaLabel:x,onOptionSelected:G,classPrefix:oe,selectDataQa:this.fallbackDataQa,emptyStateMessage:ae,maxListHeight:ce,optionsRowHeight:me,onOptionsListClose:J,enableLoadingState:F,shouldAllowUnselectInSingleSelectMode:K,shouldOptionBeSelected:B,footerBannerContent:Q});return t.createElement(c.A,{elementType:g.ElementType.DROPDOWN,actionProps:A,autoClogProps:L},le)}render(){const{renderSelectedOption:V,className:R,classPrefix:P,placeholderText:z,size:$,width:x,selectState:Y,setSelectState:ne,inputRef:re,focusOnMount:_e,showDropdownIcon:G,isLoading:ge,resultsInPopover:oe,isDisabled:me,isRequired:ue,onFocus:ae,onEsc:he,ariaLabelledBy:ce,ariaDescribedBy:ee,inputIcon:J,maxCharacterLimit:X,onOptionsListClose:F,ariaLabel:L,expandOnClick:K,searchOnClick:B,autoClogProps:Q,errors:q,hints:le,expandOnFocus:Te,hideSelectedOptionOnDropdownOpen:Ie,retainPreviousSelectionOnDelete:De}=this.props,{isInvalid:pe}=Y,fe=(0,I.A)(q),Z=(0,I.A)(le);let se;q&&(se=fe?O(q):void 0);let Ae;le&&(Ae=Z?O(le):void 0);const Ce=(0,o.Yk)([ee,se,Ae]),Le=pe||fe;return t.createElement("div",{className:(0,n.A)(R,"c-search-select"),"data-qa":this.fallbackDataQa},t.createElement(_.Ay,{selectState:{...Y,isInvalid:Le,isRequired:ue,isDisabled:me},setSelectState:ne,renderSelectedOption:V,placeholderText:z,size:$,width:x,selectDataQa:this.fallbackDataQa,inputRef:re,focusOnMount:_e,showDropdownIcon:G,isLoading:ge,resultsInPopover:oe,measurePopoverEventName:oe?this.measurePopoverEventName:void 0,classPrefix:P,onBlur:this.onBlur,onFocus:ae,onEsc:he,"aria-label":L,ariaLabelledBy:ce,ariaDescribedBy:Ce,icon:J,maxCharacterLimit:X,onOptionsListClose:F,expandOnClick:K,autoClogProps:Q,searchOnClick:B,expandOnFocus:Te,hideSelectedOptionOnDropdownOpen:Ie,retainPreviousSelectionOnDelete:De}),fe&&q&&t.createElement(l.A,{errors:q}),Z&&le&&le.map(Ue=>{let{id:Pe,message:He,className:Qe}=Ue;return He&&t.createElement(i.A,{key:Pe,id:Pe,className:Qe},He)}),this.maybeRenderOptionsList())}constructor(V){super(V),this.onBlur=P=>{if(this.dropdownContainer){const z=this.dropdownContainer.current;if(z&&z.contains(P.relatedTarget)&&!this.props.isInvalidStateControlled){this.props.setSelectState(()=>({isInvalid:!1}));return}}this.props.onBlur&&this.props.onBlur(P)};const{selectId:R}=V.selectState;this.measurePopoverEventName=`measureSelectPopover--${R}`,this.fallbackDataQa=V.selectDataQa||R,this.dropdownContainer=t.createRef()}},"ControlledSearchSelect");D.displayName="ControlledSearchSelect",D.defaultProps={autoClogProps:void 0,className:void 0,classPrefix:void 0,renderOption:N=>N.label,renderSelectedOption:N=>N.label,resultsInPopover:!0,overlayClassName:void 0,offsetY:void 0,offsetX:void 0,size:y.hu.MEDIUM,width:360,optionsRowHeight:y.bJ,errors:[],hints:[],ariaLabel:null,ariaLabelledBy:void 0,ariaDescribedBy:void 0,placeholderText:void 0,onOptionSelected:s.A,selectDataQa:void 0,showDropdownIcon:!0,focusOnMount:!1,isLoading:!1,isDisabled:!1,isInvalid:!1,isRequired:!0,onBlur:s.A,onFocus:s.A,onEsc:s.A,onOpen:s.A,onOptionsListClose:s.A,emptyStateMessage:void 0,minOptionsListWidth:void 0,maxOptionsListHeight:void 0,inputIcon:void 0,maxCharacterLimit:void 0,onScrollablePage:!1,expandOnClick:!0,enableLoadingState:!0,searchOnClick:!1,shouldAllowUnselectInSingleSelectMode:!0,shouldOptionBeSelected:s.A,isInvalidStateControlled:!1};const E=(0,m.A)(D);let C=u(class extends t.Component{setSelectState(V,R){this.setState(P=>{let z=V();const{filter:$,options:x}=this.props;return z.filterQuery!==void 0&&z.filterQuery!==P.filterQuery&&$&&(z=$(x,z)),z},R)}render(){const{isRequired:V,isInvalid:R,isDisabled:P,showConfirmDialog:z}=this.props,$=z?E:D,x=(0,a.A)(()=>({...this.state,isInvalid:R,isRequired:V,isDisabled:P}));return t.createElement($,M({},this.props,{selectState:x(),setSelectState:this.setSelectState,inputRef:this.inputRef}))}constructor(V){super(V),this.state={filterQuery:"",displayQuery:"",options:V.options,selectId:V.selectId,isExpanded:V.isExpanded,isInvalid:V.isInvalid,isDisabled:V.isDisabled,selectedOption:V.selectedOption},this.inputRef=this.props.inputRef?this.props.inputRef:t.createRef(),(0,f.v)(this,["setSelectState"])}},"SearchSelect");C.displayName="SearchSelect",C.defaultProps={autoClogProps:void 0,isDisabled:!1,isExpanded:!1,isInvalid:!1,isRequired:!0,errors:[],hints:[],filter:T.k,onOptionSelected:s.A,selectId:`search-select-${(0,o.r9)()}`,selectedOption:void 0,showConfirmDialog:void 0,inputIcon:void 0,maxCharacterLimit:void 0,inputRef:void 0};const S=C,b=(0,v.A)(D),k=(0,v.A)((0,m.A)(D)),W=(0,h.A)(D)},2727264612:(j,p,e)=>{"use strict";e.d(p,{A:()=>i});var t=e(3134334389),n=e(6044196829),s=e(8683010724),a=e(735940183);const c=new a.Ay("form_inputs"),o=u(l=>{let{onCtaClick:_,errorCopy:d,ctaCopy:r}=l;return t.createElement("div",{className:"c-multi_select_helper_text"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container c-multi_select_helper_text__icon_container--error"},t.createElement(s.A,{name:"warning",inline:!0})),t.createElement("span",null,d||c.t("Selected entries contain errors."),t.createElement(n.A,{onClick:_,className:"margin_left_25"},r||c.t("Delete all errors"))))},"MultiSelectErrorText");o.displayName="MultiSelectErrorText";const i=o},868047630:(j,p,e)=>{"use strict";e.d(p,{A:()=>N});var t=e(3134334389),n=e(5255740490),s=e(8628145494),a=e(6696292586),c=e(3398586081),o=e(5950652755),i=e(7715417323),l=e(6422693406),_=e(5617110048),d=e(9797002255),r=e(4244379358),m=e(6308822),h=e(5797272849),v=e(3391133100),y=e(1610251172),I=e(7193040700),T=e(561151542),f=e(2322735331),g=e(6244014364),M=e(571104883),A=e(5356156303);function O(){return O=Object.assign||function(V){for(var R=1;R<arguments.length;R++){var P=arguments[R];for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&(V[z]=P[z])}return V},O.apply(this,arguments)}u(O,"_extends");const D={onChange:{action:g.UiAction.ENTER_TEXT}},E={onClick:{action:g.UiAction.CLICK}},C=new Array(95).fill("").map((V,R)=>String.fromCharCode(R+32)),S=u(V=>t.createElement("span",O({className:"c-multi_select_input__space"},V),"\xA0"),"makeSpace"),b=1e3,k={leading:!0,trailing:!1};let W=u(class extends t.PureComponent{componentDidMount(){this.inputHeight=this.getInputHeight(),this.props.focusOnMount&&this.focus(),this.attachMutationObserver()}componentDidUpdate(R){var P;const z=R.selectState,{selectState:$,onTokenSelect:x,onSelectedItemsChange:Y,setSelectState:ne,hasKeyboardFocus:re,isTokenEditable:_e}=this.props,{selectedOptions:G,isExpanded:ge,isDisabled:oe}=$,me=this.getSelectedTokenIndexes();if(this.doesMutationObserverExist()||(this.attachMutationObserver(),this.focus()),this.props.focusOnMount&&R.focusOnMount!==this.props.focusOnMount&&this.focus(),((P=$.filterQuery)===null||P===void 0?void 0:P.length)&&$.filterQuery!==z.filterQuery&&this.caretPosInFilterQuery!==-1&&this.updateCaretPosInFilterQuery(),this.possiblyRepositionOptionsList(z),this.haveSelectedTokens()&&!(0,A.Ay)(z.selectedTokenIndexes,me)&&G&&(me==null||me.forEach(ee=>{x&&x(G[ee])}),ge&&ne(()=>({isExpanded:!1})),this.scrollSelectedTokenIntoView()),z.isDisabled&&!oe&&this.moveCursorAndScrollToFilterQuery(),!(0,A.Ay)(z.selectedOptions,G,3)){if(Y&&typeof G<"u"){if(_e){var he;const{isCurrentlyEditingToken:ee}=this.state;if((((he=z.selectedOptions)===null||he===void 0?void 0:he.length)||0)<G.length){if(ee){const J=G.pop();J&&G.splice(this.state.editTokenIndex,0,J),this.setTokenState(!1,0)}}else ee&&G.length===0&&this.setTokenState(!1,0)}Y(G)}this.scrollFilterQueryIntoView()}this.inputHeight=this.getInputHeight(),re&&!R.hasKeyboardFocus&&(0,s.A)($.activeRowIndex)&&!this.allTokensAreSelected()&&this.selectAllTokens()}componentWillUnmount(){this.doesMutationObserverExist()&&this.removeMutationObserver(),this.updateQueryTimer&&clearTimeout(this.updateQueryTimer),this.forceRenderSelectContainerThrottled.cancel&&this.forceRenderSelectContainerThrottled.cancel()}onBlur(R){const{selectState:P,setSelectState:z,hideFilterQueryOnBlur:$,onBlur:x,onOptionsListClosedBlur:Y}=this.props,{selectedOptions:ne,filterQuery:re,isExpanded:_e}=P,G=$&&re&&!_e;this.setState(()=>({focused:!1})),this.deselectAllTokens(),G&&z(()=>({filterQuery:""})),this.caretPosInFilterQuery=-1,this.mouseDownOnToken=!1,x&&x(R,ne),!_e&&Y&&Y()}onChange(){this.state.composing||this.onFilterQueryChanged()}setTokenState(R,P){this.props.isTokenEditable&&this.setState(()=>({isCurrentlyEditingToken:R,editTokenIndex:P}))}onFilterQueryChanged(){const{setSelectState:R,selectState:P,onFilterQueryChange:z}=this.props,$=this.filterQueryRef.current,x=$==null?void 0:$.textContent,Y=P.filterQuery!==x;if(this.backspaceWasPressed&&!Y){this.backspaceWasPressed=!1;return}const ne=x?x.length>0:!1;this.saveCaretPosInFilterQuery(),R(()=>({filterQuery:x,isExpanded:ne})),z&&z(x)}onFocus(R){this.setState(()=>({focused:!0}));const{expandOnFocus:P,onInputFocused:z,setSelectState:$,onFocus:x}=this.props;P&&$(()=>({isExpanded:!0})),this.mouseDownOnToken||this.moveCursorAndScrollToFilterQuery(),z&&z(R),this.mouseDownOnToken=!1,x&&x(R)}onCaretSelectionChange(){this.isCaretOutSideFilterQuery()?this.updateCaretPosInFilterQuery():this.saveCaretPosInFilterQuery()}onRangeSelectionChange(){var R;const P=(R=this.props.windowRef.deref())===null||R===void 0?void 0:R.getSelection(),z=P==null?void 0:P.getRangeAt(0),$=this.getTokensAsArray(),{selectState:x}=this.props,{filterQuery:Y}=x,ne=$.reduce((ue,ae,he)=>P!=null&&P.containsNode(ae)?[...ue,he]:ue,[]),re=ne.length>0;if(!Y&&!re&&!(P!=null&&P.isCollapsed)){this.ignoreSelectionChange=!0,P==null||P.collapseToEnd();return}if(this.isEntireFilterQuerySelected()&&!re){var _e;this.ignoreSelectionChange=!0,z==null||z.setStartBefore((_e=this.filterQueryRef.current)===null||_e===void 0?void 0:_e.firstChild);return}const G=ne[0],ge=ne[ne.length-1],oe=$[G],me=$[ge];if(!Y&&re){this.ignoreSelectionChange=!0,z==null||z.setStartBefore(oe),this.ignoreSelectionChange=!0,z==null||z.setEndAfter(me),this.setSelectedTokenIndexes(ne);return}this.isEntireFilterQuerySelected()&&re&&(this.ignoreSelectionChange=!0,z==null||z.setStartBefore(oe),this.setSelectedTokenIndexes(ne))}onSelectionChange(){var R;if(this.ignoreSelectionChange){this.ignoreSelectionChange=!1;return}const P=(R=this.props.windowRef.deref())===null||R===void 0?void 0:R.getSelection();let z=null;if(P){const{type:$}=P;z=$}z==="Caret"&&this.onCaretSelectionChange(),z==="Range"&&this.onRangeSelectionChange()}onKeyDown(R){if(this.state.composing)return;const{key:P,ctrlKey:z,metaKey:$,altKey:x,shiftKey:Y}=R,{selectState:ne,onKeyDown:re}=this.props,_e=(0,M.cX)()?$:z,G=P==="Delete"&&((0,M.cX)()&&x||(0,M.uF)()&&_e);(P==="Backspace"||G)&&this.onBackspace(R),!G&&P==="Delete"&&this.onDelete(R),P==="Escape"&&this.onEscape(R),(P==="Home"||$&&!Y&&P==="ArrowLeft"||$&&!Y&&P==="ArrowUp")&&this.onHome(R),(P==="End"||$&&!Y&&P==="ArrowRight"||$&&!Y&&P==="ArrowDown")&&this.onEnd(R),!$&&P==="ArrowLeft"&&!this.leftArrowKeyWasPressed&&(this.leftArrowKeyWasPressed=!0,this.onLeftArrow(R)),!$&&P==="ArrowRight"&&this.onRightArrow(R),P==="Tab"&&this.onTab(R),(P==="ArrowUp"||P==="ArrowDown")&&R.preventDefault(),P==="Enter"&&R.preventDefault(),!_e&&C.includes(P)&&this.onCharacterKey(),re&&re(R,{hasActiveRowIndex:(0,a.A)(ne.activeRowIndex),isExpanded:!!ne.isExpanded})}onHome(R){R.preventDefault();const{selectState:P}=this.props,{selectedOptions:z}=P;z!=null&&z.length?this.setSelectedTokenIndexes([0],{initiator:R.type}):this.moveCursorToFilterQuery({cursorAtStart:!0})}onEnd(R){R.preventDefault();const{selectState:P}=this.props,{selectedTokenIndexes:z}=P;z!=null&&z.length&&this.deselectAllTokens(),this.moveCursorAndScrollToFilterQuery()}onKeyUp(R){const{selectState:P,onKeyUp:z}=this.props,$=this.getSelectedTokenIndexes(),x=this.getTokensAsArray();this.shouldMoveCursorToFilterQuery&&(this.moveCursorToFilterQuery({cursorAtStart:!0}),this.shouldMoveCursorToFilterQuery=!1),this.updateSelectionOnKeyUp&&($!=null&&$.length)&&(this.selectTextInNode(x[$[0]]),this.updateSelectionOnKeyUp=!1),this.leftArrowKeyWasPressed&&(this.leftArrowKeyWasPressed=!1),z&&z(R,{hasActiveRowIndex:(0,a.A)(P.activeRowIndex)})}onInputContainerMouseDown(R){R.preventDefault(),this.haveSelectedTokens()&&this.deselectAllTokens(),this.state.focused?this.moveCursorAndScrollToFilterQuery():this.focus()}onPaste(R){if(!R||!R.clipboardData)return;const{onFilterQueryPaste:P}=this.props;P&&P(R)}onCharacterKey(){if(!this.haveSelectedTokens())return;const{setSelectState:R}=this.props,{selectState:P}=this.props,{filterQuery:z,selectedOptions:$}=P,x=this.getSelectedTokenIndexes(),Y=$==null?void 0:$.filter((_e,G)=>(x==null?void 0:x.indexOf(G))===-1),ne=this.getSelectedFilterQueryText(),re=z==null?void 0:z.replace(ne,"");R(()=>({selectedOptions:Y,selectedTokenIndexes:[],filterQuery:re})),this.moveCursorToFilterQuery()}onBackspace(R){const{setSelectState:P}=this.props,{selectState:z,isTokenEditable:$}=this.props,{filterQuery:x}=z;if(this.ignoreSelectionChange=!0,this.allTokensAreSelected()&&(this.isEntireFilterQuerySelected()||!x)){R.preventDefault(),P(()=>({selectedOptions:[],selectedTokenIndexes:[],filterQuery:"",isExpanded:!1}));return}if($&&(x==null?void 0:x.length)===1){R.preventDefault(),P(()=>({filterQuery:"",isExpanded:!1})),this.setTokenState(!1,0),this.moveCursorToFilterQuery();return}if(this.isEntireFilterQuerySelected()){R.preventDefault(),P(()=>({filterQuery:"",isExpanded:!1}));return}const ne=this.getTokensAsArray().length,re=this.getSelectedTokenIndexes(),_e=this.isCaretAtStartOfFilterQuery();if(this.backspaceWasPressed=!0,_e&&ne===0){R.preventDefault();return}if(!_e&&!this.haveSelectedTokens()&&x)return;if(R.preventDefault(),!this.haveSelectedTokens()){this.setSelectedTokenIndexes([ne-1],{initiator:R.type});return}re==null||re.forEach(me=>{this.removeToken(me,"backspaceKey")});const G=re&&re[0],ge=G===0;let oe=null;G&&(oe=ge?[0]:[G-1]),oe!=null&&oe.length&&this.setSelectedTokenIndexes(oe,{initiator:R.type})}onDelete(R){const{setSelectState:P}=this.props;if(this.ignoreSelectionChange=!0,this.isEntireFilterQuerySelected()){R.preventDefault(),P(()=>({filterQuery:"",isExpanded:!1}));return}const $=this.getTokensAsArray().length,x=this.getSelectedTokenIndexes();if($===0||!this.haveSelectedTokens()||(R.preventDefault(),x==null||x.forEach(_e=>{this.removeToken(_e,"deleteKey")}),!(x!=null&&x.length)))return;const ne=x[x.length-1]===$-1,re=(x==null?void 0:x.length)===$;(ne||re)&&(this.moveCursorToFilterQuery({cursorAtStart:!0}),this.deselectAllTokens())}onEscape(R){const{selectState:P,setSelectState:z,onOptionsListClose:$}=this.props;P.isExpanded&&(R.stopPropagation(),$&&$(),z(()=>({isExpanded:!1})))}onLeftArrow(R){var P;const $=this.getTokensAsArray().length,x=this.getSelectedTokenIndexes(),Y=(x==null?void 0:x.length)&&x[0],ne=(P=this.props.windowRef.deref())===null||P===void 0?void 0:P.getSelection();let re=null,_e=null;if(ne){const{type:ae,anchorOffset:he}=ne;re=ae,_e=he}const G=re==="Caret",ge=re==="Range";if(R.shiftKey&&ge&&this.isRangeSelectionOfFilterQueryComplete(_e)){R.preventDefault();return}const oe=G&&this.isCaretAtStartOfFilterQuery();if($===0&&oe){R.preventDefault();return}if($===0)return;if(this.props.isTokenEditable&&this.state.isCurrentlyEditingToken&&oe){R.preventDefault();return}if(this.allTokensAreSelected()){this.setSelectedTokenIndexes([0],{initiator:R.type});return}if(!this.haveSelectedTokens()&&oe){this.setSelectedTokenIndexes([$-1],{initiator:R.type});return}if(ge&&this.haveSelectedTokens()&&Y===0){R.preventDefault();return}this.haveSelectedTokens()&&typeof Y=="number"&&this.setSelectedTokenIndexes([Y-1],{initiator:R.type})}onRightArrow(R){var P;const z=(P=this.props.windowRef.deref())===null||P===void 0?void 0:P.getSelection(),$=(z==null?void 0:z.type)==="Range",Y=this.getTokensAsArray().length,ne=this.getSelectedTokenIndexes(),re=(ne==null?void 0:ne.length)&&ne[0];if(typeof re!="number")return;if(!($&&this.haveSelectedTokens()&&re<Y-1)&&this.haveSelectedTokens()||this.allTokensAreSelected()){R.preventDefault(),this.shouldMoveCursorToFilterQuery=!0,this.deselectAllTokens();return}this.haveSelectedTokens()&&typeof re=="number"&&this.setSelectedTokenIndexes([re+1],{initiator:R.type})}onTab(R){const{shiftKey:P}=R,{expandOnFocus:z,selectState:$,onOptionsListClose:x,setSelectState:Y,disableCloseOnTab:ne}=this.props;ne||(x&&x(),(P||z&&$.activeRowIndex===null)&&Y(()=>({isExpanded:!1})))}onTokenMouseDown(R,P){const{focused:z,isCurrentlyEditingToken:$}=this.state,{selectState:x,isTokenEditable:Y}=this.props;if(x.isDisabled)return;if(R.preventDefault(),this.mouseDownOnToken=!0,R.stopPropagation(),Y&&!$){this.onTokenEdit(P);return}z||this.focus();const ne=this.getTokensAsArray();this.selectTextInNode(ne[P]);const re=this.getSelectedTokenIndexes();P!==(re==null?void 0:re[0])&&this.setSelectedTokenIndexes([P])}onTokenEdit(R){const{selectState:P,setSelectState:z,processOptions:$}=this.props,{selectedOptions:x}=P;this.setTokenState(!0,R);let Y="";x&&x[R]&&(typeof x[R].label=="string"&&x[R].label!==x[R].value?Y=x[R].label:Y=x[R].value),this.removeToken(R,"editToken"),this.updateFilterQueryValue(Y),$&&$([],Y).then(ne=>{z(()=>({isExpanded:!0,options:ne,filterQuery:Y}))})}onTokenRemoveMouseDown(R,P){const{focused:z,isCurrentlyEditingToken:$,editTokenIndex:x}=this.state;R.preventDefault(),this.mouseDownOnToken=!0,R.stopPropagation(),z||this.focus(),this.moveCursorToFilterQuery(),this.props.isTokenEditable&&$&&P<x&&this.setTokenState(!0,x-1),this.removeToken(P,"iconClick")}onFilterQueryMouseDown(R){var P;this.state.focused&&(!((P=this.filterQueryRef.current)===null||P===void 0)&&P.textContent)&&R.stopPropagation(),this.haveSelectedTokens()&&this.deselectAllTokens()}updateFilterQueryValue(R){const{onFilterQueryChange:P}=this.props;this.updateQueryTimer=setTimeout(()=>{P&&P(R),this.moveCursorToFilterQuery(),clearTimeout(this.updateQueryTimer)})}onPlaceholderMouseDown(){this.focus()}onSelectAll(R){var P;const{setSelectState:z}=this.props;R.preventDefault(),z(()=>({selectedTokenIndexes:[],isExpanded:!1}));const $=(P=this.filterQueryRef)===null||P===void 0?void 0:P.current;$!=null&&$.textContent&&this.selectTextInNode($)}onCompositionStart(){this.setState(()=>({composing:!0}))}onCompositionEnd(){this.setState(()=>({composing:!1})),this.onFilterQueryChanged()}onCut(){const{selectState:R}=this.props,{filterQuery:P,selectedOptions:z}=R,$=this.getSelectedTokenIndexes(),x=z==null?void 0:z.filter((re,_e)=>($==null?void 0:$.indexOf(_e))===-1),Y=this.getSelectedFilterQueryText(),ne=P==null?void 0:P.replace(Y,"");this.selectStateAfterMutation={selectedTokenIndexes:[],selectedOptions:x,filterQuery:ne,isExpanded:!1}}onNodeAdded(R){const{nodeName:P}=R;(P==="B"||P==="I")&&(this.removeMutationObserver(),this.runForceRenderSelectContainer())}onNodeRemoved(R){const{setSelectState:P}=this.props;if(this.selectStateAfterMutation){this.caretPosInFilterQuery=0,this.removeMutationObserver(),this.runForceRenderSelectContainer(!0),P(()=>this.selectStateAfterMutation),this.selectStateAfterMutation=null;return}R===this.filterQueryRef.current&&(this.removeMutationObserver(),this.runForceRenderSelectContainer(!0))}onMutation(R){R.forEach(P=>{P.addedNodes.forEach(this.onNodeAdded),P.removedNodes.forEach(this.onNodeRemoved)})}getAriaPlaceholderText(){const{selectState:R,placeholderText:P}=this.props,{filterQuery:z,selectedOptions:$}=R;if(!z&&!($&&$.length>0))return P}getAriaActiveDescendant(){const{selectState:R}=this.props,{selectId:P,activeRowIndex:z}=R;return(0,a.A)(z)?(0,v.Es)(P,`option_${z}`):void 0}getInputHeight(){const{inputRef:R}=this.props,P=R==null?void 0:R.current;return P?P.offsetHeight:null}getTokensAsArray(){var R,P;const z=(R=this.props.inputRef)===null||R===void 0||(P=R.current)===null||P===void 0?void 0:P.querySelectorAll(".c-token");return Array.prototype.slice.call(z)}getSelectedFilterQueryText(){var R;const{selectState:P}=this.props,{filterQuery:z}=P;if((z==null?void 0:z.length)===0)return"";const $=(R=this.props.windowRef.deref())===null||R===void 0?void 0:R.getSelection(),x=$==null?void 0:$.toString();if(!($==null?void 0:$.containsNode(this.filterQueryRef.current,!0)))return"";const ne=x==null?void 0:x.split(`
`);return ne!=null&&ne.length?ne[ne.length-1].trim():""}setSelectedTokenIndexes(R){let{initiator:P}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P==="keydown"&&(this.updateSelectionOnKeyUp=!0,this.ignoreSelectionChange=!0);const{setSelectState:z}=this.props;z(()=>({selectedTokenIndexes:R}))}getSelectedTokenIndexes(){const{selectState:R}=this.props,{selectedTokenIndexes:P}=R;return P||[]}allTokensAreSelected(){const R=this.getSelectedTokenIndexes(),P=this.getTokensAsArray();return R!=null&&R.length?R.length>0&&R.length===P.length:!1}attachMutationObserver(){var R;if(this.mutationObserver=new MutationObserver(this.onMutation),!((R=this.props.inputRef)===null||R===void 0)&&R.current){var P;this.mutationObserver.observe((P=this.props.inputRef)===null||P===void 0?void 0:P.current,{subtree:!0,childList:!0})}}deselectAllTokens(){this.setSelectedTokenIndexes([])}determineCaretPosInFilterQuery(){const{selectState:R}=this.props,{filterQuery:P}=R;if(this.caretPosInFilterQuery===-1||!P)return 0;const z=P==null?void 0:P.length;return typeof this.caretPosInFilterQuery=="number"&&this.caretPosInFilterQuery>z?z:this.caretPosInFilterQuery}doesMutationObserverExist(){return!!this.mutationObserver}removeMutationObserver(){var R;(R=this.mutationObserver)===null||R===void 0||R.disconnect(),this.mutationObserver=null}focus(){var R;const P=(R=this.props.inputRef)===null||R===void 0?void 0:R.current;P==null||P.focus()}forceRenderSelectContainer(){this.setState(()=>({selectContainerKey:Date.now()}))}runForceRenderSelectContainer(R){const{isLoading:P,throttleForceRenderSelectContainer:z}=this.props;z?(R&&this.forceRenderSelectContainerThrottled.cancel&&this.forceRenderSelectContainerThrottled.cancel(),P||this.forceRenderSelectContainerThrottled()):this.forceRenderSelectContainer()}haveSelectedTokens(){var R;return!!(!((R=this.getSelectedTokenIndexes())===null||R===void 0)&&R.length)}isCaretAtStartOfFilterQuery(){var R;if(this.isCaretOutSideFilterQuery())return!1;const{selectState:P}=this.props,{filterQuery:z}=P;if(!z)return!0;const $=(R=this.props.windowRef.deref())===null||R===void 0?void 0:R.getSelection();let x=null;if($){const{anchorOffset:Y}=$;x=Y}return x===0}isCaretOutSideFilterQuery(){var R,P;const z=(R=this.props.windowRef.deref())===null||R===void 0?void 0:R.getSelection();let $=null;if(z){const{anchorNode:x}=z;$=x}return!(!((P=this.filterQueryRef.current)===null||P===void 0)&&P.contains($))}isRangeSelectionOfFilterQueryComplete(R){const P=this.getSelectedFilterQueryText();if(!P)return!1;const{selectState:z}=this.props,$=z.filterQuery;return!$||!R?!1:P.substr(0,R)===($==null?void 0:$.substr(0,R))}isEntireFilterQuerySelected(){const{selectState:R}=this.props,P=this.getSelectedFilterQueryText();return!!P&&P===R.filterQuery}moveCursorAndScrollToFilterQuery(){this.scrollFilterQueryIntoView(),this.moveCursorToFilterQuery()}moveCursorToFilterQuery(){let{cursorAtStart:R}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cursorAtStart:!1};var P,z,$,x;const Y=document.createRange(),ne=(P=this.props.windowRef.deref())===null||P===void 0?void 0:P.getSelection();ne==null||ne.removeAllRanges();const re=(z=this.filterQueryRef)===null||z===void 0?void 0:z.current,_e=(re==null?void 0:re.firstChild)||re,G=R?0:(x=re==null||($=re.textContent)===null||$===void 0?void 0:$.trim())===null||x===void 0?void 0:x.length;_e!==null&&typeof G=="number"&&Y.setStart(_e,G),Y.collapse(!0),ne==null||ne.addRange(Y)}possiblyRepositionOptionsList(R){if(!this.measurePopoverEvent)return;const{selectState:P}=this.props,z=P.isExpanded&&!R.isExpanded,$=this.getInputHeight(),x=this.inputHeight!==$;if(z||x){var Y;(Y=this.props.windowRef.deref())===null||Y===void 0||Y.dispatchEvent(this.measurePopoverEvent)}}removeToken(R,P){const{selectState:z,setSelectState:$,isTokenEditable:x}=this.props,{selectedOptions:Y,pendingQueries:ne,filterQuery:re}=z,_e=ne?ne.length:0,G=Y&&Y[R]&&Y[R].queryId,oe=G&&_e?ne==null?void 0:ne.filter(me=>{let{queryId:ue}=me;return ue!==G}):ne;$(()=>({selectedOptions:Y==null?void 0:Y.filter((me,ue)=>ue!==R),selectedTokenIndexes:[],removalInitiator:P,removedItemIndex:R,pendingQueries:oe})),x&&this.state.isCurrentlyEditingToken&&this.updateFilterQueryValue(re)}saveCaretPosInFilterQuery(){var R;const P=(R=this.props.windowRef.deref())===null||R===void 0?void 0:R.getSelection();this.caretPosInFilterQuery=P==null?void 0:P.anchorOffset}scrollFilterQueryIntoView(){const R=this.filterQueryRef.current;R&&R!=null&&R.scrollIntoView&&(R==null||R.scrollIntoView({block:"nearest"}))}scrollSelectedTokenIntoView(){const R=this.getSelectedTokenIndexes();if(!this.haveSelectedTokens())return;const P=this.getTokensAsArray();if(!(R!=null&&R.length))return;const z=R[R.length-1],$=P[z];$&&$.scrollIntoView&&$.scrollIntoView({block:"nearest"})}selectAllTokens(){var R;if(this.state.ignoreSelectAllTokensAfterMount){this.setState(()=>({ignoreSelectAllTokensAfterMount:!1}));return}const P=this.getTokensAsArray();if(P.length===0)return;const z=P[0],$=P[P.length-1],x=(R=this.props.windowRef.deref())===null||R===void 0?void 0:R.getSelection(),Y=document.createRange();x==null||x.removeAllRanges(),Y.setStartBefore(z),Y.setEndAfter($),x==null||x.addRange(Y)}selectTextInNode(R){var P;if(!R)return;const z=(P=this.props.windowRef.deref())===null||P===void 0?void 0:P.getSelection(),$=document.createRange();this.ignoreSelectionChange=!0,z==null||z.removeAllRanges();const x=(0,M.cX)()?R:R.querySelector(".c-token__content");$.selectNode(x),this.ignoreSelectionChange=!0,z==null||z.addRange($)}updateCaretPosInFilterQuery(){var R,P;const z=(R=this.filterQueryRef)===null||R===void 0?void 0:R.current;if(!z)return;const $=document.createRange(),x=(P=this.props.windowRef.deref())===null||P===void 0?void 0:P.getSelection();x==null||x.removeAllRanges();const Y=this.determineCaretPosInFilterQuery();typeof Y=="number"&&$.setStart((z==null?void 0:z.firstChild)||z,Y),$.collapse(!0),x==null||x.addRange($)}renderFilterQuery(){const{selectState:R,isTokenEditable:P,size:z}=this.props,{filterQuery:$,isDisabled:x}=R,{isCurrentlyEditingToken:Y,editTokenIndex:ne}=this.state,re=x?void 0:this.onFilterQueryMouseDown,_e=(0,n.A)({"c-multi_select_input__filter_query":!0,[`c-multi_select_input__${z}_filter_query--edit`]:P&&Y});return t.createElement("span",{className:_e,ref:this.filterQueryRef,onMouseDown:re,key:ne},$)}renderInput(){const{selectState:R,selectDataQa:P,inputRef:z,ariaLabelledBy:$,ariaLabel:x,autoClogProps:Y,iconType:ne,isTokenEditable:re}=this.props,{selectId:_e,isDisabled:G,isExpanded:ge,isInvalid:oe}=R,me=G?void 0:0,ue=G?void 0:this.getAriaActiveDescendant(),ae=!G,he=ae,ce=G?void 0:this.onFocus,ee=G?void 0:this.onBlur,J=G?void 0:this.onChange,X=G?void 0:this.onPaste,F=G?void 0:this.onKeyDown,L=G?void 0:this.onKeyUp,K=G?void 0:this.onSelectionChange,B=G?void 0:this.onCut,Q=G?void 0:this.onCompositionStart,q=G?void 0:this.onCompositionEnd,le=(0,n.A)({"c-multi_select_input__input":!0,"c-multi_select_input__input--with-icon":!!ne}),Te=t.createElement("div",{role:"combobox","aria-disabled":G,"aria-autocomplete":"list","aria-expanded":ge,"aria-controls":(0,v.Es)(_e,"listbox"),"aria-activedescendant":ue,"aria-labelledby":$,"aria-label":x,"aria-placeholder":this.getAriaPlaceholderText(),"aria-invalid":oe,id:_e,className:le,tabIndex:me,contentEditable:ae,suppressContentEditableWarning:he,"data-qa":P?`${P}-input`:void 0,ref:z,onFocus:ce,onBlur:ee,onInput:J,onCompositionStart:Q,onCompositionEnd:q,onPaste:X,onKeyDown:F,onKeyUp:L,onSelect:K,onCut:B,"aria-multiline":!1},S(),re&&this.state.isCurrentlyEditingToken?this.renderEditableTokens():t.createElement(t.Fragment,null,this.renderTokens(),this.renderFilterQuery()),S({contentEditable:!1}));return Y?t.createElement(_.A,{autoClogProps:Y,actionProps:D,elementType:g.ElementType.INPUT},Te):Te}renderLoadingIndicator(){const{isLoading:R,size:P}=this.props;return R?t.createElement(m.A,{className:"c-multi_select_input__spinner",color:"blue",size:P===I.hu.LARGE?I.hu.LARGE:I.hu.MEDIUM}):null}renderPlaceholder(){const{selectState:R,placeholderText:P,iconType:z}=this.props,{filterQuery:$,selectedOptions:x,isDisabled:Y}=R;if(this.state.composing||$||x&&x.length>0)return null;const ne=Y?void 0:this.onPlaceholderMouseDown,re=(0,n.A)({"c-multi_select_input__placeholder":!0,"c-multi_select_input__placeholder--with-icon":!!z});return t.createElement("div",{"aria-hidden":"true",className:re,onMouseDown:ne},P)}renderToken(R,P){let{icon:z,svgIcon:$,value:x,label:Y,hoverText:ne,isLoading:re,isError:_e,isMemberError:G,isTeamError:ge,isUnknown:oe,emailTeam:me}=R;const{forceRealName:ue,size:ae,selectState:he,customizeTokenProps:ce,disableIdParsing:ee}=this.props,J=this.getSelectedTokenIndexes(),X=(J==null?void 0:J.indexOf(P))!==-1,{isDisabled:F,restrictedSelectedTokenIndexes:L,disabledSelectedTokenIndexes:K,invalidSelectedTokenIndexes:B}=he,Q=!!L&&(L==null?void 0:L.indexOf(P))!==-1,q=!!K&&(K==null?void 0:K.indexOf(P))!==-1,le=!!B&&(B==null?void 0:B.indexOf(P))!==-1,Te=F||q,Ie=Te?void 0:fe=>this.onTokenMouseDown(fe,P),De=Te?void 0:()=>this.renderTokenRemoveIcon(P),pe=ae;return t.createElement(t.Fragment,null,t.createElement(T.A,O({"data-qa":"multi_select_token_wrapper",className:"c-multi_select_input__token"},Ie?{onMouseDown:Ie}:{},{isDisabled:Te,entityId:x,label:Y,hoverText:ne,isLoading:re,isError:_e,isMemberError:G,isTeamError:ge,isUnknown:oe},ae?{size:pe}:{},{isSelected:X},De?{renderIcon:De}:{},{forceRealName:ue,icon:z,svgIcon:$,tabIndex:-1,contentEditable:!1},ce,{disableIdParsing:ee},me?{emailTeam:me}:{},{isRestricted:Q,isInvalid:le})),"\xA0")}renderTokenRemoveIcon(R){return t.createElement(_.A,{actionProps:E,elementType:g.ElementType.BUTTON},t.createElement(y.A,{type:"times-medium",className:"c-multi_select_input__remove_token",id:"multi_select_input__remove_token","data-qa":"token_remove_icon","aria-hidden":"true",onMouseDown:(0,c.A)(P=>{this.onTokenRemoveMouseDown(P,R)})}))}renderTokens(){const{selectedOptions:R}=this.props.selectState;return R==null?void 0:R.map((P,z)=>t.createElement(t.Fragment,{key:P.key||P.value},this.renderToken(P,z)))}renderEditableTokens(){const{isCurrentlyEditingToken:R,editTokenIndex:P}=this.state,z=this.renderTokens()||[],$=this.renderFilterQuery();return R?z.splice(P,0,$):z==null||z.push($),z}renderIcon(){const{iconType:R}=this.props;return R?t.createElement(y.A,{type:R,inline:!0}):null}render(){const{maxHeight:R,width:P,selectState:z,classPrefix:$,size:x}=this.props,{isDisabled:Y,isInvalid:ne,selectedOptions:re}=z,_e=re==null?void 0:re.length,G=(0,n.A)("c-multi_select_input",{"c-multi_select_input--disabled":Y,"c-multi_select_input--focused":this.state.focused&&!Y,"c-multi_select_input--large":x===I.hu.LARGE,"c-multi_select_input--invalid":ne,"c-multi_select_input--initial":!_e,[`${$}__multi_select_input`]:$,[h.E.large]:x===I.hu.LARGE}),ge=Y?void 0:this.onInputContainerMouseDown;return t.createElement("div",{className:G,style:{width:P,maxHeight:R},onMouseDown:ge,key:this.state.selectContainerKey},this.renderIcon(),this.renderInput(),this.renderLoadingIndicator(),this.renderPlaceholder())}constructor(R){super(R),(0,f.v)(this,["onFocus","onBlur","onChange","onPaste","onKeyDown","onKeyUp","onInputContainerMouseDown","onFilterQueryMouseDown","onPlaceholderMouseDown","onSelectionChange","onCut","onMutation","onNodeRemoved","onNodeAdded","onCompositionStart","onCompositionEnd"]);var P;this.state={composing:!1,focused:!1,selectContainerKey:Date.now(),isCurrentlyEditingToken:!1,editTokenIndex:0,ignoreSelectAllTokensAfterMount:(P=R.ignoreSelectAllTokensAfterMount)!==null&&P!==void 0?P:!1},this.caretPosInFilterQuery=-1,this.ignoreSelectionChange=!1,this.updateSelectionOnKeyUp=!1,R.measurePopoverEventName&&(this.measurePopoverEvent=new Event(R.measurePopoverEventName));var z;this.forceRenderSelectContainerThrottled=(0,o.A)(this.forceRenderSelectContainer,(z=R.forceRenderSelectContainerThrottleRate)!==null&&z!==void 0?z:b,k),this.filterQueryRef=t.createRef()}},"MultiSelectInput");W.displayName="MultiSelectInput",W.defaultProps={inputRef:t.createRef(),maxHeight:96,placeholderText:void 0,onKeyDown:i.A,onKeyUp:i.A,size:I.hu.MEDIUM,width:300,isLoading:!1,classPrefix:void 0,selectDataQa:void 0,focusOnMount:!1,measurePopoverEventName:null,onSelectedItemsChange:i.A,onFilterQueryChange:i.A,onFilterQueryPaste:i.A,ariaLabelledBy:void 0,ariaLabel:void 0,expandOnFocus:!1,onTokenSelect:i.A,onInputFocused:i.A,forceRealName:void 0,onOptionsListClose:i.A,processOptions:V=>l.S.resolve(V),isTokenEditable:!1,hideFilterQueryOnBlur:!0,autoClogProps:void 0,customizeTokenProps:{},iconType:void 0,disableIdParsing:!1,hasKeyboardFocus:!1,onFocus:i.A,onBlur:i.A,onOptionsListClosedBlur:i.A,ignoreSelectAllTokensAfterMount:!1,throttleForceRenderSelectContainer:!1,forceRenderSelectContainerThrottleRate:b};const N=(0,r.A)((0,d.A)(W))},8274994582:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3134334389),n=e(6308822),s=e(735940183);const a=new s.Ay("form_inputs"),o=u(i=>{let{count:l,clientTheme:_,spinnerSize:d="large"}=i;return t.createElement("div",{className:"c-multi_select_helper_text c-multi_select_helper_text--loading"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container"},t.createElement(n.A,{color:_==="dark"?"white":"blue",size:d,inline:!0})),a.t("Loading {count, plural, =1 {# entry} other {# entries}}",{count:l}))},"MultiSelectLoadingText")},320706952:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3134334389),n=e(8683010724),s=e(735940183);const a=new s.Ay("form_inputs"),o=u(i=>{let{count:l}=i;return t.createElement("div",{className:"c-multi_select_helper_text"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container c-multi_select_helper_text__icon_container--unknown"},t.createElement(n.A,{name:"emoji-missing",variation:"filled",inline:!0})),a.t("{count, plural, =1 {# entry has} other {# entries have}} multiple matches. Select entry to resolve.",{count:l}))},"MultiSelectUnknownText")},581574686:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>D});var t=e(3134334389),n=e(5255740490),s=e(6696292586),a=e(7715417323),c=e(1641606663),o=e(6308822),i=e(3391133100),l=e(2219904496),_=e(5166368300),d=e(7193040700),r=e(8683010724),m=e(2322735331),h=e(735940183),v=e(7640408795);function y(){return y=Object.assign||function(E){for(var C=1;C<arguments.length;C++){var S=arguments[C];for(var b in S)Object.prototype.hasOwnProperty.call(S,b)&&(E[b]=S[b])}return E},y.apply(this,arguments)}u(y,"_extends");const I=new h.Ay("select"),T=1e4,f={ArrowLeft:!0,ArrowRight:!0},g={ArrowUp:!0,ArrowDown:!0},M={Backspace:!0,Delete:!0};let A=u(class extends t.Component{componentDidMount(){const{inputRef:C,focusOnMount:S,expandOnFocus:b}=this.props,k=C&&C.current;S&&(!this.state.hasFocus&&k&&k.focus(),b&&this.showOptionsList())}componentDidUpdate(C,S){const{inputRef:b,selectState:k,focusOnMount:W}=this.props,{selectedOption:N}=k,{selectState:V}=C,{selectedOption:R}=V,P=b&&b.current,{hasFocus:z,focusedViaMouse:$}=this.state;N&&z&&!$&&(N!==R||!S.hasFocus)&&setTimeout(()=>{P==null||P.select()},50),W&&C.focusOnMount!==W&&(this.state.hasFocus||P==null||P.focus())}componentWillUnmount(){this.blurTimeout&&clearTimeout(this.blurTimeout)}onClick(C){const{inputRef:S,selectState:b,onClick:k,expandOnClick:W,searchOnClick:N}=this.props,{isDisabled:V,isExpanded:R,selectedOption:P}=b;if(V)return;const z=S&&S.current;this.state.hasFocus||(this.setState(()=>({focusedViaMouse:!0})),z==null||z.focus()),(W||P)&&!R&&this.showOptionsList({searchOnClick:N}),k&&k(C)}onBlur(C){const{onBlur:S}=this.props;this.setState(()=>({hasFocus:!1,focusedViaMouse:!1,cursorVisible:!1}),()=>{S&&S(C)})}onFocus(C){const{onFocus:S}=this.props;this.setState(()=>({hasFocus:!0}),()=>{S&&S(C)})}onInputChanged(C){const{selectState:S,setSelectState:b,expandOnClick:k,retainPreviousSelectionOnDelete:W}=this.props,{isExpanded:N,selectedOption:V}=S;if(this.backspaceOrDeletePressed&&C.length===0&&V){b(()=>({filterQuery:C,displayQuery:C,...W?{}:{selectedOption:null}}));return}N?!k&&!C&&b(()=>({isExpanded:!1})):this.showOptionsList(),b(()=>({filterQuery:C,displayQuery:C}))}onKeyPressedEnter(C){this.props.selectState.isExpanded?C.preventDefault():(this.showOptionsList(),C.stopPropagation())}onKeyPressedEscape(C){const{selectState:S,setSelectState:b,resultsInPopover:k,onEsc:W,onOptionsListClose:N}=this.props;S.isExpanded&&k&&(C.stopPropagation(),W&&W(),N&&N(),b(()=>({isExpanded:!1})))}onKeyPressedTab(){const{setSelectState:C,onOptionsListClose:S,selectState:b}=this.props;S&&S();const{activeRowIndex:k,initialActiveOption:W}=b;typeof k!="number"&&!W&&C(()=>({isExpanded:!1}))}onUpOrDownPressed(C){C.preventDefault(),this.props.selectState.isExpanded||(this.showOptionsList(),C.stopPropagation())}onWrapperKeyDown(C){const{key:S}=C;if(g[S]){this.onUpOrDownPressed(C);return}if(S==="Enter"){this.onKeyPressedEnter(C);return}if(S==="Escape"){this.onKeyPressedEscape(C);return}S==="Tab"&&this.onKeyPressedTab()}onInputKeyDown(C){const{key:S}=C,b=M[S],k=f[S],W=b||k||(0,v.A)(C);this.setState(()=>({cursorVisible:W})),this.backspaceOrDeletePressed=b}maybeRenderIconOrLoading(){const{showDropdownIcon:C,isLoading:S,size:b,expandOnClick:k}=this.props;return S?t.createElement(o.A,{className:"c-select_input__spinner",color:"blue",size:b===d.hu.LARGE?"large":"medium"}):!C||!k?null:t.createElement("span",{className:"c-select_input__icon"},t.createElement(r.A,{name:"caret-down",size:"20"}))}showOptionsList(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{searchOnClick:S}=C;this.updateOptionsListPosition(),this.props.setSelectState(()=>({isExpanded:!0,searchOnClick:S}))}updateOptionsListPosition(){const{selectState:C}=this.props,{isExpanded:S}=C;if(!S&&this.measurePopoverEvent){var b;(b=this.context.windowRef.deref())===null||b===void 0||b.dispatchEvent(this.measurePopoverEvent)}}renderInputContent(){const{selectState:C,renderSelectedOption:S,classPrefix:b,selectDataQa:k,hideSelectedOptionOnDropdownOpen:W}=this.props,{isExpanded:N,selectedOption:V}=C;if(this.state.cursorVisible||!V||N&&(W||C.filterQuery))return null;const R=(0,n.A)("c-select_input__content",{[`${b}__select_input_content`]:b});return t.createElement("div",{className:R,"data-qa":k?`${k}-input-content`:null},t.createElement("span",{className:"c-select_input__content_text"},S&&S(V)))}renderTextInput(){const{selectDataQa:C,inputRef:S,classPrefix:b,ariaLabelledBy:k,ariaDescribedBy:W,icon:N,maxCharacterLimit:V,size:R,selectState:P,autoClogProps:z,hideSelectedOptionOnDropdownOpen:$}=this.props,{activeRowIndex:x,filterQuery:Y,isDisabled:ne,isExpanded:re,isInvalid:_e,isRequired:G,selectedOption:ge,selectId:oe=""}=P;let me;Y||!re&&ge||ge&&re&&!$?me=null:me=this.props.placeholderText||I.t("Please select an option");const ue=re&&(0,s.A)(x)?(0,i.Es)(oe,`option_${x}`):null,ae=!this.state.cursorVisible&&ge&&!re,he=(0,n.A)("c-select_input",{"c-select_input--offscreen":ae,"c-select_input--invalid":_e,[`${b}__select_input`]:b}),ce=(0,i.Yk)([W,(0,i.Es)(oe,"initial-focus")]),J=!this.state.focusedViaMouse&&this.state.hasFocus&&!this.state.cursorVisible&&$?Y||ge&&ge.label:Y,X={spellCheck:!1,className:he,id:oe,name:oe,"aria-activedescendant":ue,"aria-autocomplete":"list","aria-expanded":re,"aria-owns":(0,i.Es)(oe,"listbox"),"aria-required":G,"aria-label":this.props["aria-label"],"aria-labelledby":k,"aria-describedby":ce,isInvalid:_e,autoComplete:"off",isDisabled:ne,onChange:this.onInputChanged,placeholder:me,value:J||"","data-qa":C?`${C}-input`:null,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onInputKeyDown,role:"combobox",autoClogProps:z};return N||V?t.createElement(l.A,y({},X,{icon:N,size:R,maxCharacterLimit:V,showError:!1,type:"text",inputRef:S,isInvalid:_e})):t.createElement(_.A,y({},X,{ref:S}))}render(){const{icon:C,size:S,selectDataQa:b,width:k,classPrefix:W,showDropdownIcon:N,selectState:V}=this.props,{isInvalid:R}=V,P=(0,n.A)("c-select_input__wrapper",{[`c-select_input--${S}`]:S,"c-select_input--with_icon_right":N,"c-select_input--with_icon_left":!!C,"c-select_input--invalid":R,[`${W}__select_input_wrapper`]:W}),z=(0,n.A)("c-select_input__input_container",{[`${W}__select_input_container`]:W});return t.createElement("div",{role:"presentation",className:P,style:{width:k},onClick:this.onClick,onKeyDown:this.onWrapperKeyDown,"data-qa":b?`${b}-wrapper`:null},t.createElement("div",{className:z},this.renderTextInput(),this.renderInputContent()),t.createElement("div",{className:"c-select_input__icon_container"},this.maybeRenderIconOrLoading()))}constructor(C){super(C),(0,m.v)(this,["onClick","onFocus","onBlur","onUpOrDownPressed","onKeyPressedEnter","onKeyPressedEscape","onKeyPressedTab","onWrapperKeyDown","onInputKeyDown","onInputChanged","showOptionsList","updateOptionsListPosition"]),this.selectInputRef=t.createRef(),this.backspaceOrDeletePressed=!1,this.measurePopoverEvent=void 0,this.blurTimeout=void 0,this.state={hasFocus:!1,focusedViaMouse:!1,cursorVisible:!1},C.measurePopoverEventName&&(this.measurePopoverEvent=new Event(C.measurePopoverEventName))}},"SelectInput");A.displayName="SelectInput",A.defaultProps={autoClogProps:void 0,inputRef:null,onClick:a.A,placeholderText:void 0,width:360,selectDataQa:void 0,showDropdownIcon:!0,icon:void 0,maxCharacterLimit:void 0,focusOnMount:!1,isLoading:!1,classPrefix:void 0,onFocus:a.A,onBlur:a.A,onEsc:a.A,resultsInPopover:!0,ariaLabelledBy:void 0,ariaDescribedBy:void 0,onOptionsListClose:a.A,expandOnClick:!0,searchOnClick:!1,expandOnFocus:!0,hideSelectedOptionOnDropdownOpen:!0},A.contextType=c.M;const O={SelectInput:A},D=A},1162627626:(j,p,e)=>{"use strict";e.d(p,{A:()=>L});var t=e(3134334389),n=e(5255740490),s=e(2053254856),a=e.n(s),c=e(45851552),o=e(1699044291),i=e(7715417323),l=e(6696292586),_=e(2003990933),d=e(3478664464),r=e(166097325),m=e(3398586081),h=e(9268023148),v=e(9636077426),y=e(6882609392),I=e(3652828077),T=e(1641606663),f=e(6308822),g=e(3391133100),M=e(7193040700),A=e(1398359918),O=e(8786006583),D=e(3821598679);function E(K){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,A.A)(K,(q,le)=>{if(q.type==="divider")return{type:"divider"};if(q.options){const{options:Te,label:Ie,...De}=q,pe=`${q.label.toLowerCase()}${M.Sx}${(0,D.A)()}`,fe=[{type:"heading",label:q.label,group:pe,optionsCount:q.options&&q.options.length||0,extras:De}].concat(q.options.map((Z,se)=>{const Ae={type:"option",option:Z,optgroup:pe};return se===0&&(Ae.isFirstChild=!0),se===q.options.length-1&&(Ae.isLastChild=!0),Ae}));if(B){if(K[le-1]&&K[le-1].value&&!K[le-1].options&&fe.unshift({type:"divider"}),(0,O.A)(K)===q)return fe;fe.push({type:"divider"})}return fe}return{type:"option",option:q}})}u(E,"formatOptions");var C=e(2322735331),S;(function(K){K[K.ELEMENT=1]="ELEMENT",K[K.ATTRIBUTE=2]="ATTRIBUTE",K[K.TEXT=3]="TEXT",K[K.CDATA_SECTION=4]="CDATA_SECTION",K[K.ENTITY_REFERENCE=5]="ENTITY_REFERENCE",K[K.ENTITY=6]="ENTITY",K[K.PROCESSING_INSTRUCTION=7]="PROCESSING_INSTRUCTION",K[K.COMMENT=8]="COMMENT",K[K.DOCUMENT=9]="DOCUMENT",K[K.DOCUMENT_TYPE=10]="DOCUMENT_TYPE",K[K.DOCUMENT_FRAGMENT=11]="DOCUMENT_FRAGMENT",K[K.NOTATION=12]="NOTATION"})(S||(S={}));const b=new Set(["INPUT","TEXTAREA","SELECT"]),k=new Set([...b,"BUTTON"]),W="http://www.w3.org/1999/xhtml",N="http://www.w3.org/2000/svg";function V(K){return(K==null?void 0:K.nodeType)===S.TEXT}u(V,"isTextNode");function R(K){return(K==null?void 0:K.nodeType)===S.ELEMENT}u(R,"isElement");function P(K){return R(K)&&K.namespaceURI===W}u(P,"isHtmlElement");function z(K){return R(K)&&K.namespaceURI===N}u(z,"isSvgElement");function $(K){return P(K)||z(K)}u($,"isHtmlOrSvgElement");function x(K){return P(K)||z(K)}u(x,"isElementCssInlineStyle");function Y(K){return re(K,"a")}u(Y,"isAnchorElement");function ne(K){return P(K)&&k.has(K.tagName)}u(ne,"isInteractiveElement");function re(K,B){return P(K)&&K.localName===B}u(re,"isHtmlElementWithTagName");function _e(K){return V(K)?K:null}u(_e,"asTextNode");function G(K){return R(K)?K:null}u(G,"asElement");function ge(K){return P(K)?K:null}u(ge,"asHtmlElement");function oe(K,B){const Q=K;return Q.hasAttribute&&Q.hasAttribute(B)}u(oe,"hasAttribute");function me(K,B){return oe(K,`data-${B}`)}u(me,"hasData");var ue=e(735940183),ae=e(2355676689),he=e(6979898962),ce=e(5356156303);function ee(){return ee=Object.assign||function(K){for(var B=1;B<arguments.length;B++){var Q=arguments[B];for(var q in Q)Object.prototype.hasOwnProperty.call(Q,q)&&(K[q]=Q[q])}return K},ee.apply(this,arguments)}u(ee,"_extends");const J=new ue.Ay("select"),X=a()("esc");let F=u(class extends he.B{getCurrentActiveElement(){var B,Q;return(Q=(B=this.context.windowRef.deref())===null||B===void 0?void 0:B.document.activeElement)!==null&&Q!==void 0?Q:null}componentDidUpdate(B){var Q;const{selectState:q,setSelectState:le,shouldIncludeActiveOption:Te=!1,dynamicHeight:Ie=!1,optionsShallowEqualComparisonDepth:De=4,shouldRerenderOnOptionChange:pe=!1}=this.props,{filterQuery:fe,options:Z,initialActiveOption:se}=q,Ae=!(0,ce.Ay)(B.selectState.options,Z,De),Ce=fe!==B.selectState.filterQuery;if(Ae||Ce){const Pe=typeof se<"u"?this.getInitialActiveRowIndex():this.getFirstSelectableRowIndex();le(()=>({activeRowIndex:Pe,...Te?{activeOption:this.getOptionFromList(Pe)}:null}));const He=Pe||Pe===0;this.list.current&&He&&(this.list.current.forceUpdateGrid(),this.list.current.scrollToRow(Pe))}if(Ae&&!Ce&&pe){var Le;(Le=this.list.current)===null||Le===void 0||Le.recomputeRowHeights()}if(Ie&&(q==null?void 0:q.options)!==((Q=B.selectState)===null||Q===void 0?void 0:Q.options)){var Ue;(Ue=this.cellMeasurerCache)===null||Ue===void 0||Ue.clearAll(),this.list.current&&this.list.current.recomputeRowHeights()}this.removeAriaAttrsFromGridNode()}clearDynamicRowHeight(B){var Q;(Q=this.cellMeasurerCache)===null||Q===void 0||Q.clear(B,0),this.list.current&&this.list.current.recomputeRowHeights(B)}getInitialActiveRowIndex(){const{selectState:B}=this.props,{initialActiveOption:Q}=B;if(!Q)return null;const q=(0,c.A)(this.getOptionsList(),["option.value",Q.value]);return q>=0?q:null}getFirstSelectableRowIndex(){const{selectState:B,multiSelectMode:Q=!1,customOptionCompare:q,shouldAlwaysHaveActiveRow:le=!1}=this.props,{filterQuery:Te}=B,Ie=this.getOptionsList();let De=null;if((Te||le)&&Ie.length){const pe=(0,c.A)(Ie,fe=>fe.type!=="heading"&&fe.type!=="divider"&&!this.isOptionSelected(B,fe.option,Q,q),0);pe!==-1&&(De=pe)}return De}componentDidMount(){this.keyCommands=this.initKeyCommands();const{focusOnMount:B=!1,selectState:Q,setSelectState:q,shouldIncludeActiveOption:le=!1,multiSelectMode:Te=!1}=this.props,{selectedOption:Ie,selectType:De}=Q;De===M.US.BASIC&&B&&this.open();let pe=null;if(!Te&&Ie){const fe=(0,c.A)(this.getOptionsList(),["option.value",Ie.value]);fe!==-1&&(pe=fe)}else pe=this.getFirstSelectableRowIndex();q(()=>({activeRowIndex:pe,...le?{activeOption:this.getOptionFromList(pe)}:null})),this.list.current&&typeof pe=="number"&&this.list.current.scrollToRow(pe),this.removeAriaAttrsFromGridNode()}componentWillUnmount(){const{focusOnMount:B=!1,preventScroll:Q=!1}=this.props,{selectType:q}=this.props.selectState;this.keyCommands&&this.keyCommands.reset(),B&&q===M.US.BASIC&&this.previousFocus&&this.getCurrentActiveElement()!==this.previousFocus&&this.previousFocus.focus({preventScroll:Q})}open(){const{focusOnMount:B=!1,selectState:Q}=this.props,{selectType:q}=Q;!B&&q!==M.US.BASIC||(this.previousFocus=this.getCurrentActiveElement(),this.listBody&&this.listBody.current&&this.listBody.current.focus())}close(B){X===B.keyCode&&this.onKeyPressedEsc(B);const{focusOnMount:Q=!1,preventScroll:q=!1}=this.props,{selectType:le}=this.props.selectState;!Q&&le!==M.US.BASIC||this.previousFocus&&this.getCurrentActiveElement()!==this.previousFocus&&this.previousFocus.focus({preventScroll:q})}onKeyPressedDown(B){if(this.isMouseMoveEnabled=!1,!this.shouldInterceptKeyEvent(B))return;const{selectState:Q,setSelectState:q,shouldIncludeActiveOption:le=!1}=this.props,{isExpanded:Te,activeRowIndex:Ie}=Q,De=this.getNextActiveRowIndex(Ie);Te&&B.preventDefault(),q(()=>{var pe;return{activeRowIndex:De,...le?{activeOption:this.getOptionFromList(De)}:null,displayQuery:(pe=this.getOptionFromList(De))===null||pe===void 0?void 0:pe.value}}),this.debouncedEnableMouseMove(),this.list.current&&(this.list.current.forceUpdateGrid(),De===1&&this.isFirstItemUnselectable()?this.list.current.scrollToRow(0):this.list.current.scrollToRow(De))}onKeyPressedUp(B){if(this.isMouseMoveEnabled=!1,!this.shouldInterceptKeyEvent(B))return;const{selectState:Q,setSelectState:q,shouldIncludeActiveOption:le=!1}=this.props,{isExpanded:Te,activeRowIndex:Ie}=Q,De=this.getPreviousActiveRowIndex(Ie);if(Te&&B.preventDefault(),q(()=>{var Z;return{activeRowIndex:De,...le?{activeOption:this.getOptionFromList(De)}:null,displayQuery:(Z=this.getOptionFromList(De))===null||Z===void 0?void 0:Z.value}}),this.debouncedEnableMouseMove(),this.list.current){this.list.current.forceUpdateGrid();const Z=this.getOptionsList();if(De){var pe,fe;if(((pe=Z[De])===null||pe===void 0||(fe=pe.option)===null||fe===void 0?void 0:fe.height)!==0)this.list.current.scrollToRow(De);else{const se=(0,o.A)(Z.slice(0,De)).findIndex(Ae=>{var Ce;return(Ae==null||(Ce=Ae.option)===null||Ce===void 0?void 0:Ce.height)!==0});this.list.current.scrollToRow(De-se-1)}}}}onKeyPressedEsc(B){const{shouldIncludeActiveOption:Q=!1}=this.props;if(!this.props.selectState.isExpanded||!this.shouldInterceptKeyEvent(B))return;B.preventDefault();const{onOptionsListClose:q=i.A}=this.props;q&&q(),this.props.setSelectState(()=>({isExpanded:!1,activeRowIndex:null,...Q?{activeOption:null}:null,filterQuery:"",displayQuery:""}))}onMouseEnteredOption(B){const{shouldIncludeActiveOption:Q=!1}=this.props;this.isMouseMoveEnabled&&(this.props.setSelectState(()=>({activeRowIndex:B,...Q?{activeOption:this.getOptionFromList(B)}:null})),this.list.current&&this.list.current.forceUpdateGrid())}onMouseLeftOption(){const{shouldAlwaysHaveActiveRow:B=!1}=this.props;!this.isMouseMoveEnabled||B||this.clearActive()}onKeyPressedEnter(B){if(this.props.shouldDisableKeyPressedEnter||!this.shouldInterceptKeyEvent(B))return;B.preventDefault();const{activeRowIndex:Q,initialActiveOption:q}=this.props.selectState,le=this.getOptionsList();let Te;typeof Q=="number"&&(Te=le[Q]&&le[Q].option||le[Q]),Te=Te||q,!(Te&&(Te.isDisabled||Te.nonInteractive))&&(this.onOptionSelected(Te),this.close(B))}onKeyPressedShiftTab(B){if(!this.shouldInterceptKeyEvent(B))return;const{onKeyPressedShiftTab:Q=i.A}=this.props;Q&&Q!==i.A&&Q(B)}onKeyPressedTab(B){const{selectState:Q,disableSelectOnTab:q=!1}=this.props;if(q||!this.shouldInterceptKeyEvent(B)||!Q.isExpanded)return;const{onKeyPressedTab:le=i.A}=this.props;if(le&&le!==i.A){le(B);return}const{activeRowIndex:Te,initialActiveOption:Ie}=Q,De=this.getOptionsList();let pe;typeof Te=="number"&&(pe=De[Te]&&De[Te].option||De[Te]),pe=pe||Ie,pe&&B.preventDefault(),!(pe&&(pe.isDisabled||pe.nonInteractive))&&this.onOptionSelected(pe)}onOptionClicked(B){this.onOptionSelected(B,!0)}onScroll(B){const{onScroll:Q=i.A}=this.props;Q&&Q(B)}getClassName(B,Q){const{unstyled:q=!1}=this.props;return q&&Q?(0,n.A)(Q):(0,n.A)(Q,B)}getRowHeight(B){var Q;const{optionsRowHeight:q=M.bJ,headingRowHeight:le=null,dividerRowHeight:Te=M.r3}=this.props;return B.option&&(0,l.A)(B.option.height)?Number(B.option.height):B.type&&B.type==="divider"?Te:B.type==="heading"&&(0,l.A)((Q=B.extras)===null||Q===void 0?void 0:Q.height)?Number(B.extras.height):B.type&&B.type==="heading"&&le!==null?le:q}clearActive(){const{shouldIncludeActiveOption:B=!1}=this.props;this.props.setSelectState(()=>({activeRowIndex:null,...B?{activeOption:null}:null})),this.list.current&&this.list.current.forceUpdateGrid()}focusNode(B){B&&this.getCurrentActiveElement()!==B&&B.focus()}getOptionFromList(B){const Q=this.getOptionsList();return(0,_.A)(Q,`[${B}].option`,null)}getOptionsList(){const{multiSelectMode:B=!1,selectState:Q,includeDividers:q=!0}=this.props,{options:le,isRequired:Te,selectedOption:Ie,filterQuery:De,minQueryLength:pe}=Q;let fe=[];return pe&&pe>0&&Ie&&!De&&(fe=[Ie]),le&&(!B&&Ie&&!Te?fe=[M.az,...le]:fe=le),fe=[...this.formatOptions(fe,q)],fe}enableMouseMove(){this.isMouseMoveEnabled=!0}getDataQaTag(B,Q){const{selectDataQa:q=void 0,selectState:le}=this.props,{isRequired:Te}=le,Ie=B.value?B.value:B.label;let De="";typeof Ie=="string"&&(De=Ie.replace(/[^\w\s]/g,"").replace(/\s/g,"_").toLowerCase());const pe=Te?Q:Q-1;return B.value?`${q}_option_${pe}`:`${q}_option_header_${De}`}isFirstItemUnselectable(){var B,Q,q;const le=this.getOptionsList();return((B=le[0])===null||B===void 0?void 0:B.type)==="heading"||((Q=le[0])===null||Q===void 0||(q=Q.option)===null||q===void 0?void 0:q.nonInteractive)}getNextActiveRowIndex(B){const Q=this.getOptionsList(),q=this.isFirstItemUnselectable();if(B===null&&!q)return 0;if(B===null&&q)return 1;let le=null;return typeof B=="number"&&(le=(0,c.A)(Q,Te=>{var Ie;return Te.type!=="heading"&&Te.type!=="divider"&&!(!(Te==null||(Ie=Te.option)===null||Ie===void 0)&&Ie.nonInteractive)},B+1)),typeof le=="number"&&Q[le]?le:q?1:0}getPreviousActiveRowIndex(B){const Q=this.getOptionsList();let q,le;return typeof B=="number"&&(q=(0,o.A)(Q.slice(0,B)).findIndex(Te=>{var Ie;return Te.type!=="heading"&&Te.type!=="divider"&&!(!(Te==null||(Ie=Te.option)===null||Ie===void 0)&&Ie.nonInteractive)}),le=B-q-1),Q&&!Q.length?null:le===B?Q.length-1:typeof le=="number"&&typeof B=="number"&&Q[le]&&B>0?le:Q.length-1}initKeyCommands(){var B;const{shouldTokenizeOnComma:Q,shouldTokenizeOnSpace:q}=this.props,le=new y.A((B=this.context.windowRef.deref())===null||B===void 0?void 0:B.document),Te=["enter"];return Q&&Te.push("comma"),q&&Te.push("space"),le.bindAll([{keys:["down"],handler:this.onKeyPressedDown},{keys:Te,handler:this.onKeyPressedEnter,filter:Ie=>Ie.code.toLowerCase()==="comma"&&Ie.key!==","},{keys:["up"],handler:this.onKeyPressedUp},{keys:["tab"],handler:this.onKeyPressedTab},{keys:["shift+tab"],handler:this.onKeyPressedShiftTab}]),le}handleClear(){const{selectState:B,setSelectState:Q,onOptionSelected:q=i.A,multiSelectMode:le=!1,onMultiSelectClear:Te=void 0}=this.props,{selectedOption:Ie,selectedOptions:De}=B;let pe=!1;Ie?(Q(()=>({selectedOption:null,isExpanded:!1,filterQuery:"",displayQuery:""}),()=>{q&&q({value:null})}),pe=!0):le&&De&&De.length&&(Q(()=>({selectedOptions:[],isExpanded:!1,filterQuery:"",displayQuery:""}),()=>{Te&&Te()}),pe=!0),this.list.current&&pe&&this.list.current.forceUpdateGrid()}onOptionSelected(B){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{onOptionSelected:q=i.A,onOptionUnselected:le=i.A,selectState:Te,setSelectState:Ie,multiSelectMode:De=!1,inputRef:pe,customOptionCompare:fe,shouldIncludeActiveOption:Z=!1,shouldOptionBeSelected:se,shouldAllowUnselectInMultiSelectMode:Ae=!1,shouldAllowUnselectInSingleSelectMode:Ce=!0,stayExpandedAfterSelection:Le=!1}=this.props;if(B&&!B.isDisabled&&!B.nonInteractive){if(se&&se(B)===!1){Ie(()=>({activeRowIndex:null,filterQuery:"",isExpanded:!1}),()=>{q(B)});return}if(B.value===M.yk)this.handleClear();else if(De){const{selectedOptions:Ue,shouldRefocusInputAfterSelection:Pe}=Te;if(!this.isOptionSelected(Te,B,De,fe)&&Ue)Ie(()=>({selectedOptions:[...Ue,B],activeRowIndex:null,...Z?{activeOption:null}:null,filterQuery:"",isExpanded:Le}),()=>{q&&q(B)});else if(Ae){const Qe=(0,d.A)(Ue,[B],(lt,qe)=>lt.value===qe.value);Ie(()=>({selectedOptions:Qe,activeRowIndex:null,...Z?{activeOption:null}:null,filterQuery:"",isExpanded:Le}),()=>{le&&le(B)})}!Pe&&!B.fromUnknown&&pe&&pe.current&&pe.current.focus()}else{const Ue={isExpanded:!1,filterQuery:"",displayQuery:"",selectedOption:Ce?null:Te.selectedOption};!(0,r.A)(Te.selectedOption,B)&&(Ue.selectedOption=B),Ie(()=>({...Ue}),()=>{q&&q(B,Q)}),Te.shouldRefocusInputAfterSelection&&pe&&pe.current&&pe.current.focus()}}}getArialabelForItem(B){var Q,q,le,Te;const{isFirstChild:Ie,isLastChild:De,optgroup:pe}=B;if(!pe)return null;const fe=J.t("First item in group {group}, {value}",{group:pe&&pe.split(M.Sx).slice(0,-1).join("-"),value:typeof((Q=B.option)===null||Q===void 0?void 0:Q.label)=="string"?(q=B.option)===null||q===void 0?void 0:q.label:""}),Z=J.t("Last item in group {group}, {value}",{group:pe&&pe.split(M.Sx).slice(0,-1).join("-"),value:typeof((le=B.option)===null||le===void 0?void 0:le.label)=="string"?(Te=B.option)===null||Te===void 0?void 0:Te.label:""});return Ie?fe:De?Z:null}getEmptyStateMessage(){const{emptyStateMessage:B,selectState:Q}=this.props,{filterQuery:q,minQueryLength:le}=Q;if(B)return B(q);if(le){if(!q)return J.t("Type to search\u2026");if(q.length<le)return J.t("Keep typing\u2026")}return J.t("No items")}shouldInterceptKeyEvent(B){return!B.target||!R(B.target)?!1:!!(oe(B.target,"aria-autocomplete")||oe(B.target,"aria-haspopup")||this.listBody.current&&this.listBody.current.contains(B.target))}removeAriaAttrsFromGridNode(){const B=this.listBody.current,Q=B&&B.querySelector(".ReactVirtualized__Grid");Q&&(Q.removeAttribute("aria-label"),Q.removeAttribute("aria-readonly"))}renderEmptyState(){const{unstyled:B=!1,width:Q,isLoading:q=!1,selectDataQa:le=void 0,includeWrapper:Te=!0}=this.props;if(q)return t.createElement(t.Fragment,null);const Ie=this.getEmptyStateMessage();if(Ie===null)return t.createElement(t.Fragment,null);const De=B||!Te?+Q:+Q-M.$_;return t.createElement("div",{"data-qa":le?`${le}-empty-state`:null,className:this.getClassName("c-select_options_list__empty_state"),style:{width:De}},t.createElement("div",{role:"alert",className:this.getClassName("c-select_options_list__option c-select_options_list__option--empty-state")},Ie))}getContainerStyle(){return{position:"relative",overflow:"visible"}}getListStyle(B){return{padding:B?M.Hy:void 0,boxSizing:"content-box"}}renderList(){const{maxListHeight:B,width:Q,includePadding:q,unstyled:le=!1,useSlackScrollbar:Te,dynamicHeight:Ie=!1,forceMaxHeight:De,includeWrapper:pe=!0,classPrefix:fe=void 0}=this.props,Z=this.getOptionsList(),se=B||M.CK,Ae=Z.map(He=>this.getRowHeight(He)||0).reduce((He,Qe)=>He+Qe,0),Ce=De||Ae>=se?se:Ae,Le=le||!pe?+Q:+Q-M.$_,Ue=(0,n.A)("c-select_options_list__virtual_list",{"c-select_options_list__virtual_list--slack_scrollbar":Te,[`${fe}__virtual_list`]:!!fe}),Pe=Ie&&this.cellMeasurerCache?this.cellMeasurerCache.rowHeight:He=>{let{index:Qe}=He;return this.getRowHeight(Z[Qe])};return this.cellMeasurerCache?t.createElement(I.O,{className:Ue,containerRole:"presentation",containerStyle:this.getContainerStyle(),style:this.getListStyle(q),height:Ce,deferredMeasurementCache:this.cellMeasurerCache,noRowsRenderer:this.renderEmptyState,onScroll:this.debouncedOnScroll,ref:this.list,rowCount:Z?Z.length:0,rowHeight:Pe,rowRenderer:this.renderRow,tabIndex:null,role:"presentation","no-bootstrap":1,width:Le}):t.createElement(I.O,{className:Ue,containerRole:"presentation",containerStyle:this.getContainerStyle(),style:this.getListStyle(q),height:Ce,noRowsRenderer:this.renderEmptyState,onScroll:this.debouncedOnScroll,ref:this.list,rowCount:Z?Z.length:0,rowHeight:Pe,rowRenderer:this.renderRow,tabIndex:null,role:"presentation","no-bootstrap":1,width:Le})}renderListBody(){const{enableLoadingState:B=!0,isLoading:Q=!1}=this.props;if(Q&&B)return this.renderLoadingState();const q=this.getOptionsList();return!q||q&&!q.length?this.renderEmptyState():this.renderList()}renderLoadingState(){const{width:B}=this.props,Q=J.t("Loading results\u2026");return t.createElement("div",{className:this.getClassName("c-select_options_list__loading_state"),style:{width:B}},t.createElement(f.A,{size:"medium",inline:!0}),t.createElement("div",null,Q))}renderRow(B){let{index:Q,key:q,style:le,parent:Te}=B;var Ie;const{classPrefix:De=void 0,selectState:pe,multiSelectMode:fe=!1,customOptionCompare:Z,unstyled:se=!1,dynamicHeight:Ae=!1,hideOptionsListCheckbox:Ce=!1}=this.props,{selectId:Le}=pe,Ue=this.getOptionsList();let Pe;Ue[Q].option?Pe=Ue[Q].option:Pe=Ue[Q];const{isPlaceholder:He}=Pe,{activeRowIndex:Qe}=pe,{selectedOption:lt,selectedOptions:qe}=pe;let ct;typeof Qe=="number"&&(ct=this.isOptionActive({activeRowIndex:Qe},Ue,Pe));const tt=this.isOptionSelected({selectedOptions:qe,selectedOption:lt},Pe,fe,Z),it=Pe.value===M.yk,Ge=Ue[Q].type==="heading",We=!!Ue[Q].optgroup,xe=Ue[Q].type==="divider",ze=!!Pe.isDisabled,mt=!!Pe.nonInteractive,pt=tt&&!Ge&&!xe,It=Ge||mt||xe,bt=Ue.filter(sn=>sn.type!=="heading"&&sn.type!=="divider"&&!sn.nonInteractive),gt=(0,c.A)(bt,sn=>sn.option===Pe,0),ht=De?`${De}__option`:"",Zt=(0,n.A)("c-select_options_list__option",ht,(0,_.A)(Pe,"overrides.className",!1),{"c-select_options_list__option--active":ct&&(0,_.A)(Pe,"overrides.useHoverStyles",!0),"c-select_options_list__option--placeholder":He,"c-select_options_list__option--selected":pt,"c-select_options_list__option--disabled":ze,"c-select_options_list__group_header":Ge,"c-select_options_list__group_option":We,"c-select_options_list__divider":xe,"c-select_options_list__clear_option":it});let rn=it?Pe.label:t.createElement("hr",{className:this.getClassName("c-select_options__divider")});!xe&&!it&&(rn=this.props.renderOption(Pe,{index:Q,isActive:ct,isGroupHeader:Ge,isClearOption:it,isSelected:tt&&!Ge&&!xe,clearDynamicRowHeight:this.clearDynamicRowHeight}));let zt;if(se||!((Ie=Pe.overrides)===null||Ie===void 0)&&Ie.unstyled)zt=rn;else{var In;zt=t.createElement("span",{"data-qa":Pe.value,className:this.getClassName("c-select_options_list__option_label",{normal_wrap:(In=Pe.extras)===null||In===void 0?void 0:In.forceHeaderWrap})},rn)}const cn=bt.length,Jt=gt===-1?void 0:gt+1,dn=t.createElement("div",ee({"aria-hidden":It?"true":null,"aria-selected":fe?tt:ct,"aria-label":Ge?null:this.getArialabelForItem(Ue[Q]),className:this.getClassName(Zt,ht),"data-qa":xe?void 0:this.getDataQaTag(Pe,Q),id:(0,g.Es)(Le,`option_${Q}`),key:q},le?{style:le}:{},{onClick:ze||mt?(0,m.A)(()=>this.onOptionSelected(Pe)):(0,m.A)(()=>{this.onOptionClicked(Pe)}),onMouseEnter:ze||mt?i.A:(0,m.A)(()=>{this.onMouseEnteredOption(Q)}),onMouseLeave:ze||mt?i.A:this.onMouseLeftOption,role:"option",tabIndex:-1,"data-is-active":ct?"true":void 0,ref:ct?this.currentRow:null,optgroup:We?Ue[Q].optgroup:void 0,"aria-disabled":ze||null,"aria-setsize":cn,"aria-posinset":Jt}),pt&&!Ce&&t.createElement("span",{className:"c-select_options_list__selected","aria-hidden":"true"}),zt);return!Ae||!this.cellMeasurerCache?dn:t.createElement(v.dl,{cache:this.cellMeasurerCache,columnIndex:0,rowIndex:Q,key:q,parent:Te},dn)}isOptionSelected(B,Q,q,le){let{selectedOptions:Te,selectedOption:Ie}=B;return q&&(!Te||Te&&!Te.length)||!q&&!Ie?!1:q?!le&&Q?Te&&Te.some(De=>De.value===Q.value):Te&&Te.some(De=>le({selectedOption:De,listOption:Q})):Ie&&Q&&Ie.value===Q.value}isOptionActive(B,Q,q){let{activeRowIndex:le}=B;if(!le&&le!==0)return!1;const Ie=Q[le];return(Ie&&Ie.option?Ie.option:Ie)===q}render(){const{className:B,ariaLabel:Q,classPrefix:q=void 0,multiSelectMode:le=!1,selectDataQa:Te=void 0,selectState:Ie,dropdownContainer:De=void 0,footerBannerContent:pe}=this.props,{isExpanded:fe,activeRowIndex:Z,selectId:se,selectType:Ae}=Ie,Ce=(0,n.A)("c-select_options_list",{[`${q}_options_list`]:q}),Le=Ae===M.US.BASIC&&fe&&(0,l.A)(Z)?(0,g.Es)(se,`option_${Z}`):void 0,Ue=t.createElement("div",{className:Ce,ref:this.listBody,"data-qa":Te?`${Te}-options-list`:null,id:(0,g.Es)(se,"listbox"),"aria-activedescendant":Le,"aria-label":Q,"aria-multiselectable":!!le,role:"listbox",tabIndex:-1,onMouseMove:this.enableMouseMove},this.renderListBody()),{includeWrapper:Pe=!0}=this.props;if(!Pe)return Ue;const He=(0,n.A)("c-select_options_list__wrapper",{[`${B}`]:B,[`${q}_options_list_wrapper`]:q});return t.createElement("div",ee({className:this.getClassName(He),"data-qa":Te?`${Te}-options-list-wrapper`:"sk-select-options-list-wrapper"},De?{ref:De}:{}),Ue,pe&&t.createElement("div",{className:"c-select_options_list__footer_banner"},pe))}constructor(B){super(B),this.isMouseMoveEnabled=!1,(0,C.v)(this,["getOptionsList","getOptionFromList","handleClear","onKeyPressedDown","onKeyPressedEnter","onKeyPressedTab","onKeyPressedShiftTab","onKeyPressedUp","onMouseLeftOption","onScroll","renderRow","clearDynamicRowHeight","initKeyCommands"]),this.listBody=t.createRef(),this.list=t.createRef(),this.currentRow=t.createRef(),this.keyCommands=void 0,this.previousFocus=null,this.cellMeasurerCache=void 0,this.formatOptions=(0,ae.A)(E),this.enableMouseMove=this.enableMouseMove.bind(this),this.debouncedEnableMouseMove=(0,h.A)(this.enableMouseMove,200),this.debouncedOnScroll=(0,h.A)(this.onScroll.bind(this),200),M.az.label=J.t("Clear selection");const{optionsRowHeight:Q=M.bJ,dynamicHeight:q=!1}=B;q&&(this.cellMeasurerCache=new v.jS({defaultHeight:Q,fixedWidth:!0}))}},"SelectOptionsList");F.displayName="SelectOptionsList",F.contextType=T.M;const L=F},4640201401:(j,p,e)=>{"use strict";e.d(p,{A:()=>g});var t=e(3134334389),n=e(7715417323),s=e(9268023148),a=e(5617110048),c=e(1641606663),o=e(5249175977),i=e(1162627626),l=e(7193040700),_=e(2322735331),d=e(6244014364);function r(){return r=Object.assign||function(M){for(var A=1;A<arguments.length;A++){var O=arguments[A];for(var D in O)Object.prototype.hasOwnProperty.call(O,D)&&(M[D]=O[D])}return M},r.apply(this,arguments)}u(r,"_extends");const m={onClose:{action:d.UiAction.CLOSE},onOpen:{action:d.UiAction.OPEN}},h=50,v=50,y=12,I=4,T=32;let f=u(class extends t.Component{componentDidMount(){this.maybeInstallListener(),this.measureOptionsListAndSetState()}componentDidUpdate(){this.maybeInstallListener()}componentWillUnmount(){this.maybeUninstallListener()}isMouseEvent(A){return(A==null?void 0:A.type)==="click"}didClickInput(A){const{inputRef:O}=this.props;if(!(O!=null&&O.current)||!this.isMouseEvent(A))return;const D=A.clientX,E=A.clientY,C=O.current.getBoundingClientRect();return D>C.left&&D<C.right&&E>C.top&&E<C.bottom}onClose(A){var O;const{selectState:D,inputRef:E,onOptionsListClose:C,setSelectState:S}=this.props;if(D.isExpanded){if(A instanceof KeyboardEvent){var b;(b=this.optionsListRef.current)===null||b===void 0||b.close(A)}E==null||(O=E.current)===null||O===void 0||O.focus(),C==null||C(this.didClickInput(A)),S(()=>({isExpanded:!1,activeRowIndex:null,filterQuery:"",displayQuery:""}))}}getOptionsListBounds(){const{inputRef:A,inputContainerRef:O=null}=this.props,D=O||A;return D&&D.current?D.current.getBoundingClientRect():null}getPopoverPosition(A){let{top:O,bottom:D}=A;var E;const C=O,S=(((E=this.context.windowRef.deref())===null||E===void 0?void 0:E.innerHeight)||0)-D,{selectState:b,maxListHeight:k=l.CK}=this.props,{options:W}=b;let N=0;const V=u(P=>P.map(z=>this.getRowHeight(z)).reduce((z,$)=>z+$,0),"calculateRowHeight");if(W){const P=[];W.forEach(z=>{if(z.options){P.push(z.label),z.options.forEach($=>P.push($));return}P.push(z)}),N=V(P)}const R=Math.min(N,k);return S<R&&S<C?"top-left":"bottom-left"}getRowHeight(A){const{optionsRowHeight:O=l.bJ}=this.props;return A.type&&A.type==="divider"?l.r3:O}maybeInstallListener(){var A,O;if(this.listenerInstalled)return;(A=this.context.windowRef.deref())===null||A===void 0||A.addEventListener("resize",this.onResize),(O=this.context.windowRef.deref())===null||O===void 0||O.addEventListener("scroll",this.onScroll);const{measurePopoverEventName:D=null}=this.props;if(D){var E;(E=this.context.windowRef.deref())===null||E===void 0||E.addEventListener(D,this.measureOptionsListAndSetState)}this.listenerInstalled=!0}maybeUninstallListener(){const{measurePopoverEventName:A=null}=this.props;if(this.listenerInstalled){var O,D;if(this.onResize.cancel(),this.onScroll.cancel(),(O=this.context.windowRef.deref())===null||O===void 0||O.removeEventListener("resize",this.onResize),(D=this.context.windowRef.deref())===null||D===void 0||D.removeEventListener("scroll",this.onScroll),A){var E;(E=this.context.windowRef.deref())===null||E===void 0||E.removeEventListener(A,this.measureOptionsListAndSetState)}this.listenerInstalled=!1}}measureOptionsListAndSetState(){this.listenerInstalled&&this.setState(()=>({optionsListBounds:this.getOptionsListBounds()}))}render(){var A,O;const{popoverProps:D={},selectState:E,minOptionsListWidth:C=null,onOpen:S=n.A,onScrollablePage:b=!1,autoClogProps:k=void 0,maxListHeight:W=l.CK,shouldAllowUnselectInSingleSelectMode:N,shouldAllowUnselectInMultiSelectMode:V,stayExpandedAfterSelection:R}=this.props,{selectId:P}=E,z=this.state.optionsListBounds||{width:0,bottom:0,left:0},$=this.getPopoverPosition({top:z.top,bottom:z.bottom}),x=$==="top-left",Y=((A=this.context.windowRef.deref())===null||A===void 0?void 0:A.innerWidth)||0;let ne=z.width;C&&z.width<C&&(ne=C);const re=z.left-y+ne;let _e=0;C&&re>Y&&(_e=C-z.width);const ge=(x?z.top:(((O=this.context.windowRef.deref())===null||O===void 0?void 0:O.innerHeight)||0)-z.bottom)-T,oe=Math.min(ge,W),me={...this.props,autoClogProps:k,width:ne+y*2,maxListHeight:oe,shouldAllowUnselectInSingleSelectMode:N,shouldAllowUnselectInMultiSelectMode:V,stayExpandedAfterSelection:R},{pageYOffset:ue}=this.context.windowRef.deref()||{},ae={top:z.top+ue+I,bottom:z.bottom+ue-I,left:z.left-(y+_e),width:ne};let he;if(b){var ce;he={height:(ce=this.context.windowRef.deref())===null||ce===void 0?void 0:ce.document.body.scrollHeight}}return t.createElement(a.A,r({elementType:d.ElementType.DROPDOWN,actionProps:m},k?{autoClogProps:k}:{}),t.createElement(o.AM,r({position:$,allowanceX:-y,ref:this.popover},D,{onClose:this.onClose,isOpen:!!E.isExpanded,key:`${P}-popover`,shouldFocusAfterRender:!1,targetBounds:ae,ariaHideApp:!1,onOpen:S},typeof he<"u"?{overlayStyle:he}:{},{shouldPropagateOnClose:!0}),t.createElement(i.A,r({},me,{ref:this.optionsListRef}))))}constructor(A){super(A),this.popover=t.createRef(),this.optionsListRef=t.createRef(),this.state={optionsListBounds:null},(0,_.v)(this,["measureOptionsListAndSetState","onClose"]),this.onResize=(0,s.A)(this.measureOptionsListAndSetState,h,{maxWait:h}),this.onScroll=(0,s.A)(this.measureOptionsListAndSetState,v,{maxWait:v}),this.listenerInstalled=null}},"SelectPopoverOptionsList");f.displayName="SelectPopoverOptionsList",f.contextType=c.M,f.defaultProps={includePadding:!0,window};const g=f},9573786552:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3134334389),n=e(166097325),s=e(3297051565),a=e.n(s);function c(){return c=Object.assign||function(i){for(var l=1;l<arguments.length;l++){var _=arguments[l];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(i[d]=_[d])}return i},c.apply(this,arguments)}u(c,"_extends");function o(i){const l={showConfirmDialog:a().func,setSelectState:a().func.isRequired,selectedOptions:a().array,selectedOption:a().object},_={selectedOptions:[],selectedOption:null,showConfirmDialog:void 0};let d=u(class extends t.Component{setSelectState(m,h){const v=m();v.selectedOptions&&!(0,n.A)(v.selectedOptions,this.selectedOptions)||v.selectedOption&&!(0,n.A)(v.selectedOption,this.selectedOption)?(this.props.setSelectState(()=>({isExpanded:!1})),this.props.showConfirmDialog({onGo:()=>{this.props.setSelectState(m,h),this.selectedOptions=v.selectedOptions||this.selectedOptions,this.selectedOption=v.selectedOption||this.selectedOption}})):(this.props.setSelectState(m,h),this.selectedOptions=v.selectedOptions||this.selectedOptions,this.selectedOption=v.selectedOption||this.selectedOption)}render(){const{showConfirmDialog:m}=this.props,h=m?this.setSelectState:this.props.setSelectState;return t.createElement(i,c({},this.props,{setSelectState:h}))}constructor(m){super(m),this.setSelectState=this.setSelectState.bind(this),this.selectedOptions=m.selectedOptions,this.selectedOption=m.selectedOption}},"ConfirmSelectWrapper");return d.displayName="ConfirmSelectWrapper",d.propTypes=l,d.defaultProps=_,d}u(o,"withConfirm")},2742076544:(j,p,e)=>{"use strict";e.d(p,{A:()=>d});var t=e(3134334389),n=e(166097325),s=e(9113979368),a=e(7715417323),c=e(9268023148),o=e(6422693406),i=e(796111729);function l(){return l=Object.assign||function(r){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(r[v]=h[v])}return r},l.apply(this,arguments)}u(l,"_extends");const _=(0,i.Wo)();function d(r){let m=u(class extends t.Component{componentDidMount(){const{searchOnClick:v,disableSearchOnMount:y,expandOnFocus:I,minQueryLength:T}=this.props,{filterQuery:f}=this.state;if(!v&&!y||I){const g=!T||f&&f.length>=T;f!==void 0&&g&&this.search(f)}}componentDidUpdate(v){const{isInvalid:y,selectedOption:I,selectedOptions:T,isDisabled:f,minQueryLength:g}=this.props,M={};v.isInvalid!==y&&(M.isInvalid=y),v.isDisabled!==f&&(M.isDisabled=f),(0,n.A)(v.selectedOption,I)||(M.selectedOption=I),(0,n.A)(v.selectedOptions,T)||(M.selectedOptions=T),(0,n.A)(v.minQueryLength,g)||(M.minQueryLength=g),(0,s.A)(M)||this.setSelectState(()=>M)}componentWillUnmount(){this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel()}setSelectState(v,y){const I=v();(I.filterQuery!==void 0&&I.filterQuery!==this.state.filterQuery||I.searchOnClick)&&(this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),!this.state.minQueryLength||I.filterQuery&&I.filterQuery.length>=this.state.minQueryLength?(this.setState(()=>({isLoading:!0,searchOnClick:!1})),this.search(I.filterQuery)):this.setState(()=>({isLoading:!1,options:[]}))),this.setState(()=>I,y)}search(v){const{search:y,onSearch:I=a.A,onSearchError:T=a.A,selectId:f,processOptions:g=u(M=>o.S.resolve(M),"processOptions")}=this.props;I(v),this.searchPromise=y(v).then(M=>{g(M,v).then(A=>{this.setSelectState(()=>({options:A})),this.setState(()=>({isLoading:!1}))})}).catch(M=>{this.setState(()=>({isLoading:!1})),_.error(`Error when searching for select id: ${f}, error: ${M}`),T(M)})}render(){const v=this.props.inputRef||this.inputRef;return t.createElement(r,l({},this.props,{selectState:this.state,setSelectState:this.setSelectState,inputRef:v,isLoading:this.state.isLoading}))}constructor(v){super(v),this.inputRef=t.createRef(),this.searchPromise=null,this.setSelectState=this.setSelectState.bind(this),this.state={filterQuery:"",displayQuery:"",options:[],isExpanded:v.isExpanded,expandOnFocus:v.expandOnFocus,selectId:v.selectId,selectedOptions:v.selectedOptions||[],selectedOption:v.selectedOption||null,isRequired:v.isRequired,isLoading:!1,isDisabled:v.isDisabled,isInvalid:v.isInvalid,searchOnClick:v.searchOnClick,minQueryLength:v.minQueryLength},this.search=(0,c.A)(this.search,v.debounceWaitPeriod)}},"CustomSearchWrapper");return m.displayName="CustomSearchWrapper",m.defaultProps={isRequired:!0,selectedOptions:null,selectedOption:null,isExpanded:!1,expandOnFocus:!1,isDisabled:!1,isInvalid:!1,debounceWaitPeriod:50,minQueryLength:0,onSearch:a.A,onSearchError:a.A,searchOnClick:!1,disableSearchOnMount:!1,processOptions:h=>o.S.resolve(h),shouldAllowUnselectInMultiSelectMode:!1},m}u(d,"withCustomSearch")},3239909785:(j,p,e)=>{"use strict";e.d(p,{A:()=>ge});var t=e(9706240641),n=e(3134334389),s=e(7715417323),a=e(166097325),c=e(9113979368),o=e(9524650809),i=e(235108050),l=e(362134992),_=e(2208015175),d=e(8086952004),r=e(4360875129),m=e(2394306156),h=e(9746734072),v=e(2101927269),y=e(8840779375),I=e(9268023148),T=e(5950652755),f=e(3297051565),g=e.n(f),M=e(6422693406),A=e(6987519067),O=e(145735569),D=e(3708320478),E=e(6543729974),C=e(2170574487);function S(oe){return[...oe.filter(me=>!me.isError&&!me.isUnknown),...oe.filter(me=>!me.isError&&me.isUnknown),...oe.filter(me=>me.isError)]}u(S,"sortTokens");var b=e(9236644324),k=e(56548687),W=e(796111729),N=e(735940183),V=e(4327331459),R=e(3707193570),P=e(4862221402),z=e(9868740303),$=e(4342685672),x=e(5356156303),Y=e(9391594207),ne=e(8847766420);function re(){return re=Object.assign||function(oe){for(var me=1;me<arguments.length;me++){var ue=arguments[me];for(var ae in ue)Object.prototype.hasOwnProperty.call(ue,ae)&&(oe[ae]=ue[ae])}return oe},re.apply(this,arguments)}u(re,"_extends");const _e=(0,W.Wo)(),G=new N.Ay("form_inputs");function ge(oe){const me={searcherOptions:g().object.isRequired,selectId:g().string.isRequired,inputRef:g().object,isRequired:g().bool,selectedOptions:g().array,selectedOption:g().object,isExpanded:g().bool,isDisabled:g().bool,isInvalid:g().bool,focusOnMount:g().bool,searchOnPaste:g().bool,expandOnFocus:g().bool,expandOnClick:g().bool,searchBatchSize:g().number,debounceWaitPeriod:g().number,onFilterQueryPaste:g().func,onInputFocused:g().func,onSearch:g().func,onSearchError:g().func,onSearchResolved:g().func,onOptionsListClose:g().func,splitPastedQuery:g().func,processOptions:g().func,processSelectedOptions:g().func,clogger:g().object.isRequired,search:g().func.isRequired,teamId:g().string.isRequired,useSearcherSessions:g().bool,showConfirmDialog:g().func,restrictedSelectedTokenIndexes:g().array,disabledSelectedTokenIndexes:g().array,invalidSelectedTokenIndexes:g().array,useBulkSearch:g().bool},ue={isRequired:!0,selectedOptions:null,selectedOption:null,inputRef:null,isExpanded:!1,isDisabled:!1,isInvalid:!1,focusOnMount:!1,searchOnPaste:!1,expandOnFocus:void 0,expandOnClick:void 0,searchBatchSize:1,debounceWaitPeriod:50,onFilterQueryPaste:s.A,onInputFocused:s.A,onSearch:s.A,onSearchError:s.A,onSearchResolved:s.A,onOptionsListClose:s.A,splitPastedQuery:C.I,processOptions:ee=>M.K.resolve(ee),processSelectedOptions:void 0,useSearcherSessions:!1,showConfirmDialog:void 0,restrictedSelectedTokenIndexes:[],disabledSelectedTokenIndexes:[],invalidSelectedTokenIndexes:[],useBulkSearch:!1};let ae=u(class extends n.Component{componentDidMount(){this.props.focusOnMount&&this.setState(()=>({isLoading:!0})),this.searchQuery(this.state.filterQuery)}componentDidUpdate(J,X){const{isDisabled:F,isInvalid:L,selectedOptions:K,selectedOption:B,searchOnPaste:Q,expandOnFocus:q,expandOnClick:le,restrictedSelectedTokenIndexes:Te,disabledSelectedTokenIndexes:Ie,invalidSelectedTokenIndexes:De}=this.props,pe={};if(J.isInvalid!==L&&(pe.isInvalid=L),J.isDisabled!==F&&(pe.isDisabled=F),(0,a.A)(J.selectedOptions,K)||(pe.selectedOptions=K),(0,a.A)(J.selectedOption,B)||(pe.selectedOption=B),(J.expandOnFocus&&!q||J.expandOnClick&&!le)&&(pe.isExpanded=!1),this.wasUnknownTokenResolved(this.state.selectedOptions,X.selectedOptions)){var Z,se;const He=this.getNextUnknownTokenIndex();pe.selectedTokenIndexes=[He],(Z=this.inputRef)===null||Z===void 0||(se=Z.current)===null||se===void 0||se.focus()}J.restrictedSelectedTokenIndexes!==Te&&(pe.restrictedSelectedTokenIndexes=Te),J.disabledSelectedTokenIndexes!==Ie&&(pe.disabledSelectedTokenIndexes=Ie),J.invalidSelectedTokenIndexes!==De&&(pe.invalidSelectedTokenIndexes=De);const{isLoading:Ae,pendingQueries:Ce,selectedOptions:Le,pendingEscapeQueries:Ue,filterQuery:Pe}=this.state;if(Q&&!Ae){if(!(0,c.A)(Ce))pe.isLoading=!0,pe.loadInBackground=!0,this.searchQueryObjects(Ce);else if(X.isLoading){if(this.updateDisabled(!1),Ue.length>0&&Pe===""){const He=(0,N.jd)(Ue.map(tt=>tt.query),{noConj:!0}).join(""),Qe=Ue[0],{options:lt}=Qe,qe=u(tt=>tt.map(it=>{const{query:Ge,options:We,...xe}=it,ze=We?{options:qe(We)}:{};return{...xe,...ze,query:He}}),"getUpdatedOptions"),ct={...Qe,options:qe(lt),query:He};pe.pendingEscapeQueries=[],pe.options=ct.options,pe.filterQuery=He,pe.isExpanded=!0,pe.isLoading=!1}if(Le.length){const He=Le.filter(lt=>lt.isError||lt.isUnknown).length,Qe=He?G.t("Loading complete. There {count, plural, =1 {is # unknown entry} other {are # unknown entries}}.",{count:He}):G.t("Loading complete.");this.updateAriaTextThrottled.cancel&&this.updateAriaTextThrottled.cancel(),this.updateAriaTextThrottled(Qe)}}}(0,c.A)(pe)||this.setSelectState(()=>pe)}componentWillUnmount(){this.updateAriaText.cancel&&this.updateAriaText.cancel(),this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),this._isMounted=!1}onFilterQueryPaste(J){var X=this;return(0,t.coroutine)(function*(){const{searchOnPaste:F,searcherOptions:L,splitPastedQuery:K,processOptions:B}=X.props;if(!F||!J&&!J.clipboardData)return;J.preventDefault();const Q=J.clipboardData.getData("text/plain")?"text/plain":"Text",q=(0,b.i_)(J),le=q.text,Te=K(le,{...L,fromMetadata:q.text!==J.clipboardData.getData(Q)});X.props.onFilterQueryPaste(Te);const Ie=[],De=[];yield M.K.all(Te.map(pe=>{const fe=X.getQueryId();return(0,V.A)(pe)||(0,P.A)(pe)||(0,R.Ay)(pe)?B([{key:fe,pasted:!0,fromMetadata:!0,value:pe,label:q.members?q.members[pe]:pe}]).then(Z=>(Z[0]&&De.push(Z[0]),M.K.resolve())):(Ie.push({query:pe,queryId:fe,pasted:!0}),De.push({label:pe,queryId:fe,isLoading:!0,key:fe,pasted:!0}),M.K.resolve())})),X.setSelectState(pe=>({pendingQueries:pe.pendingQueries.concat(Ie),selectedOptions:pe.selectedOptions.concat(De)})),X.updateDisabled(!(0,c.A)(Ie)),X.updateAriaTextThrottled.cancel&&X.updateAriaTextThrottled.cancel()})()}onInputFocused(){this.props.onInputFocused(),!(this.props.expandOnClick||this.shouldExpandOnFocus())&&this.setState(()=>({isExpanded:!1,options:[]}))}onOptionsListClose(J){const{isLoading:X,isExpanded:F,filterQuery:L}=this.state;!X&&F&&L.length>0&&this.clogSearcherResults(),this.props.onOptionsListClose(J)}onTokenSelect(J){var X=this;return(0,t.coroutine)(function*(){if(!(X.props.expandOnClick||X.shouldExpandOnFocus())){if(J&&!J.isUnknown)X.setState(()=>({isExpanded:!1,options:[]}));else if(J){const F=yield X.props.processOptions(J.resultOptions.map(L=>({...L,fromUnknown:!0})),J.label);X.lastShownSearchDetails=J.searcher,X.setState(()=>({isExpanded:!0,options:F}))}}})()}getQueryId(){return(0,o.A)("query__")}setSelectState(J,X){var F=this;return(0,t.coroutine)(function*(){var L;const{processSelectedOptions:K}=F.props;let B=J(F.state);const{selectedOption:Q,selectedOptions:q}=F.state;B.filterQuery!==void 0&&B.filterQuery!==F.state.filterQuery&&(B.isLoading=!0,B.loadInBackground=!1,F.searchQuery(B.filterQuery));const{searchOnPaste:le}=F.props;if(le&&B.selectedOptions){const Ie=B.selectedOptions.map(pe=>{let{key:fe}=pe;return fe}),De=(0,i.A)((0,l.A)(Ie.filter(pe=>Ie.indexOf(pe)!==Ie.lastIndexOf(pe))));(0,_.A)(De,pe=>{const fe=(0,d.A)(B.selectedOptions,se=>{let{key:Ae,isUnknown:Ce}=se;return Ae===pe&&!Ce}),Z=(0,l.A)(B.selectedOptions.map(se=>se.key===pe?se.isUnknown?fe:null:se));B.selectedOptions=Z})}if(B.selectedOptions!==void 0&&!(0,a.A)(B.selectedOptions,q)){const Ie=B.selectedOptions.filter(pe=>{let{isLoading:fe,isUnknown:Z}=pe;return!fe&&!Z}),[De]=(0,r.A)(Ie,q,"value");De&&F.clogSearcherResults(De)}B.selectedOption!==void 0&&B.selectedOption!==null&&((L=B.selectedOption)===null||L===void 0?void 0:L.value)!==(Q==null?void 0:Q.value)&&F.clogSearcherResults(B.selectedOption);const Te=!!B.removalInitiator;if(B.selectedOptions&&!Te&&K){if(B=(0,m.A)(B),B.isLoading!==void 0){const Ie=B.isLoading;F.setState(()=>({isLoading:Ie})),delete B.isLoading}B.selectedOptions=yield K(B.selectedOptions)}F.setState(()=>B,X)})()}getNextUnknownTokenIndex(){return this.state.selectedOptions.findIndex(J=>J.isUnknown&&J.queryId)}wasUnknownTokenResolved(J,X){const F=J.filter(K=>K.isUnknown).length,L=X.filter(K=>K.isUnknown).length;return F<L}shouldExpandOnFocus(){const{expandOnFocus:J}=this.props,{selectedOptions:X}=this.state,F=(0,E.A)(X);return J&&!F}clogSearcherResults(J){if(this.lastShownSearchDetails===null)return;const{clogger:X,selectId:F,useSearcherSessions:L,teamId:K}=this.props,{query:B,results:Q}=this.lastShownSearchDetails,q={source:F,query:B,results:Q};J?(q.selectedItemId=J.value,L?(0,z.A)({teamId:K,key:F}).clogSearcherAccept({clogger:X,data:q}):(0,A.DC)({clogger:X,data:q})):L?(0,z.A)({teamId:K,key:F}).clogSearcherReject({clogger:X,data:q}):(0,A.Yb)({clogger:X,data:q})}processSearchResults(J){const{searchOnPaste:X,onSearchResolved:F,searcherOptions:L}=this.props,{escapeHatchEnabled:K,escapeHatchKeys:B}=L,Q=this.state.selectedOptions.slice(0);X&&J.forEach(q=>{let{queryId:le,options:Te,searcher:Ie}=q;const De=Q.findIndex(Z=>Z.queryId===le),pe=Q[De];let fe=null;if(pe){this.lastShownSearchDetails=Ie;let Z;Te.length===1?(Z=Te[0],K&&Ie&&Ie.results&&Ie.results.length===0&&Ie.pasted&&B&&B[Z.key]&&this.setState(Ae=>({pendingEscapeQueries:[...Ae.pendingEscapeQueries,{query:Ie.query,options:[Z]}]})),this.clogSearcherResults(Z)):Te.length?Z={isUnknown:!0}:(Z={isError:!0},this.clogSearcherResults()),fe={...pe,...Z,resultOptions:Te,searcher:Ie,isLoading:!1},Q[De]=fe}F({result:Te,selectedOption:fe})}),this.setState(q=>{if((0,x.Ay)(q.selectedOptions,Q,2)){const{options:le,searcher:Te}=J[0];return this.lastShownSearchDetails=Te,q.loadInBackground?null:{options:le}}return{selectedOptions:S(Q)}})}runBatchedSearch(J){const X=J.slice(0,this.props.searchBatchSize);if(J.length>1&&this.props.useBulkSearch){const L=X.some(B=>!!B.pasted),K=X.some(B=>!!B.initial);return this.runSingleSearch({query:X,pasted:L,initial:K})}const F=X.map(L=>{let{query:K,queryId:B,pasted:Q,initial:q}=L;return this.runSingleSearch({query:K,queryId:B,pasted:Q,initial:q})});return M.K.all(F)}runSingleSearch(J){let{query:X,queryId:F,pasted:L,initial:K}=J;const{onSearch:B,onSearchError:Q,processOptions:q,searcherOptions:le,selectId:Te,useSearcherSessions:Ie,teamId:De,useBulkSearch:pe}=this.props;let fe,Z,se=!1;const Ae=F||this.getQueryId(),Ce=new Map;if((0,h.A)(X)&&pe?(fe=X.map(Pe=>(Ce.set(Pe.queryId,Pe.query),{query:(0,C.t)(Pe.query,le),queryId:Pe.queryId})),se=!0):Z=(0,C.t)(X,le),Z&&B(X)===!1)return q([],Z).then(Pe=>({queryId:Ae,options:Pe,searcher:this.lastShownSearchDetails}));let Le;Ie&&(!L||se)?Le=(0,z.A)({teamId:De,key:K?Ae:Te}).search({query:se?fe:Z,options:{...le,sort:{source:Te,...le.sort},returnMetadata:!0}}):Le=this.props.search({query:se?fe:Z,options:{...le,sort:{source:Te,...le.sort},returnMetadata:!0}});var Ue=this;return Le.then(function(){var Pe=(0,t.coroutine)(function*(He){Ue.lastShownSearchDetails={query:se?fe:Z,results:He};const Qe=(He||[]).map((ct,tt)=>{var it;return{key:se?ct.queryId:`${Ae}_${tt}`,value:ct.item.id,label:ct.name||((it=ct.item)===null||it===void 0?void 0:it.name)||(se?Ce.get(ct.queryId):X),entity:ct.item,matchData:ct.subqueryScoresByMember}}),{selectedOption:lt}=Ue.state;Z===""&&lt&&((0,d.A)(Qe,["value",lt.value])||Qe.unshift(lt));const qe=yield q(Qe,X,{pasted:L});return{queryId:Ae,options:qe,searcher:{...Ue.lastShownSearchDetails,pasted:L}}});return function(He){return Pe.apply(this,arguments)}}()).catch(Pe=>{_e.error(`Error when searching for select id: ${Te}, error: ${Pe}`),Q(Pe);const He=[];return{queryId:Ae,options:He,searcher:{query:se?fe:Z,results:He,pasted:L,isError:!0}}})}searchQuery(J){this._isMounted&&this.searchQueryObjects([{query:J}])}searchQueryObjects(J){if((0,c.A)(J))return;if(this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),!this.props.searchOnPaste){const{query:F,queryId:L}=J[0];this.searchPromise=this.runSingleSearch({query:F,queryId:L}).then(K=>{let{options:B}=K;this.setSelectState(()=>({options:B})),this.setState(()=>({isLoading:!1}))});return}this.searchPromise=this.runBatchedSearch(J).then(F=>{let L=F;this.props.useBulkSearch&&(L=this.generateBulkSearchResultsArray(L)),this.processSearchResults(L);const K=L.map(B=>{let{queryId:Q}=B;return Q});this.setState(B=>({pendingQueries:B.pendingQueries.filter(q=>{let{queryId:le}=q;return!K.includes(le)}),isLoading:!1}))});const X=G.t("Loading {count, plural, =1 {# more entry} other {# more entries}}",{count:J.length});this.updateAriaTextThrottled(X)}updateAriaText(J){this.setState(X=>X.ariaText===J?null:{ariaText:J})}updateDisabled(J){this.setState(X=>X.isDisabled===J?null:{isDisabled:J})}generateBulkSearchResultsArray(J){var X;if(!(!(J==null||(X=J.options)===null||X===void 0)&&X.length))return J.splice(0);const{options:F,searcher:L}=J,{pasted:K,query:B,results:Q}=L;return B.map(le=>({options:F.filter(Te=>Te.key===le.queryId),queryId:le.queryId,searcher:{pasted:K,query:le.query,results:Q.filter(Te=>Te.queryId===le.queryId)}}))}render(){return n.createElement(n.Fragment,null,n.createElement(oe,re({},this.props,{expandOnFocus:this.shouldExpandOnFocus(),inputRef:this.inputRef,selectState:this.state,setSelectState:this.setSelectState,onOptionsListClose:this.onOptionsListClose,onFilterQueryPaste:this.onFilterQueryPaste,onTokenSelect:this.onTokenSelect,onInputFocused:this.onInputFocused,isLoading:this.state.isLoading})),n.createElement(D.A,{message:this.state.ariaText}))}constructor(J){super(J),this.searchPromise=null,this.setSelectState=this.setSelectState.bind(this),this.onOptionsListClose=this.onOptionsListClose.bind(this),this.onFilterQueryPaste=this.onFilterQueryPaste.bind(this),this.onTokenSelect=this.onTokenSelect.bind(this),this.onInputFocused=this.onInputFocused.bind(this);const{selectedOptions:X,searchOnPaste:F}=J,L=(0,v.A)(X,B=>(0,O.iC)(B));let K=[];F&&(K=(0,l.A)((0,y.A)(L,B=>!B.label||!B.queryId?null:{query:B.label,queryId:B.queryId,initial:!0}))),this.state={filterQuery:"",options:[],isExpanded:J.isExpanded,selectId:J.selectId,selectedOptions:J.selectedOptions||[],selectedOption:J.selectedOption||null,isRequired:J.isRequired,isLoading:!1,isDisabled:J.isDisabled,isInvalid:J.isInvalid,pendingQueries:K||[],loadInBackground:!1,ariaText:"",shouldRefocusInputAfterSelection:!!J.showConfirmDialog,pendingEscapeQueries:[],selectedTokenIndexes:[],restrictedSelectedTokenIndexes:J.restrictedSelectedTokenIndexes||[],disabledSelectedTokenIndexes:J.disabledSelectedTokenIndexes||[],invalidSelectedTokenIndexes:J.invalidSelectedTokenIndexes||[]},this.searchQuery=(0,I.A)(this.searchQuery,J.debounceWaitPeriod),this.updateAriaTextThrottled=(0,T.A)(this.updateAriaText,3e4),this.lastShownSearchDetails=null,this.inputRef=J.inputRef||n.createRef(),this._isMounted=!0}},"SearcherSelectWrapper");ae.displayName="SearcherSelectWrapper",ae.propTypes=me,ae.defaultProps=ue;const he=u(ee=>({clogger:(0,k.e)({state:ee}),teamId:(0,ne.JY)(ee),useSearcherSessions:(0,$.nK)(ee)}),"mapStateToProps"),ce={search:function(){for(var ee=arguments.length,J=new Array(ee),X=0;X<ee;X++)J[X]=arguments[X];return(0,A.$P)(...J)}};return(0,Y.N)(he,ce)(ae)}u(ge,"withSearcher")},2864323261:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(2825917518);const n=u(function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;if(!i)return o;const{label:l,options:_}=i,d=new t.A(a,{fuzzyLimit:3,...c});if(!_)isFinite(d.normalizeAndScore(l))&&o.push(i);else{const r=[];_.forEach(m=>{const{label:h}=m;isFinite(d.normalizeAndScore(h))&&r.push(m)}),r.length&&o.push({label:i.label,options:r})}return o},"findMatches");function s(a,c){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c?a.reduce((i,l)=>n(c,o,i,l),[]):a}u(s,"defaultFilter")},6543729974:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(9113979368),n=e(1703559452),s=e(145735569);function a(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,t.A)(c)?!1:(0,n.A)(c,o=>(0,s.hH)(o))}u(a,"__WEBPACK_DEFAULT_EXPORT__")},3650946343:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(9113979368),n=e(2101927269),s=e(4724591729),a=e(796111729);function c(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if((0,t.A)(o))return!1;const i=(0,n.A)(o,l=>(l&&!l.message&&(0,s.Cu)()&&(0,a.Wo)({label:"Invalid Error or Hint Object"}).error(`The following error or hint object is invalid: { id: ${l.id}, message: ${l.message}}`),l&&!!l.message));return!(0,t.A)(i)}u(c,"__WEBPACK_DEFAULT_EXPORT__")},2170574487:(j,p,e)=>{"use strict";e.d(p,{I:()=>i,t:()=>l});var t=e(3044566667);const n=[",","\uFF0C","\u3001",";","\uFF1B","|","\uFF5C","\\t","\\n","\\r"],s=new RegExp(`[${n}]`),a=new RegExp(`<(${t.gy})>`,"i"),c=new RegExp(`\\((${t.gy})\\)`,"i"),o=/(?=\s+[@\uFF20])/g;function i(_){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return d.entities&&d.entities.members&&d.entities.members.matchEmailField&&(a.test(_)||c.test(_))?r=_.match(new RegExp(t.tN.CONTAINS_EMAIL,"gi")):s.test(_)?r=_.split(s):d.fromMetadata?r=_.split(/\s+/):d.entities&&d.entities.members&&o.test(_)&&(r=_.split(o)),(!r||!r.length)&&(r=_.split(/\s+/)),r.map(m=>m.trim()).filter(m=>Boolean(m))}u(i,"defaultSplitQuery");function l(_){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=_;return d.entities&&d.entities.members&&d.entities.members.matchEmailField&&t.tN.CONTAINS_EMAIL.test(_)&&(r=_.match(t.tN.CONTAINS_EMAIL)[0]),r}u(l,"parseQueryForSearch")},7772530643:(j,p,e)=>{"use strict";e.d(p,{k:()=>n});var t=e(2864323261);const n=u(function(a,c){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c.filterQuery===void 0?c:{...c,options:(0,t.A)(a,c.filterQuery,o)}},"defaultFilter"),s=u((a,c)=>a.reduce((o,i)=>i(o),c),"applyTransforms")},1959847761:(j,p,e)=>{"use strict";e.d(p,{A:()=>s,e:()=>n.ex});var t=e(1211063534),n=e(5139334449);const s=t.A},1211063534:(j,p,e)=>{"use strict";e.d(p,{A:()=>f});var t=e(3134334389),n=e(5255740490),s=e(5950652755),a=e(7715417323),c=e(1641606663),o=e(8245211418),i=e(5139334449),l=e(3256698098);function _(){return _=Object.assign||function(g){for(var M=1;M<arguments.length;M++){var A=arguments[M];for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(g[O]=A[O])}return g},_.apply(this,arguments)}u(_,"_extends");const d=1,r=10,m=10,h=2,v=12,y=50;let I=u(class extends t.PureComponent{componentDidMount(){if(this.state.isOpen){var M;(M=this.context.windowRef.deref())===null||M===void 0||M.document.addEventListener("mousemove",this.onMouseMove)}}static getDerivedStateFromProps(M,A){return M.isOpen!==A.passedIsOpen?{isOpen:M.isOpen,passedIsOpen:M.isOpen}:null}componentDidUpdate(M){if(M.isOpen!==this.props.isOpen)if(this.state.isOpen){var A;this.forceUpdate(),(A=this.context.windowRef.deref())===null||A===void 0||A.document.addEventListener("mousemove",this.onMouseMove)}else{var O;(O=this.context.windowRef.deref())===null||O===void 0||O.document.removeEventListener("mousemove",this.onMouseMove)}this.state.isOpen||(this.initialTriggerBounds=void 0)}componentWillUnmount(){var M;(M=this.context.windowRef.deref())===null||M===void 0||M.document.removeEventListener("mousemove",this.onMouseMove)}onMouseMove(M){const A={x:M.clientX,y:M.clientY},O=this.mouseProgressingTowardsSubmenu(A);O!==this.state.mouseProgressingTowardsSubmenu&&(O?this.props.preventHighlightChange():this.state.highlightChangePrevented||this.props.allowHighlightChange()),this.setState(()=>({mouseCoordinates:A,mouseProgressingTowardsSubmenu:O}))}onSubmenuItemSelected(M,A){this.props.menuCallback(this.props.menuCallbackId,A)}getContentBounds(){return this.submenuContainer?this.submenuContainer.getBoundingClientRect():void 0}getSubmenuContainerStyle(){const M=this.getContentBounds(),A=this.getTriggerBounds(),O={...this.props.submenuStyle},D=this.context.windowRef.deref();if((M==null?void 0:M.width)===void 0||(A==null?void 0:A.left)===void 0||!D)return O;const E=A.right+M.width>D.innerWidth,C=A.left>M.width,S=this.props.forceLeft||E&&C;E&&!C?O.left=D.innerWidth-M.width-r:S?O.left=A.left-M.width+h:O.left=A.right-h;const k=A.top-v,W=k+M.height>D.innerHeight-m;return O.top=W?D.innerHeight-m-M.height:k,O}getTriggerBounds(){return this.initialTriggerBounds||(this.initialTriggerBounds=this.trigger?this.trigger.getBoundingClientRect():void 0),this.initialTriggerBounds||void 0}setSubmenuRef(M){this.submenuContainer=M}setTriggerRef(M){this.trigger=M}allowHighlightChange(){this.setState(M=>({...M,highlightChangePrevented:!1}))}closeSubmenu(){this.props.returnKBNav(),this.setState(()=>({isOpen:!1}),()=>{var M;(M=this.context.windowRef.deref())===null||M===void 0||M.document.removeEventListener("mousemove",this.onMouseMove)})}mouseProgressingTowardsSubmenu(M){const{mouseCoordinates:A}=this.state,O=this.getContentBounds();if(O){const{left:D,right:E,top:C,bottom:S}=O;if(M.x>=D&&M.x<=E&&M.y>=C&&M.y<=S)return!0;if(A){const k=Math.abs(E-A.x)>Math.abs(D-A.x),W={x:k?D:E,y:C-d},N={x:k?D:E,y:S+d},V={x:k?A.x-d:A.x+d,y:A.y};return(0,l._i)(M,V,W,N)}}return!1}preventHighlightChange(){this.setState(M=>({...M,highlightChangePrevented:!0}))}renderSubmenu(){if(!this.state.isOpen||this.props.disabled)return null;const M=this.props.renderSubmenu({onTriggerClose:this.closeSubmenu,onCloseSubmenu:this.closeSubmenu,onMenuItemSelected:this.onSubmenuItemSelected,kbNavActive:this.props.kbNavActive,preventHighlightChange:this.preventHighlightChange,allowHighlightChange:this.allowHighlightChange,isSubmenu:!0}),A=this.getSubmenuContainerStyle(),O=(0,n.A)("c-submenu__container",{"c-submenu__container--legacy":!this.props.renderLegacySubmenu});return t.createElement("div",{role:"presentation",className:O,ref:this.setSubmenuRef,style:A,"data-qa":"submenu_container"},M)}render(){const{menuCallback:M,menuCallbackId:A,...O}=this.props;return t.createElement("div",{role:"presentation",className:"c-submenu","data-qa":"submenu_trigger_wrapper",ref:this.setTriggerRef},t.createElement(o.A,_({},O,{withSubmenu:!0})),this.renderSubmenu())}constructor(M){super(M),this.state={isOpen:!1,passedIsOpen:!1,mouseCoordinates:void 0,mouseProgressingTowardsSubmenu:!1,highlightChangePrevented:!1},this.closeSubmenu=this.closeSubmenu.bind(this),this.setSubmenuRef=this.setSubmenuRef.bind(this),this.setTriggerRef=this.setTriggerRef.bind(this),this.onMouseMove=(0,s.A)(this.onMouseMove.bind(this),y),this.onSubmenuItemSelected=this.onSubmenuItemSelected.bind(this),this.preventHighlightChange=this.preventHighlightChange.bind(this),this.allowHighlightChange=this.allowHighlightChange.bind(this)}},"Submenu");I.displayName="Submenu",I.defaultProps={isOpen:!1,menuCallback:a.A,menuCallbackId:null,kbNavActive:!1,returnKBNav:a.A,preventHighlightChange:a.A,allowHighlightChange:a.A,renderLegacySubmenu:!0,forceLeft:!1,submenuStyle:void 0,disabled:!1,showFullCarat:!1,icon:null},I.contextType=c.M;const T={Submenu:I,SUBMENU_OVERLAP:h,MENU_VERTICAL_MARGIN:v,ALLOWANCE_X:r,ALLOWANCE_Y:m},f=(0,i.Ay)(I)},5139334449:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>d,ex:()=>_});var t=e(2208015175),n=e(3297051565),s=e.n(n),a=e(101973425),c=e(4724591729),o=e(796111729);const i="_isSlackSubmenuItem",l={...a.LN,kbNavActive:s().bool,stealKBNav:s().func,returnKBNav:s().func,preventHighlightChange:s().func,allowHighlightChange:s().func};function _(r){return!!r[i]}u(_,"isSubmenu");function d(r){if((0,c.Cu)()){const m=r.propTypes||{};let h;Object.defineProperty(r,"propTypes",{get:()=>h,set:v=>{const y=r.displayName||r.name||"Component";(0,t.A)(l,(I,T)=>{const f=v[T];f&&f!==I&&f!==I.isRequired&&(0,o.Wo)().warn(`${y}'s ${T} prop type doesn't match submenu`)}),h={...l,...v}}}),r.propTypes=m}return r[i]=!0,r[a.KJ]=!0,r}u(d,"wrapSubmenu")},4525741652:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(3134334389),n=e(5255740490);function s(){return s=Object.assign||function(o){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var _ in l)Object.prototype.hasOwnProperty.call(l,_)&&(o[_]=l[_])}return o},s.apply(this,arguments)}u(s,"_extends");const c=(0,t.forwardRef)((o,i)=>{let{tabContent:l,fullHeight:_,className:d,role:r="tabpanel",...m}=o;const h=(0,n.A)(d,"c-tabs__tab_panel","c-tabs__tab_panel--active",{"c-tabs__tab_panel--full_height":_});return t.createElement("div",s({role:r,className:h,"data-qa":"tabs_content_container",ref:i},m),l)})},6130762911:(j,p,e)=>{"use strict";e.d(p,{T:()=>s});var t=e(3134334389);const n={isSelected:!1,hasMouseHover:!1,hasKeyboardFocus:!1,isUserAttentionOnTab:!1},s=(0,t.createContext)(n)},2598612765:(j,p,e)=>{"use strict";e.d(p,{A:()=>D});var t=e(3134334389),n=e(5255740490),s=e(8628145494),a=e(9268023148),c=e(4980558152),o=e(2309855086),i=e(7946439528),l=e(3749524846),_=e(9332393661),d=e(6084388622),r=e(1610251172),m=e(8683010724),h=e(6130762911),v=e(7239742441),y=e(698347924);function I(E){return/\.(jpe?g|png|gif|bmp)$/i.test(E)}u(I,"hasImageExtention");const T=I;function f(){return f=Object.assign||function(E){for(var C=1;C<arguments.length;C++){var S=arguments[C];for(var b in S)Object.prototype.hasOwnProperty.call(S,b)&&(E[b]=S[b])}return E},f.apply(this,arguments)}u(f,"_extends");const g=u(E=>{let{icon:C,svgIcon:S,customIcon:b,className:k}=E;return t.createElement("div",{className:k,"data-qa":"tabs_item_render_icon"},!b&&C&&!S&&t.createElement(r.A,{type:C,size:"inherit",inline:!0}),!b&&S&&!C&&t.createElement(m.A,f({},S)),b&&b)},"TabsItemIcon");g.displayName="TabsItemIcon";const M=u(E=>E>=1e4?(0,v.$k)(E,{precision:4,decimal_places:0,lowercase:!0}):(0,y.Ay)(E),"formatNumber"),A=u(E=>{let{shouldFormatCount:C,titleCount:S,maxTitleCount:b}=E;return C&&S?M(S):b&&S&&S>b?`${b}+`:S},"formatCount"),D=(0,t.forwardRef)((E,C)=>{let{label:S,onClick:b,title:k,isSelected:W,isFocused:N,focusOnMount:V,fullWidth:R,titleCount:P,maxTitleCount:z,icon:$,svgIcon:x,customIcon:Y,formatCount:ne,isLoading:re,isCountLoading:_e,isDisabled:G,iconPosition:ge="right",className:oe="",contextMenuAriaLabel:me,contextMenuTemplate:ue,...ae}=E;const he=(0,o.A)(C),[ce,ee]=(0,t.useState)(!1),J=(0,t.useContext)(l.A),X=(0,n.A)(oe,"c-tabs__tab","js-tab",{"c-tabs__tab--active":W,"c-tabs__tab--full_width":R}),F=S||k,L=typeof F=="string"&&T(F)?t.createElement(_.A,{classes:"c-tabs__tab_image",image:F,ariaHidden:!0}):F,K=ae.id,B=(0,t.useCallback)(Ce=>{b&&b(K,Ce)},[K,b]),Q=A({shouldFormatCount:ne,titleCount:P,maxTitleCount:z}),q=(0,s.A)(N)?W:N,le=(0,i.A)(q);(0,t.useEffect)(()=>{if(!q)return;const Ce=(0,s.A)(le);if(Ce&&V||!Ce&&!le){var Le;(Le=he.current)===null||Le===void 0||Le.focus()}},[q,le,V,he]);const Te=(0,t.useCallback)(()=>ue,[ue]),Ie=(0,a.A)(()=>ee(!0),25),De=(0,a.A)(()=>ee(!1),25),pe=(0,t.useCallback)(()=>{De.cancel(),Ie()},[Ie,De]),fe=(0,t.useCallback)(()=>{Ie.cancel(),De()},[Ie,De]),Z=J&&(N??!1),se=(0,t.useMemo)(()=>({isSelected:W??!1,hasMouseHover:ce,hasKeyboardFocus:Z,isUserAttentionOnTab:W||ce||Z}),[Z,ce,W]);let Ae=t.createElement(d.Nm,f({},ae,{onClick:B,onMouseOver:pe,onMouseOut:fe,role:"tab",className:X,"aria-selected":W,tabIndex:q?0:-1,disabled:G,ref:he}),re?t.createElement("span",{className:"c-tabs__tab_placeholder","data-qa":"tabs_item_placeholder"}):t.createElement(t.Fragment,null,(!!$||!!x||!!Y)&&ge==="left"&&t.createElement(g,{icon:$,svgIcon:x,customIcon:Y,className:"c-tabs__tab_icon--left"}),t.createElement("span",{className:"c-tabs__tab_content"},L),Number.isFinite(P)&&t.createElement("span",{className:"c-tabs__tab_count","data-qa":"tabs_item_render_count"},Q),_e&&t.createElement("span",{className:"c-tabs__tab_count_placeholder","data-qa":"tabs_item_render_count_placeholder"}),(!!$||!!x||!!Y)&&ge==="right"&&t.createElement(g,{icon:$,svgIcon:x,customIcon:Y,className:"c-tabs__tab_icon--right"})));return ue&&(Ae=t.createElement(c.A,{getTemplate:Te,desktopAppOnly:!1,showSlackKitContextMenuOnDesktop:!0,width:"auto",menuAriaLabel:me},Ae)),t.createElement(h.T.Provider,{value:se},Ae)})},3214129289:(j,p,e)=>{"use strict";e.d(p,{A:()=>G});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3514831633),c=e(8773153312),o=e(8683010724),i=e(2598612765),l=e(2312625946);const _={name:"ellipsis-horizontal",variation:"filled"},r=(0,t.forwardRef)((ge,oe)=>{let{renderMenu:me,position:ue,label:ae,id:he,isSelected:ce,isFocused:ee}=ge;return t.createElement(a.cQ,{renderMenu:me,position:ue||"bottom-left"},t.createElement(l.Ay,{tip:ae,position:"top",offsetY:6},t.createElement(i.A,{id:he,"aria-label":ae,isSelected:ce,isFocused:ee,className:"c-tabs__tab_overflow",svgIcon:_,ref:oe})))});var m=e(5238395322);const h=53,v=27;function y(ge){const oe=ge.ownerDocument.defaultView;if(!oe)return ge.offsetWidth;const me=oe.getComputedStyle(ge),ue=parseFloat(me.getPropertyValue("margin-left"))+parseFloat(me.getPropertyValue("margin-right"));return ge.offsetWidth+ue}u(y,"getWidth");function I(ge){const oe=ge.ownerDocument.defaultView;if(!oe)return ge.offsetHeight;const me=oe.getComputedStyle(ge),ue=parseFloat(me.getPropertyValue("margin-top"))+parseFloat(me.getPropertyValue("margin-bottom"));return ge.offsetHeight+ue}u(I,"getHeight");const T=u((ge,oe)=>{let{outerElement:me,innerElement:ue,threshold:ae,totalTabsLength:he,childElements:ce,containerSize:ee,isHorizontal:J}=ge;if(!me||!ue||!ce||he===0)return;const X=ee-ae,F=J?y:I,L=Array.from(ce).map(le=>F(le));if((0,m.A)(L)<X&&L.length===he){oe(he);return}let B=J?h:v,Q=X,q=1;L.forEach(le=>{B+=le,B<X&&le<=Q&&(q+=1),Q-=le}),oe(q)},"recalculateVisibleTabs");var f=e(4525741652),g=e(8214116048),M=e(3078252698);const O=u(ge=>(0,M.A)(ge),"isReactNodeAString");var D=e(2322735331),E=e(6244014364),C=e(4806483452),S=e(4724591729),b=e(3688641936),k=e(796111729),W=e(8873262110),N=e(735940183),V=e(3821598679);function R(){return R=Object.assign||function(ge){for(var oe=1;oe<arguments.length;oe++){var me=arguments[oe];for(var ue in me)Object.prototype.hasOwnProperty.call(me,ue)&&(ge[ue]=me[ue])}return ge},R.apply(this,arguments)}u(R,"_extends");const P=new N.Ay("slack-kit"),z=85,$=52,x=["ArrowLeft"],Y=["ArrowRight"],ne=x.concat("ArrowUp"),re=Y.concat("ArrowDown");let _e=u(class extends t.PureComponent{setVisibleTabs(oe){this.setState(()=>({numOfVisibleTabsShown:oe}))}onResize(){var oe,me,ue,ae,he,ce,ee,J,X,F;const L=this.props.orientation===g.t4.Horizontal,K=L?(oe=this.tabsContainerRef)===null||oe===void 0||(me=oe.current)===null||me===void 0?void 0:me.clientWidth:(ue=this.tabsContainerRef)===null||ue===void 0||(ae=ue.current)===null||ae===void 0?void 0:ae.clientHeight;if(!K)return;const B=L?z:$,Q={outerElement:(he=this.tabsContainerRef)===null||he===void 0||(ce=he.current)===null||ce===void 0?void 0:ce.getBoundingClientRect(),innerElement:(ee=this.lastVisibleTabRef)===null||ee===void 0||(J=ee.current)===null||J===void 0?void 0:J.getBoundingClientRect(),totalTabsLength:this.props.tabs.length,numOfVisibleTabsShown:this.state.numOfVisibleTabsShown,childElements:(X=this.tabsContainerRef)===null||X===void 0||(F=X.current)===null||F===void 0?void 0:F.children};T({...Q,threshold:B,containerSize:K,isHorizontal:L},this.setVisibleTabs),this.setState(()=>({isResizeCalculationCompleted:!0}),()=>{var q,le;return(le=(q=this.props).onTabsResized)===null||le===void 0?void 0:le.call(q)})}componentDidMount(){this._isMounted=!0;const{maxSize:oe}=this.props;if(oe&&!this.resizeListener){var me;this.resizeListener=(0,W.A)(this.onResize),this.resizeListener.observe((me=this.tabsContainerRef)===null||me===void 0?void 0:me.current)}}componentDidUpdate(oe,me){var ue;const{defaultTabId:ae,tabs:he,manualTabActivation:ce}=this.props;var ee;((ee=(ue=oe.tabs)===null||ue===void 0?void 0:ue.length)!==null&&ee!==void 0?ee:0)!==he.length&&this.updateSelectedTab(),ae!==oe.defaultTabId&&ae&&this.selectTab(ae,void 0);const J=me.numOfVisibleTabsShown!==this.state.numOfVisibleTabsShown,X=me.selectedTabId!==this.state.selectedTabId&&!ce;(J||X)&&this.updateFocusedTabIndex(),this.focusWhenVisible&&(this.focusWhenVisible=!1,this.focus())}componentWillUnmount(){if(this._isMounted=!1,this.resizeListener){var oe;(oe=this.resizeListener)===null||oe===void 0||oe.disconnect(),this.resizeListener=null}}onFocus(oe){const{focusedTabIndex:me}=this.state,ue=this.getTabIndexById(oe.target.id);ue!==me&&this.focusTab(ue)}onKeyDown(oe){const me=oe.key;if(oe.shiftKey||oe.metaKey||oe.ctrlKey||oe.altKey)return;const ae=this.props.orientation==="vertical",he=ae?re:Y,ce=ae?ne:x;if(!["Home","End"].concat(he,ce).includes(me))return;const J=he.includes(me),X=ce.includes(me);oe.preventDefault(),J&&this.onNextArrow(oe),X&&this.onPreviousArrow(oe),me==="Home"&&this.onHome(oe),me==="End"&&this.onEnd(oe)}isSelectedTabVisible(){return this.getVisibleTabIds().includes(this.state.selectedTabId)}getHiddenTabs(){const{tabs:oe}=this.props,{numOfVisibleTabsShown:me}=this.state;return oe.slice(me,oe.length)}getVisibleTabs(){var oe,me;const{tabs:ue,maxSize:ae}=this.props;if(!!!ae)return ue;const ce=((oe=this)===null||oe===void 0||(me=oe.state)===null||me===void 0?void 0:me.numOfVisibleTabsShown)||ue.length;return ue.length===ce?ue:ue.slice(0,ce).concat({id:this.overflowTabId})}getVisibleTabIds(){return this.getVisibleTabs().map(oe=>{let{id:me}=oe;return me})}getTabById(oe){var me;return(me=this.props.tabs)===null||me===void 0?void 0:me.find(ue=>ue.id===oe)}getTabIndexById(oe){return this.getVisibleTabIds().indexOf(oe)}onHome(oe){if(this.state.focusedTabIndex===0)return;const{onTabWillChange:me,manualTabActivation:ue,onTabChange:ae}=this.props,he=this.getVisibleTabIds(),ce=0;if(this.focusTab(ce),ue)return;const ee=he[ce];ee!==this.overflowTabId&&(me==null?void 0:me(ee))!==!1&&this.setState(()=>({selectedTabId:ee}),()=>{ae==null||ae(ee,oe)})}onEnd(oe){const me=this.getVisibleTabIds(),ue=me.length-1;if(this.state.focusedTabIndex===ue)return;const{onTabWillChange:ae,manualTabActivation:he,onTabChange:ce}=this.props;if(this.focusTab(ue),he)return;const ee=me[ue];ee!==this.overflowTabId&&(ae==null?void 0:ae(ee))!==!1&&this.setState(()=>({selectedTabId:ee}),()=>ce==null?void 0:ce(ee,oe))}onNextArrow(oe){const{onTabWillChange:me,manualTabActivation:ue,onTabChange:ae}=this.props,he=this.getVisibleTabIds(),ce=this.getTabIndexById(oe.target.id),ee=ce>=he.length-1?0:ce+1;if(this.focusTab(ee),ue)return;const J=he[ee];J!==this.overflowTabId&&(me==null?void 0:me(J))!==!1&&this.setState(()=>({selectedTabId:J}),()=>ae==null?void 0:ae(J,oe))}onPreviousArrow(oe){const{onTabWillChange:me,manualTabActivation:ue,onTabChange:ae}=this.props,he=this.getVisibleTabIds(),ce=this.getTabIndexById(oe.target.id),ee=ce===0?he.length-1:ce-1;if(this.focusTab(ee),ue)return;const J=he[ee];J!==this.overflowTabId&&(me==null?void 0:me(J))!==!1&&this.setState(()=>({selectedTabId:J}),()=>ae==null?void 0:ae(J,oe))}getNextTabId(){const{defaultTabId:oe,tabs:me,currentTabId:ue}=this.props,ae=oe?this.getTabIndexById(oe):void 0,he=ue?this.getTabIndexById(ue):void 0;return ue&&he?ue:oe&&ae?oe:me[0].id}updateSelectedTab(){if(!this._isMounted||!this.props.tabs.length)return;const oe=this.getNextTabId();oe!==this.state.selectedTabId&&this.setState(()=>({selectedTabId:oe}))}focus(){if(this.isHidden)return this.focusWhenVisible=!0,!1;this.focusWhenVisible=!1;const{current:oe}=this.focusedTabRef;if(oe)return oe.focus(),!0;const me=this.props.currentTabId||this.state.selectedTabId,ue=this.getTabIndexById(me)||0;return this.focusTab(ue),!0}focusTab(oe){this.setState(()=>({focusedTabIndex:oe}))}selectTab(oe,me){const{onTabWillChange:ue,onTabChange:ae}=this.props,he=this.getTabById(oe);if(!he)return null;if((ue==null?void 0:ue(oe))!==!1){if(he.isExternalLink){var ce;return(ce=he.onClick)===null||ce===void 0?void 0:ce.call(he,oe,me)}return this.setState(()=>({selectedTabId:oe}),()=>{if(ae==null||ae(oe,me),this.props.focusOnFirstFocusableChildOnChange){const ee=this.panelRef&&this.panelRef.current,J=(0,b.Fp)(ee);J==null||J.focus()}}),null}}updateFocusedTabIndex(){const oe=this.isSelectedTabVisible()?this.state.selectedTabId:this.overflowTabId;this.setState(()=>({focusedTabIndex:this.getVisibleTabIds().indexOf(oe)}))}onTabClick(oe,me){var ue;const ae=this.getTabById(oe);ae&&(ae.isExternalLink||this.selectTab(ae.id,me),ae==null||(ue=ae.onClick)===null||ue===void 0||ue.call(ae,ae.id,me))}get isHidden(){return!!this.props.maxSize&&!this.state.isResizeCalculationCompleted}renderOverflowTabLabel(oe){const me=P.t("More\u2026",{fallbackHash:"4ac8baf107e91d808d6840701812f4abed7fa3b5",fallbackHashNs:"mentions"});if(this.isSelectedTabVisible())return me;const ue=this.getTabById(oe);if(!ue)return me;const ae=ue["aria-label"]||ue.label||ue.title;return!ae||!O(ae)?me:P.t("More: {selectedTabLabel}",{selectedTabLabel:ae,fallbackHash:"4ac8baf107e91d808d6840701812f4abed7fa3b5",fallbackHashNs:"mentions"})}renderTabsItem(oe,me){const{tabs:ue,fullWidthMenu:ae,orientation:he,iconPosition:ce,focusOnMount:ee}=this.props,J=this.state.focusedTabIndex===me,X=J?this.focusedTabRef:void 0,F=oe.autoClogProps?{...this.autoClogProps,...oe.autoClogProps,elementType:E.ElementType.TAB}:this.autoClogProps,L=me===ue.length-1?this.lastVisibleTabRef:void 0,K=L?(0,C.A)(X,L):X,B=this.props.currentTabId||this.state.selectedTabId,Q=B===oe.id;return oe.id===this.overflowTabId?t.createElement(r,{renderMenu:this.renderOverflowMenu,position:"bottom-left",label:this.renderOverflowTabLabel(B),isSelected:!this.isSelectedTabVisible(),isFocused:J,ref:K,id:oe.id,key:oe.id}):t.createElement(i.A,{key:oe.id,id:oe.id,icon:oe.icon,svgIcon:oe.svgIcon,customIcon:oe.customIcon,label:oe.label||oe.title,onClick:this.onTabClick,autoClogProps:F,isSelected:Q,isFocused:J,focusOnMount:ee,isDisabled:oe.isDisabled,fullWidth:ae||he==="vertical",titleCount:oe.titleCount,maxTitleCount:oe.maxTitleCount,"aria-label":oe["aria-label"],"aria-describedby":oe["aria-describedby"],"data-qa":oe["data-qa"]||"tabs_item","aria-haspopup":oe["aria-haspopup"],ref:K,formatCount:this.props.formatCount,isLoading:oe.isLoading,isCountLoading:oe.isCountLoading,iconPosition:ce,className:oe.className,contextMenuAriaLabel:oe.contextMenuAriaLabel,contextMenuTemplate:oe.contextMenuTemplate})}renderTabsItems(){return this.getVisibleTabs().map((me,ue)=>{typeof me.label!="string"&&!t.isValidElement(me.label)&&typeof me.title!="string"&&!t.isValidElement(me.title)&&!me["aria-label"]&&((0,S.Cu)()||(0,S.b3)())&&(0,k.Wo)().error("Tabs requires either a label of type string, or an aria-label.");const ae=this.renderTabsItem(me,ue);return me.renderWrapper?t.createElement(t.Fragment,{key:me.id},me.renderWrapper(ae)):ae})}renderOverflowMenu(oe){var me;const{selectedTabId:ue}=this.state,ae=(me=this.getHiddenTabs())===null||me===void 0?void 0:me.map(he=>({label:he.label||he.title,id:he.id,click:ce=>this.onTabClick(he.id,ce),key:he.id,type:c.A.radio,checked:he.id===ue,icon:he.svgIcon?t.createElement(o.A,R({size:"18"},he.svgIcon)):null,className:"c-tabs__tab_overflow_menu_item"}));return t.createElement(a.a,R({width:"200px"},oe,{template:ae}))}renderTabPanelLabel(oe){const me=this.getTabById(oe);if(!me)return;const ue=me["aria-label"]||me.label||me.title;if(O(ue))return ue}render(){var oe;const{fullHeight:me,fullWidthMenu:ue,className:ae,orientation:he,tabMenuClassnames:ce,tabPanelClassnames:ee,ariaLabel:J,currentTabId:X,maxSize:F}=this.props,L=X||this.state.selectedTabId;var K;const B=(K=(oe=this.getTabById(L))===null||oe===void 0?void 0:oe.content)!==null&&K!==void 0?K:"",Q=(0,n.A)(ae,{"c-tabs__tab_container--full_height":me,"c-tabs__tab_container--vertical":he==="vertical","c-tabs__tab_menu--overflow_ellipsis":!!F}),q=(0,n.A)(ce,"c-tabs__tab_menu",{"c-tabs__tab_menu--full_width":ue,"c-tabs__tab_menu--vertical":he==="vertical","c-tabs__tab_menu--hidden":this.isHidden}),le=(0,n.A)(ee,{"c-tabs__tab_panel--vertical":he==="vertical"});return t.createElement("div",{className:Q,"data-qa":"tabs_full_height_class"},t.createElement("div",{role:"tablist",className:q,"data-qa":"tabs_full_width_class",onKeyDown:this.onKeyDown,onFocus:this.onFocus,"aria-orientation":he,"aria-label":J,ref:this.tabsContainerRef},this.renderTabsItems()),B&&t.createElement(f.A,{tabContent:B,fullHeight:me,ref:this.panelRef,className:le,"aria-label":this.renderTabPanelLabel(L)}))}constructor(oe){var me;super(oe),(0,D.v)(this,["onKeyDown","onFocus","onTabClick","onResize","renderOverflowMenu","setVisibleTabs"]),this.focusedTabRef=t.createRef(),this.panelRef=t.createRef(),this.tabsContainerRef=t.createRef(),this.lastVisibleTabRef=t.createRef(),this.resizeListener=null,this._isMounted=!1,this.focusWhenVisible=!1,oe.autoClogProps&&(this.autoClogProps={...oe.autoClogProps,elementType:E.ElementType.TAB});const ue=oe.currentTabId||oe.defaultTabId||((me=oe.tabs[0])===null||me===void 0?void 0:me.id),ae=this.getTabIndexById(ue);this.state={selectedTabId:ue,focusedTabIndex:ae!==-1?ae:0,numOfVisibleTabsShown:this.getVisibleTabs().length,isResizeCalculationCompleted:!1},this.overflowTabId=`sk-overflow-tab-${(0,V.A)()}`}},"Tabs");_e.displayName="Tabs",_e.defaultProps={onTabChange:s.A,orientation:"horizontal",iconPosition:"right",manualTabActivation:!1,focusOnFirstFocusableChildOnChange:!0};const G=_e},4275787242:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(3134334389),n=e(3708320478),s=e(5733135148);const a=u(c=>{let{children:o,duration:i,svgIconProps:l,toastClasses:_,position:d,offsetX:r,offsetY:m,showCloseButton:h,onCloseComplete:v,shouldAutoFade:y,shouldSkipToastDismissal:I,closeButtonClasses:T,svgIconClassName:f,announceContentAsAssertive:g}=c;return t.createElement(s.Ay,{fadeDelay:i,svgIconClassName:f,svgIconProps:l,toastClasses:_,offsetX:r,offsetY:m,position:d,showCloseButton:h,onCloseComplete:v,shouldAutoFade:y,shouldSkipToastDismissal:I,closeButtonClasses:T},t.createElement(n.z,{assertive:g},o))},"Toast");a.displayName="Toast",a.defaultProps={duration:6e3}},2855755676:(j,p,e)=>{"use strict";e.d(p,{F:()=>t,n:()=>n});const t={small:"small",medium:"medium",large:"large"},n={small:22,medium:26,large:32}},561151542:(j,p,e)=>{"use strict";e.d(p,{A:()=>$,L:()=>P});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(126225536),c=e(1030162945),o=e(7969928607),i=e(1407713935),l=e(4559887502),_=e(8798294025),d=e(6839188756),r=e(6308822),m=e(5387475318),h=e(5289504844),v=e(8460568133),y=e(5415825258),I=e(1610251172),T=e(7193040700),f=e(3267847539),g=e(8683010724),M=e(5484624422),A=e(2312625946),O=e(82287009),D=e(8040098042),E=e(6112179660),C=e(4327331459),S=e(3707193570),b=e(4862221402),k=e(9391594207),W=e(2235302340),N=e(9101533895),V=e(3677514771);function R(){return R=Object.assign||function(x){for(var Y=1;Y<arguments.length;Y++){var ne=arguments[Y];for(var re in ne)Object.prototype.hasOwnProperty.call(ne,re)&&(x[re]=ne[re])}return x},R.apply(this,arguments)}u(R,"_extends");let P=u(class extends t.Component{renderChannelToken(Y){const{channel:ne,showMemberCounts:re,isSelected:_e,channelHasNonUniqueName:G}=this.props;let ge;return(0,i.LI)(ne)?ge=t.createElement(h.Ay,{id:(0,_.e)(ne),className:"c-token_channel"}):(0,i.yz)(ne)?ge=t.createElement(v.A,{mpim:ne,className:"c-token_channel",isActive:_e}):ge=t.createElement(m.A,{channel:ne,className:"c-token_channel",displayFormerNames:!1,showFilledIcon:!0,showMemberCounts:re,showTeamForLocalChannel:G}),t.createElement("span",{className:Y,"data-qa":"token_channel"},ge)}renderContent(){const{isLoading:Y,isUnknown:ne,isError:re,isMemberError:_e,isTeamError:G,isInvalid:ge,channel:oe,memberId:me,teamName:ue,userGroupId:ae,channelSection:he,contentInnerClassName:ce,emailTeam:ee}=this.props;let J=(0,n.A)("c-token_content__inner",ce);return Y&&!ge?(J+=" c-token_content__inner--loading",this.renderLoadingToken(J)):ne?(J+=" c-token_content__inner--unknown",this.renderUnknownToken(J)):re?(J+=" c-token_content__inner--error",this.renderErrorToken(J)):ee?(J+=" c-token_content__inner--email_with_team_icon",this.renderEmailTokenWithTeamIcon(J)):me&&_e?(J+=" c-token_content__inner--error",this.renderMemberErrorToken(J)):me?(J+=" c-token_content__inner--member",this.renderMemberToken()):oe?this.renderChannelToken(J):ue&&G?(J+=" c-token_content__inner--error",this.renderTeamErrorToken(J)):ue?(J+=" c-token_content__inner--team",this.renderTeamToken(J)):he?(J+=" c-token_content__inner--channel_section",this.renderChannelSectionToken(J)):ae?(J+=" c-token_content__inner--usergroup",this.renderUserGroupToken(J)):this.renderPlainToken(J)}renderErrorToken(Y){const{label:ne}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__error_icon_container"},t.createElement(g.A,{size:"18",name:"warning","data-qa":"token_error_icon"})),t.createElement("span",{className:(0,n.A)(Y,"c-token_content__label"),"data-qa":"token_error"},ne))}renderLoadingToken(Y){const{size:ne,label:re}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__loading_icon_container"},t.createElement(r.A,R({},ne?{size:ne}:{},{"data-qa":"token_loading_icon"}))),t.createElement("span",{className:(0,n.A)(Y,"c-token_content__label"),"data-qa":"token_loading"},re))}renderMemberToken(){const{forceRealName:Y,isDisabled:ne,memberId:re,size:_e}=this.props;return t.createElement(h.Ay,{id:re,isDeactivated:ne,showPresence:!1,showTooltip:!1,useShortMode:!0,forceRealName:Y,showStatus:!1,className:"c-token--member c-token__avatar margin_right_25","data-qa":"token_member",tokenSize:_e})}renderMemberErrorToken(Y){const{forceRealName:ne,isDisabled:re,memberId:_e,size:G}=this.props;return t.createElement(h.Ay,{id:_e,isDeactivated:re,showPresence:!1,showTooltip:!1,useShortMode:!0,forceRealName:ne,showStatus:!1,className:(0,n.A)(Y,"c-token--member c-token__avatar"),"data-qa":"token_member",tokenSize:G})}renderIcon(){const{icon:Y,svgIcon:ne}=this.props;return ne?t.createElement("span",{className:"c-token_content__icon"},t.createElement(g.A,R({"data-qa":"token_plain_icon",inline:!0,size:"inherit"},ne))):Y?t.createElement(I.A,{"data-qa":"token_plain_icon",size:"inherit",className:"c-token_content__icon",type:Y,inline:!0}):null}renderPlainToken(Y){const{label:ne}=this.props;return t.createElement("span",{className:Y},this.renderIcon(),t.createElement("span",{className:"c-token_content__label","data-qa":"token_plain_label"},t.createElement(o.A,{text:ne,inputIsEscaped:!0,emojiSize:c.lw.MEDIUM})))}renderEmailTokenWithTeamIcon(Y){const{icon:ne,label:re,emailTeam:_e}=this.props;return t.createElement("span",{className:Y},ne&&t.createElement(I.A,{"data-qa":"token_email_with_team_icon_icon",size:"inherit",className:"c-token_content__icon margin_right_50",type:ne,inline:!0}),t.createElement("span",{className:"c-token_content__label margin_right_25","data-qa":"token_email_with_team_icon_content_label"},t.createElement(o.A,{text:re,inputIsEscaped:!0,emojiSize:c.lw.MEDIUM})),_e&&t.createElement("span",{className:"c-member__secondary_content"},t.createElement(M.A,{team:_e,"data-qa":"token_email_with_team_icon",size:h.Cg,className:"c-member__team_icon"})))}renderTeamToken(Y){const{teamId:ne,teamName:re}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement(M.A,{id:ne,size:26,className:"c-token__team_icon","data-qa":"token_team_icon"}),t.createElement("span",{className:(0,n.A)(Y,"c-token_content__label"),"data-qa":"token_team_name"},re))}renderTeamErrorToken(Y){const{teamId:ne,teamName:re}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement(M.A,{id:ne,size:26,className:"c-token__team_icon","data-qa":"token_team_icon_error"}),t.createElement("span",{className:(0,n.A)(Y,"c-token_content__label"),"data-qa":"token_team_name_error"},re))}renderChannelSectionToken(Y){const{channelSection:ne}=this.props;return ne?t.createElement("span",{className:(0,n.A)(Y,"c-token_content__label")},t.createElement(a.A,{channelSection:ne})):null}renderUnknownToken(Y){const{label:ne}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__unknown_icon_container"},t.createElement(g.A,{size:"18",name:"emoji-missing",variation:"filled","data-qa":"token_unknown_icon"})),t.createElement("span",{className:(0,n.A)(Y,"c-token_content__label"),"data-qa":"token_unknown"},ne))}renderUserGroupToken(Y){const{userGroupId:ne}=this.props;return t.createElement(y.A,{id:ne,showDescription:!1,className:(0,n.A)(Y,"c-token_content__label")})}render(){const{isDisabled:Y,isInvalid:ne,isError:re,memberId:_e,isMemberError:G,isTeamError:ge,isUnknown:oe,isLoading:me,isSelected:ue,size:ae,hoverText:he,tabIndex:ce,contentEditable:ee,className:J,onMouseDown:X,enableProfileHoverCard:F,customizeProfileHoverCardProps:L,isRestricted:K}=this.props,B=(0,n.A)("c-token",J,`c-token--${ae}`,{"c-token--selected":ue,"c-token--disabled":Y,"c-token--invalid":ne,"c-token--restricted":K,"c-token--error":re||G||ge,"c-token--unknown":oe,"c-token--loading":me}),Q=this.renderContent();let q=Q;he&&Q?q=t.createElement(A.Ay,{tip:he},Q):_e&&F&&(q=(0,O.yN)({...L||{},memberId:_e,children:Q}));const le=this.props.renderIcon(this.props);return t.createElement("span",{className:B,"data-id":this.props["data-id"],"data-qa":this.props["data-qa"],tabIndex:ce,contentEditable:ee,onMouseDown:X},t.createElement("span",{className:"c-token__content","data-qa":"token_content"},q),le)}},"Token");P.displayName="Token",P.defaultProps={"data-qa":"select_token",isDisabled:!1,isInvalid:!1,isError:!1,isUnknown:!1,isLoading:!1,isSelected:!1,size:T.hu.MEDIUM,renderIcon:s.A,forceRealName:!1,contentEditable:!1,channelHasNonUniqueName:!1};const z=u((x,Y)=>{const{entityId:ne,disableIdParsing:re}=Y;let _e;(0,C.A)(ne)&&!re&&(_e=ne);let G,ge;if(((0,S.Ay)(ne)||(0,S.JV)(ne))&&!re){const ce=(0,V._J)(x,ne);ce&&(G=ne,ge=(0,d.F1)(ce))}let oe;(0,E.A)(ne)&&!re&&(oe=(0,W.xe)(x,ne));let me;(0,b.A)(ne)&&!re&&(me=ne);const ue=(0,N.OL)(x,ne),ae=(0,N.MS)(x);let he;return(0,D.A)(ne)&&ue&&(he=(0,l.i)(ae,ue)),{channel:ue,memberId:_e,teamName:ge,teamId:G,userGroupId:me,channelSection:oe,channelHasNonUniqueName:he}},"mapStateToProps"),$=(0,f.nM)((0,k.N)(z,null)(P))},2312625946:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>b,PK:()=>T,Ws:()=>D,YU:()=>r.Y,n1:()=>f});var t=e(3134334389),n=e(862210999),s=e(4332857818),a=e(4505564445),c=e(1293324111),o=e(1641606663),i=e(7331519201),l=e(348699080),_=e(1523057168),d=e(5249175977),r=e(1926356522),m=e(8214116048),h=e(5751973043),v=e(8869734951),y=e(3821598679);function I(){return I=Object.assign||function(W){for(var N=1;N<arguments.length;N++){var V=arguments[N];for(var R in V)Object.prototype.hasOwnProperty.call(V,R)&&(W[R]=V[R])}return W},I.apply(this,arguments)}u(I,"_extends");const T=300,f=60,g=3,M=3;let A=u(class{track(N){this.instance&&N!==this.instance&&this.instance.hide(),this.instance=N}stopTracking(N){N===this.instance&&(this.instance=void 0)}hideActive(){this.instance&&(this.instance.hide(),this.instance=void 0)}},"TooltipManager");const O=new A;function D(){O.hideActive()}u(D,"hideVisibleTooltip");function E(W){const N=u(V=>((V==null?void 0:V.offsetWidth)||0)<((V==null?void 0:V.scrollWidth)||0)||((V==null?void 0:V.offsetHeight)||0)<((V==null?void 0:V.scrollHeight)||0),"retIsTruncated");if(W!=null&&W.querySelector){const V=W.querySelector(".c-truncate");if(V)return N(V)}return N(W)}u(E,"isElementTruncated");function C(W,N){return W.width.toFixed(2)===(N==null?void 0:N.width.toFixed(2))&&W.height.toFixed(2)===(N==null?void 0:N.height.toFixed(2))&&W.left.toFixed(2)===(N==null?void 0:N.left.toFixed(2))&&W.right.toFixed(2)===(N==null?void 0:N.right.toFixed(2))&&W.top.toFixed(2)===(N==null?void 0:N.top.toFixed(2))&&W.bottom.toFixed(2)===(N==null?void 0:N.bottom.toFixed(2))}u(C,"areBoundsEqual");const S=t.forwardRef((W,N)=>{let{children:V,position:R=m.yX.Top,delay:P=150,shouldFade:z=!0,tip:$,tipClassName:x,tipArrowOffset:Y,"data-qa":ne,status:re=r.Y.Info,offsetX:_e=0,offsetY:G=0,zIndex:ge="menu",shouldForceVisible:oe=!1,shouldOnlyShowWhenTruncated:me=!1,onShow:ue,onHide:ae,onClick:he,maxWidth:ce,hideFromScreenReader:ee=!1,automaticallyPositionTip:J=!0,tipAnchorRef:X,...F}=W;const L=t.Children.only(V),{windowRef:K}=(0,t.useContext)(o.M),B=(0,t.useRef)(),Q=(0,t.useRef)(null),q=(0,t.useRef)(),le=(0,t.useRef)(!1),[Te,Ie]=(0,t.useState)(!1),[De,pe]=(0,t.useState)(!1),[fe,Z]=(0,t.useState)(!1),[se,Ae]=(0,t.useState)(),Ce=(0,t.useContext)(_.A),Le=E(q.current),Ue=Le||!me,Pe=oe||Te||De,He=!!se&&Ue,Qe=(0,t.useMemo)(()=>(0,v.P)(Q,N),[N]),lt=(0,t.useCallback)((Jt,dn)=>J?{top:Jt,left:dn}:void 0,[J]),qe=(0,t.useMemo)(()=>`sk-tooltip-${(0,y.A)()}`,[]),ct=(0,t.useCallback)(()=>{Z(!0)},[]),[tt,it]=(0,i.i)(ct),Ge=(0,t.useMemo)(()=>({id:qe,hide:()=>{it(),le.current&&Z(!1),ae==null||ae()}}),[qe,it,ae]),We=(0,t.useCallback)(()=>{it(),O.stopTracking(Ge)},[Ge,it]),xe=(0,t.useCallback)(()=>{oe||Ce?Z(!0):tt(P),ue==null||ue({isTruncated:Le}),O.track(Ge)},[oe,Ce,ue,Le,Ge,tt,P]),ze=(0,t.useCallback)(()=>{We(),fe&&(Z(!1),ae==null||ae())},[We,fe,ae]),mt=(0,t.useCallback)(Jt=>{L.props.onKeyDown&&L.props.onKeyDown(Jt),Jt.which===a._f&&fe&&Ce&&(Jt.nativeEvent.stopImmediatePropagation(),Jt.stopPropagation(),Z(!1))},[Z,fe,Ce,L.props]),pt=(0,t.useCallback)(Jt=>{L.props.onMouseEnter&&L.props.onMouseEnter(Jt),Ie(!0),fe||(B.current=Jt)},[L.props,fe]),It=(0,t.useCallback)(Jt=>{L.props.onFocus&&L.props.onFocus(Jt),Ce&&pe(!0)},[L.props,Ce]),bt=(0,t.useCallback)(Jt=>{L.props.onMouseLeave&&L.props.onMouseLeave(Jt),Ie(!1),B.current=void 0},[L.props]),gt=(0,t.useCallback)(Jt=>{L.props.onBlur&&L.props.onBlur(Jt),pe(!1)},[L.props]);(0,t.useEffect)(u(function(){q.current||(q.current=(0,s.findDOMNode)(Q.current))},"syncChildDOMNodeRef")),(0,t.useEffect)(()=>{const Jt=K.deref(),dn=u(sn=>{sn.which===a._f&&ze()},"hoverEscHide");if(Jt)return Te?(Jt.addEventListener("keydown",dn),()=>{Jt.removeEventListener("keydown",dn)}):()=>{Jt.removeEventListener("keydown",dn)}},[Te,K,ze]),(0,t.useEffect)(()=>(le.current=!0,()=>{le.current=!1}),[]),(0,l.A)(u(function(){let dn=q.current;if(X!=null&&X.current&&(dn=(0,s.findDOMNode)(X.current)),Pe&&dn){const sn=se,Xt=dn.getClientRects();let xt=Xt[0];if(B.current){const Ot=B.current,kt=Array.from(Xt).find(be=>Ot.clientY>=be.top&&Ot.clientY<=be.bottom&&Ot.clientX>=be.left&&Ot.clientX<=be.right);kt&&(xt=kt)}if(!xt)return;const en=K.deref(),un=en?en.scrollX||en.pageXOffset:0,yn=en?en.scrollY||en.pageYOffset:0,ut={height:xt.height,width:xt.width,left:xt.left+un,right:xt.right+un,top:xt.top+yn,bottom:xt.bottom+yn};C(ut,sn)||Ae(ut)}},"maybeCalculateContentBounds"),[Pe,X]),(0,l.A)(u(function(){He&&Pe?xe():ze()},"showOrHideTooltip"),[He,Pe]);const ht=L.props["aria-label"],Zt=(0,t.useMemo)(()=>ht===$||ee?h.t0:{"aria-describedby":fe?qe:void 0},[ht,ee,fe,$,qe]),rn=(0,t.useMemo)(()=>t.cloneElement(L,{...F,...L.props,...Zt,onClick:he||L.props.onClick,onFocus:It,onBlur:gt,onKeyDown:mt,onMouseEnter:pt,onMouseLeave:bt,"data-sk":"tooltip_parent"}),[Zt,L,gt,he,It,mt,pt,bt,F]),zt=(0,t.useMemo)(()=>{if(Y)return Y;if(se)return se.width/2},[se,Y]),In=(0,t.useMemo)(()=>({position:R,arrowOffset:zt,status:re,className:x,"data-qa":ne,maxWidth:ce}),[ne,ce,R,re,x,zt]),cn=(0,t.useMemo)(()=>fe?t.createElement(d.AM,{isOpen:fe,position:R,targetBounds:se,overlayClassName:"c-popover c-popover--no-pointer",offsetX:_e,offsetY:G,allowanceX:g,allowanceY:M,key:"tooltip-popover",zIndex:ge,shouldFocusAfterRender:!1,shouldFade:z,ariaHideApp:!1,tryOppositePosition:!0,id:qe,ariaRole:"tooltip",dataAttributes:{qa:"tooltip-popover"},disableOverlaysContextProvider:!0},Jt=>{let{position:dn,top:sn,left:Xt,targetBounds:xt}=Jt;const en=(0,n.A)($)?$({hasKeyboardFocus:Ce}):$;return t.createElement(r.A,I({},In,{position:dn,tipBounds:lt(sn,Xt),targetBounds:xt}),en)}):null,[fe,se,R,_e,G,ge,z,$,Ce,In,lt,qe]);return t.createElement(t.Fragment,null,t.createElement(c.V,{ref:Qe},rn),cn)});S.displayName="Tooltip";const b=S;Object.defineProperty({isElementTruncated:E,areBoundsEqual:C},"isElementTruncated",{get:()=>E,set:W=>{E=W}})},5184226701:(j,p,e)=>{"use strict";e.d(p,{BD:()=>t,Cz:()=>a,LH:()=>c,LX:()=>o,T0:()=>n,UC:()=>s});const t={SharedChannel:"shared_channel",SingleChannelGuest:"ultra_restricted",MultiChannelGuest:"restricted",Member:"regular",ExternalSharedWorkspaceMember:"external_shared_workspace_member"},n={User:"user_invite",UserGroup:"user_group_invite",Email:"email_invite",Member:"member"},s={OpenConfirmationScreen:"add_to_channel_open_confirmation_screen"},a={OpenInviteTypeExternal:"comprehensible_invites_open_invite_type_external",InviteTypeExternalDefaultActionDisallowed:"comprehensible_invites_invite_type_external_default_action_disallowed",OpenSharedChannelNoteExternal:"comprehensible_invites_open_shared_channel_note_external",OpenSharedChannelExternalLimitedExternal:"comprehensible_invites_open_shared_channel_external_limited_external",OpenInviteTypeInternal:"comprehensible_invites_open_invite_type_internal",InviteTypeInternalDefaultActionDisallowed:"comprehensible_invites_invite_type_internal_default_action_disallowed",OpenSharedChannelNoteInternal:"comprehensible_invites_open_shared_channel_note_internal",OpenSharedChannelExternalLimitedInternal:"comprehensible_invites_open_shared_channel_external_limited_internal"};class c{constructor(l){this.ok=l.ok,this.invitee=l.email,this.inviteeType=n.Email,this.accessType=l.inviteType||t.Member,this.error=l.error}}u(c,"InviteResult");function o(i){return i===t.Member||i===t.MultiChannelGuest||i===t.SingleChannelGuest}u(o,"isBaseInviteType")},8178126019:(j,p,e)=>{"use strict";e.d(p,{Ao:()=>o.k,FQ:()=>c.q,IU:()=>l,Jg:()=>s.G,RW:()=>n.jB,YB:()=>d,fe:()=>t.T,iV:()=>_,mF:()=>a.I,on:()=>i,qU:()=>n.Sv});var t=e(1614054140),n=e(4349526263),s=e(5216556985),a=e(8485081141),c=e(6515569951),o=e(2164700852);const i={Generic:"generic",InternalInviteNotMember:"internal_not_member",InternalInviteNotMemberCanRequest:"internal_not_member_can_request",InternalInviteNoAccess:"internal_no_access",InternalInviteWasPreviouslyConnected:"internal_was_previously_connected",InternalInviteWasPreviouslyConnectedButNotMember:"internal_was_previously_connected_but_not_member",InvalidRecipientTeam:"invalid_recipient_team"};function l(r){return!!r&&!!r.channel}u(l,"isSharedChannelInvite");function _(r){return!!r&&!l(r)&&!d(r)}u(_,"isDirectMessageInvite");function d(r){return!!r&&!!r.shared_workspace}u(d,"isSharedWorkspaceInvite")},266169032:(j,p,e)=>{"use strict";e.d(p,{M:()=>t});const t={shareChannelCreate:"share_channel_create",channelInviteModal:"channel_invite_modal",scdmFreeStartTrialBanner:"scdm_free_start_trial_banner",messageLimitTrialOfferModal:"message_limit_trial_offer_modal",huddlesTrialEntryPointModal:"huddles_trial_entry_point_modal",slackConnectTrialEntryPointModal:"slack_connect_trial_entry_point_modal",canvasTrialOfferModal:"canvas_trial_offer_modal",workflowBuilderFreemiumTrialOfferModal:"unlimited_workflows_trial_offer_modal",noCommitment:"no_commitment",autoCharge:"auto_charge"}},1305633231:(j,p,e)=>{"use strict";e.d(p,{A:()=>X});var t=e(6696292586),n=e(498506970),s=e(1835177371),a=e(8276911661),c=e(9101533895),o=e(8847766420),i=e(3037015781),l=e(9289081806),_=e(6495946979),d=e(9262712126),r=e(1407713935),m=e(5577180258),h=e(4282439381),v=e(6188550180),y=e(8389327410),I=e(8193414630),T=e(2756015265),f=e(972463850),g=e(4695291896),M=e(6345573615),A=e(8525228540);function O(F){if(F<=0)return"";let L="",K=F;for(;K>0;)K-=1,L=String.fromCharCode("a".charCodeAt(0)+K%26)+L,K=Math.floor(K/26);return L}u(O,"convertNumberToLetterIncrement");const D=["","c","cc","ccc","cd","d","dc","dcc","dccc","cm","","x","xx","xxx","xl","l","lx","lxx","lxxx","xc","","i","ii","iii","iv","v","vi","vii","viii","ix"];function E(F){if(F<=0)return"";const L=F.toString().split("");let K="";for(let q=2;q>=0;q--){const le=parseInt(L.pop()||"0",10);K=(D[le+q*10]||"")+K}const B=L.join("")||"0",Q=parseInt(B,10)+1;return Array(Q).join("m")+K}u(E,"convertNumberToRomanNumeral");var C=e(735940183),S=e(3270010894),b=e(8983164438),k=e(6795568989),W=e(3695531806),N=e(2188787324),V=e(937317117),R=e(3574134525);const P=new C.Ay("channel_token"),z=new C.Ay("emoji"),$=u((F,L)=>L.text||"","textToText"),x=u((F,L)=>`@${L.range}`,"broadcastToText"),Y=u((F,L)=>L.value||"","colorToText"),ne=u((F,L,K)=>{let{linkFormat:B}=K;const{text:Q="",url:q=""}=L;if(!Q&&!q)return"";if(!Q)return q;switch(B){case"default":return Q;case"prefer_url":return q;case"bracket":return`[ ${Q}: ${q} ]`;default:(0,I.Kh)(B)}},"linkToText"),re=u((F,L)=>{const K=(0,a.nv)(F,L.user_id);return`@${(0,d.Gt)(K)||L.user_id}`},"userToText"),_e=u((F,L)=>{const K=(0,s.lJ)(F,L.usergroup_id);if(K===!1)return(0,g.A)({userGroupHandle:"",isUnknown:!0,isNonExistent:!0});const B=(0,i.lv)(K);var Q;return(0,g.A)({userGroupHandle:B?"":(Q=K.handle)!==null&&Q!==void 0?Q:"",isUnknown:(0,i.mX)(K),isNonExistent:(0,i.lv)(K)})},"userGroupToText"),G=u((F,L)=>{const K=(0,c.OL)(F,L.channel_id);var B;const Q=(B=(0,l.SB)(F,K,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}))!==null&&B!==void 0?B:"",q=(0,i.mX)(K),le=(0,i.lv)(K),Te=(0,r.Zp)(K),Ie=(0,_.b)(K);return le||Te&&!Ie?`#${P.t("private-channel")}`:(0,M.A)({channelName:Q,isUnknown:q,isNonExistent:le})},"channelToText"),ge=u((F,L,K)=>{let{convertEmoji:B}=K;const Q=(0,v.A)(L,{state:F,localize:!1}),q=(0,A.bR)({state:F,locale:(0,C.Yp)(),name:Q});return B==="phrase"?(0,T.A)(q||"",{state:F})||"":B==="unicode"&&(L!=null&&L.unicode)&&(0,k.d)(L.unicode)?(0,W.z)({codePointLikeString:L.unicode})||"":B==="unicode"&&!(L!=null&&L.unicode)?(0,f.A)(F,{messageText:Q,teamId:(0,o.ZT)(F)}):q??""},"emojiToText"),oe=u((F,L)=>{const K=(0,V.Lp)(F,L.file_id);return(0,N.SB)(K)||L.file_id},"fileToText"),me=u((F,L,K)=>{let{convertEmoji:B}=K;const Q=(0,v.A)({...L,type:y.Lv.EMOJI},{state:F,localize:!1}),q=(0,A.bR)({state:F,locale:(0,C.Yp)(),name:Q});if(B==="phrase"){var le;return(le=(0,T.U)(q||"",L.size||0,{state:F}))!==null&&le!==void 0?le:""}var Te;const Ie=(Te=B==="unicode"?(0,f.A)(F,{messageText:Q,teamId:(0,o.ZT)(F)}):q)!==null&&Te!==void 0?Te:"";return(0,h.x)(F)?z.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:Ie,size:L.size}):`${L.size} ${Ie} emojis`},"emojiGroupToText"),ue=u((F,L)=>!L.timestamp&&L.fallback?L.fallback:(0,S.Yq)(L.timestamp,L.format,{...L.fallback&&{fallbackString:L.fallback}}),"dateToText"),ae=u((F,L)=>{const K=F.workflowBuilder.workflowEditor.variables.list,B=(0,R.x)(K,L.id);return B?`@${B.label}`:L.id},"workflowTokenToText"),he={[y.Lv.TEXT]:$,[y.Lv.USER]:re,[y.Lv.USERGROUP]:_e,[y.Lv.CHANNEL]:G,[y.Lv.BROADCAST]:x,[y.Lv.DATE]:ue,[y.Lv.COLOR]:Y,[y.Lv.LINK]:ne,[y.Lv.EMOJI]:ge,[y.Lv.FILE]:oe,[y.Lv.CANVAS]:oe,[y.Lv._EMOJI_GROUP]:me,[y.Lv.WORKFLOWTOKEN]:ae};function ce(F){let{indent:L}=F;return!(0,t.A)(L)||L%3===0?"\u2022":L%3===1?"\u25E6":L%3===2?"\u25A0":"\u2022"}u(ce,"getUnorderedListCharacter");function ee(F){let{indent:L,incr:K}=F;return!(0,t.A)(L)||L%3===0?K:L%3===1?O(K):L%3===2?E(K):K}u(ee,"getOrderedListCharacter");function J(F,L){return(0,h.x)(F)?(0,m.A)((0,n.A)(L)):L}u(J,"maybeGroupEmojies");function X(F,L){let{convertEmoji:K="text",linkFormat:B="default"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!L||!L.length)return"";const Q=u(Te=>{if(!Te||!Te.elements)return"";const Ie=[];return Te.elements.forEach(De=>{if(!De||!De.type)return;const pe=he[De.type];var fe;const Z=(fe=pe==null?void 0:pe(F,De,{convertEmoji:K,linkFormat:B}))!==null&&fe!==void 0?fe:"";Ie.push(Z)}),Ie.join("")},"convertSection"),q=[];return J(F,L[0].elements).forEach(Te=>{if(!(!Te||!Te.type))if((0,b.C)(Te)){const Ie=Te.offset||0,De=Te.indent||0;let pe=1+Ie;Te.elements.forEach(fe=>{const Z=Q(fe);if(Te.style==="ordered"){const se=ee({indent:De,incr:pe});q.push(`${se}. ${Z}.`),pe+=1}else{const se=ce({indent:De});q.push(`${se} ${Z}.`)}})}else q.push(Q(Te))}),q.join(`
`)}u(X,"convertRichTextToPlainText")},6188550180:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(8389327410),n=e(8525228540),s=e(735940183),a=e(3829348308),c=e(6795568989);function o(i,l){let{state:_,localize:d}=l;if(!i||i.type!==t.Lv.EMOJI)return"";const r=i.skinTone||i.skin_tone,m=i.unicode;let h;return!m&&r?h=`:${i.name}::skin-tone-${r}:`:!r&&!m?h=`:${i.name}:`:m&&(0,c.d)(m)&&(h=`:${(0,a.qJ)(_,m)}:`),d?(0,n.bR)({state:_,locale:(0,s.Yp)(),name:h})||"":h}u(o,"getEmojiElementAsText")},411655882:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(362134992),n=e(9671714094),s=e(8933111773);function a(){return(0,t.A)(Object.entries(n.N).filter(c=>{let[o,i]=c;return i.is_enabled_by_default}).map(c=>{let[o,i]=c;return(0,s.A)(o)}))}u(a,"getAllBroadcastKeywords")},2229186:(j,p,e)=>{"use strict";e.d(p,{A:()=>y});var t=e(362134992),n=e(9101533895),s=e(6113051341),a=e(1407713935),c=e(2350349607),o=e(9289081806),i=e(641827819),l=e(324756633),_=e(8933111773),d=e(2233365467),r=e(1190344069),m=e(9548888903),h=e(9280052135),v=e(3339229351);function y(I,T){const f=(0,n.OL)(I,T),g=(0,h.l)(I);if(!f)return[];const M=[];if((0,i.W)(I,T)&&M.push((0,_.A)("BKeveryone")),((0,c.V)(f)||(0,a.yz)(f))&&(!(0,s.N)(f)||(0,i.W)(I,T))&&(0,l.S)(I,T)&&(M.push((0,_.A)("BKchannel")),M.push((0,_.A)("BKhere"))),(0,r.hm)(I)&&(0,a.U_)(f))switch((0,d.dM)(f)){case m.hM.Account:M.push((0,_.A)("BKsf:accountteam",(0,o.SB)(I,f),!0));break;case m.hM.Opportunity:M.push((0,_.A)("BKsf:dealteam",(0,o.SB)(I,f),!0));break;default:break}if(g){const A=(0,n.Pu)(I,v.Q$);(f==null?void 0:f.id)===(A==null?void 0:A.id)&&M.push((0,_.A)("BKassistant:einstein",null,!1,!0))}return(0,t.A)(M)}u(y,"getBroadcastKeywordsForUser")},755982243:(j,p,e)=>{"use strict";e.d(p,{w:()=>s});var t=e(3193155968);function n(a){var c;return(c=a.ownerDocument)===null||c===void 0?void 0:c.defaultView}u(n,"getWindowForElement");function s(a){return!t.TQ.includes(a)}u(s,"shouldViewNavigateInContext")},1236965385:(j,p,e)=>{"use strict";e.d(p,{$A:()=>o,ce:()=>c,hO:()=>s});var t=e(3134334389),n=e(6244014364);const s=u(i=>({action:n.UiAction.IMPRESSION,uiPage:window.location.href,...i}),"getAuthImpressionTrackParams"),a=u(i=>({action:n.UiAction.CLICK,uiPage:window.location.href,...i}),"getAuthClickTrackParams"),c=u(i=>({uiPage:window.location.href,...i}),"getAuthTrackParams");function o(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const l=(0,t.useRef)(null),_=(0,t.useCallback)(m=>h=>{if(l.current={track:h},i){var v;l==null||(v=l.current)===null||v===void 0||v.track(s(m))}},[l,i]),d=(0,t.useCallback)(m=>()=>{var h;l==null||(h=l.current)===null||h===void 0||h.track(a(m))},[l]),r=(0,t.useCallback)(m=>()=>{var h;l==null||(h=l.current)===null||h===void 0||h.track(c(m))},[l]);return{trackClog:l,trackClogAuthRef:_,clogAuthLoginClick:d,clogAuthLoginAction:r}}u(o,"useAuthClogger")},3044566667:(j,p,e)=>{"use strict";e.d(p,{gy:()=>n,tN:()=>s,zQ:()=>t});const t={EMPTY:"empty",INVALID:"invalid",INVALID_DOMAIN:"invalid_domain",TOO_MANY:"too_many"},n="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",s={EMAIL:new RegExp(`^${n}$`,"i"),CONTAINS_EMAIL:new RegExp(`${n}`,"i"),DOMAIN:/^@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i}},2756015265:(j,p,e)=>{"use strict";e.d(p,{A:()=>_,U:()=>l});var t=e(735940183),n=e(5799716058),s=e(8525228540),a=e(9907843289),c=e(4282439381);const o=new t.Ay("emoji");function i(d,r){const m=(0,t.Yp)();return(0,s.WX)({state:d,locale:m,text:r})}u(i,"getLocalizedEmojiName");function l(d,r,m){let{state:h}=m;const v=i(h,d),y=(0,c.x)(h),I=v&&(0,n.Y)(v,r,y);return v?(0,a.DU)()?I:` ${I} `:y?o.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:d,size:r}):`${r} ${d} emojis`}u(l,"convertEmojiGroupNameToPhrase");function _(d,r){let{state:m}=r;const h=i(m,d),v=h&&(0,n.A)(h);return h?(0,a.DU)()?v:` ${v} `:d}u(_,"convertEmojiNameToPhrase")},6818330210:(j,p,e)=>{"use strict";e.d(p,{H:()=>s});var t=e(9113979368),n=e(9936232041);function s(a,c){if(!c||(0,t.A)(c))return{name:a};const o=(0,n.A)(a);if(!o)return{name:a};const{name:i,skinTone:l}=o,_=c[i];if(!_||(0,t.A)(_))return{name:a};const d=_.display_alias,r=d??i,m=l?`:${r}::skin-tone-${l}:`:`:${r}:`,h=_.display_url;return{name:m,url:h}}u(s,"getEmojiDisplayInfoFromMap")},2354051480:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(3339229351);let n;const s=u(()=>{if(n)return n;const a=Object.keys(t.dq).map(c=>c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));return n=new RegExp(`(^|\\s)(${a.join("|")})(?=$|[\\s|\\?\\.,!])`,"g"),n},"__WEBPACK_DEFAULT_EXPORT__")},7854655276:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(3078252698),n=e(735940183);const s=new n.Ay("emoji");function a(c){const o=(0,t.A)(c)?c:c.toString(),i={1:()=>s.t("No skin tone"),2:()=>s.t("light skin tone"),3:()=>s.t("medium-light skin tone"),4:()=>s.t("medium skin tone"),5:()=>s.t("medium-dark skin tone"),6:()=>s.t("dark skin tone")},l={"2-3":()=>s.t("left light skin tone and right medium-light skin tone"),"2-4":()=>s.t("left light skin tone and right medium skin tone"),"2-5":()=>s.t("left light skin tone and right medium-dark skin tone"),"2-6":()=>s.t("left light skin tone and right dark skin tone"),"3-2":()=>s.t("left medium-light skin tone and right light skin tone"),"3-4":()=>s.t("left medium-light skin tone and right medium skin tone"),"3-5":()=>s.t("left medium-light skin tone and right medium-dark skin tone"),"3-6":()=>s.t("left medium-light skin tone and right dark skin tone"),"4-2":()=>s.t("left medium skin tone and right light skin tone"),"4-3":()=>s.t("left medium skin tone and right medium-light skin tone"),"4-5":()=>s.t("left medium skin tone and right medium-dark skin tone"),"4-6":()=>s.t("left medium skin tone and right dark skin tone"),"5-2":()=>s.t("left medium-dark skin tone and right light skin tone"),"5-3":()=>s.t("left medium-dark skin tone and right medium-light skin tone"),"5-4":()=>s.t("left medium-dark skin tone and right medium skin tone"),"5-6":()=>s.t("left medium-dark skin tone and right dark skin tone"),"6-2":()=>s.t("left dark skin tone and right light skin tone"),"6-3":()=>s.t("left dark skin tone and right medium-light skin tone"),"6-4":()=>s.t("left dark skin tone and right medium skin tone"),"6-5":()=>s.t("left dark skin tone and right medium-dark skin tone")},_=l[o]?l[o]():null;return _||i[o]&&i[o]()}u(a,"__WEBPACK_DEFAULT_EXPORT__")},5799716058:(j,p,e)=>{"use strict";e.d(p,{A:()=>i,Y:()=>o});var t=e(735940183),n=e(9936232041),s=e(7854655276);const a=/_|-/g,c=new t.Ay("emoji"),o=u(function(l,_){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!l||!_)return null;const{name:r,skinTone:m}=(0,n.A)(l)||{};if(!r)return d?c.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:l,size:_}):`${_} ${l} emojis`;const h=r.replace(a," "),v=d?c.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:h,size:_}):`${_} ${h} emojis`;if(!m)return v;const y=(0,s.A)(m);return y===""?v:d?c.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}} with {skinToneDescription}",{emojiName:h,size:_,skinToneDescription:y}):`${_} ${h} emojis with ${y}`},"makePhraseForEmojiGroup");function i(l){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!l)return l;const{name:d,skinTone:r}=(0,n.A)(l)||{};if(!d)return l;const m=d.replace(a," "),h=c.t("{emojiPhrase} emoji",{emojiPhrase:m});if(!r)return h===""?m:h;const v=(0,s.A)(r);return v===""?h===""?m:h:_?c.t("React with {emojiPhrase} emoji {skinToneDescription}",{emojiPhrase:m,skinToneDescription:v}):c.t("{emojiPhrase} emoji with {skinToneDescription}",{emojiPhrase:m,skinToneDescription:v})}u(i,"__WEBPACK_DEFAULT_EXPORT__")},3259512346:(j,p,e)=>{"use strict";e.d(p,{s:()=>s});var t=e(7823691483),n=e(571104883);function s(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.process&&window.process.versions&&window.process.versions.electron,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window.navigator.userAgent;if(!(0,n.y3)(o)||!c)return!1;const i=(0,t.P)(a),l=(0,t.P)(c);return(0,t.Z)(l,i)>=0}u(s,"isElectronAndAtLeastVersion")},4875732686:(j,p,e)=>{"use strict";e.d(p,{y:()=>s});var t=e(3924251130),n=e(2368561198);const s=u(a=>(0,t.YM)(a)||(0,n.i)(a),"isExternalWorkspaceInvitesEnabled")},665229739:(j,p,e)=>{"use strict";e.d(p,{U:()=>s});var t=e(4761125736);const n="files_explorer_prototype";function s(a){return(0,t._Z)(a,n)==="on"}u(s,"isFilesExplorerPrototypeEnabled")},6212362990:(j,p,e)=>{"use strict";e.d(p,{A:()=>n,h:()=>s});const t=/^p?(\d{10})\.?(\d{6})$/;function n(a){return!a||!t.test(a)?null:a.replace(t,"$1.$2")}u(n,"formatMessageTimestamp");function s(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Date.now();if(!a)return null;const c=String((+a/1e3).toFixed(6));return n(c)}u(s,"getFormattedMessageTimestamp")},1033764764:(j,p,e)=>{"use strict";e.d(p,{UK:()=>l,Z$:()=>a,hZ:()=>o});const t=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],n=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],s=u(function(d,r,m){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;if(d===0)return 0;if(r===m)return parseFloat(d.toFixed(h));const y=v?1024:1e3,I=v?t:n,T=I.findIndex(g=>g.toLowerCase()===r.toLowerCase()),f=I.findIndex(g=>g.toLowerCase()===m.toLowerCase());if(T===-1)throw new Error(`Unknown currentType '${r}' passed to convertToSize`);if(f===-1)throw new Error(`Unknown desiredType '${m}' passed to convertToSize`);return T<f?parseFloat((d/y**(f-T)).toFixed(h)):parseFloat((d*y**(T-f)).toFixed(h))},"convertToSize"),a=u(function(d){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"B",m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(d===0)return{size:0,type:"B"};const v=h?1024:1e3,y=h?t:n;let I=Math.log(d)/Math.log(v);I<1&&(I=-Math.floor(Math.log(Math.abs(I))/Math.log(10)+1));const T=y.findIndex(g=>g.toLowerCase()===r.toLowerCase()),f=Math.max(Math.min(T+Math.floor(I),y.length-1),0);if(T===-1)throw new Error(`Unknown currentType '${r}' passed to convertToSize`);return{size:s(d,r,y[f],m,h),type:y[f]}},"convertToOptimumSize"),c=u(function(d){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"B","KB",r,!1)},"convertBytesToKilobytes"),o=u(function(d){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"B","MB",r,!1)},"convertBytesToMegabytes"),i=u(function(d){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"B","GB",r,!1)},"convertBytesToGigabytes"),l=u(function(d){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"KB","MB",r,!1)},"convertKilobytesToMegabytes"),_=u(function(d){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"KB","GB",r,!1)},"convertKilobytesToGigabytes")},6333950786:(j,p,e)=>{"use strict";e.d(p,{A:()=>R});var t=e(6249041335),n=e(5342516244),s=e(1842363787),a=e(8847766420),c=e(6533394955),o=e(2047021170),i=e(6866036454),l=e(1317368584),_=e(3829348308),d=e(735940183),r=e(9846149684),m=e(8207536819),h=e(4862221402),v=e(8040098042),y=e(2414816894),I=e(1707481146),T=e(6106767915);function f(P,z,$){const x=[];return{text:P.replace(r.Y,(ne,re,_e)=>{let G;if((0,y.A)(re)?G=`<!${(0,T.A)(re)}>`:(0,I.A)(re)?G=z?(0,m.A)(_e):_e:(0,h.A)(re)?G=`<!subteam^${re}|${_e}>`:(0,v.A)(re)?G=$?`<#${re}|${_e.substr(1)}>`:void 0:G=`<@${re}>`,!G)return ne;const oe=`mention-${x.length+1}-${Date.now()}`;return x.push({mention:G,placeholder:oe}),oe}),mentions:x}}u(f,"replaceFormatMentions");const g=/(^|\n)>(?![\W_](?:<|>|[|/\\[\]{}()Dpb](?=\s|$)))(([^\n]*)(\n>[^\n]*)*)/g;function M(P){const z=[];let $=0;return{text:P.replace(g,Y=>{$+=1;const ne=`quoted-text-placeholder-${Date.now()}-${$}`;return z.push({match:Y,placeholder:ne}),ne}),quotedSections:z}}u(M,"replaceQuotedText");var A=e(2354051480),O=e(3339229351);const D=/[-[\]{}()*+?.,\\^$|#\s]/g,E=/\n?(6\)|7\))/,C=u(P=>{let z=0;const $=[];let x=P.replace((0,A.A)(),(Y,ne,re,_e)=>{const G=z;z=_e+Y.length;const ge=re.indexOf("(")!==-1,oe=re.indexOf(")")!==-1;if((ge||oe)&&$.indexOf(re)===-1&&$.push(re),oe&&!ge){const me=P.substring(G,_e);if(me.indexOf("(")!==-1&&me.indexOf(")")===-1)return Y}if(Y===`
8)`){const me=P.substring(0,_e);if(E.test(me))return Y}return O.dq[re]?`${ne}:${O.dq[re]}:`:Y});if($.length){const Y=$.map(re=>re.replace(D,"\\$&")),ne=new RegExp(`(\\(.+)(${Y.join("|")})(.+\\))`,"g");x=x.replace(ne,(re,_e,G,ge)=>O.dq[G]?`${_e}:${O.dq[G]}:${ge}`:re)}return x},"replace_emoticons_with_colons");var S=e(8525228540),b=e(9421999304),k=e(4797500022),W=e(9599231336);const N=/(^|\s|\{|\[|\(|&gt;|&lt;|\*|_|\/|"|\u201C|\u2018|')#([^~`!@#$%^&*()+=[\]{}\\|;:'"\u201D\u2019,.<>/?\s]+)/g,V=/(^|\S)( +)(\n|$)/gm;function R(P,z){let{isInternalMessage:$}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!P||!z)return"";const x=!$,Y=(0,l.A)(P),ne=(0,o.ty)(P,"convert_emoticons"),re=(0,i.A)(P),_e=(0,W.P)(P),G=!0;let ge=z,oe=[];ge=(0,n.A)(ge),ge=(0,s.kW)(oe,ge,{replace_pre:!0,replace_code:!0});const me=f(ge,x,G);if(ge=me.text,ge=ge.replace(V,"$1$3"),ne&&!_e){const ae=M(ge);ge=ae.text,ge=C(ge),ae.quotedSections.forEach(he=>{ge=ge.replace(he.placeholder,()=>he.match)})}if(x&&(ge=(0,s.wx)(ge,"CLEAN",{jumbomoji:Y,allow_intra_word_formatting:!0})),me.mentions.forEach(ae=>{ge=ge.replace(ae.placeholder,()=>ae.mention)}),!d.EZ){const ae=(0,a.ZT)(P);ge=(0,c.dispatchForTeamId)(ae,(0,S.Z_)({text:ge,locale:(0,b.JK)()}))}const ue=(0,_.CK)(P);return oe=oe.map(ae=>{const he={...ae},ce=(0,r.A)(he.str,{highlightWords:re,shouldRenderEmojiAsText:_e,emojiNames:ue,locale:(0,d.Yp)(),useChannelTagging:G});return he.str=(0,k.A)(ce),x&&(he.str=(0,s.wx)(he.str,"CLEAN",{jumbomoji:Y,allow_intra_word_formatting:!0})),he}),ge=(0,s.Ki)(oe,ge),(0,t.A)(ge)}u(R,"clean_message_text_with_state")},972463850:(j,p,e)=>{"use strict";e.d(p,{A:()=>o});var t=e(3297051565),n=e.n(t),s=e(647040695),a=e(3829348308);const c=u(function(i){let{messageText:l,teamId:_}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!l||!_)return"";const d=(0,s.A)();return l.replace(d,r=>{const m=(0,a.Zc)(i,{text:r,teamId:_});return m||r})},"replaceTextEmojiWithNative"),o=c;c.propTypes={messageText:n().string,teamId:n().string}},5342516244:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});const t=u(n=>n?n.replace(/\u00A0/g," ").replace(/\u000D/g,`
`).replace(/\u000A/g,`
`):"","__WEBPACK_DEFAULT_EXPORT__")},3802883493:(j,p,e)=>{"use strict";e.d(p,{TU:()=>s});const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=10;function s(d,r){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;if(d!==null&&_(d,m,h),r!==null&&_(r,m,h),d!==null&&r!==null&&d>=r)throw new Error(`${d} >= ${r}`);if(d===null){if(r===null){const A=5*10**(h-1);return i(A,h)}const M=o(r,h);return M.toString()<r&&r.slice(h+1)!==""?i(M,h):i(M-1,h)}if(r===null){const M=o(d,h);return i(M+1,h)}const v=o(d,h),y=o(r,h),I=d.slice(h+1),T=r.slice(h+1);if(v===y){const M=c(I,T,m);return`${i(v,h)}.${M}`}const f=v+1;if(f<y)return i(f,h);const g=c(I,null,m);return`${i(v,h)}.${g}`}u(s,"generateKeyBetween");function a(d,r,m){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:n;if(m===0)return[];if(m===1)return[s(d,r,h,v)];if(r===null){let T=s(d,r,h,v);const f=[T];for(let g=0;g<m-1;g++)T=s(T,r,h,v),f.push(T);return f}if(d===null){let T=s(d,r,h,v);const f=[T];for(let g=0;g<m-1;g++)T=s(d,T,h,v),f.push(T);return f.reverse(),f}const y=Math.floor(m/2),I=s(d,r,h,v);return[...a(d,I,y,h,v),I,...a(I,r,m-y-1,h,v)]}u(a,"generateNKeysBetween");function c(d,r,m){const h=m[0];if(r!==null&&d>=r)throw new Error(`${d} >= ${r}`);if(d.slice(-1)===h||r&&r.slice(-1)===h)throw new Error("trailing zero");if(r){let I=0;for(;(d[I]||h)===r[I];)I+=1;if(I>0)return r.slice(0,I)+c(d.slice(I),r.slice(I),m)}const v=d?m.indexOf(d[0]):0,y=r!==null?m.indexOf(r[0]):m.length;if(y-v>1){const I=Math.round(.5*(v+y));return m[I]}return r&&r.length>1?r.slice(0,1):m[v]+c(d.slice(1),null,m)}u(c,"midpoint");function o(d,r){const m=d.slice(0,r);return Number(m)}u(o,"getIntegerPart");function i(d,r){if(d>=10**r)throw new Error(`Integer overflow at ${d} for fixed length ${r}`);if(d<0)throw new Error(`Integer underflow at ${d} for fixed length ${r}`);return d.toString().padStart(r,"0")}u(i,"formatInteger");function l(d,r){const m=d.length;if(m<r)throw new Error("Invalid integer portion, length too short");if(m===r){const h=d.indexOf(".");if(h>=0)throw new Error(`Unexpected . at position ${h} in string of exact length ${r}`);const v=Number(d);if(isNaN(v))throw new Error(`Invalid integer portion - not a valid integer ${d}`)}else if(d[r]!==".")throw new Error(`Expected . after int_fixed length ${r} and got ${d[r]}`)}u(l,"validateIntegerLength");function _(d,r,m){if(l(d,m),m!==d.length&&d.slice(m).endsWith(r[0]))throw new Error(`Fractional portion must not end with ${r[0]}`)}u(_,"validateOrderKey")},3256698098:(j,p,e)=>{"use strict";e.d(p,{_i:()=>a});function t(o,i,l,_){let d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;const r=[_.x-i.x,_.y-i.y],m=[l.x-i.x,l.y-i.y],h=[o.x-i.x,o.y-i.y],v=r[0]*r[0]+r[1]*r[1],y=r[0]*m[0]+r[1]*m[1],I=r[0]*h[0]+r[1]*h[1],T=m[0]*m[0]+m[1]*m[1],f=m[0]*h[0]+m[1]*h[1],g=1/(v*T-y*y),M=(T*I-y*f)*g,A=(v*f-y*I)*g;return M>=-d&&A>=-d&&M+A<1+d}u(t,"isPointInTriangle");function n(o,i,l){const _=(l.x-i.x)**2+(l.y-i.y)**2,d=((o.x-i.x)*(l.x-i.x)+(o.y-i.y)*(l.y-i.y))/_;return d<0?(o.x-i.x)**2+(o.y-i.y)**2:d<=1?(i.x-o.x)**2+(i.y-o.y)**2-d**2*_:(o.x-l.x)**2+(o.y-l.y)**2}u(n,"distanceSquarePointToSegment");function s(o,i,l,_){let d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;const r=Math.min(i.x,Math.min(l.x,_.x))-d,m=Math.max(i.x,Math.max(l.x,_.x))+d,h=Math.min(i.y,Math.min(l.y,_.y))-d,v=Math.max(i.y,Math.max(l.y,_.y))+d;return o.x>r&&o.x<m&&o.y>h&&o.y<v}u(s,"pointInTriangleBoundingBox");function a(o,i,l,_){let d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;if(!s(o,i,l,_,d))return!1;const r=d**2;return t(o,i,l,_,0)||n(o,i,l)<=r||n(o,l,_)<=r||n(o,_,i)<=r}u(a,"accurateIsPointInTriangle");var c={accurateIsPointInTriangle:a,isPointInTriangle:t}},1596328926:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(1516013259),n=e(2774532222);function s(a){return(0,t.A)(a,(c,o)=>(0,n.A)(o,"data-"))}u(s,"getDataProps")},8556787853:(j,p,e)=>{"use strict";e.d(p,{Ac:()=>h,Ay:()=>r,lF:()=>m});var t=e(9706240641),n=e.n(t),s=e(7174777686),a=e(2047021170),c=e(2364576462),o=e(3339229351),i=e(6839188756),l=e(3677514771),_=e(9397223697);const d=u((v,y,I)=>{const T=I?v*2:v,f=I?y*2:y,M=T>o.QI||f>o.Jo?Math.min(o.QI/T,o.Jo/f):1,A=Math.floor(T*M),O=Math.floor(f*M);return{width:A,height:O}},"getConstrainedMediaDimensions");function r(v){let{url:y,width:I,height:T,rotate:f,renderSvg:g,stopAnimations:M,sizeForRetina:A,convertIco:O,isEmoji:D}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!y)return null;const E=(0,i.Uz)((0,l.H7)(v));if(!E||y.indexOf(E)===0||y.indexOf("/img/")===0)return y;if(y.indexOf("https://")===0&&!D){const N=(0,c.yz)(y,!0),V=(0,_.QL)();if((0,s.A)(V,N)){if(M&&N==="slack-imgs.com"){const R=new URL(y),P=R.searchParams.has("o1")?`${R.searchParams.get("o1")}.gu`:"gu";return R.searchParams.set("o1",P),R.href}return y}}const C=new URL(E);C.searchParams.set("c",o.lW);const{width:S,height:b}=I&&T?d(I,T,A):{},k=[];return S&&b&&(k.push(`wi${S}`),k.push(`he${b}`),k.push("si")),f&&k.push("ro"),g&&k.push("sv2"),(M||!(0,a.ty)(v,"a11y_animations"))&&k.push("gu"),O&&k.push("ip"),k.length&&C.searchParams.set("o1",k.join(".")),C.searchParams.set("url",y),C.href}u(r,"getImgProxyUrl");const m=function(){var v=(0,t.coroutine)(function*(y){const I=new URL(y);try{return!!(yield fetch(`https://${I.hostname}/?url=${I.searchParams.get("url")}`,{method:"HEAD",mode:"cors"})).headers.get("x-slack-animated")}catch(T){if(T)return!1}return!1});return u(function(I){return v.apply(this,arguments)},"isImageAnimated")}(),h=u(v=>v.replace(".gu",""),"getAnimatedImgUrl")},6415587347:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>fn});var t=e(4063699741),n=e.n(t),s=e(7129884748),a=e.n(s),c=e(4840951141),o=e.n(c),i=e(9241168512),l=e.n(i),_=e(9602720019),d=e.n(_),r=e(9777215928),m=e.n(r),h=e(9833689275),v=e.n(h),y=e(2981982679),I=e.n(y),T=e(9267813754),f=e.n(T),g=e(3963460214),M=e.n(g),A=e(9948433110),O=e.n(A),D=e(2295488157),E=e.n(D),C=e(5908867676),S=e.n(C),b=e(4948097913),k=e.n(b),W=e(5156772208),N=e.n(W),V=e(3333214639),R=e.n(V),P=e(9825918216),z=e.n(P),$=e(1302153452),x=e.n($),Y=e(474239361),ne=e.n(Y),re=e(350135845),_e=e.n(re),G=e(7428983508),ge=e.n(G),oe=e(1001408479),me=e.n(oe),ue=e(7331486018),ae=e.n(ue),he=e(669259003),ce=e.n(he),ee=e(1889110914),J=e.n(ee),X=e(7183565897),F=e.n(X),L=e(4814900690),K=e.n(L),B=e(3710970638),Q=e.n(B),q=e(1023719767),le=e.n(q),Te=e(4165874747),Ie=e.n(Te),De=e(3431559584),pe=e.n(De),fe=e(2261459203),Z=e.n(fe),se=e(7272988726),Ae=e.n(se),Ce=e(2200759559),Le=e.n(Ce),Ue=e(451984622),Pe=e.n(Ue),He=e(77360885),Qe=e.n(He),lt=e(7523979550),qe=e.n(lt),ct=e(4245237474),tt=e.n(ct),it=e(1957386787),Ge=e.n(it),We=e(8390767423),xe=e.n(We),ze=e(983107878),mt=e.n(ze),pt=e(3224273568),It=e.n(pt),bt=e(2979422297),gt=e.n(bt),ht=e(4923972147),Zt=e.n(ht),rn=e(1060768686),zt=e.n(rn),In=e(5098468056),cn=e.n(In),Jt=e(6906793909),dn=e.n(Jt),sn=e(3708998647),Xt=e.n(sn),xt=e(2256285620),en=e.n(xt),un=e(2316786074),yn=e.n(un),ut=e(3783723764),Ot=e(8840779375),kt=e(2604971659),be=e(4103274853),Kt=e(2208015175),Vt=e(3339229351),on=e(397660785),pn=e(6363331542);function et(Oe){return(0,ut.A)((0,Ot.A)((0,kt.A)(Oe),ke=>parseInt(ke,10)),null,"desc")}u(et,"makeOrderedIconSizes");function At(Oe){return(0,be.A)(Oe,ke=>et(ke))}u(At,"makeOrderedNamedIconSizes");const Rt={24:yn(),32:Xt(),36:cn(),72:Zt(),192:It()},Ft={24:en(),32:dn(),36:zt(),72:gt(),192:mt()},$t={fancy:{20:xe(),24:Ge(),32:tt(),36:qe(),48:Qe(),72:Pe(),192:Le(),360:Ae(),512:Z(),1024:pe()},frowny:{20:Ie(),24:le(),32:Q(),36:K(),48:F(),72:J(),192:ce(),360:ae(),512:me(),1024:ge()},neutral:{20:_e(),24:ne(),32:x(),36:z(),48:R(),72:N(),192:k(),360:S(),512:E(),1024:O()},sad_surprise:{20:M(),24:f(),32:I(),36:v(),48:m(),72:d(),192:l(),360:o(),512:a(),1024:n()}},vn=24,Rn=et(Ft),hn=At($t),gn="image_";function Cn(Oe){const ke=[];return(0,Kt.A)(Oe,(je,Be)=>{if(Be.indexOf(gn)!==0)return;const st=Be.slice(gn.length);ke.unshift(parseInt(st,10))}),ke}u(Cn,"getSizeOptionsFromProfile");function fn(Oe){let{size:ke,teamOrEnterpriseId:je,memberId:Be,avatarHash:st,emoji:St,isBot:Yt=!1,botImages:tn=!1,slackbotFeels:at=null,isUserHidden:Et=!1}=Oe,_t,Bt,Qt=!1;if(!ke||!Yt&&!Et&&(!je||!Be||!st)&&!St)return{};if(St)return{emoji:St,isDefault:!1};if(Et){const Fe=(0,pn.A)(ke,Rn),Xe=(0,pn.A)(ke*2,Rn);_t=Rt[Fe||vn],Bt=Rt[Xe||vn],Qt=!0}else if(Be===Vt.Q$&&at&&$t[at]){const Fe=(0,pn.A)(ke,hn[at]),Xe=(0,pn.A)(ke*2,hn[at]);_t=$t[at][Fe||vn],Bt=$t[at][Xe||vn]}else if(!Yt||je&&Be&&st){const Fe=(0,pn.A)(ke),Xe=(0,pn.A)(ke*2),Me=(0,on.Z)(je);_t=`${Me}${je}-${Be}-${st}-${Fe}`,Bt=`${Me}${je}-${Be}-${st}-${Xe}`}else if(tn){const Fe=Cn(tn),Xe=(0,pn.A)(ke,Fe),Me=(0,pn.A)(ke*2,Fe);_t=tn[gn+Xe],Bt=tn[gn+Me]}if(Yt&&!_t&&!Bt&&!St){const Fe=(0,pn.A)(ke,Rn),Xe=(0,pn.A)(ke*2,Rn);_t=Ft[Fe||vn],Bt=Ft[Xe||vn],Qt=!0}return{imageUrl:_t,imageUrl2x:Bt,emoji:St,isDefault:Qt}}u(fn,"getMemberProfileImage")},92812954:(j,p,e)=>{"use strict";e.d(p,{d:()=>a});var t=e(8276911661),n=e(3792998666),s=e(5096647761);function a(c,o){if(!o)return"member";const i=(0,t.nv)(c,o);let l="member";return(0,s.g)(i)?l="external":(0,n.Ez)(i)&&!(0,n.Yd)(i)?l="ra":(0,n.Yd)(i)&&(l="ura"),l}u(a,"getMemberType")},8873262110:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(6061527706),n=e(5950652755);function s(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250;const o=u(i=>{!Array.isArray(i)||!i.length||requestAnimationFrame(()=>a(i))},"observer");return new t.A((0,n.A)(o,c))}u(s,"getResizeObserver")},3695531806:(j,p,e)=>{"use strict";e.d(p,{z:()=>n});var t=e(6795568989);const n=u(s=>{let{codePointLikeString:a}=s;if(!(0,t.d)(a))return;const c=16;return a.split("-").map(o=>String.fromCodePoint(parseInt(o,c))).join("")},"getUnicodeFromCodePointLikeString")},8958249318:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});function t(){var n,s;return(s=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)!==null&&s!==void 0?s:"no-ua"}u(t,"getUserAgent")},5770715593:(j,p,e)=>{"use strict";e.d(p,{C9:()=>i,Gl:()=>c,VQ:()=>o,XU:()=>n,dL:()=>s,rU:()=>a,x_:()=>l});var t=e(4761125736);const n=u(_=>{var d;return(d=(0,t._Z)(_,"help_shareables_tm")==="on")!==null&&d!==void 0?d:!1},"isHelpShareablesTmExperimentOn"),s=u(_=>{var d;return(d=(0,t._Z)(_,"help_articles_in_search")==="treatment")!==null&&d!==void 0?d:!1},"isHelpArticlesInSearchExperimentTreatment"),a=u(_=>{var d;return(d=(0,t._Z)(_,"help_smarticles")==="on")!==null&&d!==void 0?d:!1},"isHelpSmarticlesExperimentOn"),c=u(_=>{var d;return(d=(0,t._Z)(_,"help_navigation")==="on")!==null&&d!==void 0?d:!1},"isHelpNavigationExperimentOn"),o=u(_=>{var d;return(d=(0,t._Z)(_,"help_tour")==="treatment")!==null&&d!==void 0?d:!1},"isHelpTourExperimentTreatment"),i=u(_=>{var d;return(d=(0,t._Z)(_,"help_tips")==="on")!==null&&d!==void 0?d:!1},"isHelpTipsExperimentOn"),l=u(_=>{var d;return(d=(0,t._Z)(_,"help_slider_a11y_translations")==="on")!==null&&d!==void 0?d:!1},"isHelpSliderA11yTranslationsExperimentOn")},1251564078:(j,p,e)=>{"use strict";e.d(p,{v:()=>n});var t=e(9907843289);function n(s){const a=(0,t.Yp)().toLowerCase();return a==="en-us"?s:`/intl/${a}${s}`}u(n,"getLocalizedPath")},4240442510:(j,p,e)=>{"use strict";e.d(p,{A:()=>a});var t=e(3193155968),n=e(735940183);const s=new n.Ay("view");function a(c){let{tab:o,experimentSlackAiInboxGroupOn:i,experimentFilesExplorerPrototypeGroupOn:l,experimentSolutionsBecomeTemplatesGroupOn:_,experimentAskSlackViewGroupOn:d}=c,r;switch(o){case t.k6.Home:r=i?s.t("Channels",{ns:"search"}):s.t("Home");break;case t.k6.DMs:r=s.t("DMs");break;case t.k6.Activity:r=i?s.t("Inbox"):s.t("Activity");break;case t.k6.Later:r=s.t("Later");break;case t.k6.SalesHome:r=s.t("Sales");break;case t.k6.Search:r=s.t("Search");break;case t.k6.Canvases:r=s.t("Canvases",{fallbackHash:"e2d397a06197e996f48faa9c0abfd3a2a80d15de",fallbackHashNs:"search"});break;case t.k6.Files:r=s.t("Files",{ns:"search"});break;case t.k6.FilesPrototype:r=l?s.t("Docs"):"Docs";break;case t.k6.Channels:r=s.t("Channels",{ns:"search"});break;case t.k6.People:r=s.t("People",{ns:"search"});break;case t.k6.Platform:r=s.t("Automations",{fallbackHash:"4186e4384191cd367f88423e6488c26e96a3807d",fallbackHashNs:"search"});break;case t.k6.ExternalConnections:case t.k6.ExternalConnectionsTemp:r=s.t("External");break;case t.k6.Huddles:r=s.t("Huddles",{fallbackHash:"cfed893a3dc774c76cbd9efb20d641aad32eff33x`",fallbackHashNs:"search"});break;case t.k6.Assistant:r=d?s.t("Ask Slack"):"Ask Slack";break;case t.k6.Browse:r=s.t("More");break;case t.k6.Lists:r=s.t("Lists");break;case t.k6.Todos:r="Todos";break;case t.k6.Solutions:r=_?s.t("Templates"):s.t("Solutions");break;case t.k6.SlackKitPlayground:r="Slack Kit Playground";break;case t.k6.BBM:r="";break;default:r="";break}return r}u(a,"getTabLabel")},6910192640:(j,p,e)=>{"use strict";e.d(p,{A:()=>A,o:()=>g});var t=e(8956161330),n=e(2384831516),s=e(3193155968),a=e(1552255081),c=e(6642124196),o=e(920478515),i=e(1340402138),l=e(6470070112),_=e(9280052135),d=e(665229739),r=e(7244076749),m=e(4626613428),h=e(2711189973),v=e(5332875232),y=e(3290693121),I=e(2664997725);const T=!1,f={[s.k6.Home]:O=>!(0,i.R)(O),[s.k6.Activity]:O=>(0,m.Ty)(O)&&!(0,y.x)(O),[s.k6.DMs]:O=>(0,m.Ty)(O),[s.k6.FilesPrototype]:O=>(0,d.U)(O)&&(0,m.Ty)(O),[s.k6.SlackKitPlayground]:O=>(0,r.b)()&&(0,m.Ty)(O),[s.k6.Solutions]:O=>(0,I.x)(O)&&(0,m.Ty)(O),[s.k6.Later]:O=>(0,o.Bp)(O),[s.k6.Assistant]:O=>(0,_.l)(O)&&(0,m.Ty)(O),[s.k6.Canvases]:O=>(0,a.F)(O)&&!(0,i.R)(O)&&!(0,d.U)(O),[s.k6.Files]:O=>!(0,i.R)(O)&&(0,m.Ty)(O),[s.k6.Channels]:O=>!(0,i.R)(O)&&(0,m.Ty)(O),[s.k6.Platform]:()=>!0,[s.k6.People]:O=>!(0,i.R)(O)&&(0,m.Ty)(O),[s.k6.Huddles]:O=>(0,l.Wd)(O)&&!(0,v.LS)(O)&&!(0,i.R)(O),[s.k6.SalesHome]:O=>(0,t.hx)(O),[s.k6.Lists]:O=>(0,c.Il)(O)&&!(0,i.R)(O)&&!(0,d.U)(O),[s.k6.Todos]:O=>(0,c.tl)(O),[s.k6.ExternalConnections]:O=>(0,h.y)(O,T),[s.k6.ExternalConnectionsTemp]:O=>!(0,h.y)(O,T)},g=u(O=>(0,n.Mz)(D=>f[O](D)),"makeSelectVisibleTab"),A=u((O,D)=>g(D)(O),"getTabVisibility")},505908973:(j,p,e)=>{"use strict";e.d(p,{A:()=>R});var t=e(6644049054),n=e(352142497),s=e(5657872960),a=e(6642124196),c=e(3559837422),o=e(6839188756),i=e(3677514771),l=e(8956161330),_=e(1552255081),d=e(7274827479),r=e(4761125736),m=e(418103123),h=e(1190344069),v=e(9889493721),y=e(7069714209),I=e(665229739),T=e(9280052135),f=e(7244076749),g=e(2711189973),M=e(5332875232),A=e(2052624953),O=e(9132066222),D=e(3856748711),E=e(8646192222),C=e(3875705815),S=e(6695353875),b=e(2664997725),k=e(6120301420);const W=!1,N={[n.D.KeyboardShortcuts]:()=>!0,[n.D.WhatsNew]:()=>!0,[n.D.RecentCanvases]:()=>!1,[n.D.CanvasesSharedWithYou]:P=>(0,r._Z)(P,"canvas_collection_prototype")==="on"&&(0,_.F)(P),[n.D.CanvasesCreatedByYou]:P=>(0,r._Z)(P,"canvas_collection_prototype")==="on"&&(0,_.F)(P),[n.D.BrowseCanvases]:P=>(0,_.F)(P),[n.D.RecentFiles]:()=>!0,[n.D.FilesCreatedByYou]:()=>!0,[n.D.FilesSharedWithYou]:()=>!0,[n.D.BrowseExternalWorkspace]:y.U,[n.D.BrowseChannels]:()=>!0,[n.D.BrowsePeople]:()=>!0,[n.D.ExternalOrganizations]:P=>(0,g.y)(P,W),[n.D.ExternalOrganization]:P=>(0,g.y)(P,W),[n.D.ExternalPeople]:()=>!1,[n.D.SlackConnectChannels]:()=>!1,[n.D.SlackConnectInvitations]:P=>(0,g.y)(P,W),[n.D.BrowseUserGroups]:P=>!(0,c.sV)(P)&&(0,o.qR)((0,i.H7)(P)),[n.D.SlackConnect]:P=>(0,t.A)(P),[n.D.Channel]:()=>!0,[n.D.AppSpace]:()=>!0,[n.D.Quip]:()=>!0,[n.D.RecentPlatform]:P=>(0,v.MA)(P),[n.D.BrowseWorkflowsManagedByYou]:P=>(0,v.EH)(P),[n.D.BrowseYourWorkflowTemplates]:P=>(0,v.M7)(P),[n.D.BrowseShortcuts]:P=>(0,v.S0)(P),[n.D.BrowseWorkflowTemplates]:P=>(0,v.fh)(P),[n.D.BrowseApps]:P=>(0,v.pr)(P),[n.D.OrgDirectory]:()=>!0,[n.D.Page]:()=>!0,[n.D.Threads]:()=>!0,[n.D.Thread]:()=>!0,[n.D.Profile]:()=>!0,[n.D.FileDetails]:()=>!0,[n.D.Help]:()=>!0,[n.D.UserGroup]:()=>!0,[n.D.Feedback]:()=>!0,[n.D.List]:P=>(0,a.Fh)(P),[n.D.ListRecord]:P=>(0,a.Fh)(P),[n.D.ListRecordDetails]:P=>(0,a.Fh)(P),[n.D.ListRecordThread]:P=>(0,a.Fh)(P),[n.D.ListRecordHistory]:P=>(0,a.Fh)(P),[n.D.MyItems]:P=>(0,a.$7)(P),[n.D.DeletedLists]:P=>(0,a.bb)(P),[n.D.Tasks]:P=>(0,a.tl)(P),[n.D.AssignedTasks]:P=>(0,a.tl)(P),[n.D.Reminders]:P=>(0,a.tl)(P),[n.D.Saved]:P=>(0,a.tl)(P),[n.D.ComposeList]:()=>!0,[n.D.Compose]:()=>!0,[n.D.QuipCommentThread]:()=>!0,[n.D.QuipCommentStream]:()=>!0,[n.D.QuipActivityHistory]:()=>!0,[n.D.QuipAutomationsOverview]:()=>!0,[n.D.Canvas]:()=>!0,[n.D.ChannelCanvas]:()=>!0,[n.D.CanvasBrowser]:P=>(0,_.F)(P),[n.D.DeletedCanvases]:P=>(0,k.qD)(P),[n.D.PaidBenefits]:()=>!0,[n.D.Setup]:()=>!0,[n.D.SearchEmpty]:()=>!0,[n.D.AboutWorkspace]:()=>!1,[n.D.Unknown]:()=>!0,[n.D.MorePeopleSidebar]:()=>!0,[n.D.MoreCanvasesSidebar]:()=>!0,[n.D.AppPopout]:()=>!0,[n.D.ChannelList]:()=>!0,[n.D.BrowseFiles]:()=>!0,[n.D.BrowseFilesPrototype]:P=>(0,I.U)(P),[n.D.SlackKitPlayground]:()=>(0,f.b)(),[n.D.Solutions]:P=>(0,b.x)(P),[n.D.BrowseLists]:P=>(0,a.Il)(P),[n.D.DmsList]:()=>!0,[n.D.BrowseList]:()=>!0,[n.D.ActivityList]:()=>!0,[n.D.LaterList]:P=>(0,s.c)(P),[n.D.Search]:()=>!0,[n.D.MoreFilesSidebar]:()=>!0,[n.D.MoreListsSidebar]:()=>!0,[n.D.MoreTodosSidebar]:()=>!0,[n.D.FilesPrototypeSidebar]:P=>(0,I.U)(P),[n.D.MoreChannelsSidebar]:()=>!1,[n.D.MorePlatformSidebar]:()=>!0,[n.D.MoreHuddlesSidebar]:()=>!0,[n.D.MoreExternalConnectionsSidebar]:P=>(0,g.y)(P,W),[n.D.HelpBrowser]:()=>!0,[n.D.Huddle]:()=>!0,[n.D.BrowseHuddles]:P=>(0,M.LS)(P),[n.D.KeyboardShortcutsBrowser]:()=>!0,[n.D.WhatsNewBrowser]:()=>!0,[n.D.FeedbackBrowser]:()=>!0,[n.D.ExternalWorkspaceAllowedOrgPane]:()=>!1,[n.D.ExternalWorkspaceSidebar]:()=>!1,[n.D.ExternalWorkspacePeopleBrowser]:()=>!1,[n.D.ExternalWorkspaceChannelBrowser]:()=>!1,[n.D.PostEvent]:()=>!1,[n.D.AiSummaryDetails]:P=>(0,d._z)(P),[n.D.DailyDigest]:P=>(0,d.sS)(P),[n.D.MoreAiSummarySidebar]:P=>(0,d.M1)(P),[n.D.SearchSummary]:P=>(0,d.lQ)(P),[n.D.AssistantList]:P=>(0,T.l)(P),[n.D.Today]:P=>(0,m._)(P),[n.D.Record]:P=>(0,h.hm)(P),[n.D.RecordChannelCreate]:P=>(0,h.hm)(P),[n.D.RecordChannelRelatedList]:P=>(0,h.dw)(P),[n.D.SalesAdministration]:()=>!0,[n.D.SalesBulkGrid]:()=>!0,[n.D.SalesHome]:P=>(0,l.hx)(P),[n.D.SalesLogActivity]:()=>!0,[n.D.SalesListViewBrowser]:()=>!0,[n.D.SalesSidebar]:()=>!0,[n.D.SalesNotifications]:()=>!0,[n.D.AssistantThread]:()=>!0,[n.D.ChannelFiles]:P=>(0,r._Z)(P,"channel_canvas_in_bbar")==="on",[n.D.AiApp]:P=>(0,A.wP)(P),[n.D.WorkflowDetails]:P=>(0,r._Z)(P,"workflow_progress_fe")==="on",[n.D.WorkflowEditor]:P=>(0,r._Z)(P,"wfb_in_client")==="on",[n.D.BookmarksFolder]:P=>(0,O.U6)(P),[n.D.ActionItems]:P=>(0,d.FV)(P),[n.D.Inbox]:P=>(0,D.y)(P),[n.D.BBMMain]:P=>(0,E.mL)(P)&&(0,C.V)(P),[n.D.BBMWorkspaceSwitcher]:P=>(0,E.mL)(P)&&(0,C.V)(P),[n.D.SearchInChannel]:P=>(0,S.k8)(P),[n.D.HuddleTranscriptDetails]:P=>(0,M.P3)(P),[n.D.HuddlePageCanvas]:()=>!0,[n.D.BBMMore]:P=>(0,E.mL)(P)&&(0,C.V)(P)},R=u((P,z)=>N[z](P),"getViewTypeVisibility")},4900557724:(j,p,e)=>{"use strict";e.d(p,{BB:()=>l,GP:()=>_,Uf:()=>d});var t=e(9706240641),n=e.n(t),s=e(3398586081),a=e(7715417323),c=e(6422693406);const o={didTimeout:!0,timeRemaining:()=>0},i=(0,s.A)(()=>!!(window.requestIdleCallback&&window.cancelIdleCallback));function l(m,h){return i()?window.requestIdleCallback(m,h):window.setTimeout(()=>m(o))}u(l,"requestIdleCallback");function _(m){return i()?window.cancelIdleCallback(m):window.clearTimeout(m)}u(_,"cancelIdleCallback");function d(m){return new c.S(function(h,v){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.A;const I=l(function(){var T=(0,t.coroutine)(function*(f){try{const g=yield c.S.resolve(m(f));h(g)}catch(g){v(g)}});return function(f){return T.apply(this,arguments)}}());y(()=>{_(I)})})}u(d,"awaitIdleCallback");const r={IDLE_DEADLINE_FALLBACK:o}},5731054235:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(9636997165);let n=null;function s(){if(n===null){var a,c;n=(document==null||(a=document.documentElement)===null||a===void 0||(c=a.dataset)===null||c===void 0?void 0:c.app)===t.u.APP_POPOUTS}return n}u(s,"isAppPopouts")},8800777280:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});function t(n,s){return!n||!s?!1:s(n)?!0:t(n.parentElement||void 0,s)}u(t,"isContainedBy")},6045540917:(j,p,e)=>{"use strict";e.d(p,{h:()=>a});var t=e(8276911661),n=e(8170643398),s=e(3986753718);function a(c,o){if(!o)return!1;const i=(0,t.nv)(c,o);return!(0,n.zU)(i)&&!!o&&!!(0,s.t6)(c,o)}u(a,"isDnd")},7640408795:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});function t(n){var s;return!n||n.metaKey||n.ctrlKey?!1:((s=n.key)===null||s===void 0?void 0:s.length)===1}u(t,"isPrintableKeyEvent")},6605261507:(j,p,e)=>{"use strict";e.d(p,{Dl:()=>a,Mk:()=>n,qF:()=>s});var t=e(1269024372);const n=["about","canvas"],s=["app","about","settings","chat"];function a(c){return n.indexOf(c)!==-1||s.indexOf(c)!==-1||Object.keys(t.e).indexOf(c)!==-1}u(a,"isValidTabRoute")},5587260451:(j,p,e)=>{"use strict";e.d(p,{L:()=>t,c:()=>n});const t=["invitations","contacts"];function n(s){return t.includes(s)}u(n,"isValidViewName")},2249017398:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(9636997165);let n=null;function s(){if(n===null){var a,c;n=(document==null||(a=document.documentElement)===null||a===void 0||(c=a.dataset)===null||c===void 0?void 0:c.app)===t.u.WORKFLOW_BUILDER}return n}u(s,"isWorkflowBuilder")},1233969417:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});const t=/^\d+$/;function n(s){return t.test(s)}u(n,"looksLikeHelpArticleId")},110305600:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});const t=/^Ft[A-Z0-9]{7,}$/;function n(s){return t.test(s)}u(n,"looksLikeHermesTriggerId")},1466694191:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});const t=/^(quip|Qp):F[A-Z0-9]{8,}-(Qpv:[a-z0-9:]{8,}&Qpvs:[0-9]{1,})?$/;function n(s){return s?t.test(s):!1}u(n,"looksLikeQuipHistoryId")},8305125093:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});const t=/^Wt[A-Z0-9]{7,}$/;function n(s){return t.test(s)}u(n,"looksLikeWorkflowTemplateId")},1269024372:(j,p,e)=>{"use strict";e.d(p,{e:()=>n,k:()=>s});var t=e(352142497);const n={recent:t.D.RecentPlatform,"workflows-managed-by-you":t.D.BrowseWorkflowsManagedByYou,workflows:t.D.BrowseShortcuts,"all-workflows":t.D.BrowseShortcuts,templates:t.D.BrowseWorkflowTemplates,apps:t.D.BrowseApps};function s(a){return n[a]}u(s,"maybeGetAutomationsTab")},264208541:(j,p,e)=>{"use strict";e.d(p,{Ey:()=>o,Hn:()=>i,gs:()=>l,mw:()=>d,nS:()=>_});var t=e(8665296019),n=e(1033764764),s;let a=!!(!(window==null||(s=window.performance)===null||s===void 0)&&s.memory);function c(){return a?window.performance.memory.jsHeapSizeLimit:null}u(c,"getMemoryLimit");function o(){return a?window.performance.memory.totalJSHeapSize:null}u(o,"getMemoryTotal");function i(){return a?window.performance.memory.usedJSHeapSize:null}u(i,"getMemoryUsed");function l(){return a}u(l,"supportsMemoryMeasurement");function _(m){const h=m/1e3/1e3;return`${h<100?h.toPrecision(3):Math.round(h)} MB`}u(_,"humanizeBytes");function d(m,h){const v=(0,t.A)(m,y=>{let{memory:I}=y;return I[h]||0});return Math.ceil((0,n.UK)(v))}u(d,"sumMemoryMetricsByKey"),Object.defineProperties({},{SUPPORTS_MEMORY_MEASUREMENT:{get:()=>a,set:m=>{a=m}}})},5737576046:(j,p,e)=>{"use strict";e.d(p,{Pw:()=>d,bC:()=>i,wn:()=>_,zC:()=>l});var t=e(1703559452),n=e(1022424641),s=e(796111729),a=e(9470581768),c=e(8800777280);const o={};function i(r){let{channelId:m,functions:h,getInputInstance:v,threadTs:y,viewContext:I}=r;if(!v)throw new Error('Missing required "getInputInstance" param');const T=`${I}-${m}-${y}`;return o[T]&&(0,s.Ay)().warn(`Registering duplicate input (key: "${T}")`),o[T]={clear:()=>{var f,g;(f=v())===null||f===void 0||(g=f.clear)===null||g===void 0||g.call(f)},clearHistory:()=>{var f,g;(f=v())===null||f===void 0||(g=f.clearHistory)===null||g===void 0||g.call(f)},focus:()=>{var f,g;(f=v())===null||f===void 0||(g=f.focus)===null||g===void 0||g.call(f)},getContents:()=>{var f,g;return(f=v())===null||f===void 0||(g=f.getContents)===null||g===void 0?void 0:g.call(f)},getDisplayValue:()=>{var f,g;return(f=v())===null||f===void 0||(g=f.displayValue)===null||g===void 0?void 0:g.call(f)},getLength:()=>{var f,g;return(f=v())===null||f===void 0||(g=f.getLength)===null||g===void 0?void 0:g.call(f)},getSelection:()=>{var f,g;return(f=v())===null||f===void 0||(g=f.getSelection)===null||g===void 0?void 0:g.call(f)},getText:()=>{var f,g;return(f=v())===null||f===void 0||(g=f.value)===null||g===void 0?void 0:g.call(f)},hasFocus:()=>{var f,g;return(f=v())===null||f===void 0||(g=f.hasFocus)===null||g===void 0?void 0:g.call(f)},insertContentsAtCursor:function(){for(var f=arguments.length,g=new Array(f),M=0;M<f;M++)g[M]=arguments[M];var A,O;(A=v())===null||A===void 0||(O=A.insertContentsAtCursor)===null||O===void 0||O.call(A,...g)},isEmpty:()=>{var f,g;return!!(!((f=v())===null||f===void 0||(g=f.isEmpty)===null||g===void 0)&&g.call(f))},isEnabled:()=>{var f,g;return!!(!((f=v())===null||f===void 0||(g=f.isEnabled)===null||g===void 0)&&g.call(f))},prependContents:f=>{var g,M;(g=v())===null||g===void 0||(M=g.prependContents)===null||M===void 0||M.call(g,f)},setContents:function(){for(var f=arguments.length,g=new Array(f),M=0;M<f;M++)g[M]=arguments[M];var A,O;(A=v())===null||A===void 0||(O=A.setContents)===null||O===void 0||O.call(A,...g)},setCursor:function(){for(var f=arguments.length,g=new Array(f),M=0;M<f;M++)g[M]=arguments[M];var A,O;(A=v())===null||A===void 0||(O=A.setCursor)===null||O===void 0||O.call(A,...g)},setCursorAtEnd:()=>{var f,g;(f=v())===null||f===void 0||(g=f.setCursorAtEnd)===null||g===void 0||g.call(f)},setText:function(){for(var f=arguments.length,g=new Array(f),M=0;M<f;M++)g[M]=arguments[M];var A,O;(A=v())===null||A===void 0||(O=A.value)===null||O===void 0||O.call(A,...g)},...h},()=>{delete o[T]}}u(i,"registerInputAuto");function l(r){let{viewContext:m,channelId:h,threadTs:v}=r;return o[`${m}-${h}-${v||void 0}`]}u(l,"getInputProxy");function _(r){if(!r||!(0,a.A)(r))return null;let m,h,v;return(0,c.A)(r,I=>I.getAttribute("data-message-input")?(m=I.getAttribute("data-channel-id"),h=I.getAttribute("data-thread-ts"),v=I.getAttribute("data-view-context"),!0):!1)?l({viewContext:v,channelId:m,threadTs:h}):null}u(_,"getProxyForElement");function d(){let{channelId:r,threadTs:m}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const h=`${r}-${m}`,v=Object.keys(o);return(0,t.A)(v,y=>(0,n.A)(y,h))}u(d,"isInputRegistered")},4394722864:(j,p,e)=>{"use strict";e.d(p,{Q:()=>t});const t=u(()=>null,"noopNull")},662226046:(j,p,e)=>{"use strict";e.d(p,{R2:()=>y,bP:()=>I,ec:()=>A,fU:()=>M,p6:()=>E,qe:()=>O,x2:()=>S,yj:()=>C});var t=e(6858020025),n=e(3783303734),s=e(796111729),a=e(571104883),c=e(5795074931),o=e(8847766420),i=e(2872463257),l=e(3855029223);const _="notification:sent",d="notification:received",r="notification:opened",m="notification:quick_reply",h="notification:read_in_app",v=100;function y(b){try{return JSON.stringify(b)}catch(k){return(0,s.Wo)().warn("encodeNotificationTracePassthrough json stringify error",k),""}}u(y,"encodeNotificationTracePassthrough");function I(b){try{const{traceId:k,parentSpanId:W}=JSON.parse(b);return{traceId:k,parentSpanId:W}}catch(k){return(0,s.Wo)().warn("decodeNotificationTracePassthrough json parse error",k),{traceId:"",parentSpanId:""}}}u(I,"decodeNotificationTracePassthrough");function T(b){let{tracer:k,name:W,parentSpanId:N,traceId:V}=b;return k.createSpan({name:W,samplingOptions:{sampleType:i.nl.ALWAYS},options:{parentSpanId:N,traceId:V}})}u(T,"createSpan");function f(b){let{tracer:k,name:W,parentSpanId:N,traceId:V}=b;const R=T({tracer:k,name:W,parentSpanId:N,traceId:V});return R.close(),R}u(f,"createAndCloseSpan");function g(b,k){let{tracer:W,message:N}=k;const V=f({tracer:W,name:_}),R=(0,a.y3)()?"desktop":"browser",P=(0,c.WR)(b),z=(0,o.ZT)(b),$=(0,t.A)(N==null?void 0:N.ts,".",""),x=N==null?void 0:N.channel,Y=`${P}-${x}-${$}`;return V.addTags({platform:R,encoded_user_id:P,encoded_team_id:z,encoded_channel_id:x,message_ts:$,notification_id:Y}),V}u(g,"createAndCloseNotificationSentSpan");function M(b,k){let{message:W}=k;if(!W||!(W!=null&&W.ts)||!(W!=null&&W.channel))return;const N=(0,l.E)({state:b});let V,R;const P=[];if((W==null?void 0:W.type)==="desktop_notification"&&(W!=null&&W.trace_ctx))V=W.trace_ctx["x-b3-traceid"],R=W.trace_ctx["x-b3-spanid"];else{const $=g(b,{tracer:N,message:W});P.push($),R=$.getId(),V=$.getTraceId()}const z=f({name:d,tracer:N,traceId:V,parentSpanId:R});return P.push(z),N.reportSpans(P),{traceId:V,parentSpanId:R}}u(M,"traceNotificationSentAndReceived");function A(b,k){let{notificationTracePassthroughData:W}=k;if(!W)return;const{traceId:N,parentSpanId:V}=W,R=(0,l.E)({state:b}),P=f({tracer:R,traceId:N,parentSpanId:V,name:r});R.reportSpans([P])}u(A,"traceNotificationOpened");function O(b,k){let{notificationTracePassthroughData:W,clientMsgId:N}=k;if(!W||!N)return;const{traceId:V,parentSpanId:R}=W,P=(0,l.E)({state:b}),z=f({tracer:P,traceId:V,parentSpanId:R,name:m});z.addTags({reply_message_client_message_id:N}),P.reportSpans([z])}u(O,"traceNotificationQuickReply");let D={};function E(b){return!!D[b]}u(E,"messageHasPendingNotificationTrace");function C(b,k){let{timestamp:W,notificationTracePassthroughData:N}=k;if(!N)return;(0,n.A)(D)>v&&((0,s.Ay)({state:b}).error("notification-tracing-utils: notificationTracePassThroughData exceeded maximum size"),D={});const{traceId:V,parentSpanId:R}=N,P=(0,l.E)({state:b}),z=T({tracer:P,traceId:V,parentSpanId:R,name:h});D[W]=z}u(C,"openNotificationReadSpan");function S(b,k){let{timestamp:W}=k;if(!W)return;const N=D[W];if(!N)return;const V=(0,l.E)({state:b});N.close(),V.reportSpans([N]),delete D[W]}u(S,"closeAndReportNotificationReadSpan")},6979898962:(j,p,e)=>{"use strict";e.d(p,{B:()=>s,I:()=>a.A});var t=e(3134334389),n=e(5356156303);let s=u(class extends t.Component{shouldComponentUpdate(o,i){return!(0,n.Ay)(o,this.props,2)||!(0,n.Ay)(i,this.state,2)}},"PureComponentDepth2");var a=e(8993095355)},8993095355:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(3134334389),n=e(5356156303);let s=u(class extends t.Component{shouldComponentUpdate(c,o){return!(0,n.Ay)(c,this.props,3)||!(0,n.Ay)(o,this.state,3)}},"PureComponentDepth3")},7948868735:(j,p,e)=>{"use strict";e.d(p,{F:()=>s});var t=e(6422693406),n=e(4615579178);class s extends n.l{fetchData(){return t.S.resolve()}onCacheData(c){super.onCacheData(c);const o=1e3*60*60*4;this.refreshTimer&&clearTimeout(this.refreshTimer),this.refreshTimer=null,this.refreshTimer=setTimeout(()=>{this._callCacheGet()},this.timeoutMs+Math.random()*o)}getStaleWhileRevalidate(c){return this.isStaleOrUndefined()&&(this._callCacheGet(),this.cachedData===void 0)?c:this.cachedData}constructor(){super(()=>this.fetchData(),1008e5,!1),this.refreshTimer=null}}u(s,"AutocompleteCache")},1948374838:(j,p,e)=>{"use strict";e.d(p,{X:()=>c});var t=e(2223860501),n=e(8847766420);let s=u(class{isStale(){return Date.now()-this.updatedDate>this.timeoutMs}isPrefixStale(){return Date.now()-this.prefixUpdatedDate>this.prefixTimeoutMs}clearIfStale(){this.isStale()&&(this.queryCache.clear(),this.updatedDate=Date.now())}clearPrefixIfStale(){this.isPrefixStale()&&(this.prefixQueryCache.clear(),this.prefixUpdatedDate=Date.now())}contains(i){const l=this.queryCache.has(i);return this.clearIfStale(),l}containsPrefixOf(i){return this.clearPrefixIfStale(),this.prefixQueryCache.containsPrefix(i)}add(i){return this.clearIfStale(),this.queryCache.add(i)}addAsPrefix(i){return this.clearPrefixIfStale(),this.prefixQueryCache.add(i)}setRequestInFlight(){this.inFlightRequestStartTime=Date.now()}clearRequestInFlight(){delete this.inFlightRequestStartTime}isRequestInFlight(){return this.inFlightRequestStartTime?Date.now()-this.inFlightRequestStartTime<this.inFlightRequestTimeoutMs:!1}reset(){this.queryCache.clear(),this.updatedDate=Date.now(),this.prefixQueryCache.clear(),this.prefixUpdatedDate=Date.now(),this.clearRequestInFlight()}constructor(){this.queryCache=new t.A,this.prefixQueryCache=new t.A,this.updatedDate=Date.now(),this.prefixUpdatedDate=Date.now(),this.timeoutMs=1e3*60*60*8,this.prefixTimeoutMs=1e3*60*15,this.inFlightRequestTimeoutMs=400}},"WorkflowTriggersAutocompleteQueryCache");const a={};function c(o){const i=(0,n.ZT)(o),_=(0,n.jV)(o)||i||"";return a[_]||(a[_]=new s),a[_]}u(c,"getWorkflowTriggersAutocompleteQueryCache")},6125148745:(j,p,e)=>{"use strict";e.d(p,{O:()=>T,w:()=>y});var t=e(9706240641),n=e.n(t),s=e(6422693406),a=e(6987519067),c=e(9289081806),o=e(1407713935),i=e(8798294025),l=e(8040098042),_=e(926136447),d=e(9752307e3),r=e(9150404500),m=e(9101533895),h=e(2036289572),v=e(2505585477);function y(M,A){const O=(0,v.YR)(M),D=new RegExp(`\\b(${(0,r.av)().in}|in):(#([^\\s]+))`,"g"),E=d.dn.fromString(M,O),C={};return E.suggestionTokenList.forEach(b=>{if(b instanceof _.tT){const{id:k,name:W}=b.getRawIdAndNameForXwsChannelWorkaround();k&&(0,l.A)(k)&&W&&(C[W]||(C[W]=[]),C[W].push({id:k,name:W}))}}),A.replace(D,(b,k,W,N)=>{if(C[N]&&C[N].length>0){const{id:V,name:R}=C[N].shift()||{};return`${k}:<#${V}|${R}>`}return b})}u(y,"convertUserQueryXwsChannelStringsForXwsChannelWorkaround");function I(M,A){if((0,o.LI)(A))return`<@${(0,i.e)(A)}>`;const O=(0,c.SB)(M,A,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1});return O?`<#${A.id}|${O}>`:`<#${A.id}>`}u(I,"formatInChannelValue");function T(M,A,O){const D=A(),E={},C=[],S={};((0,v.Zi)(D)||[]).forEach(W=>{const N=(0,m.OL)(D,W);N&&C.push(N)});const k=new RegExp(`\\b(${(0,r.av)().in}|in):(#([^\\s]+))`,"g");return f(O,k,(W,N,V,R)=>{const P=C.find($=>(0,c.mG)($)===R&&!E[$.id]&&!S[$.id]);if(P)return E[P.id]=!0,S[P.id]=!0,s.S.resolve(`${N}:${I(D,P)}`);const z=(0,m.Os)(D,R);return z&&!E[z.id]?(E[z.id]=!0,s.S.resolve(`${N}:${I(D,z)}`)):M((0,a.$P)({query:R,options:{fuzzyLimit:0,limit:150,entities:{channels:{includeArchived:!0,includeFromAnotherTeam:!0}},sort:{frecency:!1}}})).then($=>{const x=A(),Y=R&&R.replace("#",""),ne=$.find(_e=>_e.name===Y&&!E[_e.id]);if(!ne)return`${N}:${V}`;E[ne.id]=!0;const re=(0,v.C6)(x).queryFilter;return re.in=Array.from(new Set([...re.in||[],ne.id])),M((0,h.c3)({queryFilter:re})),`${N}:${I(D,ne)}`})})}u(T,"convertContentsStringForEncodedXwsChannels");function f(M,A,O){return g.apply(this,arguments)}u(f,"replaceAsync");function g(){return g=(0,t.coroutine)(function*(M,A,O){const D=[];M.replace(A,function(C){for(var S=arguments.length,b=new Array(S>1?S-1:0),k=1;k<S;k++)b[k-1]=arguments[k];const W=O(C,...b);return D.push(W),M});const E=yield s.S.all(D);return M.replace(A,()=>E.shift()||"")}),g.apply(this,arguments)}u(g,"_replaceAsync")},2825917518:(j,p,e)=>{"use strict";e.d(p,{A:()=>a,u:()=>s});var t=e(6617433054),n=e(9422011462);const s=/[- _'.\u{2019}\u{200b}()/\uFF0F]/gu;let a=u(class Ds{normalizeAndScore(o){const i=(0,n.B)(o);return i===this.normalizedQuery?0:this.score(i)}score(o){if(!o||this.queryNoSeparators.length>o.replace(s,"").length||!Ds.containsAllLetters(o,this.queryNode)||!this.queryNode)return 1/0;const l=Ds.lettersToGraph(o,this.options);if(!l)return 1/0;const _=Ds.searchWordBoundariesOnly(l,this.queryNode,this.options);if(!_)return 1/0;const d=Ds.countResult(_);return d>this.fuzzyLimit?1/0:d}static scoreOnce(o,i,l){const _=(0,n.B)(i),d=(0,n.B)(o);return new Ds(_,l).score(d)}static lettersToGraph(o,i){const l=o.split(""),_=l.shift();return Ds.lettersToGraphWorker(_,null,l,[],0,i)}static lettersToGraphWorker(o,i,l,_,d){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(!o)return null;const m=(0,t.A)(o),h=Ds.makeLetterNode(o,i,_,d,m);if(Ds.shouldAddJump(i,h,r)){const y=r.fuzzyJumpLimit||5;_.length<y&&_.push(h)}const v=Ds.lettersToGraphWorker(l.shift(),h,l,_,d+1,r);return v&&(h.next=v),h}static shouldAddJump(o,i){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i.ignored?!1:!!(!o||o.ignored&&!i.ignored||l.fuzzyCJK&&(o.isCJK!==i.isCJK||i.isCJK))}static makeLetterNode(o,i,l,_,d){return{letter:o,ignored:o.match(s),next:null,prev:i,jumps:l,visited:!1,index:_,isCJK:d}}static queryToLinkedList(o){if(!o)return null;let i=o.split("");return i.length>1024&&(i=i.slice(0,1024)),Ds.queryToLinkedListWorker(i,0)}static queryToLinkedListWorker(o,i){if(i>=o.length)return null;const l=o[i],_=!!(l.match(s)&&(i!==0||o.length>1));return{letter:l,isSeparator:_,isSpace:l===" ",next:Ds.queryToLinkedListWorker(o,i+1),index:i}}static searchWordBoundariesOnly(o,i){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=Ds.searchWordBoundariesOnlyWorker(o,i,0,l);return _||(_=o.jumps.reduce((d,r)=>d||r===o?d:Ds.searchWordBoundariesOnlyWorker(r,i,1,l),null)),_}static searchWordBoundariesOnlyWorker(o,i,l){let _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!o||!i)return null;let d;if(!o.visited&&(o.letter===i.letter||o.ignored&&i.isSeparator)&&(d={node:o,count:l}),!d)return null;if(!i.next)return d;o.visited=!0;let r=Ds.searchWordBoundariesOnlyWorker(o.next,i.next,0,_),m=i.next;for(;m.isSeparator&&m.next;)m=m.next;return r||(r=o.jumps.reduce((h,v)=>h||v.visited||v===o||(_.searchForwardOnly||_.substringsOnly)&&v.index<o.index||_.substringsOnly&&v.index>o.index+2?h:Ds.searchWordBoundariesOnlyWorker(v,m,1,_),null)),o.visited=!1,r?(d.next=r,d):null}static countResult(o){return o?o.count+Ds.countResult(o.next):0}static containsAllLetters(o,i){let l=i;for(;l;){if(!(l.isSeparator||o.includes(l.letter)))return!1;l=l.next}return!0}constructor(o,i={}){this.normalizedQuery=(0,n.B)(o),this.queryNode=Ds.queryToLinkedList(this.normalizedQuery),this.options=i;var l;this.fuzzyLimit=(l=this.options.fuzzyLimit)!==null&&l!==void 0?l:1/0,this.queryNoSeparators=this.normalizedQuery.replace(s,"")}},"FuzzyMatcher")},8170659516:(j,p,e)=>{"use strict";e.d(p,{A:()=>c});var t=e(9289081806),n=e(8921478798),s=e(8701485242),a=e(5795074931);function c(o){let{state:i,mpim:l,matchData:_}=o;const d=(0,a.WR)(i);let r=[];if((0,t.Ug)(l)&&(r=(0,t.Ug)(l).filter(I=>d!==I)),!_)return r;const m=!1,h=!1,v=[];_.forEach(I=>{I.map(f=>({name:(0,n.I)(i,f.id,m,h),...f})).sort((f,g)=>f.score<g.score?1:f.score>g.score?-1:(0,s.Ay)(f.name,g.name)).filter(f=>isFinite(f.score)).forEach(f=>{r.includes(f.id)&&(v.push(f.id),r.splice(r.indexOf(f.id),1))})});const y=r.map(I=>({id:I,name:(0,n.I)(i,I,m,h)})).sort((I,T)=>(0,s.Ay)(I.name,T.name)).map(I=>I.id);return[...v,...y]}u(c,"getMemberDisplayOrderForSearcherMPIM")},220244708:(j,p,e)=>{"use strict";e.d(p,{B:()=>a});var t=e(6495946979),n=e(8170643398),s=e(3730613858);function a(c,o,i){if((0,n.fy)(o))return(0,t.b)(i);const l=(0,s.Ql)(c,i.id,o.id);return!!(l.isKnown&&l.isMember)}u(a,"isUserKnownToBeMemberOfChannel")},1072784641:(j,p,e)=>{"use strict";e.d(p,{A:()=>me});var t=e(7715417323),n=e(5729325965),s=e(1703559452),a=e(4249070636),c=e(5238395322),o=e(8086952004),i=e(2003990933),l=e(3037015781),_=e(8496310524),d=e(7111365413),r=e(9289081806),m=e(1407713935),h=e(8798294025),v=e(395285811),y=e(3890290905);const I=u(ue=>ue&&(ue.displayName||ue.display_name||(0,y.Y)(ue)),"getEmojiDisplayName"),T=u(ue=>ue?(ue.aliases?[ue,...ue.aliases]:[ue]).map(he=>({name:(0,y.Y)(he),displayName:I(he)})):null,"getAllEmojiNameObjects");var f=e(2188787324),g=e(102566929),M=e(5455782105),A=e(8170643398),O=e(9262712126),D=e(6120301420),E=e(3212336858),C=e(6839188756),S=e(2023092677),b=e(1033870301),k=e(796111729);const W={china:["pinching_hand","pinching-hand"],dead:["older_adult"],dump:["hindu_temple"],fail:["family"],gross:["flag-progress-pride"],hi:["shit"],hit:["shit"],hitler:["white_flower"],it:["shit"],macht:["mannlichkeitssymbol"],sh:["shit"],shi:["shit"],shoot:["school_satchel"],s:["shit"],sit:["shit"],sith:["person_with_headscarf"],war:["man-wearing-turban"],whine:["menorah_with_nine_branches"],worst:["woman-wrestling"],wrong:["woman-rowing-boat"]};var N=e(1917953477),V=e(2825917518),R=e(9422011462),P=e(3482349120),z=e(2332798892);const $=u(ue=>(ue||"").split(/\s+/)[0],"getFirstWord"),x=u(ue=>["/","\uFF0F"].includes((ue||"").charAt(0))?ue:`/${ue}`,"prependSlashToStr"),Y=u(ue=>((ue||"").split(/[^\S\n\r]+/g)||[]).length>1,"strHasSpace");var ne=e(8847766420),re=e(2762206868),_e=e(9101533895),G=e(4761125736),ge=e(8276911661),oe=e(3677514771);let me=u(class{filterMembers(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if((0,A.Zx)(J)||this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery){const K={item:J,score:0,id:J.id};return this.selfFirst&&(0,A.fy)(J)&&(K.isSelf=!0),ee.push(K),ee}const{score:X,scoreDetails:F}=this.scoreMember(J),L={item:J,score:X,scoreDetails:F,id:J.id};return!this.avoidExactMatchForMembers&&this.preferExactMatch&&(L.isExactMatch=this.isMemberExactMatch(J),L.exactMatchDetails=this.getMemberExactMatchDetails(J)),this.selfFirst&&(0,A.fy)(J)&&(L.isSelf=!0),X<=this.fuzzyLimit&&ee.push(L),ee},[])}scoreMember(ae){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher;const ce=1/0,ee={};if(this.queryIsMaybeSelf&&(0,A.fy)(ae))ee.self_score=0;else{const L=(0,O.j_)(ae),K=(0,O.sJ)(ae);ee.real_name=L?he.score(L):ce,ee.display_name=K?he.score(K):ce}if(this.shouldMatchEmail){const L=(0,O.ZL)(ae);ee.email=L?this.forwardOnlyMatcher.score(L):1/0}var J;const X=(J=(0,n.A)(Object.values(ee)))!==null&&J!==void 0?J:ce,F=Object.entries(ee).reduce((L,K)=>{let[B,Q]=K;return isFinite(Q)&&(L[B]=Q),L},{});return{score:X,scoreDetails:F}}filterChannels(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if((0,m.PC)(J)||(0,m.Zx)(J)||(0,v.jT)(J)||this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=(0,R.B)((0,r.SB)(ae,J,{publicChannelIncludeHashSign:!1})),F=this.matcher.score(X),L={item:J,score:F,id:J.id};this.preferExactMatch&&(L.isExactMatch=this.isChannelExactMatchPreNormalized(X));const K=this.options.entities&&this.options.entities.channels&&this.options.entities.channels.searchPreviousNames,B=J.previous_names&&J.previous_names.length;let Q=!1;if(K&&B){var q;const le=J==null||(q=J.previous_names)===null||q===void 0?void 0:q.map(De=>({score:this.matcher.normalizeAndScore(De),name:De}));L.previousNameScores=le,Q=(0,s.A)(le,De=>De.score<=this.fuzzyLimit);const Te=Q&&F>this.fuzzyLimit;let Ie;if(Te){const De=(0,a.A)(le,"score");Ie=De&&De.name}L.bestPreviousNameMatch=Ie}return F<=this.fuzzyLimit||Q?ee.push(L):this.rawQuery===J.id&&ee.push({item:J,score:0,id:J.id}),ee},[])}filterTeams(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if((0,C.Zx)(J)||this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=this.matcher.normalizeAndScore((0,C.F1)(J)),F={item:J,score:X,id:J.id};return this.preferExactMatch&&(F.isExactMatch=this.isTeamExactMatch(J)),X<=this.fuzzyLimit&&ee.push(F),ee},[])}filterUserGroups(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if((0,S.Zx)(J)||this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=this.scoreUserGroupName(J),F={item:J,score:X,id:J.id};return this.preferExactMatch&&(F.isExactMatch=this.isUsergroupExactMatch(J)),X<=this.fuzzyLimit&&ee.push(F),ee},[])}scoreUserGroupName(ae){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher,ce=1/0,ee=1/0;const J=(0,S.TZ)(ae)||(0,S.ue)(ae).toLocaleLowerCase(),X=(0,S.x_)(ae,{includeAtSign:!1});return ce=he.normalizeAndScore(J),X&&(ee=he.normalizeAndScore(X)),Math.min(ce,ee)}getSubQueryMatchers(){return this.query.split(/[,| ]/).filter(he=>!!he).map(he=>{const ce=he.charAt(0)==="@"?he.substring(1):he;return new V.A(ce,{fuzzyLimit:this.fuzzyLimit})})}filterMpims(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if(this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=(0,r.Ug)(J);if(!X)return ee;const F=X.map(Ie=>(0,ge.nv)(ae,Ie)).filter(Ie=>!(0,A.fy)(Ie)&&!(0,A.Zx)(Ie)),L={},K={},B=[];let Q=0;const q=this.getSubQueryMatchers();for(const Ie of q){const De=[];let pe=1/0;for(const fe of F){const{score:Z,scoreDetails:se}=this.scoreMember(fe,Ie),Ae=L==null?void 0:L[fe.id];Z<(Ae!==void 0?Ae:1/0)&&(L[fe.id]=Z,K[fe.id]={score_details:se}),De.push({id:fe.id,score:Z}),Z<pe&&(pe=Z)}B.push(De),Q+=pe}let le;isFinite(Q)?le=(0,c.A)(Object.values(L).filter(isFinite)):le=Q;const Te={id:J.id,item:J,score:le,scoreDetailsByMember:K,subqueryScoresByMember:B};return le<=this.fuzzyLimit?ee.push(Te):this.rawQuery===J.id&&ee.push({item:J,score:0,id:J.id}),ee},[])}filterIms(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if(this.shouldFilterItem(J,ce))return ee;const X=(0,h.e)(J);if(!X)return ee;const F=(0,ge.nv)(ae,X);if((0,A.Zx)(F))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const{score:L,scoreDetails:K}=this.scoreMember(F),B={item:J,score:L,scoreDetails:K,id:J.id};return!this.avoidExactMatchForMembers&&this.preferExactMatch&&(B.isExactMatch=this.isMemberExactMatch(F),B.exactMatchDetails=this.getMemberExactMatchDetails(F)),L<=this.fuzzyLimit?ee.push(B):this.rawQuery===J.id&&ee.push({item:J,score:0,id:J.id}),ee},[])}filterViews(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if(this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=this.matcher.normalizeAndScore(J.name),F={item:J,score:X,id:J.id};return this.preferExactMatch&&(F.isExactMatch=this.isViewOrModalExact(J)),X<=this.fuzzyLimit&&ee.push(F),ee},[])}filterModals(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if(this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=this.matcher.normalizeAndScore(J.name),F={item:J,score:X,id:J.id};return this.preferExactMatch&&(F.isExactMatch=this.isViewOrModalExact(J)),X<=this.fuzzyLimit&&ee.push(F),ee},[])}filterAppActions(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if((0,l.GU)(J)||this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=(0,_.u)(J),F=(0,re.sO)(ae,J.app_id),L=!(0,l.GU)(F)&&(0,d.fj)(F),K=L?[`${X} ${L}`,`${L} ${X}`]:[X],B=K.map(le=>this.matcher.normalizeAndScore(le)),Q=Math.min(...B),q={item:J,score:Q,id:J.id};return this.preferExactMatch&&(q.isExactMatch=!!(this.query&&K.map(R.B).includes(this.query))),Q<=this.fuzzyLimit&&ee.push(q),ee},[])}filterApps(ae,he,ce,ee){let J=arguments.length>4&&arguments[4]!==void 0?arguments[4]:t.A;const X={};return he!=null&&he.length&&he.forEach(F=>{const L=F.app_id;L&&!X[L]&&(X[L]={id:L,name:F.appName})}),ce!=null&&ce.length&&ce.forEach(F=>{const L=F==null?void 0:F.appId;L&&!X[L]&&(X[L]={id:L,name:F==null?void 0:F.appName})}),ee!=null&&ee.length&&ee.forEach(F=>{const L=F.appId;L&&!X[L]&&(X[L]={id:L,name:F.appName})}),this.filterShortcuts(ae,Object.values(X),!1,J)}filterShortcuts(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ee=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t.A;return he.reduce((J,X)=>{if((0,l.GU)(X)||this.shouldFilterItem(X,ee))return J;if(!this.query&&this.allowEmptyQuery)return J.push({item:X,score:0,id:X.id}),J;const{score:F,scoreDetails:L,bestNameMatch:K,bestNameIsExactMatch:B}=this.scoreShortcut(X,ce),Q={item:X,id:X.id,score:F};if(ce){Q.firstWordOfRawQuery=$(this.query);const q=(0,z.A)(X,x(Q.firstWordOfRawQuery),{allowPartialMatches:!1});Q.commandMatch=q&&this.isOpenedWithSlash,Q.isExactMatch=Q.commandMatch}return Q.scoreDetails=L,Q.bestNameMatch=K,Q.bestNameIsExactMatch=B,Q.isExactMatch=Q.isExactMatch||B,(F<=this.fuzzyLimit||Q.commandMatch)&&J.push(Q),J},[])}scoreShortcut(ae){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.matcher;const ee=this.isQueryExactlySlash?[]:ae.aliases||[];let J=(0,R.B)((0,E.fK)(ae));const X={name:ce.score(J),label:ce.normalizeAndScore(ae.label),desc:ce.normalizeAndScore((0,E.Hv)(ae)),app_name:ce.normalizeAndScore((0,E.qA)(ae))};he&&X.name!==void 0&&X.name>0&&(X.name-=1);let F,L,K;ee.forEach(le=>{let Te=(0,R.B)(le);!this.query.startsWith("/")&&!this.query.startsWith("\uFF0F")&&(Te=(0,N.O)(Te));const Ie=ce.score(Te);Te=(0,N.O)(Te),!K&&(F===void 0||Ie<F)&&(F=Ie,L=Te),this.normalizedQuery===Te&&(K=!0,L=Te)}),F!==void 0&&isFinite(F)&&(X.aliases=F);var B;const Q=(B=(0,n.A)(Object.values(X)))!==null&&B!==void 0?B:1/0;J=(0,N.O)(J),!K&&isFinite(X.name)&&(F===void 0||X.name<F)&&(L=J),this.normalizedQuery===J&&(K=!0,L=J);const q=Object.entries(X).reduce((le,Te)=>{let[Ie,De]=Te;return isFinite(De)&&(le[Ie]=De),le},{});return{score:Q,scoreDetails:q,bestNameMatch:L,bestNameIsExactMatch:K}}filterWorkflowTriggers(ae,he){return he.reduce((ce,ee)=>{if(!this.query&&this.allowEmptyQuery)return ce.push({item:ee,score:0,id:ee.id}),ce;const J=this.scoreWorkflowTrigger(ee),X={item:ee,score:J,id:ee.id};return this.preferExactMatch&&(X.isExactMatch=this.isTriggerExactMatch(ee)),J<=this.fuzzyLimit&&ce.push(X),ce},[])}scoreWorkflowTrigger(ae){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher;var ce;const ee={name:he.normalizeAndScore(ae.name),description:he.normalizeAndScore(ae.description),appName:he.normalizeAndScore((ce=ae.workflow.app)===null||ce===void 0?void 0:ce.name)};var J;return(J=(0,n.A)(Object.values(ee)))!==null&&J!==void 0?J:1/0}filterBroadcastKeywords(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if(this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=this.scoreBroadcastKeyword(J),F={item:J,score:X,id:J.id};return this.preferExactMatch&&(F.isExactMatch=this.isBroadcastKeywordExactMatch(J)),X<=this.fuzzyLimit&&ee.push(F),ee},[])}scoreBroadcastKeyword(ae){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher,ce=1/0,ee=1/0;const J=he.normalizeAndScore(ae.name);return ae.id==="BKchannel"&&(ce=he.normalizeAndScore("group")),ae.ms_name!==ae.name&&(ee=he.normalizeAndScore(ae.ms_name)),Math.min(J,ee,ce)}filterEmoji(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;const ee=[];return he.forEach(J=>{if(this.shouldFilterItem(J,ce))return;if(!this.query&&this.allowEmptyQuery){var X;ee.push({item:J,emojiScore:0,emojiMatchIndices:[],score:0,id:(X=J.id)!==null&&X!==void 0?X:J.name});return}var F;const L=(F=T(J))!==null&&F!==void 0?F:[];let K=1/0,B,Q,q,le,Te,Ie;L.forEach(Ae=>{let{name:Ce,displayName:Le}=Ae;if(Ce){const Ue=(0,R.B)(Ce),Pe=this.scoreEmojiName(Ue);(Pe.score<K||K===1/0)&&(K=Pe.score,B=Pe.matchIndices,Q=Ce,q=Ce,Te=Pe.queryLengthRatio,Ie=Pe.totalComboBreaks,le=this.query===Ue||Ce==="ok_hand"&&this.query==="ok")}if(Le&&Le!==Ce){const Ue=(0,R.B)(Le),Pe=this.scoreEmojiName(Ue);(Pe.score<K||K===1/0)&&(K=Pe.score,B=Pe.matchIndices,Q=Le,q=Ce,Te=Pe.queryLengthRatio,Ie=Pe.totalComboBreaks,le=this.query===Ue)}});const De=this.options&&this.options.entities&&this.options.entities.emoji&&this.options.entities.emoji.matchKeywords,pe=J.keywords,fe=!!(pe&&pe.length&&Array.isArray(pe));pe&&pe.length&&!Array.isArray(pe)&&(0,k.Ay)({state:ae}).error("https://slack.zendesk.com/agent/tickets/2393782",`Emoji keywords for ${J.name} is not an array - ${J.keywords}`);let Z=!1;if(K===1/0&&De&&fe&&(Z=J.keywords.some(Ae=>this.matcher.normalizeAndScore(Ae)<1/0),Z&&(Q=J&&(J.displayName||J.name))),K!==1/0||Z){const Ae=(0,o.A)(L,Ue=>{let{name:Pe}=Ue;return Pe===q}),Ce=Ae&&Ae.displayName;var se;const Le={item:J,score:K,emojiScore:K,emojiBestNameMatch:Q,emojiBestNameMatchCanonical:q,emojiBestNameMatchLocalized:Ce,emojiMatchIndices:B,emojiQueryLengthRatio:Te,emojiTotalComboBreaks:Ie,id:(se=J.id)!==null&&se!==void 0?se:J.name};this.preferExactMatch&&(Le.isExactMatch=le,Le.isEmojiExactMatch=le),ee.push(Le)}}),ee}scoreEmojiName(ae){const he={score:1/0,matchIndices:[],queryLengthRatio:0,totalComboBreaks:null};if(!ae)return he;if(ae==="ok_hand"&&this.query==="ok")return{score:0,matchIndices:[0,1],queryLengthRatio:1,totalComboBreaks:0};if(W[this.query]&&W[this.query].indexOf(ae)!==-1)return he;const ce=this.query.length,ee=[];let J=2,X=5;ce<3?(J=0,X=0):ce===3?(J=1,X=1):ce===4&&(J=1);let F=1/0,L=0,K=null,B=ae.indexOf(this.query);if(B===-1&&(B=ae.indexOf(this.query[0])),B!==-1){const Q=/\s+/g,q=/[-]+/g,le=this.query.replace(Q,"").replace(q,"_"),Te=ae.replace(q,"_"),Ie=le.split("");K=0;let De=0,pe=0,fe=!0;for(let Z=B;Z<Te.length;Z++){if(Te[Z]===Ie[0]){if(fe=!0,ee.push(Z),Ie.shift(),pe>De&&(De=pe),pe=0,Ie.length===0)break}else fe&&(K+=1),fe=!1,pe+=1;if(K>J)return{score:F,matchIndices:ee,queryLengthRatio:L,totalComboBreaks:K};if(pe>X)return{score:F,matchIndices:ee,queryLengthRatio:L,totalComboBreaks:K}}if(Ie.length>0)return he;L=le.length/Te.length,F=1-L,K>0&&(F+=K)}return{score:F,matchIndices:ee,queryLengthRatio:L,totalComboBreaks:K}}filterFiles(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;const ee=(0,D.hq)(ae),J=(0,ne.Kc)(ae),X=(0,oe._J)(ae,J),F=(0,M.k)(ae),L=X&&(0,C.qR)(X),K=!F&&!L,B=(0,G._Z)(ae,"native_dlp_canvas")==="on";return he.reduce((Q,q)=>{var le,Te;if((0,l.GU)(q)||(0,f.sR)(q))return Q;const Ie=(le=this.options)===null||le===void 0||(Te=le.entities)===null||Te===void 0?void 0:Te.files,De=!!(Ie!=null&&Ie.includeChannelCanvases)||!!(Ie!=null&&Ie.onlyChannelCanvases);if(q&&(0,f.aD)(q)&&!De)return Q;const pe=q&&(0,f.CA)(q),fe=q==null?void 0:q.user_team,Z=fe?(0,oe._J)(ae,fe):null;var se;const Ce=((se=(0,C.Ss)(Z??void 0))!==null&&se!==void 0?se:fe)!==J;if(pe&&(Ce||K)||B&&(0,f.Sp)(q)||q&&ee&&(Ie!=null&&Ie.onlyChannelCanvases||K)&&(0,f.wL)(q)||this.shouldFilterItem(q,ce))return Q;if(!this.query&&this.allowEmptyQuery)return Q.push({item:q,score:0,id:q.id}),Q;const Le=this.scoreFile(ae,q),Ue={item:q,score:Le,id:q.id};return this.preferExactMatch&&(Ue.isExactMatch=this.isFileExactMatch(q)),Le<=this.fuzzyLimit&&Q.push(Ue),Q},[])}scoreFile(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.matcher;const ee=he.name?ce.normalizeAndScore(he.name):1/0,J=he.title&&he.name!==he.title?ce.normalizeAndScore(he.title):1/0,X=he.external_url?ce.normalizeAndScore(he.external_url):1/0,F=he.permalink?ce.normalizeAndScore(he.permalink):1/0;let L=1/0;if((0,f.aD)(he)){const K=(0,g.Iz)(he),B=(0,_e.OL)(ae,K);if(B){const Q=(0,R.B)((0,r.SB)(ae,B,{publicChannelIncludeHashSign:!1}));L=this.matcher.score(Q)}}return Math.min(ee,J,X,F,L)}filterLists(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if(this.shouldFilterItem(J,ce))return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=this.scoreList(J),F={item:J,score:X,id:J.id};return this.preferExactMatch&&(F.isExactMatch=this.isListExactMatch(J)),X<=this.fuzzyLimit&&ee.push(F),ee},[])}scoreList(ae){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher).normalizeAndScore(ae.title)}filterListRecords(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if(this.shouldFilterItem(J,ce)||!J.name||!J.listTitle)return ee;if(!this.query&&this.allowEmptyQuery)return ee.push({item:J,score:0,id:J.id}),ee;const X=this.scoreListRecord(J),F={item:J,score:X,id:J.id};return this.preferExactMatch&&(F.isExactMatch=this.isListRecordExactMatch(J)),X<=this.fuzzyLimit&&ee.push(F),ee},[])}scoreListRecord(ae){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher).normalizeAndScore(ae.name)}filterChannelSections(ae,he){let ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return he.reduce((ee,J)=>{if(this.shouldFilterItem(J,ce))return ee;const X=(0,b.v2)(ae,J),F=this.matcher.normalizeAndScore(X),L={item:J,score:F,id:J.id};return!this.query&&this.allowEmptyQuery?(ee.push(L),ee):(F<=this.fuzzyLimit&&ee.push(L),ee)},[])}shouldFilterItem(ae,he){return he(ae)===!1||this.filter(ae)===!1}getMemberExactMatchDetails(ae){const he={},ce=(0,O.j_)(ae),ee=(0,O.sJ)(ae);return he.real_name=ce===this.query,he.display_name=ee===this.query,this.shouldMatchEmail&&(he.email=(0,O.ZL)(ae)===this.query),he}isMemberExactMatch(ae){return!this.query||!this.query.length?!1:(0,s.A)(this.getMemberExactMatchDetails(ae),Boolean)}isChannelExactMatchPreNormalized(ae){return!this.query||!this.query.length?!1:ae===this.query}isFileExactMatch(ae){if(!this.query||!this.query.length)return!1;var he,ce;return(0,R.B)(ae.name)===this.query||(0,R.B)(ae.title)===this.query||(0,R.B)((he=ae.external_url)!==null&&he!==void 0?he:void 0)===this.query||(0,R.B)((ce=ae.permalink)!==null&&ce!==void 0?ce:void 0)===this.query}isListExactMatch(ae){return!this.query||!this.query.length?!1:(0,R.B)(ae.title)===this.query}isListRecordExactMatch(ae){return!this.query||!this.query.length?!1:(0,R.B)(ae.name)===this.query}isTeamExactMatch(ae){return!this.query||!this.query.length?!1:(0,R.B)((0,C.F1)(ae))===this.query}isUsergroupExactMatch(ae){return!this.query||!this.query.length?!1:(0,R.B)((0,S.x_)(ae))===this.query||(0,R.B)((0,S.ue)(ae))===this.query}isTriggerExactMatch(ae){return!this.query||!this.query.length?!1:(0,R.B)(ae.name)===this.query}isBroadcastKeywordExactMatch(ae){return!this.query||!this.query.length?!1:(0,R.B)(ae.name)===this.query||(0,R.B)(ae.ms_name)===this.query}isViewOrModalExact(ae){return!this.query||!this.query.length?!1:(0,R.B)(ae.name)===this.query}filterHelpArticles(ae,he){const ee=he.reduce((J,X)=>{const F=(0,R.B)(X.title),L=this.substringMatcher.normalizeAndScore(X.title);return L>this.fuzzyLimit?J:J.concat({item:{...X,id:String(X.id)},score:L,isExactMatch:F===this.query,id:String(X.id)})},[]).sort((J,X)=>J.score-X.score);return ee.slice(0,Math.min(5,ee.length))}filterSalesforceRecordSuggestions(ae,he){const ee=he.reduce((J,X)=>{const F=X.label;if(!F)return J;const L=(0,R.B)(F),K=this.substringMatcher.normalizeAndScore(L);if(K>this.fuzzyLimit)return J;const B=X.id;return J.concat({item:{...X,name:F,recordType:X.objectType},score:K,isExactMatch:L===this.query,id:B})},[]).sort((J,X)=>J.score-X.score);return ee.slice(0,Math.min(5,ee.length))}filterSalesListViews(ae,he){return he.reduce((ee,J)=>{const X=J.label;if(!X)return ee;const F=(0,R.B)(X),L=this.substringMatcher.normalizeAndScore(F);if(L>this.fuzzyLimit)return ee;const K=J.id;return ee.concat({item:{...J,id:K,name:X},score:L,isExactMatch:F===this.query,id:K})},[])}constructor({query:ae="",options:he={entities:{}}}){var ce,ee,J,X,F,L,K,B,Q,q,le,Te,Ie;this.options=he,this.rawQuery=ae,this.query=(0,R.B)(ae);var De;this.fuzzyLimit=(De=this.options.fuzzyLimit)!==null&&De!==void 0?De:3,this.allowEmptyQuery=!!this.options.allowEmptyQuery,this.preferExactMatch=!!(this.options.sort&&this.options.sort.preferExactMatch),this.avoidExactMatchForMembers=!!(!((ce=this.options)===null||ce===void 0||(ee=ce.sort)===null||ee===void 0)&&ee.avoidExactMatchForMembers),this.selfFirst=!!(!((J=this.options)===null||J===void 0||(X=J.sort)===null||X===void 0)&&X.selfFirst),this.filter=this.options.filter||t.A,this.shouldMatchEmail=(0,i.A)(this.options,"entities.members.matchEmailField")||(0,i.A)(this.options,"entities.channels.matchEmailField"),this.queryIsMaybeSelf=(0,P.t)(ae),this.normalizedQuery=this.query,!((F=this.options)===null||F===void 0||(L=F.entities)===null||L===void 0||(K=L.shortcuts)===null||K===void 0)&&K.queryStartsWithSlash&&(this.query=x(this.query)),this.matcher=new V.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK}),this.forwardOnlyMatcher=new V.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK,searchForwardOnly:this.options.fuzzyEmailSearchForwardOnly}),this.substringMatcher=new V.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK,substringsOnly:!0}),this.isOpenedWithSlash=!!(!((B=this.options)===null||B===void 0||(Q=B.entities)===null||Q===void 0||(q=Q.shortcuts)===null||q===void 0)&&q.isOpenedWithSlash),this.isQueryExactlySlash=!!(!((le=this.options)===null||le===void 0||(Te=le.entities)===null||Te===void 0||(Ie=Te.shortcuts)===null||Ie===void 0)&&Ie.isQueryExactlySlash)}},"SearcherMatcher")},1399977320:(j,p,e)=>{"use strict";e.d(p,{A:()=>M});var t=e(3367239067),n=e(1703559452),s=e(7264301376),a=e(129753175),c=e(9289081806),o=e(1407713935),i=e(6007206761),l=e(6495946979),_=e(8170643398),d=e(3534324375),r=e(6839188756),m=e(9190452268),h=e(8701485242),v=e(181849556),y=e(220244708),I=e(5795074931),T=e(9101533895),f=e(8276911661);const g={starredChannel:10,memberOfThisChannel:25,archivedChannel:-50,deactivatedMember:-50,mpimWithDeactivatedMember:-50,channelFromAnotherTeam:-15,notInChannel:-25,userGroupOrKeyword:-25,fuzzyMatch:50,emojiMatch:150,exactMatch:100,matchesPreviousName:-50,workflowAssociatedWithChannel:250,popularEmoji:1,isSelf:250};let M=u(class{sort(O,D){var E;const C=(0,m.Cy)({state:O});C.mark("modern-searcher-sorting-mark");const{members:S,channels:b,mpims:k,ims:W,teams:N,userGroups:V,emoji:R,broadcastKeywords:P,views:z,modals:$,appActions:x,channelSections:Y,emails:ne,files:re,lists:_e,listRecords:G,slashCommands:ge,slackGlobalActions:oe,quipShortcutCommands:me,channelActions:ue,fakeGlobalActions:ae,callActions:he,apps:ce,helpArticles:ee,salesforceRecords:J,workflowTriggers:X,salesListViews:F}=D,L={memberChannels:[],nonmemberChannels:[],archivedChannels:[]};b&&b.reduce((Te,Ie)=>(0,i.F)(Ie.item)?(Te.archivedChannels.push(Ie),Te):((0,l.b)(Ie.item)?Te.memberChannels.push(Ie):Te.nonmemberChannels.push(Ie),Te),L);let K=[...S||[],...L.memberChannels,...k||[],...W||[],...R||[],...V||[],...P||[],...z||[],...$||[],...x||[],...Y||[],...ne||[],...re||[],..._e||[],...G||[],...he||[],...ue||[],...ae||[],...ce||[],...ee||[],...X||[],...J||[],...F||[]],B=[...L.nonmemberChannels,...N||[],...ge||[],...oe||[],...me||[]],Q=L.archivedChannels;const q=this.getSortFuzzyFunction(O,{localeAware:!0});this.options.flat||(K=this.precomputeMatchNames(O,K).sort(q),B=this.precomputeMatchNames(O,B).sort(q),Q=this.precomputeMatchNames(O,Q).sort(q));let le=[...K,...B,...Q];return this.options.flat&&le.sort(q),this.options.preferExactMatch&&(le=[...(0,t.A)(le,Ie=>Ie.isExactMatch),...le]),this.options.frecency&&(this.options.normalize=!0,C.mark("modern-searcher-frecency-sort-mark"),this.options.modelOnly?le=(0,v.jW)(O,{query:this.query,list:le,bonusPoints:this.getFrecencyBonusPointsFunction(O)}):le=(0,v.Zh)(O,{query:this.query,list:le,bonusPoints:this.getFrecencyBonusPointsFunction(O)}),C.measureAndClear("modern-searcher-frecency-sort-mark","modern-searcher-frecency-sort")),this.options.selfFirst&&!(!((E=le[0])===null||E===void 0)&&E.isSelf)&&(le=[...(0,t.A)(le,Ie=>Ie.isSelf),...le]),C.measureAndClear("modern-searcher-sorting-mark","modern-searcher-sorting"),le}precomputeMatchNames(O,D){return D.map(E=>({...E,name:this.getNameForComparison(O,E)}))}getSortFuzzyFunction(O,D){let{localeAware:E}=D;return(C,S)=>{if((0,o.yz)(C.item)&&!(0,o.yz)(S.item))return 1;if((0,o.yz)(S.item)&&!(0,o.yz)(C.item)||(0,o.LI)(C.item)&&!(0,o.LI)(S.item))return-1;if((0,o.LI)(S.item)&&!(0,o.LI)(C.item))return 1;if(!(0,o.yz)(C.item)&&!(0,o.yz)(S.item)){const P=C.score-S.score;if(P!==0)return P}if((0,o.yz)(C.item)&&(0,o.yz)(S.item)){const P=C.score-S.score;if(P!==0)return P;var b,k;const z=((b=(0,c.N4)(C.item))!==null&&b!==void 0?b:0)-((k=(0,c.N4)(S.item))!==null&&k!==void 0?k:0);if(z!==0)return z}var W;const N=(W=C.name)!==null&&W!==void 0?W:"";var V;const R=(V=S.name)!==null&&V!==void 0?V:"";return E?(0,h.Ay)(N,R):N>R?1:R>N?-1:0}}getFrecencyBonusPointsFunction(O){return D=>{var E,C;const{item:S}=D,b={};if((0,o.yz)(S)){if(b.isMpim=0,this.options.preferMpimsWithActiveMembers){const k=(0,c.Ug)(S);if(!k)return b;const W=k.map(N=>(0,f.nv)(O,N));(0,n.A)(W,N=>(0,_.oy)(N)||(0,_.eJ)(N))&&(b.isMpimWithDeactivatedMember=g.mpimWithDeactivatedMember)}return b}if(D.isExactMatch?(b.isExactMatch=g.exactMatch,D.isEmojiExactMatch&&(b.isEmojiExactMatch=g.exactMatch)):D.emojiScore?b.emojiScoreBonus=this.calculateNormalizedFuzzyBonusPoints(D,"emojiScore",g.emojiMatch):(0,i.F)(S)||(0,_.oy)(S)||(0,_.eJ)(S)||(b.fuzzyScoreBonus=this.calculateNormalizedFuzzyBonusPoints(D,"score",g.fuzzyMatch)),D.bestPreviousNameMatch&&(b.onlyMatchesPreviousName=g.matchesPreviousName),this.options.preferChannelMembers&&S.presence&&this.options.currentChannel&&(0,y.B)(O,S,this.options.currentChannel)&&(b.isMemberOfThisChannel=g.memberOfThisChannel),(0,o.jq)(S)&&(0,c.m2)(O,S)&&(b.isStarred=g.starredChannel),(0,_.NB)(S)){const k=(0,T.Pu)(O,S.id);k&&(0,c.m2)(O,k)&&(b.isStarred=g.starredChannel)}return S.is_emoji&&(S.name==="thumbsup"||S.name==="point_up")&&(b.isPopularEmojiVariant=g.popularEmoji),this.options.selfFirst&&(0,_.fy)(S)&&(b.isSelf=g.isSelf),this.options.preferChannelWorkflows&&S.type==="channel_action"&&S.channelId===((E=this.options)===null||E===void 0||(C=E.currentChannel)===null||C===void 0?void 0:C.id)&&(b.isWorkflowAssociatedWithChannel=g.workflowAssociatedWithChannel),((0,o.rW)(S)||(0,o.Zp)(S))&&((0,i.F)(S)&&(b.isArchived=g.archivedChannel),(0,o.rW)(S)&&this.options.preferChannelsUserBelongsTo&&!(0,i.F)(S)&&!(0,l.b)(S)&&(b.isNotChannelMember=g.notInChannel),(0,I.u8)(O)&&(0,c.lo)(S)&&(b.isChannelFromAnotherTeam=g.channelFromAnotherTeam)),(0,_.NB)(S)&&((0,_.oy)(S)||(0,_.eJ)(S))&&(b.isDeactivatedMember=g.deactivatedMember),(S.is_usergroup||S.is_broadcast_keyword)&&(b.isUserGroupOrKeyword=g.userGroupOrKeyword),b}}calculateNormalizedFuzzyBonusPoints(O,D,E){const C=O[D];if(!(0,s.A)(C))return 0;const S=.5**C;return Math.round(E*S)}getNameForComparison(O,D){let E;const C=D.item;return(0,o.yz)(C)?E=C.name_normalized:(0,o.mz)(C)?E=(0,a.A)((0,c.SB)(O,C,{publicChannelIncludeHashSign:!1})):(0,_.NB)(C)?E=(0,d.sE)(O,C):C.is_usergroup?E=C.handle||C.name:C.team_name?E=(0,a.A)((0,r.F1)(C)):C.isEmail?E=(0,a.A)(C.value):C.title?E=C.title:E=C.name,E}constructor({query:O,options:D={}}){this.options=D,this.query=O}},"SearcherSorter")},9868740303:(j,p,e)=>{"use strict";e.d(p,{A:()=>Te});var t=e(8571983633),n=e(9746734072),s=e(9113979368),a=e(897091071),c=e(7715417323),o=e(1703559452),i=e(2141441167),l=e(5503876160),_=e(6422693406),d=e(8737667238),r=e(7599421656),m=e(6987519067),h=e(9552526132),v=e(4423055085),y=e(5613323535),I=e(1197508738),T=e(5455782105),f=e(3212336858),g=e(9931116838),M=e(411655882),A=e(2229186),O=e(6244014364),D=e(5751973043),E=e(82287009),C=e(9190452268),S=e(5770715593),b=e(6617433054),k=e(4096483543),W=e(6471801899),N=e(1917953477),V=e(1072784641),R=e(1399977320),P=e(8956261571),z=e(8847766420),$=e(4119164726),x=e(6533394955),Y=e(6451390137),ne=e(2854654447),re=e(9107158149),_e=e(7688940281),G=e(2235302340),ge=e(9101533895),oe=e(6728717861),me=e(7600673124),ue=e(3829348308),ae=e(4761125736),he=e(937317117),ce=e(761034736),ee=e(4224126550),J=e(9706240641),X=e(1031947056),F=e(9174292896);const L=(0,X.Ay)("Fetch list records for lists mentions",function(){var Ie=(0,J.coroutine)(function*(De,pe,fe){let{query:Z}=fe;const se=(0,W.V3)(Z);if(!se)return;const{listTitle:Ae}=se,Ce=(0,ee.Mr)(pe()),Le=(0,W.xL)(Ce,Ae);if(!Le)return;const Ue=Le.id;yield De((0,F.D)({listId:Ue}))});return function(De,pe,fe){return Ie.apply(this,arguments)}}());L.meta={name:"createThunk",key:"createThunkfetchForMentions",description:"Fetch list records for lists mentions"};var K=e(4525672255),B=e(8276911661),Q=e(1835177371);class q{search(De){let{query:pe,options:fe}=De;var Z;if(this.maybeStartSession(pe),((0,t.A)(pe)||!pe.length)&&!fe.allowEmptyQuery)return _.S.resolve(D.Ml);if((0,n.A)(pe))return this.bulkSearch({queryRecords:pe,options:fe});const se=(0,x.getStateByTeamId)(this.teamId),Ae=(0,C.Cy)({state:se}),Ce=(0,d.A)();Ae.mark(`modern-searcher-search-mark-${Ce}`);const Le=(0,N.O)(pe??"");y.LI.start({label:y.gC.Searcher,id:Ce,options:{teamId:(0,z.ZT)(se),tags:this.getTraceTags({query:Le,options:fe})}});const Ue=(Z=y.LI.get({label:y.gC.Searcher,id:Ce}))===null||Z===void 0?void 0:Z.createChildSpan({name:"searcher:search"}),Pe=(0,m.aw)(fe,m.lp,pe);if((0,s.A)(Pe))return _.S.resolve(D.Ml);if((0,I.x)(se)!==oe.M9.ONLINE||!(fe!=null&&fe.allowEmptyQueryRemoteSearch)&&!Le.length&&(0,k.A)()&&(0,ae._Z)(se,"searcher_local_empty_string")==="treatment"&&!fe.entities.lists)return _.S.resolve(this.searchLocal({query:Le,options:Pe,autoTraceId:Ce,parentSpanId:Ue==null?void 0:Ue.getId()}));const He=this.fetchRemote({query:Le,options:Pe,autoTraceId:Ce,parentSpanId:Ue==null?void 0:Ue.getId()}).then(Qe=>this.processFetchedEntities({query:Le,data:Qe,options:Pe,autoTraceId:Ce,parentSpanId:Ue==null?void 0:Ue.getId()}));if(Pe.tiered){const Qe=this.searchLocal({query:Le,options:Pe,autoTraceId:Ce,parentSpanId:Ue==null?void 0:Ue.getId()});return Qe.promise=He.finally(()=>{Ue==null||Ue.close(),y.LI.stop({label:y.gC.Searcher,id:Ce})}),_.S.resolve(Qe).finally(()=>{Ae.measureAndClear(`modern-searcher-search-mark-${Ce}`,"modern-searcher-search-tiered")})}return He.finally(()=>{Ae.measureAndClear(`modern-searcher-search-mark-${Ce}`,"modern-searcher-search"),Ue==null||Ue.close(),y.LI.stop({label:y.gC.Searcher,id:Ce})})}flattenResultsWithQueryId(De){let{returnedResults:pe,queryIds:fe}=De;const Z=pe;for(let se=0;se<pe.length;se++)for(let Ae=0;Ae<pe[se].length;Ae++)Z[se][Ae].queryId=fe[se];return(0,a.A)(Z)}bulkSearch(De){let{queryRecords:pe,options:fe}=De;const Z=(0,x.getStateByTeamId)(this.teamId),se=(0,C.Cy)({state:Z}),Ae=(0,d.A)();se.mark(`modern-searcher-search-mark-${Ae}`);const Ce=(0,m.aw)(fe,m.lp,"");if((0,s.A)(Ce))return _.S.resolve(D.Ml);const Le=pe.map(qe=>qe.query),Ue=pe.map(qe=>qe.queryId),Pe=Le.map(qe=>(0,N.O)(qe));let He,Qe;if((0,I.x)(Z)!==oe.M9.ONLINE)return Qe=Pe.map(qe=>this.searchLocal({query:qe,options:Ce})),He=this.flattenResultsWithQueryId({returnedResults:Qe,queryIds:Ue}),_.S.resolve(He);const lt=this.fetchRemote({query:Pe,options:Ce}).then(qe=>(Qe=qe.map((ct,tt)=>this.processFetchedEntities({query:Pe[tt],data:ct,options:Ce})),this.flattenResultsWithQueryId({returnedResults:Qe,queryIds:Ue})));return Ce.tiered?(Qe=Pe.map(qe=>this.searchLocal({query:qe,options:Ce})),He=this.flattenResultsWithQueryId({returnedResults:Qe,queryIds:Ue}),He.promise=lt,_.S.resolve(He).finally(()=>{se.measureAndClear(`modern-searcher-search-mark-${Ae}`,"modern-searcher-search-tiered")})):lt.finally(()=>{se.measureAndClear(`modern-searcher-search-mark-${Ae}`,"modern-searcher-search")})}searchLocal(De){let{query:pe,options:fe,autoTraceId:Z,parentSpanId:se}=De;var Ae;const Ce=(0,x.getStateByTeamId)(this.teamId);let Le=Z;Le||(Le=(0,d.A)(),y.LI.start({label:y.gC.Searcher,id:Le,options:{teamId:(0,z.ZT)(Ce),tags:this.getTraceTags({query:pe,options:fe})}}));const Ue=(Ae=y.LI.get({label:y.gC.Searcher,id:Le}))===null||Ae===void 0?void 0:Ae.createChildSpan({name:"searcher:search_local",additionalSpanOptions:{parentSpanId:se}});if(!pe.length&&!fe.allowEmptyQuery)return[];const Pe=(0,m.aw)(fe,m.lp,pe);if((0,s.A)(Pe))return[];const He=(0,N.O)(pe),Qe=this.fetchLocal({query:pe,options:Pe}),lt=this.processFetchedEntities({query:He,data:Qe,options:Pe,autoTraceId:Le,parentSpanId:Ue==null?void 0:Ue.getId()});return Ue==null||Ue.close(),lt}fetchRemote(De){let{query:pe,options:fe,autoTraceId:Z,parentSpanId:se}=De;var Ae;const Ce=(0,x.getStateByTeamId)(this.teamId),Le=(Ae=y.LI.get({label:y.gC.Searcher,id:Z}))===null||Ae===void 0?void 0:Ae.createChildSpan({name:"searcher:fetch_remote",additionalSpanOptions:{parentSpanId:se}});this.pendingRequests.forEach(xe=>xe.cancel()),this.pendingRequests=[];const Ue=[],Pe=[],{channels:He,emoji:Qe,files:lt,lists:qe,members:ct,teams:tt,userGroups:it,appActions:Ge,workflowTriggers:We}=fe.entities;if(ct){let xe;(0,n.A)(pe)?xe=(0,x.dispatchForTeamId)(this.teamId,(0,m.U7)({queries:pe,options:fe})):xe=(0,x.dispatchForTeamId)(this.teamId,(0,m.QH)({query:pe,options:fe})),this.pendingRequests.push(xe),ct.runaway?Pe.push(xe):Ue.push(xe)}if(He&&!(0,n.A)(pe)){const xe=(0,x.dispatchForTeamId)(this.teamId,(0,m.J6)({query:pe,options:fe}));this.pendingRequests.push(xe),He.runaway?Pe.push(xe):Ue.push(xe)}if(Qe&&!(0,n.A)(pe)){const xe=(0,x.dispatchForTeamId)(this.teamId,(0,m.LR)({query:pe,options:fe}));this.pendingRequests.push(xe),Qe.runaway?Pe.push(xe):Ue.push(xe)}if(lt&&!(0,n.A)(pe)&&((0,b.A)(pe)||pe.length>3)){const xe=(0,x.dispatchForTeamId)(this.teamId,(0,m.cD)({query:pe,options:fe}));this.pendingRequests.push(xe),lt.runaway?Pe.push(xe):Ue.push(xe)}if(qe&&!(0,n.A)(pe)){const xe=(0,x.dispatchForTeamId)(this.teamId,pe.indexOf(">")<0?(0,K.E)({query:pe}):L({query:pe}));this.pendingRequests.push(xe),qe.runaway?Pe.push(xe):Ue.push(xe)}if(it){let xe;(0,n.A)(pe)?xe=(0,x.dispatchForTeamId)(this.teamId,(0,m.eR)({queries:pe,options:fe})):xe=(0,x.dispatchForTeamId)(this.teamId,(0,m.UC)({query:pe,options:fe})),this.pendingRequests.push(xe),it.runaway?Pe.push(xe):Ue.push(xe)}if(tt&&((0,T.k)(Ce)||tt.onlyExternal||tt.includeExternal)&&!(0,n.A)(pe)){const xe=(0,x.dispatchForTeamId)(this.teamId,(0,m.DF)({query:pe,options:fe}));this.pendingRequests.push(xe),tt.runaway?Pe.push(xe):Ue.push(xe)}if((0,g.e)(Ce)&&Ge){const xe=(0,x.dispatchForTeamId)(this.teamId,(0,ne.G)()).timeout(2e3).catch(c.A);this.pendingRequests.push(xe),Ge.runaway?Pe.push(xe):Ue.push(xe)}if(We&&!(0,n.A)(pe)){const xe=(0,x.dispatchForTeamId)(this.teamId,(0,m.fx)({query:pe}));We.runaway?Pe.push(xe):Ue.push(xe)}return _.S.all(Ue).then(xe=>{let ze;if((0,n.A)(pe))ze=pe.map(bt=>this.fetchLocal({query:bt,options:fe})).map(bt=>{const gt={...bt};return gt.remoteIds=(0,m.jl)(xe),gt});else{if(ze=this.fetchLocal({query:pe,options:fe}),ze.remoteIds=(0,m.jl)(xe),ct&&ct.onlyFromExternalWorkspaceId){var mt,pt;ze.members=(pt=(mt=xe.find(bt=>!!bt.members))===null||mt===void 0?void 0:mt.members)!==null&&pt!==void 0?pt:D.Ml}const It=(0,o.A)((0,i.A)(ze),"length");if(Pe.length&&!It)return _.S.all(Pe).then(()=>this.fetchLocal({query:pe,options:fe}))}return Le==null||Le.close(),ze}).finally(()=>{this.pendingRequests=[]})}fetchLocal(De){let{query:pe,options:fe}=De;const Z=(0,x.getStateByTeamId)(this.teamId);(0,m.ZD)(fe);const se={},{members:Ae,channels:Ce,teams:Le,userGroups:Ue,appActions:Pe,views:He,broadcastKeywords:Qe,emoji:lt,files:qe,lists:ct,channelSections:tt,emails:it,modals:Ge,shortcuts:We,workflowTriggers:xe,helpArticles:ze}=fe.entities;if(Ce&&(Ce.includePublic||Ce.includePrivate)&&(se.channels=(0,m.AC)(Z,fe)),Ce&&Ce.includeMpims&&(se.mpims=(0,ge.FS)(Z)),Ce&&Ce.includeIms&&(se.ims=(0,ge._B)(Z)),Ae&&(se.members=Ae.onlyFromExternalWorkspaceId?D.Ml:(0,B.I_)(Z).filter(It=>(0,re.zP)(Z,It.id)&&!(0,me.y)(Z,It.id))),Le&&(se.teams=(0,m.mi)(Z,fe)),Ue&&(se.userGroups=(0,Q.jJ)(Z)),Pe&&(se.appActions=(0,r.B)(Z)?(0,Y.PL)(Z):(0,m.g2)(Z,Pe.channel)),qe&&(se.files=(0,he.Gn)(Z)),ct&&(pe.indexOf(">")<0?se.lists=(0,ee.C0)(Z):se.listRecords=(0,ee.vD)(Z,pe)),He&&(se.views=(0,m.mK)(Z)),Ge&&(se.modals=(0,m.A$)(Z)),Qe){var mt;const It=Qe.currentChannel?Qe.currentChannel.id:null;se.broadcastKeywords=!((mt=fe.entities.broadcastKeywords)===null||mt===void 0)&&mt.includeAll||!It?(0,M.A)():(0,A.A)(Z,It)}if(lt&&(se.emoji=(0,ue.Gt)(Z)),tt&&(se.channelSections=(0,i.A)((0,G.jV)(Z))),(We!=null&&We.slashCommands||We!=null&&We.fakeGlobalActions)&&!(We!=null&&We.isAnnounceOnly)&&(se.slashCommands=(0,r.B)(Z)?(0,E.A_)(Z,We.channel,!!We.threadTs,!0).map(It=>({...It,id:(0,f.Bs)(It),isSlashCommand:!0})):(0,m.lS)(Z,We.channel,We.threadTs)),We!=null&&We.slackGlobalActions&&(se.slackGlobalActions=(0,E.Yk)(Z,We.channel,We.threadTs)),We!=null&&We.quipShortcutCommands&&(se.quipShortcutCommands=(0,$.Aw)(Z,!!pe)),We!=null&&We.channelActions&&(se.channelActions=(0,_e.fo)(Z,We.channel)),We!=null&&We.fakeGlobalActions&&(se.fakeGlobalActions=(0,E.JL)(Z,We.channel,We.threadTs)),We!=null&&We.callActions&&(se.callActions=(0,E.Uw)(Z,We.channel,We.threadTs,We.isAnnounceOnly)),xe){const It=(0,E.NJ)(Z);xe.includeAutomated?se.workflowTriggers=It:se.workflowTriggers=It.filter(bt=>bt.type===h.M.Shortcut)}it&&(se.emails=(0,m.FF)(pe));const pt=(0,S.dL)(Z);return ze&&pt&&(se.helpArticles=(0,ce.Fb)(Z,"searcher/fetch_all_articles")),(0,m.S)(),se}processFetchedEntities(De){let{query:pe,data:fe,options:Z,autoTraceId:se,parentSpanId:Ae}=De;var Ce,Le,Ue;const Pe=(0,x.getStateByTeamId)(this.teamId),He=(Ce=y.LI.get({label:y.gC.Searcher,id:se}))===null||Ce===void 0?void 0:Ce.createChildSpan({name:"searcher:process",additionalSpanOptions:{parentSpanId:Ae}});(0,m.ZD)(Z);const Qe={},lt=new V.A({query:pe,options:Z}),qe=(0,C.Cy)({state:Pe});qe.mark("modern-searcher-matching-mark");const ct=(Le=y.LI.get({label:y.gC.Searcher,id:se}))===null||Le===void 0?void 0:Le.createChildSpan({name:"searcher:searcher_match",additionalSpanOptions:{parentSpanId:He==null?void 0:He.getId()}});if(fe.channels&&(Qe.channels=lt.filterChannels(Pe,fe.channels,(0,m.sr)(Pe,Z.entities.channels))),fe.members&&(Qe.members=lt.filterMembers(Pe,fe.members,(0,m.bE)(Pe,Z.entities.members))),fe.emails&&fe.members&&!(!(Qe==null||(Ue=Qe.members)===null||Ue===void 0)&&Ue.length)&&(Qe.emails=fe.emails),fe.mpims&&(Qe.mpims=lt.filterMpims(Pe,fe.mpims,(0,m.AQ)(Pe,Z.entities.channels))),fe.ims&&(Qe.ims=lt.filterIms(Pe,fe.ims,(0,m.EM)(Pe,Z.entities.channels))),fe.userGroups&&(Qe.userGroups=lt.filterUserGroups(Pe,fe.userGroups,(0,m.H9)(Pe,Z.entities.userGroups))),fe.teams&&(Qe.teams=lt.filterTeams(Pe,fe.teams,(0,m.A1)(Pe,Z.entities.teams))),fe.views&&(Qe.views=lt.filterViews(Pe,fe.views)),fe.modals&&(Qe.modals=lt.filterModals(Pe,fe.modals)),fe.appActions&&(Qe.appActions=lt.filterAppActions(Pe,fe.appActions)),fe.slashCommands&&(Qe.slashCommands=lt.filterShortcuts(Pe,fe.slashCommands,!0)),fe.slackGlobalActions&&(Qe.slackGlobalActions=lt.filterShortcuts(Pe,fe.slackGlobalActions)),fe.quipShortcutCommands&&(Qe.quipShortcutCommands=lt.filterShortcuts(Pe,fe.quipShortcutCommands)),fe.channelActions&&(Qe.channelActions=lt.filterShortcuts(Pe,fe.channelActions)),fe.fakeGlobalActions&&(Qe.fakeGlobalActions=lt.filterShortcuts(Pe,fe.fakeGlobalActions)),fe.callActions&&(Qe.callActions=lt.filterShortcuts(Pe,fe.callActions)),fe.workflowTriggers&&(Qe.workflowTriggers=lt.filterWorkflowTriggers(Pe,fe.workflowTriggers)),fe.broadcastKeywords&&(Qe.broadcastKeywords=lt.filterBroadcastKeywords(Pe,fe.broadcastKeywords)),fe.emoji&&(Qe.emoji=lt.filterEmoji(Pe,fe.emoji)),fe.channelSections&&(Qe.channelSections=lt.filterChannelSections(Pe,fe.channelSections,bt=>{var gt,ht;return!!(!((gt=Z.entities.channelSections)===null||gt===void 0||(ht=gt.includeTypes)===null||ht===void 0)&&ht[bt.type])})),fe.files&&(Qe.files=lt.filterFiles(Pe,fe.files,(0,m.Do)(Pe,Z.entities.files))),fe.lists&&(Qe.lists=lt.filterLists(Pe,fe.lists)),fe.listRecords){var tt;const{recordQuery:bt}=(tt=(0,W.V3)(pe))!==null&&tt!==void 0?tt:{},gt=new V.A({query:bt,options:Z});Qe.listRecords=gt.filterListRecords(Pe,fe.listRecords)}fe.helpArticles&&(Qe.helpArticles=lt.filterHelpArticles(Pe,fe.helpArticles)),qe.measureAndClear("modern-searcher-matching-mark","modern-searcher-matching"),ct==null||ct.close();const it=(0,m.SI)(Qe,fe.remoteIds||{});let Ge=(0,a.A)(Object.values(it));const We=500,xe=3;var ze;const mt=Math.min(((ze=Z==null?void 0:Z.limit)!==null&&ze!==void 0?ze:1)*xe,We);if(Z.sort&&!Z.sort.bypassSorting){var pt;let bt=!1;Ge.length<mt&&(bt=!0);const gt=new R.A({query:pe,options:{modelOnly:bt,...Z.sort}}),ht=(pt=y.LI.get({label:y.gC.Searcher,id:se}))===null||pt===void 0?void 0:pt.createChildSpan({name:"searcher:searcher_sort",additionalSpanOptions:{parentSpanId:He==null?void 0:He.getId()}});Ge=gt.sort(Pe,it),ht==null||ht.close()}if(Z.sort&&Z.sort.frecency&&!Z.sort.bypassSorting){var It;const bt=(It=y.LI.get({label:y.gC.Searcher,id:se}))===null||It===void 0?void 0:It.createChildSpan({name:"searcher:sorter_sort",additionalSpanOptions:{parentSpanId:He==null?void 0:He.getId()}});Ge=new P.A({query:pe,options:Z.sort,teamId:(0,z.ZT)(Pe),enterpriseId:(0,T.k)(Pe)&&(0,z.jV)(Pe)?(0,z.jV)(Pe):void 0}).sort(Pe,Ge.slice(0,mt)),bt==null||bt.close()}return Z.limit&&(Ge=(0,l.A)(Ge,Z.limit)),Z.returnMetadata||(Ge=Ge.map(bt=>bt.item)),(0,m.S)(),Ge||[]}clogSearcherAccept(De){let{clogger:pe,data:fe}=De;const{source:Z,query:se,results:Ae,selectedItemId:Ce,displayedItemIds:Le}=fe,Ue=15;if(!Ce)return;const Pe=Le?Le.length:Ae.length,He=Le?Le.indexOf(Ce):Ae.findIndex(mt=>mt.item.id===Ce);if(He<0)return;const Qe=Ae.find(mt=>mt.item.id===Ce);if(!Qe)return;const lt=Qe.type||"other",qe=(0,n.A)(se)?se.map(mt=>(0,N.O)(mt)):(0,N.O)(se),ct=Qe.source||"local";let tt;Qe.type==="mpim"?tt=Qe.scoreDetailsByMember:Qe.type==="member"?tt={[Ce]:{is_exact_match:Qe.isExactMatch,exact_match_details:Qe.exactMatchDetails,score_details:Qe.scoreDetails}}:Qe.type==="emoji"&&(tt={[Ce]:{is_exact_match:Qe.isExactMatch}});let it=[];Ae.some(mt=>mt.featureVectorRaw)&&(Le?it=Le.map(mt=>{const pt=Ae.find(It=>It.item.id===mt);return pt&&pt.featureVectorRaw.serialize()||""}):it=Ae.map(mt=>{var pt,It;return mt==null||(pt=mt.featureVectorRaw)===null||pt===void 0||(It=pt.serialize)===null||It===void 0?void 0:It.call(pt)}));let We;(0,n.A)(qe)?We=qe.reduce((mt,pt)=>mt+(0,m.Cs)((0,N.O)(pt)),0):We=(0,m.Cs)(qe);var xe;const ze={source:Z,query_length:qe.length?qe.length:0,query_terms_length:We,results_length:Pe,selected_position:He,selected_type:lt,selected_source:ct,selected_match_details:tt,feature_vector_list:it.slice(0,Ue),session_length:Date.now()-((xe=this.sessionTs)!==null&&xe!==void 0?xe:0)};pe.track(O.EventId.SEARCHER_ACCEPT,ze),this.endSession()}clogSearcherReject(De){let{clogger:pe,data:fe}=De;const{source:Z,query:se,results:Ae,displayedItemIds:Ce}=fe,Le=Ce!==void 0?Ce.length:Ae.length,Ue=(0,n.A)(se)?se.map(lt=>(0,N.O)(lt)):(0,N.O)(se);let Pe;(0,n.A)(Ue)?Pe=Ue.reduce((lt,qe)=>lt+(0,m.Cs)((0,N.O)(qe)),0):Pe=(0,m.Cs)(Ue);var He;const Qe={source:Z,query_length:Ue.length?Ue.length:0,query_terms_length:Pe,results_length:Le,session_length:Date.now()-((He=this.sessionTs)!==null&&He!==void 0?He:0)};pe.track(O.EventId.SEARCHER_REJECT,Qe),this.endSession()}maybeStartSession(De){!this.sessionId&&De!==void 0&&De.length&&(this.sessionTs=Date.now(),this.sessionId=(0,d.A)())}endSession(){this.sessionTs=null,this.sessionId=null}getTraceTags(De){let{query:pe,options:fe}=De;var Z;const se=fe.entities;return{source:(fe==null?void 0:fe.searchViewContext)||((Z=fe.sort)===null||Z===void 0?void 0:Z.source),tiered:fe.tiered,is_searcher_sessions:!0,entities:Object.keys(se).filter(Ae=>!!se[Ae]).sort().toString(),query_length:pe.length}}constructor(De){this.teamId=De,this.pendingRequests=[],this.sessionId=null,this.sessionTs=null}}u(q,"Searcher");const le={};function Te(Ie){let{teamId:De,key:pe}=Ie;if(!De)throw new Error("Searcher must be instantiated with a team id");return le[De]&&!le[De][pe]&&(le[De][pe]=new q(De)),le[De]||(le[De]={},le[De][pe]=new q(De)),le[De][pe]}u(Te,"getSearcher"),(0,v.ul)("searcherObj",{search:(Ie,De)=>new q(Ie).search(De),searchLocal:(Ie,De)=>{new q(Ie).searchLocal(De)}})},4342685672:(j,p,e)=>{"use strict";e.d(p,{In:()=>s,KV:()=>n,nK:()=>a});var t=e(4761125736);const n="autocompleteFallback";function s(){return n}u(s,"getModelForSorter");function a(c){return(0,t._Z)(c,"searcher_sessions_phase_1")==="treatment"}u(a,"shouldUseSearcherSessions")},8956261571:(j,p,e)=>{"use strict";e.d(p,{A:()=>us});var t=e(3367239067),n=e(1703559452),s=e(9816084745),a=e(5141066605),c=e(3037015781),o=e(9289081806),i=e(1407713935),l=e(6007206761),_=e(6495946979);function d(w){var ve;const Ne=(ve=w.actions)===null||ve===void 0?void 0:ve[0];if(!Ne)return 0;const dt=parseFloat(Ne.ts);return isNaN(dt)?0:dt}u(d,"getLatestActionTs");var r=e(8170643398),m=e(9262712126),h=e(5096647761),v=e(6536982570),y=e(9190452268),I=e(3879245650),T=e(735940183),f=e(4096483543),g=e(8040098042),M=e(4496040127),A=e(6422693406),O=e(1520110262),D=e(3707193570),E=e(7948868735),C=e(6533394955);const S=.014,b=.094,k=.148,W=.132,N=.179;class V extends E.F{fetchData(){return(0,D.Am)(this.teamId)?(0,C.dispatchForTeamId)(this.teamId,(0,O.yp)()).catch(ve=>({exception:ve})).then(ve=>new R({topEmojis:ve.top_emojis,topMpims:ve.top_mpims,topChannels:ve.top_channels,topUsers:ve.top_users,emojiFeatures:ve.emoji_features,mpimFeatures:ve.mpim_features,channelFeatures:ve.channel_features,userFeatures:ve.user_features,mpimCtr:ve.mpim_ctr,channelCtr:ve.channel_ctr,userCtr:ve.user_ctr,emojiCtr:ve.emoji_ctr,otherCtr:ve.other_ctr,defaultFeatureNames:ve.default_features,topAppActions:ve.top_app_actions,topGlobalActions:ve.top_global_actions,topSlashCommands:ve.top_slash_commands,topWorkflowTriggers:ve.top_workflow_triggers,topChannelActions:ve.top_channel_actions,appActionCtr:ve.app_action_ctr,globalActionCtr:ve.global_action_ctr,slashCommandCtr:ve.slash_command_ctr,workflowTriggerCtr:ve.workflow_trigger_ctr,channelActionCtr:ve.channel_action_ctr,usersHasDmed:ve.users_has_dmed})):A.S.resolve(new R)}getStaleWhileRevalidate(){return super.getStaleWhileRevalidate(new R)}constructor(ve){super(),this.teamId=ve}}u(V,"AutocompleteFeaturesCache");class R{getFeatures(ve,Ne){const dt=this.topEntities[Ne],Mn=this.featureNames[Ne]||this.featureNames.default,Tn=this.defaultEntityFeatures[Ne],mn=dt&&dt[ve];if(mn&&Mn){const ln={};for(let ms=0;ms<Mn.length;ms++)ln[Mn[ms]]=mn[ms];const is={team_ctr_90dd:Tn.team_ctr_90dd,user_ctr_30dd:Tn.user_ctr_30dd};for(const ms of Object.keys(Tn))is[ms]=ln[ms]||Tn[ms];return is}return Tn}getEntityCtr(ve){return this.entityCtr[ve]||this.otherEntityCtr}getUserDmChannelMetadata(ve){return this.usersHasDmed?this.usersHasDmed[ve]:null}constructor({topEmojis:ve,topMpims:Ne,topChannels:dt,topUsers:Mn,emojiFeatures:Tn,mpimFeatures:mn,channelFeatures:ln,userFeatures:is,mpimCtr:ms,channelCtr:Ts,userCtr:Ps,emojiCtr:ps,otherCtr:ls,defaultFeatureNames:ys,topAppActions:Ve,topGlobalActions:Ct,topSlashCommands:Ke,topWorkflowTriggers:nt,topChannelActions:Tt,appActionCtr:Lt,globalActionCtr:Pt,slashCommandCtr:Ht,workflowTriggerCtr:nn,channelActionCtr:An,usersHasDmed:_n}={}){this.topEntities={emoji:ve,mpim:Ne,channel:dt,member:Mn,appAction:Ve,globalAction:Ct,slashCommand:Ke,workflowTrigger:nt,channelAction:Tt},this.featureNames={emoji:Tn,mpim:mn,channel:ln,member:is,default:ys},this.otherEntityCtr=ls??N,this.entityCtr={mpim:ms??S,channel:Ts??k,member:Ps??W,emoji:ps??b,appAction:Lt??this.otherEntityCtr,globalAction:Pt??this.otherEntityCtr,slashCommand:Ht??this.otherEntityCtr,workflowTrigger:nn??this.otherEntityCtr,channelAction:An??this.otherEntityCtr},this.defaultEntityFeatures={};for(const Gt of Object.keys(this.entityCtr))this.defaultEntityFeatures[Gt]={team_ctr_90dd:this.getEntityCtr(Gt),user_ctr_30dd:this.getEntityCtr(Gt)};this.usersHasDmed=_n}}u(R,"AutocompleteFeatures");const P={};function z(w){let{teamId:ve,enterpriseId:Ne}=w;const dt=Ne||ve||"_default";return P[dt]||(P[dt]=new V(ve)),P[dt]}u(z,"getAutocompleteFeaturesCache");var $=e(1041273904),x=e(5238395322),Y=e(8571983633),ne=e(2774532222),re=e(7110454183),_e=e(1022424641),G=e(8274921051),ge=e(4630136761),oe=e(4562579337),me=e(796111729),ue=e(3051657319),ae=e(7715417323);class he{writeNumericalFeature(ve,Ne){!ve||!isFinite(ve)||(this.writeIdAndType(Ne,G.c.NUMERICAL),this.ensureCapacity(4),this.view.setFloat32(this.offset,ve),this.offset+=4)}writeBinaryFeature(ve,Ne){ve&&this.writeIdAndType(Ne,G.c.BINARY)}writeTextFeature(ve,Ne){if(!ve)return;this.writeIdAndType(Ne,G.c.TEXT);const dt=unescape(encodeURIComponent(ve));this.ensureCapacity(2+dt.length),this.view.setUint16(this.offset,dt.length),this.offset+=2,(0,ue.A)(dt.length).forEach(Mn=>{this.view.setUint8(this.offset,dt.charCodeAt(Mn)),this.offset+=1})}writeNullFeature(){(0,ae.A)()}writeIdAndType(ve,Ne){this.ensureCapacity(2),this.view.setUint16(this.offset,ve<<3|Ne),this.offset+=2}ensureCapacity(ve){this.offset+ve>this.buffer.byteLength&&this.resize(this.offset+ve)}resize(ve){if(this.buffer.byteLength>=ve)return;const Ne=new ArrayBuffer(2*this.buffer.byteLength);new Uint8Array(Ne).set(new Uint8Array(this.buffer)),this.buffer=Ne,this.view=new DataView(this.buffer)}serialize(){return btoa(String.fromCharCode(...new Uint8Array(this.buffer.slice(0,this.offset))))}constructor(){this.buffer=new ArrayBuffer(256),this.view=new DataView(this.buffer),this.offset=0}}u(he,"BinaryFeatureVectorSerializer");var ce=e(3395271606);const ee=(0,ce.A)(G.Q);function J(w){return ee[w]}u(J,"getFeatureNameFromId");var X=e(9150404500);const F={globalFeatures:["ID","FRECENCY","RAW_FRECENCY","FRECENCY_BONUS","FRECENCY_LOG_HIT_COUNT","FRECENCY_LOG_HIT_COUNT_SCALED","FRECENCY_HIT_COUNT","FRECENCY_WEIGHT_HIT_VISITS","FRECENCY_WEIGHT_ITEM_VISITS","FRECENCY_ITEM_COUNT","FRECENCY_LOG_ITEM_COUNT","FRECENCY_LOG_ITEM_COUNT_SCALED","FRECENCY_HIT_VISITS_4H","FRECENCY_HIT_VISITS_1D","FRECENCY_HIT_VISITS_3D","FRECENCY_HIT_VISITS_1W","FRECENCY_HIT_VISITS_1M","FRECENCY_HIT_VISITS_90D","FRECENCY_ITEM_VISITS_4H","FRECENCY_ITEM_VISITS_1D","FRECENCY_ITEM_VISITS_3D","FRECENCY_ITEM_VISITS_1W","FRECENCY_ITEM_VISITS_1M","FRECENCY_ITEM_VISITS_90D","FUZZY_SCORE","FUZZY_SCORE_50","FUZZY_SCORE_25","FUZZY_SCORE_ALL","FUZZY_SCORE_SCALED_EXP","FUZZY_SCORE_SCALED_FLIPPED","FUZZY_SCORE_SCALED_SUBTRACT","NAV_EXACT_MATCH","NAV_EXACT_PREFIX_MATCH","NAV_NORMAL_MATCH","NAV_NORMAL_PREFIX_MATCH","NAV_NORMAL_MATCH_NO_USER","NAV_NORMAL_PREFIX_MATCH_NO_USER","NAV_QUERY_LENGTH","NAV_TEXT_LENGTH","NAV_QUERY_RATIO_LENGTH_STRING","EXACT_MATCH_LOG_RESULTS","USER_ENTITY_TYPE_CTR_30DD","NUM_RESULTS"],userFeatures:["TYPE_NAVIGATION_USER","USER_PRIORITY","USER_IS_ACTIVE","USER_IS_EXTERNAL","USER_IS_CURRENT_USER","MEMBER_OF_CURRENT_CHANNEL","CURRENT_USER_TEXTY","USER_SAME_TEAM","USER_IS_BOT","USER_DM_IS_UNREAD","USER_DM_IS_STARRED","USER_DM_READ_AGE_DECAY_7D","USER_DM_READ_AGE_DECAY_2H","USER_DM_READ_AGE_DECAY_7D_V2","USER_DM_READ_AGE_DECAY_2H_V2","USER_DM_LATEST_MSG_AGE_DECAY_7D","USER_DM_LATEST_MSG_AGE_DECAY_2H","USER_DM_LATEST_MSG_AGE_DECAY_7D_V2","USER_DM_LATEST_MSG_AGE_DECAY_2H_V2","USER_DM_IS_FROZEN","USER_DM_HAS_DRAFT","USER_DM_NULL","USER_DM_EMPTY","USER_DM_NOT_OPEN","USER_DM_OPEN","USER_DM_LATEST_OLDER_30D","USER_DM_LATEST_OLDER_90D","USER_DM_EMPTY_V2","USER_DM_LATEST_OLDER_30D_V2","USER_DM_LATEST_OLDER_90D_V2","USER_HAS_DMED","USER_DM_READ_AGE_DECAY_2H_V3","USER_DM_READ_AGE_DECAY_7D_V3","USER_DM_READ_OLDER_7D","USER_DM_READ_OLDER_30D","USER_DM_READ_OLDER_90D","USER_QUERY_RATIO_LENGTH_STRING","NAV_NORMAL_PREFIX_MATCH_USER","NAV_NORMAL_MATCH_USER","USER_FIRST_NAME_NORMAL_MATCH","USER_FIRST_NAME_NORMAL_PREFIX_MATCH","USER_FIRST_NAME_EXACT_MATCH","USER_FIRST_NAME_EXACT_PREFIX_MATCH","USER_LAST_NAME_NORMAL_MATCH","USER_LAST_NAME_NORMAL_PREFIX_MATCH","USER_LAST_NAME_EXACT_MATCH","USER_LAST_NAME_EXACT_PREFIX_MATCH","USER_EMAIL_MATCH","USER_EMAIL_ONLY_MATCH","QUERY_IS_SELF","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION","USER_MPIM_READ_AGE_DECAY_7D","USER_MPIM_READ_AGE_DECAY_2H","USER_MPIM_LATEST_MSG_AGE_DECAY_7D","USER_MPIM_LATEST_MSG_AGE_DECAY_2H","USER_MPIM_FRECENCY_LOG_ITEM_COUNT","USER_MPIM_FRECENCY_LOG_HIT_COUNT"],channelFeatures:["TYPE_NAVIGATION_CHANNEL","CHANNEL_IS_MEMBER","CHANNEL_PRIORITY","CHANNEL_IS_STARRED","CHANNEL_IS_ARCHIVED","CHANNEL_IS_OTHER_TEAM","CHANNEL_IS_FROZEN","CHANNEL_HAS_DRAFT","CHANNEL_QUERY_RATIO_LENGTH_STRING","QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL","NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS","CHANNEL_IS_UNREAD","CHANNEL_READ_AGE_DECAY_2H","CHANNEL_READ_AGE_DECAY_7D","CHANNEL_LATEST_MSG_AGE_DECAY_7D","CHANNEL_LATEST_MSG_AGE_DECAY_2H","CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH","CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH","ONLY_MATCHES_PREVIOUS_NAME","CHANNEL_TEAM_CTR_90DD","CHANNEL_USER_CTR_30DD","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION"],mpimFeatures:["TYPE_NAVIGATION_MPIM","MPIM_IS_STARRED","MPIM_READ_AGE_DECAY_2H","MPIM_READ_AGE_DECAY_7D","MPIM_LATEST_MSG_AGE_DECAY_2H","MPIM_LATEST_MSG_AGE_DECAY_7D","MPIM_IS_UNREAD","MPIM_WITH_DEACTIVATED_USER","MPIM_PRIORITY","MPIM_QUERY_RATIO_LENGTH_STRING","MPIM_MEMBERS","MPIM_MEMBER_NAME_MATCHES","MPIM_MEMBER_ALL_MATCHES","MPIM_MATCHER_SCORE","MPIM_MATCHER_SCORE_0","MPIM_MATCHER_SCORE_1","MPIM_MATCHER_SCORE_2","MPIM_MATCHER_SCORE_3","MPIM_TEAM_CTR_90DD","MPIM_USER_CTR_30DD","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION","MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H","MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D","MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H","MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D","MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H","MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D","MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H","MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D","MPIM_USERS_PCT_NON_EMPTY_DMS","MPIM_USERS_PCT_NON_NULL_DMS","MPIM_USERS_ALL_INTERNAL"],viewFeatures:["TYPE_NAVIGATION_VIEW"],fileFeatures:["TYPE_NAVIGATION_FILE","FILE_SUGGESTION_SCORE","FILE_AGE_DECAY_7D","FILE_AGE_DECAY_28D","FILE_AGE_DECAY_90D","FILE_FROM_CURRENT_USER","FILE_LOG_PUBLIC_SHARES","FILE_LOG_PRIVATE_SHARES","FILE_LOG_ACTIONS","FILE_LATEST_ACTION_AGE_DECAY_2H","FILE_LATEST_ACTION_AGE_DECAY_7D","FILE_LATEST_ACTION_AGE_DECAY_90D","FILE_LATEST_SHARE_AGE_DECAY_2H","FILE_LATEST_SHARE_AGE_DECAY_7D","FILE_LATEST_SHARE_AGE_DECAY_90D","FILE_CHANNEL_CTR","FILE_SUGGESTIONS_SEARCHER","FILE_USER_CTR","FILE_NAME_CONTAINS_QUERY_NORMALIZED","FILE_IS_CANVAS","FILE_HAS_DMS_WITH_CREATOR","FILE_HAS_DMS_WITH_CREATOR_V2","FILE_LATEST_VIEW_BY_USER_OLDER_90D"],linkFeatures:["TYPE_NAVIGATION_LINK"],modalFeatures:["TYPE_NAVIGATION_MODAL"],teamFeatures:["TYPE_NAVIGATION_TEAM"],emojiFeatures:["EMOJI_EXACT_MATCH","EMOJI_QUERY_LENGTH_RATIO","EMOJI_TOTAL_COMBO_BREAKS","EMOJI_COMBO_BREAK_0","EMOJI_COMBO_BREAK_1","EMOJI_COMBO_BREAK_2","EMOJI_COMBO_BREAK_3","TYPE_EMOJI","FRECENCY_HIT_VISIT_DECAY_2H","FRECENCY_HIT_VISIT_DECAY_7D","FRECENCY_ITEM_VISIT_DECAY_2H","FRECENCY_ITEM_VISIT_DECAY_7D","EMOJI_TEAM_CTR_90DD","EMOJI_USER_CTR_30DD"],broadcastKeywordFeatures:["IS_BROADCAST_KEYWORD","HERE_KEYWORD","HERE_KEYWORD_EXACT_MATCH","BROADCAST_KEYWORD_NORMAL_MATCH"],queryFeatures:["TYPE_QUERY","TYPE_USER_QUERY","TYPE_QUERY_HISTORY","ACTIVE_TOKEN_STRING","ACTIVE_TOKEN_MEMBER","ACTIVE_TOKEN_PHRASE","ACTIVE_TOKEN_QUERY_SUGGESTION","ACTIVE_TOKEN_FILTER_DURING","ACTIVE_TOKEN_FILTER_FROM","ACTIVE_TOKEN_FILTER_IN","ACTIVE_TOKEN_FILTER_TO","ACTIVE_TOKEN_FILTER_BEFORE","ACTIVE_TOKEN_FILTER_HAS","ACTIVE_TOKEN_FILTER_IS","ACTIVE_TOKEN_FILTER_ON","ACTIVE_TOKEN_FILTER_AFTER","ACTIVE_TOKEN_FILTER_WITH","QUERY_SUGGESTION_SCORE_V2","QUERY_FRECENCY_RAW","QUERY_FRECENCY_WEIGHT_HIT_VISITS","QUERY_FRECENCY_HIT_COUNT","QUERY_FRECENCY_WEIGHT_ITEM_VISITS","QUERY_FRECENCY_ITEM_COUNT","QUERY_FUZZY_SCORE","QUERY_FRECENCY_BONUS","QUERY_HISTORY_AGE_DECAY_30D","QUERY_HISTORY_LOG_INDEX","FILTER_USER_IS_ACTIVE","FILTER_USER_IS_CURRENT_USER","FILTER_USER_DM_IS_STARRED","FILTER_USER_DM_IS_UNREAD","FILTER_USER_DM_READ_AGE_DECAY_7D","FILTER_USER_DM_READ_AGE_DECAY_2H","FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D","FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H","FILTER_USER_FIRST_NAME_NORMAL_MATCH","FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH","FILTER_USER_LAST_NAME_NORMAL_MATCH","FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH","FILTER_USER_PRIORITY","FILTER_CHANNEL_IS_ARCHIVED","FILTER_CHANNEL_IS_MEMBER","FILTER_CHANNEL_IS_STARRED","FILTER_CHANNEL_IS_UNREAD","FILTER_CHANNEL_READ_AGE_DECAY_7D","FILTER_CHANNEL_READ_AGE_DECAY_2H","FILTER_CHANNEL_PRIORITY","STRING_EXACT_MATCH","STRING_EXACT_PREFIX_MATCH","STRING_NORMAL_MATCH","STRING_NORMAL_PREFIX_MATCH","STRING_SAME_NUMBER_WORDS","EXCESS_STRING_LENGTH","SUGGESTION_TEXT_LENGTH","QUERY_LENGTH","QUERY_RATIO_LENGTH_STRING","QUERY_TOKEN_NORMAL_MATCH","QUERY_TOKEN_NORMAL_PREFIX_MATCH","QUERY_LOG_HIT_COUNT"],appActionFeatures:["TYPE_APP_ACTION","APP_ACTION_TEAM_CTR","APP_ACTION_USER_CTR","OS_APP_ACTION"],shortcutFeatures:["APP_NAME_PREFIX_MATCH","SHORTCUT_ENTITY_TYPE_CTR","BEST_NAME_MATCH_LOG_RESULTS"],slashCommandFeatures:["TYPE_SLASH_COMMAND","SLASH_COMMAND_TEAM_CTR","SLASH_COMMAND_USER_CTR"],globalActionFeatures:["TYPE_GLOBAL_ACTION","IS_INVITE_WORKSPACE","GLOBAL_ACTION_TEAM_CTR","GLOBAL_ACTION_USER_CTR"],channelActionFeatures:["TYPE_CHANNEL_ACTION","CHANNEL_ACTION_TEAM_CTR","CHANNEL_ACTION_USER_CTR"],appFeatures:["TYPE_APP"],messageFeatures:["TYPE_NAVIGATION_MESSAGE"],workflowTriggerFeatures:["TYPE_WORKFLOW_TRIGGER","WORKFLOW_TRIGGER_TEAM_CTR","WORKFLOW_TRIGGER_USER_CTR"],channelAssociatedWorkflowFeatures:["HAS_CHANNEL_ASSOCIATION"]};var L=e(9422011462);function K(w,ve){return en.fromSuggestion(w,ve)}u(K,"featureVectorForSuggestion");function B(){return(0,me.Wo)({label:"SORTER-RANKING"})}u(B,"getLogger");function Q(w){return Number.isInteger(w)}u(Q,"isIntegerWithType");const q=60*60,le=24*q;var Te,Ie,De,pe,fe,Z,se,Ae,Ce,Le,Ue,Pe,He,Qe,lt,qe,ct,tt,it,Ge,We,xe,ze,mt,pt,It,bt,gt,ht,Zt,rn,zt,In,cn,Jt,dn,sn,Xt;const xt={FRECENCY:w=>be({id:G.Q.FRECENCY,value:Vt(w)}),TYPE_NAVIGATION_CHANNEL:(w,ve)=>{let{itemIsChannel:Ne}=ve;return be({id:G.Q.TYPE_NAVIGATION_CHANNEL,value:Ne})},TYPE_NAVIGATION_FILE:w=>be({id:G.Q.TYPE_NAVIGATION_FILE,value:w.suggestionType===X.fd.FILE_NAVIGATION}),TYPE_NAVIGATION_LINK:w=>be({id:G.Q.TYPE_NAVIGATION_LINK,value:w.suggestionType===X.fd.LINK_NAVIGATION}),TYPE_NAVIGATION_MODAL:w=>be({id:G.Q.TYPE_NAVIGATION_MODAL,value:w.suggestionType===X.fd.MODAL_NAVIGATION}),TYPE_NAVIGATION_MPIM:w=>be({id:G.Q.TYPE_NAVIGATION_MPIM,value:!!(0,i.yz)(w.item)}),TYPE_NAVIGATION_USER:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.TYPE_NAVIGATION_USER,value:Ne})},TYPE_QUERY:w=>be({id:G.Q.TYPE_QUERY,value:w.suggestionType===X.fd.QUERY}),TYPE_QUERY_HISTORY:w=>be({id:G.Q.TYPE_QUERY_HISTORY,value:w.suggestionType===X.fd.QUERY_HISTORY}),ACTIVE_TOKEN_FILTER_IN:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_IN,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_IN}),ACTIVE_TOKEN_FILTER_FROM:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_FROM,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_FROM}),ACTIVE_TOKEN_FILTER_TO:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_TO,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_TO}),ACTIVE_TOKEN_FILTER_BEFORE:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_BEFORE,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_BEFORE}),ACTIVE_TOKEN_FILTER_DURING:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_DURING,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_DURING}),ACTIVE_TOKEN_FILTER_ON:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_ON,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_ON}),ACTIVE_TOKEN_FILTER_AFTER:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_AFTER,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_AFTER}),ACTIVE_TOKEN_FILTER_HAS:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_HAS,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_HAS}),ACTIVE_TOKEN_FILTER_IS:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_IS,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_IS}),ACTIVE_TOKEN_FILTER_WITH:w=>be({id:G.Q.ACTIVE_TOKEN_FILTER_WITH,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.FILTER_WITH}),ACTIVE_TOKEN_MEMBER:w=>be({id:G.Q.ACTIVE_TOKEN_MEMBER,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.MEMBER}),ACTIVE_TOKEN_STRING:w=>be({id:G.Q.ACTIVE_TOKEN_STRING,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.STRING}),ACTIVE_TOKEN_PHRASE:w=>be({id:G.Q.ACTIVE_TOKEN_PHRASE,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.PHRASE}),STRING_EXACT_MATCH:w=>Kt({id:G.Q.STRING_EXACT_MATCH,suggestion:w,extractionFunction:Oe}),STRING_EXACT_PREFIX_MATCH:w=>Kt({id:G.Q.STRING_EXACT_PREFIX_MATCH,suggestion:w,extractionFunction:ke}),STRING_NORMAL_MATCH:w=>Kt({id:G.Q.STRING_NORMAL_MATCH,suggestion:w,extractionFunction:je}),STRING_NORMAL_PREFIX_MATCH:w=>Kt({id:G.Q.STRING_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Be}),STRING_SAME_NUMBER_WORDS:w=>Kt({id:G.Q.STRING_SAME_NUMBER_WORDS,suggestion:w,extractionFunction:st}),EXCESS_STRING_LENGTH:w=>Kt({id:G.Q.EXCESS_STRING_LENGTH,suggestion:w,extractionFunction:St}),ID:w=>be({id:G.Q.ID,value:w.logId||w.id}),FILE_SUGGESTION_SCORE:w=>be({id:G.Q.FILE_SUGGESTION_SCORE,value:pn(w)}),ACTIVE_TOKEN_QUERY_SUGGESTION:w=>be({id:G.Q.ACTIVE_TOKEN_QUERY_SUGGESTION,value:w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.API}),QUERY_SUGGESTION_SCORE_V2:w=>be({id:G.Q.QUERY_SUGGESTION_SCORE_V2,value:on(w)}),TYPE_NAVIGATION_TEAM:w=>be({id:G.Q.TYPE_NAVIGATION_TEAM,value:w&&w.suggestionType===X.fd.TEAM_NAVIGATION}),TYPE_NAVIGATION_VIEW:w=>be({id:G.Q.TYPE_NAVIGATION_VIEW,value:w&&w.suggestionType===X.fd.VIEW_NAVIGATION}),TYPE_USER_QUERY:w=>be({id:G.Q.TYPE_USER_QUERY,value:w&&w.suggestionType===X.fd.QUERY_USER}),NAV_EXACT_MATCH:w=>Kt({id:G.Q.NAV_EXACT_MATCH,suggestion:w,extractionFunction:Oe,text:Rt(w)}),NAV_EXACT_PREFIX_MATCH:w=>Kt({id:G.Q.NAV_EXACT_PREFIX_MATCH,suggestion:w,extractionFunction:ke,text:Rt(w)}),NAV_NORMAL_MATCH:w=>Kt({id:G.Q.NAV_NORMAL_MATCH,suggestion:w,extractionFunction:je,text:Rt(w)}),CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH:(w,ve)=>{let{itemIsChannel:Ne}=ve;var dt,Mn;return Kt({id:G.Q.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH,suggestion:w,extractionFunction:Tn=>{let{text:mn,query:ln}=Tn;return mn?(0,n.A)(mn.split(",").map(is=>Oe({text:is,query:ln}))):!1},text:Ne?(dt=w.item)===null||dt===void 0||(Mn=dt.previous_names)===null||Mn===void 0?void 0:Mn.join(","):null})},CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH:(w,ve)=>{let{itemIsChannel:Ne}=ve;var dt,Mn;return Kt({id:G.Q.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH,suggestion:w,extractionFunction:Tn=>{let{text:mn,query:ln}=Tn;return mn?(0,n.A)(mn.split(",").map(is=>ke({text:is,query:ln}))):!1},text:Ne?w==null||(dt=w.item)===null||dt===void 0||(Mn=dt.previous_names)===null||Mn===void 0?void 0:Mn.join(","):null})},CHANNEL_IS_ARCHIVED:(w,ve)=>{let{itemIsChannel:Ne}=ve;return be({id:G.Q.CHANNEL_IS_ARCHIVED,value:Ne&&(0,l.F)(w.item)})},CHANNEL_IS_MEMBER:(w,ve)=>{let{itemIsChannel:Ne}=ve;return be({id:G.Q.CHANNEL_IS_MEMBER,value:Ne&&(0,_.b)(w.item)})},CHANNEL_IS_STARRED:(w,ve)=>{let{itemIsChannel:Ne}=ve;return be({id:G.Q.CHANNEL_IS_STARRED,value:Ne&&w.isStarred})},MPIM_IS_STARRED:w=>be({id:G.Q.MPIM_IS_STARRED,value:(0,i.yz)(w.item)&&w.isStarred}),CHANNEL_IS_UNREAD:(w,ve)=>{let{itemIsChannel:Ne}=ve;return be({id:G.Q.CHANNEL_IS_UNREAD,value:Ne&&(0,o.KJ)(w.item)})},MPIM_IS_UNREAD:w=>be({id:G.Q.MPIM_IS_UNREAD,value:(0,i.yz)(w.item)&&(0,o.KJ)(w.item)}),CHANNEL_IS_OTHER_TEAM:(w,ve)=>{let{itemIsChannel:Ne}=ve;return be({id:G.Q.CHANNEL_IS_OTHER_TEAM,value:Ne&&(0,o.lo)(w.item)})},USER_IS_ACTIVE:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_IS_ACTIVE,value:Ne&&(0,r.ls)(w.item)})},USER_IS_EXTERNAL:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_IS_EXTERNAL,value:Ne&&(0,h.g)(w.item)})},USER_IS_BOT:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_IS_BOT,value:Ne&&(0,oe.A)(w.item)})},USER_SAME_TEAM:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_SAME_TEAM,value:Ne&&!!w.sameTeam})},USER_IS_CURRENT_USER:(w,ve)=>{let{isCurrentUser:Ne}=ve;return be({id:G.Q.USER_IS_CURRENT_USER,value:Ne})},USER_DM_IS_STARRED:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_DM_IS_STARRED,value:Ne&&w.im&&w.imIsStarred})},USER_DM_IS_UNREAD:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_DM_IS_UNREAD,value:Ne&&w.im&&(0,o.KJ)(w.im)})},CHANNEL_PRIORITY:(w,ve)=>{let{itemIsChannel:Ne}=ve;return be({id:G.Q.CHANNEL_PRIORITY,value:Ne&&(w==null?void 0:w.priority)})},CHANNEL_READ_AGE_DECAY_7D:(w,ve)=>{let{itemIsChannel:Ne,now:dt}=ve;return be({id:G.Q.CHANNEL_READ_AGE_DECAY_7D,value:Ne&&_t(dt,parseFloat((Te=w.lastReadTs)!==null&&Te!==void 0?Te:""),7*le)||0})},CHANNEL_READ_AGE_DECAY_2H:(w,ve)=>{let{itemIsChannel:Ne,now:dt}=ve;return be({id:G.Q.CHANNEL_READ_AGE_DECAY_2H,value:Ne&&_t(dt,parseFloat((Ie=w.lastReadTs)!==null&&Ie!==void 0?Ie:""),2*q)||0})},MPIM_READ_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_READ_AGE_DECAY_2H,value:(0,i.yz)(w.item)&&_t(Ne,parseFloat((De=w.lastReadTs)!==null&&De!==void 0?De:""),2*q)||0})},MPIM_READ_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_READ_AGE_DECAY_7D,value:(0,i.yz)(w.item)&&_t(Ne,parseFloat((pe=w.lastReadTs)!==null&&pe!==void 0?pe:""),7*le)||0})},USER_DM_READ_AGE_DECAY_7D:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_READ_AGE_DECAY_7D,value:Ne&&w.im&&_t(dt,parseFloat((fe=w.lastReadTs)!==null&&fe!==void 0?fe:""),7*le)||0})},USER_DM_READ_AGE_DECAY_7D_V2:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_READ_AGE_DECAY_7D_V2,value:Ne&&w.im&&_t(dt,parseFloat((Z=w.lastReadImTs)!==null&&Z!==void 0?Z:""),7*le)||0})},USER_DM_READ_AGE_DECAY_7D_V3:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_READ_AGE_DECAY_7D_V3,value:Ne&&_t(dt,parseFloat((se=fn(w))!==null&&se!==void 0?se:""),7*le)||0})},USER_DM_READ_AGE_DECAY_2H:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_READ_AGE_DECAY_2H,value:Ne&&w.im&&_t(dt,parseFloat((Ae=w.lastReadTs)!==null&&Ae!==void 0?Ae:""),2*q)||0})},USER_DM_READ_AGE_DECAY_2H_V2:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_READ_AGE_DECAY_2H_V2,value:Ne&&w.im&&_t(dt,parseFloat((Ce=w.lastReadImTs)!==null&&Ce!==void 0?Ce:""),2*q)||0})},USER_DM_READ_AGE_DECAY_2H_V3:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_READ_AGE_DECAY_2H_V3,value:Ne&&_t(dt,parseFloat((Le=fn(w))!==null&&Le!==void 0?Le:""),2*q)||0})},USER_DM_NULL:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_DM_NULL,value:Ne&&!w.im})},USER_DM_EMPTY:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_DM_EMPTY,value:Ne&&w.im&&!parseFloat((Ue=w.latestTs)!==null&&Ue!==void 0?Ue:"")})},USER_DM_EMPTY_V2:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_DM_EMPTY_V2,value:Ne&&w.im&&!parseFloat((Pe=w.latestImTs)!==null&&Pe!==void 0?Pe:"")})},USER_HAS_DMED:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_HAS_DMED,value:Ne&&!!parseFloat((He=fn(w))!==null&&He!==void 0?He:"")})},USER_DM_NOT_OPEN:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_DM_NOT_OPEN,value:Ne&&w.im&&!(0,o.nT)(w.im)})},USER_DM_OPEN:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_DM_OPEN,value:Ne&&w.im&&(0,o.nT)(w.im)})},USER_DM_LATEST_OLDER_30D:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_LATEST_OLDER_30D,value:Ne&&Qt(dt,parseFloat((Qe=w.latestTs)!==null&&Qe!==void 0?Qe:""),30*le)})},USER_DM_LATEST_OLDER_30D_V2:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_LATEST_OLDER_30D_V2,value:Ne&&Qt(dt,parseFloat((lt=w.latestImTs)!==null&&lt!==void 0?lt:""),30*le)})},USER_DM_LATEST_OLDER_90D:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_LATEST_OLDER_90D,value:Ne&&Qt(dt,parseFloat((qe=w.latestTs)!==null&&qe!==void 0?qe:""),90*le)})},USER_DM_LATEST_OLDER_90D_V2:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_LATEST_OLDER_90D_V2,value:Ne&&Qt(dt,parseFloat((ct=w.latestImTs)!==null&&ct!==void 0?ct:""),90*le)})},USER_DM_READ_OLDER_7D:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_READ_OLDER_7D,value:Ne&&Qt(dt,parseFloat((tt=fn(w))!==null&&tt!==void 0?tt:""),7*le)})},USER_DM_READ_OLDER_30D:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_READ_OLDER_30D,value:Ne&&Qt(dt,parseFloat((it=fn(w))!==null&&it!==void 0?it:""),30*le)})},USER_DM_READ_OLDER_90D:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_READ_OLDER_90D,value:Ne&&Qt(dt,parseFloat((Ge=fn(w))!==null&&Ge!==void 0?Ge:""),90*le)})},USER_MPIM_READ_AGE_DECAY_7D:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_MPIM_READ_AGE_DECAY_7D,value:Ne&&w.mpimFeatures&&_t(dt,w.mpimFeatures.lastReadTs,7*le)||0})},USER_MPIM_READ_AGE_DECAY_2H:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_MPIM_READ_AGE_DECAY_2H,value:Ne&&w.mpimFeatures&&_t(dt,w.mpimFeatures.lastReadTs,2*q)||0})},USER_MPIM_LATEST_MSG_AGE_DECAY_7D:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_MPIM_LATEST_MSG_AGE_DECAY_7D,value:Ne&&w.mpimFeatures&&_t(dt,w.mpimFeatures.latestMsgTs,7*le)||0})},USER_MPIM_LATEST_MSG_AGE_DECAY_2H:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_MPIM_LATEST_MSG_AGE_DECAY_2H,value:Ne&&w.mpimFeatures&&_t(dt,w.mpimFeatures.latestMsgTs,2*q)||0})},USER_MPIM_FRECENCY_LOG_ITEM_COUNT:(w,ve)=>{let{itemIsMember:Ne}=ve;var dt;return be({id:G.Q.USER_MPIM_FRECENCY_LOG_ITEM_COUNT,value:Ne&&((dt=w.mpimFeatures)===null||dt===void 0?void 0:dt.itemCount)&&Math.log1p(w.mpimFeatures.itemCount)||0})},USER_MPIM_FRECENCY_LOG_HIT_COUNT:(w,ve)=>{let{itemIsMember:Ne}=ve;var dt;return be({id:G.Q.USER_MPIM_FRECENCY_LOG_HIT_COUNT,value:Ne&&((dt=w.mpimFeatures)===null||dt===void 0?void 0:dt.hitCount)&&Math.log1p(w.mpimFeatures.hitCount)||0})},QUERY_LENGTH:w=>Kt({id:G.Q.QUERY_LENGTH,suggestion:w,extractionFunction:at}),NAV_QUERY_LENGTH:w=>Kt({id:G.Q.NAV_QUERY_LENGTH,suggestion:w,extractionFunction:at,text:Rt(w)}),SUGGESTION_TEXT_LENGTH:w=>Kt({id:G.Q.SUGGESTION_TEXT_LENGTH,suggestion:w,extractionFunction:Et}),NAV_TEXT_LENGTH:w=>Kt({id:G.Q.NAV_TEXT_LENGTH,suggestion:w,extractionFunction:Et,text:Rt(w)}),RAW_FRECENCY:w=>be({id:G.Q.RAW_FRECENCY,value:w.rawFrecencyScore}),MPIM_PRIORITY:w=>be({id:G.Q.MPIM_PRIORITY,value:(0,i.yz)(w.item)&&(w==null?void 0:w.priority)}),QUERY_RATIO_LENGTH_STRING:w=>Kt({id:G.Q.QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:Yt}),NAV_QUERY_RATIO_LENGTH_STRING:w=>Kt({id:G.Q.NAV_QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:Yt,text:Rt(w)}),USER_QUERY_RATIO_LENGTH_STRING:w=>Kt({id:G.Q.USER_QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:Yt,text:Ft(w,X.fd.USER_NAVIGATION)}),CHANNEL_QUERY_RATIO_LENGTH_STRING:w=>Kt({id:G.Q.CHANNEL_QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:Yt,text:Ft(w,X.fd.CHANNEL_NAVIGATION)}),MPIM_QUERY_RATIO_LENGTH_STRING:w=>Kt({id:G.Q.MPIM_QUERY_RATIO_LENGTH_STRING,suggestion:w,extractionFunction:Yt,text:Ft(w,X.fd.MPIM_NAVIGATION)}),MPIM_WITH_DEACTIVATED_USER:w=>be({id:G.Q.MPIM_WITH_DEACTIVATED_USER,value:(0,i.yz)(w.item)&&w.isMpimWithDeactivatedMember}),NAV_NORMAL_PREFIX_MATCH:w=>Kt({id:G.Q.NAV_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Be,text:Rt(w)}),FRECENCY_BONUS:w=>be({id:G.Q.FRECENCY_BONUS,value:(0,x.A)(Object.values(w.bonusPointMap||{}))||0}),USER_FIRST_NAME_EXACT_MATCH:(w,ve)=>{let{itemIsMember:Ne}=ve;return Kt({id:G.Q.USER_FIRST_NAME_EXACT_MATCH,suggestion:w,extractionFunction:Oe,text:Ne&&(0,r.XS)(w.item)})},USER_FIRST_NAME_EXACT_PREFIX_MATCH:(w,ve)=>{let{itemIsMember:Ne}=ve;return Kt({id:G.Q.USER_FIRST_NAME_EXACT_PREFIX_MATCH,suggestion:w,extractionFunction:ke,text:Ne&&(0,r.XS)(w.item)})},USER_FIRST_NAME_NORMAL_MATCH:(w,ve)=>{let{itemIsMember:Ne}=ve;return Kt({id:G.Q.USER_FIRST_NAME_NORMAL_MATCH,suggestion:w,extractionFunction:je,text:Ne&&(0,r.XS)(w.item)})},USER_FIRST_NAME_NORMAL_PREFIX_MATCH:(w,ve)=>{let{itemIsMember:Ne}=ve;return Kt({id:G.Q.USER_FIRST_NAME_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Be,text:Ne&&(0,r.XS)(w.item)})},USER_LAST_NAME_EXACT_MATCH:(w,ve)=>{let{itemIsMember:Ne}=ve;return Kt({id:G.Q.USER_LAST_NAME_EXACT_MATCH,suggestion:w,extractionFunction:Oe,text:Ne&&(0,r.lQ)(w.item)})},USER_LAST_NAME_EXACT_PREFIX_MATCH:(w,ve)=>{let{itemIsMember:Ne}=ve;return Kt({id:G.Q.USER_LAST_NAME_EXACT_PREFIX_MATCH,suggestion:w,extractionFunction:ke,text:Ne&&(0,r.lQ)(w.item)})},USER_LAST_NAME_NORMAL_MATCH:(w,ve)=>{let{itemIsMember:Ne}=ve;return Kt({id:G.Q.USER_LAST_NAME_NORMAL_MATCH,suggestion:w,extractionFunction:je,text:Ne&&(0,r.lQ)(w.item)})},USER_LAST_NAME_NORMAL_PREFIX_MATCH:(w,ve)=>{let{itemIsMember:Ne}=ve;return Kt({id:G.Q.USER_LAST_NAME_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Be,text:Ne&&(0,r.lQ)(w.item)})},USER_EMAIL_MATCH:w=>{var ve,Ne;return be({id:G.Q.USER_EMAIL_MATCH,value:((ve=w.scoreDetails)===null||ve===void 0?void 0:ve.email)!==void 0?((Ne=w.scoreDetails)===null||Ne===void 0?void 0:Ne.email)>=0:!1})},USER_EMAIL_ONLY_MATCH:w=>{var ve,Ne;return be({id:G.Q.USER_EMAIL_ONLY_MATCH,value:((ve=w.scoreDetails)===null||ve===void 0?void 0:ve.email)!==void 0&&((Ne=w.scoreDetails)===null||Ne===void 0?void 0:Ne.email)>=0&&Object.keys((We=w.scoreDetails)!==null&&We!==void 0?We:{}).length===1})},USER_PRIORITY:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_PRIORITY,value:Ne&&w.im&&(w==null?void 0:w.priority)||0})},ONLY_MATCHES_PREVIOUS_NAME:w=>be({id:G.Q.ONLY_MATCHES_PREVIOUS_NAME,value:w.bestPreviousNameMatch?1:null}),FRECENCY_WEIGHT_HIT_VISITS:w=>be({id:G.Q.FRECENCY_WEIGHT_HIT_VISITS,value:w.weightHitVisits}),FRECENCY_HIT_VISITS_4H:w=>be({id:G.Q.FRECENCY_HIT_VISITS_4H,value:w.hitVisits4h}),FRECENCY_HIT_VISITS_1D:w=>be({id:G.Q.FRECENCY_HIT_VISITS_1D,value:w.hitVisits1d}),FRECENCY_HIT_VISITS_3D:w=>be({id:G.Q.FRECENCY_HIT_VISITS_3D,value:w.hitVisits3d}),FRECENCY_HIT_VISITS_1W:w=>be({id:G.Q.FRECENCY_HIT_VISITS_1W,value:w.hitVisits1w}),FRECENCY_HIT_VISITS_1M:w=>be({id:G.Q.FRECENCY_HIT_VISITS_1M,value:w.hitVisits1m}),FRECENCY_HIT_VISITS_90D:w=>be({id:G.Q.FRECENCY_HIT_VISITS_90D,value:w.hitVisits90d}),FRECENCY_ITEM_VISITS_4H:w=>be({id:G.Q.FRECENCY_ITEM_VISITS_4H,value:w.itemVisits4h}),FRECENCY_ITEM_VISITS_1D:w=>be({id:G.Q.FRECENCY_ITEM_VISITS_1D,value:w.itemVisits1d}),FRECENCY_ITEM_VISITS_3D:w=>be({id:G.Q.FRECENCY_ITEM_VISITS_3D,value:w.itemVisits3d}),FRECENCY_ITEM_VISITS_1W:w=>be({id:G.Q.FRECENCY_ITEM_VISITS_1W,value:w.itemVisits1w}),FRECENCY_ITEM_VISITS_1M:w=>be({id:G.Q.FRECENCY_ITEM_VISITS_1M,value:w.itemVisits1m}),FRECENCY_ITEM_VISITS_90D:w=>be({id:G.Q.FRECENCY_ITEM_VISITS_90D,value:w.itemVisits90d}),FRECENCY_HIT_COUNT:w=>be({id:G.Q.FRECENCY_HIT_COUNT,value:w.hitCount}),FRECENCY_WEIGHT_ITEM_VISITS:w=>be({id:G.Q.FRECENCY_WEIGHT_ITEM_VISITS,value:w.weightItemVisits}),FRECENCY_ITEM_COUNT:w=>be({id:G.Q.FRECENCY_ITEM_COUNT,value:w.itemCount}),NAV_NORMAL_MATCH_USER:w=>Kt({id:G.Q.NAV_NORMAL_MATCH_USER,suggestion:w,extractionFunction:ve=>{let{text:Ne,normalizedQuery:dt}=ve;return je({text:Ne,normalizedQuery:dt})&&!Be({text:(0,r.XS)(w.item),normalizedQuery:dt})},text:Ft(w,X.fd.USER_NAVIGATION)}),NAV_NORMAL_PREFIX_MATCH_USER:w=>Kt({id:G.Q.NAV_NORMAL_PREFIX_MATCH_USER,suggestion:w,extractionFunction:ve=>{let{text:Ne,normalizedQuery:dt}=ve;return Be({text:Ne,normalizedQuery:dt})&&!Be({text:(0,r.XS)(w.item),normalizedQuery:dt})},text:Ft(w,X.fd.USER_NAVIGATION)}),NAV_NORMAL_MATCH_NO_USER:w=>Kt({id:G.Q.NAV_NORMAL_MATCH_NO_USER,suggestion:w,extractionFunction:je,text:$t(w)}),NAV_NORMAL_PREFIX_MATCH_NO_USER:w=>Kt({id:G.Q.NAV_NORMAL_PREFIX_MATCH_NO_USER,suggestion:w,extractionFunction:Be,text:$t(w)}),CHANNEL_LATEST_MSG_AGE_DECAY_7D:(w,ve)=>{let{itemIsChannel:Ne,now:dt}=ve;return be({id:G.Q.CHANNEL_LATEST_MSG_AGE_DECAY_7D,value:Ne&&_t(dt,parseFloat((xe=w.latestTs)!==null&&xe!==void 0?xe:""),7*le)||0})},CHANNEL_LATEST_MSG_AGE_DECAY_2H:(w,ve)=>{let{itemIsChannel:Ne,now:dt}=ve;return be({id:G.Q.CHANNEL_LATEST_MSG_AGE_DECAY_2H,value:Ne&&_t(dt,parseFloat((ze=w.latestTs)!==null&&ze!==void 0?ze:""),2*q)||0})},MPIM_LATEST_MSG_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_LATEST_MSG_AGE_DECAY_2H,value:(0,i.yz)(w.item)&&_t(Ne,parseFloat((mt=w.latestTs)!==null&&mt!==void 0?mt:""),2*q)||0})},MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H,value:(0,i.yz)(w.item)&&_t(Ne,w.maxLatestMsgTsOfAllMembers,2*q)||0})},MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D,value:(0,i.yz)(w.item)&&_t(Ne,w.maxLatestMsgTsOfAllMembers,7*le)||0})},MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H,value:(0,i.yz)(w.item)&&_t(Ne,w.avgLatestMsgTsOfAllMembers,2*q)||0})},MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D,value:(0,i.yz)(w.item)&&_t(Ne,w.avgLatestMsgTsOfAllMembers,7*le)||0})},MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H,value:(0,i.yz)(w.item)&&_t(Ne,w.maxLastReadTsOfAllMembers,2*q)||0})},MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D,value:(0,i.yz)(w.item)&&_t(Ne,w.maxLastReadTsOfAllMembers,7*le)||0})},MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H,value:(0,i.yz)(w.item)&&_t(Ne,w.avgLastReadTsOfAllMembers,2*q)||0})},MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D,value:(0,i.yz)(w.item)&&_t(Ne,w.avgLastReadTsOfAllMembers,7*le)||0})},MPIM_USERS_PCT_NON_EMPTY_DMS:w=>be({id:G.Q.MPIM_USERS_PCT_NON_EMPTY_DMS,value:(0,i.yz)(w.item)&&w.pctNonEmptyDmsForAllMembers||0}),MPIM_USERS_PCT_NON_NULL_DMS:w=>be({id:G.Q.MPIM_USERS_PCT_NON_NULL_DMS,value:(0,i.yz)(w.item)&&w.pctNonNullDmsForAllMembers||0}),MPIM_USERS_ALL_INTERNAL:w=>be({id:G.Q.MPIM_USERS_ALL_INTERNAL,value:(0,i.yz)(w.item)&&w.isMpimWithOnlyInternalMembers}),MPIM_LATEST_MSG_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.MPIM_LATEST_MSG_AGE_DECAY_7D,value:(0,i.yz)(w.item)&&_t(Ne,parseFloat((pt=w.latestTs)!==null&&pt!==void 0?pt:""),7*le)||0})},USER_DM_LATEST_MSG_AGE_DECAY_7D:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_LATEST_MSG_AGE_DECAY_7D,value:Ne&&w.im&&_t(dt,parseFloat((It=w.latestTs)!==null&&It!==void 0?It:""),7*le)||0})},USER_DM_LATEST_MSG_AGE_DECAY_7D_V2:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2,value:Ne&&w.im&&_t(dt,parseFloat((bt=w.latestImTs)!==null&&bt!==void 0?bt:""),7*le)||0})},USER_DM_LATEST_MSG_AGE_DECAY_2H:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_LATEST_MSG_AGE_DECAY_2H,value:Ne&&w.im&&_t(dt,parseFloat((gt=w.latestTs)!==null&&gt!==void 0?gt:""),2*q)||0})},USER_DM_LATEST_MSG_AGE_DECAY_2H_V2:(w,ve)=>{let{itemIsMember:Ne,now:dt}=ve;return be({id:G.Q.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2,value:Ne&&w.im&&_t(dt,parseFloat((ht=w.latestImTs)!==null&&ht!==void 0?ht:""),2*q)||0})},FRECENCY_LOG_HIT_COUNT:w=>be({id:G.Q.FRECENCY_LOG_HIT_COUNT,value:Math.log1p((Zt=w.hitCount)!==null&&Zt!==void 0?Zt:0)||0}),FRECENCY_LOG_HIT_COUNT_SCALED:w=>be({id:G.Q.FRECENCY_LOG_HIT_COUNT_SCALED,value:w.logHitCountScaled}),FRECENCY_LOG_ITEM_COUNT:w=>be({id:G.Q.FRECENCY_LOG_ITEM_COUNT,value:Math.log1p((rn=w.itemCount)!==null&&rn!==void 0?rn:0)||0}),FRECENCY_LOG_ITEM_COUNT_SCALED:w=>be({id:G.Q.FRECENCY_LOG_ITEM_COUNT_SCALED,value:w.logItemCountScaled}),QUERY_FRECENCY_RAW:w=>be({id:G.Q.QUERY_FRECENCY_RAW,value:(w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER)&&w.scoringContext.frecencyScoreRaw}),QUERY_FRECENCY_WEIGHT_HIT_VISITS:w=>be({id:G.Q.QUERY_FRECENCY_WEIGHT_HIT_VISITS,value:(w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER)&&w.scoringContext.frecencyWeightHitVisits}),QUERY_FRECENCY_HIT_COUNT:w=>be({id:G.Q.QUERY_FRECENCY_HIT_COUNT,value:(w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER)&&w.scoringContext.frecencyHitCount}),QUERY_LOG_HIT_COUNT:w=>be({id:G.Q.QUERY_LOG_HIT_COUNT,value:(w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER)&&Fe(w.scoringContext.frecencyHitCount)||w.suggestionType===X.fd.QUERY_HISTORY&&Fe((zt=w.count)!==null&&zt!==void 0?zt:0)||0}),QUERY_FRECENCY_WEIGHT_ITEM_VISITS:w=>be({id:G.Q.QUERY_FRECENCY_WEIGHT_ITEM_VISITS,value:(w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER)&&w.scoringContext.frecencyWeightItemVisits}),QUERY_FRECENCY_ITEM_COUNT:w=>be({id:G.Q.QUERY_FRECENCY_ITEM_COUNT,value:(w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER)&&w.scoringContext.frecencyItemCount}),QUERY_FUZZY_SCORE:w=>be({id:G.Q.QUERY_FUZZY_SCORE,value:(w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER)&&w.scoringContext.fuzzyScore}),QUERY_FRECENCY_BONUS:w=>{var ve;return be({id:G.Q.QUERY_FRECENCY_BONUS,value:(w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER)&&(0,x.A)(Object.values(((ve=w.scoringContext)===null||ve===void 0?void 0:ve.frecencyScoreBonus)||{}))||0})},QUERY_HISTORY_LOG_INDEX:w=>be({id:G.Q.QUERY_HISTORY_LOG_INDEX,value:w.suggestionType===X.fd.QUERY_HISTORY&&Fe(w.index)||0}),QUERY_HISTORY_AGE_DECAY_30D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.QUERY_HISTORY_AGE_DECAY_30D,value:w.suggestionType===X.fd.QUERY_HISTORY&&_t(Ne,w.lastUpdateTs,30*le)||0})},FUZZY_SCORE:w=>be({id:G.Q.FUZZY_SCORE,value:w.score}),FUZZY_SCORE_SCALED_EXP:w=>be({id:G.Q.FUZZY_SCORE_SCALED_EXP,value:Q(w.score)&&.5**Math.min(w.score,10)}),FUZZY_SCORE_SCALED_FLIPPED:w=>be({id:G.Q.FUZZY_SCORE_SCALED_FLIPPED,value:Q(w.score)&&10-Math.min(w.score,10)}),FUZZY_SCORE_SCALED_SUBTRACT:w=>be({id:G.Q.FUZZY_SCORE_SCALED_SUBTRACT,value:Q(w.score)&&Math.min(w.score,10)-1}),FUZZY_SCORE_50:w=>be({id:G.Q.FUZZY_SCORE_50,value:w.bonusPointMap&&w.bonusPointMap.fuzzyScoreBonus===50}),FUZZY_SCORE_25:w=>be({id:G.Q.FUZZY_SCORE_25,value:w.bonusPointMap&&w.bonusPointMap.fuzzyScoreBonus===25}),FUZZY_SCORE_ALL:w=>be({id:G.Q.FUZZY_SCORE_ALL,value:w.bonusPointMap&&w.bonusPointMap.fuzzyScoreBonus&&w.bonusPointMap.fuzzyScoreBonus<25}),FILTER_USER_IS_ACTIVE:w=>be({id:G.Q.FILTER_USER_IS_ACTIVE,value:w.lastSuggestionToken&&w.lastTokenMemberOrNull&&(0,r.ls)(w.lastTokenMemberOrNull)}),FILTER_USER_IS_CURRENT_USER:w=>be({id:G.Q.FILTER_USER_IS_CURRENT_USER,value:w.lastSuggestionToken&&w.lastTokenMemberOrNull&&(0,r.fy)(w.lastTokenMemberOrNull)}),FILTER_USER_DM_IS_STARRED:w=>be({id:G.Q.FILTER_USER_DM_IS_STARRED,value:w.lastTokenIm&&w.lastTokenImIsStarred}),FILTER_USER_DM_IS_UNREAD:w=>be({id:G.Q.FILTER_USER_DM_IS_UNREAD,value:w.lastTokenIm&&(0,o.KJ)(w.lastTokenIm)}),FILTER_USER_DM_READ_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILTER_USER_DM_READ_AGE_DECAY_7D,value:w.lastTokenIm&&_t(Ne,w.lastTokenImLastRead,7*le)||0})},FILTER_USER_DM_READ_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILTER_USER_DM_READ_AGE_DECAY_2H,value:w.lastTokenIm&&_t(Ne,w.lastTokenImLastRead,2*q)||0})},FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D,value:w.lastTokenIm&&_t(Ne,parseFloat((In=w.lastTokenImLatest)!==null&&In!==void 0?In:""),7*le)||0})},FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H,value:w.lastTokenIm&&_t(Ne,parseFloat((cn=w.lastTokenImLatest)!==null&&cn!==void 0?cn:""),2*q)||0})},FILTER_USER_FIRST_NAME_NORMAL_MATCH:w=>Kt({id:G.Q.FILTER_USER_FIRST_NAME_NORMAL_MATCH,suggestion:w,extractionFunction:je,text:hn(w)}),FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH:w=>Kt({id:G.Q.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Be,text:hn(w)}),FILTER_USER_LAST_NAME_NORMAL_MATCH:w=>Kt({id:G.Q.FILTER_USER_LAST_NAME_NORMAL_MATCH,suggestion:w,extractionFunction:je,text:gn(w)}),FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH:w=>Kt({id:G.Q.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Be,text:gn(w)}),FILTER_USER_PRIORITY:w=>be({id:G.Q.FILTER_USER_PRIORITY,value:w.lastTokenIm&&(w==null?void 0:w.priority)}),HERE_KEYWORD:w=>be({id:G.Q.HERE_KEYWORD,value:w.name==="here"}),HERE_KEYWORD_EXACT_MATCH:w=>be({id:G.Q.HERE_KEYWORD_EXACT_MATCH,value:w.name==="here"&&w.query==="here"}),IS_BROADCAST_KEYWORD:w=>be({id:G.Q.IS_BROADCAST_KEYWORD,value:!!(w.type&&w.type==="broadcastKeyword")}),BROADCAST_KEYWORD_NORMAL_MATCH:w=>be({id:G.Q.BROADCAST_KEYWORD_NORMAL_MATCH,value:!!(w.type&&w.type==="broadcastKeyword"&&je({text:(Jt=w.name)!==null&&Jt!==void 0?Jt:"",normalizedQuery:w.normalizedQuery}))}),EMOJI_EXACT_MATCH:w=>be({id:G.Q.EMOJI_EXACT_MATCH,value:w.bonusPointMap&&w.bonusPointMap.isEmojiExactMatch&&1}),QUERY_TOKEN_NORMAL_MATCH:w=>Kt({id:G.Q.QUERY_TOKEN_NORMAL_MATCH,suggestion:w,extractionFunction:je,text:Cn(w)}),QUERY_TOKEN_NORMAL_PREFIX_MATCH:w=>Kt({id:G.Q.QUERY_TOKEN_NORMAL_PREFIX_MATCH,suggestion:w,extractionFunction:Be,text:Cn(w)}),FILTER_CHANNEL_IS_ARCHIVED:w=>be({id:G.Q.FILTER_CHANNEL_IS_ARCHIVED,value:(0,l.F)(w.lastTokenChannelOrNull)}),FILTER_CHANNEL_IS_MEMBER:w=>be({id:G.Q.FILTER_CHANNEL_IS_MEMBER,value:(0,_.b)(w.lastTokenChannelOrNull)}),FILTER_CHANNEL_IS_STARRED:w=>be({id:G.Q.FILTER_CHANNEL_IS_STARRED,value:w.lastTokenChannelIsStarred}),FILTER_CHANNEL_IS_UNREAD:w=>be({id:G.Q.FILTER_CHANNEL_IS_UNREAD,value:(0,o.KJ)(w.lastTokenChannelOrNull)}),FILTER_CHANNEL_READ_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILTER_CHANNEL_READ_AGE_DECAY_7D,value:_t(Ne,w.lastTokenChannelLastRead,7*le)})},FILTER_CHANNEL_READ_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILTER_CHANNEL_READ_AGE_DECAY_2H,value:_t(Ne,w.lastTokenChannelLastRead,2*q)})},FILTER_CHANNEL_PRIORITY:w=>be({id:G.Q.FILTER_CHANNEL_PRIORITY,value:w==null?void 0:w.priority}),CHANNEL_IS_FROZEN:(w,ve)=>{let{itemIsChannel:Ne}=ve;return be({id:G.Q.CHANNEL_IS_FROZEN,value:Ne&&(0,ge.Zz)(w.item)})},USER_DM_IS_FROZEN:(w,ve)=>{let{itemIsMember:Ne}=ve;return be({id:G.Q.USER_DM_IS_FROZEN,value:Ne&&w.im&&(0,ge.Zz)(w.im)})},CHANNEL_HAS_DRAFT:w=>be({id:G.Q.CHANNEL_HAS_DRAFT,value:w.hasDraft}),USER_DM_HAS_DRAFT:w=>be({id:G.Q.USER_DM_HAS_DRAFT,value:w.imHasDraft}),EMOJI_QUERY_LENGTH_RATIO:w=>be({id:G.Q.EMOJI_QUERY_LENGTH_RATIO,value:w.emojiQueryLengthRatio}),EMOJI_TOTAL_COMBO_BREAKS:w=>be({id:G.Q.EMOJI_TOTAL_COMBO_BREAKS,value:w.emojiTotalComboBreaks}),EMOJI_COMBO_BREAK_0:w=>be({id:G.Q.EMOJI_COMBO_BREAK_0,value:w.emojiTotalComboBreaks===0}),EMOJI_COMBO_BREAK_1:w=>be({id:G.Q.EMOJI_COMBO_BREAK_1,value:w.emojiTotalComboBreaks===1}),EMOJI_COMBO_BREAK_2:w=>be({id:G.Q.EMOJI_COMBO_BREAK_2,value:w.emojiTotalComboBreaks===2}),EMOJI_COMBO_BREAK_3:w=>be({id:G.Q.EMOJI_COMBO_BREAK_3,value:w.emojiTotalComboBreaks===3}),TYPE_APP_ACTION:w=>be({id:G.Q.TYPE_APP_ACTION,value:w.suggestionType===X.fd.APP_ACTION}),OS_APP_ACTION:(w,ve)=>{let{source:Ne}=ve;return be({id:G.Q.OS_APP_ACTION,value:(Ne==null?void 0:Ne.startsWith("omniswitcher"))&&w.suggestionType===X.fd.APP_ACTION})},TYPE_APP:w=>be({id:G.Q.TYPE_APP,value:w.suggestionType===X.fd.APP}),TYPE_SLASH_COMMAND:w=>be({id:G.Q.TYPE_SLASH_COMMAND,value:w.suggestionType===X.fd.SLASH_COMMAND}),TYPE_GLOBAL_ACTION:w=>be({id:G.Q.TYPE_GLOBAL_ACTION,value:w.suggestionType===X.fd.GLOBAL_ACTION}),IS_INVITE_WORKSPACE:w=>be({id:G.Q.IS_INVITE_WORKSPACE,value:w.id==="slack-invite-to-workspace"}),TYPE_CHANNEL_ACTION:w=>be({id:G.Q.TYPE_CHANNEL_ACTION,value:w.suggestionType===X.fd.CHANNEL_ACTION}),TYPE_WORKFLOW_TRIGGER:w=>be({id:G.Q.TYPE_WORKFLOW_TRIGGER,value:w.suggestionType===X.fd.WORKFLOW_TRIGGER}),TYPE_NAVIGATION_MESSAGE:w=>be({id:G.Q.TYPE_NAVIGATION_MESSAGE,value:w.suggestionType===X.fd.MESSAGE_NAVIGATION}),TYPE_EMOJI:w=>be({id:G.Q.TYPE_EMOJI,value:w.suggestionType===X.fd.EMOJI}),HAS_CHANNEL_ASSOCIATION:w=>be({id:G.Q.HAS_CHANNEL_ASSOCIATION,value:w.associatedWithCurrentChannel}),MEMBER_OF_CURRENT_CHANNEL:w=>be({id:G.Q.MEMBER_OF_CURRENT_CHANNEL,value:w.isMemberOfCurrentChannel}),QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL:w=>Kt({id:G.Q.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL,suggestion:w,extractionFunction:tn,text:Ft(w,X.fd.CHANNEL_NAVIGATION)}),FRECENCY_HIT_VISIT_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FRECENCY_HIT_VISIT_DECAY_2H,value:_t(Ne,w.latestHitVisit,2*q)||0})},FRECENCY_HIT_VISIT_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FRECENCY_HIT_VISIT_DECAY_7D,value:_t(Ne,w.latestHitVisit,7*le)||0})},FRECENCY_ITEM_VISIT_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FRECENCY_ITEM_VISIT_DECAY_2H,value:_t(Ne,w.latestItemVisit,2*q)||0})},FRECENCY_ITEM_VISIT_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FRECENCY_ITEM_VISIT_DECAY_7D,value:_t(Ne,w.latestItemVisit,7*le)||0})},MPIM_MEMBERS:w=>be({id:G.Q.MPIM_MEMBERS,value:w.item.members.length}),MPIM_MEMBER_NAME_MATCHES:w=>be({id:G.Q.MPIM_MEMBER_NAME_MATCHES,value:w.scoreDetailsByMember&&Object.values(w.scoreDetailsByMember).filter(ve=>((dn=ve.score_details.real_name)!==null&&dn!==void 0?dn:-1/0)>=0||((sn=ve.score_details.display_name)!==null&&sn!==void 0?sn:-1/0)>=0).length}),MPIM_MEMBER_ALL_MATCHES:w=>be({id:G.Q.MPIM_MEMBER_ALL_MATCHES,value:w.scoreDetailsByMember&&Object.keys(w.scoreDetailsByMember).length}),MPIM_MATCHER_SCORE:w=>be({id:G.Q.MPIM_MATCHER_SCORE,value:w.score}),MPIM_MATCHER_SCORE_0:w=>be({id:G.Q.MPIM_MATCHER_SCORE_0,value:w.score===0}),MPIM_MATCHER_SCORE_1:w=>be({id:G.Q.MPIM_MATCHER_SCORE_1,value:w.score===1}),MPIM_MATCHER_SCORE_2:w=>be({id:G.Q.MPIM_MATCHER_SCORE_2,value:w.score===2}),MPIM_MATCHER_SCORE_3:w=>be({id:G.Q.MPIM_MATCHER_SCORE_3,value:w.score===3}),EMOJI_TEAM_CTR_90DD:w=>{var ve;return be({id:G.Q.EMOJI_TEAM_CTR_90DD,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.team_ctr_90dd})},EMOJI_USER_CTR_30DD:w=>{var ve;return be({id:G.Q.EMOJI_USER_CTR_30DD,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.user_ctr_30dd})},MPIM_TEAM_CTR_90DD:w=>{var ve;return be({id:G.Q.MPIM_TEAM_CTR_90DD,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.team_ctr_90dd})},MPIM_USER_CTR_30DD:w=>{var ve;return be({id:G.Q.MPIM_USER_CTR_30DD,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.user_ctr_30dd})},CHANNEL_TEAM_CTR_90DD:w=>{var ve;return be({id:G.Q.CHANNEL_TEAM_CTR_90DD,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.team_ctr_90dd})},CHANNEL_USER_CTR_30DD:w=>{var ve;return be({id:G.Q.CHANNEL_USER_CTR_30DD,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.user_ctr_30dd})},USER_ENTITY_TYPE_CTR_30DD:w=>be({id:G.Q.USER_ENTITY_TYPE_CTR_30DD,value:w.entityTypeCtr}),NUM_RESULTS:w=>be({id:G.Q.NUM_RESULTS,value:w.numResults}),QUERY_IS_SELF:w=>{var ve;return be({id:G.Q.QUERY_IS_SELF,value:((ve=w.scoreDetails)===null||ve===void 0?void 0:ve.self_score)===0})},CURRENT_USER_TEXTY:(w,ve)=>{let{isCurrentUser:Ne,source:dt}=ve;return be({id:G.Q.CURRENT_USER_TEXTY,value:dt==="texty-autocomplete"&&Ne})},FILE_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_AGE_DECAY_7D,value:w.item&&_t(Ne,w.item.created,7*le)})},FILE_AGE_DECAY_28D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_AGE_DECAY_28D,value:w.item&&_t(Ne,w.item.created,28*le)})},FILE_AGE_DECAY_90D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_AGE_DECAY_90D,value:w.item&&_t(Ne,w.item.created,90*le)})},FILE_FROM_CURRENT_USER:w=>be({id:G.Q.FILE_FROM_CURRENT_USER,value:w.fromCurrentUser}),NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS:w=>Kt({id:G.Q.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS,suggestion:w,extractionFunction:je,text:Ft(w,X.fd.CHANNEL_NAVIGATION),multiplier:Fe(w.numResults)}),FILE_LOG_PUBLIC_SHARES:w=>{var ve,Ne;return be({id:G.Q.FILE_LOG_PUBLIC_SHARES,value:((ve=w.item)===null||ve===void 0||(Ne=ve.shares)===null||Ne===void 0?void 0:Ne.public)&&Fe(Object.keys(w.item.shares.public).length)})},FILE_LOG_PRIVATE_SHARES:w=>{var ve,Ne;return be({id:G.Q.FILE_LOG_PRIVATE_SHARES,value:((ve=w.item)===null||ve===void 0||(Ne=ve.shares)===null||Ne===void 0?void 0:Ne.private)&&Fe(Object.keys(w.item.shares.private).length)})},FILE_LOG_ACTIONS:w=>{var ve;return be({id:G.Q.FILE_LOG_ACTIONS,value:((ve=w.item)===null||ve===void 0?void 0:ve.actions)&&Fe(w.item.actions.length)})},FILE_LATEST_ACTION_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_LATEST_ACTION_AGE_DECAY_2H,value:_t(Ne,w.latestActionTs,2*q)})},FILE_LATEST_ACTION_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_LATEST_ACTION_AGE_DECAY_7D,value:_t(Ne,w.latestActionTs,7*le)})},FILE_LATEST_ACTION_AGE_DECAY_90D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_LATEST_ACTION_AGE_DECAY_90D,value:_t(Ne,w.latestActionTs,90*le)})},FILE_LATEST_SHARE_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_LATEST_SHARE_AGE_DECAY_2H,value:_t(Ne,w.latestShareTs,2*q)})},FILE_LATEST_SHARE_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_LATEST_SHARE_AGE_DECAY_7D,value:_t(Ne,w.latestShareTs,7*le)})},FILE_LATEST_SHARE_AGE_DECAY_90D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_LATEST_SHARE_AGE_DECAY_90D,value:_t(Ne,w.latestShareTs,90*le)})},FILE_CHANNEL_CTR:w=>be({id:G.Q.FILE_CHANNEL_CTR,value:w.fileChannelCtr}),FILE_SUGGESTIONS_SEARCHER:w=>be({id:G.Q.FILE_SUGGESTIONS_SEARCHER,value:w.fileSuggestionsFromSearcher}),FILE_USER_CTR:w=>be({id:G.Q.FILE_USER_CTR,value:w.fileUserCtr}),FILE_NAME_CONTAINS_QUERY_NORMALIZED:w=>Kt({id:G.Q.FILE_NAME_CONTAINS_QUERY_NORMALIZED,suggestion:w,extractionFunction:Xe,text:Ft(w,X.fd.FILE_NAVIGATION)}),FILE_IS_CANVAS:w=>be({id:G.Q.FILE_IS_CANVAS,value:vn(w,"quip")}),FILE_HAS_DMS_WITH_CREATOR:w=>be({id:G.Q.FILE_HAS_DMS_WITH_CREATOR,value:w.hasNonNullDmsWithCreator}),FILE_HAS_DMS_WITH_CREATOR_V2:w=>be({id:G.Q.FILE_HAS_DMS_WITH_CREATOR_V2,value:w.hasNonNullLocalOrRemoteDmsWithCreator}),FILE_LATEST_VIEW_BY_USER_OLDER_90D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.FILE_LATEST_VIEW_BY_USER_OLDER_90D,value:Qt(Ne,parseFloat((Xt=w.lastReadTs)!==null&&Xt!==void 0?Xt:"")/1e3,90*le)})},APP_NAME_PREFIX_MATCH:w=>{var ve;return Kt({id:G.Q.APP_NAME_PREFIX_MATCH,suggestion:w,extractionFunction:Be,text:(ve=w.item)===null||ve===void 0?void 0:ve.appName})},BEST_NAME_MATCH_LOG_RESULTS:w=>be({id:G.Q.BEST_NAME_MATCH_LOG_RESULTS,value:w.bestNameIsExactMatch&&Fe(w.numResults)}),SLASH_COMMAND_USER_CTR:w=>{var ve;return be({id:G.Q.SLASH_COMMAND_USER_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.user_ctr_30dd})},WORKFLOW_TRIGGER_USER_CTR:w=>{var ve;return be({id:G.Q.WORKFLOW_TRIGGER_USER_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.user_ctr_30dd})},GLOBAL_ACTION_USER_CTR:w=>{var ve;return be({id:G.Q.GLOBAL_ACTION_USER_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.user_ctr_30dd})},CHANNEL_ACTION_USER_CTR:w=>{var ve;return be({id:G.Q.CHANNEL_ACTION_USER_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.user_ctr_30dd})},APP_ACTION_USER_CTR:w=>{var ve;return be({id:G.Q.APP_ACTION_USER_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.user_ctr_30dd})},SLASH_COMMAND_TEAM_CTR:w=>{var ve;return be({id:G.Q.SLASH_COMMAND_TEAM_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.team_ctr_90dd})},WORKFLOW_TRIGGER_TEAM_CTR:w=>{var ve;return be({id:G.Q.WORKFLOW_TRIGGER_TEAM_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.team_ctr_90dd})},GLOBAL_ACTION_TEAM_CTR:w=>{var ve;return be({id:G.Q.GLOBAL_ACTION_TEAM_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.team_ctr_90dd})},CHANNEL_ACTION_TEAM_CTR:w=>{var ve;return be({id:G.Q.CHANNEL_ACTION_TEAM_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.team_ctr_90dd})},APP_ACTION_TEAM_CTR:w=>{var ve;return be({id:G.Q.APP_ACTION_TEAM_CTR,value:(ve=w.offlineFeatures)===null||ve===void 0?void 0:ve.team_ctr_90dd})},SHORTCUT_ENTITY_TYPE_CTR:w=>be({id:G.Q.SHORTCUT_ENTITY_TYPE_CTR,value:w.entityTypeCtr}),EXACT_MATCH_LOG_RESULTS:w=>be({id:G.Q.EXACT_MATCH_LOG_RESULTS,value:(w.isExactMatch?1:0)*Fe(w.numResults)}),HISTORY_AGE_DECAY_2H:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.HISTORY_AGE_DECAY_2H,value:_t(Ne,w.historyTs,2*q)})},HISTORY_AGE_DECAY_7D:(w,ve)=>{let{now:Ne}=ve;return be({id:G.Q.HISTORY_AGE_DECAY_7D,value:_t(Ne,w.historyTs,7*le)})},HISTORY_POSITION:w=>be({id:G.Q.HISTORY_POSITION,value:w.historyPosition})};class en{serialize(){const ve=new he;this.featureList.forEach(dt=>kt({feature:dt,serializer:ve}));const Ne=ve.serialize();return`${this.featuresVersion}:${Ne}`}valueForFeature(ve){let Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(ve==null)return B().error(`Invalid feature id: ${ve}`),null;const dt=this.featureList.find(Mn=>Mn.id===ve);if(!(0,Y.A)(dt))return Ne?Ot(dt)||"":ut(dt)||0}static fromSuggestion(ve,Ne){const dt=Date.now()/1e3,Mn=!!(0,r.NB)(ve.item),Tn=!!((0,i.rW)(ve.item)||(0,i.Zp)(ve.item)),mn=Mn&&(0,r.fy)(ve.item),ln={itemIsChannel:Tn,itemIsMember:Mn,now:dt,isCurrentUser:mn,source:Ne};return new this(un(ve,Ne).map(is=>xt[is]&&xt[is](ve,ln)||null))}constructor(ve){this.featureList=ve,this.featuresVersion="v8"}}u(en,"SuggestionFeatureVector");function un(w,ve){return ve==="slash-command-menu"?[...F.globalFeatures]:w.suggestionType===X.fd.USER_NAVIGATION?[...F.globalFeatures,...F.userFeatures]:w.suggestionType===X.fd.CHANNEL_NAVIGATION?[...F.globalFeatures,...F.channelFeatures]:w.suggestionType===X.fd.MPIM_NAVIGATION?[...F.globalFeatures,...F.mpimFeatures]:w.suggestionType===X.fd.VIEW_NAVIGATION?[...F.globalFeatures,...F.viewFeatures]:w.suggestionType===X.fd.FILE_NAVIGATION?[...F.globalFeatures,...F.fileFeatures,...F.queryFeatures]:w.suggestionType===X.fd.LINK_NAVIGATION?[...F.globalFeatures,...F.linkFeatures]:w.suggestionType===X.fd.MODAL_NAVIGATION?[...F.globalFeatures,...F.modalFeatures]:w.suggestionType===X.fd.TEAM_NAVIGATION?[...F.globalFeatures,...F.teamFeatures]:w.type==="emoji"?[...F.globalFeatures,...F.emojiFeatures]:w.type==="broadcastKeyword"?[...F.globalFeatures,...F.broadcastKeywordFeatures]:w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER?[...F.globalFeatures,...F.queryFeatures]:w.suggestionType===X.fd.APP_ACTION?[...F.globalFeatures,...F.shortcutFeatures,...F.appActionFeatures]:w.suggestionType===X.fd.SLASH_COMMAND?[...F.globalFeatures,...F.shortcutFeatures,...F.slashCommandFeatures]:w.suggestionType===X.fd.GLOBAL_ACTION?[...F.globalFeatures,...F.shortcutFeatures,...F.globalActionFeatures]:w.suggestionType===X.fd.CHANNEL_ACTION?[...F.globalFeatures,...F.shortcutFeatures,...F.channelActionFeatures]:w.suggestionType===X.fd.WORKFLOW_TRIGGER?[...F.globalFeatures,...F.shortcutFeatures,...F.workflowTriggerFeatures]:w.suggestionType===X.fd.APP?[...F.globalFeatures,...F.appFeatures]:w.suggestionType===X.fd.MESSAGE_NAVIGATION?[...F.globalFeatures,...F.messageFeatures]:w.suggestionType===X.fd.QUERY_HISTORY?[...F.globalFeatures,...F.queryFeatures]:F.globalFeatures}u(un,"getFeaturesForExtraction");class yn{constructor({id:ve,value:Ne}){ve==null&&B().error(`Invalid feature id: ${ve}`);const dt=J(ve);dt||B().error(`Missing feature name for id: ${ve}`),this.id=ve,this.name=dt,this.valueOrNull=Ne}}u(yn,"Feature");function ut(w){return typeof w.valueOrNull=="number"&&isFinite(w.valueOrNull)?w.valueOrNull:typeof w.valueOrNull=="boolean"&&w.valueOrNull?1:0}u(ut,"getNumericValueForFeature");function Ot(w){return w.valueOrNull===null||w.valueOrNull===void 0?"":w.valueOrNull.toString()}u(Ot,"getStringValueForFeature");function kt(w){let{feature:ve,serializer:Ne}=w;ve.valueOrNull===null&&Ne.writeNullFeature(),typeof ve.valueOrNull=="number"&&Ne.writeNumericalFeature(ve.valueOrNull,ve.id),typeof ve.valueOrNull=="boolean"&&Ne.writeBinaryFeature(ve.valueOrNull,ve.id),typeof ve.valueOrNull=="string"&&Ne.writeTextFeature(ve.valueOrNull,ve.id)}u(kt,"serializeFeature");function be(w){let{id:ve,value:Ne}=w;const dt=(0,Y.A)(Ne)?null:Ne;return new yn({id:ve,value:dt})}u(be,"makeFeature");function Kt(w){let{id:ve,suggestion:Ne,extractionFunction:dt,text:Mn=At(Ne),multiplier:Tn=1}=w;if(!Mn)return be({id:ve,value:null});const mn=dt({text:Mn,query:Ne.query||"",normalizedQuery:Ne.normalizedQuery||""}),ln=mn===!0?1:mn===!1?0:mn;return be({id:ve,value:(ln??0)*Tn})}u(Kt,"makeTextFeature");function Vt(w){let ve=null;return(w.suggestionType===X.fd.QUERY||w.suggestionType===X.fd.QUERY_USER||w.suggestionType===X.fd.CHANNEL_NAVIGATION||w.suggestionType===X.fd.MPIM_NAVIGATION||w.suggestionType===X.fd.USER_NAVIGATION||w.suggestionType===X.fd.TEAM_NAVIGATION||w.suggestionType===X.fd.VIEW_NAVIGATION||w.suggestionType===X.fd.FILE_NAVIGATION)&&(ve=w.frecencyScore),ve}u(Vt,"getFrecencyScoreForSuggestion");function on(w){let ve=null;return w.suggestionType===X.fd.QUERY&&w.lastSuggestionToken&&w.lastSuggestionToken.type===X.S6.API&&(ve=w.lastSuggestionToken.querySuggestionScore),ve}u(on,"getQuerySuggestionScoreV2");function pn(w){let ve=null;return w.suggestionType===X.fd.FILE_NAVIGATION&&(ve=w.rawScore),ve}u(pn,"getFileSuggestionScore");function et(w){return w&&w.lastSuggestionToken?w.lastSuggestionToken.toString():""}u(et,"getLastSuggestionTokenString");function At(w){return Rn(w)?et(w):w.suggestionType===X.fd.FILE_NAVIGATION?w.name:null}u(At,"getTextOrNullFromQuerySuggestion");function Rt(w){return w.isNavigational||w.isAction||w.isApp?w.name:null}u(Rt,"getTextOrNullFromNavigationalSuggestion");function Ft(w,ve){return w.suggestionType===ve?w.name:null}u(Ft,"getTextOrNullFromSuggestionWithType");function $t(w){return w.suggestionType===X.fd.USER_NAVIGATION||(0,Y.A)(w.name)?null:w.name}u($t,"getTextOrNullFromSuggestionNotUser");function vn(w,ve){return w.suggestionType!==X.fd.FILE_NAVIGATION?!1:w.fileType===ve}u(vn,"isFileTypeMatch");function Rn(w){return w.lastSuggestionToken?w.lastSuggestionToken.type===X.S6.STRING||w.lastSuggestionToken.type===X.S6.PHRASE||w.lastSuggestionToken.type===X.S6.API:!1}u(Rn,"isActiveTokenStringLike");function hn(w){return w.lastTokenMemberOrNull&&w.lastTokenMemberOrNull.profile&&w.lastTokenMemberOrNull.profile.first_name}u(hn,"getLastTokenUserFirstName");function gn(w){return w.lastTokenMemberOrNull&&w.lastTokenMemberOrNull.profile&&w.lastTokenMemberOrNull.profile.last_name}u(gn,"getLastTokenUserLastName");function Cn(w){return w.lastTokenMemberName||w.lastTokenChannelName||null}u(Cn,"lastTokenName");function fn(w){return w?w.im&&w.lastReadImTs?w.lastReadImTs:w.remoteImMetadata&&w.lastReadRemoteImMetadataTs?(w.lastReadRemoteImMetadataTs/1e6).toString():null:null}u(fn,"lastReadFromLocalClientElseCachedRemote");function Oe(w){let{text:ve,query:Ne}=w;return ve===Ne}u(Oe,"isExactMatch");function ke(w){let{text:ve,query:Ne}=w;return!!(Ne&&ve&&(0,ne.A)(ve,Ne))}u(ke,"isPrefixMatch");function je(w){let{text:ve,normalizedQuery:Ne}=w;return(0,L.B)(ve).replace(/^[@#]/g,"")===Ne}u(je,"isNormalizedExactMatch");function Be(w){let{text:ve,normalizedQuery:Ne}=w;const dt=(0,L.B)(ve).replace(/^[@#]/g,"");return!!(dt&&Ne&&(0,ne.A)(dt,Ne))}u(Be,"isNormalizedPrefixMatch");function st(w){let{text:ve,query:Ne}=w;return(0,re.A)(ve).length+((0,_e.A)(ve," ")?1:0)===(0,re.A)(Ne).length}u(st,"stringSameNumberWordsValueFromSuggestion");function St(w){let{text:ve,query:Ne}=w;return Math.max(0,ve.length-Ne.length)}u(St,"excessStringLengthValueFromSuggestion");function Yt(w){let{text:ve,query:Ne}=w;return ve.length>0?Ne.length/ve.length:0}u(Yt,"queryRatioLengthValueFromSuggestion");function tn(w){let{text:ve,normalizedQuery:Ne}=w;return je({text:ve,normalizedQuery:Ne})&&Ne.length>1?2**-Ne.length:null}u(tn,"queryLengthDecayNormalMatch");function at(w){let{normalizedQuery:ve}=w;return ve.length}u(at,"queryLength");function Et(w){let{text:ve}=w;return ve.length}u(Et,"suggestionTextLength");function _t(w,ve,Ne){if(ve){var dt;return Math.min(1,Math.exp(Math.log(.5)/Ne*((dt=Bt(w,ve))!==null&&dt!==void 0?dt:0)))}return 0}u(_t,"expAgeDecay");function Bt(w,ve){return ve?Math.max(0,w-ve):null}u(Bt,"age");function Qt(w,ve,Ne){if(!ve)return!0;const dt=Bt(w,ve);return!dt||dt>Ne}u(Qt,"ageLatestOlderOrMissing");function Fe(w){return w>0?Math.log1p(w):0}u(Fe,"log1pSafe");function Xe(w){let{text:ve,normalizedQuery:Ne}=w;const dt=(0,L.B)(ve).replace(/^[@#]/g,"");return dt&&Ne&&dt.includes(Ne)}u(Xe,"stringContainsQueryNormalized");class Me{score(ve){let Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=0;const Mn=ve.featureList.length;for(let Tn=0;Tn<Mn;Tn++)dt+=this._weightForFeature(ve.featureList[Tn],Ne.source||null)*(ut(ve.featureList[Tn])||0);return dt}explain(ve){let Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const dt=Ne.source||null,Mn=ve.featureList.map(ln=>({id:ln.id,name:ln.name,value:ln.valueOrNull,weight:this._weightForFeature(ln,dt),globalWeight:this._globalWeightForFeature(ln),score:this._weightForFeature(ln,dt)*ut(ln)})),Tn=Mn.filter(ln=>ln.score).sort((ln,is)=>is.score-ln.score),mn=Mn.filter(ln=>ln.value&&!ln.score&&ln.name!=="ID");return{score:this.score(ve,Ne),features:[...Tn,...mn],remoteModel:this.isRemote}}_globalWeightForFeature(ve){return this.weights[ve.name]||0}_weightForFeature(ve){let Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,dt=0;ve.name==="USER_IS_EXTERNAL"&&(dt=-1);const Mn=this.weights[ve.name]||0,mn=Ne&&(Ne==="composer_page__destination"||Ne.startsWith("share"))?"WRITE":"READ",ln=this.weights[`${mn}_${ve.name}`]||0;return Mn+ln+dt}constructor(ve,Ne=!1){this.isRemote=Ne,this.weights=ve}}u(Me,"LinearModel");class U extends E.F{fetchData(){return(0,C.dispatchForTeamId)(this.teamId,(0,O.ej)({reason:"AutocompleteModelCache"})).catch(ve=>({model:null,omniswitcherModel:null,exception:ve})).then(ve=>{const Ne={model:null,omniswitcherModel:null};if(ve.model){const dt=(0,$.A)(Object.entries(ve.model).map(Mn=>{let[Tn,mn]=Mn;return[Tn.toUpperCase(),mn]}));Ne.model=new Me(dt,!0)}else return null;if(ve.omniswitcher_model){const dt=(0,$.A)(Object.entries(ve.omniswitcher_model).map(Mn=>{let[Tn,mn]=Mn;return[Tn.toUpperCase(),mn]}));Ne.omniswitcherModel=new Me(dt,!0)}else Ne.omniswitcherModel=Ne.model;return Ne})}constructor(ve){super(),this.teamId=ve}}u(U,"AutocompleteModelCache");let H=null;function te(w){return H||(H=new U(w)),H}u(te,"getAutocompleteModelCache");var de=e(1917953477),Re=e(220244708);const Ye=new Me({ACTIVE_TOKEN_FILTER_AFTER:-1.3342286966503,ACTIVE_TOKEN_FILTER_BEFORE:-1.5840743442206,ACTIVE_TOKEN_FILTER_DURING:-1.5067377681356,ACTIVE_TOKEN_FILTER_FROM:-.32097975590927,ACTIVE_TOKEN_FILTER_HAS:.12307720392367,ACTIVE_TOKEN_FILTER_IN:-.20437151727999,ACTIVE_TOKEN_FILTER_ON:-.2331890332635,ACTIVE_TOKEN_FILTER_TO:-.39179992363572,ACTIVE_TOKEN_FILTER_WITH:-2.6491467875516,ACTIVE_TOKEN_MEMBER:3.3152339724625,ACTIVE_TOKEN_PHRASE:1.6227243782418,ACTIVE_TOKEN_STRING:1.2377431959723,APP_NAME_PREFIX_MATCH:.41310546603391,CHANNEL_ACTION_TEAM_CTR:5.3683432201332,CHANNEL_ACTION_USER_CTR:-3.0316210543763,CHANNEL_IS_ARCHIVED:-.87858649301233,CHANNEL_IS_MEMBER:.77730174627333,CHANNEL_IS_OTHER_TEAM:-.61919041941926,CHANNEL_IS_STARRED:.42983549335324,CHANNEL_IS_UNREAD:.32493583671244,CHANNEL_READ_AGE_DECAY_7D:1.7862684517169,CURRENT_USER_TEXTY:-2.0962311707595,EMOJI_COMBO_BREAK_0:.034181103626295,EMOJI_COMBO_BREAK_1:-1.5404314842404,EMOJI_COMBO_BREAK_2:-2.2796470967609,EMOJI_EXACT_MATCH:.183283071987,EMOJI_QUERY_LENGTH_RATIO:1.0690358111219,EMOJI_USER_CTR_30DD:5.1931307714537,FILE_AGE_DECAY_7D:.094311459141267,FILE_AGE_DECAY_90D:-.068414601197763,FILE_FROM_CURRENT_USER:-.053638049001005,FILE_HAS_DMS_WITH_CREATOR:-.0061128361931085,FILE_IS_CANVAS:.3,FILE_LATEST_ACTION_AGE_DECAY_90D:.22470956185502,FILE_LATEST_VIEW_BY_USER_OLDER_90D:-1.5,FILE_LOG_ACTIONS:.31755825349717,FILE_LOG_PRIVATE_SHARES:.63647050316634,FILE_LOG_PUBLIC_SHARES:-.4105759438314,FILE_NAME_CONTAINS_QUERY_NORMALIZED:1,FILTER_USER_DM_READ_AGE_DECAY_2H:-.39943623618561,FILTER_USER_DM_READ_AGE_DECAY_7D:.8400841724556,FILTER_USER_IS_ACTIVE:.42798763518113,FILTER_USER_PRIORITY:.71416734958181,FRECENCY_BONUS:.0083562726103486,FRECENCY_LOG_HIT_COUNT_SCALED:1.0221320483578,FRECENCY_LOG_ITEM_COUNT_SCALED:.93494415431914,FRECENCY_WEIGHT_HIT_VISITS:.010783602348951,FRECENCY_WEIGHT_ITEM_VISITS:.019341183576389,FUZZY_SCORE_50:.95744512772969,FUZZY_SCORE_ALL:-2.1179514334905,GLOBAL_ACTION_USER_CTR:6.0311738732755,HERE_KEYWORD_EXACT_MATCH:2.8669041266612,HISTORY_AGE_DECAY_7D:.66414153833523,IS_BROADCAST_KEYWORD:3.4759283393419,MEMBER_OF_CURRENT_CHANNEL:3.3022467998568,MPIM_MATCHER_SCORE_0:-.02289922354073,MPIM_MATCHER_SCORE_1:-1.2162030026989,MPIM_MATCHER_SCORE_2:-2.3109629676003,MPIM_MATCHER_SCORE_3:-2.545746172366,MPIM_MEMBER_ALL_MATCHES:.040175375087294,MPIM_MEMBER_NAME_MATCHES:.071667207602181,MPIM_READ_AGE_DECAY_7D:2.0911081748312,MPIM_USER_CTR_30DD:10.134770283044,MPIM_WITH_DEACTIVATED_USER:-1.1657978882602,NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS:.49306597435127,NAV_NORMAL_MATCH_USER:.83230837935037,NAV_NORMAL_PREFIX_MATCH_NO_USER:.4852904832645,NAV_NORMAL_PREFIX_MATCH_USER:-.12081821144909,ONLY_MATCHES_PREVIOUS_NAME:-1.248003231081,OS_APP_ACTION:-1.381807580371,QUERY_FRECENCY_BONUS:.011725693517502,QUERY_FRECENCY_RAW:.0071433931825349,QUERY_FRECENCY_WEIGHT_HIT_VISITS:.0047962209104509,QUERY_TOKEN_NORMAL_PREFIX_MATCH:.38593901851901,SLASH_COMMAND_USER_CTR:3.2204170381454,STRING_EXACT_PREFIX_MATCH:-.53245135333594,STRING_NORMAL_PREFIX_MATCH:-.4692069451129,TYPE_APP:-2.0995766663586,TYPE_APP_ACTION:-.15299090921826,TYPE_CHANNEL_ACTION:-.97398280475431,TYPE_GLOBAL_ACTION:.24313716972704,TYPE_NAVIGATION_CHANNEL:-.99949500941624,TYPE_NAVIGATION_FILE:-.60870055140391,TYPE_NAVIGATION_MODAL:-1.2540608783032,TYPE_NAVIGATION_MPIM:-.13640397661212,TYPE_NAVIGATION_TEAM:-.74505579518249,TYPE_NAVIGATION_USER:.19845685040217,TYPE_NAVIGATION_VIEW:-.06828592658814,TYPE_QUERY:-.34666651828357,TYPE_QUERY_HISTORY:-.89886675989568,TYPE_SLASH_COMMAND:-.18074491193454,TYPE_USER_QUERY:1.2730815188112,TYPE_WORKFLOW_TRIGGER:-1.2028127578536,USER_DM_EMPTY_V2:1.4226370781581,USER_DM_LATEST_MSG_AGE_DECAY_7D_V2:.40074999941377,USER_DM_LATEST_OLDER_90D_V2:-1.2419114598606,USER_EMAIL_ONLY_MATCH:-1.2756812486684,USER_ENTITY_TYPE_CTR_30DD:3.7407446891213,USER_FIRST_NAME_NORMAL_MATCH:.36402719522123,USER_IS_ACTIVE:.58279556397075,USER_IS_BOT:-.76450720727465,USER_IS_EXTERNAL:.27225738168756,USER_LAST_NAME_NORMAL_MATCH:.19972040917946,USER_MPIM_READ_AGE_DECAY_7D:.56565249217787,USER_PRIORITY:.29699660378898,USER_SAME_TEAM:.17696933968657}),we=new Me({FRECENCY_LOG_ITEM_COUNT:1}),vt=new Me({FRECENCY:1}),ot=new Me({APP_NAME_PREFIX_MATCH:.3,TYPE_SLASH_COMMAND:-1.6,TYPE_GLOBAL_ACTION:1,TYPE_CHANNEL_ACTION:2,TYPE_WORKFLOW_TRIGGER:1,TYPE_APP_ACTION:0,TYPE_APP:-1,IS_INVITE_WORKSPACE:-2,BEST_NAME_MATCH_LOG_RESULTS:.3,FRECENCY_BONUS:.0045945271239138,FRECENCY_LOG_HIT_COUNT:.032078623014737,FRECENCY_LOG_HIT_COUNT_SCALED:.45581873094776,FRECENCY_LOG_ITEM_COUNT:.052896301981039,FRECENCY_LOG_ITEM_COUNT_SCALED:.49730870089138,FRECENCY_WEIGHT_HIT_VISITS:.0071810620916759,FRECENCY_WEIGHT_ITEM_VISITS:.011716715132603,FUZZY_SCORE_25:-.2832109013491,FUZZY_SCORE_50:.25841493146403,FUZZY_SCORE_ALL:-1.5527553376163,NAV_NORMAL_PREFIX_MATCH_NO_USER:.38239541164536,RAW_FRECENCY:-.0027578100310599,READ_FRECENCY_BONUS:.0040115607674155,READ_FRECENCY_LOG_HIT_COUNT:.038436899804508,READ_FRECENCY_LOG_HIT_COUNT_SCALED:.45560596775616,READ_FRECENCY_LOG_ITEM_COUNT:.05525020998482,READ_FRECENCY_LOG_ITEM_COUNT_SCALED:.50026628273703,READ_FRECENCY_WEIGHT_HIT_VISITS:.0073619177800187,READ_FRECENCY_WEIGHT_ITEM_VISITS:.012099980951325,READ_FUZZY_SCORE_25:-.2503777797125,READ_FUZZY_SCORE_50:.24335243348473,READ_FUZZY_SCORE_ALL:-1.5175861934325,READ_NAV_NORMAL_PREFIX_MATCH_NO_USER:.40022884927117,READ_RAW_FRECENCY:-.0031687787672375}),Mt=new Me({APP_NAME_PREFIX_MATCH:.3,TYPE_SLASH_COMMAND:-1.6,TYPE_GLOBAL_ACTION:1,TYPE_CHANNEL_ACTION:2,TYPE_APP_ACTION:0,TYPE_APP:-1,IS_INVITE_WORKSPACE:-2,BEST_NAME_MATCH_LOG_RESULTS:.3,FRECENCY_LOG_HIT_COUNT_SCALED:4,FRECENCY_BONUS:.0045945271239138,FRECENCY_LOG_HIT_COUNT:.032078623014737,FRECENCY_LOG_ITEM_COUNT:.052896301981039,FRECENCY_LOG_ITEM_COUNT_SCALED:.49730870089138,FRECENCY_WEIGHT_HIT_VISITS:.0071810620916759,FRECENCY_WEIGHT_ITEM_VISITS:.011716715132603,FUZZY_SCORE_25:-.2832109013491,FUZZY_SCORE_50:.25841493146403,FUZZY_SCORE_ALL:-1.5527553376163,NAV_NORMAL_PREFIX_MATCH_NO_USER:.38239541164536,RAW_FRECENCY:-.0027578100310599,READ_FRECENCY_BONUS:.0040115607674155,READ_FRECENCY_LOG_HIT_COUNT:.038436899804508,READ_FRECENCY_LOG_HIT_COUNT_SCALED:.45560596775616,READ_FRECENCY_LOG_ITEM_COUNT:.05525020998482,READ_FRECENCY_LOG_ITEM_COUNT_SCALED:.50026628273703,READ_FRECENCY_WEIGHT_HIT_VISITS:.0073619177800187,READ_FRECENCY_WEIGHT_ITEM_VISITS:.012099980951325,READ_FUZZY_SCORE_25:-.2503777797125,READ_FUZZY_SCORE_50:.24335243348473,READ_FUZZY_SCORE_ALL:-1.5175861934325,READ_NAV_NORMAL_PREFIX_MATCH_NO_USER:.40022884927117,READ_RAW_FRECENCY:-.0031687787672375}),jt=new Me({ACTIVE_TOKEN_QUERY_SUGGESTION:1,BM25_SCORE:1,CHANNEL_IS_MEMBER:0,EXCESS_STRING_LENGTH:1,FRECENCY:.01,MPIM_IS_STARRED:0,NAV_EXACT_MATCH:0,NAV_EXACT_PREFIX_MATCH:0,NAV_EXCESS_STRING_LENGTH:2.5,NAV_NORMAL_MATCH:0,QUERY_SUGGESTION_SCORE_V2:3,STRING_EXACT_PREFIX_MATCH:1,STRING_NORMAL_PREFIX_MATCH:1,TYPE_NAVIGATION_CHANNEL:4,TYPE_NAVIGATION_EXPERT_CHANNEL:2,TYPE_NAVIGATION_MPIM:7,TYPE_NAVIGATION_USER:4,TYPE_QUERY:1,HERE_KEYWORD_EXACT_MATCH:5}),Ln=new Me({FRECENCY:.01,TYPE_NAVIGATION_USER:4,TYPE_NAVIGATION_CHANNEL:4,QUERY_SUGGESTION_SCORE_V2:3,TYPE_NAVIGATION_EXPERT_CHANNEL:2,TYPE_NAVIGATION_MPIM:7}),bn={testing:jt,testing_2:Ln,frecency:vt,autocompleteFallback:Ye,shortcuts1:ot,shortcuts3:Mt,emojiFrequentlyUsed:we};var On=e(5795074931),Un=e(5267557974),Dn=e(9101533895),zn=e(4761125736),es=e(8719147933),Es=e(8276911661),bs=e(6562711329);const Rs=new T.Ay("search"),vs="autocompleteFallback";let us=u(class{sort(ve,Ne){var dt;const Mn=(0,y.Cy)({state:ve});Mn.mark("sorter-sort-mark");const Tn=this.prepSuggestions(ve,Ne);this.extractFeatures(ve,Tn);const mn=this.scoreItems(ve,Tn),ln=((dt=this.options)===null||dt===void 0?void 0:dt.dryRun)===!0?mn:this.sortByScore(mn);Mn.measureAndClear("sorter-sort-mark","sorter-sort");const is=2,ms=this.boostExactMatches(ln,is);return this.forceMatches(ms)}boostExactMatches(ve,Ne){const dt=ve.slice(0,Ne),Mn=[],Tn=[];for(let mn=Ne;mn<ve.length;mn++){const ln=ve[mn];ln.isExactMatch||ln.bestNameIsExactMatch?Mn.push(ln):Tn.push(ln)}return[...dt,...Mn,...Tn]}forceMatches(ve){var Ne,dt;return!((Ne=this.options)===null||Ne===void 0)&&Ne.selfFirst&&!(!((dt=ve[0])===null||dt===void 0)&&dt.isSelf)?[...(0,t.A)(ve,Tn=>Tn.isSelf),...ve]:ve}getModels(ve,Ne){let dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const Mn={model:bn[ve],omniswitcherModel:bn[ve]};if(!dt&&Ne){const mn=te(Ne).getStaleWhileRevalidate(Mn);return mn===null||mn.model===null||mn.model===void 0?Mn:mn}return Mn}getHistoryChannels(ve){if((0,zn._Z)(ve,"sq_sorter_history")!=="treatment")return{};if(!(0,f.A)())return{};var Ne;const dt=[...(Ne=(0,es.t)((0,C.getStateForClientStore)()))!==null&&Ne!==void 0?Ne:[]];if(!dt)return{};for(let Tn=0;Tn<dt.length;Tn++)dt[Tn].position=Tn+1;const Mn={};return dt.filter(Tn=>!(0,M.VA)()&&Tn.teamId!==this.teamId||!Tn.primaryView?!1:(0,g.A)(Tn.primaryView)).forEach(Tn=>{if(Tn.primaryView&&!(Tn.primaryView in Mn)){var mn;Mn[Tn.primaryView]={ts:Tn.ts/1e3,position:(mn=Tn==null?void 0:Tn.position)!==null&&mn!==void 0?mn:-1}}}),Mn}prepSuggestions(ve,Ne){var dt,Mn,Tn;const mn=(0,L.B)((0,de.O)(this.query));if(!((dt=this.options)===null||dt===void 0)&&dt.currentChannel&&mn.length<=1&&!(0,i.yz)((Mn=this.options)===null||Mn===void 0?void 0:Mn.currentChannel)&&!(0,i.LI)((Tn=this.options)===null||Tn===void 0?void 0:Tn.currentChannel)){const Ve=Ne.filter(Ct=>Ct.type==="member"||(0,r.NB)(Ct.item)).map(Ct=>(Ct.item||Ct).id);(0,C.dispatchForTeamId)(this.teamId,(0,bs.z)({channelId:this.options.currentChannel.id,userIds:Ve}))}let ln=null;if((0,zn._Z)(ve,"snd_autocomplete_features_cache")==="treatment"&&this.teamId){var is;ln=z({teamId:this.teamId,enterpriseId:(is=this.enterpriseId)!==null&&is!==void 0?is:void 0}).getStaleWhileRevalidate()}const ms=Ne.length,Ts=(0,On.WR)(ve),Ps=(0,Es.cA)(ve),ps=(0,v.dQ)(Ps),ls=this.getHistoryChannels(ve),ys={};return Ne.forEach(Ve=>{const Ct=Ve.item;(Ve.type==="mpim"||(0,i.yz)(Ve.item))&&((0,o.Ug)(Ct)||[]).forEach(nt=>{if(nt!==Ts){const Tt=ys[nt]||{itemCount:0,hitCount:0},Lt=(0,o._V)(ve,Ct),Pt=Lt?parseFloat(Lt):void 0,Ht=(0,Un.b)(ve,Ct.id),nn=Ht?parseFloat(Ht):void 0;Pt&&(Tt.lastReadTs?Tt.lastReadTs=Math.max(Tt.lastReadTs,Pt):Tt.lastReadTs=Pt),nn&&(Tt.latestMsgTs?Tt.latestMsgTs=Math.max(Tt.latestMsgTs,nn):Tt.latestMsgTs=nn),Tt.hitCount+=(Ve==null?void 0:Ve.hitCount)||0,Tt.itemCount+=(Ve==null?void 0:Ve.itemCount)||0,ys[nt]=Tt}})}),Ne.map(Ve=>{const Ct=Ve.item||Ve,Ke={...Ve,query:this.query,normalizedQuery:mn,id:Ct.id,suggestionType:X.fd.UNKNOWN,numResults:ms};if(Ve.type==="member"||(0,r.NB)(Ve.item)){var nt,Tt,Lt;const Wt=Ct.id&&(0,Dn.Pu)(ve,Ct.id),Xn=Ct.id&&ln&&ln.getUserDmChannelMetadata(Ct.id);Ke.remoteImMetadata=Xn,Ke.im=Wt,Ke.latestImTs=Wt&&(0,Un.b)(ve,Wt.id),Ke.imHasDraft=Wt&&(0,o.yc)(ve,Wt.id),Ke.imIsStarred=Wt&&(0,o.m2)(ve,Wt),Ke.name=(0,m.Gt)(Ve.item),Ke.lastReadImTs=(0,o._V)(ve,Wt),Ke.lastReadRemoteImMetadataTs=Xn==null?void 0:Xn.last_read_abs,(0,v.dQ)(Ve.item)===ps&&(Ke.sameTeam=!0);let Hn;if(!((nt=this.options)===null||nt===void 0)&&nt.currentChannel&&(Hn=this.options.currentChannel),Hn)if((0,i.yz)(Hn)){var Pt,Ht;Ke.isMemberOfCurrentChannel=(Ht=Hn==null||(Pt=Hn.members)===null||Pt===void 0?void 0:Pt.includes(Ve.item.id))!==null&&Ht!==void 0?Ht:!1}else(0,i.LI)(Hn)||(Ke.isMemberOfCurrentChannel=(0,Re.B)(ve,Ct,Hn));Ke.priority=(0,o.dh)(ve,Wt),Ke.suggestionType=X.fd.USER_NAVIGATION,Ke.isNavigational=!0,Ke.historyTs=Wt&&((Tt=ls[Wt.id])===null||Tt===void 0?void 0:Tt.ts),Ke.historyPosition=Wt&&((Lt=ls[Wt.id])===null||Lt===void 0?void 0:Lt.position);const ts=ys[Ct.id];ts&&(Ke.mpimFeatures=ts)}else Ke.name=Ct.name||Ct.string;if(Ve.type==="channel"||(0,i.jq)(Ve.item)){var nn,An;Ke.suggestionType=X.fd.CHANNEL_NAVIGATION,Ke.isNavigational=!0,Ke.isChannelMember=(0,i.rW)(Ct)&&!(0,l.F)(Ct)&&(0,_.b)(Ct),Ke.hasDraft=(0,o.yc)(ve,Ct.id),Ke.offlineFeatures=ln&&ln.getFeatures(Ve.item.id,"channel"),Ke.historyTs=(nn=ls[Ct.id])===null||nn===void 0?void 0:nn.ts,Ke.historyPosition=(An=ls[Ct.id])===null||An===void 0?void 0:An.position,Ke.latestTs=(0,Un.b)(ve,Ct.id),Ke.lastReadTs=(0,o._V)(ve,Ct),Ke.priority=(0,o.dh)(ve,Ct),Ke.isStarred=(0,o.m2)(ve,Ct)}if(Ve.type==="mpim"||(0,i.yz)(Ve.item)){var _n,Gt;Ke.suggestionType=X.fd.MPIM_NAVIGATION,Ke.isNavigational=!0;const Xn=((0,o.Ug)(Ct)||[]).map(qn=>(0,Es.nv)(ve,qn));Ke.isMpimWithDeactivatedMember=(0,n.A)(Xn,qn=>(0,r.oy)(qn)||(0,r.eJ)(qn)),Ke.isMpimWithOnlyInternalMembers=(0,s.A)(Xn,qn=>!(0,h.g)(qn)),Ke.hasDraft=(0,o.yc)(ve,Ct.id),Ke.name=(0,o.Oi)(ve,Ve.item),Ke.offlineFeatures=ln&&ln.getFeatures(Ve.item.id,"mpim"),Ke.historyTs=(_n=ls[Ct.id])===null||_n===void 0?void 0:_n.ts,Ke.historyPosition=(Gt=ls[Ct.id])===null||Gt===void 0?void 0:Gt.position,Ke.priority=(0,o.dh)(ve,Ct),Ke.maxLastReadTsOfAllMembers=null,Ke.maxLatestMsgTsOfAllMembers=null;let Hn=0,ts=0,Jn=0,Yn=0,Vn=0;Xn.forEach(qn=>{if(qn.id!==Ts){const ns=qn.id?(0,Dn.Pu)(ve,qn.id):void 0,Ss=ns&&(0,o._V)(ve,ns),Ls=qn.id&&ln&&ln.getUserDmChannelMetadata(qn.id),As=Ls&&Ls.last_read_abs/1e6,Us=ns||Ls,Is=Ss?parseFloat(Ss):As;if(Us){if(Vn+=1,Is){Jn+=1;var gs;Ke.maxLastReadTsOfAllMembers=Math.max((gs=Ke.maxLastReadTsOfAllMembers)!==null&&gs!==void 0?gs:-1/0,Is),Hn+=Is}const xs=(0,Un.b)(ve,ns==null?void 0:ns.id),rt=ns&&xs?parseFloat(xs):void 0;if(rt){Yn+=1;var ss;Ke.maxLatestMsgTsOfAllMembers=Math.max((ss=Ke.maxLatestMsgTsOfAllMembers)!==null&&ss!==void 0?ss:-1/0,rt),ts+=rt}}}}),Ke.avgLastReadTsOfAllMembers=Hn===0?null:Hn/Jn,Ke.avgLatestMsgTsOfAllMembers=ts===0?null:ts/Yn,Ke.pctNonEmptyDmsForAllMembers=Jn/(Xn.length-1)*100,Ke.pctNonNullDmsForAllMembers=Vn/(Xn.length-1)*100}if(Ve.type==="team"&&(Ke.suggestionType=X.fd.TEAM_NAVIGATION,Ke.isNavigational=!0),Ve.type==="view"&&(Ke.suggestionType=X.fd.VIEW_NAVIGATION,Ke.isNavigational=!0),Ve.type==="appAction"&&(Ke.suggestionType=X.fd.APP_ACTION,Ke.isAction=!0,Ke.offlineFeatures=ln&&ln.getFeatures(Ve.item.id,"appAction")),Ve.type==="app"&&(Ke.suggestionType=X.fd.APP,Ke.isApp=!0),Ve.type==="emoji"&&(Ke.name=Ke.emojiBestNameMatch,Ke.suggestionType=X.fd.EMOJI,Ke.isNavigational=!0,Ke.offlineFeatures=ln&&ln.getFeatures(Ve.item.id,"emoji")),Ve.type==="slashCommand"){var En;Ke.suggestionType=X.fd.SLASH_COMMAND,Ke.isApp=!0,Ke.name=(En=Ke.name)===null||En===void 0?void 0:En.substring(1),Ke.firstWordOfRawQuery&&(Ke.query=Ke.firstWordOfRawQuery,Ke.normalizedQuery=Ke.firstWordOfRawQuery),Ke.offlineFeatures=ln&&ln.getFeatures(Ve.item.id,"slashCommand")}if(Ve.type==="globalAction"&&(Ke.suggestionType=X.fd.GLOBAL_ACTION,Ke.isApp=!0,Ke.offlineFeatures=ln&&ln.getFeatures(Ve.item.id,"globalAction")),Ve.type==="quipShortcutCommand"&&(Ke.suggestionType=X.fd.QUIP_SHORTCUT),Ve.type==="channelAction"&&(Ke.suggestionType=X.fd.CHANNEL_ACTION,Ke.isApp=!0,Ke.offlineFeatures=ln&&ln.getFeatures(Ve.item.id,"channelAction")),Ve.type==="workflowTrigger"&&(Ke.suggestionType=X.fd.WORKFLOW_TRIGGER,Ke.isApp=!0,Ke.offlineFeatures=ln&&ln.getFeatures(Ve.item.id,"workflowTrigger")),Ve.type==="file"){Ke.suggestionType=X.fd.FILE_NAVIGATION,Ke.isNavigational=!0,Ke.fileSuggestionsFromSearcher=!0;const Wt=Ke.item;Ke.id=Wt.id,Ke.fileId=Wt.id,Ke.logId=Wt.id,Ke.fileType=Wt.highlight_type||Wt.filetype,Ke.name=Wt.title,Ke.fileTypeDescription=Wt.is_external?(0,a.A)(Wt,ve):Wt.pretty_type,Ke.fileTypeDescription==="Arugula"&&(Ke.fileTypeDescription=Rs.t("Post")),Ke.fromCurrentUser=Wt.user===Ts;const Xn=Wt.user&&(0,Dn.Pu)(ve,Wt.user),Hn=Wt.user&&ln&&ln.getUserDmChannelMetadata(Wt.user);if(Ke.hasNonNullDmsWithCreator=Xn!==null,Ke.hasNonNullLocalOrRemoteDmsWithCreator=Xn!==null||Hn!==null,Ke.lastReadTs=Wt.last_read,Wt.shares){const Jn=Wt.shares.public&&Math.max(...Object.values(Wt.shares.public).flatMap(Vn=>Vn.map(qn=>qn.ts?parseFloat(qn.ts):-1/0))),Yn=Wt.shares.private&&Math.max(...Object.values(Wt.shares.private).flatMap(Vn=>Vn.map(qn=>qn.ts?parseFloat(qn.ts):-1/0)));Jn&&Yn?Ke.latestShareTs=Jn>Yn?Jn:Yn:Ke.latestShareTs=Jn||Yn}const ts=d(Wt);if(ts&&(Ke.latestActionTs=ts),ln){const Jn=Wt.channels&&Array.isArray(Wt.channels)&&Wt.channels.length&&Math.max(...Wt.channels.map(Vn=>ln.getFeatures(Vn,"channel").user_ctr_30dd)),Yn=Wt.groups&&Array.isArray(Wt.groups)&&Wt.groups.length&&Math.max(...Wt.groups.map(Vn=>ln.getFeatures(Vn,"mpim").user_ctr_30dd));Jn>0&&Yn>0?Ke.fileChannelCtr=Math.max(Jn,Yn):Jn>0?Ke.fileChannelCtr=Jn:Yn>0&&(Ke.fileChannelCtr=Yn),Wt.user?Ke.fileUserCtr=ln.getFeatures(Wt.user,"member").user_ctr_30dd:Ke.fileUserCtr=ln.getEntityCtr("member")}}if(Ve.type==="link"&&(Ke.suggestionType=X.fd.LINK_NAVIGATION,Ke.isNavigational=!0,Ke.name=Ve.item.title||Ve.item.url),Ve.type==="modal"&&(Ke.suggestionType=X.fd.MODAL_NAVIGATION,Ke.name=Ve.item.name),Ve.type==="queryHistory"&&(Ke.suggestionType=X.fd.QUERY_HISTORY,Ke.is_type_query_history=!0,Ke.id=(0,I.B)(Ve.id||Ve.name||Ve.string),Ke.logId=Ke.id,Ke.exact_string=Ve.string),Ve.type==="query"||Ve.type==="queryUser"||Ve.type==="queryHistory"){var Wn,Sn,wn;Ke.is_type_query_completion=!0,Ke.lastSuggestionToken=!Ke.suggestionTokenList||Ke.suggestionTokenList.length<1?null:Ke.suggestionTokenList[Ke.suggestionTokenList.length-1],Ke.frecencyScore=Ke.lastSuggestionToken&&Ke.lastSuggestionToken._frecencyScore,Ke.scoringContext=((Wn=Ke.lastSuggestionToken)===null||Wn===void 0?void 0:Wn._scoringContext)||{},Ke.lastTokenMemberOrNull=null,Ke.lastTokenChannelOrNull=null;const Wt=Ke.lastSuggestionToken&&(Ke.lastSuggestionToken.type===X.S6.FILTER_FROM||Ke.lastSuggestionToken.type===X.S6.FILTER_TO||Ke.lastSuggestionToken.type===X.S6.FILTER_WITH),Xn=Ke.lastSuggestionToken&&Ke.lastSuggestionToken.type===X.S6.FILTER_IN;if(!((Sn=Ke.lastSuggestionToken)===null||Sn===void 0)&&Sn._id&&(Ke.lastTokenMemberOrNull=Wt&&(0,Es.nv)(ve,Ke.lastSuggestionToken._id),Ke.lastTokenChannelOrNull=Xn&&((0,Dn.OL)(ve,Ke.lastSuggestionToken._id)||(0,Dn.Pu)(ve,Ke.lastSuggestionToken._id)),Ke.priority=Ke.lastTokenChannelOrNull?(0,o.dh)(ve,Ke.lastTokenChannelOrNull):void 0),Ke.lastSuggestionToken&&Ke.lastSuggestionToken._name&&(Ke.lastTokenMemberOrNull||(Ke.lastTokenMemberOrNull=Wt&&(0,Es.H6)(ve,Ke.lastSuggestionToken._name)),Ke.lastTokenChannelOrNull||(Ke.lastTokenChannelOrNull=Xn&&(0,Dn.Os)(ve,Ke.lastSuggestionToken._name))),(0,c.GU)(Ke.lastTokenMemberOrNull)&&(Ke.lastTokenMemberOrNull=null),Ke.lastTokenMemberName=(0,m.Gt)(Ke.lastTokenMemberOrNull)||void 0,(0,c.GU)(Ke.lastTokenChannelOrNull))Ke.lastTokenChannelOrNull=null;else{const ts=(0,o._V)(ve,Ke.lastTokenChannelOrNull);Ke.lastTokenChannelLastRead=ts?parseFloat(ts):void 0,Ke.lastTokenChannelIsStarred=(0,o.m2)(ve,Ke.lastTokenChannelOrNull)}Ke.lastTokenChannelName=(0,o.SB)(ve,Ke.lastTokenChannelOrNull)||null,Ke.lastTokenIm=Ke.lastTokenMemberOrNull&&Ke.lastTokenMemberOrNull.id?(0,Dn.Pu)(ve,Ke.lastTokenMemberOrNull.id):void 0,Ke.lastTokenImLatest=(0,Un.b)(ve,(wn=Ke.lastTokenIm)===null||wn===void 0?void 0:wn.id);const Hn=(0,o._V)(ve,Ke.lastTokenIm);Hn&&(Ke.lastTokenImLastRead=Hn?parseFloat(Hn):void 0),Ke.lastTokenIm&&(Ke.priority=(0,o.dh)(ve,Ke.lastTokenIm)),Ke.lastTokenImIsStarred=(0,o.m2)(ve,Ke.lastTokenIm)}if(Ve.type==="query"&&(Ke.suggestionType=X.fd.QUERY),Ve.type==="queryUser"&&(Ke.suggestionType=X.fd.QUERY_USER),Ve.type==="queryHistory"&&(Ke.suggestionType=X.fd.QUERY_HISTORY),Ve.type==="query"||Ve.type==="queryUser"||Ve.type==="queryHistory"){var Kn;Ke.normalizedQuery=(0,L.B)((0,de.O)(Ke.query)),Ke.logId=((Kn=Ke.lastSuggestionToken)===null||Kn===void 0?void 0:Kn.logId)||"";var _s;Ke.name=((_s=Ke.suggestionTokenList)!==null&&_s!==void 0?_s:[]).map(Wt=>Wt.toString()).join(" ")}return Ve.type==="quickMessage"&&(Ke.isNavigational=!0,Ke.suggestionType=X.fd.MESSAGE_NAVIGATION),Ve.type==="salesforceRecord"&&(Ke.suggestionType=X.fd.SALESFORCE_RECORD),Ke.entityTypeCtr=ln?ln.getEntityCtr(Ve.type):void 0,Ke})}extractFeatures(ve,Ne){Ne.forEach(dt=>{var Mn;const Tn=K(dt,(Mn=this.options)===null||Mn===void 0?void 0:Mn.source);this.featureVectors[dt.id]=Tn})}selectModelForScoring(){return this.model}scoreItems(ve,Ne){var dt;const Mn={source:(dt=this.options)===null||dt===void 0?void 0:dt.source},Tn=this.selectModelForScoring();return Ne.map(mn=>{var ln;const is=this.featureVectors[mn.id],ms=Tn.score(is,Mn);let Ts;return!((ln=this.options)===null||ln===void 0)&&ln.explain&&(Ts=Tn.explain(is,Mn)),{...mn,modelScore:ms,featureVectorRaw:is,explain:Ts}})}sortByScore(ve){var Ne,dt;return ve.sort((Mn,Tn)=>((Ne=Tn==null?void 0:Tn.modelScore)!==null&&Ne!==void 0?Ne:0)-((dt=Mn==null?void 0:Mn.modelScore)!==null&&dt!==void 0?dt:0))}constructor({query:ve,options:Ne={},teamId:dt=null,enterpriseId:Mn=null}){this.query=ve,this.options=Ne;let Tn=Ne.model;Tn===void 0&&(Tn=vs);var mn;const ln=this.getModels(Tn,dt||Mn,(mn=this.options.modelLocal)!==null&&mn!==void 0?mn:!1);this.model=ln.model,this.omniswitcherModel=ln.omniswitcherModel,this.teamId=dt,this.enterpriseId=Mn,this.featureVectors={}}},"Sorter")},1763226059:(j,p,e)=>{"use strict";e.d(p,{M:()=>c,W:()=>a});var t=e(2371143272),n=e(7002741921),s=e(4724591729);function a(o,i){const l={resources:[],frames:[],stacks:[],samples:[]},_=new Map,d=new Map,r=new Map;function m(T){if(r.has(T))return r.get(T);const f=l.resources.length;return l.resources.push(o.resources[T]),r.set(T,f),f}u(m,"mapResource");function h(T){if(d.has(T))return d.get(T);const f=o.frames[T],g=l.frames.length;return f.resourceId!=null?l.frames.push({...f,resourceId:m(f.resourceId)}):l.frames.push(f),d.set(T,g),g}u(h,"mapFrame");function v(T){if(_.has(T))return _.get(T);const f=o.stacks[T],g=f.parentId?v(f.parentId):void 0,M=h(f.frameId),A=l.stacks.length;return l.stacks.push(g!=null?{parentId:g,frameId:M}:{frameId:M}),_.set(T,A),A}u(v,"mapStack");function y(T){T.stackId==null?l.samples.push(T):l.samples.push({timestamp:T.timestamp,stackId:v(T.stackId)})}u(y,"addSample");let I=0;for(const{start:T,end:f}of i){for(;I<o.samples.length&&o.samples[I].timestamp<T;)I+=1;for(;I<o.samples.length&&o.samples[I].timestamp<=f;)y(o.samples[I]),I+=1}return l}u(a,"filterTrace");function c(){return!(0,s.b3)()&&(0,n.A)("self_profiling","enabled")&&!(0,t.b)()}u(c,"isProfilingEnabled")},2332798892:(j,p,e)=>{"use strict";e.d(p,{A:()=>_});var t=e(1703559452),n=e(7174777686),s=e(735940183);const a=["`","\xB4","\u02C6","\xA8","\u02DC"],c=new RegExp(`[${a.join("")}]$`);function o(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").replace(c,"")}u(o,"trim_trailing_composition_char");const i={COMPOSITION_CHARS:a};var l=e(3212336858);function _(d,r){let{allowPartialMatches:m=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!r||!d)return!1;let h=r.toLowerCase().replace(/^\uFF0F/,"/");h=(0,s.dV)(h),h=o(h);const v=[(0,l.fK)(d),(0,l.Bs)(d),...(0,l.qc)(d)||[]];return(0,t.A)(v,y=>{const I=(0,s.dV)(y);return m?(0,n.A)(I,h):I===h})}u(_,"is_match_for_command")},8664881451:(j,p,e)=>{"use strict";e.d(p,{Dd:()=>I,Rj:()=>f,TQ:()=>T,ZH:()=>h,ds:()=>y,qG:()=>r});var t=e(9706240641),n=e.n(t),s=e(796111729),a=e(2001112473),c=e(571104883);const o={},i={},l={},_=(0,s.Wo)({label:"SOUND-PLAYBACK"});function d(g){return`${g}-repeat`}u(d,"createRepeatKey");const r=u(g=>{g&&T(g)},"addSoundToInMemoryCache"),m=function(){var g=(0,t.coroutine)(function*(M){try{if(!M||!("setSinkId"in M)||(0,c.gm)())return;const A=(0,a._o)();yield M.setSinkId(A)}catch(A){_.warn(`Failed to set sink id with reason: ${A}`)}});return u(function(A){return g.apply(this,arguments)},"maybeSetAudioSinkId")}(),h=function(){var g=(0,t.coroutine)(function*(M){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!M)return null;const O=I(M)||T(M);O.loop=!!A.loop,O.currentTime=0;var D;O.volume=(D=A.volume)!==null&&D!==void 0?D:1,yield m(O);try{yield O.play()}catch(E){_.warn(`Failed to play sound: ${M} with reason: ${E}`)}});return u(function(A){return g.apply(this,arguments)},"play")}(),v=function(){var g=(0,t.coroutine)(function*(M){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!M)return null;const O=d(M),D=u(()=>{i[O]-=1,i[O]>0&&(_.info(`lounge music looping: ${M}`),A.pause?l[O]=setTimeout(()=>{h(O)},A.pause):h(O))},"ended");A.repeat&&(i[O]=A.repeat);const E=I(O)||T(M,{ended:D,customCacheKey:O});E.currentTime=0,yield m(E);try{yield E.play()}catch(C){_.warn(`Failed to play repeated sound: ${M} with reason: ${C}`)}});return u(function(A){return g.apply(this,arguments)},"playRepeat")}();function y(g){let{logFailure:M}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{logFailure:!0};const A=I(g),O=d(g),D=I(O);if(!A&&!D){M&&_.warn(`Tried to stop sound, but no sound was playing matching url: ${g}. Available cached element urls are ${Object.keys(o).join(", ")}`);return}if(D){D.pause(),clearTimeout(l[O]),i[O]=0;const E=D.src;D.src="",D.src=E}if(A){A.pause();const E=A.src;A.src="",A.src=E}}u(y,"stop");function I(g){return o[g]}u(I,"getAudioElement");function T(g){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const A=new Audio(g);M.ended&&A.addEventListener("ended",M.ended);const O=M.customCacheKey||g;return o[O]=A,A}u(T,"createAudioElement");function f(g,M,A){if(!g||!M||!A)return;const O=I(g);O&&O.removeEventListener(M,A)}u(f,"removeAudioElementListener")},6106767915:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(2414816894);function n(s){return(0,t.A)(s)?s.replace(/^BK/,""):""}u(n,"getBroadcastKeyword")},2414816894:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(4897863105);function n(s){return(0,t.c)().indexOf(s)!==-1}u(n,"mentionIdIsKeyword")},1707481146:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});function t(n){return n==="UNVERIFIED"}u(t,"mentionIdIsUnverified")},6764196364:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(6968387112);function n(){return`https://${(0,t.Xk)()}`}u(n,"getSlackRootUrl")},4204210053:(j,p,e)=>{"use strict";e.d(p,{A:()=>s});var t=e(6968387112);const n=/^[^.]*\.?(((enterprise\.)?(staging|staging-master|staging-sandbox|dev\d*|qa\d*)|enterprise)\.)?[^.]+\.[^.]+$/;function s(a){return a?(0,t.Ed)(a)&&!!a.match(n):!1}u(s,"isValidSlackPermalinkHostName")},1881693845:(j,p,e)=>{"use strict";e.d(p,{A:()=>t});function t(){return!0}u(t,"isIaLayoutEnabled")},965001959:(j,p,e)=>{"use strict";e.d(p,{Lb:()=>P,Pc:()=>O,Xg:()=>R,YZ:()=>d,_e:()=>z,hh:()=>t,iR:()=>m,j0:()=>W,jG:()=>V,ke:()=>b,mi:()=>f,mu:()=>N,tR:()=>r,ts:()=>k,vd:()=>n,x:()=>D});const t=180,n=600,s=260,a=310,c=1e3,o=24,i=289,l=321,_=385,d=15;var r;(function(x){x.MANUAL="manual",x.AUTO="auto"})(r||(r={}));const m=500,h=140,v=[{minWidth:1420,sidebar:260,inspector:400},{minWidth:1200,sidebar:260,inspector:380},{minWidth:1080,sidebar:260,inspector:340},{minWidth:960,sidebar:220,inspector:320},{minWidth:860,sidebar:220,inspector:310},{minWidth:0,sidebar:200,inspector:310}],y=[{min:t,max:220,className:"p-workspace__sidebar--tiny"},{min:n-50,max:n,className:"p-workspace__sidebar--large"}],I=[{min:s,max:300,className:"p-workspace__secondary_view--tiny"},{min:301,max:399,className:"p-workspace__secondary_view--medium"},{min:400,max:c,className:"p-workspace__secondary_view--large"}],T=[{min:s,max:300,className:"p-workspace__tiles--tiny"},{min:301,max:499,className:"p-workspace__tiles--medium"},{min:500,max:c,className:"p-workspace__tiles--large"}],f=[{min:1,max:400,className:"p-workspace__primary_view--tiny"},{min:401,max:600,className:"p-workspace__primary_view--small"}],g=260,M=400,A=400,O=8,D=16,E=60,C=44,S=40,b="sidebarWidthIntent",k="sidebarWidthMode",W="inspectorWidthIntent",N="inspectorWidthMode",V="isSidebarVisible",R="isTeamSidebarVisible",P="userPrefersResponsiveSidebar",z="calculatedSidebarWidth",$="LAYOUT"},7216810781:(j,p,e)=>{"use strict";e.d(p,{z:()=>r});var t=e(3134334389),n=e(5255740490),s=e(4173072539),a=e(3694049677),c=e(2408732225),o=e(9874616273),i=e(9892470785),l=e(735940183),_=e(2786906754);const d=new l.Ay("shared_channel_invites"),r=u(m=>{let{invite:h,bottomMargin:v}=m;if(!h)return null;const{inviting_team:y,inviting_user:I,shared_workspace:T}=h,f=!!(0,_.qN)(window.location.search).is_link,g=t.createElement(c.n,{team:y,user:I,size:40,shouldRenderTeamBadge:!0,allowDefaultProfileImage:!0,allowTeamInitials:!0,isInteractive:!1,className:"margin_right_75",hideUserIcon:f}),M=t.createElement(a.A,{invitingUser:I}),A=t.createElement(s.A,{invitingTeam:y}),O=t.createElement(i.A,{id:T.id,team:T,bold:!0});return t.createElement("div",{className:(0,n.A)("p-accept_slack_connect_workspace_invite_header__header_container",{margin_bottom_200:v})},t.createElement("div",{className:"p-accept_slack_connect_workspace_invite_header__header_subcontainer"},t.createElement(o.A,{width:160,height:40,className:"margin_bottom_125"}),t.createElement("div",{className:"p-accept_slack_connect_workspace_invite_header padding_0"},g,t.createElement("span",null,f?d.rt("You were invited by {invitingTeamNameStyled} to join {sharedWorkspaceName}.",{invitingTeamNameStyled:A,sharedWorkspaceName:O}):d.rt("You were invited by <strong>{invitingUserName}</strong> from {invitingTeamNameStyled} to join {sharedWorkspaceName}.",{invitingTeamNameStyled:A,invitingUserName:M,sharedWorkspaceName:O})))))},"AcceptSlackConnectWorkspaceHeader");r.displayName="AcceptSlackConnectWorkspaceHeader"},1073393277:(j,p,e)=>{"use strict";e.d(p,{Sp:()=>T,a5:()=>f});var t=e(1729646737),n=e(4509434386),s=e(9733150292),a=e(3245843483),c=e(4923013394),o=e(252204565),i=e(4496040127),l=e(5829624088),_=e(965001959);const d=".p-client_container_placeholder",r=".p-client_container_placeholder__nav",m=260,h=64,v=76;function y(M){let{name:A,hex:O,iaTheming:D,customTheme:E}=M;const C=(0,t.zK)({hex:O,name:A}),S=(D==null?void 0:D.mode)||"light",b=(D==null?void 0:D.brightness)||n.GK,k=(0,n.XW)({mode:(0,l.Gk)(D,D==null?void 0:D.mode),primary:D==null?void 0:D.primary,highlight1:D==null?void 0:D.highlight1,brightness:b,useCustomHex:E&&(D==null?void 0:D.useCustomHex)});let W;A.includes("Primary")?W=k.primary.shade:W=k.highlight1.shade;const N=n.sC.indexOf(W);return{shade:W,value:S==="light"?C.light[N].value:C.dark[N].value}}u(y,"generateCustomHEXChromeColors");function I(M){let{iaTheming:A,customTheme:O}=M;return!A.primary.custom||!t.$V.test(A.primary.custom)?null:y({name:"bootPrimary",hex:A.primary.custom.startsWith("#")?A.primary.custom:`#${A.primary.custom}`,iaTheming:A,customTheme:O})}u(I,"getBootPrimary");function T(M){let{teamId:A,showTeamSwitcher:O=!1}=M;const D=(0,s._z)(A,"is_unified_user_client_enabled"),E=(0,s._z)(A,"channelSidebarBackground"),C=parseInt((0,s.W6)("viewLayoutLastSidebarWidth"),10)||m,S=(0,s._z)(A,"teamSwitcherBackground"),b=(0,s._z)(A,"textColor"),k=(0,s._z)(A,"topNavBackground")||E,W=(0,s._z)(A,"topNavTextColor")||b,N=document.querySelector(d),V=(0,s._z)(A,"iaTheming"),R=(0,s._z)(A,"customTheme"),P=(0,s._z)(A,"windowGradient"),z=(0,s._z)(A,"isCreatorInSetupFlow"),$=(0,s.W6)("viewLayoutIsWorkspaceSwitcherVisible"),x=$?h:0;if(!N)return;const Y=N.querySelector(r);if(!E||z){f();return}if(D){if(Y&&b&&E){const G=document.createElement("div");G.classList.add("p-ia4_client_container_placeholder--sidebar"),G.style.width=`${C}px`;const ge=document.createElement("div");ge.classList.add("p-ia4_client_container_placeholder--tab_rail");const oe=document.createElement("div");if(oe.classList.add("p-ia4_client_container_placeholder--content"),oe.style.left=`${x+v+C}px`,N.appendChild(G),$&&(N.appendChild(ge),G.classList.add("p-ia4_client_container_placeholder--sidebar_with_workspace_switcher"),V!=null&&V.sidebarInverted&&(G.style.boxShadow="-1px 0px 0px 0px rgba(255, 255, 255, 0.15)"),oe.classList.add("p-ia4_client_container_placeholder--content_with_workspace_switcher")),N.appendChild(oe),N.classList.add("p-ia4_client_container_placeholder--theme-background"),V){let me="#ffffffB3";const ue="#1012148c";if(V.mode==="light"&&V.sidebarInverted&&(me="#ffffff1A"),V.mode==="dark"){var ne,re;me=ue,(re=(ne=window.document)===null||ne===void 0?void 0:ne.querySelector("body"))===null||re===void 0||re.classList.add(n.RD)}if(G.style.backgroundColor=me,R&&V.useCustomHex){if(V.primary.custom){const ae="bootPrimary",he=I({iaTheming:V,customTheme:R});he&&N.style.setProperty(`--dt_color-plt-${ae}-${he.shade}`,he.value)}if(V.highlight1.custom){const ae="bootHighlight1",he=y({name:"bootHighlight1",hex:V.highlight1.custom.startsWith("#")?V.highlight1.custom:`#${V.highlight1.custom}`,iaTheming:V,customTheme:R});N.style.setProperty(`--dt_color-plt-${ae}-${he.shade}`,he.value)}}if(P){const ae=(0,n.Lp)({mode:(0,l.Gk)(V,V.mode),primary:V.primary,highlight1:V.highlight1,brightness:V.brightness,useCustomHex:R&&V.useCustomHex}).replace(/primary/g,"bootPrimary").replace(/highlight1/g,"bootHighlight1");N.style.background=ae}else{const ae="bootPrimary",he=I({iaTheming:V,customTheme:!!R}),ce=(0,l.Gk)(V,V.mode),ee=(0,n.VS)({mode:ce,role:ce==="light-inverted-sidebar"?"highlight1":"primary",brightness:(V==null?void 0:V.brightness)||n.GK});N.style.backgroundColor=R&&V.useCustomHex&&he?`rgb(var(--dt_color-plt-${ae}-${he.shade}))`:`rgb(var(--dt_color-plt-${V.primary.palette}-${ee}))`}}else if(G.style.backgroundColor=E,k){const me=k,ue=(0,o.fl)(k,25);N.style.background=`radial-gradient(
						circle at 50% 50%,
						${me} 20%,
						transparent 80%
					),
					conic-gradient(
            from 45deg at 50% 50%,
            ${ue} 0%,
            ${me} 25%,
            ${ue} 50%,
            ${me} 75%,
            ${ue} 100%
          )`}Y.classList.add("p-ia4_client_container_placeholder--top-nav"),(0,c.ve)()&&k&&a.ea3.isAvailable()&&(0,a.ea3)((0,a.Xgz)(),{color:k,symbolColor:W})}N.style.opacity="1"}else{if((0,i.VA)()&&O&&(N.classList.add("p-client_container_placeholder--with-team-switcher"),S&&(N.style.borderLeftColor=S)),Y&&b&&E){const me=(0,o.Lh)(b,E,.1),ue=(0,o.Ko)(b,.1);N.style.borderRightColor=me,(0,c.ve)()&&k&&a.ea3.isAvailable()&&(0,a.ea3)((0,a.Xgz)(),{color:k,symbolColor:W}),k&&(Y.style.backgroundColor=k),Y.style.color=ue,(0,i.VA)()&&O&&(N.style.removeProperty("border-left-color"),N.style.boxShadow=`-60px 0px 0px 0px ${E}`,Y.classList.add("p-client_container_placeholder__nav--with-team-switcher"))}let G=E;var _e;const ge=(_e=(0,s._z)(A,_._e))!==null&&_e!==void 0?_e:"",oe=parseInt(ge,10);isNaN(oe)||(N.style.width=`${ge+1}px`,(0,i.VA)()&&O&&oe===0&&(N.style.width="60px",G="none",N.style.borderRight="none")),N.style.backgroundColor=G,N.style.opacity="1"}}u(T,"renderBootPlaceholder");function f(){const M=document.querySelector(d);M&&M.remove()}u(f,"removeBootPlaceholder"),Object.defineProperty({removeBootPlaceholder:f},"removeBootPlaceholder",{get:()=>f,set:M=>{f=M}})},1486505410:(j,p,e)=>{"use strict";var t=e(9706240641),n=e(2069372582),s=e(1535672935),a=e(6533394955);function c(rt,ft){var yt,wt,Nt,Fn,Pn,jn;const Qn=(0,a.getClientStoreInstance)();if(Qn.dispatch((0,s.setWorkspaceFailedToBoot)(rt)),!(ft==null||(yt=ft.data)===null||yt===void 0)&&yt.active_migration){var rs,os;Qn.dispatch((0,s.setWorkspaceIsMigrating)({teamId:rt,migrationId:ft==null||(rs=ft.data)===null||rs===void 0?void 0:rs.migration_id,canViewMigrationStatus:ft==null||(os=ft.data)===null||os===void 0?void 0:os.can_view_migration_status})),(0,n.R8)("BOOT",`(${rt}) Workspace boot failed due to active migration`)}if((ft==null||(wt=ft.data)===null||wt===void 0?void 0:wt.error)==="accesslimited"&&Qn.dispatch((0,s.setWorkspaceIsAccessLimited)(rt)),(ft==null||(Nt=ft.data)===null||Nt===void 0?void 0:Nt.error)==="two_factor_setup_required"&&Qn.dispatch((0,s.setWorkspaceNeeds2FASetup)(rt)),(ft==null||(Fn=ft.data)===null||Fn===void 0?void 0:Fn.error)==="user_in_no_workspaces"&&Qn.dispatch((0,s.setUserNotMemberOfAnyWorkspaceInOrg)(rt)),(ft==null||(Pn=ft.data)===null||Pn===void 0?void 0:Pn.error)==="mobile_login_required"&&Qn.dispatch((0,s.setUserRequiresMobileLogin)(rt)),(ft==null||(jn=ft.data)===null||jn===void 0?void 0:jn.error)==="user_needs_to_accept_custom_tos"){var ws;Qn.dispatch((0,s.setWorkspaceNeedsToAcceptCustomTOS)({teamId:rt,url:ft==null||(ws=ft.data)===null||ws===void 0?void 0:ws.url}))}}u(c,"markTeamBootFailed");var o=e(6188550760),i=e(7515251865),l=e(9012396182);function _(rt){const ft=(0,a.getClientStoreInstance)();var yt;const wt=(yt=(0,l.getNavigateToUnbootedWorkspace)(ft.getState()))!==null&&yt!==void 0?yt:{},{bootingTeamId:Nt,navigateToRouteProps:Fn}=wt;return Nt===rt?((0,o._U)((Fn==null?void 0:Fn.routeName)||i.o,{teamId:rt,...(Fn==null?void 0:Fn.params)||{}},{reason:"delayed-unbooted-team-switch",...(Fn==null?void 0:Fn.options)||{}}),ft.dispatch((0,s.setNavigateToUnbootedWorkspace)({})),!0):!1}u(_,"maybeNavigateToUnbootedWorkspace");function d(rt,ft){if(!rt)throw new Error("Missing team id, cannot thin boot team.");c(rt,ft),_(rt)}u(d,"thinBootTeam");var r=e(1073393277),m=e(2212859256),h=e(1044468604);const v={[h.F9.API]:y,[h.F9.BOOT_APP]:I,[h.F9.BOOT_TEAM]:T,[h.F9.DEFAULT]:f};function y(rt,ft,yt){var wt;const Nt=yt==null?void 0:yt.teamId;if(window.isReloading){(0,n.pq)("BOOT",`(${Nt}) Ongoing reload detected during Gantry API error handler; Halting error handler.`);return}h.XB[h.F9.API](rt,ft,{...yt,shouldDisplayErrorView:!1,shouldBeaconError:(rt==null||(wt=rt.data)===null||wt===void 0?void 0:wt.error)!=="user_needs_to_accept_custom_tos"}),d(Nt,rt),ft!=null&&ft.isForegroundTeam&&Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-async-client-render-client")]).then(e.bind(e,9398335742)).then(Fn=>{let{renderClient:Pn}=Fn;(0,r.a5)(),Pn()})}u(y,"handleApiError");function I(rt,ft,yt){(0,r.a5)(),h.XB[h.F9.BOOT_APP](rt,ft,yt)}u(I,"handleBootAppError");function T(rt,ft,yt){if(yt){const{teamId:wt}=yt;(0,m.y)(wt)}(0,r.a5)(),h.XB[h.F9.BOOT_TEAM](rt,ft,yt)}u(T,"handleBootTeamError");function f(rt,ft,yt){(0,r.a5)(),h.XB[h.F9.DEFAULT](rt,ft,yt)}u(f,"handleDefaultError");const g={handleApiError:y,handleBootAppError:I,handleBootTeamError:T,handleDefaultError:f};var M=e(9113979368),A=e(1197598850),O=e(1092614768),D=e(2325478352),E=e(796111729),C=e(2250002584),S=e(2872463257);const b="cse-api",k="cse-boot-api";function W(rt){return N.apply(this,arguments)}u(W,"fetchBootData");function N(){return N=(0,t.coroutine)(function*(rt){const{teamId:ft,userId:yt,isBootingWarm:wt}=rt,Nt=yield wt,Fn=Nt?"deferred-data":"initial-data";let Pn=null;(0,D.EZ)()&&Nt&&(Pn=yield(0,O.z6)({teamId:ft,userId:yt}));const jn=A.V$.bind(null,{...rt,reason:Fn,minChannelUpdated:Pn});return V(jn,{teamId:ft,userId:yt,reason:Fn})}),N.apply(this,arguments)}u(N,"_fetchBootData");function V(rt){let ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const yt=(0,C.F)(),wt=yt.createTrace({traceName:b,tags:ft,samplingOptions:{sampleType:S.nl.ALWAYS}});if(!(wt!=null&&wt.traceFn))return(0,E.Wo)().warn("BOOT","Trace or traceFn is undefined; Unable to trace client.userBoot data fetch."),rt();const Nt=u((Pn,jn)=>{if((0,M.A)(jn)){const Qn={state:S.$m.SUCCESS,message:"client_userBoot_empty"};Pn==null||Pn.addTags(Qn),Pn==null||Pn.close(),yt.reportTrace(wt)}else yt.clearTrace(wt)},"onResolve"),Fn=u((Pn,jn)=>{var Qn;const rs={state:S.$m.ERROR};jn!=null&&jn.status&&(rs.status=jn.status),jn!=null&&jn.message&&(rs.message=jn.message),!(jn==null||(Qn=jn.data)===null||Qn===void 0)&&Qn.error&&(rs.reason=jn.data.error),Pn==null||Pn.addTags(rs),Pn==null||Pn.close(),yt.reportTrace(wt)},"onError");return wt.traceFn({name:k,onError:Fn,onResolve:Nt},rt)}u(V,"maybeTraceClientUserBootDataFetch"),Object.defineProperty({CSE_API_TRACE_LABEL:b,CLIENT_BOOT_SPAN_LABEL:k},"fetchBootData",{get:()=>W,set:rt=>{W=rt}});var P=e(3398586081),z=e(6422693406),$=e(9733150292),x=e(6575028637);const Y=(0,P.A)(_e,rt=>rt.enterpriseId);function ne(rt){return re.apply(this,arguments)}u(ne,"maybeFetchEnterpriseData");function re(){return re=(0,t.coroutine)(function*(rt){return rt.enterpriseId?Y(rt):{}}),re.apply(this,arguments)}u(re,"_maybeFetchEnterpriseData");function _e(rt){return G.apply(this,arguments)}u(_e,"fetchAllEnterpriseData");function G(){return G=(0,t.coroutine)(function*(rt){const{teamId:ft,enterpriseId:yt}=rt;var wt;let Nt=(wt=(0,$._z)(ft??"","enterprise_api_token"))!==null&&wt!==void 0?wt:"";if(ft&&(0,x.ZN)(ft)&&!Nt){var Fn;Nt=(Fn=(0,$._z)(ft,"token"))!==null&&Fn!==void 0?Fn:""}const[Pn,jn]=yield z.S.all([(0,A.YH)(rt),(0,A.O5)({...rt,token:Nt})]),Qn={enterprise_id:yt,page_needs_enterprise:!0,enterprise_api_token:Nt};return{enterpriseData:Pn==null?void 0:Pn.enterprise,enterprisePrefsData:jn,enterpriseBootData:Qn}}),G.apply(this,arguments)}u(G,"_fetchAllEnterpriseData");const ge={resetMemoizedFetchEnterpriseDataCache:()=>{Y.cache.clear()}};var oe=e(1460808057),me=e(8187930033),ue=e(8414867410),ae=e(5084575109),he=e(8834730594),ce=e(8040098042),ee=e(2960290117);function J(rt){return X.apply(this,arguments)}u(J,"maybeFetchMessagesData");function X(){return X=(0,t.coroutine)(function*(rt){const{bootQueue:ft,token:yt,teamId:wt}=rt;if(!yt)return(0,E.Ay)({teamOrEnterpriseId:wt,label:"BOOT"}).error(new Error("Token missing; Unable to fetch messages data.")),null;if(!wt)return(0,E.Ay)({teamOrEnterpriseId:wt,label:"BOOT"}).error(new Error("teamId missing; Unable to fetch messages data.")),null;const Nt=yield(0,oe.E)({contextualInfo:rt});return F({bootQueue:ft,token:yt,teamId:wt,routeInfo:Nt})}),X.apply(this,arguments)}u(X,"_maybeFetchMessagesData");function F(rt){return L.apply(this,arguments)}u(F,"fetchMessagesDataForRoute");function L(){return L=(0,t.coroutine)(function*(rt){let{bootQueue:ft,token:yt,teamId:wt,routeInfo:Nt}=rt;var Fn;const Pn=Nt==null||(Fn=Nt.params)===null||Fn===void 0?void 0:Fn.entityId;return Pn&&(0,ce.A)(Pn)&&!(0,ae.n)(Pn)&&!(0,ue.bd)(Pn)&&!(0,he.A)(Pn)&&!(0,ee.Ay)(Pn)?((0,n.pq)("BOOT",`Booting into channel: ${Pn}`),K({bootQueue:ft,token:yt,teamId:wt,id:Pn})):!(0,ae.n)(Pn)&&!(0,ue.bd)(Pn)&&!(0,he.A)(Pn)&&!(0,ee.Ay)(Pn)?((0,n.pq)("BOOT","Couldn't determine boot channel. Falling back to default channel"),K({bootQueue:ft,token:yt,teamId:wt})):null}),L.apply(this,arguments)}u(L,"_fetchMessagesDataForRoute");function K(rt){let{bootQueue:ft,token:yt,teamId:wt,id:Nt}=rt;const Fn={token:yt,canonical_avatars:!0,no_user_profile:!0,ignore_replies:!0,no_self:!0,include_full_users:!0,include_use_case:!0,include_stories:!0,no_members:!0,include_mutation_timestamps:!0,count:28};Nt&&(Fn.channel=Nt),Fn.include_free_team_extra_messages=!0;const Pn=new me.Ay({method:"conversations.view",args:Fn,teamId:wt});return ft.q(Pn).catch(jn=>((0,E.Ay)({teamOrEnterpriseId:wt,label:"BOOT"}).error(new Error(`unable to fetch messages data ${jn}`)),null))}u(K,"fetchMessagesData");const B={fetchMessagesData:K};var Q=e(4892637646),q=e(6998663753),le=e(9706702639),Te=e(5313493085);function Ie(rt){let{params:ft,routeName:yt}=rt;const wt=ft.teamId||ft.teamOrEnterpriseId,{dispatch:Nt}=(0,a.getStoreInstanceByTeamId)(wt);Nt((0,Te.M)({routeName:yt,routeParams:ft}))}u(Ie,"channelCanvasListener");var De=e(1881693845),pe=e(2591023465),fe=e(3674298388);const Z=u(rt=>{let{prevTeamId:ft,nextTeamId:yt}=rt;if(ft!==yt)return;const Nt=(0,a.getStoreInstanceByTeamId)(yt).getState();(0,De.A)()&&(0,fe.r8)(Nt)&&(0,a.dispatchForClientStore)((0,pe.vm)(!1))},"dismiss_floating_sidebar");var se=e(9268451279),Ae=e(2805462396),Ce=e(4386248732),Le=e(7765212398),Ue=e(9460580631);function Pe(rt){let{params:ft,prevRouteInfo:yt,prevTeamId:wt}=rt;const Nt=yt==null?void 0:yt.params;if(!Nt||Nt.entityId!=="composer"||!Nt.draftId||Nt.draftId===(ft==null?void 0:ft.draftId))return!0;const{dispatch:Fn,getState:Pn}=(0,a.getStoreInstanceByTeamId)(wt),jn=Pn(),Qn=(0,Ce.di)(Nt.draftId);if(!Qn)return!0;const rs=(0,Le.YI)(jn,Qn);return(0,se.v7)(rs,{trimWhitespace:!0})||(0,Ae.A)(jn,rs)||Fn((0,Ue.A)({ids:[Qn],reason:"draftsListenerBefore"})),!0}u(Pe,"draftsListenerBefore");var He=e(4446301238),Qe=e(9289081806),lt=e(1407713935),qe=e(9101533895),ct=e(7053828403);function tt(rt,ft){return it.apply(this,arguments)}u(tt,"ensureChannel");function it(){return it=(0,t.coroutine)(function*(rt,ft){const yt=rt.getState(),wt=(0,qe.OL)(yt,ft,!1);return(0,lt.hc)(wt)?wt:rt.dispatch((0,He.pX)({ids:[ft],reason:"sonic/route-listeners/ensure-channel",callSource:He.aI.EnsureChannel})).then(Nt=>{if(!Nt)return;const{channels:Fn,resolved:Pn}=Nt;if(!(!Pn||!Pn.includes(ft)))return Fn[0]})}),it.apply(this,arguments)}u(it,"_ensureChannel");const Ge=function(){var rt=(0,t.coroutine)(function*(ft){let{prevTeamId:yt,nextTeamId:wt,routeName:Nt,params:Fn={}}=ft;const Pn=(0,a.getStoreInstanceByTeamId)(wt);if(!(0,ce.A)(Fn.entityId))return z.S.resolve(void 0);const jn=Fn.entityId;return tt(Pn,jn).then(Qn=>{if(Qn&&!(0,Qe.lo)(Qn))return z.S.resolve(void 0);if(yt!==wt){const rs=(0,ct.EI)(Pn.getState(),{mainView:!0});return rs===jn?z.S.reject(new Error("fallback channel ID === target channel ID, can\u2019t switch workspaces")):((0,o._U)(Nt,{...Fn,entityId:rs},{shouldReplaceState:!0}),z.S.resolve(!1))}return Qn?z.S.reject(new Error("tried to switch to a channel from another team")):z.S.resolve(!1)})});return function(ft){return rt.apply(this,arguments)}}();var We=e(1530920905);function xe(rt){let{nextTeamId:ft,prevTeamId:yt}=rt;const{dispatch:wt}=(0,a.getStoreInstanceByTeamId)(ft);yt!==ft&&wt((0,We.yh)({teamId:ft}))}u(xe,"permissionsListener");var ze=e(2542612541),mt=e(9005797924),pt=e(4496040127);const It=u(rt=>{let{prevTeamId:ft,nextTeamId:yt}=rt;if(!(0,pt.VA)()||ft===yt||!yt)return!0;if((0,ze.A)(yt,ft))return!1;const wt=(0,a.getStateForClientStore)();return(0,l.isWorkspaceExpired)(wt,yt)||(0,l.isWorkspacePendingAuth)(wt,yt)?((0,mt.A)(yt),!1):!0},"maybe_finish_signin");var bt=e(4992650731);const gt=u(rt=>{let{prevTeamId:ft,nextTeamId:yt,routeName:wt,params:Nt}=rt;if((0,pt.VA)()||ft===yt)return!0;const Fn=(0,o.M5)(wt,{...Nt,teamId:yt});if(!yt)return!0;const Pn=(0,a.getStateForClientStore)(),jn=(0,l.getWorkspacesMeta)(Pn),Qn=jn&&jn[yt]&&jn[yt].subdomain,rs=(0,pt.eb)(Qn)||`_team_${yt}`;return(0,bt.A)(Fn,rs),!1},"maybe_open_other_team_in_browser");var ht=e(8959118205),Zt=e(4588963228),rn=e(497761763),zt=e(4327331459),In=e(3707193570),cn=e(4862221402),Jt=e(6427150145);const dn=/^[\d]{13}$/;function sn(rt){return rt?dn.test(rt):!1}u(sn,"looksLikeLastReadTs");var Xt=e(1826991857),xt=e(7174777686),en=e(7752506476);function un(rt){return(0,xt.A)(en.M,rt)||rt===""}u(un,"looksLikeFlexpaneSectionId");var yn=e(6471801899),ut=e(1233969417);const Ot=[/^people[ -~]{1,27}$/,/^contacts[ -~]{1,27}$/,/^otherContacts[ -~]{1,27}$/,/^slackUsers[ -~]{1,27}$/];function kt(rt){return Ot.some(ft=>ft.test(rt))}u(kt,"looksLikeContactExternalId");var be=e(6605261507),Kt=e(5587260451);const Vt=["received","sent"];function on(rt){return Vt.includes(rt)}u(on,"looksLikeInvitationsTabRouteParam");var pn=e(3468466741),et=e(8538260492),At=e(4425811520),Rt=e(7770205178),Ft=e(9132066222),$t=e(8237194282),vn=e(8305125093);function Rn(rt){return!!ht.as[rt]}u(Rn,"isEntityRedirectKey");const hn=u(rt=>Object.keys(ht.as).includes(rt),"isRedirectRoute"),gn={entityId:rt=>(0,he.A)(rt)||(0,Zt.A)(rt)||(0,ce.A)(rt)||(0,rn.A)(rt)||(0,zt.A)(rt)||(0,In.Ay)(rt)||(0,cn.A)(rt)||(0,ae.n)(rt)||(0,ue.bd)(rt)||hn(rt)||(0,ee.Ay)(rt)||(0,At.xL)(rt),appOrServiceId:rt=>(0,Zt.A)(rt)||(0,he.A)(rt),timestamp:Jt.A,threadId:Xt.A,threadPageId:Xt.A,replyTs:Jt.A,sectionId:un,tabId:rt=>(0,be.Dl)(rt),viewName:rt=>(0,Kt.c)(rt),listsViewName:yn.FO,draftId:Ce.ai,invitationsTabId:on,channelId:ce.A,channelFilesId:rt=>/^files-.+/.test(rt),searchQuery:rt=>/^search-.+/.test(rt),articleId:rt=>(0,ut.A)(rt),tileEntityId:rt=>(0,ce.A)(rt)||(0,ae.n)(rt)||(0,ue.bd)(rt),scTeamOrEnterpriseId:rt=>(0,In.Am)(rt),quipDocId:ee.Ay,channelCanvasId:ee.Ay,contactExternalId:kt,itemId:pn.Ny,recordId:yn.pq,focusRecordId:yn.or,listViewId:yn._o,lastReadTs:sn,canvasOpenedFromId:rt=>(0,ce.A)(rt)||(0,zt.A)(rt)||rt===et.eE.QUIP_FILES,externalWorkspacePage:Rt.W_,channelTabId:Ft.jK,salesforceRecordId:$t.V,workflowTemplateId:vn.A},Cn={[i.o]:{paths:["/"]},[ht._G]:{paths:["/:entityId","/:entityId/:timestamp","/:entityId/:tabId","/:entityId/:viewName","/:entityId/:viewName/:invitationsTabId","/:entityId/:listsViewName","/:entityId/:listsViewName/:focusRecordId","/:entityId/:listsViewName/:listViewId","/:entityId/:draftId","/:entityId/:threadPageId","/:entityId/:searchQuery","/:entityId/:channelFilesId","/:entityId/:scTeamOrEnterpriseId","/:entityId/:itemId","/:entityId/:channelCanvasId","/:entityId/:canvasOpenedFromId","/:entityId/:externalWorkspacePage","/:entityId/tabs/:channelTabId","/:entityId/:salesforceRecordId"]},[ht.lM]:{paths:["/:entityId/thread/:threadId","/:entityId/thread/:threadId/:replyTs","/:entityId/:timestamp/thread/:threadId","/:entityId/:viewName/thread/:threadId","/:entityId/:viewName/:invitationsTabId/thread/:threadId","/:entityId/:tabId/thread/:threadId","/:entityId/:draftId/thread/:threadId","/:entityId/:searchQuery/thread/:threadId","/:entityId/:channelFilesId/thread/:threadId","/:entityId/:scTeamOrEnterpriseId/thread/:threadId","/:entityId/:listsViewName/thread/:threadId","/:entityId/:canvasOpenedFromId/thread/:threadId"]},[ht.w7]:{paths:["/:entityId/messages/:channelId","/:entityId/messages/:channelId/:timestamp"]},[ht.Vy]:{paths:["/:entityId/channel_info","/:entityId/:timestamp/channel_info","/:entityId/:viewName/channel_info","/:entityId/:viewName/:invitationsTabId/channel_info","/:entityId/:tabId/channel_info","/:entityId/:draftId/channel_info","/:entityId/:threadPageId/channel_info","/:entityId/:searchQuery/channel_info","/:entityId/:channelFilesId/channel_info","/:entityId/:scTeamOrEnterpriseId/channel_info","/:entityId/:listsViewName/channel_info","/:entityId/:canvasOpenedFromId/channel_info"]},[ht.o6]:{paths:["/:entityId/inspect/:channelId","/:entityId/inspect/:channelId/:sectionId"]},[ht.p3]:{paths:["/:entityId/activity","/:entityId/:timestamp/activity","/:entityId/:viewName/activity","/:entityId/:viewName/:invitationsTabId/activity","/:entityId/:tabId/activity","/:entityId/:draftId/activity","/:entityId/:threadPageId/activity","/:entityId/:searchQuery/activity","/:entityId/:channelFilesId/activity","/:entityId/:scTeamOrEnterpriseId/activity","/:entityId/:canvasOpenedFromId/activity"]},[ht.W2]:{paths:["/:entityId/starred_items","/:entityId/:timestamp/starred_items","/:entityId/:viewName/starred_items","/:entityId/:viewName/:invitationsTabId/starred_items","/:entityId/:tabId/starred_items","/:entityId/:draftId/starred_items","/:entityId/:threadPageId/starred_items","/:entityId/:searchQuery/starred_items","/:entityId/:channelFilesId/starred_items","/:entityId/:scTeamOrEnterpriseId/starred_items","/:entityId/:listsViewName/starred_items","/:entityId/:canvasOpenedFromId/starred_items"]},[ht.ym]:{paths:["/:entityId/saved","/:entityId/:timestamp/saved","/:entityId/:viewName/saved","/:entityId/:viewName/:invitationsTabId/saved","/:entityId/:tabId/saved","/:entityId/:draftId/saved","/:entityId/:threadPageId/saved","/:entityId/:searchQuery/saved","/:entityId/:channelFilesId/saved","/:entityId/:scTeamOrEnterpriseId/saved","/:entityId/:listsViewName/saved","/:entityId/:canvasOpenedFromId/saved"]},[ht.fr]:{paths:["/:entityId/appspane","/:entityId/:timestamp/appspane","/:entityId/:viewName/appspane","/:entityId/:viewName/:invitationsTabId/appspane","/:entityId/:tabId/appspane","/:entityId/:draftId/appspane","/:entityId/:threadPageId/appspane","/:entityId/:searchQuery/appspane","/:entityId/:channelFilesId/appspane","/:entityId/:scTeamOrEnterpriseId/appspane","/:entityId/:listsViewName/appspane","/:entityId/:canvasOpenedFromId/appspane"]},[ht.M9]:{paths:["/:entityId/files","/:entityId/:timestamp/files","/:entityId/:viewName/files","/:entityId/:viewName/:invitationsTabId/files","/:entityId/:tabId/files","/:entityId/:draftId/files","/:entityId/:threadPageId/files","/:entityId/:searchQuery/files","/:entityId/:channelFilesId/files","/:entityId/:scTeamOrEnterpriseId/files","/:entityId/:listsViewName/files"]},[ht.T$]:{paths:["/:entityId/filespane","/:entityId/:timestamp/filespane","/:entityId/:viewName/filespane","/:entityId/:viewName/:invitationsTabId/filespane","/:entityId/:tabId/filespane","/:entityId/:draftId/filespane","/:entityId/:threadPageId/filespane","/:entityId/:searchQuery/filespane","/:entityId/:channelFilesId/filespane","/:entityId/:scTeamOrEnterpriseId/filespane","/:entityId/:listsViewName/filespane"]},[ht.De]:{paths:["/:entityId/files/:fileId","/:entityId/:timestamp/files/:fileId","/:entityId/:viewName/files/:fileId","/:entityId/:viewName/:invitationsTabId/files/:fileId","/:entityId/:tabId/files/:fileId","/:entityId/:draftId/files/:fileId","/:entityId/:threadPageId/files/:fileId","/:entityId/:searchQuery/files/:fileId","/:entityId/:channelFilesId/files/:fileId","/:entityId/:scTeamOrEnterpriseId/files/:fileId","/:entityId/:listsViewName/files/:fileId","/:entityId/:canvasOpenedFromId/files/:fileId"]},[ht.wA]:{paths:["/:entityId/comments/:quipDocId","/:entityId/:canvasOpenedFromId/comments/:quipDocId"]},[ht.li]:{paths:["/:entityId/history/:quipDocId","/:entityId/:canvasOpenedFromId/history/:quipDocId"]},[ht.mj]:{paths:["/:entityId/docs/:quipDocId","/:entityId/docs/:quipDocId/:lastReadTs","/:entityId/:timestamp/docs/:quipDocId","/:entityId/:viewName/docs/:quipDocId","/:entityId/:viewName/:invitationsTabId/docs/:quipDocId","/:entityId/:tabId/docs/:quipDocId","/:entityId/:draftId/docs/:quipDocId","/:entityId/:threadPageId/docs/:quipDocId","/:entityId/:searchQuery/docs/:quipDocId","/:entityId/:channelFilesId/docs/:quipDocId","/:entityId/:listsViewName/docs/:quipDocId"]},[ht.y0]:{paths:["/:entityId/files/type","/:entityId/:timestamp/files/type","/:entityId/:viewName/files/type","/:entityId/:viewName/:invitationsTabId/files/type","/:entityId/:tabId/files/type","/:entityId/:draftId/files/type","/:entityId/:threadPageId/files/type","/:entityId/:searchQuery/files/type","/:entityId/:channelFilesId/files/type","/:entityId/:scTeamOrEnterpriseId/files/type","/:entityId/:listsViewName/files/type"]},[ht.Nh]:{paths:["/:entityId/files/:memberId","/:entityId/:timestamp/files/:memberId","/:entityId/:viewName/files/memberId","/:entityId/:viewName/:invitationsTabId/files/memberId","/:entityId/:tabId/files/:memberId","/:entityId/:draftId/files/:memberId","/:entityId/:threadPageId/files/:memberId","/:entityId/:searchQuery/files/:memberId","/:entityId/:channelFilesId/files/:memberId","/:entityId/:scTeamOrEnterpriseId/files/:memberId","/:entityId/:listsViewName/files/:memberId","/:entityId/:canvasOpenedFromId/files/:memberId"]},[ht.$s]:{paths:["/:entityId/user_groups","/:entityId/:timestamp/user_groups","/:entityId/:viewName/user_groups","/:entityId/:viewName/:invitationsTabId/user_groups","/:entityId/:tabId/user_groups","/:entityId/:draftId/user_groups","/:entityId/:threadPageId/user_groups","/:entityId/:searchQuery/user_groups","/:entityId/:channelFilesId/user_groups","/:entityId/:scTeamOrEnterpriseId/user_groups","/:entityId/:listsViewName/user_groups","/:entityId/:canvasOpenedFromId/user_groups"]},[ht.Mu]:{paths:["/:entityId/user_groups/:userGroupId","/:entityId/:timestamp/user_groups/:userGroupId","/:entityId/:viewName/user_groups/:userGroupId","/:entityId/:viewName/:invitationsTabId/user_groups/:userGroupId","/:entityId/:tabId/user_groups/:userGroupId","/:entityId/:draftId/user_groups/:userGroupId","/:entityId/:threadPageId/user_groups/:userGroupId","/:entityId/:searchQuery/user_groups/:userGroupId","/:entityId/:channelFilesId/user_groups/:userGroupId","/:entityId/:scTeamOrEnterpriseId/user_groups/:userGroupId","/:entityId/:listsViewName/user_groups/:userGroupId","/:entityId/:canvasOpenedFromId/user_groups/:userGroupId"]},[ht.Ns]:{paths:["/:entityId/whats_new","/:entityId/:timestamp/whats_new","/:entityId/:viewName/whats_new","/:entityId/:viewName/:invitationsTabId/whats_new","/:entityId/:tabId/whats_new","/:entityId/:draftId/whats_new","/:entityId/:threadPageId/whats_new","/:entityId/:searchQuery/whats_new","/:entityId/:channelFilesId/whats_new","/:entityId/:scTeamOrEnterpriseId/whats_new","/:entityId/:listsViewName/whats_new","/:entityId/:canvasOpenedFromId/whats_new"]},[ht.IN]:{paths:["/:entityId/shortcuts","/:entityId/:timestamp/shortcuts","/:entityId/:viewName/shortcuts","/:entityId/:viewName/:invitationsTabId/shortcuts","/:entityId/:tabId/shortcuts","/:entityId/:draftId/shortcuts","/:entityId/:threadPageId/shortcuts","/:entityId/:searchQuery/shortcuts","/:entityId/:channelFilesId/shortcuts","/:entityId/:scTeamOrEnterpriseId/shortcuts","/:entityId/:listsViewName/shortcuts","/:entityId/:canvasOpenedFromId/shortcuts"]},[ht.Q$]:{paths:["/:entityId/user_profile/:memberId","/:entityId/:timestamp/user_profile/:memberId","/:entityId/:viewName/user_profile/:memberId","/:entityId/:viewName/:invitationsTabId/user_profile/:memberId","/:entityId/:tabId/user_profile/:memberId","/:entityId/:draftId/user_profile/:memberId","/:entityId/:threadPageId/user_profile/:memberId","/:entityId/:searchQuery/user_profile/:memberId","/:entityId/:channelFilesId/user_profile/:memberId","/:entityId/:scTeamOrEnterpriseId/user_profile/:memberId","/:entityId/:listsViewName/user_profile/:memberId","/:entityId/:canvasOpenedFromId/user_profile/:memberId"]},[ht.E2]:{paths:["/:entityId/help","/:entityId/:timestamp/help","/:entityId/:viewName/help","/:entityId/:viewName/:invitationsTabId/help","/:entityId/:tabId/help","/:entityId/:draftId/help","/:entityId/:threadPageId/help","/:entityId/:searchQuery/help","/:entityId/:channelFilesId/help","/:entityId/:scTeamOrEnterpriseId/help","/:entityId/:listsViewName/help","/:entityId/:canvasOpenedFromId/help"]},[ht.vA]:{paths:["/:entityId/help/:articleId","/:entityId/:timestamp/help/:articleId","/:entityId/:viewName/help/:articleId","/:entityId/:viewName/:invitationsTabId/help/:articleId","/:entityId/:tabId/help/:articleId","/:entityId/:draftId/help/:articleId","/:entityId/:threadPageId/help/:articleId","/:entityId/:searchQuery/help/:articleId","/:entityId/:channelFilesId/help/:articleId","/:entityId/:scTeamOrEnterpriseId/help/:articleId","/:entityId/:listsViewName/help/:articleId","/:entityId/:canvasOpenedFromId/help/:articleId"]},[ht.Dn]:{paths:["/:entityId/rimeto_profile/:memberId","/:entityId/:timestamp/rimeto_profile/:memberId","/:entityId/:viewName/rimeto_profile/:memberId","/:entityId/:viewName/:invitationsTabId/rimeto_profile/:memberId","/:entityId/:tabId/rimeto_profile/:memberId","/:entityId/:searchQuery/rimeto_profile/:memberId","/:entityId/:draftId/rimeto_profile/:memberId","/:entityId/:threadPageId/rimeto_profile/:memberId","/:entityId/:channelFilesId/rimeto_profile/:memberId","/:entityId/:scTeamOrEnterpriseId/rimeto_profile/:memberId","/:entityId/:listsViewName/rimeto_profile/:memberId","/:entityId/:canvasOpenedFromId/rimeto_profile/:memberId"]},[ht.Ie]:{paths:["/:entityId/feedback","/:entityId/:timestamp/feedback","/:entityId/:viewName/feedback","/:entityId/:viewName/:invitationsTabId/feedback","/:entityId/:tabId/feedback","/:entityId/:draftId/feedback","/:entityId/:threadPageId/feedback","/:entityId/:searchQuery/feedback","/:entityId/:channelFilesId/feedback","/:entityId/:scTeamOrEnterpriseId/feedback","/:entityId/:listsViewName/feedback","/:entityId/:canvasOpenedFromId/feedback"]},[ht.Bh]:{paths:["/:channelId/huddle"]},[ht.Mv]:{paths:["/:entityId/huddles_captions","/:entityId/:timestamp/huddles_captions","/:entityId/:viewName/huddles_captions","/:entityId/:viewName/:invitationsTabId/huddles_captions","/:entityId/:tabId/huddles_captions","/:entityId/:draftId/huddles_captions","/:entityId/:threadPageId/huddles_captions","/:entityId/:searchQuery/huddles_captions","/:entityId/:channelFilesId/huddles_captions","/:entityId/:scTeamOrEnterpriseId/huddles_captions","/:entityId/:listsViewName/huddles_captions","/:entityId/:canvasOpenedFromId/huddles_captions"]},[ht.d2]:{paths:["/:entityId/contact_profile/:contactExternalId","/:entityId/:timestamp/contact_profile/:contactExternalId","/:entityId/:viewName/contact_profile/:contactExternalId","/:entityId/:viewName/:invitationsTabId/contact_profile/:contactExternalId","/:entityId/:tabId/contact_profile/:contactExternalId","/:entityId/:draftId/contact_profile/:contactExternalId","/:entityId/:threadPageId/contact_profile/:contactExternalId","/:entityId/:searchQuery/contact_profile/:contactExternalId","/:entityId/:channelFilesId/contact_profile/:contactExternalId","/:entityId/:scTeamOrEnterpriseId/contact_profile/:contactExternalId","/:entityId/:listsViewName/contact_profile/:contactExternalId","/:entityId/:canvasOpenedFromId/contact_profile/:contactExternalId"]},[ht.p$]:{paths:["/:entityId/record/:recordId","/:entityId/:timestamp/record/:recordId","/:entityId/:viewName/record/:recordId","/:entityId/:viewName/:invitationsTabId/record/:recordId","/:entityId/:tabId/record/:recordId","/:entityId/:draftId/record/:recordId","/:entityId/:threadPageId/record/:recordId","/:entityId/:searchQuery/record/:recordId","/:entityId/:channelFilesId/record/:recordId","/:entityId/:scTeamOrEnterpriseId/record/:recordId","/:entityId/:listsViewName/record/:recordId","/:entityId/:canvasOpenedFromId/record/:recordId"]},[ht.td]:{paths:["/:entityId/:tabId/:workflowTemplateId"]}};function fn(){(0,o.S2)(gn,Cn)}u(fn,"setRoutes");const Oe=u(rt=>{let{routeName:ft,params:yt={}}=rt;const{entityId:wt}=yt;return wt&&Rn(wt)?((0,o._U)(ft,{...yt,entityId:ht.as[wt]},{shouldReplaceState:!0}),!1):!0},"maybe_redirect_entity");var ke=e(7213691587),je=e(109860581),Be=e(3193155968),st=e(7429662208);function St(rt){let{prevTeamId:ft,nextTeamId:yt}=rt;if(!yt||ft===yt)return;const wt=(0,a.getStoreInstanceByTeamId)(yt),Nt=wt.getState(),Fn=(0,st.e6)(Nt),Pn=(0,st.Le)(Nt,{tab:Fn});wt.dispatch((0,ke.C)({prevViewSet:void 0,prevTab:void 0,nextViewSet:Pn,nextTab:Fn,windowId:Be.N2,navigateParams:{},triggerType:je.w.TEAM_SWITCH}))}u(St,"maybeRunTeamSwitchNavigateListeners");var Yt=e(6555262004),tn=e(5078290763),at=e(4656278360),Et=e(2567914105),_t=e(9003400431),Bt=e(8243624171);function Qt(rt){let{nextTeamId:ft,prevTeamId:yt}=rt;const{dispatch:wt,getState:Nt}=(0,a.getStoreInstanceByTeamId)(yt),Fn=Nt();return(0,Et.iS)(Fn)?new z.S((jn,Qn)=>{wt((0,tn.P)({openModalProps:{isStackable:!0},onConfirmClose:()=>{wt((0,at.U)(!1)),wt((0,_t.O)({closeAll:!0})),jn()},onCancelClose:()=>{Qn()}}))}):(yt&&!(0,Bt.Vq)({teamId:yt})&&wt(ft===yt?(0,_t.O)({closeNamed:Yt.N}):(0,_t.O)({closeAll:!0})),!0)}u(Qt,"modalListenerBefore");var Fe=e(6088404775);function Xe(rt){const ft=(0,Fe.h)();return ft!=null&&ft.onClose&&(ft==null||ft.onClose()),!0}u(Xe,"pinsPopoverListenerAfter");var Me=e(3982416567),U=e(1031947056),H=e(1466694191),te=e(6078549397),de=e(7307560139),Re=e(6822097892),Ye=e(4033441523);const we=["comment_thread","activity_history","files","rimeto_profile","thread",ht.li,ht.lM,ht.De,ht.Dn,ht.Q$],vt=(0,U.Ay)("Post activity history routing side effects",(rt,ft,yt)=>{let{params:wt,prevRouteInfo:Nt,routeName:Fn}=yt;var Pn;const jn=wt==null?void 0:wt.entityId,Qn=Nt==null||(Pn=Nt.params)===null||Pn===void 0?void 0:Pn.entityId,rs=Be.N2;if(Fn===ht._G&&jn&&(0,H.A)(jn)){const{fileIdOrQuipThreadId:_o}=(0,te.EX)(jn);we.includes(Nt==null?void 0:Nt.routeName)&&rt((0,Re.A)({fileId:_o,windowId:rs,source:Ye.f.QUIP_ACTIVITY_HISTORY_LISTENER,isFromCloseActivityHistory:!0}))}let os=jn,ws=Qn;(0,ee.Ay)(Qn)&&(0,ee.Ay)(jn)&&(os=(0,te.EX)(Qn).fileIdOrQuipThreadId,ws=(0,te.EX)(jn).fileIdOrQuipThreadId),os!==ws&&rt((0,de.NA)({windowId:rs}))});vt.meta={name:"createThunk",key:"createThunkpostQuipActivityHistoryRouting",description:"Post activity history routing side effects"};function ot(rt){let{params:ft,prevRouteInfo:yt,routeName:wt,reason:Nt}=rt;const Fn=ft.teamId||ft.teamOrEnterpriseId,{dispatch:Pn,getState:jn}=(0,a.getStoreInstanceByTeamId)(Fn);(0,Me.O4)(jn())&&Pn(vt({routeName:wt,params:ft,prevRouteInfo:yt,reason:Nt}))}u(ot,"quipActivityHistoryListener");const Mt=u(rt=>{let{nextTeamId:ft,routeName:yt,params:wt}=rt;const Nt={routeName:yt,params:wt};return ft&&(0,$.t2)(ft,"lastRoute",Nt),!0},"save_route_to_local_config");var jt=e(3080748521),Ln=e(9488048047),xn=e(532953487),bn=e(2939274763),On=e(832411022);const Un=u(rt=>{let{prevTeamId:ft,nextTeamId:yt,params:wt={}}=rt;const{dispatch:Nt,getState:Fn}=(0,a.getStoreInstanceByTeamId)(yt),Pn=Fn();if(ft!==yt)return;const jn=(0,jt.MC)(Pn),Qn=jn.entityId,rs=wt.entityId;Qn===On.d$&&rs===On.d$&&wt.searchQuery&&jn.searchQuery!==wt.searchQuery&&(0,xn.$)(Pn)!==wt.searchQuery&&Nt((0,Ln.z)({encodedSearchString:wt.searchQuery})),Qn!==rs&&rs===On.d$&&(wt.searchQuery&&Nt((0,Ln.z)({encodedSearchString:wt.searchQuery})),Nt((0,bn.s)())),Qn!==rs&&Qn===On.d$&&Nt((0,bn.w)())},"search_page_listener");var Dn=e(210422728),zn=e(9551235052);function es(rt){let{prevTeamId:ft}=rt;const yt=(0,a.getStoreInstanceByTeamId)(ft);return(0,zn.J)(yt.getState())&&(yt.dispatch((0,Dn.T)(!0)),le.g.delete("setNavigatedDuringWarmBoot")),z.S.resolve()}u(es,"setNavigatedDuringWarmBoot");var Es=e(6495946979),bs=e(8473952534),Rs=e(8213251995),vs=e(3977512448);function us(rt){let{nextTeamId:ft,prevRouteInfo:yt,params:wt}=rt;var Nt;const Fn=(0,a.getStoreInstanceByTeamId)(ft),Pn=Fn.getState(),jn=(0,Rs.c8)(Pn),Qn=(0,qe.OL)(Pn,wt.entityId),rs=(yt==null||(Nt=yt.params)===null||Nt===void 0?void 0:Nt.entityId)||"";(rs===et.eE.CHANNELS||rs===vs.b||rs===vs.Z1)&&(wt!=null&&wt.entityId)&&Qn&&!(0,Es.b)(Qn)&&Fn.dispatch((0,bs.Tm)({channelId:wt.entityId,prevRoute:rs})),jn&&(yt==null?void 0:yt.routeName)==="ROUTE_ENTITY"&&(0,ce.A)(rs)&&Fn.dispatch((0,bs.Tm)({channelId:null,prevRoute:null}))}u(us,"setPreviewingFromChannelBrowserOrLaunchpad");var w=e(1302213854);const ve=u(rt=>{let{prevTeamId:ft,nextTeamId:yt}=rt;return ft!==yt?(0,a.dispatchForClientStore)((0,w.Mb)(!0)):(0,a.dispatchForClientStore)((0,w.Mb)(!1))},"set_should_log_team_switch_metrics");var Ne=e(9143148823),dt=e(8628205589),Mn=e(4529239752),Tn=e(9795506498);function mn(rt){let{nextTeamId:ft,uuid:yt,shouldReplaceState:wt,reason:Nt}=rt;var Fn;if(!ft||!yt)return;if(Nt!==o.GB)if(wt)(0,a.dispatchForClientStore)((0,dt.HQ)({windowId:Be.N2,entry:{id:yt,ts:Date.now(),teamId:ft,isIA4:!1}}));else{const rs=(0,Mn.XG)((0,a.getStateForClientStore)());rs>0&&(0,a.dispatchForClientStore)((0,dt.$E)({windowId:Be.N2,index:rs})),(0,a.dispatchForClientStore)((0,dt.y2)({windowId:Be.N2,entry:{id:yt,ts:Date.now(),teamId:ft,isIA4:!1}}))}const Pn=(0,a.getStoreInstanceByTeamId)(ft),jn=Pn.getState();if(!((Fn=window.history.state)===null||Fn===void 0)&&Fn.isIA4)return;const Qn=(0,st.Gl)(jn);Pn.dispatch((0,Tn.A)({windowId:Be.N2,entry:Qn}))}u(mn,"updateIA4History");var ln=e(235108050);const is=u(rt=>{let{prevTeamId:ft,nextTeamId:yt}=rt;if(ft===yt||!yt)return;const wt=(0,$.W6)("recentlyUsedTeamIds")||ft&&[ft]||[];wt.unshift(yt),(0,$.q9)("recentlyUsedTeamIds",(0,ln.A)(wt)),(0,$.t2)(yt,"mostRecentlyUsedDate",new Date)},"update_recently_used_teams");var ms=e(9399618736),Ts;(function(rt){rt.JA_JP="ja-JP",rt.EN_US="en-US",rt.EN_GB="en-GB",rt.ES_ES="es-ES",rt.ES_LA="es-LA",rt.FR_FR="fr-FR",rt.DE_DE="de-DE",rt.PT_BR="pt-BR",rt.KO_KR="ko-KR",rt.IT_IT="it-IT",rt.ZH_CN="zh-CN",rt.ZH_TW="zh-TW"})(Ts||(Ts={}));const Ps=Ts.EN_US;var ps=e(4423055085),ls=e(9421999304),ys=e(571104883),Ve=e(9907843289),Ct=e(2554594353);function Ke(rt){let{nextTeamId:ft,routeName:yt,params:wt}=rt;ft&&((0,a.dispatchForClientStore)((0,Ct.b)({teamId:ft,routeName:yt,params:wt,fromNavigation:!0})),(0,a.getStoreInstanceByTeamId)(ft)&&(0,a.dispatchForTeamId)(ft,(0,Dn.w)({routeName:yt,params:wt})))}u(Ke,"syncRouteStoreWithUrl");function nt(rt){return Tt.apply(this,arguments)}u(nt,"navigateToLastSavedRoute");function Tt(){return Tt=(0,t.coroutine)(function*(rt){let{prevTeamId:ft,nextTeamId:yt,navigationTimestamp:wt}=rt;const Nt=(0,a.getStateForClientStore)();if(!yt||(0,l.hasWorkspaceFailedToBoot)(Nt,yt)||(0,l.doesWorkspaceNeed2FASetup)(Nt,yt)||(0,l.isWorkspaceExpired)(Nt,yt)||(0,l.isWorkspacePendingAuth)(Nt,yt))return!0;const Fn=(0,a.getStoreInstanceByTeamId)(yt),Pn=Fn&&Fn.getState(),jn=(0,jt.MC)(Pn),Qn=(0,jt.D8)(Pn)||ht._G;if((0,ys.y3)()&&Qn===i.o)return!0;const rs=!ft;return yield(0,o._U)(Qn,{...jn,teamId:yt},{reason:"navigateToLastSavedRoute",shouldReplaceState:rs,navigationTimestamp:wt}),!1}),Tt.apply(this,arguments)}u(Tt,"_navigateToLastSavedRoute");function Lt(rt){let{prevTeamId:ft,nextTeamId:yt}=rt;if(!ft||!yt||ft===yt)return;const wt=Ht(yt);return z.S.resolve((0,ls.xS)(wt,yt)).then(()=>{})}u(Lt,"ensureCorrectLocaleForTeam");function Pt(rt){let{prevTeamId:ft,nextTeamId:yt}=rt;if(!ft||!yt||ft===yt)return;const wt=Ht(yt);if(wt)return(0,ls.zI)(wt)}u(Pt,"ensureCorrectLocaleForExternalLibs");function Ht(rt){const ft=window.location.search.match(/[&?]locale=([a-zA-Z-]*)/),yt=ft?ft[1]:(0,$._z)(rt,"user_locale");return yt&&(0,Ve.YI)(yt)?yt:Ps}u(Ht,"getLocaleForTeam");const nn=(0,q.A)(An);function An(){le.g.set("maybeOpenOtherTeamInBrowser",(0,o.Y8)(gt)),le.g.set("modalListenerBefore",(0,o.Y8)(Qt)),le.g.set("maybeFinishSignin",(0,o.Y8)(It)),le.g.set("maybeRedirectEntity",(0,o.Y8)(Oe)),le.g.set("startTeamSwitchTiming",(0,o.Y8)(Ne.Ay)),le.g.set("navigateToLastSavedRoute",(0,o.Y8)(nt,[i.o])),le.g.set("ensureChannel",(0,o.Y8)(Ge,[])),le.g.set("draftsListenerBefore",(0,o.Y8)(Pe)),le.g.set("ensureCorrectLocaleForExternalLibs",(0,o.Dd)(Pt)),le.g.set("searchPageListener",(0,o.Dd)(Un)),le.g.set("updateIA4History",(0,o.Dd)(mn)),le.g.set("maybeRunTeamSwitchNavigateListeners",(0,o.Dd)(St)),le.g.set("setNavigatedDuringWarmBoot",(0,o.Dd)(es)),le.g.set("pinsPopoverListenerAfter",(0,o.Y8)(Xe)),le.g.set("syncRouteStoreWithUrl",(0,o.Dd)(Ke)),le.g.set("ensureCorrectLocaleForTeam",(0,o.Dd)(Lt)),le.g.set("setShouldLogTeamSwitchMetrics",(0,o.Dd)(ve)),le.g.set("setLocalConfigForTeamWithKey",(0,o.Dd)(Mt)),le.g.set("dismissFloatingSidebar",(0,o.Dd)(Z)),le.g.set("updateRecentlyUsedTeams",(0,o.Dd)(is)),le.g.set("maybeFetchClientPermissions",(0,o.Dd)(xe)),le.g.set("maybeIncrementHistoryLength",(0,o.Dd)(ms.Cu)),le.g.set("setPreviewingFromChannelBrowserOrLaunchpad",(0,o.Dd)(us)),le.g.set("channelCanvasListener",(0,o.Dd)(Ie)),le.g.set("quipActivityHistoryListener",(0,o.Dd)(ot))}u(An,"registerRouteListenersInner"),(0,ps.ul)("router.listeners",()=>[...le.g.entries()]);const _n={syncRouteStoreWithUrl:Ke,navigateToLastSavedRoute:nt,ensureCorrectLocaleForTeam:Lt,ensureCorrectLocaleForExternalLibs:Pt,getLocaleForTeam:Ht};Object.defineProperty(_n,"syncRouteStoreWithUrl",{get:()=>Ke,set:rt=>{Ke=rt}}),Object.defineProperty(_n,"navigateToLastSavedRoute",{get:()=>nt,set:rt=>{nt=rt}}),Object.defineProperty(_n,"ensureCorrectLocaleForTeam",{get:()=>Lt,set:rt=>{Lt=rt}}),Object.defineProperty(_n,"ensureCorrectLocaleForExternalLibs",{get:()=>Pt,set:rt=>{Pt=rt}}),Object.defineProperty(_n,"getLocaleForTeam",{get:()=>Ht,set:rt=>{Ht=rt}});var Gt=e(3245843483);const En=u(()=>({deviceId:Gt.iCQ}),"getSharedTracerTags");var Wn=e(6338445630);const Sn=function(){var rt=(0,t.coroutine)(function*(){Gt.goh.isAvailable()&&(0,Gt.goh)().includes("DisableServiceWorker")&&(yield(0,Wn._E)())});return u(function(){return rt.apply(this,arguments)},"disableServiceWorkerForClientConfig")}(),wn=function(){var rt=(0,t.coroutine)(function*(){(0,ys.X5)()===ys.h5.SAFARI&&(yield(0,Wn._E)())});return u(function(){return rt.apply(this,arguments)},"disableServiceWorkerForSafari")}(),Kn=function(){var rt=(0,t.coroutine)(function*(){yield wn(),yield Sn()});return u(function(){return rt.apply(this,arguments)},"maybeDisableServiceWorker")}();var _s=e(7139225017),Wt=e(844478244),Xn=e(6123258136),Hn=e(1319016163);function ts(rt){return Jn.apply(this,arguments)}u(ts,"setupOtherTeamsToBoot");function Jn(){return Jn=(0,t.coroutine)(function*(rt){let{contextualInfo:ft}=rt;return{contextualInfo:ft,otherTeamsToBoot:(0,Hn.gv)()}}),Jn.apply(this,arguments)}u(Jn,"_setupOtherTeamsToBoot");var Yn=e(5695315324),Vn=e(8148939499),qn=e(723189278),gs=e(4148579738),ss=e(4724591729),ns=e(6968387112),Ss=e(8848660647),Ls=e(7595282574),As=e(3803432550),Us=e(2371143272);Kn(),window.boot_html__initial_boot_duration=Date.now()-window.sonic_boot__phase_1_5__start,window.boot_render_start=Date.now();function Is(rt){return rt.registerConfig({isPersistenceEnabled:!0,isMultiTeamEnabled:(0,pt.VA)()}),rt.registerErrorHandlers(v),rt.registerDynamicImportFns({data:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-data")]).then(e.bind(e,8407863082)),apis:()=>Promise.all([e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-async-client-boot-apis")]).then(e.bind(e,7413259139)),render:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-render")]).then(e.bind(e,4083282710)),deferred:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-deferred")]).then(e.bind(e,6826272268))}),rt.registerInitialApiCalls({experimentData:A.dC,featureFlagData:A.BG,clientBootData:W,viewData:J,allEnterpriseData:ne,featureAccessData:A.jH}),gs.e.register(En),(0,Q.b)(rt),rt.hooks.beforeDynamicImportsStart.tap("Render Placeholder",function(){var ft=(0,t.coroutine)(function*(yt){let{contextualInfo:wt}=yt;return(0,r.Sp)({teamId:wt.teamOrEnterpriseBootId,showTeamSwitcher:(0,Vn.A)().length>1}),{contextualInfo:wt}});return function(yt){return ft.apply(this,arguments)}}()),rt.hooks.afterDynamicImportsStart.tap("Set routes",function(){var ft=(0,t.coroutine)(function*(yt){let{contextualInfo:wt}=yt;return fn(),{contextualInfo:wt}});return function(yt){return ft.apply(this,arguments)}}()),rt.hooks.afterDynamicImportsStart.tap("Set up client store",function(){var ft=(0,t.coroutine)(function*(yt){let{contextualInfo:wt}=yt;return(0,As.x)(wt.teamId),{contextualInfo:wt}});return function(yt){return ft.apply(this,arguments)}}()),rt.hooks.afterDynamicImportsStart.tap("Register route listeners",function(){var ft=(0,t.coroutine)(function*(yt){let{contextualInfo:wt}=yt;return nn(),{contextualInfo:wt}});return function(yt){return ft.apply(this,arguments)}}()),rt.hooks.afterDynamicImportsStart.tap("Update last active team ID in localConfig",function(){var ft=(0,t.coroutine)(function*(yt){let{contextualInfo:wt}=yt;const{teamId:Nt}=wt;return Nt?(Nt!==(0,$.W6)("lastActiveTeamId")&&(0,$.q9)("lastActiveTeamId",Nt),{contextualInfo:wt}):{contextualInfo:wt}});return function(yt){return ft.apply(this,arguments)}}()),rt.hooks.beforeInitializeTeam.tap("Halt further boot if client is reloading",function(){var ft=(0,t.coroutine)(function*(yt){let{contextualInfo:wt}=yt;return window.isReloading?((0,n.pq)("BOOT",`(${wt.teamId}) Ongoing reload detected; Cancelling boot.`),(0,qn.A)()):{contextualInfo:wt}});return function(yt){return ft.apply(this,arguments)}}()),rt.hooks.beforeInitializeTeam.tap("Set tokens",function(){var ft=(0,t.coroutine)(function*(yt){let{contextualInfo:wt}=yt;return(0,Xn.L)({contextualInfo:wt})});return function(yt){return ft.apply(this,arguments)}}()),rt.hooks.beforeInitializeTeam.tap(" Kick off objectStore fetch for minChannelUpdated ",function(){var ft=(0,t.coroutine)(function*(yt){let{contextualInfo:wt}=yt;return(0,D.EZ)()&&(0,O.z6)({teamId:wt.teamId,userId:wt.userId}),{contextualInfo:wt}});return function(yt){return ft.apply(this,arguments)}}()),rt.hooks.setupMultiTeam.tap("Set up all other teams to boot if in multi team mode",ts),rt.run()}if(u(Is,"boot"),!(0,_s.A)()){const rt=(0,Wt.z4)(Yn.Y.CLIENT_V2);if(!(0,Ls.z$)()&&(0,ss.KV)()&&(0,Us.b)()){const ft=e(8904626639);ft.init({dsn:`https://4162106b525941d087e5f8f5e446ae9b@app.${(0,ns.Xk)()}/apps/sentryproxy/5865811`,release:`webapp@${(0,Ss.HF)()}`,defaultIntegrations:!1,integrations:[ft.browserTracingIntegration({enableInp:!0}),ft.browserProfilingIntegration(),ft.httpContextIntegration()],sampleRate:1,tracesSampleRate:1,profilesSampleRate:1,tracePropagationTargets:[],replaysSessionSampleRate:0,replaysOnErrorSampleRate:0})}Is(rt)}const xs={boot:Is}},879418974:(j,p,e)=>{"use strict";e.d(p,{d:()=>a});var t=e(9289081806),n=e(8798294025),s=e(6113051341);function a(c){let{channels:o,selfId:i}=c;const l={};return o.some((_,d)=>{const r=_==null?void 0:_.id;return(0,s.N)(_)?(l.general=r,!0):((0,t.Ur)(_)&&(l.slackbot=r),i&&(0,n.e)(_)===i&&(l.self=r),d||(l.first=r),!1)}),l.general||l.slackbot||l.self||l.first}u(a,"getAnyChannelForRouting")},1460808057:(j,p,e)=>{"use strict";e.d(p,{E:()=>i});var t=e(9706240641),n=e.n(t),s=e(879418974),a=e(8959118205),c=e(9910898937),o=e(6533394955);function i(r){return l.apply(this,arguments)}u(i,"getRouteInfo");function l(){return l=(0,t.coroutine)(function*(r){let{contextualInfo:m,channels:h}=r;const{teamId:v,isForegroundTeam:y}=m,I=(0,o.getStoreInstanceByTeamId)(v),T=(0,c.Gf)({store:I,shouldSetFocus:y});return T||_({contextualInfo:m,channels:h})}),l.apply(this,arguments)}u(l,"_getRouteInfo");function _(r){let{contextualInfo:m,channels:h}=r;const{teamId:v}=m;if(!v)return null;const y=(0,c.lQ)(v);if(y)return y;if(h){const I=m.userId;return d({channels:h,selfId:I})}return null}u(_,"calculateRouteInfo");function d(r){let{channels:m,selfId:h}=r;if(!m.length)return null;const v={routeName:a._G,params:{}},y=(0,s.d)({channels:m,selfId:h});return y&&(v.params.entityId=y),v}u(d,"getRouteFromBootData")},2212859256:(j,p,e)=>{"use strict";e.d(p,{y:()=>c});var t=e(9706702639),n=e(2069372582),s=e(6533394955),a=e(1314103953);function c(o){if(!o)return;const i=(0,s.getStoreInstanceByTeamId)(o);i&&((0,n.pq)("BOOT",`(${o}) Boot complete`),t.g.delete("setNavigatedDuringWarmBoot"),i.dispatch((0,a.b)(!1)),i.dispatch((0,a.k)(!1)))}u(c,"markTeamBootCompleted")},4892637646:(j,p,e)=>{"use strict";e.d(p,{b:()=>i,h:()=>c});var t=e(9706240641),n=e.n(t),s=e(7906695911),a=e(2872463257);function c(d){return o.apply(this,arguments)}u(c,"collectInitialPageLoadMetrics");function o(){return o=(0,t.coroutine)(function*(d){let{contextualInfo:r}=d;const{getTraceMeta:m,isBootingWarm:h,appName:v}=r,{getTracer:y,tags:I}=m(),T=(yield h)?s.H.WARM:s.H.COLD,f=y().createTrace({traceName:s.S.BOOT_INITIAL_LOAD,tags:{boot_type:T,app_name:v,...I},autoCreateRootSpan:!1,samplingOptions:{sampleType:a.nl.ALWAYS}});f.startSpan(s.S.BOOT_INITIAL_LOAD,{setAsRootSpan:!0,startTime:performance.timing.fetchStart,closeTime:window.boot_render_start}),f.startSpan(s.S.BOOT_INITIAL_LOAD_HTML,{startTime:performance.timing.fetchStart,closeTime:performance.timing.fetchStart+window.sonic_boot__phase_1__duration}),f.startSpan(s.S.BOOT_INITIAL_LOAD_JS,{startTime:window.sonic_boot__phase_1_5__start,closeTime:window.sonic_boot__phase_1_5__start+window.boot_html__initial_boot_duration}),y().reportTrace(f)}),o.apply(this,arguments)}u(o,"_collectInitialPageLoadMetrics");function i(d){d.hooks.beforeDynamicImportsStart.addCallIntercept(r=>l(r)),d.hooks.renderApp.addCallIntercept(r=>_(r))}u(i,"setupBootMetricsTracing");function l(d){return r=>{const{getTracer:m,setTrace:h,rootTrace:v}=r.contextualInfo.getTraceMeta(),I=m().createTrace({traceName:s.S.BOOT_TIME_TO_START_RENDER,autoCreateRootSpan:!1,parentSpanId:v.getRootSpanId(),traceId:v.getTraceId()});return I.startSpan(s.S.BOOT_TIME_TO_START_RENDER,{setAsRootSpan:!0,startTimeMs:window.boot_render_start}),h(I),d(r)}}u(l,"startTimeToRenderTrace");function _(d){return function(){var r=(0,t.coroutine)(function*(m){const{isBootingWarm:h,getTraceMeta:v,isForegroundTeam:y}=m.contextualInfo,{getTracer:I,getTrace:T,setTrace:f,rootTrace:g}=v(),M=I(),A=T(),O=(yield h)?s.H.WARM:s.H.COLD;return A.addTags({boot_type:O,is_foreground_team:y}),M.reportTrace(A),f(g),d(m)});return function(m){return r.apply(this,arguments)}}()}u(_,"endTimeToRenderTrace")},7906695911:(j,p,e)=>{"use strict";e.d(p,{H:()=>n,S:()=>t});var t;(function(s){s.BOOT_INITIAL_LOAD="boot:initial_load",s.BOOT_INITIAL_LOAD_HTML="boot:initial_load:html",s.BOOT_INITIAL_LOAD_JS="boot:initial_load:js",s.BOOT_TIME_TO_START_RENDER="boot:time_to_start_render",s.BOOT_TIME_TO_MOUNT_CLIENT="boot:time_to_mount_client"})(t||(t={}));var n;(function(s){s.COLD="cold",s.WARM="warm"})(n||(n={}))},9706702639:(j,p,e)=>{"use strict";e.d(p,{g:()=>t});const t=new Map},1609960255:(j,p,e)=>{"use strict";e.d(p,{A:()=>n});var t=e(7114008777);const n=u(s=>{let{selectedTab:a,unreadsFilterToggleSelected:c,experimentActivityDMsChannelGroupOn:o}=s;return o&&c&&a===t.L.Replies?"chrono_unreads":o&&!c&&a===t.L.Replies?"chrono_reads_and_unreads":c&&a===t.L.Replies?"chrono_threads_unreads":a===t.L.Replies?"chrono_threads_reads_and_unreads":c&&a===t.L.Vip?"chrono_priority_only_unreads_v1":a===t.L.Vip?"chrono_priority_only_reads_and_unreads_v1":o&&c?"experimental_all_chrono_unreads_v1":o&&a===t.L.All?"experimental_all_chrono_reads_and_unreads_v1":c?"chrono_unreads":"chrono_reads_and_unreads"},"getFetchMode")},4577150972:(j,p,e)=>{"use strict";e.d(p,{c:()=>l});var t=e(3398586081),n=e(1609960255),s=e(7114008777),a=e(7156540029),c=e(8352634987),o=e(7912281988),i=e(6533394955);const l=(0,t.A)(function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.L.All,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new c.Ay({storeKey:"activityIA4",fetch:r=>(0,i.dispatchForTeamId)(r,(0,o.Q)({limit:a.Q1,filter:_,fetchNew:!0,mode:(0,n.A)({selectedTab:_,unreadsFilterToggleSelected:d})})),isEnabled:()=>!0,metricsName:"activity",markStaleAfterSlowReconnect:()=>!0})})},1247361162:(j,p,e)=>{"use strict";e.d(p,{$T:()=>g,ES:()=>_,Eg:()=>h,Gt:()=>I,KD:()=>v,cJ:()=>f,f7:()=>T,gW:()=>y,mt:()=>O,om:()=>A,rz:()=>d,sG:()=>r,ut:()=>m,yC:()=>M,yN:()=>D});var t=e(7114008777),n=e(6695353875),s=e(4577150972),a=e(5921578648),c=e(9829579108),o=e(8847766420);const i=u((E,C)=>{var S,b;const k=(0,n.kz)(C),W=(0,a.S)({filter:E,isUnreadMode:!!(!(C==null||(S=C.activityIA4)===null||S===void 0)&&S.filterUnreads),isFilteringRevampToggledOn:k});return(b=C.activityIA4)===null||b===void 0?void 0:b[W]},"getActivityListForFilter"),l=(0,c.Ay)(E=>{var C,S,b;const k=(0,o.ZT)(E),W=(C=E.activityIA4)===null||C===void 0?void 0:C.all;return((E==null||(S=E.activityIA4)===null||S===void 0?void 0:S.selectedTabId)===t.L.All||!(!(E==null||(b=E.activityIA4)===null||b===void 0)&&b.selectedTabId))&&(W!=null&&W.length)&&(0,s.c)(t.L.All,!1).maybeRefetch(k,t.N),E&&E.activityIA4&&W});l.meta={name:"createSelector",key:"createSelectorgetReadAndUnreadActivityList",description:E=>{var C,S,b;const k=(0,o.ZT)(E),W=(C=E.activityIA4)===null||C===void 0?void 0:C.all;return((E==null||(S=E.activityIA4)===null||S===void 0?void 0:S.selectedTabId)===t.L.All||!(!(E==null||(b=E.activityIA4)===null||b===void 0)&&b.selectedTabId))&&(W!=null&&W.length)&&(0,s.c)(t.L.All,!1).maybeRefetch(k,t.N),E&&E.activityIA4&&W}};const _=(0,c.Ay)(E=>{var C,S;const b=(0,o.ZT)(E),k=i(t.L.All,E);if(((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.All||!(!(E==null||(S=E.activityIA4)===null||S===void 0)&&S.selectedTabId))&&(k!=null&&k.length)){var W;(0,s.c)(t.L.All,(W=E.activityIA4)===null||W===void 0?void 0:W.filterUnreads).maybeRefetch(b,t.N)}return E&&E.activityIA4&&k});_.meta={name:"createSelector",key:"createSelectorgetActivityList",description:E=>{var C,S;const b=(0,o.ZT)(E),k=i(t.L.All,E);if(((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.All||!(!(E==null||(S=E.activityIA4)===null||S===void 0)&&S.selectedTabId))&&(k!=null&&k.length)){var W;(0,s.c)(t.L.All,(W=E.activityIA4)===null||W===void 0?void 0:W.filterUnreads).maybeRefetch(b,t.N)}return E&&E.activityIA4&&k}};const d=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Mentions,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Mentions&&b.length){var k;(0,s.c)(t.L.Mentions,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b});d.meta={name:"createSelector",key:"createSelectorgetActivityListMentions",description:E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Mentions,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Mentions&&b.length){var k;(0,s.c)(t.L.Mentions,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b}};const r=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Replies,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Replies&&b.length){var k;(0,s.c)(t.L.Replies,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b});r.meta={name:"createSelector",key:"createSelectorgetActivityListReplies",description:E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Replies,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Replies&&b.length){var k;(0,s.c)(t.L.Replies,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b}};const m=(0,c.Ay)(E=>{var C,S,b;const k=(0,o.ZT)(E),W=i(t.L.Reactions,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Reactions&&(!(E==null||(S=E.activityIA4)===null||S===void 0||(b=S.reactions)===null||b===void 0)&&b.length)){var N;(0,s.c)(t.L.Reactions,(N=E.activityIA4)===null||N===void 0?void 0:N.filterUnreads).maybeRefetch(k,t.N)}return E&&E.activityIA4&&W});m.meta={name:"createSelector",key:"createSelectorgetActivityListReactions",description:E=>{var C,S,b;const k=(0,o.ZT)(E),W=i(t.L.Reactions,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Reactions&&(!(E==null||(S=E.activityIA4)===null||S===void 0||(b=S.reactions)===null||b===void 0)&&b.length)){var N;(0,s.c)(t.L.Reactions,(N=E.activityIA4)===null||N===void 0?void 0:N.filterUnreads).maybeRefetch(k,t.N)}return E&&E.activityIA4&&W}};const h=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E);if(!(E==null||(C=E.activityIA4)===null||C===void 0)&&C.filterUnreads){var b;(0,s.c)(t.L.Unreads,(b=E.activityIA4)===null||b===void 0?void 0:b.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&E.activityIA4.unreads});h.meta={name:"createSelector",key:"createSelectorgetActivityListUnreads",description:E=>{var C;const S=(0,o.ZT)(E);if(!(E==null||(C=E.activityIA4)===null||C===void 0)&&C.filterUnreads){var b;(0,s.c)(t.L.Unreads,(b=E.activityIA4)===null||b===void 0?void 0:b.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&E.activityIA4.unreads}};const v=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Apps,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Apps&&b.length){var k;(0,s.c)(t.L.Apps,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b});v.meta={name:"createSelector",key:"createSelectorgetActivityListApps",description:E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Apps,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Apps&&b.length){var k;(0,s.c)(t.L.Apps,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b}};const y=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Channels,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Channels&&b.length){var k;(0,s.c)(t.L.Channels,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b});y.meta={name:"createSelector",key:"createSelectorgetActivityListChannels",description:E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Channels,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Channels&&b.length){var k;(0,s.c)(t.L.Channels,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b}};const I=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Priority,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Priority&&b.length){var k;(0,s.c)(t.L.Priority,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b});I.meta={name:"createSelector",key:"createSelectorgetActivityListPriority",description:E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Priority,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Priority&&b.length){var k;(0,s.c)(t.L.Priority,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b}};const T=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Vip,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Vip&&b.length){var k;(0,s.c)(t.L.Vip,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b});T.meta={name:"createSelector",key:"createSelectorgetActivityListVip",description:E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Vip,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Vip&&b.length){var k;(0,s.c)(t.L.Vip,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b}};const f=(0,c.Ay)(E=>E&&E.activityIA4&&E.activityIA4.unreadVip);f.meta={name:"createSelector",key:"createSelectorgetActivityListUnreadVip",description:E=>E&&E.activityIA4&&E.activityIA4.unreadVip};const g=(0,c.Ay)(E=>E&&E.activityIA4&&E.activityIA4.unreadOther);g.meta={name:"createSelector",key:"createSelectorgetActivityListUnreadOther",description:E=>E&&E.activityIA4&&E.activityIA4.unreadOther};const M=(0,c.Ay)(E=>E&&E.activityIA4&&E.activityIA4.other);M.meta={name:"createSelector",key:"createSelectorgetActivityListOther",description:E=>E&&E.activityIA4&&E.activityIA4.other};const A=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.EverythingElse,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.EverythingElse&&b.length){var k;(0,s.c)(t.L.EverythingElse,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b});A.meta={name:"createSelector",key:"createSelectorgetActivityListEverythingElse",description:E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.EverythingElse,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.EverythingElse&&b.length){var k;(0,s.c)(t.L.EverythingElse,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b}};const O=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.DMS,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.DMS&&b.length){var k;(0,s.c)(t.L.DMS,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b});O.meta={name:"createSelector",key:"createSelectorgetActivityListDms",description:E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.DMS,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.DMS&&b.length){var k;(0,s.c)(t.L.DMS,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b}};const D=(0,c.Ay)(E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Invitations,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Invitations&&(b!=null&&b.length)){var k;(0,s.c)(t.L.Invitations,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b});D.meta={name:"createSelector",key:"createSelectorgetActivityListInvitations",description:E=>{var C;const S=(0,o.ZT)(E),b=i(t.L.Invitations,E);if((E==null||(C=E.activityIA4)===null||C===void 0?void 0:C.selectedTabId)===t.L.Invitations&&(b!=null&&b.length)){var k;(0,s.c)(t.L.Invitations,(k=E.activityIA4)===null||k===void 0?void 0:k.filterUnreads).maybeRefetch(S,t.N)}return E&&E.activityIA4&&b}}},5921578648:(j,p,e)=>{"use strict";e.d(p,{S:()=>s});var t=e(5235917009),n=e(7114008777);const s=u(a=>{let{filter:c,isUnreadMode:o,isFilteringRevampToggledOn:i,mode:l}=a;return l==="chrono_priority_only_unreads_v1"?o?"unreadVip":"vip":l==="chrono_priority_everything_else_reads_and_unreads_v1"?"other":l==="chrono_priority_everything_else_unreads_v1"?"unreadOther":c===n.L.Reactions?c:o&&c===n.L.EverythingElse?`unread${c.charAt(0).toUpperCase()+c.slice(1)}`:o&&i?`unread${(0,t.A)(c)}`:!i&&o?"unreads":c},"getFilterForSelectedMode")},7912281988:(j,p,e)=>{"use strict";e.d(p,{Q:()=>S});var t=e(3290693121),n=e(7114008777),s=e(6422693406),a=e(9694536345),c=e(9648131521),o=e(3622175906),i=e(169770637),l=e(4875732686),_=e(796111729),d=e(3855029223),r=e(6695353875),m=e(9006747218),h=e(4577150972),v=e(5921578648),y=e(6845763719),I=e(5728184452),T=e(1031947056),f=e(8847766420),g=e(3694676182),M=e(1496122061),A=e(6111266013),O=e(2479677519),D=e(1392261213),E=e(3683482182);const C={"action-items":!0},S=(0,T.Ay)("Fetch user activity",function(b,k){let{limit:W,filter:N,mode:V,fetchNew:R,isUnreadMode:P,isInbox:z,types:$}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{limit:20,mode:"chrono_reads_and_unreads",filter:n.L.All,isInbox:!1};b((0,m.G3)(!0));const x=k(),Y=(0,f.ZT)(x),ne=(0,y.F)(x),re=(0,y.S1)(x),_e=(0,y.d5)(x),G=(0,y.hT)(x),ge=(0,l.y)(x),oe=(0,r.UU)(x),me=(0,r.kz)(x),ue=(0,t.a)(x),ae=(0,r.zu)(x),he=(0,v.S)({filter:N,isUnreadMode:P!==void 0?P:G,isFilteringRevampToggledOn:me,mode:V}),ce=ne==null?void 0:ne[he],ee=$||(0,I.TO)(he,{experimentBundleAppsActivityWithBEGroupOn:oe,isInbox:z,mode:V});return C!=null&&C[N]||!R&&!ce?(b((0,m.G3)(!1)),s.S.resolve()):((0,h.c)(N,G).markObjectsAsFresh(Y,[n.N]),b((0,c.X)({limit:W,reason:"fetchActivityFeed",types:ee,mode:V,cursor:R?void 0:ce,isInbox:z})).then(J=>{var X;if(!J.items)return;if(b((0,m.bl)({nextCursor:J==null||(X=J.response_metadata)===null||X===void 0?void 0:X.next_cursor,items:J.items,filter:he,refreshItems:(ue||ae)&&R})),V==="chrono_unreads"){const L=(0,y.cJ)(k()),K=(0,E.xY)(k());J.items.length!==L&&b((0,a.O)()).then(B=>{b((0,g.Q7)(B));const Q=(0,d.E)({state:x}),q=(0,_.Ay)({getState:k,label:"ACTIVITY_BADGING"});try{const le=Q.createSpan({name:"ia4client_activity_badge:mismatch",samplingOptions:{sampleType:i.tS.ALWAYS},options:{tags:{num_unread_activity_items:J.items.length,old_activity_badge_count:L,new_channel_badges:JSON.stringify(B.channelBadges),old_channel_badges:JSON.stringify(K)}}});le.close(),Q.reportSpans([le]),q.info(`Activity badge mismatch. number of unread activity.feed items: ${J.items.length} activityBadgeCount: ${L}: counts.channelBadges: ${JSON.stringify(B==null?void 0:B.channelBadges)} old channelBadges: ${JSON.stringify(K)}`)}catch{}})}const F="slack-connect-fetch-invites-for-activity-feed";if(R&&!re&&["all","invitations","unreadAll","unreadInvitations"].includes(N)&&J.items.some(L=>{let{item:K}=L;return I.Oi.includes(K.type)})){const L=b((0,A.p)({direction:o.D.Incoming,reason:F})),K=ge?b((0,D.A)({reason:F})):s.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});s.S.all([L,K]).then(()=>b((0,m.xv)(!0)))}if(R&&!_e&&["all","invitations","unreadAll","unreadInvitations"].includes(N)){const L=b((0,M.d)({reason:F})),K=ge?b((0,O.A)({reason:F})):s.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});s.S.all([L,K]).then(()=>b((0,m.ae)(!0)))}}).finally(()=>b((0,m.G3)(!1))))});S.meta={name:"createThunk",key:"createThunkfetchActivityFeed",description:"Fetch user activity"}},5728184452:(j,p,e)=>{"use strict";e.d(p,{Oi:()=>n,TO:()=>c,b8:()=>o});var t=e(6626377467);const n=["external_channel_invite","shared_workspace_invite","external_dm_invite"],s=["at_user","at_user_group","at_channel","at_everyone","keyword","list_record_assigned","list_user_mentioned"],a=["at_user","at_user_group","at_channel","at_everyone","keyword"],c=u((i,l)=>{let{experimentBundleAppsActivityWithBEGroupOn:_,isInbox:d,mode:r}=l;const m=_?"bot_dm_bundle":"bot_dm";let h=["thread_reply","message_reaction","internal_channel_invite","list_record_edited",m,...s,...n];const v=i.toLowerCase();if(!(r==="experimental_all_chrono_unreads_v1"||r==="experimental_all_chrono_reads_and_unreads_v1"||r==="experimental_priority_unreads_v1"||r==="experimental_everything_else_reads_and_unreads_v1"||r==="experimental_everything_else_unreads_v1"))return(r==="chrono_priority_only_reads_and_unreads_v1"||r==="chrono_priority_only_unreads_v1")&&(h=a),v.includes("mentions")&&(h=s),v.includes("apps")&&(h=[m]),v.includes("replies")&&(h=void 0),d&&v.includes("replies")&&(h=["experimental_thread"]),v.includes("reactions")&&(h=["message_reaction"]),v.includes("unreads")&&(h=[m,"thread_reply","internal_channel_invite",...s,...n]),v.includes("invitations")&&(h=["internal_channel_invite",...n]),d&&v.includes("channels")&&(h=["experimental_channels"]),d&&v.includes("dms")&&(h=["experimental_dms"]),d&&h&&(v.includes("all")||v.includes("unreads"))&&(h.push("experimental_dms"),h.push("experimental_channels")),h},"getActivityTypes"),o=u(i=>{let{items:l}=i;return(0,t.A)(l,_=>{let{messageTs:d,type:r,threadTs:m,channelId:h,invite:v,key:y}=_;return r==="message_reaction"?`reaction-${d}`:r==="thread_reply"||r==="experimental_thread"?`thread-${m}`:r==="external_channel_invite"?`external-channel-invite-${v}`:r==="external_dm_invite"?`external-dm-invite-${v}`:r==="shared_workspace_invite"?`shared-workspace-invite-${v}`:r==="im"?`im${h}`:r==="experimental_dms"?`im${h}`:r==="experimental_channels"?`im${h}`:y!==void 0?`item-by-feed-key-${y}`:`mention-${d}`})},"getUniqueActivityItems")},2051872845:(j,p,e)=>{"use strict";e.d(p,{A:()=>gl});var t=e(1416482128),n=e(7763652800),s=e(796111729),a=e(4423055085),c=e(4724591729),o=e(8520727613),i=e(2791814261),l=e(1535672935),_=e(1031947056),d=e(6776011876),r=e(6533394955);const m=(0,_.Ay)("maybeDisableDebugger side effect handler",()=>{if((0,c.Yj)()||(0,c.Cu)()||(0,c.$i)())return;const Ee=(0,r.getStateForClientStore)();if((0,i.c)()&&!(0,o.A)(Ee,"disable_tinyspeck_slackdebug_enforcement","treatment")){(0,a.Jb)();return}(0,a.CP)()||(0,a.YF)()});m.meta={name:"createThunk",key:"createThunkmaybeDisableDebugger",description:"maybeDisableDebugger side effect handler"};const h=(0,d.kt)([l.setDidBootAllWorkspaces],m);var v=e(3571452446),y=e(3245843483),I;(function(Ee){Ee.DOGFOOD="dogfood",Ee.BETA="beta",Ee.PROD="prod"})(I||(I={}));var T;(function(Ee){Ee.BETA="beta",Ee.PROD="prod"})(T||(T={}));const f=u(Ee=>Ee!==I.PROD,"isPreRelease");var g;(function(Ee){Ee.NIGHTLY="nightly",Ee.ALPHA="alpha",Ee.ETA="eta",Ee.PILOT="pilot",Ee.BETA="beta",Ee.PROD="prod"})(g||(g={}));var M;(function(Ee){Ee.BETA="beta",Ee.PROD="prod"})(M||(M={}));const A=[g.ALPHA,g.ETA,g.BETA,g.PILOT,g.PROD],O=u(Ee=>Ee!==g.PROD,"release_channels_4_31_0_isPreRelease");var D=e(1583163054),E=e(571104883),C=e(4096483543),S=e(9012396182),b=e(3677514771);const k=(0,_.Ay)("maybeSetReleaseChannelOverrideHandler",(Ee,ie,ye)=>{!(0,E.y3)()||!(0,y.g9M)()||V(ie)});k.meta={name:"createThunk",key:"createThunkmaybeSetReleaseChannelOverrideHandler",description:"maybeSetReleaseChannelOverrideHandler"};const W=(0,d.kt)([l.setDidBootAllWorkspaces],k),N="nightly-promotion-state";function V(Ee){const ie=(0,y.oQe)("environment","releaseChannel"),ye=(0,y.oQe)("settings","releaseChannelOverride");let Se=ye;if(!Se&&(ie==="beta"||ie==="alpha")&&(Se=ie),Se==="eta"&&(Se=I.BETA),(0,C.A)()&&(0,E.dY)("4.31.150")){const Ze=Ee();if((0,o.A)(Ze,"ssb_dogfood_automatic_promotion","on")&&(0,i.c)()&&Se!==D.zS)try{window.localStorage.getItem(N)!=="2"&&(Se=D.zS,window.localStorage.setItem(N,"1"))}catch{}Se==="alpha"&&(Se=I.BETA)}Se!==ye&&((0,y.cGU)({name:"releaseChannelOverride",value:Se}),y.NjF.cache&&y.NjF.cache.clear())}u(V,"maybeSetReleaseChannelOverride");const R=["domain","enterprise_id","enterprise_name","id","icon","name","url","variant"],P=(0,_.Ay)("Sync workspaces state with desktop",(Ee,ie)=>{if(!(0,E.y3)())return;const ye=ie(),Se=(0,S.getBootedWorkspaces)(ye),Ze=(0,S.getAllWorkspaces)(ye);var $e;const Dt=($e=(0,S.getWorkspacesMeta)(ye))!==null&&$e!==void 0?$e:{},Je=Se==null?void 0:Se.reduce((qt,kn)=>{const $n=(0,r.getStateByTeamId)(kn),an={...(0,b._J)($n,kn,!1),...Dt==null?void 0:Dt[kn]};return qt[kn]={...(0,v.A)(an,R),order:Ze.indexOf(kn)},qt},{});(0,y.CIW)(Je)});P.meta={name:"createThunk",key:"createThunksyncWorkspacesToDesktop",description:"Sync workspaces state with desktop"};const z=(0,_.Ay)("Sync workspaces state with desktop when a new team has booted",(Ee,ie)=>{if(!(0,E.y3)())return;const ye=ie();(0,S.didBootAllWorkspaces)(ye)&&Ee(P())});z.meta={name:"createThunk",key:"createThunksyncWorkspacesToDesktopOnAdditionalTeamBoot",description:"Sync workspaces state with desktop when a new team has booted"};const $=(0,d.kt)([l.setDidBootAllWorkspaces,l.setWorkspaceOrder],P),x=(0,d.kt)([l.setWorkspaceBooted],z);var Y=e(4932704503),ne=e(1378315125);const re="DESKTOP-SIDE-EFFECT",_e=(0,_.Ay)("logUpdateFromDesktop",(Ee,ie,ye)=>{(0,s.Wo)().info(re,"Update from desktop for keys ",Object.keys(ye.payload))});_e.meta={name:"createThunk",key:"createThunklogUpdateFromDesktop",description:"logUpdateFromDesktop"};const G=(0,d.kt)([ne.Ez],_e),ge=(0,_.Ay)("maybeHandleWindowFocusEvent",(Ee,ie,ye)=>{(0,C.A)()&&ye.payload&&ye.payload.windows&&Ee((0,Y.pz)({isFocused:document.hasFocus()}))});ge.meta={name:"createThunk",key:"createThunkmaybeHandleWindowFocusEvent",description:"maybeHandleWindowFocusEvent"};const oe=(0,d.kt)([ne.Ez],ge);var me=e(3398586081),ue=e(8646192222),ae=e(8439865561),he=e(5105455463);(0,me.A)(()=>{if((0,ue.Nu)())try{window.matchMedia(he.og).onchange=Ee=>{const ie=(0,r.getClientStoreInstance)();ie&&ie.dispatch((0,ae.N)(Ee.matches))}}catch(Ee){(0,s.Wo)().warn("ACCESSIBILITY-STORE","window.matchMedia hook failed; system high contrast theme will not be updated.",Ee)}})();const ee=(0,_.Ay)("maybeUpdateShouldUseHighContrastColors",(Ee,ie,ye)=>{if(!(0,ue.Nu)()&&(0,ue.hk)()){var Se,Ze;const $e=ye==null||(Se=ye.payload)===null||Se===void 0||(Ze=Se.settings)===null||Ze===void 0?void 0:Ze.shouldUseHighContrastColors;$e!==void 0&&Ee((0,ae.N)($e))}});ee.meta={name:"createThunk",key:"createThunkmaybeUpdateShouldUseHighContrastColors",description:"maybeUpdateShouldUseHighContrastColors"};const J=(0,d.kt)([ne.Ez],ee);var X=e(1703559452),F=e(8170643398),L=e(6839188756),K=e(3270010894),B=e(6449156268),Q=e(8276911661),q=e(9733150292);const le=(0,me.A)(()=>{const Ee=Object.values((0,r.getStoreInstanceMap)());let ie=0,ye=0;return(0,X.A)(Ee,Se=>{if(!Se)return!1;const Ze=Se.getState(),$e=(0,Q.cA)(Ze),Dt=(0,F.yF)($e),Je=Dt&&(0,K.KR)((0,B.A)().toDate(),B.A.unix(Dt).toDate());return Je&&Je>30&&(ye+=1),(0,L.qR)((0,b.H7)(Ze))&&(ie+=1),ie>1&&ye>0})}),Te=u(()=>{(0,q.q9)("hasSeenWorkspaceSwitcherAwareness",!0)},"markWorkspaceSwitcherAwarenessAsSeen"),Ie=u(()=>(0,q.W6)("hasSeenWorkspaceSwitcherAwareness"),"hasSeenWorkspaceSwitcherAwareness"),De=u(()=>le(),"isEligibleForWorkspaceSwitcherAwareness");var pe=e(4766735965),fe=e(6290537170);const Z=(0,_.Ay)("Opens workspace switcher if the user is part of experiment",(Ee,ie)=>{const ye=ie();(0,E.y3)()&&!Ie()&&!(0,fe.v8)(ye)&&De()&&(Ee((0,pe.A)()),Te())});Z.meta={name:"createThunk",key:"createThunkmaybeToggleWorkspaceSwitcherForAwarenessThunk",description:"Opens workspace switcher if the user is part of experiment"};const se=(0,d.kt)([l.setDidBootAllWorkspaces],Z);var Ae=e(6766954308),Ce=e(2633701976),Le=e(2047021170);const Ue=(0,_.Ay)("Transition the a11y_read_out_incoming_dm user pref to its new corresponding client pref",(Ee,ie)=>{var ye;const Se=ie(),Ze=(0,S.getFocusedWorkspace)(Se),$e=(0,r.getStoreInstanceByTeamId)(Ze),Dt=$e==null||(ye=$e.getState)===null||ye===void 0?void 0:ye.call($e);if(!Dt||(0,Ae.gR)(Se)!==void 0)return;const qt=(0,Le.ty)(Dt,"a11y_read_out_incoming_dm");if(qt!==void 0){Ee((0,Ce.p)(qt));return}Ee((0,Ce.p)(!0))});Ue.meta={name:"createThunk",key:"createThunkmaybeMigrateDmAnnouncementPref",description:"Transition the a11y_read_out_incoming_dm user pref to its new corresponding client pref"};const Pe=(0,d.kt)([l.setDidBootAllWorkspaces],Ue);var He=e(2517531287);const Qe=(0,_.Ay)("Transition the a11y_play_sound_for_incoming_dm_choice and a11y_play_sound_for_sent_dm_choice user prefs to their new corresponding client prefs",(Ee,ie)=>{var ye;const Se=ie(),Ze=(0,S.getFocusedWorkspace)(Se),$e=(0,r.getStoreInstanceByTeamId)(Ze),Dt=$e==null||(ye=$e.getState)===null||ye===void 0?void 0:ye.call($e);if(!Dt)return;if((0,Ae.u$)(Se)===""){const kn=(0,Le.ty)(Dt,"a11y_play_sound_for_incoming_dm_choice"),$n=kn??"";Ee((0,He.R)($n))}if((0,Ae.kd)(Se)===""){const kn=(0,Le.ty)(Dt,"a11y_play_sound_for_sent_dm_choice"),$n=kn??"";Ee((0,He.r)($n))}});Qe.meta={name:"createThunk",key:"createThunkmaybeMigrateDmSoundPrefs",description:"Transition the a11y_play_sound_for_incoming_dm_choice and a11y_play_sound_for_sent_dm_choice user prefs to their new corresponding client prefs"};const lt=(0,d.kt)([l.setDidBootAllWorkspaces],Qe);var qe=e(6422693406),ct=e(3297051565),tt=e.n(ct),it=e(9113979368),Ge=e(5257368278),We=e(1269227002),xe=e(9829579108);const ze=(0,xe.Ay)(Ee=>Ee&&Ee.persistedApiCalls);ze.meta={name:"createSelector",key:"createSelectorgetPersistedApiCalls",description:Ee=>Ee&&Ee.persistedApiCalls};var mt=e(4294892493),pt=e(1874577777);const It="OFFLINE",bt=(0,Ge.A)("Replay persisted API calls",function(Ee,ie){let ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ze(ie());const Se=ie();if(!(0,pt.A)(Se)||(0,it.A)(ye))return;const Ze=(0,s.Ay)({state:Se});Ze.info(It,"replayPersistedApiCalls called after workspace booted");const $e=Object.keys(ye).sort().map(Dt=>ye[Dt]);qe.K.each($e,Dt=>Ee((0,We.apiCall)(Dt)).catch(Je=>{Ze.error(It,`Error replaying ${Dt.method} (${Dt.persistKey})`,Je)}).finally(()=>{Ze.info(It,`Clearing persisted payload for ${Dt.method} (${Dt.persistKey})`),Ee((0,mt.M)(Dt.persistKey))}))});bt.meta={name:"createFetcher",key:"createFetcherreplayPersistedApiCalls",description:"Replay persisted API calls"},bt.propTypes=tt().object;const gt=(0,_.Ay)("triggerReplayPersistedApiCalls",(Ee,ie,ye)=>{const Se=ye.payload;(0,r.dispatchForTeamId)(Se,bt())});gt.meta={name:"createThunk",key:"createThunktriggerReplayPersistedApiCalls",description:"triggerReplayPersistedApiCalls"};const ht=(0,d.kt)([l.setWorkspaceBooted],gt);var Zt=e(859310680),rn=e(3855029223),zt=e(2872463257);const In=(0,_.Ay)("recordExperimentGroupsAsTrace side effect handler",(Ee,ie,ye)=>{const Se=(0,r.getStateForClientStore)(),Ze=(0,S.getBootedWorkspaces)(Se)||[];try{const $e=zt.nl.ALWAYS;Ze.forEach(Dt=>{const Je=(0,r.getStateByTeamId)(Dt),qt=(0,Zt.xy)(Je),kn=JSON.stringify(qt),$n=(0,rn.E)({state:Je}),hs=$n.createSpan({name:"experiment_groups",options:{tags:{experiment_groups:kn}},samplingOptions:{sampleType:$e}});hs.close(),$n.reportSpans([hs])})}catch($e){(0,s.Wo)().warn("BOOT-TEAM","could not report experiment groups in trace",$e)}});In.meta={name:"createThunk",key:"createThunkrecordExperimentGroupsAsTrace",description:"recordExperimentGroupsAsTrace side effect handler"};const cn=(0,d.kt)([l.setDidBootAllWorkspaces],In);var Jt=e(5613323535);const dn=(0,_.Ay)("setAutoTracerTagProvider side effect handler",(Ee,ie,ye)=>{Jt.LI.isEnabled()&&Jt.LI.setTagProvider(Se=>Se?(0,Zt.go)(Se):{})});dn.meta={name:"createThunk",key:"createThunksetAutoTracerTagProvider",description:"setAutoTracerTagProvider side effect handler"};const sn=(0,d.kt)([l.setDidBootAllWorkspaces],dn);var Xt=e(3317091632),xt=e(3530725200),en=e(7446225280),un=e(6244014364),yn=e(56548687),ut=e(268083624),Ot=e(5795074931);const kt=(0,_.Ay)("Clog experiment related meta data for session toggles",(Ee,ie,ye)=>{let{experimentNames:Se}=ye;const Ze=(0,ut.v8)(ut.i$),$e=(0,y.sST)(),Dt=(0,r.getClientStoreInstance)(),Je=(0,S.getBootedWorkspaces)(Dt.getState()),qt=Je.join(","),kn=Je.map($n=>{var hs;const an=(hs=(0,r.getStoreInstanceByTeamId)($n))===null||hs===void 0?void 0:hs.getState();return(0,Ot.WR)(an)}).join(",");Se.forEach($n=>{const hs=(0,xt.B9)($n);(hs===en.dw.Control||hs===en.dw.Treatment||hs===en.dw.On)&&(0,yn.e)().track(un.EventId.CLIENT_SESSION_TOGGLE_CLOG,{contexts:{experimentName:$n,experimentGroup:hs,teamIds:qt,userIds:kn,visitorCookie:Ze,clientId:$e}})})});kt.meta={name:"createThunk",key:"createThunkclogDataForSessionToggles",description:"Clog experiment related meta data for session toggles"};var be=e(306687250),Kt=e(5320724941),Vt=e(9681594967),on=e(2325478352),pn=e(9272190578),et=e(7002741921),At=e(6209625934),Rt=e(4761125736);function Ft(Ee,ie){const ye=Object.values((0,r.getStoreInstanceMap)());for(const Se of ye){if(!Se)continue;const Ze=Se.getState(),$e=(0,Rt.KK)(Ze,Ee);$e&&$e.log_exposures&&ie===$e.group&&(0,At.K)(Ee,$e,Ze)}}u(Ft,"logExposuresForSession");function $t(Ee,ie){if((0,en.SC)(Ee),ie)try{ie()}catch(ye){(0,s.Wo)().error(`caught error from cleanupCallback: ${ye}`)}}u($t,"rollbackToggle");function vn(Ee){let{toggleName:ie,toggleGroup:ye}=Ee;return(0,et.A)(ie,ye,!1)}u(vn,"defaultToggleGroupMatcher");function Rn(Ee,ie){var ye;const Se=(ye=ie==null?void 0:ie.customToggleGroupMatcher)!==null&&ye!==void 0?ye:vn,Ze=(0,en.M_)(Ee),$e=hn(Ee,Ze,Se);if(Ze===null&&$e!==en.dw.NoGroup){(0,en.jc)(Ee,$e);return}$e===en.dw.NoGroup?Ze===en.dw.Treatment||Ze===en.dw.On?($t(Ee,ie==null?void 0:ie.cleanupCallback),(0,pn.As)({reason:`Rolling back ${Ee} toggle`,reasonKey:`rollback_${Ee}_toggle`})):(Ze===en.dw.Control||Ze===en.dw.Off)&&$t(Ee,ie==null?void 0:ie.cleanupCallback):$e!==Ze?(0,en.jc)(Ee,$e):$e===Ze&&Ft(Ee,Ze)}u(Rn,"setToggleGroupForNextSession");function hn(Ee,ie,ye){const Se=ye({toggleName:Ee,toggleGroup:en.dw.Treatment}),Ze=ye({toggleName:Ee,toggleGroup:en.dw.Control}),$e=ye({toggleName:Ee,toggleGroup:en.dw.On}),Dt=ye({toggleName:Ee,toggleGroup:en.dw.Off});return Se&&Ze?ie===en.dw.Treatment?en.dw.Treatment:ie===en.dw.Control?en.dw.Control:Math.random()<.5?en.dw.Treatment:en.dw.Control:$e&&Dt?ie===en.dw.On?en.dw.On:ie===en.dw.Off?en.dw.Off:Math.random()<.5?en.dw.On:en.dw.Off:Se?en.dw.Treatment:Ze?en.dw.Control:$e?en.dw.On:Dt?en.dw.Off:en.dw.NoGroup}u(hn,"getCurrentToggleGroup");const gn={getCurrentToggleGroup:hn};(0,a.ul)("setToggleGroupForNextSession",Ee=>Rn(Ee));var Cn=e(2371143272);const fn=u(()=>{try{Vt.qV.deleteDatabase()}catch(Ee){Vt.qV.getLogger().error(`caught error from deleteDatabase: ${Ee}`)}},"objectStoreCallback"),Oe={[on.Wv]:{cleanupCallback:fn},[Kt.f]:{},[be.z]:{},[Xt.n]:{},[Cn.i]:{}},ke=(0,_.Ay)("setToggleGroupsForNextSession",(Ee,ie,ye)=>{Ee(kt({experimentNames:Object.keys(Oe)})),Object.entries(Oe).forEach(Se=>{let[Ze,$e]=Se;Rn(Ze,$e)})});ke.meta={name:"createThunk",key:"createThunksetToggleGroupsForNextSession",description:"setToggleGroupsForNextSession"};const je=(0,d.kt)([l.setDidBootAllWorkspaces],ke);var Be=e(4250409994),st=e(2766373332);const St=(0,_.Ay)("maybeToggleGlobalMuteShortcutHandler",(Ee,ie,ye)=>(0,st.N$)(ye.payload));St.meta={name:"createThunk",key:"createThunkmaybeToggleGlobalMuteShortcutHandler",description:"maybeToggleGlobalMuteShortcutHandler"};const Yt=(0,d.kt)([Be.Bk],St);var tn=e(8365110903),at=e(25586007);const Et=(0,_.Ay)("Transition the up_to_browse_kb_shortcut user pref to the new client pref",(Ee,ie)=>{var ye;const Se=ie(),Ze=(0,S.getFocusedWorkspace)(Se),$e=(0,r.getStoreInstanceByTeamId)(Ze),Dt=$e==null||(ye=$e.getState)===null||ye===void 0?void 0:ye.call($e);if(!Dt||(0,Ae.jX)(Se)!==void 0)return;const qt=(0,Le.ty)(Dt,"up_to_browse_kb_shortcut"),{LIST:kn,EDIT:$n}=at.v,hs=qt?kn:$n;Ee((0,tn.T)(hs))});Et.meta={name:"createThunk",key:"createThunkmaybeTransitionUpToBrowsePreference",description:"Transition the up_to_browse_kb_shortcut user pref to the new client pref"};const _t=(0,d.kt)([l.setWorkspaceBooted],Et),Bt=(0,_.Ay)("updateLocalConfigOrderedTeamIds side effect handler",(Ee,ie,ye)=>{const Se=(0,s.Wo)({label:q.o7}),Ze=(0,r.getStateForClientStore)(),$e=(0,S.getAllWorkspaces)(Ze);(!$e||$e.length===0)&&Se.warn("Skipping update to orderedTeamIds, allWorkspaces is empty"),Se.info(`Updating orderedTeamIds to ${$e.join(",")}`),(0,q.q9)("orderedTeamIds",$e)});Bt.meta={name:"createThunk",key:"createThunkupdateLocalConfigOrderedTeamIds",description:"updateLocalConfigOrderedTeamIds side effect handler"};const Qt=(0,d.kt)([l.addWorkspace],Bt);var Fe=e(2250002584);const Xe=(0,_.Ay)("recordWssRailVisibility side effect handler",(Ee,ie)=>{const ye=(0,Fe.F)(),Se=ie(),Ze=(0,fe.v8)(Se)?1:0,$e=ye.createMetricsTrace({samplingOptions:{sampleType:zt.nl.SESSION}});$e.store({name:"wss_rail:visible",value:Ze}),ye.reportTrace($e)});Xe.meta={name:"createThunk",key:"createThunkrecordWssRailVisibility",description:"recordWssRailVisibility side effect handler"};const Me=(0,d.kt)([l.setDidBootAllWorkspaces],Xe);var U=e(3875705815),H=e(4134037340),te=e(2413251042),de=e(6303140164);const Re=(0,_.Ay)("Set zoom value for client before starting BBM",(Ee,ie,ye)=>{const{error:Se}=(0,s.Wo)();(0,H.A)(ie())||Se(new Error("you must call setZoom for a client store"));try{(0,q.q9)(de.UY,ye)}catch(Ze){Se(new Error(`failed to store zoom in local storage: ${Ze}`))}Ee((0,te.x8)(ye))});Re.meta={name:"createThunk",key:"createThunksetZoom",description:"Set zoom value for client before starting BBM"};var Ye=e(6696292586);function we(){let Ee;return ie=>ie===Ee?!1:(Ee=ie,!0)}u(we,"getDidUpdate");const vt=we(),ot=(0,_.Ay)("updateFromDesktop side effect handler",(Ee,ie,ye)=>{var Se;const Ze=ie(),$e=S.getFocusedWorkspace===null||S.getFocusedWorkspace===void 0?void 0:(0,S.getFocusedWorkspace)(Ze);if(!$e)return;const Dt=(0,r.getStateByTeamId)($e);if((0,U.V)(Dt))return;const Je=(Se=ye.payload.settings)===null||Se===void 0?void 0:Se.zoomLevel;(0,Ye.A)(Je)&&vt(Je)&&(0,r.dispatchForClientStore)(Re(Je))});ot.meta={name:"createThunk",key:"createThunkonUpdateFromDesktop",description:"updateFromDesktop side effect handler"};const Mt=(0,d.kt)([ne.Ez],ot),jt=[h,G,oe,ht,sn,J,je,$,x,cn,Yt,W,_t,lt,Pe,Me,Qt,Mt,se];var Ln=e(4900557724);const xn=50,bn="recents";var On=e(8628205589),Un=e(2384831516);let Dn;function zn(Ee){Dn&&(0,Ln.GP)(Dn),Dn=(0,Ln.BB)(()=>{Dn=void 0,(0,q.q9)(bn,Ee)})}u(zn,"persistRecents");function es(){var Ee;return(Ee=(0,q.W6)(bn))!==null&&Ee!==void 0?Ee:[]}u(es,"loadRecents");const Es=es(),Rs=(0,Un.vy)({},Es,{persistenceEnabled:!1,storeKey:"recents"}).on(On.y2,(Ee,ie)=>{let{entry:ye}=ie;const Se=[ye,...Ee].slice(0,xn);return zn(Se),Se}).on(On.HQ,(Ee,ie)=>{let{entry:ye}=ie;const Se=[ye,...Ee.slice(1)].slice(0,xn);return zn(Se),Se}).on(On.TP,Ee=>{const ie=Ee.slice(0,1);return zn(ie),ie});var vs=e(3193155968),us=e(9936094925);const w={[vs.N2]:{index:0,previousIndex:null,stack:[]}},ve={persistenceEnabled:!1,storeKey:"mainWindowHistory"},dt=(0,Un.vy)({},w,ve).on(On.y2,(Ee,ie)=>{let{windowId:ye,entry:Se}=ie;return{...Ee,[ye]:(0,us.wg)({windowState:Ee[ye],entry:Se})}}).on(On.jW,()=>w).on(On.cM,(Ee,ie)=>{let{windowId:ye,index:Se,previousIndex:Ze}=ie;return{...Ee,[ye]:(0,us.ds)({windowState:Ee[ye],index:Se,previousIndex:Ze})}}).on(On.$E,(Ee,ie)=>{let{windowId:ye,index:Se}=ie;return{...Ee,[ye]:(0,us.cB)({windowState:Ee[ye],index:Se})}}).on(On.HQ,(Ee,ie)=>{let{windowId:ye,entry:Se}=ie;return{...Ee,[ye]:(0,us.w9)({windowState:Ee[ye],entry:Se})}});(0,a.ul)("mainWindowHistory",{getState:()=>(0,r.getStateForClientStore)().mainWindowHistory[vs.N2]});var Mn=e(7715417323);function Tn(){let{state:Ee,prevState:ie,workspaces:ye=[],broadcastSelector:Se=Mn.A,broadcastAction:Ze=Mn.A}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const $e=Se(Ee),Dt=Se(ie);$e!==Dt&&ye.forEach(Je=>{(0,r.dispatchForTeamId)(Je,Ze($e))})}u(Tn,"maybeBroadcastStateToWorkspaces");const mn=Tn;var ln=e(1527536225);const is=(0,ln.Ay)("Broadcast accessibility state to other stores",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e);return mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.VH)(Je),broadcastAction:Je=>(0,ae.Jq)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.nQ)(Je),broadcastAction:Je=>(0,ae.N)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.dF)(Je),broadcastAction:Je=>(0,ae.KQ)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.jX)(Je),broadcastAction:Je=>(0,ae.Tv)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.gb)(Je),broadcastAction:Je=>(0,ae.C_)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.zm)(Je),broadcastAction:Je=>(0,ae.XE)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.K9)(Je),broadcastAction:Je=>(0,ae.Mq)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.u$)(Je),broadcastAction:Je=>(0,ae.Sr)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.kd)(Je),broadcastAction:Je=>(0,ae.mw)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.gR)(Je),broadcastAction:Je=>(0,ae.Ap)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ae.u)(Je),broadcastAction:Je=>(0,ae.V_)(Je)}),Ze});is.meta={name:"createMiddleware",key:"createMiddlewarebroadcastAccessibilityMiddleware",description:"Broadcast accessibility state to other stores"};const ms=is;var Ts=e(1004520977),Ps=e(9234290540);const ps=(0,ln.Ay)("Broadcast accessibility persistent state to other stores",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e);return mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ps.i)(Je),broadcastAction:Je=>(0,Ts.w)(Je)}),Ze});ps.meta={name:"createMiddleware",key:"createMiddlewarebroadcastAccessibilityPersistentMiddleware",description:"Broadcast accessibility persistent state to other stores"};const ls=ps;var ys=e(3749529250);const Ve=(0,ln.Ay)("Broadcast big button mode state to other stores",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e).filter(Je=>(0,ue.mL)((0,r.getStateByTeamId)(Je)));return mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,U.V)(Je),broadcastAction:Je=>Je?(0,ys.z)():(0,ys.K)()}),Ze});Ve.meta={name:"createMiddleware",key:"createMiddlewarebroadcastBBMMiddleware",description:"Broadcast big button mode state to other stores"};var Ct=e(2456103428),Ke=e(6728717861);const nt=(0,ln.Ay)("Broadcast connectivity state to other stores",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e);return mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ke.Pb)(Je),broadcastAction:Je=>(0,Ct.p9)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ke.XQ)(Je),broadcastAction:Je=>(0,Ct.pm)(Je)}),Ze});nt.meta={name:"createMiddleware",key:"createMiddlewarebroadcastConnectivityMiddleware",description:"Broadcast connectivity state to other stores"};const Tt=nt;var Lt=e(848813706),Pt=e(5223893135),Ht=e(5095654950);const nn=(0,ln.Ay)("Broadcast fullscreen state to other stores",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e).filter(Je=>(0,ue.iB)((0,r.getStateByTeamId)(Je)));return mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Pt.V)(Je),broadcastAction:Je=>Je?(0,Ht.J)():(0,Lt.sM)()}),Ze});nn.meta={name:"createMiddleware",key:"createMiddlewarebroadcastFullscreenMiddleware",description:"Broadcast fullscreen state to other stores"};var An=e(4309043566);const _n=(0,Un.Ny)("Broadcasts overlays state from client store to workspace stores",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e);return mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>Je.overlays,broadcastAction:An.l}),Ze});_n.meta={name:"createMiddleware",key:"createMiddlewarebroadcastOverlaysMiddleware",description:"Broadcasts overlays state from client store to workspace stores"};var Gt=e(9083290776);const En=(0,ln.Ay)("Broadcast workspaces state to other stores",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e),Je=Se&&(0,S.getBootedWorkspaces)(Se),qt=(0,S.getAllWorkspaces)($e),kn=(0,S.getAllWorkspaces)(Se),$n=!kn||qt.some((Bn,Nn)=>Bn!==kn[Nn]),hs=(0,S.getRecentlyFocusedWorkspaces)($e),an=Se&&(0,S.getRecentlyFocusedWorkspaces)(Se);return(Je!==Dt||$n||an!==hs)&&Wn(Dt,hs),Ze});En.meta={name:"createMiddleware",key:"createMiddlewarebroadcastWorkspacesMiddleware",description:"Broadcast workspaces state to other stores"};function Wn(Ee,ie){const ye=ie[0];ye&&(Ee==null||Ee.forEach(Se=>{(0,r.dispatchForTeamId)(Se,(0,Gt.K$)(ie)),(0,r.dispatchForTeamId)(Se,(0,Gt.fw)(ie))}),(0,y.ny2)(ye))}u(Wn,"broadcastFocusedWorkspaces");const Sn=En;var wn=e(252549317),Kn=e(9042410435),_s=e(8736071954),Wt=e(4103673490),Xn=e(5470425448),Hn=e(5071086688),ts=e(6117529990);function Jn(Ee){switch((0,Rt._Z)(Ee,"calls_transport_type")){case"udp":return["udp"];case"tls":return["tls"];case"tcp_tls":return["tcp","tls"];case"udp_tls":return["udp","tls"];case"disabled":default:return["udp","tcp","tls"]}}u(Jn,"getAllowedTurnTransportTypes");var Yn=e(5332875232);function Vn(){return!(!("MediaStreamTrackProcessor"in globalThis)||!("MediaStreamTrackGenerator"in globalThis)||!("OffscreenCanvas"in globalThis)||!("ImageBitmap"in globalThis)||!("createImageBitmap"in globalThis))}u(Vn,"isHuddlesBackgroundWorkerSupported");const qn=(0,s.Wo)({label:"HUDDLE-INIT-OPTIONS"}),gs=u((Ee,ie)=>{let{server:ye,isPrejoin:Se}=ie;if(!Ee){qn.error("teamState is not defined. Returning empty init options");return}const Ze={};return Ze.serverConfig={...ye,transportProtocols:Jn(Ee)},Ze.isPrejoin=Se,Ze.useChimeSdkExp=(0,ts.OV)(Ee),Ze.useDevicesExp=(0,Yn.ZI)(Ee),Ze.useH264BaselineScreenshare=(0,ts.OV)(Ee)&&(0,Yn.RM)(Ee),Ze.useH264Baseline=(0,ts.OV)(Ee)&&(0,Yn.er)(Ee),Ze.useAv1Screenshare=(0,Yn.Cu)(Ee),Ze.huddlesJukeboxEnabled=(0,Yn.lV)(Ee),Ze.disableAudioRedundancy=(0,Yn.JQ)(Ee),Ze.useSimulcast=!1,Ze.usePriorityDownlinkPolicy=(0,E.gm)()?!1:(0,Yn.bw)(Ee),Ze.useGetMediaAccessCheckForWindows=(0,Yn.jP)(Ee),Ze.enableExperimentalConnectionHealthPolicyConfig=(0,Yn.bb)(Ee),Ze.voiceFocusMaxModelsEnabled=(0,Yn.Hh)(Ee),Ze.disableVp9=(0,Yn.lH)(Ee),Ze.useHuddlesFilterWorker=Vn()&&(0,Yn.lz)(Ee),qn.info("returning init options: ",Ze),Ze},"getSdkInitOptions");var ss=e(6246464105),ns=e(8872167513),Ss=e(2709531527),Ls=e(164795489),As=e(3300324857),Us=e(4708000837),Is=e(1371073900),xs=e(2457673737),rt=e(6664301844),ft=e(6310192986),yt=e(7366481123),wt=e(5253428843),Nt=e(3065433701),Fn=e(5378147939);const Pn=(0,_.Ay)("Resolve a pending huddle",(Ee,ie,ye)=>(0,Fn.A)().resolvePendingJoin(ye));Pn.meta={name:"createThunk",key:"createThunkresolvePendingHuddle",description:"Resolve a pending huddle"};const jn=Pn;var Qn=e(2778217221),rs=e(6694086724),os=e(5286203919),ws=e(9548972574),_o=e(3474336343),Co=e(3263322402),Qo=e(3977512448);const Oo=(0,_.Ay)("update client huddle membership timers join",(Ee,ie)=>{const ye=ie(),Se=(0,s.Ay)({state:ye}),Ze=(0,r.getStateForClientStore)(),$e=(0,os.Ak)(Ze),Dt=(0,_o.Wg)(ye,{tip:Qo.ml.Huddles});if(!$e){Se.warn(Qn.o7,"no active huddle found, cannot update state to together or alone");return}const Je=(0,ws.Sx)(ye);if(Je===0){(0,Fn.A)().setAloneInHuddle();return}Je>0&&(Dt&&Ee((0,Co._A)(!0)),(0,Fn.A)().setOthersInHuddle(),Ee((0,rs.e)({clearOnEndedCallback:!0,logContext:"on-peer-joined"})))});Oo.meta={name:"createThunk",key:"createThunkupdateAloneOrTogetherInHuddle",description:"update client huddle membership timers join"};var Do=e(9706240641),Zn=e(3134334389),Qa=e(4332857818),$a=e(862210999),Ja=e(8645544190),Xa=e(8921478798),$o=e(1641606663),mo=e(735940183),Za=e(8847766420),Gn=e(387328355),qs=e(6839101721),qa=e(5323669031),ho=e(2825968873),er=e(3094144240),tr=e(9477894139),So=e(6023831373),Po=e(9391594207),Qs=e(5255740490),nr=e(3534324375),Jo=e(8869734951);let Xo=u(class extends Zn.PureComponent{static getDerivedStateFromProps(ie,ye){return ie.mediaStream!==ye.currentMediaStream?ie.mediaStream&&ye.currentMediaStream&&ie.mediaStream.id===ye.currentMediaStream.id?{currentMediaStream:ie.mediaStream,isFlipped:ie.isFlipped,isCurrentMediaStreamReady:!1,prevMediaStream:void 0}:{prevMediaStream:ie.mediaStream?ye.currentMediaStream:void 0,currentMediaStream:ie.mediaStream,isFlipped:ie.isFlipped,wasFlipped:ye.isFlipped,isCurrentMediaStreamReady:!1}:null}componentDidMount(){this.setupMedia()}componentDidUpdate(){this.setupMedia()}componentWillUnmount(){const ie=this.videoRef.current,ye=this.prevVideoRef.current;ie&&(ie.removeEventListener("canplay",this.onCanPlay),ie.removeEventListener("pause",this.onPause),ie.removeEventListener("resize",this.onResize)),ye&&(ye.removeEventListener("canplay",this.onCanPlay),ye.removeEventListener("pause",this.onPause),ye.removeEventListener("resize",this.onResize)),this.props.onVideoReady&&this.props.onVideoReady(!1)}onCanPlay(){const{currentMediaStream:ie}=this.state,ye=ie&&ie.getVideoTracks()[0];this.isDataStopped&&ye&&ye.readyState==="live"&&(this.props.onVideoReady&&this.props.onVideoReady(!0),this.setState(()=>({isCurrentMediaStreamReady:!0})))}onPause(ie){this.state.currentMediaStream&&ie.target.srcObject instanceof MediaStream&&ie.target.srcObject.id===this.state.currentMediaStream.id&&(this.props.onVideoReady&&this.props.onVideoReady(!1),this.isDataStopped=!0)}setupMedia(){const{currentMediaStream:ie,prevMediaStream:ye}=this.state,Se=this.videoRef.current,Ze=this.prevVideoRef.current;Se&&(Se.muted=!0,Se.srcObject!==ie&&(Se.addEventListener("canplay",this.onCanPlay),Se.addEventListener("pause",this.onPause),Se.addEventListener("resize",this.onResize),Se.srcObject=ie||null)),Ze&&(Ze.muted=!0,Ze.srcObject!==ye&&(Ze.removeEventListener("canplay",this.onCanPlay),Ze.removeEventListener("pause",this.onPause),Ze.removeEventListener("resize",this.onResize),Ze.srcObject=ye||null))}onResize(){const ie=this.videoRef.current;ie&&(this.props.isSharingScreen?ie.style.objectFit="contain":ie.style.objectFit=ie.videoWidth>ie.videoHeight?"cover":"contain")}render(){const{className:ie,isFlipped:ye,refToForward:Se}=this.props,{currentMediaStream:Ze,prevMediaStream:$e,isCurrentMediaStreamReady:Dt,wasFlipped:Je}=this.state;return Zn.createElement(Zn.Fragment,null,!Dt&&$e&&Zn.createElement("video",{key:$e&&$e.id,className:(0,Qs.A)("p-calls_video",ie,{flipped:Je}),ref:this.prevVideoRef,autoPlay:!0}),Zn.createElement("video",{className:(0,Qs.A)("p-calls_video",ie,{flipped:ye,hidden:!Dt}),ref:(0,Jo.P)(this.videoRef,Se),autoPlay:!0,key:Ze&&Ze.id}))}constructor(ie){super(ie),this.prevVideoRef=Zn.createRef(),this.videoRef=Zn.createRef(),this.isDataStopped=!0,this.state={isCurrentMediaStreamReady:!1,isFlipped:!1,wasFlipped:!1},this.onCanPlay=this.onCanPlay.bind(this),this.onPause=this.onPause.bind(this),this.onResize=this.onResize.bind(this)}},"CallsOriginalVideoElement");Xo.displayName="CallsOriginalVideoElement";function Ro(){return Ro=Object.assign||function(Ee){for(var ie=1;ie<arguments.length;ie++){var ye=arguments[ie];for(var Se in ye)Object.prototype.hasOwnProperty.call(ye,Se)&&(Ee[Se]=ye[Se])}return Ee},Ro.apply(this,arguments)}u(Ro,"_extends");const sr=u((Ee,ie)=>{const ye=(0,Gn.JZ)(Ee,ie.id);return{mediaStream:ye.mediaStream,isFlipped:(0,Gn.fy)(ye)&&!ye.isScreenshareEnabled,isSharingScreen:ye.isScreenshareEnabled}},"mapStateToProps"),or=(0,Po.N)(sr)(Xo),ar=Zn.forwardRef((Ee,ie)=>Zn.createElement(or,Ro({},Ee,{refToForward:ie})));var rr=e(4775127335),ir=e(6308822),Lo=e(7299481592),lr=e(5956851410),cr=e(6909784049),dr=e(8558782493),Zo=e(1975685771);function ur(Ee,ie){const ye=Math.min(ie.width,ie.height*Ee),Se=Math.min(ie.height,ie.width/Ee);return{top:ie.top+(ie.height-Se)/2,left:ie.left+(ie.width-ye)/2,width:ye,height:Se}}u(ur,"getLargestRectForAspectRatioCenteredWithinRect");let Uo=u(class extends Zn.PureComponent{detectDifference(ie,ye){return Math.abs(ie-ye)>1}componentDidMount(){var ie;(0,ho.tZ)("GUEST-DRAW-WINDOW").info("Guest draw window mounted"),(0,dr.k)(un.EventId.CALLS_GUEST_DRAW_ACTIVATED,{}),(ie=this.context.windowRef.deref())===null||ie===void 0||ie.addEventListener("resize",this.onResize),(0,Zo.Z)(this.videoRef.current,"Expected videoRef to be bound after mounting")&&(this.props.addEventListeners&&this.props.addEventListeners(this.videoRef,this.onResize,!0),this.onResize(),this.resizeTimeout=window.setTimeout(()=>{this.onResize()},4e3),this.videoRef.current.dispatchEvent(new Event("resize")))}componentDidUpdate(ie){let{isVideoReady:ye}=ie;!ye&&this.props.isVideoReady&&this.onResize()}componentWillUnmount(){var ie;this.props.removeEventListeners&&this.props.removeEventListeners(this.videoRef,this.onResize,!0),(ie=this.context.windowRef.deref())===null||ie===void 0||ie.removeEventListener("resize",this.onResize),window.clearTimeout(this.resizeTimeout)}onResize(){if(!(0,Zo.Z)(this.videoRef.current,"Expected videoRef to be bound on resize"))return;const ie=this.videoRef.current;!ie||ie.videoHeight===0||this.setState(()=>({videoRect:ur(ie.videoWidth/ie.videoHeight,ie.getBoundingClientRect())}))}render(){const ie=Zn.Children.only(this.props.children),ye=Zn.cloneElement(ie,{ref:(0,Jo.N)(this.videoRef,ie)});return Zn.createElement(Zn.Fragment,null,ye,this.state.videoRect&&Zn.createElement(lr.u,{ref:this.drawRenderRef,isHidden:!this.props.isScreenShareEnabled,targetRect:this.state.videoRect}),this.props.isDrawEnabled&&this.state.videoRect&&Zn.createElement(cr.o,{ref:this.drawTargetRef,targetRect:this.state.videoRect}))}constructor(ie){super(ie),this.videoRef=Zn.createRef(),this.drawTargetRef=Zn.createRef(),this.drawRenderRef=Zn.createRef(),this.onResize=this.onResize.bind(this),this.state={}}},"GuestDraw");Uo.displayName="GuestDraw",Uo.contextType=$o.M;const _r=u((Ee,ie)=>{const ye=(0,Gn.gl)(Ee);if(!ye)throw Error("Guest draw should not be mounted without an active peer");const Se=(0,Gn.JZ)(Ee,ye);return{isDrawEnabled:!!Se.isScreenshareEnabled&&!!Se.isDrawEnabled,isScreenShareEnabled:!!Se.isScreenshareEnabled}},"guest_draw_mapStateToProps"),qo=(0,Po.N)(_r)(Uo),mr={isVideoReady:!1};let ea=u(class extends Zn.PureComponent{onVideoReady(ie){this.setState(ye=>({...ye,isVideoReady:ie}))}renderVideo(){const{id:ie,renderVideo:ye,tileId:Se}=this.props;if(ye)return ye(this.isVideoEnabledAndReady());if(!ie){(0,Lo.M)("Cannot render video without a peer id");return}return Zn.createElement(qo,{isVideoReady:this.state.isVideoReady},Zn.createElement(ar,{id:ie,tileId:Se,onVideoReady:this.onVideoReady,className:(0,Qs.A)({hidden:!this.state.isVideoReady})}))}renderImage(){const{isSpinning:ie,prefCompliantUserName:ye,member:Se}=this.props;return Zn.createElement("div",{className:(0,Qs.A)({hidden:this.state.isVideoReady})},Zn.createElement("div",{className:"p-active_speaker__member_image_wrapper"},Zn.createElement(rr.Ay,{className:(0,Qs.A)({"p-active_speaker__member_image--spinning":ie}),size:180,userId:Se&&Se.id,isInteractive:!1,tabIndex:-1}),ie&&Zn.createElement("div",{className:"p-active_speaker__member_image__spinner_wrapper"},Zn.createElement(ir.A,{color:"white"}))),Zn.createElement("div",{className:"p-active_speaker__member_name"},ye))}isVideoEnabledAndReady(){const{isVideoEnabled:ie,isVideoEnabledAndReady:ye}=this.props;return ye?ye(ie):!!(ie&&this.state.isVideoReady)}render(){const{isVideoEnabled:ie}=this.props,ye=(0,Qs.A)("p-active_speaker",{"p-active_speaker--video_enabled":this.isVideoEnabledAndReady()});return Zn.createElement("div",{"data-qa":"active-speaker",className:ye},ie&&this.renderVideo(),!this.isVideoEnabledAndReady()&&this.renderImage())}constructor(ie){super(ie),this.state=mr,this.onVideoReady=this.onVideoReady.bind(this)}},"ActiveSpeaker");ea.displayName="ActiveSpeaker";function hr(Ee,ie){const ye=(0,Q.nv)(Ee,ie),Se=(0,nr.sE)(Ee,ye);return{member:ye,prefCompliantUserName:Se}}u(hr,"mapCommonMemberState");const Er=u((Ee,ie)=>{const ye=(0,Gn.JZ)(Ee,ie.id),Se=ye.isCameraEnabled,Ze=ye.isScreenshareEnabled,$e=(0,Gn.fy)(ye)?(0,Ot.WR)(Ee):ye.userId;return{tileId:ie.tileId,isVideoEnabled:Se||Ze,isSpinning:ye.isConnected===!1,...hr(Ee,$e)}},"active_speaker_mapStateToProps"),vr=(0,Po.N)(Er)(ea);var fr=e(1429018002);function bo(){return bo=Object.assign||function(Ee){for(var ie=1;ie<arguments.length;ie++){var ye=arguments[ie];for(var Se in ye)Object.prototype.hasOwnProperty.call(ye,Se)&&(Ee[Se]=ye[Se])}return Ee},bo.apply(this,arguments)}u(bo,"with_free_willy_guest_draw_extends");const ta=u(Ee=>u(class extends Zn.PureComponent{addEventListeners(ye,Se,Ze){ye.current&&(ye.current.addEventListener("canplay",Se),Ze&&ye.current.addEventListener("resize",Se))}removeEventListeners(ye,Se,Ze){ye.current&&(ye.current.removeEventListener("canplay",Se),Ze&&ye.current.removeEventListener("resize",Se))}render(){return Zn.createElement(Ee,bo({},this.props,{addEventListeners:this.addEventListeners,removeEventListeners:this.removeEventListeners}))}},"WithFreeWillyGuestDraw"),"withFreeWillyGuestDraw");ta.displayName="withFreeWillyGuestDraw";const pr=ta;function ko(){return ko=Object.assign||function(Ee){for(var ie=1;ie<arguments.length;ie++){var ye=arguments[ie];for(var Se in ye)Object.prototype.hasOwnProperty.call(ye,Se)&&(Ee[Se]=ye[Se])}return Ee},ko.apply(this,arguments)}u(ko,"with_free_willy_active_speaker_extends");const gr=pr(qo),na=u(Ee=>u(class extends Zn.PureComponent{isVideoEnabledAndReady(ye){return ye}renderVideo(ye){const{id:Se,tileId:Ze}=this.props;if(!Se){(0,Lo.M)("Cannot render video without a peer id");return}return Zn.createElement(gr,{isVideoReady:ye},Zn.createElement(fr.A,{id:Se,tileId:Ze,shouldAttachStream:!0,"data-qa":"free-willy-peer-video-element"}))}render(){return Zn.createElement(Ee,ko({},this.props,{renderVideo:this.renderVideo,isVideoEnabledAndReady:this.isVideoEnabledAndReady}))}constructor(ye){super(ye),this.isVideoEnabledAndReady=this.isVideoEnabledAndReady.bind(this),this.renderVideo=this.renderVideo.bind(this)}},"WithFreeWillyActiveSpeaker"),"withFreeWillyActiveSpeaker");na.displayName="withFreeWillyActiveSpeaker";const Ar=na;var Tr=e(8300007136),yr=e(6084388622),sa=e(1049642794),Ir=e(5043394918);const Mr=new mo.Ay("huddles"),oa=u(()=>{const Ee=(0,Tr.wA)(),ie=(0,So.d4)(Se=>!!(0,Gn.WQ)(Se,"isMicrophoneEnabled")),ye=(0,Zn.useCallback)(()=>{Ee((0,sa.A)(!ie))},[ie,Ee]);return Zn.createElement("div",{className:"p-huddle_screen_viewer__mic_button_container"},Zn.createElement(yr.Ay,{className:(0,Qs.A)("p-huddle_screen_viewer__mic_button p-huddle_screen_viewer__mic_button--mute",{"p-huddle_screen_viewer__mic_button--active":ie}),onClick:ye,type:"outline",role:"switch",size:"large","aria-label":Mr.t("Microphone"),"aria-checked":ie,disabled:!self},Zn.createElement(Ir.A,{peerId:"self",isMicrophoneEnabled:ie,allowMuteIconAnimation:!0})))},"HuddleScreenViewerMicButton");oa.displayName="HuddleScreenViewerMicButton";const Cr=oa,Or=Ar(vr),Dr=new mo.Ay("huddles");function aa(Ee){const{peerId:ie,isError:ye}=Ee,Se=(0,So.d4)(Gn.vz),Ze=(0,So.d4)(kn=>ie?(0,Gn.JZ)(kn,ie):null);let $e;if(Se){var Dt,Je;$e=Ze!=null&&Ze.isScreenshareEnabled?Ze==null||(Dt=Ze.tileIds)===null||Dt===void 0||(Je=Dt.screenshare)===null||Je===void 0?void 0:Je.tileId:null}const qt=Zn.createElement("span",{className:"p-huddle_screen_viewer__error"},Dr.t("The screen share has ended."));return Zn.createElement("div",{className:"p-huddle_screen_viewer__container"},ie&&!ye&&Zn.createElement(Or,{id:ie,tileId:$e}),ye?qt:Zn.createElement(Cr,null))}u(aa,"HuddleScreenViewer"),aa.displayName="HuddleScreenViewer";var Sr=e(4385664584),Pr=e(4675837085);const fs={childWindow:void 0,childWindowToken:void 0,container:void 0,containerTileId:void 0},Tl=null,ra=new mo.Ay("huddles"),Rr=u(Ee=>{var ie;const ye=Ee==null||(ie=Ee.document)===null||ie===void 0?void 0:ie.querySelectorAll(".p-huddle_screen_viewer__container"),Se=ye?ye.length:0,Ze=(0,ho.tZ)("SCREENSHARE-VIEWER-APP");Se>1?Ze.info("Multiple containers rendered in viewing window. Shared stream may be hidden from view."):Ze.info(`${Se} containers rendered in viewing window.`)},"logRenderedApplicationsCount"),Eo=u(()=>{const{container:Ee,childWindow:ie}=fs;Ee&&(Qa.unmountComponentAtNode(Ee),fs.containerTileId=void 0,fs.container=void 0),ie&&(ie.removeEventListener("beforeunload",Eo),ie.close(),fs.childWindow=void 0,fs.childWindowToken=void 0)},"closeScreenShareWindow"),Lr=(0,_.Ay)("Launch the window that renders screen share media",function(){var Ee=(0,Do.coroutine)(function*(ie,ye,Se){var Ze,$e,Dt;const Je=ye(),qt=(0,s.Ay)({state:Je}),kn=Se!=null&&Se.screenSharePeerId?Se.screenSharePeerId:(0,Gn.vN)(Je);let $n=!1;const{container:hs,containerTileId:an}=fs;kn||(qt.warn(Qn.o7,"lastRemoteScreensharePeerId is not found"),$n=!0);const Bn=(0,Gn.JZ)(Je,kn||""),Nn=Bn.userId?(0,Xa.I)(Je,Bn.userId):"";let as=ra.t("Screen share");Nn&&(as=ra.t("{memberName} screen share",{memberName:(0,mo.nr)(Nn)}));const cs={...er.P,backgroundColor:"black",title:as,type:"huddle-call-screen-share"},ds=(0,r.getStateForClientStore)();(0,os.Ak)(ds)||(qt.warn(Qn.o7,"no active huddle found"),$n=!0);const Ns=(Bn==null||(Ze=Bn.tileIds)===null||Ze===void 0||($e=Ze.screenshare)===null||$e===void 0?void 0:$e.tileId)||0;(0,r.dispatchForClientStore)((0,qs.cn)({tileId:Ns}))||(qt.warn(Qn.o7,"video tile does not have stream"),$n=!0);const zs=!fs.childWindow||fs.childWindow.closed;if(zs&&(0,E.y3)()){const{window:Xs,windowToken:co}=yield(0,Ja.wK)("",cs);fs.childWindow=Xs,fs.childWindowToken=co}else zs&&(fs.childWindow=window.open("",as,"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=780,height=480")||void 0);if(!fs.childWindow){qt.warn(Qn.o7,"No child window available. Exiting screen share window launch");return}const Hs=(0,Za.ZT)(Je);fs.childWindow.document&&(fs.childWindow.document.body.style.background="black");const io={windowRef:(0,Pr.O)(fs.childWindow),windowToken:fs.childWindowToken};if(zs&&(fs.childWindow.addEventListener("beforeunload",Eo),window.addEventListener("beforeunload",Eo)),!(hs&&an===Ns)||zs){fs.containerTileId=Ns;const Xs=(0,r.getStoreInstanceByTeamId)(Hs);fs.container=yield(0,qa.s)(fs.childWindow,Zn.createElement(Sr.A,{store:Xs},Zn.createElement($o.M.Provider,{value:io},Zn.createElement(tr.A,{shouldStopHuddle:!0},Zn.createElement(aa,{peerId:kn,isError:$n})))),{useContainer:!0})}const lo=(Dt=fs.childWindow)===null||Dt===void 0?void 0:Dt.browserWindowId;lo?(0,y.hN0)(lo):(0,$a.A)(fs.childWindow.focus)&&fs.childWindow.focus(),Rr(fs.childWindow)});return function(ie,ye,Se){return Ee.apply(this,arguments)}}());Lr.meta={name:"createThunk",key:"createThunklaunchScreenShareWindow",description:"Launch the window that renders screen share media"};var vo=e(9712681361),Ur=e(5761207079);const ia=(0,_.Ay)("alerts if a user joins the huddle and the current user has hidden that user",(Ee,ie,ye)=>{let{userId:Se}=ye;const Ze=ie();(0,Ur.a)(Ze,Se)&&Ee((0,yt.Iw)(yt.vT.HiddenUserJoinedHuddle))});ia.meta={name:"createThunk",key:"createThunkmaybeAlertHiddenUserJoinedHuddle",description:"alerts if a user joins the huddle and the current user has hidden that user"};var Os=e(462591818),la=e(9640070512),ca=e(2527782504),da=e(5954792826),ks=e(700984029),fo=e(1829947126),br=e(9009528296),kr=e(1289024643),to=e(9853754481),ua=e(9372409576);const _a=(0,_.Ay)("Send call analytics to the server",(Ee,ie,ye)=>{const Se=ie().activeCall;let Ze;if(ye&&ye.callId?Ze=ye.callId:Se&&Se.id&&(Ze=Se.id),!Ze){(0,Lo.M)("There should be an active call in progress in order to send analytics.");return}const $e=Br(new ua.$.calls.analytics.Report(ye.stats),ie()),Dt=ua.$.calls.analytics.Report.encode($e).finish(),Je=String.fromCharCode(...Dt);return Ee((0,We.apiCall)({method:"screenhero.rooms.postAnalytics",args:{room:Ze,analytics:btoa(Je)},reason:"calls-analytics"}))});_a.meta={name:"createThunk",key:"createThunksendAnalytics",description:"Send call analytics to the server"};function Br(Ee,ie){const ye=Ee;return ye.recv=Ee.recv.map(Se=>{if(Se.peerId){const Ze=(0,Gn.C1)(ie,Se.peerId);if(Ze){const $e=Se;$e.userId=Ze.userId}}if(Se.peerIdString){const Ze=(0,Gn.C1)(ie,Se.peerIdString);if(Ze){const $e=Se;$e.userId=Ze.userId}}return Se}),ye.recv=ye.recv.filter(Se=>!!Se.userId),Ee}u(Br,"mapPeerIdsToUserIds");var Nr=e(5046160032),ma=e(8848660647),Wr=e(4914127094),Bo=e(8935621861),no=e(415910655);const xr=(0,s.Wo)({label:"SEND-MEETING-EVENTS-LOGGER"}),ha="screenhero.rooms.proxyMeetingEvents",Ea=(0,_.Ay)("Send meeting events to the server",function(){var Ee=(0,Do.coroutine)(function*(ie,ye,Se){let Ze;try{Ze=JSON.stringify(Se.events)}catch(qt){xr.error(qt.message);return}const{metrics:$e,teamId:Dt}=Fr();if(Se.isUnloading){const qt={app:Se.app,meeting_id:Se.meetingId,media_region:Se.mediaRegion,attendee_id:Se.attendeeId,call_id:Se.callId,ua:window.navigator.userAgent,event_type:"calls-chime-events",encoding:"none",events:Ze,preferred_media_region:yield Bo.A.getInstance().getNearestChimeMediaRegion(Dt),audio_connected_time:($e==null?void 0:$e.audioConnectedTime)||0,first_presence_time:($e==null?void 0:$e.firstPresenceTime)||0,rooms_join_time:($e==null?void 0:$e.roomsJoinTime)||0,sdk_initialized_time:($e==null?void 0:$e.sdkInitializedTime)||0,chime_attendee_presence_time:Se.attendeePresenceDuration?Se.attendeePresenceDuration:($e==null?void 0:$e.attendeePresenceDuration)||0,chime_meeting_start_time:Se.meetingStartDuration?Se.meetingStartDuration:($e==null?void 0:$e.meetingStartDuration)||0,chime_signaling_open_time:Se.signalingOpenDuration?Se.signalingOpenDuration:($e==null?void 0:$e.signalingOpenDuration)||0,chime_ice_gathering_time:Se.iceGatheringDuration?Se.iceGatheringDuration:($e==null?void 0:$e.iceGatheringDuration)||0,voice_focus_init_time:($e==null?void 0:$e.voiceFocusInitializedTime)||0,creds_to_voice_focus_init_time:($e==null?void 0:$e.credentialsToVoiceFocusInitializedTime)||0};return(0,Nr.A)({apiUrl:"/api/",method:ha,token:(0,Wr.F)(ye()),versionTs:(0,ma.HF)(),versionUid:(0,ma.X3)(),args:qt})?qe.S.resolve():qe.S.reject(new Error("sendMeetingEvents: beacon failed"))}const Je=Se.isEnding?{app:Se.app,meeting_id:Se.meetingId,media_region:Se.mediaRegion,attendee_id:Se.attendeeId,events:Ze,call_id:Se.callId,preferred_media_region:yield Bo.A.getInstance().getNearestChimeMediaRegion(Dt),audio_connected_time:($e==null?void 0:$e.audioConnectedTime)||0,first_presence_time:($e==null?void 0:$e.firstPresenceTime)||0,rooms_join_time:($e==null?void 0:$e.roomsJoinTime)||0,sdk_initialized_time:($e==null?void 0:$e.sdkInitializedTime)||0,chime_attendee_presence_time:Se.attendeePresenceDuration?Se.attendeePresenceDuration:($e==null?void 0:$e.attendeePresenceDuration)||0,chime_meeting_start_time:Se.meetingStartDuration?Se.meetingStartDuration:($e==null?void 0:$e.meetingStartDuration)||0,chime_signaling_open_time:Se.signalingOpenDuration?Se.signalingOpenDuration:($e==null?void 0:$e.signalingOpenDuration)||0,chime_ice_gathering_time:Se.iceGatheringDuration?Se.iceGatheringDuration:($e==null?void 0:$e.iceGatheringDuration)||0,voice_focus_init_time:($e==null?void 0:$e.voiceFocusInitializedTime)||0,creds_to_voice_focus_init_time:($e==null?void 0:$e.credentialsToVoiceFocusInitializedTime)||0}:{app:Se.app,meeting_id:Se.meetingId,media_region:Se.mediaRegion,attendee_id:Se.attendeeId,events:Ze,call_id:Se.callId};return ie((0,We.apiCall)({method:ha,args:Je,reason:"calls-chime-events"}))});return function(ie,ye,Se){return Ee.apply(this,arguments)}}());Ea.meta={name:"createThunk",key:"createThunksendMeetingEvents",description:"Send meeting events to the server"};function Fr(){const Ee=(0,r.getStateForClientStore)(),{teamId:ie}=(0,os.Qn)(Ee)||{};return{metrics:(0,no.s2)(),teamId:ie}}u(Fr,"getCallMetricsAndTeamId");const Kr=(0,s.Wo)({label:"HANDLE-MEETING-EVENTS-LOGGER"}),va=(0,_.Ay)("Handle Chime meeting events",(Ee,ie,ye)=>{let{events:Se,callId:Ze,meetingId:$e,mediaRegion:Dt,attendeeId:Je,isUnloading:qt,isEnding:kn}=ye;const $n=Hr(Se);!(0,it.A)($n)&&!qt&&!kn&&(0,no.jm)($n),Ee(Ea({events:Se,app:"huddles",callId:Ze,meetingId:$e,mediaRegion:Dt,attendeeId:Je,isUnloading:qt,isEnding:kn,attendeePresenceDuration:$n.attendeePresenceDuration,signalingOpenDuration:$n.signalingOpenDuration,iceGatheringDuration:$n.iceGatheringDuration,meetingStartDuration:$n.meetingStartDuration}))});va.meta={name:"createThunk",key:"createThunkhandleMeetingEvents",description:"Handle Chime meeting events"};function Hr(Ee){const ie={};return Ee.forEach(ye=>{let{message:Se}=ye;try{const qt=JSON.parse(Se);switch(qt.name){case"attendeePresenceReceived":var Ze;ie.attendeePresenceDuration=(Ze=qt.attributes)===null||Ze===void 0?void 0:Ze.attendeePresenceDurationMs;break;case"meetingStartSucceeded":var $e,Dt,Je;ie.signalingOpenDuration=($e=qt.attributes)===null||$e===void 0?void 0:$e.signalingOpenDurationMs,ie.iceGatheringDuration=(Dt=qt.attributes)===null||Dt===void 0?void 0:Dt.iceGatheringDurationMs,ie.meetingStartDuration=(Je=qt.attributes)===null||Je===void 0?void 0:Je.meetingStartDurationMs;break;default:break}}catch(qt){Kr.error("Invalid JSON in meeting event",qt)}}),ie}u(Hr,"parseMeetingEventMetrics");const wr=va;var Fs=e(6758774099),Vr=e(4988306802);const fa=(0,_.Ay)("Process AWS transcript event",(Ee,ie,ye)=>{var Se;if((0,rt.VW)(ye))return;const Ze=ye.results[0];if(!(Ze!=null&&Ze.resultId)||!(0,Vr.TP)(ie()))return;const $e=(Se=Ze.alternatives[0])===null||Se===void 0?void 0:Se.items;if(!($e!=null&&$e.length)){Ee((0,Fs.h2)({resultId:Ze.resultId,transcriptions:[]}));return}const Dt=[];$e.forEach(Je=>{var qt;const kn=Dt[Dt.length-1],$n=(0,da.l)((qt=Je.attendee)===null||qt===void 0?void 0:qt.externalUserId);$n&&(Je.type===rt.E9.PUNCTUATION?kn&&(kn.content=`${kn.content}${Je.content}`,kn.endTimeMs=Je.endTimeMs):Dt.push({memberId:$n,timestampMs:Je.startTimeMs,endTimeMs:Je.endTimeMs||Date.now(),content:Je.content}))}),Ee((0,Fs.h2)({resultId:Ze.resultId,transcriptions:Dt}))});fa.meta={name:"createThunk",key:"createThunkprocessAwsTranscription",description:"Process AWS transcript event"};const jr=fa;var $s=e(8783285437),Gr=e(6155974509);const pa=(0,_.Ay)("Maybe disable the screen share",function(){var Ee=(0,Do.coroutine)(function*(ie,ye){const Se=(0,ho.tZ)("CALLS-REDUX");ye().peers.self.isScreenshareEnabled&&(Se.info("Attempted to turn off screen sharing"),ie((0,Gn.kT)({id:"self",isScreenshareEnabled:!1,selectedScreenId:void 0}))),(0,Gr.a)()});return function(ie,ye){return Ee.apply(this,arguments)}}());pa.meta={name:"createThunk",key:"createThunkdisableScreenShareIfEnabled",description:"Maybe disable the screen share"};var Js=e(9190452268),Ms=e(9680914051),Vs=e(1990810649),ga=e(5145584581),zr=e(9365970888),po=e(7592559649),Yr=e(6251210828),Aa=e(7439555287),Qr=e(6470070112);let $r=u(class{onPeerMuted(ie,ye){this.dispatch((0,Gn.kT)({id:ie,isMicrophoneEnabled:!ye}))}onPeerJoined(ie,ye){if(this.maybeRecordFirstPresenceTime(),ye&&ie){this.dispatch((0,Gn.Uu)({id:ie,userId:ye,isMicrophoneEnabled:!0})),this.dispatch(Oo());const Se=(0,Gn.Ng)(this.store.getState());(0,r.dispatchForClientStore)((0,Be.Rr)({isDrawEnabled:Se.isDrawEnabled||!1})),this.dispatch((0,Fs.U$)({type:$s.v.JOIN,memberId:ye,timestampMs:Date.now()})),this.maybeRemoveUserAsPending(ye),this.dispatch(ia({userId:ye}))}}onPeerLeft(ie){var ye;const Se=(ye=(0,Gn.jB)(this.store.getState(),ie))===null||ye===void 0?void 0:ye.userId;Se&&(this.callLogger.info(`Peer left the huddle. userId=${Se} peerId=${ie}`),this.dispatch((0,Fs.U$)({type:$s.v.LEAVE,memberId:Se,timestampMs:Date.now()}))),this.dispatch((0,Gn.xx)(ie)),this.dispatch(Oo())}onSelfJoined(){const ie=this.recordTiming(Ms.qK);this.maybeRecordFirstPresenceTime(),this.dispatch(jn(ie))}onSelfLeft(){this.dispatch((0,yt.LL)(Nt.vT.HiddenUserJoinedHuddle))}onNewActiveSpeaker(ie){this.dispatch((0,Gn.FX)(ie))}onPeerReacji(ie,ye,Se,Ze){var $e;this.dispatch((0,Gn._x)({peerId:ie,emoji:ye,isEmoji:Se,reactionType:Ze}));const Dt=($e=(0,Gn.jB)(this.store.getState(),ie))===null||$e===void 0?void 0:$e.userId;Dt&&this.dispatch((0,Fs.U$)({type:$s.v.SEND_REACTION,memberId:Dt,timestampMs:Date.now(),emoji:ye}))}onPeerMuteRequest(ie,ye){ye===this.selfAttendeeId&&(this.dispatch((0,sa.A)(!1)),this.dispatch((0,Nt.CE)({alert:Nt.vT.PeerMuteRequest,peerId:ie})),this.callLogger.info(`Peer muted self microphone : peerId:${ie}`))}onError(ie,ye){let Se;ye===rt.b9[rt.b9.AudioJoinedFromAnotherDevice]?Se=vo.M6.AudioJoinedFromAnotherDevice:ye===rt.b9[rt.b9.MeetingEnded]&&(Se=(0,Qr.ew)((0,Aa.KA)().getState())?vo.M6.ChimeMeetingEndedFromTimeLimit:vo.M6.ChimeMeetingEnded),this.dispatch((0,wt.A)({terminalState:Se||ie})),this.callLogger.info(`tearDown executed: terminalState: ${ie}, statusCodeName: ${ye} tearDownState: ${Se}`)}onClogError(ie){}onMeetingSessionInitialized(){this.recordTiming(Ms.W_);const ie=(0,Js.Cy)({state:this.store.getState()}),ye=ie.measure(Ms.Bq,Ms.CY);ie.count(Ms.CY,ye),(0,no.jm)({sdkInitializedTime:ye})}onSelfPermissionUpdated(ie,ye){this.callLogger.info(`Received permission update from type:${ye}, isDenied: ${ie}`);let Se;(0,E.y3)()?Se=ye===_s.lW.Microphone?Nt.vT.NoSystemAudio:Nt.vT.NoSystemVideo:Se=ye===_s.lW.Microphone?Nt.vT.NoBrowserAudioPermission:Nt.vT.NoBrowserVideoPermission,ie?this.dispatch((0,Nt.CE)({alert:Se})):this.dispatch((0,Nt.Gu)(Se))}onSelfVideoTileUpdate(ie){if(!ie.tileId)return;const ye=(0,Gn.Ng)(this.getState());if(!ie.isContent&&!ye.isCameraEnabled)return;if(!(0,Gn.vz)(this.getState()))this.dispatch((0,Fs.U$)({type:$s.v.SCREENSHARE_START,memberId:(0,Ot.WR)(this.getState()),timestampMs:Date.now()})),this.dispatch((0,Gn.kT)({id:"self",tileId:ie.tileId,isScreenshareEnabled:!!ie.isContent}));else if(ie.isContent){var Ze,$e;this.dispatch((0,Fs.U$)({type:$s.v.SCREENSHARE_START,memberId:(0,Ot.WR)(this.getState()),timestampMs:Date.now()}));const Dt=(0,Gn.JC)(this.getState());((Ze=ye.tileIds)===null||Ze===void 0||($e=Ze.screenshare)===null||$e===void 0?void 0:$e.tileId)!==ie.tileId&&Dt!==Vs.cM.Screenshare&&this.dispatch((0,ga.x)({peerId:"self",contentViewType:Vs.cM.None,contentViewConfig:{}})),this.dispatch((0,Gn.kT)({id:"self",tileId:ie.tileId,isScreenshareEnabled:!!ie.isContent}))}else this.dispatch((0,Gn.kT)({id:"self",tileId:ie.tileId,isCameraEnabled:!0}))}onPeerVideoTileUpdate(ie,ye){if(!ye.tileId)return;const Se=ye.boundExternalUserId&&(0,da.l)(ye.boundExternalUserId);ye.isContent&&Se&&(this.callLogger.info(`Peer screenshare started: userId=${Se}`),this.dispatch((0,Fs.U$)({type:$s.v.SCREENSHARE_START,memberId:Se,timestampMs:Date.now()}))),this.dispatch((0,Gn.BD)({id:ie,tileId:ye.tileId,isContent:ye.isContent,isPaused:ye.paused}))}onVideoTileRemoved(ie){var ye,Se;const Ze=this.store.getState(),$e=(0,Gn.v2)(Ze,ie);$e&&(this.callLogger.info(`Peer screenshare stopped: userId=${$e}`),this.dispatch((0,Fs.U$)({type:$s.v.SCREENSHARE_STOP,memberId:$e,timestampMs:Date.now()}))),this.dispatch((0,Gn.Qr)({tileId:ie})),Eo();const Dt=(0,Gn.Ng)(Ze);((ye=Dt.tileIds)===null||ye===void 0||(Se=ye.screenshare)===null||Se===void 0?void 0:Se.tileId)===ie&&Dt.contentViewType===Vs.cM.Screenshare&&this.dispatch((0,ga.x)({peerId:"self",contentViewType:Vs.cM.None,contentViewConfig:{}}))}onVideoTileWillPause(ie){this.dispatch((0,Gn.K3)({tileId:ie}))}onVideoTileWillUnpause(ie){this.dispatch((0,Gn.XS)({tileId:ie}))}onDeviceAccessApproved(ie){switch(ie){case Os.mT.MICROPHONE:{(0,E.y3)()?(this.dispatch((0,Nt.Gu)(Nt.vT.NoSystemAudio)),this.dispatch((0,ks.er)())):(this.dispatch((0,Nt.Gu)(Nt.vT.NoBrowserAudioPermission)),this.dispatch((0,ks.ZY)()));break}case Os.mT.CAMERA:{(0,E.y3)()?(this.dispatch((0,Nt.Gu)(Nt.vT.NoSystemVideo)),this.dispatch((0,ks.NH)())):(this.dispatch((0,Nt.Gu)(Nt.vT.NoBrowserVideoPermission)),this.dispatch((0,ks.in)()));break}default:}}onCheckSystemMediaAccess(ie){switch(ie){case Os.mT.MICROPHONE:{this.dispatch((0,ks.tG)()),this.dispatch((0,Nt.CE)({alert:Nt.vT.NoSystemAudio}));break}case Os.mT.CAMERA:{this.dispatch((0,ks.Yr)()),this.dispatch((0,Nt.CE)({alert:Nt.vT.NoSystemVideo}));break}case Os.mT.SCREEN:{this.dispatch((0,ks.J3)()),this.dispatch((0,Nt.CE)({alert:Nt.vT.NoSystemScreenShare}));break}default:}}onBrowserMediaDeviceAccessDenied(ie){switch(this.callLogger.error(`Self ${ie} device access denied`),ie){case Os.mT.MICROPHONE:{this.dispatch((0,ks.cH)()),this.dispatch((0,Nt.CE)({alert:Nt.vT.NoBrowserAudioPermission}));break}case Os.mT.CAMERA:{this.dispatch((0,ks.px)()),this.dispatch((0,Nt.CE)({alert:Nt.vT.NoBrowserVideoPermission}));break}default:}}onStartSessionTimeout(){}onSetNoMediaInput(ie){switch(ie){case Os.mT.MICROPHONE:{this.dispatch((0,Nt.CE)({alert:Nt.vT.NoUserAudioStream}));break}case Os.mT.CAMERA:{const ye=(0,zr.ly)(this.getState());if((0,r.dispatchForClientStore)((0,Be.WM)({setVideoEnabled:!1})),!(0,E.y3)()&&ye)break;this.dispatch((0,Nt.CE)({alert:Nt.vT.NoUserVideoStream}));break}default:}}onClearNoMediaInput(ie){switch(ie){case Os.mT.MICROPHONE:{this.dispatch((0,Nt.Gu)(Nt.vT.NoUserAudioStream));break}case Os.mT.CAMERA:{this.dispatch((0,Nt.Gu)(Nt.vT.NoUserVideoStream));break}default:}}onSetNoAudioOutput(ie){switch(ie){case Os.NS.AUDIO_ELEMENT_ERROR:{this.dispatch((0,Nt.CE)({alert:Nt.vT.NoAudioOutputAudioElementError}));break}case Os.NS.AUDIO_LEVEL_ERROR:{this.dispatch((0,Nt.CE)({alert:Nt.vT.NoAudioOutputAudioLevelError}));break}default:}}onClearNoAudioOutput(ie){switch(ie){case Os.NS.AUDIO_ELEMENT_ERROR:{this.dispatch((0,Nt.Gu)(Nt.vT.NoAudioOutputAudioElementError));break}case Os.NS.AUDIO_LEVEL_ERROR:{this.dispatch((0,Nt.Gu)(Nt.vT.NoAudioOutputAudioLevelError));break}default:}}onSelfConnected(){this.callLogger.info("Self connected to chime media server"),this.dispatch((0,Gn.kT)({id:"self",isConnected:!0,noInternet:!1}))}onSelfDisconnected(){this.callLogger.info("Self disconnected from chime media server"),this.dispatch((0,Gn.kT)({id:"self",isConnected:!1})),Hn.A.publish({type:Xn.lx.NetworkDisconnect,update:{peerId:"self"}})}onSelfConnectionQualityChanged(ie,ye){this.callLogger.info(`${ie} audio packet loss changed to: ${ye}`)}onPeerConnected(ie){this.dispatch((0,Gn.E3)({id:ie,isConnected:!0}))}onPeerDisconnected(ie){this.callLogger.info(`peer disconnected from chime media server ${ie}`),this.dispatch((0,Gn.E3)({id:ie,isConnected:!1}))}onPeerConnectionQualityChanged(ie,ye,Se){}onSelfMediaStreamChanged(ie){}onNewPeerMediaStream(ie,ye){}onScreenThumbnails(ie){}onUpdatedSelfAudioLevel(ie){fo.A.publish("self",ie/to.Ep),br.A.publish(ie/to.Ep);const ye=this.store.getState();(0,Yn.lV)(ye)&&fo.A.publishAll("self",ie/to.Ep)}onUpdatedPeerAudioLevels(ie){const ye=this.store.getState();Object.entries(ie).forEach(Ze=>{let[$e,Dt]=Ze;fo.A.publish($e,Dt/to.Ep)}),(0,Yn.lV)(ye)&&Object.entries(ie).forEach(Ze=>{let[$e,Dt]=Ze;fo.A.publishAll($e,Dt/to.Ep)})}onPeerCameraActive(ie,ye){const Se=ie==="self";this.callLogger.info(`${Se?"Self":`Peer (${ie})`} camera turned ${ye?"on":"off"}`),this.dispatch((0,Gn.kT)({id:ie,isCameraEnabled:ye}))}onPeerScreenShareActive(ie,ye){const Se=ie==="self";this.callLogger.info(`${Se?"Self":`Peer (${ie})`} screenshare ${ye?"started":"stopped"}`)}onPeerDrawMessage(ie,ye){As.A.publish({id:ie,...ye})}onPeerDrawEnabled(ie,ye){this.dispatch((0,Gn.kT)({id:ie,isDrawEnabled:ye}))}onMediaStats(ie,ye){this.dispatch(_a({stats:ie,callId:ye}))}onAppMetrics(ie){let{appMetrics:ye,clientMetricReport:Se,screenshareRtcStats:Ze}=ie;const $e=(0,ft.Ay)({state:this.getState(),appMetrics:ye});Hn.A.publish({type:Xn.lx.AppMetrics,update:{huddleStateSnapshot:$e,clientMetricReport:Se,screenshareRtcStats:Ze}})}onDevicesUpdated(ie){this.dispatch((0,ks.Fb)(ie))}onOutputDeviceChanged(ie){this.callLogger.info(`Self audio output device changed: device: ${ie.id}`),this.dispatch((0,ks.AS)(ie))}onDeviceTypeBlocked(ie){}onTokenRefreshRequest(){}onScreenShareStopped(){this.dispatch(pa());const ye=(0,r.getClientStoreInstance)().getState(),Se=(0,os.Ak)(ye);!Se||(0,it.A)(Se)||Se.huddleState===vo.RJ.ENDING||this.dispatch((0,la.H)({focusKey:ca.Ay.HUDDLE_SIDEBAR_FOOTER}))}onScreenShareStarted(){this.callLogger.info("Self screenshare started"),this.dispatch((0,la.H)({focusKey:ca.Ay.HUDDLE_SIDEBAR_FOOTER}))}onSetNoOrLowInputAudioLevel(){Hn.A.publish({type:Xn.lx.NoAudio,update:{direction:"send",noAudio:!0}})}onClearNoOrLowInputAudioLevel(){Hn.A.publish({type:Xn.lx.NoAudio,update:{direction:"send",noAudio:!1}})}onSetNoOrLowOutputAudioLevel(){Hn.A.publish({type:Xn.lx.NoAudio,update:{direction:"recv",noAudio:!0}})}onClearNoOrLowOutputAudioLevel(){Hn.A.publish({type:Xn.lx.NoAudio,update:{direction:"recv",noAudio:!1}})}onAudioVideoDidStartConnecting(){this.recordTiming(Ms.dk)}onStart(){this.recordTiming(Ms.Nh)}onAudioVideoDidStart(){this.recordTiming(Ms.ck),(0,r.dispatchForClientStore)((0,Be._U)(Date.now()))}onAudioVideoDidStop(){const ie=(0,r.getClientStoreInstance)(),ye=(0,os.cN)(ie==null?void 0:ie.getState()),Se=Date.now(),Ze=Se-ye;(0,r.dispatchForClientStore)((0,Be.bV)(Se)),(0,r.dispatchForClientStore)((0,Be.qr)(Ze))}onInit(){this.recordTiming(Ms.cP)}onVoiceFocusLoaded(){const ie=(0,Js.Cy)({state:this.store.getState()}),ye=ie.measure(Ms.aN,Ms.pz);ie.count(Ms.pz,ye),this.recordTiming(Ms.qb)}onVoiceFocusStartLoading(){(0,Js.Cy)({state:this.store.getState()}).mark(Ms.aN)}recordTiming(ie){const ye=(0,Js.Cy)({state:this.store.getState()}),Se=ye.measure(Ms.qr,ie);return ye.count(ie,Se),Se}onMeetingEvents(ie,ye,Se,Ze,$e,Dt,Je){this.dispatch(wr({events:$e,callId:Ze,meetingId:ie,mediaRegion:ye,attendeeId:Se,isUnloading:Dt,isEnding:Je}))}onMaybeVoiceFocusInitialized(ie){const Se=(0,Js.Cy)({state:this.store.getState()}).measure(Ms.Bq,Ms.bv);(0,no.jm)({voiceFocusInitializedTime:ie,credentialsToVoiceFocusInitializedTime:Se})}onScreenShareError(ie){switch(this.callLogger.error(`an error occurred while initiating a screenshare: type: ${ie}`),ie){case Os.lD.NOT_FOUND_ERROR:{this.dispatch((0,Nt.CE)({alert:Nt.vT.SSNotFoundError}));break}case Os.lD.NOT_READABLE_ERROR:{this.dispatch((0,Nt.CE)({alert:Nt.vT.SSNotReadableError}));break}case Os.lD.ERROR:{this.dispatch((0,Nt.CE)({alert:Nt.vT.ScreenShareError}));break}default:break}}onNoiseSuppressionCPUThrottled(){this.dispatch((0,Nt.CE)({alert:Nt.vT.NoiseSuppressionCPUThrottled}))}onTranscriptionEvent(ie){this.dispatch(jr(ie))}setSelfAttendeeId(ie){this.selfAttendeeId=ie}maybeRecordFirstPresenceTime(){this.firstPresenceTimeMs>0||(this.firstPresenceTimeMs=this.recordTiming(Ms.dP),(0,no.jm)({firstPresenceTime:this.firstPresenceTimeMs}))}onAudioInputTrackMuted(){this.dispatch((0,Nt.CE)({alert:Nt.vT.AudioInputTrackMuted}))}onAudioInputTrackUnMuted(){this.dispatch((0,Nt.Gu)(Nt.vT.AudioInputTrackMuted))}onJukeboxRequest(ie){if(!(0,Yn.lV)(this.getState()))return;const Se=this.isDj(),$e=(0,Yr.Rl)(this.getState())[ie];!Se||!$e||((0,r.dispatchForClientStore)((0,Be.bk)({song:$e})),(0,r.dispatchForClientStore)((0,Be._u)({song:$e})),(0,r.dispatchForClientStore)((0,Be.WY)($e)))}onJukeboxStopRequest(){!(0,Yn.lV)(this.getState())||!this.isDj()||((0,r.dispatchForClientStore)((0,Be.JM)()),(0,r.dispatchForClientStore)((0,Be._u)({song:void 0})))}isDj(){var ie;const ye=(0,Ot.WR)(this.getState()),Se=(0,r.getClientStoreInstance)(),Ze=(ie=(0,os.Qn)(Se==null?void 0:Se.getState()))===null||ie===void 0?void 0:ie.callId,$e=(0,po.gV)(this.getState(),{callId:Ze}),Dt=(0,po.gV)(this.getState(),{callId:Ze,userId:ye});return!$e||!!Dt}maybeRemoveUserAsPending(ie){const ye=(0,r.getClientStoreInstance)(),Se=(0,os.E9)(ye==null?void 0:ye.getState());Se&&this.dispatch((0,kr.r_)({callId:Se,userId:ie}))}onContentShareDetailsUpdate(ie,ye,Se){this.dispatch((0,Gn.kT)({id:ie,isDrawEnabled:ye,contentShareSource:Se}))}constructor(ie){this.firstPresenceTimeMs=0,this.callLogger=(0,ho.Jt)("HUDDLE-DISPATCHER"),this.selfAttendeeId=void 0,this.dispatch=ie.dispatch,this.getState=ie.getState,this.store=ie}},"HuddleActionDispatcher");var Jr=e(5741354339),so=e(4066669727),js=e(8778137680),Xr=e(7434063642),Ta=e(4156857608);let Ut,No,Gs;const Zr="HUDDLE-SDK",qr="HUDDLE-CLIENT-MIDDLEWARE",Bs=(0,s.Wo)({label:qr}),ya=u(Ee=>{Ee.id==="self"&&(Ut==null||Ut.sendDrawMessage(Ee))},"onPeerDrawPublish");function Wo(Ee,ie,ye,Se){const Ze=(0,os.E9)(Ee),$e=(0,os.l4)(Ee),Dt=$e?(0,r.getStoreInstanceByTeamId)($e):void 0,Je=Dt?Dt.getState():void 0,qt=Je?(0,Ot.WR)(Je):void 0;Ze&&qt&&(Dt==null||Dt.dispatch(ie({user:qt,channel:Ze,fieldValue:ye,experimentHuddlesMultiDeviceGroupOn:Se})))}u(Wo,"maybeDispatchAwarenessUpdate");function oo(Ee,ie,ye){const Se=(0,os.E9)(Ee),Ze=(0,os.l4)(Ee),$e=Ze?(0,r.getStoreInstanceByTeamId)(Ze):void 0,Dt=$e?$e.getState():void 0,Je=Dt?(0,Ot.WR)(Dt):void 0;Se&&Je&&($e==null||$e.dispatch(ie({user:Je,channel:Se,experimentHuddlesMultiDeviceGroupOn:ye})))}u(oo,"maybeDispatchAwarenessRemove");const Ia=(0,ln.Ay)("dispatches actions to huddles SDK",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=u(()=>{const an=(0,os.l4)(Se),Bn=(0,r.getStoreInstanceByTeamId)(an);if(!Bn)return{};const Nn=Bn==null?void 0:Bn.getState();if(!Nn)return{};const as=(0,Gn.Ng)(Nn)||{};return{huddlesVideoActive:(0,Gn.vz)(Nn),self:as}},"getIsHuddlesVideoActive");switch(ye.type){case Be.kn.getType():{var $e;const an=ye.payload;No=an==null||($e=an.audioOutputRef)===null||$e===void 0?void 0:$e.current,Bo.A.getInstance().init();break}case Be.Sd.getType():{const{huddlesVideoActive:an,self:Bn}=Ze();Ut&&Ut.hasSession()&&(an?Ut.selfVideoEnabled(!0,!!(Bn!=null&&Bn.isScreenshareEnabled)):Ut.selfVideoEnabled(!0,!1));break}case Be._I.getType():{const{huddlesVideoActive:an,self:Bn}=Ze();Ut&&Ut.hasSession()&&(an?Ut.selfVideoEnabled(!1,!!(Bn!=null&&Bn.isScreenshareEnabled)):Ut.selfVideoEnabled(!1,!1));break}case Be.qW.getType():{Bs.info("BOOT","user agent:",navigator.userAgent);const an=ye.payload;let Bn=an.isStartMuted;if(!No){Bs.error("Missing audio output element");return}const{server:Nn,roomId:as}=an.callResult,cs=Nn.attendee.AttendeeId,ds=an.waitForHuddleStart,Cs=an.isPrejoin;(0,r.dispatchForClientStore)((0,Be.og)(Cs));const Ns=Cs?(0,os.Qn)(Se):(0,os.Ak)(Se),{teamId:jo}=Ns||{},zs=(0,S.getFocusedWorkspace)(Se),Hs=(0,r.getStoreInstanceByTeamId)(jo||zs),io=Hs?Hs.getState():void 0;if(!io){Bs.error("team state not available while initializing huddlesSdk. Returning early");return}Bs.info("client-huddles-middleware: Dispatching resetPeersStore"),Hs.dispatch((0,Gn.VL)({huddlesVideoActive:!0})),Hs.dispatch((0,Xr.X6)({})),Bn=Bn||(0,Le.ty)(io,"huddles_mute_by_default"),Bn&&(Bs.info("Start huddle as muted as specified in user prefs"),Hs.dispatch((0,Gn.kT)({id:"self",isMicrophoneEnabled:!1}))),Gs&&Gs.stop(!0),(0,Aa.Gc)(zs),Gs=new Ls.w,Gs.start(as);const Go=(0,Jr.u)();Go.then(Ys=>{Ys&&(Bs.info("Log reporter stopped"),Gs==null||Gs.stop(!0,!1),Gs=void 0)});const lo=new $r(Hs),{ttiTrace:Xs}=(0,ns.A)().getAllTraceHandlers();Ut=new Wt.Y(lo,No,Zr),(0,ss.Y)({name:ss.R1.HuddlesSdk,ref:Ut});const co=(0,Us.Y)(Nn.attendee.ExternalUserId),ja=gs(io,{server:Nn,isPrejoin:Cs});if(!ja){Bs.error("sdk options not available. Returning early");return}const zo=[],Mo=jo||zs;if(co&&Mo){const Ys=new so.SV({teamId:Mo,peerId:cs,topicId:co,isHuddlesAwarenessTimestampEnabled:(0,Yn.gG)(Hs.getState())});zo.push(Ys);const Ga=new so.MC({teamId:Mo});zo.push(Ga),so.PL.watch(Mo,co,Ys),(0,ss.Y)({name:ss.R1.ChimeChannelListener,ref:Ga}),(0,ss.Y)({name:ss.R1.ChimeChannelBroadcaster,ref:Ys})}Ut.initialize(ja,[Os.mT.MICROPHONE],!!Bn,ds,Go,zo).then(()=>{const Ys=Ut==null?void 0:Ut.getMeetingMediaRegion();Xs==null||Xs.setMediaRegionTag(Ys),Hn.A.publish({type:Xn.lx.SelectedMediaRegion,update:{mediaRegionSelected:Ys}}),Ut&&!Cs&&(Ut==null||Ut.maybeBindAudioOutputElement(),Ut==null||Ut.setIncludeSelfAndNoneActiveSpeaker(!0,!0))}),lo.setSelfAttendeeId(cs),As.A.subscribe(ya),Bs.info("User started huddle");break}case Be.pl.getType():{const an=ye.payload;if(Ut){const{waitForHuddleEnd:Bn}=an;Ut.shutdown(()=>{Bn.resolve()});const Nn=(0,S.getFocusedWorkspace)(Se),as=(0,r.getStoreInstanceByTeamId)(Nn);as==null||as.dispatch((0,yt.LL)(yt.vT.SpeakingWhenMuted));const cs=(0,Yn.pL)(as==null?void 0:as.getState()),ds=(0,os.E9)(Se);ds&&(oo(Se,js.RZ,cs),oo(Se,js.Lm,cs),so.PL.unwatch(ds)),As.A.unsubscribe(ya),Bs.info("User left huddle")}Ut=void 0,so.PL.unwatchAll(),(0,ss.N5)();break}case Be.I9.getType():{const an=ye.payload;if(Ut&&Ut.hasSession()&&(Ut.selfMicrophoneEnabled(an),an)){const Bn=(0,S.getFocusedWorkspace)(Se),Nn=(0,r.getStoreInstanceByTeamId)(Bn);Nn==null||Nn.dispatch((0,yt.LL)(yt.vT.SpeakingWhenMuted))}break}case Be.nU.getType():{const an=ye.payload;Ut&&Ut.hasSession()&&Ut.sendReacji(an.emoji,an.reactionType);break}case Be.M4.getType():{const an=ye.payload;if(Ut&&Ut.hasSession()){const Bn=(0,os.l4)(Se),Nn=(0,r.getStoreInstanceByTeamId)(Bn);if(!Nn)return;const as=(0,Yn.pL)(Nn.getState()),cs=(0,os.E9)(Se),ds=(0,Ot.WR)(Nn.getState());if(cs){var Dt;if(((Dt=(0,po.Fb)(Nn.getState(),cs,ds,as?"self":void 0))===null||Dt===void 0?void 0:Dt.field_value)===an)oo(Se,js.RZ,as),(0,os.Rv)(Se)&&an!=="speaker"&&(Nn==null||Nn.dispatch((0,Ta.a)({emoji:"speaker",reactionType:Vs.o.Sticker})));else{Wo(Se,js.z7,an,as);const{huddleEventsTrace:Ns}=(0,ns.A)().getAllTraceHandlers();Ns==null||Ns.update({name:Ss.p.REACTION,type:Ss.G.ONCE,tags:{reactionType:Vs.o.Sticker}})}}}break}case Be.so.getType():{const an=ye.payload;Ut&&Ut.hasSession()&&Ut.sendMuteRequest(an);break}case Be.ol.getType():{const an=ye.payload;Ut&&Ut.hasSession()&&Ut.setAGC(an);break}case Be.HC.getType():{const an=ye.payload;Ut&&Ut.hasSession()&&Ut.setNewPreferredDevice(an==null?void 0:an.id,an==null?void 0:an.type);break}case Be.yR.getType():{const an=ye.payload;Ut&&Ut.hasSession()&&Ut.setNoiseSuppression(an);break}case Be.Rb.getType():{const an=ye.payload;Ut&&Ut.hasSession()&&Ut.setVideoBackgroundEffect(an);break}case Be.YA.getType():{const{huddlesVideoActive:an,self:Bn}=Ze(),Nn=ye.payload,as=!!(Bn!=null&&Bn.isCameraEnabled);if(Ut&&Ut.hasSession()){var Je,qt;const cs=(0,os.l4)(Se),ds=(0,r.getStoreInstanceByTeamId)(cs);an?Ut.selfVideoEnabled(as,!0,Nn==null?void 0:Nn.mediaSourceId,Nn):Ut.selfVideoEnabled(!1,!0,Nn==null?void 0:Nn.mediaSourceId,Nn);let Cs=(Nn==null||(Je=Nn.mediaSourceId)===null||Je===void 0?void 0:Je.startsWith("screen:"))||!1;!(Nn==null||(qt=Nn.mediaSourceId)===null||qt===void 0)&&qt.startsWith("window:")&&(0,wn.LD)()&&(Cs=!0),Ut.selfDrawEnabled((0,Is.A)()&&Cs);const Ns=(0,wn.k0)((Nn==null?void 0:Nn.mediaSourceId)||"");Ut.sendContentShareDetails(Ns),ds==null||ds.dispatch((0,Gn.kT)({id:"self",isDrawEnabled:Cs,isCameraEnabled:as,contentShareSource:Ns}))}break}case Be.QZ.getType():{const{huddlesVideoActive:an,self:Bn}=Ze(),Nn=an?Bn.isCameraEnabled:!1;if(Ut&&Ut.hasSession()){const as=(0,os.l4)(Se),cs=(0,r.getStoreInstanceByTeamId)(as);Ut.selfVideoEnabled(!!Nn,!1),cs==null||cs.dispatch((0,Gn.kT)({id:"self",isDrawEnabled:!1,contentShareSource:void 0}))}break}case ks.Oh.getType():return Ut&&Ut.hasSession()?Ut.getScreenThumbnails():qe.S.resolve(null);case Be.nI.getType():{const an=ye.payload;if(Ut&&Ut.hasSession()){var kn;const Bn=(0,os.l4)(Se),Nn=(0,r.getStoreInstanceByTeamId)(Bn);if(!Nn)return;const as=(0,Yn.pL)(Nn.getState()),cs=(0,os.E9)(Se),ds=(0,Ot.WR)(Nn.getState());if(!cs)return;const Cs=(kn=(0,po.Fb)(Nn.getState(),cs,ds,as?"self":void 0))===null||kn===void 0?void 0:kn.field_value;return(an||Cs==="speaker")&&(0,r.dispatchForClientStore)((0,Ta.a)({emoji:"speaker",reactionType:Vs.o.Sticker})),Ut.toggleAllIncomingVideo(an)}return qe.S.resolve(null)}case Be.WY.getType():{const an=ye.payload;if(Ut&&Ut.hasSession()){const Bn=(0,os.l4)(Se);if(!(0,r.getStoreInstanceByTeamId)(Bn))return;(0,os.E9)(Se)&&Wo(Se,js.yT,an.key)}break}case Be.Lx.getType():{const an=ye.payload;Ut&&Ut.hasSession()&&Ut.sendJukeboxRequest(an.key);break}case Be.OA.getType():{Ut&&Ut.hasSession()&&Ut.sendJukeboxStopRequest();break}case Be.Db.getType():{Ut&&Ut.hasSession()&&Ut.sendRecordingStartNotification();break}case Be.bk.getType():{const an=ye.payload;if(Ut&&Ut.hasSession()){const Bn=(0,os.l4)(Se),Nn=(0,r.getStoreInstanceByTeamId)(Bn);if(!(0,Yn.lV)(Nn.getState()))return;Ut.startContentShareJukebox({song:an.song})}break}case Be.JM.getType():{if(Ut&&Ut.hasSession()){const an=(0,os.l4)(Se),Bn=(0,r.getStoreInstanceByTeamId)(an);if(!Bn||!(0,Yn.lV)(Bn.getState()))return;Ut.selfStopJukebox(),oo(Se,js.S)}break}case ks.e$.getType():{if(Ut&&Ut.hasSession()){const an=ye.payload.mediaResourceType;return Ut.maybeCheckSystemMediaAccess(an)}return qe.S.resolve(null)}case qs.d2.getType():{if(Ut&&Ut.hasSession()){const{payload:{tileId:an,videoRef:Bn,shouldAttachStream:Nn}}=ye;Ut.bindVideo(an,Bn.current,Nn)}break}case qs.gJ.getType():{if(Ut&&Ut.hasSession()){const{payload:{tileId:an,videoRef:Bn,shouldDetachStream:Nn}}=ye;Ut.unbindVideo(an,Bn.current,Nn)}break}case qs.WY.getType():{if(Ut&&Ut.hasSession()){const{payload:{tileId:an}}=ye;Ut.pauseVideo(an)}break}case qs.D8.getType():{if(Ut&&Ut.hasSession()){const{payload:{tileId:an}}=ye;Ut.unpauseVideo(an)}break}case Be.WM.getType():{const an=ye.payload;if(Ut&&Ut.hasSession()){const Bn=(0,os.l4)(Se),Nn=(0,r.getStoreInstanceByTeamId)(Bn),as=Nn==null?void 0:Nn.getState();if(!Nn){Bs.info("client-huddles-middleware","no team store found when user toggles video");return}if(!as){Bs.info("client-huddles-middleware","no team state found when user toggles video");return}const{huddlesVideoActive:cs}=Ze(),ds=(0,Gn.Ng)(as);let Cs;(an==null?void 0:an.setVideoEnabled)!==void 0?Cs=an.setVideoEnabled:Cs=!(ds!=null&&ds.isCameraEnabled),Cs?(Bs.info("client-huddles-middleware","user toggling ON video"),Ut.setCameraQuality(...(0,xs.cg)()),cs?Ut.maybeEnableSelfCamera({isScreenshareEnabled:ds.isScreenshareEnabled}):Ut.maybeEnableSelfCamera()):(Bs.info("client-huddles-middleware","user toggling OFF video"),cs?Ut.selfVideoEnabled(!1,!!(ds!=null&&ds.isScreenshareEnabled)):Ut.selfVideoEnabled(!1,!1),Nn.dispatch((0,Gn.kT)({id:"self",isCameraEnabled:!1})))}break}case qs.cn.getType():{if(Ut&&Ut.hasSession()){const{payload:{tileId:an}}=ye;return(Ut==null?void 0:Ut.videoTileHasStream(an))||!1}return qe.S.resolve(!1)}case Gn.xz.getType():{const{huddlesVideoActive:an,self:Bn}=Ze();Ut&&ye.payload.isContent&&(an?Ut.selfVideoEnabled(!!(Bn!=null&&Bn.isCameraEnabled),!1):Ut.selfVideoEnabled(!1,!1));break}case Be.Dj.getType():{Ut!=null&&Ut.hasSession()&&(Ut==null||Ut.initVideoPermission());break}case Be._H.getType():{if(Ut!=null&&Ut.hasSession()){const{videoElement:an,deviceId:Bn}=ye.payload;Ut.stopVideoPreviewForVideoInput(an),Ut.setCameraQuality(...(0,xs.cg)()),Ut.requestPreviewStreamForDeviceId(Bn,_s.lW.Camera,an)}break}case Be.yi.getType():{if(Ut!=null&&Ut.hasSession()){const an=ye.payload;Ut.stopVideoPreviewForVideoInput(an)}break}case Be.Rr.getType():{const{self:an}=Ze();if(Ut&&Ut.hasSession()){const Bn=(an==null?void 0:an.contentShareSource)||Kn.R.Unknown;if(Bn!==Kn.R.Unknown){const Nn=(an==null?void 0:an.isDrawEnabled)||!1;Ut.selfDrawEnabled((0,Is.A)()&&Nn),Ut.sendContentShareDetails(Bn);const as=(0,r.getStoreInstanceByTeamId)(ye.payload.teamId);as==null||as.dispatch((0,Gn.kT)({id:"self",isDrawEnabled:Nn}))}}break}case Be.HF.getType():{const an=ye.payload.isHostDrawEnabled,Bn=(0,r.getStoreInstanceByTeamId)(ye.payload.teamId);Bn==null||Bn.dispatch((0,Gn.kT)({id:"self",isHostDrawEnabled:an}));break}case Be.B5.getType():{Ut==null||Ut.handleClientOffline();break}case Be.f2.getType():{const an=ye.payload,{isStartMuted:Bn}=an,{teamId:Nn}=(0,os.Ak)(Se)||{},as=(0,S.getFocusedWorkspace)(Se),cs=(0,r.getStoreInstanceByTeamId)(Nn||as),{ttiTrace:ds}=(0,ns.A)().getAllTraceHandlers();if(ds==null||ds.setMediaRegionTag(Ut==null?void 0:Ut.getMeetingMediaRegion()),cs&&Bn&&Ut)return Ut.completePrejoin(an).then(()=>{cs.dispatch((0,Gn.kT)({id:"self",isMicrophoneEnabled:!1}))});if(Ut)return Ut.completePrejoin({});break}case Be.xq.getType():{const an=ye.payload.contentViewType,Bn=ye.payload.contentViewConfig;if(Ut&&Ut.hasSession()&&(0,os.E9)(Se)){var $n;const as=(0,os.l4)(Se),cs=(0,r.getStoreInstanceByTeamId)(as);if(!cs)return;const ds=(0,Yn.pL)(cs.getState());if(an!==Vs.cM.Screenshare)oo(Se,js.Lm,ds);else if(!(Bn==null||($n=Bn.item)===null||$n===void 0)&&$n.id){let Cs;if(Bn.item.id==="self")Cs=(0,Ot.WR)(cs.getState());else{var hs;Cs=(hs=(0,Gn.jB)(cs.getState(),Bn.item.id))===null||hs===void 0?void 0:hs.userId}Wo(Se,js.fv,Cs,ds)}}break}default:return ie(ye)}return null});Ia.meta={name:"createMiddleware",key:"createMiddlewareclientHuddlesMiddleware",description:"dispatches actions to huddles SDK"};const ei=Ia;Object.defineProperty({huddlesSdk:Ut},"huddlesSdk",{get:()=>Ut,set:Ee=>{Ut=Ee}});var go=e(4653418008),Ao=e(3328068409);const Ma=(0,ln.Ay)("Broadcast client theme state to other stores",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e);return mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ao.to)(Je),broadcastAction:Je=>(0,go.yg)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ao.FW)(Je),broadcastAction:Je=>(0,go.kl)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ao.VD)(Je),broadcastAction:Je=>(0,go.LA)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,Ao.pg)(Je),broadcastAction:Je=>(0,go.Th)(Je)}),Ze});Ma.meta={name:"createMiddleware",key:"createMiddlewarebroadcastClientThemeMiddleware",description:"Broadcast client theme state to other stores"};const ti=Ma;var ni=e(1201539379),si=e(4172221507),oi=e(7331033739),ai=e(8707579690),ri=e(2779520532),ii=e(7128275929),li=e(9341298);const Ca=(0,ln.Ay)("Broadcast view layout state across all teams",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e);return mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>{var qt,kn;return`${Je==null||(qt=Je.viewLayout)===null||qt===void 0?void 0:qt.sidebarWidthIntent}-${Je==null||(kn=Je.viewLayout)===null||kn===void 0?void 0:kn.sidebarWidthMode}`},broadcastAction:Je=>{const qt=Je.split("-");return(0,ri.R)({sidebarWidthIntent:Number(qt[0]),sidebarWidthMode:qt[1]})}}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>{var qt,kn;return`${Je==null||(qt=Je.viewLayout)===null||qt===void 0?void 0:qt.sidebarWideWidthIntent}-${Je==null||(kn=Je.viewLayout)===null||kn===void 0?void 0:kn.sidebarWideWidthMode}`},broadcastAction:Je=>{const qt=Je.split("-");return(0,li.q)({sidebarWideWidthIntent:Number(qt[0]),sidebarWideWidthMode:qt[1]})}}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>{var qt,kn;return`${Je==null||(qt=Je.viewLayout)===null||qt===void 0?void 0:qt.sidebarExtraWideWidthIntent}-${Je==null||(kn=Je.viewLayout)===null||kn===void 0?void 0:kn.sidebarExtraWideWidthMode}`},broadcastAction:Je=>{const qt=Je.split("-");return(0,ii.a)({sidebarExtraWideWidthIntent:Number(qt[0]),sidebarExtraWideWidthMode:qt[1]})}}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,fe.Vo)(Je),broadcastAction:Je=>(0,si.F)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,fe.v8)(Je),broadcastAction:Je=>(0,ni.mV)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,fe.r8)(Je),broadcastAction:Je=>(0,oi.v)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>{var qt,kn;return`${Je==null||(qt=Je.viewLayout)===null||qt===void 0?void 0:qt.secondaryWidthIntent}-${Je==null||(kn=Je.viewLayout)===null||kn===void 0?void 0:kn.secondaryWidthMode}`},broadcastAction:Je=>{const qt=Je.split("-");return(0,ai.J)({secondaryWidthIntent:Number(qt[0]),secondaryWidthMode:qt[1]})}}),Ze});Ca.meta={name:"createMiddleware",key:"createMiddlewarebroadcastViewLayoutMiddleware",description:"Broadcast view layout state across all teams"};const ci=Ca;var ao=e(2591023465),xo=e(3674298388),eo=e(965001959);const Oa=(0,_.Ay)("Set the user-specified sidebar width and mode",(Ee,ie,ye)=>{let{inspectorWidthIntent:Se,inspectorWidthMode:Ze}=ye;(0,q.q9)(eo.j0,Se),(0,q.q9)(eo.mu,Ze),Ee((0,ao.lT)({inspectorWidthIntent:Se,inspectorWidthMode:Ze}))});Oa.meta={name:"createThunk",key:"createThunksetInspectorColumn",description:"Set the user-specified sidebar width and mode"};const Da=(0,_.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes",(Ee,ie,ye)=>{(0,q.q9)(eo.jG,ye),Ee((0,ao.KY)(ye))});Da.meta={name:"createThunk",key:"createThunksetIsSidebarVisible",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes"};const Sa=(0,_.Ay)("Set the user-specified sidebar width and mode",(Ee,ie,ye)=>{let{sidebarWidthIntent:Se,sidebarWidthMode:Ze}=ye;(0,q.q9)(eo.ke,Se),(0,q.q9)(eo.ts,Ze),Ee((0,ao.SP)({sidebarWidthIntent:Se,sidebarWidthMode:Ze}))});Sa.meta={name:"createThunk",key:"createThunksetSidebarColumn",description:"Set the user-specified sidebar width and mode"};const Pa=(0,_.Ay)("Sets whether or not the user prefers a responsive sidebar",(Ee,ie,ye)=>{(0,H.A)(ie())&&(0,q.q9)(eo.Lb,ye),Ee((0,ao.iJ)(ye))});Pa.meta={name:"createThunk",key:"createThunksetUserPrefersResponsiveSidebar",description:"Sets whether or not the user prefers a responsive sidebar"};const Ra=(0,ln.Ay)("Broadcast client theme state to other stores",(Ee,ie,ye)=>{const Se=Ee.getState(),Ze=ie(ye),$e=Ee.getState(),Dt=(0,S.getBootedWorkspaces)($e);return mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>{var qt,kn;return`${Je==null||(qt=Je.workspaceLayout)===null||qt===void 0?void 0:qt.sidebarWidthIntent}-${Je==null||(kn=Je.workspaceLayout)===null||kn===void 0?void 0:kn.sidebarWidthMode}`},broadcastAction:Je=>{const qt=Je.split("-");return Sa({sidebarWidthIntent:Number(qt[0]),sidebarWidthMode:qt[1]})}}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,xo.Vo)(Je),broadcastAction:Je=>Da(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,xo.r8)(Je),broadcastAction:Je=>(0,ao.vm)(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>(0,xo.xx)(Je),broadcastAction:Je=>Pa(Je)}),mn({state:$e,prevState:Se,workspaces:Dt,broadcastSelector:Je=>{var qt,kn;return`${Je==null||(qt=Je.workspaceLayout)===null||qt===void 0?void 0:qt.inspectorWidthIntent}-${Je==null||(kn=Je.workspaceLayout)===null||kn===void 0?void 0:kn.inspectorWidthMode}`},broadcastAction:Je=>{const qt=Je.split("-");return Oa({inspectorWidthIntent:Number(qt[0]),inspectorWidthMode:qt[1]})}}),Ze});Ra.meta={name:"createMiddleware",key:"createMiddlewarebroadcastWorkspaceLayoutMiddleware",description:"Broadcast client theme state to other stores"};const di=Ra;var ui=e(9524650809),La=e(1649982175),Ua=e(352142497),ro=e(2870224675),_i=e(9932860381),ba=e(3034856104);const mi=50;function ka(){return(0,ui.A)("tabSoda_")}u(ka,"generateTabSodaTabId");function hi(){return{activeTab:void 0,tabs:{},tabOrder:[]}}u(hi,"getInitialState");function Ei(Ee,ie){if(Ee&&ie){var ye,Se,Ze,$e;const qt=(ye=Ee[Ee[vs.jf]])===null||ye===void 0?void 0:ye.primary,kn=(Se=Ee[Ee[vs.jf]])===null||Se===void 0?void 0:Se.secondary,$n=(Ze=ie[ie[vs.jf]])===null||Ze===void 0?void 0:Ze.primary,hs=($e=ie[ie[vs.jf]])===null||$e===void 0?void 0:$e.secondary;if(Ee.teamId===ie.teamId&&Ee[vs.jf]===ie[vs.jf]&&(qt==null?void 0:qt.id)===($n==null?void 0:$n.id)&&(kn==null?void 0:kn.id)===(hs==null?void 0:hs.id)){var Dt,Je;return!((qt==null?void 0:qt.viewType)===Ua.D.Thread&&($n==null?void 0:$n.viewType)===Ua.D.Thread&&(qt==null||(Dt=qt.params)===null||Dt===void 0?void 0:Dt.threadId)!==($n==null||(Je=$n.params)===null||Je===void 0?void 0:Je.threadId))}}return!1}u(Ei,"areViewsSame");function Ba(Ee){let{reducerState:ie,entry:ye,eventType:Se}=Ee,Ze=ie.activeTab,$e=[...ie.tabOrder];Ze||(Ze=ka(),$e.push(Ze));const Dt=ie.tabs[Ze]||[];let Je={...ie.tabs};if(Je[Ze]=[ye,...Se==="replace"?Dt.slice(1):Dt].slice(0,mi),!Dt.length){const qt=ie.tabOrder.find(kn=>{var $n;return Ei(ye,($n=ie.tabs[kn])===null||$n===void 0?void 0:$n[0])});qt&&Ze!==qt&&($e=ie.tabOrder.filter(kn=>kn!==Ze),Je=(0,La.A)(ie.tabs,Ze),Ze=qt)}return{activeTab:Ze,tabs:Je,tabOrder:$e}}u(Ba,"getTabSodaStateFromWindowHistoryEvent");const vi=hi(),fi=(0,Un.vy)({},vi,{persistenceEnabled:!1,storeKey:"tabSoda"}).on(ro.nz,(Ee,ie)=>{let{setAsActive:ye}=ie;const Se=ka(),Ze={...Ee.tabs,[Se]:[]},$e=[...Ee.tabOrder],Dt=Ee.activeTab?$e.indexOf(Ee.activeTab):-1;return $e.splice(Dt+1,0,Se),{activeTab:ye?Se:Ee.activeTab,tabs:Ze,tabOrder:$e}}).on(ro.yw,(Ee,ie)=>({...Ee,activeTab:ie})).on(ro.oT,(Ee,ie)=>{const{activeTab:ye,tabs:Se,tabOrder:Ze}=Ee;let $e=ye;ie===ye&&($e=(0,_i.fe)(ye,Ze));const Dt=[...Ze],Je=Ze.indexOf(ie);Dt.splice(Je,1);const qt={...Se};return delete qt[ie],{tabs:qt,tabOrder:Dt,activeTab:$e}}).on(ro.ez,(Ee,ie)=>{const ye=Ee.tabs[ie]||[],Se={...Ee.tabs,[ie]:[...ye.slice(1)]};return{...Ee,tabs:Se}}).on(ro.Uz,(Ee,ie)=>({...Ee,tabOrder:ie})).on(On.y2,(Ee,ie)=>{let{entry:ye}=ie;return(0,ba.H)(ye)?Ba({eventType:"push",reducerState:Ee,entry:ye}):Ee}).on(On.HQ,(Ee,ie)=>{let{entry:ye}=ie;return(0,ba.H)(ye)?Ba({eventType:"replace",reducerState:Ee,entry:ye}):Ee});var pi=e(6027162153),gi=e(9087248458),Ai=e(5503876160),Ks=e(1185969935);const Ti={bootedWorkspaces:[],failedToBootWorkspaces:[],needs2FASetup:[],needsToAcceptCustomTOS:[],userNotMemberOfAnyWorkspaceInOrg:[],userRequiresMobileLogin:[],migratingWorkspaces:{},completedMigrationWorkspaces:[],accessLimitedWorkspaces:[],recentlyFocusedWorkspaces:[],navigateToUnbootedWorkspace:{},removedWorkspaces:[]},yi="WORKSPACES",Na=16,Ii=(0,Ks.Ay)({},Ti,{storeKey:"workspaces",persistenceEnabled:!0}).on(l.initialize,(Ee,ie)=>Mi(Ee,ie)).on(l.setDidBootAllWorkspaces,Ee=>({...Ee,didBootAllWorkspaces:!0})).on(l.setWorkspaceOrder,(Ee,ie)=>Ci(Ee,ie)).on(l.setWorkspaceBooted,(Ee,ie)=>Oi(Ee,ie)).on(l.setWorkspaceFailedToBoot,(Ee,ie)=>Di(Ee,ie)).on(l.setWorkspaceNeeds2FASetup,(Ee,ie)=>Si(Ee,ie)).on(l.setWorkspaceNeedsToAcceptCustomTOS,(Ee,ie)=>Pi(Ee,ie)).on(l.setNavigateToUnbootedWorkspace,(Ee,ie)=>({...Ee,navigateToUnbootedWorkspace:ie})).on(l.setWorkspaceIsMigrating,(Ee,ie)=>Ri(Ee,ie)).on(l.setWorkspaceMigrationIsComplete,(Ee,ie)=>Li(Ee,ie)).on(l.setWorkspaceIsAccessLimited,(Ee,ie)=>Ui(Ee,ie)).on(l.setUserNotMemberOfAnyWorkspaceInOrg,(Ee,ie)=>bi(Ee,ie)).on(l.setUserRequiresMobileLogin,(Ee,ie)=>ki(Ee,ie)).on(l.addWorkspace,function(Ee){let{id:ie,meta:ye}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ie||!ye)throw new Error("'id' and 'meta' are both required when adding a workspace");if(Ee.allWorkspaces.includes(ie))return(0,s.Wo)({label:yi}).warn(`Cannot add workspace; it is already present: ${ie}`),Ee;const{allWorkspaces:Se,workspacesMeta:Ze}=Ee;return{...Ee,allWorkspaces:[...Se,ie],workspacesMeta:{...Ze,[ie]:ye}}}).on(l.updateWorkspaceMeta,function(Ee){let{id:ie,meta:ye}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{workspacesMeta:Se}=Ee;if(!Se[ie])throw new Error(`Cannot update workspace meta for ${ie}; no such team`);return{...Ee,workspacesMeta:{...Se,[ie]:ye}}}).on(l.internalSetFocusedWorkspaceType,(Ee,ie)=>({...Ee,focusedWorkspace:ie,recentlyFocusedWorkspaces:Bi(Ee.recentlyFocusedWorkspaces,ie)})).on(l.internalRemoveWorkspaceType,(Ee,ie)=>({...Ee,allWorkspaces:(0,pi.A)(Ee.allWorkspaces,ie)})).on(l.addRemovedWorkspace,(Ee,ie)=>Ni(Ee,ie));function Mi(Ee){let{focusedWorkspace:ie,allWorkspaces:ye,workspacesMeta:Se}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee.allWorkspaces)throw new Error("workspaces-store:initialize cannot be called more than once");if(!ie)throw new Error("workspaces-store:initialize must be given a focusedWorkspace");if(!ye)throw new Error("workspaces-store:initialize must be given an array of workspaces");if(ye.indexOf(ie)<0)throw new Error(`workspaces-store:initialize ${ie} is not one of the valid workspaces: ${ye}`);return{...Ee,focusedWorkspace:ie,allWorkspaces:ye,workspacesMeta:Se,recentlyFocusedWorkspaces:[ie]}}u(Mi,"initializeWorkspacesState");function Ci(Ee,ie){const ye=Ee.allWorkspaces;if((0,gi.A)(ye,ie).length!==ye.length)throw new Error("workspaces-store:setWorkspaceOrder can only re-order items in the array; additions or removals are not allowed");return(0,q.q9)("orderedTeamIds",ie),{...Ee,allWorkspaces:ie}}u(Ci,"updateWorkspaceOrder");function Oi(Ee,ie){const ye=Ee.bootedWorkspaces.includes(ie)?Ee.bootedWorkspaces:[...Ee.bootedWorkspaces,ie];return{...Ee,bootedWorkspaces:ye}}u(Oi,"updateWorkspaceBooted");function Di(Ee,ie){if(!ie)return Ee;const ye=Ee.failedToBootWorkspaces.includes(ie)?Ee.failedToBootWorkspaces:[...Ee.failedToBootWorkspaces,ie];return{...Ee,failedToBootWorkspaces:ye}}u(Di,"updateWorkspaceFailedToBoot");function Si(Ee,ie){if(!ie)return Ee;const ye=Ee.needs2FASetup.includes(ie)?Ee.needs2FASetup:[...Ee.needs2FASetup,ie];return{...Ee,needs2FASetup:ye}}u(Si,"updateWorkspaceNeeds2FASetup");function Pi(Ee,ie){if(!ie)return Ee;const ye=Ee.needsToAcceptCustomTOS.find(Se=>{let{teamId:Ze}=Se;return ie.teamId===Ze})?Ee.needsToAcceptCustomTOS:[...Ee.needsToAcceptCustomTOS,ie];return{...Ee,needsToAcceptCustomTOS:ye}}u(Pi,"updateWorkspaceNeedsToAcceptCustomTOS");function Ri(Ee,ie){let{teamId:ye,migrationId:Se,canViewMigrationStatus:Ze}=ie;if(!ye)return Ee;const{migratingWorkspaces:$e}=Ee;return{...Ee,migratingWorkspaces:{...$e,[ye]:{migrationId:Se,canViewMigrationStatus:Ze}}}}u(Ri,"updateWorkspaceIsMigrating");function Li(Ee,ie){if(!ie)return Ee;const ye=Ee.completedMigrationWorkspaces.includes(ie)?Ee.completedMigrationWorkspaces:[...Ee.completedMigrationWorkspaces,ie];return{...Ee,completedMigrationWorkspaces:ye}}u(Li,"updateWorkspaceMigrationIsComplete");function Ui(Ee,ie){if(!ie)return Ee;const ye=Ee.accessLimitedWorkspaces.includes(ie)?Ee.accessLimitedWorkspaces:[...Ee.accessLimitedWorkspaces,ie];return{...Ee,accessLimitedWorkspaces:ye}}u(Ui,"updateWorkspaceIsAccessLimited");function bi(Ee,ie){if(!ie)return Ee;const ye=Ee.userNotMemberOfAnyWorkspaceInOrg.includes(ie)?Ee.userNotMemberOfAnyWorkspaceInOrg:[...Ee.userNotMemberOfAnyWorkspaceInOrg,ie];return{...Ee,userNotMemberOfAnyWorkspaceInOrg:ye}}u(bi,"updateUserNotMemberOfAnyWorkspaceInOrg");function ki(Ee,ie){if(!ie)return Ee;const ye=Ee.userRequiresMobileLogin.includes(ie)?Ee.userRequiresMobileLogin:[...Ee.userRequiresMobileLogin,ie];return{...Ee,userRequiresMobileLogin:ye}}u(ki,"updateUserRequiresMobileLogin");function Bi(Ee,ie){const ye=[ie,...Ee.filter(Se=>Se!==ie)];return ye.length>Na?(0,Ai.A)(ye,Na):ye}u(Bi,"updateRecentlyFocusedWorkspaces");function Ni(Ee,ie){if(!ie)return Ee;const ye=Ee.removedWorkspaces.includes(ie)?Ee.removedWorkspaces:[...Ee.removedWorkspaces,ie];return{...Ee,removedWorkspaces:ye}}u(Ni,"updateRemovedWorkspaces");var Wi=e(8749931423),xi=e(7206394193),Fi=e(773865333),Ki=e(7156104699),Hi=e(8333842125),wi=e(582577127),Vi=e(2732935554),ji=e(3034787354),Gi=e(4614661813),zi=e(2140362605);const Fo=(0,zi.Ay)("sets the client side effect map on the store");Fo.meta={name:"createAction",key:"createActionsetClientSideEffectsMap",description:"sets the client side effect map on the store"};const Yi={clientSideEffectsMap:{}},Qi=(0,Ks.Ay)({},Yi,{storeKey:"clientSideEffects",persistenceEnabled:!1}).on(Fo,(Ee,ie)=>({...Ee,clientSideEffectsMap:ie}));var $i=e(5923036663),Ji=e(6168781067),Xi=e(7902571278),Zi=e(56562029);const qi={isHuddlesEnabled:!1,channelToJoinCredentials:{},showDiscoveryBanner:!1,screenshareActivePanel:0,songPlaying:void 0,jukeboxLocalVolume:1,canRenderActiveInviteCardInSidebar:!0,isHuddleWindowFocused:!1,isHuddleWindowOpen:!1,isHuddleMiniPlayerHidden:!1,isAudioOnlyModeEnabled:!1,wasCameraEnabledWhenAudioOnlyModeWasActivated:!1,wasJoinedFromPrejoin:!1,unreadInvites:[]},el=(0,Ks.Ay)({},qi,{storeKey:"clientHuddles",persistenceEnabled:!1}).on(Be.VU,(Ee,ie)=>Ee.isHuddlesEnabled?Ee:{...Ee,isHuddlesEnabled:ie}).on(Be.xf,(Ee,ie)=>({...Ee,mostRecentHuddle:ie})).on(Be.Rh,(Ee,ie)=>{const{mostRecentHuddle:ye}=Ee;if(!ye||ie.teamId&&ie.teamId!==ye.teamId||ie.channelId&&ie.channelId!==ye.channelId)return Ee;const Se={...Ee,mostRecentHuddle:{...ye,...ie}},Ze=Se.mostRecentHuddle;return Ze&&(0,s.Wo)().info(Qn.o7,`updateActiveHuddleReference huddleState ${Ze.huddleState}, substate ${Ze.huddleSubState}, optimisticState ${Ze.optimisticHuddleState}`),Se}).on(Be.Jc,(Ee,ie)=>{const{mostRecentHuddle:ye}=Ee;return!ye||ie===ye.channelId?Ee:{...Ee,mostRecentHuddle:{...ye,channelId:ie}}}).on(Be.hB,(Ee,ie)=>({...Ee,activeInvite:ie,unreadInvites:[...Ee.unreadInvites,{invite:ie,receivedTimestampMs:Date.now()}]})).on(Be.fP,(Ee,ie)=>{let{teamId:ye,markBeforeMs:Se}=ie;const Ze=Ee.unreadInvites.filter($e=>$e.invite.teamId!==ye||$e.receivedTimestampMs>Se);return Ee.unreadInvites.length===Ze.length?Ee:{...Ee,unreadInvites:Ze}}).on(Be.u8,(Ee,ie)=>{var ye;return{...Ee,unreadInvites:Ee.unreadInvites.filter(Se=>Se.invite.channelId!==ie),activeInvite:((ye=Ee.activeInvite)===null||ye===void 0?void 0:ye.channelId)!==ie?Ee.activeInvite:void 0}}).on(Be.Ko,(Ee,ie)=>Ee.forceMiniPanelVisible===ie?Ee:{...Ee,forceMiniPanelVisible:ie}).on(Be.Yi,(Ee,ie)=>{let{channelId:ye,joinCredentials:Se,expiry:Ze,fromInvite:$e}=ie;var Dt;if(!ye||!Se)return Ee;const Je=Ee.channelToJoinCredentials;Je[ye]={credentials:Se,expiry:Ze,fromInvite:$e};const qt=(Dt=Ee.activeInvite)===null||Dt===void 0?void 0:Dt.teamId;return qt&&(0,Js.Cy)({state:(0,r.getStateByTeamId)(qt)}).count(Ms.ir),{...Ee,channelToJoinCredentials:Je}}).on(Be.WB,(Ee,ie)=>{let{channelId:ye}=ie;if(!ye)return Ee;if(Ee.channelToJoinCredentials[ye]){var Se;const Ze=(Se=Ee.activeInvite)===null||Se===void 0?void 0:Se.teamId;Ze&&(0,Js.Cy)({state:(0,r.getStateByTeamId)(Ze)}).count(Ms.sQ)}return{...Ee,channelToJoinCredentials:(0,La.A)(Ee.channelToJoinCredentials,[ye])}}).on(Be.aO,(Ee,ie)=>Ee.showDiscoveryBanner===ie?Ee:{...Ee,showDiscoveryBanner:ie}).on(Be.Ag,(Ee,ie)=>Ee.isLoungeMusicPlaying===ie?Ee:{...Ee,isLoungeMusicPlaying:!!ie}).on(Be._U,(Ee,ie)=>Ee.lastStartTs===ie?Ee:{...Ee,lastStartTs:ie}).on(Be.bV,(Ee,ie)=>Ee.lastEndTs===ie?Ee:{...Ee,lastEndTs:ie}).on(Be.qr,(Ee,ie)=>Ee.lastDurationTs===ie?Ee:{...Ee,lastDurationTs:ie}).on(Be.Gx,(Ee,ie)=>Ee.screenshareActivePanel===ie?Ee:{...Ee,screenshareActivePanel:ie}).on(Be.cx,Ee=>({...Ee,screenshareActivePanel:0,songPlaying:void 0,isHuddleWindowFocused:!1,isHuddleWindowOpen:!1,isHuddleMiniPlayerHidden:!1,isAudioOnlyModeEnabled:!1,wasCameraEnabledWhenAudioOnlyModeWasActivated:!1,wasJoinedFromPrejoin:!1})).on(Be._u,(Ee,ie)=>{let{song:ye}=ie;return Ee.songPlaying===(ye==null?void 0:ye.key)?Ee:{...Ee,songPlaying:ye==null?void 0:ye.key}}).on(Be.nw,(Ee,ie)=>Ee.canRenderActiveInviteCardInSidebar===ie?Ee:{...Ee,canRenderActiveInviteCardInSidebar:ie}).on(Be.o9,(Ee,ie)=>Ee.isHuddleWindowFocused===ie?Ee:{...Ee,isHuddleWindowFocused:ie}).on(Be.TK,(Ee,ie)=>Ee.isHuddleWindowOpen===ie?Ee:{...Ee,isHuddleWindowOpen:ie}).on(Be.kg,(Ee,ie)=>Ee.isAudioOnlyModeEnabled===ie?Ee:{...Ee,isAudioOnlyModeEnabled:ie}).on(Be.Hg,(Ee,ie)=>Ee.wasCameraEnabledWhenAudioOnlyModeWasActivated===ie?Ee:{...Ee,wasCameraEnabledWhenAudioOnlyModeWasActivated:ie}).on(Be.t2,(Ee,ie)=>Ee.isHuddleMiniPlayerHidden===ie?Ee:{...Ee,isHuddleMiniPlayerHidden:!!ie}).on(Be.og,(Ee,ie)=>Ee.wasJoinedFromPrejoin===ie?Ee:{...Ee,wasJoinedFromPrejoin:!!ie}),Dl=100,Wa="client-ia-history",tl=[...Object.values(Qo.mH)||[]];var To=e(1521690892);const nl=u(()=>{try{const Ee=localStorage.getItem(Wa);return Ee?JSON.parse(Ee):[]}catch(Ee){return(0,s.Wo)().error("Failed to read IA history from storage",Ee),[]}},"readStackFromStorage"),yo=u(Ee=>{try{localStorage.setItem(Wa,JSON.stringify(Ee))}catch(ie){(0,s.Wo)().error("Failed to write IA history to storage",ie)}},"writeStackToStorage"),sl=(0,Ks.Ay)({},{stack:nl()},{storeKey:"iaHistory",persistenceEnabled:!1}).on(To.nb,(Ee,ie)=>{if(!ie||tl.includes(ie==null?void 0:ie.primaryView))return Ee;const ye=1e3,Se=[ie].concat(Ee.stack).slice(0,ye);return window.setTimeout(()=>yo(Se),0),{stack:Se}}).on(To.JG,(Ee,ie)=>{const ye=Ee.stack.indexOf(ie);if(ye===-1)return Ee;const Se=Ee.stack.slice();return Se.splice(ye,1),window.setTimeout(()=>yo(Se),0),{stack:Se}}).on(To.Si,Ee=>{if(!Ee.stack)return Ee;const ie=Ee.stack.slice(0,1);return window.setTimeout(()=>yo(ie),0),{stack:ie}}).on(To.kM,()=>{const Ee=[];return yo(Ee),{stack:Ee}}),ol=!0,xa=(0,Ks.Ay)({},ol,{storeKey:"isClient",persistenceEnabled:!1});xa.meta={name:"createReducer",key:"createReducerisClientReducer"};const al=xa;var rl=e(8572697916);const il={navigateListenersRunOnClientMount:0},ll=(0,Ks.Ay)({},il,{storeKey:"navigate",persistenceEnabled:!1}).on(rl.C,Ee=>({...Ee,navigateListenersRunOnClientMount:Ee.navigateListenersRunOnClientMount+1}));let Fa;try{var Ko;Fa=(Ko=(0,q.W6)(de.Vb))!==null&&Ko!==void 0?Ko:void 0}catch{}let Ka;try{var Ho;Ka=(Ho=(0,q.W6)(de._J))!==null&&Ho!==void 0?Ho:void 0}catch{}let Ha;try{var wo;Ha=(wo=(0,q.W6)(de.UY))!==null&&wo!==void 0?wo:void 0}catch{}const cl={invertedSidebar:Fa,peeksEnabledOnMouseEnter:Ka,zoom:Ha},dl=(0,Ks.Ay)({},cl,{storeKey:"nonBBMSettings",persistenceEnabled:!1}).on(te.p$,(Ee,ie)=>({...Ee,invertedSidebar:ie})).on(te.rB,(Ee,ie)=>({...Ee,peeksEnabledOnMouseEnter:ie})).on(te.x8,(Ee,ie)=>({...Ee,zoom:ie}));var ul=e(1838435986),_l=e(3180420025),Io=e(1302213854);const ml={shouldLogAppBootMetrics:!0,shouldLogTeamSwitchMetrics:!1,shouldLogTTVMetrics:!0,shouldLogTTUMetrics:!0},hl=(0,Ks.Ay)({},ml,{storeKey:"telemetry",persistenceEnabled:!0}).on(Io.C7,(Ee,ie)=>({...Ee,shouldLogAppBootMetrics:ie})).on(Io.Mb,(Ee,ie)=>({...Ee,shouldLogTeamSwitchMetrics:ie})).on(Io.Ln,(Ee,ie)=>({...Ee,shouldLogTTVMetrics:ie})).on(Io.UM,(Ee,ie)=>({...Ee,shouldLogTTUMetrics:ie}));var Vo=e(2696160384);const wa={isDocked:!1,miniPlayerConfig:{fileId:""}},El=(0,Ks.Ay)({},wa,{storeKey:"videoClips",persistenceEnabled:!1}).on(Vo.FI,(Ee,ie)=>({...Ee,isDocked:ie})).on(Vo.D_,(Ee,ie)=>{let{fileId:ye,teamId:Se,mediaId:Ze,channelId:$e,threadTs:Dt,timeElapsed:Je,isPlaying:qt}=ie;return{...Ee,miniPlayerConfig:{fileId:ye,teamId:Se,mediaId:Ze,channelId:$e,threadTs:Dt,timeElapsed:Je,isPlaying:qt}}}).on(Vo.Sr,Ee=>({...Ee,...wa}));var vl=e(9813790040),fl=e(4256476552),pl=e(894072650);function Va(){let{extraMiddlewares:Ee=[],customEnhancers:ie=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const ye=(0,Hi.A)({teamOrEnterpriseId:"client",middlewares:[...Ee,xi.A,n.P,Fi.A,Sn,Tt,ti,di,ci,ms,ls,_n,nn,Ve,Ki.N,ei],customEnhancers:ie}),Se=(0,Wi.A)({workspaces:Ii,window:fl.A,telemetry:hl,connectivity:Ji.A,accessibility:ji.A,accessibilityPersistent:Vi.A,desktop:Xi.A,clientTheme:$i.A,iaHistory:sl,mainWindowHistory:dt,isClient:al,workspaceLayout:pl.A,viewLayout:vl.A,noop:ul.A,navigate:ll,clientHuddles:el,clientSideEffects:Qi,recents:Rs,overlays:_l.y,tabSoda:fi,fullscreen:Zi.G,bbm:Gi.Y,videoClips:El,nonBBMSettings:dl});return(0,t.Yl)(Se,ye)}u(Va,"createClientStore");function gl(){const Ee=(0,r.getClientStoreInstance)();if(Ee)return(0,s.Wo)().warn("[CLIENT-STORE]","we\u2019ve called configureClientStore before and already have an instance. This is likely a programming error."),Ee;const ie=Va();(0,r.setClientStoreInstance)(ie);const{clientSideEffectsMap:ye,sideEffectsMap:Se}=(0,wi.g)(jt);if(Object.keys(Se).length)throw new Error("Passed non-client side effects into client store. This is a programming error and the app will not work properly.");return ie.dispatch(Fo(ye)),ie}u(gl,"configureClientStore");const Ul={createClientStore:Va}},3803432550:(j,p,e)=>{"use strict";e.d(p,{x:()=>_});var t=e(8148939499),n=e(6508028729),s=e(4423055085),a=e(4496040127),c=e(2051872845),o=e(1535672935),i=e(9012396182),l=e(6533394955);function _(r){if(!r||(0,l.getClientStoreInstance)())return;const m=(0,c.A)(),h=(0,a.VA)()?(0,t.A)():[r],v=(0,n.A)();m.dispatch((0,o.initialize)({focusedWorkspace:r,allWorkspaces:h,workspacesMeta:v})),d(m)}u(_,"initializeClientStore");function d(r){(0,s.ul)("clientStore",r),(0,s.zv)("teamIds",()=>{const h=r.getState();return i.getAllWorkspaces(h)}),(0,s.zv)("activeTeam",()=>{const h=r.getState(),v=i.getFocusedWorkspace(h);return window.slackDebug[v]}),(0,s.zv)("activeTeamId",()=>{const h=r.getState();return i.getFocusedWorkspace(h)}),(0,s.zv)("activeEnterprise",()=>{var h,v;const y=r.getState(),I=(h=i.getWorkspacesMeta(y))===null||h===void 0||(v=h[i.getFocusedWorkspace(y)])===null||v===void 0?void 0:v.enterprise_id;return window.slackDebug[I]});const m={};Object.keys(o).forEach(h=>{m[h]=function(){for(var v=arguments.length,y=new Array(v),I=0;I<v;I++)y[I]=arguments[I];return r.dispatch(o[h](...y))}}),Object.keys(i).forEach(h=>{m[h]=function(){for(var v=arguments.length,y=new Array(v),I=0;I<v;I++)y[I]=arguments[I];return i[h](r.getState(),...y)}}),(0,s.ul)("clientStore.workspaces",m)}u(d,"setupClientStoreDebugger")},2870224675:(j,p,e)=>{"use strict";e.d(p,{Uz:()=>o,ez:()=>s,nz:()=>n,oT:()=>c,yw:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Adds a new emtpy tab-soda tab");n.meta={name:"createAction",key:"createActiontabSodaAddNewTab",description:"Adds a new emtpy tab-soda tab"};const s=(0,t.Ay)("Removes the recent history entry from a tab soda tab");s.meta={name:"createAction",key:"createActiontabSodaPopHistoryForTab",description:"Removes the recent history entry from a tab soda tab"};const a=(0,t.Ay)("Select a tab by id");a.meta={name:"createAction",key:"createActiontabSodaSelectTab",description:"Select a tab by id"};const c=(0,t.Ay)("Remove a tab soda tab");c.meta={name:"createAction",key:"createActiontabSodaRemoveTab",description:"Remove a tab soda tab"};const o=(0,t.Ay)("Re-order tab soda tabs");o.meta={name:"createAction",key:"createActiontabSodaReorderTabs",description:"Re-order tab soda tabs"}},9932860381:(j,p,e)=>{"use strict";e.d(p,{Fp:()=>o,Xy:()=>c,fe:()=>a});var t=e(6471801899),n=e(8040098042),s=e(2960290117);function a(i,l){const _=l.indexOf(i),d=_<l.length-1?_+1:_-1;return d>=0?l[d]:void 0}u(a,"tabSodaGetNextActiveTab");function c(i){return(0,n.A)(i)||i==="thread"}u(c,"canOpenInTabSodaTab");function o(i){return(0,s.Ay)(i)||(0,t.pI)(i)||(0,t.or)(i)||(0,n.A)(i)||i==="thread"||i==="comment_thread"}u(o,"tabSodaCanViewBeEjected")},7176966205:(j,p,e)=>{"use strict";e.d(p,{$:()=>h});var t=e(5267010247),n=e(8822892075),s=e(395285811),a=e(2188787324),c=e(3634593162),o=e(3110884894),i=e(5333401344),l=e(8040098042),_=e(2870224675),d=e(1031947056),r=e(6533394955),m=e(937317117);const h=(0,d.Ay)("Opens a view in a new tab",function(v,y){let{viewId:I,params:T}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=y(),g=(0,_.nz)({setAsActive:!0});if(!I)return(0,r.dispatchForClientStore)(g);if(I&&(0,l.A)(I))return(0,r.dispatchForClientStore)(g),v((0,t.o)((0,n.pr)(I)));if(I==="thread"&&(T!=null&&T.threadId)){const{channelId:M,threadTs:A}=(0,o.Sb)(T==null?void 0:T.threadId);if(M&&A){if((0,r.dispatchForClientStore)(g),(0,s.OR)(f,M)){const S=(0,c.l)(M),b=(0,m.Lp)(f,S);if(b&&(0,i.uz)(b)&&(0,a.DQ)(b))return v((0,t.o)((0,n.m3)({channelId:M,threadTs:A})))}const{replyTs:D,highlightRoot:E,dangerouslyOverrideRouting:C}=T;return v((0,t.o)((0,n.UX)({channelId:M,threadTs:A,replyTs:D,highlightRoot:E,dangerouslyOverrideRouting:C})))}}});h.meta={name:"createThunk",key:"createThunkmaybeOpenInTabSodaTab",description:"Opens a view in a new tab"}},4326266690:(j,p,e)=>{"use strict";e.d(p,{B:()=>c,fK:()=>a,lw:()=>i,ud:()=>o});var t=e(9932860381),n=e(2384831516),s=e(3193155968);const a=(0,n.Mz)(l=>l.tabSoda);a.meta={name:"createSelector",key:"createSelectorgetTabSoda",description:l=>l.tabSoda};const c=(0,n.Mz)(l=>{const _=a(l);return _.activeTab?_.tabs[_.activeTab]:[]});c.meta={name:"createSelector",key:"createSelectortabSodaGetRecentsForActiveTab",description:l=>{const _=a(l);return _.activeTab?_.tabs[_.activeTab]:[]}};const o=(0,n.Mz)(l=>{const _=a(l);return _.activeTab?_.tabs[_.activeTab].length<2:!1});o.meta={name:"createSelector",key:"createSelectortabSodaIsBackDisabledForActiveTab",description:l=>{const _=a(l);return _.activeTab?_.tabs[_.activeTab].length<2:!1}};const i=(0,n.Mz)((l,_)=>{var d,r,m;const v=(d=a(l).tabs[_])===null||d===void 0?void 0:d[0],y=v==null?void 0:v.teamId;if(!v||!y)return!1;const I=v==null?void 0:v[s.jf],T=v==null||(r=v[I])===null||r===void 0||(m=r[s.mq.Primary])===null||m===void 0?void 0:m.id;return!!T&&(0,t.Fp)(T)});i.meta={name:"createSelector",key:"createSelectortabSodaCanEjectTab",description:(l,_)=>{var d,r,m;const v=(d=a(l).tabs[_])===null||d===void 0?void 0:d[0],y=v==null?void 0:v.teamId;if(!v||!y)return!1;const I=v==null?void 0:v[s.jf],T=v==null||(r=v[I])===null||r===void 0||(m=r[s.mq.Primary])===null||m===void 0?void 0:m.id;return!!T&&(0,t.Fp)(T)}}},8620339321:(j,p,e)=>{"use strict";e.d(p,{UN:()=>m,oX:()=>v,wm:()=>h});var t=e(7213691587),n=e(109860581),s=e(2870224675),a=e(9932860381),c=e(1031947056),o=e(6533394955),i=e(9108490430),l=e(3193155968),_=e(9012396182),d=e(2554594353);const r=(0,c.Ay)("Update currently visible viewset as part of TabSoda tab switching",(y,I,T)=>{(0,o.dispatchForTeamId)(T.teamId,(0,i.cQ)(T)),_.getFocusedWorkspace&&d.b&&(0,_.getFocusedWorkspace)(I())!==T.teamId&&y((0,d.b)({teamId:T.teamId,fromNavigation:!0}));const{tabSoda:f}=I(),g=f.activeTab;if(g){const M=f.tabs[g][0],A=M[l.jf],O=M[A],D=T[l.jf],E=T[D];if(!E)return;(0,o.dispatchForTeamId)(T.teamId,(0,t.C)({prevViewSet:O,prevTab:A,nextViewSet:E,nextTab:D,windowId:l.N2,navigateParams:{},triggerType:n.w.HISTORY_NAVIGATION}))}});r.meta={name:"createThunk",key:"createThunkupdateVisibleView",description:"Update currently visible viewset as part of TabSoda tab switching"};const m=(0,c.Ay)("Switch current TabSoda tab",(y,I,T)=>{let{tabId:f}=T;const{tabSoda:g}=I();if(g.activeTab===f)return;const M=g.tabs[f][0];y(r(M)),y((0,s.yw)(f))});m.meta={name:"createThunk",key:"createThunktabSodaSwitchTab",description:"Switch current TabSoda tab"};const h=(0,c.Ay)("Close active TabSoda tab and switch to the nearest open tab",(y,I,T)=>{let{tabId:f}=T;const{tabSoda:g}=I(),M=g.activeTab,A=(0,a.fe)(M,g.tabOrder);if(f===M&&A){const O=g.tabs[A][0];y(r(O))}y((0,s.oT)(f))});h.meta={name:"createThunk",key:"createThunktabSodaCloseTab",description:"Close active TabSoda tab and switch to the nearest open tab"};const v=(0,c.Ay)("Go back in history in a currently active TabSoda tab",(y,I)=>{const{tabSoda:T}=I(),f=T.activeTab;if(T.tabs[f].length<2)return;const g=T.tabs[f][1];y(r(g)),y((0,s.ez)(f))});v.meta={name:"createThunk",key:"createThunktabSodaGoBackInActiveTab",description:"Go back in history in a currently active TabSoda tab"}},4766735965:(j,p,e)=>{"use strict";e.d(p,{A:()=>T});var t=e(8737667238),n=e(9121100949),s=e(2527782504),a=e(2495064448),c=e(5751973043),o=e(735940183),i=e(4496040127),l=e(9012396182),_=e(1031947056),d=e(6533394955),r=e(8439865561),m=e(1201539379),h=e(6290537170),v=e(9733150292);const y=new o.Ay("team_picker"),I=(0,_.Ay)("Sets whether or not the protype full rail workspace switcher is showing",function(f,g){let{shouldTransitionFocus:M=!1,shouldAnnounceStateChange:A=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=arguments.length>3?arguments[3]:void 0;const D=g();if(!(0,i.VA)())return;const E=(0,d.getClientStoreInstance)().getState();var C;if(((C=(0,l.getAllWorkspaces)(E))!==null&&C!==void 0?C:c.Ml).length<=1)return;const b=(0,h.v8)(D),k=!b;(0,v.q9)(n.WU,k),f((0,m.mV)(k)),(0,d.dispatchForClientStore)((0,m.mV)(k));const W=y.t("Workspaces tablist expanded"),N=y.t("Workspaces tablist collapsed");if(A&&f((0,r.rl)({message:b?N:W,uuid:(0,t.A)()})),!M)return;const{transitionFocusTo:V}=(0,a.$P)(g(),O),R=b?s.Ay.WORKSPACE_SWITCHER_MENU_BUTTON:s.Ay.WORKSPACE_SWITCHER_TAB_LIST;V({focusKey:R})});I.meta={name:"createThunk",key:"createThunktoggleWorkspaceSwitcherVisibility",description:"Sets whether or not the protype full rail workspace switcher is showing"};const T=I},9143148823:(j,p,e)=>{"use strict";e.d(p,{Ay:()=>a,c:()=>s});var t=e(6422693406);let n=null;function s(){return n}u(s,"getLastTeamSwitchTimestamp");const a=u(o=>{let{prevTeamId:i,nextTeamId:l,navigationTimestamp:_}=o;return i===l||!_||(n=_),t.S.resolve()},"__WEBPACK_DEFAULT_EXPORT__");Object.defineProperty({lastTeamSwitchTimestamp:null},"lastTeamSwitchTimestamp",{get:()=>n,set:o=>{n=o}})},859310680:(j,p,e)=>{"use strict";e.d(p,{go:()=>_e,xy:()=>x});var t=e(8426925643),n=e(9733150292),s=e(4588514760),a=e(4423055085),c=e(9421999304),o=e(9681594967),i=e(2325478352),l=e(3530725200),_=e(7770551414),d=e(6470070112),r=e(6774225263),m=e(796111729),h=e(2250002584),v=e(6695353875),y=e(2568070692),I=e(264208541),T=e(9012396182),f=e(8847766420),g=e(5583430912),M=e(6533394955),A=e(9101533895),O=e(7765212398),D=e(4761125736),E=e(8276911661),C=e(7115106069),S=e(8233775522);function b(){var G,ge;return{hardware_concurrency:(G=window.navigator)===null||G===void 0?void 0:G.hardwareConcurrency,device_memory:(ge=window.navigator)===null||ge===void 0?void 0:ge.deviceMemory}}u(b,"getDeviceStats");function k(){const G=localStorage==null?void 0:localStorage.getItem("client_metrics_client_redux_size"),ge=(0,I.Hn)(),oe=(0,I.Ey)(),me=ge&&oe?(ge/oe).toPrecision(4):null;return{total_client_redux_size:G,js_heap_used:ge,js_heap_total:oe,js_heap_used_percentage:me}}u(k,"getPerfMemoryStats");function W(){const G=localStorage==null?void 0:localStorage.getItem("client_metrics_app_stats");if(!G)return{};try{return JSON.parse(G)}catch(ge){return(0,m.Wo)().warn("Error parsing appStats in localStorage:",G,ge),{}}}u(W,"getDesktopAppStats");function N(){return{...(0,t.JP)(),num_started_sockets:(0,_.eK)(),frontend_build_type:(0,r.JS)(),object_store_redux_group:(0,l.B9)(i.Wv)}}u(N,"getClientStateTags");function V(G,ge){const oe=ge.startSpan("add_tags:channels_info",{tags:{_auto_analytics:""}}),me=Object.values((0,A.DM)(G)).length,ue=Object.values((0,A.h3)(G)).length,ae=Object.values((0,A._B)(G)).length,he=Object.values((0,A.FS)(G)).length;return oe.close(),{num_channels_in_redux:me,num_all_channels_user_is_in:ue,num_dms_user_is_in:ae,num_group_dms_user_is_in:he}}u(V,"getChannelInfoTags");function R(G,ge){const oe=ge.startSpan("add_tags:drafts_info",{tags:{_auto_analytics:""}}),me=Object.keys((0,O.Hw)(G)||{}).length,ue=(0,y.sZ)((0,O.my)(G));return oe.close(),{num_drafts:me,drafts_store_size:ue}}u(R,"getDraftsInfoTags");function P(G){return{user_locale:(0,c.JK)({teamOrEnterpriseId:(0,f.JY)(G)})}}u(P,"getLocaleTags");function z(G){return{active_collab_instance_count:(0,g.Ui)(),open_quip_embed_instance_count:(0,C.oj)(G).length,canvas_child_window_count:(0,s.CJ)()}}u(z,"getCanvasTags");const $=u(G=>{const ge=["spaceship_beyond_iframes","selector_memo","cfm_by_store"],oe={};return ge.forEach(ue=>{const ae=(0,D._Z)(G,ue,!1);ae&&(oe[ue]=ae)}),["redux_slice_tracker"].forEach(ue=>{const ae=(0,l.B9)(ue);ae!==l.dw.NoGroup&&(oe[ue]=ae)}),oe.ia4=(0,v.cc)(G)?"on":"off",oe},"getExperimentTagsForTraces"),x=u((G,ge)=>{const oe=ge??["desktop_flannel_emoji"],me={},ue=(0,D.Vs)(G),ae=Date.now()/1e3,he=60*60*24*7*4;for(const[ce,ee]of Object.entries(ue)){const{trigger:J,schedule_ts:X}=ee;(oe.includes(ce)||J&&X&&J!=="finished"&&J!=="force_debug"&&X>ae-he)&&(me[ce]=ee.group)}return me},"getExperimentTags");function Y(G){return{num_members_in_redux:(0,E.I_)(G).length}}u(Y,"getMembersTags");function ne(G){const ge=(0,n.W6)("lastColdBootTs"),oe=(0,S.pp)(G);return{last_cold_boot_ts:ge,boot_type:oe}}u(ne,"getConfigTags");function re(){return{is_in_active_huddle:(0,d.NZ)()}}u(re,"getHuddleTags");function _e(G){const ge=(0,M.getStateForClientStore)();if(!ge)return{};const oe=G??(0,T.getFocusedWorkspace)(ge),me=(0,M.getStateByTeamId)(oe),ue=(0,h.F)(),ae=ue.createTrace({traceName:"add_tags:performance_tracing_tags"}),he=(0,t.Kh)(oe),ce=N(),ee=V(me,ae),J=R(me,ae),X=b(),F=k(),L=W(),K=P(me),B=Y(me),Q=ne(me),q=o.qV.getTraceTags(),le=$(me),Te=z(me),Ie=re(),De={...he,...ce,...ee,...J,...X,...F,...L,...K,...B,...Q,...q,...le,...Te,...Ie};return ue.reportTrace(ae),De}u(_e,"getPerformanceTracingTags"),(0,a.zv)("performanceTracingTags",_e)},2542612541:(j,p,e)=>{"use strict";e.d(p,{A:()=>yn});var t=e(3134334389),n=e(6422693406),s=e(9733150292),a=e(4979734995),c=e(348699080),o=e(581167618),i=e(2301861866),l=e.n(i),_=e(5255740490),d=e(6764196364),r=e(735940183),m=e(8739505998),h=e(6176558010),v=e(2527471159),y=e.n(v),I=e(7972463975),T=e.n(I),f=e(9994038664),g=e.n(f),M=e(8214116048);const A=new r.Ay("refreshed_header"),O={elementName:"header_slack_logo",onClick:{enableClogAction:!0}},D={elementName:"header_signin",onClick:{enableClogAction:!0}},E={elementName:"header_create_account",onClick:{enableClogAction:!0}},C={elementName:"header_create_workspace",onClick:{enableClogAction:!0}},S=y()&&T()?`${y()}, ${T()} 2x`:void 0,k=u(ut=>{let{showSignInLink:Ot=!1,showCreateAccountLink:kt=!1,showCreateWorkspaceLink:be=!1,showHorchataBackground:Kt=!1,confirmedEmailPill:Vt,hideLogo:on=!1,isSSBBrowserSignin:pn=!1,showSfLogo:et=!1,isWarningBannerDisplayed:At=!1,govSlackTheme:Rt=!1,isLandingPage:Ft=!1,clientTheme:$t,joinerRedesignTreatment:vn=!1}=ut;return t.createElement("header",{className:(0,_.A)("p-refreshed_page__header",{"p-refreshed_page__header--should_wrap":!!Vt,"p-refreshed_page__header--is_horchata_landing_bg":Kt,"p-refreshed_page__header--no_logo":!!on,"p-refreshed_page__header--sf_slack_logo":et,"p-refreshed_page__header--display_warning_banner":At,"p-refreshed_page__header--gov_slack":Rt,"p-refreshed_page__header--landing":Ft,"p-refreshed_page__full_background":vn})},t.createElement("div",{className:"left-col"}),t.createElement("div",{className:"center-col"},et&&on&&t.createElement("img",{srcSet:S??void 0,src:y(),alt:""}),!on&&t.createElement(m.A,{href:(0,d.A)(),autoClogProps:O,target:"_self"},t.createElement("img",{alt:"Slack",src:Rt||$t===M.Sx.Dark?g():l(),height:"26",title:"Slack"})),Vt),t.createElement("div",{className:"right-col"},Ot&&t.createElement("div",{className:"p-refreshed_page__header_sidelink"},A.t("Already have an account?"),t.createElement("br",null),t.createElement(m.A,{href:"/signin",className:"bold",autoClogProps:D,target:"_self"},A.t("Sign in instead"))),kt&&t.createElement("div",{className:"p-refreshed_page__header_sidelink"},A.t("Don\u2019t have an account yet?"),t.createElement("br",null),t.createElement(m.A,{href:`/signup${window.location.search}`,className:"bold",autoClogProps:E,target:"_self"},A.t("Create an account"))),be&&t.createElement("div",{className:"p-refreshed_page__header_sidelink"},A.t("New to Slack?",{fallbackHash:"2f63cb0ff8e7e3d18574aa36be246a7723cef6fc"}),t.createElement("br",null),t.createElement(m.A,{href:`${pn?"/ssb":""}/get-started${window.location.search}#${h.EU.CreateNew}`,className:"bold",autoClogProps:C,target:"_self"},A.t("Create an account")))))},"RefreshedHeader");var W=e(2180140255),N=e(8178126019),V=e(7216810781);const R=u(ut=>{let{inviteDetails:Ot,children:kt}=ut;return!Ot||!(0,N.YB)(Ot)?kt:t.createElement("div",{className:"p-external_workspace_invite_branding_wrapper__container"},t.createElement(V.z,{invite:Ot,bottomMargin:!0}),t.createElement("div",{className:"p-external_workspace_invite_branding_wrapper__contents"},kt))},"ExternalWorkspaceInviteBrandingWrapper");R.displayName="ExternalWorkspaceInviteBrandingWrapper";const P=R,z=u(ut=>{let{children:Ot,showHorchataBackground:kt,showSignInLink:be,showCreateAccountLink:Kt,showCreateWorkspaceLink:Vt,hideRegionPicker:on,clientTheme:pn,hideFooter:et=!1,confirmedEmailPill:At,hideHeader:Rt=!1,isSSBBrowserSignin:Ft=!1,showSfLogo:$t=!1,isWarningBannerDisplayed:vn=!1,govSlackTheme:Rn=!1,isLandingPage:hn=!1,joinerRedesignTreatment:gn=!1,inviteDetails:Cn}=ut;return t.createElement(P,{inviteDetails:Cn},t.createElement(t.Fragment,null,!Rt&&t.createElement(k,{showSignInLink:be,showCreateAccountLink:Kt,showCreateWorkspaceLink:Vt,showHorchataBackground:kt,confirmedEmailPill:At,isSSBBrowserSignin:Ft,showSfLogo:$t,hideLogo:$t,isWarningBannerDisplayed:vn,govSlackTheme:Rn,isLandingPage:hn,clientTheme:pn,joinerRedesignTreatment:gn}),Rn?t.createElement("div",{className:"p-refreshed_page_layout__children--gov_slack"},Ot):Ot,!et&&t.createElement(W.A,{hideRegionPicker:on,govSlackTheme:Rn,joinerRedesignTreatment:gn})))},"RefreshedPageLayout");z.displayName="RefreshedPageLayout";const $=z;var x=e(2308565927),Y=e(6084388622);const ne=new r.Ay("sign_in");function re(ut){const{isSSB:Ot,isSSBSignIn:kt,hasPromoOffer:be,shouldRedirect:Kt,redirectURL:Vt,loggedInTeams:on,entryPoint:pn=""}=ut;return t.createElement("div",{className:"align_center","data-qa":"signedin_workspaces"},!be&&!Ot&&t.createElement("p",{className:"small_bottom_margin"},ne.t("You're already signed in to {loggedInTeams, plural, =1 {this workspace} other {these workspaces}}:",{loggedInTeams:on})),t.createElement("p",{className:"col span_4_of_6 margin_auto float_none"},on.map((et,At)=>t.createElement(Y.z9,{key:et.id,"data-qa":`signedin_workspace_link_${At+1}`,className:"team-signin-link small_margin","data-team-id":et.id,autoClogProps:{elementName:"team_domain",elementValue:et.id.toString(),entryPoint:pn,onClick:{enableClogAction:!0}},href:kt?`${et.url}ssb/signin_redirect`:`${et.url}${Kt?`?redir=${Vt}`:""}`,"aria-label":ne.t("Go to {teamName} on Slack",{teamName:et.name}),type:"outline"},et.name))))}u(re,"SignedInWorkspaces");var _e=e(6244014364),G=e(4481313819),ge=e(1610251172),oe=e(6968387112),me;(function(ut){ut.INVALID_CODE="invalid_pin",ut.RATE_LIMITED="ratelimited",ut.SMS_RATE_LIMITED="two_factor_sms_rate_limited",ut.TOO_MANY_ATTEMPTS="two_factor_too_many_attempts",ut.INTERNAL_ERROR="internal_error"})(me||(me={}));var ue;(function(ut){ut.SMS="sms",ut.APP="app",ut.EMAIL="email",ut.EMERGENCY="emergency"})(ue||(ue={}));var ae;(function(ut){ut.REQUEST_CODE="request_primary",ut.REQUEST_BACKUP="request_backup",ut.SUBMIT_PRIMARY="submit_primary",ut.SUBMIT_BACKUP="submit_backup",ut.SUBMIT_EMERGENCY="submit_emergency"})(ae||(ae={}));const he=new r.Ay("sign_in"),ce={elementName:"help_button",onClick:{enableClogAction:!0}},ee=u(ut=>{const Ot=ut.action===ae.REQUEST_BACKUP||ut.action===ae.SUBMIT_BACKUP;return Ot&&ut.twoFactorBackupType===ue.APP||!Ot&&ut.twoFactorType===ue.APP},"currentMethodIsApp"),J=u(ut=>ee(ut)?he.t("Problems with your authentication app?"):he.t("Problems with your code?"),"renderProblemsString"),X=u(ut=>ee(ut)?t.createElement("div",{className:"subtle_silver small medium_top_margin"},t.createElement("p",{className:"no_bottom_margin"},he.t("Check your authentication app for your code.")),t.createElement("p",null,he.rt("<a>Having trouble finding your code?</a>",null,Ot=>{let{tag:kt,text:be}=Ot;return kt==="a"?t.createElement(m.A,{href:`https://${(0,oe.qF)()}/help/articles/204509068-Enabling-two-factor-authentication`,target:"_blank"},be):null})),t.createElement("p",null,he.rt("If your app is unavailable, use a <a>backup code</a>.",null,Ot=>{let{tag:kt,text:be}=Ot;return kt==="a"?t.createElement(m.A,{href:`https://${(0,oe.qF)()}/help/articles/204509068#troubleshoot-2fa`,target:"_blank"},be):null}))):t.createElement("p",{className:"align_left subtle_silver small"},he.rt("You can also try a backup code, if you have one. For other issues, read more about <a>two-factor authentication</a>, or contact your workspace administrator for help.",null,Ot=>{let{tag:kt,text:be}=Ot;return kt==="a"?t.createElement(m.A,{href:`https://${(0,oe.qF)()}/help/articles/204509068-Enabling-two-factor-authentication`,target:"_blank"},be):null})),"renderProblems");X.displayName="renderProblems";const F=u(ut=>{const[Ot,kt]=(0,t.useState)(!1);return t.createElement("div",{className:"p-enter-code__help_button"},t.createElement(m.A,{tabIndex:0,className:"p-enter-code__get_help_link",onClick:()=>kt(!Ot),autoClogProps:ce},t.createElement(ge.A,{type:"question-circle"})," ",J(ut)),Ot&&t.createElement("div",{className:"send_code_block"},ut.children,t.createElement("div",{className:"col span_4_of_6 float_none margin_auto"},t.createElement("hr",{className:"medium_bottom_margin"}),X(ut))))},"GetHelpButton");F.displayName="GetHelpButton";var L=e(9867500491),K=e(4505564445),B=e(219228829),Q=e(3700949338);function q(){return q=Object.assign||function(ut){for(var Ot=1;Ot<arguments.length;Ot++){var kt=arguments[Ot];for(var be in kt)Object.prototype.hasOwnProperty.call(kt,be)&&(ut[be]=kt[be])}return ut},q.apply(this,arguments)}u(q,"_extends");let le=u(class extends t.Component{render(){const{ariaDescribedBy:Ot}=this.props;return t.createElement("div",{className:(0,_.A)("two_factor_input_item",{focused:this.props.hasFocus})},t.createElement("input",{autoComplete:this.props.autocomplete,ref:this.props.refToForward,type:"text",inputMode:"numeric",pattern:"\\d*",value:this.props.value,"aria-disabled":this.props.disabled,disabled:this.props.disabled,maxLength:1,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onPaste:this.onPaste,"aria-label":this.props.ariaLabel,"aria-describedby":Ot}))}constructor(...Ot){super(...Ot),this.onKeyDown=kt=>{switch(kt.keyCode){case K.G_:{kt.currentTarget.value||this.props.moveLeft();return}case K.UQ:return kt.preventDefault(),this.props.moveLeft();case K.LE:return kt.preventDefault(),this.props.moveRight();default:break}},this.onKeyPress=kt=>{!(0,Q.A)(kt.which)&&kt.charCode&&!(0,B.A)(kt)&&kt.preventDefault()},this.onChange=kt=>{const be=kt.target.value;(/^[0-9]$/.test(be)||be==="")&&this.props.onChange(be)},this.onPaste=kt=>{kt.preventDefault();const be=window.clipboardData||kt.clipboardData,Kt=be.getData("text")||be.getData("text/plain"),Vt=/\D/g,on=Kt.replace(Vt,"");this.props.onPaste(on)}}},"TwoFactorDigitInput");le.displayName="TwoFactorDigitInput";const Te=t.forwardRef((ut,Ot)=>t.createElement(le,q({},ut,{refToForward:Ot}))),Ie=new r.Ay("team_creation");let De=u(class extends t.Component{focusInput(Ot){const kt=this.inputRefs[Ot];kt!=null&&kt.current&&kt.current.focus()}moveLeft(Ot){Ot<=0||this.focusInput(Ot-1)}moveRight(Ot){Ot>=this.state.values.length-1||this.focusInput(Ot+1)}isComplete(Ot){return!Ot.some(kt=>!kt)}clear(){this.setState(Ot=>({values:Ot.values.map(()=>""),focusedInputIndex:0})),this.focusInput(0)}onChange(Ot,kt){const be=this.state.values.slice();be[Ot]=kt,this.setState(()=>({values:be}),()=>{kt&&!this.isComplete(this.state.values)&&this.moveRight(Ot)})}componentDidUpdate(Ot,kt){var be;if(this.state.focusedInputIndex!==-1&&document.activeElement!==((be=this.inputRefs[this.state.focusedInputIndex])===null||be===void 0?void 0:be.current)&&this.focusInput(this.state.focusedInputIndex),this.props.codeLength!==Ot.codeLength&&this.onCodeLengthChange(kt),!this.isComplete(kt.values)&&this.isComplete(this.state.values)||this.isComplete(this.state.values)&&kt.values.join("")!==this.state.values.join("")){const Kt=this.state.values.join("");this.props.onFillCode(Kt)}else kt.values.join(",")!==this.state.values.join(",")&&this.props.onChange()}componentDidMount(){this.focusInput(0)}renderInputs(Ot,kt){return this.state.values.slice(Ot,kt).map((be,Kt)=>{const Vt=Kt+Ot;return t.createElement(Te,{autocomplete:Vt===0?"one-time-password":"off",key:Vt,ref:this.inputRefs[Vt],moveLeft:()=>this.moveLeft(Vt),moveRight:()=>this.moveRight(Vt),onChange:on=>this.onChange(Vt,on),onPaste:this.onPaste,onFocus:()=>{this.setState(()=>({focusedInputIndex:Vt}))},onBlur:()=>this.setState(()=>({focusedInputIndex:-1})),hasFocus:this.state.focusedInputIndex===Vt,value:this.state.values[Vt],ariaLabel:Ie.t("digit {inputIndex} of {numberOfInputs}",{inputIndex:Vt+1,numberOfInputs:this.state.values.length}),ariaDescribedBy:this.props.ariaDescribedBy,disabled:this.props.disabled})})}render(){return t.createElement("div",{className:"display_flex align_items_center margin_bottom_50","data-qa":"confirmation_code_input"},t.createElement("div",{className:"display_flex"},this.renderInputs(0,this.props.codeLength)))}constructor(Ot){super(Ot),this.onPaste=kt=>{const be=this.state.focusedInputIndex;if(be===-1)return;const Kt=this.state.values.length-be,Vt=kt.substring(0,Kt).split(""),on=this.state.values.slice();Vt.forEach((pn,et)=>{const At=et+be;on[At]=pn}),this.setState(()=>({values:on}),()=>{this.focusInput(Math.min(this.state.values.length-1,be+Vt.length))})},this.onCodeLengthChange=kt=>{const be=(0,L.A)(this.props.codeLength,()=>"");kt.values.forEach((Kt,Vt)=>{Vt<be.length&&(be[Vt]=Kt)}),this.setState(()=>({values:be})),this.inputRefs=be.map(()=>t.createRef())},this.state={values:(0,L.A)(Ot.codeLength,()=>""),focusedInputIndex:-1},this.inputRefs=this.state.values.map(()=>t.createRef())}},"TwoFactorCodeInput");De.displayName="TwoFactorCodeInput",De.defaultProps={isNumbersOnly:!0};const pe=new r.Ay("sign_in");function fe(ut){let Ot=null;return ut.error===me.SMS_RATE_LIMITED?Ot=pe.rt("Apologies! There were too many SMS message requests in a short period, so you\u2019ll have to wait a moment to try again."):ut.error===me.INVALID_CODE?Ot=pe.rt("Your two-factor authentication code was incorrect. Please try again."):ut.error===me.RATE_LIMITED?Ot=pe.rt("You\u2019ve been trying to log in too often. Wait a few minutes and try again."):ut.error===me.TOO_MANY_ATTEMPTS?Ot=pe.rt("We\u2019ve detected too many failed attempts to enter a code. For safety we\u2019ve reset your password. Please check your email for further information.",{fallbackHash:"7773426b227dec3b18a254adf97a7e212e998276"}):Ot=pe.rt("An unknown error occurred."),t.createElement(o.Ay,{className:"p-enter-code-error__alert",type:o.QE.boxed,icon:"lock-o",level:o.A_.error,align:o.AO.left,"data-qa":"2fa_code_error_alert"},t.createElement("span",null,Ot))}u(fe,"EnterCodeError");var Z=e(6023831373),se=e(3328068409),Ae=e(1236965385);function Ce(){return Ce=Object.assign||function(ut){for(var Ot=1;Ot<arguments.length;Ot++){var kt=arguments[Ot];for(var be in kt)Object.prototype.hasOwnProperty.call(kt,be)&&(ut[be]=kt[be])}return ut},Ce.apply(this,arguments)}u(Ce,"enter_code_root_extends");const Le=new r.Ay("sign_in"),Ue=5*60*1e3,Pe={elementName:"resend_button",onClick:{enableClogAction:!0}},He={elementName:"backup_button",onClick:{enableClogAction:!0}},Qe={elementName:"emergency_backup_button",onClick:{enableClogAction:!0}},lt="two_factor_form",qe="enter-code",ct=6;var tt;(function(ut){ut.Request="request_primary",ut.RequestBackup="request_backup",ut.SubmitPrimary="submit_primary",ut.SubmitBackup="submit_backup",ut.SubmitEmergency="submit_emergency",ut.None="none"})(tt||(tt={}));function it(ut){const[Ot,kt]=(0,t.useState)(ut.twoFactorType),[be,Kt]=(0,t.useState)("");var Vt;const[on,pn]=(0,t.useState)((Vt=ut.action)!==null&&Vt!==void 0?Vt:tt.None),[et,At]=(0,t.useState)(!1),[Rt,Ft]=(0,t.useState)(ct),[$t,vn]=(0,t.useState)(!1),Rn=t.useRef(null),hn=t.createRef(),gn=ut.submitOverride,{trackClogAuthRef:Cn,clogAuthLoginClick:fn,trackClog:Oe}=(0,Ae.$A)(),ke=Cn({eventId:_e.EventId.AUTH_WORKSPACE_ENTER_CODE,uiPage:qe});(0,t.useEffect)(()=>{if(et){var Me,U;if((Me=Oe.current)===null||Me===void 0||(U=Me.track)===null||U===void 0||U.call(Me,{elementName:lt,elementValue:on}),fn({eventId:_e.EventId.AUTH_WORKSPACE_ENTER_CODE,elementName:lt,uiPage:qe,elementValue:on})(),gn&&hn.current)At(!1),vn(!0),gn(be,on,ut.magicLogin).then(()=>{var te;(te=Rn.current)===null||te===void 0||te.clear(),vn(!1)});else{var H;(H=hn.current)===null||H===void 0||H.submit()}}},[on,et,hn,Oe,be,gn,ut.magicLogin,fn]),(0,t.useEffect)(()=>{(ut.error===me.RATE_LIMITED||ut.error===me.TOO_MANY_ATTEMPTS)&&vn(!0),ut.error===me.RATE_LIMITED&&setTimeout(()=>{vn(!1)},Ue)},[ut.error]);const je=Ot===ue.EMERGENCY,Be=on===tt.RequestBackup||on===tt.SubmitBackup,st=!je&&(Be&&ut.twoFactorBackupType===ue.SMS||!Be&&ut.twoFactorType===ue.SMS||ut.twoFactorType===ue.EMAIL),St=ut.twoFactorType===ue.EMAIL,Yt=ut.twoFactorType===ue.SMS?Le.rt("Send Code to Primary Phone"):Le.rt("Use Authentication App"),tn=ut.twoFactorBackupType===ue.SMS?Le.rt("Send Code to Backup Phone"):Le.rt("Use Backup Authentication App"),at=u(()=>t.createElement(Y.$n,{type:"outline",onClick:()=>{pn(Be?tt.RequestBackup:tt.Request),At(!0)},autoClogProps:Pe},Be?Le.rt("Resend Code to Backup Phone"):Le.rt("Resend Code")),"ResendButton"),Et=u(()=>t.createElement(Y.$n,{type:"outline",onClick:()=>{pn(Be?tt.Request:tt.RequestBackup),At(!0)},autoClogProps:He},Be?Yt:tn),"BackupButton");Et.displayName="BackupButton";const _t=u(()=>{let Me;return je?Me=Be?tn:Yt:Me=Le.rt("Use Emergency Backup Code",{fallbackHash:"722971c61482e6fdf1d0c37abc0d6505ac884e0c"}),t.createElement(Y.$n,{type:"outline",onClick:()=>{je?(kt(ut.twoFactorType),Ft(ct)):(kt(ue.EMERGENCY),Ft(ut.emergencyCodeLength))},autoClogProps:Qe},Me)},"EmergencyButton");_t.displayName="EmergencyButton";const Bt=u(()=>ut.twoFactorType===ue.EMAIL?ut.isClientApp?Le.rt("We don\u2019t recognize this device",{fallbackHash:"c7a15a747957cbfe27c485a1f69bd93d726680b6"}):Le.rt("We don\u2019t recognize this browser",{fallbackHash:"c7a15a747957cbfe27c485a1f69bd93d726680b6"}):Le.rt("Enter your authentication code"),"GetHeader"),Qt=u(()=>{if(je)return Le.rt("Check the list of emergency backup codes provided when setting up 2FA.",{fallbackHash:"722971c61482e6fdf1d0c37abc0d6505ac884e0c"});if(Be)return ut.twoFactorBackupType===ue.APP?Le.rt("Check your authentication app for your code."):Le.rt("We\u2019ve sent an authentication code to your backup phone <br></br> for signing into <strong>{teamName}</strong>.",{teamName:ut.teamName});switch(ut.twoFactorType){case ue.APP:return Le.rt("Check your authentication app for your code.");case ue.EMAIL:return Le.rt("We hate to be a bother, but we need to do our due diligence to keep your account safe. Please enter the code we\u2019ve just sent to {emailAddress} below to complete your sign-in.",{teamName:ut.teamName,emailAddress:ut.emailAddress,fallbackHash:"482df38f5efc61b851c499bff4080846e0f2b65b"});default:return Le.rt("We\u2019ve sent an authentication code to your phone for signing into <strong>{teamName}</strong>.",{teamName:ut.teamName})}},"GetSubheader"),Fe=u(Me=>{let U;je?U=tt.SubmitEmergency:U=Be?tt.SubmitBackup:tt.SubmitPrimary,Kt(Me),pn(U),At(!0)},"onFillCode"),Xe=(0,Z.d4)(se.to);return t.createElement(G.A,{eventId:_e.EventId.TWO_FACTOR_AUTH,uiPage:qe,trackClogRef:ke},t.createElement($,{clientTheme:Xe},t.createElement(x.A,{heading:Bt(),subHeading:Qt(),subHeadingClassName:"p-enter_code_app__view_sub_header"},ut.codeResent&&t.createElement(o.Ay,{className:"p-enter-code-error__alert",type:o.QE.boxed,icon:"paper-plane",level:o.A_.info,align:o.AO.left,"data-qa":"2fa_code_resent_alert"},St?Le.rt("We\u2019ve sent a fresh code to {emailAddress} for signing into <strong>{teamName}</strong>.",{teamName:ut.teamName,emailAddress:ut.emailAddress,fallbackHash:"ed10973da08d5a9563d5aa07b51e6771457ef6b0",fallbackHashNs:"find_team"}):Le.rt("We\u2019ve sent a fresh code to your phone for signing into <strong>{teamName}</strong>.",{teamName:ut.teamName})),ut.error&&t.createElement(fe,{error:ut.error}),t.createElement("form",{ref:hn,className:"p-enter_code",method:"POST"},t.createElement("div",{className:"p-enter_code__input_container"},t.createElement("fieldset",{className:"p-enter_code__input_fieldset"},t.createElement("legend",{className:"offscreen"},Le.rt("{codeLength}-digit confirmation code",{codeLength:Rt,fallbackHash:"0279e13b54733feec1317a9d5a3f36bfe1b56e30"})),t.createElement(De,{ref:Rn,onFillCode:Fe,onChange:()=>{},hideDash:!0,error:ut.error,disabled:$t,codeLength:Rt}),t.createElement("input",{type:"hidden",name:"2fa_magiclogin",value:ut.magicLogin}),ut.redir.length>0&&t.createElement("input",{type:"hidden",name:"redir",value:ut.redir}),t.createElement("input",{type:"hidden",name:"remember",value:ut.remember?"1":"0"}),t.createElement("input",{type:"hidden",name:"has_remember",value:ut.hasRemember}),t.createElement("input",{type:"hidden",name:"2fa_code",value:be}),t.createElement("input",{type:"hidden",name:"2fa_action",value:on})))),t.createElement(F,Ce({},ut),t.createElement("div",{className:"p-enter-code__button"},st&&t.createElement(at,null),ut.twoFactorBackupType&&!je&&t.createElement(Et,null),!St&&t.createElement(_t,null))),ut.loggedInTeams.length>0&&t.createElement("div",{className:"p-enter-code__logged_in_teams"},t.createElement(re,Ce({},ut))))))}u(it,"EnterCodeRoot");var Ge=e(7515251865),We=e(4979382452),xe=e(3602521375),ze=e(4636370173),mt=e(2465132699),pt=e(8523371695),It=e(3606117573),bt=e(8029613601),gt=e(4947127560),ht=e(9310872914),Zt=e(6533394955),rn=e(3051824855);function zt(){return zt=Object.assign||function(ut){for(var Ot=1;Ot<arguments.length;Ot++){var kt=arguments[Ot];for(var be in kt)Object.prototype.hasOwnProperty.call(kt,be)&&(ut[be]=kt[be])}return ut},zt.apply(this,arguments)}u(zt,"enter_2fa_code_modal_extends");const In=new r.Ay("2fa_modal"),cn={enter2faCodeModal:"enter_2fa_code_modal",cancelButton:"enter_2fa_code_modal_cancel_button"},Jt={isSSB:!0,isSSBSignIn:!0,hasPromoOffer:!1,shouldRedirect:!1,redirectURL:"",loggedInTeams:[],remember:!1,hasRemember:"",children:void 0,isOpen:!0};function dn(ut,Ot){const kt=(0,s.vS)();if(ut!==void 0){const Kt=kt[ut].two_factor_magic_login;Kt!==void 0&&Kt.token&&(Kt.token=Ot),(0,s.q9)("pendingAuthTeams",kt)}}u(dn,"updateLocalConfig2fa");function sn(ut){const Ot=(0,s.vS)();if(ut!==void 0){const kt=Ot[ut];kt.two_factor_magic_login=void 0,(0,s.q9)("pendingAuthTeams",Ot)}}u(sn,"clearLocalConfig2faMagicLogin");function Xt(ut){let{magicLogin:Ot,teamId:kt,type:be,backupType:Kt,emergencyLength:Vt,emailAddress:on,teamName:pn,currentTeamId:et,isOpen:At,closeModal:Rt}=ut;const[Ft,$t]=(0,t.useState)(Ot),[vn,Rn]=(0,t.useState)(null),[hn,gn]=(0,t.useState)(!1),Cn=et?(0,Zt.getStoreInstanceByTeamId)(et):void 0,fn=(0,t.useCallback)((ke,je,Be)=>{const st={magic_token:Be,ssb:!0,two_factor_native_supported_v2:!0,two_factor_pin:ke,two_factor_is_backup:je===ae.REQUEST_BACKUP||je===ae.SUBMIT_BACKUP};return je===ae.REQUEST_CODE||je===ae.REQUEST_BACKUP?(st.two_factor_pin="",gn(!0)):gn(!1),new n.S(St=>{(0,a.j)("auth.loginMagic",st,(Yt,tn)=>{if(Yt&&tn.refreshed_magic_login){var at;$t(tn.refreshed_magic_login),dn(kt,tn.refreshed_magic_login),!((at=tn.reason)===null||at===void 0)&&at.match(/^missing_/)||Rn(tn.reason),St(Yt)}else Yt&&tn.team?(0,ht.A)({currentTeamStore:Cn,newWorkspaceId:kt,navigateToRouteProps:{routeName:Ge.o},shouldAutoSignIn:!0}).then(()=>{Rt(),St(Yt)}):(sn(kt),(0,ht.A)({currentTeamStore:Cn,newWorkspaceId:kt,navigateToRouteProps:{routeName:Ge.o}}).then(()=>{Rt(),St(Yt)}))})})},[kt,Cn,Rt]);(0,c.A)(()=>{fn("",ae.SUBMIT_PRIMARY,Ft??"")},[]);const Oe=In.t("Finish signing into {teamName}",{teamName:pn,fallbackHash:"e27938a88eacaa79d651d3aeb0bc39d128f0dd6c",fallbackHashNs:"team_picker"});return t.createElement(We.A,{isOpen:At,contentLabel:"two_factor",maxWidth:"800px",centered:!0,closeModal:Rt,dataQa:cn.enter2faCodeModal},t.createElement(bt.A,null,t.createElement(gt.A,{title:Oe})),t.createElement(ze.A,null,t.createElement(mt.A,null,t.createElement("div",{id:"enter-code-app-root"},t.createElement(it,zt({},Jt,{teamName:pn,error:vn,action:null,magicLogin:Ft||"",twoFactorType:be,twoFactorBackupType:Kt,emailAddress:on,codeResent:hn,redir:"",emergencyCodeLength:Vt,isClientApp:!0,submitOverride:fn}))))),t.createElement(pt.A,null,t.createElement(It.A,null,t.createElement(xe.A,{type:"outline","data-qa":cn.cancelButton},In.t("Cancel",{fallbackHash:"77dfd2135f4db726c47299bb55be26f7f4525a46",fallbackHashNs:"admin"})))))}u(Xt,"TwoFAModal"),Xt.displayName="TwoFAModal";const xt=(0,rn.e)(Xt);var en=e(796111729),un=e(9012396182);function yn(ut,Ot){const kt=(0,Zt.getStateForClientStore)();if(!(0,un.isWorkspacePendingTwoFactor)(kt,ut))return!1;const be=(0,un.getWorkspacesMeta)(kt),Kt=be==null?void 0:be[ut],{two_factor_magic_login:Vt,name:on}=Kt,{token:pn,user_2fa_type:et,user_2fa_backup_type:At,user_emergency_code_length:Rt,email:Ft}=Vt;let $t;return Ot?$t=(0,Zt.getStoreInstanceByTeamId)(Ot):$t=(0,Zt.getStoreInstanceByTeamId)((0,un.getFocusedWorkspace)(kt)),$t?($t.dispatch(xt({magicLogin:pn,teamId:ut,type:et,backupType:At,emergencyLength:Rt,teamName:on,currentTeamId:Ot,emailAddress:Ft})),!0):((0,en.Wo)().error("TWO_FACTOR_SSB",`${ut} is pending 2fa, but no store for ${Ot}, falling back to openSignIn()`),!1)}u(yn,"maybeRenderTwoFactorModal")},4626613428:(j,p,e)=>{"use strict";e.d(p,{S4:()=>h,Ty:()=>C,ez:()=>m,lf:()=>E});var t=e(6839188756),n=e(5751973043),s=e(1247361162),a=e(9829579108),c=e(9186462665),o=e(2047021170),i=e(7268021173),l=e(6827180593),_=e(772817784),d=e(117899263),r=e(3677514771),m;(function(S){S.HAS_MENTIONS="has_mentions",S.HAS_SLACK_CONNECT_INVITE="has_slack_connect_invite",S.HAS_THREADS="has_threads",S.IS_ENTERPRISE="is_enterprise",S.IS_EXISTING_JOINER="is_existing_joiner",S.IS_IN_TRIAL="is_in_trial",S.IS_ONBOARDING_COMPLETED="is_onboarding_completed",S.IS_OVER_TWO_WEEKS_OLD="is_over_two_weeks_old",S.IS_USER_PREF_ENABLED="is_user_pref_enabled"})(m||(m={}));const h="should_show_ia4_tabs",v={reason:m.IS_ENTERPRISE,shouldShowTabs:!0},y={reason:m.IS_EXISTING_JOINER,shouldShowTabs:!0},I={reason:m.IS_USER_PREF_ENABLED,shouldShowTabs:!0},T={reason:m.HAS_MENTIONS,shouldShowTabs:!0},f={reason:m.HAS_THREADS,shouldShowTabs:!0},g={reason:m.HAS_SLACK_CONNECT_INVITE,shouldShowTabs:!0},M={reason:m.IS_IN_TRIAL,shouldShowTabs:!0},A={reason:m.IS_ONBOARDING_COMPLETED,shouldShowTabs:!0},O={shouldShowTabs:!0,reason:m.IS_OVER_TWO_WEEKS_OLD},D={shouldShowTabs:!1},E=(0,a.Ay)(S=>{const b=(0,r.H7)(S);if((0,t.r7)(b))return v;const W=(0,_.w)(S);if(!(0,d._)(S)&&W)return y;if((0,o.ty)(S,h))return I;var R;if(((R=(0,s.rz)(S))!==null&&R!==void 0?R:n.Ml).length>0)return T;var z;return((z=(0,s.sG)(S))!==null&&z!==void 0?z:n.Ml).length>0?f:(0,c.RU)(S)?g:(0,i.iH)(S)?M:(0,o.ty)(S,"onboarding_complete")?A:(0,l.H)(S)>=14?O:D});E.meta={name:"createSelector",key:"createSelectorshouldShowTabsWithReason",description:S=>{const b=(0,r.H7)(S);if((0,t.r7)(b))return v;const W=(0,_.w)(S);if(!(0,d._)(S)&&W)return y;if((0,o.ty)(S,h))return I;var R;if(((R=(0,s.rz)(S))!==null&&R!==void 0?R:n.Ml).length>0)return T;var z;return((z=(0,s.sG)(S))!==null&&z!==void 0?z:n.Ml).length>0?f:(0,c.RU)(S)?g:(0,i.iH)(S)?M:(0,o.ty)(S,"onboarding_complete")?A:(0,l.H)(S)>=14?O:D}};const C=(0,a.Ay)(S=>E(S).shouldShowTabs);C.meta={name:"createSelector",key:"createSelectorshouldShowTabs",description:S=>E(S).shouldShowTabs}},3126601217:(j,p,e)=>{"use strict";e.d(p,{A4:()=>i,BI:()=>s,O4:()=>l,QW:()=>c,cS:()=>o,uS:()=>a,vh:()=>n});var t=e(9552526132);const n={...t.M,HermesWebhook:"hermes_webhook",HermesScheduled:"hermes_scheduled"},s=u(_=>_.type===n.Shortcut,"isShortcutTrigger"),a=u(_=>_.type===n.Scheduled||_.type===n.HermesScheduled,"isScheduledTrigger"),c=u(_=>_.type===n.Event,"isNativeEventTrigger"),o=u(_=>_.type===n.Webhook||_.type===n.HermesWebhook,"isWebhookTrigger"),i=u(_=>_.type===n.External,"isExternalEventTrigger"),l=u(_=>_.type===n.Service,"isServiceTrigger")},9121100949:(j,p,e)=>{"use strict";e.d(p,{$D:()=>d,OR:()=>o,RC:()=>h,Ts:()=>l,WU:()=>m,gN:()=>i,jG:()=>r,jr:()=>v,jt:()=>c,ke:()=>t,qD:()=>_,r1:()=>a,ts:()=>n,u1:()=>s});const t="viewLayoutSidebarWidthIntent",n="viewLayoutSidebarWidthMode",s="viewLayoutSidebarWideWidthIntent",a="viewLayoutSidebarWideWidthMode",c="viewLayoutSidebarExtraWideWidthIntent",o="viewLayoutSidebarExtraWideWidthMode",i="viewLayoutSecondaryWidthIntent",l="viewLayoutSecondaryWidthMode",_="viewLayoutSplitWidthIntent",d="viewLayoutSplitWidthMode",r="viewLayoutIsSidebarVisible",m="viewLayoutIsWorkspaceSwitcherVisible",h="viewLayoutCompactModeEnabled",v="viewLayoutLastSidebarWidth"}},j=>{var p=u(t=>j(j.s=t),"__webpack_exec__");j.O(0,["gantry-v2-vendors","gantry-v2-vendors-client","gantry-v2-shared","client-boot-styles"],()=>p(1486505410));var e=j.O()}]);})();

//# sourceMappingURL=https://slack.com/source-maps/bv1-13/client-boot.5b35702bbad76a127243.min.js.map