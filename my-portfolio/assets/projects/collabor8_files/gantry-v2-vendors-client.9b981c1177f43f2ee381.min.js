(()=>{var nv=Object.defineProperty;var s=(F,a)=>nv(F,"name",{value:a,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["gantry-v2-vendors-client","gantry-v2-vendors-workflow-builder"],{4382362497:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0})},539715656:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0})},4318895513:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0})},2936261413:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0})},7132723781:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isMsWindow=void 0;var c=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function d(m){return"MSInputMethodContext"in m&&"msCrypto"in m}s(d,"quacksLikeAnMsWindow");function p(m){if(d(m)&&m.msCrypto.subtle!==void 0){var g=m.msCrypto,l=g.getRandomValues,r=g.subtle;return c.map(function(n){return r[n]}).concat(l).every(function(n){return typeof n=="function"})}return!1}s(p,"isMsWindow"),a.isMsWindow=p},452065043:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=c(6789371454);d.__exportStar(c(4382362497),a),d.__exportStar(c(539715656),a),d.__exportStar(c(4318895513),a),d.__exportStar(c(2936261413),a),d.__exportStar(c(7132723781),a)},6789371454:(F,a,c)=>{"use strict";c.r(a),c.d(a,{__assign:()=>m,__asyncDelegator:()=>_,__asyncGenerator:()=>E,__asyncValues:()=>T,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>k,__createBinding:()=>i,__decorate:()=>l,__exportStar:()=>o,__extends:()=>p,__generator:()=>t,__importDefault:()=>R,__importStar:()=>M,__makeTemplateObject:()=>w,__metadata:()=>n,__param:()=>r,__read:()=>h,__rest:()=>g,__spread:()=>S,__spreadArrays:()=>f,__values:()=>u});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d=s(function(A,P){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,H){D.__proto__=H}||function(D,H){for(var j in H)H.hasOwnProperty(j)&&(D[j]=H[j])},d(A,P)},"extendStatics");function p(A,P){d(A,P);function D(){this.constructor=A}s(D,"__"),A.prototype=P===null?Object.create(P):(D.prototype=P.prototype,new D)}s(p,"__extends");var m=s(function(){return m=Object.assign||s(function(P){for(var D,H=1,j=arguments.length;H<j;H++){D=arguments[H];for(var W in D)Object.prototype.hasOwnProperty.call(D,W)&&(P[W]=D[W])}return P},"__assign"),m.apply(this,arguments)},"__assign");function g(A,P){var D={};for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&P.indexOf(H)<0&&(D[H]=A[H]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,H=Object.getOwnPropertySymbols(A);j<H.length;j++)P.indexOf(H[j])<0&&Object.prototype.propertyIsEnumerable.call(A,H[j])&&(D[H[j]]=A[H[j]]);return D}s(g,"__rest");function l(A,P,D,H){var j=arguments.length,W=j<3?P:H===null?H=Object.getOwnPropertyDescriptor(P,D):H,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(A,P,D,H);else for(var ee=A.length-1;ee>=0;ee--)(X=A[ee])&&(W=(j<3?X(W):j>3?X(P,D,W):X(P,D))||W);return j>3&&W&&Object.defineProperty(P,D,W),W}s(l,"__decorate");function r(A,P){return function(D,H){P(D,H,A)}}s(r,"__param");function n(A,P){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,P)}s(n,"__metadata");function e(A,P,D,H){function j(W){return W instanceof D?W:new D(function(X){X(W)})}return s(j,"adopt"),new(D||(D=Promise))(function(W,X){function ee(Oe){try{oe(H.next(Oe))}catch(Xe){X(Xe)}}s(ee,"fulfilled");function fe(Oe){try{oe(H.throw(Oe))}catch(Xe){X(Xe)}}s(fe,"rejected");function oe(Oe){Oe.done?W(Oe.value):j(Oe.value).then(ee,fe)}s(oe,"step"),oe((H=H.apply(A,P||[])).next())})}s(e,"__awaiter");function t(A,P){var D={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},H,j,W,X;return X={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function ee(oe){return function(Oe){return fe([oe,Oe])}}function fe(oe){if(H)throw new TypeError("Generator is already executing.");for(;D;)try{if(H=1,j&&(W=oe[0]&2?j.return:oe[0]?j.throw||((W=j.return)&&W.call(j),0):j.next)&&!(W=W.call(j,oe[1])).done)return W;switch(j=0,W&&(oe=[oe[0]&2,W.value]),oe[0]){case 0:case 1:W=oe;break;case 4:return D.label++,{value:oe[1],done:!1};case 5:D.label++,j=oe[1],oe=[0];continue;case 7:oe=D.ops.pop(),D.trys.pop();continue;default:if(W=D.trys,!(W=W.length>0&&W[W.length-1])&&(oe[0]===6||oe[0]===2)){D=0;continue}if(oe[0]===3&&(!W||oe[1]>W[0]&&oe[1]<W[3])){D.label=oe[1];break}if(oe[0]===6&&D.label<W[1]){D.label=W[1],W=oe;break}if(W&&D.label<W[2]){D.label=W[2],D.ops.push(oe);break}W[2]&&D.ops.pop(),D.trys.pop();continue}oe=P.call(A,D)}catch(Oe){oe=[6,Oe],j=0}finally{H=W=0}if(oe[0]&5)throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}}s(t,"__generator");function i(A,P,D,H){H===void 0&&(H=D),A[H]=P[D]}s(i,"__createBinding");function o(A,P){for(var D in A)D!=="default"&&!P.hasOwnProperty(D)&&(P[D]=A[D])}s(o,"__exportStar");function u(A){var P=typeof Symbol=="function"&&Symbol.iterator,D=P&&A[P],H=0;if(D)return D.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&H>=A.length&&(A=void 0),{value:A&&A[H++],done:!A}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}s(u,"__values");function h(A,P){var D=typeof Symbol=="function"&&A[Symbol.iterator];if(!D)return A;var H=D.call(A),j,W=[],X;try{for(;(P===void 0||P-- >0)&&!(j=H.next()).done;)W.push(j.value)}catch(ee){X={error:ee}}finally{try{j&&!j.done&&(D=H.return)&&D.call(H)}finally{if(X)throw X.error}}return W}s(h,"__read");function S(){for(var A=[],P=0;P<arguments.length;P++)A=A.concat(h(arguments[P]));return A}s(S,"__spread");function f(){for(var A=0,P=0,D=arguments.length;P<D;P++)A+=arguments[P].length;for(var H=Array(A),j=0,P=0;P<D;P++)for(var W=arguments[P],X=0,ee=W.length;X<ee;X++,j++)H[j]=W[X];return H}s(f,"__spreadArrays");function v(A){return this instanceof v?(this.v=A,this):new v(A)}s(v,"__await");function E(A,P,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H=D.apply(A,P||[]),j,W=[];return j={},X("next"),X("throw"),X("return"),j[Symbol.asyncIterator]=function(){return this},j;function X(ge){H[ge]&&(j[ge]=function(Me){return new Promise(function($e,ze){W.push([ge,Me,$e,ze])>1||ee(ge,Me)})})}function ee(ge,Me){try{fe(H[ge](Me))}catch($e){Xe(W[0][3],$e)}}function fe(ge){ge.value instanceof v?Promise.resolve(ge.value.v).then(oe,Oe):Xe(W[0][2],ge)}function oe(ge){ee("next",ge)}function Oe(ge){ee("throw",ge)}function Xe(ge,Me){ge(Me),W.shift(),W.length&&ee(W[0][0],W[0][1])}}s(E,"__asyncGenerator");function _(A){var P,D;return P={},H("next"),H("throw",function(j){throw j}),H("return"),P[Symbol.iterator]=function(){return this},P;function H(j,W){P[j]=A[j]?function(X){return(D=!D)?{value:v(A[j](X)),done:j==="return"}:W?W(X):X}:W}}s(_,"__asyncDelegator");function T(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=A[Symbol.asyncIterator],D;return P?P.call(A):(A=typeof u=="function"?u(A):A[Symbol.iterator](),D={},H("next"),H("throw"),H("return"),D[Symbol.asyncIterator]=function(){return this},D);function H(W){D[W]=A[W]&&function(X){return new Promise(function(ee,fe){X=A[W](X),j(ee,fe,X.done,X.value)})}}function j(W,X,ee,fe){Promise.resolve(fe).then(function(oe){W({value:oe,done:ee})},X)}}s(T,"__asyncValues");function w(A,P){return Object.defineProperty?Object.defineProperty(A,"raw",{value:P}):A.raw=P,A}s(w,"__makeTemplateObject");function M(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var D in A)Object.hasOwnProperty.call(A,D)&&(P[D]=A[D]);return P.default=A,P}s(M,"__importStar");function R(A){return A&&A.__esModule?A:{default:A}}s(R,"__importDefault");function O(A,P){if(!P.has(A))throw new TypeError("attempted to get private field on non-instance");return P.get(A)}s(O,"__classPrivateFieldGet");function k(A,P,D){if(!P.has(A))throw new TypeError("attempted to set private field on non-instance");return P.set(A,D),D}s(k,"__classPrivateFieldSet")},1725043582:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.EMPTY_DATA_SHA_256=a.SHA_256_HMAC_ALGO=a.SHA_256_HASH=void 0,a.SHA_256_HASH={name:"SHA-256"},a.SHA_256_HMAC_ALGO={name:"HMAC",hash:a.SHA_256_HASH},a.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},7630143991:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Sha256=void 0;var d=c(519406286),p=c(2468359987),m=c(9335813190),g=c(4038070804),l=c(452065043),r=c(6594694778),n=c(6034816005),e=function(){function t(i){(0,g.supportsWebCrypto)((0,r.locateWindow)())?this.hash=new p.Sha256(i):(0,l.isMsWindow)((0,r.locateWindow)())?this.hash=new d.Sha256(i):this.hash=new m.Sha256(i)}return s(t,"Sha256"),t.prototype.update=function(i,o){this.hash.update((0,n.convertToBuffer)(i))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();a.Sha256=e},519406286:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Sha256=void 0;var d=c(1539347662),p=c(1725043582),m=c(2412280125),g=c(6594694778),l=function(){function e(t){this.secret=t,this.reset()}return s(e,"Sha256"),e.prototype.update=function(t){var i=this;(0,d.isEmptyData)(t)||(this.operation=this.operation.then(function(o){return o.onerror=function(){i.operation=Promise.reject(new Error("Error encountered updating hash"))},o.process(n(t)),o}),this.operation.catch(function(){}))},e.prototype.digest=function(){return this.operation.then(function(t){return new Promise(function(i,o){t.onerror=function(){o(new Error("Error encountered finalizing hash"))},t.oncomplete=function(){t.result&&i(new Uint8Array(t.result)),o(new Error("Error encountered finalizing hash"))},t.finish()})})},e.prototype.reset=function(){this.secret?(this.operation=r(this.secret).then(function(t){return(0,g.locateWindow)().msCrypto.subtle.sign(p.SHA_256_HMAC_ALGO,t)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,g.locateWindow)().msCrypto.subtle.digest("SHA-256"))},e}();a.Sha256=l;function r(e){return new Promise(function(t,i){var o=(0,g.locateWindow)().msCrypto.subtle.importKey("raw",n(e),p.SHA_256_HMAC_ALGO,!1,["sign"]);o.oncomplete=function(){o.result&&t(o.result),i(new Error("ImportKey completed without importing key."))},o.onerror=function(){i(new Error("ImportKey failed to import key."))}})}s(r,"getKeyPromise");function n(e){return typeof e=="string"?(0,m.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}s(n,"toArrayBufferView")},3661302631:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.WebCryptoSha256=a.Ie11Sha256=void 0;var d=c(7681227474);d.__exportStar(c(7630143991),a);var p=c(519406286);Object.defineProperty(a,"Ie11Sha256",{enumerable:!0,get:function(){return p.Sha256}});var m=c(2468359987);Object.defineProperty(a,"WebCryptoSha256",{enumerable:!0,get:function(){return m.Sha256}})},1539347662:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isEmptyData=void 0;function c(d){return typeof d=="string"?d.length===0:d.byteLength===0}s(c,"isEmptyData"),a.isEmptyData=c},2468359987:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Sha256=void 0;var d=c(6034816005),p=c(1725043582),m=c(6594694778),g=function(){function l(r){this.toHash=new Uint8Array(0),this.secret=r,this.reset()}return s(l,"Sha256"),l.prototype.update=function(r){if(!(0,d.isEmptyData)(r)){var n=(0,d.convertToBuffer)(r),e=new Uint8Array(this.toHash.byteLength+n.byteLength);e.set(this.toHash,0),e.set(n,this.toHash.byteLength),this.toHash=e}},l.prototype.digest=function(){var r=this;return this.key?this.key.then(function(n){return(0,m.locateWindow)().crypto.subtle.sign(p.SHA_256_HMAC_ALGO,n,r.toHash).then(function(e){return new Uint8Array(e)})}):(0,d.isEmptyData)(this.toHash)?Promise.resolve(p.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,m.locateWindow)().crypto.subtle.digest(p.SHA_256_HASH,r.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},l.prototype.reset=function(){var r=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,e){(0,m.locateWindow)().crypto.subtle.importKey("raw",(0,d.convertToBuffer)(r.secret),p.SHA_256_HMAC_ALGO,!1,["sign"]).then(n,e)}),this.key.catch(function(){}))},l}();a.Sha256=g},7681227474:(F,a,c)=>{"use strict";c.r(a),c.d(a,{__assign:()=>m,__asyncDelegator:()=>_,__asyncGenerator:()=>E,__asyncValues:()=>T,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>k,__createBinding:()=>i,__decorate:()=>l,__exportStar:()=>o,__extends:()=>p,__generator:()=>t,__importDefault:()=>R,__importStar:()=>M,__makeTemplateObject:()=>w,__metadata:()=>n,__param:()=>r,__read:()=>h,__rest:()=>g,__spread:()=>S,__spreadArrays:()=>f,__values:()=>u});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d=s(function(A,P){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,H){D.__proto__=H}||function(D,H){for(var j in H)H.hasOwnProperty(j)&&(D[j]=H[j])},d(A,P)},"extendStatics");function p(A,P){d(A,P);function D(){this.constructor=A}s(D,"__"),A.prototype=P===null?Object.create(P):(D.prototype=P.prototype,new D)}s(p,"__extends");var m=s(function(){return m=Object.assign||s(function(P){for(var D,H=1,j=arguments.length;H<j;H++){D=arguments[H];for(var W in D)Object.prototype.hasOwnProperty.call(D,W)&&(P[W]=D[W])}return P},"__assign"),m.apply(this,arguments)},"__assign");function g(A,P){var D={};for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&P.indexOf(H)<0&&(D[H]=A[H]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,H=Object.getOwnPropertySymbols(A);j<H.length;j++)P.indexOf(H[j])<0&&Object.prototype.propertyIsEnumerable.call(A,H[j])&&(D[H[j]]=A[H[j]]);return D}s(g,"__rest");function l(A,P,D,H){var j=arguments.length,W=j<3?P:H===null?H=Object.getOwnPropertyDescriptor(P,D):H,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(A,P,D,H);else for(var ee=A.length-1;ee>=0;ee--)(X=A[ee])&&(W=(j<3?X(W):j>3?X(P,D,W):X(P,D))||W);return j>3&&W&&Object.defineProperty(P,D,W),W}s(l,"__decorate");function r(A,P){return function(D,H){P(D,H,A)}}s(r,"__param");function n(A,P){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,P)}s(n,"__metadata");function e(A,P,D,H){function j(W){return W instanceof D?W:new D(function(X){X(W)})}return s(j,"adopt"),new(D||(D=Promise))(function(W,X){function ee(Oe){try{oe(H.next(Oe))}catch(Xe){X(Xe)}}s(ee,"fulfilled");function fe(Oe){try{oe(H.throw(Oe))}catch(Xe){X(Xe)}}s(fe,"rejected");function oe(Oe){Oe.done?W(Oe.value):j(Oe.value).then(ee,fe)}s(oe,"step"),oe((H=H.apply(A,P||[])).next())})}s(e,"__awaiter");function t(A,P){var D={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},H,j,W,X;return X={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function ee(oe){return function(Oe){return fe([oe,Oe])}}function fe(oe){if(H)throw new TypeError("Generator is already executing.");for(;D;)try{if(H=1,j&&(W=oe[0]&2?j.return:oe[0]?j.throw||((W=j.return)&&W.call(j),0):j.next)&&!(W=W.call(j,oe[1])).done)return W;switch(j=0,W&&(oe=[oe[0]&2,W.value]),oe[0]){case 0:case 1:W=oe;break;case 4:return D.label++,{value:oe[1],done:!1};case 5:D.label++,j=oe[1],oe=[0];continue;case 7:oe=D.ops.pop(),D.trys.pop();continue;default:if(W=D.trys,!(W=W.length>0&&W[W.length-1])&&(oe[0]===6||oe[0]===2)){D=0;continue}if(oe[0]===3&&(!W||oe[1]>W[0]&&oe[1]<W[3])){D.label=oe[1];break}if(oe[0]===6&&D.label<W[1]){D.label=W[1],W=oe;break}if(W&&D.label<W[2]){D.label=W[2],D.ops.push(oe);break}W[2]&&D.ops.pop(),D.trys.pop();continue}oe=P.call(A,D)}catch(Oe){oe=[6,Oe],j=0}finally{H=W=0}if(oe[0]&5)throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}}s(t,"__generator");function i(A,P,D,H){H===void 0&&(H=D),A[H]=P[D]}s(i,"__createBinding");function o(A,P){for(var D in A)D!=="default"&&!P.hasOwnProperty(D)&&(P[D]=A[D])}s(o,"__exportStar");function u(A){var P=typeof Symbol=="function"&&Symbol.iterator,D=P&&A[P],H=0;if(D)return D.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&H>=A.length&&(A=void 0),{value:A&&A[H++],done:!A}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}s(u,"__values");function h(A,P){var D=typeof Symbol=="function"&&A[Symbol.iterator];if(!D)return A;var H=D.call(A),j,W=[],X;try{for(;(P===void 0||P-- >0)&&!(j=H.next()).done;)W.push(j.value)}catch(ee){X={error:ee}}finally{try{j&&!j.done&&(D=H.return)&&D.call(H)}finally{if(X)throw X.error}}return W}s(h,"__read");function S(){for(var A=[],P=0;P<arguments.length;P++)A=A.concat(h(arguments[P]));return A}s(S,"__spread");function f(){for(var A=0,P=0,D=arguments.length;P<D;P++)A+=arguments[P].length;for(var H=Array(A),j=0,P=0;P<D;P++)for(var W=arguments[P],X=0,ee=W.length;X<ee;X++,j++)H[j]=W[X];return H}s(f,"__spreadArrays");function v(A){return this instanceof v?(this.v=A,this):new v(A)}s(v,"__await");function E(A,P,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H=D.apply(A,P||[]),j,W=[];return j={},X("next"),X("throw"),X("return"),j[Symbol.asyncIterator]=function(){return this},j;function X(ge){H[ge]&&(j[ge]=function(Me){return new Promise(function($e,ze){W.push([ge,Me,$e,ze])>1||ee(ge,Me)})})}function ee(ge,Me){try{fe(H[ge](Me))}catch($e){Xe(W[0][3],$e)}}function fe(ge){ge.value instanceof v?Promise.resolve(ge.value.v).then(oe,Oe):Xe(W[0][2],ge)}function oe(ge){ee("next",ge)}function Oe(ge){ee("throw",ge)}function Xe(ge,Me){ge(Me),W.shift(),W.length&&ee(W[0][0],W[0][1])}}s(E,"__asyncGenerator");function _(A){var P,D;return P={},H("next"),H("throw",function(j){throw j}),H("return"),P[Symbol.iterator]=function(){return this},P;function H(j,W){P[j]=A[j]?function(X){return(D=!D)?{value:v(A[j](X)),done:j==="return"}:W?W(X):X}:W}}s(_,"__asyncDelegator");function T(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=A[Symbol.asyncIterator],D;return P?P.call(A):(A=typeof u=="function"?u(A):A[Symbol.iterator](),D={},H("next"),H("throw"),H("return"),D[Symbol.asyncIterator]=function(){return this},D);function H(W){D[W]=A[W]&&function(X){return new Promise(function(ee,fe){X=A[W](X),j(ee,fe,X.done,X.value)})}}function j(W,X,ee,fe){Promise.resolve(fe).then(function(oe){W({value:oe,done:ee})},X)}}s(T,"__asyncValues");function w(A,P){return Object.defineProperty?Object.defineProperty(A,"raw",{value:P}):A.raw=P,A}s(w,"__makeTemplateObject");function M(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var D in A)Object.hasOwnProperty.call(A,D)&&(P[D]=A[D]);return P.default=A,P}s(M,"__importStar");function R(A){return A&&A.__esModule?A:{default:A}}s(R,"__importDefault");function O(A,P){if(!P.has(A))throw new TypeError("attempted to get private field on non-instance");return P.get(A)}s(O,"__classPrivateFieldGet");function k(A,P,D){if(!P.has(A))throw new TypeError("attempted to set private field on non-instance");return P.set(A,D),D}s(k,"__classPrivateFieldSet")},74119063:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.RawSha256=void 0;var d=c(173496611),p=function(){function m(){this.state=Int32Array.from(d.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(m,"RawSha256"),m.prototype.update=function(g){if(this.finished)throw new Error("Attempted to update an already finished hash.");var l=0,r=g.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>d.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=g[l++],r--,this.bufferLength===d.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var g=this.bytesHashed*8,l=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(l.setUint8(this.bufferLength++,128),r%d.BLOCK_SIZE>=d.BLOCK_SIZE-8){for(var n=this.bufferLength;n<d.BLOCK_SIZE;n++)l.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<d.BLOCK_SIZE-8;n++)l.setUint8(n,0);l.setUint32(d.BLOCK_SIZE-8,Math.floor(g/4294967296),!0),l.setUint32(d.BLOCK_SIZE-4,g),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(d.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},m.prototype.hashBuffer=function(){for(var g=this,l=g.buffer,r=g.state,n=r[0],e=r[1],t=r[2],i=r[3],o=r[4],u=r[5],h=r[6],S=r[7],f=0;f<d.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(l[f*4]&255)<<24|(l[f*4+1]&255)<<16|(l[f*4+2]&255)<<8|l[f*4+3]&255;else{var v=this.temp[f-2],E=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[f-15];var _=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[f]=(E+this.temp[f-7]|0)+(_+this.temp[f-16]|0)}var T=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&u^~o&h)|0)+(S+(d.KEY[f]+this.temp[f]|0)|0)|0,w=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=h,h=u,u=o,o=i+T|0,i=t,t=e,e=n,n=T+w|0}r[0]+=n,r[1]+=e,r[2]+=t,r[3]+=i,r[4]+=o,r[5]+=u,r[6]+=h,r[7]+=S},m}();a.RawSha256=p},173496611:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MAX_HASHABLE_LENGTH=a.INIT=a.KEY=a.DIGEST_LENGTH=a.BLOCK_SIZE=void 0,a.BLOCK_SIZE=64,a.DIGEST_LENGTH=32,a.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],a.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},9335813190:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=c(5267011713);d.__exportStar(c(6938232186),a)},6938232186:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Sha256=void 0;var d=c(5267011713),p=c(173496611),m=c(74119063),g=c(6034816005),l=function(){function n(e){this.secret=e,this.hash=new m.RawSha256,this.reset()}return s(n,"Sha256"),n.prototype.update=function(e){if(!((0,g.isEmptyData)(e)||this.error))try{this.hash.update((0,g.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(e){return[2,this.digestSync()]})})},n.prototype.reset=function(){if(this.hash=new m.RawSha256,this.secret){this.outer=new m.RawSha256;var e=r(this.secret),t=new Uint8Array(p.BLOCK_SIZE);t.set(e);for(var i=0;i<p.BLOCK_SIZE;i++)e[i]^=54,t[i]^=92;this.hash.update(e),this.outer.update(t);for(var i=0;i<e.byteLength;i++)e[i]=0}},n}();a.Sha256=l;function r(n){var e=(0,g.convertToBuffer)(n);if(e.byteLength>p.BLOCK_SIZE){var t=new m.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(p.BLOCK_SIZE);return i.set(e),i}s(r,"bufferFromSecret")},5267011713:(F,a,c)=>{"use strict";c.r(a),c.d(a,{__assign:()=>m,__asyncDelegator:()=>_,__asyncGenerator:()=>E,__asyncValues:()=>T,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>k,__createBinding:()=>i,__decorate:()=>l,__exportStar:()=>o,__extends:()=>p,__generator:()=>t,__importDefault:()=>R,__importStar:()=>M,__makeTemplateObject:()=>w,__metadata:()=>n,__param:()=>r,__read:()=>h,__rest:()=>g,__spread:()=>S,__spreadArrays:()=>f,__values:()=>u});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d=s(function(A,P){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,H){D.__proto__=H}||function(D,H){for(var j in H)H.hasOwnProperty(j)&&(D[j]=H[j])},d(A,P)},"extendStatics");function p(A,P){d(A,P);function D(){this.constructor=A}s(D,"__"),A.prototype=P===null?Object.create(P):(D.prototype=P.prototype,new D)}s(p,"__extends");var m=s(function(){return m=Object.assign||s(function(P){for(var D,H=1,j=arguments.length;H<j;H++){D=arguments[H];for(var W in D)Object.prototype.hasOwnProperty.call(D,W)&&(P[W]=D[W])}return P},"__assign"),m.apply(this,arguments)},"__assign");function g(A,P){var D={};for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&P.indexOf(H)<0&&(D[H]=A[H]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,H=Object.getOwnPropertySymbols(A);j<H.length;j++)P.indexOf(H[j])<0&&Object.prototype.propertyIsEnumerable.call(A,H[j])&&(D[H[j]]=A[H[j]]);return D}s(g,"__rest");function l(A,P,D,H){var j=arguments.length,W=j<3?P:H===null?H=Object.getOwnPropertyDescriptor(P,D):H,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(A,P,D,H);else for(var ee=A.length-1;ee>=0;ee--)(X=A[ee])&&(W=(j<3?X(W):j>3?X(P,D,W):X(P,D))||W);return j>3&&W&&Object.defineProperty(P,D,W),W}s(l,"__decorate");function r(A,P){return function(D,H){P(D,H,A)}}s(r,"__param");function n(A,P){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,P)}s(n,"__metadata");function e(A,P,D,H){function j(W){return W instanceof D?W:new D(function(X){X(W)})}return s(j,"adopt"),new(D||(D=Promise))(function(W,X){function ee(Oe){try{oe(H.next(Oe))}catch(Xe){X(Xe)}}s(ee,"fulfilled");function fe(Oe){try{oe(H.throw(Oe))}catch(Xe){X(Xe)}}s(fe,"rejected");function oe(Oe){Oe.done?W(Oe.value):j(Oe.value).then(ee,fe)}s(oe,"step"),oe((H=H.apply(A,P||[])).next())})}s(e,"__awaiter");function t(A,P){var D={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},H,j,W,X;return X={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function ee(oe){return function(Oe){return fe([oe,Oe])}}function fe(oe){if(H)throw new TypeError("Generator is already executing.");for(;D;)try{if(H=1,j&&(W=oe[0]&2?j.return:oe[0]?j.throw||((W=j.return)&&W.call(j),0):j.next)&&!(W=W.call(j,oe[1])).done)return W;switch(j=0,W&&(oe=[oe[0]&2,W.value]),oe[0]){case 0:case 1:W=oe;break;case 4:return D.label++,{value:oe[1],done:!1};case 5:D.label++,j=oe[1],oe=[0];continue;case 7:oe=D.ops.pop(),D.trys.pop();continue;default:if(W=D.trys,!(W=W.length>0&&W[W.length-1])&&(oe[0]===6||oe[0]===2)){D=0;continue}if(oe[0]===3&&(!W||oe[1]>W[0]&&oe[1]<W[3])){D.label=oe[1];break}if(oe[0]===6&&D.label<W[1]){D.label=W[1],W=oe;break}if(W&&D.label<W[2]){D.label=W[2],D.ops.push(oe);break}W[2]&&D.ops.pop(),D.trys.pop();continue}oe=P.call(A,D)}catch(Oe){oe=[6,Oe],j=0}finally{H=W=0}if(oe[0]&5)throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}}s(t,"__generator");function i(A,P,D,H){H===void 0&&(H=D),A[H]=P[D]}s(i,"__createBinding");function o(A,P){for(var D in A)D!=="default"&&!P.hasOwnProperty(D)&&(P[D]=A[D])}s(o,"__exportStar");function u(A){var P=typeof Symbol=="function"&&Symbol.iterator,D=P&&A[P],H=0;if(D)return D.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&H>=A.length&&(A=void 0),{value:A&&A[H++],done:!A}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}s(u,"__values");function h(A,P){var D=typeof Symbol=="function"&&A[Symbol.iterator];if(!D)return A;var H=D.call(A),j,W=[],X;try{for(;(P===void 0||P-- >0)&&!(j=H.next()).done;)W.push(j.value)}catch(ee){X={error:ee}}finally{try{j&&!j.done&&(D=H.return)&&D.call(H)}finally{if(X)throw X.error}}return W}s(h,"__read");function S(){for(var A=[],P=0;P<arguments.length;P++)A=A.concat(h(arguments[P]));return A}s(S,"__spread");function f(){for(var A=0,P=0,D=arguments.length;P<D;P++)A+=arguments[P].length;for(var H=Array(A),j=0,P=0;P<D;P++)for(var W=arguments[P],X=0,ee=W.length;X<ee;X++,j++)H[j]=W[X];return H}s(f,"__spreadArrays");function v(A){return this instanceof v?(this.v=A,this):new v(A)}s(v,"__await");function E(A,P,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H=D.apply(A,P||[]),j,W=[];return j={},X("next"),X("throw"),X("return"),j[Symbol.asyncIterator]=function(){return this},j;function X(ge){H[ge]&&(j[ge]=function(Me){return new Promise(function($e,ze){W.push([ge,Me,$e,ze])>1||ee(ge,Me)})})}function ee(ge,Me){try{fe(H[ge](Me))}catch($e){Xe(W[0][3],$e)}}function fe(ge){ge.value instanceof v?Promise.resolve(ge.value.v).then(oe,Oe):Xe(W[0][2],ge)}function oe(ge){ee("next",ge)}function Oe(ge){ee("throw",ge)}function Xe(ge,Me){ge(Me),W.shift(),W.length&&ee(W[0][0],W[0][1])}}s(E,"__asyncGenerator");function _(A){var P,D;return P={},H("next"),H("throw",function(j){throw j}),H("return"),P[Symbol.iterator]=function(){return this},P;function H(j,W){P[j]=A[j]?function(X){return(D=!D)?{value:v(A[j](X)),done:j==="return"}:W?W(X):X}:W}}s(_,"__asyncDelegator");function T(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=A[Symbol.asyncIterator],D;return P?P.call(A):(A=typeof u=="function"?u(A):A[Symbol.iterator](),D={},H("next"),H("throw"),H("return"),D[Symbol.asyncIterator]=function(){return this},D);function H(W){D[W]=A[W]&&function(X){return new Promise(function(ee,fe){X=A[W](X),j(ee,fe,X.done,X.value)})}}function j(W,X,ee,fe){Promise.resolve(fe).then(function(oe){W({value:oe,done:ee})},X)}}s(T,"__asyncValues");function w(A,P){return Object.defineProperty?Object.defineProperty(A,"raw",{value:P}):A.raw=P,A}s(w,"__makeTemplateObject");function M(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var D in A)Object.hasOwnProperty.call(A,D)&&(P[D]=A[D]);return P.default=A,P}s(M,"__importStar");function R(A){return A&&A.__esModule?A:{default:A}}s(R,"__importDefault");function O(A,P){if(!P.has(A))throw new TypeError("attempted to get private field on non-instance");return P.get(A)}s(O,"__classPrivateFieldGet");function k(A,P,D){if(!P.has(A))throw new TypeError("attempted to set private field on non-instance");return P.set(A,D),D}s(k,"__classPrivateFieldSet")},4038070804:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=c(4482224279);d.__exportStar(c(9916139971),a)},9916139971:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.supportsZeroByteGCM=a.supportsSubtleCrypto=a.supportsSecureRandom=a.supportsWebCrypto=void 0;var d=c(4482224279),p=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function m(n){if(g(n)&&typeof n.crypto.subtle=="object"){var e=n.crypto.subtle;return l(e)}return!1}s(m,"supportsWebCrypto"),a.supportsWebCrypto=m;function g(n){if(typeof n=="object"&&typeof n.crypto=="object"){var e=n.crypto.getRandomValues;return typeof e=="function"}return!1}s(g,"supportsSecureRandom"),a.supportsSecureRandom=g;function l(n){return n&&p.every(function(e){return typeof n[e]=="function"})}s(l,"supportsSubtleCrypto"),a.supportsSubtleCrypto=l;function r(n){return d.__awaiter(this,void 0,void 0,function(){var e,t,i;return d.__generator(this,function(o){switch(o.label){case 0:if(!l(n))return[2,!1];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,n.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return e=o.sent(),[4,n.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},e,new Uint8Array(0))];case 3:return t=o.sent(),[2,t.byteLength===16];case 4:return i=o.sent(),[2,!1];case 5:return[2]}})})}s(r,"supportsZeroByteGCM"),a.supportsZeroByteGCM=r},4482224279:(F,a,c)=>{"use strict";c.r(a),c.d(a,{__assign:()=>m,__asyncDelegator:()=>_,__asyncGenerator:()=>E,__asyncValues:()=>T,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>k,__createBinding:()=>i,__decorate:()=>l,__exportStar:()=>o,__extends:()=>p,__generator:()=>t,__importDefault:()=>R,__importStar:()=>M,__makeTemplateObject:()=>w,__metadata:()=>n,__param:()=>r,__read:()=>h,__rest:()=>g,__spread:()=>S,__spreadArrays:()=>f,__values:()=>u});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d=s(function(A,P){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,H){D.__proto__=H}||function(D,H){for(var j in H)H.hasOwnProperty(j)&&(D[j]=H[j])},d(A,P)},"extendStatics");function p(A,P){d(A,P);function D(){this.constructor=A}s(D,"__"),A.prototype=P===null?Object.create(P):(D.prototype=P.prototype,new D)}s(p,"__extends");var m=s(function(){return m=Object.assign||s(function(P){for(var D,H=1,j=arguments.length;H<j;H++){D=arguments[H];for(var W in D)Object.prototype.hasOwnProperty.call(D,W)&&(P[W]=D[W])}return P},"__assign"),m.apply(this,arguments)},"__assign");function g(A,P){var D={};for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&P.indexOf(H)<0&&(D[H]=A[H]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,H=Object.getOwnPropertySymbols(A);j<H.length;j++)P.indexOf(H[j])<0&&Object.prototype.propertyIsEnumerable.call(A,H[j])&&(D[H[j]]=A[H[j]]);return D}s(g,"__rest");function l(A,P,D,H){var j=arguments.length,W=j<3?P:H===null?H=Object.getOwnPropertyDescriptor(P,D):H,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(A,P,D,H);else for(var ee=A.length-1;ee>=0;ee--)(X=A[ee])&&(W=(j<3?X(W):j>3?X(P,D,W):X(P,D))||W);return j>3&&W&&Object.defineProperty(P,D,W),W}s(l,"__decorate");function r(A,P){return function(D,H){P(D,H,A)}}s(r,"__param");function n(A,P){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,P)}s(n,"__metadata");function e(A,P,D,H){function j(W){return W instanceof D?W:new D(function(X){X(W)})}return s(j,"adopt"),new(D||(D=Promise))(function(W,X){function ee(Oe){try{oe(H.next(Oe))}catch(Xe){X(Xe)}}s(ee,"fulfilled");function fe(Oe){try{oe(H.throw(Oe))}catch(Xe){X(Xe)}}s(fe,"rejected");function oe(Oe){Oe.done?W(Oe.value):j(Oe.value).then(ee,fe)}s(oe,"step"),oe((H=H.apply(A,P||[])).next())})}s(e,"__awaiter");function t(A,P){var D={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},H,j,W,X;return X={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function ee(oe){return function(Oe){return fe([oe,Oe])}}function fe(oe){if(H)throw new TypeError("Generator is already executing.");for(;D;)try{if(H=1,j&&(W=oe[0]&2?j.return:oe[0]?j.throw||((W=j.return)&&W.call(j),0):j.next)&&!(W=W.call(j,oe[1])).done)return W;switch(j=0,W&&(oe=[oe[0]&2,W.value]),oe[0]){case 0:case 1:W=oe;break;case 4:return D.label++,{value:oe[1],done:!1};case 5:D.label++,j=oe[1],oe=[0];continue;case 7:oe=D.ops.pop(),D.trys.pop();continue;default:if(W=D.trys,!(W=W.length>0&&W[W.length-1])&&(oe[0]===6||oe[0]===2)){D=0;continue}if(oe[0]===3&&(!W||oe[1]>W[0]&&oe[1]<W[3])){D.label=oe[1];break}if(oe[0]===6&&D.label<W[1]){D.label=W[1],W=oe;break}if(W&&D.label<W[2]){D.label=W[2],D.ops.push(oe);break}W[2]&&D.ops.pop(),D.trys.pop();continue}oe=P.call(A,D)}catch(Oe){oe=[6,Oe],j=0}finally{H=W=0}if(oe[0]&5)throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}}s(t,"__generator");function i(A,P,D,H){H===void 0&&(H=D),A[H]=P[D]}s(i,"__createBinding");function o(A,P){for(var D in A)D!=="default"&&!P.hasOwnProperty(D)&&(P[D]=A[D])}s(o,"__exportStar");function u(A){var P=typeof Symbol=="function"&&Symbol.iterator,D=P&&A[P],H=0;if(D)return D.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&H>=A.length&&(A=void 0),{value:A&&A[H++],done:!A}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}s(u,"__values");function h(A,P){var D=typeof Symbol=="function"&&A[Symbol.iterator];if(!D)return A;var H=D.call(A),j,W=[],X;try{for(;(P===void 0||P-- >0)&&!(j=H.next()).done;)W.push(j.value)}catch(ee){X={error:ee}}finally{try{j&&!j.done&&(D=H.return)&&D.call(H)}finally{if(X)throw X.error}}return W}s(h,"__read");function S(){for(var A=[],P=0;P<arguments.length;P++)A=A.concat(h(arguments[P]));return A}s(S,"__spread");function f(){for(var A=0,P=0,D=arguments.length;P<D;P++)A+=arguments[P].length;for(var H=Array(A),j=0,P=0;P<D;P++)for(var W=arguments[P],X=0,ee=W.length;X<ee;X++,j++)H[j]=W[X];return H}s(f,"__spreadArrays");function v(A){return this instanceof v?(this.v=A,this):new v(A)}s(v,"__await");function E(A,P,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H=D.apply(A,P||[]),j,W=[];return j={},X("next"),X("throw"),X("return"),j[Symbol.asyncIterator]=function(){return this},j;function X(ge){H[ge]&&(j[ge]=function(Me){return new Promise(function($e,ze){W.push([ge,Me,$e,ze])>1||ee(ge,Me)})})}function ee(ge,Me){try{fe(H[ge](Me))}catch($e){Xe(W[0][3],$e)}}function fe(ge){ge.value instanceof v?Promise.resolve(ge.value.v).then(oe,Oe):Xe(W[0][2],ge)}function oe(ge){ee("next",ge)}function Oe(ge){ee("throw",ge)}function Xe(ge,Me){ge(Me),W.shift(),W.length&&ee(W[0][0],W[0][1])}}s(E,"__asyncGenerator");function _(A){var P,D;return P={},H("next"),H("throw",function(j){throw j}),H("return"),P[Symbol.iterator]=function(){return this},P;function H(j,W){P[j]=A[j]?function(X){return(D=!D)?{value:v(A[j](X)),done:j==="return"}:W?W(X):X}:W}}s(_,"__asyncDelegator");function T(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=A[Symbol.asyncIterator],D;return P?P.call(A):(A=typeof u=="function"?u(A):A[Symbol.iterator](),D={},H("next"),H("throw"),H("return"),D[Symbol.asyncIterator]=function(){return this},D);function H(W){D[W]=A[W]&&function(X){return new Promise(function(ee,fe){X=A[W](X),j(ee,fe,X.done,X.value)})}}function j(W,X,ee,fe){Promise.resolve(fe).then(function(oe){W({value:oe,done:ee})},X)}}s(T,"__asyncValues");function w(A,P){return Object.defineProperty?Object.defineProperty(A,"raw",{value:P}):A.raw=P,A}s(w,"__makeTemplateObject");function M(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var D in A)Object.hasOwnProperty.call(A,D)&&(P[D]=A[D]);return P.default=A,P}s(M,"__importStar");function R(A){return A&&A.__esModule?A:{default:A}}s(R,"__importDefault");function O(A,P){if(!P.has(A))throw new TypeError("attempted to get private field on non-instance");return P.get(A)}s(O,"__classPrivateFieldGet");function k(A,P,D){if(!P.has(A))throw new TypeError("attempted to set private field on non-instance");return P.set(A,D),D}s(k,"__classPrivateFieldSet")},4927009193:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.convertToBuffer=void 0;var d=c(2412280125),p=typeof Buffer<"u"&&Buffer.from?function(g){return Buffer.from(g,"utf8")}:d.fromUtf8;function m(g){return g instanceof Uint8Array?g:typeof g=="string"?p(g):ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(g)}s(m,"convertToBuffer"),a.convertToBuffer=m},6034816005:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.uint32ArrayFrom=a.numToUint8=a.isEmptyData=a.convertToBuffer=void 0;var d=c(4927009193);Object.defineProperty(a,"convertToBuffer",{enumerable:!0,get:function(){return d.convertToBuffer}});var p=c(2723880444);Object.defineProperty(a,"isEmptyData",{enumerable:!0,get:function(){return p.isEmptyData}});var m=c(7171524732);Object.defineProperty(a,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var g=c(3216375755);Object.defineProperty(a,"uint32ArrayFrom",{enumerable:!0,get:function(){return g.uint32ArrayFrom}})},2723880444:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isEmptyData=void 0;function c(d){return typeof d=="string"?d.length===0:d.byteLength===0}s(c,"isEmptyData"),a.isEmptyData=c},7171524732:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.numToUint8=void 0;function c(d){return new Uint8Array([(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255])}s(c,"numToUint8"),a.numToUint8=c},3216375755:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.uint32ArrayFrom=void 0;function c(d){if(!Uint32Array.from){for(var p=new Uint32Array(d.length),m=0;m<d.length;)p[m]=d[m],m+=1;return p}return Uint32Array.from(d)}s(c,"uint32ArrayFrom"),a.uint32ArrayFrom=c},5244168417:(F,a,c)=>{"use strict";c.r(a),c.d(a,{AutocompleteActions:()=>_e,CalloutBackgroundColor:()=>Un,CalloutModificationProperty:()=>zn,CollabApi:()=>on,CollabPopoverDismissSource:()=>Qe,CollabUrlType:()=>yr,CommentFocusTarget:()=>Yn,CommentLevel:()=>li,DialogContext:()=>He,DocBlockStyle:()=>K,DocInlineStyle:()=>Ue,EmbeddedMoveDirection:()=>En,EmbeddedObjectType:()=>Ft,EmbeddedUIAttributes:()=>gn,EmbeddedUiAction:()=>gi,EmbeddedUiContext:()=>Gn,ErrorSource:()=>nn,Feature:()=>Se,FullTableModification:()=>bn,GetSlackObjectFailureReason:()=>ve,GrafterUrls:()=>n,InlineFormattingType:()=>Ee,NavigationTypeMetric:()=>de,PlaceholderInsertionType:()=>On,SectionInsertionType:()=>Et,ShortcutModifier:()=>Ae,SlackListContentRenderType:()=>qe,SlackObjectActionType:()=>ui,SlackObjectType:()=>L,SlackShortcutCommandType:()=>Ie,SlackShortcutMetricSource:()=>ne,SlackUnfurlContentRenderType:()=>ft,TablePart:()=>xt,TablePartModificationType:()=>Ui,TableSelectionAction:()=>ai,TableSelectionModification:()=>_i,TemplateControlAction:()=>Ti,TemplateType:()=>Ci,ToastMessageContext:()=>it,UnfurlType:()=>Bt});class d{constructor(){this.o=!1,this._=[]}run(){this.o=!0;const ce=this._;this._=[];for(let Fe=0;Fe<ce.length;Fe++)ce[Fe]()}add(ce){this.o?ce():this._.push(ce)}}s(d,"t");var p,m;(function(U){var ce;(ce=U.Op||(U.Op={}))[ce.DID_INITIALIZE=8]="DID_INITIALIZE",ce[ce.DID_FAIL_TO_INITIALIZE=9]="DID_FAIL_TO_INITIALIZE"})(p||(p={})),function(U){var ce;(ce=U.Op||(U.Op={}))[ce.INIT=0]="INIT"}(m||(m={}));class g{constructor(ce){this.l=new Map,this.u=null,this.destinationFn=ce}setTransportHook(ce){this.u=ce}tearDown(){}addHandler(ce,Fe){this.l.has(ce)&&this.logError(`Already had handler for op ${ce} will overwrite.`),this.l.set(ce,Fe)}getHandler(ce){const Fe=this.l.get(ce);return Fe?this.u?(Ke,st)=>{var Dt;return(Dt=this.u)===null||Dt===void 0||Dt.call(this,ce,Ke,r.INCOMING),Fe(Ke,Vt=>{var Yt;return(Yt=this.u)===null||Yt===void 0||Yt.call(this,ce,Vt,r.OUTGOING_REPLY),st(Vt)})}:Fe:null}invoke(ce,Fe,Ke){var st;if((st=this.u)===null||st===void 0||st.call(this,ce,Fe,r.OUTGOING),this.u&&Ke){const Yt=Ke;Ke=s(pn=>{var dn;(dn=this.u)===null||dn===void 0||dn.call(this,ce,pn,r.INCOMING_REPLY),Yt(pn)},"i")}const Dt=this.destinationFn().getHandler(ce);if(!Dt)return void this.logError(`Bridge transport doesn't have handler for op ${ce}`);let Vt;try{Vt=Dt(Fe,Yt=>{Ke?Ke(Yt):this.logError(`Invoke response received without callback for op ${ce}`)})}catch{l(ce,Fe)}Vt instanceof Promise&&Vt.catch(Yt=>l(ce,Fe))}logError(ce){}}s(g,"s");let l=s((U,ce,Fe)=>{let Ke="";try{Ke=JSON.stringify(ce)}catch{Ke="(Unserializable message)"}},"n");var r,n,e;function t(U){return U?`${function(){var ce;const Fe=(ce=new URLSearchParams(location.search).get("quip_js_path"))!==null&&ce!==void 0?ce:void 0;return Fe&&/^remote-dev\d{4}$/.test(Fe)?`https://app.${Fe.split("-")[1]}.slack.com`:location.origin}()}${n.RDEVS_CONTROLLER_JS_PATH}`:n.CONTROLLER_JS}s(t,"_");function i(U){if(!U)return!1;const ce=U.indexOf(location.origin+"/")!=0,Fe=U.includes("/canvas-rdev/collab/");return ce&&Fe}s(i,"l"),function(U){U[U.INCOMING=1]="INCOMING",U[U.INCOMING_REPLY=2]="INCOMING_REPLY",U[U.OUTGOING=3]="OUTGOING",U[U.OUTGOING_REPLY=4]="OUTGOING_REPLY"}(r||(r={})),function(U){U.CONTROLLER_CSS="https://quip.codes/-/static/less/stylesheet/-?retina=True&mode=normal&less=collab%2Fcontroller.less",U.CONTROLLER_JS="https://slackdocs.codes:3000/ts/src/collab/controller/bundle.ts",U.EMBEDDED_JS="https://slackdocs.codes/-/static-script-files?grafted=True&resource_bundle_name=collab_embedded",U.RDEVS_EMBEDDED_JS_PATH="/canvas-rdev/collab/grafted/embedded?grafted=True&resource_bundle_name=collab_embedded",U.RDEVS_CONTROLLER_CSS_PATH="/canvas-rdev/collab/grafted/style?retina=True&mode=normal&less=collab%2Fcontroller.less",U.RDEVS_CONTROLLER_JS_PATH="/canvas-rdev/collab/canvas-remote-dev-vite?path=ts/src/collab/controller/bundle.ts"}(n||(n={})),function(U){U.BRIDGE_TRANSPORT_SET="bridge-transport-set",U.BRIDGE_TRANSPORT_READY="bridge-transport-ready",U.HANDLER_REGISTERED="handler-registered",U.HANDLER_REGISTRATION_FINISHED="handler_registration_finished",U.MESSAGE_SENT="message_sent",U.MESSAGE_HANDLED="message-handled",U.INIT_SENT="init_sent",U.INIT_RECEIVED="init_received",U.DID_INIT_SENT="did_init_sent",U.DID_INIT_RECEIVED="did_init_received",U.BRIDGE_OPEN="bridge-open",U.ERROR="error",U.SYSTEMJS_LOADED="systemjs-loaded",U.CONTROLLER_SYSTEMJS_MODULE_IMPORTED="controller-systemjs-imported",U.CONTROLLER_INIT_DATA_FETCHED="controller-init-data-fetched",U.CONTROLLER_RESOURCE_DATA_FETCHED="controller-resource-data-fetched",U.PROBE="probe",U.OTHER="misc"}(e||(e={}));class o{constructor(ce){this.T=ce,this.A=[],this.S=[],this.O=[],this.N=[],this.I=[],this.L=Date.now(),this.onlyBefore("Handler registered late",e.HANDLER_REGISTERED,[e.HANDLER_REGISTRATION_FINISHED]),this.onlyAfter("Message sent before bridge open",e.MESSAGE_SENT,[e.BRIDGE_OPEN]),this.onlyAfter("Message handled before bridge open",e.MESSAGE_HANDLED,[e.BRIDGE_OPEN])}getTimeoutForPromise(){return o.TIMEOUT_FOR_PROMISE}fireEvent(ce,Fe=null){if(this.S.filter(st=>st.beforeEvent==ce).forEach(st=>{st.afterEvents.some(Dt=>this.A.includes(Dt))&&st.message&&this.C(`${this.T}: ${st.message}`)}),this.O.filter(st=>st.afterEvent==ce).forEach(st=>{st.beforeEvents.some(Dt=>!this.A.includes(Dt))&&st.message&&this.C(`${this.T}: ${st.message}`)}),ce!=e.HANDLER_REGISTERED&&this.C(Fe?Promise.resolve(Fe).then(st=>`${ce}: ${st}`):ce),this.A.includes(ce))return;this.A.push(ce);const Ke=[];this.N=this.N.filter(st=>!st.events.every(Dt=>this.A.includes(Dt))||(Ke.push(st),!1)),Ke.forEach(st=>{st.description&&this.C(`${ce} -> ${st.description}`),st.callback()})}after(ce,Fe,Ke=null){ce.every(st=>this.A.includes(st))?Fe():(Ke&&this.C(`${Ke} deferred`),this.N.push({events:ce,description:Ke,callback:Fe}))}onlyBefore(ce,Fe,Ke){this.S.push({beforeEvent:Fe,afterEvents:Ke,message:ce})}onlyAfter(ce,Fe,Ke){this.O.push({beforeEvents:Ke,afterEvent:Fe,message:ce})}C(ce){if(this.I.length>o.MAX_INIT_LOG)return;const Fe=Date.now()-this.L,Ke=Promise.resolve(ce);this.I.push({timestamp:Fe,message:Ke}),Ke.then(st=>{console.debug(`${this.T}: ${st}`)})}getInitLog(ce){const Fe=(ce?this.I.slice(0,ce):this.I).map(async Ke=>({t:Ke.timestamp,e:await Ke.message}));return Promise.all(Fe).then(Ke=>({id:this.T,log:Ke}))}}s(o,"c"),o.MAX_INIT_LOG=50,o.TIMEOUT_FOR_PROMISE=3e4;function u(U,{logCallback:ce=s(()=>{},"e"),timeoutMillis:Fe=3e4,name:Ke="Unnamed",context:st=""}={}){return new Promise((Dt,Vt)=>{let Yt=window.setTimeout(()=>{Yt=null,ce(`${Ke} promise timed out: ${st}`),Vt(new Error(`${Ke} promise timed out`))},Fe);const pn=s(()=>{Yt&&(clearTimeout(Yt),Yt=null)},"_");U.then(dn=>{Yt?(pn(),Dt(dn)):ce(`${Ke} promise resolved after timeout: ${st}`)}).catch(dn=>{Yt?(pn(),Vt(dn)):ce(`${Ke} promise rejected after timeout: ${st}`)})})}s(u,"a");function h(U,ce,Fe,Ke,st){const{span:Dt,closeSpanFn:Vt}=Ke.createBasicTraceSpan(st,Fe,{[Je.URL]:U}),{closeSpanFn:Yt}=Ke.createBasicTraceSpan(Dt,Be.HTTP_FETCH_HEADER),pn=new AbortController,dn=setTimeout(()=>{pn.abort()},Ke.bridgeInit.getTimeoutForPromise());return fetch(U,Object.assign({signal:pn.signal},ce)).catch(An=>{throw Yt(An),Error(`${Fe} fetch failed: ${An}`)}).then(An=>{if(clearTimeout(dn),!An.ok)return Yt(new Error(`returned ${An.status}`)),f(Ke,Fe,An,Dt).then(ri=>{throw Error(ri)});Yt();const{closeSpanFn:ci}=Ke.createBasicTraceSpan(Dt,Be.HTTP_FETCH_CONTENT,{[Je.URL]:U});return An.text().catch(ri=>{throw ci(ri),ri}).then(ri=>{ci();const{closeSpanFn:Vi}=Ke.createBasicTraceSpan(Dt,Be.JSON_PARSE);try{const Zi=JSON.parse(ri);return Vi(),Zi}catch(Zi){throw Vi(new Error(`${Zi}`)),Ke.bridgeInit.fireEvent(e.ERROR,f(Ke,Fe,An,null)),Zi}})}).finally(()=>{Vt()})}s(h,"h");function S(U,ce,Fe,Ke,st=!1){const Dt=new AbortController,Vt=setTimeout(()=>{Dt.abort()},Fe.bridgeInit.getTimeoutForPromise());Fe.bridgeInit.fireEvent(e.OTHER,`${ce} prefetch start`);const{span:Yt,closeSpanFn:pn}=Fe.createBasicTraceSpan(Ke,Be.MODULE_PREFETCH,{[Je.URL]:U}),{closeSpanFn:dn}=Fe.createBasicTraceSpan(Yt,Be.HTTP_FETCH_HEADER),An={method:"GET",mode:"cors",cache:"default",signal:Dt.signal};return st&&(An.credentials="include"),fetch(U,An).catch(ci=>{throw dn(ci),Error(`${ce} fetch failed: ${ci}`)}).then(ci=>{if(!ci.ok)return dn(new Error(`Returned ${ci.status}`)),f(Fe,ce,ci,Yt).then(Vi=>{throw Error(Vi)});dn();const{closeSpanFn:ri}=Fe.createBasicTraceSpan(Yt,Be.HTTP_FETCH_CONTENT);return ci.text().then(()=>{ri(),Fe.bridgeInit.fireEvent(e.OTHER,`${ce} prefetch ok`)}).catch(Vi=>{throw ri(Vi),Vi})}).finally(()=>{pn(),clearTimeout(Vt)})}s(S,"d");function f(U,ce,Fe,Ke){const{closeSpanFn:st}=U.createBasicTraceSpan(Ke,Be.HTTP_FETCH_CONTENT);return Fe.text().then(Dt=>{const Vt=function(pn){if(!pn||pn.trim().length==0)return"response body empty";try{const dn=new DOMParser().parseFromString(pn,"text/html").documentElement.textContent;if(dn&&dn.trim().length>0)return dn.trim().replace(/\s+/g," ").slice(0,50)}catch{}return pn.trim().slice(0,50)}(Dt),Yt=`${ce} fetch returned ${Fe.status}: ${Vt}`;return st(new Error(Yt)),Yt}).catch(Dt=>{const Vt=`${ce} fetch returned ${Fe.status}: response body unavailable (${Dt})`;return st(new Error(Vt)),Vt})}s(f,"u");function v(U,ce,Fe){let Ke=null;const{id:st,promise:Dt}=function(pn){const dn=Symbol(),An=new Promise(ci=>{H.push({id:dn,callback:ri=>{pn(),ci(ri)}})});return j||(j=!0,window._collabInit=ci=>{var ri;(ri=H.shift())===null||ri===void 0||ri.callback(ci)}),{promise:An,id:dn}}(()=>{var pn,dn;(dn=(pn=U==null?void 0:U.platformDelegate)===null||pn===void 0?void 0:pn.endTraceOrSpan)===null||dn===void 0||dn.call(pn,Ke)}),Vt=Dt.then(pn=>(U.bridgeInit.fireEvent(e.OTHER,"_collabInit called"),pn));return function(pn,dn,An){return dn.then(ci=>{if(ci.module_loader_url==null)throw Error("No module loader URL.  Server likely isn't in SystemJS mode.");const{span:ri,closeSpanFn:Vi}=pn.createBasicTraceSpan(An,Be.LOAD_CONTROLLER),Zi=pn.config.useGraftedMode?t(pn.config.isRemoteGraftingMode):ci.controller_entry_module_url;return function(pr,Or,Ar,Xr){Ar&&(D=Ar);const tr=pr.bridgeInit;if(R){const Hi=M;return tr.fireEvent(e.OTHER,`Collab ${Hi} is loading systemjs, reusing the promise`),R.then(()=>{tr.fireEvent(e.OTHER,`Systemjs promise reused from collab ${Hi} succeeded`)}).catch($i=>{throw tr.fireEvent(e.ERROR,`Systemjs promise reused from collab ${Hi} failed: ${$i}`),$i})}let kn,Mi=null;if(O())tr.fireEvent(e.OTHER,"systemjs already loaded, running prepareImport"),Mi="System.prepareImport() promise resolved",kn=u(System.prepareImport(!0),{name:"System.prepareImport",timeoutMillis:tr.getTimeoutForPromise()});else{tr.fireEvent(e.OTHER,"No SystemJS found, loading it");const{span:Hi,closeSpanFn:$i}=pr.createBasicTraceSpan(Xr,Be.LOAD_SYSTEMJS,{[Je.JS_PREFETCH_ENABLED]:"true",[Je.URL]:Or});Mi="systemjs script tag onload fired",kn=function(qi,Er,Wr){return S(Er,"systemjs-module-loader",qi,Wr,i(Er)).then(()=>{const hi=document.createElement("script");return new Promise((Ki,ur)=>{const{closeSpanFn:pe}=qi.createBasicTraceSpan(Wr,Be.SCRIPT_TAG);hi.src=Er,hi.defer=!0,hi.crossOrigin="anonymous",hi.onload=()=>{pe(),Ki()},hi.onerror=Ce=>{const Le=Error(`systemjs onerror called: ${Ce}`);pe(Le),ur(Le)},document.body.appendChild(hi)}).then(()=>{if(!O())throw Error("SystemJS not found after it was loaded")}).catch(Ki=>{throw typeof System=="object"&&(delete window.System,qi.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs global object")),hi.onload=null,hi.onerror=null,hi.parentNode&&(hi.parentNode.removeChild(hi),qi.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs loader script tag")),Ki})})}(pr,Or,Hi).finally(()=>{$i()})}return M=pr.id,R=kn.then(()=>{tr.fireEvent(e.SYSTEMJS_LOADED,Mi)}).finally(()=>{R=null,M=null}),R}(pn,ci.module_loader_url,ci.import_map,ri).then(()=>{var pr,Or;return T(Zi,(Or=(pr=ci.import_map)===null||pr===void 0?void 0:pr.imports)!==null&&Or!==void 0?Or:{},pn,ri)}).finally(()=>{Vi()})})}(U,ce,Fe).then(()=>{var pn,dn,An;return Ke=(An=(dn=(pn=U==null?void 0:U.platformDelegate)===null||pn===void 0?void 0:pn.startSpan)===null||dn===void 0?void 0:dn.call(pn,Fe,Be.AWAIT_CALLBACK))!==null&&An!==void 0?An:null,u(Vt,{name:"_collabInit callback",timeoutMillis:U.bridgeInit.getTimeoutForPromise()}).catch(ci=>{var ri,Vi;throw(Vi=(ri=U==null?void 0:U.platformDelegate)===null||ri===void 0?void 0:ri.endTraceOrSpan)===null||Vi===void 0||Vi.call(ri,Ke,{[Je.ERROR]:`${ci}`}),ci})}).catch(pn=>{var dn;throw dn=st,H=H.filter(An=>An.id!==dn),pn})}s(v,"T");let E=null,_=null;function T(U,ce,Fe,Ke){var st;const Dt=Fe.bridgeInit;if(_){const dn=E;return Dt.fireEvent(e.OTHER,`Collab ${dn} is loading the controller, waiting for it to finish...`),_.then(()=>(Dt.fireEvent(e.OTHER,`Collab ${dn} module loading complete`),T(U,ce,Fe,Ke))).catch(An=>(Dt.fireEvent(e.OTHER,`Collab ${dn} module loading failed`),T(U,ce,Fe,Ke)))}if(Dt.fireEvent(e.OTHER,"Loading controller module"),System.fork===void 0)return Promise.reject(Error("SystemJS is missing the fork() method"));if(Fe.config.useSystemJsSharedFork&&!P){const dn=((st=Object.entries(ce).find(([An])=>An.endsWith("-ancillary.js")))===null||st===void 0?void 0:st[1])||null;P=dn?System.sharedFork([dn]):null}const Vt=System.fork(ce,P);Dt.fireEvent(e.OTHER,`controller module${System.isAlreadyLoaded(U)?" ":" not "}in systemjs cache`);const{span:Yt,closeSpanFn:pn}=Fe.createBasicTraceSpan(Ke,Be.LOAD_CONTROLLER_MODULE,{[Je.JS_PREFETCH_ENABLED]:"true",[Je.URL]:U});return _=S(U,"controller-module",Fe,Yt,i(U)).then(()=>{const{closeSpanFn:dn}=Fe.createBasicTraceSpan(Yt,Be.SYSTEMJS_IMPORT_MODULE,{[Je.URL]:U}),An=[],ci=new MutationObserver(ri=>{An.push(...w(ri))});return ci.observe(document.head,{childList:!0}),Vt.import(U).then(()=>{dn(),Dt.fireEvent(e.CONTROLLER_SYSTEMJS_MODULE_IMPORTED)}).catch(ri=>{dn(ri),An.push(...w(ci.takeRecords()));let Vi=0;throw An.forEach(Zi=>{Zi.onload=null,Zi.onerror=null,Zi.parentNode&&(Zi.parentNode.removeChild(Zi),Vi++)}),Vi>0&&Dt.fireEvent(e.OTHER,`Cleaned up ${Vi} SystemJS script tags`),System.resetInstantiationCache()&&Dt.fireEvent(e.OTHER,"SystemJS cache cleared"),ri}).finally(()=>{ci.disconnect()})}).finally(()=>{pn(),E=null,_=null}),E=Fe.id,_}s(T,"O");function w(U){const ce=[];return U.forEach(Fe=>{Fe.addedNodes.forEach(Ke=>{Ke instanceof HTMLScriptElement&&Ke.getAttribute("systemjs")==="1"&&ce.push(Ke)})}),ce}s(w,"N");let M=null,R=null;function O(){return typeof System=="object"&&typeof System.register=="function"}s(O,"C");function k(){if(!D)return console.warn("No import map data found"),[];const U=D.imports;return!U||typeof U!="object"?(console.warn("Imports property missing from importMapsData"),[]):Object.values(U).filter(ce=>typeof ce=="string"||ce instanceof String)}s(k,"R");const A={};let P,D,H=[],j=!1,W=null;class X extends g{constructor(ce,Fe){super(Fe),this.R=ce,this.D=ce.bridgeInit,this.m()}tearDown(){super.tearDown()}M(ce){var Fe,Ke;console.error("EmbeddedSameOriginBridgeTransport did not load",ce),ce&&console.error(ce.stack),this.D.fireEvent(e.ERROR,`Failure constructing EmbeddedSameOriginBridgeTransport: ${ce}`),(Ke=(Fe=this.R.config.delegate)===null||Fe===void 0?void 0:Fe.didFailToInitialize)===null||Ke===void 0||Ke.call(Fe,"exception",ce)}m(){var ce,Fe,Ke;const st=(Ke=(Fe=(ce=this.R.platformDelegate)===null||ce===void 0?void 0:ce.startTrace)===null||Fe===void 0?void 0:Fe.call(ce,Be.COLLAB_INIT,{[Je.CONTROLLER_ID]:`${this.R.id}`}))!==null&&Ke!==void 0?Ke:null,Dt=function(Yt,pn){const dn=new FormData,{authToken:An,userJwt:ci,getSlackToken:ri,isGov:Vi,isPreload:Zi}=Yt.config;An&&dn.append("oauth_token",An),ci&&dn.append("user_jwt",ci),ri&&dn.append("token",ri()),Zi&&dn.append("canvas_loadshed_priority","low");const pr=Yt.config.xhrWithCredentials===!0?"include":void 0,Or=h(`${Ve(Yt)}/collab/controller-init?format=map`,{method:"POST",body:dn,credentials:pr},Be.CONTROLLER_INIT,Yt,pn).then(tr=>(Yt.bridgeInit.fireEvent(e.CONTROLLER_INIT_DATA_FETCHED),tr)),Ar=window.QUIP_VERSION_NAME||"server",Xr=new URLSearchParams([["version-name",Ar]]);return Yt.config.language&&Xr.append("language-code",Yt.config.language),Xr.append("cdn_fallback",`${Yt.getAttemptNumber()}`),Vi&&Xr.append("serve_gov","1"),W=h(`${Ve(Yt)}/collab/controller-resources?${Xr.toString()}`,{method:"GET",credentials:pr},Be.CONTROLLER_RESORCES,Yt,pn).then(tr=>(Yt.bridgeInit.fireEvent(e.CONTROLLER_RESOURCE_DATA_FETCHED),tr)).catch(tr=>(W=null,Yt.bridgeInit.fireEvent(e.ERROR,`controller-resources request failed: ${tr}`),{module_loader_url:null,controller_entry_module_url:null,import_map:null})),Promise.all([Or,W]).then(tr=>{const[kn,Mi]=tr;return Object.assign(Object.assign({},kn),Mi)})}(this.R,st),Vt=v(this.R,Dt,st);Promise.all([Vt,Dt]).then(Yt=>{var pn;const dn=Yt[0],An=Yt[1];dn.main(An.init_options,An.preserialized,this.R.config.getSlackToken?null:An.oauth_token,this.R.config.getSlackToken?null:An.oauth_token_expiry,(pn=this.R.config.getSlackToken)!==null&&pn!==void 0?pn:null,Ve(this.R),this.destinationFn(),An.js_initializer,An.user_id,this.R.config.xhrWithCredentials,this.R.config.enableWebCaching?An.web_cache_key:void 0,this.R.config.enableWebCaching?An.web_cache_key_version:void 0,this.R.config.requestsAreCors,An.body_classes,An.css_url,!!this.R.config.useGraftedMode,this.R.config.pathRewriteHook,!!this.R.config.isRemoteGraftingMode),this.D.fireEvent(e.BRIDGE_TRANSPORT_READY)}).catch(Yt=>this.M(Yt)).finally(()=>{var Yt,pn;(pn=(Yt=this.R.platformDelegate)===null||Yt===void 0?void 0:Yt.endTraceOrSpan)===null||pn===void 0||pn.call(Yt,st)})}logError(ce){this.D.fireEvent(e.ERROR,ce)}}s(X,"P");class ee{constructor(ce){this.embeddedSide=new X(ce,()=>this.controllerSide),this.controllerSide=new g(()=>this.embeddedSide)}}s(ee,"U");function fe(U,ce){let Fe=null;for(const Ke of function(st){const Dt=[];for(const Vt of Object.keys(st))isNaN(Number(Vt))&&Dt.push(Vt);return Dt}(U))U[Ke]===ce&&(Fe=Ke);return Fe||(Fe=String(ce)),Fe+=` (${ce})`,Fe}s(fe,"g");const oe={[r.INCOMING]:"ToEmbedded",[r.OUTGOING]:"FromEmbedded",[r.INCOMING_REPLY]:"ReplyToEmbedded",[r.OUTGOING_REPLY]:"ReplyFromEmbedded"},Oe=[p.Op.DID_INITIALIZE,p.Op.DID_FAIL_TO_INITIALIZE],Xe=[];class ge{constructor(ce,Fe){this.p=ce,this.v=Fe,this.I=[],this.P=[],this.U={[oe[r.INCOMING]]:{},[oe[r.OUTGOING_REPLY]]:{},[oe[r.OUTGOING]]:{},[oe[r.INCOMING_REPLY]]:{}}}getHook(){const ce=this.I,Fe=this.P,Ke=this.U;return(st,Dt,Vt)=>{var Yt,pn;const dn={ts:Date.now(),op:st,message:Dt,type:Vt},An=$e(Vt,st);if((Yt=(pn=Ke[oe[Vt]])[An])!==null&&Yt!==void 0||(pn[An]=0),Ke[oe[Vt]][An]+=1,ce.length>=30)for(Fe.push(dn);Fe.length>20;)Fe.shift();else ce.push(dn)}}getReport(ce=!0){var Fe;return{collabInstanceId:this.p,collabInstanceTeamId:(Fe=this.v)!==null&&Fe!==void 0?Fe:"not_provided",reportTimestamp:Date.now(),messageCounts:this.U,startupLog:Me(this.I,ce),recentLog:Me(this.P,ce)}}}s(ge,"F");function Me(U,ce=!0){return U.map(Fe=>{const Ke={op:$e(Fe.type,Fe.op),type:oe[Fe.type]};var st,Dt;return ce&&(st=Fe.type,Dt=Fe.op,!([r.INCOMING,r.OUTGOING_REPLY].includes(st)?Oe.includes(Dt):Xe.includes(Dt)))||(Ke.message=Fe.message),ce||(Ke.ts=Fe.ts),Ke})}s(Me,"B");function $e(U,ce){return[r.INCOMING,r.OUTGOING_REPLY].includes(U)?fe(p.Op,ce):fe(m.Op,ce)}s($e,"H");class ze{constructor(ce){this.D=ce.bridgeInit,this.G=function(Fe){return new ee(Fe).embeddedSide}(ce),this.F=new ge(ce.id,ce.config.teamId),this.D.fireEvent(e.BRIDGE_TRANSPORT_SET),this.G.setTransportHook(this.F.getHook())}init(ce){this.D.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.HANDLER_REGISTRATION_FINISHED],()=>{this.invoke(m.Op.INIT,ce),this.D.fireEvent(e.INIT_SENT)})}tearDown(){this.G.tearDown()}invoke(ce,Fe){const Ke=ce==m.Op.INIT,st=s(()=>{this.G.invoke(ce,Fe),Ke||this.D.fireEvent(e.MESSAGE_SENT,`Op ${ce}`)},"n");Ke?st():this.D.after([e.BRIDGE_OPEN],st,`Send op ${ce}`)}addHandler(ce,Fe){this.G.addHandler(ce,ce===p.Op.DID_INITIALIZE?Fe:Ke=>{this.D.after([e.BRIDGE_OPEN],()=>{Fe(Ke),this.D.fireEvent(e.MESSAGE_HANDLED,`Op ${ce}`)},`Handle op ${ce}`)})}getDebugReport(ce=!0){return this.F.getReport(ce)}}s(ze,"y");class nt{constructor(ce,Fe){this.B=new WeakMap,this.H=ce,this.V=Fe}get(){const ce=this.H.get();return this.K(ce)}getAsync(){return this.H.getAsync().then(ce=>this.K(ce))}listen(ce){let Fe=this.B.get(ce);Fe||(Fe=s((Ke,st)=>{ce(this.K(Ke),this.V(st))},"e"),this.B.set(ce,Fe)),this.H.listen(Fe)}once(ce){let Fe=this.B.get(ce);Fe||(Fe=s((Ke,st)=>{ce(this.K(Ke),this.V(st))},"e"),this.B.set(ce,Fe)),this.H.once(Fe)}unlisten(ce){const Fe=this.B.get(ce);Fe&&this.H.unlisten(Fe)}K(ce){if(ce!==void 0)return this.V(ce)}}s(nt,"V");class mt{constructor(ce,Fe){this.H=ce,this.$=Fe}get(){return this.H.get()}getAsync(){const ce=this.H.getAsync();return new Promise((Fe,Ke)=>{ce.then(st=>{st?Fe(st):this.H.once((Dt,Vt)=>{Fe(Vt??this.$)})}).catch(Ke)})}listen(ce){this.H.listen(ce)}unlisten(ce){this.H.unlisten(ce)}once(ce){this.H.once(ce)}}s(mt,"K");var gt;(function(U){U[U.DOC_DISPLAY_TITLE=0]="DOC_DISPLAY_TITLE",U[U.DOC_UPDATED_USEC=1]="DOC_UPDATED_USEC",U[U.DOC_EMBED_SCROLL_POSITION=2]="DOC_EMBED_SCROLL_POSITION",U[U.DOC_BLOCK_KIT_THUMBNAIL=3]="DOC_BLOCK_KIT_THUMBNAIL",U[U.SECTION_SNIPPET=4]="SECTION_SNIPPET",U[U.CANNED_DOC_NAME=5]="CANNED_DOC_NAME",U[U.DOC_IS_EMPTY=6]="DOC_IS_EMPTY",U[U.DOC_LAST_UPDATED_USER_ID=8]="DOC_LAST_UPDATED_USER_ID",U[U.A11Y_READ_ONLY_MODE=9]="A11Y_READ_ONLY_MODE",U[U.DOC_EMBED_FOCUS_STATE=10]="DOC_EMBED_FOCUS_STATE",U[U.DOC_EMBED_SELECTION_STATE=11]="DOC_EMBED_SELECTION_STATE",U[U.TEXT_SECTION_OVERLAY_SHOWING=12]="TEXT_SECTION_OVERLAY_SHOWING",U[U.DOC_HAS_FILE_UNFURLS=13]="DOC_HAS_FILE_UNFURLS",U[U.TEMPLATE_CONTROLS_BE=14]="TEMPLATE_CONTROLS_BE",U[U.DOC_NEW_SECTION_USEC=15]="DOC_NEW_SECTION_USEC",U[U.TEMPLATE_CONTROLS_FE=16]="TEMPLATE_CONTROLS_FE",U[U.DOC_HAS_HEADER_IMAGE=17]="DOC_HAS_HEADER_IMAGE",U[U.PLACEHOLDERS_INFO=18]="PLACEHOLDERS_INFO"})(gt||(gt={}));const Pe=new WeakMap;class xe{constructor(ce={}){this.Y=new Set,this.W=ce}add(ce,Fe){if(!this.Y.has(ce)&&(this.Y.add(ce),Fe&&Pe.set(ce,Fe),this.Y.size===1)){const{didStartHavingListeners:Ke}=this.W;Ke&&Ke()}}addOneShot(ce,Fe){const Ke=s((...st)=>{this.remove(Ke),ce.apply(window,st)},"i");this.add(Ke,Fe)}remove(ce){if(this.Y.delete(ce)&&this.Y.size===0){const{didStopHavingListeners:Fe}=this.W;Fe&&Fe()}}removeAll(){this.Y.forEach(ce=>this.remove(ce))}empty(){return this.Y.size===0}notify(...ce){if(this.Y.size===0)return;const{notifyDecorator:Fe,catchError:Ke}=this.W;let st;Fe&&(st=Fe());const Dt=Array.from(this.Y);for(let Vt=0;Vt<Dt.length;Vt++)if(Ke)try{Dt[Vt].apply(window,ce)}catch(Yt){Ke(Yt)}else Dt[Vt].apply(window,ce);st&&st.clear()}debugGetDescriptions(){return Array.from(this.Y,(ce,Fe)=>Pe.get(ce)||`<anonymous-${Fe}>`)}}s(xe,"j");class Ye{constructor(ce,Fe,Ke,st=!1){this.X=ce,this.J=Fe,this.Z=Ke,this.q=st;const Dt=s((Vt,Yt)=>{this.Y.notify(Vt,Yt)},"n");this.Y=new xe({didStartHavingListeners:()=>this.Z.addListener(ce,Fe,Dt),didStopHavingListeners:()=>{this.Z.removeListener(ce,Fe,Dt),this.q||this.Z.cleanupStorage(ce,Fe)}})}get(){return this.Z.getValue(this.X,this.J)}getAsync(){return this.Z.getValueAsync(this.X,this.J)}listen(ce){this.Y.add(ce)}unlisten(ce){this.Y.remove(ce)}unlistenAll(){this.Y.removeAll()}once(ce){this.Y.addOneShot(ce)}}s(Ye,"Y");class Ze{constructor(ce){this.Y=new xe,this.tt=ce}set(ce){const Fe=this.tt;this.tt=ce,this.Y.notify(Fe,ce)}get(){return this.tt}getAsync(){return Promise.resolve(this.get())}listen(ce){this.Y.add(ce)}unlisten(ce){this.Y.remove(ce)}once(ce){this.Y.addOneShot(ce)}}s(Ze,"W");class Re{constructor(ce){this.et=new Map,this.R=ce}didCreateDoc(ce,Fe){const Ke=this.et.get(ce);Ke?(this.et.set(Fe,Ke),Ke.idInternal.set(Fe)):console.warn(`Could not find doc mapped to ID ${ce}`)}didDeleteDoc(ce){const Fe=this.et.get(ce);Fe==null||Fe.deletedInternal.set(!0)}didTryToLoadWithTempId(ce){const Fe=this.et.get(ce);Fe==null||Fe.didTryToLoadWithTempIdInternal.set(!0)}create(ce={}){const{title:Fe,cannedDoc:Ke,context:st,usesOnlyInlineTextComments:Dt,content:Vt}=ce;return this.controllerAccess.docs.createDoc(Fe,Ke,st,Dt,Vt).then(Yt=>this.get(Yt))}get(ce){let Fe=this.et.get(ce);return Fe||(Fe=new Tt(ce,this.R),this.et.set(ce,Fe)),Fe}get controllerAccess(){return this.R.controllerAccess}setEditsDisabled(ce,Fe){for(const Ke of Nt.values())Ke.doc().id.get()===ce&&Ke.docEditor.setEditsDisabled(Fe);this.controllerAccess.docs.reloadThread(ce)}getBlockKitThumbnail(ce,Fe=!0,Ke){const st=en(this.R),Dt=Ke?`${ce}/${Ke}`:ce;return new mt(new Ye(gt.DOC_BLOCK_KIT_THUMBNAIL,Dt,st,!0),'{"blocks": []}').getAsync().then(JSON.parse).then(Vt=>(Fe&&Vt.blocks.length>0&&Vt.blocks.shift(),Vt))}getCannedDocName(ce){const Fe=en(this.R);return new mt(new Ye(gt.CANNED_DOC_NAME,ce,Fe,!0),"").getAsync().then(Ke=>Ke.length===0?null:Ke)}getSectionSnippet(ce){const Fe=en(this.R);return new mt(new Ye(gt.SECTION_SNIPPET,ce,Fe,!0),"").getAsync()}setDebugOption(ce,Fe){this.controllerAccess.docs.setDebugOption(ce,Fe)}findSlackObject(ce,Fe,Ke){return this.controllerAccess.docs.findSlackObject(ce,Fe,Ke)}insertSlackObject(ce,Fe,Ke,st,Dt){return this.controllerAccess.docs.insertSlackObject(ce,Fe,Ke,st,Dt)}editLink(ce,Fe,Ke){this.controllerAccess.docs.editLink(ce,Fe,Ke)}loadData(ce,Fe){return this.controllerAccess.docs.loadData([ce],Fe)}it(){return kt(this.R)}}s(Re,"X");class Tt{constructor(ce,Fe){this.st=null,this.id=this.idInternal=new Ze(ce),this.R=Fe;const Ke=en(this.R);this.title=new Ye(gt.DOC_DISPLAY_TITLE,ce,Ke),this.lastUpdated=new nt(new Ye(gt.DOC_UPDATED_USEC,ce,Ke,!0),st=>new Date(st/1e3)),this.lastUpdatedUsec=new Ye(gt.DOC_UPDATED_USEC,ce,Ke,!0),this.lastUpdatedSlackUserId=new Ye(gt.DOC_LAST_UPDATED_USER_ID,ce,Ke,!0),this.deleted=this.deletedInternal=new Ze(!1),this.isEmpty=new Ye(gt.DOC_IS_EMPTY,ce,Ke,!0),this.hasPerformedEditingAction=new Ze(!1),this.hasFileUnfurls=new Ye(gt.DOC_HAS_FILE_UNFURLS,ce,Ke,!0),this.templateControlsInfo=new Ye(gt.TEMPLATE_CONTROLS_BE,ce,Ke,!0),this.lastNewSectionUpdated=new nt(new Ye(gt.DOC_NEW_SECTION_USEC,ce,Ke,!0),st=>new Date(st/1e3)),this.hasHeaderImage=new Ye(gt.DOC_HAS_HEADER_IMAGE,ce,Ke,!0),this.didTryToLoadWithTempIdInternal=new Ze(!1),this.placeholdersInfo=new Ye(gt.PLACEHOLDERS_INFO,ce,Ke,!0)}getBlockKitThumbnailValue(){if(!this.st&&this.isCreated()){const ce=en(this.R);this.st=new nt(new Ye(gt.DOC_BLOCK_KIT_THUMBNAIL,this.idInternal.get(),ce,!0),JSON.parse)}return this.st}embed(ce,Fe={mode:"editor"}){let Ke=rt.get(ce);return Ke||(Ke=new Qt(this,ce,Fe,this.R),rt.set(ce,Ke),Ke.mount()),Ke.doc()!==this&&console.error("There was a different document embedded in the container",ce),Ke}isCreated(){return!this.idInternal.get().startsWith("temp:")}failedToCreate(){return!this.isCreated()&&this.deletedInternal.get()}triedToLoadTempId(){return this.didTryToLoadWithTempIdInternal.get()}}s(Tt,"J");const rt=new WeakMap,Nt=new Map,Wt={mode:"editor"};class Qt{constructor(ce,Fe,Ke,st){this.rendered=new Ze(!1),this.incrementalRendered=new Ze(!1),this.failedToLoad=new Ze(!1),this.loadInfo=new Ze(void 0),this.editingActionPerformed=new Ze(!1),this.loadError=new Ze(void 0),this.editorContainer=new Ze(void 0),this.nt=!1,this.ot=!1,this.rt=[],this.Et=ce,this._t=Fe,this.W=Object.assign(Object.assign({},Wt),Ke),this.R=st,this.lt=`${hn}-${this.R.id}-${fi++}`,this.ct=function(){const Dt=document.createElement("div");return Dt.classList.add("collab-root"),Dt}(),this.at(gt.DOC_EMBED_SCROLL_POSITION),this.scrollPosition=this.at(gt.DOC_EMBED_SCROLL_POSITION),this.focusState=this.at(gt.DOC_EMBED_FOCUS_STATE),this.selectionState=this.at(gt.DOC_EMBED_SELECTION_STATE),this.a11yReadOnlyMode=this.at(gt.A11Y_READ_ONLY_MODE),this.textSectionOverlayShowing=this.at(gt.TEXT_SECTION_OVERLAY_SHOWING),this.templateControls=this.ht(gt.TEMPLATE_CONTROLS_FE,new Map),this.hasHeaderImage=this.at(gt.DOC_HAS_HEADER_IMAGE),this.placeholdersInfo=this.at(gt.PLACEHOLDERS_INFO),this.title=this.Et.title,this.controllerAccess.run(()=>{this.dt=this.controllerAccess.docs.getDocEditor(this.lt)})}get docEditor(){if(!this.dt)throw new Error("DocEditor object not set");return this.dt}get controllerAccess(){return this.R.controllerAccess}at(ce){const Fe=en(this.R),Ke=new Ye(ce,this.lt,Fe,!1);return this.rt.push(Ke),Ke}ht(ce,Fe){return new mt(this.at(ce),Fe)}onEditorLoadError(ce){console.info("[QUIP] Editor load error",ce),this.failedToLoad.set(!0),this.loadError.set(ce),this.ut()}didLoadModel(ce){this.loadInfo.set(ce)}didRender(ce){this.rendered.set(!0),this.failedToLoad.set(!1),this.loadError.set(void 0),this.editorContainer.set(ce)}didFinishIncrementalRender(){this.incrementalRendered.set(!0)}didPerformEditingAction(){this.editingActionPerformed.set(!0)}doc(){return this.Et}docId(){return this.Et.id.get()}containerElement(){return this._t}frameName(){return this.lt}mount(){if(Nt.set(this.lt,this),!this.ot){const ce=this.ct;ce.style.visibility="hidden",this._t.appendChild(ce);let Fe=ce.ownerDocument.defaultView;Fe||(console.warn(`Mounting ${this.lt} into element with no window`),Fe=window),this.nt=!0,this.controllerAccess.run(()=>{this.docEditor.createdViewFrame(ce)}),ce.style.visibility="visible",this.ot&&this.Tt(),this.ot=!0}this.nt&&this.Tt()}unmount(){try{console.info(`[Quip] unmount doc with frame name ${this.lt}. Frame loaded ${this.nt}`),this.nt&&(this.ut(),this.rendered.set(!1),this.incrementalRendered.set(!1),this.failedToLoad.set(!1),this.loadError.set(void 0),this.nt=!1),this.ot&&(rt.delete(this._t),this.ct.remove(),this.ot=!1),this.rt.forEach(ce=>ce.unlistenAll()),Nt.delete(this.lt)}catch(ce){console.warn("[Quip] Error thrown in unmount",ce)}}it(){return kt(this.R)}Tt(){this.controllerAccess.run(()=>{this.docEditor.renderDoc(this.Et.id.get(),this.W)})}ut(){this.controllerAccess.run(()=>{this.docEditor.cleanupViewFrame()})}setCommentsUiProvider(ce){this.commentsUiProvider=ce,ce==null||ce.setDelegate(this.docEditor)}setAutocompleteUiProvider(ce){this.autocompleteUiProvider=ce,ce==null||ce.setDelegate(this.docEditor)}setPermalinkUiProvider(ce){this.permalinkUiProvider=ce}setEmbeddedUiProvider(ce){this.embeddedUiProvider=ce}setErrorUiProvider(ce){this.errorUiProvider=ce}setEditorUiConnector(ce){this.editorUiConnector=ce,ce==null||ce.setDelegate(this.docEditor)}}s(Qt,"Q");class Ot{constructor(ce){this.At=ce}getFrameByName(ce){return this.At.get(ce)}withFrame(ce,Fe){const Ke=this.getFrameByName(ce);Ke||console.warn(`Could not find a frame with name ${ce}.`),Fe(Ke)}}s(Ot,"z");const hn=`collab-doc-${(1e3*Math.random()).toString(36)}`;let fi=0;class wn{constructor(){this.St=[],this.Ot=!1}get docs(){return this.Nt}get settings(){return this.It}get providers(){return this.Lt}run(ce){this.Ot?ce():this.St.push(ce)}setObjects({docs:ce,settings:Fe,providers:Ke}){this.Ot=!0,this.Nt=ce,this.It=Fe,this.Lt=Ke;for(const st of this.St)st();this.St=[]}}s(wn,"it");let Jt=0;class on{constructor(ce){this.id=Jt++,this.o=!1,this.Ct=!1,this.config=ce,this.platformDelegate=ce.delegate,this.bridgeInit=on.Rt(`embedded ${this.id}`);const Fe=new ze(this);$t.set(this,Fe),this.controllerAccess=new wn,this.docs=new Re(this),this.failedToInitialize=new Ze(!1),this.initializationError=new Ze(void 0),this.Dt()}Dt(){if(this.o)return void this.bridgeInit.fireEvent(e.ERROR,"Collab instance initialized more than once");const{appearance:ce,language:Fe,delegate:Ke,commentsDataProvider:st,bookmarksDataProvider:Dt,fileDataProvider:Vt,slackListDataProvider:Yt,slackObjectProvider:pn,features:dn,documentEventProvider:An,underlineAllLinks:ci,enableAnimations:ri,displayEmojiAsPlainText:Vi,spellcheckEnabled:Zi,embeddedConfigProvider:pr,embeddedUiProvider:Or,topLevelTeamId:Ar,anchorLinkProvider:Xr,slackObjectUIProvider:tr,slackTextyHtmlConversionProvider:kn,useSmartQuotesAndDashes:Mi,atomStorageProvider:Hi}=this.config,$i=this.it();$i.init({features:dn,delegate:Ke,anchorLinkProvider:Xr,bookmarksDataProvider:Dt,commentsDataProvider:st,documentEventProvider:An,fileDataProvider:Vt,slackListDataProvider:Yt,slackObjectProvider:pn,slackObjectUIProvider:tr,slackTextyHtmlConversionProvider:kn,mountedFrameProvider:new Ot(Nt),embeddedAccessDelegate:this.controllerAccess,docs:this.docs}),this.controllerAccess.run(()=>{this.atomClient=this.controllerAccess.providers.getAtomClient(Hi)});const qi=new d;var Er,Wr;qi.add(()=>{ce&&this.ft(ce),Fe&&this.Mt(Fe),ci!==void 0&&this.setUnderlineAllLinks(ci),ri!==void 0&&this.setEnableAnimations(ri),Vi!==void 0&&this.setDisplayEmojiAsPlainText(Vi),Zi!==void 0&&this.setSpellcheckEnabled(Zi),Ar&&this.vt(Ar),Mi!==void 0&&this.setUseSmartQuotesAndDashes(Mi)}),function(hi,Ki,ur){if(!ur)return;const pe=ur.supportedAutocompleteTypes;pe&&Ki.add(()=>{hi.providers.registerAutocompleteTypes(pe)}),hi.run(()=>ur.setDelegate(hi.providers.getSlackObjectProviderDelegate()))}(this.controllerAccess,qi,pn),function(hi,Ki={},ur,pe,Ce=Le=>{}){hi.addHandler(p.Op.DID_INITIALIZE,()=>{var Le;(Le=Ki.didInitialize)===null||Le===void 0||Le.call(Ki),ur.run(),pe.fireEvent(e.DID_INIT_RECEIVED)}),hi.addHandler(p.Op.DID_FAIL_TO_INITIALIZE,({initError:Le})=>{var tt;Ce(Le),(tt=Ki.didFailToInitialize)===null||tt===void 0||tt.call(Ki,Le)})}($i,Ke,qi,this.bridgeInit,hi=>{this.Pt(!0,hi)}),Er=this.controllerAccess,Wr=st,Er.run(()=>{Wr==null||Wr.setDelegate(Er.providers.getCommentsDataProviderDelegate())}),function(hi,Ki){hi.run(()=>{Ki==null||Ki.setDelegate(hi.providers.getBookmarksDataProviderDelegate())})}(this.controllerAccess,Dt),function(hi,Ki){hi.run(()=>Ki==null?void 0:Ki.setDelegate(hi.providers.getDocumentEventProviderDelegate()))}(this.controllerAccess,An),function(hi,Ki,ur){ur&&Ki.add(()=>{hi.providers.registerEmbeddedUiProvider(ur.config())})}(this.controllerAccess,qi,pr||Or),this.o=!0,this.bridgeInit.fireEvent(e.HANDLER_REGISTRATION_FINISHED)}Pt(ce,Fe){const Ke=this.failedToInitialize,st=this.initializationError;Ke.set(ce),st.set(Fe)}static Rt(ce){const Fe=new o(ce);return Fe.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.INIT_SENT,e.DID_INIT_RECEIVED,e.HANDLER_REGISTRATION_FINISHED],()=>{Fe.fireEvent(e.BRIDGE_OPEN)}),Fe}controllerModuleUrls(){return k()}preload(){return!this.Ct&&(k().forEach(ce=>{if(!A[ce]){const Fe=document.createElement("link");Fe.rel="preload",Fe.as="script",Fe.href=ce,Fe.crossOrigin="anonymous",A[ce]=Fe,document.head.appendChild(Fe)}}),this.Ct=!0,!0)}tearDown(){this.it().tearDown(),$t.delete(this),this.Pt(!1),this.o=!1}createBasicTraceSpan(ce,Fe,Ke){var st,Dt,Vt;const Yt=(Vt=(Dt=(st=this.platformDelegate)===null||st===void 0?void 0:st.startSpan)===null||Dt===void 0?void 0:Dt.call(st,ce,Fe,Ke))!==null&&Vt!==void 0?Vt:null;return Yt?{span:Yt,closeSpanFn:pn=>{var dn,An;(An=(dn=this.platformDelegate)===null||dn===void 0?void 0:dn.endTraceOrSpan)===null||An===void 0||An.call(dn,Yt,pn?{[Je.ERROR]:`${pn}`}:{})}}:{span:null,closeSpanFn:()=>{}}}getAttemptNumber(){var ce;return(ce=this.config.attemptNumber)!==null&&ce!==void 0?ce:0}preloadThreads(ce,Fe){this.controllerAccess.run(()=>this.controllerAccess.docs.preloadData(ce,Fe))}setAppearance(ce){this.config.appearance=ce,this.ft(ce)}setLanguage(ce){this.config.language=ce}setAppKeyboardFocusModeEnabled(ce,Fe){this.Ut(ce,Fe)}ft(ce){this.controllerAccess.settings.setAppearance(ce)}Mt(ce){this.controllerAccess.settings.setLanguage(ce)}Ut(ce,Fe){this.controllerAccess.settings.setAppKeyboardFocusModeEnabled(ce,Fe)}vt(ce){this.controllerAccess.settings.setDefaultTeamId(ce)}setUnderlineAllLinks(ce){this.controllerAccess.settings.setUnderlineLinks(ce)}setEnableAnimations(ce){this.controllerAccess.settings.setEnableAnimations(ce)}setDisplayEmojiAsPlainText(ce){this.controllerAccess.settings.setDisplayEmojiAsPlainText(ce)}setSpellcheckEnabled(ce){this.controllerAccess.settings.setSpellcheckEnabled(ce)}setUseSmartQuotesAndDashes(ce){this.controllerAccess.settings.setUseSmartQuotesAndDashes(ce)}async getInitLog(ce){return Object.assign(Object.assign({},await this.bridgeInit.getInitLog(ce)),{lm:"SYSTEMJS_SCRIPT_CONTROLLER",dr:!0})}async getInitLogStr(ce){for(let Fe=o.MAX_INIT_LOG;Fe>=0;Fe--){const Ke=JSON.stringify(await this.getInitLog(Fe));if(Ke.length<=ce)return Ke}return"Failed to generate"}getDebugReport(ce){return this.getBridgeDebugReport(ce)}getBridgeDebugReport(ce=!0){return this.it().getDebugReport(ce)}it(){return $t.get(this)}}s(on,"nt");function kt(U){return $t.get(U)}s(kt,"ot");const $t=new Map;function en(U){return U.atomClient}s(en,"Et");const zt=document.querySelector("script[src*='/collab/embedded.js']"),Kt=zt==null?void 0:zt.src,Q=Kt?new URL(Kt).origin:"https://prod.slack.quip.systems";function Ve(U){return U.config.origin||Q}s(Ve,"at");var Be,Je;(function(U){U.COLLAB_INIT="collab-init",U.CONTROLLER_INIT="controller-init",U.CONTROLLER_RESORCES="controller-resources",U.HTTP_FETCH_HEADER="http-fetch-header",U.HTTP_FETCH_CONTENT="http-fetch-content",U.JSON_PARSE="json-parse",U.LOAD_CONTROLLER="load-controller",U.AWAIT_CALLBACK="await-callback",U.LOAD_SYSTEMJS="load-systemjs",U.MODULE_PREFETCH="module-prefetch",U.SCRIPT_TAG="script-tag",U.LOAD_CONTROLLER_MODULE="load-controller-module",U.SYSTEMJS_IMPORT_MODULE="systemjs-import-module"})(Be||(Be={})),function(U){U.CONTROLLER_ID="controller-id",U.ERROR="error",U.JS_PREFETCH_ENABLED="js-prefetch-enabled",U.URL="url"}(Je||(Je={}));const ut=(()=>{if(typeof c.g=="object")return c.g;if(typeof window=="object")return window;if(typeof self=="object")return self;throw new Error("Cannot find global")})();function ot(U,ce,Fe){const Ke=U.split(".");let st=Fe||ut;for(let Dt=0;Dt<Ke.length;Dt++){const Vt=Ke[Dt];Dt===Ke.length-1?st[Vt]=ce:(Vt in st||(st[Vt]={}),st=st[Vt])}}s(ot,"Tt");var de,Ue,K,q,Ee,be,it,He,Qe,Se,Ae,L,ve,_e,Ie,ne,Ft,qe,ft,En,xt,Ui,_i,bn,zn,gn,gi,ai,yr,Bt,Et,On,nn,Bn,li,ui,Gn,Yn,Ci,Ti,Un;(function(U){U[U.IN_APP_USER_INITIATED=0]="IN_APP_USER_INITIATED",U[U.PERMALINK=1]="PERMALINK",U[U.POPOUT=2]="POPOUT"})(de||(de={})),function(U){U.BOLD="bold",U.ITALIC="italic",U.UNDERLINE="underline",U.STRIKETHROUGH="strikethrough",U.CODE="code",U.SUBSCRIPT="subscript",U.SUPERSCRIPT="superscript",U.LINK="link"}(Ue||(Ue={})),function(U){U.PLAIN="plain",U.H1="h1",U.H2="h2",U.H3="h3",U.CODE="code",U.BLOCKQUOTE="blockquote",U.LIST_BULLET="list_bullet",U.LIST_NUMBERED="list_numbered",U.LIST_CHECKLIST="list_checklist"}(K||(K={})),function(U){U.CACHE="cache",U.MEMORY="memory",U.NETWORK="network"}(q||(q={})),function(U){U.LINK="link",U.COMMENT="comment"}(Ee||(Ee={})),function(U){U.NONE="none",U.SCROLL_TO_SECTION="scroll_to_section",U.FOCUS_SECTION="focus_section"}(be||(be={})),function(U){U[U.LINK_COPIED=0]="LINK_COPIED",U[U.LINK_FILE_SHARE_BLOCKED=1]="LINK_FILE_SHARE_BLOCKED",U[U.TABLE_SIZE_LIMIT_REACHED=2]="TABLE_SIZE_LIMIT_REACHED"}(it||(it={})),function(U){U[U.UNSUPPORTED_FILE_TYPE=0]="UNSUPPORTED_FILE_TYPE"}(He||(He={})),function(U){U[U.ANY=1]="ANY",U[U.ON_MOUSE_LEAVE=2]="ON_MOUSE_LEAVE"}(Qe||(Qe={})),function(U){U[U.COMMENTS=0]="COMMENTS",U[U.FILE_UPLOADS=1]="FILE_UPLOADS",U[U.DOCUMENT_EVENTS=2]="DOCUMENT_EVENTS",U[U.SPREADSHEETS=3]="SPREADSHEETS",U[U.HOVERCARDS=4]="HOVERCARDS",U[U.LINK_UNFURL=5]="LINK_UNFURL",U[U.UNREAD_COMMENTS=6]="UNREAD_COMMENTS",U[U.REMINDERS=7]="REMINDERS",U[U.DOCUMENT_UPDATE=8]="DOCUMENT_UPDATE",U[U.FLEXBOX_COLLAB=9]="FLEXBOX_COLLAB",U[U.SLACK_WORKFLOW_BUTTON_PROTOTYPE=10]="SLACK_WORKFLOW_BUTTON_PROTOTYPE",U[U.DOPE_TABLE=11]="DOPE_TABLE",U[U.UI_PARITY=12]="UI_PARITY",U[U.MOBILE_DOCUMENT_EDITING=13]="MOBILE_DOCUMENT_EDITING",U[U.MOBILE_IMAGE_LOADING=14]="MOBILE_IMAGE_LOADING",U[U.GALLERY_LAYOUT=15]="GALLERY_LAYOUT",U[U.ANCHOR_LINKS=16]="ANCHOR_LINKS",U[U.IMAGE_EMBEDS=17]="IMAGE_EMBEDS",U[U.IMAGE_CAPTION=18]="IMAGE_CAPTION",U[U.EMBEDS_DRAG_HANDLE=19]="EMBEDS_DRAG_HANDLE",U[U.SLACK_AUTOCOMPLETE=20]="SLACK_AUTOCOMPLETE",U[U.DOCUMENT_SLASH_COMMANDS=23]="DOCUMENT_SLASH_COMMANDS",U[U.DRAG_AND_DROP_MAX_DISTANCE=24]="DRAG_AND_DROP_MAX_DISTANCE",U[U.APP_UNFURL_NON_IFRAME_RENDERS=25]="APP_UNFURL_NON_IFRAME_RENDERS",U[U.A11Y_KEYBOARD_NAVIGATION=28]="A11Y_KEYBOARD_NAVIGATION",U[U.INSERT_TOOLBAR=29]="INSERT_TOOLBAR",U[U.MENTIONS_SHARE=30]="MENTIONS_SHARE",U[U.TEXT_IN_GALLERY_LAYOUT=31]="TEXT_IN_GALLERY_LAYOUT",U[U.AUTOSIZE_FLEXBOX=32]="AUTOSIZE_FLEXBOX",U[U.FORMATTING_TOOLBAR=33]="FORMATTING_TOOLBAR",U[U.UI_PARITY_SLACK_LINK_INSPECTOR=34]="UI_PARITY_SLACK_LINK_INSPECTOR",U[U.PREVENT_OBJECTS_IN_LISTS=35]="PREVENT_OBJECTS_IN_LISTS",U[U.DISALLOW_SECTION_COMMENTS=37]="DISALLOW_SECTION_COMMENTS",U[U.SECTION_TOOLBAR_ON_LEFT=38]="SECTION_TOOLBAR_ON_LEFT",U[U.MOBILE_WEBVIEW_UNFURLS=39]="MOBILE_WEBVIEW_UNFURLS",U[U.INLINE_COMMENTS=40]="INLINE_COMMENTS",U[U.UNIVERSAL_DRAG_PREVIEW=41]="UNIVERSAL_DRAG_PREVIEW",U[U.DISABLE_GLOBAL_SHORTCUTS=42]="DISABLE_GLOBAL_SHORTCUTS",U[U.NARROW_COLLAB_INDENTATION=43]="NARROW_COLLAB_INDENTATION",U[U.EXPANDED_FLEXBOX_MARGIN=44]="EXPANDED_FLEXBOX_MARGIN",U[U.ADD_COLUMN_FROM_SECTION_MENU=45]="ADD_COLUMN_FROM_SECTION_MENU",U[U.REQUEST_COMPLETION_HOOK=46]="REQUEST_COMPLETION_HOOK",U[U.A11Y_CARET=47]="A11Y_CARET",U[U.BOOKMARKS=48]="BOOKMARKS",U[U.GRIDLIKE_DRAG_AND_DROP_PLACEMENT=50]="GRIDLIKE_DRAG_AND_DROP_PLACEMENT",U[U.SLACK_MESSAGE_TITLE=51]="SLACK_MESSAGE_TITLE",U[U.LENIENT_STARTUP=52]="LENIENT_STARTUP",U[U.ALLOW_SELECTING_ARCHIVED_COMMENTS=53]="ALLOW_SELECTING_ARCHIVED_COMMENTS",U[U.ANIMATE_LAYOUT_DRAG=54]="ANIMATE_LAYOUT_DRAG",U[U.STATIC_TITLES=55]="STATIC_TITLES",U[U.PROFILE_UNFURLS=56]="PROFILE_UNFURLS",U[U.DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES=57]="DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES",U[U.MOBILE_NATIVE_UNFURLS=58]="MOBILE_NATIVE_UNFURLS",U[U.DEFAULT_UNFURLS_ON_PASTE=59]="DEFAULT_UNFURLS_ON_PASTE",U[U.SAVED_FOR_LATER=60]="SAVED_FOR_LATER",U[U.COMMENTS_REDESIGN=61]="COMMENTS_REDESIGN",U[U.SLACK_USER_CONTEXT_MENU=62]="SLACK_USER_CONTEXT_MENU",U[U.SLACK_OBJECT_CONTROL_CONTEXT_MENUS=63]="SLACK_OBJECT_CONTROL_CONTEXT_MENUS",U[U.JS_MODULE_PREFETCH=64]="JS_MODULE_PREFETCH",U[U.SLACK_SECTION_MENUS=65]="SLACK_SECTION_MENUS",U[U.PADDING_RESIZING=66]="PADDING_RESIZING",U[U.HOVERABLE_SECTION_MENU=68]="HOVERABLE_SECTION_MENU",U[U.SLACK_PRESENCE_UPDATES=69]="SLACK_PRESENCE_UPDATES",U[U.HIDE_INLINE_COMMENT_BUBBLES=70]="HIDE_INLINE_COMMENT_BUBBLES",U[U.HIDE_ADD_COMMENT_BUBBLE=71]="HIDE_ADD_COMMENT_BUBBLE",U[U.HYPERLINK_CONTEXT_MENU=72]="HYPERLINK_CONTEXT_MENU",U[U.UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI=73]="UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI",U[U.LOCK_SECTION_FOR_INLINE_ANNOTATION=74]="LOCK_SECTION_FOR_INLINE_ANNOTATION",U[U.EDITABLE_CONTROL=75]="EDITABLE_CONTROL",U[U.OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION=76]="OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION",U[U.MOVE_CARET_WHEN_OPENING_ANNOTATION=77]="MOVE_CARET_WHEN_OPENING_ANNOTATION",U[U.DISABLE_TITLE_UNFURL=79]="DISABLE_TITLE_UNFURL",U[U.HIDE_STUB_ANNOTATIONS=80]="HIDE_STUB_ANNOTATIONS",U[U.OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS=81]="OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS",U[U.USE_EXTERNAL_EDITOR_SAVE=82]="USE_EXTERNAL_EDITOR_SAVE",U[U.IMPROVED_WORD_WRAPPING=83]="IMPROVED_WORD_WRAPPING",U[U.HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS=84]="HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS",U[U.USE_NEW_FIND_MODAL=85]="USE_NEW_FIND_MODAL",U[U.DISPLAY_COMMENT_TOOLTIP=86]="DISPLAY_COMMENT_TOOLTIP",U[U.HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT=87]="HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT",U[U.SLACK_FILE_UNFURL_PLACEHOLDER=88]="SLACK_FILE_UNFURL_PLACEHOLDER",U[U.PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS=89]="PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS",U[U.CLEANUP_SENTINEL=90]="CLEANUP_SENTINEL",U[U.OPEN_COMMENTS_HIGHLIGHT_TEMPORARY=91]="OPEN_COMMENTS_HIGHLIGHT_TEMPORARY",U[U.UNFURL_PRIVATE_MESSAGES=92]="UNFURL_PRIVATE_MESSAGES",U[U.MOBILE_DISABLE_PRESENCE_MENU_POPOVER=93]="MOBILE_DISABLE_PRESENCE_MENU_POPOVER",U[U.CANVAS_GA_FAST_FOLLOW=95]="CANVAS_GA_FAST_FOLLOW",U[U.BRIDGE_REFACTORING=96]="BRIDGE_REFACTORING",U[U.SIMPLE_TABLES=97]="SIMPLE_TABLES",U[U.ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS=98]="ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS",U[U.ALLOW_SLACK_OBJECT_TITLE_UNFURL=99]="ALLOW_SLACK_OBJECT_TITLE_UNFURL",U[U.ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL=100]="ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL",U[U.CANVAS_GA_FAST_FOLLOW_2=101]="CANVAS_GA_FAST_FOLLOW_2",U[U.USE_LEFT_GUTTER_DISPLAY=102]="USE_LEFT_GUTTER_DISPLAY",U[U.USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD=103]="USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD",U[U.TITLE_BLOCK_KIT_FORMAT=104]="TITLE_BLOCK_KIT_FORMAT",U[U.USE_LIST_ITEM_MARKER_CONTAINER=105]="USE_LIST_ITEM_MARKER_CONTAINER",U[U.ALLOW_SLACK_TEMPLATE_PLACEHOLDER=106]="ALLOW_SLACK_TEMPLATE_PLACEHOLDER",U[U.USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS=107]="USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS",U[U.IMAGE_RESIZING=108]="IMAGE_RESIZING",U[U.PRIVATE_MESSAGE_SPEEDBUMP_MODAL=109]="PRIVATE_MESSAGE_SPEEDBUMP_MODAL",U[U.ALLOW_HEADER_IMAGE=110]="ALLOW_HEADER_IMAGE",U[U.PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS=111]="PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS",U[U.USE_NEW_SECTION_HIGHLIGHT=112]="USE_NEW_SECTION_HIGHLIGHT",U[U.MODEL_INTEGRITY_PROBE=113]="MODEL_INTEGRITY_PROBE",U[U.MODEL_INTEGRITY_CHANGES_CHECK=114]="MODEL_INTEGRITY_CHANGES_CHECK",U[U.MODEL_FSCK_PROBE=115]="MODEL_FSCK_PROBE",U[U.MODEL_UPDATES_PROBE=116]="MODEL_UPDATES_PROBE",U[U.SIMPLE_TABLES_FULL_BLEED=117]="SIMPLE_TABLES_FULL_BLEED",U[U.IMAGE_MIN_DIMENSIONS=118]="IMAGE_MIN_DIMENSIONS",U[U.SIMPLE_TABLES_MOBILE_DISPLAY_SCALE=119]="SIMPLE_TABLES_MOBILE_DISPLAY_SCALE",U[U.SLACK_TEXTY_CLIPBOARD=120]="SLACK_TEXTY_CLIPBOARD",U[U.ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE=121]="ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE",U[U.SINGLE_HOVERABLE_SECTION_MENU=122]="SINGLE_HOVERABLE_SECTION_MENU",U[U.SIMPLE_TABLES_FIT_TO_PAGE=123]="SIMPLE_TABLES_FIT_TO_PAGE",U[U.TRANSIENT_SECTION_HIGHLIGHTING=124]="TRANSIENT_SECTION_HIGHLIGHTING",U[U.OPTIMIZE_CONTROLS_RENDERING=125]="OPTIMIZE_CONTROLS_RENDERING",U[U.SIMPLE_TABLES_MOBILE_EDITING=126]="SIMPLE_TABLES_MOBILE_EDITING",U[U.OPTIMIZE_EMBEDS_RENDERING=127]="OPTIMIZE_EMBEDS_RENDERING",U[U.CONTENT_REACTION_BAR=128]="CONTENT_REACTION_BAR",U[U.GUTTER_REDESIGN=129]="GUTTER_REDESIGN",U[U.USE_NATIVE_LINK_INSPECTOR=131]="USE_NATIVE_LINK_INSPECTOR",U[U.SECTION_UPDATE_PILL_ENABLED=132]="SECTION_UPDATE_PILL_ENABLED",U[U.SIMPLE_TABLES_CELL_MERGING=133]="SIMPLE_TABLES_CELL_MERGING",U[U.HIGHLIGHT_IN_STANDALONE_CANVASES=134]="HIGHLIGHT_IN_STANDALONE_CANVASES",U[U.BLUE_GREY_MENTIONS=135]="BLUE_GREY_MENTIONS",U[U.SLASH_SHORTCUT_COMMANDS_NUX=136]="SLASH_SHORTCUT_COMMANDS_NUX",U[U.OPTIMIZE_SECTION_STATUS=137]="OPTIMIZE_SECTION_STATUS",U[U.UNFURL_EMBED=138]="UNFURL_EMBED",U[U.SLACK_REACT_17=139]="SLACK_REACT_17",U[U.ENABLE_REACT_18=140]="ENABLE_REACT_18",U[U.PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS=141]="PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS",U[U.DRAGGABLE_CONTROL=142]="DRAGGABLE_CONTROL",U[U.NEW_COLUMN_PLACEHOLDERS=143]="NEW_COLUMN_PLACEHOLDERS",U[U.CANVAS_LISTS_GA=144]="CANVAS_LISTS_GA",U[U.DOCUMENT_AUTOCOMPLETE=145]="DOCUMENT_AUTOCOMPLETE",U[U.CANVAS_DYNAMIC_LISTS=146]="CANVAS_DYNAMIC_LISTS",U[U.CANVAS_LISTS_CARDS=147]="CANVAS_LISTS_CARDS",U[U.MULTI_SECTION_DRAG=148]="MULTI_SECTION_DRAG",U[U.SMOOTHER_MARGIN_SELECTION=149]="SMOOTHER_MARGIN_SELECTION",U[U.WFB_BACK_TO_BASIC_APRIL_RELEASE=150]="WFB_BACK_TO_BASIC_APRIL_RELEASE",U[U.CANVAS_HEADER_IMAGE=151]="CANVAS_HEADER_IMAGE",U[U.AUTOSLUG_SLACK_CHANNELS=152]="AUTOSLUG_SLACK_CHANNELS",U[U.CANVAS_TITLE_UNFURL_DEFAULT=153]="CANVAS_TITLE_UNFURL_DEFAULT",U[U.CURSOR_AWARENESS=154]="CURSOR_AWARENESS",U[U.CANVAS_LISTS_EMBEDS=155]="CANVAS_LISTS_EMBEDS",U[U.CANVAS_DATE_MENTIONS=156]="CANVAS_DATE_MENTIONS",U[U.CANVAS_MOBILE_GENERIC_PLACEHOLDERS=157]="CANVAS_MOBILE_GENERIC_PLACEHOLDERS",U[U.SELECTION_AWARENESS=158]="SELECTION_AWARENESS",U[U.CANVAS_GROUP_MENTIONS=159]="CANVAS_GROUP_MENTIONS",U[U.CANVAS_SALES_TEMPLATES=160]="CANVAS_SALES_TEMPLATES",U[U.CALLOUTS=161]="CALLOUTS",U[U.CANVAS_LINK_HOVERCARD=162]="CANVAS_LINK_HOVERCARD",U[U.CANVAS_NATIVE_LIST_EMBED=163]="CANVAS_NATIVE_LIST_EMBED",U[U.MESSAGE_TO_CANVAS_BUTTON=165]="MESSAGE_TO_CANVAS_BUTTON",U[U.CANVAS_DYNAMIC_GUTTER=166]="CANVAS_DYNAMIC_GUTTER",U[U.TRANSIENT_SECTION_ENHANCEMENTS=167]="TRANSIENT_SECTION_ENHANCEMENTS",U[U.CANVAS_DATE_HOVERCARD=168]="CANVAS_DATE_HOVERCARD"}(Se||(Se={})),function(U){U[U.NONE=0]="NONE",U[U.SHIFT=1]="SHIFT",U[U.ALT=2]="ALT",U[U.META=4]="META",U[U.CTRL=8]="CTRL",U[U.MOD=16]="MOD"}(Ae||(Ae={})),function(U){U[U.CHANNEL=0]="CHANNEL",U[U.USER=1]="USER",U[U.EMOJI=2]="EMOJI",U[U.FILE=4]="FILE",U[U.UNFURL=5]="UNFURL",U[U.DOCUMENT=6]="DOCUMENT",U[U.LINK=7]="LINK",U[U.DOCUMENT_USER_ACCESS=9]="DOCUMENT_USER_ACCESS",U[U.PENDING_URL=10]="PENDING_URL",U[U.GENERIC=11]="GENERIC",U[U.TEMPLATE=12]="TEMPLATE",U[U.BACKGROUND=13]="BACKGROUND",U[U.WIDGET=14]="WIDGET",U[U.LIST=15]="LIST",U[U.LIST_RECORD=16]="LIST_RECORD",U[U.HEADER_IMAGE=17]="HEADER_IMAGE",U[U.SALESFORCE_RECORD=18]="SALESFORCE_RECORD",U[U.GROUP_MEMBERSHIP=19]="GROUP_MEMBERSHIP"}(L||(L={})),function(U){U[U.NOT_FOUND=0]="NOT_FOUND"}(ve||(ve={})),function(U){U[U.CLOSE=0]="CLOSE",U[U.SELECT=1]="SELECT",U[U.MOVE_SELECTION_DOWN=2]="MOVE_SELECTION_DOWN",U[U.MOVE_SELECTION_UP=3]="MOVE_SELECTION_UP"}(_e||(_e={})),function(U){U.CANVAS="insert-canvas",U.AUDIO="insert-audio",U.VIDEO="insert-video",U.FILE="insert-file",U.WORKFLOW="insert-workflow",U.PROFILE="insert-profile",U.LIST="insert-list",U.CODE="inline-code",U.CHANNEL="ac-trigger-channel",U.CODEBLOCK="insert-codeblock",U.BLOCKQUOTE="insert-blockquote",U.PLAIN="insert-plain",U.H1="insert-h1",U.H2="insert-h2",U.H3="insert-h3",U.IMAGE="insert-image",U.TABLE="insert-table",U.CHECKLIST="insert-checklist",U.BULLET_LIST="insert-bullet-list",U.ORDERED_LIST="insert-ordered-list",U.DIVIDER="insert-divider",U.TWO_COLUMNS="layout-two-columns",U.THREE_COLUMNS="layout-three-columns",U.DATE_GENERIC="date-generic",U.DATE_TODAY="date-today",U.DATE_TOMORROW="date-tomorrow",U.DATE_YESTERDAY="date-yesterday"}(Ie||(Ie={})),function(U){U.DEFAULT_SOURCE="canvas-shortcut-command"}(ne||(ne={})),function(U){U[U.SLACK_OBJECT=0]="SLACK_OBJECT",U[U.LINK=1]="LINK",U[U.HEADER=2]="HEADER",U[U.TEXT=3]="TEXT",U[U.DIVIDER=4]="DIVIDER",U[U.HYPERLINK=5]="HYPERLINK",U[U.TITLE=6]="TITLE",U[U.TABLE=7]="TABLE",U[U.DRAG_OVERLAY=8]="DRAG_OVERLAY",U[U.COMMENT_METADATA=9]="COMMENT_METADATA",U[U.INVITED_USER=10]="INVITED_USER",U[U.DATE=11]="DATE",U[U.BACKDROP=12]="BACKDROP",U[U.CALLOUT=13]="CALLOUT",U[U.AI_ASSISTANT=14]="AI_ASSISTANT"}(Ft||(Ft={})),function(U){U.STATIC="list-static",U.EMBED="list-embed"}(qe||(qe={})),function(U){U.STATIC="unfurl-static",U.EMBED="unfurl-embed",U.BUTTON="unfurl-button"}(ft||(ft={})),function(U){U[U.PREVIOUS=0]="PREVIOUS",U[U.NEXT=1]="NEXT"}(En||(En={})),function(U){U.ROW="row",U.COLUMN="column"}(xt||(xt={})),function(U){U.INSERT_BEFORE="insert_before",U.INSERT_AFTER="insert_after",U.DELETE="delete"}(Ui||(Ui={})),function(U){U.CLEAR_CONTENTS="clear_contents",U.MERGE_CELLS="merge_cells",U.UNMERGE_CELLS="unmerge_cells"}(_i||(_i={})),function(U){U.TOGGLE_HAS_HEADER_ROW="toggle_has_header_row",U.TOGGLE_HAS_HEADER_COLUMN="toggle_has_header_column",U.DISTRIBUTE_COLUMNS="distribute_columns",U.TOGGLE_FIT_TO_PAGE="toggle_fit_to_page"}(bn||(bn={})),function(U){U.BACKGROUND_COLOR="background_color"}(zn||(zn={})),function(U){U.NO_FOCUS_ON_CLICK="data-no-focus-section-on-click",U.NO_DRAG_ON_MOUSE_MOVE="data-no-drag-on-mouse-move",U.EMBEDDED_FILE_CARD_CLASSNAME="card-view__file_card",U.EMBEDDED_IMAGE_CARD_CLASSNAME="card-view__image_card"}(gn||(gn={})),function(U){U[U.DISMISS_POPOVER=0]="DISMISS_POPOVER",U[U.REMOVE_ASSOCIATED_CONTENT=1]="REMOVE_ASSOCIATED_CONTENT",U[U.COPY_OBJECT=2]="COPY_OBJECT",U[U.CREATE_OR_VIEW_COMMENT=3]="CREATE_OR_VIEW_COMMENT",U[U.REPLACE_FILE=4]="REPLACE_FILE",U[U.SWITCH_UNFURL_TYPE=5]="SWITCH_UNFURL_TYPE",U[U.PREVENT_POPOVER_DISMISS=6]="PREVENT_POPOVER_DISMISS",U[U.SYNC_METADATA=7]="SYNC_METADATA",U[U.COPY_SECTION_LINK=8]="COPY_SECTION_LINK",U[U.SET_BLOCK_STYLE=9]="SET_BLOCK_STYLE",U[U.ADD_COLUMN=10]="ADD_COLUMN",U[U.MOVE_LINE=11]="MOVE_LINE",U[U.TOGGLE_COLLAPSE=12]="TOGGLE_COLLAPSE",U[U.CHECK_ALL=13]="CHECK_ALL",U[U.UNCHECK_ALL=14]="UNCHECK_ALL",U[U.REMOVE_CHECKED=15]="REMOVE_CHECKED",U[U.MOVE_CHECKED_TO_BOTTOM=16]="MOVE_CHECKED_TO_BOTTOM",U[U.SORT_ALPHA=17]="SORT_ALPHA",U[U.TAKE_OVER_EDITING=18]="TAKE_OVER_EDITING",U[U.ADD_TEXT_BELOW=19]="ADD_TEXT_BELOW",U[U.UPDATE_INLINE_ENTITY_DISPLAY_INFO=20]="UPDATE_INLINE_ENTITY_DISPLAY_INFO",U[U.ON_LINK_INSPECTOR_INPUT_CHANGE=21]="ON_LINK_INSPECTOR_INPUT_CHANGE",U[U.FOCUS_ASSOCIATED_SECTION=22]="FOCUS_ASSOCIATED_SECTION",U[U.UNFURL_URL=23]="UNFURL_URL",U[U.MODIFY_TABLE=24]="MODIFY_TABLE",U[U.RESUME_SNAPSHOTS=25]="RESUME_SNAPSHOTS",U[U.OPEN_POPOVER=26]="OPEN_POPOVER",U[U.CANCEL_HEADER_IMAGE=27]="CANCEL_HEADER_IMAGE",U[U.PREVIEW_HEADER_IMAGE=28]="PREVIEW_HEADER_IMAGE",U[U.SAVE_HEADER_IMAGE=29]="SAVE_HEADER_IMAGE",U[U.MESSAGE_UNFURL_CONFIRMATION=30]="MESSAGE_UNFURL_CONFIRMATION",U[U.UNFURL_URLS=31]="UNFURL_URLS",U[U.ADD_INVITED_USER_CARDS=32]="ADD_INVITED_USER_CARDS",U[U.SYNC_CONTENT_WIDTH=33]="SYNC_CONTENT_WIDTH",U[U.SET_DATE_MS=34]="SET_DATE_MS",U[U.SWITCH_LIST_VIEW=35]="SWITCH_LIST_VIEW",U[U.CONVERT_TABLE_TO_LIST=36]="CONVERT_TABLE_TO_LIST",U[U.HANDLE_MODAL_STATE_CHANGE=37]="HANDLE_MODAL_STATE_CHANGE",U[U.MODIFY_CALLOUT=38]="MODIFY_CALLOUT",U[U.INSERT_AI_CONTENT=39]="INSERT_AI_CONTENT"}(gi||(gi={})),function(U){U.MERGE="merge",U.UNMERGE="unmerge",U.CLEAR_CONTENTS="clear_contents"}(ai||(ai={})),function(U){U[U.SLACK_MESSAGE=0]="SLACK_MESSAGE",U[U.SLACK_FILE=1]="SLACK_FILE",U[U.SLACK_IMAGE_FILE=8]="SLACK_IMAGE_FILE",U[U.SLACK_DOCUMENT=2]="SLACK_DOCUMENT",U[U.SLACK_DOCUMENT_SECTION=3]="SLACK_DOCUMENT_SECTION",U[U.SLACK_PUBLIC_LINK=4]="SLACK_PUBLIC_LINK",U[U.SLACK_USER=5]="SLACK_USER",U[U.SLACK_CHANNEL=6]="SLACK_CHANNEL",U[U.SLACK_WORKFLOW=7]="SLACK_WORKFLOW",U[U.SLACK_WIDGET=9]="SLACK_WIDGET",U[U.SLACK_EMBED=10]="SLACK_EMBED",U[U.SLACK_LIST=11]="SLACK_LIST",U[U.SLACK_LIST_RECORD=12]="SLACK_LIST_RECORD",U[U.SLACK_SALESFORCE_RECORD=13]="SLACK_SALESFORCE_RECORD"}(yr||(yr={})),function(U){U[U.CARD=0]="CARD",U[U.INLINE=1]="INLINE",U[U.LINK=2]="LINK",U[U.WIDGET=3]="WIDGET"}(Bt||(Bt={})),function(U){U.IMAGE="image",U.HORIZONTAL_RULE="horizontal-rule",U.CHECKLIST="checklist",U.NUMBERED_LIST="numbered-list",U.BULLETED_LIST="bullet-list",U.TABLE="table",U.CODE="code",U.TEXT_H1_STYLE="large-heading",U.TEXT_H2_STYLE="medium-heading",U.TEXT_H3_STYLE="small-heading",U.TEXT_PLAIN_STYLE="plain",U.BLOCKQUOTE="blockquote",U.LAYOUT="layout",U.EMOJI="emoji",U.DATE_MENTION="date-mention",U.CALLOUT="callout"}(Et||(Et={})),function(U){U.PROFILE="profile",U.WORKFLOW="workflow",U.LINK="link",U.IMAGE="image",U.CANVAS="canvas",U.VIDEO="video",U.AUDIO="audio",U.FILE="file",U.LIST="list",U.SALESFORCE_RECORD="sfrecord"}(On||(On={})),function(U){U[U.DOCUMENT_SAVING=1]="DOCUMENT_SAVING",U[U.IO=2]="IO",U[U.LISTENER=3]="LISTENER",U[U.ELEMENT=4]="ELEMENT"}(nn||(nn={})),function(U){U[U.NONE=0]="NONE",U[U.DOCUMENT_FAILED_TO_LOAD=1]="DOCUMENT_FAILED_TO_LOAD",U[U.DOCUMENT_SAVE_FAILED=2]="DOCUMENT_SAVE_FAILED",U[U.DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE=3]="DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE",U[U.DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE=4]="DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE",U[U.DOCUMENT_TOO_LARGE_TO_SAVE=5]="DOCUMENT_TOO_LARGE_TO_SAVE",U[U.SESSION_EXPIRED=6]="SESSION_EXPIRED",U[U.THREAD_CLOSED=7]="THREAD_CLOSED",U[U.DOCUMENT_SAVE_FAILED_TO_COMPLETE=8]="DOCUMENT_SAVE_FAILED_TO_COMPLETE",U[U.DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES=9]="DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES"}(Bn||(Bn={})),function(U){U[U.WRITE=0]="WRITE",U[U.READ=1]="READ",U[U.NONE=2]="NONE"}(li||(li={})),function(U){U.DOWNLOAD="download",U.EDIT_FILE="edit-file",U.OPEN_IN_NEW_WINDOW="open-in-new-window",U.PREVIEW_FILE="preview-file",U.VIEW_FULL_SCREEN="view-full-screen",U.SHARE="share"}(ui||(ui={})),function(U){U[U.HOVERCARD=0]="HOVERCARD",U[U.CARD=1]="CARD",U[U.HEADER=2]="HEADER",U[U.CONTROL_CONTEXT_MENU=3]="CONTROL_CONTEXT_MENU",U[U.SECTION_MENU=4]="SECTION_MENU",U[U.HYPERLINK_CONTEXT_MENU=5]="HYPERLINK_CONTEXT_MENU",U[U.HYPERLINK_INSPECTOR_TOOLBAR=6]="HYPERLINK_INSPECTOR_TOOLBAR",U[U.CONTROL_OBJECT_OBSERVER=7]="CONTROL_OBJECT_OBSERVER",U[U.TABLE_SELECTION_MENU=8]="TABLE_SELECTION_MENU",U[U.FILE_UPLOAD_BLOCKED_OVERLAY=9]="FILE_UPLOAD_BLOCKED_OVERLAY",U[U.EPHEMERAL_MESSAGE_MODAL_TRIGGER=10]="EPHEMERAL_MESSAGE_MODAL_TRIGGER",U[U.VARIABLE_EDIT_POPOVER=11]="VARIABLE_EDIT_POPOVER",U[U.CONTENT_REACTION_BAR=12]="CONTENT_REACTION_BAR",U[U.GUTTER_REACTION_ICON=13]="GUTTER_REACTION_ICON",U[U.HEADER_IMAGE_PICKER=14]="HEADER_IMAGE_PICKER",U[U.DATE_PICKER=15]="DATE_PICKER",U[U.MODAL_STATE_OBSERVER=16]="MODAL_STATE_OBSERVER",U[U.AI_ASSISTANT_OVERLAY=17]="AI_ASSISTANT_OVERLAY"}(Gn||(Gn={})),function(U){U.NONE="none",U.THREAD_ROOT="thread_root",U.THREAD_COMPOSER="thread_composer"}(Yn||(Yn={})),function(U){U.TEXT="text",U.USER="user",U.CHANNEL="channel",U.DATE="date"}(Ci||(Ci={})),function(U){U.INSERT="insert",U.EDIT="edit",U.REMOVE="remove",U.SHOW_CREATION_POPOVER="show_creation_popover",U.HIGHLIGHT="highlight"}(Ti||(Ti={})),function(U){U.GREEN="green",U.JADE="jade",U.BLUE="blue",U.INDIGO="indigo",U.PURPLE="purple",U.PINK="pink",U.ORANGE="orange",U.BROWN="brown",U.GRAY="gray"}(Un||(Un={})),ot("Collab",on),ot("dumpCollabDebugReport",function(){$t.forEach((U,ce)=>{ce.getInitLog().then(Fe=>{console.log(`Collab instance ${ce.id} debug report:`,ce.getBridgeDebugReport(!1),Fe)})})}),window.JS_CLIENT_HASH="yDlRYIRJHOz9FtugdtpxAQ",window.QUIP_VERSION_NAME="quipbuild_2024_08_23T18_14_0e7b92e"},7492298763:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;a.DEBUG_BUILD=c},3778408185:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1514424064),p=c(285364620),m=c(5625132121),g=c(5640133965),l=c(5283324899),r=c(5368312762);a.addClsInstrumentationHandler=d.addClsInstrumentationHandler,a.addFidInstrumentationHandler=d.addFidInstrumentationHandler,a.addLcpInstrumentationHandler=d.addLcpInstrumentationHandler,a.addPerformanceInstrumentationHandler=d.addPerformanceInstrumentationHandler,a.addTtfbInstrumentationHandler=d.addTtfbInstrumentationHandler,a.addPerformanceEntries=p.addPerformanceEntries,a.startTrackingInteractions=p.startTrackingInteractions,a.startTrackingLongTasks=p.startTrackingLongTasks,a.startTrackingWebVitals=p.startTrackingWebVitals,a.addClickKeypressInstrumentationHandler=m.addClickKeypressInstrumentationHandler,a.addHistoryInstrumentationHandler=g.addHistoryInstrumentationHandler,a.SENTRY_XHR_DATA_KEY=l.SENTRY_XHR_DATA_KEY,a.addXhrInstrumentationHandler=l.addXhrInstrumentationHandler,a.startTrackingINP=r.startTrackingINP},5625132121:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(6496036490),m=1e3;let g,l,r;function n(h){const S="dom";d.addHandler(S,h),d.maybeInstrument(S,e)}s(n,"addClickKeypressInstrumentationHandler");function e(){if(!p.WINDOW.document)return;const h=d.triggerHandlers.bind(null,"dom"),S=o(h,!0);p.WINDOW.document.addEventListener("click",S,!1),p.WINDOW.document.addEventListener("keypress",S,!1),["EventTarget","Node"].forEach(f=>{const v=p.WINDOW[f]&&p.WINDOW[f].prototype;!v||!v.hasOwnProperty||!v.hasOwnProperty("addEventListener")||(d.fill(v,"addEventListener",function(E){return function(_,T,w){if(_==="click"||_=="keypress")try{const M=this,R=M.__sentry_instrumentation_handlers__=M.__sentry_instrumentation_handlers__||{},O=R[_]=R[_]||{refCount:0};if(!O.handler){const k=o(h);O.handler=k,E.call(this,_,k,w)}O.refCount++}catch{}return E.call(this,_,T,w)}}),d.fill(v,"removeEventListener",function(E){return function(_,T,w){if(_==="click"||_=="keypress")try{const M=this,R=M.__sentry_instrumentation_handlers__||{},O=R[_];O&&(O.refCount--,O.refCount<=0&&(E.call(this,_,O.handler,w),O.handler=void 0,delete R[_]),Object.keys(R).length===0&&delete M.__sentry_instrumentation_handlers__)}catch{}return E.call(this,_,T,w)}}))})}s(e,"instrumentDOM");function t(h){if(h.type!==l)return!1;try{if(!h.target||h.target._sentryId!==r)return!1}catch{}return!0}s(t,"isSimilarToLastCapturedEvent");function i(h,S){return h!=="keypress"?!1:!S||!S.tagName?!0:!(S.tagName==="INPUT"||S.tagName==="TEXTAREA"||S.isContentEditable)}s(i,"shouldSkipDOMEvent");function o(h,S=!1){return f=>{if(!f||f._sentryCaptured)return;const v=u(f);if(i(f.type,v))return;d.addNonEnumerableProperty(f,"_sentryCaptured",!0),v&&!v._sentryId&&d.addNonEnumerableProperty(v,"_sentryId",d.uuid4());const E=f.type==="keypress"?"input":f.type;t(f)||(h({event:f,name:E,global:S}),l=f.type,r=v?v._sentryId:void 0),clearTimeout(g),g=p.WINDOW.setTimeout(()=>{r=void 0,l=void 0},m)}}s(o,"makeDOMEventHandler");function u(h){try{return h.target}catch{return null}}s(u,"getEventTarget"),a.addClickKeypressInstrumentationHandler=n,a.instrumentDOM=e},5640133965:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(6496036490);let m;function g(r){const n="history";d.addHandler(n,r),d.maybeInstrument(n,l)}s(g,"addHistoryInstrumentationHandler");function l(){if(!d.supportsHistory())return;const r=p.WINDOW.onpopstate;p.WINDOW.onpopstate=function(...e){const t=p.WINDOW.location.href,i=m;m=t;const o={from:i,to:t};if(d.triggerHandlers("history",o),r)try{return r.apply(this,e)}catch{}};function n(e){return function(...t){const i=t.length>2?t[2]:void 0;if(i){const o=m,u=String(i);m=u;const h={from:o,to:u};d.triggerHandlers("history",h)}return e.apply(this,t)}}s(n,"historyReplacementFunction"),d.fill(p.WINDOW.history,"pushState",n),d.fill(p.WINDOW.history,"replaceState",n)}s(l,"instrumentHistory"),a.addHistoryInstrumentationHandler=g},5283324899:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(6496036490),m="__sentry_xhr_v3__";function g(n){const e="xhr";d.addHandler(e,n),d.maybeInstrument(e,l)}s(g,"addXhrInstrumentationHandler");function l(){if(!p.WINDOW.XMLHttpRequest)return;const n=XMLHttpRequest.prototype;d.fill(n,"open",function(e){return function(...t){const i=d.timestampInSeconds()*1e3,o=d.isString(t[0])?t[0].toUpperCase():void 0,u=r(t[1]);if(!o||!u)return e.apply(this,t);this[m]={method:o,url:u,request_headers:{}},o==="POST"&&u.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const h=s(()=>{const S=this[m];if(S&&this.readyState===4){try{S.status_code=this.status}catch{}const f={endTimestamp:d.timestampInSeconds()*1e3,startTimestamp:i,xhr:this};d.triggerHandlers("xhr",f)}},"onreadystatechangeHandler");return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?d.fill(this,"onreadystatechange",function(S){return function(...f){return h(),S.apply(this,f)}}):this.addEventListener("readystatechange",h),d.fill(this,"setRequestHeader",function(S){return function(...f){const[v,E]=f,_=this[m];return _&&d.isString(v)&&d.isString(E)&&(_.request_headers[v.toLowerCase()]=E),S.apply(this,f)}}),e.apply(this,t)}}),d.fill(n,"send",function(e){return function(...t){const i=this[m];if(!i)return e.apply(this,t);t[0]!==void 0&&(i.body=t[0]);const o={startTimestamp:d.timestampInSeconds()*1e3,xhr:this};return d.triggerHandlers("xhr",o),e.apply(this,t)}})}s(l,"instrumentXHR");function r(n){if(d.isString(n))return n;try{return n.toString()}catch{}}s(r,"parseUrl"),a.SENTRY_XHR_DATA_KEY=m,a.addXhrInstrumentationHandler=g,a.instrumentXHR=l},285364620:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(7492298763),g=c(1514424064),l=c(6496036490),r=c(2929564606),n=c(2273798110),e=c(8451898068),t=2147483647;let i=0,o={},u,h;function S(){const X=r.getBrowserPerformanceAPI();if(X&&p.browserPerformanceTimeOrigin){X.mark&&l.WINDOW.performance.mark("sentry-tracing-init");const ee=T(),fe=E(),oe=_(),Oe=w();return()=>{ee(),fe(),oe(),Oe()}}return()=>{}}s(S,"startTrackingWebVitals");function f(){g.addPerformanceInstrumentationHandler("longtask",({entries:X})=>{for(const ee of X){if(!d.getActiveSpan())return;const fe=r.msToSec(p.browserPerformanceTimeOrigin+ee.startTime),oe=r.msToSec(ee.duration),Oe=d.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-task",startTime:fe,attributes:{[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}});Oe&&Oe.end(fe+oe)}})}s(f,"startTrackingLongTasks");function v(){g.addPerformanceInstrumentationHandler("event",({entries:X})=>{for(const ee of X){if(!d.getActiveSpan())return;if(ee.name==="click"){const fe=r.msToSec(p.browserPerformanceTimeOrigin+ee.startTime),oe=r.msToSec(ee.duration),Oe={name:p.htmlTreeAsString(ee.target),op:`ui.interaction.${ee.name}`,startTime:fe,attributes:{[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}},Xe=p.getComponentName(ee.target);Xe&&(Oe.attributes["ui.component_name"]=Xe);const ge=d.startInactiveSpan(Oe);ge&&ge.end(fe+oe)}}})}s(v,"startTrackingInteractions");function E(){return g.addClsInstrumentationHandler(({metric:X})=>{const ee=X.entries[X.entries.length-1];ee&&(m.DEBUG_BUILD&&p.logger.log("[Measurements] Adding CLS"),o.cls={value:X.value,unit:""},h=ee)},!0)}s(E,"_trackCLS");function _(){return g.addLcpInstrumentationHandler(({metric:X})=>{const ee=X.entries[X.entries.length-1];ee&&(m.DEBUG_BUILD&&p.logger.log("[Measurements] Adding LCP"),o.lcp={value:X.value,unit:"millisecond"},u=ee)},!0)}s(_,"_trackLCP");function T(){return g.addFidInstrumentationHandler(({metric:X})=>{const ee=X.entries[X.entries.length-1];if(!ee)return;const fe=r.msToSec(p.browserPerformanceTimeOrigin),oe=r.msToSec(ee.startTime);m.DEBUG_BUILD&&p.logger.log("[Measurements] Adding FID"),o.fid={value:X.value,unit:"millisecond"},o["mark.fid"]={value:fe+oe,unit:"second"}})}s(T,"_trackFID");function w(){return g.addTtfbInstrumentationHandler(({metric:X})=>{X.entries[X.entries.length-1]&&(m.DEBUG_BUILD&&p.logger.log("[Measurements] Adding TTFB"),o.ttfb={value:X.value,unit:"millisecond"})})}s(w,"_trackTtfb");function M(X){const ee=r.getBrowserPerformanceAPI();if(!ee||!l.WINDOW.performance.getEntries||!p.browserPerformanceTimeOrigin)return;m.DEBUG_BUILD&&p.logger.log("[Tracing] Adding & adjusting spans using Performance API");const fe=r.msToSec(p.browserPerformanceTimeOrigin),oe=ee.getEntries(),{op:Oe,start_timestamp:Xe}=d.spanToJSON(X);if(oe.slice(i).forEach(ge=>{const Me=r.msToSec(ge.startTime),$e=r.msToSec(ge.duration);if(!(Oe==="navigation"&&Xe&&fe+Me<Xe))switch(ge.entryType){case"navigation":{O(X,ge,fe);break}case"mark":case"paint":case"measure":{R(X,ge,Me,$e,fe);const ze=e.getVisibilityWatcher(),nt=ge.startTime<ze.firstHiddenTime;ge.name==="first-paint"&&nt&&(m.DEBUG_BUILD&&p.logger.log("[Measurements] Adding FP"),o.fp={value:ge.startTime,unit:"millisecond"}),ge.name==="first-contentful-paint"&&nt&&(m.DEBUG_BUILD&&p.logger.log("[Measurements] Adding FCP"),o.fcp={value:ge.startTime,unit:"millisecond"});break}case"resource":{P(X,ge,ge.name,Me,$e,fe);break}}}),i=Math.max(oe.length-1,0),D(X),Oe==="pageload"){W(o),["fcp","fp","lcp"].forEach(Me=>{if(!o[Me]||!Xe||fe>=Xe)return;const $e=o[Me].value,ze=fe+r.msToSec($e),nt=Math.abs((ze-Xe)*1e3),mt=nt-$e;m.DEBUG_BUILD&&p.logger.log(`[Measurements] Normalized ${Me} from ${$e} to ${nt} (${mt})`),o[Me].value=nt});const ge=o["mark.fid"];ge&&o.fid&&(r.startAndEndSpan(X,ge.value,ge.value+r.msToSec(o.fid.value),{name:"first input delay",op:"ui.action",attributes:{[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),delete o["mark.fid"]),"fcp"in o||delete o.cls,Object.keys(o).forEach(Me=>{d.setMeasurement(Me,o[Me].value,o[Me].unit)}),H(X)}u=void 0,h=void 0,o={}}s(M,"addPerformanceEntries");function R(X,ee,fe,oe,Oe){const Xe=Oe+fe,ge=Xe+oe;return r.startAndEndSpan(X,Xe,ge,{name:ee.name,op:ee.entryType,attributes:{[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"}}),Xe}s(R,"_addMeasureSpans");function O(X,ee,fe){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(oe=>{k(X,ee,oe,fe)}),k(X,ee,"secureConnection",fe,"TLS/SSL","connectEnd"),k(X,ee,"fetch",fe,"cache","domainLookupStart"),k(X,ee,"domainLookup",fe,"DNS"),A(X,ee,fe)}s(O,"_addNavigationSpans");function k(X,ee,fe,oe,Oe,Xe){const ge=Xe?ee[Xe]:ee[`${fe}End`],Me=ee[`${fe}Start`];!Me||!ge||r.startAndEndSpan(X,oe+r.msToSec(Me),oe+r.msToSec(ge),{op:"browser",name:Oe||fe,attributes:{[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}})}s(k,"_addPerformanceNavigationTiming");function A(X,ee,fe){ee.responseEnd&&(r.startAndEndSpan(X,fe+r.msToSec(ee.requestStart),fe+r.msToSec(ee.responseEnd),{op:"browser",name:"request",attributes:{[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),r.startAndEndSpan(X,fe+r.msToSec(ee.responseStart),fe+r.msToSec(ee.responseEnd),{op:"browser",name:"response",attributes:{[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}))}s(A,"_addRequest");function P(X,ee,fe,oe,Oe,Xe){if(ee.initiatorType==="xmlhttprequest"||ee.initiatorType==="fetch")return;const ge=p.parseUrl(fe),Me={[d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};j(Me,ee,"transferSize","http.response_transfer_size"),j(Me,ee,"encodedBodySize","http.response_content_length"),j(Me,ee,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in ee&&(Me["resource.render_blocking_status"]=ee.renderBlockingStatus),ge.protocol&&(Me["url.scheme"]=ge.protocol.split(":").pop()),ge.host&&(Me["server.address"]=ge.host),Me["url.same_origin"]=fe.includes(l.WINDOW.location.origin);const $e=Xe+oe,ze=$e+Oe;r.startAndEndSpan(X,$e,ze,{name:fe.replace(l.WINDOW.location.origin,""),op:ee.initiatorType?`resource.${ee.initiatorType}`:"resource.other",attributes:Me})}s(P,"_addResourceSpans");function D(X){const ee=l.WINDOW.navigator;if(!ee)return;const fe=ee.connection;fe&&(fe.effectiveType&&X.setAttribute("effectiveConnectionType",fe.effectiveType),fe.type&&X.setAttribute("connectionType",fe.type),r.isMeasurementValue(fe.rtt)&&(o["connection.rtt"]={value:fe.rtt,unit:"millisecond"})),r.isMeasurementValue(ee.deviceMemory)&&X.setAttribute("deviceMemory",`${ee.deviceMemory} GB`),r.isMeasurementValue(ee.hardwareConcurrency)&&X.setAttribute("hardwareConcurrency",String(ee.hardwareConcurrency))}s(D,"_trackNavigator");function H(X){u&&(m.DEBUG_BUILD&&p.logger.log("[Measurements] Adding LCP Data"),u.element&&X.setAttribute("lcp.element",p.htmlTreeAsString(u.element)),u.id&&X.setAttribute("lcp.id",u.id),u.url&&X.setAttribute("lcp.url",u.url.trim().slice(0,200)),X.setAttribute("lcp.size",u.size)),h&&h.sources&&(m.DEBUG_BUILD&&p.logger.log("[Measurements] Adding CLS Data"),h.sources.forEach((ee,fe)=>X.setAttribute(`cls.source.${fe+1}`,p.htmlTreeAsString(ee.node))))}s(H,"_tagMetricInfo");function j(X,ee,fe,oe){const Oe=ee[fe];Oe!=null&&Oe<t&&(X[oe]=Oe)}s(j,"setResourceEntrySizeData");function W(X){const ee=n.getNavigationEntry();if(!ee)return;const{responseStart:fe,requestStart:oe}=ee;oe<=fe&&(m.DEBUG_BUILD&&p.logger.log("[Measurements] Adding TTFB Request Time"),X["ttfb.requestTime"]={value:fe-oe,unit:"millisecond"})}s(W,"_addTtfbRequestTimeToMeasurements"),a._addMeasureSpans=R,a._addResourceSpans=P,a.addPerformanceEntries=M,a.startTrackingInteractions=v,a.startTrackingLongTasks=f,a.startTrackingWebVitals=S},5368312762:(F,a,c)=>{var{_optionalChain:d}=c(7563271614);Object.defineProperty(a,"__esModule",{value:!0});const p=c(8482989710),m=c(7563271614),g=c(1514424064),l=c(2929564606);function r(){if(l.getBrowserPerformanceAPI()&&m.browserPerformanceTimeOrigin){const i=e();return()=>{i()}}return()=>{}}s(r,"startTrackingINP");const n={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function e(){return g.addInpInstrumentationHandler(({metric:t})=>{const i=p.getClient();if(!i||t.value==null)return;const o=t.entries.find(H=>H.duration===t.value&&n[H.name]);if(!o)return;const u=n[o.name],h=i.getOptions(),S=l.msToSec(m.browserPerformanceTimeOrigin+o.startTime),f=l.msToSec(t.value),v=p.getCurrentScope(),E=p.getActiveSpan(),_=E?p.getRootSpan(E):void 0,T=_?p.spanToJSON(_).description:void 0,w=v.getUser(),M=i.getIntegrationByName("Replay"),R=M&&M.getReplayId(),O=w!==void 0?w.email||w.id||w.ip_address:void 0,k=d([v,"access",H=>H.getScopeData,"call",H=>H(),"access",H=>H.contexts,"optionalAccess",H=>H.profile,"optionalAccess",H=>H.profile_id]),A=m.htmlTreeAsString(o.target),P=m.dropUndefinedKeys({release:h.release,environment:h.environment,transaction:T,[p.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:t.value,user:O||void 0,profile_id:k||void 0,replay_id:R||void 0}),D=p.startInactiveSpan({name:A,op:`ui.interaction.${u}`,attributes:P,startTime:S,experimental:{standalone:!0}});D.addEvent("inp",{[p.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"millisecond",[p.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:t.value}),D.end(S+f)})}s(e,"_trackINP"),a.startTrackingINP=r},1514424064:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(7492298763),m=c(8724048708),g=c(5639023535),l=c(2086611485),r=c(5927711655),n=c(9526061972),e=c(1514170081),t={},i={};let o,u,h,S,f;function v(ee,fe=!1){return H("cls",ee,O,o,fe)}s(v,"addClsInstrumentationHandler");function E(ee,fe=!1){return H("lcp",ee,A,h,fe)}s(E,"addLcpInstrumentationHandler");function _(ee){return H("fid",ee,k,u)}s(_,"addFidInstrumentationHandler");function T(ee){return H("ttfb",ee,P,S)}s(T,"addTtfbInstrumentationHandler");function w(ee){return H("inp",ee,D,f)}s(w,"addInpInstrumentationHandler");function M(ee,fe){return W(ee,fe),i[ee]||(j(ee),i[ee]=!0),X(ee,fe)}s(M,"addPerformanceInstrumentationHandler");function R(ee,fe){const oe=t[ee];if(!(!oe||!oe.length))for(const Oe of oe)try{Oe(fe)}catch(Xe){p.DEBUG_BUILD&&d.logger.error(`Error while triggering instrumentation handler.
Type: ${ee}
Name: ${d.getFunctionName(Oe)}
Error:`,Xe)}}s(R,"triggerHandlers");function O(){return m.onCLS(ee=>{R("cls",{metric:ee}),o=ee},{reportAllChanges:!0})}s(O,"instrumentCls");function k(){return g.onFID(ee=>{R("fid",{metric:ee}),u=ee})}s(k,"instrumentFid");function A(){return r.onLCP(ee=>{R("lcp",{metric:ee}),h=ee})}s(A,"instrumentLcp");function P(){return e.onTTFB(ee=>{R("ttfb",{metric:ee}),S=ee})}s(P,"instrumentTtfb");function D(){return l.onINP(ee=>{R("inp",{metric:ee}),f=ee})}s(D,"instrumentInp");function H(ee,fe,oe,Oe,Xe=!1){W(ee,fe);let ge;return i[ee]||(ge=oe(),i[ee]=!0),Oe&&fe({metric:Oe}),X(ee,fe,Xe?ge:void 0)}s(H,"addMetricObserver");function j(ee){const fe={};ee==="event"&&(fe.durationThreshold=0),n.observe(ee,oe=>{R(ee,{entries:oe})},fe)}s(j,"instrumentPerformanceObserver");function W(ee,fe){t[ee]=t[ee]||[],t[ee].push(fe)}s(W,"addHandler");function X(ee,fe,oe){return()=>{oe&&oe();const Oe=t[ee];if(!Oe)return;const Xe=Oe.indexOf(fe);Xe!==-1&&Oe.splice(Xe,1)}}s(X,"getCleanupCallback"),a.addClsInstrumentationHandler=v,a.addFidInstrumentationHandler=_,a.addInpInstrumentationHandler=w,a.addLcpInstrumentationHandler=E,a.addPerformanceInstrumentationHandler=M,a.addTtfbInstrumentationHandler=T},6496036490:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const p=c(7563271614).GLOBAL_OBJ;a.WINDOW=p},2929564606:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(6496036490);function m(n){return typeof n=="number"&&isFinite(n)}s(m,"isMeasurementValue");function g(n,e,t,{...i}){const o=d.spanToJSON(n).start_timestamp;return o&&o>e&&typeof n.updateStartTime=="function"&&n.updateStartTime(e),d.withActiveSpan(n,()=>{const u=d.startInactiveSpan({startTime:e,...i});return u&&u.end(t),u})}s(g,"startAndEndSpan");function l(){return p.WINDOW&&p.WINDOW.addEventListener&&p.WINDOW.performance}s(l,"getBrowserPerformanceAPI");function r(n){return n/1e3}s(r,"msToSec"),a.getBrowserPerformanceAPI=l,a.isMeasurementValue=m,a.msToSec=r,a.startAndEndSpan=g},8724048708:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(9035861842),p=c(4479988250),m=c(9526061972),g=c(7603883117),l=c(7841494492),r=c(2741739498),n=[.1,.25],e=s((t,i={})=>{r.onFCP(l.runOnce(()=>{const o=p.initMetric("CLS",0);let u,h=0,S=[];const f=s(E=>{E.forEach(_=>{if(!_.hadRecentInput){const T=S[0],w=S[S.length-1];h&&_.startTime-w.startTime<1e3&&_.startTime-T.startTime<5e3?(h+=_.value,S.push(_)):(h=_.value,S=[_])}}),h>o.value&&(o.value=h,o.entries=S,u())},"handleEntries"),v=m.observe("layout-shift",f);v&&(u=d.bindReporter(t,o,n,i.reportAllChanges),g.onHidden(()=>{f(v.takeRecords()),u(!0)}),setTimeout(u,0))}))},"onCLS");a.CLSThresholds=n,a.onCLS=e},5639023535:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(9035861842),p=c(8451898068),m=c(4479988250),g=c(9526061972),l=c(7603883117),r=c(7841494492),n=c(3420582863),e=[100,300],t=s((i,o={})=>{n.whenActivated(()=>{const u=p.getVisibilityWatcher(),h=m.initMetric("FID");let S;const f=s(_=>{_.startTime<u.firstHiddenTime&&(h.value=_.processingStart-_.startTime,h.entries.push(_),S(!0))},"handleEntry"),v=s(_=>{_.forEach(f)},"handleEntries"),E=g.observe("first-input",v);S=d.bindReporter(i,h,e,o.reportAllChanges),E&&l.onHidden(r.runOnce(()=>{v(E.takeRecords()),E.disconnect()}))})},"onFID");a.FIDThresholds=e,a.onFID=t},2086611485:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6496036490),p=c(9035861842),m=c(4479988250),g=c(9526061972),l=c(7603883117),r=c(6842089089),n=c(3420582863),e=[200,500],t=0,i=s(()=>r.getInteractionCount()-t,"getInteractionCountForNavigation"),o=10,u=[],h={},S=s(E=>{const _=u[u.length-1],T=h[E.interactionId];if(T||u.length<o||E.duration>_.latency){if(T)T.entries.push(E),T.latency=Math.max(T.latency,E.duration);else{const w={id:E.interactionId,latency:E.duration,entries:[E]};h[w.id]=w,u.push(w)}u.sort((w,M)=>M.latency-w.latency),u.splice(o).forEach(w=>{delete h[w.id]})}},"processEntry"),f=s(()=>{const E=Math.min(u.length-1,Math.floor(i()/50));return u[E]},"estimateP98LongestInteraction"),v=s((E,_={})=>{n.whenActivated(()=>{r.initInteractionCountPolyfill();const T=m.initMetric("INP");let w;const M=s(O=>{O.forEach(A=>{A.interactionId&&S(A),A.entryType==="first-input"&&!u.some(D=>D.entries.some(H=>A.duration===H.duration&&A.startTime===H.startTime))&&S(A)});const k=f();k&&k.latency!==T.value&&(T.value=k.latency,T.entries=k.entries,w())},"handleEntries"),R=g.observe("event",M,{durationThreshold:_.durationThreshold!=null?_.durationThreshold:40});w=p.bindReporter(E,T,e,_.reportAllChanges),R&&("PerformanceEventTiming"in d.WINDOW&&"interactionId"in PerformanceEventTiming.prototype&&R.observe({type:"first-input",buffered:!0}),l.onHidden(()=>{M(R.takeRecords()),T.value<0&&i()>0&&(T.value=0,T.entries=[]),w(!0)}))})},"onINP");a.INPThresholds=e,a.onINP=v},5927711655:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6496036490),p=c(9035861842),m=c(2520992508),g=c(8451898068),l=c(4479988250),r=c(9526061972),n=c(7603883117),e=c(7841494492),t=c(3420582863),i=[2500,4e3],o={},u=s((h,S={})=>{t.whenActivated(()=>{const f=g.getVisibilityWatcher(),v=l.initMetric("LCP");let E;const _=s(w=>{const M=w[w.length-1];M&&M.startTime<f.firstHiddenTime&&(v.value=Math.max(M.startTime-m.getActivationStart(),0),v.entries=[M],E())},"handleEntries"),T=r.observe("largest-contentful-paint",_);if(T){E=p.bindReporter(h,v,i,S.reportAllChanges);const w=e.runOnce(()=>{o[v.id]||(_(T.takeRecords()),T.disconnect(),o[v.id]=!0,E(!0))});["keydown","click"].forEach(M=>{d.WINDOW.document&&addEventListener(M,()=>setTimeout(w,0),!0)}),n.onHidden(w)}})},"onLCP");a.LCPThresholds=i,a.onLCP=u},9035861842:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=s((p,m)=>p>m[1]?"poor":p>m[0]?"needs-improvement":"good","getRating"),d=s((p,m,g,l)=>{let r,n;return e=>{m.value>=0&&(e||l)&&(n=m.value-(r||0),(n||r===void 0)&&(r=m.value,m.delta=n,m.rating=c(m.value,g),p(m)))}},"bindReporter");a.bindReporter=d},8117347597:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=s(()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,"generateUniqueID");a.generateUniqueID=c},2520992508:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(2273798110),p=s(()=>{const m=d.getNavigationEntry();return m&&m.activationStart||0},"getActivationStart");a.getActivationStart=p},2273798110:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6496036490),p=s(()=>d.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],"getNavigationEntry");a.getNavigationEntry=p},8451898068:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6496036490);let p=-1;const m=s(()=>{p=d.WINDOW.document.visibilityState==="hidden"&&!d.WINDOW.document.prerendering?0:1/0},"initHiddenTime"),g=s(n=>{d.WINDOW.document.visibilityState==="hidden"&&p>-1&&(p=n.type==="visibilitychange"?n.timeStamp:0,removeEventListener("visibilitychange",g,!0),removeEventListener("prerenderingchange",g,!0))},"onVisibilityUpdate"),l=s(()=>{addEventListener("visibilitychange",g,!0),addEventListener("prerenderingchange",g,!0)},"addChangeListeners"),r=s(()=>(d.WINDOW.document&&p<0&&(m(),l()),{get firstHiddenTime(){return p}}),"getVisibilityWatcher");a.getVisibilityWatcher=r},4479988250:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6496036490),p=c(8117347597),m=c(2520992508),g=c(2273798110),l=s((r,n)=>{const e=g.getNavigationEntry();let t="navigate";return e&&(d.WINDOW.document&&d.WINDOW.document.prerendering||m.getActivationStart()>0?t="prerender":d.WINDOW.document&&d.WINDOW.document.wasDiscarded?t="restore":e.type&&(t=e.type.replace(/_/g,"-"))),{name:r,value:typeof n>"u"?-1:n,rating:"good",delta:0,entries:[],id:p.generateUniqueID(),navigationType:t}},"initMetric");a.initMetric=l},9526061972:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=s((d,p,m)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(d)){const g=new PerformanceObserver(l=>{Promise.resolve().then(()=>{p(l.getEntries())})});return g.observe(Object.assign({type:d,buffered:!0},m||{})),g}}catch{}},"observe");a.observe=c},7603883117:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6496036490),p=s(m=>{const g=s(l=>{(l.type==="pagehide"||d.WINDOW.document&&d.WINDOW.document.visibilityState==="hidden")&&m(l)},"onHiddenOrPageHide");d.WINDOW.document&&(addEventListener("visibilitychange",g,!0),addEventListener("pagehide",g,!0))},"onHidden");a.onHidden=p},6842089089:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(9526061972);let p=0,m=1/0,g=0;const l=s(t=>{t.forEach(i=>{i.interactionId&&(m=Math.min(m,i.interactionId),g=Math.max(g,i.interactionId),p=g?(g-m)/7+1:0)})},"updateEstimate");let r;const n=s(()=>r?p:performance.interactionCount||0,"getInteractionCount"),e=s(()=>{"interactionCount"in performance||r||(r=d.observe("event",l,{type:"event",buffered:!0,durationThreshold:0}))},"initInteractionCountPolyfill");a.getInteractionCount=n,a.initInteractionCountPolyfill=e},7841494492:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=s(d=>{let p=!1;return m=>{p||(d(m),p=!0)}},"runOnce");a.runOnce=c},3420582863:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6496036490),p=s(m=>{d.WINDOW.document&&d.WINDOW.document.prerendering?addEventListener("prerenderingchange",()=>m(),!0):m()},"whenActivated");a.whenActivated=p},2741739498:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(9035861842),p=c(2520992508),m=c(8451898068),g=c(4479988250),l=c(9526061972),r=c(3420582863),n=[1800,3e3],e=s((t,i={})=>{r.whenActivated(()=>{const o=m.getVisibilityWatcher(),u=g.initMetric("FCP");let h;const S=s(v=>{v.forEach(E=>{E.name==="first-contentful-paint"&&(f.disconnect(),E.startTime<o.firstHiddenTime&&(u.value=Math.max(E.startTime-p.getActivationStart(),0),u.entries.push(E),h(!0)))})},"handleEntries"),f=l.observe("paint",S);f&&(h=d.bindReporter(t,u,n,i.reportAllChanges))})},"onFCP");a.FCPThresholds=n,a.onFCP=e},1514170081:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6496036490),p=c(9035861842),m=c(2520992508),g=c(2273798110),l=c(4479988250),r=c(3420582863),n=[800,1800],e=s(i=>{d.WINDOW.document&&d.WINDOW.document.prerendering?r.whenActivated(()=>e(i)):d.WINDOW.document&&d.WINDOW.document.readyState!=="complete"?addEventListener("load",()=>e(i),!0):setTimeout(i,0)},"whenReady"),t=s((i,o={})=>{const u=l.initMetric("TTFB"),h=p.bindReporter(i,u,n,o.reportAllChanges);e(()=>{const S=g.getNavigationEntry();if(S){const f=S.responseStart;if(f<=0||f>performance.now())return;u.value=Math.max(f-m.getActivationStart(),0),u.entries=[S],h(!0)}})},"onTTFB");a.TTFBThresholds=n,a.onTTFB=t},6049995776:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=p.GLOBAL_OBJ,g=m.document,l=m.navigator,r="Report a Bug",n="Cancel",e="Send Bug Report",t="Confirm",i="Report a Bug",o="your.email@example.org",u="Email",h="What's the bug? What did you expect?",S="Description",f="Your Name",v="Name",E="Thank you for your report!",_="(required)",T="Add a screenshot",w="Remove screenshot",M="widget",R="api",O=5e3,k=s((pe,Ce={includeReplay:!0})=>{if(!pe.message)throw new Error("Unable to submit feedback with empty message");const Le=d.getClient();if(!Le)throw new Error("No client setup, cannot send feedback.");const tt=d.captureFeedback({source:R,url:p.getLocationHref(),...pe},Ce);return new Promise((ct,pt)=>{const Zt=setTimeout(()=>pt("Unable to determine if Feedback was correctly sent."),5e3);Le.on("afterSendEvent",(an,ln)=>{if(an.event_id===tt){if(clearTimeout(Zt),ln&&typeof ln.statusCode=="number"&&(ln.statusCode<200||ln.statusCode>=300))return ln.statusCode===0?pt("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):pt("Unable to send Feedback. Invalid response from server.");ct(tt)}})})},"sendFeedback"),A=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function P(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(l.userAgent)||!isSecureContext)}s(P,"isScreenshotSupported");function D(pe,Ce){return{...pe,...Ce,onFormOpen:()=>{Ce.onFormOpen&&Ce.onFormOpen(),pe.onFormOpen&&pe.onFormOpen()},onFormClose:()=>{Ce.onFormClose&&Ce.onFormClose(),pe.onFormClose&&pe.onFormClose()},onSubmitSuccess:Le=>{Ce.onSubmitSuccess&&Ce.onSubmitSuccess(Le),pe.onSubmitSuccess&&pe.onSubmitSuccess(Le)},onSubmitError:Le=>{Ce.onSubmitError&&Ce.onSubmitError(Le),pe.onSubmitError&&pe.onSubmitError(Le)},onFormSubmitted:()=>{Ce.onFormSubmitted&&Ce.onFormSubmitted(),pe.onFormSubmitted&&pe.onFormSubmitted()},themeDark:{...pe.themeDark,...Ce.themeDark},themeLight:{...pe.themeLight,...Ce.themeLight}}}s(D,"mergeOptions");function H(){const pe=g.createElement("style");return pe.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,pe}s(H,"createActorStyles");function j(pe,Ce){return Object.entries(Ce).forEach(([Le,tt])=>{pe.setAttributeNS(null,Le,tt)}),pe}s(j,"setAttributesNS");const W=20,X="http://www.w3.org/2000/svg";function ee(){const pe=s(an=>m.document.createElementNS(X,an),"createElementNS"),Ce=j(pe("svg"),{width:`${W}`,height:`${W}`,viewBox:`0 0 ${W} ${W}`,fill:"var(--foreground)"}),Le=j(pe("g"),{clipPath:"url(#clip0_57_80)"}),tt=j(pe("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});Ce.appendChild(Le).appendChild(tt);const ct=pe("defs"),pt=j(pe("clipPath"),{id:"clip0_57_80"}),Zt=j(pe("rect"),{width:`${W}`,height:`${W}`,fill:"white"});return pt.appendChild(Zt),ct.appendChild(pt),Ce.appendChild(ct).appendChild(pt).appendChild(Zt),Ce}s(ee,"FeedbackIcon");function fe({triggerLabel:pe,shadow:Ce}){const Le=g.createElement("button");if(Le.type="button",Le.className="widget__actor",Le.ariaHidden="false",Le.ariaLabel=pe,Le.appendChild(ee()),pe){const ct=g.createElement("span");ct.appendChild(g.createTextNode(pe)),Le.appendChild(ct)}const tt=H();return{el:Le,appendToDom(){Ce.appendChild(tt),Ce.appendChild(Le)},removeFromDom(){Ce.removeChild(Le),Ce.removeChild(tt)},show(){Le.ariaHidden="false"},hide(){Le.ariaHidden="true"}}}s(fe,"Actor");const oe="rgba(88, 74, 192, 1)",Oe={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:oe,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Xe={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:oe,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(41, 35, 47, 0.5)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function ge(pe){return`
  --foreground: ${pe.foreground};
  --background: ${pe.background};
  --accent-foreground: ${pe.accentForeground};
  --accent-background: ${pe.accentBackground};
  --success-color: ${pe.successColor};
  --error-color: ${pe.errorColor};
  --border: ${pe.border};
  --box-shadow: ${pe.boxShadow};
  --outline: ${pe.outline};
  --interactive-filter: ${pe.interactiveFilter};
  `}s(ge,"getThemedCssVariables");function Me({colorScheme:pe,themeDark:Ce,themeLight:Le}){const tt=g.createElement("style");return tt.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${ge(pe==="dark"?{...Xe,...Ce}:{...Oe,...Le})}
}

${pe==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${ge({...Xe,...Ce})}
  }
}`:""}
}
`,tt}s(Me,"createMainStyles");const $e=s(({lazyLoadIntegration:pe,getModalIntegration:Ce,getScreenshotIntegration:Le})=>s(({id:ct="sentry-feedback",showBranding:pt=!0,autoInject:Zt=!0,showEmail:an=!0,showName:ln=!0,enableScreenshot:Gt=!0,useSentryUser:Fn={email:"email",name:"username"},isNameRequired:bt=!1,isEmailRequired:oi=!1,colorScheme:mn="system",themeLight:yi={},themeDark:zi={},addScreenshotButtonLabel:Ri=T,cancelButtonLabel:Sn=n,confirmButtonLabel:Tn=t,emailLabel:Kn=u,emailPlaceholder:Si=o,formTitle:lr=i,isRequiredLabel:mr=_,messageLabel:jn=S,messagePlaceholder:Lr=h,nameLabel:Ii=v,namePlaceholder:gr=f,removeScreenshotButtonLabel:lo=w,submitButtonLabel:bo=e,successMessageText:Zr=E,triggerLabel:co=r,onFormOpen:oo,onFormClose:So,onSubmitSuccess:br,onSubmitError:zr,onFormSubmitted:uo}={})=>{const Xi={id:ct,autoInject:Zt,showBranding:pt,isEmailRequired:oi,isNameRequired:bt,showEmail:an,showName:ln,enableScreenshot:Gt,useSentryUser:Fn,colorScheme:mn,themeDark:zi,themeLight:yi,triggerLabel:co,cancelButtonLabel:Sn,submitButtonLabel:bo,confirmButtonLabel:Tn,formTitle:lr,emailLabel:Kn,emailPlaceholder:Si,messageLabel:jn,messagePlaceholder:Lr,nameLabel:Ii,namePlaceholder:gr,successMessageText:Zr,isRequiredLabel:mr,addScreenshotButtonLabel:Ri,removeScreenshotButtonLabel:lo,onFormClose:So,onFormOpen:oo,onSubmitError:zr,onSubmitSuccess:br,onFormSubmitted:uo};let xr=null,vo=[];const qr=s(Ji=>{if(!xr){const fr=g.createElement("div");fr.id=String(Ji.id),g.body.appendChild(fr),xr=fr.attachShadow({mode:"open"}),xr.appendChild(Me(Ji))}return xr},"_createShadow"),_o=s(async(Ji,fr,Sr)=>{const vr=d.getClient(),_r=vr&&vr.getIntegrationByName(Ji);if(_r)return _r;const no=(fr&&fr()||await pe(Sr))();return vr&&vr.addIntegration(no),no},"_findIntegration"),Bo=s(async Ji=>{const fr=Ji.enableScreenshot&&P(),[Sr,vr]=await Promise.all([_o("FeedbackModal",Ce,"feedbackModalIntegration"),fr?_o("FeedbackScreenshot",Le,"feedbackScreenshotIntegration"):void 0]);if(!Sr)throw A&&p.logger.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");return fr&&!vr&&A&&p.logger.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots."),Sr.createDialog({options:Ji,screenshotIntegration:fr?vr:void 0,sendFeedback:k,shadow:qr(Ji)})},"_loadAndRenderDialog"),Xo=s((Ji,fr={})=>{const Sr=D(Xi,fr),vr=typeof Ji=="string"?g.querySelector(Ji):typeof Ji.addEventListener=="function"?Ji:null;if(!vr)throw A&&p.logger.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let _r=null;const Mo=s(async()=>{_r||(_r=await Bo({...Sr,onFormClose:()=>{_r&&_r.close(),Sr.onFormClose&&Sr.onFormClose()},onFormSubmitted:()=>{_r&&_r.removeFromDom(),Sr.onFormSubmitted&&Sr.onFormSubmitted()}})),_r.appendToDom(),_r.open()},"handleClick");vr.addEventListener("click",Mo);const no=s(()=>{vo=vo.filter(Mr=>Mr!==no),_r&&_r.removeFromDom(),_r=null,vr.removeEventListener("click",Mo)},"unsubscribe");return vo.push(no),no},"_attachTo"),Fo=s((Ji={})=>{const fr=qr(Xi),Sr=fe({triggerLabel:Xi.triggerLabel,shadow:fr}),vr=D(Xi,{...Ji,onFormOpen(){Sr.hide()},onFormClose(){Sr.show()},onFormSubmitted(){Sr.show()}});return Xo(Sr.el,vr),Sr},"_createActor");return{name:"Feedback",setupOnce(){!p.isBrowser()||!Xi.autoInject||Fo().appendToDom()},attachTo:Xo,createWidget(Ji={}){const fr=Fo(D(Xi,Ji));return fr.appendToDom(),fr},async createForm(Ji={}){return Bo(D(Xi,Ji))},remove(){xr&&(xr.parentElement&&xr.parentElement.remove(),xr=null),vo.forEach(Ji=>Ji()),vo=[]}}},"feedbackIntegration"),"buildFeedbackIntegration");function ze(){const pe=d.getClient();return pe&&pe.getIntegrationByName("Feedback")}s(ze,"getFeedback");var nt,mt,gt,Pe,xe,Ye,Ze,Re={},Tt=[],rt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nt=Array.isArray;function Wt(pe,Ce){for(var Le in Ce)pe[Le]=Ce[Le];return pe}s(Wt,"v$1");function Qt(pe){var Ce=pe.parentNode;Ce&&Ce.removeChild(pe)}s(Qt,"p$1");function Ot(pe,Ce,Le){var tt,ct,pt,Zt={};for(pt in Ce)pt=="key"?tt=Ce[pt]:pt=="ref"?ct=Ce[pt]:Zt[pt]=Ce[pt];if(arguments.length>2&&(Zt.children=arguments.length>3?nt.call(arguments,2):Le),typeof pe=="function"&&pe.defaultProps!=null)for(pt in pe.defaultProps)Zt[pt]===void 0&&(Zt[pt]=pe.defaultProps[pt]);return hn(pe,Zt,tt,ct,null)}s(Ot,"y$1");function hn(pe,Ce,Le,tt,ct){var pt={type:pe,props:Ce,key:Le,ref:tt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:ct??++gt,__i:-1,__u:0};return ct==null&&mt.vnode!=null&&mt.vnode(pt),pt}s(hn,"d$1");function fi(pe){return pe.children}s(fi,"g");function wn(pe,Ce){this.props=pe,this.context=Ce}s(wn,"b");function Jt(pe,Ce){if(Ce==null)return pe.__?Jt(pe.__,pe.__i+1):null;for(var Le;Ce<pe.__k.length;Ce++)if((Le=pe.__k[Ce])!=null&&Le.__e!=null)return Le.__e;return typeof pe.type=="function"?Jt(pe):null}s(Jt,"m$1");function on(pe,Ce,Le){var tt,ct=pe.__v,pt=ct.__e,Zt=pe.__P;if(Zt)return(tt=Wt({},ct)).__v=ct.__v+1,mt.vnode&&mt.vnode(tt),de(Zt,tt,ct,pe.__n,Zt.ownerSVGElement!==void 0,32&ct.__u?[pt]:null,Ce,pt??Jt(ct),!!(32&ct.__u),Le),tt.__.__k[tt.__i]=tt,tt.__d=void 0,tt.__e!=pt&&kt(tt),tt}s(on,"w$1");function kt(pe){var Ce,Le;if((pe=pe.__)!=null&&pe.__c!=null){for(pe.__e=pe.__c.base=null,Ce=0;Ce<pe.__k.length;Ce++)if((Le=pe.__k[Ce])!=null&&Le.__e!=null){pe.__e=pe.__c.base=Le.__e;break}return kt(pe)}}s(kt,"k$1");function $t(pe){(!pe.__d&&(pe.__d=!0)&&Pe.push(pe)&&!en.__r++||xe!==mt.debounceRendering)&&((xe=mt.debounceRendering)||Ye)(en)}s($t,"x$1");function en(){var pe,Ce,Le,tt=[],ct=[];for(Pe.sort(Ze);pe=Pe.shift();)pe.__d&&(Le=Pe.length,Ce=on(pe,tt,ct)||Ce,Le===0||Pe.length>Le?(Ue(tt,Ce,ct),ct.length=tt.length=0,Ce=void 0,Pe.sort(Ze)):Ce&&mt.__c&&mt.__c(Ce,Tt));Ce&&Ue(tt,Ce,ct),en.__r=0}s(en,"C$1");function zt(pe,Ce,Le,tt,ct,pt,Zt,an,ln,Gt,Fn){var bt,oi,mn,yi,zi,Ri=tt&&tt.__k||Tt,Sn=Ce.length;for(Le.__d=ln,Kt(Le,Ce,Ri),ln=Le.__d,bt=0;bt<Sn;bt++)(mn=Le.__k[bt])!=null&&typeof mn!="boolean"&&typeof mn!="function"&&(oi=mn.__i===-1?Re:Ri[mn.__i]||Re,mn.__i=bt,de(pe,mn,oi,ct,pt,Zt,an,ln,Gt,Fn),yi=mn.__e,mn.ref&&oi.ref!=mn.ref&&(oi.ref&&q(oi.ref,null,mn),Fn.push(mn.ref,mn.__c||yi,mn)),zi==null&&yi!=null&&(zi=yi),65536&mn.__u||oi.__k===mn.__k?ln=Q(mn,ln,pe):typeof mn.type=="function"&&mn.__d!==void 0?ln=mn.__d:yi&&(ln=yi.nextSibling),mn.__d=void 0,mn.__u&=-196609);Le.__d=ln,Le.__e=zi}s(zt,"P");function Kt(pe,Ce,Le){var tt,ct,pt,Zt,an,ln=Ce.length,Gt=Le.length,Fn=Gt,bt=0;for(pe.__k=[],tt=0;tt<ln;tt++)(ct=pe.__k[tt]=(ct=Ce[tt])==null||typeof ct=="boolean"||typeof ct=="function"?null:typeof ct=="string"||typeof ct=="number"||typeof ct=="bigint"||ct.constructor==String?hn(null,ct,null,null,ct):Nt(ct)?hn(fi,{children:ct},null,null,null):ct.constructor===void 0&&ct.__b>0?hn(ct.type,ct.props,ct.key,ct.ref?ct.ref:null,ct.__v):ct)!=null?(ct.__=pe,ct.__b=pe.__b+1,an=Ve(ct,Le,Zt=tt+bt,Fn),ct.__i=an,pt=null,an!==-1&&(Fn--,(pt=Le[an])&&(pt.__u|=131072)),pt==null||pt.__v===null?(an==-1&&bt--,typeof ct.type!="function"&&(ct.__u|=65536)):an!==Zt&&(an===Zt+1?bt++:an>Zt?Fn>ln-Zt?bt+=an-Zt:bt--:bt=an<Zt&&an==Zt-1?an-Zt:0,an!==tt+bt&&(ct.__u|=65536))):(pt=Le[tt])&&pt.key==null&&pt.__e&&(pt.__e==pe.__d&&(pe.__d=Jt(pt)),Ee(pt,pt,!1),Le[tt]=null,Fn--);if(Fn)for(tt=0;tt<Gt;tt++)(pt=Le[tt])!=null&&!(131072&pt.__u)&&(pt.__e==pe.__d&&(pe.__d=Jt(pt)),Ee(pt,pt))}s(Kt,"S");function Q(pe,Ce,Le){var tt,ct;if(typeof pe.type=="function"){for(tt=pe.__k,ct=0;tt&&ct<tt.length;ct++)tt[ct]&&(tt[ct].__=pe,Ce=Q(tt[ct],Ce,Le));return Ce}pe.__e!=Ce&&(Le.insertBefore(pe.__e,Ce||null),Ce=pe.__e);do Ce=Ce&&Ce.nextSibling;while(Ce!=null&&Ce.nodeType===8);return Ce}s(Q,"$");function Ve(pe,Ce,Le,tt){var ct=pe.key,pt=pe.type,Zt=Le-1,an=Le+1,ln=Ce[Le];if(ln===null||ln&&ct==ln.key&&pt===ln.type)return Le;if(tt>(ln!=null&&!(131072&ln.__u)?1:0))for(;Zt>=0||an<Ce.length;){if(Zt>=0){if((ln=Ce[Zt])&&!(131072&ln.__u)&&ct==ln.key&&pt===ln.type)return Zt;Zt--}if(an<Ce.length){if((ln=Ce[an])&&!(131072&ln.__u)&&ct==ln.key&&pt===ln.type)return an;an++}}return-1}s(Ve,"I");function Be(pe,Ce,Le){Ce[0]==="-"?pe.setProperty(Ce,Le??""):pe[Ce]=Le==null?"":typeof Le!="number"||rt.test(Ce)?Le:Le+"px"}s(Be,"T");function Je(pe,Ce,Le,tt,ct){var pt;e:if(Ce==="style")if(typeof Le=="string")pe.style.cssText=Le;else{if(typeof tt=="string"&&(pe.style.cssText=tt=""),tt)for(Ce in tt)Le&&Ce in Le||Be(pe.style,Ce,"");if(Le)for(Ce in Le)tt&&Le[Ce]===tt[Ce]||Be(pe.style,Ce,Le[Ce])}else if(Ce[0]==="o"&&Ce[1]==="n")pt=Ce!==(Ce=Ce.replace(/(PointerCapture)$|Capture$/i,"$1")),Ce=Ce.toLowerCase()in pe?Ce.toLowerCase().slice(2):Ce.slice(2),pe.l||(pe.l={}),pe.l[Ce+pt]=Le,Le?tt?Le.u=tt.u:(Le.u=Date.now(),pe.addEventListener(Ce,pt?ot:ut,pt)):pe.removeEventListener(Ce,pt?ot:ut,pt);else{if(ct)Ce=Ce.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(Ce!=="width"&&Ce!=="height"&&Ce!=="href"&&Ce!=="list"&&Ce!=="form"&&Ce!=="tabIndex"&&Ce!=="download"&&Ce!=="rowSpan"&&Ce!=="colSpan"&&Ce!=="role"&&Ce in pe)try{pe[Ce]=Le??"";break e}catch{}typeof Le=="function"||(Le==null||Le===!1&&Ce[4]!=="-"?pe.removeAttribute(Ce):pe.setAttribute(Ce,Le))}}s(Je,"A");function ut(pe){if(this.l){var Ce=this.l[pe.type+!1];if(pe.t){if(pe.t<=Ce.u)return}else pe.t=Date.now();return Ce(mt.event?mt.event(pe):pe)}}s(ut,"D$1");function ot(pe){if(this.l)return this.l[pe.type+!0](mt.event?mt.event(pe):pe)}s(ot,"L");function de(pe,Ce,Le,tt,ct,pt,Zt,an,ln,Gt){var Fn,bt,oi,mn,yi,zi,Ri,Sn,Tn,Kn,Si,lr,mr,jn,Lr,Ii=Ce.type;if(Ce.constructor!==void 0)return null;128&Le.__u&&(ln=!!(32&Le.__u),pt=[an=Ce.__e=Le.__e]),(Fn=mt.__b)&&Fn(Ce);e:if(typeof Ii=="function")try{if(Sn=Ce.props,Tn=(Fn=Ii.contextType)&&tt[Fn.__c],Kn=Fn?Tn?Tn.props.value:Fn.__:tt,Le.__c?Ri=(bt=Ce.__c=Le.__c).__=bt.__E:("prototype"in Ii&&Ii.prototype.render?Ce.__c=bt=new Ii(Sn,Kn):(Ce.__c=bt=new wn(Sn,Kn),bt.constructor=Ii,bt.render=be),Tn&&Tn.sub(bt),bt.props=Sn,bt.state||(bt.state={}),bt.context=Kn,bt.__n=tt,oi=bt.__d=!0,bt.__h=[],bt._sb=[]),bt.__s==null&&(bt.__s=bt.state),Ii.getDerivedStateFromProps!=null&&(bt.__s==bt.state&&(bt.__s=Wt({},bt.__s)),Wt(bt.__s,Ii.getDerivedStateFromProps(Sn,bt.__s))),mn=bt.props,yi=bt.state,bt.__v=Ce,oi)Ii.getDerivedStateFromProps==null&&bt.componentWillMount!=null&&bt.componentWillMount(),bt.componentDidMount!=null&&bt.__h.push(bt.componentDidMount);else{if(Ii.getDerivedStateFromProps==null&&Sn!==mn&&bt.componentWillReceiveProps!=null&&bt.componentWillReceiveProps(Sn,Kn),!bt.__e&&(bt.shouldComponentUpdate!=null&&bt.shouldComponentUpdate(Sn,bt.__s,Kn)===!1||Ce.__v===Le.__v)){for(Ce.__v!==Le.__v&&(bt.props=Sn,bt.state=bt.__s,bt.__d=!1),Ce.__e=Le.__e,Ce.__k=Le.__k,Ce.__k.forEach(function(gr){gr&&(gr.__=Ce)}),Si=0;Si<bt._sb.length;Si++)bt.__h.push(bt._sb[Si]);bt._sb=[],bt.__h.length&&Zt.push(bt);break e}bt.componentWillUpdate!=null&&bt.componentWillUpdate(Sn,bt.__s,Kn),bt.componentDidUpdate!=null&&bt.__h.push(function(){bt.componentDidUpdate(mn,yi,zi)})}if(bt.context=Kn,bt.props=Sn,bt.__P=pe,bt.__e=!1,lr=mt.__r,mr=0,"prototype"in Ii&&Ii.prototype.render){for(bt.state=bt.__s,bt.__d=!1,lr&&lr(Ce),Fn=bt.render(bt.props,bt.state,bt.context),jn=0;jn<bt._sb.length;jn++)bt.__h.push(bt._sb[jn]);bt._sb=[]}else do bt.__d=!1,lr&&lr(Ce),Fn=bt.render(bt.props,bt.state,bt.context),bt.state=bt.__s;while(bt.__d&&++mr<25);bt.state=bt.__s,bt.getChildContext!=null&&(tt=Wt(Wt({},tt),bt.getChildContext())),oi||bt.getSnapshotBeforeUpdate==null||(zi=bt.getSnapshotBeforeUpdate(mn,yi)),zt(pe,Nt(Lr=Fn!=null&&Fn.type===fi&&Fn.key==null?Fn.props.children:Fn)?Lr:[Lr],Ce,Le,tt,ct,pt,Zt,an,ln,Gt),bt.base=Ce.__e,Ce.__u&=-161,bt.__h.length&&Zt.push(bt),Ri&&(bt.__E=bt.__=null)}catch(gr){Ce.__v=null,ln||pt!=null?(Ce.__e=an,Ce.__u|=ln?160:32,pt[pt.indexOf(an)]=null):(Ce.__e=Le.__e,Ce.__k=Le.__k),mt.__e(gr,Ce,Le)}else pt==null&&Ce.__v===Le.__v?(Ce.__k=Le.__k,Ce.__e=Le.__e):Ce.__e=K(Le.__e,Ce,Le,tt,ct,pt,Zt,ln,Gt);(Fn=mt.diffed)&&Fn(Ce)}s(de,"M");function Ue(pe,Ce,Le){for(var tt=0;tt<Le.length;tt++)q(Le[tt],Le[++tt],Le[++tt]);mt.__c&&mt.__c(Ce,pe),pe.some(function(ct){try{pe=ct.__h,ct.__h=[],pe.some(function(pt){pt.call(ct)})}catch(pt){mt.__e(pt,ct.__v)}})}s(Ue,"j$1");function K(pe,Ce,Le,tt,ct,pt,Zt,an,ln){var Gt,Fn,bt,oi,mn,yi,zi,Ri=Le.props,Sn=Ce.props,Tn=Ce.type;if(Tn==="svg"&&(ct=!0),pt!=null){for(Gt=0;Gt<pt.length;Gt++)if((mn=pt[Gt])&&"setAttribute"in mn==!!Tn&&(Tn?mn.localName===Tn:mn.nodeType===3)){pe=mn,pt[Gt]=null;break}}if(pe==null){if(Tn===null)return document.createTextNode(Sn);pe=ct?document.createElementNS("http://www.w3.org/2000/svg",Tn):document.createElement(Tn,Sn.is&&Sn),pt=null,an=!1}if(Tn===null)Ri===Sn||an&&pe.data===Sn||(pe.data=Sn);else{if(pt=pt&&nt.call(pe.childNodes),Ri=Le.props||Re,!an&&pt!=null)for(Ri={},Gt=0;Gt<pe.attributes.length;Gt++)Ri[(mn=pe.attributes[Gt]).name]=mn.value;for(Gt in Ri)mn=Ri[Gt],Gt=="children"||(Gt=="dangerouslySetInnerHTML"?bt=mn:Gt==="key"||Gt in Sn||Je(pe,Gt,null,mn,ct));for(Gt in Sn)mn=Sn[Gt],Gt=="children"?oi=mn:Gt=="dangerouslySetInnerHTML"?Fn=mn:Gt=="value"?yi=mn:Gt=="checked"?zi=mn:Gt==="key"||an&&typeof mn!="function"||Ri[Gt]===mn||Je(pe,Gt,mn,Ri[Gt],ct);if(Fn)an||bt&&(Fn.__html===bt.__html||Fn.__html===pe.innerHTML)||(pe.innerHTML=Fn.__html),Ce.__k=[];else if(bt&&(pe.innerHTML=""),zt(pe,Nt(oi)?oi:[oi],Ce,Le,tt,ct&&Tn!=="foreignObject",pt,Zt,pt?pt[0]:Le.__k&&Jt(Le,0),an,ln),pt!=null)for(Gt=pt.length;Gt--;)pt[Gt]!=null&&Qt(pt[Gt]);an||(Gt="value",yi!==void 0&&(yi!==pe[Gt]||Tn==="progress"&&!yi||Tn==="option"&&yi!==Ri[Gt])&&Je(pe,Gt,yi,Ri[Gt],!1),Gt="checked",zi!==void 0&&zi!==pe[Gt]&&Je(pe,Gt,zi,Ri[Gt],!1))}return pe}s(K,"z$1");function q(pe,Ce,Le){try{typeof pe=="function"?pe(Ce):pe.current=Ce}catch(tt){mt.__e(tt,Le)}}s(q,"N");function Ee(pe,Ce,Le){var tt,ct;if(mt.unmount&&mt.unmount(pe),(tt=pe.ref)&&(tt.current&&tt.current!==pe.__e||q(tt,null,Ce)),(tt=pe.__c)!=null){if(tt.componentWillUnmount)try{tt.componentWillUnmount()}catch(pt){mt.__e(pt,Ce)}tt.base=tt.__P=null,pe.__c=void 0}if(tt=pe.__k)for(ct=0;ct<tt.length;ct++)tt[ct]&&Ee(tt[ct],Ce,Le||typeof pe.type!="function");Le||pe.__e==null||Qt(pe.__e),pe.__=pe.__e=pe.__d=void 0}s(Ee,"O");function be(pe,Ce,Le){return this.constructor(pe,Le)}s(be,"q$1");function it(pe,Ce,Le){var tt,ct,pt,Zt;mt.__&&mt.__(pe,Ce),ct=(tt=typeof Le=="function")?null:Le&&Le.__k||Ce.__k,pt=[],Zt=[],de(Ce,pe=(!tt&&Le||Ce).__k=Ot(fi,null,[pe]),ct||Re,Re,Ce.ownerSVGElement!==void 0,!tt&&Le?[Le]:ct?null:Ce.firstChild?nt.call(Ce.childNodes):null,pt,!tt&&Le?Le:ct?ct.__e:Ce.firstChild,tt,Zt),pe.__d=void 0,Ue(pt,pe,Zt)}s(it,"B$1"),nt=Tt.slice,mt={__e:function(pe,Ce,Le,tt){for(var ct,pt,Zt;Ce=Ce.__;)if((ct=Ce.__c)&&!ct.__)try{if((pt=ct.constructor)&&pt.getDerivedStateFromError!=null&&(ct.setState(pt.getDerivedStateFromError(pe)),Zt=ct.__d),ct.componentDidCatch!=null&&(ct.componentDidCatch(pe,tt||{}),Zt=ct.__d),Zt)return ct.__E=ct}catch(an){pe=an}throw pe}},gt=0,wn.prototype.setState=function(pe,Ce){var Le;Le=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Wt({},this.state),typeof pe=="function"&&(pe=pe(Wt({},Le),this.props)),pe&&Wt(Le,pe),pe!=null&&this.__v&&(Ce&&this._sb.push(Ce),$t(this))},wn.prototype.forceUpdate=function(pe){this.__v&&(this.__e=!0,pe&&this.__h.push(pe),$t(this))},wn.prototype.render=fi,Pe=[],Ye=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ze=s(function(pe,Ce){return pe.__v.__b-Ce.__v.__b},"f$1"),en.__r=0;var He,Qe,Se,Ae,L=0,ve=[],_e=[],Ie=mt,ne=Ie.__b,Ft=Ie.__r,qe=Ie.diffed,ft=Ie.__c,En=Ie.unmount,xt=Ie.__;function Ui(pe,Ce){Ie.__h&&Ie.__h(Qe,pe,L||Ce),L=0;var Le=Qe.__H||(Qe.__H={__:[],__h:[]});return pe>=Le.__.length&&Le.__.push({__V:_e}),Le.__[pe]}s(Ui,"h");function _i(pe){return L=1,bn(li,pe)}s(_i,"p");function bn(pe,Ce,Le){var tt=Ui(He++,2);if(tt.t=pe,!tt.__c&&(tt.__=[Le?Le(Ce):li(void 0,Ce),function(an){var ln=tt.__N?tt.__N[0]:tt.__[0],Gt=tt.t(ln,an);ln!==Gt&&(tt.__N=[Gt,tt.__[1]],tt.__c.setState({}))}],tt.__c=Qe,!Qe.u)){var ct=s(function(an,ln,Gt){if(!tt.__c.__H)return!0;var Fn=tt.__c.__H.__.filter(function(oi){return!!oi.__c});if(Fn.every(function(oi){return!oi.__N}))return!pt||pt.call(this,an,ln,Gt);var bt=!1;return Fn.forEach(function(oi){if(oi.__N){var mn=oi.__[0];oi.__=oi.__N,oi.__N=void 0,mn!==oi.__[0]&&(bt=!0)}}),!(!bt&&tt.__c.props===an)&&(!pt||pt.call(this,an,ln,Gt))},"f");Qe.u=!0;var pt=Qe.shouldComponentUpdate,Zt=Qe.componentWillUpdate;Qe.componentWillUpdate=function(an,ln,Gt){if(this.__e){var Fn=pt;pt=void 0,ct(an,ln,Gt),pt=Fn}Zt&&Zt.call(this,an,ln,Gt)},Qe.shouldComponentUpdate=ct}return tt.__N||tt.__}s(bn,"y");function zn(pe,Ce){var Le=Ui(He++,3);!Ie.__s&&Bn(Le.__H,Ce)&&(Le.__=pe,Le.i=Ce,Qe.__H.__h.push(Le))}s(zn,"_");function gn(pe){return L=5,gi(function(){return{current:pe}},[])}s(gn,"F");function gi(pe,Ce){var Le=Ui(He++,7);return Bn(Le.__H,Ce)?(Le.__V=pe(),Le.i=Ce,Le.__h=pe,Le.__V):Le.__}s(gi,"q");function ai(pe,Ce){return L=8,gi(function(){return pe},Ce)}s(ai,"x");function yr(){for(var pe;pe=ve.shift();)if(pe.__P&&pe.__H)try{pe.__H.__h.forEach(On),pe.__H.__h.forEach(nn),pe.__H.__h=[]}catch(Ce){pe.__H.__h=[],Ie.__e(Ce,pe.__v)}}s(yr,"j"),Ie.__b=function(pe){Qe=null,ne&&ne(pe)},Ie.__=function(pe,Ce){Ce.__k&&Ce.__k.__m&&(pe.__m=Ce.__k.__m),xt&&xt(pe,Ce)},Ie.__r=function(pe){Ft&&Ft(pe),He=0;var Ce=(Qe=pe.__c).__H;Ce&&(Se===Qe?(Ce.__h=[],Qe.__h=[],Ce.__.forEach(function(Le){Le.__N&&(Le.__=Le.__N),Le.__V=_e,Le.__N=Le.i=void 0})):(Ce.__h.forEach(On),Ce.__h.forEach(nn),Ce.__h=[],He=0)),Se=Qe},Ie.diffed=function(pe){qe&&qe(pe);var Ce=pe.__c;Ce&&Ce.__H&&(Ce.__H.__h.length&&(ve.push(Ce)!==1&&Ae===Ie.requestAnimationFrame||((Ae=Ie.requestAnimationFrame)||Et)(yr)),Ce.__H.__.forEach(function(Le){Le.i&&(Le.__H=Le.i),Le.__V!==_e&&(Le.__=Le.__V),Le.i=void 0,Le.__V=_e})),Se=Qe=null},Ie.__c=function(pe,Ce){Ce.some(function(Le){try{Le.__h.forEach(On),Le.__h=Le.__h.filter(function(tt){return!tt.__||nn(tt)})}catch(tt){Ce.some(function(ct){ct.__h&&(ct.__h=[])}),Ce=[],Ie.__e(tt,Le.__v)}}),ft&&ft(pe,Ce)},Ie.unmount=function(pe){En&&En(pe);var Ce,Le=pe.__c;Le&&Le.__H&&(Le.__H.__.forEach(function(tt){try{On(tt)}catch(ct){Ce=ct}}),Le.__H=void 0,Ce&&Ie.__e(Ce,Le.__v))};var Bt=typeof requestAnimationFrame=="function";function Et(pe){var Ce,Le=s(function(){clearTimeout(tt),Bt&&cancelAnimationFrame(Ce),setTimeout(pe)},"r"),tt=setTimeout(Le,100);Bt&&(Ce=requestAnimationFrame(Le))}s(Et,"w");function On(pe){var Ce=Qe,Le=pe.__c;typeof Le=="function"&&(pe.__c=void 0,Le()),Qe=Ce}s(On,"z");function nn(pe){var Ce=Qe;pe.__c=pe.__(),Qe=Ce}s(nn,"B");function Bn(pe,Ce){return!pe||pe.length!==Ce.length||Ce.some(function(Le,tt){return Le!==pe[tt]})}s(Bn,"C");function li(pe,Ce){return typeof Ce=="function"?Ce(pe):Ce}s(li,"D");const ui="http://www.w3.org/2000/svg";function Gn(){const pe=s(tt=>g.createElementNS(ui,tt),"createElementNS"),Ce=j(pe("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),Le=j(pe("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return Ce.appendChild(Le),Ce}s(Gn,"SentryLogo");const Yn="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function Ci({options:pe}){const Ce=gi(()=>({__html:Gn().outerHTML}),[]);return Ot("h2",{class:"dialog__header",__self:this,__source:{fileName:Yn,lineNumber:16}},pe.formTitle,pe.showBranding?Ot("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:Ce,__self:this,__source:{fileName:Yn,lineNumber:19}}):null)}s(Ci,"DialogHeader");function Ti(pe,Ce){const Le=[];return Ce.isNameRequired&&!pe.name&&Le.push(Ce.nameLabel),Ce.isEmailRequired&&!pe.email&&Le.push(Ce.emailLabel),pe.message||Le.push(Ce.messageLabel),Le}s(Ti,"getMissingFields");const Un="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function U(pe,Ce){const Le=pe.get(Ce);return typeof Le=="string"?Le.trim():""}s(U,"retrieveStringValue");function ce({options:pe,defaultEmail:Ce,defaultName:Le,onFormClose:tt,onSubmit:ct,onSubmitSuccess:pt,onSubmitError:Zt,showEmail:an,showName:ln,screenshotInput:Gt}){const{addScreenshotButtonLabel:Fn,removeScreenshotButtonLabel:bt,cancelButtonLabel:oi,emailLabel:mn,emailPlaceholder:yi,isEmailRequired:zi,isNameRequired:Ri,messageLabel:Sn,messagePlaceholder:Tn,nameLabel:Kn,namePlaceholder:Si,submitButtonLabel:lr,isRequiredLabel:mr}=pe,[jn,Lr]=_i(null),[Ii,gr]=_i(!1),lo=Gt&&Gt.input,[bo,Zr]=_i(null),co=ai(br=>{Zr(br),gr(!1)},[]),oo=ai(br=>{const zr=Ti(br,{emailLabel:mn,isEmailRequired:zi,isNameRequired:Ri,messageLabel:Sn,nameLabel:Kn});return zr.length>0?Lr(`Please enter in the following required fields: ${zr.join(", ")}`):Lr(null),zr.length===0},[mn,zi,Ri,Sn,Kn]),So=ai(async br=>{try{if(br.preventDefault(),!(br.target instanceof HTMLFormElement))return;const zr=new FormData(br.target),uo=await(Gt&&Ii?Gt.value():void 0),Xi={name:U(zr,"name"),email:U(zr,"email"),message:U(zr,"message"),attachments:uo?[uo]:void 0};if(!oo(Xi))return;try{await ct({name:Xi.name,email:Xi.email,message:Xi.message,source:M},{attachments:Xi.attachments}),pt(Xi)}catch(xr){A&&p.logger.error(xr),Lr("There was a problem submitting feedback, please wait and try again."),Zt(xr)}}catch{}},[Gt&&Ii,pt,Zt]);return Ot("form",{class:"form",onSubmit:So,__self:this,__source:{fileName:Un,lineNumber:142}},lo&&Ii?Ot(lo,{onError:co,__self:this,__source:{fileName:Un,lineNumber:144}}):null,Ot("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:Un,lineNumber:147}},Ot("div",{class:"form__top",__self:this,__source:{fileName:Un,lineNumber:148}},jn?Ot("div",{class:"form__error-container",__self:this,__source:{fileName:Un,lineNumber:149}},jn):null,ln?Ot("label",{for:"name",class:"form__label",__self:this,__source:{fileName:Un,lineNumber:152}},Ot(Fe,{label:Kn,isRequiredLabel:mr,isRequired:Ri,__self:this,__source:{fileName:Un,lineNumber:153}}),Ot("input",{class:"form__input",defaultValue:Le,id:"name",name:"name",placeholder:Si,required:Ri,type:"text",__self:this,__source:{fileName:Un,lineNumber:154}})):Ot("input",{"aria-hidden":!0,value:Le,name:"name",type:"hidden",__self:this,__source:{fileName:Un,lineNumber:165}}),an?Ot("label",{for:"email",class:"form__label",__self:this,__source:{fileName:Un,lineNumber:169}},Ot(Fe,{label:mn,isRequiredLabel:mr,isRequired:zi,__self:this,__source:{fileName:Un,lineNumber:170}}),Ot("input",{class:"form__input",defaultValue:Ce,id:"email",name:"email",placeholder:yi,required:zi,type:"email",__self:this,__source:{fileName:Un,lineNumber:171}})):Ot("input",{"aria-hidden":!0,value:Ce,name:"email",type:"hidden",__self:this,__source:{fileName:Un,lineNumber:182}}),Ot("label",{for:"message",class:"form__label",__self:this,__source:{fileName:Un,lineNumber:185}},Ot(Fe,{label:Sn,isRequiredLabel:mr,isRequired:!0,__self:this,__source:{fileName:Un,lineNumber:186}}),Ot("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:Tn,required:!0,rows:5,__self:this,__source:{fileName:Un,lineNumber:187}})),lo?Ot("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:Un,lineNumber:199}},Ot("button",{class:"btn btn--default",type:"button",onClick:()=>{Zr(null),gr(br=>!br)},__self:this,__source:{fileName:Un,lineNumber:200}},Ii?bt:Fn),bo?Ot("div",{class:"form__error-container",__self:this,__source:{fileName:Un,lineNumber:210}},bo.message):null):null),Ot("div",{class:"btn-group",__self:this,__source:{fileName:Un,lineNumber:214}},Ot("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:Un,lineNumber:215}},lr),Ot("button",{class:"btn btn--default",type:"button",onClick:tt,__self:this,__source:{fileName:Un,lineNumber:218}},oi))))}s(ce,"Form");function Fe({label:pe,isRequired:Ce,isRequiredLabel:Le}){return Ot("span",{class:"form__label__text",__self:this,__source:{fileName:Un,lineNumber:233}},pe,Ce&&Ot("span",{class:"form__label__text--required",__self:this,__source:{fileName:Un,lineNumber:235}},Le))}s(Fe,"LabelText");const Ke=16,st=17,Dt="http://www.w3.org/2000/svg";function Vt(){const pe=s(ln=>m.document.createElementNS(Dt,ln),"createElementNS"),Ce=j(pe("svg"),{width:`${Ke}`,height:`${st}`,viewBox:`0 0 ${Ke} ${st}`,fill:"inherit"}),Le=j(pe("g"),{clipPath:"url(#clip0_57_156)"}),tt=j(pe("path"),{["fill-rule"]:"evenodd",["clip-rule"]:"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),ct=j(pe("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});Ce.appendChild(Le).append(ct,tt);const pt=pe("defs"),Zt=j(pe("clipPath"),{id:"clip0_57_156"}),an=j(pe("rect"),{width:`${Ke}`,height:`${Ke}`,fill:"white",transform:"translate(0 0.5)"});return Zt.appendChild(an),pt.appendChild(Zt),Ce.appendChild(pt).appendChild(Zt).appendChild(an),Ce}s(Vt,"SuccessIcon");const Yt="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function pn({open:pe,onFormSubmitted:Ce,...Le}){const tt=Le.options,ct=gi(()=>({__html:Vt().outerHTML}),[]),[pt,Zt]=_i(null),an=ai(()=>{pt&&(clearTimeout(pt),Zt(null)),Ce()},[pt]),ln=ai(Gt=>{Le.onSubmitSuccess(Gt),Zt(setTimeout(()=>{Ce(),Zt(null)},O))},[Ce]);return Ot(fi,{__self:this,__source:{fileName:Yt,lineNumber:47}},pt?Ot("div",{class:"success__position",onClick:an,__self:this,__source:{fileName:Yt,lineNumber:49}},Ot("div",{class:"success__content",__self:this,__source:{fileName:Yt,lineNumber:50}},tt.successMessageText,Ot("span",{class:"success__icon",dangerouslySetInnerHTML:ct,__self:this,__source:{fileName:Yt,lineNumber:52}}))):Ot("dialog",{class:"dialog",onClick:tt.onFormClose,open:pe,__self:this,__source:{fileName:Yt,lineNumber:56}},Ot("div",{class:"dialog__position",__self:this,__source:{fileName:Yt,lineNumber:57}},Ot("div",{class:"dialog__content",onClick:Gt=>{Gt.stopPropagation()},__self:this,__source:{fileName:Yt,lineNumber:58}},Ot(Ci,{options:tt,__self:this,__source:{fileName:Yt,lineNumber:65}}),Ot(ce,{...Le,onSubmitSuccess:ln,__self:this,__source:{fileName:Yt,lineNumber:66}})))))}s(pn,"Dialog");const dn=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}
`,An=`
.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}

.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,ci=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form__right {
  width: var(--form-width, 272px);
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  flex: 1 0 auto;
}

@media (max-width: 600px) {
  .form__right {
    width: auto;
  }
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-foreground);
  fill: var(--error-foreground);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,ri=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,Vi=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function Zi(){const pe=g.createElement("style");return pe.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${dn}
${An}
${ci}
${ri}
${Vi}
`,pe}s(Zi,"createDialogStyles");const pr="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx";function Or(){const pe=d.getCurrentScope().getUser(),Ce=d.getIsolationScope().getUser(),Le=d.getGlobalScope().getUser();return pe&&Object.keys(pe).length?pe:Ce&&Object.keys(Ce).length?Ce:Le}s(Or,"getUser");const Ar=s(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:pe,screenshotIntegration:Ce,sendFeedback:Le,shadow:tt})=>{const ct=tt,pt=pe.useSentryUser,Zt=Or(),an=g.createElement("div"),ln=Zi();let Gt="";const Fn={get el(){return an},appendToDom(){!ct.contains(ln)&&!ct.contains(an)&&(ct.appendChild(ln),ct.appendChild(an))},removeFromDom(){ct.removeChild(an),ct.removeChild(ln)},open(){oi(!0),pe.onFormOpen&&pe.onFormOpen(),Gt=g.body.style.overflow,g.body.style.overflow="hidden"},close(){oi(!1),g.body.style.overflow=Gt}},bt=Ce&&Ce.createInput(Ot,Fn,pe),oi=s(mn=>{it(Ot(pn,{options:pe,screenshotInput:bt,showName:pe.showName||pe.isNameRequired,showEmail:pe.showEmail||pe.isEmailRequired,defaultName:pt&&Zt&&Zt[pt.name]||"",defaultEmail:pt&&Zt&&Zt[pt.email]||"",onFormClose:()=>{oi(!1),pe.onFormClose&&pe.onFormClose()},onSubmit:Le,onSubmitSuccess:yi=>{oi(!1),pe.onSubmitSuccess&&pe.onSubmitSuccess(yi)},onSubmitError:yi=>{pe.onSubmitError&&pe.onSubmitError(yi)},onFormSubmitted:()=>{pe.onFormSubmitted&&pe.onFormSubmitted()},open:mn,__self:void 0,__source:{fileName:pr,lineNumber:72}}),an)},"renderContent");return Fn}}),"feedbackModalIntegration");function Xr(){const pe=g.createElement("style"),Ce="#1A141F",Le="#302735";return pe.textContent=`
.editor {
  padding: 10px;
  padding-top: 65px;
  padding-bottom: 65px;
  flex-grow: 1;

  background-color: ${Ce};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${Ce} 8px,
      ${Ce} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${Le} 15px,
      ${Le} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
}

.editor__canvas-container canvas {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.editor__crop-btn-group {
  padding: 8px;
  gap: 8px;
  border-radius: var(--menu-border-radius, 6px);
  background: var(--button-primary-background, var(--background));
  width: 175px;
  position: absolute;
}

.editor__crop-corner {
  width: 30px;
  height: 30px;
  position: absolute;
  background: none;
  border: 3px solid #ffffff;
}

.editor__crop-corner--top-left {
  cursor: nwse-resize;
  border-right: none;
  border-bottom: none;
}
.editor__crop-corner--top-right {
  cursor: nesw-resize;
  border-left: none;
  border-bottom: none;
}
.editor__crop-corner--bottom-left {
  cursor: nesw-resize;
  border-right: none;
  border-top: none;
}
.editor__crop-corner--bottom-right {
  cursor: nwse-resize;
  border-left: none;
  border-top: none;
}
`,pe}s(Xr,"createScreenshotInputStyles");const tr=s(({onBeforeScreenshot:pe,onScreenshot:Ce,onAfterScreenshot:Le,onError:tt})=>{zn(()=>{s(async()=>{pe();const pt=await l.mediaDevices.getDisplayMedia({video:{width:m.innerWidth*m.devicePixelRatio,height:m.innerHeight*m.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),Zt=g.createElement("video");await new Promise((an,ln)=>{Zt.srcObject=pt,Zt.onloadedmetadata=()=>{Ce(Zt),pt.getTracks().forEach(Gt=>Gt.stop()),an()},Zt.play().catch(ln)}),Le()},"takeScreenshot")().catch(tt)},[])},"useTakeScreenshot"),kn="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",Mi=30,Hi=3,$i=Mi+Hi,qi=m.devicePixelRatio,Er=s(pe=>({x:Math.min(pe.startX,pe.endX),y:Math.min(pe.startY,pe.endY),width:Math.abs(pe.startX-pe.endX),height:Math.abs(pe.startY-pe.endY)}),"constructRect"),Wr=s(pe=>{const Ce=pe.clientHeight,Le=pe.clientWidth,tt=pe.width/pe.height;let ct=Ce*tt,pt=Ce;ct>Le&&(ct=Le,pt=Le/tt);const Zt=(Le-ct)/2,an=(Ce-pt)/2;return{startX:Zt,startY:an,endX:ct+Zt,endY:pt+an}},"getContainedSize");function hi({imageBuffer:pe,dialog:Ce,options:Le}){return s(function({onError:ct}){const pt=gi(()=>({__html:Xr().innerText}),[]),Zt=gn(null),an=gn(null),ln=gn(null),[Gt,Fn]=_i({startX:0,startY:0,endX:0,endY:0}),[bt,oi]=_i(!1);zn(()=>{m.addEventListener("resize",mn,!1)},[]);function mn(){const Sn=ln.current,Tn=Er(Wr(pe));if(Sn){Sn.width=Tn.width*qi,Sn.height=Tn.height*qi,Sn.style.width=`${Tn.width}px`,Sn.style.height=`${Tn.height}px`;const Si=Sn.getContext("2d");Si&&Si.scale(qi,qi)}const Kn=an.current;Kn&&(Kn.style.width=`${Tn.width}px`,Kn.style.height=`${Tn.height}px`,Kn.style.left=`${Tn.x}px`,Kn.style.top=`${Tn.y}px`),Fn({startX:0,startY:0,endX:Tn.width,endY:Tn.height})}s(mn,"resizeCropper"),zn(()=>{const Sn=ln.current;if(!Sn)return;const Tn=Sn.getContext("2d");if(!Tn)return;const Kn=Er(Wr(pe)),Si=Er(Gt);Tn.clearRect(0,0,Kn.width,Kn.height),Tn.fillStyle="rgba(0, 0, 0, 0.5)",Tn.fillRect(0,0,Kn.width,Kn.height),Tn.clearRect(Si.x,Si.y,Si.width,Si.height),Tn.strokeStyle="#ffffff",Tn.lineWidth=3,Tn.strokeRect(Si.x+1,Si.y+1,Si.width-2,Si.height-2),Tn.strokeStyle="#000000",Tn.lineWidth=1,Tn.strokeRect(Si.x+3,Si.y+3,Si.width-6,Si.height-6)},[Gt]);function yi(Sn,Tn){oi(!1);const Kn=zi(Tn),Si=s(()=>{g.removeEventListener("mousemove",Kn),g.removeEventListener("mouseup",Si),oi(!0)},"handleMouseUp");g.addEventListener("mouseup",Si),g.addEventListener("mousemove",Kn)}s(yi,"onGrabButton");const zi=ai(Sn=>function(Tn){if(!ln.current)return;const Kn=ln.current,Si=Kn.getBoundingClientRect(),lr=Tn.clientX-Si.x,mr=Tn.clientY-Si.y;switch(Sn){case"top-left":Fn(jn=>({...jn,startX:Math.min(Math.max(0,lr),jn.endX-$i),startY:Math.min(Math.max(0,mr),jn.endY-$i)}));break;case"top-right":Fn(jn=>({...jn,endX:Math.max(Math.min(lr,Kn.width/qi),jn.startX+$i),startY:Math.min(Math.max(0,mr),jn.endY-$i)}));break;case"bottom-left":Fn(jn=>({...jn,startX:Math.min(Math.max(0,lr),jn.endX-$i),endY:Math.max(Math.min(mr,Kn.height/qi),jn.startY+$i)}));break;case"bottom-right":Fn(jn=>({...jn,endX:Math.max(Math.min(lr,Kn.width/qi),jn.startX+$i),endY:Math.max(Math.min(mr,Kn.height/qi),jn.startY+$i)}));break}},[]);function Ri(){const Sn=g.createElement("canvas"),Tn=Er(Wr(pe)),Kn=Er(Gt);Sn.width=Kn.width,Sn.height=Kn.height;const Si=Sn.getContext("2d");Si&&pe&&Si.drawImage(pe,Kn.x/Tn.width*pe.width,Kn.y/Tn.height*pe.height,Kn.width/Tn.width*pe.width,Kn.height/Tn.height*pe.height,0,0,Kn.width,Kn.height);const lr=pe.getContext("2d");lr&&(lr.clearRect(0,0,pe.width,pe.height),pe.width=Sn.width,pe.height=Sn.height,lr.drawImage(Sn,0,0),mn())}return s(Ri,"submit"),tr({onBeforeScreenshot:ai(()=>{Ce.el.style.display="none"},[]),onScreenshot:ai(Sn=>{const Tn=pe.getContext("2d");if(!Tn)throw new Error("Could not get canvas context");pe.width=Sn.videoWidth,pe.height=Sn.videoHeight,Tn.drawImage(Sn,0,0)},[pe]),onAfterScreenshot:ai(()=>{Ce.el.style.display="block";const Sn=Zt.current;Sn&&Sn.appendChild(pe),mn()},[]),onError:ai(Sn=>{Ce.el.style.display="block",ct(Sn)},[])}),Ot("div",{class:"editor",__self:this,__source:{fileName:kn,lineNumber:249}},Ot("style",{dangerouslySetInnerHTML:pt,__self:this,__source:{fileName:kn,lineNumber:250}}),Ot("div",{class:"editor__canvas-container",ref:Zt,__self:this,__source:{fileName:kn,lineNumber:251}},Ot("div",{class:"editor__crop-container",style:{position:"absolute"},ref:an,__self:this,__source:{fileName:kn,lineNumber:252}},Ot("canvas",{style:{position:"absolute"},ref:ln,__self:this,__source:{fileName:kn,lineNumber:253}}),Ot(Ki,{left:Gt.startX-Hi,top:Gt.startY-Hi,onGrabButton:yi,corner:"top-left",__self:this,__source:{fileName:kn,lineNumber:254}}),Ot(Ki,{left:Gt.endX-Mi+Hi,top:Gt.startY-Hi,onGrabButton:yi,corner:"top-right",__self:this,__source:{fileName:kn,lineNumber:260}}),Ot(Ki,{left:Gt.startX-Hi,top:Gt.endY-Mi+Hi,onGrabButton:yi,corner:"bottom-left",__self:this,__source:{fileName:kn,lineNumber:266}}),Ot(Ki,{left:Gt.endX-Mi+Hi,top:Gt.endY-Mi+Hi,onGrabButton:yi,corner:"bottom-right",__self:this,__source:{fileName:kn,lineNumber:272}}),Ot("div",{style:{left:Math.max(0,Gt.endX-191),top:Math.max(0,Gt.endY+8),display:bt?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:kn,lineNumber:278}},Ot("button",{onClick:Sn=>{Sn.preventDefault(),ln.current&&Fn({startX:0,startY:0,endX:ln.current.width/qi,endY:ln.current.height/qi}),oi(!1)},class:"btn btn--default",__self:this,__source:{fileName:kn,lineNumber:286}},Le.cancelButtonLabel),Ot("button",{onClick:Sn=>{Sn.preventDefault(),Ri(),oi(!1)},class:"btn btn--primary",__self:this,__source:{fileName:kn,lineNumber:303}},Le.confirmButtonLabel)))))},"ScreenshotEditor")}s(hi,"makeScreenshotEditorComponent");function Ki({top:pe,left:Ce,corner:Le,onGrabButton:tt}){return Ot("button",{class:`editor__crop-corner editor__crop-corner--${Le} `,style:{top:pe,left:Ce},onMouseDown:ct=>{ct.preventDefault(),tt(ct,Le)},onClick:ct=>{ct.preventDefault()},__self:this,__source:{fileName:kn,lineNumber:333}})}s(Ki,"CropCorner");const ur=s(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:(pe,Ce,Le)=>{const tt=g.createElement("canvas");return{input:hi({h:pe,imageBuffer:tt,dialog:Ce,options:Le}),value:async()=>{const ct=await new Promise(pt=>{tt.toBlob(pt,"image/png")});if(ct)return{data:new Uint8Array(await ct.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),"feedbackScreenshotIntegration");a.buildFeedbackIntegration=$e,a.feedbackModalIntegration=Ar,a.feedbackScreenshotIntegration=ur,a.getFeedback=ze,a.sendFeedback=k},4947629935:(F,a,c)=>{var{_optionalChain:d}=c(7563271614);Object.defineProperty(a,"__esModule",{value:!0});const p=c(8482989710);var m;(function(Pe){Pe[Pe.Document=0]="Document",Pe[Pe.DocumentType=1]="DocumentType",Pe[Pe.Element=2]="Element",Pe[Pe.Text=3]="Text",Pe[Pe.CDATA=4]="CDATA",Pe[Pe.Comment=5]="Comment"})(m||(m={}));function g(Pe,xe){for(let Ye=Pe.classList.length;Ye--;){const Ze=Pe.classList[Ye];if(xe.test(Ze))return!0}return!1}s(g,"elementClassMatchesRegex");function l(Pe,xe,Ye=1/0,Ze=0){return!Pe||Pe.nodeType!==Pe.ELEMENT_NODE||Ze>Ye?-1:xe(Pe)?Ze:l(Pe.parentNode,xe,Ye,Ze+1)}s(l,"distanceToMatch");function r(Pe,xe){return Ye=>{const Ze=Ye;if(Ze===null)return!1;try{if(Pe){if(typeof Pe=="string"){if(Ze.matches(`.${Pe}`))return!0}else if(g(Ze,Pe))return!0}return!!(xe&&Ze.matches(xe))}catch{return!1}}}s(r,"createMatchPredicate");const n=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let e={map:{},getId(){return console.error(n),-1},getNode(){return console.error(n),null},removeNodeFromMap(){console.error(n)},has(){return console.error(n),!1},reset(){console.error(n)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(e=new Proxy(e,{get(Pe,xe,Ye){return xe==="map"&&console.error(n),Reflect.get(Pe,xe,Ye)}}));function t(Pe,xe,Ye,Ze,Re=window){const Tt=Re.Object.getOwnPropertyDescriptor(Pe,xe);return Re.Object.defineProperty(Pe,xe,Ze?Ye:{set(rt){v(()=>{Ye.set.call(this,rt)},0),Tt&&Tt.set&&Tt.set.call(this,rt)}}),()=>t(Pe,xe,Tt||{},!0)}s(t,"hookSetter");function i(Pe,xe,Ye){try{if(!(xe in Pe))return()=>{};const Ze=Pe[xe],Re=Ye(Ze);return typeof Re=="function"&&(Re.prototype=Re.prototype||{},Object.defineProperties(Re,{__rrweb_original__:{enumerable:!1,value:Ze}})),Pe[xe]=Re,()=>{Pe[xe]=Ze}}catch{return()=>{}}}s(i,"patch"),/[1-9][0-9]{12}/.test(Date.now().toString());function o(Pe){return Pe?Pe.nodeType===Pe.ELEMENT_NODE?Pe:Pe.parentElement:null}s(o,"closestElementOfNode");function u(Pe,xe,Ye,Ze,Re){if(!Pe)return!1;const Tt=o(Pe);if(!Tt)return!1;const rt=r(xe,Ye);if(!Re){const Qt=Ze&&Tt.matches(Ze);return rt(Tt)&&!Qt}const Nt=l(Tt,rt);let Wt=-1;return Nt<0?!1:(Ze&&(Wt=l(Tt,r(null,Ze))),Nt>-1&&Wt<0?!0:Nt<Wt)}s(u,"isBlocked");const h={};function S(Pe){const xe=h[Pe];if(xe)return xe;const Ye=window.document;let Ze=window[Pe];if(Ye&&typeof Ye.createElement=="function")try{const Re=Ye.createElement("iframe");Re.hidden=!0,Ye.head.appendChild(Re);const Tt=Re.contentWindow;Tt&&Tt[Pe]&&(Ze=Tt[Pe]),Ye.head.removeChild(Re)}catch{}return h[Pe]=Ze.bind(window)}s(S,"getImplementation");function f(...Pe){return S("requestAnimationFrame")(...Pe)}s(f,"onRequestAnimationFrame");function v(...Pe){return S("setTimeout")(...Pe)}s(v,"setTimeout");var E=(Pe=>(Pe[Pe["2D"]=0]="2D",Pe[Pe.WebGL=1]="WebGL",Pe[Pe.WebGL2=2]="WebGL2",Pe))(E||{});let _;function T(Pe){_=Pe}s(T,"registerErrorHandler");const w=s(Pe=>_?s((...Ye)=>{try{return Pe(...Ye)}catch(Ze){if(_&&_(Ze)===!0)return()=>{};throw Ze}},"rrwebWrapped"):Pe,"callbackWrapper");for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=typeof Uint8Array>"u"?[]:new Uint8Array(256),O=0;O<M.length;O++)R[M.charCodeAt(O)]=O;var k=s(function(Pe){var xe=new Uint8Array(Pe),Ye,Ze=xe.length,Re="";for(Ye=0;Ye<Ze;Ye+=3)Re+=M[xe[Ye]>>2],Re+=M[(xe[Ye]&3)<<4|xe[Ye+1]>>4],Re+=M[(xe[Ye+1]&15)<<2|xe[Ye+2]>>6],Re+=M[xe[Ye+2]&63];return Ze%3===2?Re=Re.substring(0,Re.length-1)+"=":Ze%3===1&&(Re=Re.substring(0,Re.length-2)+"=="),Re},"encode");const A=new Map;function P(Pe,xe){let Ye=A.get(Pe);return Ye||(Ye=new Map,A.set(Pe,Ye)),Ye.has(xe)||Ye.set(xe,[]),Ye.get(xe)}s(P,"variableListFor");const D=s((Pe,xe,Ye)=>{if(!Pe||!(W(Pe,xe)||typeof Pe=="object"))return;const Ze=Pe.constructor.name,Re=P(Ye,Ze);let Tt=Re.indexOf(Pe);return Tt===-1&&(Tt=Re.length,Re.push(Pe)),Tt},"saveWebGLVar");function H(Pe,xe,Ye){if(Pe instanceof Array)return Pe.map(Ze=>H(Ze,xe,Ye));if(Pe===null)return Pe;if(Pe instanceof Float32Array||Pe instanceof Float64Array||Pe instanceof Int32Array||Pe instanceof Uint32Array||Pe instanceof Uint8Array||Pe instanceof Uint16Array||Pe instanceof Int16Array||Pe instanceof Int8Array||Pe instanceof Uint8ClampedArray)return{rr_type:Pe.constructor.name,args:[Object.values(Pe)]};if(Pe instanceof ArrayBuffer){const Ze=Pe.constructor.name,Re=k(Pe);return{rr_type:Ze,base64:Re}}else{if(Pe instanceof DataView)return{rr_type:Pe.constructor.name,args:[H(Pe.buffer,xe,Ye),Pe.byteOffset,Pe.byteLength]};if(Pe instanceof HTMLImageElement){const Ze=Pe.constructor.name,{src:Re}=Pe;return{rr_type:Ze,src:Re}}else if(Pe instanceof HTMLCanvasElement){const Ze="HTMLImageElement",Re=Pe.toDataURL();return{rr_type:Ze,src:Re}}else{if(Pe instanceof ImageData)return{rr_type:Pe.constructor.name,args:[H(Pe.data,xe,Ye),Pe.width,Pe.height]};if(W(Pe,xe)||typeof Pe=="object"){const Ze=Pe.constructor.name,Re=D(Pe,xe,Ye);return{rr_type:Ze,index:Re}}}}return Pe}s(H,"serializeArg");const j=s((Pe,xe,Ye)=>Pe.map(Ze=>H(Ze,xe,Ye)),"serializeArgs"),W=s((Pe,xe)=>{const Ze=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(Re=>typeof xe[Re]=="function");return Boolean(Ze.find(Re=>Pe instanceof xe[Re]))},"isInstanceOfWebGLObject");function X(Pe,xe,Ye,Ze,Re){const Tt=[],rt=Object.getOwnPropertyNames(xe.CanvasRenderingContext2D.prototype);for(const Nt of rt)try{if(typeof xe.CanvasRenderingContext2D.prototype[Nt]!="function")continue;const Wt=i(xe.CanvasRenderingContext2D.prototype,Nt,function(Qt){return function(...Ot){return u(this.canvas,Ye,Ze,Re,!0)||v(()=>{const hn=j(Ot,xe,this);Pe(this.canvas,{type:E["2D"],property:Nt,args:hn})},0),Qt.apply(this,Ot)}});Tt.push(Wt)}catch{const Qt=t(xe.CanvasRenderingContext2D.prototype,Nt,{set(Ot){Pe(this.canvas,{type:E["2D"],property:Nt,args:[Ot],setter:!0})}});Tt.push(Qt)}return()=>{Tt.forEach(Nt=>Nt())}}s(X,"initCanvas2DMutationObserver");function ee(Pe){return Pe==="experimental-webgl"?"webgl":Pe}s(ee,"getNormalizedContextName");function fe(Pe,xe,Ye,Ze,Re){const Tt=[];try{const rt=i(Pe.HTMLCanvasElement.prototype,"getContext",function(Nt){return function(Wt,...Qt){if(!u(this,xe,Ye,Ze,!0)){const Ot=ee(Wt);if("__context"in this||(this.__context=Ot),Re&&["webgl","webgl2"].includes(Ot))if(Qt[0]&&typeof Qt[0]=="object"){const hn=Qt[0];hn.preserveDrawingBuffer||(hn.preserveDrawingBuffer=!0)}else Qt.splice(0,1,{preserveDrawingBuffer:!0})}return Nt.apply(this,[Wt,...Qt])}});Tt.push(rt)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{Tt.forEach(rt=>rt())}}s(fe,"initCanvasContextObserver");function oe(Pe,xe,Ye,Ze,Re,Tt,rt,Nt){const Wt=[],Qt=Object.getOwnPropertyNames(Pe);for(const Ot of Qt)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(Ot))try{if(typeof Pe[Ot]!="function")continue;const hn=i(Pe,Ot,function(fi){return function(...wn){const Jt=fi.apply(this,wn);if(D(Jt,Nt,this),"tagName"in this.canvas&&!u(this.canvas,Ze,Re,Tt,!0)){const on=j(wn,Nt,this),kt={type:xe,property:Ot,args:on};Ye(this.canvas,kt)}return Jt}});Wt.push(hn)}catch{const fi=t(Pe,Ot,{set(wn){Ye(this.canvas,{type:xe,property:Ot,args:[wn],setter:!0})}});Wt.push(fi)}return Wt}s(oe,"patchGLPrototype");function Oe(Pe,xe,Ye,Ze,Re,Tt){const rt=[];return rt.push(...oe(xe.WebGLRenderingContext.prototype,E.WebGL,Pe,Ye,Ze,Re,Tt,xe)),typeof xe.WebGL2RenderingContext<"u"&&rt.push(...oe(xe.WebGL2RenderingContext.prototype,E.WebGL2,Pe,Ye,Ze,Re,Tt,xe)),()=>{rt.forEach(Nt=>Nt())}}s(Oe,"initCanvasWebGLMutationObserver");var Xe='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function ge(){const Pe=new Blob([Xe]);return URL.createObjectURL(Pe)}s(ge,"t");class Me{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(xe){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(hn,fi)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(hn)||this.pendingCanvasMutations.set(hn,[]),this.pendingCanvasMutations.get(hn).push(fi)};const{sampling:Ye="all",win:Ze,blockClass:Re,blockSelector:Tt,unblockSelector:rt,maxCanvasSize:Nt,recordCanvas:Wt,dataURLOptions:Qt,errorHandler:Ot}=xe;this.mutationCb=xe.mutationCb,this.mirror=xe.mirror,this.options=xe,Ot&&T(Ot),!xe.enableManualSnapshot&&w(()=>{Wt&&Ye==="all"&&this.initCanvasMutationObserver(Ze,Re,Tt,rt),Wt&&typeof Ye=="number"&&this.initCanvasFPSObserver(Ye,Ze,Re,Tt,rt,Nt,{dataURLOptions:Qt})})()}initCanvasFPSObserver(xe,Ye,Ze,Re,Tt,rt,Nt){const Wt=fe(Ye,Ze,Re,Tt,!0),Qt=this.takeSnapshot(!1,xe,Ye,Ze,Re,Tt,rt,Nt.dataURLOptions);this.resetObservers=()=>{Wt(),cancelAnimationFrame(Qt)}}initCanvasMutationObserver(xe,Ye,Ze,Re){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const Tt=fe(xe,Ye,Ze,Re,!1),rt=X(this.processMutation.bind(this),xe,Ye,Ze,Re),Nt=Oe(this.processMutation.bind(this),xe,Ye,Ze,Re,this.mirror);this.resetObservers=()=>{Tt(),rt(),Nt()}}snapshot(xe){const{options:Ye}=this,Ze=this.takeSnapshot(!0,Ye.sampling==="all"?2:Ye.sampling||2,Ye.win,Ye.blockClass,Ye.blockSelector,Ye.unblockSelector,Ye.maxCanvasSize,Ye.dataURLOptions,xe);this.resetObservers=()=>{cancelAnimationFrame(Ze)}}takeSnapshot(xe,Ye,Ze,Re,Tt,rt,Nt,Wt,Qt){const Ot=new Map,hn=new Worker(ge());hn.onmessage=$t=>{const en=$t.data,{id:zt}=en;if(Ot.set(zt,!1),!("base64"in en))return;const{base64:Kt,type:Q,width:Ve,height:Be}=en;this.mutationCb({id:zt,type:E["2D"],commands:[{property:"clearRect",args:[0,0,Ve,Be]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:Kt}],type:Q}]},0,0,Ve,Be]}]})};const fi=1e3/Ye;let wn=0,Jt;const on=s($t=>{if($t)return[$t];const en=[];return Ze.document.querySelectorAll("canvas").forEach(zt=>{u(zt,Re,Tt,rt,!0)||en.push(zt)}),en},"getCanvas"),kt=s($t=>{if(wn&&$t-wn<fi){Jt=f(kt);return}wn=$t,on(Qt).forEach(en=>{const zt=this.mirror.getId(en);if(!Ot.get(zt)&&!(!en.width||!en.height)){if(Ot.set(zt,!0),!xe&&["webgl","webgl2"].includes(en.__context)){const Kt=en.getContext(en.__context);d([Kt,"optionalAccess",Q=>Q.getContextAttributes,"call",Q=>Q(),"optionalAccess",Q=>Q.preserveDrawingBuffer])===!1&&Kt.clear(Kt.COLOR_BUFFER_BIT)}createImageBitmap(en).then(Kt=>{hn.postMessage({id:zt,bitmap:Kt,width:en.width,height:en.height,dataURLOptions:Wt,maxCanvasSize:Nt},[Kt])}).catch(Kt=>{w(()=>{throw Kt})()})}}),Jt=f(kt)},"takeCanvasSnapshots");return Jt=f(kt),Jt}startPendingCanvasMutationFlusher(){f(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const xe=s(Ye=>{this.rafStamps.latestId=Ye,f(xe)},"setLatestRAFTimestamp");f(xe)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((xe,Ye)=>{const Ze=this.mirror.getId(Ye);this.flushPendingCanvasMutationFor(Ye,Ze)}),f(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(xe,Ye){if(this.frozen||this.locked)return;const Ze=this.pendingCanvasMutations.get(xe);if(!Ze||Ye===-1)return;const Re=Ze.map(rt=>{const{type:Nt,...Wt}=rt;return Wt}),{type:Tt}=Ze[0];this.mutationCb({id:Ye,type:Tt,commands:Re}),this.pendingCanvasMutations.delete(xe)}}s(Me,"CanvasManager");const $e={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},ze="ReplayCanvas",nt=1280,mt=s((Pe={})=>{const[xe,Ye]=Pe.maxCanvasSize||[],Ze={quality:Pe.quality||"medium",enableManualSnapshot:Pe.enableManualSnapshot,maxCanvasSize:[xe?Math.min(xe,nt):nt,Ye?Math.min(Ye,nt):nt]};let Re;const Tt=new Promise(rt=>Re=rt);return{name:ze,getOptions(){const{quality:rt,enableManualSnapshot:Nt,maxCanvasSize:Wt}=Ze;return{enableManualSnapshot:Nt,recordCanvas:!0,getCanvasManager:Qt=>{const Ot=new Me({...Qt,enableManualSnapshot:Nt,maxCanvasSize:Wt,errorHandler:hn=>{try{typeof hn=="object"&&(hn.__rrweb__=!0)}catch{}}});return Re(Ot),Ot},...$e[rt||"medium"]||$e.medium}},async snapshot(rt){(await Tt).snapshot(rt)}}},"_replayCanvasIntegration"),gt=p.defineIntegration(mt);a.replayCanvasIntegration=gt},6979168052:(F,a,c)=>{var{_nullishCoalesce:d,_optionalChain:p}=c(7563271614);Object.defineProperty(a,"__esModule",{value:!0});const m=c(8482989710),g=c(7563271614),l=c(3778408185),r=g.GLOBAL_OBJ,n="sentryReplaySession",e="replay_event",t="Unable to send Replay",i=3e5,o=9e5,u=5e3,h=5500,S=6e4,f=5e3,v=3,E=15e4,_=5e3,T=3e3,w=300,M=2e7,R=4999,O=15e3,k=36e5;function A(N,x){return N??x()}s(A,"_nullishCoalesce$1");function P(N){let x,$=N[0],te=1;for(;te<N.length;){const he=N[te],we=N[te+1];if(te+=2,(he==="optionalAccess"||he==="optionalCall")&&$==null)return;he==="access"||he==="optionalAccess"?(x=$,$=we($)):(he==="call"||he==="optionalCall")&&($=we((...We)=>$.call(x,...We)),x=void 0)}return $}s(P,"_optionalChain$5");var D;(function(N){N[N.Document=0]="Document",N[N.DocumentType=1]="DocumentType",N[N.Element=2]="Element",N[N.Text=3]="Text",N[N.CDATA=4]="CDATA",N[N.Comment=5]="Comment"})(D||(D={}));function H(N){return N.nodeType===N.ELEMENT_NODE}s(H,"isElement$1");function j(N){const x=P([N,"optionalAccess",$=>$.host]);return Boolean(P([x,"optionalAccess",$=>$.shadowRoot])===N)}s(j,"isShadowRoot");function W(N){return Object.prototype.toString.call(N)==="[object ShadowRoot]"}s(W,"isNativeShadowDom");function X(N){return N.includes(" background-clip: text;")&&!N.includes(" -webkit-background-clip: text;")&&(N=N.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),N}s(X,"fixBrowserCompatibilityIssuesInCSS");function ee(N){const{cssText:x}=N;if(x.split('"').length<3)return x;const $=["@import",`url(${JSON.stringify(N.href)})`];return N.layerName===""?$.push("layer"):N.layerName&&$.push(`layer(${N.layerName})`),N.supportsText&&$.push(`supports(${N.supportsText})`),N.media.length&&$.push(N.media.mediaText),$.join(" ")+";"}s(ee,"escapeImportStatement");function fe(N){try{const x=N.rules||N.cssRules;return x?X(Array.from(x,oe).join("")):null}catch{return null}}s(fe,"stringifyStylesheet");function oe(N){let x;if(Xe(N))try{x=fe(N.styleSheet)||ee(N)}catch{}else if(ge(N)&&N.selectorText.includes(":"))return Oe(N.cssText);return x||N.cssText}s(oe,"stringifyRule");function Oe(N){const x=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return N.replace(x,"$1\\$2")}s(Oe,"fixSafariColons");function Xe(N){return"styleSheet"in N}s(Xe,"isCSSImportRule");function ge(N){return"selectorText"in N}s(ge,"isCSSStyleRule");class Me{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(x){if(!x)return-1;const $=P([this,"access",te=>te.getMeta,"call",te=>te(x),"optionalAccess",te=>te.id]);return A($,()=>-1)}getNode(x){return this.idNodeMap.get(x)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(x){return this.nodeMetaMap.get(x)||null}removeNodeFromMap(x){const $=this.getId(x);this.idNodeMap.delete($),x.childNodes&&x.childNodes.forEach(te=>this.removeNodeFromMap(te))}has(x){return this.idNodeMap.has(x)}hasNode(x){return this.nodeMetaMap.has(x)}add(x,$){const te=$.id;this.idNodeMap.set(te,x),this.nodeMetaMap.set(x,$)}replace(x,$){const te=this.getNode(x);if(te){const he=this.nodeMetaMap.get(te);he&&this.nodeMetaMap.set($,he)}this.idNodeMap.set(x,$)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}s(Me,"Mirror");function $e(){return new Me}s($e,"createMirror");function ze({maskInputOptions:N,tagName:x,type:$}){return x==="OPTION"&&(x="SELECT"),Boolean(N[x.toLowerCase()]||$&&N[$]||$==="password"||x==="INPUT"&&!$&&N.text)}s(ze,"shouldMaskInput");function nt({isMasked:N,element:x,value:$,maskInputFn:te}){let he=$||"";return N?(te&&(he=te(he,x)),"*".repeat(he.length)):he}s(nt,"maskInputValue");function mt(N){return N.toLowerCase()}s(mt,"toLowerCase");function gt(N){return N.toUpperCase()}s(gt,"toUpperCase");const Pe="__rrweb_original__";function xe(N){const x=N.getContext("2d");if(!x)return!0;const $=50;for(let te=0;te<N.width;te+=$)for(let he=0;he<N.height;he+=$){const we=x.getImageData,We=Pe in we?we[Pe]:we;if(new Uint32Array(We.call(x,te,he,Math.min($,N.width-te),Math.min($,N.height-he)).data.buffer).some(Ne=>Ne!==0))return!1}return!0}s(xe,"is2DCanvasBlank");function Ye(N){const x=N.type;return N.hasAttribute("data-rr-is-password")?"password":x?mt(x):null}s(Ye,"getInputType");function Ze(N,x,$){return x==="INPUT"&&($==="radio"||$==="checkbox")?N.getAttribute("value")||"":N.value}s(Ze,"getInputValue");let Re=1;const Tt=new RegExp("[^a-z0-9-_:]"),rt=-2;function Nt(){return Re++}s(Nt,"genId");function Wt(N){if(N instanceof HTMLFormElement)return"form";const x=mt(N.tagName);return Tt.test(x)?"div":x}s(Wt,"getValidTagName");function Qt(N){let x="";return N.indexOf("//")>-1?x=N.split("/").slice(0,3).join("/"):x=N.split("/")[0],x=x.split("?")[0],x}s(Qt,"extractOrigin");let Ot,hn;const fi=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,wn=/^(?:[a-z+]+:)?\/\//i,Jt=/^www\..*/i,on=/^(data:)([^,]*),(.*)/i;function kt(N,x){return(N||"").replace(fi,($,te,he,we,We,je)=>{const Ne=he||We||je,ht=te||we||"";if(!Ne)return $;if(wn.test(Ne)||Jt.test(Ne))return`url(${ht}${Ne}${ht})`;if(on.test(Ne))return`url(${ht}${Ne}${ht})`;if(Ne[0]==="/")return`url(${ht}${Qt(x)+Ne}${ht})`;const Rt=x.split("/"),It=Ne.split("/");Rt.pop();for(const Lt of It)Lt!=="."&&(Lt===".."?Rt.pop():Rt.push(Lt));return`url(${ht}${Rt.join("/")}${ht})`})}s(kt,"absoluteToStylesheet");const $t=/^[^ \t\n\r\u000c]+/,en=/^[, \t\n\r\u000c]+/;function zt(N,x){if(x.trim()==="")return x;let $=0;function te(we){let We;const je=we.exec(x.substring($));return je?(We=je[0],$+=We.length,We):""}s(te,"collectCharacters");const he=[];for(;te(en),!($>=x.length);){let we=te($t);if(we.slice(-1)===",")we=Kt(N,we.substring(0,we.length-1)),he.push(we);else{let We="";we=Kt(N,we);let je=!1;for(;;){const Ne=x.charAt($);if(Ne===""){he.push((we+We).trim());break}else if(je)Ne===")"&&(je=!1);else if(Ne===","){$+=1,he.push((we+We).trim());break}else Ne==="("&&(je=!0);We+=Ne,$+=1}}}return he.join(", ")}s(zt,"getAbsoluteSrcsetString");function Kt(N,x){if(!x||x.trim()==="")return x;const $=N.createElement("a");return $.href=x,$.href}s(Kt,"absoluteToDoc");function Q(N){return Boolean(N.tagName==="svg"||N.ownerSVGElement)}s(Q,"isSVGElement");function Ve(){const N=document.createElement("a");return N.href="",N.href}s(Ve,"getHref");function Be(N,x,$,te,he,we){return te&&($==="src"||$==="href"&&!(x==="use"&&te[0]==="#")||$==="xlink:href"&&te[0]!=="#"||$==="background"&&(x==="table"||x==="td"||x==="th")?Kt(N,te):$==="srcset"?zt(N,te):$==="style"?kt(te,Ve()):x==="object"&&$==="data"?Kt(N,te):typeof we=="function"?we($,te,he):te)}s(Be,"transformAttribute");function Je(N,x,$){return(N==="video"||N==="audio")&&x==="autoplay"}s(Je,"ignoreAttribute");function ut(N,x,$,te){try{if(te&&N.matches(te))return!1;if(typeof x=="string"){if(N.classList.contains(x))return!0}else for(let he=N.classList.length;he--;){const we=N.classList[he];if(x.test(we))return!0}if($)return N.matches($)}catch{}return!1}s(ut,"_isBlockedElement");function ot(N,x){for(let $=N.classList.length;$--;){const te=N.classList[$];if(x.test(te))return!0}return!1}s(ot,"elementClassMatchesRegex");function de(N,x,$=1/0,te=0){return!N||N.nodeType!==N.ELEMENT_NODE||te>$?-1:x(N)?te:de(N.parentNode,x,$,te+1)}s(de,"distanceToMatch");function Ue(N,x){return $=>{const te=$;if(te===null)return!1;try{if(N){if(typeof N=="string"){if(te.matches(`.${N}`))return!0}else if(ot(te,N))return!0}return!!(x&&te.matches(x))}catch{return!1}}}s(Ue,"createMatchPredicate");function K(N,x,$,te,he,we){try{const We=N.nodeType===N.ELEMENT_NODE?N:N.parentElement;if(We===null)return!1;if(We.tagName==="INPUT"){const ht=We.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(ht))return!0}let je=-1,Ne=-1;if(we){if(Ne=de(We,Ue(te,he)),Ne<0)return!0;je=de(We,Ue(x,$),Ne>=0?Ne:1/0)}else{if(je=de(We,Ue(x,$)),je<0)return!1;Ne=de(We,Ue(te,he),je>=0?je:1/0)}return je>=0?Ne>=0?je<=Ne:!0:Ne>=0?!1:!!we}catch{}return!!we}s(K,"needMaskingText");function q(N,x,$){const te=N.contentWindow;if(!te)return;let he=!1,we;try{we=te.document.readyState}catch{return}if(we!=="complete"){const je=setTimeout(()=>{he||(x(),he=!0)},$);N.addEventListener("load",()=>{clearTimeout(je),he=!0,x()});return}const We="about:blank";if(te.location.href!==We||N.src===We||N.src==="")return setTimeout(x,0),N.addEventListener("load",x);N.addEventListener("load",x)}s(q,"onceIframeLoaded");function Ee(N,x,$){let te=!1,he;try{he=N.sheet}catch{return}if(he)return;const we=setTimeout(()=>{te||(x(),te=!0)},$);N.addEventListener("load",()=>{clearTimeout(we),te=!0,x()})}s(Ee,"onceStylesheetLoaded");function be(N,x){const{doc:$,mirror:te,blockClass:he,blockSelector:we,unblockSelector:We,maskAllText:je,maskAttributeFn:Ne,maskTextClass:ht,unmaskTextClass:Rt,maskTextSelector:It,unmaskTextSelector:Lt,inlineStylesheet:sn,maskInputOptions:rn={},maskTextFn:Cn,maskInputFn:Hn,dataURLOptions:Rn={},inlineImages:di,recordCanvas:Di,keepIframeSrcFn:Ni,newlyAddedElement:nr=!1}=x,pi=it($,te);switch(N.nodeType){case N.DOCUMENT_NODE:return N.compatMode!=="CSS1Compat"?{type:D.Document,childNodes:[],compatMode:N.compatMode}:{type:D.Document,childNodes:[]};case N.DOCUMENT_TYPE_NODE:return{type:D.DocumentType,name:N.name,publicId:N.publicId,systemId:N.systemId,rootId:pi};case N.ELEMENT_NODE:return Qe(N,{doc:$,blockClass:he,blockSelector:we,unblockSelector:We,inlineStylesheet:sn,maskAttributeFn:Ne,maskInputOptions:rn,maskInputFn:Hn,dataURLOptions:Rn,inlineImages:di,recordCanvas:Di,keepIframeSrcFn:Ni,newlyAddedElement:nr,rootId:pi,maskAllText:je,maskTextClass:ht,unmaskTextClass:Rt,maskTextSelector:It,unmaskTextSelector:Lt});case N.TEXT_NODE:return He(N,{maskAllText:je,maskTextClass:ht,unmaskTextClass:Rt,maskTextSelector:It,unmaskTextSelector:Lt,maskTextFn:Cn,maskInputOptions:rn,maskInputFn:Hn,rootId:pi});case N.CDATA_SECTION_NODE:return{type:D.CDATA,textContent:"",rootId:pi};case N.COMMENT_NODE:return{type:D.Comment,textContent:N.textContent||"",rootId:pi};default:return!1}}s(be,"serializeNode");function it(N,x){if(!x.hasNode(N))return;const $=x.getId(N);return $===1?void 0:$}s(it,"getRootId");function He(N,x){const{maskAllText:$,maskTextClass:te,unmaskTextClass:he,maskTextSelector:we,unmaskTextSelector:We,maskTextFn:je,maskInputOptions:Ne,maskInputFn:ht,rootId:Rt}=x,It=N.parentNode&&N.parentNode.tagName;let Lt=N.textContent;const sn=It==="STYLE"?!0:void 0,rn=It==="SCRIPT"?!0:void 0,Cn=It==="TEXTAREA"?!0:void 0;if(sn&&Lt){try{N.nextSibling||N.previousSibling||P([N,"access",Rn=>Rn.parentNode,"access",Rn=>Rn.sheet,"optionalAccess",Rn=>Rn.cssRules])&&(Lt=fe(N.parentNode.sheet))}catch(Rn){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${Rn}`,N)}Lt=kt(Lt,Ve())}rn&&(Lt="SCRIPT_PLACEHOLDER");const Hn=K(N,te,we,he,We,$);if(!sn&&!rn&&!Cn&&Lt&&Hn&&(Lt=je?je(Lt,N.parentElement):Lt.replace(/[\S]/g,"*")),Cn&&Lt&&(Ne.textarea||Hn)&&(Lt=ht?ht(Lt,N.parentNode):Lt.replace(/[\S]/g,"*")),It==="OPTION"&&Lt){const Rn=ze({type:null,tagName:It,maskInputOptions:Ne});Lt=nt({isMasked:K(N,te,we,he,We,Rn),element:N,value:Lt,maskInputFn:ht})}return{type:D.Text,textContent:Lt||"",isStyle:sn,rootId:Rt}}s(He,"serializeTextNode");function Qe(N,x){const{doc:$,blockClass:te,blockSelector:he,unblockSelector:we,inlineStylesheet:We,maskInputOptions:je={},maskAttributeFn:Ne,maskInputFn:ht,dataURLOptions:Rt={},inlineImages:It,recordCanvas:Lt,keepIframeSrcFn:sn,newlyAddedElement:rn=!1,rootId:Cn,maskAllText:Hn,maskTextClass:Rn,unmaskTextClass:di,maskTextSelector:Di,unmaskTextSelector:Ni}=x,nr=ut(N,te,he,we),pi=Wt(N);let Nn={};const wi=N.attributes.length;for(let xn=0;xn<wi;xn++){const mi=N.attributes[xn];mi.name&&!Je(pi,mi.name,mi.value)&&(Nn[mi.name]=Be($,pi,mt(mi.name),mi.value,N,Ne))}if(pi==="link"&&We){const xn=Array.from($.styleSheets).find(ir=>ir.href===N.href);let mi=null;xn&&(mi=fe(xn)),mi&&(delete Nn.rel,delete Nn.href,Nn._cssText=kt(mi,xn.href))}if(pi==="style"&&N.sheet&&!(N.innerText||N.textContent||"").trim().length){const xn=fe(N.sheet);xn&&(Nn._cssText=kt(xn,Ve()))}if(pi==="input"||pi==="textarea"||pi==="select"||pi==="option"){const xn=N,mi=Ye(xn),ir=Ze(xn,gt(pi),mi),Pr=xn.checked;if(mi!=="submit"&&mi!=="button"&&ir){const Tr=K(xn,Rn,Di,di,Ni,ze({type:mi,tagName:gt(pi),maskInputOptions:je}));Nn.value=nt({isMasked:Tr,element:xn,value:ir,maskInputFn:ht})}Pr&&(Nn.checked=Pr)}if(pi==="option"&&(N.selected&&!je.select?Nn.selected=!0:delete Nn.selected),pi==="canvas"&&Lt){if(N.__context==="2d")xe(N)||(Nn.rr_dataURL=N.toDataURL(Rt.type,Rt.quality));else if(!("__context"in N)){const xn=N.toDataURL(Rt.type,Rt.quality),mi=document.createElement("canvas");mi.width=N.width,mi.height=N.height;const ir=mi.toDataURL(Rt.type,Rt.quality);xn!==ir&&(Nn.rr_dataURL=xn)}}if(pi==="img"&&It){Ot||(Ot=$.createElement("canvas"),hn=Ot.getContext("2d"));const xn=N,mi=xn.crossOrigin;xn.crossOrigin="anonymous";const ir=s(()=>{xn.removeEventListener("load",ir);try{Ot.width=xn.naturalWidth,Ot.height=xn.naturalHeight,hn.drawImage(xn,0,0),Nn.rr_dataURL=Ot.toDataURL(Rt.type,Rt.quality)}catch(Pr){console.warn(`Cannot inline img src=${xn.currentSrc}! Error: ${Pr}`)}mi?Nn.crossOrigin=mi:xn.removeAttribute("crossorigin")},"recordInlineImage");xn.complete&&xn.naturalWidth!==0?ir():xn.addEventListener("load",ir)}if((pi==="audio"||pi==="video")&&(Nn.rr_mediaState=N.paused?"paused":"played",Nn.rr_mediaCurrentTime=N.currentTime),rn||(N.scrollLeft&&(Nn.rr_scrollLeft=N.scrollLeft),N.scrollTop&&(Nn.rr_scrollTop=N.scrollTop)),nr){const{width:xn,height:mi}=N.getBoundingClientRect();Nn={class:Nn.class,rr_width:`${xn}px`,rr_height:`${mi}px`}}pi==="iframe"&&!sn(Nn.src)&&(N.contentDocument||(Nn.rr_src=Nn.src),delete Nn.src);let hr;try{customElements.get(pi)&&(hr=!0)}catch{}return{type:D.Element,tagName:pi,attributes:Nn,childNodes:[],isSVG:Q(N)||void 0,needBlock:nr,rootId:Cn,isCustom:hr}}s(Qe,"serializeElementNode");function Se(N){return N==null?"":N.toLowerCase()}s(Se,"lowerIfExists");function Ae(N,x){if(x.comment&&N.type===D.Comment)return!0;if(N.type===D.Element){if(x.script&&(N.tagName==="script"||N.tagName==="link"&&(N.attributes.rel==="preload"||N.attributes.rel==="modulepreload")&&N.attributes.as==="script"||N.tagName==="link"&&N.attributes.rel==="prefetch"&&typeof N.attributes.href=="string"&&N.attributes.href.endsWith(".js")))return!0;if(x.headFavicon&&(N.tagName==="link"&&N.attributes.rel==="shortcut icon"||N.tagName==="meta"&&(Se(N.attributes.name).match(/^msapplication-tile(image|color)$/)||Se(N.attributes.name)==="application-name"||Se(N.attributes.rel)==="icon"||Se(N.attributes.rel)==="apple-touch-icon"||Se(N.attributes.rel)==="shortcut icon")))return!0;if(N.tagName==="meta"){if(x.headMetaDescKeywords&&Se(N.attributes.name).match(/^description|keywords$/))return!0;if(x.headMetaSocial&&(Se(N.attributes.property).match(/^(og|twitter|fb):/)||Se(N.attributes.name).match(/^(og|twitter):/)||Se(N.attributes.name)==="pinterest"))return!0;if(x.headMetaRobots&&(Se(N.attributes.name)==="robots"||Se(N.attributes.name)==="googlebot"||Se(N.attributes.name)==="bingbot"))return!0;if(x.headMetaHttpEquiv&&N.attributes["http-equiv"]!==void 0)return!0;if(x.headMetaAuthorship&&(Se(N.attributes.name)==="author"||Se(N.attributes.name)==="generator"||Se(N.attributes.name)==="framework"||Se(N.attributes.name)==="publisher"||Se(N.attributes.name)==="progid"||Se(N.attributes.property).match(/^article:/)||Se(N.attributes.property).match(/^product:/)))return!0;if(x.headMetaVerification&&(Se(N.attributes.name)==="google-site-verification"||Se(N.attributes.name)==="yandex-verification"||Se(N.attributes.name)==="csrf-token"||Se(N.attributes.name)==="p:domain_verify"||Se(N.attributes.name)==="verify-v1"||Se(N.attributes.name)==="verification"||Se(N.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}s(Ae,"slimDOMExcluded");function L(N,x){const{doc:$,mirror:te,blockClass:he,blockSelector:we,unblockSelector:We,maskAllText:je,maskTextClass:Ne,unmaskTextClass:ht,maskTextSelector:Rt,unmaskTextSelector:It,skipChild:Lt=!1,inlineStylesheet:sn=!0,maskInputOptions:rn={},maskAttributeFn:Cn,maskTextFn:Hn,maskInputFn:Rn,slimDOMOptions:di,dataURLOptions:Di={},inlineImages:Ni=!1,recordCanvas:nr=!1,onSerialize:pi,onIframeLoad:Nn,iframeLoadTimeout:wi=5e3,onStylesheetLoad:hr,stylesheetLoadTimeout:xn=5e3,keepIframeSrcFn:mi=s(()=>!1,"keepIframeSrcFn"),newlyAddedElement:ir=!1}=x;let{preserveWhiteSpace:Pr=!0}=x;const Tr=be(N,{doc:$,mirror:te,blockClass:he,blockSelector:we,maskAllText:je,unblockSelector:We,maskTextClass:Ne,unmaskTextClass:ht,maskTextSelector:Rt,unmaskTextSelector:It,inlineStylesheet:sn,maskInputOptions:rn,maskAttributeFn:Cn,maskTextFn:Hn,maskInputFn:Rn,dataURLOptions:Di,inlineImages:Ni,recordCanvas:nr,keepIframeSrcFn:mi,newlyAddedElement:ir});if(!Tr)return console.warn(N,"not serialized"),null;let eo;te.hasNode(N)?eo=te.getId(N):Ae(Tr,di)||!Pr&&Tr.type===D.Text&&!Tr.isStyle&&!Tr.textContent.replace(/^\s+|\s+$/gm,"").length?eo=rt:eo=Nt();const Gi=Object.assign(Tr,{id:eo});if(te.add(N,Gi),eo===rt)return null;pi&&pi(N);let fo=!Lt;if(Gi.type===D.Element){fo=fo&&!Gi.needBlock,delete Gi.needBlock;const kr=N.shadowRoot;kr&&W(kr)&&(Gi.isShadowHost=!0)}if((Gi.type===D.Document||Gi.type===D.Element)&&fo){di.headWhitespace&&Gi.type===D.Element&&Gi.tagName==="head"&&(Pr=!1);const kr={doc:$,mirror:te,blockClass:he,blockSelector:we,maskAllText:je,unblockSelector:We,maskTextClass:Ne,unmaskTextClass:ht,maskTextSelector:Rt,unmaskTextSelector:It,skipChild:Lt,inlineStylesheet:sn,maskInputOptions:rn,maskAttributeFn:Cn,maskTextFn:Hn,maskInputFn:Rn,slimDOMOptions:di,dataURLOptions:Di,inlineImages:Ni,recordCanvas:nr,preserveWhiteSpace:Pr,onSerialize:pi,onIframeLoad:Nn,iframeLoadTimeout:wi,onStylesheetLoad:hr,stylesheetLoadTimeout:xn,keepIframeSrcFn:mi};for(const so of Array.from(N.childNodes)){const $r=L(so,kr);$r&&Gi.childNodes.push($r)}if(H(N)&&N.shadowRoot)for(const so of Array.from(N.shadowRoot.childNodes)){const $r=L(so,kr);$r&&(W(N.shadowRoot)&&($r.isShadow=!0),Gi.childNodes.push($r))}}return N.parentNode&&j(N.parentNode)&&W(N.parentNode)&&(Gi.isShadow=!0),Gi.type===D.Element&&Gi.tagName==="iframe"&&q(N,()=>{const kr=N.contentDocument;if(kr&&Nn){const so=L(kr,{doc:kr,mirror:te,blockClass:he,blockSelector:we,unblockSelector:We,maskAllText:je,maskTextClass:Ne,unmaskTextClass:ht,maskTextSelector:Rt,unmaskTextSelector:It,skipChild:!1,inlineStylesheet:sn,maskInputOptions:rn,maskAttributeFn:Cn,maskTextFn:Hn,maskInputFn:Rn,slimDOMOptions:di,dataURLOptions:Di,inlineImages:Ni,recordCanvas:nr,preserveWhiteSpace:Pr,onSerialize:pi,onIframeLoad:Nn,iframeLoadTimeout:wi,onStylesheetLoad:hr,stylesheetLoadTimeout:xn,keepIframeSrcFn:mi});so&&Nn(N,so)}},wi),Gi.type===D.Element&&Gi.tagName==="link"&&Gi.attributes.rel==="stylesheet"&&Ee(N,()=>{if(hr){const kr=L(N,{doc:$,mirror:te,blockClass:he,blockSelector:we,unblockSelector:We,maskAllText:je,maskTextClass:Ne,unmaskTextClass:ht,maskTextSelector:Rt,unmaskTextSelector:It,skipChild:!1,inlineStylesheet:sn,maskInputOptions:rn,maskAttributeFn:Cn,maskTextFn:Hn,maskInputFn:Rn,slimDOMOptions:di,dataURLOptions:Di,inlineImages:Ni,recordCanvas:nr,preserveWhiteSpace:Pr,onSerialize:pi,onIframeLoad:Nn,iframeLoadTimeout:wi,onStylesheetLoad:hr,stylesheetLoadTimeout:xn,keepIframeSrcFn:mi});kr&&hr(N,kr)}},xn),Gi}s(L,"serializeNodeWithId");function ve(N,x){const{mirror:$=new Me,blockClass:te="rr-block",blockSelector:he=null,unblockSelector:we=null,maskAllText:We=!1,maskTextClass:je="rr-mask",unmaskTextClass:Ne=null,maskTextSelector:ht=null,unmaskTextSelector:Rt=null,inlineStylesheet:It=!0,inlineImages:Lt=!1,recordCanvas:sn=!1,maskAllInputs:rn=!1,maskAttributeFn:Cn,maskTextFn:Hn,maskInputFn:Rn,slimDOM:di=!1,dataURLOptions:Di,preserveWhiteSpace:Ni,onSerialize:nr,onIframeLoad:pi,iframeLoadTimeout:Nn,onStylesheetLoad:wi,stylesheetLoadTimeout:hr,keepIframeSrcFn:xn=s(()=>!1,"keepIframeSrcFn")}=x||{};return L(N,{doc:N,mirror:$,blockClass:te,blockSelector:he,unblockSelector:we,maskAllText:We,maskTextClass:je,unmaskTextClass:Ne,maskTextSelector:ht,unmaskTextSelector:Rt,skipChild:!1,inlineStylesheet:It,maskInputOptions:rn===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:rn===!1?{}:rn,maskAttributeFn:Cn,maskTextFn:Hn,maskInputFn:Rn,slimDOMOptions:di===!0||di==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:di==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:di===!1?{}:di,dataURLOptions:Di,inlineImages:Lt,recordCanvas:sn,preserveWhiteSpace:Ni,onSerialize:nr,onIframeLoad:pi,iframeLoadTimeout:Nn,onStylesheetLoad:wi,stylesheetLoadTimeout:hr,keepIframeSrcFn:xn,newlyAddedElement:!1})}s(ve,"snapshot");function _e(N){let x,$=N[0],te=1;for(;te<N.length;){const he=N[te],we=N[te+1];if(te+=2,(he==="optionalAccess"||he==="optionalCall")&&$==null)return;he==="access"||he==="optionalAccess"?(x=$,$=we($)):(he==="call"||he==="optionalCall")&&($=we((...We)=>$.call(x,...We)),x=void 0)}return $}s(_e,"_optionalChain$4");function Ie(N,x,$=document){const te={capture:!0,passive:!0};return $.addEventListener(N,x,te),()=>$.removeEventListener(N,x,te)}s(Ie,"on");const ne=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Ft={map:{},getId(){return console.error(ne),-1},getNode(){return console.error(ne),null},removeNodeFromMap(){console.error(ne)},has(){return console.error(ne),!1},reset(){console.error(ne)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Ft=new Proxy(Ft,{get(N,x,$){return x==="map"&&console.error(ne),Reflect.get(N,x,$)}}));function qe(N,x,$={}){let te=null,he=0;return function(...we){const We=Date.now();!he&&$.leading===!1&&(he=We);const je=x-(We-he),Ne=this;je<=0||je>x?(te&&(Fe(te),te=null),he=We,N.apply(Ne,we)):!te&&$.trailing!==!1&&(te=ce(()=>{he=$.leading===!1?0:Date.now(),te=null,N.apply(Ne,we)},je))}}s(qe,"throttle$1");function ft(N,x,$,te,he=window){const we=he.Object.getOwnPropertyDescriptor(N,x);return he.Object.defineProperty(N,x,te?$:{set(We){ce(()=>{$.set.call(this,We)},0),we&&we.set&&we.set.call(this,We)}}),()=>ft(N,x,we||{},!0)}s(ft,"hookSetter");function En(N,x,$){try{if(!(x in N))return()=>{};const te=N[x],he=$(te);return typeof he=="function"&&(he.prototype=he.prototype||{},Object.defineProperties(he,{__rrweb_original__:{enumerable:!1,value:te}})),N[x]=he,()=>{N[x]=te}}catch{return()=>{}}}s(En,"patch");let xt=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(xt=s(()=>new Date().getTime(),"nowTimestamp"));function Ui(N){const x=N.document;return{left:x.scrollingElement?x.scrollingElement.scrollLeft:N.pageXOffset!==void 0?N.pageXOffset:_e([x,"optionalAccess",$=>$.documentElement,"access",$=>$.scrollLeft])||_e([x,"optionalAccess",$=>$.body,"optionalAccess",$=>$.parentElement,"optionalAccess",$=>$.scrollLeft])||_e([x,"optionalAccess",$=>$.body,"optionalAccess",$=>$.scrollLeft])||0,top:x.scrollingElement?x.scrollingElement.scrollTop:N.pageYOffset!==void 0?N.pageYOffset:_e([x,"optionalAccess",$=>$.documentElement,"access",$=>$.scrollTop])||_e([x,"optionalAccess",$=>$.body,"optionalAccess",$=>$.parentElement,"optionalAccess",$=>$.scrollTop])||_e([x,"optionalAccess",$=>$.body,"optionalAccess",$=>$.scrollTop])||0}}s(Ui,"getWindowScroll");function _i(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}s(_i,"getWindowHeight");function bn(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}s(bn,"getWindowWidth");function zn(N){return N?N.nodeType===N.ELEMENT_NODE?N:N.parentElement:null}s(zn,"closestElementOfNode");function gn(N,x,$,te,he){if(!N)return!1;const we=zn(N);if(!we)return!1;const We=Ue(x,$);if(!he){const ht=te&&we.matches(te);return We(we)&&!ht}const je=de(we,We);let Ne=-1;return je<0?!1:(te&&(Ne=de(we,Ue(null,te))),je>-1&&Ne<0?!0:je<Ne)}s(gn,"isBlocked");function gi(N,x){return x.getId(N)!==-1}s(gi,"isSerialized");function ai(N,x){return x.getId(N)===rt}s(ai,"isIgnored");function yr(N,x){if(j(N))return!1;const $=x.getId(N);return x.has($)?N.parentNode&&N.parentNode.nodeType===N.DOCUMENT_NODE?!1:N.parentNode?yr(N.parentNode,x):!0:!0}s(yr,"isAncestorRemoved");function Bt(N){return Boolean(N.changedTouches)}s(Bt,"legacy_isTouchEvent");function Et(N=window){"NodeList"in N&&!N.NodeList.prototype.forEach&&(N.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in N&&!N.DOMTokenList.prototype.forEach&&(N.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...x)=>{let $=x[0];if(!(0 in x))throw new TypeError("1 argument is required");do if(this===$)return!0;while($=$&&$.parentNode);return!1})}s(Et,"polyfill");function On(N,x){return Boolean(N.nodeName==="IFRAME"&&x.getMeta(N))}s(On,"isSerializedIframe");function nn(N,x){return Boolean(N.nodeName==="LINK"&&N.nodeType===N.ELEMENT_NODE&&N.getAttribute&&N.getAttribute("rel")==="stylesheet"&&x.getMeta(N))}s(nn,"isSerializedStylesheet");function Bn(N){return Boolean(_e([N,"optionalAccess",x=>x.shadowRoot]))}s(Bn,"hasShadowRoot");class li{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(x){return d(this.styleIDMap.get(x),()=>-1)}has(x){return this.styleIDMap.has(x)}add(x,$){if(this.has(x))return this.getId(x);let te;return $===void 0?te=this.id++:te=$,this.styleIDMap.set(x,te),this.idStyleMap.set(te,x),te}getStyle(x){return this.idStyleMap.get(x)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}s(li,"StyleSheetMirror");function ui(N){let x=null;return _e([N,"access",$=>$.getRootNode,"optionalCall",$=>$(),"optionalAccess",$=>$.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&N.getRootNode().host&&(x=N.getRootNode().host),x}s(ui,"getShadowHost");function Gn(N){let x=N,$;for(;$=ui(x);)x=$;return x}s(Gn,"getRootShadowHost");function Yn(N){const x=N.ownerDocument;if(!x)return!1;const $=Gn(N);return x.contains($)}s(Yn,"shadowHostInDom");function Ci(N){const x=N.ownerDocument;return x?x.contains(N)||Yn(N):!1}s(Ci,"inDom");const Ti={};function Un(N){const x=Ti[N];if(x)return x;const $=window.document;let te=window[N];if($&&typeof $.createElement=="function")try{const he=$.createElement("iframe");he.hidden=!0,$.head.appendChild(he);const we=he.contentWindow;we&&we[N]&&(te=we[N]),$.head.removeChild(he)}catch{}return Ti[N]=te.bind(window)}s(Un,"getImplementation");function U(...N){return Un("requestAnimationFrame")(...N)}s(U,"onRequestAnimationFrame");function ce(...N){return Un("setTimeout")(...N)}s(ce,"setTimeout$1");function Fe(...N){return Un("clearTimeout")(...N)}s(Fe,"clearTimeout$1");var Ke=(N=>(N[N.DomContentLoaded=0]="DomContentLoaded",N[N.Load=1]="Load",N[N.FullSnapshot=2]="FullSnapshot",N[N.IncrementalSnapshot=3]="IncrementalSnapshot",N[N.Meta=4]="Meta",N[N.Custom=5]="Custom",N[N.Plugin=6]="Plugin",N))(Ke||{}),st=(N=>(N[N.Mutation=0]="Mutation",N[N.MouseMove=1]="MouseMove",N[N.MouseInteraction=2]="MouseInteraction",N[N.Scroll=3]="Scroll",N[N.ViewportResize=4]="ViewportResize",N[N.Input=5]="Input",N[N.TouchMove=6]="TouchMove",N[N.MediaInteraction=7]="MediaInteraction",N[N.StyleSheetRule=8]="StyleSheetRule",N[N.CanvasMutation=9]="CanvasMutation",N[N.Font=10]="Font",N[N.Log=11]="Log",N[N.Drag=12]="Drag",N[N.StyleDeclaration=13]="StyleDeclaration",N[N.Selection=14]="Selection",N[N.AdoptedStyleSheet=15]="AdoptedStyleSheet",N[N.CustomElement=16]="CustomElement",N))(st||{}),Dt=(N=>(N[N.MouseUp=0]="MouseUp",N[N.MouseDown=1]="MouseDown",N[N.Click=2]="Click",N[N.ContextMenu=3]="ContextMenu",N[N.DblClick=4]="DblClick",N[N.Focus=5]="Focus",N[N.Blur=6]="Blur",N[N.TouchStart=7]="TouchStart",N[N.TouchMove_Departed=8]="TouchMove_Departed",N[N.TouchEnd=9]="TouchEnd",N[N.TouchCancel=10]="TouchCancel",N))(Dt||{}),Vt=(N=>(N[N.Mouse=0]="Mouse",N[N.Pen=1]="Pen",N[N.Touch=2]="Touch",N))(Vt||{});function Yt(N){let x,$=N[0],te=1;for(;te<N.length;){const he=N[te],we=N[te+1];if(te+=2,(he==="optionalAccess"||he==="optionalCall")&&$==null)return;he==="access"||he==="optionalAccess"?(x=$,$=we($)):(he==="call"||he==="optionalCall")&&($=we((...We)=>$.call(x,...We)),x=void 0)}return $}s(Yt,"_optionalChain$3");function pn(N){return"__ln"in N}s(pn,"isNodeInLinkedList");class dn{constructor(){this.length=0,this.head=null,this.tail=null}get(x){if(x>=this.length)throw new Error("Position outside of list range");let $=this.head;for(let te=0;te<x;te++)$=Yt([$,"optionalAccess",he=>he.next])||null;return $}addNode(x){const $={value:x,previous:null,next:null};if(x.__ln=$,x.previousSibling&&pn(x.previousSibling)){const te=x.previousSibling.__ln.next;$.next=te,$.previous=x.previousSibling.__ln,x.previousSibling.__ln.next=$,te&&(te.previous=$)}else if(x.nextSibling&&pn(x.nextSibling)&&x.nextSibling.__ln.previous){const te=x.nextSibling.__ln.previous;$.previous=te,$.next=x.nextSibling.__ln,x.nextSibling.__ln.previous=$,te&&(te.next=$)}else this.head&&(this.head.previous=$),$.next=this.head,this.head=$;$.next===null&&(this.tail=$),this.length++}removeNode(x){const $=x.__ln;this.head&&($.previous?($.previous.next=$.next,$.next?$.next.previous=$.previous:this.tail=$.previous):(this.head=$.next,this.head?this.head.previous=null:this.tail=null),x.__ln&&delete x.__ln,this.length--)}}s(dn,"DoubleLinkedList");const An=s((N,x)=>`${N}@${x}`,"moveKey");class ci{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=x=>{x.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const x=[],$=new Set,te=new dn,he=s(Ne=>{let ht=Ne,Rt=rt;for(;Rt===rt;)ht=ht&&ht.nextSibling,Rt=ht&&this.mirror.getId(ht);return Rt},"getNextId"),we=s(Ne=>{if(!Ne.parentNode||!Ci(Ne))return;const ht=j(Ne.parentNode)?this.mirror.getId(ui(Ne)):this.mirror.getId(Ne.parentNode),Rt=he(Ne);if(ht===-1||Rt===-1)return te.addNode(Ne);const It=L(Ne,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:Lt=>{On(Lt,this.mirror)&&this.iframeManager.addIframe(Lt),nn(Lt,this.mirror)&&this.stylesheetManager.trackLinkElement(Lt),Bn(Ne)&&this.shadowDomManager.addShadowRoot(Ne.shadowRoot,this.doc)},onIframeLoad:(Lt,sn)=>{this.iframeManager.attachIframe(Lt,sn),this.shadowDomManager.observeAttachShadow(Lt)},onStylesheetLoad:(Lt,sn)=>{this.stylesheetManager.attachLinkElement(Lt,sn)}});It&&(x.push({parentId:ht,nextId:Rt,node:It}),$.add(It.id))},"pushAdd");for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const Ne of this.movedSet)Vi(this.removes,Ne,this.mirror)&&!this.movedSet.has(Ne.parentNode)||we(Ne);for(const Ne of this.addedSet)!pr(this.droppedSet,Ne)&&!Vi(this.removes,Ne,this.mirror)||pr(this.movedSet,Ne)?we(Ne):this.droppedSet.add(Ne);let We=null;for(;te.length;){let Ne=null;if(We){const ht=this.mirror.getId(We.value.parentNode),Rt=he(We.value);ht!==-1&&Rt!==-1&&(Ne=We)}if(!Ne){let ht=te.tail;for(;ht;){const Rt=ht;if(ht=ht.previous,Rt){const It=this.mirror.getId(Rt.value.parentNode);if(he(Rt.value)===-1)continue;if(It!==-1){Ne=Rt;break}else{const sn=Rt.value;if(sn.parentNode&&sn.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const rn=sn.parentNode.host;if(this.mirror.getId(rn)!==-1){Ne=Rt;break}}}}}}if(!Ne){for(;te.head;)te.removeNode(te.head.value);break}We=Ne.previous,te.removeNode(Ne.value),we(Ne.value)}const je={texts:this.texts.map(Ne=>({id:this.mirror.getId(Ne.node),value:Ne.value})).filter(Ne=>!$.has(Ne.id)).filter(Ne=>this.mirror.has(Ne.id)),attributes:this.attributes.map(Ne=>{const{attributes:ht}=Ne;if(typeof ht.style=="string"){const Rt=JSON.stringify(Ne.styleDiff),It=JSON.stringify(Ne._unchangedStyles);Rt.length<ht.style.length&&(Rt+It).split("var(").length===ht.style.split("var(").length&&(ht.style=Ne.styleDiff)}return{id:this.mirror.getId(Ne.node),attributes:ht}}).filter(Ne=>!$.has(Ne.id)).filter(Ne=>this.mirror.has(Ne.id)),removes:this.removes,adds:x};!je.texts.length&&!je.attributes.length&&!je.removes.length&&!je.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(je))},this.processMutation=x=>{if(!ai(x.target,this.mirror))switch(x.type){case"characterData":{const $=x.target.textContent;!gn(x.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&$!==x.oldValue&&this.texts.push({value:K(x.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&$?this.maskTextFn?this.maskTextFn($,zn(x.target)):$.replace(/[\S]/g,"*"):$,node:x.target});break}case"attributes":{const $=x.target;let te=x.attributeName,he=x.target.getAttribute(te);if(te==="value"){const We=Ye($),je=$.tagName;he=Ze($,je,We);const Ne=ze({maskInputOptions:this.maskInputOptions,tagName:je,type:We}),ht=K(x.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,Ne);he=nt({isMasked:ht,element:$,value:he,maskInputFn:this.maskInputFn})}if(gn(x.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||he===x.oldValue)return;let we=this.attributeMap.get(x.target);if($.tagName==="IFRAME"&&te==="src"&&!this.keepIframeSrcFn(he))if(!$.contentDocument)te="rr_src";else return;if(we||(we={node:x.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(we),this.attributeMap.set(x.target,we)),te==="type"&&$.tagName==="INPUT"&&(x.oldValue||"").toLowerCase()==="password"&&$.setAttribute("data-rr-is-password","true"),!Je($.tagName,te)&&(we.attributes[te]=Be(this.doc,mt($.tagName),mt(te),he,$,this.maskAttributeFn),te==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const We=this.unattachedDoc.createElement("span");x.oldValue&&We.setAttribute("style",x.oldValue);for(const je of Array.from($.style)){const Ne=$.style.getPropertyValue(je),ht=$.style.getPropertyPriority(je);Ne!==We.style.getPropertyValue(je)||ht!==We.style.getPropertyPriority(je)?ht===""?we.styleDiff[je]=Ne:we.styleDiff[je]=[Ne,ht]:we._unchangedStyles[je]=[Ne,ht]}for(const je of Array.from(We.style))$.style.getPropertyValue(je)===""&&(we.styleDiff[je]=!1)}break}case"childList":{if(gn(x.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;x.addedNodes.forEach($=>this.genAdds($,x.target)),x.removedNodes.forEach($=>{const te=this.mirror.getId($),he=j(x.target)?this.mirror.getId(x.target.host):this.mirror.getId(x.target);gn(x.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ai($,this.mirror)||!gi($,this.mirror)||(this.addedSet.has($)?(ri(this.addedSet,$),this.droppedSet.add($)):this.addedSet.has(x.target)&&te===-1||yr(x.target,this.mirror)||(this.movedSet.has($)&&this.movedMap[An(te,he)]?ri(this.movedSet,$):this.removes.push({parentId:he,id:te,isShadow:j(x.target)&&W(x.target)?!0:void 0})),this.mapRemoves.push($))});break}}},this.genAdds=(x,$)=>{if(!this.processedNodeManager.inOtherBuffer(x,this)&&!(this.addedSet.has(x)||this.movedSet.has(x))){if(this.mirror.hasNode(x)){if(ai(x,this.mirror))return;this.movedSet.add(x);let te=null;$&&this.mirror.hasNode($)&&(te=this.mirror.getId($)),te&&te!==-1&&(this.movedMap[An(this.mirror.getId(x),te)]=!0)}else this.addedSet.add(x),this.droppedSet.delete(x);gn(x,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(x.childNodes.forEach(te=>this.genAdds(te)),Bn(x)&&x.shadowRoot.childNodes.forEach(te=>{this.processedNodeManager.add(te,this),this.genAdds(te,x)}))}}}init(x){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach($=>{this[$]=x[$]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}s(ci,"MutationBuffer");function ri(N,x){N.delete(x),x.childNodes.forEach($=>ri(N,$))}s(ri,"deepDelete");function Vi(N,x,$){return N.length===0?!1:Zi(N,x,$)}s(Vi,"isParentRemoved");function Zi(N,x,$){const{parentNode:te}=x;if(!te)return!1;const he=$.getId(te);return N.some(we=>we.id===he)?!0:Zi(N,te,$)}s(Zi,"_isParentRemoved");function pr(N,x){return N.size===0?!1:Or(N,x)}s(pr,"isAncestorInSet");function Or(N,x){const{parentNode:$}=x;return $?N.has($)?!0:Or(N,$):!1}s(Or,"_isAncestorInSet");let Ar;function Xr(N){Ar=N}s(Xr,"registerErrorHandler");function tr(){Ar=void 0}s(tr,"unregisterErrorHandler");const kn=s(N=>Ar?s((...$)=>{try{return N(...$)}catch(te){if(Ar&&Ar(te)===!0)return()=>{};throw te}},"rrwebWrapped"):N,"callbackWrapper");function Mi(N){let x,$=N[0],te=1;for(;te<N.length;){const he=N[te],we=N[te+1];if(te+=2,(he==="optionalAccess"||he==="optionalCall")&&$==null)return;he==="access"||he==="optionalAccess"?(x=$,$=we($)):(he==="call"||he==="optionalCall")&&($=we((...We)=>$.call(x,...We)),x=void 0)}return $}s(Mi,"_optionalChain$2");const Hi=[];function $i(N){try{if("composedPath"in N){const x=N.composedPath();if(x.length)return x[0]}else if("path"in N&&N.path.length)return N.path[0]}catch{}return N&&N.target}s($i,"getEventTarget");function qi(N,x){const $=new ci;Hi.push($),$.init(N);let te=window.MutationObserver||window.__rrMutationObserver;const he=Mi([window,"optionalAccess",We=>We.Zone,"optionalAccess",We=>We.__symbol__,"optionalCall",We=>We("MutationObserver")]);he&&window[he]&&(te=window[he]);const we=new te(kn(We=>{N.onMutation&&N.onMutation(We)===!1||$.processMutations.bind($)(We)}));return we.observe(x,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),we}s(qi,"initMutationObserver");function Er({mousemoveCb:N,sampling:x,doc:$,mirror:te}){if(x.mousemove===!1)return()=>{};const he=typeof x.mousemove=="number"?x.mousemove:50,we=typeof x.mousemoveCallback=="number"?x.mousemoveCallback:500;let We=[],je;const Ne=qe(kn(It=>{const Lt=Date.now()-je;N(We.map(sn=>(sn.timeOffset-=Lt,sn)),It),We=[],je=null}),we),ht=kn(qe(kn(It=>{const Lt=$i(It),{clientX:sn,clientY:rn}=Bt(It)?It.changedTouches[0]:It;je||(je=xt()),We.push({x:sn,y:rn,id:te.getId(Lt),timeOffset:xt()-je}),Ne(typeof DragEvent<"u"&&It instanceof DragEvent?st.Drag:It instanceof MouseEvent?st.MouseMove:st.TouchMove)}),he,{trailing:!1})),Rt=[Ie("mousemove",ht,$),Ie("touchmove",ht,$),Ie("drag",ht,$)];return kn(()=>{Rt.forEach(It=>It())})}s(Er,"initMoveObserver");function Wr({mouseInteractionCb:N,doc:x,mirror:$,blockClass:te,blockSelector:he,unblockSelector:we,sampling:We}){if(We.mouseInteraction===!1)return()=>{};const je=We.mouseInteraction===!0||We.mouseInteraction===void 0?{}:We.mouseInteraction,Ne=[];let ht=null;const Rt=s(It=>Lt=>{const sn=$i(Lt);if(gn(sn,te,he,we,!0))return;let rn=null,Cn=It;if("pointerType"in Lt){switch(Lt.pointerType){case"mouse":rn=Vt.Mouse;break;case"touch":rn=Vt.Touch;break;case"pen":rn=Vt.Pen;break}rn===Vt.Touch?Dt[It]===Dt.MouseDown?Cn="TouchStart":Dt[It]===Dt.MouseUp&&(Cn="TouchEnd"):Vt.Pen}else Bt(Lt)&&(rn=Vt.Touch);rn!==null?(ht=rn,(Cn.startsWith("Touch")&&rn===Vt.Touch||Cn.startsWith("Mouse")&&rn===Vt.Mouse)&&(rn=null)):Dt[It]===Dt.Click&&(rn=ht,ht=null);const Hn=Bt(Lt)?Lt.changedTouches[0]:Lt;if(!Hn)return;const Rn=$.getId(sn),{clientX:di,clientY:Di}=Hn;kn(N)({type:Dt[Cn],id:Rn,x:di,y:Di,...rn!==null&&{pointerType:rn}})},"getHandler");return Object.keys(Dt).filter(It=>Number.isNaN(Number(It))&&!It.endsWith("_Departed")&&je[It]!==!1).forEach(It=>{let Lt=mt(It);const sn=Rt(It);if(window.PointerEvent)switch(Dt[It]){case Dt.MouseDown:case Dt.MouseUp:Lt=Lt.replace("mouse","pointer");break;case Dt.TouchStart:case Dt.TouchEnd:return}Ne.push(Ie(Lt,sn,x))}),kn(()=>{Ne.forEach(It=>It())})}s(Wr,"initMouseInteractionObserver");function hi({scrollCb:N,doc:x,mirror:$,blockClass:te,blockSelector:he,unblockSelector:we,sampling:We}){const je=kn(qe(kn(Ne=>{const ht=$i(Ne);if(!ht||gn(ht,te,he,we,!0))return;const Rt=$.getId(ht);if(ht===x&&x.defaultView){const It=Ui(x.defaultView);N({id:Rt,x:It.left,y:It.top})}else N({id:Rt,x:ht.scrollLeft,y:ht.scrollTop})}),We.scroll||100));return Ie("scroll",je,x)}s(hi,"initScrollObserver");function Ki({viewportResizeCb:N},{win:x}){let $=-1,te=-1;const he=kn(qe(kn(()=>{const we=_i(),We=bn();($!==we||te!==We)&&(N({width:Number(We),height:Number(we)}),$=we,te=We)}),200));return Ie("resize",he,x)}s(Ki,"initViewportResizeObserver");const ur=["INPUT","TEXTAREA","SELECT"],pe=new WeakMap;function Ce({inputCb:N,doc:x,mirror:$,blockClass:te,blockSelector:he,unblockSelector:we,ignoreClass:We,ignoreSelector:je,maskInputOptions:Ne,maskInputFn:ht,sampling:Rt,userTriggeredOnInput:It,maskTextClass:Lt,unmaskTextClass:sn,maskTextSelector:rn,unmaskTextSelector:Cn}){function Hn(Nn){let wi=$i(Nn);const hr=Nn.isTrusted,xn=wi&&gt(wi.tagName);if(xn==="OPTION"&&(wi=wi.parentElement),!wi||!xn||ur.indexOf(xn)<0||gn(wi,te,he,we,!0))return;const mi=wi;if(mi.classList.contains(We)||je&&mi.matches(je))return;const ir=Ye(wi);let Pr=Ze(mi,xn,ir),Tr=!1;const eo=ze({maskInputOptions:Ne,tagName:xn,type:ir}),Gi=K(wi,Lt,rn,sn,Cn,eo);(ir==="radio"||ir==="checkbox")&&(Tr=wi.checked),Pr=nt({isMasked:Gi,element:wi,value:Pr,maskInputFn:ht}),Rn(wi,It?{text:Pr,isChecked:Tr,userTriggered:hr}:{text:Pr,isChecked:Tr});const fo=wi.name;ir==="radio"&&fo&&Tr&&x.querySelectorAll(`input[type="radio"][name="${fo}"]`).forEach(kr=>{if(kr!==wi){const so=nt({isMasked:Gi,element:kr,value:Ze(kr,xn,ir),maskInputFn:ht});Rn(kr,It?{text:so,isChecked:!Tr,userTriggered:!1}:{text:so,isChecked:!Tr})}})}s(Hn,"eventHandler");function Rn(Nn,wi){const hr=pe.get(Nn);if(!hr||hr.text!==wi.text||hr.isChecked!==wi.isChecked){pe.set(Nn,wi);const xn=$.getId(Nn);kn(N)({...wi,id:xn})}}s(Rn,"cbWithDedup");const Di=(Rt.input==="last"?["change"]:["input","change"]).map(Nn=>Ie(Nn,kn(Hn),x)),Ni=x.defaultView;if(!Ni)return()=>{Di.forEach(Nn=>Nn())};const nr=Ni.Object.getOwnPropertyDescriptor(Ni.HTMLInputElement.prototype,"value"),pi=[[Ni.HTMLInputElement.prototype,"value"],[Ni.HTMLInputElement.prototype,"checked"],[Ni.HTMLSelectElement.prototype,"value"],[Ni.HTMLTextAreaElement.prototype,"value"],[Ni.HTMLSelectElement.prototype,"selectedIndex"],[Ni.HTMLOptionElement.prototype,"selected"]];return nr&&nr.set&&Di.push(...pi.map(Nn=>ft(Nn[0],Nn[1],{set(){kn(Hn)({target:this,isTrusted:!1})}},!1,Ni))),kn(()=>{Di.forEach(Nn=>Nn())})}s(Ce,"initInputObserver");function Le(N){const x=[];function $(te,he){if(oi("CSSGroupingRule")&&te.parentRule instanceof CSSGroupingRule||oi("CSSMediaRule")&&te.parentRule instanceof CSSMediaRule||oi("CSSSupportsRule")&&te.parentRule instanceof CSSSupportsRule||oi("CSSConditionRule")&&te.parentRule instanceof CSSConditionRule){const We=Array.from(te.parentRule.cssRules).indexOf(te);he.unshift(We)}else if(te.parentStyleSheet){const We=Array.from(te.parentStyleSheet.cssRules).indexOf(te);he.unshift(We)}return he}return s($,"recurse"),$(N,x)}s(Le,"getNestedCSSRulePositions");function tt(N,x,$){let te,he;return N?(N.ownerNode?te=x.getId(N.ownerNode):he=$.getId(N),{styleId:he,id:te}):{}}s(tt,"getIdAndStyleId");function ct({styleSheetRuleCb:N,mirror:x,stylesheetManager:$},{win:te}){if(!te.CSSStyleSheet||!te.CSSStyleSheet.prototype)return()=>{};const he=te.CSSStyleSheet.prototype.insertRule;te.CSSStyleSheet.prototype.insertRule=new Proxy(he,{apply:kn((Rt,It,Lt)=>{const[sn,rn]=Lt,{id:Cn,styleId:Hn}=tt(It,x,$.styleMirror);return(Cn&&Cn!==-1||Hn&&Hn!==-1)&&N({id:Cn,styleId:Hn,adds:[{rule:sn,index:rn}]}),Rt.apply(It,Lt)})});const we=te.CSSStyleSheet.prototype.deleteRule;te.CSSStyleSheet.prototype.deleteRule=new Proxy(we,{apply:kn((Rt,It,Lt)=>{const[sn]=Lt,{id:rn,styleId:Cn}=tt(It,x,$.styleMirror);return(rn&&rn!==-1||Cn&&Cn!==-1)&&N({id:rn,styleId:Cn,removes:[{index:sn}]}),Rt.apply(It,Lt)})});let We;te.CSSStyleSheet.prototype.replace&&(We=te.CSSStyleSheet.prototype.replace,te.CSSStyleSheet.prototype.replace=new Proxy(We,{apply:kn((Rt,It,Lt)=>{const[sn]=Lt,{id:rn,styleId:Cn}=tt(It,x,$.styleMirror);return(rn&&rn!==-1||Cn&&Cn!==-1)&&N({id:rn,styleId:Cn,replace:sn}),Rt.apply(It,Lt)})}));let je;te.CSSStyleSheet.prototype.replaceSync&&(je=te.CSSStyleSheet.prototype.replaceSync,te.CSSStyleSheet.prototype.replaceSync=new Proxy(je,{apply:kn((Rt,It,Lt)=>{const[sn]=Lt,{id:rn,styleId:Cn}=tt(It,x,$.styleMirror);return(rn&&rn!==-1||Cn&&Cn!==-1)&&N({id:rn,styleId:Cn,replaceSync:sn}),Rt.apply(It,Lt)})}));const Ne={};mn("CSSGroupingRule")?Ne.CSSGroupingRule=te.CSSGroupingRule:(mn("CSSMediaRule")&&(Ne.CSSMediaRule=te.CSSMediaRule),mn("CSSConditionRule")&&(Ne.CSSConditionRule=te.CSSConditionRule),mn("CSSSupportsRule")&&(Ne.CSSSupportsRule=te.CSSSupportsRule));const ht={};return Object.entries(Ne).forEach(([Rt,It])=>{ht[Rt]={insertRule:It.prototype.insertRule,deleteRule:It.prototype.deleteRule},It.prototype.insertRule=new Proxy(ht[Rt].insertRule,{apply:kn((Lt,sn,rn)=>{const[Cn,Hn]=rn,{id:Rn,styleId:di}=tt(sn.parentStyleSheet,x,$.styleMirror);return(Rn&&Rn!==-1||di&&di!==-1)&&N({id:Rn,styleId:di,adds:[{rule:Cn,index:[...Le(sn),Hn||0]}]}),Lt.apply(sn,rn)})}),It.prototype.deleteRule=new Proxy(ht[Rt].deleteRule,{apply:kn((Lt,sn,rn)=>{const[Cn]=rn,{id:Hn,styleId:Rn}=tt(sn.parentStyleSheet,x,$.styleMirror);return(Hn&&Hn!==-1||Rn&&Rn!==-1)&&N({id:Hn,styleId:Rn,removes:[{index:[...Le(sn),Cn]}]}),Lt.apply(sn,rn)})})}),kn(()=>{te.CSSStyleSheet.prototype.insertRule=he,te.CSSStyleSheet.prototype.deleteRule=we,We&&(te.CSSStyleSheet.prototype.replace=We),je&&(te.CSSStyleSheet.prototype.replaceSync=je),Object.entries(Ne).forEach(([Rt,It])=>{It.prototype.insertRule=ht[Rt].insertRule,It.prototype.deleteRule=ht[Rt].deleteRule})})}s(ct,"initStyleSheetObserver");function pt({mirror:N,stylesheetManager:x},$){let te=null;$.nodeName==="#document"?te=N.getId($):te=N.getId($.host);const he=$.nodeName==="#document"?Mi([$,"access",We=>We.defaultView,"optionalAccess",We=>We.Document]):Mi([$,"access",We=>We.ownerDocument,"optionalAccess",We=>We.defaultView,"optionalAccess",We=>We.ShadowRoot]),we=Mi([he,"optionalAccess",We=>We.prototype])?Object.getOwnPropertyDescriptor(Mi([he,"optionalAccess",We=>We.prototype]),"adoptedStyleSheets"):void 0;return te===null||te===-1||!he||!we?()=>{}:(Object.defineProperty($,"adoptedStyleSheets",{configurable:we.configurable,enumerable:we.enumerable,get(){return Mi([we,"access",We=>We.get,"optionalAccess",We=>We.call,"call",We=>We(this)])},set(We){const je=Mi([we,"access",Ne=>Ne.set,"optionalAccess",Ne=>Ne.call,"call",Ne=>Ne(this,We)]);if(te!==null&&te!==-1)try{x.adoptStyleSheets(We,te)}catch{}return je}}),kn(()=>{Object.defineProperty($,"adoptedStyleSheets",{configurable:we.configurable,enumerable:we.enumerable,get:we.get,set:we.set})}))}s(pt,"initAdoptedStyleSheetObserver");function Zt({styleDeclarationCb:N,mirror:x,ignoreCSSAttributes:$,stylesheetManager:te},{win:he}){const we=he.CSSStyleDeclaration.prototype.setProperty;he.CSSStyleDeclaration.prototype.setProperty=new Proxy(we,{apply:kn((je,Ne,ht)=>{const[Rt,It,Lt]=ht;if($.has(Rt))return we.apply(Ne,[Rt,It,Lt]);const{id:sn,styleId:rn}=tt(Mi([Ne,"access",Cn=>Cn.parentRule,"optionalAccess",Cn=>Cn.parentStyleSheet]),x,te.styleMirror);return(sn&&sn!==-1||rn&&rn!==-1)&&N({id:sn,styleId:rn,set:{property:Rt,value:It,priority:Lt},index:Le(Ne.parentRule)}),je.apply(Ne,ht)})});const We=he.CSSStyleDeclaration.prototype.removeProperty;return he.CSSStyleDeclaration.prototype.removeProperty=new Proxy(We,{apply:kn((je,Ne,ht)=>{const[Rt]=ht;if($.has(Rt))return We.apply(Ne,[Rt]);const{id:It,styleId:Lt}=tt(Mi([Ne,"access",sn=>sn.parentRule,"optionalAccess",sn=>sn.parentStyleSheet]),x,te.styleMirror);return(It&&It!==-1||Lt&&Lt!==-1)&&N({id:It,styleId:Lt,remove:{property:Rt},index:Le(Ne.parentRule)}),je.apply(Ne,ht)})}),kn(()=>{he.CSSStyleDeclaration.prototype.setProperty=we,he.CSSStyleDeclaration.prototype.removeProperty=We})}s(Zt,"initStyleDeclarationObserver");function an({mediaInteractionCb:N,blockClass:x,blockSelector:$,unblockSelector:te,mirror:he,sampling:we,doc:We}){const je=kn(ht=>qe(kn(Rt=>{const It=$i(Rt);if(!It||gn(It,x,$,te,!0))return;const{currentTime:Lt,volume:sn,muted:rn,playbackRate:Cn}=It;N({type:ht,id:he.getId(It),currentTime:Lt,volume:sn,muted:rn,playbackRate:Cn})}),we.media||500)),Ne=[Ie("play",je(0),We),Ie("pause",je(1),We),Ie("seeked",je(2),We),Ie("volumechange",je(3),We),Ie("ratechange",je(4),We)];return kn(()=>{Ne.forEach(ht=>ht())})}s(an,"initMediaInteractionObserver");function ln({fontCb:N,doc:x}){const $=x.defaultView;if(!$)return()=>{};const te=[],he=new WeakMap,we=$.FontFace;$.FontFace=s(function(Ne,ht,Rt){const It=new we(Ne,ht,Rt);return he.set(It,{family:Ne,buffer:typeof ht!="string",descriptors:Rt,fontSource:typeof ht=="string"?ht:JSON.stringify(Array.from(new Uint8Array(ht)))}),It},"FontFace");const We=En(x.fonts,"add",function(je){return function(Ne){return ce(kn(()=>{const ht=he.get(Ne);ht&&(N(ht),he.delete(Ne))}),0),je.apply(this,[Ne])}});return te.push(()=>{$.FontFace=we}),te.push(We),kn(()=>{te.forEach(je=>je())})}s(ln,"initFontObserver");function Gt(N){const{doc:x,mirror:$,blockClass:te,blockSelector:he,unblockSelector:we,selectionCb:We}=N;let je=!0;const Ne=kn(()=>{const ht=x.getSelection();if(!ht||je&&Mi([ht,"optionalAccess",Lt=>Lt.isCollapsed]))return;je=ht.isCollapsed||!1;const Rt=[],It=ht.rangeCount||0;for(let Lt=0;Lt<It;Lt++){const sn=ht.getRangeAt(Lt),{startContainer:rn,startOffset:Cn,endContainer:Hn,endOffset:Rn}=sn;gn(rn,te,he,we,!0)||gn(Hn,te,he,we,!0)||Rt.push({start:$.getId(rn),startOffset:Cn,end:$.getId(Hn),endOffset:Rn})}We({ranges:Rt})});return Ne(),Ie("selectionchange",Ne)}s(Gt,"initSelectionObserver");function Fn({doc:N,customElementCb:x}){const $=N.defaultView;return!$||!$.customElements?()=>{}:En($.customElements,"define",function(he){return function(we,We,je){try{x({define:{name:we}})}catch{}return he.apply(this,[we,We,je])}})}s(Fn,"initCustomElementObserver");function bt(N,x={}){const $=N.doc.defaultView;if(!$)return()=>{};const te=qi(N,N.doc),he=Er(N),we=Wr(N),We=hi(N),je=Ki(N,{win:$}),Ne=Ce(N),ht=an(N),Rt=ct(N,{win:$}),It=pt(N,N.doc),Lt=Zt(N,{win:$}),sn=N.collectFonts?ln(N):()=>{},rn=Gt(N),Cn=Fn(N),Hn=[];for(const Rn of N.plugins)Hn.push(Rn.observer(Rn.callback,$,Rn.options));return kn(()=>{Hi.forEach(Rn=>Rn.reset()),te.disconnect(),he(),we(),We(),je(),Ne(),ht(),Rt(),It(),Lt(),sn(),rn(),Cn(),Hn.forEach(Rn=>Rn())})}s(bt,"initObservers");function oi(N){return typeof window[N]<"u"}s(oi,"hasNestedCSSRule");function mn(N){return Boolean(typeof window[N]<"u"&&window[N].prototype&&"insertRule"in window[N].prototype&&"deleteRule"in window[N].prototype)}s(mn,"canMonkeyPatchNestedCSSRule");class yi{constructor(x){this.generateIdFn=x,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(x,$,te,he){const we=te||this.getIdToRemoteIdMap(x),We=he||this.getRemoteIdToIdMap(x);let je=we.get($);return je||(je=this.generateIdFn(),we.set($,je),We.set(je,$)),je}getIds(x,$){const te=this.getIdToRemoteIdMap(x),he=this.getRemoteIdToIdMap(x);return $.map(we=>this.getId(x,we,te,he))}getRemoteId(x,$,te){const he=te||this.getRemoteIdToIdMap(x);if(typeof $!="number")return $;const we=he.get($);return we||-1}getRemoteIds(x,$){const te=this.getRemoteIdToIdMap(x);return $.map(he=>this.getRemoteId(x,he,te))}reset(x){if(!x){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(x),this.iframeRemoteIdToIdMap.delete(x)}getIdToRemoteIdMap(x){let $=this.iframeIdToRemoteIdMap.get(x);return $||($=new Map,this.iframeIdToRemoteIdMap.set(x,$)),$}getRemoteIdToIdMap(x){let $=this.iframeRemoteIdToIdMap.get(x);return $||($=new Map,this.iframeRemoteIdToIdMap.set(x,$)),$}}s(yi,"CrossOriginIframeMirror");function zi(N){let x,$=N[0],te=1;for(;te<N.length;){const he=N[te],we=N[te+1];if(te+=2,(he==="optionalAccess"||he==="optionalCall")&&$==null)return;he==="access"||he==="optionalAccess"?(x=$,$=we($)):(he==="call"||he==="optionalCall")&&($=we((...We)=>$.call(x,...We)),x=void 0)}return $}s(zi,"_optionalChain$1");class Ri{constructor(){this.crossOriginIframeMirror=new yi(Nt),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}s(Ri,"IframeManagerNoop");class Sn{constructor(x){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new yi(Nt),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=x.mutationCb,this.wrappedEmit=x.wrappedEmit,this.stylesheetManager=x.stylesheetManager,this.recordCrossOriginIframes=x.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new yi(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=x.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(x){this.iframes.set(x,!0),x.contentWindow&&this.crossOriginIframeMap.set(x.contentWindow,x)}addLoadListener(x){this.loadListener=x}attachIframe(x,$){this.mutationCb({adds:[{parentId:this.mirror.getId(x),nextId:null,node:$}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),zi([this,"access",te=>te.loadListener,"optionalCall",te=>te(x)]),x.contentDocument&&x.contentDocument.adoptedStyleSheets&&x.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(x.contentDocument.adoptedStyleSheets,this.mirror.getId(x.contentDocument))}handleMessage(x){const $=x;if($.data.type!=="rrweb"||$.origin!==$.data.origin||!x.source)return;const he=this.crossOriginIframeMap.get(x.source);if(!he)return;const we=this.transformCrossOriginEvent(he,$.data.event);we&&this.wrappedEmit(we,$.data.isCheckout)}transformCrossOriginEvent(x,$){switch($.type){case Ke.FullSnapshot:{this.crossOriginIframeMirror.reset(x),this.crossOriginIframeStyleMirror.reset(x),this.replaceIdOnNode($.data.node,x);const te=$.data.node.id;return this.crossOriginIframeRootIdMap.set(x,te),this.patchRootIdOnNode($.data.node,te),{timestamp:$.timestamp,type:Ke.IncrementalSnapshot,data:{source:st.Mutation,adds:[{parentId:this.mirror.getId(x),nextId:null,node:$.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Ke.Meta:case Ke.Load:case Ke.DomContentLoaded:return!1;case Ke.Plugin:return $;case Ke.Custom:return this.replaceIds($.data.payload,x,["id","parentId","previousId","nextId"]),$;case Ke.IncrementalSnapshot:switch($.data.source){case st.Mutation:return $.data.adds.forEach(te=>{this.replaceIds(te,x,["parentId","nextId","previousId"]),this.replaceIdOnNode(te.node,x);const he=this.crossOriginIframeRootIdMap.get(x);he&&this.patchRootIdOnNode(te.node,he)}),$.data.removes.forEach(te=>{this.replaceIds(te,x,["parentId","id"])}),$.data.attributes.forEach(te=>{this.replaceIds(te,x,["id"])}),$.data.texts.forEach(te=>{this.replaceIds(te,x,["id"])}),$;case st.Drag:case st.TouchMove:case st.MouseMove:return $.data.positions.forEach(te=>{this.replaceIds(te,x,["id"])}),$;case st.ViewportResize:return!1;case st.MediaInteraction:case st.MouseInteraction:case st.Scroll:case st.CanvasMutation:case st.Input:return this.replaceIds($.data,x,["id"]),$;case st.StyleSheetRule:case st.StyleDeclaration:return this.replaceIds($.data,x,["id"]),this.replaceStyleIds($.data,x,["styleId"]),$;case st.Font:return $;case st.Selection:return $.data.ranges.forEach(te=>{this.replaceIds(te,x,["start","end"])}),$;case st.AdoptedStyleSheet:return this.replaceIds($.data,x,["id"]),this.replaceStyleIds($.data,x,["styleIds"]),zi([$,"access",te=>te.data,"access",te=>te.styles,"optionalAccess",te=>te.forEach,"call",te=>te(he=>{this.replaceStyleIds(he,x,["styleId"])})]),$}}return!1}replace(x,$,te,he){for(const we of he)!Array.isArray($[we])&&typeof $[we]!="number"||(Array.isArray($[we])?$[we]=x.getIds(te,$[we]):$[we]=x.getId(te,$[we]));return $}replaceIds(x,$,te){return this.replace(this.crossOriginIframeMirror,x,$,te)}replaceStyleIds(x,$,te){return this.replace(this.crossOriginIframeStyleMirror,x,$,te)}replaceIdOnNode(x,$){this.replaceIds(x,$,["id","rootId"]),"childNodes"in x&&x.childNodes.forEach(te=>{this.replaceIdOnNode(te,$)})}patchRootIdOnNode(x,$){x.type!==D.Document&&!x.rootId&&(x.rootId=$),"childNodes"in x&&x.childNodes.forEach(te=>{this.patchRootIdOnNode(te,$)})}}s(Sn,"IframeManager");class Tn{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}s(Tn,"ShadowDomManagerNoop");class Kn{constructor(x){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=x.mutationCb,this.scrollCb=x.scrollCb,this.bypassOptions=x.bypassOptions,this.mirror=x.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(x,$){if(!W(x)||this.shadowDoms.has(x))return;this.shadowDoms.add(x);const te=qi({...this.bypassOptions,doc:$,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},x);this.restoreHandlers.push(()=>te.disconnect()),this.restoreHandlers.push(hi({...this.bypassOptions,scrollCb:this.scrollCb,doc:x,mirror:this.mirror})),ce(()=>{x.adoptedStyleSheets&&x.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(x.adoptedStyleSheets,this.mirror.getId(x.host)),this.restoreHandlers.push(pt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},x))},0)}observeAttachShadow(x){!x.contentWindow||!x.contentDocument||this.patchAttachShadow(x.contentWindow.Element,x.contentDocument)}patchAttachShadow(x,$){const te=this;this.restoreHandlers.push(En(x.prototype,"attachShadow",function(he){return function(we){const We=he.call(this,we);return this.shadowRoot&&Ci(this)&&te.addShadowRoot(this.shadowRoot,$),We}}))}reset(){this.restoreHandlers.forEach(x=>{try{x()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}s(Kn,"ShadowDomManager");class Si{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}s(Si,"CanvasManagerNoop");class lr{constructor(x){this.trackedLinkElements=new WeakSet,this.styleMirror=new li,this.mutationCb=x.mutationCb,this.adoptedStyleSheetCb=x.adoptedStyleSheetCb}attachLinkElement(x,$){"_cssText"in $.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:$.id,attributes:$.attributes}]}),this.trackLinkElement(x)}trackLinkElement(x){this.trackedLinkElements.has(x)||(this.trackedLinkElements.add(x),this.trackStylesheetInLinkElement(x))}adoptStyleSheets(x,$){if(x.length===0)return;const te={id:$,styleIds:[]},he=[];for(const we of x){let We;this.styleMirror.has(we)?We=this.styleMirror.getId(we):(We=this.styleMirror.add(we),he.push({styleId:We,rules:Array.from(we.rules||CSSRule,(je,Ne)=>({rule:oe(je),index:Ne}))})),te.styleIds.push(We)}he.length>0&&(te.styles=he),this.adoptedStyleSheetCb(te)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(x){}}s(lr,"StylesheetManager");class mr{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){U(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(x,$){const te=this.nodeMap.get(x);return te&&Array.from(te).some(he=>he!==$)}add(x,$){this.nodeMap.set(x,(this.nodeMap.get(x)||new Set).add($))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}s(mr,"ProcessedNodeManager");let jn,Lr;const Ii=$e();function gr(N={}){const{emit:x,checkoutEveryNms:$,checkoutEveryNth:te,blockClass:he="rr-block",blockSelector:we=null,unblockSelector:We=null,ignoreClass:je="rr-ignore",ignoreSelector:Ne=null,maskAllText:ht=!1,maskTextClass:Rt="rr-mask",unmaskTextClass:It=null,maskTextSelector:Lt=null,unmaskTextSelector:sn=null,inlineStylesheet:rn=!0,maskAllInputs:Cn,maskInputOptions:Hn,slimDOMOptions:Rn,maskAttributeFn:di,maskInputFn:Di,maskTextFn:Ni,maxCanvasSize:nr=null,packFn:pi,sampling:Nn={},dataURLOptions:wi={},mousemoveWait:hr,recordCanvas:xn=!1,recordCrossOriginIframes:mi=!1,recordAfter:ir=N.recordAfter==="DOMContentLoaded"?N.recordAfter:"load",userTriggeredOnInput:Pr=!1,collectFonts:Tr=!1,inlineImages:eo=!1,plugins:Gi,keepIframeSrcFn:fo=s(()=>!1,"keepIframeSrcFn"),ignoreCSSAttributes:kr=new Set([]),errorHandler:so,onMutation:$r,getCanvasManager:Po}=N;Xr(so);const Ho=mi?window.parent===window:!0;let Fs=!1;if(!Ho)try{window.parent.document&&(Fs=!1)}catch{Fs=!0}if(Ho&&!x)throw new Error("emit function is required");hr!==void 0&&Nn.mousemove===void 0&&(Nn.mousemove=hr),Ii.reset();const Kr=Cn===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:Hn!==void 0?Hn:{},Wo=Rn===!0||Rn==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:Rn==="all",headMetaDescKeywords:Rn==="all"}:Rn||{};Et();let ns,Us=0;const Ja=s(Wi=>{for(const Eo of Gi||[])Eo.eventProcessor&&(Wi=Eo.eventProcessor(Wi));return pi&&!Fs&&(Wi=pi(Wi)),Wi},"eventProcessor");jn=s((Wi,Eo)=>{const Li=Wi;if(Li.timestamp=xt(),p([Hi,"access",rr=>rr[0],"optionalAccess",rr=>rr.isFrozen,"call",rr=>rr()])&&Li.type!==Ke.FullSnapshot&&!(Li.type===Ke.IncrementalSnapshot&&Li.data.source===st.Mutation)&&Hi.forEach(rr=>rr.unfreeze()),Ho)p([x,"optionalCall",rr=>rr(Ja(Li),Eo)]);else if(Fs){const rr={type:"rrweb",event:Ja(Li),origin:window.location.origin,isCheckout:Eo};window.parent.postMessage(rr,"*")}if(Li.type===Ke.FullSnapshot)ns=Li,Us=0;else if(Li.type===Ke.IncrementalSnapshot){if(Li.data.source===st.Mutation&&Li.data.isAttachIframe)return;Us++;const rr=te&&Us>=te,Pi=$&&ns&&Li.timestamp-ns.timestamp>$;(rr||Pi)&&ya(!0)}},"wrappedEmit");const Vs=s(Wi=>{jn({type:Ke.IncrementalSnapshot,data:{source:st.Mutation,...Wi}})},"wrappedMutationEmit"),Ya=s(Wi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.Scroll,...Wi}}),"wrappedScrollEmit"),Ec=s(Wi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.CanvasMutation,...Wi}}),"wrappedCanvasMutationEmit"),bc=s(Wi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.AdoptedStyleSheet,...Wi}}),"wrappedAdoptedStyleSheetEmit"),Qr=new lr({mutationCb:Vs,adoptedStyleSheetCb:bc}),zo=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Ri:new Sn({mirror:Ii,mutationCb:Vs,stylesheetManager:Qr,recordCrossOriginIframes:mi,wrappedEmit:jn});for(const Wi of Gi||[])Wi.getMirror&&Wi.getMirror({nodeMirror:Ii,crossOriginIframeMirror:zo.crossOriginIframeMirror,crossOriginIframeStyleMirror:zo.crossOriginIframeStyleMirror});const va=new mr,Xa=bo(Po,{mirror:Ii,win:window,mutationCb:Wi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.CanvasMutation,...Wi}}),recordCanvas:xn,blockClass:he,blockSelector:we,unblockSelector:We,maxCanvasSize:nr,sampling:Nn.canvas,dataURLOptions:wi,errorHandler:so}),Hs=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Tn:new Kn({mutationCb:Vs,scrollCb:Ya,bypassOptions:{onMutation:$r,blockClass:he,blockSelector:we,unblockSelector:We,maskAllText:ht,maskTextClass:Rt,unmaskTextClass:It,maskTextSelector:Lt,unmaskTextSelector:sn,inlineStylesheet:rn,maskInputOptions:Kr,dataURLOptions:wi,maskAttributeFn:di,maskTextFn:Ni,maskInputFn:Di,recordCanvas:xn,inlineImages:eo,sampling:Nn,slimDOMOptions:Wo,iframeManager:zo,stylesheetManager:Qr,canvasManager:Xa,keepIframeSrcFn:fo,processedNodeManager:va},mirror:Ii}),ya=s((Wi=!1)=>{jn({type:Ke.Meta,data:{href:window.location.href,width:bn(),height:_i()}},Wi),Qr.reset(),Hs.init(),Hi.forEach(Li=>Li.lock());const Eo=ve(document,{mirror:Ii,blockClass:he,blockSelector:we,unblockSelector:We,maskAllText:ht,maskTextClass:Rt,unmaskTextClass:It,maskTextSelector:Lt,unmaskTextSelector:sn,inlineStylesheet:rn,maskAllInputs:Kr,maskAttributeFn:di,maskInputFn:Di,maskTextFn:Ni,slimDOM:Wo,dataURLOptions:wi,recordCanvas:xn,inlineImages:eo,onSerialize:Li=>{On(Li,Ii)&&zo.addIframe(Li),nn(Li,Ii)&&Qr.trackLinkElement(Li),Bn(Li)&&Hs.addShadowRoot(Li.shadowRoot,document)},onIframeLoad:(Li,rr)=>{zo.attachIframe(Li,rr),Hs.observeAttachShadow(Li)},onStylesheetLoad:(Li,rr)=>{Qr.attachLinkElement(Li,rr)},keepIframeSrcFn:fo});if(!Eo)return console.warn("Failed to snapshot the document");jn({type:Ke.FullSnapshot,data:{node:Eo,initialOffset:Ui(window)}}),Hi.forEach(Li=>Li.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Qr.adoptStyleSheets(document.adoptedStyleSheets,Ii.getId(document))},"takeFullSnapshot");Lr=ya;try{const Wi=[],Eo=s(rr=>kn(bt)({onMutation:$r,mutationCb:Vs,mousemoveCb:(Pi,ko)=>jn({type:Ke.IncrementalSnapshot,data:{source:ko,positions:Pi}}),mouseInteractionCb:Pi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.MouseInteraction,...Pi}}),scrollCb:Ya,viewportResizeCb:Pi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.ViewportResize,...Pi}}),inputCb:Pi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.Input,...Pi}}),mediaInteractionCb:Pi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.MediaInteraction,...Pi}}),styleSheetRuleCb:Pi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.StyleSheetRule,...Pi}}),styleDeclarationCb:Pi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.StyleDeclaration,...Pi}}),canvasMutationCb:Ec,fontCb:Pi=>jn({type:Ke.IncrementalSnapshot,data:{source:st.Font,...Pi}}),selectionCb:Pi=>{jn({type:Ke.IncrementalSnapshot,data:{source:st.Selection,...Pi}})},customElementCb:Pi=>{jn({type:Ke.IncrementalSnapshot,data:{source:st.CustomElement,...Pi}})},blockClass:he,ignoreClass:je,ignoreSelector:Ne,maskAllText:ht,maskTextClass:Rt,unmaskTextClass:It,maskTextSelector:Lt,unmaskTextSelector:sn,maskInputOptions:Kr,inlineStylesheet:rn,sampling:Nn,recordCanvas:xn,inlineImages:eo,userTriggeredOnInput:Pr,collectFonts:Tr,doc:rr,maskAttributeFn:di,maskInputFn:Di,maskTextFn:Ni,keepIframeSrcFn:fo,blockSelector:we,unblockSelector:We,slimDOMOptions:Wo,dataURLOptions:wi,mirror:Ii,iframeManager:zo,stylesheetManager:Qr,shadowDomManager:Hs,processedNodeManager:va,canvasManager:Xa,ignoreCSSAttributes:kr,plugins:p([Gi,"optionalAccess",Pi=>Pi.filter,"call",Pi=>Pi(ko=>ko.observer),"optionalAccess",Pi=>Pi.map,"call",Pi=>Pi(ko=>({observer:ko.observer,options:ko.options,callback:Qa=>jn({type:Ke.Plugin,data:{plugin:ko.name,payload:Qa}})}))])||[]},{}),"observe");zo.addLoadListener(rr=>{try{Wi.push(Eo(rr.contentDocument))}catch(Pi){console.warn(Pi)}});const Li=s(()=>{ya(),Wi.push(Eo(document))},"init");return document.readyState==="interactive"||document.readyState==="complete"?Li():(Wi.push(Ie("DOMContentLoaded",()=>{jn({type:Ke.DomContentLoaded,data:{}}),ir==="DOMContentLoaded"&&Li()})),Wi.push(Ie("load",()=>{jn({type:Ke.Load,data:{}}),ir==="load"&&Li()},window))),()=>{Wi.forEach(rr=>rr()),va.destroy(),Lr=void 0,tr()}}catch(Wi){console.warn(Wi)}}s(gr,"record");function lo(N){if(!Lr)throw new Error("please take full snapshot after start recording");Lr(N)}s(lo,"takeFullSnapshot"),gr.mirror=Ii,gr.takeFullSnapshot=lo;function bo(N,x){try{return N?N(x):new Si}catch{return console.warn("Unable to initialize CanvasManager"),new Si}}s(bo,"_getCanvasManager");const Zr=3,co=5;function oo(N){return N>9999999999?N:N*1e3}s(oo,"timestampToMs");function So(N){return N>9999999999?N/1e3:N}s(So,"timestampToS");function br(N,x){x.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(x.category)?N.triggerUserActivity():N.checkAndHandleExpiredSession(),N.addUpdate(()=>(N.throttledAddEvent({type:Ke.Custom,timestamp:(x.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:g.normalize(x,10,1e3)}}),x.category==="console")))}s(br,"addBreadcrumbEvent");const zr="button,a";function uo(N){return N.closest(zr)||N}s(uo,"getClosestInteractive");function Xi(N){const x=xr(N);return!x||!(x instanceof Element)?x:uo(x)}s(Xi,"getClickTargetNode");function xr(N){return vo(N)?N.target:N}s(xr,"getTargetNode");function vo(N){return typeof N=="object"&&!!N&&"target"in N}s(vo,"isEventWithTarget");let qr;function _o(N){return qr||(qr=[],Bo()),qr.push(N),()=>{const x=qr?qr.indexOf(N):-1;x>-1&&qr.splice(x,1)}}s(_o,"onWindowOpen");function Bo(){g.fill(r,"open",function(N){return function(...x){if(qr)try{qr.forEach($=>$())}catch{}return N.apply(r,x)}})}s(Bo,"monkeyPatchWindowOpen");function Xo(N,x,$){N.handleClick(x,$)}s(Xo,"handleClick");class Fo{constructor(x,$,te=br){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=$.timeout/1e3,this._threshold=$.threshold/1e3,this._scollTimeout=$.scrollTimeout/1e3,this._replay=x,this._ignoreSelector=$.ignoreSelector,this._addBreadcrumbEvent=te}addListeners(){const x=_o(()=>{this._lastMutation=vr()});this._teardown=()=>{x(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(x,$){if(fr($,this._ignoreSelector)||!Sr(x))return;const te={timestamp:So(x.timestamp),clickBreadcrumb:x,clickCount:0,node:$};this._clicks.some(he=>he.node===te.node&&Math.abs(he.timestamp-te.timestamp)<1)||(this._clicks.push(te),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(x=Date.now()){this._lastMutation=So(x)}registerScroll(x=Date.now()){this._lastScroll=So(x)}registerClick(x){const $=uo(x);this._handleMultiClick($)}_handleMultiClick(x){this._getClicks(x).forEach($=>{$.clickCount++})}_getClicks(x){return this._clicks.filter($=>$.node===x)}_checkClicks(){const x=[],$=vr();this._clicks.forEach(te=>{!te.mutationAfter&&this._lastMutation&&(te.mutationAfter=te.timestamp<=this._lastMutation?this._lastMutation-te.timestamp:void 0),!te.scrollAfter&&this._lastScroll&&(te.scrollAfter=te.timestamp<=this._lastScroll?this._lastScroll-te.timestamp:void 0),te.timestamp+this._timeout<=$&&x.push(te)});for(const te of x){const he=this._clicks.indexOf(te);he>-1&&(this._generateBreadcrumbs(te),this._clicks.splice(he,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(x){const $=this._replay,te=x.scrollAfter&&x.scrollAfter<=this._scollTimeout,he=x.mutationAfter&&x.mutationAfter<=this._threshold,we=!te&&!he,{clickCount:We,clickBreadcrumb:je}=x;if(we){const Ne=Math.min(x.mutationAfter||this._timeout,this._timeout)*1e3,ht=Ne<this._timeout*1e3?"mutation":"timeout",Rt={type:"default",message:je.message,timestamp:je.timestamp,category:"ui.slowClickDetected",data:{...je.data,url:r.location.href,route:$.getCurrentRoute(),timeAfterClickMs:Ne,endReason:ht,clickCount:We||1}};this._addBreadcrumbEvent($,Rt);return}if(We>1){const Ne={type:"default",message:je.message,timestamp:je.timestamp,category:"ui.multiClick",data:{...je.data,url:r.location.href,route:$.getCurrentRoute(),clickCount:We,metric:!0}};this._addBreadcrumbEvent($,Ne)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}s(Fo,"ClickDetector");const Ji=["A","BUTTON","INPUT"];function fr(N,x){return!!(!Ji.includes(N.tagName)||N.tagName==="INPUT"&&!["submit","button"].includes(N.getAttribute("type")||"")||N.tagName==="A"&&(N.hasAttribute("download")||N.hasAttribute("target")&&N.getAttribute("target")!=="_self")||x&&N.matches(x))}s(fr,"ignoreElement");function Sr(N){return!!(N.data&&typeof N.data.nodeId=="number"&&N.timestamp)}s(Sr,"isClickBreadcrumb");function vr(){return Date.now()/1e3}s(vr,"nowInSeconds");function _r(N,x){try{if(!Mo(x))return;const{source:$}=x.data;if($===st.Mutation&&N.registerMutation(x.timestamp),$===st.Scroll&&N.registerScroll(x.timestamp),no(x)){const{type:te,id:he}=x.data,we=gr.mirror.getNode(he);we instanceof HTMLElement&&te===Dt.Click&&N.registerClick(we)}}catch{}}s(_r,"updateClickDetectorForRecordingEvent");function Mo(N){return N.type===Zr}s(Mo,"isIncrementalEvent");function no(N){return N.data.source===st.MouseInteraction}s(no,"isIncrementalMouseInteraction");function Mr(N){return{timestamp:Date.now()/1e3,type:"default",...N}}s(Mr,"createBreadcrumb");var Ro;(function(N){N[N.Document=0]="Document",N[N.DocumentType=1]="DocumentType",N[N.Element=2]="Element",N[N.Text=3]="Text",N[N.CDATA=4]="CDATA",N[N.Comment=5]="Comment"})(Ro||(Ro={}));const Os=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function As(N){const x={};!N["data-sentry-component"]&&N["data-sentry-element"]&&(N["data-sentry-component"]=N["data-sentry-element"]);for(const $ in N)if(Os.has($)){let te=$;($==="data-testid"||$==="data-test-id")&&(te="testId"),x[te]=N[$]}return x}s(As,"getAttributesToRecord");const ia=s(N=>x=>{if(!N.isEnabled())return;const $=cs(x);if(!$)return;const te=x.name==="click",he=te?x.event:void 0;te&&N.clickDetector&&he&&he.target&&!he.altKey&&!he.metaKey&&!he.ctrlKey&&!he.shiftKey&&Xo(N.clickDetector,$,Xi(x.event)),br(N,$)},"handleDomListener");function Qo(N,x){const $=gr.mirror.getId(N),te=$&&gr.mirror.getNode($),he=te&&gr.mirror.getMeta(te),we=he&&ds(he)?he:null;return{message:x,data:we?{nodeId:$,node:{id:$,tagName:we.tagName,textContent:Array.from(we.childNodes).map(We=>We.type===Ro.Text&&We.textContent).filter(Boolean).map(We=>We.trim()).join(""),attributes:As(we.attributes)}}:{}}}s(Qo,"getBaseDomBreadcrumb");function cs(N){const{target:x,message:$}=Ms(N);return Mr({category:`ui.${N.name}`,...Qo(x,$)})}s(cs,"handleDom");function Ms(N){const x=N.name==="click";let $,te=null;try{te=x?Xi(N.event):xr(N.event),$=g.htmlTreeAsString(te,{maxStringLength:200})||"<unknown>"}catch{$="<unknown>"}return{target:te,message:$}}s(Ms,"getDomTarget");function ds(N){return N.type===Ro.Element}s(ds,"isElement");function Rs(N,x){if(!N.isEnabled())return;N.updateUserActivity();const $=Zo(x);$&&br(N,$)}s(Rs,"handleKeyboardEvent");function Zo(N){const{metaKey:x,shiftKey:$,ctrlKey:te,altKey:he,key:we,target:We}=N;if(!We||us(We)||!we)return null;const je=x||te||he,Ne=we.length===1;if(!je&&Ne)return null;const ht=g.htmlTreeAsString(We,{maxStringLength:200})||"<unknown>",Rt=Qo(We,ht);return Mr({category:"ui.keyDown",message:ht,data:{...Rt.data,metaKey:x,shiftKey:$,ctrlKey:te,altKey:he,key:we}})}s(Zo,"getKeyboardBreadcrumb");function us(N){return N.tagName==="INPUT"||N.tagName==="TEXTAREA"||N.isContentEditable}s(us,"isInputElement");const fs={resource:ps,paint:ks,navigation:hs};function Ps(N){return N.map(ra).filter(Boolean)}s(Ps,"createPerformanceEntries");function ra(N){return fs[N.entryType]?fs[N.entryType](N):null}s(ra,"createPerformanceEntry");function To(N){return((g.browserPerformanceTimeOrigin||r.performance.timeOrigin)+N)/1e3}s(To,"getAbsoluteTime");function ks(N){const{duration:x,entryType:$,name:te,startTime:he}=N,we=To(he);return{type:$,name:te,start:we,end:we+x,data:void 0}}s(ks,"createPaintEntry");function hs(N){const{entryType:x,name:$,decodedBodySize:te,duration:he,domComplete:we,encodedBodySize:We,domContentLoadedEventStart:je,domContentLoadedEventEnd:Ne,domInteractive:ht,loadEventStart:Rt,loadEventEnd:It,redirectCount:Lt,startTime:sn,transferSize:rn,type:Cn}=N;return he===0?null:{type:`${x}.${Cn}`,start:To(sn),end:To(we),name:$,data:{size:rn,decodedBodySize:te,encodedBodySize:We,duration:he,domInteractive:ht,domContentLoadedEventStart:je,domContentLoadedEventEnd:Ne,loadEventStart:Rt,loadEventEnd:It,domComplete:we,redirectCount:Lt}}}s(hs,"createNavigationEntry");function ps(N){const{entryType:x,initiatorType:$,name:te,responseEnd:he,startTime:we,decodedBodySize:We,encodedBodySize:je,responseStatus:Ne,transferSize:ht}=N;return["fetch","xmlhttprequest"].includes($)?null:{type:`${x}.${$}`,start:To(we),end:To(he),name:te,data:{size:ht,statusCode:Ne,decodedBodySize:We,encodedBodySize:je}}}s(ps,"createResourceEntry");function ms(N){const x=N.entries,$=x[x.length-1],te=$?$.element:void 0,he=N.value,we=To(he);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:we,end:we,data:{value:he,size:he,nodeId:te?gr.mirror.getId(te):void 0}}}s(ms,"getLargestContentfulPaint");function Ds(N){function x(he){N.performanceEntries.includes(he)||N.performanceEntries.push(he)}s(x,"addPerformanceEntry");function $({entries:he}){he.forEach(x)}s($,"onEntries");const te=[];return["navigation","paint","resource"].forEach(he=>{te.push(l.addPerformanceInstrumentationHandler(he,$))}),te.push(l.addLcpInstrumentationHandler(({metric:he})=>{N.replayPerformanceEntries.push(ms(he))})),()=>{te.forEach(he=>he())}}s(Ds,"setupPerformanceObserver");const ki=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ns='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function gs(){const N=new Blob([Ns]);return URL.createObjectURL(N)}s(gs,"e");function Qi(N,x){ki&&(g.logger.info(N),x&&Rr(N))}s(Qi,"logInfo");function Gr(N,x){ki&&(g.logger.info(N),x&&setTimeout(()=>{Rr(N)},0))}s(Gr,"logInfoNextTick");function Rr(N){m.addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:N},{level:"info"})}s(Rr,"addLogBreadcrumb");class Uo extends Error{constructor(){super(`Event buffer exceeded maximum size of ${M}.`)}}s(Uo,"EventBufferSizeExceededError");class io{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(x){const $=JSON.stringify(x).length;if(this._totalSize+=$,this._totalSize>M)throw new Uo;this.events.push(x)}finish(){return new Promise(x=>{const $=this.events;this.clear(),x(JSON.stringify($))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const x=this.events.map($=>$.timestamp).sort()[0];return x?oo(x):null}}s(io,"EventBufferArray");class ec{constructor(x){this._worker=x,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((x,$)=>{this._worker.addEventListener("message",({data:te})=>{te.success?x():$()},{once:!0}),this._worker.addEventListener("error",te=>{$(te)},{once:!0})}),this._ensureReadyPromise)}destroy(){Qi("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(x,$){const te=this._getAndIncrementId();return new Promise((he,we)=>{const We=s(({data:je})=>{const Ne=je;if(Ne.method===x&&Ne.id===te){if(this._worker.removeEventListener("message",We),!Ne.success){ki&&g.logger.error("[Replay]",Ne.response),we(new Error("Error in compression worker"));return}he(Ne.response)}},"listener");this._worker.addEventListener("message",We),this._worker.postMessage({id:te,method:x,arg:$})})}_getAndIncrementId(){return this._id++}}s(ec,"WorkerHandler");class oa{constructor(x){this._worker=new ec(x),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(x){const $=oo(x.timestamp);(!this._earliestTimestamp||$<this._earliestTimestamp)&&(this._earliestTimestamp=$);const te=JSON.stringify(x);return this._totalSize+=te.length,this._totalSize>M?Promise.reject(new Uo):this._sendEventToWorker(te)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,x=>{ki&&g.logger.warn('[Replay] Sending "clear" message to worker failed',x)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(x){return this._worker.postMessage("addEvent",x)}async _finishRequest(){const x=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,x}}s(oa,"EventBufferCompressionWorker");class Na{constructor(x){this._fallback=new io,this._compression=new oa(x),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(x){this._used.hasCheckout=x}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(x){return this._used.addEvent(x)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{Qi("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:x,hasCheckout:$}=this._fallback,te=[];for(const he of x)te.push(this._compression.addEvent(he));this._compression.hasCheckout=$,this._used=this._compression;try{await Promise.all(te)}catch(he){ki&&g.logger.warn("[Replay] Failed to add events when switching buffers.",he)}}}s(Na,"EventBufferProxy");function Gc({useCompression:N,workerUrl:x}){if(N&&window.Worker){const $=jc(x);if($)return $}return Qi("[Replay] Using simple buffer"),new io}s(Gc,"createEventBuffer");function jc(N){try{const x=N||$c();if(!x)return;Qi(`[Replay] Using compression worker${N?` from ${N}`:""}`);const $=new Worker(x);return new Na($)}catch{Qi("[Replay] Failed to create compression worker")}}s(jc,"_loadWorker");function $c(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?gs():""}s($c,"_getWorkerUrl");function sa(){try{return"sessionStorage"in r&&!!r.sessionStorage}catch{return!1}}s(sa,"hasSessionStorage");function Kc(N){Jc(),N.session=void 0}s(Kc,"clearSession");function Jc(){if(sa())try{r.sessionStorage.removeItem(n)}catch{}}s(Jc,"deleteSession");function La(N){return N===void 0?!1:Math.random()<N}s(La,"isSampled");function xa(N){const x=Date.now(),$=N.id||g.uuid4(),te=N.started||x,he=N.lastActivity||x,we=N.segmentId||0,We=N.sampled,je=N.previousSessionId;return{id:$,started:te,lastActivity:he,segmentId:we,sampled:We,previousSessionId:je}}s(xa,"makeSession");function qo(N){if(sa())try{r.sessionStorage.setItem(n,JSON.stringify(N))}catch{}}s(qo,"saveSession");function tc(N,x){return La(N)?"session":x?"buffer":!1}s(tc,"getSessionSampleType");function aa({sessionSampleRate:N,allowBuffering:x,stickySession:$=!1},{previousSessionId:te}={}){const he=tc(N,x),we=xa({sampled:he,previousSessionId:te});return $&&qo(we),we}s(aa,"createSession");function Yc(N){if(!sa())return null;try{const x=r.sessionStorage.getItem(n);if(!x)return null;const $=JSON.parse(x);return Gr("[Replay] Loading existing session",N),xa($)}catch{return null}}s(Yc,"fetchSession");function Ba(N,x,$=+new Date){return N===null||x===void 0||x<0?!0:x===0?!1:N+x<=$}s(Ba,"isExpired");function nc(N,{maxReplayDuration:x,sessionIdleExpire:$,targetTime:te=Date.now()}){return Ba(N.started,x,te)||Ba(N.lastActivity,$,te)}s(nc,"isSessionExpired");function ic(N,{sessionIdleExpire:x,maxReplayDuration:$}){return!(!nc(N,{sessionIdleExpire:x,maxReplayDuration:$})||N.sampled==="buffer"&&N.segmentId===0)}s(ic,"shouldRefreshSession");function la({traceInternals:N,sessionIdleExpire:x,maxReplayDuration:$,previousSessionId:te},he){const we=he.stickySession&&Yc(N);return we?ic(we,{sessionIdleExpire:x,maxReplayDuration:$})?(Gr("[Replay] Session in sessionStorage is expired, creating new one..."),aa(he,{previousSessionId:we.id})):we:(Gr("[Replay] Creating new session",N),aa(he,{previousSessionId:te}))}s(la,"loadOrCreateSession");function Xc(N){return N.type===Ke.Custom}s(Xc,"isCustomEvent");function Ss(N,x,$){return ca(N,x)?(oc(N,x,$),!0):!1}s(Ss,"addEventSync");function rc(N,x,$){return ca(N,x)?oc(N,x,$):Promise.resolve(null)}s(rc,"addEvent");async function oc(N,x,$){if(!N.eventBuffer)return null;try{$&&N.recordingMode==="buffer"&&N.eventBuffer.clear(),$&&(N.eventBuffer.hasCheckout=!0);const te=N.getOptions(),he=Qc(x,te.beforeAddRecordingEvent);return he?await N.eventBuffer.addEvent(he):void 0}catch(te){const he=te&&te instanceof Uo?"addEventSizeExceeded":"addEvent";ki&&g.logger.error(te),await N.stop({reason:he});const we=m.getClient();we&&we.recordDroppedEvent("internal_sdk_error","replay")}}s(oc,"_addEvent");function ca(N,x){if(!N.eventBuffer||N.isPaused()||!N.isEnabled())return!1;const $=oo(x.timestamp);return $+N.timeouts.sessionIdlePause<Date.now()?!1:$>N.getContext().initialTimestamp+N.getOptions().maxReplayDuration?(Qi(`[Replay] Skipping event with timestamp ${$} because it is after maxReplayDuration`,N.getOptions()._experiments.traceInternals),!1):!0}s(ca,"shouldAddEvent");function Qc(N,x){try{if(typeof x=="function"&&Xc(N))return x(N)}catch($){return ki&&g.logger.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",$),null}return N}s(Qc,"maybeApplyCallback");function da(N){return!N.type}s(da,"isErrorEvent");function ua(N){return N.type==="transaction"}s(ua,"isTransactionEvent");function Zc(N){return N.type==="replay_event"}s(Zc,"isReplayEvent");function sc(N){return N.type==="feedback"}s(sc,"isFeedbackEvent");function qc(N){return(x,$)=>{if(!N.isEnabled()||!da(x)&&!ua(x))return;const te=$&&$.statusCode;if(!(!te||te<200||te>=300)){if(ua(x)){ed(N,x);return}ac(N,x)}}}s(qc,"handleAfterSendEvent");function ed(N,x){const $=N.getContext();x.contexts&&x.contexts.trace&&x.contexts.trace.trace_id&&$.traceIds.size<100&&$.traceIds.add(x.contexts.trace.trace_id)}s(ed,"handleTransactionEvent");function ac(N,x){const $=N.getContext();if(x.event_id&&$.errorIds.size<100&&$.errorIds.add(x.event_id),N.recordingMode!=="buffer"||!x.tags||!x.tags.replayId)return;const{beforeErrorSampling:te}=N.getOptions();typeof te=="function"&&!te(x)||setTimeout(()=>{N.sendBufferedReplayOrFlush()})}s(ac,"handleErrorEvent");function td(N){return x=>{!N.isEnabled()||!da(x)||lc(N,x)}}s(td,"handleBeforeSendEvent");function lc(N,x){const $=x.exception&&x.exception.values&&x.exception.values[0].value;if(typeof $=="string"&&($.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||$.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const te=Mr({category:"replay.hydrate-error"});br(N,te)}}s(lc,"handleHydrationError");function Fa(N){const x=m.getClient();x&&x.on("beforeAddBreadcrumb",$=>cc(N,$))}s(Fa,"handleBreadcrumbs");function cc(N,x){if(!N.isEnabled()||!fa(x))return;const $=nd(x);$&&br(N,$)}s(cc,"beforeAddBreadcrumb");function nd(N){return!fa(N)||["fetch","xhr","sentry.event","sentry.transaction"].includes(N.category)||N.category.startsWith("ui.")?null:N.category==="console"?id(N):Mr(N)}s(nd,"normalizeBreadcrumb");function id(N){const x=N.data&&N.data.arguments;if(!Array.isArray(x)||x.length===0)return Mr(N);let $=!1;const te=x.map(he=>{if(!he)return he;if(typeof he=="string")return he.length>_?($=!0,`${he.slice(0,_)}\u2026`):he;if(typeof he=="object")try{const we=g.normalize(he,7);return JSON.stringify(we).length>_?($=!0,`${JSON.stringify(we,null,2).slice(0,_)}\u2026`):we}catch{}return he});return Mr({...N,data:{...N.data,arguments:te,...$?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}s(id,"normalizeConsoleBreadcrumb");function fa(N){return!!N.category}s(fa,"isBreadcrumbWithCategory");function rd(N,x){return N.type||!N.exception||!N.exception.values||!N.exception.values.length?!1:!!(x.originalException&&x.originalException.__rrweb__)}s(rd,"isRrwebError");function od(N,x){N.triggerUserActivity(),N.addUpdate(()=>x.timestamp?(N.throttledAddEvent({type:Ke.Custom,timestamp:x.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:x.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:x.event_id}}}}),!1):!0)}s(od,"addFeedbackBreadcrumb");function dc(N,x){return N.recordingMode!=="buffer"||x.message===t||!x.exception||x.type?!1:La(N.getOptions().errorSampleRate)}s(dc,"shouldSampleForBufferEvent");function ha(N){return Object.assign((x,$)=>N.isEnabled()?Zc(x)?(delete x.breadcrumbs,x):!da(x)&&!ua(x)&&!sc(x)||!N.checkAndHandleExpiredSession()?x:sc(x)?(N.flush(),x.contexts.feedback.replay_id=N.getSessionId(),od(N,x),x):rd(x,$)&&!N.getOptions()._experiments.captureExceptions?(ki&&g.logger.log("[Replay] Ignoring error from rrweb internals",x),null):((dc(N,x)||N.recordingMode==="session")&&(x.tags={...x.tags,replayId:N.getSessionId()}),x):x,{id:"Replay"})}s(ha,"handleGlobalEventListener");function Ls(N,x){return x.map(({type:$,start:te,end:he,name:we,data:We})=>{const je=N.throttledAddEvent({type:Ke.Custom,timestamp:te,data:{tag:"performanceSpan",payload:{op:$,description:we,startTimestamp:te,endTimestamp:he,data:We}}});return typeof je=="string"?Promise.resolve(null):je})}s(Ls,"createPerformanceSpans");function uc(N){const{from:x,to:$}=N,te=Date.now()/1e3;return{type:"navigation.push",start:te,end:te,name:$,data:{previous:x}}}s(uc,"handleHistory");function Ua(N){return x=>{if(!N.isEnabled())return;const $=uc(x);$!==null&&(N.getContext().urls.push($.name),N.triggerUserActivity(),N.addUpdate(()=>(Ls(N,[$]),!1)))}}s(Ua,"handleHistorySpanListener");function Vn(N,x){return ki&&N.getOptions()._experiments.traceInternals?!1:m.isSentryRequestUrl(x,m.getClient())}s(Vn,"shouldFilterRequest");function _n(N,x){N.isEnabled()&&x!==null&&(Vn(N,x.name)||N.addUpdate(()=>(Ls(N,[x]),!0)))}s(_n,"addNetworkBreadcrumb");function pa(N){if(!N)return;const x=new TextEncoder;try{if(typeof N=="string")return x.encode(N).length;if(N instanceof URLSearchParams)return x.encode(N.toString()).length;if(N instanceof FormData){const $=Ha(N);return x.encode($).length}if(N instanceof Blob)return N.size;if(N instanceof ArrayBuffer)return N.byteLength}catch{}}s(pa,"getBodySize");function sd(N){if(!N)return;const x=parseInt(N,10);return isNaN(x)?void 0:x}s(sd,"parseContentLengthHeader");function Va(N){try{if(typeof N=="string")return[N];if(N instanceof URLSearchParams)return[N.toString()];if(N instanceof FormData)return[Ha(N)];if(!N)return[void 0]}catch{return ki&&g.logger.warn("[Replay] Failed to serialize body",N),[void 0,"BODY_PARSE_ERROR"]}return ki&&g.logger.info("[Replay] Skipping network body because of body type",N),[void 0,"UNPARSEABLE_BODY_TYPE"]}s(Va,"getBodyString");function cr(N,x){if(!N)return{headers:{},size:void 0,_meta:{warnings:[x]}};const $={...N._meta},te=$.warnings||[];return $.warnings=[...te,x],N._meta=$,N}s(cr,"mergeWarning");function fc(N,x){if(!x)return null;const{startTimestamp:$,endTimestamp:te,url:he,method:we,statusCode:We,request:je,response:Ne}=x;return{type:N,start:$/1e3,end:te/1e3,name:he,data:g.dropUndefinedKeys({method:we,statusCode:We,request:je,response:Ne})}}s(fc,"makeNetworkReplayBreadcrumb");function es(N){return{headers:{},size:N,_meta:{warnings:["URL_SKIPPED"]}}}s(es,"buildSkippedNetworkRequestOrResponse");function Co(N,x,$){if(!x&&Object.keys(N).length===0)return;if(!x)return{headers:N};if(!$)return{headers:N,size:x};const te={headers:N,size:x},{body:he,warnings:we}=pc($);return te.body=he,we&&we.length>0&&(te._meta={warnings:we}),te}s(Co,"buildNetworkRequestOrResponse");function hc(N,x){return Object.keys(N).reduce(($,te)=>{const he=te.toLowerCase();return x.includes(he)&&N[te]&&($[he]=N[te]),$},{})}s(hc,"getAllowedHeaders");function Ha(N){return new URLSearchParams(N).toString()}s(Ha,"_serializeFormData");function pc(N){if(!N||typeof N!="string")return{body:N};const x=N.length>E,$=mc(N);if(x){const te=N.slice(0,E);return $?{body:te,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${te}\u2026`,warnings:["TEXT_TRUNCATED"]}}if($)try{return{body:JSON.parse(N)}}catch{}return{body:N}}s(pc,"normalizeNetworkBody");function mc(N){const x=N[0],$=N[N.length-1];return x==="["&&$==="]"||x==="{"&&$==="}"}s(mc,"_strIsProbablyJson");function vs(N,x){const $=ad(N);return g.stringMatchesSomePattern($,x)}s(vs,"urlMatches");function ad(N,x=r.document.baseURI){if(N.startsWith("http://")||N.startsWith("https://")||N.startsWith(r.location.origin))return N;const $=new URL(N,x);if($.origin!==new URL(x).origin)return N;const te=$.href;return!N.endsWith("/")&&te.endsWith("/")?te.slice(0,-1):te}s(ad,"getFullUrl");async function Mn(N,x,$){try{const te=await jt(N,x,$),he=fc("resource.fetch",te);_n($.replay,he)}catch(te){ki&&g.logger.error("[Replay] Failed to capture fetch breadcrumb",te)}}s(Mn,"captureFetchBreadcrumbToReplay");function vi(N,x){const{input:$,response:te}=x,he=$?gc($):void 0,we=pa(he),We=te?sd(te.headers.get("content-length")):void 0;we!==void 0&&(N.data.request_body_size=we),We!==void 0&&(N.data.response_body_size=We)}s(vi,"enrichFetchBreadcrumb");async function jt(N,x,$){const te=Date.now(),{startTimestamp:he=te,endTimestamp:we=te}=x,{url:We,method:je,status_code:Ne=0,request_body_size:ht,response_body_size:Rt}=N.data,It=vs(We,$.networkDetailAllowUrls)&&!vs(We,$.networkDetailDenyUrls),Lt=It?nu($,x.input,ht):es(ht),sn=await ld(It,$,x.response,Rt);return{startTimestamp:he,endTimestamp:we,url:We,method:je,statusCode:Ne,request:Lt,response:sn}}s(jt,"_prepareFetchData");function nu({networkCaptureBodies:N,networkRequestHeaders:x},$,te){const he=$?ou($,x):{};if(!N)return Co(he,te,void 0);const we=gc($),[We,je]=Va(we),Ne=Co(he,te,We);return je?cr(Ne,je):Ne}s(nu,"_getRequestInfo");async function ld(N,{networkCaptureBodies:x,networkResponseHeaders:$},te,he){if(!N&&he!==void 0)return es(he);const we=te?ts(te.headers,$):{};if(!te||!x&&he!==void 0)return Co(we,he,void 0);const[We,je]=await ru(te),Ne=iu(We,{networkCaptureBodies:x,responseBodySize:he,captureDetails:N,headers:we});return je?cr(Ne,je):Ne}s(ld,"_getResponseInfo");function iu(N,{networkCaptureBodies:x,responseBodySize:$,captureDetails:te,headers:he}){try{const we=N&&N.length&&$===void 0?pa(N):$;return te?x?Co(he,we,N):Co(he,we,void 0):es(we)}catch(we){return ki&&g.logger.warn("[Replay] Failed to serialize response body",we),Co(he,$,void 0)}}s(iu,"getResponseData");async function ru(N){const x=su(N);if(!x)return[void 0,"BODY_PARSE_ERROR"];try{return[await au(x)]}catch($){return ki&&g.logger.warn("[Replay] Failed to get text body from response",$),[void 0,"BODY_PARSE_ERROR"]}}s(ru,"_parseFetchResponseBody");function gc(N=[]){if(!(N.length!==2||typeof N[1]!="object"))return N[1].body}s(gc,"_getFetchRequestArgBody");function ts(N,x){const $={};return x.forEach(te=>{N.get(te)&&($[te]=N.get(te))}),$}s(ts,"getAllHeaders");function ou(N,x){return N.length===1&&typeof N[0]!="string"?cd(N[0],x):N.length===2?cd(N[1],x):{}}s(ou,"getRequestHeaders");function cd(N,x){if(!N)return{};const $=N.headers;return $?$ instanceof Headers?ts($,x):Array.isArray($)?{}:hc($,x):{}}s(cd,"getHeadersFromOptions");function su(N){try{return N.clone()}catch(x){ki&&g.logger.warn("[Replay] Failed to clone response body",x)}}s(su,"_tryCloneResponse");function au(N){return new Promise((x,$)=>{const te=setTimeout(()=>$(new Error("Timeout while trying to read response body")),500);Sc(N).then(he=>x(he),he=>$(he)).finally(()=>clearTimeout(te))})}s(au,"_tryGetResponseText");async function Sc(N){return await N.text()}s(Sc,"_getResponseText");async function lu(N,x,$){try{const te=du(N,x,$),he=fc("resource.xhr",te);_n($.replay,he)}catch(te){ki&&g.logger.error("[Replay] Failed to capture xhr breadcrumb",te)}}s(lu,"captureXhrBreadcrumbToReplay");function cu(N,x){const{xhr:$,input:te}=x;if(!$)return;const he=pa(te),we=$.getResponseHeader("content-length")?sd($.getResponseHeader("content-length")):ga($.response,$.responseType);he!==void 0&&(N.data.request_body_size=he),we!==void 0&&(N.data.response_body_size=we)}s(cu,"enrichXhrBreadcrumb");function du(N,x,$){const te=Date.now(),{startTimestamp:he=te,endTimestamp:we=te,input:We,xhr:je}=x,{url:Ne,method:ht,status_code:Rt=0,request_body_size:It,response_body_size:Lt}=N.data;if(!Ne)return null;if(!je||!vs(Ne,$.networkDetailAllowUrls)||vs(Ne,$.networkDetailDenyUrls)){const pi=es(It),Nn=es(Lt);return{startTimestamp:he,endTimestamp:we,url:Ne,method:ht,statusCode:Rt,request:pi,response:Nn}}const sn=je[l.SENTRY_XHR_DATA_KEY],rn=sn?hc(sn.request_headers,$.networkRequestHeaders):{},Cn=hc(uu(je),$.networkResponseHeaders),[Hn,Rn]=$.networkCaptureBodies?Va(We):[void 0],[di,Di]=$.networkCaptureBodies?fu(je):[void 0],Ni=Co(rn,It,Hn),nr=Co(Cn,Lt,di);return{startTimestamp:he,endTimestamp:we,url:Ne,method:ht,statusCode:Rt,request:Rn?cr(Ni,Rn):Ni,response:Di?cr(nr,Di):nr}}s(du,"_prepareXhrData");function uu(N){const x=N.getAllResponseHeaders();return x?x.split(`\r
`).reduce(($,te)=>{const[he,we]=te.split(": ");return $[he.toLowerCase()]=we,$},{}):{}}s(uu,"getResponseHeaders");function fu(N){const x=[];try{return[N.responseText]}catch($){x.push($)}try{return ma(N.response,N.responseType)}catch($){x.push($)}return ki&&g.logger.warn("[Replay] Failed to get xhr response body",...x),[void 0]}s(fu,"_getXhrResponseBody");function ma(N,x){try{if(typeof N=="string")return[N];if(N instanceof Document)return[N.body.outerHTML];if(x==="json"&&N&&typeof N=="object")return[JSON.stringify(N)];if(!N)return[void 0]}catch{return ki&&g.logger.warn("[Replay] Failed to serialize body",N),[void 0,"BODY_PARSE_ERROR"]}return ki&&g.logger.info("[Replay] Skipping network body because of body type",N),[void 0,"UNPARSEABLE_BODY_TYPE"]}s(ma,"_parseXhrResponse");function ga(N,x){try{const $=x==="json"&&N&&typeof N=="object"?JSON.stringify(N):N;return pa($)}catch{return}}s(ga,"_getBodySize");function dd(N){const x=m.getClient();try{const{networkDetailAllowUrls:$,networkDetailDenyUrls:te,networkCaptureBodies:he,networkRequestHeaders:we,networkResponseHeaders:We}=N.getOptions(),je={replay:N,networkDetailAllowUrls:$,networkDetailDenyUrls:te,networkCaptureBodies:he,networkRequestHeaders:we,networkResponseHeaders:We};x&&x.on("beforeAddBreadcrumb",(Ne,ht)=>Wa(je,Ne,ht))}catch{}}s(dd,"handleNetworkBreadcrumbs");function Wa(N,x,$){if(x.data)try{hu(x)&&pu($)&&(cu(x,$),lu(x,$,N)),ud(x)&&fd($)&&(vi(x,$),Mn(x,$,N))}catch{ki&&g.logger.warn("Error when enriching network breadcrumb")}}s(Wa,"beforeAddNetworkBreadcrumb");function hu(N){return N.category==="xhr"}s(hu,"_isXhrBreadcrumb");function ud(N){return N.category==="fetch"}s(ud,"_isFetchBreadcrumb");function pu(N){return N&&N.xhr}s(pu,"_isXhrHint");function fd(N){return N&&N.response}s(fd,"_isFetchHint");function mu(N){const x=m.getClient();l.addClickKeypressInstrumentationHandler(ia(N)),l.addHistoryInstrumentationHandler(Ua(N)),Fa(N),dd(N);const $=ha(N);m.addEventProcessor($),x&&(x.on("beforeSendEvent",td(N)),x.on("afterSendEvent",qc(N)),x.on("createDsc",te=>{const he=N.getSessionId();he&&N.isEnabled()&&N.recordingMode==="session"&&N.checkAndHandleExpiredSession()&&(te.replay_id=he)}),x.on("spanStart",te=>{N.lastActiveSpan=te}),x.on("spanEnd",te=>{N.lastActiveSpan=te}),x.on("beforeSendFeedback",(te,he)=>{const we=N.getSessionId();he&&he.includeReplay&&N.isEnabled()&&we&&te.contexts&&te.contexts.feedback&&(te.contexts.feedback.replay_id=we)}))}s(mu,"addGlobalListeners");async function hd(N){try{return Promise.all(Ls(N,[pd(r.performance.memory)]))}catch{return[]}}s(hd,"addMemoryEntry");function pd(N){const{jsHeapSizeLimit:x,totalJSHeapSize:$,usedJSHeapSize:te}=N,he=Date.now()/1e3;return{type:"memory",name:"memory",start:he,end:he,data:{memory:{jsHeapSizeLimit:x,totalJSHeapSize:$,usedJSHeapSize:te}}}}s(pd,"createMemoryEntry");function md(N,x,$){let te,he,we;const We=$&&$.maxWait?Math.max($.maxWait,x):0;function je(){return Ne(),te=N(),te}s(je,"invokeFunc");function Ne(){he!==void 0&&clearTimeout(he),we!==void 0&&clearTimeout(we),he=we=void 0}s(Ne,"cancelTimers");function ht(){return he!==void 0||we!==void 0?je():te}s(ht,"flush");function Rt(){return he&&clearTimeout(he),he=setTimeout(je,x),We&&we===void 0&&(we=setTimeout(je,We)),te}return s(Rt,"debounced"),Rt.cancel=Ne,Rt.flush=ht,Rt}s(md,"debounce");function gu(N){let x=!1;return($,te)=>{if(!N.checkAndHandleExpiredSession()){ki&&g.logger.warn("[Replay] Received replay event after session expired.");return}const he=te||!x;x=!0,N.clickDetector&&_r(N.clickDetector,$),N.addUpdate(()=>{if(N.recordingMode==="buffer"&&he&&N.setInitialState(),!Ss(N,$,he))return!0;if(!he)return!1;if(xs(N,he),N.session&&N.session.previousSessionId)return!0;if(N.recordingMode==="buffer"&&N.session&&N.eventBuffer){const we=N.eventBuffer.getEarliestTimestamp();we&&(Qi(`[Replay] Updating session start time to earliest event in buffer to ${new Date(we)}`,N.getOptions()._experiments.traceInternals),N.session.started=we,N.getOptions().stickySession&&qo(N.session))}return N.recordingMode==="session"&&N.flush(),!0})}}s(gu,"getHandleRecordingEmit");function jr(N){const x=N.getOptions();return{type:Ke.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:N.isRecordingCanvas(),sessionSampleRate:x.sessionSampleRate,errorSampleRate:x.errorSampleRate,useCompressionOption:x.useCompression,blockAllMedia:x.blockAllMedia,maskAllText:x.maskAllText,maskAllInputs:x.maskAllInputs,useCompression:N.eventBuffer?N.eventBuffer.type==="worker":!1,networkDetailHasUrls:x.networkDetailAllowUrls.length>0,networkCaptureBodies:x.networkCaptureBodies,networkRequestHasHeaders:x.networkRequestHeaders.length>0,networkResponseHasHeaders:x.networkResponseHeaders.length>0}}}}s(jr,"createOptionsEvent");function xs(N,x){!x||!N.session||N.session.segmentId!==0||Ss(N,jr(N),!1)}s(xs,"addSettingsEvent");function gd(N,x,$,te){return g.createEnvelope(g.createEventEnvelopeHeaders(N,g.getSdkMetadataForEnvelopeHeader(N),te,$),[[{type:"replay_event"},N],[{type:"replay_recording",length:typeof x=="string"?new TextEncoder().encode(x).length:x.length},x]])}s(gd,"createReplayEnvelope");function Sd({recordingData:N,headers:x}){let $;const te=`${JSON.stringify(x)}
`;if(typeof N=="string")$=`${te}${N}`;else{const we=new TextEncoder().encode(te);$=new Uint8Array(we.length+N.length),$.set(we),$.set(N,we.length)}return $}s(Sd,"prepareRecordingData");async function vd({client:N,scope:x,replayId:$,event:te}){const he=typeof N._integrations=="object"&&N._integrations!==null&&!Array.isArray(N._integrations)?Object.keys(N._integrations):void 0,we={event_id:$,integrations:he};N.emit("preprocessEvent",te,we);const We=await m.prepareEvent(N.getOptions(),te,we,x,N,m.getIsolationScope());if(!We)return null;We.platform=We.platform||"javascript";const je=N.getSdkMetadata(),{name:Ne,version:ht}=je&&je.sdk||{};return We.sdk={...We.sdk,name:Ne||"sentry.javascript.unknown",version:ht||"0.0.0"},We}s(vd,"prepareReplayEvent");async function za({recordingData:N,replayId:x,segmentId:$,eventContext:te,timestamp:he,session:we}){const We=Sd({recordingData:N,headers:{segment_id:$}}),{urls:je,errorIds:Ne,traceIds:ht,initialTimestamp:Rt}=te,It=m.getClient(),Lt=m.getCurrentScope(),sn=It&&It.getTransport(),rn=It&&It.getDsn();if(!It||!sn||!rn||!we.sampled)return g.resolvedSyncPromise({});const Cn={type:e,replay_start_timestamp:Rt/1e3,timestamp:he/1e3,error_ids:Ne,trace_ids:ht,urls:je,replay_id:x,segment_id:$,replay_type:we.sampled},Hn=await vd({scope:Lt,client:It,replayId:x,event:Cn});if(!Hn)return It.recordDroppedEvent("event_processor","replay",Cn),Qi("An event processor returned `null`, will not send event."),g.resolvedSyncPromise({});delete Hn.sdkProcessingMetadata;const Rn=gd(Hn,We,rn,It.getOptions().tunnel);let di;try{di=await sn.send(Rn)}catch(Ni){const nr=new Error(t);try{nr.cause=Ni}catch{}throw nr}if(typeof di.statusCode=="number"&&(di.statusCode<200||di.statusCode>=300))throw new Ga(di.statusCode);const Di=g.updateRateLimits({},di);if(g.isRateLimited(Di,"replay"))throw new ja(Di);return di}s(za,"sendReplayRequest");class Ga extends Error{constructor(x){super(`Transport returned status code ${x}`)}}s(Ga,"TransportStatusCodeError");class ja extends Error{constructor(x){super("Rate limit hit"),this.rateLimits=x}}s(ja,"RateLimitError");async function vc(N,x={count:0,interval:f}){const{recordingData:$,options:te}=N;if($.length)try{return await za(N),!0}catch(he){if(he instanceof Ga||he instanceof ja)throw he;if(m.setContext("Replays",{_retryCount:x.count}),ki&&te._experiments&&te._experiments.captureExceptions&&m.captureException(he),x.count>=v){const we=new Error(`${t} - max retries exceeded`);try{we.cause=he}catch{}throw we}return x.interval*=++x.count,new Promise((we,We)=>{setTimeout(async()=>{try{await vc(N,x),we(!0)}catch(je){We(je)}},x.interval)})}}s(vc,"sendReplay");const yo="__THROTTLED",yd="__SKIPPED";function Ed(N,x,$){const te=new Map,he=s(je=>{const Ne=je-$;te.forEach((ht,Rt)=>{Rt<Ne&&te.delete(Rt)})},"_cleanup"),we=s(()=>[...te.values()].reduce((je,Ne)=>je+Ne,0),"_getTotalCount");let We=!1;return(...je)=>{const Ne=Math.floor(Date.now()/1e3);if(he(Ne),we()>=x){const Rt=We;return We=!0,Rt?yd:yo}We=!1;const ht=te.get(Ne)||0;return te.set(Ne,ht+1),N(...je)}}s(Ed,"throttle");class ro{constructor({options:x,recordingOptions:$}){ro.prototype.__init.call(this),ro.prototype.__init2.call(this),ro.prototype.__init3.call(this),ro.prototype.__init4.call(this),ro.prototype.__init5.call(this),ro.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:i,sessionIdleExpire:o},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=$,this._options=x,this._debouncedFlush=md(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Ed((We,je)=>rc(this,We,je),300,5);const{slowClickTimeout:te,slowClickIgnoreSelectors:he}=this.getOptions(),we=te?{threshold:Math.min(T,te),timeout:te,scrollTimeout:w,ignoreSelector:he?he.join(","):""}:void 0;we&&(this.clickDetector=new Fo(this,we))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(x){const{errorSampleRate:$,sessionSampleRate:te}=this._options;if(!($<=0&&te<=0)){if(this._initializeSessionForSampling(x),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Gr(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Gr("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const x=la({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=x,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Gr("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const x=la({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=x,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const x=this._canvas;this._stopRecording=gr({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:S},emit:gu(this),onMutation:this._onMutationHandler,...x?{recordCanvas:x.recordCanvas,getCanvasManager:x.getCanvasManager,sampling:x.sampling,dataURLOptions:x.dataURLOptions}:{}})}catch(x){this._handleException(x)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(x){return this._handleException(x),!1}}async stop({forceFlush:x=!1,reason:$}={}){if(this._isEnabled){this._isEnabled=!1;try{Qi(`[Replay] Stopping Replay${$?` triggered by ${$}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),x&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Kc(this)}catch(te){this._handleException(te)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Qi("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),Qi("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:x=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const $=Date.now();Qi("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const te=this.stopRecording();!x||!te||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity($),this._updateSessionActivity($),this._maybeSaveSession()),this.startRecording())}addUpdate(x){const $=x();this.recordingMode!=="buffer"&&$!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Ba(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const x=`${r.location.pathname}${r.location.hash}${r.location.search}`,$=`${r.location.origin}${x}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=$,this._context.initialTimestamp=Date.now(),this._context.urls.push($)}throttledAddEvent(x,$){const te=this._throttledAddEvent(x,$);if(te===yo){const he=Mr({category:"replay.throttled"});this.addUpdate(()=>!Ss(this,{type:co,timestamp:he.timestamp||0,data:{tag:"breadcrumb",payload:he,metric:!0}}))}return te}getCurrentRoute(){const x=this.lastActiveSpan||m.getActiveSpan(),$=x&&m.getRootSpan(x),he=($&&m.spanToJSON($).data||{})[m.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];if(!(!$||!he||!["route","custom"].includes(he)))return m.spanToJSON($).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Gc({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(x){ki&&g.logger.error("[Replay]",x),ki&&this._options._experiments&&this._options._experiments.captureExceptions&&m.captureException(x)}_initializeSessionForSampling(x){const $=this._options.errorSampleRate>0,te=la({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:x},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:$});this.session=te}_checkSession(){if(!this.session)return!1;const x=this.session;return ic(x,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(x),!1):!0}async _refreshSession(x){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(x.id))}_addListeners(){try{r.document.addEventListener("visibilitychange",this._handleVisibilityChange),r.addEventListener("blur",this._handleWindowBlur),r.addEventListener("focus",this._handleWindowFocus),r.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(mu(this),this._hasInitializedCoreListeners=!0)}catch(x){this._handleException(x)}this._performanceCleanupCallback=Ds(this)}_removeListeners(){try{r.document.removeEventListener("visibilitychange",this._handleVisibilityChange),r.removeEventListener("blur",this._handleWindowBlur),r.removeEventListener("focus",this._handleWindowFocus),r.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(x){this._handleException(x)}}__init(){this._handleVisibilityChange=()=>{r.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const x=Mr({category:"ui.blur"});this._doChangeToBackgroundTasks(x)}}__init3(){this._handleWindowFocus=()=>{const x=Mr({category:"ui.focus"});this._doChangeToForegroundTasks(x)}}__init4(){this._handleKeyboardEvent=x=>{Rs(this,x)}}_doChangeToBackgroundTasks(x){!this.session||nc(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(x&&this._createCustomBreadcrumb(x),this.conditionalFlush())}_doChangeToForegroundTasks(x){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){Qi("[Replay] Document has become active, but session has expired");return}x&&this._createCustomBreadcrumb(x)}_updateUserActivity(x=Date.now()){this._lastActivity=x}_updateSessionActivity(x=Date.now()){this.session&&(this.session.lastActivity=x,this._maybeSaveSession())}_createCustomBreadcrumb(x){this.addUpdate(()=>{this.throttledAddEvent({type:Ke.Custom,timestamp:x.timestamp||0,data:{tag:"breadcrumb",payload:x}})})}_addPerformanceEntries(){const x=Ps(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Ls(this,x))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:x,eventBuffer:$}=this;if(!x||!$||x.segmentId)return;const te=$.getEarliestTimestamp();te&&te<this._context.initialTimestamp&&(this._context.initialTimestamp=te)}_popEventContext(){const x={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),x}async _runFlush(){const x=this.getSessionId();if(!this.session||!this.eventBuffer||!x){ki&&g.logger.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await hd(this),!!this.eventBuffer&&x===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const $=Date.now();if($-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const te=this._popEventContext(),he=this.session.segmentId++;this._maybeSaveSession();const we=await this.eventBuffer.finish();await vc({replayId:x,recordingData:we,segmentId:he,eventContext:te,session:this.session,options:this.getOptions(),timestamp:$})}catch($){this._handleException($),this.stop({reason:"sendReplay"});const te=m.getClient();te&&te.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:x=!1}={})=>{if(!this._isEnabled&&!x)return;if(!this.checkAndHandleExpiredSession()){ki&&g.logger.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const $=this.session.started,he=Date.now()-$;this._debouncedFlush.cancel();const we=he<this._options.minReplayDuration,We=he>this._options.maxReplayDuration+5e3;if(we||We){Qi(`[Replay] Session duration (${Math.floor(he/1e3)}s) is too ${we?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),we&&this._debouncedFlush();return}const je=this.eventBuffer;if(je&&this.session.segmentId===0&&!je.hasCheckout&&Qi("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(Ne){ki&&g.logger.error(Ne)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&qo(this.session)}__init6(){this._onMutationHandler=x=>{const $=x.length,te=this._options.mutationLimit,he=this._options.mutationBreadcrumbLimit,we=te&&$>te;if($>he||we){const We=Mr({category:"replay.mutations",data:{count:$,limit:we}});this._createCustomBreadcrumb(We)}return we?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}s(ro,"ReplayContainer");function Vo(N,x){return[...N,...x].join(",")}s(Vo,"getOption");function Io({mask:N,unmask:x,block:$,unblock:te,ignore:he}){const we=['base[href="/"]'],We=Vo(N,[".sentry-mask","[data-sentry-mask]"]),je=Vo(x,[]);return{maskTextSelector:We,unmaskTextSelector:je,blockSelector:Vo($,[".sentry-block","[data-sentry-block]",...we]),unblockSelector:Vo(te,[]),ignoreSelector:Vo(he,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}s(Io,"getPrivacyOptions");function bd({el:N,key:x,maskAttributes:$,maskAllText:te,privacyOptions:he,value:we}){return!te||he.unmaskTextSelector&&N.matches(he.unmaskTextSelector)?we:$.includes(x)||x==="value"&&N.tagName==="INPUT"&&["submit","button"].includes(N.getAttribute("type")||"")?we.replace(/[\S]/g,"*"):we}s(bd,"maskAttribute");const yc='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',$a=["content-length","content-type","accept"];let Sa=!1;const _d=s(N=>new Bs(N),"replayIntegration");class Bs{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:x=u,flushMaxDelay:$=h,minReplayDuration:te=R,maxReplayDuration:he=k,stickySession:we=!0,useCompression:We=!0,workerUrl:je,_experiments:Ne={},maskAllText:ht=!0,maskAllInputs:Rt=!0,blockAllMedia:It=!0,mutationBreadcrumbLimit:Lt=750,mutationLimit:sn=1e4,slowClickTimeout:rn=7e3,slowClickIgnoreSelectors:Cn=[],networkDetailAllowUrls:Hn=[],networkDetailDenyUrls:Rn=[],networkCaptureBodies:di=!0,networkRequestHeaders:Di=[],networkResponseHeaders:Ni=[],mask:nr=[],maskAttributes:pi=["title","placeholder"],unmask:Nn=[],block:wi=[],unblock:hr=[],ignore:xn=[],maskFn:mi,beforeAddRecordingEvent:ir,beforeErrorSampling:Pr}={}){this.name=Bs.id;const Tr=Io({mask:nr,unmask:Nn,block:wi,unblock:hr,ignore:xn});if(this._recordingOptions={maskAllInputs:Rt,maskAllText:ht,maskInputOptions:{password:!0},maskTextFn:mi,maskInputFn:mi,maskAttributeFn:(eo,Gi,fo)=>bd({maskAttributes:pi,maskAllText:ht,privacyOptions:Tr,key:eo,value:Gi,el:fo}),...Tr,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:eo=>{try{eo.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:x,flushMaxDelay:$,minReplayDuration:Math.min(te,O),maxReplayDuration:Math.min(he,k),stickySession:we,useCompression:We,workerUrl:je,blockAllMedia:It,maskAllInputs:Rt,maskAllText:ht,mutationBreadcrumbLimit:Lt,mutationLimit:sn,slowClickTimeout:rn,slowClickIgnoreSelectors:Cn,networkDetailAllowUrls:Hn,networkDetailDenyUrls:Rn,networkCaptureBodies:di,networkRequestHeaders:ys(Di),networkResponseHeaders:ys(Ni),beforeAddRecordingEvent:ir,beforeErrorSampling:Pr,_experiments:Ne},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${yc}`:yc),this._isInitialized&&g.isBrowser())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Sa}set _isInitialized(x){Sa=x}setupOnce(){g.isBrowser()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(x){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(x)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const x=Ka(this._initialOptions);this._replay=new ro({options:x,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const $=m.getClient().getIntegrationByName("ReplayCanvas");if(!$)return;this._replay._canvas=$.getOptions()}catch{}}}s(Bs,"Replay"),Bs.__initStatic();function Ka(N){const x=m.getClient(),$=x&&x.getOptions(),te={sessionSampleRate:0,errorSampleRate:0,...g.dropUndefinedKeys(N)};if(!$)return g.consoleSandbox(()=>{console.warn("SDK client is not available.")}),te;const he=m.parseSampleRate($.replaysSessionSampleRate),we=m.parseSampleRate($.replaysOnErrorSampleRate);return he==null&&we==null&&g.consoleSandbox(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),he!=null&&(te.sessionSampleRate=he),we!=null&&(te.errorSampleRate=we),te}s(Ka,"loadReplayOptionsFromClient");function ys(N){return[...$a,...N.map(x=>x.toLowerCase())]}s(ys,"_getMergedNetworkHeaders");function Ct(){const N=m.getClient();return N&&N.getIntegrationByName("Replay")}s(Ct,"getReplay"),a.getReplay=Ct,a.replayIntegration=_d},8151162894:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(3345899401),g=c(375537670),l=c(9046403702),r=c(7738910413);class n extends d.BaseClient{constructor(t){const i={parentSpanIsAlwaysRootSpan:!0,...t},o=l.WINDOW.SENTRY_SDK_SOURCE||p.getSDKSource();d.applySdkMetadata(i,"browser",["browser"],o),super(i),i.sendClientReports&&l.WINDOW.document&&l.WINDOW.document.addEventListener("visibilitychange",()=>{l.WINDOW.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,i){return g.eventFromException(this._options.stackParser,t,i,this._options.attachStacktrace)}eventFromMessage(t,i="info",o){return g.eventFromMessage(this._options.stackParser,t,i,o,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){m.DEBUG_BUILD&&p.logger.warn("SDK not enabled, will not capture user feedback.");return}const i=r.createUserFeedbackEnvelope(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(i)}_prepareEvent(t,i,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,i,o)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){m.DEBUG_BUILD&&p.logger.log("No outcomes to send");return}if(!this._dsn){m.DEBUG_BUILD&&p.logger.log("No dsn provided, will not send outcomes");return}m.DEBUG_BUILD&&p.logger.log("Sending outcomes:",t);const i=p.createClientReportEnvelope(t,this._options.tunnel&&p.dsnToString(this._dsn));this.sendEnvelope(i)}}s(n,"BrowserClient"),a.BrowserClient=n},3345899401:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;a.DEBUG_BUILD=c},375537670:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614);function m(_,T){const w=r(_,T),M={type:T&&T.name,value:i(T)};return w.length&&(M.stacktrace={frames:w}),M.type===void 0&&M.value===""&&(M.value="Unrecoverable error caught"),M}s(m,"exceptionFromError");function g(_,T,w,M){const R=d.getClient(),O=R&&R.getOptions().normalizeDepth,k=E(T),A={__serialized__:p.normalizeToSize(T,O)};if(k)return{exception:{values:[m(_,k)]},extra:A};const P={exception:{values:[{type:p.isEvent(T)?T.constructor.name:M?"UnhandledRejection":"Error",value:f(T,{isUnhandledRejection:M})}]},extra:A};if(w){const D=r(_,w);D.length&&(P.exception.values[0].stacktrace={frames:D})}return P}s(g,"eventFromPlainObject");function l(_,T){return{exception:{values:[m(_,T)]}}}s(l,"eventFromError");function r(_,T){const w=T.stacktrace||T.stack||"",M=e(T),R=t(T);try{return _(w,M,R)}catch{}return[]}s(r,"parseStackFrames");const n=/Minified React error #\d+;/i;function e(_){return _&&n.test(_.message)?1:0}s(e,"getSkipFirstStackStringLines");function t(_){return typeof _.framesToPop=="number"?_.framesToPop:0}s(t,"getPopFirstTopFrames");function i(_){const T=_&&_.message;return T?T.error&&typeof T.error.message=="string"?T.error.message:T:"No error message"}s(i,"extractMessage");function o(_,T,w,M){const R=w&&w.syntheticException||void 0,O=h(_,T,R,M);return p.addExceptionMechanism(O),O.level="error",w&&w.event_id&&(O.event_id=w.event_id),p.resolvedSyncPromise(O)}s(o,"eventFromException");function u(_,T,w="info",M,R){const O=M&&M.syntheticException||void 0,k=S(_,T,O,R);return k.level=w,M&&M.event_id&&(k.event_id=M.event_id),p.resolvedSyncPromise(k)}s(u,"eventFromMessage");function h(_,T,w,M,R){let O;if(p.isErrorEvent(T)&&T.error)return l(_,T.error);if(p.isDOMError(T)||p.isDOMException(T)){const k=T;if("stack"in T)O=l(_,T);else{const A=k.name||(p.isDOMError(k)?"DOMError":"DOMException"),P=k.message?`${A}: ${k.message}`:A;O=S(_,P,w,M),p.addExceptionTypeValue(O,P)}return"code"in k&&(O.tags={...O.tags,"DOMException.code":`${k.code}`}),O}return p.isError(T)?l(_,T):p.isPlainObject(T)||p.isEvent(T)?(O=g(_,T,w,R),p.addExceptionMechanism(O,{synthetic:!0}),O):(O=S(_,T,w,M),p.addExceptionTypeValue(O,`${T}`,void 0),p.addExceptionMechanism(O,{synthetic:!0}),O)}s(h,"eventFromUnknownInput");function S(_,T,w,M){const R={};if(M&&w){const O=r(_,w);O.length&&(R.exception={values:[{value:T,stacktrace:{frames:O}}]})}if(p.isParameterizedString(T)){const{__sentry_template_string__:O,__sentry_template_values__:k}=T;return R.logentry={message:O,params:k},R}return R.message=T,R}s(S,"eventFromString");function f(_,{isUnhandledRejection:T}){const w=p.extractExceptionKeysForMessage(_),M=T?"promise rejection":"exception";return p.isErrorEvent(_)?`Event \`ErrorEvent\` captured as ${M} with message \`${_.message}\``:p.isEvent(_)?`Event \`${v(_)}\` (type=${_.type}) captured as ${M}`:`Object captured as ${M} with keys: ${w}`}s(f,"getNonErrorObjectExceptionValue");function v(_){try{const T=Object.getPrototypeOf(_);return T?T.constructor.name:void 0}catch{}}s(v,"getObjectClassName");function E(_){for(const T in _)if(Object.prototype.hasOwnProperty.call(_,T)){const w=_[T];if(w instanceof Error)return w}}s(E,"getErrorPropertyFromObject"),a.eventFromException=o,a.eventFromMessage=u,a.eventFromUnknownInput=h,a.exceptionFromError=m},2915497046:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6049995776),p=c(1076637753),m=d.buildFeedbackIntegration({lazyLoadIntegration:p.lazyLoadIntegration});a.feedbackAsyncIntegration=m},9038494489:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6049995776),p=c(1076637753),m=d.buildFeedbackIntegration({lazyLoadIntegration:p.lazyLoadIntegration,getModalIntegration:()=>d.feedbackModalIntegration,getScreenshotIntegration:()=>d.feedbackScreenshotIntegration});a.feedbackSyncIntegration=m},9046403702:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=p.GLOBAL_OBJ;let g=0;function l(){return g>0}s(l,"shouldIgnoreOnError");function r(){g++,setTimeout(()=>{g--})}s(r,"ignoreNextOnError");function n(e,t={},i){if(typeof e!="function")return e;try{const u=e.__sentry_wrapped__;if(u)return u;if(p.getOriginalFunction(e))return e}catch{return e}const o=s(function(){const u=Array.prototype.slice.call(arguments);try{i&&typeof i=="function"&&i.apply(this,arguments);const h=u.map(S=>n(S,t));return e.apply(this,h)}catch(h){throw r(),d.withScope(S=>{S.addEventProcessor(f=>(t.mechanism&&(p.addExceptionTypeValue(f,void 0,void 0),p.addExceptionMechanism(f,t.mechanism)),f.extra={...f.extra,arguments:u},f)),d.captureException(h)}),h}},"sentryWrapped");try{for(const u in e)Object.prototype.hasOwnProperty.call(e,u)&&(o[u]=e[u])}catch{}p.markFunctionWrapped(o,e),p.addNonEnumerableProperty(e,"__sentry_wrapped__",o);try{Object.getOwnPropertyDescriptor(o,"name").configurable&&Object.defineProperty(o,"name",{get(){return e.name}})}catch{}return o}s(n,"wrap"),a.WINDOW=m,a.ignoreNextOnError=r,a.shouldIgnoreOnError=l,a.wrap=n},8904626639:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(1114790286),m=c(9046403702),g=c(8151162894),l=c(8685600704),r=c(4795369790),n=c(375537670),e=c(7738910413),t=c(7672786771),i=c(3985552739),o=c(2334015581),u=c(7098914998),h=c(4305747877),S=c(9919948800),f=c(1076637753),v=c(918703877),E=c(328044736),_=c(4269444637),T=c(6979168052),w=c(4947629935),M=c(2915497046),R=c(9038494489),O=c(6049995776),k=c(6520656099),A=c(5559796378),P=c(7824548363),D=c(5380267868);a.SDK_VERSION=d.SDK_VERSION,a.SEMANTIC_ATTRIBUTE_SENTRY_OP=d.SEMANTIC_ATTRIBUTE_SENTRY_OP,a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=d.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=d.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=d.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,a.Scope=d.Scope,a.addBreadcrumb=d.addBreadcrumb,a.addEventProcessor=d.addEventProcessor,a.addIntegration=d.addIntegration,a.addTracingExtensions=d.addTracingExtensions,a.captureConsoleIntegration=d.captureConsoleIntegration,a.captureEvent=d.captureEvent,a.captureException=d.captureException,a.captureFeedback=d.captureFeedback,a.captureMessage=d.captureMessage,a.captureSession=d.captureSession,a.close=d.close,a.continueTrace=d.continueTrace,a.createTransport=d.createTransport,a.debugIntegration=d.debugIntegration,a.dedupeIntegration=d.dedupeIntegration,a.endSession=d.endSession,a.extraErrorDataIntegration=d.extraErrorDataIntegration,a.flush=d.flush,a.functionToStringIntegration=d.functionToStringIntegration,a.getActiveSpan=d.getActiveSpan,a.getClient=d.getClient,a.getCurrentHub=d.getCurrentHub,a.getCurrentScope=d.getCurrentScope,a.getGlobalScope=d.getGlobalScope,a.getIsolationScope=d.getIsolationScope,a.getRootSpan=d.getRootSpan,a.getSpanDescendants=d.getSpanDescendants,a.getSpanStatusFromHttpCode=d.getSpanStatusFromHttpCode,a.inboundFiltersIntegration=d.inboundFiltersIntegration,a.isInitialized=d.isInitialized,a.lastEventId=d.lastEventId,a.makeMultiplexedTransport=d.makeMultiplexedTransport,a.moduleMetadataIntegration=d.moduleMetadataIntegration,a.parameterize=d.parameterize,a.registerSpanErrorInstrumentation=d.registerSpanErrorInstrumentation,a.rewriteFramesIntegration=d.rewriteFramesIntegration,a.sessionTimingIntegration=d.sessionTimingIntegration,a.setContext=d.setContext,a.setCurrentClient=d.setCurrentClient,a.setExtra=d.setExtra,a.setExtras=d.setExtras,a.setHttpStatus=d.setHttpStatus,a.setMeasurement=d.setMeasurement,a.setTag=d.setTag,a.setTags=d.setTags,a.setUser=d.setUser,a.spanToBaggageHeader=d.spanToBaggageHeader,a.spanToJSON=d.spanToJSON,a.spanToTraceHeader=d.spanToTraceHeader,a.startInactiveSpan=d.startInactiveSpan,a.startSession=d.startSession,a.startSpan=d.startSpan,a.startSpanManual=d.startSpanManual,a.withActiveSpan=d.withActiveSpan,a.withIsolationScope=d.withIsolationScope,a.withScope=d.withScope,a.zodErrorsIntegration=d.zodErrorsIntegration,a.metrics=p.metrics,a.WINDOW=m.WINDOW,a.BrowserClient=g.BrowserClient,a.makeFetchTransport=l.makeFetchTransport,a.chromeStackLineParser=r.chromeStackLineParser,a.defaultStackLineParsers=r.defaultStackLineParsers,a.defaultStackParser=r.defaultStackParser,a.geckoStackLineParser=r.geckoStackLineParser,a.opera10StackLineParser=r.opera10StackLineParser,a.opera11StackLineParser=r.opera11StackLineParser,a.winjsStackLineParser=r.winjsStackLineParser,a.eventFromException=n.eventFromException,a.eventFromMessage=n.eventFromMessage,a.exceptionFromError=n.exceptionFromError,a.createUserFeedbackEnvelope=e.createUserFeedbackEnvelope,a.captureUserFeedback=t.captureUserFeedback,a.forceLoad=t.forceLoad,a.getDefaultIntegrations=t.getDefaultIntegrations,a.init=t.init,a.onLoad=t.onLoad,a.showReportDialog=t.showReportDialog,a.breadcrumbsIntegration=i.breadcrumbsIntegration,a.globalHandlersIntegration=o.globalHandlersIntegration,a.httpContextIntegration=u.httpContextIntegration,a.linkedErrorsIntegration=h.linkedErrorsIntegration,a.browserApiErrorsIntegration=S.browserApiErrorsIntegration,a.lazyLoadIntegration=f.lazyLoadIntegration,a.reportingObserverIntegration=v.reportingObserverIntegration,a.httpClientIntegration=E.httpClientIntegration,a.contextLinesIntegration=_.contextLinesIntegration,a.getReplay=T.getReplay,a.replayIntegration=T.replayIntegration,a.replayCanvasIntegration=w.replayCanvasIntegration,a.feedbackAsyncIntegration=M.feedbackAsyncIntegration,a.feedbackIntegration=R.feedbackSyncIntegration,a.feedbackSyncIntegration=R.feedbackSyncIntegration,a.getFeedback=O.getFeedback,a.sendFeedback=O.sendFeedback,a.defaultRequestInstrumentationOptions=k.defaultRequestInstrumentationOptions,a.instrumentOutgoingRequests=k.instrumentOutgoingRequests,a.browserTracingIntegration=A.browserTracingIntegration,a.startBrowserTracingNavigationSpan=A.startBrowserTracingNavigationSpan,a.startBrowserTracingPageLoadSpan=A.startBrowserTracingPageLoadSpan,a.makeBrowserOfflineTransport=P.makeBrowserOfflineTransport,a.browserProfilingIntegration=D.browserProfilingIntegration},3985552739:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(3778408185),p=c(8482989710),m=c(7563271614),g=c(3345899401),l=c(9046403702),r=1024,n="Breadcrumbs",e=s((E={})=>{const _={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...E};return{name:n,setup(T){_.console&&m.addConsoleInstrumentationHandler(u(T)),_.dom&&d.addClickKeypressInstrumentationHandler(o(T,_.dom)),_.xhr&&d.addXhrInstrumentationHandler(h(T)),_.fetch&&m.addFetchInstrumentationHandler(S(T)),_.history&&d.addHistoryInstrumentationHandler(f(T)),_.sentry&&T.on("beforeSendEvent",i(T))}}},"_breadcrumbsIntegration"),t=p.defineIntegration(e);function i(E){return s(function(T){p.getClient()===E&&p.addBreadcrumb({category:`sentry.${T.type==="transaction"?"transaction":"event"}`,event_id:T.event_id,level:T.level,message:m.getEventDescription(T)},{event:T})},"addSentryBreadcrumb")}s(i,"_getSentryBreadcrumbHandler");function o(E,_){return s(function(w){if(p.getClient()!==E)return;let M,R,O=typeof _=="object"?_.serializeAttribute:void 0,k=typeof _=="object"&&typeof _.maxStringLength=="number"?_.maxStringLength:void 0;k&&k>r&&(g.DEBUG_BUILD&&m.logger.warn(`\`dom.maxStringLength\` cannot exceed ${r}, but a value of ${k} was configured. Sentry will use ${r} instead.`),k=r),typeof O=="string"&&(O=[O]);try{const P=w.event,D=v(P)?P.target:P;M=m.htmlTreeAsString(D,{keyAttrs:O,maxStringLength:k}),R=m.getComponentName(D)}catch{M="<unknown>"}if(M.length===0)return;const A={category:`ui.${w.name}`,message:M};R&&(A.data={"ui.component_name":R}),p.addBreadcrumb(A,{event:w.event,name:w.name,global:w.global})},"_innerDomBreadcrumb")}s(o,"_getDomBreadcrumbHandler");function u(E){return s(function(T){if(p.getClient()!==E)return;const w={category:"console",data:{arguments:T.args,logger:"console"},level:m.severityLevelFromString(T.level),message:m.safeJoin(T.args," ")};if(T.level==="assert")if(T.args[0]===!1)w.message=`Assertion failed: ${m.safeJoin(T.args.slice(1)," ")||"console.assert"}`,w.data.arguments=T.args.slice(1);else return;p.addBreadcrumb(w,{input:T.args,level:T.level})},"_consoleBreadcrumb")}s(u,"_getConsoleBreadcrumbHandler");function h(E){return s(function(T){if(p.getClient()!==E)return;const{startTimestamp:w,endTimestamp:M}=T,R=T.xhr[d.SENTRY_XHR_DATA_KEY];if(!w||!M||!R)return;const{method:O,url:k,status_code:A,body:P}=R,D={method:O,url:k,status_code:A},H={xhr:T.xhr,input:P,startTimestamp:w,endTimestamp:M};p.addBreadcrumb({category:"xhr",data:D,type:"http"},H)},"_xhrBreadcrumb")}s(h,"_getXhrBreadcrumbHandler");function S(E){return s(function(T){if(p.getClient()!==E)return;const{startTimestamp:w,endTimestamp:M}=T;if(M&&!(T.fetchData.url.match(/sentry_key/)&&T.fetchData.method==="POST"))if(T.error){const R=T.fetchData,O={data:T.error,input:T.args,startTimestamp:w,endTimestamp:M};p.addBreadcrumb({category:"fetch",data:R,level:"error",type:"http"},O)}else{const R=T.response,O={...T.fetchData,status_code:R&&R.status},k={input:T.args,response:R,startTimestamp:w,endTimestamp:M};p.addBreadcrumb({category:"fetch",data:O,type:"http"},k)}},"_fetchBreadcrumb")}s(S,"_getFetchBreadcrumbHandler");function f(E){return s(function(T){if(p.getClient()!==E)return;let w=T.from,M=T.to;const R=m.parseUrl(l.WINDOW.location.href);let O=w?m.parseUrl(w):void 0;const k=m.parseUrl(M);(!O||!O.path)&&(O=R),R.protocol===k.protocol&&R.host===k.host&&(M=k.relative),R.protocol===O.protocol&&R.host===O.host&&(w=O.relative),p.addBreadcrumb({category:"navigation",data:{from:w,to:M}})},"_historyBreadcrumb")}s(f,"_getHistoryBreadcrumbHandler");function v(E){return!!E&&!!E.target}s(v,"_isEvent"),a.breadcrumbsIntegration=t},9919948800:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(9046403702),g=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],l="BrowserApiErrors",r=s((u={})=>{const h={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...u};return{name:l,setupOnce(){h.setTimeout&&p.fill(m.WINDOW,"setTimeout",e),h.setInterval&&p.fill(m.WINDOW,"setInterval",e),h.requestAnimationFrame&&p.fill(m.WINDOW,"requestAnimationFrame",t),h.XMLHttpRequest&&"XMLHttpRequest"in m.WINDOW&&p.fill(XMLHttpRequest.prototype,"send",i);const S=h.eventTarget;S&&(Array.isArray(S)?S:g).forEach(o)}}},"_browserApiErrorsIntegration"),n=d.defineIntegration(r);function e(u){return function(...h){const S=h[0];return h[0]=m.wrap(S,{mechanism:{data:{function:p.getFunctionName(u)},handled:!1,type:"instrument"}}),u.apply(this,h)}}s(e,"_wrapTimeFunction");function t(u){return function(h){return u.apply(this,[m.wrap(h,{mechanism:{data:{function:"requestAnimationFrame",handler:p.getFunctionName(u)},handled:!1,type:"instrument"}})])}}s(t,"_wrapRAF");function i(u){return function(...h){const S=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(v=>{v in S&&typeof S[v]=="function"&&p.fill(S,v,function(E){const _={mechanism:{data:{function:v,handler:p.getFunctionName(E)},handled:!1,type:"instrument"}},T=p.getOriginalFunction(E);return T&&(_.mechanism.data.handler=p.getFunctionName(T)),m.wrap(E,_)})}),u.apply(this,h)}}s(i,"_wrapXHR");function o(u){const h=m.WINDOW,S=h[u]&&h[u].prototype;!S||!S.hasOwnProperty||!S.hasOwnProperty("addEventListener")||(p.fill(S,"addEventListener",function(f){return function(v,E,_){try{typeof E.handleEvent=="function"&&(E.handleEvent=m.wrap(E.handleEvent,{mechanism:{data:{function:"handleEvent",handler:p.getFunctionName(E),target:u},handled:!1,type:"instrument"}}))}catch{}return f.apply(this,[v,m.wrap(E,{mechanism:{data:{function:"addEventListener",handler:p.getFunctionName(E),target:u},handled:!1,type:"instrument"}}),_])}}),p.fill(S,"removeEventListener",function(f){return function(v,E,_){const T=E;try{const w=T&&T.__sentry_wrapped__;w&&f.call(this,v,w,_)}catch{}return f.call(this,v,T,_)}}))}s(o,"_wrapEventTarget"),a.browserApiErrorsIntegration=n},4269444637:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=p.GLOBAL_OBJ,g=7,l="ContextLines",r=s((i={})=>{const o=i.frameContextLines!=null?i.frameContextLines:g;return{name:l,processEvent(u){return e(u,o)}}},"_contextLinesIntegration"),n=d.defineIntegration(r);function e(i,o){const u=m.document,h=m.location&&p.stripUrlQueryAndFragment(m.location.href);if(!u||!h)return i;const S=i.exception&&i.exception.values;if(!S||!S.length)return i;const f=u.documentElement.innerHTML;if(!f)return i;const v=["<!DOCTYPE html>","<html>",...f.split(`
`),"</html>"];return S.forEach(E=>{const _=E.stacktrace;_&&_.frames&&(_.frames=_.frames.map(T=>t(T,v,h,o)))}),i}s(e,"addSourceContext");function t(i,o,u,h){return i.filename!==u||!i.lineno||!o.length||p.addContextToFrame(o,i,h),i}s(t,"applySourceContextToFrame"),a.applySourceContextToFrame=t,a.contextLinesIntegration=n},2334015581:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(3345899401),g=c(375537670),l=c(9046403702),r="GlobalHandlers",n=s((v={})=>{const E={onerror:!0,onunhandledrejection:!0,...v};return{name:r,setupOnce(){Error.stackTraceLimit=50},setup(_){E.onerror&&(t(_),S("onerror")),E.onunhandledrejection&&(i(_),S("onunhandledrejection"))}}},"_globalHandlersIntegration"),e=d.defineIntegration(n);function t(v){p.addGlobalErrorInstrumentationHandler(E=>{const{stackParser:_,attachStacktrace:T}=f();if(d.getClient()!==v||l.shouldIgnoreOnError())return;const{msg:w,url:M,line:R,column:O,error:k}=E,A=h(g.eventFromUnknownInput(_,k||w,void 0,T,!1),M,R,O);A.level="error",d.captureEvent(A,{originalException:k,mechanism:{handled:!1,type:"onerror"}})})}s(t,"_installGlobalOnErrorHandler");function i(v){p.addGlobalUnhandledRejectionInstrumentationHandler(E=>{const{stackParser:_,attachStacktrace:T}=f();if(d.getClient()!==v||l.shouldIgnoreOnError())return;const w=o(E),M=p.isPrimitive(w)?u(w):g.eventFromUnknownInput(_,w,void 0,T,!0);M.level="error",d.captureEvent(M,{originalException:w,mechanism:{handled:!1,type:"onunhandledrejection"}})})}s(i,"_installGlobalOnUnhandledRejectionHandler");function o(v){if(p.isPrimitive(v))return v;try{if("reason"in v)return v.reason;if("detail"in v&&"reason"in v.detail)return v.detail.reason}catch{}return v}s(o,"_getUnhandledRejectionError");function u(v){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(v)}`}]}}}s(u,"_eventFromRejectionWithPrimitive");function h(v,E,_,T){const w=v.exception=v.exception||{},M=w.values=w.values||[],R=M[0]=M[0]||{},O=R.stacktrace=R.stacktrace||{},k=O.frames=O.frames||[],A=isNaN(parseInt(T,10))?void 0:T,P=isNaN(parseInt(_,10))?void 0:_,D=p.isString(E)&&E.length>0?E:p.getLocationHref();return k.length===0&&k.push({colno:A,filename:D,function:p.UNKNOWN_FUNCTION,in_app:!0,lineno:P}),v}s(h,"_enhanceEventWithInitialFrame");function S(v){m.DEBUG_BUILD&&p.logger.log(`Global Handler attached: ${v}`)}s(S,"globalHandlerLog");function f(){const v=d.getClient();return v&&v.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}s(f,"getOptions"),a.globalHandlersIntegration=e},328044736:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(3778408185),p=c(8482989710),m=c(7563271614),g=c(3345899401),l="HttpClient",r=s((R={})=>{const O={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...R};return{name:l,setup(k){v(k,O),E(k,O)}}},"_httpClientIntegration"),n=p.defineIntegration(r);function e(R,O,k,A){if(_(R,k.status,k.url)){const P=w(O,A);let D,H,j,W;M()&&([{headers:D,cookies:j},{headers:H,cookies:W}]=[{cookieHeader:"Cookie",obj:P},{cookieHeader:"Set-Cookie",obj:k}].map(({cookieHeader:ee,obj:fe})=>{const oe=u(fe.headers);let Oe;try{const Xe=oe[ee]||oe[ee.toLowerCase()]||void 0;Xe&&(Oe=o(Xe))}catch{g.DEBUG_BUILD&&m.logger.log(`Could not extract cookies from header ${ee}`)}return{headers:oe,cookies:Oe}}));const X=T({url:P.url,method:P.method,status:k.status,requestHeaders:D,responseHeaders:H,requestCookies:j,responseCookies:W});p.captureEvent(X)}}s(e,"_fetchResponseHandler");function t(R,O,k,A){if(_(R,O.status,O.responseURL)){let P,D,H;if(M()){try{const W=O.getResponseHeader("Set-Cookie")||O.getResponseHeader("set-cookie")||void 0;W&&(D=o(W))}catch{g.DEBUG_BUILD&&m.logger.log("Could not extract cookies from response headers")}try{H=h(O)}catch{g.DEBUG_BUILD&&m.logger.log("Could not extract headers from response")}P=A}const j=T({url:O.responseURL,method:k,status:O.status,requestHeaders:P,responseHeaders:H,responseCookies:D});p.captureEvent(j)}}s(t,"_xhrResponseHandler");function i(R){if(R){const O=R["Content-Length"]||R["content-length"];if(O)return parseInt(O,10)}}s(i,"_getResponseSizeFromHeaders");function o(R){return R.split("; ").reduce((O,k)=>{const[A,P]=k.split("=");return O[A]=P,O},{})}s(o,"_parseCookieString");function u(R){const O={};return R.forEach((k,A)=>{O[A]=k}),O}s(u,"_extractFetchHeaders");function h(R){const O=R.getAllResponseHeaders();return O?O.split(`\r
`).reduce((k,A)=>{const[P,D]=A.split(": ");return k[P]=D,k},{}):{}}s(h,"_getXHRResponseHeaders");function S(R,O){return R.some(k=>typeof k=="string"?O.includes(k):k.test(O))}s(S,"_isInGivenRequestTargets");function f(R,O){return R.some(k=>typeof k=="number"?k===O:O>=k[0]&&O<=k[1])}s(f,"_isInGivenStatusRanges");function v(R,O){m.supportsNativeFetch()&&m.addFetchInstrumentationHandler(k=>{if(p.getClient()!==R)return;const{response:A,args:P}=k,[D,H]=P;A&&e(O,D,A,H)})}s(v,"_wrapFetch");function E(R,O){"XMLHttpRequest"in m.GLOBAL_OBJ&&d.addXhrInstrumentationHandler(k=>{if(p.getClient()!==R)return;const A=k.xhr,P=A[d.SENTRY_XHR_DATA_KEY];if(!P)return;const{method:D,request_headers:H}=P;try{t(O,A,D,H)}catch(j){g.DEBUG_BUILD&&m.logger.warn("Error while extracting response event form XHR response",j)}})}s(E,"_wrapXHR");function _(R,O,k){return f(R.failedRequestStatusCodes,O)&&S(R.failedRequestTargets,k)&&!p.isSentryRequestUrl(k,p.getClient())}s(_,"_shouldCaptureResponse");function T(R){const O=`HTTP Client Error with status code: ${R.status}`,k={message:O,exception:{values:[{type:"Error",value:O}]},request:{url:R.url,method:R.method,headers:R.requestHeaders,cookies:R.requestCookies},contexts:{response:{status_code:R.status,headers:R.responseHeaders,cookies:R.responseCookies,body_size:i(R.responseHeaders)}}};return m.addExceptionMechanism(k,{type:"http.client",handled:!1}),k}s(T,"_createEvent");function w(R,O){return!O&&R instanceof Request||R instanceof Request&&R.bodyUsed?R:new Request(R,O)}s(w,"_getRequest");function M(){const R=p.getClient();return R?Boolean(R.getOptions().sendDefaultPii):!1}s(M,"_shouldSendDefaultPii"),a.httpClientIntegration=n},7098914998:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(9046403702),m=d.defineIntegration(()=>({name:"HttpContext",preprocessEvent(g){if(!p.WINDOW.navigator&&!p.WINDOW.location&&!p.WINDOW.document)return;const l=g.request&&g.request.url||p.WINDOW.location&&p.WINDOW.location.href,{referrer:r}=p.WINDOW.document||{},{userAgent:n}=p.WINDOW.navigator||{},e={...g.request&&g.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},t={...g.request,...l&&{url:l},headers:e};g.request=t}}));a.httpContextIntegration=m},4305747877:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(375537670),g="cause",l=5,r="LinkedErrors",n=s((t={})=>{const i=t.limit||l,o=t.key||g;return{name:r,preprocessEvent(u,h,S){const f=S.getOptions();p.applyAggregateErrorsToEvent(m.exceptionFromError,f.stackParser,f.maxValueLength,o,i,u,h)}}},"_linkedErrorsIntegration"),e=d.defineIntegration(n);a.linkedErrorsIntegration=e},918703877:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=p.GLOBAL_OBJ,g="ReportingObserver",l=new WeakMap,r=s((e={})=>{const t=e.types||["crash","deprecation","intervention"];function i(o){if(l.has(d.getClient()))for(const u of o)d.withScope(h=>{h.setExtra("url",u.url);const S=`ReportingObserver [${u.type}]`;let f="No details available";if(u.body){const v={};for(const E in u.body)v[E]=u.body[E];if(h.setExtra("body",v),u.type==="crash"){const E=u.body;f=[E.crashId||"",E.reason||""].join(" ").trim()||f}else f=u.body.message||f}d.captureMessage(`${S}: ${f}`)})}return s(i,"handler"),{name:g,setupOnce(){if(!p.supportsReportingObserver())return;new m.ReportingObserver(i,{buffered:!0,types:t}).observe()},setup(o){l.set(o,!0)}}},"_reportingObserverIntegration"),n=d.defineIntegration(r);a.reportingObserverIntegration=n},1114790286:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710);function p(n,e=1,t){d.metrics.increment(d.BrowserMetricsAggregator,n,e,t)}s(p,"increment");function m(n,e,t){d.metrics.distribution(d.BrowserMetricsAggregator,n,e,t)}s(m,"distribution");function g(n,e,t){d.metrics.set(d.BrowserMetricsAggregator,n,e,t)}s(g,"set");function l(n,e,t){d.metrics.gauge(d.BrowserMetricsAggregator,n,e,t)}s(l,"gauge");const r={increment:p,distribution:m,set:g,gauge:l};a.metrics=r},5380267868:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(3345899401),g=c(3423034766),l=c(9596377211),r="BrowserProfiling",n=s(()=>({name:r,setup(t){const i=d.getActiveSpan(),o=i&&d.getRootSpan(i);o&&l.isAutomatedPageLoadSpan(o)&&l.shouldProfileSpan(o)&&g.startProfileForSpan(o),t.on("spanStart",u=>{u===d.getRootSpan(u)&&l.shouldProfileSpan(u)&&g.startProfileForSpan(u)}),t.on("beforeEnvelope",u=>{if(!l.getActiveProfilesCount())return;const h=l.findProfiledTransactionsFromEnvelope(u);if(!h.length)return;const S=[];for(const f of h){const v=f&&f.contexts,E=v&&v.profile&&v.profile.profile_id,_=v&&v.profile&&v.profile.start_timestamp;if(typeof E!="string"){m.DEBUG_BUILD&&p.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!E){m.DEBUG_BUILD&&p.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}v&&v.profile&&delete v.profile;const T=l.takeProfileFromGlobalCache(E);if(!T){m.DEBUG_BUILD&&p.logger.log(`[Profiling] Could not retrieve profile for span: ${E}`);continue}const w=l.createProfilingEvent(E,_,T,f);w&&S.push(w)}l.addProfilesToEnvelope(u,S)})}}),"_browserProfilingIntegration"),e=d.defineIntegration(n);a.browserProfilingIntegration=e},3423034766:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(3345899401),g=c(9046403702),l=c(9596377211);function r(n){let e;l.isAutomatedPageLoadSpan(n)&&(e=p.timestampInSeconds()*1e3);const t=l.startJSSelfProfile();if(!t)return;m.DEBUG_BUILD&&p.logger.log(`[Profiling] started profiling span: ${d.spanToJSON(n).description}`);const i=p.uuid4();d.getCurrentScope().setContext("profile",{profile_id:i,start_timestamp:e});async function o(){if(n&&t)return t.stop().then(f=>{if(u&&(g.WINDOW.clearTimeout(u),u=void 0),m.DEBUG_BUILD&&p.logger.log(`[Profiling] stopped profiling of span: ${d.spanToJSON(n).description}`),!f){m.DEBUG_BUILD&&p.logger.log(`[Profiling] profiler returned null profile for: ${d.spanToJSON(n).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}l.addProfileToGlobalCache(i,f)}).catch(f=>{m.DEBUG_BUILD&&p.logger.log("[Profiling] error while stopping profiler:",f)})}s(o,"onProfileHandler");let u=g.WINDOW.setTimeout(()=>{m.DEBUG_BUILD&&p.logger.log("[Profiling] max profile duration elapsed, stopping profiling for:",d.spanToJSON(n).description),o()},l.MAX_PROFILE_DURATION_MS);const h=n.end.bind(n);function S(){return n?(o().then(()=>{h()},()=>{h()}),n):h()}s(S,"profilingWrappedSpanEnd"),n.end=S}s(r,"startProfileForSpan"),a.startProfileForSpan=r},9596377211:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(3345899401),g=c(9046403702),l=1e6,r=String(0),n="main";let e="",t="",i="",o=g.WINDOW.navigator&&g.WINDOW.navigator.userAgent||"",u="";const h=g.WINDOW.navigator&&g.WINDOW.navigator.language||g.WINDOW.navigator&&g.WINDOW.navigator.languages&&g.WINDOW.navigator.languages[0]||"";function S(Me){return typeof Me=="object"&&Me!==null&&"getHighEntropyValues"in Me}s(S,"isUserAgentData");const f=g.WINDOW.navigator&&g.WINDOW.navigator.userAgentData;S(f)&&f.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(Me=>{if(e=Me.platform||"",i=Me.architecture||"",u=Me.model||"",t=Me.platformVersion||"",Me.fullVersionList&&Me.fullVersionList.length>0){const $e=Me.fullVersionList[Me.fullVersionList.length-1];o=`${$e.brand} ${$e.version}`}}).catch(Me=>{});function v(Me){return!("thread_metadata"in Me)}s(v,"isProcessedJSSelfProfile");function E(Me){return v(Me)?M(Me):Me}s(E,"enrichWithThreadInformation");function _(Me){const $e=Me&&Me.contexts&&Me.contexts.trace&&Me.contexts.trace.trace_id;return typeof $e=="string"&&$e.length!==32&&m.DEBUG_BUILD&&p.logger.log(`[Profiling] Invalid traceId: ${$e} on profiled event`),typeof $e!="string"?"":$e}s(_,"getTraceId");function T(Me,$e,ze,nt){if(nt.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(ze==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${ze} instead.`);const mt=_(nt),gt=E(ze),Pe=$e||(typeof nt.start_timestamp=="number"?nt.start_timestamp*1e3:p.timestampInSeconds()*1e3),xe=typeof nt.timestamp=="number"?nt.timestamp*1e3:p.timestampInSeconds()*1e3;return{event_id:Me,timestamp:new Date(Pe).toISOString(),platform:"javascript",version:"1",release:nt.release||"",environment:nt.environment||d.DEFAULT_ENVIRONMENT,runtime:{name:"javascript",version:g.WINDOW.navigator.userAgent},os:{name:e,version:t,build_number:o},device:{locale:h,model:u,manufacturer:o,architecture:i,is_emulator:!1},debug_meta:{images:A(ze.resources)},profile:gt,transactions:[{name:nt.transaction||"",id:nt.event_id||p.uuid4(),trace_id:mt,active_thread_id:r,relative_start_ns:"0",relative_end_ns:((xe-Pe)*1e6).toFixed(0)}]}}s(T,"createProfilePayload");function w(Me){return d.spanToJSON(Me).op==="pageload"}s(w,"isAutomatedPageLoadSpan");function M(Me){let $e,ze=0;const nt={samples:[],stacks:[],frames:[],thread_metadata:{[r]:{name:n}}};if(!Me.samples.length)return nt;const mt=Me.samples[0].timestamp,gt=typeof performance.timeOrigin=="number"?performance.timeOrigin:p.browserPerformanceTimeOrigin||0,Pe=gt-(p.browserPerformanceTimeOrigin||gt);for(let xe=0;xe<Me.samples.length;xe++){const Ye=Me.samples[xe];if(Ye.stackId===void 0){$e===void 0&&($e=ze,nt.stacks[$e]=[],ze++),nt.samples[xe]={elapsed_since_start_ns:((Ye.timestamp+Pe-mt)*l).toFixed(0),stack_id:$e,thread_id:r};continue}let Ze=Me.stacks[Ye.stackId];const Re=[];for(;Ze;){Re.push(Ze.frameId);const rt=Me.frames[Ze.frameId];nt.frames[Ze.frameId]===void 0&&(nt.frames[Ze.frameId]={function:rt.name,abs_path:typeof rt.resourceId=="number"?Me.resources[rt.resourceId]:void 0,lineno:rt.line,colno:rt.column}),Ze=Ze.parentId===void 0?void 0:Me.stacks[Ze.parentId]}const Tt={elapsed_since_start_ns:((Ye.timestamp+Pe-mt)*l).toFixed(0),stack_id:ze,thread_id:r};nt.stacks[ze]=Re,nt.samples[xe]=Tt,ze++}return nt}s(M,"convertJSSelfProfileToSampledFormat");function R(Me,$e){if(!$e.length)return Me;for(const ze of $e)Me[1].push([{type:"profile"},ze]);return Me}s(R,"addProfilesToEnvelope");function O(Me){const $e=[];return p.forEachEnvelopeItem(Me,(ze,nt)=>{if(nt==="transaction")for(let mt=1;mt<ze.length;mt++){const gt=ze[mt];gt&&gt.contexts&&gt.contexts.profile&&gt.contexts.profile.profile_id&&$e.push(ze[mt])}}),$e}s(O,"findProfiledTransactionsFromEnvelope");const k=new WeakMap;function A(Me){const $e=p.GLOBAL_OBJ._sentryDebugIds;if(!$e)return[];const ze=d.getClient(),nt=ze&&ze.getOptions(),mt=nt&&nt.stackParser;if(!mt)return[];let gt;const Pe=k.get(mt);Pe?gt=Pe:(gt=new Map,k.set(mt,gt));const xe=Object.keys($e).reduce((Ze,Re)=>{let Tt;const rt=gt.get(Re);rt?Tt=rt:(Tt=mt(Re),gt.set(Re,Tt));for(let Nt=Tt.length-1;Nt>=0;Nt--){const Wt=Tt[Nt],Qt=Wt&&Wt.filename;if(Wt&&Qt){Ze[Qt]=$e[Re];break}}return Ze},{}),Ye=[];for(const Ze of Me)Ze&&xe[Ze]&&Ye.push({type:"sourcemap",code_file:Ze,debug_id:xe[Ze]});return Ye}s(A,"applyDebugMetadata");function P(Me){return typeof Me!="number"&&typeof Me!="boolean"||typeof Me=="number"&&isNaN(Me)?(m.DEBUG_BUILD&&p.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(Me)} of type ${JSON.stringify(typeof Me)}.`),!1):Me===!0||Me===!1?!0:Me<0||Me>1?(m.DEBUG_BUILD&&p.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${Me}.`),!1):!0}s(P,"isValidSampleRate");function D(Me){return Me.samples.length<2?(m.DEBUG_BUILD&&p.logger.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):Me.frames.length?!0:(m.DEBUG_BUILD&&p.logger.log("[Profiling] Discarding profile because it contains no frames"),!1)}s(D,"isValidProfile");let H=!1;const j=3e4;function W(Me){return typeof Me=="function"}s(W,"isJSProfilerSupported");function X(){const Me=g.WINDOW.Profiler;if(!W(Me)){m.DEBUG_BUILD&&p.logger.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const $e=10,ze=Math.floor(j/$e);try{return new Me({sampleInterval:$e,maxBufferSize:ze})}catch{m.DEBUG_BUILD&&(p.logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),p.logger.log("[Profiling] Disabling profiling for current user session.")),H=!0}}s(X,"startJSSelfProfile");function ee(Me){if(H)return m.DEBUG_BUILD&&p.logger.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!Me.isRecording())return m.DEBUG_BUILD&&p.logger.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const $e=d.getClient(),ze=$e&&$e.getOptions();if(!ze)return m.DEBUG_BUILD&&p.logger.log("[Profiling] Profiling disabled, no options found."),!1;const nt=ze.profilesSampleRate;return P(nt)?nt?(nt===!0?!0:Math.random()<nt)?!0:(m.DEBUG_BUILD&&p.logger.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(nt)})`),!1):(m.DEBUG_BUILD&&p.logger.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(m.DEBUG_BUILD&&p.logger.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}s(ee,"shouldProfileSpan");function fe(Me,$e,ze,nt){return D(ze)?T(Me,$e,ze,nt):null}s(fe,"createProfilingEvent");const oe=new Map;function Oe(){return oe.size}s(Oe,"getActiveProfilesCount");function Xe(Me){const $e=oe.get(Me);return $e&&oe.delete(Me),$e}s(Xe,"takeProfileFromGlobalCache");function ge(Me,$e){if(oe.set(Me,$e),oe.size>30){const ze=oe.keys().next().value;oe.delete(ze)}}s(ge,"addProfileToGlobalCache"),a.MAX_PROFILE_DURATION_MS=j,a.addProfileToGlobalCache=ge,a.addProfilesToEnvelope=R,a.applyDebugMetadata=A,a.convertJSSelfProfileToSampledFormat=M,a.createProfilePayload=T,a.createProfilingEvent=fe,a.enrichWithThreadInformation=E,a.findProfiledTransactionsFromEnvelope=O,a.getActiveProfilesCount=Oe,a.isAutomatedPageLoadSpan=w,a.isValidSampleRate=P,a.shouldProfileSpan=ee,a.startJSSelfProfile=X,a.takeProfileFromGlobalCache=Xe},7672786771:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(3778408185),g=c(8151162894),l=c(3345899401),r=c(9046403702),n=c(3985552739),e=c(9919948800),t=c(2334015581),i=c(7098914998),o=c(4305747877),u=c(4795369790),h=c(8685600704);function S(O){return[d.inboundFiltersIntegration(),d.functionToStringIntegration(),e.browserApiErrorsIntegration(),n.breadcrumbsIntegration(),t.globalHandlersIntegration(),o.linkedErrorsIntegration(),d.dedupeIntegration(),i.httpContextIntegration()]}s(S,"getDefaultIntegrations");function f(O={}){return{...{defaultIntegrations:S(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:r.WINDOW.SENTRY_RELEASE&&r.WINDOW.SENTRY_RELEASE.id?r.WINDOW.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0},...O}}s(f,"applyDefaultOptions");function v(){const O=r.WINDOW,k=O&&O.chrome&&O.chrome.runtime&&O.chrome.runtime.id,A=r.WINDOW;return!!(A&&A.browser&&A.browser.runtime&&A.browser.runtime.id)||!!k}s(v,"shouldShowBrowserExtensionError");function E(O={}){const k=f(O);if(v()){p.consoleSandbox(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}l.DEBUG_BUILD&&(p.supportsFetch()||p.logger.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const A={...k,stackParser:p.stackParserFromStackParserOptions(k.stackParser||u.defaultStackParser),integrations:d.getIntegrationsToSetup(k),transport:k.transport||h.makeFetchTransport};d.initAndBind(g.BrowserClient,A),k.autoSessionTracking&&M()}s(E,"init");function _(O={}){if(!r.WINDOW.document){l.DEBUG_BUILD&&p.logger.error("Global document not defined in showReportDialog call");return}const k=d.getCurrentScope(),A=k.getClient(),P=A&&A.getDsn();if(!P){l.DEBUG_BUILD&&p.logger.error("DSN not configured for showReportDialog call");return}if(k&&(O.user={...k.getUser(),...O.user}),!O.eventId){const W=d.lastEventId();W&&(O.eventId=W)}const D=r.WINDOW.document.createElement("script");D.async=!0,D.crossOrigin="anonymous",D.src=d.getReportDialogEndpoint(P,O),O.onLoad&&(D.onload=O.onLoad);const{onClose:H}=O;if(H){const W=s(X=>{if(X.data==="__sentry_reportdialog_closed__")try{H()}finally{r.WINDOW.removeEventListener("message",W)}},"reportDialogClosedMessageHandler");r.WINDOW.addEventListener("message",W)}const j=r.WINDOW.document.head||r.WINDOW.document.body;j?j.appendChild(D):l.DEBUG_BUILD&&p.logger.error("Not injecting report dialog. No injection point found in HTML")}s(_,"showReportDialog");function T(){}s(T,"forceLoad");function w(O){O()}s(w,"onLoad");function M(){if(typeof r.WINDOW.document>"u"){l.DEBUG_BUILD&&p.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}d.startSession({ignoreDuration:!0}),d.captureSession(),m.addHistoryInstrumentationHandler(({from:O,to:k})=>{O!==void 0&&O!==k&&(d.startSession({ignoreDuration:!0}),d.captureSession())})}s(M,"startSessionTracking");function R(O){const k=d.getClient();k&&k.captureUserFeedback(O)}s(R,"captureUserFeedback"),a.captureUserFeedback=R,a.forceLoad=T,a.getDefaultIntegrations=S,a.init=E,a.onLoad=w,a.showReportDialog=_},4795369790:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=10,m=20,g=30,l=40,r=50;function n(H,j,W,X){const ee={filename:H,function:j==="<anonymous>"?d.UNKNOWN_FUNCTION:j,in_app:!0};return W!==void 0&&(ee.lineno=W),X!==void 0&&(ee.colno=X),ee}s(n,"createFrame");const e=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,t=/\((\S*)(?::(\d+))(?::(\d+))\)/,o=[g,s(H=>{const j=e.exec(H);if(j){if(j[2]&&j[2].indexOf("eval")===0){const fe=t.exec(j[2]);fe&&(j[2]=fe[1],j[3]=fe[2],j[4]=fe[3])}const[X,ee]=D(j[1]||d.UNKNOWN_FUNCTION,j[2]);return n(ee,X,j[3]?+j[3]:void 0,j[4]?+j[4]:void 0)}},"chromeStackParserFn")],u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,h=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,f=[r,s(H=>{const j=u.exec(H);if(j){if(j[3]&&j[3].indexOf(" > eval")>-1){const fe=h.exec(j[3]);fe&&(j[1]=j[1]||"eval",j[3]=fe[1],j[4]=fe[2],j[5]="")}let X=j[3],ee=j[1]||d.UNKNOWN_FUNCTION;return[ee,X]=D(ee,X),n(X,ee,j[4]?+j[4]:void 0,j[5]?+j[5]:void 0)}},"gecko")],v=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,_=[l,s(H=>{const j=v.exec(H);return j?n(j[2],j[1]||d.UNKNOWN_FUNCTION,+j[3],j[4]?+j[4]:void 0):void 0},"winjs")],T=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,M=[p,s(H=>{const j=T.exec(H);return j?n(j[2],j[3]||d.UNKNOWN_FUNCTION,+j[1]):void 0},"opera10")],R=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,k=[m,s(H=>{const j=R.exec(H);return j?n(j[5],j[3]||j[4]||d.UNKNOWN_FUNCTION,+j[1],+j[2]):void 0},"opera11")],A=[o,f],P=d.createStackParser(...A),D=s((H,j)=>{const W=H.indexOf("safari-extension")!==-1,X=H.indexOf("safari-web-extension")!==-1;return W||X?[H.indexOf("@")!==-1?H.split("@")[0]:d.UNKNOWN_FUNCTION,W?`safari-extension:${j}`:`safari-web-extension:${j}`]:[H,j]},"extractSafariExtensionDetails");a.chromeStackLineParser=o,a.defaultStackLineParsers=A,a.defaultStackParser=P,a.geckoStackLineParser=f,a.opera10StackLineParser=M,a.opera11StackLineParser=k,a.winjsStackLineParser=_},3372334685:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(3345899401),g=c(9046403702);function l(){g.WINDOW&&g.WINDOW.document?g.WINDOW.document.addEventListener("visibilitychange",()=>{const r=d.getActiveSpan();if(!r)return;const n=d.getRootSpan(r);if(g.WINDOW.document.hidden&&n){const e="cancelled",{op:t,status:i}=d.spanToJSON(n);m.DEBUG_BUILD&&p.logger.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${t}`),i||n.setStatus({code:d.SPAN_STATUS_ERROR,message:e}),n.setAttribute("sentry.cancellation_reason","document.hidden"),n.end()}}):m.DEBUG_BUILD&&p.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}s(l,"registerBackgroundTabDetection"),a.registerBackgroundTabDetection=l},5559796378:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(3778408185),p=c(8482989710),m=c(7563271614),g=c(3345899401),l=c(9046403702),r=c(3372334685),n=c(6520656099),e="BrowserTracing",t={...p.TRACING_DEFAULTS,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{},...n.defaultRequestInstrumentationOptions},i=s((v={})=>{p.registerSpanErrorInstrumentation();const{enableInp:E,enableLongTask:_,_experiments:{enableInteractions:T},beforeStartSpan:w,idleTimeout:M,finalTimeout:R,childSpanTimeout:O,markBackgroundSpan:k,traceFetch:A,traceXHR:P,shouldCreateSpanForRequest:D,enableHTTPTimings:H,instrumentPageLoad:j,instrumentNavigation:W}={...t,...v},X=d.startTrackingWebVitals();E&&d.startTrackingINP(),_&&d.startTrackingLongTasks(),T&&d.startTrackingInteractions();const ee={name:void 0,source:void 0};function fe(oe,Oe){const Xe=Oe.op==="pageload",ge=w?w(Oe):Oe,Me=ge.attributes||{};Oe.name!==ge.name&&(Me[p.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="custom",ge.attributes=Me),ee.name=ge.name,ee.source=Me[p.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];const $e=p.startIdleSpan(ge,{idleTimeout:M,finalTimeout:R,childSpanTimeout:O,disableAutoFinish:Xe,beforeSpanEnd:nt=>{X(),d.addPerformanceEntries(nt)}});function ze(){["interactive","complete"].includes(l.WINDOW.document.readyState)&&oe.emit("idleSpanEnableAutoFinish",$e)}return s(ze,"emitFinish"),Xe&&l.WINDOW.document&&(l.WINDOW.document.addEventListener("readystatechange",()=>{ze()}),ze()),$e}return s(fe,"_createRouteSpan"),{name:e,afterAllSetup(oe){let Oe,Xe=l.WINDOW.location&&l.WINDOW.location.href;oe.on("startNavigationSpan",ge=>{p.getClient()===oe&&(Oe&&(g.DEBUG_BUILD&&m.logger.log(`[Tracing] Finishing current root span with op: ${p.spanToJSON(Oe).op}`),Oe.end()),Oe=fe(oe,{op:"navigation",...ge}))}),oe.on("startPageLoadSpan",(ge,Me={})=>{if(p.getClient()!==oe)return;Oe&&(g.DEBUG_BUILD&&m.logger.log(`[Tracing] Finishing current root span with op: ${p.spanToJSON(Oe).op}`),Oe.end());const $e=Me.sentryTrace||h("sentry-trace"),ze=Me.baggage||h("baggage"),nt=m.propagationContextFromHeaders($e,ze);p.getCurrentScope().setPropagationContext(nt),Oe=fe(oe,{op:"pageload",...ge})}),oe.on("spanEnd",ge=>{const Me=p.spanToJSON(ge).op;if(ge!==p.getRootSpan(ge)||Me!=="navigation"&&Me!=="pageload")return;const $e=p.getCurrentScope(),ze=$e.getPropagationContext();$e.setPropagationContext({...ze,sampled:ze.sampled!==void 0?ze.sampled:p.spanIsSampled(ge),dsc:ze.dsc||p.getDynamicSamplingContextFromSpan(ge)})}),l.WINDOW.location&&(j&&o(oe,{name:l.WINDOW.location.pathname,startTime:m.browserPerformanceTimeOrigin?m.browserPerformanceTimeOrigin/1e3:void 0,attributes:{[p.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[p.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.pageload.browser"}}),W&&d.addHistoryInstrumentationHandler(({to:ge,from:Me})=>{if(Me===void 0&&Xe&&Xe.indexOf(ge)!==-1){Xe=void 0;return}Me!==ge&&(Xe=void 0,u(oe,{name:l.WINDOW.location.pathname,attributes:{[p.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[p.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.navigation.browser"}}))})),k&&r.registerBackgroundTabDetection(),T&&S(M,R,O,ee),n.instrumentOutgoingRequests({traceFetch:A,traceXHR:P,tracePropagationTargets:oe.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:D,enableHTTPTimings:H})}}},"browserTracingIntegration");function o(v,E,_){v.emit("startPageLoadSpan",E,_),p.getCurrentScope().setTransactionName(E.name);const T=p.getActiveSpan();return(T&&p.spanToJSON(T).op)==="pageload"?T:void 0}s(o,"startBrowserTracingPageLoadSpan");function u(v,E){p.getCurrentScope().setPropagationContext(f()),p.getIsolationScope().setPropagationContext(f()),v.emit("startNavigationSpan",E),p.getCurrentScope().setTransactionName(E.name);const _=p.getActiveSpan();return(_&&p.spanToJSON(_).op)==="navigation"?_:void 0}s(u,"startBrowserTracingNavigationSpan");function h(v){const E=m.getDomElement(`meta[name=${v}]`);return E?E.getAttribute("content"):void 0}s(h,"getMetaContent");function S(v,E,_,T){let w;const M=s(()=>{const R="ui.action.click",O=p.getActiveSpan(),k=O&&p.getRootSpan(O);if(k){const A=p.spanToJSON(k).op;if(["navigation","pageload"].includes(A)){g.DEBUG_BUILD&&m.logger.warn(`[Tracing] Did not create ${R} span because a pageload or navigation span is in progress.`);return}}if(w&&(w.setAttribute(p.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,"interactionInterrupted"),w.end(),w=void 0),!T.name){g.DEBUG_BUILD&&m.logger.warn(`[Tracing] Did not create ${R} transaction because _latestRouteName is missing.`);return}w=p.startIdleSpan({name:T.name,op:R,attributes:{[p.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:T.source||"url"}},{idleTimeout:v,finalTimeout:E,childSpanTimeout:_})},"registerInteractionTransaction");l.WINDOW.document&&addEventListener("click",M,{once:!1,capture:!0})}s(S,"registerInteractionListener");function f(){return{traceId:m.uuid4(),spanId:m.uuid4().substring(16)}}s(f,"generatePropagationContext"),a.BROWSER_TRACING_INTEGRATION_ID=e,a.browserTracingIntegration=i,a.getMetaContent=h,a.startBrowserTracingNavigationSpan=u,a.startBrowserTracingPageLoadSpan=o},6520656099:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(3778408185),p=c(8482989710),m=c(7563271614),g=c(9046403702),l={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function r(E){const{traceFetch:_,traceXHR:T,shouldCreateSpanForRequest:w,enableHTTPTimings:M,tracePropagationTargets:R}={traceFetch:l.traceFetch,traceXHR:l.traceXHR,...E},O=typeof w=="function"?w:P=>!0,k=s(P=>u(P,R),"shouldAttachHeadersWithTargets"),A={};_&&m.addFetchInstrumentationHandler(P=>{const D=p.instrumentFetchRequest(P,O,k,A);if(D){const H=v(P.fetchData.url),j=H?m.parseUrl(H).host:void 0;D.setAttributes({"http.url":H,"server.address":j})}M&&D&&e(D)}),T&&d.addXhrInstrumentationHandler(P=>{const D=h(P,O,k,A);M&&D&&e(D)})}s(r,"instrumentOutgoingRequests");function n(E){return E.entryType==="resource"&&"initiatorType"in E&&typeof E.nextHopProtocol=="string"&&(E.initiatorType==="fetch"||E.initiatorType==="xmlhttprequest")}s(n,"isPerformanceResourceTiming");function e(E){const{url:_}=p.spanToJSON(E).data||{};if(!_||typeof _!="string")return;const T=d.addPerformanceInstrumentationHandler("resource",({entries:w})=>{w.forEach(M=>{n(M)&&M.name.endsWith(_)&&(o(M).forEach(O=>E.setAttribute(...O)),setTimeout(T))})})}s(e,"addHTTPTimings");function t(E){let _="unknown",T="unknown",w="";for(const M of E){if(M==="/"){[_,T]=E.split("/");break}if(!isNaN(Number(M))){_=w==="h"?"http":w,T=E.split(w)[1];break}w+=M}return w===E&&(_=w),{name:_,version:T}}s(t,"extractNetworkProtocol");function i(E=0){return((m.browserPerformanceTimeOrigin||performance.timeOrigin)+E)/1e3}s(i,"getAbsoluteTime");function o(E){const{name:_,version:T}=t(E.nextHopProtocol),w=[];return w.push(["network.protocol.version",T],["network.protocol.name",_]),m.browserPerformanceTimeOrigin?[...w,["http.request.redirect_start",i(E.redirectStart)],["http.request.fetch_start",i(E.fetchStart)],["http.request.domain_lookup_start",i(E.domainLookupStart)],["http.request.domain_lookup_end",i(E.domainLookupEnd)],["http.request.connect_start",i(E.connectStart)],["http.request.secure_connection_start",i(E.secureConnectionStart)],["http.request.connection_end",i(E.connectEnd)],["http.request.request_start",i(E.requestStart)],["http.request.response_start",i(E.responseStart)],["http.request.response_end",i(E.responseEnd)]]:w}s(o,"resourceTimingEntryToSpanData");function u(E,_){const T=g.WINDOW.location&&g.WINDOW.location.href;if(T){let w,M;try{w=new URL(E,T),M=new URL(T).origin}catch{return!1}const R=w.origin===M;return _?m.stringMatchesSomePattern(w.toString(),_)||R&&m.stringMatchesSomePattern(w.pathname,_):R}else{const w=!!E.match(/^\/(?!\/)/);return _?m.stringMatchesSomePattern(E,_):w}}s(u,"shouldAttachHeaders");function h(E,_,T,w){const M=E.xhr,R=M&&M[d.SENTRY_XHR_DATA_KEY];if(!M||M.__sentry_own_request__||!R)return;const O=p.hasTracingEnabled()&&_(R.url);if(E.endTimestamp&&O){const j=M.__sentry_xhr_span_id__;if(!j)return;const W=w[j];W&&R.status_code!==void 0&&(p.setHttpStatus(W,R.status_code),W.end(),delete w[j]);return}const k=v(R.url),A=k?m.parseUrl(k).host:void 0,P=!!p.getActiveSpan(),D=O&&P?p.startInactiveSpan({name:`${R.method} ${R.url}`,attributes:{type:"xhr","http.method":R.method,"http.url":k,url:R.url,"server.address":A,[p.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser",[p.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new p.SentryNonRecordingSpan;M.__sentry_xhr_span_id__=D.spanContext().spanId,w[M.__sentry_xhr_span_id__]=D;const H=p.getClient();return M.setRequestHeader&&T(R.url)&&H&&S(M,H,p.hasTracingEnabled()&&P?D:void 0),D}s(h,"xhrCallback");function S(E,_,T){const w=p.getCurrentScope(),M=p.getIsolationScope(),{traceId:R,spanId:O,sampled:k,dsc:A}={...M.getPropagationContext(),...w.getPropagationContext()},P=T&&p.hasTracingEnabled()?p.spanToTraceHeader(T):m.generateSentryTraceHeader(R,O,k),D=m.dynamicSamplingContextToSentryBaggageHeader(A||(T?p.getDynamicSamplingContextFromSpan(T):p.getDynamicSamplingContextFromClient(R,_)));f(E,P,D)}s(S,"addTracingHeadersToXhrRequest");function f(E,_,T){try{E.setRequestHeader("sentry-trace",_),T&&E.setRequestHeader(m.BAGGAGE_HEADER_NAME,T)}catch{}}s(f,"setHeaderOnXhr");function v(E){try{return new URL(E,g.WINDOW.location.origin).href}catch{return}}s(v,"getFullURL"),a.defaultRequestInstrumentationOptions=l,a.extractNetworkProtocol=t,a.instrumentOutgoingRequests=r,a.shouldAttachHeaders=u,a.xhrCallback=h},8685600704:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(8475594045);function g(l,r=m.getNativeFetchImplementation()){let n=0,e=0;function t(i){const o=i.body.length;n+=o,e++;const u={body:i.body,method:"POST",referrerPolicy:"origin",headers:l.headers,keepalive:n<=6e4&&e<15,...l.fetchOptions};if(!r)return m.clearCachedFetchImplementation(),p.rejectedSyncPromise("No fetch implementation available");try{return r(l.url,u).then(h=>(n-=o,e--,{statusCode:h.status,headers:{"x-sentry-rate-limits":h.headers.get("X-Sentry-Rate-Limits"),"retry-after":h.headers.get("Retry-After")}}))}catch(h){return m.clearCachedFetchImplementation(),n-=o,e--,p.rejectedSyncPromise(h)}}return s(t,"makeRequest"),d.createTransport(l,t)}s(g,"makeFetchTransport"),a.makeFetchTransport=g},7824548363:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(7563271614),m=c(8685600704);function g(h){return new Promise((S,f)=>{h.oncomplete=h.onsuccess=()=>S(h.result),h.onabort=h.onerror=()=>f(h.error)})}s(g,"promisifyRequest");function l(h,S){const f=indexedDB.open(h);f.onupgradeneeded=()=>f.result.createObjectStore(S);const v=g(f);return E=>v.then(_=>E(_.transaction(S,"readwrite").objectStore(S)))}s(l,"createStore");function r(h){return g(h.getAllKeys())}s(r,"keys");function n(h,S,f){return h(v=>r(v).then(E=>{if(!(E.length>=f))return v.put(S,Math.max(...E,0)+1),g(v.transaction)}))}s(n,"push");function e(h,S,f){return h(v=>r(v).then(E=>{if(!(E.length>=f))return v.put(S,Math.min(...E,0)-1),g(v.transaction)}))}s(e,"unshift");function t(h){return h(S=>r(S).then(f=>{if(f.length!==0)return g(S.get(f[0])).then(v=>(S.delete(f[0]),g(S.transaction).then(()=>v)))}))}s(t,"shift");function i(h){let S;function f(){return S==null&&(S=l(h.dbName||"sentry-offline",h.storeName||"queue")),S}return s(f,"getStore"),{push:async v=>{try{const E=await p.serializeEnvelope(v);await n(f(),E,h.maxQueueSize||30)}catch{}},unshift:async v=>{try{const E=await p.serializeEnvelope(v);await e(f(),E,h.maxQueueSize||30)}catch{}},shift:async()=>{try{const v=await t(f());if(v)return p.parseEnvelope(v)}catch{}}}}s(i,"createIndexedDbStore");function o(h){return S=>h({...S,createStore:i})}s(o,"makeIndexedDbOfflineTransport");function u(h=m.makeFetchTransport){return o(d.makeOfflineTransport(h))}s(u,"makeBrowserOfflineTransport"),a.createStore=l,a.makeBrowserOfflineTransport=u,a.push=n,a.shift=t,a.unshift=e},8475594045:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(3345899401),m=c(9046403702);let g;function l(){if(g)return g;if(d.isNativeFetch(m.WINDOW.fetch))return g=m.WINDOW.fetch.bind(m.WINDOW);const n=m.WINDOW.document;let e=m.WINDOW.fetch;if(n&&typeof n.createElement=="function")try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i&&i.fetch&&(e=i.fetch),n.head.removeChild(t)}catch(t){p.DEBUG_BUILD&&d.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}try{return g=e.bind(m.WINDOW)}catch{}}s(l,"getNativeFetchImplementation");function r(){g=void 0}s(r,"clearCachedFetchImplementation"),a.clearCachedFetchImplementation=r,a.getNativeFetchImplementation=l},7738910413:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614);function p(g,{metadata:l,tunnel:r,dsn:n}){const e={event_id:g.event_id,sent_at:new Date().toISOString(),...l&&l.sdk&&{sdk:{name:l.sdk.name,version:l.sdk.version}},...!!r&&!!n&&{dsn:d.dsnToString(n)}},t=m(g);return d.createEnvelope(e,[t])}s(p,"createUserFeedbackEnvelope");function m(g){return[{type:"user_report"},g]}s(m,"createUserFeedbackEnvelopeItem"),a.createUserFeedbackEnvelope=p},1076637753:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8482989710),p=c(9046403702),m={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming"},g=p.WINDOW;async function l(n){const e=m[n],t=g.Sentry=g.Sentry||{};if(!e)throw new Error(`Cannot lazy load integration: ${n}`);const i=t[n];if(typeof i=="function")return i;const o=r(e),u=p.WINDOW.document.createElement("script");u.src=o,u.crossOrigin="anonymous";const h=new Promise((f,v)=>{u.addEventListener("load",()=>f()),u.addEventListener("error",v)});p.WINDOW.document.body.appendChild(u);try{await h}catch{throw new Error(`Error when loading integration: ${n}`)}const S=t[n];if(typeof S!="function")throw new Error(`Could not load integration: ${n}`);return S}s(l,"lazyLoadIntegration");function r(n){const e=d.getClient(),t=e&&e.getOptions(),i=t&&t.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${d.SDK_VERSION}/${n}.min.js`,i).toString()}s(r,"getScriptURL"),a.lazyLoadIntegration=l},9857059330:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p="7";function m(e){const t=e.protocol?`${e.protocol}:`:"",i=e.port?`:${e.port}`:"";return`${t}//${e.host}${i}${e.path?`/${e.path}`:""}/api/`}s(m,"getBaseApiEndpoint");function g(e){return`${m(e)}${e.projectId}/envelope/`}s(g,"_getIngestEndpoint");function l(e,t){return d.urlEncode({sentry_key:e.publicKey,sentry_version:p,...t&&{sentry_client:`${t.name}/${t.version}`}})}s(l,"_encodedAuth");function r(e,t,i){return t||`${g(e)}?${l(e,i)}`}s(r,"getEnvelopeEndpointWithUrlEncodedAuth");function n(e,t){const i=d.makeDsn(e);if(!i)return"";const o=`${m(i)}embed/error-page/`;let u=`dsn=${d.dsnToString(i)}`;for(const h in t)if(h!=="dsn"&&h!=="onClose")if(h==="user"){const S=t.user;if(!S)continue;S.name&&(u+=`&name=${encodeURIComponent(S.name)}`),S.email&&(u+=`&email=${encodeURIComponent(S.email)}`)}else u+=`&${encodeURIComponent(h)}=${encodeURIComponent(t[h])}`;return`${o}?${u}`}s(n,"getReportDialogEndpoint"),a.getEnvelopeEndpointWithUrlEncodedAuth=r,a.getReportDialogEndpoint=n},897859094:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(2685322190),p=c(3752312155);function m(l){const r=d.getMainCarrier(),n=d.getSentryCarrier(r);n.acs=l}s(m,"setAsyncContextStrategy");function g(l){const r=d.getSentryCarrier(l);return r.acs?r.acs:p.getStackAsyncContextStrategy()}s(g,"getAsyncContextStrategy"),a.getAsyncContextStrategy=g,a.setAsyncContextStrategy=m},3752312155:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(2158524366),g=c(2685322190);class l{constructor(u,h){let S;u?S=u:S=new m.Scope;let f;h?f=h:f=new m.Scope,this._stack=[{scope:S}],this._isolationScope=f}withScope(u){const h=this._pushScope();let S;try{S=u(h)}catch(f){throw this._popScope(),f}return d.isThenable(S)?S.then(f=>(this._popScope(),f),f=>{throw this._popScope(),f}):(this._popScope(),S)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const u=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:u}),u}_popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}}s(l,"AsyncContextStack");function r(){const o=g.getMainCarrier(),u=g.getSentryCarrier(o);return u.hub||(u.hub=new l(p.getDefaultCurrentScope(),p.getDefaultIsolationScope())),u.hub}s(r,"getAsyncContextStack");function n(o){return r().withScope(o)}s(n,"withScope");function e(o,u){const h=r();return h.withScope(()=>(h.getStackTop().scope=o,u(o)))}s(e,"withSetScope");function t(o){return r().withScope(()=>o(r().getIsolationScope()))}s(t,"withIsolationScope");function i(){return{withIsolationScope:t,withScope:n,withSetScope:e,withSetIsolationScope:(o,u)=>t(u),getCurrentScope:()=>r().getScope(),getIsolationScope:()=>r().getIsolationScope()}}s(i,"getStackAsyncContextStrategy"),a.AsyncContextStack=l,a.getStackAsyncContextStrategy=i},4936960144:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(9857059330),m=c(8438156026),g=c(8844511336),l=c(5297268390),r=c(1927145604),n=c(5234873710),e=c(9064881818),t=c(1119532287),i=c(9877103701),o="Not capturing exception because it's already been captured.";class u{constructor(_){if(this._options=_,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],_.dsn?this._dsn=d.makeDsn(_.dsn):g.DEBUG_BUILD&&d.logger.warn("No DSN provided, client will not send events."),this._dsn){const T=p.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,_.tunnel,_._metadata?_._metadata.sdk:void 0);this._transport=_.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),..._.transportOptions,url:T})}}captureException(_,T,w){const M=d.uuid4();if(d.checkOrSetAlreadyCaught(_))return g.DEBUG_BUILD&&d.logger.log(o),M;const R={event_id:M,...T};return this._process(this.eventFromException(_,R).then(O=>this._captureEvent(O,R,w))),R.event_id}captureMessage(_,T,w,M){const R={event_id:d.uuid4(),...w},O=d.isParameterizedString(_)?_:String(_),k=d.isPrimitive(_)?this.eventFromMessage(O,T,R):this.eventFromException(_,R);return this._process(k.then(A=>this._captureEvent(A,R,M))),R.event_id}captureEvent(_,T,w){const M=d.uuid4();if(T&&T.originalException&&d.checkOrSetAlreadyCaught(T.originalException))return g.DEBUG_BUILD&&d.logger.log(o),M;const R={event_id:M,...T},k=(_.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(_,R,k||w)),R.event_id}captureSession(_){typeof _.release!="string"?g.DEBUG_BUILD&&d.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(_),n.updateSession(_,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(_){const T=this._transport;return T?(this.emit("flush"),this._isClientDoneProcessing(_).then(w=>T.flush(_).then(M=>w&&M))):d.resolvedSyncPromise(!0)}close(_){return this.flush(_).then(T=>(this.getOptions().enabled=!1,this.emit("close"),T))}getEventProcessors(){return this._eventProcessors}addEventProcessor(_){this._eventProcessors.push(_)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(_){return this._integrations[_]}addIntegration(_){const T=this._integrations[_.name];r.setupIntegration(this,_,this._integrations),T||r.afterSetupIntegrations(this,[_])}sendEvent(_,T={}){this.emit("beforeSendEvent",_,T);let w=l.createEventEnvelope(_,this._dsn,this._options._metadata,this._options.tunnel);for(const R of T.attachments||[])w=d.addItemToEnvelope(w,d.createAttachmentEnvelopeItem(R));const M=this.sendEnvelope(w);M&&M.then(R=>this.emit("afterSendEvent",_,R),null)}sendSession(_){const T=l.createSessionEnvelope(_,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(T)}recordDroppedEvent(_,T,w){if(this._options.sendClientReports){const M=`${_}:${T}`;g.DEBUG_BUILD&&d.logger.log(`Adding outcome: "${M}"`),this._outcomes[M]=this._outcomes[M]+1||1}}on(_,T){this._hooks[_]||(this._hooks[_]=[]),this._hooks[_].push(T)}emit(_,...T){this._hooks[_]&&this._hooks[_].forEach(w=>w(...T))}sendEnvelope(_){return this.emit("beforeEnvelope",_),this._isEnabled()&&this._transport?this._transport.send(_).then(null,T=>(g.DEBUG_BUILD&&d.logger.error("Error while sending event:",T),T)):(g.DEBUG_BUILD&&d.logger.error("Transport disabled"),d.resolvedSyncPromise({}))}_setupIntegrations(){const{integrations:_}=this._options;this._integrations=r.setupIntegrations(this,_),r.afterSetupIntegrations(this,_)}_updateSessionFromEvent(_,T){let w=!1,M=!1;const R=T.exception&&T.exception.values;if(R){M=!0;for(const A of R){const P=A.mechanism;if(P&&P.handled===!1){w=!0;break}}}const O=_.status==="ok";(O&&_.errors===0||O&&w)&&(n.updateSession(_,{...w&&{status:"crashed"},errors:_.errors||Number(M||w)}),this.captureSession(_))}_isClientDoneProcessing(_){return new d.SyncPromise(T=>{let w=0;const M=1,R=setInterval(()=>{this._numProcessing==0?(clearInterval(R),T(!0)):(w+=M,_&&w>=_&&(clearInterval(R),T(!1)))},M)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(_,T,w,M=m.getIsolationScope()){const R=this.getOptions(),O=Object.keys(this._integrations);return!T.integrations&&O.length>0&&(T.integrations=O),this.emit("preprocessEvent",_,T),_.type||M.setLastEventId(_.event_id||T.event_id),i.prepareEvent(R,_,T,w,this,M).then(k=>{if(k===null)return k;const A={...M.getPropagationContext(),...w?w.getPropagationContext():void 0};if(!(k.contexts&&k.contexts.trace)&&A){const{traceId:D,spanId:H,parentSpanId:j,dsc:W}=A;k.contexts={trace:d.dropUndefinedKeys({trace_id:D,span_id:H,parent_span_id:j}),...k.contexts};const X=W||e.getDynamicSamplingContextFromClient(D,this);k.sdkProcessingMetadata={dynamicSamplingContext:X,...k.sdkProcessingMetadata}}return k})}_captureEvent(_,T={},w){return this._processEvent(_,T,w).then(M=>M.event_id,M=>{if(g.DEBUG_BUILD){const R=M;R.logLevel==="log"?d.logger.log(R.message):d.logger.warn(R)}})}_processEvent(_,T,w){const M=this.getOptions(),{sampleRate:R}=M,O=v(_),k=f(_),A=_.type||"error",P=`before send for type \`${A}\``,D=typeof R>"u"?void 0:t.parseSampleRate(R);if(k&&typeof D=="number"&&Math.random()>D)return this.recordDroppedEvent("sample_rate","error",_),d.rejectedSyncPromise(new d.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${R})`,"log"));const H=A==="replay_event"?"replay":A,W=(_.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(_,T,w,W).then(X=>{if(X===null)throw this.recordDroppedEvent("event_processor",H,_),new d.SentryError("An event processor returned `null`, will not send event.","log");if(T.data&&T.data.__sentry__===!0)return X;const fe=S(M,X,T);return h(fe,P)}).then(X=>{if(X===null)throw this.recordDroppedEvent("before_send",H,_),new d.SentryError(`${P} returned \`null\`, will not send event.`,"log");const ee=w&&w.getSession();!O&&ee&&this._updateSessionFromEvent(ee,X);const fe=X.transaction_info;if(O&&fe&&X.transaction!==_.transaction){const oe="custom";X.transaction_info={...fe,source:oe}}return this.sendEvent(X,T),X}).then(null,X=>{throw X instanceof d.SentryError?X:(this.captureException(X,{data:{__sentry__:!0},originalException:X}),new d.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${X}`))})}_process(_){this._numProcessing++,_.then(T=>(this._numProcessing--,T),T=>(this._numProcessing--,T))}_clearOutcomes(){const _=this._outcomes;return this._outcomes={},Object.keys(_).map(T=>{const[w,M]=T.split(":");return{reason:w,category:M,quantity:_[T]}})}}s(u,"BaseClient");function h(E,_){const T=`${_} must return \`null\` or a valid event.`;if(d.isThenable(E))return E.then(w=>{if(!d.isPlainObject(w)&&w!==null)throw new d.SentryError(T);return w},w=>{throw new d.SentryError(`${_} rejected with ${w}`)});if(!d.isPlainObject(E)&&E!==null)throw new d.SentryError(T);return E}s(h,"_validateBeforeSendResult");function S(E,_,T){const{beforeSend:w,beforeSendTransaction:M,beforeSendSpan:R}=E;if(f(_)&&w)return w(_,T);if(v(_)){if(_.spans&&R){const O=[];for(const k of _.spans){const A=R(k);A&&O.push(A)}_.spans=O}if(M)return M(_,T)}return _}s(S,"processBeforeSend");function f(E){return E.type===void 0}s(f,"isErrorEvent");function v(E){return E.type==="transaction"}s(v,"isTransactionEvent"),a.BaseClient=u},4433801832:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=100;function g(l,r){const n=p.getClient(),e=p.getIsolationScope();if(!n)return;const{beforeBreadcrumb:t=null,maxBreadcrumbs:i=m}=n.getOptions();if(i<=0)return;const u={timestamp:d.dateTimestampInSeconds(),...l},h=t?d.consoleSandbox(()=>t(u,r)):u;h!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",h,r),e.addBreadcrumb(h,i))}s(g,"addBreadcrumb"),a.addBreadcrumb=g},2685322190:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614);function p(){return m(d.GLOBAL_OBJ),d.GLOBAL_OBJ}s(p,"getMainCarrier");function m(g){return g.__SENTRY__||(g.__SENTRY__={extensions:{}}),g.__SENTRY__}s(m,"getSentryCarrier"),a.getMainCarrier=p,a.getSentryCarrier=m},7584701501:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614);function p(g,l,r,n,e){const t={sent_at:new Date().toISOString()};r&&r.sdk&&(t.sdk={name:r.sdk.name,version:r.sdk.version}),n&&e&&(t.dsn=d.dsnToString(e)),l&&(t.trace=d.dropUndefinedKeys(l));const i=m(g);return d.createEnvelope(t,[i])}s(p,"createCheckInEnvelope");function m(g){return[{type:"check_in"},g]}s(m,"createCheckInEnvelopeItem"),a.createCheckInEnvelope=p},4834620523:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c="production";a.DEFAULT_ENVIRONMENT=c},8438156026:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(897859094),m=c(2685322190),g=c(2158524366);function l(){return d.getGlobalSingleton("defaultCurrentScope",()=>new g.Scope)}s(l,"getDefaultCurrentScope");function r(){return d.getGlobalSingleton("defaultIsolationScope",()=>new g.Scope)}s(r,"getDefaultIsolationScope");function n(){const h=m.getMainCarrier();return p.getAsyncContextStrategy(h).getCurrentScope()}s(n,"getCurrentScope");function e(){const h=m.getMainCarrier();return p.getAsyncContextStrategy(h).getIsolationScope()}s(e,"getIsolationScope");function t(){return d.getGlobalSingleton("globalScope",()=>new g.Scope)}s(t,"getGlobalScope");function i(...h){const S=m.getMainCarrier(),f=p.getAsyncContextStrategy(S);if(h.length===2){const[v,E]=h;return v?f.withSetScope(v,E):f.withScope(E)}return f.withScope(h[0])}s(i,"withScope");function o(...h){const S=m.getMainCarrier(),f=p.getAsyncContextStrategy(S);if(h.length===2){const[v,E]=h;return v?f.withSetIsolationScope(v,E):f.withIsolationScope(E)}return f.withIsolationScope(h[0])}s(o,"withIsolationScope");function u(){return n().getClient()}s(u,"getClient"),a.getClient=u,a.getCurrentScope=n,a.getDefaultCurrentScope=l,a.getDefaultIsolationScope=r,a.getGlobalScope=t,a.getIsolationScope=e,a.withIsolationScope=o,a.withScope=i},8844511336:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;a.DEBUG_BUILD=c},5297268390:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614);c(2206474662),c(8844511336);const p=c(5475300505),m=c(9064881818);function g(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}s(g,"enhanceEventWithSdkInfo");function l(e,t,i,o){const u=d.getSdkMetadataForEnvelopeHeader(i),h={sent_at:new Date().toISOString(),...u&&{sdk:u},...!!o&&t&&{dsn:d.dsnToString(t)}},S="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return d.createEnvelope(h,[S])}s(l,"createSessionEnvelope");function r(e,t,i,o){const u=d.getSdkMetadataForEnvelopeHeader(i),h=e.type&&e.type!=="replay_event"?e.type:"event";g(e,i&&i.sdk);const S=d.createEventEnvelopeHeaders(e,u,o,t);delete e.sdkProcessingMetadata;const f=[{type:h},e];return d.createEnvelope(S,[f])}s(r,"createEventEnvelope");function n(e,t){function i(v){return!!v.trace_id&&!!v.public_key}s(i,"dscHasRequiredProps");const o=m.getDynamicSamplingContextFromSpan(e[0]),u={sent_at:new Date().toISOString(),...i(o)&&{trace:o}},h=t&&t.getOptions().beforeSendSpan,S=h?v=>h(p.spanToJSON(v)):v=>p.spanToJSON(v),f=[];for(const v of e){const E=S(v);E&&f.push(d.createSpanEnvelopeItem(E))}return d.createEnvelope(u,f)}s(n,"createSpanEnvelope"),a.createEventEnvelope=r,a.createSessionEnvelope=l,a.createSpanEnvelope=n},5911348835:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8844511336);function m(g,l,r,n=0){return new d.SyncPromise((e,t)=>{const i=g[n];if(l===null||typeof i!="function")e(l);else{const o=i({...l},r);p.DEBUG_BUILD&&i.id&&o===null&&d.logger.log(`Event processor "${i.id}" dropped event`),d.isThenable(o)?o.then(u=>m(g,u,r,n+1).then(e)).then(null,t):m(g,o,r,n+1).then(e).then(null,t)}})}s(m,"notifyEventProcessors"),a.notifyEventProcessors=m},5015065869:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(4834620523),m=c(8438156026),g=c(8844511336),l=c(5234873710),r=c(9877103701);function n(H,j){return m.getCurrentScope().captureException(H,r.parseEventHintOrCaptureContext(j))}s(n,"captureException");function e(H,j){const W=typeof j=="string"?j:void 0,X=typeof j!="string"?{captureContext:j}:void 0;return m.getCurrentScope().captureMessage(H,W,X)}s(e,"captureMessage");function t(H,j){return m.getCurrentScope().captureEvent(H,j)}s(t,"captureEvent");function i(H,j){m.getIsolationScope().setContext(H,j)}s(i,"setContext");function o(H){m.getIsolationScope().setExtras(H)}s(o,"setExtras");function u(H,j){m.getIsolationScope().setExtra(H,j)}s(u,"setExtra");function h(H){m.getIsolationScope().setTags(H)}s(h,"setTags");function S(H,j){m.getIsolationScope().setTag(H,j)}s(S,"setTag");function f(H){m.getIsolationScope().setUser(H)}s(f,"setUser");function v(){return m.getIsolationScope().lastEventId()}s(v,"lastEventId");function E(H,j){const W=m.getCurrentScope(),X=m.getClient();if(!X)g.DEBUG_BUILD&&d.logger.warn("Cannot capture check-in. No client defined.");else if(!X.captureCheckIn)g.DEBUG_BUILD&&d.logger.warn("Cannot capture check-in. Client does not support sending check-ins.");else return X.captureCheckIn(H,j,W);return d.uuid4()}s(E,"captureCheckIn");function _(H,j,W){const X=E({monitorSlug:H,status:"in_progress"},W),ee=d.timestampInSeconds();function fe(oe){E({monitorSlug:H,status:oe,checkInId:X,duration:d.timestampInSeconds()-ee})}return s(fe,"finishCheckIn"),m.withIsolationScope(()=>{let oe;try{oe=j()}catch(Oe){throw fe("error"),Oe}return d.isThenable(oe)?Promise.resolve(oe).then(()=>{fe("ok")},()=>{fe("error")}):fe("ok"),oe})}s(_,"withMonitor");async function T(H){const j=m.getClient();return j?j.flush(H):(g.DEBUG_BUILD&&d.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}s(T,"flush");async function w(H){const j=m.getClient();return j?j.close(H):(g.DEBUG_BUILD&&d.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}s(w,"close");function M(){return!!m.getClient()}s(M,"isInitialized");function R(){const H=m.getClient();return!!H&&H.getOptions().enabled!==!1&&!!H.getTransport()}s(R,"isEnabled");function O(H){m.getIsolationScope().addEventProcessor(H)}s(O,"addEventProcessor");function k(H){const j=m.getClient(),W=m.getIsolationScope(),X=m.getCurrentScope(),{release:ee,environment:fe=p.DEFAULT_ENVIRONMENT}=j&&j.getOptions()||{},{userAgent:oe}=d.GLOBAL_OBJ.navigator||{},Oe=l.makeSession({release:ee,environment:fe,user:X.getUser()||W.getUser(),...oe&&{userAgent:oe},...H}),Xe=W.getSession();return Xe&&Xe.status==="ok"&&l.updateSession(Xe,{status:"exited"}),A(),W.setSession(Oe),X.setSession(Oe),Oe}s(k,"startSession");function A(){const H=m.getIsolationScope(),j=m.getCurrentScope(),W=j.getSession()||H.getSession();W&&l.closeSession(W),P(),H.setSession(),j.setSession()}s(A,"endSession");function P(){const H=m.getIsolationScope(),j=m.getCurrentScope(),W=m.getClient(),X=j.getSession()||H.getSession();X&&W&&W.captureSession(X)}s(P,"_sendSessionUpdate");function D(H=!1){if(H){A();return}P()}s(D,"captureSession"),a.addEventProcessor=O,a.captureCheckIn=E,a.captureEvent=t,a.captureException=n,a.captureMessage=e,a.captureSession=D,a.close=w,a.endSession=A,a.flush=T,a.isEnabled=R,a.isInitialized=M,a.lastEventId=v,a.setContext=i,a.setExtra=u,a.setExtras=o,a.setTag=S,a.setTags=h,a.setUser=f,a.startSession=k,a.withMonitor=_},7983636933:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026);function m(g,l={}){const{message:r,name:n,email:e,url:t,source:i,associatedEventId:o}=g,u=p.getClient(),h={contexts:{feedback:d.dropUndefinedKeys({contact_email:e,name:n,message:r,url:t,source:i,associated_event_id:o})},type:"feedback",level:"info"};return u&&u.emit("beforeSendFeedback",h,l),p.getCurrentScope().captureEvent(h,l)}s(m,"captureFeedback"),a.captureFeedback=m},296812610:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(2332127203);c(2206474662),c(8844511336);const g=c(8645141291),l=c(5475300505),r=c(8167549304),n=c(1150305139),e=c(4530391782),t=c(9064881818);function i(S,f,v,E,_="auto.http.browser"){if(!S.fetchData)return;const T=g.hasTracingEnabled()&&f(S.fetchData.url);if(S.endTimestamp&&T){const H=S.fetchData.__span;if(!H)return;const j=E[H];j&&(h(j,S),delete E[H]);return}const w=p.getCurrentScope(),M=p.getClient(),{method:R,url:O}=S.fetchData,k=u(O),A=k?d.parseUrl(k).host:void 0,P=!!l.getActiveSpan(),D=T&&P?e.startInactiveSpan({name:`${R} ${O}`,attributes:{url:O,type:"fetch","http.method":R,"http.url":k,"server.address":A,[m.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:_,[m.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new r.SentryNonRecordingSpan;if(S.fetchData.__span=D.spanContext().spanId,E[D.spanContext().spanId]=D,v(S.fetchData.url)&&M){const H=S.args[0];S.args[1]=S.args[1]||{};const j=S.args[1];j.headers=o(H,M,w,j,g.hasTracingEnabled()&&P?D:void 0)}return D}s(i,"instrumentFetchRequest");function o(S,f,v,E,_){const T=p.getIsolationScope(),{traceId:w,spanId:M,sampled:R,dsc:O}={...T.getPropagationContext(),...v.getPropagationContext()},k=_?l.spanToTraceHeader(_):d.generateSentryTraceHeader(w,M,R),A=d.dynamicSamplingContextToSentryBaggageHeader(O||(_?t.getDynamicSamplingContextFromSpan(_):t.getDynamicSamplingContextFromClient(w,f))),P=E.headers||(typeof Request<"u"&&d.isInstanceOf(S,Request)?S.headers:void 0);if(P)if(typeof Headers<"u"&&d.isInstanceOf(P,Headers)){const D=new Headers(P);return D.append("sentry-trace",k),A&&D.append(d.BAGGAGE_HEADER_NAME,A),D}else if(Array.isArray(P)){const D=[...P,["sentry-trace",k]];return A&&D.push([d.BAGGAGE_HEADER_NAME,A]),D}else{const D="baggage"in P?P.baggage:void 0,H=[];return Array.isArray(D)?H.push(...D):D&&H.push(D),A&&H.push(A),{...P,"sentry-trace":k,baggage:H.length>0?H.join(","):void 0}}else return{"sentry-trace":k,baggage:A}}s(o,"addTracingHeadersToFetchRequest");function u(S){try{return new URL(S).href}catch{return}}s(u,"getFullURL");function h(S,f){if(f.response){n.setHttpStatus(S,f.response.status);const v=f.response&&f.response.headers&&f.response.headers.get("content-length");if(v){const E=parseInt(v);E>0&&S.setAttribute("http.response_content_length",E)}}else f.error&&S.setStatus({code:n.SPAN_STATUS_ERROR,message:"internal_error"});S.end()}s(h,"endSpan"),a.addTracingHeadersToFetchRequest=o,a.instrumentFetchRequest=i},6649284951:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(4433801832),p=c(8438156026),m=c(5015065869);function g(){return{bindClient(n){p.getCurrentScope().setClient(n)},withScope:p.withScope,getClient:()=>p.getClient(),getScope:p.getCurrentScope,getIsolationScope:p.getIsolationScope,captureException:(n,e)=>p.getCurrentScope().captureException(n,e),captureMessage:(n,e,t)=>p.getCurrentScope().captureMessage(n,e,t),captureEvent:m.captureEvent,addBreadcrumb:d.addBreadcrumb,setUser:m.setUser,setTags:m.setTags,setTag:m.setTag,setExtra:m.setExtra,setExtras:m.setExtras,setContext:m.setContext,getIntegration(n){const e=p.getClient();return e&&e.getIntegrationByName(n.id)||null},startSession:m.startSession,endSession:m.endSession,captureSession(n){if(n)return m.endSession();r()}}}s(g,"getCurrentHubShim");const l=g;function r(){const n=p.getCurrentScope(),e=p.getClient(),t=n.getSession();e&&t&&e.captureSession(t)}s(r,"_sendSessionUpdate"),a.getCurrentHub=l,a.getCurrentHubShim=g},8482989710:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(2206474662),p=c(9578383602),m=c(5618891990),g=c(7265722327),l=c(6720678066),r=c(8167549304),n=c(1150305139),e=c(4530391782),t=c(9064881818),i=c(3345259075),o=c(6939919536),u=c(8482601586),h=c(2332127203),S=c(5297268390),f=c(5015065869),v=c(8438156026),E=c(897859094),_=c(2685322190),T=c(5234873710),w=c(7083316483),M=c(2158524366),R=c(5911348835),O=c(9857059330),k=c(4936960144),A=c(1817668688),P=c(9483783910),D=c(306863924),H=c(3178226440),j=c(2843166954),W=c(639277478),X=c(1927145604),ee=c(8969228363),fe=c(9877103701),oe=c(7584701501),Oe=c(8645141291),Xe=c(175966809),ge=c(5800525242),Me=c(4718881455),$e=c(5475300505),ze=c(1119532287),nt=c(3433863337),mt=c(4834620523),gt=c(4433801832),Pe=c(3620727810),xe=c(3514394122),Ye=c(8947681608),Ze=c(2133507327),Re=c(4474256835),Tt=c(8953708405),rt=c(1072936841),Nt=c(1794376169),Wt=c(6437106406),Qt=c(8435832800),Ot=c(3496361636),hn=c(3005223956),fi=c(6342793611),wn=c(6431460707),Jt=c(5988719990),on=c(1243296801),kt=c(296812610),$t=c(2117263085),en=c(7983636933),zt=c(6649284951);a.registerSpanErrorInstrumentation=d.registerSpanErrorInstrumentation,a.getCapturedScopesOnSpan=p.getCapturedScopesOnSpan,a.setCapturedScopesOnSpan=p.setCapturedScopesOnSpan,a.addTracingExtensions=m.addTracingExtensions,a.TRACING_DEFAULTS=g.TRACING_DEFAULTS,a.startIdleSpan=g.startIdleSpan,a.SentrySpan=l.SentrySpan,a.SentryNonRecordingSpan=r.SentryNonRecordingSpan,a.SPAN_STATUS_ERROR=n.SPAN_STATUS_ERROR,a.SPAN_STATUS_OK=n.SPAN_STATUS_OK,a.SPAN_STATUS_UNSET=n.SPAN_STATUS_UNSET,a.getSpanStatusFromHttpCode=n.getSpanStatusFromHttpCode,a.setHttpStatus=n.setHttpStatus,a.continueTrace=e.continueTrace,a.startInactiveSpan=e.startInactiveSpan,a.startSpan=e.startSpan,a.startSpanManual=e.startSpanManual,a.suppressTracing=e.suppressTracing,a.withActiveSpan=e.withActiveSpan,a.getDynamicSamplingContextFromClient=t.getDynamicSamplingContextFromClient,a.getDynamicSamplingContextFromSpan=t.getDynamicSamplingContextFromSpan,a.setMeasurement=i.setMeasurement,a.timedEventsToMeasurements=i.timedEventsToMeasurements,a.sampleSpan=o.sampleSpan,a.logSpanEnd=u.logSpanEnd,a.logSpanStart=u.logSpanStart,a.SEMANTIC_ATTRIBUTE_CACHE_HIT=h.SEMANTIC_ATTRIBUTE_CACHE_HIT,a.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=h.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,a.SEMANTIC_ATTRIBUTE_CACHE_KEY=h.SEMANTIC_ATTRIBUTE_CACHE_KEY,a.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=h.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME,a.SEMANTIC_ATTRIBUTE_PROFILE_ID=h.SEMANTIC_ATTRIBUTE_PROFILE_ID,a.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=h.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,a.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT,a.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=h.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE,a.SEMANTIC_ATTRIBUTE_SENTRY_OP=h.SEMANTIC_ATTRIBUTE_SENTRY_OP,a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=h.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=h.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=h.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,a.createEventEnvelope=S.createEventEnvelope,a.createSessionEnvelope=S.createSessionEnvelope,a.createSpanEnvelope=S.createSpanEnvelope,a.addEventProcessor=f.addEventProcessor,a.captureCheckIn=f.captureCheckIn,a.captureEvent=f.captureEvent,a.captureException=f.captureException,a.captureMessage=f.captureMessage,a.captureSession=f.captureSession,a.close=f.close,a.endSession=f.endSession,a.flush=f.flush,a.isEnabled=f.isEnabled,a.isInitialized=f.isInitialized,a.lastEventId=f.lastEventId,a.setContext=f.setContext,a.setExtra=f.setExtra,a.setExtras=f.setExtras,a.setTag=f.setTag,a.setTags=f.setTags,a.setUser=f.setUser,a.startSession=f.startSession,a.withMonitor=f.withMonitor,a.getClient=v.getClient,a.getCurrentScope=v.getCurrentScope,a.getDefaultCurrentScope=v.getDefaultCurrentScope,a.getDefaultIsolationScope=v.getDefaultIsolationScope,a.getGlobalScope=v.getGlobalScope,a.getIsolationScope=v.getIsolationScope,a.withIsolationScope=v.withIsolationScope,a.withScope=v.withScope,a.setAsyncContextStrategy=E.setAsyncContextStrategy,a.getMainCarrier=_.getMainCarrier,a.closeSession=T.closeSession,a.makeSession=T.makeSession,a.updateSession=T.updateSession,a.SessionFlusher=w.SessionFlusher,a.Scope=M.Scope,a.notifyEventProcessors=R.notifyEventProcessors,a.getEnvelopeEndpointWithUrlEncodedAuth=O.getEnvelopeEndpointWithUrlEncodedAuth,a.getReportDialogEndpoint=O.getReportDialogEndpoint,a.BaseClient=k.BaseClient,a.ServerRuntimeClient=A.ServerRuntimeClient,a.initAndBind=P.initAndBind,a.setCurrentClient=P.setCurrentClient,a.createTransport=D.createTransport,a.makeOfflineTransport=H.makeOfflineTransport,a.makeMultiplexedTransport=j.makeMultiplexedTransport,a.SDK_VERSION=W.SDK_VERSION,a.addIntegration=X.addIntegration,a.defineIntegration=X.defineIntegration,a.getIntegrationsToSetup=X.getIntegrationsToSetup,a.applyScopeDataToEvent=ee.applyScopeDataToEvent,a.mergeScopeData=ee.mergeScopeData,a.prepareEvent=fe.prepareEvent,a.createCheckInEnvelope=oe.createCheckInEnvelope,a.hasTracingEnabled=Oe.hasTracingEnabled,a.isSentryRequestUrl=Xe.isSentryRequestUrl,a.handleCallbackErrors=ge.handleCallbackErrors,a.parameterize=Me.parameterize,a.addChildSpanToSpan=$e.addChildSpanToSpan,a.getActiveSpan=$e.getActiveSpan,a.getRootSpan=$e.getRootSpan,a.getSpanDescendants=$e.getSpanDescendants,a.getStatusMessage=$e.getStatusMessage,a.spanIsSampled=$e.spanIsSampled,a.spanToBaggageHeader=$e.spanToBaggageHeader,a.spanToJSON=$e.spanToJSON,a.spanToTraceContext=$e.spanToTraceContext,a.spanToTraceHeader=$e.spanToTraceHeader,a.parseSampleRate=ze.parseSampleRate,a.applySdkMetadata=nt.applySdkMetadata,a.DEFAULT_ENVIRONMENT=mt.DEFAULT_ENVIRONMENT,a.addBreadcrumb=gt.addBreadcrumb,a.functionToStringIntegration=Pe.functionToStringIntegration,a.inboundFiltersIntegration=xe.inboundFiltersIntegration,a.linkedErrorsIntegration=Ye.linkedErrorsIntegration,a.moduleMetadataIntegration=Ze.moduleMetadataIntegration,a.requestDataIntegration=Re.requestDataIntegration,a.captureConsoleIntegration=Tt.captureConsoleIntegration,a.debugIntegration=rt.debugIntegration,a.dedupeIntegration=Nt.dedupeIntegration,a.extraErrorDataIntegration=Wt.extraErrorDataIntegration,a.rewriteFramesIntegration=Qt.rewriteFramesIntegration,a.sessionTimingIntegration=Ot.sessionTimingIntegration,a.zodErrorsIntegration=hn.zodErrorsIntegration,a.metrics=fi.metrics,a.metricsDefault=wn.metricsDefault,a.BrowserMetricsAggregator=Jt.BrowserMetricsAggregator,a.getMetricSummaryJsonForSpan=on.getMetricSummaryJsonForSpan,a.addTracingHeadersToFetchRequest=kt.addTracingHeadersToFetchRequest,a.instrumentFetchRequest=kt.instrumentFetchRequest,a.trpcMiddleware=$t.trpcMiddleware,a.captureFeedback=en.captureFeedback,a.getCurrentHub=zt.getCurrentHub,a.getCurrentHubShim=zt.getCurrentHubShim},1927145604:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(8844511336),g=[];function l(h){const S={};return h.forEach(f=>{const{name:v}=f,E=S[v];E&&!E.isDefaultInstance&&f.isDefaultInstance||(S[v]=f)}),Object.keys(S).map(f=>S[f])}s(l,"filterDuplicates");function r(h){const S=h.defaultIntegrations||[],f=h.integrations;S.forEach(T=>{T.isDefaultInstance=!0});let v;Array.isArray(f)?v=[...S,...f]:typeof f=="function"?v=d.arrayify(f(S)):v=S;const E=l(v),_=o(E,T=>T.name==="Debug");if(_!==-1){const[T]=E.splice(_,1);E.push(T)}return E}s(r,"getIntegrationsToSetup");function n(h,S){const f={};return S.forEach(v=>{v&&t(h,v,f)}),f}s(n,"setupIntegrations");function e(h,S){for(const f of S)f&&f.afterAllSetup&&f.afterAllSetup(h)}s(e,"afterSetupIntegrations");function t(h,S,f){if(f[S.name]){m.DEBUG_BUILD&&d.logger.log(`Integration skipped because it was already installed: ${S.name}`);return}if(f[S.name]=S,g.indexOf(S.name)===-1&&typeof S.setupOnce=="function"&&(S.setupOnce(),g.push(S.name)),S.setup&&typeof S.setup=="function"&&S.setup(h),typeof S.preprocessEvent=="function"){const v=S.preprocessEvent.bind(S);h.on("preprocessEvent",(E,_)=>v(E,_,h))}if(typeof S.processEvent=="function"){const v=S.processEvent.bind(S),E=Object.assign((_,T)=>v(_,T,h),{id:S.name});h.addEventProcessor(E)}m.DEBUG_BUILD&&d.logger.log(`Integration installed: ${S.name}`)}s(t,"setupIntegration");function i(h){const S=p.getClient();if(!S){m.DEBUG_BUILD&&d.logger.warn(`Cannot add integration "${h.name}" because no SDK Client is available.`);return}S.addIntegration(h)}s(i,"addIntegration");function o(h,S){for(let f=0;f<h.length;f++)if(S(h[f])===!0)return f;return-1}s(o,"findIndex");function u(h){return h}s(u,"defineIntegration"),a.addIntegration=i,a.afterSetupIntegrations=e,a.defineIntegration=u,a.getIntegrationsToSetup=r,a.installedIntegrations=g,a.setupIntegration=t,a.setupIntegrations=n},8953708405:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(5015065869),g=c(1927145604),l="CaptureConsole",r=s((t={})=>{const i=t.levels||d.CONSOLE_LEVELS;return{name:l,setup(o){"console"in d.GLOBAL_OBJ&&d.addConsoleInstrumentationHandler(({args:u,level:h})=>{p.getClient()!==o||!i.includes(h)||e(u,h)})}}},"_captureConsoleIntegration"),n=g.defineIntegration(r);function e(t,i){const o={level:d.severityLevelFromString(i),extra:{arguments:t}};p.withScope(u=>{if(u.addEventProcessor(f=>(f.logger="console",d.addExceptionMechanism(f,{handled:!1,type:"console"}),f)),i==="assert"){if(!t[0]){const f=`Assertion failed: ${d.safeJoin(t.slice(1)," ")||"console.assert"}`;u.setExtra("arguments",t.slice(1)),m.captureMessage(f,o)}return}const h=t.find(f=>f instanceof Error);if(h){m.captureException(h,o);return}const S=d.safeJoin(t," ");m.captureMessage(S,o)})}s(e,"consoleHandler"),a.captureConsoleIntegration=n},1072936841:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(1927145604),m="Debug",g=s((r={})=>{const n={debugger:!1,stringify:!1,...r};return{name:m,setup(e){e.on("beforeSendEvent",(t,i)=>{if(n.debugger)debugger;d.consoleSandbox(()=>{n.stringify?(console.log(JSON.stringify(t,null,2)),i&&Object.keys(i).length&&console.log(JSON.stringify(i,null,2))):(console.log(t),i&&Object.keys(i).length&&console.log(i))})})}}},"_debugIntegration"),l=p.defineIntegration(g);a.debugIntegration=l},1794376169:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(1927145604),m=c(8844511336),g="Dedupe",l=s(()=>{let S;return{name:g,processEvent(f){if(f.type)return f;try{if(n(f,S))return m.DEBUG_BUILD&&d.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return S=f}}},"_dedupeIntegration"),r=p.defineIntegration(l);function n(S,f){return f?!!(e(S,f)||t(S,f)):!1}s(n,"_shouldDropEvent");function e(S,f){const v=S.message,E=f.message;return!(!v&&!E||v&&!E||!v&&E||v!==E||!o(S,f)||!i(S,f))}s(e,"_isSameMessageEvent");function t(S,f){const v=u(f),E=u(S);return!(!v||!E||v.type!==E.type||v.value!==E.value||!o(S,f)||!i(S,f))}s(t,"_isSameExceptionEvent");function i(S,f){let v=h(S),E=h(f);if(!v&&!E)return!0;if(v&&!E||!v&&E||(v=v,E=E,E.length!==v.length))return!1;for(let _=0;_<E.length;_++){const T=E[_],w=v[_];if(T.filename!==w.filename||T.lineno!==w.lineno||T.colno!==w.colno||T.function!==w.function)return!1}return!0}s(i,"_isSameStacktrace");function o(S,f){let v=S.fingerprint,E=f.fingerprint;if(!v&&!E)return!0;if(v&&!E||!v&&E)return!1;v=v,E=E;try{return v.join("")===E.join("")}catch{return!1}}s(o,"_isSameFingerprint");function u(S){return S.exception&&S.exception.values&&S.exception.values[0]}s(u,"_getExceptionFromEvent");function h(S){const f=S.exception;if(f)try{return f.values[0].stacktrace.frames}catch{return}}s(h,"_getFramesFromEvent"),a._shouldDropEvent=n,a.dedupeIntegration=r},6437106406:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(1927145604),m=c(8844511336),g="ExtraErrorData",l=s((t={})=>{const{depth:i=3,captureErrorCause:o=!0}=t;return{name:g,processEvent(u,h){return n(u,h,i,o)}}},"_extraErrorDataIntegration"),r=p.defineIntegration(l);function n(t,i={},o,u){if(!i.originalException||!d.isError(i.originalException))return t;const h=i.originalException.name||i.originalException.constructor.name,S=e(i.originalException,u);if(S){const f={...t.contexts},v=d.normalize(S,o);return d.isPlainObject(v)&&(d.addNonEnumerableProperty(v,"__sentry_skip_normalization__",!0),f[h]=v),{...t,contexts:f}}return t}s(n,"_enhanceEventWithErrorData");function e(t,i){try{const o=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],u={};for(const h of Object.keys(t)){if(o.indexOf(h)!==-1)continue;const S=t[h];u[h]=d.isError(S)?S.toString():S}if(i&&t.cause!==void 0&&(u.cause=d.isError(t.cause)?t.cause.toString():t.cause),typeof t.toJSON=="function"){const h=t.toJSON();for(const S of Object.keys(h)){const f=h[S];u[S]=d.isError(f)?f.toString():f}}return u}catch(o){m.DEBUG_BUILD&&d.logger.error("Unable to extract extra data from the Error object:",o)}return null}s(e,"_extractErrorData"),a.extraErrorDataIntegration=r},3620727810:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(1927145604);let g;const l="FunctionToString",r=new WeakMap,n=s(()=>({name:l,setupOnce(){g=Function.prototype.toString;try{Function.prototype.toString=function(...t){const i=d.getOriginalFunction(this),o=r.has(p.getClient())&&i!==void 0?i:this;return g.apply(o,t)}}catch{}},setup(t){r.set(t,!0)}}),"_functionToStringIntegration"),e=m.defineIntegration(n);a.functionToStringIntegration=e},3514394122:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8844511336),m=c(1927145604),g=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],l="InboundFilters",r=s((_={})=>({name:l,processEvent(T,w,M){const R=M.getOptions(),O=e(_,R);return t(T,O)?null:T}}),"_inboundFiltersIntegration"),n=m.defineIntegration(r);function e(_={},T={}){return{allowUrls:[..._.allowUrls||[],...T.allowUrls||[]],denyUrls:[..._.denyUrls||[],...T.denyUrls||[]],ignoreErrors:[..._.ignoreErrors||[],...T.ignoreErrors||[],..._.disableErrorDefaults?[]:g],ignoreTransactions:[..._.ignoreTransactions||[],...T.ignoreTransactions||[]],ignoreInternal:_.ignoreInternal!==void 0?_.ignoreInternal:!0}}s(e,"_mergeOptions");function t(_,T){return T.ignoreInternal&&f(_)?(p.DEBUG_BUILD&&d.logger.warn(`Event dropped due to being internal Sentry Error.
Event: ${d.getEventDescription(_)}`),!0):i(_,T.ignoreErrors)?(p.DEBUG_BUILD&&d.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${d.getEventDescription(_)}`),!0):o(_,T.ignoreTransactions)?(p.DEBUG_BUILD&&d.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${d.getEventDescription(_)}`),!0):u(_,T.denyUrls)?(p.DEBUG_BUILD&&d.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${d.getEventDescription(_)}.
Url: ${E(_)}`),!0):h(_,T.allowUrls)?!1:(p.DEBUG_BUILD&&d.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${d.getEventDescription(_)}.
Url: ${E(_)}`),!0)}s(t,"_shouldDropEvent");function i(_,T){return _.type||!T||!T.length?!1:S(_).some(w=>d.stringMatchesSomePattern(w,T))}s(i,"_isIgnoredError");function o(_,T){if(_.type!=="transaction"||!T||!T.length)return!1;const w=_.transaction;return w?d.stringMatchesSomePattern(w,T):!1}s(o,"_isIgnoredTransaction");function u(_,T){if(!T||!T.length)return!1;const w=E(_);return w?d.stringMatchesSomePattern(w,T):!1}s(u,"_isDeniedUrl");function h(_,T){if(!T||!T.length)return!0;const w=E(_);return w?d.stringMatchesSomePattern(w,T):!0}s(h,"_isAllowedUrl");function S(_){const T=[];_.message&&T.push(_.message);let w;try{w=_.exception.values[_.exception.values.length-1]}catch{}return w&&w.value&&(T.push(w.value),w.type&&T.push(`${w.type}: ${w.value}`)),T}s(S,"_getPossibleEventMessages");function f(_){try{return _.exception.values[0].type==="SentryError"}catch{}return!1}s(f,"_isSentryError");function v(_=[]){for(let T=_.length-1;T>=0;T--){const w=_[T];if(w&&w.filename!=="<anonymous>"&&w.filename!=="[native code]")return w.filename||null}return null}s(v,"_getLastValidUrl");function E(_){try{let T;try{T=_.exception.values[0].stacktrace.frames}catch{}return T?v(T):null}catch{return p.DEBUG_BUILD&&d.logger.error(`Cannot extract url for event ${d.getEventDescription(_)}`),null}}s(E,"_getEventFilterUrl"),a.inboundFiltersIntegration=n},8947681608:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(1927145604),m="cause",g=5,l="LinkedErrors",r=s((e={})=>{const t=e.limit||g,i=e.key||m;return{name:l,preprocessEvent(o,u,h){const S=h.getOptions();d.applyAggregateErrorsToEvent(d.exceptionFromError,S.stackParser,S.maxValueLength,i,t,o,u)}}},"_linkedErrorsIntegration"),n=p.defineIntegration(r);a.linkedErrorsIntegration=n},2133507327:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(1927145604),m=c(2247716195),g="ModuleMetadata",l=s(()=>({name:g,setup(n){n.on("beforeEnvelope",e=>{d.forEachEnvelopeItem(e,(t,i)=>{if(i==="event"){const o=Array.isArray(t)?t[1]:void 0;o&&(m.stripMetadataFromStackFrames(o),t[1]=o)}})})},processEvent(n,e,t){const i=t.getOptions().stackParser;return m.addMetadataToStackFrames(i,n),n}}),"_moduleMetadataIntegration"),r=p.defineIntegration(l);a.moduleMetadataIntegration=r},4474256835:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(1927145604),m={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},g="RequestData",l=s((e={})=>{const t={...m,...e,include:{...m.include,...e.include,user:e.include&&typeof e.include.user=="boolean"?e.include.user:{...m.include.user,...(e.include||{}).user}}};return{name:g,processEvent(i){const{sdkProcessingMetadata:o={}}=i,u=o.request;if(!u)return i;const h=n(t);return d.addRequestDataToEvent(i,u,h)}}},"_requestDataIntegration"),r=p.defineIntegration(l);function n(e){const{transactionNamingScheme:t,include:{ip:i,user:o,...u}}=e,h=["method"];for(const[f,v]of Object.entries(u))v&&h.push(f);let S;if(o===void 0)S=!0;else if(typeof o=="boolean")S=o;else{const f=[];for(const[v,E]of Object.entries(o))E&&f.push(v);S=f}return{include:{ip:i,user:S,request:h.length!==0?h:void 0,transaction:t}}}s(n,"convertReqDataIntegrationOptsToAddReqDataOpts"),a.requestDataIntegration=r},8435832800:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(1927145604),m="RewriteFrames",g=p.defineIntegration((r={})=>{const n=r.root,e=r.prefix||"app:///",t="window"in d.GLOBAL_OBJ&&d.GLOBAL_OBJ.window!==void 0,i=r.iteratee||l({isBrowser:t,root:n,prefix:e});function o(h){try{return{...h,exception:{...h.exception,values:h.exception.values.map(S=>({...S,...S.stacktrace&&{stacktrace:u(S.stacktrace)}}))}}}catch{return h}}s(o,"_processExceptionsEvent");function u(h){return{...h,frames:h&&h.frames&&h.frames.map(S=>i(S))}}return s(u,"_processStacktrace"),{name:m,processEvent(h){let S=h;return h.exception&&Array.isArray(h.exception.values)&&(S=o(S)),S}}});function l({isBrowser:r,root:n,prefix:e}){return t=>{if(!t.filename)return t;const i=/^[a-zA-Z]:\\/.test(t.filename)||t.filename.includes("\\")&&!t.filename.includes("/"),o=/^\//.test(t.filename);if(r){if(n){const u=t.filename;u.indexOf(n)===0&&(t.filename=u.replace(n,e))}}else if(i||o){const u=i?t.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):t.filename,h=n?d.relative(n,u):d.basename(u);t.filename=`${e}${h}`}return t}}s(l,"generateIteratee"),a.generateIteratee=l,a.rewriteFramesIntegration=g},3496361636:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(1927145604),m="SessionTiming",g=s(()=>{const r=d.timestampInSeconds()*1e3;return{name:m,processEvent(n){const e=d.timestampInSeconds()*1e3;return{...n,extra:{...n.extra,["session:start"]:r,["session:duration"]:e-r,["session:end"]:e}}}}},"_sessionTimingIntegration"),l=p.defineIntegration(g);a.sessionTimingIntegration=l},3005223956:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(1927145604),m=10,g="ZodErrors";function l(o){return d.isError(o)&&o.name==="ZodError"&&Array.isArray(o.errors)}s(l,"originalExceptionIsZodError");function r(o){return{...o,path:"path"in o&&Array.isArray(o.path)?o.path.join("."):void 0,keys:"keys"in o?JSON.stringify(o.keys):void 0,unionErrors:"unionErrors"in o?JSON.stringify(o.unionErrors):void 0}}s(r,"formatIssueTitle");function n(o){const u=new Set;for(const S of o.issues)S.path&&u.add(S.path[0]);const h=Array.from(u);return`Failed to validate keys: ${d.truncate(h.join(", "),100)}`}s(n,"formatIssueMessage");function e(o,u,h){return!u.exception||!u.exception.values||!h||!h.originalException||!l(h.originalException)||h.originalException.issues.length===0?u:{...u,exception:{...u.exception,values:[{...u.exception.values[0],value:n(h.originalException)},...u.exception.values.slice(1)]},extra:{...u.extra,"zoderror.issues":h.originalException.errors.slice(0,o).map(r)}}}s(e,"applyZodErrorsToEvent");const t=s((o={})=>{const u=o.limit||m;return{name:g,processEvent(h,S){return e(u,h,S)}}},"_zodErrorsIntegration"),i=p.defineIntegration(t);a.applyZodErrorsToEvent=e,a.zodErrorsIntegration=i},2247716195:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=new Map,m=new Set;function g(e){if(d.GLOBAL_OBJ._sentryModuleMetadata)for(const t of Object.keys(d.GLOBAL_OBJ._sentryModuleMetadata)){const i=d.GLOBAL_OBJ._sentryModuleMetadata[t];if(m.has(t))continue;m.add(t);const o=e(t);for(const u of o.reverse())if(u.filename){p.set(u.filename,i);break}}}s(g,"ensureMetadataStacksAreParsed");function l(e,t){return g(e),p.get(t)}s(l,"getMetadataForUrl");function r(e,t){try{t.exception.values.forEach(i=>{if(i.stacktrace)for(const o of i.stacktrace.frames||[]){if(!o.filename)continue;const u=l(e,o.filename);u&&(o.module_metadata=u)}})}catch{}}s(r,"addMetadataToStackFrames");function n(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const i of t.stacktrace.frames||[])delete i.module_metadata})}catch{}}s(n,"stripMetadataFromStackFrames"),a.addMetadataToStackFrames=r,a.getMetadataForUrl=l,a.stripMetadataFromStackFrames=n},7604170301:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(5475300505),m=c(9622876717),g=c(5663957480),l=c(8672240743),r=c(5227316865);class n{constructor(t){this._client=t,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval(()=>this._flush(),m.DEFAULT_FLUSH_INTERVAL),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*m.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}add(t,i,o,u="none",h={},S=d.timestampInSeconds()){const f=Math.floor(S),v=r.sanitizeMetricKey(i),E=r.sanitizeTags(h),_=r.sanitizeUnit(u),T=r.getBucketKey(t,v,_,E);let w=this._buckets.get(T);const M=w&&t===m.SET_METRIC_TYPE?w.metric.weight:0;w?(w.metric.add(o),w.timestamp<f&&(w.timestamp=f)):(w={metric:new l.METRIC_MAP[t](o),timestamp:f,metricType:t,name:v,unit:_,tags:E},this._buckets.set(T,w));const R=typeof o=="string"?w.metric.weight-M:o;p.updateMetricSummaryOnActiveSpan(t,v,R,_,h,T),this._bucketsTotalWeight+=w.metric.weight,this._bucketsTotalWeight>=m.MAX_WEIGHT&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush){this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),this._buckets.clear();return}const t=Math.floor(d.timestampInSeconds())-m.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,i=new Map;for(const[o,u]of this._buckets)u.timestamp<=t&&(i.set(o,u),this._bucketsTotalWeight-=u.metric.weight);for(const[o]of i)this._buckets.delete(o);this._captureMetrics(i)}_captureMetrics(t){if(t.size>0){const i=Array.from(t).map(([,o])=>o);g.captureAggregateMetrics(this._client,i)}}}s(n,"MetricsAggregator"),a.MetricsAggregator=n},5988719990:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(5475300505),m=c(9622876717),g=c(5663957480),l=c(8672240743),r=c(5227316865);class n{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),m.DEFAULT_BROWSER_FLUSH_INTERVAL)}add(t,i,o,u="none",h={},S=d.timestampInSeconds()){const f=Math.floor(S),v=r.sanitizeMetricKey(i),E=r.sanitizeTags(h),_=r.sanitizeUnit(u),T=r.getBucketKey(t,v,_,E);let w=this._buckets.get(T);const M=w&&t===m.SET_METRIC_TYPE?w.metric.weight:0;w?(w.metric.add(o),w.timestamp<f&&(w.timestamp=f)):(w={metric:new l.METRIC_MAP[t](o),timestamp:f,metricType:t,name:v,unit:_,tags:E},this._buckets.set(T,w));const R=typeof o=="string"?w.metric.weight-M:o;p.updateMetricSummaryOnActiveSpan(t,v,R,_,h,T)}flush(){if(this._buckets.size===0)return;const t=Array.from(this._buckets.values());g.captureAggregateMetrics(this._client,t),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}s(n,"BrowserMetricsAggregator"),a.BrowserMetricsAggregator=n},9622876717:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c="c",d="g",p="s",m="d",g=5e3,l=1e4,r=1e4;a.COUNTER_METRIC_TYPE=c,a.DEFAULT_BROWSER_FLUSH_INTERVAL=g,a.DEFAULT_FLUSH_INTERVAL=l,a.DISTRIBUTION_METRIC_TYPE=m,a.GAUGE_METRIC_TYPE=d,a.MAX_WEIGHT=r,a.SET_METRIC_TYPE=p},5663957480:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(5227316865);function m(r,n){d.logger.log(`Flushing aggregated metrics, number of metrics: ${n.length}`);const e=r.getDsn(),t=r.getSdkMetadata(),i=r.getOptions().tunnel,o=g(n,e,t,i);r.sendEnvelope(o)}s(m,"captureAggregateMetrics");function g(r,n,e,t){const i={sent_at:new Date().toISOString()};e&&e.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),t&&n&&(i.dsn=d.dsnToString(n));const o=l(r);return d.createEnvelope(i,[o])}s(g,"createMetricEnvelope");function l(r){const n=p.serializeMetricBuckets(r);return[{type:"statsd",length:n.length},n]}s(l,"createMetricEnvelopeItem"),a.captureAggregateMetrics=m,a.createMetricEnvelope=g},6431460707:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7604170301),p=c(6342793611);function m(t,i=1,o){p.metrics.increment(d.MetricsAggregator,t,i,o)}s(m,"increment");function g(t,i,o){p.metrics.distribution(d.MetricsAggregator,t,i,o)}s(g,"distribution");function l(t,i,o){p.metrics.set(d.MetricsAggregator,t,i,o)}s(l,"set");function r(t,i,o){p.metrics.gauge(d.MetricsAggregator,t,i,o)}s(r,"gauge");function n(t){return p.metrics.getMetricsAggregatorForClient(t,d.MetricsAggregator)}s(n,"getMetricsAggregatorForClient");const e={increment:m,distribution:g,set:l,gauge:r,getMetricsAggregatorForClient:n};a.metricsDefault=e},6342793611:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(8844511336),g=c(5475300505),l=c(9622876717);function r(h,S){const f=d.getGlobalSingleton("globalMetricsAggregators",()=>new WeakMap),v=f.get(h);if(v)return v;const E=new S(h);return h.on("flush",()=>E.flush()),h.on("close",()=>E.close()),f.set(h,E),E}s(r,"getMetricsAggregatorForClient");function n(h,S,f,v,E={}){const _=E.client||p.getClient();if(!_)return;const T=g.getActiveSpan(),w=T?g.getRootSpan(T):void 0,{unit:M,tags:R,timestamp:O}=E,{release:k,environment:A}=_.getOptions(),P={};k&&(P.release=k),A&&(P.environment=A),w&&(P.transaction=g.spanToJSON(w).description||""),m.DEBUG_BUILD&&d.logger.log(`Adding value of ${v} to ${S} metric ${f}`),r(_,h).add(S,f,v,M,{...P,...R},O)}s(n,"addToMetricsAggregator");function e(h,S,f=1,v){n(h,l.COUNTER_METRIC_TYPE,S,f,v)}s(e,"increment");function t(h,S,f,v){n(h,l.DISTRIBUTION_METRIC_TYPE,S,f,v)}s(t,"distribution");function i(h,S,f,v){n(h,l.SET_METRIC_TYPE,S,f,v)}s(i,"set");function o(h,S,f,v){n(h,l.GAUGE_METRIC_TYPE,S,f,v)}s(o,"gauge");const u={increment:e,distribution:t,set:i,gauge:o,getMetricsAggregatorForClient:r};a.metrics=u},8672240743:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(9622876717),p=c(5227316865);class m{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}}s(m,"CounterMetric");class g{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}s(g,"GaugeMetric");class l{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}}s(l,"DistributionMetric");class r{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?p.simpleHash(t):t).join(":")}}s(r,"SetMetric");const n={[d.COUNTER_METRIC_TYPE]:m,[d.GAUGE_METRIC_TYPE]:g,[d.DISTRIBUTION_METRIC_TYPE]:l,[d.SET_METRIC_TYPE]:r};a.CounterMetric=m,a.DistributionMetric=l,a.GaugeMetric=g,a.METRIC_MAP=n,a.SetMetric=r},1243296801:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614);let p;function m(r){return p?p.get(r):void 0}s(m,"getMetricStorageForSpan");function g(r){const n=m(r);if(!n)return;const e={};for(const[,[t,i]]of n)e[t]||(e[t]=[]),e[t].push(d.dropUndefinedKeys(i));return e}s(g,"getMetricSummaryJsonForSpan");function l(r,n,e,t,i,o,u){const h=m(r)||new Map,S=`${n}:${e}@${i}`,f=h.get(u);if(f){const[,v]=f;h.set(u,[S,{min:Math.min(v.min,t),max:Math.max(v.max,t),count:v.count+=1,sum:v.sum+=t,tags:v.tags}])}else h.set(u,[S,{min:t,max:t,count:1,sum:t,tags:o}]);p||(p=new WeakMap),p.set(r,h)}s(l,"updateMetricSummaryOnSpan"),a.getMetricSummaryJsonForSpan=g,a.updateMetricSummaryOnSpan=l},5227316865:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614);function p(u,h,S,f){const v=Object.entries(d.dropUndefinedKeys(f)).sort((E,_)=>E[0].localeCompare(_[0]));return`${u}${h}${S}${v}`}s(p,"getBucketKey");function m(u){let h=0;for(let S=0;S<u.length;S++){const f=u.charCodeAt(S);h=(h<<5)-h+f,h&=h}return h>>>0}s(m,"simpleHash");function g(u){let h="";for(const S of u){const f=Object.entries(S.tags),v=f.length>0?`|#${f.map(([E,_])=>`${E}:${_}`).join(",")}`:"";h+=`${S.name}@${S.unit}:${S.metric}|${S.metricType}${v}|T${S.timestamp}
`}return h}s(g,"serializeMetricBuckets");function l(u){return u.replace(/[^\w]+/gi,"_")}s(l,"sanitizeUnit");function r(u){return u.replace(/[^\w\-.]+/gi,"_")}s(r,"sanitizeMetricKey");function n(u){return u.replace(/[^\w\-./]+/gi,"")}s(n,"sanitizeTagKey");const e=[[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function t(u){for(const[h,S]of e)if(u===h)return S;return u}s(t,"getCharOrReplacement");function i(u){return[...u].reduce((h,S)=>h+t(S),"")}s(i,"sanitizeTagValue");function o(u){const h={};for(const S in u)if(Object.prototype.hasOwnProperty.call(u,S)){const f=n(S);h[f]=i(String(u[S]))}return h}s(o,"sanitizeTags"),a.getBucketKey=p,a.sanitizeMetricKey=r,a.sanitizeTags=o,a.sanitizeUnit=l,a.serializeMetricBuckets=g,a.simpleHash=m},2158524366:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(5234873710),m=c(9972015035),g=100;class l{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=n()}clone(){const t=new l;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,m._setSpanForScope(t,m._getSpanForScope(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&p.updateSession(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,i){return this._tags={...this._tags,[t]:i},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,i){return this._extra={...this._extra,[t]:i},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,i){return i===null?delete this._contexts[t]:this._contexts[t]=i,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const i=typeof t=="function"?t(this):t,[o,u]=i instanceof r?[i.getScopeData(),i.getRequestSession()]:d.isPlainObject(i)?[t,t.requestSession]:[],{tags:h,extra:S,user:f,contexts:v,level:E,fingerprint:_=[],propagationContext:T}=o||{};return this._tags={...this._tags,...h},this._extra={...this._extra,...S},this._contexts={...this._contexts,...v},f&&Object.keys(f).length&&(this._user=f),E&&(this._level=E),_.length&&(this._fingerprint=_),T&&(this._propagationContext=T),u&&(this._requestSession=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,m._setSpanForScope(this,void 0),this._attachments=[],this._propagationContext=n(),this._notifyScopeListeners(),this}addBreadcrumb(t,i){const o=typeof i=="number"?i:g;if(o<=0)return this;const u={timestamp:d.dateTimestampInSeconds(),...t},h=this._breadcrumbs;return h.push(u),this._breadcrumbs=h.length>o?h.slice(-o):h,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:m._getSpanForScope(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,i){const o=i&&i.event_id?i.event_id:d.uuid4();if(!this._client)return d.logger.warn("No client configured on scope - will not capture exception!"),o;const u=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:u,...i,event_id:o},this),o}captureMessage(t,i,o){const u=o&&o.event_id?o.event_id:d.uuid4();if(!this._client)return d.logger.warn("No client configured on scope - will not capture message!"),u;const h=new Error(t);return this._client.captureMessage(t,i,{originalException:t,syntheticException:h,...o,event_id:u},this),u}captureEvent(t,i){const o=i&&i.event_id?i.event_id:d.uuid4();return this._client?(this._client.captureEvent(t,{...i,event_id:o},this),o):(d.logger.warn("No client configured on scope - will not capture event!"),o)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}s(l,"ScopeClass");const r=l;function n(){return{traceId:d.uuid4(),spanId:d.uuid4().substring(16)}}s(n,"generatePropagationContext"),a.Scope=r},9483783910:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(2685322190),g=c(8844511336);function l(e,t){t.debug===!0&&(g.DEBUG_BUILD?d.logger.enable():d.consoleSandbox(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),p.getCurrentScope().update(t.initialScope);const o=new e(t);r(o),o.init()}s(l,"initAndBind");function r(e){p.getCurrentScope().setClient(e),n(e)}s(r,"setCurrentClient");function n(e){const t=m.getSentryCarrier(m.getMainCarrier());t.hub&&typeof t.hub.getStackTop=="function"&&(t.hub.getStackTop().client=e)}s(n,"registerClientOnGlobalHub"),a.initAndBind=l,a.setCurrentClient=r},2332127203:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c="sentry.source",d="sentry.sample_rate",p="sentry.op",m="sentry.origin",g="sentry.idle_span_finish_reason",l="sentry.measurement_unit",r="sentry.measurement_value",n="sentry.profile_id",e="sentry.exclusive_time",t="cache.hit",i="cache.key",o="cache.item_size";a.SEMANTIC_ATTRIBUTE_CACHE_HIT=t,a.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=o,a.SEMANTIC_ATTRIBUTE_CACHE_KEY=i,a.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=e,a.SEMANTIC_ATTRIBUTE_PROFILE_ID=n,a.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=g,a.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=l,a.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=r,a.SEMANTIC_ATTRIBUTE_SENTRY_OP=p,a.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=m,a.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=d,a.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=c},1817668688:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(4936960144),m=c(7584701501),g=c(8438156026),l=c(8844511336),r=c(7083316483),n=c(2206474662),e=c(9972015035),t=c(5475300505),i=c(9064881818);class o extends p.BaseClient{constructor(h){n.registerSpanErrorInstrumentation(),super(h)}eventFromException(h,S){return d.resolvedSyncPromise(d.eventFromUnknownInput(this,this._options.stackParser,h,S))}eventFromMessage(h,S="info",f){return d.resolvedSyncPromise(d.eventFromMessage(this._options.stackParser,h,S,f,this._options.attachStacktrace))}captureException(h,S,f){if(this._options.autoSessionTracking&&this._sessionFlusher){const v=g.getIsolationScope().getRequestSession();v&&v.status==="ok"&&(v.status="errored")}return super.captureException(h,S,f)}captureEvent(h,S,f){if(this._options.autoSessionTracking&&this._sessionFlusher&&(h.type||"exception")==="exception"&&h.exception&&h.exception.values&&h.exception.values.length>0){const _=g.getIsolationScope().getRequestSession();_&&_.status==="ok"&&(_.status="errored")}return super.captureEvent(h,S,f)}close(h){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(h)}initSessionFlusher(){const{release:h,environment:S}=this._options;h?this._sessionFlusher=new r.SessionFlusher(this,{release:h,environment:S}):l.DEBUG_BUILD&&d.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(h,S,f){const v="checkInId"in h&&h.checkInId?h.checkInId:d.uuid4();if(!this._isEnabled())return l.DEBUG_BUILD&&d.logger.warn("SDK not enabled, will not capture checkin."),v;const E=this.getOptions(),{release:_,environment:T,tunnel:w}=E,M={check_in_id:v,monitor_slug:h.monitorSlug,status:h.status,release:_,environment:T};"duration"in h&&(M.duration=h.duration),S&&(M.monitor_config={schedule:S.schedule,checkin_margin:S.checkinMargin,max_runtime:S.maxRuntime,timezone:S.timezone});const[R,O]=this._getTraceInfoFromScope(f);O&&(M.contexts={trace:O});const k=m.createCheckInEnvelope(M,R,this.getSdkMetadata(),w,this.getDsn());return l.DEBUG_BUILD&&d.logger.info("Sending checkin:",h.monitorSlug,h.status),this.sendEnvelope(k),v}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():l.DEBUG_BUILD&&d.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(h,S,f,v){return this._options.platform&&(h.platform=h.platform||this._options.platform),this._options.runtime&&(h.contexts={...h.contexts,runtime:(h.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(h.server_name=h.server_name||this._options.serverName),super._prepareEvent(h,S,f,v)}_getTraceInfoFromScope(h){if(!h)return[void 0,void 0];const S=e._getSpanForScope(h);if(S){const w=t.getRootSpan(S);return[i.getDynamicSamplingContextFromSpan(w),t.spanToTraceContext(w)]}const{traceId:f,spanId:v,parentSpanId:E,dsc:_}=h.getPropagationContext(),T={trace_id:f,span_id:v,parent_span_id:E};return _?[_,T]:[i.getDynamicSamplingContextFromClient(f,this),T]}}s(o,"ServerRuntimeClient"),a.ServerRuntimeClient=o},5234873710:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614);function p(r){const n=d.timestampInSeconds(),e={sid:d.uuid4(),init:!0,timestamp:n,started:n,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>l(e)};return r&&m(e,r),e}s(p,"makeSession");function m(r,n={}){if(n.user&&(!r.ipAddress&&n.user.ip_address&&(r.ipAddress=n.user.ip_address),!r.did&&!n.did&&(r.did=n.user.id||n.user.email||n.user.username)),r.timestamp=n.timestamp||d.timestampInSeconds(),n.abnormal_mechanism&&(r.abnormal_mechanism=n.abnormal_mechanism),n.ignoreDuration&&(r.ignoreDuration=n.ignoreDuration),n.sid&&(r.sid=n.sid.length===32?n.sid:d.uuid4()),n.init!==void 0&&(r.init=n.init),!r.did&&n.did&&(r.did=`${n.did}`),typeof n.started=="number"&&(r.started=n.started),r.ignoreDuration)r.duration=void 0;else if(typeof n.duration=="number")r.duration=n.duration;else{const e=r.timestamp-r.started;r.duration=e>=0?e:0}n.release&&(r.release=n.release),n.environment&&(r.environment=n.environment),!r.ipAddress&&n.ipAddress&&(r.ipAddress=n.ipAddress),!r.userAgent&&n.userAgent&&(r.userAgent=n.userAgent),typeof n.errors=="number"&&(r.errors=n.errors),n.status&&(r.status=n.status)}s(m,"updateSession");function g(r,n){let e={};n?e={status:n}:r.status==="ok"&&(e={status:"exited"}),m(r,e)}s(g,"closeSession");function l(r){return d.dropUndefinedKeys({sid:`${r.sid}`,init:r.init,started:new Date(r.started*1e3).toISOString(),timestamp:new Date(r.timestamp*1e3).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,abnormal_mechanism:r.abnormal_mechanism,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}s(l,"sessionToJSON"),a.closeSession=g,a.makeSession=p,a.updateSession=m},7083316483:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026);class m{constructor(l,r){this._client=l,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1e3),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=r}flush(){const l=this.getSessionAggregates();l.aggregates.length!==0&&(this._pendingAggregates={},this._client.sendSession(l))}getSessionAggregates(){const l=Object.keys(this._pendingAggregates).map(n=>this._pendingAggregates[parseInt(n)]),r={attrs:this._sessionAttrs,aggregates:l};return d.dropUndefinedKeys(r)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const l=p.getIsolationScope(),r=l.getRequestSession();r&&r.status&&(this._incrementSessionStatusCount(r.status,new Date),l.setRequestSession(void 0))}_incrementSessionStatusCount(l,r){const n=new Date(r).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};const e=this._pendingAggregates[n];switch(e.started||(e.started=new Date(n).toISOString()),l){case"errored":return e.errored=(e.errored||0)+1,e.errored;case"ok":return e.exited=(e.exited||0)+1,e.exited;default:return e.crashed=(e.crashed||0)+1,e.crashed}}}s(m,"SessionFlusher"),a.SessionFlusher=m},9064881818:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(4834620523),m=c(8438156026),g=c(2332127203),l=c(5475300505),r="_frozenDsc";function n(i,o){const u=i;d.addNonEnumerableProperty(u,r,o)}s(n,"freezeDscOnSpan");function e(i,o){const u=o.getOptions(),{publicKey:h}=o.getDsn()||{},S=d.dropUndefinedKeys({environment:u.environment||p.DEFAULT_ENVIRONMENT,release:u.release,public_key:h,trace_id:i});return o.emit("createDsc",S),S}s(e,"getDynamicSamplingContextFromClient");function t(i){const o=m.getClient();if(!o)return{};const u=e(l.spanToJSON(i).trace_id||"",o),h=l.getRootSpan(i);if(!h)return u;const S=h[r];if(S)return S;const f=l.spanToJSON(h),v=f.data||{},E=v[g.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];E!=null&&(u.sample_rate=`${E}`);const _=v[g.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];return _&&_!=="url"&&(u.transaction=f.description),u.sampled=String(l.spanIsSampled(h)),o.emit("createDsc",u),u}s(t,"getDynamicSamplingContextFromSpan"),a.freezeDscOnSpan=n,a.getDynamicSamplingContextFromClient=e,a.getDynamicSamplingContextFromSpan=t},2206474662:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8844511336),m=c(5475300505),g=c(1150305139);let l=!1;function r(){l||(l=!0,d.addGlobalErrorInstrumentationHandler(n),d.addGlobalUnhandledRejectionInstrumentationHandler(n))}s(r,"registerSpanErrorInstrumentation");function n(){const e=m.getActiveSpan(),t=e&&m.getRootSpan(e);if(t){const i="internal_error";p.DEBUG_BUILD&&d.logger.log(`[Tracing] Root span: ${i} -> Global error occured`),t.setStatus({code:g.SPAN_STATUS_ERROR,message:i})}}s(n,"errorCallback"),n.tag="sentry_tracingErrorCallback",a.registerSpanErrorInstrumentation=r},5618891990:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(2206474662);function p(){d.registerSpanErrorInstrumentation()}s(p,"addTracingExtensions"),a.addTracingExtensions=p},7265722327:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(8844511336),g=c(2332127203),l=c(8645141291),r=c(9972015035),n=c(5475300505),e=c(8167549304),t=c(1150305139),i=c(4530391782),o={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},u="heartbeatFailed",h="idleTimeout",S="finalTimeout",f="externalFinish";function v(_,T={}){const w=new Map;let M=!1,R,O=f,k=!T.disableAutoFinish;const{idleTimeout:A=o.idleTimeout,finalTimeout:P=o.finalTimeout,childSpanTimeout:D=o.childSpanTimeout,beforeSpanEnd:H}=T,j=p.getClient();if(!j||!l.hasTracingEnabled())return new e.SentryNonRecordingSpan;const W=p.getCurrentScope(),X=n.getActiveSpan(),ee=E(_);function fe(ze=d.timestampInSeconds()){const nt=n.getSpanDescendants(ee).filter(Ze=>Ze!==ee);if(!nt.length){ee.end(ze);return}const mt=nt.map(Ze=>n.spanToJSON(Ze).timestamp).filter(Ze=>!!Ze),gt=mt.length?Math.max(...mt):void 0,Pe=n.spanTimeInputToSeconds(ze),xe=n.spanToJSON(ee).start_timestamp,Ye=Math.min(xe?xe+P/1e3:1/0,Math.max(xe||-1/0,Math.min(Pe,gt||1/0)));ee.end(Ye)}s(fe,"_endSpan");function oe(){R&&(clearTimeout(R),R=void 0)}s(oe,"_cancelIdleTimeout");function Oe(ze){oe(),R=setTimeout(()=>{!M&&w.size===0&&k&&(O=h,fe(ze))},A)}s(Oe,"_restartIdleTimeout");function Xe(ze){R=setTimeout(()=>{!M&&k&&(O=u,fe(ze))},D)}s(Xe,"_restartChildSpanTimeout");function ge(ze){oe(),w.set(ze,!0);const nt=d.timestampInSeconds();Xe(nt+D/1e3)}s(ge,"_pushActivity");function Me(ze){if(w.has(ze)&&w.delete(ze),w.size===0){const nt=d.timestampInSeconds();Oe(nt+A/1e3)}}s(Me,"_popActivity");function $e(){M=!0,w.clear(),H&&H(ee),r._setSpanForScope(W,X);const ze=n.spanToJSON(ee),{timestamp:nt,start_timestamp:mt}=ze;if(!nt||!mt)return;(ze.data||{})[g.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]||ee.setAttribute(g.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,O),d.logger.log(`[Tracing] Idle span "${ze.op}" finished`);const Pe=n.getSpanDescendants(ee).filter(Ye=>Ye!==ee);let xe=0;Pe.forEach(Ye=>{Ye.isRecording()&&(Ye.setStatus({code:t.SPAN_STATUS_ERROR,message:"cancelled"}),Ye.end(nt),m.DEBUG_BUILD&&d.logger.log("[Tracing] Cancelling span since span ended early",JSON.stringify(Ye,void 0,2)));const Ze=n.spanToJSON(Ye),{timestamp:Re=0,start_timestamp:Tt=0}=Ze,rt=Tt<=nt,Nt=(P+A)/1e3,Wt=Re-Tt<Nt;if(m.DEBUG_BUILD){const Qt=JSON.stringify(Ye,void 0,2);rt?Wt||d.logger.log("[Tracing] Discarding span since it finished after idle span final timeout",Qt):d.logger.log("[Tracing] Discarding span since it happened after idle span was finished",Qt)}(!Wt||!rt)&&(n.removeChildSpanFromSpan(ee,Ye),xe++)}),xe>0&&ee.setAttribute("sentry.idle_span_discarded_spans",xe)}return s($e,"onIdleSpanEnded"),j.on("spanStart",ze=>{if(M||ze===ee||n.spanToJSON(ze).timestamp)return;n.getSpanDescendants(ee).includes(ze)&&ge(ze.spanContext().spanId)}),j.on("spanEnd",ze=>{M||(Me(ze.spanContext().spanId),ze===ee&&$e())}),j.on("idleSpanEnableAutoFinish",ze=>{ze===ee&&(k=!0,Oe(),w.size&&Xe())}),T.disableAutoFinish||Oe(),setTimeout(()=>{M||(ee.setStatus({code:t.SPAN_STATUS_ERROR,message:"deadline_exceeded"}),O=S,fe())},P),ee}s(v,"startIdleSpan");function E(_){const T=i.startInactiveSpan(_);return r._setSpanForScope(p.getCurrentScope(),T),m.DEBUG_BUILD&&d.logger.log("[Tracing] Started span is an idle span"),T}s(E,"_startIdleSpan"),a.TRACING_DEFAULTS=o,a.startIdleSpan=v},8482601586:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8844511336),m=c(5475300505);function g(r){if(!p.DEBUG_BUILD)return;const{description:n="< unknown name >",op:e="< unknown op >",parent_span_id:t}=m.spanToJSON(r),{spanId:i}=r.spanContext(),o=m.spanIsSampled(r),u=m.getRootSpan(r),h=u===r,S=`[Tracing] Starting ${o?"sampled":"unsampled"} ${h?"root ":""}span`,f=[`op: ${e}`,`name: ${n}`,`ID: ${i}`];if(t&&f.push(`parent ID: ${t}`),!h){const{op:v,description:E}=m.spanToJSON(u);f.push(`root ID: ${u.spanContext().spanId}`),v&&f.push(`root op: ${v}`),E&&f.push(`root description: ${E}`)}d.logger.log(`${S}
  ${f.join(`
  `)}`)}s(g,"logSpanStart");function l(r){if(!p.DEBUG_BUILD)return;const{description:n="< unknown name >",op:e="< unknown op >"}=m.spanToJSON(r),{spanId:t}=r.spanContext(),o=m.getRootSpan(r)===r,u=`[Tracing] Finishing "${e}" ${o?"root ":""}span "${n}" with ID ${t}`;d.logger.log(u)}s(l,"logSpanEnd"),a.logSpanEnd=l,a.logSpanStart=g},3345259075:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(2332127203),p=c(5475300505);function m(l,r,n){const e=p.getActiveSpan(),t=e&&p.getRootSpan(e);t&&t.addEvent(l,{[d.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:r,[d.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:n})}s(m,"setMeasurement");function g(l){if(!l||l.length===0)return;const r={};return l.forEach(n=>{const e=n.attributes||{},t=e[d.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT],i=e[d.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];typeof t=="string"&&typeof i=="number"&&(r[n.name]={value:i,unit:t})}),r}s(g,"timedEventsToMeasurements"),a.setMeasurement=m,a.timedEventsToMeasurements=g},6939919536:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8844511336),m=c(8645141291),g=c(1119532287);function l(r,n){if(!m.hasTracingEnabled(r))return[!1];let e;typeof r.tracesSampler=="function"?e=r.tracesSampler(n):n.parentSampled!==void 0?e=n.parentSampled:typeof r.tracesSampleRate<"u"?e=r.tracesSampleRate:e=1;const t=g.parseSampleRate(e);return t===void 0?(p.DEBUG_BUILD&&d.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):t?Math.random()<t?[!0,t]:(p.DEBUG_BUILD&&d.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(e)})`),[!1,t]):(p.DEBUG_BUILD&&d.logger.log(`[Tracing] Discarding transaction because ${typeof r.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,t])}s(l,"sampleSpan"),a.sampleSpan=l},8167549304:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(5475300505);class m{constructor(l={}){this._traceId=l.traceId||d.uuid4(),this._spanId=l.spanId||d.uuid4().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:p.TRACE_FLAG_NONE}}end(l){}setAttribute(l,r){return this}setAttributes(l){return this}setStatus(l){return this}updateName(l){return this}isRecording(){return!1}addEvent(l,r,n){return this}}s(m,"SentryNonRecordingSpan"),a.SentryNonRecordingSpan=m},6720678066:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(8844511336),g=c(5297268390),l=c(1243296801),r=c(2332127203),n=c(5475300505),e=c(9064881818),t=c(8482601586),i=c(3345259075),o=c(9578383602);class u{constructor(_={}){this._traceId=_.traceId||d.uuid4(),this._spanId=_.spanId||d.uuid4().substring(16),this._startTime=_.startTimestamp||d.timestampInSeconds(),this._attributes={},this.setAttributes({[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"manual",[r.SEMANTIC_ATTRIBUTE_SENTRY_OP]:_.op,..._.attributes}),this._name=_.name,_.parentSpanId&&(this._parentSpanId=_.parentSpanId),"sampled"in _&&(this._sampled=_.sampled),_.endTimestamp&&(this._endTime=_.endTimestamp),this._events=[],this._isStandaloneSpan=_.isStandalone,this._endTime&&this._onSpanEnded()}spanContext(){const{_spanId:_,_traceId:T,_sampled:w}=this;return{spanId:_,traceId:T,traceFlags:w?n.TRACE_FLAG_SAMPLED:n.TRACE_FLAG_NONE}}setAttribute(_,T){T===void 0?delete this._attributes[_]:this._attributes[_]=T}setAttributes(_){Object.keys(_).forEach(T=>this.setAttribute(T,_[T]))}updateStartTime(_){this._startTime=n.spanTimeInputToSeconds(_)}setStatus(_){return this._status=_,this}updateName(_){return this._name=_,this}end(_){this._endTime||(this._endTime=n.spanTimeInputToSeconds(_),t.logSpanEnd(this),this._onSpanEnded())}getSpanJSON(){return d.dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[r.SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:n.getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:l.getMetricSummaryJsonForSpan(this),profile_id:this._attributes[r.SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[r.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:i.timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&n.getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?n.getRootSpan(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(_,T,w){m.DEBUG_BUILD&&d.logger.log("[Tracing] Adding an event to span:",_);const M=h(T)?T:w||d.timestampInSeconds(),R=h(T)?{}:T||{},O={name:_,time:n.spanTimeInputToSeconds(M),attributes:R};return this._events.push(O),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const _=p.getClient();if(_&&_.emit("spanEnd",this),!(this._isStandaloneSpan||this===n.getRootSpan(this)))return;if(this._isStandaloneSpan){v(g.createSpanEnvelope([this],_));return}const w=this._convertSpanToTransaction();w&&(o.getCapturedScopesOnSpan(this).scope||p.getCurrentScope()).captureEvent(w)}_convertSpanToTransaction(){if(!S(n.spanToJSON(this)))return;this._name||(m.DEBUG_BUILD&&d.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:_,isolationScope:T}=o.getCapturedScopesOnSpan(this),M=(_||p.getCurrentScope()).getClient()||p.getClient();if(this._sampled!==!0){m.DEBUG_BUILD&&d.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),M&&M.recordDroppedEvent("sample_rate","transaction");return}const O=n.getSpanDescendants(this).filter(H=>H!==this&&!f(H)).map(H=>n.spanToJSON(H)).filter(S),k=this._attributes[r.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],A={contexts:{trace:n.spanToTransactionTraceContext(this)},spans:O,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:_,capturedSpanIsolationScope:T,...d.dropUndefinedKeys({dynamicSamplingContext:e.getDynamicSamplingContextFromSpan(this)})},_metrics_summary:l.getMetricSummaryJsonForSpan(this),...k&&{transaction_info:{source:k}}},P=i.timedEventsToMeasurements(this._events);return P&&Object.keys(P).length&&(m.DEBUG_BUILD&&d.logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(P,void 0,2)),A.measurements=P),A}}s(u,"SentrySpan");function h(E){return E&&typeof E=="number"||E instanceof Date||Array.isArray(E)}s(h,"isSpanTimeInput");function S(E){return!!E.start_timestamp&&!!E.timestamp&&!!E.span_id&&!!E.trace_id}s(S,"isFullFinishedSpan");function f(E){return E instanceof u&&E.isStandaloneSpan()}s(f,"isStandaloneSpan");function v(E){const _=p.getClient();if(!_)return;const T=E[1];if(!T||T.length===0){_.recordDroppedEvent("before_send","span");return}const w=_.getTransport();w&&w.send(E).then(null,M=>{m.DEBUG_BUILD&&d.logger.error("Error while sending span:",M)})}s(v,"sendSpanEnvelope"),a.SentrySpan=u},1150305139:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=0,d=1,p=2;function m(l){if(l<400&&l>=100)return{code:d};if(l>=400&&l<500)switch(l){case 401:return{code:p,message:"unauthenticated"};case 403:return{code:p,message:"permission_denied"};case 404:return{code:p,message:"not_found"};case 409:return{code:p,message:"already_exists"};case 413:return{code:p,message:"failed_precondition"};case 429:return{code:p,message:"resource_exhausted"};case 499:return{code:p,message:"cancelled"};default:return{code:p,message:"invalid_argument"}}if(l>=500&&l<600)switch(l){case 501:return{code:p,message:"unimplemented"};case 503:return{code:p,message:"unavailable"};case 504:return{code:p,message:"deadline_exceeded"};default:return{code:p,message:"internal_error"}}return{code:p,message:"unknown_error"}}s(m,"getSpanStatusFromHttpCode");function g(l,r){l.setAttribute("http.response.status_code",r);const n=m(r);n.message!=="unknown_error"&&l.setStatus(n)}s(g,"setHttpStatus"),a.SPAN_STATUS_ERROR=p,a.SPAN_STATUS_OK=d,a.SPAN_STATUS_UNSET=c,a.getSpanStatusFromHttpCode=m,a.setHttpStatus=g},4530391782:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(2685322190),m=c(8438156026),g=c(897859094),l=c(2332127203),r=c(5800525242),n=c(8645141291),e=c(9972015035),t=c(5475300505),i=c(9064881818),o=c(8482601586),u=c(6939919536),h=c(8167549304),S=c(6720678066),f=c(1150305139),v=c(9578383602),E="__SENTRY_SUPPRESS_TRACING__";function _(W,X){const ee=P();if(ee.startSpan)return ee.startSpan(W,X);const fe=A(W);return m.withScope(W.scope,oe=>{const Oe=j(oe),ge=W.onlyIfParent&&!Oe?new h.SentryNonRecordingSpan:k({parentSpan:Oe,spanContext:fe,forceTransaction:W.forceTransaction,scope:oe});return e._setSpanForScope(oe,ge),r.handleCallbackErrors(()=>X(ge),()=>{const{status:Me}=t.spanToJSON(ge);ge.isRecording()&&(!Me||Me==="ok")&&ge.setStatus({code:f.SPAN_STATUS_ERROR,message:"internal_error"})},()=>ge.end())})}s(_,"startSpan");function T(W,X){const ee=P();if(ee.startSpanManual)return ee.startSpanManual(W,X);const fe=A(W);return m.withScope(W.scope,oe=>{const Oe=j(oe),ge=W.onlyIfParent&&!Oe?new h.SentryNonRecordingSpan:k({parentSpan:Oe,spanContext:fe,forceTransaction:W.forceTransaction,scope:oe});e._setSpanForScope(oe,ge);function Me(){ge.end()}return s(Me,"finishAndSetSpan"),r.handleCallbackErrors(()=>X(ge,Me),()=>{const{status:$e}=t.spanToJSON(ge);ge.isRecording()&&(!$e||$e==="ok")&&ge.setStatus({code:f.SPAN_STATUS_ERROR,message:"internal_error"})})})}s(T,"startSpanManual");function w(W){const X=P();if(X.startInactiveSpan)return X.startInactiveSpan(W);const ee=A(W),fe=W.scope||m.getCurrentScope(),oe=j(fe);return W.onlyIfParent&&!oe?new h.SentryNonRecordingSpan:k({parentSpan:oe,spanContext:ee,forceTransaction:W.forceTransaction,scope:fe})}s(w,"startInactiveSpan");const M=s(({sentryTrace:W,baggage:X},ee)=>m.withScope(fe=>{const oe=d.propagationContextFromHeaders(W,X);return fe.setPropagationContext(oe),ee()}),"continueTrace");function R(W,X){const ee=P();return ee.withActiveSpan?ee.withActiveSpan(W,X):m.withScope(fe=>(e._setSpanForScope(fe,W||void 0),X(fe)))}s(R,"withActiveSpan");function O(W){const X=P();return X.suppressTracing?X.suppressTracing(W):m.withScope(ee=>(ee.setSDKProcessingMetadata({[E]:!0}),W()))}s(O,"suppressTracing");function k({parentSpan:W,spanContext:X,forceTransaction:ee,scope:fe}){if(!n.hasTracingEnabled())return new h.SentryNonRecordingSpan;const oe=m.getIsolationScope();let Oe;if(W&&!ee)Oe=H(W,fe,X),t.addChildSpanToSpan(W,Oe);else if(W){const Xe=i.getDynamicSamplingContextFromSpan(W),{traceId:ge,spanId:Me}=W.spanContext(),$e=t.spanIsSampled(W);Oe=D({traceId:ge,parentSpanId:Me,...X},fe,$e),i.freezeDscOnSpan(Oe,Xe)}else{const{traceId:Xe,dsc:ge,parentSpanId:Me,sampled:$e}={...oe.getPropagationContext(),...fe.getPropagationContext()};Oe=D({traceId:Xe,parentSpanId:Me,...X},fe,$e),ge&&i.freezeDscOnSpan(Oe,ge)}return o.logSpanStart(Oe),v.setCapturedScopesOnSpan(Oe,fe,oe),Oe}s(k,"createChildOrRootSpan");function A(W){const ee={isStandalone:(W.experimental||{}).standalone,...W};if(W.startTime){const fe={...ee};return fe.startTimestamp=t.spanTimeInputToSeconds(W.startTime),delete fe.startTime,fe}return ee}s(A,"normalizeContext");function P(){const W=p.getMainCarrier();return g.getAsyncContextStrategy(W)}s(P,"getAcs");function D(W,X,ee){const fe=m.getClient(),oe=fe&&fe.getOptions()||{},{name:Oe="",attributes:Xe}=W,[ge,Me]=X.getScopeData().sdkProcessingMetadata[E]?[!1]:u.sampleSpan(oe,{name:Oe,parentSampled:ee,attributes:Xe,transactionContext:{name:Oe,parentSampled:ee}}),$e=new S.SentrySpan({...W,attributes:{[l.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"custom",...W.attributes},sampled:ge});return Me!==void 0&&$e.setAttribute(l.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Me),fe&&fe.emit("spanStart",$e),$e}s(D,"_startRootSpan");function H(W,X,ee){const{spanId:fe,traceId:oe}=W.spanContext(),Oe=X.getScopeData().sdkProcessingMetadata[E]?!1:t.spanIsSampled(W),Xe=Oe?new S.SentrySpan({...ee,parentSpanId:fe,traceId:oe,sampled:Oe}):new h.SentryNonRecordingSpan({traceId:oe});t.addChildSpanToSpan(W,Xe);const ge=m.getClient();return ge&&(ge.emit("spanStart",Xe),ee.endTimestamp&&ge.emit("spanEnd",Xe)),Xe}s(H,"_startChildSpan");function j(W){const X=e._getSpanForScope(W);if(!X)return;const ee=m.getClient();return(ee?ee.getOptions():{}).parentSpanIsAlwaysRootSpan?t.getRootSpan(X):X}s(j,"getParentSpan"),a.continueTrace=M,a.startInactiveSpan=w,a.startSpan=_,a.startSpanManual=T,a.suppressTracing=O,a.withActiveSpan=R},9578383602:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p="_sentryScope",m="_sentryIsolationScope";function g(r,n,e){r&&(d.addNonEnumerableProperty(r,m,e),d.addNonEnumerableProperty(r,p,n))}s(g,"setCapturedScopesOnSpan");function l(r){return{scope:r[p],isolationScope:r[m]}}s(l,"getCapturedScopesOnSpan"),a.stripUrlQueryAndFragment=d.stripUrlQueryAndFragment,a.getCapturedScopesOnSpan=l,a.setCapturedScopesOnSpan=g},306863924:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8844511336),m=64;function g(r,n,e=d.makePromiseBuffer(r.bufferSize||m)){let t={};const i=s(u=>e.drain(u),"flush");function o(u){const h=[];if(d.forEachEnvelopeItem(u,(E,_)=>{const T=d.envelopeItemTypeToDataCategory(_);if(d.isRateLimited(t,T)){const w=l(E,_);r.recordDroppedEvent("ratelimit_backoff",T,w)}else h.push(E)}),h.length===0)return d.resolvedSyncPromise({});const S=d.createEnvelope(u[0],h),f=s(E=>{d.forEachEnvelopeItem(S,(_,T)=>{const w=l(_,T);r.recordDroppedEvent(E,d.envelopeItemTypeToDataCategory(T),w)})},"recordEnvelopeLoss"),v=s(()=>n({body:d.serializeEnvelope(S)}).then(E=>(E.statusCode!==void 0&&(E.statusCode<200||E.statusCode>=300)&&p.DEBUG_BUILD&&d.logger.warn(`Sentry responded with status code ${E.statusCode} to sent event.`),t=d.updateRateLimits(t,E),E),E=>{throw f("network_error"),E}),"requestTask");return e.add(v).then(E=>E,E=>{if(E instanceof d.SentryError)return p.DEBUG_BUILD&&d.logger.error("Skipped sending event because buffer is full."),f("queue_overflow"),d.resolvedSyncPromise({});throw E})}return s(o,"send"),{send:o,flush:i}}s(g,"createTransport");function l(r,n){if(!(n!=="event"&&n!=="transaction"))return Array.isArray(r)?r[1]:void 0}s(l,"getEventForEnvelopeItem"),a.DEFAULT_TRANSPORT_BUFFER_SIZE=m,a.createTransport=g},2843166954:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(9857059330);function m(n,e){let t;return d.forEachEnvelopeItem(n,(i,o)=>(e.includes(o)&&(t=Array.isArray(i)?i[1]:void 0),!!t)),t}s(m,"eventFromEnvelope");function g(n,e){return t=>{const i=n(t);return{...i,send:async o=>{const u=m(o,["event","transaction","profile","replay_event"]);return u&&(u.release=e),i.send(o)}}}}s(g,"makeOverrideReleaseTransport");function l(n,e){return d.createEnvelope(e?{...n[0],dsn:e}:n[0],n[1])}s(l,"overrideDsn");function r(n,e){return t=>{const i=n(t),o=new Map;function u(f,v){const E=v?`${f}:${v}`:f;let _=o.get(E);if(!_){const T=d.dsnFromString(f);if(!T)return;const w=p.getEnvelopeEndpointWithUrlEncodedAuth(T,t.tunnel);_=v?g(n,v)({...t,url:w}):n({...t,url:w}),o.set(E,_)}return[f,_]}s(u,"getTransport");async function h(f){function v(T){const w=T&&T.length?T:["event"];return m(f,w)}s(v,"getEvent");const E=e({envelope:f,getEvent:v}).map(T=>typeof T=="string"?u(T,void 0):u(T.dsn,T.release)).filter(T=>!!T);return E.length===0&&E.push(["",i]),(await Promise.all(E.map(([T,w])=>w.send(l(f,T)))))[0]}s(h,"send");async function S(f){const v=[...o.values(),i];return(await Promise.all(v.map(_=>_.flush(f)))).every(_=>_)}return s(S,"flush"),{send:h,flush:S}}}s(r,"makeMultiplexedTransport"),a.eventFromEnvelope=m,a.makeMultiplexedTransport=r},3178226440:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8844511336),m=100,g=5e3,l=36e5;function r(n){function e(...t){p.DEBUG_BUILD&&d.logger.info("[Offline]:",...t)}return s(e,"log"),t=>{const i=n(t);if(!t.createStore)throw new Error("No `createStore` function was provided");const o=t.createStore(t);let u=g,h;function S(_,T,w){return d.envelopeContainsItemType(_,["client_report"])?!1:t.shouldStore?t.shouldStore(_,T,w):!0}s(S,"shouldQueue");function f(_){h&&clearTimeout(h),h=setTimeout(async()=>{h=void 0;const T=await o.shift();T&&(e("Attempting to send previously queued event"),T[0].sent_at=new Date().toISOString(),E(T,!0).catch(w=>{e("Failed to retry sending",w)}))},_),typeof h!="number"&&h.unref&&h.unref()}s(f,"flushIn");function v(){h||(f(u),u=Math.min(u*2,l))}s(v,"flushWithBackOff");async function E(_,T=!1){if(!T&&d.envelopeContainsItemType(_,["replay_event","replay_recording"]))return await o.push(_),f(m),{};try{const w=await i.send(_);let M=m;if(w){if(w.headers&&w.headers["retry-after"])M=d.parseRetryAfterHeader(w.headers["retry-after"]);else if(w.headers&&w.headers["x-sentry-rate-limits"])M=6e4;else if((w.statusCode||0)>=400)return w}return f(M),u=g,w}catch(w){if(await S(_,w,u))return T?await o.unshift(_):await o.push(_),v(),e("Error sending. Event queued.",w),{};throw w}}return s(E,"send"),t.flushAtStartup&&v(),{send:E,flush:_=>i.flush(_)}}}s(r,"makeOfflineTransport"),a.MIN_DELAY=m,a.START_DELAY=g,a.makeOfflineTransport=r},2117263085:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8438156026),m=c(5015065869),g=c(2332127203);c(2206474662),c(8844511336);const l=c(4530391782),r={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};function n(e={}){return function(t){const{path:i,type:o,next:u,rawInput:h}=t,S=p.getClient(),f=S&&S.getOptions(),v={procedure_type:o};(e.attachRpcInput!==void 0?e.attachRpcInput:f&&f.sendDefaultPii)&&(v.input=d.normalize(h)),m.setContext("trpc",v);function E(_){typeof _=="object"&&_!==null&&"ok"in _&&!_.ok&&"error"in _&&m.captureException(_.error,r)}return s(E,"captureIfError"),l.startSpanManual({name:`trpc/${i}`,op:"rpc.server",attributes:{[g.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[g.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.rpc.trpc"}},_=>{let T;try{T=u()}catch(w){throw m.captureException(w,r),_.end(),w}return d.isThenable(T)?T.then(w=>(E(w),_.end(),w),w=>{throw m.captureException(w,r),_.end(),w}):(E(T),_.end(),T)})}}s(n,"trpcMiddleware"),a.trpcMiddleware=n},8969228363:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(9064881818),m=c(5475300505);function g(u,h){const{fingerprint:S,span:f,breadcrumbs:v,sdkProcessingMetadata:E}=h;n(u,h),f&&i(u,f),o(u,S),e(u,v),t(u,E)}s(g,"applyScopeDataToEvent");function l(u,h){const{extra:S,tags:f,user:v,contexts:E,level:_,sdkProcessingMetadata:T,breadcrumbs:w,fingerprint:M,eventProcessors:R,attachments:O,propagationContext:k,transactionName:A,span:P}=h;r(u,"extra",S),r(u,"tags",f),r(u,"user",v),r(u,"contexts",E),r(u,"sdkProcessingMetadata",T),_&&(u.level=_),A&&(u.transactionName=A),P&&(u.span=P),w.length&&(u.breadcrumbs=[...u.breadcrumbs,...w]),M.length&&(u.fingerprint=[...u.fingerprint,...M]),R.length&&(u.eventProcessors=[...u.eventProcessors,...R]),O.length&&(u.attachments=[...u.attachments,...O]),u.propagationContext={...u.propagationContext,...k}}s(l,"mergeScopeData");function r(u,h,S){if(S&&Object.keys(S).length){u[h]={...u[h]};for(const f in S)Object.prototype.hasOwnProperty.call(S,f)&&(u[h][f]=S[f])}}s(r,"mergeAndOverwriteScopeData");function n(u,h){const{extra:S,tags:f,user:v,contexts:E,level:_,transactionName:T}=h,w=d.dropUndefinedKeys(S);w&&Object.keys(w).length&&(u.extra={...w,...u.extra});const M=d.dropUndefinedKeys(f);M&&Object.keys(M).length&&(u.tags={...M,...u.tags});const R=d.dropUndefinedKeys(v);R&&Object.keys(R).length&&(u.user={...R,...u.user});const O=d.dropUndefinedKeys(E);O&&Object.keys(O).length&&(u.contexts={...O,...u.contexts}),_&&(u.level=_),T&&u.type!=="transaction"&&(u.transaction=T)}s(n,"applyDataToEvent");function e(u,h){const S=[...u.breadcrumbs||[],...h];u.breadcrumbs=S.length?S:void 0}s(e,"applyBreadcrumbsToEvent");function t(u,h){u.sdkProcessingMetadata={...u.sdkProcessingMetadata,...h}}s(t,"applySdkMetadataToEvent");function i(u,h){u.contexts={trace:m.spanToTraceContext(h),...u.contexts},u.sdkProcessingMetadata={dynamicSamplingContext:p.getDynamicSamplingContextFromSpan(h),...u.sdkProcessingMetadata};const S=m.getRootSpan(h),f=m.spanToJSON(S).description;f&&!u.transaction&&u.type==="transaction"&&(u.transaction=f)}s(i,"applySpanToEvent");function o(u,h){u.fingerprint=u.fingerprint?d.arrayify(u.fingerprint):[],h&&(u.fingerprint=u.fingerprint.concat(h)),u.fingerprint&&!u.fingerprint.length&&delete u.fingerprint}s(o,"applyFingerprintToEvent"),a.applyScopeDataToEvent=g,a.mergeAndOverwriteScopeData=r,a.mergeScopeData=l},5800525242:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614);function p(g,l,r=()=>{}){let n;try{n=g()}catch(e){throw l(e),r(),e}return m(n,l,r)}s(p,"handleCallbackErrors");function m(g,l,r){return d.isThenable(g)?g.then(n=>(r(),n),n=>{throw l(n),r(),n}):(r(),g)}s(m,"maybeHandlePromiseRejection"),a.handleCallbackErrors=p},8645141291:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8438156026);function p(g){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const l=g||m();return!!l&&(l.enableTracing||"tracesSampleRate"in l||"tracesSampler"in l)}s(p,"hasTracingEnabled");function m(){const g=d.getClient();return g&&g.getOptions()}s(m,"getClientOptions"),a.hasTracingEnabled=p},175966809:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(g,l){const r=l&&l.getDsn(),n=l&&l.getOptions().tunnel;return p(g,r)||d(g,n)}s(c,"isSentryRequestUrl");function d(g,l){return l?m(g)===m(l):!1}s(d,"checkTunnel");function p(g,l){return l?g.includes(l.host):!1}s(p,"checkDsn");function m(g){return g[g.length-1]==="/"?g.slice(0,-1):g}s(m,"removeTrailingSlash"),a.isSentryRequestUrl=c},4718881455:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(d,...p){const m=new String(String.raw(d,...p));return m.__sentry_template_string__=d.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),m.__sentry_template_values__=p,m}s(c,"parameterize"),a.parameterize=c},1119532287:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(8844511336);function m(g){if(typeof g=="boolean")return Number(g);const l=typeof g=="string"?parseFloat(g):g;if(typeof l!="number"||isNaN(l)||l<0||l>1){p.DEBUG_BUILD&&d.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(g)} of type ${JSON.stringify(typeof g)}.`);return}return l}s(m,"parseSampleRate"),a.parseSampleRate=m},9877103701:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(4834620523),m=c(8438156026),g=c(5911348835),l=c(2158524366),r=c(8969228363);function n(T,w,M,R,O,k){const{normalizeDepth:A=3,normalizeMaxBreadth:P=1e3}=T,D={...w,event_id:w.event_id||M.event_id||d.uuid4(),timestamp:w.timestamp||d.dateTimestampInSeconds()},H=M.integrations||T.integrations.map(Oe=>Oe.name);e(D,T),u(D,H),w.type===void 0&&i(D,T.stackParser);const j=S(R,M.captureContext);M.mechanism&&d.addExceptionMechanism(D,M.mechanism);const W=O?O.getEventProcessors():[],X=m.getGlobalScope().getScopeData();if(k){const Oe=k.getScopeData();r.mergeScopeData(X,Oe)}if(j){const Oe=j.getScopeData();r.mergeScopeData(X,Oe)}const ee=[...M.attachments||[],...X.attachments];ee.length&&(M.attachments=ee),r.applyScopeDataToEvent(D,X);const fe=[...W,...X.eventProcessors];return g.notifyEventProcessors(fe,D,M).then(Oe=>(Oe&&o(Oe),typeof A=="number"&&A>0?h(Oe,A,P):Oe))}s(n,"prepareEvent");function e(T,w){const{environment:M,release:R,dist:O,maxValueLength:k=250}=w;"environment"in T||(T.environment="environment"in w?M:p.DEFAULT_ENVIRONMENT),T.release===void 0&&R!==void 0&&(T.release=R),T.dist===void 0&&O!==void 0&&(T.dist=O),T.message&&(T.message=d.truncate(T.message,k));const A=T.exception&&T.exception.values&&T.exception.values[0];A&&A.value&&(A.value=d.truncate(A.value,k));const P=T.request;P&&P.url&&(P.url=d.truncate(P.url,k))}s(e,"applyClientOptions");const t=new WeakMap;function i(T,w){const M=d.GLOBAL_OBJ._sentryDebugIds;if(!M)return;let R;const O=t.get(w);O?R=O:(R=new Map,t.set(w,R));const k=Object.keys(M).reduce((A,P)=>{let D;const H=R.get(P);H?D=H:(D=w(P),R.set(P,D));for(let j=D.length-1;j>=0;j--){const W=D[j];if(W.filename){A[W.filename]=M[P];break}}return A},{});try{T.exception.values.forEach(A=>{A.stacktrace.frames.forEach(P=>{P.filename&&(P.debug_id=k[P.filename])})})}catch{}}s(i,"applyDebugIds");function o(T){const w={};try{T.exception.values.forEach(R=>{R.stacktrace.frames.forEach(O=>{O.debug_id&&(O.abs_path?w[O.abs_path]=O.debug_id:O.filename&&(w[O.filename]=O.debug_id),delete O.debug_id)})})}catch{}if(Object.keys(w).length===0)return;T.debug_meta=T.debug_meta||{},T.debug_meta.images=T.debug_meta.images||[];const M=T.debug_meta.images;Object.keys(w).forEach(R=>{M.push({type:"sourcemap",code_file:R,debug_id:w[R]})})}s(o,"applyDebugMeta");function u(T,w){w.length>0&&(T.sdk=T.sdk||{},T.sdk.integrations=[...T.sdk.integrations||[],...w])}s(u,"applyIntegrationsMetadata");function h(T,w,M){if(!T)return null;const R={...T,...T.breadcrumbs&&{breadcrumbs:T.breadcrumbs.map(O=>({...O,...O.data&&{data:d.normalize(O.data,w,M)}}))},...T.user&&{user:d.normalize(T.user,w,M)},...T.contexts&&{contexts:d.normalize(T.contexts,w,M)},...T.extra&&{extra:d.normalize(T.extra,w,M)}};return T.contexts&&T.contexts.trace&&R.contexts&&(R.contexts.trace=T.contexts.trace,T.contexts.trace.data&&(R.contexts.trace.data=d.normalize(T.contexts.trace.data,w,M))),T.spans&&(R.spans=T.spans.map(O=>({...O,...O.data&&{data:d.normalize(O.data,w,M)}}))),R}s(h,"normalizeEvent");function S(T,w){if(!w)return T;const M=T?T.clone():new l.Scope;return M.update(w),M}s(S,"getFinalScope");function f(T){if(T)return v(T)?{captureContext:T}:_(T)?{captureContext:T}:T}s(f,"parseEventHintOrCaptureContext");function v(T){return T instanceof l.Scope||typeof T=="function"}s(v,"hintIsScopeOrFunction");const E=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function _(T){return Object.keys(T).some(w=>E.includes(w))}s(_,"hintIsScopeContext"),a.applyDebugIds=i,a.applyDebugMeta=o,a.parseEventHintOrCaptureContext=f,a.prepareEvent=n},3433863337:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(639277478);function p(m,g,l=[g],r="npm"){const n=m._metadata||{};n.sdk||(n.sdk={name:`sentry.javascript.${g}`,packages:l.map(e=>({name:`${r}:@sentry/${e}`,version:d.SDK_VERSION})),version:d.SDK_VERSION}),m._metadata=n}s(p,"applySdkMetadata"),a.applySdkMetadata=p},9972015035:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p="_sentrySpan";function m(l,r){r?d.addNonEnumerableProperty(l,p,r):delete l[p]}s(m,"_setSpanForScope");function g(l){return l[p]}s(g,"_getSpanForScope"),a._getSpanForScope=g,a._setSpanForScope=m},5475300505:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(7563271614),p=c(897859094),m=c(2685322190),g=c(8438156026),l=c(1243296801),r=c(2332127203);c(2206474662),c(8844511336);const n=c(9972015035),e=c(1150305139),t=c(9064881818),i=0,o=1;function u(X){const{spanId:ee,traceId:fe}=X.spanContext(),{data:oe,op:Oe,parent_span_id:Xe,status:ge,origin:Me}=_(X);return d.dropUndefinedKeys({parent_span_id:Xe,span_id:ee,trace_id:fe,data:oe,op:Oe,status:ge,origin:Me})}s(u,"spanToTransactionTraceContext");function h(X){const{spanId:ee,traceId:fe}=X.spanContext(),{parent_span_id:oe}=_(X);return d.dropUndefinedKeys({parent_span_id:oe,span_id:ee,trace_id:fe})}s(h,"spanToTraceContext");function S(X){const{traceId:ee,spanId:fe}=X.spanContext(),oe=M(X);return d.generateSentryTraceHeader(ee,fe,oe)}s(S,"spanToTraceHeader");function f(X){const ee=t.getDynamicSamplingContextFromSpan(X);return d.dynamicSamplingContextToSentryBaggageHeader(ee)}s(f,"spanToBaggageHeader");function v(X){return typeof X=="number"?E(X):Array.isArray(X)?X[0]+X[1]/1e9:X instanceof Date?E(X.getTime()):d.timestampInSeconds()}s(v,"spanTimeInputToSeconds");function E(X){return X>9999999999?X/1e3:X}s(E,"ensureTimestampInSeconds");function _(X){if(w(X))return X.getSpanJSON();try{const{spanId:ee,traceId:fe}=X.spanContext();if(T(X)){const{attributes:oe,startTime:Oe,name:Xe,endTime:ge,parentSpanId:Me,status:$e}=X;return d.dropUndefinedKeys({span_id:ee,trace_id:fe,data:oe,description:Xe,parent_span_id:Me,start_timestamp:v(Oe),timestamp:v(ge)||void 0,status:R($e),op:oe[r.SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:oe[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:l.getMetricSummaryJsonForSpan(X)})}return{span_id:ee,trace_id:fe}}catch{return{}}}s(_,"spanToJSON");function T(X){const ee=X;return!!ee.attributes&&!!ee.startTime&&!!ee.name&&!!ee.endTime&&!!ee.status}s(T,"spanIsOpenTelemetrySdkTraceBaseSpan");function w(X){return typeof X.getSpanJSON=="function"}s(w,"spanIsSentrySpan");function M(X){const{traceFlags:ee}=X.spanContext();return ee===o}s(M,"spanIsSampled");function R(X){if(!(!X||X.code===e.SPAN_STATUS_UNSET))return X.code===e.SPAN_STATUS_OK?"ok":X.message||"unknown_error"}s(R,"getStatusMessage");const O="_sentryChildSpans",k="_sentryRootSpan";function A(X,ee){const fe=X[k]||X;d.addNonEnumerableProperty(ee,k,fe),X[O]&&X[O].size<1e3?X[O].add(ee):d.addNonEnumerableProperty(X,O,new Set([ee]))}s(A,"addChildSpanToSpan");function P(X,ee){X[O]&&X[O].delete(ee)}s(P,"removeChildSpanFromSpan");function D(X){const ee=new Set;function fe(oe){if(!ee.has(oe)&&M(oe)){ee.add(oe);const Oe=oe[O]?Array.from(oe[O]):[];for(const Xe of Oe)fe(Xe)}}return s(fe,"addSpanChildren"),fe(X),Array.from(ee)}s(D,"getSpanDescendants");function H(X){return X[k]||X}s(H,"getRootSpan");function j(){const X=m.getMainCarrier(),ee=p.getAsyncContextStrategy(X);return ee.getActiveSpan?ee.getActiveSpan():n._getSpanForScope(g.getCurrentScope())}s(j,"getActiveSpan");function W(X,ee,fe,oe,Oe,Xe){const ge=j();ge&&l.updateMetricSummaryOnSpan(ge,X,ee,fe,oe,Oe,Xe)}s(W,"updateMetricSummaryOnActiveSpan"),a.TRACE_FLAG_NONE=i,a.TRACE_FLAG_SAMPLED=o,a.addChildSpanToSpan=A,a.getActiveSpan=j,a.getRootSpan=H,a.getSpanDescendants=D,a.getStatusMessage=R,a.removeChildSpanFromSpan=P,a.spanIsSampled=M,a.spanTimeInputToSeconds=v,a.spanToBaggageHeader=f,a.spanToJSON=_,a.spanToTraceContext=h,a.spanToTraceHeader=S,a.spanToTransactionTraceContext=u,a.updateMetricSummaryOnActiveSpan=W},639277478:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c="8.2.1";a.SDK_VERSION=c},4916261515:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(5330804994),p=c(9996838991);function m(e,t,i=250,o,u,h,S){if(!h.exception||!h.exception.values||!S||!d.isInstanceOf(S.originalException,Error))return;const f=h.exception.values.length>0?h.exception.values[h.exception.values.length-1]:void 0;f&&(h.exception.values=n(g(e,t,u,S.originalException,o,h.exception.values,f,0),i))}s(m,"applyAggregateErrorsToEvent");function g(e,t,i,o,u,h,S,f){if(h.length>=i+1)return h;let v=[...h];if(d.isInstanceOf(o[u],Error)){l(S,f);const E=e(t,o[u]),_=v.length;r(E,u,_,f),v=g(e,t,i,o[u],u,[E,...v],E,_)}return Array.isArray(o.errors)&&o.errors.forEach((E,_)=>{if(d.isInstanceOf(E,Error)){l(S,f);const T=e(t,E),w=v.length;r(T,`errors[${_}]`,w,f),v=g(e,t,i,E,u,[T,...v],T,w)}}),v}s(g,"aggregateExceptionsFromError");function l(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}s(l,"applyExceptionGroupFieldsForParentException");function r(e,t,i,o){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:i,parent_id:o}}s(r,"applyExceptionGroupFieldsForChildException");function n(e,t){return e.map(i=>(i.value&&(i.value=p.truncate(i.value,t)),i))}s(n,"truncateAggregateExceptions"),a.applyAggregateErrorsToEvent=m},999571021:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6005876151),p=c(5247061117),m=c(9955566551);function g(r,n,e,t){const i=r();let o=!1,u=!0;return setInterval(()=>{const h=i.getTimeMs();o===!1&&h>n+e&&(o=!0,u&&t()),h<n+e&&(o=!1)},20),{poll:()=>{i.reset()},enabled:h=>{u=h}}}s(g,"watchdogTimer");function l(r,n,e){const t=n?n.replace(/^file:\/\//,""):void 0,i=r.location.columnNumber?r.location.columnNumber+1:void 0,o=r.location.lineNumber?r.location.lineNumber+1:void 0;return p.dropUndefinedKeys({filename:t,module:e(t),function:r.functionName||m.UNKNOWN_FUNCTION,colno:i,lineno:o,in_app:t?d.filenameIsInApp(t):void 0})}s(l,"callFrameToStackFrame"),a.callFrameToStackFrame=l,a.watchdogTimer=g},8666696284:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1795624184),p=c(5330804994),m=c(3610150206),g="baggage",l="sentry-",r=/^sentry-/,n=8192;function e(h){const S=i(h);if(!S)return;const f=Object.entries(S).reduce((v,[E,_])=>{if(E.match(r)){const T=E.slice(l.length);v[T]=_}return v},{});if(Object.keys(f).length>0)return f}s(e,"baggageHeaderToDynamicSamplingContext");function t(h){if(!h)return;const S=Object.entries(h).reduce((f,[v,E])=>(E&&(f[`${l}${v}`]=E),f),{});return u(S)}s(t,"dynamicSamplingContextToSentryBaggageHeader");function i(h){if(!(!h||!p.isString(h)&&!Array.isArray(h)))return Array.isArray(h)?h.reduce((S,f)=>{const v=o(f);for(const E of Object.keys(v))S[E]=v[E];return S},{}):o(h)}s(i,"parseBaggageHeader");function o(h){return h.split(",").map(S=>S.split("=").map(f=>decodeURIComponent(f.trim()))).reduce((S,[f,v])=>(S[f]=v,S),{})}s(o,"baggageHeaderToObject");function u(h){if(Object.keys(h).length!==0)return Object.entries(h).reduce((S,[f,v],E)=>{const _=`${encodeURIComponent(f)}=${encodeURIComponent(v)}`,T=E===0?_:`${S},${_}`;return T.length>n?(d.DEBUG_BUILD&&m.logger.warn(`Not adding key: ${f} with val: ${v} to baggage header due to exceeding baggage size limits.`),S):T},"")}s(u,"objectToBaggageHeader"),a.BAGGAGE_HEADER_NAME=g,a.MAX_BAGGAGE_STRING_LENGTH=n,a.SENTRY_BAGGAGE_KEY_PREFIX=l,a.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=r,a.baggageHeaderToDynamicSamplingContext=e,a.dynamicSamplingContextToSentryBaggageHeader=t,a.parseBaggageHeader=i},9550996546:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(5330804994),m=c(1108286465).GLOBAL_OBJ,g=80;function l(i,o={}){if(!i)return"<unknown>";try{let u=i;const h=5,S=[];let f=0,v=0;const E=" > ",_=E.length;let T;const w=Array.isArray(o)?o:o.keyAttrs,M=!Array.isArray(o)&&o.maxStringLength||g;for(;u&&f++<h&&(T=r(u,w),!(T==="html"||f>1&&v+S.length*_+T.length>=M));)S.push(T),v+=T.length,u=u.parentNode;return S.reverse().join(E)}catch{return"<unknown>"}}s(l,"htmlTreeAsString");function r(i,o){const u=i,h=[];let S,f,v,E,_;if(!u||!u.tagName)return"";if(m.HTMLElement&&u instanceof HTMLElement&&u.dataset){if(u.dataset.sentryComponent)return u.dataset.sentryComponent;if(u.dataset.sentryElement)return u.dataset.sentryElement}h.push(u.tagName.toLowerCase());const T=o&&o.length?o.filter(M=>u.getAttribute(M)).map(M=>[M,u.getAttribute(M)]):null;if(T&&T.length)T.forEach(M=>{h.push(`[${M[0]}="${M[1]}"]`)});else if(u.id&&h.push(`#${u.id}`),S=u.className,S&&d.isString(S))for(f=S.split(/\s+/),_=0;_<f.length;_++)h.push(`.${f[_]}`);const w=["aria-label","type","name","title","alt"];for(_=0;_<w.length;_++)v=w[_],E=u.getAttribute(v),E&&h.push(`[${v}="${E}"]`);return h.join("")}s(r,"_htmlElementAsString");function n(){try{return m.document.location.href}catch{return""}}s(n,"getLocationHref");function e(i){return m.document&&m.document.querySelector?m.document.querySelector(i):null}s(e,"getDomElement");function t(i){if(!m.HTMLElement)return null;let o=i;const u=5;for(let h=0;h<u;h++){if(!o)return null;if(o instanceof HTMLElement){if(o.dataset.sentryComponent)return o.dataset.sentryComponent;if(o.dataset.sentryElement)return o.dataset.sentryElement}o=o.parentNode}return null}s(t,"getComponentName"),a.getComponentName=t,a.getDomElement=e,a.getLocationHref=n,a.htmlTreeAsString=l},7961093924:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(9137969200);async function p(m,g){return d._nullishCoalesce(m,g)}s(p,"_asyncNullishCoalesce"),a._asyncNullishCoalesce=p},6639909989:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});async function c(d){let p,m=d[0],g=1;for(;g<d.length;){const l=d[g],r=d[g+1];if(g+=2,(l==="optionalAccess"||l==="optionalCall")&&m==null)return;l==="access"||l==="optionalAccess"?(p=m,m=await r(m)):(l==="call"||l==="optionalCall")&&(m=await r((...n)=>m.call(p,...n)),p=void 0)}return m}s(c,"_asyncOptionalChain"),a._asyncOptionalChain=c},8823822214:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(6639909989);async function p(m){const g=await d._asyncOptionalChain(m);return g??!0}s(p,"_asyncOptionalChainDelete"),a._asyncOptionalChainDelete=p},9137969200:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(d,p){return d??p()}s(c,"_nullishCoalesce"),a._nullishCoalesce=c},3683597617:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(d){let p,m=d[0],g=1;for(;g<d.length;){const l=d[g],r=d[g+1];if(g+=2,(l==="optionalAccess"||l==="optionalCall")&&m==null)return;l==="access"||l==="optionalAccess"?(p=m,m=r(m)):(l==="call"||l==="optionalCall")&&(m=r((...n)=>m.call(p,...n)),p=void 0)}return m}s(c,"_optionalChain"),a._optionalChain=c},2677927218:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(3683597617);function p(m){const g=d._optionalChain(m);return g??!0}s(p,"_optionalChainDelete"),a._optionalChainDelete=p},4308130348:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(d){let p=[],m={};return{add(g,l){for(;p.length>=d;){const r=p.shift();r!==void 0&&delete m[r]}m[g]&&this.delete(g),p.push(g),m[g]=l},clear(){m={},p=[]},get(g){return m[g]},size(){return p.length},delete(g){if(!m[g])return!1;delete m[g];for(let l=0;l<p.length;l++)if(p[l]===g){p.splice(l,1);break}return!0}}}s(c,"makeFifoCache"),a.makeFifoCache=c},738620759:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(688958166),p=c(2174399055);function m(g,l,r){const n=[{type:"client_report"},{timestamp:r||p.dateTimestampInSeconds(),discarded_events:g}];return d.createEnvelope(l?{dsn:l}:{},[n])}s(m,"createClientReportEnvelope"),a.createClientReportEnvelope=m},9687986872:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(d){const p={};let m=0;for(;m<d.length;){const g=d.indexOf("=",m);if(g===-1)break;let l=d.indexOf(";",m);if(l===-1)l=d.length;else if(l<g){m=d.lastIndexOf(";",g-1)+1;continue}const r=d.slice(m,g).trim();if(p[r]===void 0){let n=d.slice(g+1,l).trim();n.charCodeAt(0)===34&&(n=n.slice(1,-1));try{p[r]=n.indexOf("%")!==-1?decodeURIComponent(n):n}catch{p[r]=n}}m=l+1}return p}s(c,"parseCookie"),a.parseCookie=c},1795624184:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;a.DEBUG_BUILD=c},8314282351:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1795624184),p=c(3610150206),m=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function g(i){return i==="http"||i==="https"}s(g,"isValidProtocol");function l(i,o=!1){const{host:u,path:h,pass:S,port:f,projectId:v,protocol:E,publicKey:_}=i;return`${E}://${_}${o&&S?`:${S}`:""}@${u}${f?`:${f}`:""}/${h&&`${h}/`}${v}`}s(l,"dsnToString");function r(i){const o=m.exec(i);if(!o){p.consoleSandbox(()=>{console.error(`Invalid Sentry Dsn: ${i}`)});return}const[u,h,S="",f,v="",E]=o.slice(1);let _="",T=E;const w=T.split("/");if(w.length>1&&(_=w.slice(0,-1).join("/"),T=w.pop()),T){const M=T.match(/^\d+/);M&&(T=M[0])}return n({host:f,pass:S,path:_,projectId:T,port:v,protocol:u,publicKey:h})}s(r,"dsnFromString");function n(i){return{protocol:i.protocol,publicKey:i.publicKey||"",pass:i.pass||"",host:i.host,port:i.port||"",path:i.path||"",projectId:i.projectId}}s(n,"dsnFromComponents");function e(i){if(!d.DEBUG_BUILD)return!0;const{port:o,projectId:u,protocol:h}=i;return["protocol","publicKey","host","projectId"].find(v=>i[v]?!1:(p.logger.error(`Invalid Sentry Dsn: ${v} missing`),!0))?!1:u.match(/^\d+$/)?g(h)?o&&isNaN(parseInt(o,10))?(p.logger.error(`Invalid Sentry Dsn: Invalid port ${o}`),!1):!0:(p.logger.error(`Invalid Sentry Dsn: Invalid protocol ${h}`),!1):(p.logger.error(`Invalid Sentry Dsn: Invalid projectId ${u}`),!1)}s(e,"validateDsn");function t(i){const o=typeof i=="string"?r(i):n(i);if(!(!o||!e(o)))return o}s(t,"makeDsn"),a.dsnFromString=r,a.dsnToString=l,a.makeDsn=t},1390308333:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}s(c,"isBrowserBundle");function d(){return"npm"}s(d,"getSDKSource"),a.getSDKSource=d,a.isBrowserBundle=c},688958166:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8314282351),p=c(6371465633),m=c(5247061117),g=c(1108286465);function l(w,M=[]){return[w,M]}s(l,"createEnvelope");function r(w,M){const[R,O]=w;return[R,[...O,M]]}s(r,"addItemToEnvelope");function n(w,M){const R=w[1];for(const O of R){const k=O[0].type;if(M(O,k))return!0}return!1}s(n,"forEachEnvelopeItem");function e(w,M){return n(w,(R,O)=>M.includes(O))}s(e,"envelopeContainsItemType");function t(w){return g.GLOBAL_OBJ.__SENTRY__&&g.GLOBAL_OBJ.__SENTRY__.encodePolyfill?g.GLOBAL_OBJ.__SENTRY__.encodePolyfill(w):new TextEncoder().encode(w)}s(t,"encodeUTF8");function i(w){return g.GLOBAL_OBJ.__SENTRY__&&g.GLOBAL_OBJ.__SENTRY__.decodePolyfill?g.GLOBAL_OBJ.__SENTRY__.decodePolyfill(w):new TextDecoder().decode(w)}s(i,"decodeUTF8");function o(w){const[M,R]=w;let O=JSON.stringify(M);function k(A){typeof O=="string"?O=typeof A=="string"?O+A:[t(O),A]:O.push(typeof A=="string"?t(A):A)}s(k,"append");for(const A of R){const[P,D]=A;if(k(`
${JSON.stringify(P)}
`),typeof D=="string"||D instanceof Uint8Array)k(D);else{let H;try{H=JSON.stringify(D)}catch{H=JSON.stringify(p.normalize(D))}k(H)}}return typeof O=="string"?O:u(O)}s(o,"serializeEnvelope");function u(w){const M=w.reduce((k,A)=>k+A.length,0),R=new Uint8Array(M);let O=0;for(const k of w)R.set(k,O),O+=k.length;return R}s(u,"concatBuffers");function h(w){let M=typeof w=="string"?t(w):w;function R(P){const D=M.subarray(0,P);return M=M.subarray(P+1),D}s(R,"readBinary");function O(){let P=M.indexOf(10);return P<0&&(P=M.length),JSON.parse(i(R(P)))}s(O,"readJson");const k=O(),A=[];for(;M.length;){const P=O(),D=typeof P.length=="number"?P.length:void 0;A.push([P,D?R(D):O()])}return[k,A]}s(h,"parseEnvelope");function S(w){return[{type:"span"},w]}s(S,"createSpanEnvelopeItem");function f(w){const M=typeof w.data=="string"?t(w.data):w.data;return[m.dropUndefinedKeys({type:"attachment",length:M.length,filename:w.filename,content_type:w.contentType,attachment_type:w.attachmentType}),M]}s(f,"createAttachmentEnvelopeItem");const v={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function E(w){return v[w]}s(E,"envelopeItemTypeToDataCategory");function _(w){if(!w||!w.sdk)return;const{name:M,version:R}=w.sdk;return{name:M,version:R}}s(_,"getSdkMetadataForEnvelopeHeader");function T(w,M,R,O){const k=w.sdkProcessingMetadata&&w.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:w.event_id,sent_at:new Date().toISOString(),...M&&{sdk:M},...!!R&&O&&{dsn:d.dsnToString(O)},...k&&{trace:m.dropUndefinedKeys({...k})}}}s(T,"createEventEnvelopeHeaders"),a.addItemToEnvelope=r,a.createAttachmentEnvelopeItem=f,a.createEnvelope=l,a.createEventEnvelopeHeaders=T,a.createSpanEnvelopeItem=S,a.envelopeContainsItemType=e,a.envelopeItemTypeToDataCategory=E,a.forEachEnvelopeItem=n,a.getSdkMetadataForEnvelopeHeader=_,a.parseEnvelope=h,a.serializeEnvelope=o},4759164024:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});class c extends Error{constructor(p,m="warn"){super(p),this.message=p,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=m}}s(c,"SentryError"),a.SentryError=c},1705974933:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(5330804994),p=c(4360077466),m=c(6371465633),g=c(5247061117);function l(h,S){return h(S.stack||"",1)}s(l,"parseStackFrames");function r(h,S){const f={type:S.name||S.constructor.name,value:S.message},v=l(h,S);return v.length&&(f.stacktrace={frames:v}),f}s(r,"exceptionFromError");function n(h){for(const S in h)if(Object.prototype.hasOwnProperty.call(h,S)){const f=h[S];if(f instanceof Error)return f}}s(n,"getErrorPropertyFromObject");function e(h){if("name"in h&&typeof h.name=="string"){let v=`'${h.name}' captured as exception`;return"message"in h&&typeof h.message=="string"&&(v+=` with message '${h.message}'`),v}else if("message"in h&&typeof h.message=="string")return h.message;const S=g.extractExceptionKeysForMessage(h);if(d.isErrorEvent(h))return`Event \`ErrorEvent\` captured as exception with message \`${h.message}\``;const f=t(h);return`${f&&f!=="Object"?`'${f}'`:"Object"} captured as exception with keys: ${S}`}s(e,"getMessageForObject");function t(h){try{const S=Object.getPrototypeOf(h);return S?S.constructor.name:void 0}catch{}}s(t,"getObjectClassName");function i(h,S,f,v){if(d.isError(f))return[f,void 0];if(S.synthetic=!0,d.isPlainObject(f)){const _=h&&h.getOptions().normalizeDepth,T={__serialized__:m.normalizeToSize(f,_)},w=n(f);if(w)return[w,T];const M=e(f),R=v&&v.syntheticException||new Error(M);return R.message=M,[R,T]}const E=v&&v.syntheticException||new Error(f);return E.message=`${f}`,[E,void 0]}s(i,"getException");function o(h,S,f,v){const _=v&&v.data&&v.data.mechanism||{handled:!0,type:"generic"},[T,w]=i(h,_,f,v),M={exception:{values:[r(S,T)]}};return w&&(M.extra=w),p.addExceptionTypeValue(M,void 0,void 0),p.addExceptionMechanism(M,_),{...M,event_id:v&&v.event_id}}s(o,"eventFromUnknownInput");function u(h,S,f="info",v,E){const _={event_id:v&&v.event_id,level:f};if(E&&v&&v.syntheticException){const T=l(h,v.syntheticException);T.length&&(_.exception={values:[{value:S,stacktrace:{frames:T}}]})}if(d.isParameterizedString(S)){const{__sentry_template_string__:T,__sentry_template_values__:w}=S;return _.logentry={message:T,params:w},_}return _.message=S,_}s(u,"eventFromMessage"),a.eventFromMessage=u,a.eventFromUnknownInput=o,a.exceptionFromError=r,a.parseStackFrames=l},7563271614:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(4916261515),p=c(9550996546),m=c(8314282351),g=c(4759164024),l=c(1108286465),r=c(3619233697),n=c(3178410512),e=c(5878142463),t=c(5817852989),i=c(7839211009),o=c(5330804994),u=c(4304701770),h=c(3610150206),S=c(47787884),f=c(4360077466),v=c(1552363198),E=c(6371465633),_=c(5247061117),T=c(4764604189),w=c(3193811597),M=c(4846555271),R=c(5043703765),O=c(9955566551),k=c(6005876151),A=c(9996838991),P=c(8265793926),D=c(2435760602),H=c(2174399055),j=c(6123212092),W=c(1390308333),X=c(688958166),ee=c(738620759),fe=c(277240735),oe=c(8666696284),Oe=c(7216756807),Xe=c(4308130348),ge=c(1705974933),Me=c(999571021),$e=c(6852308275),ze=c(7961093924),nt=c(6639909989),mt=c(8823822214),gt=c(9137969200),Pe=c(3683597617),xe=c(2677927218),Ye=c(6250807085),Ze=c(7384544743);a.applyAggregateErrorsToEvent=d.applyAggregateErrorsToEvent,a.getComponentName=p.getComponentName,a.getDomElement=p.getDomElement,a.getLocationHref=p.getLocationHref,a.htmlTreeAsString=p.htmlTreeAsString,a.dsnFromString=m.dsnFromString,a.dsnToString=m.dsnToString,a.makeDsn=m.makeDsn,a.SentryError=g.SentryError,a.GLOBAL_OBJ=l.GLOBAL_OBJ,a.getGlobalSingleton=l.getGlobalSingleton,a.addConsoleInstrumentationHandler=r.addConsoleInstrumentationHandler,a.addFetchInstrumentationHandler=n.addFetchInstrumentationHandler,a.addGlobalErrorInstrumentationHandler=e.addGlobalErrorInstrumentationHandler,a.addGlobalUnhandledRejectionInstrumentationHandler=t.addGlobalUnhandledRejectionInstrumentationHandler,a.addHandler=i.addHandler,a.maybeInstrument=i.maybeInstrument,a.resetInstrumentationHandlers=i.resetInstrumentationHandlers,a.triggerHandlers=i.triggerHandlers,a.isDOMError=o.isDOMError,a.isDOMException=o.isDOMException,a.isElement=o.isElement,a.isError=o.isError,a.isErrorEvent=o.isErrorEvent,a.isEvent=o.isEvent,a.isInstanceOf=o.isInstanceOf,a.isParameterizedString=o.isParameterizedString,a.isPlainObject=o.isPlainObject,a.isPrimitive=o.isPrimitive,a.isRegExp=o.isRegExp,a.isString=o.isString,a.isSyntheticEvent=o.isSyntheticEvent,a.isThenable=o.isThenable,a.isVueViewModel=o.isVueViewModel,a.isBrowser=u.isBrowser,a.CONSOLE_LEVELS=h.CONSOLE_LEVELS,a.consoleSandbox=h.consoleSandbox,a.logger=h.logger,a.originalConsoleMethods=h.originalConsoleMethods,a.memoBuilder=S.memoBuilder,a.addContextToFrame=f.addContextToFrame,a.addExceptionMechanism=f.addExceptionMechanism,a.addExceptionTypeValue=f.addExceptionTypeValue,a.arrayify=f.arrayify,a.checkOrSetAlreadyCaught=f.checkOrSetAlreadyCaught,a.getEventDescription=f.getEventDescription,a.parseSemver=f.parseSemver,a.uuid4=f.uuid4,a.dynamicRequire=v.dynamicRequire,a.isNodeEnv=v.isNodeEnv,a.loadModule=v.loadModule,a.normalize=E.normalize,a.normalizeToSize=E.normalizeToSize,a.normalizeUrlToBase=E.normalizeUrlToBase,a.addNonEnumerableProperty=_.addNonEnumerableProperty,a.convertToPlainObject=_.convertToPlainObject,a.dropUndefinedKeys=_.dropUndefinedKeys,a.extractExceptionKeysForMessage=_.extractExceptionKeysForMessage,a.fill=_.fill,a.getOriginalFunction=_.getOriginalFunction,a.markFunctionWrapped=_.markFunctionWrapped,a.objectify=_.objectify,a.urlEncode=_.urlEncode,a.basename=T.basename,a.dirname=T.dirname,a.isAbsolute=T.isAbsolute,a.join=T.join,a.normalizePath=T.normalizePath,a.relative=T.relative,a.resolve=T.resolve,a.makePromiseBuffer=w.makePromiseBuffer,a.DEFAULT_USER_INCLUDES=M.DEFAULT_USER_INCLUDES,a.addRequestDataToEvent=M.addRequestDataToEvent,a.extractPathForTransaction=M.extractPathForTransaction,a.extractRequestData=M.extractRequestData,a.winterCGHeadersToDict=M.winterCGHeadersToDict,a.winterCGRequestToRequestData=M.winterCGRequestToRequestData,a.severityLevelFromString=R.severityLevelFromString,a.validSeverityLevels=R.validSeverityLevels,a.UNKNOWN_FUNCTION=O.UNKNOWN_FUNCTION,a.createStackParser=O.createStackParser,a.getFunctionName=O.getFunctionName,a.stackParserFromStackParserOptions=O.stackParserFromStackParserOptions,a.stripSentryFramesAndReverse=O.stripSentryFramesAndReverse,a.filenameIsInApp=k.filenameIsInApp,a.node=k.node,a.nodeStackLineParser=k.nodeStackLineParser,a.isMatchingPattern=A.isMatchingPattern,a.safeJoin=A.safeJoin,a.snipLine=A.snipLine,a.stringMatchesSomePattern=A.stringMatchesSomePattern,a.truncate=A.truncate,a.isNativeFetch=P.isNativeFetch,a.supportsDOMError=P.supportsDOMError,a.supportsDOMException=P.supportsDOMException,a.supportsErrorEvent=P.supportsErrorEvent,a.supportsFetch=P.supportsFetch,a.supportsNativeFetch=P.supportsNativeFetch,a.supportsReferrerPolicy=P.supportsReferrerPolicy,a.supportsReportingObserver=P.supportsReportingObserver,a.SyncPromise=D.SyncPromise,a.rejectedSyncPromise=D.rejectedSyncPromise,a.resolvedSyncPromise=D.resolvedSyncPromise,Object.defineProperty(a,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>H._browserPerformanceTimeOriginMode}),a.browserPerformanceTimeOrigin=H.browserPerformanceTimeOrigin,a.dateTimestampInSeconds=H.dateTimestampInSeconds,a.timestampInSeconds=H.timestampInSeconds,a.TRACEPARENT_REGEXP=j.TRACEPARENT_REGEXP,a.extractTraceparentData=j.extractTraceparentData,a.generateSentryTraceHeader=j.generateSentryTraceHeader,a.propagationContextFromHeaders=j.propagationContextFromHeaders,a.getSDKSource=W.getSDKSource,a.isBrowserBundle=W.isBrowserBundle,a.addItemToEnvelope=X.addItemToEnvelope,a.createAttachmentEnvelopeItem=X.createAttachmentEnvelopeItem,a.createEnvelope=X.createEnvelope,a.createEventEnvelopeHeaders=X.createEventEnvelopeHeaders,a.createSpanEnvelopeItem=X.createSpanEnvelopeItem,a.envelopeContainsItemType=X.envelopeContainsItemType,a.envelopeItemTypeToDataCategory=X.envelopeItemTypeToDataCategory,a.forEachEnvelopeItem=X.forEachEnvelopeItem,a.getSdkMetadataForEnvelopeHeader=X.getSdkMetadataForEnvelopeHeader,a.parseEnvelope=X.parseEnvelope,a.serializeEnvelope=X.serializeEnvelope,a.createClientReportEnvelope=ee.createClientReportEnvelope,a.DEFAULT_RETRY_AFTER=fe.DEFAULT_RETRY_AFTER,a.disabledUntil=fe.disabledUntil,a.isRateLimited=fe.isRateLimited,a.parseRetryAfterHeader=fe.parseRetryAfterHeader,a.updateRateLimits=fe.updateRateLimits,a.BAGGAGE_HEADER_NAME=oe.BAGGAGE_HEADER_NAME,a.MAX_BAGGAGE_STRING_LENGTH=oe.MAX_BAGGAGE_STRING_LENGTH,a.SENTRY_BAGGAGE_KEY_PREFIX=oe.SENTRY_BAGGAGE_KEY_PREFIX,a.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=oe.SENTRY_BAGGAGE_KEY_PREFIX_REGEX,a.baggageHeaderToDynamicSamplingContext=oe.baggageHeaderToDynamicSamplingContext,a.dynamicSamplingContextToSentryBaggageHeader=oe.dynamicSamplingContextToSentryBaggageHeader,a.parseBaggageHeader=oe.parseBaggageHeader,a.getNumberOfUrlSegments=Oe.getNumberOfUrlSegments,a.getSanitizedUrlString=Oe.getSanitizedUrlString,a.parseUrl=Oe.parseUrl,a.stripUrlQueryAndFragment=Oe.stripUrlQueryAndFragment,a.makeFifoCache=Xe.makeFifoCache,a.eventFromMessage=ge.eventFromMessage,a.eventFromUnknownInput=ge.eventFromUnknownInput,a.exceptionFromError=ge.exceptionFromError,a.parseStackFrames=ge.parseStackFrames,a.callFrameToStackFrame=Me.callFrameToStackFrame,a.watchdogTimer=Me.watchdogTimer,a.LRUMap=$e.LRUMap,a._asyncNullishCoalesce=ze._asyncNullishCoalesce,a._asyncOptionalChain=nt._asyncOptionalChain,a._asyncOptionalChainDelete=mt._asyncOptionalChainDelete,a._nullishCoalesce=gt._nullishCoalesce,a._optionalChain=Pe._optionalChain,a._optionalChainDelete=xe._optionalChainDelete,a.escapeStringForRegex=Ye.escapeStringForRegex,a.supportsHistory=Ze.supportsHistory},3619233697:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(3610150206),p=c(5247061117),m=c(1108286465),g=c(7839211009);function l(n){const e="console";g.addHandler(e,n),g.maybeInstrument(e,r)}s(l,"addConsoleInstrumentationHandler");function r(){"console"in m.GLOBAL_OBJ&&d.CONSOLE_LEVELS.forEach(function(n){n in m.GLOBAL_OBJ.console&&p.fill(m.GLOBAL_OBJ.console,n,function(e){return d.originalConsoleMethods[n]=e,function(...t){const i={args:t,level:n};g.triggerHandlers("console",i);const o=d.originalConsoleMethods[n];o&&o.apply(m.GLOBAL_OBJ.console,t)}})})}s(r,"instrumentConsole"),a.addConsoleInstrumentationHandler=l},3178410512:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(5247061117),p=c(8265793926),m=c(2174399055),g=c(1108286465),l=c(7839211009);function r(o){const u="fetch";l.addHandler(u,o),l.maybeInstrument(u,n)}s(r,"addFetchInstrumentationHandler");function n(){p.supportsNativeFetch()&&d.fill(g.GLOBAL_OBJ,"fetch",function(o){return function(...u){const{method:h,url:S}=i(u),f={args:u,fetchData:{method:h,url:S},startTimestamp:m.timestampInSeconds()*1e3};return l.triggerHandlers("fetch",{...f}),o.apply(g.GLOBAL_OBJ,u).then(v=>{const E={...f,endTimestamp:m.timestampInSeconds()*1e3,response:v};return l.triggerHandlers("fetch",E),v},v=>{const E={...f,endTimestamp:m.timestampInSeconds()*1e3,error:v};throw l.triggerHandlers("fetch",E),v})}})}s(n,"instrumentFetch");function e(o,u){return!!o&&typeof o=="object"&&!!o[u]}s(e,"hasProp");function t(o){return typeof o=="string"?o:o?e(o,"url")?o.url:o.toString?o.toString():"":""}s(t,"getUrlFromResource");function i(o){if(o.length===0)return{method:"GET",url:""};if(o.length===2){const[h,S]=o;return{url:t(h),method:e(S,"method")?String(S.method).toUpperCase():"GET"}}const u=o[0];return{url:t(u),method:e(u,"method")?String(u.method).toUpperCase():"GET"}}s(i,"parseFetchArgs"),a.addFetchInstrumentationHandler=r,a.parseFetchArgs=i},5878142463:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1108286465),p=c(7839211009);let m=null;function g(r){const n="error";p.addHandler(n,r),p.maybeInstrument(n,l)}s(g,"addGlobalErrorInstrumentationHandler");function l(){m=d.GLOBAL_OBJ.onerror,d.GLOBAL_OBJ.onerror=function(r,n,e,t,i){const o={column:t,error:i,line:e,msg:r,url:n};return p.triggerHandlers("error",o),m&&!m.__SENTRY_LOADER__?m.apply(this,arguments):!1},d.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}s(l,"instrumentError"),a.addGlobalErrorInstrumentationHandler=g},5817852989:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1108286465),p=c(7839211009);let m=null;function g(r){const n="unhandledrejection";p.addHandler(n,r),p.maybeInstrument(n,l)}s(g,"addGlobalUnhandledRejectionInstrumentationHandler");function l(){m=d.GLOBAL_OBJ.onunhandledrejection,d.GLOBAL_OBJ.onunhandledrejection=function(r){const n=r;return p.triggerHandlers("unhandledrejection",n),m&&!m.__SENTRY_LOADER__?m.apply(this,arguments):!0},d.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}s(l,"instrumentUnhandledRejection"),a.addGlobalUnhandledRejectionInstrumentationHandler=g},7839211009:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1795624184),p=c(3610150206),m=c(9955566551),g={},l={};function r(i,o){g[i]=g[i]||[],g[i].push(o)}s(r,"addHandler");function n(){Object.keys(g).forEach(i=>{g[i]=void 0})}s(n,"resetInstrumentationHandlers");function e(i,o){l[i]||(o(),l[i]=!0)}s(e,"maybeInstrument");function t(i,o){const u=i&&g[i];if(u)for(const h of u)try{h(o)}catch(S){d.DEBUG_BUILD&&p.logger.error(`Error while triggering instrumentation handler.
Type: ${i}
Name: ${m.getFunctionName(h)}
Error:`,S)}}s(t,"triggerHandlers"),a.addHandler=r,a.maybeInstrument=e,a.resetInstrumentationHandlers=n,a.triggerHandlers=t},5330804994:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=Object.prototype.toString;function d(E){switch(c.call(E)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return f(E,Error)}}s(d,"isError");function p(E,_){return c.call(E)===`[object ${_}]`}s(p,"isBuiltin");function m(E){return p(E,"ErrorEvent")}s(m,"isErrorEvent");function g(E){return p(E,"DOMError")}s(g,"isDOMError");function l(E){return p(E,"DOMException")}s(l,"isDOMException");function r(E){return p(E,"String")}s(r,"isString");function n(E){return typeof E=="object"&&E!==null&&"__sentry_template_string__"in E&&"__sentry_template_values__"in E}s(n,"isParameterizedString");function e(E){return E===null||n(E)||typeof E!="object"&&typeof E!="function"}s(e,"isPrimitive");function t(E){return p(E,"Object")}s(t,"isPlainObject");function i(E){return typeof Event<"u"&&f(E,Event)}s(i,"isEvent");function o(E){return typeof Element<"u"&&f(E,Element)}s(o,"isElement");function u(E){return p(E,"RegExp")}s(u,"isRegExp");function h(E){return Boolean(E&&E.then&&typeof E.then=="function")}s(h,"isThenable");function S(E){return t(E)&&"nativeEvent"in E&&"preventDefault"in E&&"stopPropagation"in E}s(S,"isSyntheticEvent");function f(E,_){try{return E instanceof _}catch{return!1}}s(f,"isInstanceOf");function v(E){return!!(typeof E=="object"&&E!==null&&(E.__isVue||E._isVue))}s(v,"isVueViewModel"),a.isDOMError=g,a.isDOMException=l,a.isElement=o,a.isError=d,a.isErrorEvent=m,a.isEvent=i,a.isInstanceOf=f,a.isParameterizedString=n,a.isPlainObject=t,a.isPrimitive=e,a.isRegExp=u,a.isString=r,a.isSyntheticEvent=S,a.isThenable=h,a.isVueViewModel=v},4304701770:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1552363198),p=c(1108286465);function m(){return typeof window<"u"&&(!d.isNodeEnv()||g())}s(m,"isBrowser");function g(){return p.GLOBAL_OBJ.process!==void 0&&p.GLOBAL_OBJ.process.type==="renderer"}s(g,"isElectronNodeRenderer"),a.isBrowser=m},3610150206:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1795624184),p=c(1108286465),m="Sentry Logger ",g=["debug","info","warn","error","log","assert","trace"],l={};function r(t){if(!("console"in p.GLOBAL_OBJ))return t();const i=p.GLOBAL_OBJ.console,o={},u=Object.keys(l);u.forEach(h=>{const S=l[h];o[h]=i[h],i[h]=S});try{return t()}finally{u.forEach(h=>{i[h]=o[h]})}}s(r,"consoleSandbox");function n(){let t=!1;const i={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return d.DEBUG_BUILD?g.forEach(o=>{i[o]=(...u)=>{t&&r(()=>{p.GLOBAL_OBJ.console[o](`${m}[${o}]:`,...u)})}}):g.forEach(o=>{i[o]=()=>{}}),i}s(n,"makeLogger");const e=n();a.CONSOLE_LEVELS=g,a.consoleSandbox=r,a.logger=e,a.originalConsoleMethods=l},6852308275:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});class c{constructor(p){this._maxSize=p,this._cache=new Map}get size(){return this._cache.size}get(p){const m=this._cache.get(p);if(m!==void 0)return this._cache.delete(p),this._cache.set(p,m),m}set(p,m){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(p,m)}remove(p){const m=this._cache.get(p);return m&&this._cache.delete(p),m}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const p=[];return this._cache.forEach(m=>p.push(m)),p}}s(c,"LRUMap"),a.LRUMap=c},47787884:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(){const d=typeof WeakSet=="function",p=d?new WeakSet:[];function m(l){if(d)return p.has(l)?!0:(p.add(l),!1);for(let r=0;r<p.length;r++)if(p[r]===l)return!0;return p.push(l),!1}s(m,"memoize");function g(l){if(d)p.delete(l);else for(let r=0;r<p.length;r++)if(p[r]===l){p.splice(r,1);break}}return s(g,"unmemoize"),[m,g]}s(c,"memoBuilder"),a.memoBuilder=c},4360077466:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(5247061117),p=c(9996838991),m=c(1108286465);function g(){const S=m.GLOBAL_OBJ,f=S.crypto||S.msCrypto;let v=s(()=>Math.random()*16,"getRandomByte");try{if(f&&f.randomUUID)return f.randomUUID().replace(/-/g,"");f&&f.getRandomValues&&(v=s(()=>{const E=new Uint8Array(1);return f.getRandomValues(E),E[0]},"getRandomByte"))}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,E=>(E^(v()&15)>>E/4).toString(16))}s(g,"uuid4");function l(S){return S.exception&&S.exception.values?S.exception.values[0]:void 0}s(l,"getFirstException");function r(S){const{message:f,event_id:v}=S;if(f)return f;const E=l(S);return E?E.type&&E.value?`${E.type}: ${E.value}`:E.type||E.value||v||"<unknown>":v||"<unknown>"}s(r,"getEventDescription");function n(S,f,v){const E=S.exception=S.exception||{},_=E.values=E.values||[],T=_[0]=_[0]||{};T.value||(T.value=f||""),T.type||(T.type=v||"Error")}s(n,"addExceptionTypeValue");function e(S,f){const v=l(S);if(!v)return;const E={type:"generic",handled:!0},_=v.mechanism;if(v.mechanism={...E,..._,...f},f&&"data"in f){const T={..._&&_.data,...f.data};v.mechanism.data=T}}s(e,"addExceptionMechanism");const t=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function i(S){const f=S.match(t)||[],v=parseInt(f[1],10),E=parseInt(f[2],10),_=parseInt(f[3],10);return{buildmetadata:f[5],major:isNaN(v)?void 0:v,minor:isNaN(E)?void 0:E,patch:isNaN(_)?void 0:_,prerelease:f[4]}}s(i,"parseSemver");function o(S,f,v=5){if(f.lineno===void 0)return;const E=S.length,_=Math.max(Math.min(E-1,f.lineno-1),0);f.pre_context=S.slice(Math.max(0,_-v),_).map(T=>p.snipLine(T,0)),f.context_line=p.snipLine(S[Math.min(E-1,_)],f.colno||0),f.post_context=S.slice(Math.min(_+1,E),_+1+v).map(T=>p.snipLine(T,0))}s(o,"addContextToFrame");function u(S){if(S&&S.__sentry_captured__)return!0;try{d.addNonEnumerableProperty(S,"__sentry_captured__",!0)}catch{}return!1}s(u,"checkOrSetAlreadyCaught");function h(S){return Array.isArray(S)?S:[S]}s(h,"arrayify"),a.addContextToFrame=o,a.addExceptionMechanism=e,a.addExceptionTypeValue=n,a.arrayify=h,a.checkOrSetAlreadyCaught=u,a.getEventDescription=r,a.parseSemver=i,a.uuid4=g},6005876151:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(9955566551);function p(l,r=!1){return!(r||l&&!l.startsWith("/")&&!l.match(/^[A-Z]:/)&&!l.startsWith(".")&&!l.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&l!==void 0&&!l.includes("node_modules/")}s(p,"filenameIsInApp");function m(l){const r=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return e=>{const t=e.match(n);if(t){let i,o,u,h,S;if(t[1]){u=t[1];let E=u.lastIndexOf(".");if(u[E-1]==="."&&E--,E>0){i=u.slice(0,E),o=u.slice(E+1);const _=i.indexOf(".Module");_>0&&(u=u.slice(_+1),i=i.slice(0,_))}h=void 0}o&&(h=i,S=o),o==="<anonymous>"&&(S=void 0,u=void 0),u===void 0&&(S=S||d.UNKNOWN_FUNCTION,u=h?`${h}.${S}`:S);let f=t[2]&&t[2].startsWith("file://")?t[2].slice(7):t[2];const v=t[5]==="native";return f&&f.match(/\/[A-Z]:/)&&(f=f.slice(1)),!f&&t[5]&&!v&&(f=t[5]),{filename:f,module:l?l(f):void 0,function:u,lineno:parseInt(t[3],10)||void 0,colno:parseInt(t[4],10)||void 0,in_app:p(f,v)}}if(e.match(r))return{filename:e}}}s(m,"node");function g(l){return[90,m(l)]}s(g,"nodeStackLineParser"),a.filenameIsInApp=p,a.node=m,a.nodeStackLineParser=g},1552363198:(F,a,c)=>{F=c.nmd(F),Object.defineProperty(a,"__esModule",{value:!0});const d=c(1390308333);function p(){return!d.isBrowserBundle()&&Object.prototype.toString.call(0)==="[object process]"}s(p,"isNodeEnv");function m(l,r){return l.require(r)}s(m,"dynamicRequire");function g(l){let r;try{r=m(F,l)}catch{}try{const{cwd:n}=m(F,"process");r=m(F,`${n()}/node_modules/${l}`)}catch{}return r}s(g,"loadModule"),a.dynamicRequire=m,a.isNodeEnv=p,a.loadModule=g},6371465633:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(5330804994),p=c(47787884),m=c(5247061117),g=c(9955566551);function l(h,S=100,f=1/0){try{return n("",h,S,f)}catch(v){return{ERROR:`**non-serializable** (${v})`}}}s(l,"normalize");function r(h,S=3,f=100*1024){const v=l(h,S);return o(v)>f?r(h,S-1,f):v}s(r,"normalizeToSize");function n(h,S,f=1/0,v=1/0,E=p.memoBuilder()){const[_,T]=E;if(S==null||["number","boolean","string"].includes(typeof S)&&!Number.isNaN(S))return S;const w=e(h,S);if(!w.startsWith("[object "))return w;if(S.__sentry_skip_normalization__)return S;const M=typeof S.__sentry_override_normalization_depth__=="number"?S.__sentry_override_normalization_depth__:f;if(M===0)return w.replace("object ","");if(_(S))return"[Circular ~]";const R=S;if(R&&typeof R.toJSON=="function")try{const P=R.toJSON();return n("",P,M-1,v,E)}catch{}const O=Array.isArray(S)?[]:{};let k=0;const A=m.convertToPlainObject(S);for(const P in A){if(!Object.prototype.hasOwnProperty.call(A,P))continue;if(k>=v){O[P]="[MaxProperties ~]";break}const D=A[P];O[P]=n(P,D,M-1,v,E),k++}return T(S),O}s(n,"visit");function e(h,S){try{if(h==="domain"&&S&&typeof S=="object"&&S._events)return"[Domain]";if(h==="domainEmitter")return"[DomainEmitter]";if(typeof c.g<"u"&&S===c.g)return"[Global]";if(typeof window<"u"&&S===window)return"[Window]";if(typeof document<"u"&&S===document)return"[Document]";if(d.isVueViewModel(S))return"[VueViewModel]";if(d.isSyntheticEvent(S))return"[SyntheticEvent]";if(typeof S=="number"&&S!==S)return"[NaN]";if(typeof S=="function")return`[Function: ${g.getFunctionName(S)}]`;if(typeof S=="symbol")return`[${String(S)}]`;if(typeof S=="bigint")return`[BigInt: ${String(S)}]`;const f=t(S);return/^HTML(\w*)Element$/.test(f)?`[HTMLElement: ${f}]`:`[object ${f}]`}catch(f){return`**non-serializable** (${f})`}}s(e,"stringifyValue");function t(h){const S=Object.getPrototypeOf(h);return S?S.constructor.name:"null prototype"}s(t,"getConstructorName");function i(h){return~-encodeURI(h).split(/%..|./).length}s(i,"utf8Length");function o(h){return i(JSON.stringify(h))}s(o,"jsonSize");function u(h,S){const f=S.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let v=h;try{v=decodeURI(h)}catch{}return v.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${f}/*`,"ig"),"app:///")}s(u,"normalizeUrlToBase"),a.normalize=l,a.normalizeToSize=r,a.normalizeUrlToBase=u},5247061117:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(9550996546),p=c(1795624184),m=c(5330804994),g=c(3610150206),l=c(9996838991);function r(T,w,M){if(!(w in T))return;const R=T[w],O=M(R);typeof O=="function"&&e(O,R),T[w]=O}s(r,"fill");function n(T,w,M){try{Object.defineProperty(T,w,{value:M,writable:!0,configurable:!0})}catch{p.DEBUG_BUILD&&g.logger.log(`Failed to add non-enumerable property "${w}" to object`,T)}}s(n,"addNonEnumerableProperty");function e(T,w){try{const M=w.prototype||{};T.prototype=w.prototype=M,n(T,"__sentry_original__",w)}catch{}}s(e,"markFunctionWrapped");function t(T){return T.__sentry_original__}s(t,"getOriginalFunction");function i(T){return Object.keys(T).map(w=>`${encodeURIComponent(w)}=${encodeURIComponent(T[w])}`).join("&")}s(i,"urlEncode");function o(T){if(m.isError(T))return{message:T.message,name:T.name,stack:T.stack,...h(T)};if(m.isEvent(T)){const w={type:T.type,target:u(T.target),currentTarget:u(T.currentTarget),...h(T)};return typeof CustomEvent<"u"&&m.isInstanceOf(T,CustomEvent)&&(w.detail=T.detail),w}else return T}s(o,"convertToPlainObject");function u(T){try{return m.isElement(T)?d.htmlTreeAsString(T):Object.prototype.toString.call(T)}catch{return"<unknown>"}}s(u,"serializeEventTarget");function h(T){if(typeof T=="object"&&T!==null){const w={};for(const M in T)Object.prototype.hasOwnProperty.call(T,M)&&(w[M]=T[M]);return w}else return{}}s(h,"getOwnProperties");function S(T,w=40){const M=Object.keys(o(T));if(M.sort(),!M.length)return"[object has no keys]";if(M[0].length>=w)return l.truncate(M[0],w);for(let R=M.length;R>0;R--){const O=M.slice(0,R).join(", ");if(!(O.length>w))return R===M.length?O:l.truncate(O,w)}return""}s(S,"extractExceptionKeysForMessage");function f(T){return v(T,new Map)}s(f,"dropUndefinedKeys");function v(T,w){if(E(T)){const M=w.get(T);if(M!==void 0)return M;const R={};w.set(T,R);for(const O of Object.keys(T))typeof T[O]<"u"&&(R[O]=v(T[O],w));return R}if(Array.isArray(T)){const M=w.get(T);if(M!==void 0)return M;const R=[];return w.set(T,R),T.forEach(O=>{R.push(v(O,w))}),R}return T}s(v,"_dropUndefinedKeys");function E(T){if(!m.isPlainObject(T))return!1;try{const w=Object.getPrototypeOf(T).constructor.name;return!w||w==="Object"}catch{return!0}}s(E,"isPojo");function _(T){let w;switch(!0){case T==null:w=new String(T);break;case(typeof T=="symbol"||typeof T=="bigint"):w=Object(T);break;case m.isPrimitive(T):w=new T.constructor(T);break;default:w=T;break}return w}s(_,"objectify"),a.addNonEnumerableProperty=n,a.convertToPlainObject=o,a.dropUndefinedKeys=f,a.extractExceptionKeysForMessage=S,a.fill=r,a.getOriginalFunction=t,a.markFunctionWrapped=e,a.objectify=_,a.urlEncode=i},4764604189:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(o,u){let h=0;for(let S=o.length-1;S>=0;S--){const f=o[S];f==="."?o.splice(S,1):f===".."?(o.splice(S,1),h++):h&&(o.splice(S,1),h--)}if(u)for(;h--;h)o.unshift("..");return o}s(c,"normalizeArray");const d=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function p(o){const u=o.length>1024?`<truncated>${o.slice(-1024)}`:o,h=d.exec(u);return h?h.slice(1):[]}s(p,"splitPath");function m(...o){let u="",h=!1;for(let S=o.length-1;S>=-1&&!h;S--){const f=S>=0?o[S]:"/";f&&(u=`${f}/${u}`,h=f.charAt(0)==="/")}return u=c(u.split("/").filter(S=>!!S),!h).join("/"),(h?"/":"")+u||"."}s(m,"resolve");function g(o){let u=0;for(;u<o.length&&o[u]==="";u++);let h=o.length-1;for(;h>=0&&o[h]==="";h--);return u>h?[]:o.slice(u,h-u+1)}s(g,"trim");function l(o,u){o=m(o).slice(1),u=m(u).slice(1);const h=g(o.split("/")),S=g(u.split("/")),f=Math.min(h.length,S.length);let v=f;for(let _=0;_<f;_++)if(h[_]!==S[_]){v=_;break}let E=[];for(let _=v;_<h.length;_++)E.push("..");return E=E.concat(S.slice(v)),E.join("/")}s(l,"relative");function r(o){const u=n(o),h=o.slice(-1)==="/";let S=c(o.split("/").filter(f=>!!f),!u).join("/");return!S&&!u&&(S="."),S&&h&&(S+="/"),(u?"/":"")+S}s(r,"normalizePath");function n(o){return o.charAt(0)==="/"}s(n,"isAbsolute");function e(...o){return r(o.join("/"))}s(e,"join");function t(o){const u=p(o),h=u[0];let S=u[1];return!h&&!S?".":(S&&(S=S.slice(0,S.length-1)),h+S)}s(t,"dirname");function i(o,u){let h=p(o)[2];return u&&h.slice(u.length*-1)===u&&(h=h.slice(0,h.length-u.length)),h}s(i,"basename"),a.basename=i,a.dirname=t,a.isAbsolute=n,a.join=e,a.normalizePath=r,a.relative=l,a.resolve=m},3193811597:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(4759164024),p=c(2435760602);function m(g){const l=[];function r(){return g===void 0||l.length<g}s(r,"isReady");function n(i){return l.splice(l.indexOf(i),1)[0]}s(n,"remove");function e(i){if(!r())return p.rejectedSyncPromise(new d.SentryError("Not adding Promise because buffer limit was reached."));const o=i();return l.indexOf(o)===-1&&l.push(o),o.then(()=>n(o)).then(null,()=>n(o).then(null,()=>{})),o}s(e,"add");function t(i){return new p.SyncPromise((o,u)=>{let h=l.length;if(!h)return o(!0);const S=setTimeout(()=>{i&&i>0&&o(!1)},i);l.forEach(f=>{p.resolvedSyncPromise(f).then(()=>{--h||(clearTimeout(S),o(!0))},u)})})}return s(t,"drain"),{$:l,add:e,drain:t}}s(m,"makePromiseBuffer"),a.makePromiseBuffer=m},277240735:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=60*1e3;function d(l,r=Date.now()){const n=parseInt(`${l}`,10);if(!isNaN(n))return n*1e3;const e=Date.parse(`${l}`);return isNaN(e)?c:e-r}s(d,"parseRetryAfterHeader");function p(l,r){return l[r]||l.all||0}s(p,"disabledUntil");function m(l,r,n=Date.now()){return p(l,r)>n}s(m,"isRateLimited");function g(l,{statusCode:r,headers:n},e=Date.now()){const t={...l},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const u of i.trim().split(",")){const[h,S,,,f]=u.split(":",5),v=parseInt(h,10),E=(isNaN(v)?60:v)*1e3;if(!S)t.all=e+E;else for(const _ of S.split(";"))_==="metric_bucket"?(!f||f.split(";").includes("custom"))&&(t[_]=e+E):t[_]=e+E}else o?t.all=e+d(o,e):r===429&&(t.all=e+60*1e3);return t}s(g,"updateRateLimits"),a.DEFAULT_RETRY_AFTER=c,a.disabledUntil=p,a.isRateLimited=m,a.parseRetryAfterHeader=d,a.updateRateLimits=g},4846555271:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(9687986872),p=c(1795624184),m=c(5330804994),g=c(3610150206),l=c(6371465633),r=c(7216756807),n={ip:!1,request:!0,transaction:!0,user:!0},e=["cookies","data","headers","method","query_string","url"],t=["id","username","email"];function i(_,T={}){const w=_.method&&_.method.toUpperCase();let M="",R="url";T.customRoute||_.route?(M=T.customRoute||`${_.baseUrl||""}${_.route&&_.route.path}`,R="route"):(_.originalUrl||_.url)&&(M=r.stripUrlQueryAndFragment(_.originalUrl||_.url||""));let O="";return T.method&&w&&(O+=w),T.method&&T.path&&(O+=" "),T.path&&M&&(O+=M),[O,R]}s(i,"extractPathForTransaction");function o(_,T){switch(T){case"path":return i(_,{path:!0})[0];case"handler":return _.route&&_.route.stack&&_.route.stack[0]&&_.route.stack[0].name||"<anonymous>";case"methodPath":default:{const w=_._reconstructedRoute?_._reconstructedRoute:void 0;return i(_,{path:!0,method:!0,customRoute:w})[0]}}}s(o,"extractTransaction");function u(_,T){const w={};return(Array.isArray(T)?T:t).forEach(R=>{_&&R in _&&(w[R]=_[R])}),w}s(u,"extractUserData");function h(_,T){const{include:w=e}=T||{},M={},R=_.headers||{},O=_.method,k=R.host||_.hostname||_.host||"<no host>",A=_.protocol==="https"||_.socket&&_.socket.encrypted?"https":"http",P=_.originalUrl||_.url||"",D=P.startsWith(A)?P:`${A}://${k}${P}`;return w.forEach(H=>{switch(H){case"headers":{M.headers=R,w.includes("cookies")||delete M.headers.cookie;break}case"method":{M.method=O;break}case"url":{M.url=D;break}case"cookies":{M.cookies=_.cookies||R.cookie&&d.parseCookie(R.cookie)||{};break}case"query_string":{M.query_string=f(_);break}case"data":{if(O==="GET"||O==="HEAD")break;_.body!==void 0&&(M.data=m.isString(_.body)?_.body:JSON.stringify(l.normalize(_.body)));break}default:({}).hasOwnProperty.call(_,H)&&(M[H]=_[H])}}),M}s(h,"extractRequestData");function S(_,T,w){const M={...n,...w&&w.include};if(M.request){const R=Array.isArray(M.request)?h(T,{include:M.request}):h(T);_.request={..._.request,...R}}if(M.user){const R=T.user&&m.isPlainObject(T.user)?u(T.user,M.user):{};Object.keys(R).length&&(_.user={..._.user,...R})}if(M.ip){const R=T.ip||T.socket&&T.socket.remoteAddress;R&&(_.user={..._.user,ip_address:R})}return M.transaction&&!_.transaction&&_.type==="transaction"&&(_.transaction=o(T,M.transaction)),_}s(S,"addRequestDataToEvent");function f(_){let T=_.originalUrl||_.url||"";if(T){T.startsWith("/")&&(T=`http://dogs.are.great${T}`);try{const w=_.query||new URL(T).search.slice(1);return w.length?w:void 0}catch{return}}}s(f,"extractQueryParams");function v(_){const T={};try{_.forEach((w,M)=>{typeof w=="string"&&(T[M]=w)})}catch{p.DEBUG_BUILD&&g.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return T}s(v,"winterCGHeadersToDict");function E(_){const T=v(_.headers);return{method:_.method,url:_.url,headers:T}}s(E,"winterCGRequestToRequestData"),a.DEFAULT_USER_INCLUDES=t,a.addRequestDataToEvent=S,a.extractPathForTransaction=i,a.extractRequestData=h,a.winterCGHeadersToDict=v,a.winterCGRequestToRequestData=E},5043703765:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=["fatal","error","warning","log","info","debug"];function d(p){return p==="warn"?"warning":c.includes(p)?p:"log"}s(d,"severityLevelFromString"),a.severityLevelFromString=d,a.validSeverityLevels=c},9955566551:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=50,d="?",p=/\(error: (.*)\)/,m=/captureMessage|captureException/;function g(...t){const i=t.sort((o,u)=>o[0]-u[0]).map(o=>o[1]);return(o,u=0,h=0)=>{const S=[],f=o.split(`
`);for(let v=u;v<f.length;v++){const E=f[v];if(E.length>1024)continue;const _=p.test(E)?E.replace(p,"$1"):E;if(!_.match(/\S*Error: /)){for(const T of i){const w=T(_);if(w){S.push(w);break}}if(S.length>=c+h)break}}return r(S.slice(h))}}s(g,"createStackParser");function l(t){return Array.isArray(t)?g(...t):t}s(l,"stackParserFromStackParserOptions");function r(t){if(!t.length)return[];const i=Array.from(t);return/sentryWrapped/.test(i[i.length-1].function||"")&&i.pop(),i.reverse(),m.test(i[i.length-1].function||"")&&(i.pop(),m.test(i[i.length-1].function||"")&&i.pop()),i.slice(0,c).map(o=>({...o,filename:o.filename||i[i.length-1].filename,function:o.function||d}))}s(r,"stripSentryFramesAndReverse");const n="<anonymous>";function e(t){try{return!t||typeof t!="function"?n:t.name||n}catch{return n}}s(e,"getFunctionName"),a.UNKNOWN_FUNCTION=d,a.createStackParser=g,a.getFunctionName=e,a.stackParserFromStackParserOptions=l,a.stripSentryFramesAndReverse=r},9996838991:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(5330804994);function p(n,e=0){return typeof n!="string"||e===0||n.length<=e?n:`${n.slice(0,e)}...`}s(p,"truncate");function m(n,e){let t=n;const i=t.length;if(i<=150)return t;e>i&&(e=i);let o=Math.max(e-60,0);o<5&&(o=0);let u=Math.min(o+140,i);return u>i-5&&(u=i),u===i&&(o=Math.max(u-140,0)),t=t.slice(o,u),o>0&&(t=`'{snip} ${t}`),u<i&&(t+=" {snip}"),t}s(m,"snipLine");function g(n,e){if(!Array.isArray(n))return"";const t=[];for(let i=0;i<n.length;i++){const o=n[i];try{d.isVueViewModel(o)?t.push("[VueViewModel]"):t.push(String(o))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}s(g,"safeJoin");function l(n,e,t=!1){return d.isString(n)?d.isRegExp(e)?e.test(n):d.isString(e)?t?n===e:n.includes(e):!1:!1}s(l,"isMatchingPattern");function r(n,e=[],t=!1){return e.some(i=>l(n,i,t))}s(r,"stringMatchesSomePattern"),a.isMatchingPattern=l,a.safeJoin=g,a.snipLine=m,a.stringMatchesSomePattern=r,a.truncate=p},8265793926:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1795624184),p=c(3610150206),g=c(1108286465).GLOBAL_OBJ;function l(){try{return new ErrorEvent(""),!0}catch{return!1}}s(l,"supportsErrorEvent");function r(){try{return new DOMError(""),!0}catch{return!1}}s(r,"supportsDOMError");function n(){try{return new DOMException(""),!0}catch{return!1}}s(n,"supportsDOMException");function e(){if(!("fetch"in g))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}s(e,"supportsFetch");function t(h){return h&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(h.toString())}s(t,"isNativeFetch");function i(){if(typeof EdgeRuntime=="string")return!0;if(!e())return!1;if(t(g.fetch))return!0;let h=!1;const S=g.document;if(S&&typeof S.createElement=="function")try{const f=S.createElement("iframe");f.hidden=!0,S.head.appendChild(f),f.contentWindow&&f.contentWindow.fetch&&(h=t(f.contentWindow.fetch)),S.head.removeChild(f)}catch(f){d.DEBUG_BUILD&&p.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",f)}return h}s(i,"supportsNativeFetch");function o(){return"ReportingObserver"in g}s(o,"supportsReportingObserver");function u(){if(!e())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}s(u,"supportsReferrerPolicy"),a.isNativeFetch=t,a.supportsDOMError=r,a.supportsDOMException=n,a.supportsErrorEvent=l,a.supportsFetch=e,a.supportsNativeFetch=i,a.supportsReferrerPolicy=u,a.supportsReportingObserver=o},2435760602:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(5330804994);var p;(function(r){r[r.PENDING=0]="PENDING";const e=1;r[r.RESOLVED=e]="RESOLVED";const t=2;r[r.REJECTED=t]="REJECTED"})(p||(p={}));function m(r){return new l(n=>{n(r)})}s(m,"resolvedSyncPromise");function g(r){return new l((n,e)=>{e(r)})}s(g,"rejectedSyncPromise");class l{constructor(n){l.prototype.__init.call(this),l.prototype.__init2.call(this),l.prototype.__init3.call(this),l.prototype.__init4.call(this),this._state=p.PENDING,this._handlers=[];try{n(this._resolve,this._reject)}catch(e){this._reject(e)}}then(n,e){return new l((t,i)=>{this._handlers.push([!1,o=>{if(!n)t(o);else try{t(n(o))}catch(u){i(u)}},o=>{if(!e)i(o);else try{t(e(o))}catch(u){i(u)}}]),this._executeHandlers()})}catch(n){return this.then(e=>e,n)}finally(n){return new l((e,t)=>{let i,o;return this.then(u=>{o=!1,i=u,n&&n()},u=>{o=!0,i=u,n&&n()}).then(()=>{if(o){t(i);return}e(i)})})}__init(){this._resolve=n=>{this._setResult(p.RESOLVED,n)}}__init2(){this._reject=n=>{this._setResult(p.REJECTED,n)}}__init3(){this._setResult=(n,e)=>{if(this._state===p.PENDING){if(d.isThenable(e)){e.then(this._resolve,this._reject);return}this._state=n,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===p.PENDING)return;const n=this._handlers.slice();this._handlers=[],n.forEach(e=>{e[0]||(this._state===p.RESOLVED&&e[1](this._value),this._state===p.REJECTED&&e[2](this._value),e[0]=!0)})}}}s(l,"SyncPromise"),a.SyncPromise=l,a.rejectedSyncPromise=g,a.resolvedSyncPromise=m},2174399055:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(1108286465),p=1e3;function m(){return Date.now()/p}s(m,"dateTimestampInSeconds");function g(){const{performance:n}=d.GLOBAL_OBJ;if(!n||!n.now)return m;const e=Date.now()-n.now(),t=n.timeOrigin==null?e:n.timeOrigin;return()=>(t+n.now())/p}s(g,"createUnixTimestampInSecondsFunc");const l=g();a._browserPerformanceTimeOriginMode=void 0;const r=(()=>{const{performance:n}=d.GLOBAL_OBJ;if(!n||!n.now){a._browserPerformanceTimeOriginMode="none";return}const e=3600*1e3,t=n.now(),i=Date.now(),o=n.timeOrigin?Math.abs(n.timeOrigin+t-i):e,u=o<e,h=n.timing&&n.timing.navigationStart,f=typeof h=="number"?Math.abs(h+t-i):e,v=f<e;return u||v?o<=f?(a._browserPerformanceTimeOriginMode="timeOrigin",n.timeOrigin):(a._browserPerformanceTimeOriginMode="navigationStart",h):(a._browserPerformanceTimeOriginMode="dateNow",i)})();a.browserPerformanceTimeOrigin=r,a.dateTimestampInSeconds=m,a.timestampInSeconds=l},6123212092:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const d=c(8666696284),p=c(4360077466),m=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function g(n){if(!n)return;const e=n.match(m);if(!e)return;let t;return e[3]==="1"?t=!0:e[3]==="0"&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}s(g,"extractTraceparentData");function l(n,e){const t=g(n),i=d.baggageHeaderToDynamicSamplingContext(e),{traceId:o,parentSpanId:u,parentSampled:h}=t||{};return t?{traceId:o||p.uuid4(),parentSpanId:u||p.uuid4().substring(16),spanId:p.uuid4().substring(16),sampled:h,dsc:i||{}}:{traceId:o||p.uuid4(),spanId:p.uuid4().substring(16)}}s(l,"propagationContextFromHeaders");function r(n=p.uuid4(),e=p.uuid4().substring(16),t){let i="";return t!==void 0&&(i=t?"-1":"-0"),`${n}-${e}${i}`}s(r,"generateSentryTraceHeader"),a.TRACEPARENT_REGEXP=m,a.extractTraceparentData=g,a.generateSentryTraceHeader=r,a.propagationContextFromHeaders=l},7216756807:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(g){if(!g)return{};const l=g.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!l)return{};const r=l[6]||"",n=l[8]||"";return{host:l[4],path:l[5],protocol:l[2],search:r,hash:n,relative:l[5]+r+n}}s(c,"parseUrl");function d(g){return g.split(/[\?#]/,1)[0]}s(d,"stripUrlQueryAndFragment");function p(g){return g.split(/\\?\//).filter(l=>l.length>0&&l!==",").length}s(p,"getNumberOfUrlSegments");function m(g){const{protocol:l,host:r,path:n}=g,e=r&&r.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${l?`${l}://`:""}${e}${n}`}s(m,"getSanitizedUrlString"),a.getNumberOfUrlSegments=p,a.getSanitizedUrlString=m,a.parseUrl=c,a.stripUrlQueryAndFragment=d},6250807085:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});function c(d){return d.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}s(c,"escapeStringForRegex"),a.escapeStringForRegex=c},7384544743:(F,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0});const p=c(1108286465).GLOBAL_OBJ;function m(){const g=p.chrome,l=g&&g.app&&g.app.runtime,r="history"in p&&!!p.history.pushState&&!!p.history.replaceState;return!l&&r}s(m,"supportsHistory"),a.supportsHistory=m},1108286465:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0});const c=globalThis;function d(p,m,g){const l=g||c,r=l.__SENTRY__=l.__SENTRY__||{};return r[p]||(r[p]=m())}s(d,"getGlobalSingleton"),a.GLOBAL_OBJ=c,a.getGlobalSingleton=d},2844658640:(F,a,c)=>{var d,p,m;F.exports=function(J){var l={},r={exports:l},n=J.AbortController,e=J.AbortSignal,t=J.addEventListener,i=J.alert,o=J.AnalyserNode,u=J.Animation,h=J.AnimationEffectReadOnly,S=J.AnimationEffectTiming,f=J.AnimationEffectTimingReadOnly,v=J.AnimationEvent,E=J.AnimationPlaybackEvent,_=J.AnimationTimeline,T=J.applicationCache,w=J.ApplicationCache,M=J.ApplicationCacheErrorEvent,R=J.atob,O=J.Attr,k=J.Audio,A=J.AudioBuffer,P=J.AudioBufferSourceNode,D=J.AudioContext,H=J.AudioDestinationNode,j=J.AudioListener,W=J.AudioNode,X=J.AudioParam,ee=J.AudioProcessingEvent,fe=J.AudioScheduledSourceNode,oe=J.AudioWorkletGlobalScope,Oe=J.AudioWorkletNode,Xe=J.AudioWorkletProcessor,ge=J.BarProp,Me=J.BaseAudioContext,$e=J.BatteryManager,ze=J.BeforeUnloadEvent,nt=J.BiquadFilterNode,mt=J.Blob,gt=J.BlobEvent,Pe=J.blur,xe=J.BroadcastChannel,Ye=J.btoa,Ze=J.BudgetService,Re=J.ByteLengthQueuingStrategy,Tt=J.Cache,rt=J.CacheStorage,Nt=J.cancelAnimationFrame,Wt=J.cancelIdleCallback,Qt=J.CanvasCaptureMediaStreamTrack,Ot=J.CanvasGradient,hn=J.CanvasPattern,fi=J.CanvasRenderingContext2D,wn=J.ChannelMergerNode,Jt=J.ChannelSplitterNode,on=J.CharacterData,kt=J.clearInterval,$t=J.clearTimeout,en=J.clientInformation,zt=J.ClipboardEvent,Kt=J.close,Q=J.closed,Ve=J.CloseEvent,Be=J.Comment,Je=J.CompositionEvent,ut=J.confirm,ot=J.console,de=J.ConstantSourceNode,Ue=J.ConvolverNode,K=J.CountQueuingStrategy,q=J.createImageBitmap,Ee=J.Credential,be=J.CredentialsContainer,it=J.crypto,He=J.Crypto,Qe=J.CryptoKey,Se=J.CSS,Ae=J.CSSConditionRule,L=J.CSSFontFaceRule,ve=J.CSSGroupingRule,_e=J.CSSImportRule,Ie=J.CSSKeyframeRule,ne=J.CSSKeyframesRule,Ft=J.CSSMatrixComponent,qe=J.CSSMediaRule,ft=J.CSSNamespaceRule,En=J.CSSPageRule,xt=J.CSSPerspective,Ui=J.CSSRotate,_i=J.CSSRule,bn=J.CSSRuleList,zn=J.CSSScale,gn=J.CSSSkew,gi=J.CSSSkewX,ai=J.CSSSkewY,yr=J.CSSStyleDeclaration,Bt=J.CSSStyleRule,Et=J.CSSStyleSheet,On=J.CSSSupportsRule,nn=J.CSSTransformValue,Bn=J.CSSTranslate,li=J.CustomElementRegistry,ui=J.customElements,Gn=J.CustomEvent,Yn=J.DataTransfer,Ci=J.DataTransferItem,Ti=J.DataTransferItemList,Un=J.defaultstatus,U=J.defaultStatus,ce=J.DelayNode,Fe=J.DeviceMotionEvent,Ke=J.DeviceOrientationEvent,st=J.devicePixelRatio,Dt=J.dispatchEvent,Vt=J.document,Yt=J.Document,pn=J.DocumentFragment,dn=J.DocumentType,An=J.DOMError,ci=J.DOMException,ri=J.DOMImplementation,Vi=J.DOMMatrix,Zi=J.DOMMatrixReadOnly,pr=J.DOMParser,Or=J.DOMPoint,Ar=J.DOMPointReadOnly,Xr=J.DOMQuad,tr=J.DOMRect,kn=J.DOMRectList,Mi=J.DOMRectReadOnly,Hi=J.DOMStringList,$i=J.DOMStringMap,qi=J.DOMTokenList,Er=J.DragEvent,Wr=J.DynamicsCompressorNode,hi=J.Element,Ki=J.ErrorEvent,ur=J.event,pe=J.Event,Ce=J.EventSource,Le=J.EventTarget,tt=J.external,ct=J.fetch,pt=J.File,Zt=J.FileList,an=J.FileReader,ln=J.find,Gt=J.focus,Fn=J.FocusEvent,bt=J.FontFace,oi=J.FontFaceSetLoadEvent,mn=J.FormData,yi=J.frameElement,zi=J.frames,Ri=J.GainNode,Sn=J.Gamepad,Tn=J.GamepadButton,Kn=J.GamepadEvent,Si=J.getComputedStyle,lr=J.getSelection,mr=J.HashChangeEvent,jn=J.Headers,Lr=J.history,Ii=J.History,gr=J.HTMLAllCollection,lo=J.HTMLAnchorElement,bo=J.HTMLAreaElement,Zr=J.HTMLAudioElement,co=J.HTMLBaseElement,oo=J.HTMLBodyElement,So=J.HTMLBRElement,br=J.HTMLButtonElement,zr=J.HTMLCanvasElement,uo=J.HTMLCollection,Xi=J.HTMLContentElement,xr=J.HTMLDataElement,vo=J.HTMLDataListElement,qr=J.HTMLDetailsElement,_o=J.HTMLDialogElement,Bo=J.HTMLDirectoryElement,Xo=J.HTMLDivElement,Fo=J.HTMLDListElement,Ji=J.HTMLDocument,fr=J.HTMLElement,Sr=J.HTMLEmbedElement,vr=J.HTMLFieldSetElement,_r=J.HTMLFontElement,Mo=J.HTMLFormControlsCollection,no=J.HTMLFormElement,Mr=J.HTMLFrameElement,Ro=J.HTMLFrameSetElement,Os=J.HTMLHeadElement,As=J.HTMLHeadingElement,ia=J.HTMLHRElement,Qo=J.HTMLHtmlElement,cs=J.HTMLIFrameElement,Ms=J.HTMLImageElement,ds=J.HTMLInputElement,Rs=J.HTMLLabelElement,Zo=J.HTMLLegendElement,us=J.HTMLLIElement,fs=J.HTMLLinkElement,Ps=J.HTMLMapElement,ra=J.HTMLMarqueeElement,To=J.HTMLMediaElement,ks=J.HTMLMenuElement,hs=J.HTMLMetaElement,ps=J.HTMLMeterElement,ms=J.HTMLModElement,Ds=J.HTMLObjectElement,ki=J.HTMLOListElement,Ns=J.HTMLOptGroupElement,gs=J.HTMLOptionElement,Qi=J.HTMLOptionsCollection,Gr=J.HTMLOutputElement,Rr=J.HTMLParagraphElement,Uo=J.HTMLParamElement,io=J.HTMLPictureElement,ec=J.HTMLPreElement,oa=J.HTMLProgressElement,Na=J.HTMLQuoteElement,Gc=J.HTMLScriptElement,jc=J.HTMLSelectElement,$c=J.HTMLShadowElement,sa=J.HTMLSlotElement,Kc=J.HTMLSourceElement,Jc=J.HTMLSpanElement,La=J.HTMLStyleElement,xa=J.HTMLTableCaptionElement,qo=J.HTMLTableCellElement,tc=J.HTMLTableColElement,aa=J.HTMLTableElement,Yc=J.HTMLTableRowElement,Ba=J.HTMLTableSectionElement,nc=J.HTMLTemplateElement,ic=J.HTMLTextAreaElement,la=J.HTMLTimeElement,Xc=J.HTMLTitleElement,Ss=J.HTMLTrackElement,rc=J.HTMLUListElement,oc=J.HTMLUnknownElement,ca=J.HTMLVideoElement,Qc=J.IDBCursor,da=J.IDBCursorWithValue,ua=J.IDBDatabase,Zc=J.IDBFactory,sc=J.IDBIndex,qc=J.IDBKeyRange,ed=J.IDBObjectStore,ac=J.IDBOpenDBRequest,td=J.IDBRequest,lc=J.IDBTransaction,Fa=J.IDBVersionChangeEvent,cc=J.IdleDeadline,nd=J.IIRFilterNode,id=J.Image,fa=J.ImageBitmap,rd=J.ImageBitmapRenderingContext,od=J.ImageCapture,dc=J.ImageData,ha=J.indexedDB,Ls=J.innerHeight,uc=J.innerWidth,Ua=J.InputEvent,Vn=J.IntersectionObserver,_n=J.IntersectionObserverEntry,pa=J.Intl,sd=J.isSecureContext,Va=J.KeyboardEvent,cr=J.KeyframeEffect,fc=J.KeyframeEffectReadOnly,es=J.length,Co=J.localStorage,hc=J.location,Ha=J.Location,pc=J.locationbar,mc=J.matchMedia,vs=J.MediaDeviceInfo,ad=J.MediaDevices,Mn=J.MediaElementAudioSourceNode,vi=J.MediaEncryptedEvent,jt=J.MediaError,nu=J.MediaKeyMessageEvent,ld=J.MediaKeySession,iu=J.MediaKeyStatusMap,ru=J.MediaKeySystemAccess,gc=J.MediaList,ts=J.MediaMetadata,ou=J.MediaQueryList,cd=J.MediaQueryListEvent,su=J.MediaRecorder,au=J.MediaSettingsRange,Sc=J.MediaSource,lu=J.MediaStream,cu=J.MediaStreamAudioDestinationNode,du=J.MediaStreamAudioSourceNode,uu=J.MediaStreamEvent,fu=J.MediaStreamTrack,ma=J.MediaStreamTrackEvent,ga=J.menubar,dd=J.MessageChannel,Wa=J.MessageEvent,hu=J.MessagePort,ud=J.MIDIAccess,pu=J.MIDIConnectionEvent,fd=J.MIDIInput,mu=J.MIDIInputMap,hd=J.MIDIMessageEvent,pd=J.MIDIOutput,md=J.MIDIOutputMap,gu=J.MIDIPort,jr=J.MimeType,xs=J.MimeTypeArray,gd=J.MouseEvent,Sd=J.moveBy,vd=J.moveTo,za=J.MutationEvent,Ga=J.MutationObserver,ja=J.MutationRecord,vc=J.name,yo=J.NamedNodeMap,yd=J.NavigationPreloadManager,Ed=J.navigator,ro=J.Navigator,Vo=J.NetworkInformation,Io=J.Node,bd=J.NodeFilter,yc=J.NodeIterator,$a=J.NodeList,Sa=J.Notification,_d=J.OfflineAudioCompletionEvent,Bs=J.OfflineAudioContext,Ka=J.offscreenBuffering,ys=J.OffscreenCanvas,Ct=J.OffscreenCanvasRenderingContext2D,N=J.onabort,x=J.onafterprint,$=J.onanimationend,te=J.onanimationiteration,he=J.onanimationstart,we=J.onappinstalled,We=J.onauxclick,je=J.onbeforeinstallprompt,Ne=J.onbeforeprint,ht=J.onbeforeunload,Rt=J.onblur,It=J.oncancel,Lt=J.oncanplay,sn=J.oncanplaythrough,rn=J.onchange,Cn=J.onclick,Hn=J.onclose,Rn=J.oncontextmenu,di=J.oncuechange,Di=J.ondblclick,Ni=J.ondevicemotion,nr=J.ondeviceorientation,pi=J.ondeviceorientationabsolute,Nn=J.ondrag,wi=J.ondragend,hr=J.ondragenter,xn=J.ondragleave,mi=J.ondragover,ir=J.ondragstart,Pr=J.ondrop,Tr=J.ondurationchange,eo=J.onemptied,Gi=J.onended,fo=J.onerror,kr=J.onfocus,so=J.ongotpointercapture,$r=J.onhashchange,Po=J.oninput,Ho=J.oninvalid,Fs=J.onkeydown,Kr=J.onkeypress,Wo=J.onkeyup,ns=J.onlanguagechange,Us=J.onload,Ja=J.onloadeddata,Vs=J.onloadedmetadata,Ya=J.onloadstart,Ec=J.onlostpointercapture,bc=J.onmessage,Qr=J.onmessageerror,zo=J.onmousedown,va=J.onmouseenter,Xa=J.onmouseleave,Hs=J.onmousemove,ya=J.onmouseout,Wi=J.onmouseover,Eo=J.onmouseup,Li=J.onmousewheel,rr=J.onoffline,Pi=J.ononline,ko=J.onpagehide,Qa=J.onpageshow,Td=J.onpause,Cd=J.onplay,Id=J.onplaying,wd=J.onpointercancel,Od=J.onpointerdown,vh=J.onpointerenter,yh=J.onpointerleave,Eh=J.onpointermove,bh=J.onpointerout,_h=J.onpointerover,ho=J.onpointerup,Su=J.onpopstate,Th=J.onprogress,Wn=J.onratechange,Ch=J.onrejectionhandled,po=J.onreset,Ih=J.onresize,wh=J.onscroll,Oh=J.onsearch,Za=J.onseeked,qa=J.onseeking,el=J.onselect,tl=J.onstalled,nl=J.onstorage,il=J.onsubmit,rl=J.onsuspend,ol=J.ontimeupdate,sl=J.ontoggle,Ah=J.ontransitionend,Mh=J.onunhandledrejection,Rh=J.onunload,Ph=J.onvolumechange,kh=J.onwaiting,Dh=J.onwheel,Nh=J.open,Lh=J.openDatabase,xh=J.opener,Bh=J.Option,Fh=J.origin,Uh=J.OscillatorNode,Vh=J.outerHeight,Br=J.outerWidth,vu=J.OverconstrainedError,yu=J.PageTransitionEvent,Eu=J.pageXOffset,bu=J.pageYOffset,_u=J.PannerNode,Tu=J.parent,al=J.Path2D,Cu=J.PaymentAddress,ll=J.PaymentRequest,Ad=J.PaymentRequestUpdateEvent,Iu=J.PaymentResponse,wu=J.performance,Ou=J.Performance,Au=J.PerformanceEntry,cl=J.PerformanceLongTaskTiming,Md=J.PerformanceMark,Mu=J.PerformanceMeasure,_c=J.PerformanceNavigation,Ru=J.PerformanceNavigationTiming,Pu=J.PerformanceObserver,ku=J.PerformanceObserverEntryList,Rd=J.PerformancePaintTiming,Du=J.PerformanceResourceTiming,Nu=J.PerformanceTiming,dl=J.PeriodicWave,Lu=J.Permissions,xu=J.PermissionStatus,Bu=J.personalbar,Fu=J.PhotoCapabilities,Uu=J.Plugin,Vu=J.PluginArray,Hu=J.PointerEvent,Wu=J.PopStateEvent,zu=J.postMessage,Gu=J.Presentation,ju=J.PresentationAvailability,$u=J.PresentationConnection,Ku=J.PresentationConnectionAvailableEvent,Ju=J.PresentationConnectionCloseEvent,Yu=J.PresentationConnectionList,Xu=J.PresentationReceiver,Qu=J.PresentationRequest,Zu=J.print,qu=J.ProcessingInstruction,ef=J.ProgressEvent,tf=J.PromiseRejectionEvent,nf=J.prompt,rf=J.PushManager,of=J.PushSubscription,sf=J.PushSubscriptionOptions,af=J.queueMicrotask,lf=J.RadioNodeList,cf=J.Range,df=J.ReadableStream,uf=J.registerProcessor,ff=J.RemotePlayback,hf=J.removeEventListener,pf=J.Request,mf=J.requestAnimationFrame,gf=J.requestIdleCallback,Sf=J.resizeBy,vf=J.ResizeObserver,yf=J.ResizeObserverEntry,Ef=J.resizeTo,bf=J.Response,_f=J.RTCCertificate,Tf=J.RTCDataChannel,Cf=J.RTCDataChannelEvent,If=J.RTCDtlsTransport,wf=J.RTCIceCandidate,Hh=J.RTCIceGatherer,Wh=J.RTCIceTransport,zh=J.RTCPeerConnection,Gh=J.RTCPeerConnectionIceEvent,jh=J.RTCRtpContributingSource,$h=J.RTCRtpReceiver,Kh=J.RTCRtpSender,Jh=J.RTCSctpTransport,Yh=J.RTCSessionDescription,Xh=J.RTCStatsReport,Qh=J.RTCTrackEvent,Zh=J.screen,qh=J.Screen,ep=J.screenLeft,tp=J.ScreenOrientation,np=J.screenTop,ip=J.screenX,rp=J.screenY,op=J.ScriptProcessorNode,sp=J.scroll,ap=J.scrollbars,lp=J.scrollBy,cp=J.scrollTo,dp=J.scrollX,up=J.scrollY,fp=J.SecurityPolicyViolationEvent,hp=J.Selection,ul=J.self,pp=J.ServiceWorker,mp=J.ServiceWorkerContainer,gp=J.ServiceWorkerRegistration,Sp=J.sessionStorage,vp=J.setInterval,Of=J.setTimeout,yp=J.ShadowRoot,Ep=J.SharedWorker,bp=J.SourceBuffer,_p=J.SourceBufferList,Tp=J.speechSynthesis,Cp=J.SpeechSynthesisEvent,Ip=J.SpeechSynthesisUtterance,wp=J.StaticRange,Op=J.status,Ap=J.statusbar,Mp=J.StereoPannerNode,Rp=J.stop,Pp=J.Storage,kp=J.StorageEvent,Dp=J.StorageManager,Np=J.styleMedia,Lp=J.StyleSheet,xp=J.StyleSheetList,Bp=J.SubtleCrypto,Fp=J.SVGAElement,Up=J.SVGAngle,Vp=J.SVGAnimatedAngle,Hp=J.SVGAnimatedBoolean,Wp=J.SVGAnimatedEnumeration,zp=J.SVGAnimatedInteger,Gp=J.SVGAnimatedLength,jp=J.SVGAnimatedLengthList,$p=J.SVGAnimatedNumber,Kp=J.SVGAnimatedNumberList,Jp=J.SVGAnimatedPreserveAspectRatio,Yp=J.SVGAnimatedRect,Xp=J.SVGAnimatedString,Qp=J.SVGAnimatedTransformList,Zp=J.SVGAnimateElement,qp=J.SVGAnimateMotionElement,em=J.SVGAnimateTransformElement,tm=J.SVGAnimationElement,nm=J.SVGCircleElement,im=J.SVGClipPathElement,rm=J.SVGComponentTransferFunctionElement,om=J.SVGDefsElement,sm=J.SVGDescElement,am=J.SVGDiscardElement,lm=J.SVGElement,cm=J.SVGEllipseElement,dm=J.SVGFEBlendElement,um=J.SVGFEColorMatrixElement,fm=J.SVGFEComponentTransferElement,hm=J.SVGFECompositeElement,pm=J.SVGFEConvolveMatrixElement,mm=J.SVGFEDiffuseLightingElement,gm=J.SVGFEDisplacementMapElement,Sm=J.SVGFEDistantLightElement,vm=J.SVGFEDropShadowElement,ym=J.SVGFEFloodElement,Em=J.SVGFEFuncAElement,bm=J.SVGFEFuncBElement,_m=J.SVGFEFuncGElement,Tm=J.SVGFEFuncRElement,Cm=J.SVGFEGaussianBlurElement,Im=J.SVGFEImageElement,wm=J.SVGFEMergeElement,Om=J.SVGFEMergeNodeElement,Am=J.SVGFEMorphologyElement,Mm=J.SVGFEOffsetElement,Rm=J.SVGFEPointLightElement,Pm=J.SVGFESpecularLightingElement,km=J.SVGFESpotLightElement,Dm=J.SVGFETileElement,Nm=J.SVGFETurbulenceElement,Lm=J.SVGFilterElement,xm=J.SVGForeignObjectElement,Bm=J.SVGGElement,Fm=J.SVGGeometryElement,Um=J.SVGGradientElement,Vm=J.SVGGraphicsElement,Hm=J.SVGImageElement,Wm=J.SVGLength,zm=J.SVGLengthList,Gm=J.SVGLinearGradientElement,jm=J.SVGLineElement,$m=J.SVGMarkerElement,Km=J.SVGMaskElement,Jm=J.SVGMatrix,Ym=J.SVGMetadataElement,Xm=J.SVGMPathElement,Qm=J.SVGNumber,Zm=J.SVGNumberList,qm=J.SVGPathElement,eg=J.SVGPatternElement,tg=J.SVGPoint,ng=J.SVGPointList,ig=J.SVGPolygonElement,rg=J.SVGPolylineElement,og=J.SVGPreserveAspectRatio,sg=J.SVGRadialGradientElement,ag=J.SVGRect,lg=J.SVGRectElement,cg=J.SVGScriptElement,dg=J.SVGSetElement,ug=J.SVGStopElement,fg=J.SVGStringList,hg=J.SVGStyleElement,pg=J.SVGSVGElement,mg=J.SVGSwitchElement,gg=J.SVGSymbolElement,Sg=J.SVGTextContentElement,vg=J.SVGTextElement,yg=J.SVGTextPathElement,Eg=J.SVGTextPositioningElement,bg=J.SVGTitleElement,_g=J.SVGTransform,Tg=J.SVGTransformList,Cg=J.SVGTSpanElement,Ig=J.SVGUnitTypes,wg=J.SVGUseElement,Og=J.SVGViewElement,Ag=J.TaskAttributionTiming,Mg=J.Text,Xn=J.TextDecoder,si=J.TextEncoder,Fr=J.TextEvent,Qn=J.TextMetrics,Go=J.TextTrack,Ws=J.TextTrackCue,Zn=J.TextTrackCueList,qn=J.TextTrackList,ei=J.TimeRanges,ti=J.toolbar,Rg=J.top,Pg=J.Touch,kg=J.TouchEvent,Dg=J.TouchList,Ng=J.TrackEvent,Af=J.TransitionEvent,Lg=J.TreeWalker,Mf=J.trustedTypes,xg=J.UIEvent,Bg=J.URL,Rf=J.URLSearchParams,Fg=J.ValidityState,Ug=J.visualViewport,Pd=J.VisualViewport,Pf=J.VTTCue,kd=J.WaveShaperNode,Dd=J.WebAssembly,Ln=J.WebGL2RenderingContext,wo=J.WebGLActiveInfo,Vg=J.WebGLBuffer,Oi=J.WebGLContextEvent,Ei=J.WebGLFramebuffer,ni=J.WebGLProgram,ii=J.WebGLQuery,fl=J.WebGLRenderbuffer,hl=J.WebGLRenderingContext,pl=J.WebGLSampler,ml=J.WebGLShader,gl=J.WebGLShaderPrecisionFormat,Sl=J.WebGLSync,vl=J.WebGLTexture,yl=J.WebGLTransformFeedback,El=J.WebGLUniformLocation,bl=J.WebGLVertexArrayObject,_l=J.WebSocket,Tl=J.WheelEvent,J=J.window,Cl=J.Window,Il=J.Worker,wl=J.WritableStream,Ol=J.XMLDocument,Al=J.XMLHttpRequest,Ml=J.XMLHttpRequestEventTarget,Rl=J.XMLHttpRequestUpload,Pl=J.XMLSerializer,kl=J.XPathEvaluator,Dl=J.XPathExpression,Nl=J.XPathResult,Ll=J.XSLTProcessor;return function(xi,Dn){typeof l=="object"&&typeof r<"u"?Dn(l,c(3134334389),c(4332857818)):(p=[l,c(3134334389),c(4332857818)],d=Dn,m=typeof d=="function"?d.apply(l,p):d,m!==void 0&&(r.exports=m))}(this,function(xi,Dn,Es){"use strict";var bs=s(()=>'<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',"resizeTriggersHtml");function er(ie,B){if(!(ie instanceof B))throw new TypeError("Cannot call a class as a function")}s(er,"_classCallCheck");function _s(ie,B){for(var V=0;V<B.length;V++){var Z=B[V];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(ie,Z.key,Z)}}s(_s,"_defineProperties");function or(ie,B,V){return B&&_s(ie.prototype,B),V&&_s(ie,V),ie}s(or,"_createClass");function at(ie,B,V){return B in ie?Object.defineProperty(ie,B,{value:V,enumerable:!0,configurable:!0,writable:!0}):ie[B]=V,ie}s(at,"_defineProperty");function to(){return(to=Object.assign||function(ie){for(var B=1;B<arguments.length;B++){var V=arguments[B];for(var Z in V)Object.prototype.hasOwnProperty.call(V,Z)&&(ie[Z]=V[Z])}return ie}).apply(this,arguments)}s(to,"_extends");function Ts(ie,B){var V=Object.keys(ie);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(ie);B&&(Z=Z.filter(function(se){return Object.getOwnPropertyDescriptor(ie,se).enumerable})),V.push.apply(V,Z)}return V}s(Ts,"ownKeys");function bi(ie){for(var B=1;B<arguments.length;B++){var V=arguments[B]!=null?arguments[B]:{};B%2?Ts(V,!0).forEach(function(Z){at(ie,Z,V[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(V)):Ts(V).forEach(function(Z){Object.defineProperty(ie,Z,Object.getOwnPropertyDescriptor(V,Z))})}return ie}s(bi,"_objectSpread2");function Dr(ie,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(B&&B.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),B&&zs(ie,B)}s(Dr,"_inherits");function Cr(ie){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(ie)}s(Cr,"_getPrototypeOf");function zs(ie,B){return(zs=Object.setPrototypeOf||function(V,Z){return V.__proto__=Z,V})(ie,B)}s(zs,"_setPrototypeOf");function jo(ie,B){if(ie==null)return{};var V,Z,se=function(ae,Te){if(ae==null)return{};var De,ke,Ge={},et=Object.keys(ae);for(ke=0;ke<et.length;ke++)De=et[ke],0<=Te.indexOf(De)||(Ge[De]=ae[De]);return Ge}(ie,B);if(Object.getOwnPropertySymbols){var me=Object.getOwnPropertySymbols(ie);for(Z=0;Z<me.length;Z++)V=me[Z],0<=B.indexOf(V)||Object.prototype.propertyIsEnumerable.call(ie,V)&&(se[V]=ie[V])}return se}s(jo,"_objectWithoutProperties");function At(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}s(At,"_assertThisInitialized");function Ur(ie,B){return!B||typeof B!="object"&&typeof B!="function"?At(ie):B}s(Ur,"_possibleConstructorReturn");function Ea(ie,B){return function(V){if(Array.isArray(V))return V}(ie)||function(V,Z){if(Symbol.iterator in Object(V)||Object.prototype.toString.call(V)==="[object Arguments]"){var se=[],me=!0,ae=!1,Te=void 0;try{for(var De,ke=V[Symbol.iterator]();!(me=(De=ke.next()).done)&&(se.push(De.value),!Z||se.length!==Z);me=!0);}catch(Ge){ae=!0,Te=Ge}finally{try{me||ke.return==null||ke.return()}finally{if(ae)throw Te}}return se}}(ie,B)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s(Ea,"_slicedToArray");function Gs(ie){return function(B){if(Array.isArray(B)){for(var V=0,Z=new Array(B.length);V<B.length;V++)Z[V]=B[V];return Z}}(ie)||function(B){if(Symbol.iterator in Object(B)||Object.prototype.toString.call(B)==="[object Arguments]")return Array.from(B)}(ie)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s(Gs,"_toConsumableArray");function js(){var ie=this.constructor.getDerivedStateFromProps(this.props,this.state);ie!=null&&this.setState(ie)}s(js,"componentWillMount");function $s(ie){this.setState(function(B){var V=this.constructor.getDerivedStateFromProps(ie,B);return V??null}.bind(this))}s($s,"componentWillReceiveProps");function Ks(ie,B){try{var V=this.props,Z=this.state;this.props=ie,this.state=B,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(V,Z)}finally{this.props=V,this.state=Z}}s(Ks,"componentWillUpdate");function $o(ie){var B=ie.prototype;if(!B||!B.isReactComponent)throw new Error("Can only polyfill class components");if(typeof ie.getDerivedStateFromProps!="function"&&typeof B.getSnapshotBeforeUpdate!="function")return ie;var V=null,Z=null,se=null;if(typeof B.componentWillMount=="function"?V="componentWillMount":typeof B.UNSAFE_componentWillMount=="function"&&(V="UNSAFE_componentWillMount"),typeof B.componentWillReceiveProps=="function"?Z="componentWillReceiveProps":typeof B.UNSAFE_componentWillReceiveProps=="function"&&(Z="UNSAFE_componentWillReceiveProps"),typeof B.componentWillUpdate=="function"?se="componentWillUpdate":typeof B.UNSAFE_componentWillUpdate=="function"&&(se="UNSAFE_componentWillUpdate"),V!==null||Z!==null||se!==null){var me=ie.displayName||ie.name,ae=typeof ie.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+me+" uses "+ae+" but also contains the following legacy lifecycles:"+(V!==null?`
  `+V:"")+(Z!==null?`
  `+Z:"")+(se!==null?`
  `+se:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof ie.getDerivedStateFromProps=="function"&&(B.componentWillMount=js,B.componentWillReceiveProps=$s),typeof B.getSnapshotBeforeUpdate=="function"){if(typeof B.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");B.componentWillUpdate=Ks;var Te=B.componentDidUpdate;B.componentDidUpdate=function(De,ke,Ge){var et=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:Ge;Te.call(this,De,ke,et)}}return ie}s($o,"polyfill"),Ks.__suppressDeprecationWarning=$s.__suppressDeprecationWarning=js.__suppressDeprecationWarning=!0;var Cs=function(){function ie(){var B,V;er(this,ie);for(var Z=arguments.length,se=new Array(Z),me=0;me<Z;me++)se[me]=arguments[me];return at(At(V=Ur(this,(B=Cr(ie)).call.apply(B,[this].concat(se)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),at(At(V),"_columnStartIndex",0),at(At(V),"_columnStopIndex",0),at(At(V),"_rowStartIndex",0),at(At(V),"_rowStopIndex",0),at(At(V),"_onKeyDown",function(ae){var Te=V.props,De=Te.columnCount,ke=Te.disabled,Ge=Te.mode,et=Te.rowCount;if(!ke){var lt=V._getScrollState(),Mt=lt.scrollToColumn,dt=lt.scrollToRow,vt=V._getScrollState(),Pt=vt.scrollToColumn,Ut=vt.scrollToRow;switch(ae.key){case"ArrowDown":Ut=Math.min(Ge==="cells"?Ut+1:V._rowStopIndex+1,et-1);break;case"ArrowLeft":Pt=Math.max(Ge==="cells"?Pt-1:V._columnStartIndex-1,0);break;case"ArrowRight":Pt=Math.min(Ge==="cells"?Pt+1:V._columnStopIndex+1,De-1);break;case"ArrowUp":Ut=Math.max(Ge==="cells"?Ut-1:V._rowStartIndex-1,0)}Pt===Mt&&Ut===dt||(ae.preventDefault(),V._updateScrollState({scrollToColumn:Pt,scrollToRow:Ut}))}}),at(At(V),"_onSectionRendered",function(ae){var Te=ae.columnStartIndex,De=ae.columnStopIndex,ke=ae.rowStartIndex,Ge=ae.rowStopIndex;V._columnStartIndex=Te,V._columnStopIndex=De,V._rowStartIndex=ke,V._rowStopIndex=Ge}),V}return s(ie,"ArrowKeyStepper"),Dr(ie,Dn.PureComponent),or(ie,[{key:"setScrollIndexes",value:function(B){var V=B.scrollToColumn,Z=B.scrollToRow;this.setState({scrollToRow:Z,scrollToColumn:V})}},{key:"render",value:function(){var B=this.props,V=B.className,Z=B.children,se=this._getScrollState(),me=se.scrollToColumn,ae=se.scrollToRow;return Dn.createElement("div",{className:V,onKeyDown:this._onKeyDown},Z({onSectionRendered:this._onSectionRendered,scrollToColumn:me,scrollToRow:ae}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(B){var V=B.scrollToColumn,Z=B.scrollToRow,se=this.props,me=se.isControlled,ae=se.onScrollToChange;typeof ae=="function"&&ae({scrollToColumn:V,scrollToRow:Z}),me||this.setState({scrollToColumn:V,scrollToRow:Z})}}],[{key:"getDerivedStateFromProps",value:function(B,V){return B.isControlled?{}:B.scrollToColumn!==V.instanceProps.prevScrollToColumn||B.scrollToRow!==V.instanceProps.prevScrollToRow?bi({},V,{scrollToColumn:B.scrollToColumn,scrollToRow:B.scrollToRow,instanceProps:{prevScrollToColumn:B.scrollToColumn,prevScrollToRow:B.scrollToRow}}):{}}}]),ie}();function Js(ie,B){var V,Z,se,me=(V=B!==void 0?B:typeof J<"u"?J:typeof ul<"u"?ul:c.g).document!==void 0&&V.document.attachEvent;if(!me){var ae=(se=V.requestAnimationFrame||V.mozRequestAnimationFrame||V.webkitRequestAnimationFrame||function(yt){return V.setTimeout(yt,20)},function(yt){return se(yt)}),Te=(Z=V.cancelAnimationFrame||V.mozCancelAnimationFrame||V.webkitCancelAnimationFrame||V.clearTimeout,function(yt){return Z(yt)}),De=s(function(yt){var Ht=yt.__resizeTriggers__,St=Ht.firstElementChild,In=Ht.lastElementChild,Jn=St.firstElementChild;In.scrollLeft=In.scrollWidth,In.scrollTop=In.scrollHeight,Jn.style.width=St.offsetWidth+1+"px",Jn.style.height=St.offsetHeight+1+"px",St.scrollLeft=St.scrollWidth,St.scrollTop=St.scrollHeight},"resetTriggers"),ke=s(function(yt){if(!(yt.target.className&&typeof yt.target.className.indexOf=="function"&&yt.target.className.indexOf("contract-trigger")<0&&yt.target.className.indexOf("expand-trigger")<0)){var Ht=this;De(this),this.__resizeRAF__&&Te(this.__resizeRAF__),this.__resizeRAF__=ae(function(){!function(St){return St.offsetWidth!=St.__resizeLast__.width||St.offsetHeight!=St.__resizeLast__.height}(Ht)||(Ht.__resizeLast__.width=Ht.offsetWidth,Ht.__resizeLast__.height=Ht.offsetHeight,Ht.__resizeListeners__.forEach(function(St){St.call(Ht,yt)}))})}},"scrollListener"),Ge=!1,et="",lt="animationstart",Mt="Webkit Moz O ms".split(" "),dt="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),vt=V.document.createElement("fakeelement");if(vt.style.animationName!==void 0&&(Ge=!0),Ge===!1){for(var Pt=0;Pt<Mt.length;Pt++)if(vt.style[Mt[Pt]+"AnimationName"]!==void 0){et="-"+Mt[Pt].toLowerCase()+"-",lt=dt[Pt],Ge=!0;break}}var Ut="resizeanim",Xt="@"+et+"keyframes "+Ut+" { from { opacity: 0; } to { opacity: 0; } } ",cn=et+"animation: 1ms "+Ut+"; "}return{addResizeListener:function(yt,Ht){if(me)yt.attachEvent("onresize",Ht);else{if(!yt.__resizeTriggers__){var St=yt.ownerDocument,In=V.getComputedStyle(yt);if(In&&In.position=="static"&&(yt.style.position="relative"),function(Ai){if(!Ai.getElementById("detectElementResize")){var sr=(Xt||"")+".resize-triggers { "+(cn||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',ar=Ai.head||Ai.getElementsByTagName("head")[0],dr=Ai.createElement("style");dr.id="detectElementResize",dr.type="text/css",ie!=null&&dr.setAttribute("nonce",ie),dr.styleSheet?dr.styleSheet.cssText=sr:dr.appendChild(Ai.createTextNode(sr)),ar.appendChild(dr)}}(St),yt.__resizeLast__={},yt.__resizeListeners__=[],(yt.__resizeTriggers__=St.createElement("div")).className="resize-triggers",J.trustedTypes){var Jn=Mf.createPolicy("react-virtualized-auto-sizer",{createHTML:bs});yt.__resizeTriggers__.innerHTML=Jn.createHTML("")}else yt.__resizeTriggers__.innerHTML=bs();yt.appendChild(yt.__resizeTriggers__),De(yt),yt.addEventListener("scroll",ke,!0),lt&&(yt.__resizeTriggers__.__animationListener__=function(Ai){Ai.animationName==Ut&&De(yt)},yt.__resizeTriggers__.addEventListener(lt,yt.__resizeTriggers__.__animationListener__))}yt.__resizeListeners__.push(Ht)}},removeResizeListener:function(yt,Ht){if(me)yt.detachEvent("onresize",Ht);else if(yt.__resizeListeners__.splice(yt.__resizeListeners__.indexOf(Ht),1),!yt.__resizeListeners__.length){yt.removeEventListener("scroll",ke,!0),yt.__resizeTriggers__.__animationListener__&&(yt.__resizeTriggers__.removeEventListener(lt,yt.__resizeTriggers__.__animationListener__),yt.__resizeTriggers__.__animationListener__=null);try{yt.__resizeTriggers__=!yt.removeChild(yt.__resizeTriggers__)}catch{}}}}}s(Js,"createDetectElementResize"),at(Cs,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),$o(Cs);var Ys=function(){function ie(){var B,V;er(this,ie);for(var Z=arguments.length,se=new Array(Z),me=0;me<Z;me++)se[me]=arguments[me];return at(At(V=Ur(this,(B=Cr(ie)).call.apply(B,[this].concat(se)))),"state",{height:V.props.defaultHeight||0,width:V.props.defaultWidth||0}),at(At(V),"_parentNode",void 0),at(At(V),"_autoSizer",void 0),at(At(V),"_window",void 0),at(At(V),"_detectElementResize",void 0),at(At(V),"_onResize",function(){var ae=V.props,Te=ae.disableHeight,De=ae.disableWidth,ke=ae.onResize;if(V._parentNode){var Ge=V._parentNode.offsetHeight||0,et=V._parentNode.offsetWidth||0,lt=(V._window||J).getComputedStyle(V._parentNode)||{},Mt=parseInt(lt.paddingLeft,10)||0,dt=parseInt(lt.paddingRight,10)||0,vt=parseInt(lt.paddingTop,10)||0,Pt=parseInt(lt.paddingBottom,10)||0,Ut=Ge-vt-Pt,Xt=et-Mt-dt;(!Te&&V.state.height!==Ut||!De&&V.state.width!==Xt)&&(V.setState({height:Ge-vt-Pt,width:et-Mt-dt}),ke({height:Ge,width:et}))}}),at(At(V),"_setRef",function(ae){V._autoSizer=ae}),V}return s(ie,"AutoSizer"),Dr(ie,Dn.Component),or(ie,[{key:"componentDidMount",value:function(){var B=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=Js(B,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var B=this.props,V=B.children,Z=B.className,se=B.disableHeight,me=B.disableWidth,ae=B.style,Te=this.state,De=Te.height,ke=Te.width,Ge={overflow:"visible"},et={};return se||(Ge.height=0,et.height=De),me||(Ge.width=0,et.width=ke),Dn.createElement("div",{className:Z,ref:this._setRef,style:bi({},Ge,{},ae)},V(et))}}]),ie}();at(Ys,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var Tc=function(){function ie(){var B,V;er(this,ie);for(var Z=arguments.length,se=new Array(Z),me=0;me<Z;me++)se[me]=arguments[me];return at(At(V=Ur(this,(B=Cr(ie)).call.apply(B,[this].concat(se)))),"_child",void 0),at(At(V),"_measure",function(){var ae=V.props,Te=ae.cache,De=ae.columnIndex,ke=De===void 0?0:De,Ge=ae.parent,et=ae.rowIndex,lt=et===void 0?V.props.index||0:et,Mt=V._getCellMeasurements(),dt=Mt.height,vt=Mt.width;dt===Te.getHeight(lt,ke)&&vt===Te.getWidth(lt,ke)||(Te.set(lt,ke,vt,dt),Ge&&typeof Ge.recomputeGridSize=="function"&&Ge.recomputeGridSize({columnIndex:ke,rowIndex:lt}))}),at(At(V),"_registerChild",function(ae){!ae||ae instanceof hi||ot.warn("CellMeasurer registerChild expects to be passed Element or null"),(V._child=ae)&&V._maybeMeasureCell()}),V}return s(ie,"CellMeasurer"),Dr(ie,Dn.PureComponent),or(ie,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var B=this.props.children;return typeof B=="function"?B({measure:this._measure,registerChild:this._registerChild}):B}},{key:"_getCellMeasurements",value:function(){var B=this.props.cache,V=this._child||Es.findDOMNode(this);if(V&&V.ownerDocument&&V.ownerDocument.defaultView&&V instanceof V.ownerDocument.defaultView.HTMLElement){var Z=V.style.width,se=V.style.height;B.hasFixedWidth()||(V.style.width="auto"),B.hasFixedHeight()||(V.style.height="auto");var me=Math.ceil(V.offsetHeight),ae=Math.ceil(V.offsetWidth);return Z&&(V.style.width=Z),se&&(V.style.height=se),{height:me,width:ae}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var B=this.props,V=B.cache,Z=B.columnIndex,se=Z===void 0?0:Z,me=B.parent,ae=B.rowIndex,Te=ae===void 0?this.props.index||0:ae;if(!V.has(Te,se)){var De=this._getCellMeasurements(),ke=De.height,Ge=De.width;V.set(Te,se,Ge,ke),me&&typeof me.invalidateCellSizeAfterRender=="function"&&me.invalidateCellSizeAfterRender({columnIndex:se,rowIndex:Te})}}}]),ie}();at(Tc,"__internalCellMeasurerFlag",!1),Tc.__internalCellMeasurerFlag=!0;var Cc=function(){function ie(){var B=this,V=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};er(this,ie),at(this,"_cellHeightCache",{}),at(this,"_cellWidthCache",{}),at(this,"_columnWidthCache",{}),at(this,"_rowHeightCache",{}),at(this,"_defaultHeight",void 0),at(this,"_defaultWidth",void 0),at(this,"_minHeight",void 0),at(this,"_minWidth",void 0),at(this,"_keyMapper",void 0),at(this,"_hasFixedHeight",void 0),at(this,"_hasFixedWidth",void 0),at(this,"_columnCount",0),at(this,"_rowCount",0),at(this,"columnWidth",function(Ge){var et=Ge.index,lt=B._keyMapper(0,et);return B._columnWidthCache[lt]!==void 0?B._columnWidthCache[lt]:B._defaultWidth}),at(this,"rowHeight",function(Ge){var et=Ge.index,lt=B._keyMapper(et,0);return B._rowHeightCache[lt]!==void 0?B._rowHeightCache[lt]:B._defaultHeight});var Z=V.defaultHeight,se=V.defaultWidth,me=V.fixedHeight,ae=V.fixedWidth,Te=V.keyMapper,De=V.minHeight,ke=V.minWidth;this._hasFixedHeight=me===!0,this._hasFixedWidth=ae===!0,this._minHeight=De||0,this._minWidth=ke||0,this._keyMapper=Te||kf,this._defaultHeight=Math.max(this._minHeight,typeof Z=="number"?Z:30),this._defaultWidth=Math.max(this._minWidth,typeof se=="number"?se:100),this._hasFixedHeight===!1&&this._hasFixedWidth===!1&&ot.warn("CellMeasurerCache should only measure a cell's width or height. You have configured CellMeasurerCache to measure both. This will result in poor performance."),this._hasFixedHeight===!1&&this._defaultHeight===0&&ot.warn("Fixed height CellMeasurerCache should specify a :defaultHeight greater than 0. Failing to do so will lead to unnecessary layout and poor performance."),this._hasFixedWidth===!1&&this._defaultWidth===0&&ot.warn("Fixed width CellMeasurerCache should specify a :defaultWidth greater than 0. Failing to do so will lead to unnecessary layout and poor performance.")}return s(ie,"CellMeasurerCache"),or(ie,[{key:"clear",value:function(B,V){var Z=1<arguments.length&&V!==void 0?V:0,se=this._keyMapper(B,Z);delete this._cellHeightCache[se],delete this._cellWidthCache[se],this._updateCachedColumnAndRowSizes(B,Z)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(B,V){var Z=1<arguments.length&&V!==void 0?V:0;if(this._hasFixedHeight)return this._defaultHeight;var se=this._keyMapper(B,Z);return this._cellHeightCache[se]!==void 0?Math.max(this._minHeight,this._cellHeightCache[se]):this._defaultHeight}},{key:"getWidth",value:function(B,V){var Z=1<arguments.length&&V!==void 0?V:0;if(this._hasFixedWidth)return this._defaultWidth;var se=this._keyMapper(B,Z);return this._cellWidthCache[se]!==void 0?Math.max(this._minWidth,this._cellWidthCache[se]):this._defaultWidth}},{key:"has",value:function(B,V){var Z=1<arguments.length&&V!==void 0?V:0,se=this._keyMapper(B,Z);return this._cellHeightCache[se]!==void 0}},{key:"set",value:function(B,V,Z,se){var me=this._keyMapper(B,V);V>=this._columnCount&&(this._columnCount=V+1),B>=this._rowCount&&(this._rowCount=B+1),this._cellHeightCache[me]=se,this._cellWidthCache[me]=Z,this._updateCachedColumnAndRowSizes(B,V)}},{key:"_updateCachedColumnAndRowSizes",value:function(B,V){if(!this._hasFixedWidth){for(var Z=0,se=0;se<this._rowCount;se++)Z=Math.max(Z,this.getWidth(se,V));var me=this._keyMapper(0,V);this._columnWidthCache[me]=Z}if(!this._hasFixedHeight){for(var ae=0,Te=0;Te<this._columnCount;Te++)ae=Math.max(ae,this.getHeight(B,Te));var De=this._keyMapper(B,0);this._rowHeightCache[De]=ae}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),ie}();function kf(ie,B){return"".concat(ie,"-").concat(B)}s(kf,"defaultKeyMapper");function Nd(ie){return ie&&ie.__esModule&&Object.prototype.hasOwnProperty.call(ie,"default")?ie.default:ie}s(Nd,"unwrapExports");function Xs(ie,B){return ie(B={exports:{}},B.exports),B.exports}s(Xs,"createCommonjsModule");var Yi=Xs(function(ie,B){Object.defineProperty(B,"__esModule",{value:!0});var V=typeof Symbol=="function"&&Symbol.for,Z=V?Symbol.for("react.element"):60103,se=V?Symbol.for("react.portal"):60106,me=V?Symbol.for("react.fragment"):60107,ae=V?Symbol.for("react.strict_mode"):60108,Te=V?Symbol.for("react.profiler"):60114,De=V?Symbol.for("react.provider"):60109,ke=V?Symbol.for("react.context"):60110,Ge=V?Symbol.for("react.async_mode"):60111,et=V?Symbol.for("react.concurrent_mode"):60111,lt=V?Symbol.for("react.forward_ref"):60112,Mt=V?Symbol.for("react.suspense"):60113,dt=V?Symbol.for("react.suspense_list"):60120,vt=V?Symbol.for("react.memo"):60115,Pt=V?Symbol.for("react.lazy"):60116,Ut=V?Symbol.for("react.fundamental"):60117,Xt=V?Symbol.for("react.responder"):60118,cn=V?Symbol.for("react.scope"):60119;function yt(St){if(typeof St=="object"&&St!==null){var In=St.$$typeof;switch(In){case Z:switch(St=St.type){case Ge:case et:case me:case Te:case ae:case Mt:return St;default:switch(St=St&&St.$$typeof){case ke:case lt:case De:return St;default:return In}}case Pt:case vt:case se:return In}}}s(yt,"y");function Ht(St){return yt(St)===et}s(Ht,"z"),B.typeOf=yt,B.AsyncMode=Ge,B.ConcurrentMode=et,B.ContextConsumer=ke,B.ContextProvider=De,B.Element=Z,B.ForwardRef=lt,B.Fragment=me,B.Lazy=Pt,B.Memo=vt,B.Portal=se,B.Profiler=Te,B.StrictMode=ae,B.Suspense=Mt,B.isValidElementType=function(St){return typeof St=="string"||typeof St=="function"||St===me||St===et||St===Te||St===ae||St===Mt||St===dt||typeof St=="object"&&St!==null&&(St.$$typeof===Pt||St.$$typeof===vt||St.$$typeof===De||St.$$typeof===ke||St.$$typeof===lt||St.$$typeof===Ut||St.$$typeof===Xt||St.$$typeof===cn)},B.isAsyncMode=function(St){return Ht(St)||yt(St)===Ge},B.isConcurrentMode=Ht,B.isContextConsumer=function(St){return yt(St)===ke},B.isContextProvider=function(St){return yt(St)===De},B.isElement=function(St){return typeof St=="object"&&St!==null&&St.$$typeof===Z},B.isForwardRef=function(St){return yt(St)===lt},B.isFragment=function(St){return yt(St)===me},B.isLazy=function(St){return yt(St)===Pt},B.isMemo=function(St){return yt(St)===vt},B.isPortal=function(St){return yt(St)===se},B.isProfiler=function(St){return yt(St)===Te},B.isStrictMode=function(St){return yt(St)===ae},B.isSuspense=function(St){return yt(St)===Mt}});Nd(Yi),Yi.typeOf,Yi.AsyncMode,Yi.ConcurrentMode,Yi.ContextConsumer,Yi.ContextProvider,Yi.Element,Yi.ForwardRef,Yi.Fragment,Yi.Lazy,Yi.Memo,Yi.Portal,Yi.Profiler,Yi.StrictMode,Yi.Suspense,Yi.isValidElementType,Yi.isAsyncMode,Yi.isConcurrentMode,Yi.isContextConsumer,Yi.isContextProvider,Yi.isElement,Yi.isForwardRef,Yi.isFragment,Yi.isLazy,Yi.isMemo,Yi.isPortal,Yi.isProfiler,Yi.isStrictMode,Yi.isSuspense;var ji=Xs(function(ie,B){(function(){Object.defineProperty(B,"__esModule",{value:!0});var V=typeof Symbol=="function"&&Symbol.for,Z=V?Symbol.for("react.element"):60103,se=V?Symbol.for("react.portal"):60106,me=V?Symbol.for("react.fragment"):60107,ae=V?Symbol.for("react.strict_mode"):60108,Te=V?Symbol.for("react.profiler"):60114,De=V?Symbol.for("react.provider"):60109,ke=V?Symbol.for("react.context"):60110,Ge=V?Symbol.for("react.async_mode"):60111,et=V?Symbol.for("react.concurrent_mode"):60111,lt=V?Symbol.for("react.forward_ref"):60112,Mt=V?Symbol.for("react.suspense"):60113,dt=V?Symbol.for("react.suspense_list"):60120,vt=V?Symbol.for("react.memo"):60115,Pt=V?Symbol.for("react.lazy"):60116,Ut=V?Symbol.for("react.fundamental"):60117,Xt=V?Symbol.for("react.responder"):60118,cn=V?Symbol.for("react.scope"):60119,yt=s(function($n,zl){if(zl===void 0)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!$n){for(var Zs=arguments.length,Bc=new Array(2<Zs?Zs-2:0),Vd=2;Vd<Zs;Vd++)Bc[Vd-2]=arguments[Vd];(function(ev){for(var qf=arguments.length,uS=new Array(1<qf?qf-1:0),Hd=1;Hd<qf;Hd++)uS[Hd-1]=arguments[Hd];var tv=0,fS="Warning: "+ev.replace(/%s/g,function(){return uS[tv++]});typeof ot<"u"&&ot.warn(fS);try{throw new Error(fS)}catch{}}).apply(void 0,[zl].concat(Bc))}},"lowPriorityWarningWithoutStack$1");function Ht($n){if(typeof $n=="object"&&$n!==null){var zl=$n.$$typeof;switch(zl){case Z:var Zs=$n.type;switch(Zs){case Ge:case et:case me:case Te:case ae:case Mt:return Zs;default:var Bc=Zs&&Zs.$$typeof;switch(Bc){case ke:case lt:case De:return Bc;default:return zl}}case Pt:case vt:case se:return zl}}}s(Ht,"typeOf");var St=Ge,In=et,Jn=ke,Ai=De,sr=Z,ar=lt,dr=me,ao=Pt,go=vt,Ao=se,Lc=Te,xc=ae,qS=Mt,cS=!1;function dS($n){return Ht($n)===et}s(dS,"isConcurrentMode"),B.typeOf=Ht,B.AsyncMode=St,B.ConcurrentMode=In,B.ContextConsumer=Jn,B.ContextProvider=Ai,B.Element=sr,B.ForwardRef=ar,B.Fragment=dr,B.Lazy=ao,B.Memo=go,B.Portal=Ao,B.Profiler=Lc,B.StrictMode=xc,B.Suspense=qS,B.isValidElementType=function($n){return typeof $n=="string"||typeof $n=="function"||$n===me||$n===et||$n===Te||$n===ae||$n===Mt||$n===dt||typeof $n=="object"&&$n!==null&&($n.$$typeof===Pt||$n.$$typeof===vt||$n.$$typeof===De||$n.$$typeof===ke||$n.$$typeof===lt||$n.$$typeof===Ut||$n.$$typeof===Xt||$n.$$typeof===cn)},B.isAsyncMode=function($n){return cS||yt(!(cS=!0),"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."),dS($n)||Ht($n)===Ge},B.isConcurrentMode=dS,B.isContextConsumer=function($n){return Ht($n)===ke},B.isContextProvider=function($n){return Ht($n)===De},B.isElement=function($n){return typeof $n=="object"&&$n!==null&&$n.$$typeof===Z},B.isForwardRef=function($n){return Ht($n)===lt},B.isFragment=function($n){return Ht($n)===me},B.isLazy=function($n){return Ht($n)===Pt},B.isMemo=function($n){return Ht($n)===vt},B.isPortal=function($n){return Ht($n)===se},B.isProfiler=function($n){return Ht($n)===Te},B.isStrictMode=function($n){return Ht($n)===ae},B.isSuspense=function($n){return Ht($n)===Mt}})()});Nd(ji),ji.typeOf,ji.AsyncMode,ji.ConcurrentMode,ji.ContextConsumer,ji.ContextProvider,ji.Element,ji.ForwardRef,ji.Fragment,ji.Lazy,ji.Memo,ji.Portal,ji.Profiler,ji.StrictMode,ji.Suspense,ji.isValidElementType,ji.isAsyncMode,ji.isConcurrentMode,ji.isContextConsumer,ji.isContextProvider,ji.isElement,ji.isForwardRef,ji.isFragment,ji.isLazy,ji.isMemo,ji.isPortal,ji.isProfiler,ji.isStrictMode,ji.isSuspense;var xl=Xs(function(ie){ie.exports=ji}),Ld=Object.getOwnPropertySymbols,Df=Object.prototype.hasOwnProperty,Ic=Object.prototype.propertyIsEnumerable,wc,Nf=function(){try{if(!Object.assign)return!1;var ie=new String("abc");if(ie[5]="de",Object.getOwnPropertyNames(ie)[0]==="5")return!1;for(var B={},V=0;V<10;V++)B["_"+String.fromCharCode(V)]=V;if(Object.getOwnPropertyNames(B).map(function(se){return B[se]}).join("")!=="0123456789")return!1;var Z={};return"abcdefghijklmnopqrst".split("").forEach(function(se){Z[se]=se}),Object.keys(Object.assign({},Z)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(ie,B){for(var V,Z,se=function(De){if(De==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(De)}(ie),me=1;me<arguments.length;me++){for(var ae in V=Object(arguments[me]))Df.call(V,ae)&&(se[ae]=V[ae]);if(Ld){Z=Ld(V);for(var Te=0;Te<Z.length;Te++)Ic.call(V,Z[Te])&&(se[Z[Te]]=V[Z[Te]])}}return se},is="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Oc={},Lf=Function.call.bind(Object.prototype.hasOwnProperty);function Bl(ie,B,V,Z,se){for(var me in ie)if(Lf(ie,me)){var ae;try{if(typeof ie[me]!="function"){var Te=Error((Z||"React class")+": "+V+" type `"+me+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof ie[me]+"`.");throw Te.name="Invariant Violation",Te}ae=ie[me](B,me,Z,V,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ke){ae=ke}if(!ae||ae instanceof Error||wc((Z||"React class")+": type specification of "+V+" `"+me+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof ae+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),ae instanceof Error&&!(ae.message in Oc)){Oc[ae.message]=!0;var De=se?se():"";wc("Failed "+V+" type: "+ae.message+(De??""))}}}s(Bl,"checkPropTypes"),wc=s(function(ie){var B="Warning: "+ie;typeof ot<"u"&&ot.error(B);try{throw new Error(B)}catch{}},"printWarning"),Bl.resetWarningCache=function(){Oc={}};var ba,xd=Bl,Ac=Function.call.bind(Object.prototype.hasOwnProperty);function Fl(){return null}s(Fl,"emptyFunctionThatReturnsNull"),ba=s(function(ie){var B="Warning: "+ie;typeof ot<"u"&&ot.error(B);try{throw new Error(B)}catch{}},"printWarning$1");function xf(ie,B){var V=typeof Symbol=="function"&&Symbol.iterator,Z="@@iterator",se="<<anonymous>>",me={array:ke("array"),bool:ke("boolean"),func:ke("function"),number:ke("number"),object:ke("object"),string:ke("string"),symbol:ke("symbol"),any:De(Fl),arrayOf:function(dt){return De(function(vt,Pt,Ut,Xt,cn){if(typeof dt!="function")return new Te("Property `"+cn+"` of component `"+Ut+"` has invalid PropType notation inside arrayOf.");var yt=vt[Pt];if(!Array.isArray(yt))return new Te("Invalid "+Xt+" `"+cn+"` of type `"+et(yt)+"` supplied to `"+Ut+"`, expected an array.");for(var Ht=0;Ht<yt.length;Ht++){var St=dt(yt,Ht,Ut,Xt,cn+"["+Ht+"]",is);if(St instanceof Error)return St}return null})},element:De(function(dt,vt,Pt,Ut,Xt){var cn=dt[vt];return ie(cn)?null:new Te("Invalid "+Ut+" `"+Xt+"` of type `"+et(cn)+"` supplied to `"+Pt+"`, expected a single ReactElement.")}),elementType:De(function(dt,vt,Pt,Ut,Xt){var cn=dt[vt];return xl.isValidElementType(cn)?null:new Te("Invalid "+Ut+" `"+Xt+"` of type `"+et(cn)+"` supplied to `"+Pt+"`, expected a single ReactElement type.")}),instanceOf:function(dt){return De(function(vt,Pt,Ut,Xt,cn){if(vt[Pt]instanceof dt)return null;var yt=dt.name||se;return new Te("Invalid "+Xt+" `"+cn+"` of type `"+function(Ht){return Ht.constructor&&Ht.constructor.name?Ht.constructor.name:se}(vt[Pt])+"` supplied to `"+Ut+"`, expected instance of `"+yt+"`.")})},node:De(function(dt,vt,Pt,Ut,Xt){return Ge(dt[vt])?null:new Te("Invalid "+Ut+" `"+Xt+"` supplied to `"+Pt+"`, expected a ReactNode.")}),objectOf:function(dt){return De(function(vt,Pt,Ut,Xt,cn){if(typeof dt!="function")return new Te("Property `"+cn+"` of component `"+Ut+"` has invalid PropType notation inside objectOf.");var yt=vt[Pt],Ht=et(yt);if(Ht!=="object")return new Te("Invalid "+Xt+" `"+cn+"` of type `"+Ht+"` supplied to `"+Ut+"`, expected an object.");for(var St in yt)if(Ac(yt,St)){var In=dt(yt,St,Ut,Xt,cn+"."+St,is);if(In instanceof Error)return In}return null})},oneOf:function(dt){return Array.isArray(dt)?De(function(vt,Pt,Ut,Xt,cn){for(var yt=vt[Pt],Ht=0;Ht<dt.length;Ht++)if(ae(yt,dt[Ht]))return null;var St=JSON.stringify(dt,function(In,Jn){return lt(Jn)==="symbol"?String(Jn):Jn});return new Te("Invalid "+Xt+" `"+cn+"` of value `"+String(yt)+"` supplied to `"+Ut+"`, expected one of "+St+".")}):(ba(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),Fl)},oneOfType:function(dt){if(!Array.isArray(dt))return ba("Invalid argument supplied to oneOfType, expected an instance of array."),Fl;for(var vt=0;vt<dt.length;vt++){var Pt=dt[vt];if(typeof Pt!="function")return ba("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+Mt(Pt)+" at index "+vt+"."),Fl}return De(function(Ut,Xt,cn,yt,Ht){for(var St=0;St<dt.length;St++)if((0,dt[St])(Ut,Xt,cn,yt,Ht,is)==null)return null;return new Te("Invalid "+yt+" `"+Ht+"` supplied to `"+cn+"`.")})},shape:function(dt){return De(function(vt,Pt,Ut,Xt,cn){var yt=vt[Pt],Ht=et(yt);if(Ht!=="object")return new Te("Invalid "+Xt+" `"+cn+"` of type `"+Ht+"` supplied to `"+Ut+"`, expected `object`.");for(var St in dt){var In=dt[St];if(In){var Jn=In(yt,St,Ut,Xt,cn+"."+St,is);if(Jn)return Jn}}return null})},exact:function(dt){return De(function(vt,Pt,Ut,Xt,cn){var yt=vt[Pt],Ht=et(yt);if(Ht!=="object")return new Te("Invalid "+Xt+" `"+cn+"` of type `"+Ht+"` supplied to `"+Ut+"`, expected `object`.");var St=Nf({},vt[Pt],dt);for(var In in St){var Jn=dt[In];if(!Jn)return new Te("Invalid "+Xt+" `"+cn+"` key `"+In+"` supplied to `"+Ut+"`.\nBad object: "+JSON.stringify(vt[Pt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(dt),null,"  "));var Ai=Jn(yt,In,Ut,Xt,cn+"."+In,is);if(Ai)return Ai}return null})}};function ae(dt,vt){return dt===vt?dt!==0||1/dt==1/vt:dt!=dt&&vt!=vt}s(ae,"is");function Te(dt){this.message=dt,this.stack=""}s(Te,"PropTypeError");function De(dt){var vt={},Pt=0;function Ut(cn,yt,Ht,St,In,Jn,Ai){if(St=St||se,Jn=Jn||Ht,Ai!==is){if(B){var sr=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw sr.name="Invariant Violation",sr}if(typeof ot<"u"){var ar=St+":"+Ht;!vt[ar]&&Pt<3&&(ba("You are manually calling a React.PropTypes validation function for the `"+Jn+"` prop on `"+St+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),vt[ar]=!0,Pt++)}}return yt[Ht]==null?cn?yt[Ht]===null?new Te("The "+In+" `"+Jn+"` is marked as required in `"+St+"`, but its value is `null`."):new Te("The "+In+" `"+Jn+"` is marked as required in `"+St+"`, but its value is `undefined`."):null:dt(yt,Ht,St,In,Jn)}s(Ut,"checkType");var Xt=Ut.bind(null,!1);return Xt.isRequired=Ut.bind(null,!0),Xt}s(De,"createChainableTypeChecker");function ke(dt){return De(function(vt,Pt,Ut,Xt,cn,yt){var Ht=vt[Pt];return et(Ht)===dt?null:new Te("Invalid "+Xt+" `"+cn+"` of type `"+lt(Ht)+"` supplied to `"+Ut+"`, expected `"+dt+"`.")})}s(ke,"createPrimitiveTypeChecker");function Ge(dt){switch(typeof dt){case"number":case"string":case"undefined":return!0;case"boolean":return!dt;case"object":if(Array.isArray(dt))return dt.every(Ge);if(dt===null||ie(dt))return!0;var vt=function(cn){var yt=cn&&(V&&cn[V]||cn[Z]);if(typeof yt=="function")return yt}(dt);if(!vt)return!1;var Pt,Ut=vt.call(dt);if(vt!==dt.entries){for(;!(Pt=Ut.next()).done;)if(!Ge(Pt.value))return!1}else for(;!(Pt=Ut.next()).done;){var Xt=Pt.value;if(Xt&&!Ge(Xt[1]))return!1}return!0;default:return!1}}s(Ge,"isNode");function et(dt){var vt=typeof dt;return Array.isArray(dt)?"array":dt instanceof RegExp?"object":function(Pt,Ut){return Pt==="symbol"||!!Ut&&(Ut["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&Ut instanceof Symbol)}(vt,dt)?"symbol":vt}s(et,"getPropType");function lt(dt){if(dt==null)return""+dt;var vt=et(dt);if(vt==="object"){if(dt instanceof Date)return"date";if(dt instanceof RegExp)return"regexp"}return vt}s(lt,"getPreciseType");function Mt(dt){var vt=lt(dt);switch(vt){case"array":case"object":return"an "+vt;case"boolean":case"date":case"regexp":return"a "+vt;default:return vt}}return s(Mt,"getPostfixForTypeWarning"),Te.prototype=Error.prototype,me.checkPropTypes=xd,me.resetWarningCache=xd.resetWarningCache,me.PropTypes=me}s(xf,"factoryWithTypeCheckers");var wt=Xs(function(ie){var B=xl;ie.exports=xf(B.isElement,!0)});function Mc(ie){var B,V,Z="";if(ie)if(typeof ie=="object")if(ie.push)for(B=0;B<ie.length;B++)ie[B]&&(V=Mc(ie[B]))&&(Z&&(Z+=" "),Z+=V);else for(B in ie)ie[B]&&(V=Mc(B))&&(Z&&(Z+=" "),Z+=V);else typeof ie=="boolean"||ie.call||(Z&&(Z+=" "),Z+=ie);return Z}s(Mc,"toVal");function Oo(){for(var ie,B=0,V="";B<arguments.length;)(ie=Mc(arguments[B++]))&&(V&&(V+=" "),V+=ie);return V}s(Oo,"clsx");function rs(ie){var B=!(0<arguments.length&&ie!==void 0)||ie,V={};return function(Z){var se=Z.callback,me=Z.indices,ae=Object.keys(me),Te=!B||ae.every(function(ke){var Ge=me[ke];return Array.isArray(Ge)?0<Ge.length:0<=Ge}),De=ae.length!==Object.keys(V).length||ae.some(function(ke){var Ge=V[ke],et=me[ke];return Array.isArray(et)?Ge.join(",")!==et.join(","):Ge!==et});V=me,Te&&De&&se(me)}}s(rs,"createCallbackMemoizer");var Ul,Bf=!(typeof J>"u"||!J.document||!J.document.createElement);function _a(ie){if((!Ul&&Ul!==0||ie)&&Bf){var B=Vt.createElement("div");B.style.position="absolute",B.style.top="-9999px",B.style.width="50px",B.style.height="50px",B.style.overflow="scroll",Vt.body.appendChild(B),Ul=B.offsetWidth-B.clientWidth,Vt.body.removeChild(B)}return Ul}s(_a,"scrollbarSize");var Ff="observed",Ta="requested",Qs=function(){function ie(){var B,V;er(this,ie);for(var Z=arguments.length,se=new Array(Z),me=0;me<Z;me++)se[me]=arguments[me];return at(At(V=Ur(this,(B=Cr(ie)).call.apply(B,[this].concat(se)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),at(At(V),"_calculateSizeAndPositionDataOnNextUpdate",!1),at(At(V),"_onSectionRenderedMemoizer",rs()),at(At(V),"_onScrollMemoizer",rs(!1)),at(At(V),"_invokeOnSectionRenderedHelper",function(){var ae=V.props,Te=ae.cellLayoutManager,De=ae.onSectionRendered;V._onSectionRenderedMemoizer({callback:De,indices:{indices:Te.getLastRenderedIndices()}})}),at(At(V),"_setScrollingContainerRef",function(ae){V._scrollingContainer=ae}),at(At(V),"_updateScrollPositionForScrollToCell",function(){var ae=V.props,Te=ae.cellLayoutManager,De=ae.height,ke=ae.scrollToAlignment,Ge=ae.scrollToCell,et=ae.width,lt=V.state,Mt=lt.scrollLeft,dt=lt.scrollTop;if(0<=Ge){var vt=Te.getScrollPositionForCell({align:ke,cellIndex:Ge,height:De,scrollLeft:Mt,scrollTop:dt,width:et});vt.scrollLeft===Mt&&vt.scrollTop===dt||V._setScrollPosition(vt)}}),at(At(V),"_onScroll",function(ae){if(ae.target===V._scrollingContainer){V._enablePointerEventsAfterDelay();var Te=V.props,De=Te.cellLayoutManager,ke=Te.height,Ge=Te.isScrollingChange,et=Te.width,lt=V._scrollbarSize,Mt=De.getTotalSize(),dt=Mt.height,vt=Mt.width,Pt=Math.max(0,Math.min(vt-et+lt,ae.target.scrollLeft)),Ut=Math.max(0,Math.min(dt-ke+lt,ae.target.scrollTop));if(V.state.scrollLeft!==Pt||V.state.scrollTop!==Ut){var Xt=ae.cancelable?Ff:Ta;V.state.isScrolling||Ge(!0),V.setState({isScrolling:!0,scrollLeft:Pt,scrollPositionChangeReason:Xt,scrollTop:Ut})}V._invokeOnScrollMemoizer({scrollLeft:Pt,scrollTop:Ut,totalWidth:vt,totalHeight:dt})}}),V._scrollbarSize=_a(),V._scrollbarSize===void 0?(V._scrollbarSizeMeasured=!1,V._scrollbarSize=0):V._scrollbarSizeMeasured=!0,V}return s(ie,"CollectionView"),Dr(ie,Dn.PureComponent),or(ie,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var B=this.props,V=B.cellLayoutManager,Z=B.scrollLeft,se=B.scrollToCell,me=B.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=_a(),this._scrollbarSizeMeasured=!0,this.setState({})),0<=se?this._updateScrollPositionForScrollToCell():(0<=Z||0<=me)&&this._setScrollPosition({scrollLeft:Z,scrollTop:me}),this._invokeOnSectionRenderedHelper();var ae=V.getTotalSize(),Te=ae.height,De=ae.width;this._invokeOnScrollMemoizer({scrollLeft:Z||0,scrollTop:me||0,totalHeight:Te,totalWidth:De})}},{key:"componentDidUpdate",value:function(B,V){var Z=this.props,se=Z.height,me=Z.scrollToAlignment,ae=Z.scrollToCell,Te=Z.width,De=this.state,ke=De.scrollLeft,Ge=De.scrollPositionChangeReason,et=De.scrollTop;Ge===Ta&&(0<=ke&&ke!==V.scrollLeft&&ke!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=ke),0<=et&&et!==V.scrollTop&&et!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=et)),se===B.height&&me===B.scrollToAlignment&&ae===B.scrollToCell&&Te===B.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&$t(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var B=this.props,V=B.autoHeight,Z=B.cellCount,se=B.cellLayoutManager,me=B.className,ae=B.height,Te=B.horizontalOverscanSize,De=B.id,ke=B.noContentRenderer,Ge=B.style,et=B.verticalOverscanSize,lt=B.width,Mt=this.state,dt=Mt.isScrolling,vt=Mt.scrollLeft,Pt=Mt.scrollTop;this._lastRenderedCellCount===Z&&this._lastRenderedCellLayoutManager===se&&!this._calculateSizeAndPositionDataOnNextUpdate||(this._lastRenderedCellCount=Z,this._lastRenderedCellLayoutManager=se,this._calculateSizeAndPositionDataOnNextUpdate=!1,se.calculateSizeAndPositionData());var Ut=se.getTotalSize(),Xt=Ut.height,cn=Ut.width,yt=Math.max(0,vt-Te),Ht=Math.max(0,Pt-et),St=Math.min(cn,vt+lt+Te),In=Math.min(Xt,Pt+ae+et),Jn=0<ae&&0<lt?se.cellRenderers({height:In-Ht,isScrolling:dt,width:St-yt,x:yt,y:Ht}):[],Ai={boxSizing:"border-box",direction:"ltr",height:V?"auto":ae,position:"relative",WebkitOverflowScrolling:"touch",width:lt,willChange:"transform"},sr=ae<Xt?this._scrollbarSize:0,ar=lt<cn?this._scrollbarSize:0;return Ai.overflowX=cn+sr<=lt?"hidden":"auto",Ai.overflowY=Xt+ar<=ae?"hidden":"auto",Dn.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Oo("ReactVirtualized__Collection",me),id:De,onScroll:this._onScroll,role:"grid",style:bi({},Ai,{},Ge),tabIndex:0},0<Z&&Dn.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:Xt,maxHeight:Xt,maxWidth:cn,overflow:"hidden",pointerEvents:dt?"none":"",width:cn}},Jn),Z===0&&ke())}},{key:"_enablePointerEventsAfterDelay",value:function(){var B=this;this._disablePointerEventsTimeoutId&&$t(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Of(function(){(0,B.props.isScrollingChange)(!1),B._disablePointerEventsTimeoutId=null,B.setState({isScrolling:!1})},150)}},{key:"_invokeOnScrollMemoizer",value:function(B){var V=this,Z=B.scrollLeft,se=B.scrollTop,me=B.totalHeight,ae=B.totalWidth;this._onScrollMemoizer({callback:function(Te){var De=Te.scrollLeft,ke=Te.scrollTop,Ge=V.props,et=Ge.height;(0,Ge.onScroll)({clientHeight:et,clientWidth:Ge.width,scrollHeight:me,scrollLeft:De,scrollTop:ke,scrollWidth:ae})},indices:{scrollLeft:Z,scrollTop:se}})}},{key:"_setScrollPosition",value:function(B){var V=B.scrollLeft,Z=B.scrollTop,se={scrollPositionChangeReason:Ta};0<=V&&(se.scrollLeft=V),0<=Z&&(se.scrollTop=Z),(0<=V&&V!==this.state.scrollLeft||0<=Z&&Z!==this.state.scrollTop)&&this.setState(se)}}],[{key:"getDerivedStateFromProps",value:function(B,V){return B.cellCount!==0||V.scrollLeft===0&&V.scrollTop===0?B.scrollLeft!==V.scrollLeft||B.scrollTop!==V.scrollTop?{scrollLeft:B.scrollLeft!=null?B.scrollLeft:V.scrollLeft,scrollTop:B.scrollTop!=null?B.scrollTop:V.scrollTop,scrollPositionChangeReason:Ta}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Ta}}}]),ie}();at(Qs,"propTypes",{"aria-label":wt.string,autoHeight:wt.bool,cellCount:wt.number.isRequired,cellLayoutManager:wt.object.isRequired,className:wt.string,height:wt.number.isRequired,id:wt.string,horizontalOverscanSize:wt.number.isRequired,isScrollingChange:wt.func,noContentRenderer:wt.func.isRequired,onScroll:wt.func.isRequired,onSectionRendered:wt.func.isRequired,scrollLeft:wt.number,scrollToAlignment:wt.oneOf(["auto","end","start","center"]).isRequired,scrollToCell:wt.number.isRequired,scrollTop:wt.number,style:wt.object,verticalOverscanSize:wt.number.isRequired,width:wt.number.isRequired}),at(Qs,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),$o(Qs);var Uf=function(){function ie(B){var V=B.height,Z=B.width,se=B.x,me=B.y;er(this,ie),this.height=V,this.width=Z,this.x=se,this.y=me,this._indexMap={},this._indices=[]}return s(ie,"Section"),or(ie,[{key:"addCellIndex",value:function(B){var V=B.index;this._indexMap[V]||(this._indexMap[V]=!0,this._indices.push(V))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),ie}(),Vf=function(){function ie(){var B=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100;er(this,ie),this._sectionSize=B,this._cellMetadata=[],this._sections={}}return s(ie,"SectionManager"),or(ie,[{key:"getCellIndices",value:function(B){var V=B.height,Z=B.width,se=B.x,me=B.y,ae={};return this.getSections({height:V,width:Z,x:se,y:me}).forEach(function(Te){return Te.getCellIndices().forEach(function(De){ae[De]=De})}),Object.keys(ae).map(function(Te){return ae[Te]})}},{key:"getCellMetadata",value:function(B){var V=B.index;return this._cellMetadata[V]}},{key:"getSections",value:function(B){for(var V=B.height,Z=B.width,se=B.x,me=B.y,ae=Math.floor(se/this._sectionSize),Te=Math.floor((se+Z-1)/this._sectionSize),De=Math.floor(me/this._sectionSize),ke=Math.floor((me+V-1)/this._sectionSize),Ge=[],et=ae;et<=Te;et++)for(var lt=De;lt<=ke;lt++){var Mt="".concat(et,".").concat(lt);this._sections[Mt]||(this._sections[Mt]=new Uf({height:this._sectionSize,width:this._sectionSize,x:et*this._sectionSize,y:lt*this._sectionSize})),Ge.push(this._sections[Mt])}return Ge}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var B=this;return Object.keys(this._sections).map(function(V){return B._sections[V].toString()})}},{key:"registerCell",value:function(B){var V=B.cellMetadatum,Z=B.index;this._cellMetadata[Z]=V,this.getSections(V).forEach(function(se){return se.addCellIndex({index:Z})})}}]),ie}();function Vl(ie){var B=ie.align,V=B===void 0?"auto":B,Z=ie.cellOffset,se=ie.cellSize,me=ie.containerSize,ae=ie.currentOffset,Te=Z,De=Te-me+se;switch(V){case"start":return Te;case"end":return De;case"center":return Te-(me-se)/2;default:return Math.max(De,Math.min(Te,ae))}}s(Vl,"getUpdatedOffsetForIndex");var C=function(){function ie(B,V){var Z;return er(this,ie),(Z=Ur(this,Cr(ie).call(this,B,V)))._cellMetadata=[],Z._lastRenderedCellIndices=[],Z._cellCache=[],Z._isScrollingChange=Z._isScrollingChange.bind(At(Z)),Z._setCollectionViewRef=Z._setCollectionViewRef.bind(At(Z)),Z}return s(ie,"Collection"),Dr(ie,Dn.PureComponent),or(ie,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var B=to({},this.props);return Dn.createElement(Qs,to({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},B))}},{key:"calculateSizeAndPositionData",value:function(){var B=this.props,V=function(Z){for(var se=Z.cellCount,me=Z.cellSizeAndPositionGetter,ae=Z.sectionSize,Te=[],De=new Vf(ae),ke=0,Ge=0,et=0;et<se;et++){var lt=me({index:et});if(lt.height==null||isNaN(lt.height)||lt.width==null||isNaN(lt.width)||lt.x==null||isNaN(lt.x)||lt.y==null||isNaN(lt.y))throw Error("Invalid metadata returned for cell ".concat(et,`:
        x:`).concat(lt.x,", y:").concat(lt.y,", width:").concat(lt.width,", height:").concat(lt.height));ke=Math.max(ke,lt.y+lt.height),Ge=Math.max(Ge,lt.x+lt.width),Te[et]=lt,De.registerCell({cellMetadatum:lt,index:et})}return{cellMetadata:Te,height:ke,sectionManager:De,width:Ge}}({cellCount:B.cellCount,cellSizeAndPositionGetter:B.cellSizeAndPositionGetter,sectionSize:B.sectionSize});this._cellMetadata=V.cellMetadata,this._sectionManager=V.sectionManager,this._height=V.height,this._width=V.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(B){var V=B.align,Z=B.cellIndex,se=B.height,me=B.scrollLeft,ae=B.scrollTop,Te=B.width,De=this.props.cellCount;if(0<=Z&&Z<De){var ke=this._cellMetadata[Z];me=Vl({align:V,cellOffset:ke.x,cellSize:ke.width,containerSize:Te,currentOffset:me,targetIndex:Z}),ae=Vl({align:V,cellOffset:ke.y,cellSize:ke.height,containerSize:se,currentOffset:ae,targetIndex:Z})}return{scrollLeft:me,scrollTop:ae}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(B){var V=this,Z=B.height,se=B.isScrolling,me=B.width,ae=B.x,Te=B.y,De=this.props,ke=De.cellGroupRenderer,Ge=De.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:Z,width:me,x:ae,y:Te}),ke({cellCache:this._cellCache,cellRenderer:Ge,cellSizeAndPositionGetter:function(et){var lt=et.index;return V._sectionManager.getCellMetadata({index:lt})},indices:this._lastRenderedCellIndices,isScrolling:se})}},{key:"_isScrollingChange",value:function(B){B||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(B){this._collectionView=B}}]),ie}();at(C,"propTypes",{"aria-label":wt.string,cellCount:wt.number.isRequired,cellGroupRenderer:wt.func.isRequired,cellRenderer:wt.func.isRequired,cellSizeAndPositionGetter:wt.func.isRequired,sectionSize:wt.number}),at(C,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(ie){var B=ie.cellCache,V=ie.cellRenderer,Z=ie.cellSizeAndPositionGetter,se=ie.indices,me=ie.isScrolling;return se.map(function(ae){var Te=Z({index:ae}),De={index:ae,isScrolling:me,key:ae,style:{height:Te.height,left:Te.x,position:"absolute",top:Te.y,width:Te.width}};return me?(ae in B||(B[ae]=V(De)),B[ae]):V(De)}).filter(function(ae){return!!ae})}});var y=function(){function ie(B,V){var Z;return er(this,ie),(Z=Ur(this,Cr(ie).call(this,B,V)))._registerChild=Z._registerChild.bind(At(Z)),Z}return s(ie,"ColumnSizer"),Dr(ie,Dn.PureComponent),or(ie,[{key:"componentDidUpdate",value:function(B){var V=this.props,Z=V.columnMaxWidth,se=V.columnMinWidth,me=V.columnCount,ae=V.width;Z===B.columnMaxWidth&&se===B.columnMinWidth&&me===B.columnCount&&ae===B.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var B=this.props,V=B.children,Z=B.columnMaxWidth,se=B.columnMinWidth,me=B.columnCount,ae=B.width,Te=se||1,De=Z?Math.min(Z,ae):ae,ke=ae/me;return ke=Math.max(Te,ke),ke=Math.min(De,ke),ke=Math.floor(ke),V({adjustedWidth:Math.min(ae,ke*me),columnWidth:ke,getColumnWidth:function(){return ke},registerChild:this._registerChild})}},{key:"_registerChild",value:function(B){if(B&&typeof B.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=B,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),ie}();function b(ie){var B=ie.cellCount,V=ie.cellSize,Z=ie.computeMetadataCallback,se=ie.computeMetadataCallbackProps,me=ie.nextCellsCount,ae=ie.nextCellSize,Te=ie.nextScrollToIndex,De=ie.scrollToIndex,ke=ie.updateScrollOffsetForScrollToIndex;B===me&&(typeof V!="number"&&typeof ae!="number"||V===ae)||(Z(se),0<=De&&De===Te&&ke())}s(b,"calculateSizeAndPositionDataAndUpdateScrollOffset"),at(y,"propTypes",{children:wt.func.isRequired,columnMaxWidth:wt.number,columnMinWidth:wt.number,columnCount:wt.number.isRequired,width:wt.number.isRequired});var I,z=function(){function ie(B){var V=B.cellCount,Z=B.cellSizeGetter,se=B.estimatedCellSize;er(this,ie),at(this,"_cellSizeAndPositionData",{}),at(this,"_lastMeasuredIndex",-1),at(this,"_lastBatchedIndex",-1),at(this,"_cellCount",void 0),at(this,"_cellSizeGetter",void 0),at(this,"_estimatedCellSize",void 0),this._cellSizeGetter=Z,this._cellCount=V,this._estimatedCellSize=se}return s(ie,"CellSizeAndPositionManager"),or(ie,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(B){var V=B.cellCount,Z=B.estimatedCellSize,se=B.cellSizeGetter;this._cellCount=V,this._estimatedCellSize=Z,this._cellSizeGetter=se}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(B){if(B<0||B>=this._cellCount)throw Error("Requested index ".concat(B," is outside of range 0..").concat(this._cellCount));if(B>this._lastMeasuredIndex)for(var V=this.getSizeAndPositionOfLastMeasuredCell(),Z=V.offset+V.size,se=this._lastMeasuredIndex+1;se<=B;se++){var me=this._cellSizeGetter({index:se});if(me===void 0||isNaN(me))throw Error("Invalid size returned for cell ".concat(se," of value ").concat(me));me===null?(this._cellSizeAndPositionData[se]={offset:Z,size:0},this._lastBatchedIndex=B):(this._cellSizeAndPositionData[se]={offset:Z,size:me},Z+=me,this._lastMeasuredIndex=B)}return this._cellSizeAndPositionData[B]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var B=this.getSizeAndPositionOfLastMeasuredCell();return B.offset+B.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(B){var V=B.align,Z=V===void 0?"auto":V,se=B.containerSize,me=B.currentOffset,ae=B.targetIndex;if(se<=0)return 0;var Te,De=this.getSizeAndPositionOfCell(ae),ke=De.offset,Ge=ke-se+De.size;switch(Z){case"start":Te=ke;break;case"end":Te=Ge;break;case"center":Te=ke-(se-De.size)/2;break;default:Te=Math.max(Ge,Math.min(ke,me))}var et=this.getTotalSize();return Math.max(0,Math.min(et-se,Te))}},{key:"getVisibleCellRange",value:function(B){var V=B.containerSize,Z=B.offset;if(this.getTotalSize()===0)return{};var se=Z+V,me=this._findNearestCell(Z),ae=this.getSizeAndPositionOfCell(me);Z=ae.offset+ae.size;for(var Te=me;Z<se&&Te<this._cellCount-1;)Te++,Z+=this.getSizeAndPositionOfCell(Te).size;return{start:me,stop:Te}}},{key:"resetCell",value:function(B){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,B-1)}},{key:"_binarySearch",value:function(B,V,Z){for(;V<=B;){var se=V+Math.floor((B-V)/2),me=this.getSizeAndPositionOfCell(se).offset;if(me===Z)return se;me<Z?V=se+1:Z<me&&(B=se-1)}return 0<V?V-1:0}},{key:"_exponentialSearch",value:function(B,V){for(var Z=1;B<this._cellCount&&this.getSizeAndPositionOfCell(B).offset<V;)B+=Z,Z*=2;return this._binarySearch(Math.min(B,this._cellCount-1),Math.floor(B/2),V)}},{key:"_findNearestCell",value:function(B){if(isNaN(B))throw Error("Invalid offset ".concat(B," specified"));B=Math.max(0,B);var V=this.getSizeAndPositionOfLastMeasuredCell(),Z=Math.max(0,this._lastMeasuredIndex);return V.offset>=B?this._binarySearch(Z,0,B):this._exponentialSearch(Z,B)}}]),ie}(),G=s(function(){return typeof J<"u"&&J.chrome?16777100:15e5},"getMaxElementSize"),Y=function(){function ie(B){var V=B.maxScrollSize,Z=V===void 0?G():V,se=jo(B,["maxScrollSize"]);er(this,ie),at(this,"_cellSizeAndPositionManager",void 0),at(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new z(se),this._maxScrollSize=Z}return s(ie,"ScalingCellSizeAndPositionManager"),or(ie,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(B){this._cellSizeAndPositionManager.configure(B)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(B){var V=B.containerSize,Z=B.offset,se=this._cellSizeAndPositionManager.getTotalSize(),me=this.getTotalSize(),ae=this._getOffsetPercentage({containerSize:V,offset:Z,totalSize:me});return Math.round(ae*(me-se))}},{key:"getSizeAndPositionOfCell",value:function(B){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(B)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(B){var V=B.align,Z=V===void 0?"auto":V,se=B.containerSize,me=B.currentOffset,ae=B.targetIndex;me=this._safeOffsetToOffset({containerSize:se,offset:me});var Te=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:Z,containerSize:se,currentOffset:me,targetIndex:ae});return this._offsetToSafeOffset({containerSize:se,offset:Te})}},{key:"getVisibleCellRange",value:function(B){var V=B.containerSize,Z=B.offset;return Z=this._safeOffsetToOffset({containerSize:V,offset:Z}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:V,offset:Z})}},{key:"resetCell",value:function(B){this._cellSizeAndPositionManager.resetCell(B)}},{key:"_getOffsetPercentage",value:function(B){var V=B.containerSize,Z=B.offset,se=B.totalSize;return se<=V?0:Z/(se-V)}},{key:"_offsetToSafeOffset",value:function(B){var V=B.containerSize,Z=B.offset,se=this._cellSizeAndPositionManager.getTotalSize(),me=this.getTotalSize();if(se===me)return Z;var ae=this._getOffsetPercentage({containerSize:V,offset:Z,totalSize:se});return Math.round(ae*(me-V))}},{key:"_safeOffsetToOffset",value:function(B){var V=B.containerSize,Z=B.offset,se=this._cellSizeAndPositionManager.getTotalSize(),me=this.getTotalSize();if(se===me)return Z;var ae=this._getOffsetPercentage({containerSize:V,offset:Z,totalSize:me});return Math.round(ae*(se-V))}}]),ie}();function ue(ie){var B=ie.cellCount,V=ie.overscanCellsCount,Z=ie.scrollDirection,se=ie.startIndex,me=ie.stopIndex;return Z===1?{overscanStartIndex:Math.max(0,se),overscanStopIndex:Math.min(B-1,me+V)}:{overscanStartIndex:Math.max(0,se-V),overscanStopIndex:Math.min(B-1,me)}}s(ue,"defaultOverscanIndicesGetter");function re(ie){var B=ie.cellSize,V=ie.cellSizeAndPositionManager,Z=ie.previousCellsCount,se=ie.previousCellSize,me=ie.previousScrollToAlignment,ae=ie.previousScrollToIndex,Te=ie.previousSize,De=ie.scrollOffset,ke=ie.scrollToAlignment,Ge=ie.scrollToIndex,et=ie.size,lt=ie.sizeJustIncreasedFromZero,Mt=ie.updateScrollIndexCallback,dt=V.getCellCount(),vt=0<=Ge&&Ge<dt;vt&&(et!==Te||lt||!se||typeof B=="number"&&B!==se||ke!==me||Ge!==ae)?Mt(Ge):!vt&&0<dt&&(et<Te||dt<Z)&&De>V.getTotalSize()-et&&Mt(dt-1)}s(re,"updateScrollIndexHelper");function ye(ie){for(var B=ie.cellCache,V=ie.cellRenderer,Z=ie.columnSizeAndPositionManager,se=ie.columnStartIndex,me=ie.columnStopIndex,ae=ie.deferredMeasurementCache,Te=ie.horizontalOffsetAdjustment,De=ie.isScrolling,ke=ie.isScrollingOptOut,Ge=ie.parent,et=ie.rowSizeAndPositionManager,lt=ie.rowStartIndex,Mt=ie.rowStopIndex,dt=ie.styleCache,vt=ie.verticalOffsetAdjustment,Pt=ie.visibleColumnIndices,Ut=ie.visibleRowIndices,Xt=[],cn=Z.areOffsetsAdjusted()||et.areOffsetsAdjusted(),yt=!De&&!cn,Ht=lt;Ht<=Mt;Ht++)for(var St=et.getSizeAndPositionOfCell(Ht),In=se;In<=me;In++){var Jn=Z.getSizeAndPositionOfCell(In),Ai=In>=Pt.start&&In<=Pt.stop&&Ht>=Ut.start&&Ht<=Ut.stop,sr="".concat(Ht,"-").concat(In),ar=void 0;yt&&dt[sr]?ar=dt[sr]:ae&&!ae.has(Ht,In)?ar={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(ar={height:St.size,left:Jn.offset+Te,position:"absolute",top:St.offset+vt,width:Jn.size},dt[sr]=ar);var dr={columnIndex:In,isScrolling:De,isVisible:Ai,key:sr,parent:Ge,rowIndex:Ht,style:ar},ao=void 0;(ao=!ke&&!De||Te||vt?V(dr):(B[sr]||(B[sr]=V(dr)),B[sr]))!=null&&ao!==!1&&(le(Ge,ao),Xt.push(ao))}return Xt}s(ye,"defaultCellRangeRenderer");function le(ie,B){B&&(B.type&&B.type.__internalCellMeasurerFlag&&(B=B.props.children),B&&B.props&&B.props.style===void 0&&ie.__warnedAboutMissingStyle!==!0&&(ie.__warnedAboutMissingStyle=!0,ot.warn("Rendered cell should include style property for positioning.")))}s(le,"warnAboutMissingStyle");var _t=(I=typeof J<"u"?J:typeof ul<"u"?ul:{}).requestAnimationFrame||I.webkitRequestAnimationFrame||I.mozRequestAnimationFrame||I.oRequestAnimationFrame||I.msRequestAnimationFrame||function(ie){return I.setTimeout(ie,1e3/60)},qt=I.cancelAnimationFrame||I.webkitCancelAnimationFrame||I.mozCancelAnimationFrame||I.oCancelAnimationFrame||I.msCancelAnimationFrame||function(ie){I.clearTimeout(ie)},vn=_t,yn=qt,tn=s(function(ie){return yn(ie.id)},"cancelAnimationTimeout"),Pn=s(function(ie,B){var V;Promise.resolve().then(function(){V=Date.now()});var Z={id:vn(s(function se(){Date.now()-V>=B?ie.call():Z.id=vn(se)},"timeout"))};return Z},"requestAnimationTimeout"),Nr="observed",Bd="requested",Ko=function(){function ie(B){var V;er(this,ie),at(At(V=Ur(this,Cr(ie).call(this,B))),"_onGridRenderedMemoizer",rs()),at(At(V),"_onScrollMemoizer",rs(!1)),at(At(V),"_deferredInvalidateColumnIndex",null),at(At(V),"_deferredInvalidateRowIndex",null),at(At(V),"_recomputeScrollLeftFlag",!1),at(At(V),"_recomputeScrollTopFlag",!1),at(At(V),"_horizontalScrollBarSize",0),at(At(V),"_verticalScrollBarSize",0),at(At(V),"_scrollbarPresenceChanged",!1),at(At(V),"_scrollingContainer",void 0),at(At(V),"_childrenToDisplay",void 0),at(At(V),"_columnStartIndex",void 0),at(At(V),"_columnStopIndex",void 0),at(At(V),"_rowStartIndex",void 0),at(At(V),"_rowStopIndex",void 0),at(At(V),"_renderedColumnStartIndex",0),at(At(V),"_renderedColumnStopIndex",0),at(At(V),"_renderedRowStartIndex",0),at(At(V),"_renderedRowStopIndex",0),at(At(V),"_initialScrollTop",void 0),at(At(V),"_initialScrollLeft",void 0),at(At(V),"_disablePointerEventsTimeoutId",void 0),at(At(V),"_styleCache",{}),at(At(V),"_cellCache",{}),at(At(V),"_debounceScrollEndedCallback",function(){V._disablePointerEventsTimeoutId=null,V.setState({isScrolling:!1,needToResetStyleCache:!1})}),at(At(V),"_invokeOnGridRenderedHelper",function(){var me=V.props.onSectionRendered;V._onGridRenderedMemoizer({callback:me,indices:{columnOverscanStartIndex:V._columnStartIndex,columnOverscanStopIndex:V._columnStopIndex,columnStartIndex:V._renderedColumnStartIndex,columnStopIndex:V._renderedColumnStopIndex,rowOverscanStartIndex:V._rowStartIndex,rowOverscanStopIndex:V._rowStopIndex,rowStartIndex:V._renderedRowStartIndex,rowStopIndex:V._renderedRowStopIndex}})}),at(At(V),"_setScrollingContainerRef",function(me){V._scrollingContainer=me}),at(At(V),"_onScroll",function(me){me.target===V._scrollingContainer&&V.handleScrollEvent(me.target)});var Z=new Y({cellCount:B.columnCount,cellSizeGetter:function(me){return ie._wrapSizeGetter(B.columnWidth)(me)},estimatedCellSize:ie._getEstimatedColumnSize(B)}),se=new Y({cellCount:B.rowCount,cellSizeGetter:function(me){return ie._wrapSizeGetter(B.rowHeight)(me)},estimatedCellSize:ie._getEstimatedRowSize(B)});return V.state={instanceProps:{columnSizeAndPositionManager:Z,rowSizeAndPositionManager:se,prevColumnWidth:B.columnWidth,prevRowHeight:B.rowHeight,prevColumnCount:B.columnCount,prevRowCount:B.rowCount,prevIsScrolling:B.isScrolling===!0,prevScrollToColumn:B.scrollToColumn,prevScrollToRow:B.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<B.scrollToRow&&(V._initialScrollTop=V._getCalculatedScrollTop(B,V.state)),0<B.scrollToColumn&&(V._initialScrollLeft=V._getCalculatedScrollLeft(B,V.state)),V}return s(ie,"Grid"),Dr(ie,Dn.PureComponent),or(ie,[{key:"getOffsetForCell",value:function(B){var V=0<arguments.length&&B!==void 0?B:{},Z=V.alignment,se=Z===void 0?this.props.scrollToAlignment:Z,me=V.columnIndex,ae=me===void 0?this.props.scrollToColumn:me,Te=V.rowIndex,De=Te===void 0?this.props.scrollToRow:Te,ke=bi({},this.props,{scrollToAlignment:se,scrollToColumn:ae,scrollToRow:De});return{scrollLeft:this._getCalculatedScrollLeft(ke),scrollTop:this._getCalculatedScrollTop(ke)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(B){var V=B.scrollLeft,Z=V===void 0?0:V,se=B.scrollTop,me=se===void 0?0:se;if(!(me<0)){this._debounceScrollEnded();var ae=this.props,Te=ae.autoHeight,De=ae.autoWidth,ke=ae.height,Ge=ae.width,et=this.state.instanceProps,lt=et.scrollbarSize,Mt=et.rowSizeAndPositionManager.getTotalSize(),dt=et.columnSizeAndPositionManager.getTotalSize(),vt=Math.min(Math.max(0,dt-Ge+lt),Z),Pt=Math.min(Math.max(0,Mt-ke+lt),me);if(this.state.scrollLeft!==vt||this.state.scrollTop!==Pt){var Ut={isScrolling:!0,scrollDirectionHorizontal:vt!==this.state.scrollLeft?vt>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:Pt!==this.state.scrollTop?Pt>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:Nr};Te||(Ut.scrollTop=Pt),De||(Ut.scrollLeft=vt),Ut.needToResetStyleCache=!1,this.setState(Ut)}this._invokeOnScrollMemoizer({scrollLeft:vt,scrollTop:Pt,totalColumnsWidth:dt,totalRowsHeight:Mt})}}},{key:"invalidateCellSizeAfterRender",value:function(B){var V=B.columnIndex,Z=B.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,V):V,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,Z):Z}},{key:"measureAllCells",value:function(){var B=this.props,V=B.columnCount,Z=B.rowCount,se=this.state.instanceProps;se.columnSizeAndPositionManager.getSizeAndPositionOfCell(V-1),se.rowSizeAndPositionManager.getSizeAndPositionOfCell(Z-1)}},{key:"recomputeGridSize",value:function(B){var V=0<arguments.length&&B!==void 0?B:{},Z=V.columnIndex,se=Z===void 0?0:Z,me=V.rowIndex,ae=me===void 0?0:me,Te=this.props,De=Te.scrollToColumn,ke=Te.scrollToRow,Ge=this.state.instanceProps;Ge.columnSizeAndPositionManager.resetCell(se),Ge.rowSizeAndPositionManager.resetCell(ae),this._recomputeScrollLeftFlag=0<=De&&(this.state.scrollDirectionHorizontal===1?se<=De:De<=se),this._recomputeScrollTopFlag=0<=ke&&(this.state.scrollDirectionVertical===1?ae<=ke:ke<=ae),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(B){var V=B.columnIndex,Z=B.rowIndex,se=this.props.columnCount,me=this.props;1<se&&V!==void 0&&this._updateScrollLeftForScrollToColumn(bi({},me,{scrollToColumn:V})),Z!==void 0&&this._updateScrollTopForScrollToRow(bi({},me,{scrollToRow:Z}))}},{key:"componentDidMount",value:function(){var B=this.props,V=B.getScrollbarSize,Z=B.height,se=B.scrollLeft,me=B.scrollToColumn,ae=B.scrollTop,Te=B.scrollToRow,De=B.width,ke=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),ke.scrollbarSizeMeasured||this.setState(function(lt){var Mt=bi({},lt,{needToResetStyleCache:!1});return Mt.instanceProps.scrollbarSize=V(),Mt.instanceProps.scrollbarSizeMeasured=!0,Mt}),typeof se=="number"&&0<=se||typeof ae=="number"&&0<=ae){var Ge=ie._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:se,scrollTop:ae});Ge&&(Ge.needToResetStyleCache=!1,this.setState(Ge))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var et=0<Z&&0<De;0<=me&&et&&this._updateScrollLeftForScrollToColumn(),0<=Te&&et&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:se||0,scrollTop:ae||0,totalColumnsWidth:ke.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:ke.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(B,V){var Z=this,se=this.props,me=se.autoHeight,ae=se.autoWidth,Te=se.columnCount,De=se.height,ke=se.rowCount,Ge=se.scrollToAlignment,et=se.scrollToColumn,lt=se.scrollToRow,Mt=se.width,dt=this.state,vt=dt.scrollLeft,Pt=dt.scrollPositionChangeReason,Ut=dt.scrollTop,Xt=dt.instanceProps;this._handleInvalidatedGridSize();var cn=0<Te&&B.columnCount===0||0<ke&&B.rowCount===0;Pt===Bd&&(!ae&&0<=vt&&(vt!==this._scrollingContainer.scrollLeft||cn)&&(this._scrollingContainer.scrollLeft=vt),!me&&0<=Ut&&(Ut!==this._scrollingContainer.scrollTop||cn)&&(this._scrollingContainer.scrollTop=Ut));var yt=(B.width===0||B.height===0)&&0<De&&0<Mt;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):re({cellSizeAndPositionManager:Xt.columnSizeAndPositionManager,previousCellsCount:B.columnCount,previousCellSize:B.columnWidth,previousScrollToAlignment:B.scrollToAlignment,previousScrollToIndex:B.scrollToColumn,previousSize:B.width,scrollOffset:vt,scrollToAlignment:Ge,scrollToIndex:et,size:Mt,sizeJustIncreasedFromZero:yt,updateScrollIndexCallback:function(){return Z._updateScrollLeftForScrollToColumn(Z.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):re({cellSizeAndPositionManager:Xt.rowSizeAndPositionManager,previousCellsCount:B.rowCount,previousCellSize:B.rowHeight,previousScrollToAlignment:B.scrollToAlignment,previousScrollToIndex:B.scrollToRow,previousSize:B.height,scrollOffset:Ut,scrollToAlignment:Ge,scrollToIndex:lt,size:De,sizeJustIncreasedFromZero:yt,updateScrollIndexCallback:function(){return Z._updateScrollTopForScrollToRow(Z.props)}}),this._invokeOnGridRenderedHelper(),vt!==V.scrollLeft||Ut!==V.scrollTop){var Ht=Xt.rowSizeAndPositionManager.getTotalSize(),St=Xt.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:vt,scrollTop:Ut,totalColumnsWidth:St,totalRowsHeight:Ht})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&tn(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var B=this.props,V=B.autoContainerWidth,Z=B.autoHeight,se=B.autoWidth,me=B.className,ae=B.containerProps,Te=B.containerRole,De=B.containerStyle,ke=B.height,Ge=B.id,et=B.noContentRenderer,lt=B.role,Mt=B.style,dt=B.tabIndex,vt=B.width,Pt=this.state,Ut=Pt.instanceProps,Xt=Pt.needToResetStyleCache,cn=this._isScrolling(),yt={boxSizing:"border-box",direction:"ltr",height:Z?"auto":ke,position:"relative",width:se?"auto":vt,WebkitOverflowScrolling:"touch",willChange:"transform"};Xt&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var Ht=Ut.columnSizeAndPositionManager.getTotalSize(),St=Ut.rowSizeAndPositionManager.getTotalSize(),In=ke<St?Ut.scrollbarSize:0,Jn=vt<Ht?Ut.scrollbarSize:0;Jn===this._horizontalScrollBarSize&&In===this._verticalScrollBarSize||(this._horizontalScrollBarSize=Jn,this._verticalScrollBarSize=In,this._scrollbarPresenceChanged=!0),yt.overflowX=Ht+In<=vt?"hidden":"auto",yt.overflowY=St+Jn<=ke?"hidden":"auto";var Ai=this._childrenToDisplay,sr=Ai.length===0&&0<ke&&0<vt;return Dn.createElement("div",to({ref:this._setScrollingContainerRef},ae,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Oo("ReactVirtualized__Grid",me),id:Ge,onScroll:this._onScroll,role:lt,style:bi({},yt,{},Mt),tabIndex:dt}),0<Ai.length&&Dn.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:Te,style:bi({width:V?"auto":Ht,height:St,maxWidth:Ht,maxHeight:St,overflow:"hidden",pointerEvents:cn?"none":"",position:"relative"},De)},Ai),sr&&et())}},{key:"_calculateChildrenToRender",value:function(B,V){var Z=0<arguments.length&&B!==void 0?B:this.props,se=1<arguments.length&&V!==void 0?V:this.state,me=Z.cellRenderer,ae=Z.cellRangeRenderer,Te=Z.columnCount,De=Z.deferredMeasurementCache,ke=Z.height,Ge=Z.overscanColumnCount,et=Z.overscanIndicesGetter,lt=Z.overscanRowCount,Mt=Z.rowCount,dt=Z.width,vt=Z.isScrollingOptOut,Pt=se.scrollDirectionHorizontal,Ut=se.scrollDirectionVertical,Xt=se.instanceProps,cn=0<this._initialScrollTop?this._initialScrollTop:se.scrollTop,yt=0<this._initialScrollLeft?this._initialScrollLeft:se.scrollLeft,Ht=this._isScrolling(Z,se);if(this._childrenToDisplay=[],0<ke&&0<dt){var St=Xt.columnSizeAndPositionManager.getVisibleCellRange({containerSize:dt,offset:yt}),In=Xt.rowSizeAndPositionManager.getVisibleCellRange({containerSize:ke,offset:cn}),Jn=Xt.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:dt,offset:yt}),Ai=Xt.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:ke,offset:cn});this._renderedColumnStartIndex=St.start,this._renderedColumnStopIndex=St.stop,this._renderedRowStartIndex=In.start,this._renderedRowStopIndex=In.stop;var sr=et({direction:"horizontal",cellCount:Te,overscanCellsCount:Ge,scrollDirection:Pt,startIndex:typeof St.start=="number"?St.start:0,stopIndex:typeof St.stop=="number"?St.stop:-1}),ar=et({direction:"vertical",cellCount:Mt,overscanCellsCount:lt,scrollDirection:Ut,startIndex:typeof In.start=="number"?In.start:0,stopIndex:typeof In.stop=="number"?In.stop:-1}),dr=sr.overscanStartIndex,ao=sr.overscanStopIndex,go=ar.overscanStartIndex,Ao=ar.overscanStopIndex;if(De){if(!De.hasFixedHeight()){for(var Lc=go;Lc<=Ao;Lc++)if(!De.has(Lc,0)){dr=0,ao=Te-1;break}}if(!De.hasFixedWidth()){for(var xc=dr;xc<=ao;xc++)if(!De.has(0,xc)){go=0,Ao=Mt-1;break}}}this._childrenToDisplay=ae({cellCache:this._cellCache,cellRenderer:me,columnSizeAndPositionManager:Xt.columnSizeAndPositionManager,columnStartIndex:dr,columnStopIndex:ao,deferredMeasurementCache:De,horizontalOffsetAdjustment:Jn,isScrolling:Ht,isScrollingOptOut:vt,parent:this,rowSizeAndPositionManager:Xt.rowSizeAndPositionManager,rowStartIndex:go,rowStopIndex:Ao,scrollLeft:yt,scrollTop:cn,styleCache:this._styleCache,verticalOffsetAdjustment:Ai,visibleColumnIndices:St,visibleRowIndices:In}),this._columnStartIndex=dr,this._columnStopIndex=ao,this._rowStartIndex=go,this._rowStopIndex=Ao}}},{key:"_debounceScrollEnded",value:function(){var B=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&tn(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Pn(this._debounceScrollEndedCallback,B)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var B=this._deferredInvalidateColumnIndex,V=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:B,rowIndex:V})}}},{key:"_invokeOnScrollMemoizer",value:function(B){var V=this,Z=B.scrollLeft,se=B.scrollTop,me=B.totalColumnsWidth,ae=B.totalRowsHeight;this._onScrollMemoizer({callback:function(Te){var De=Te.scrollLeft,ke=Te.scrollTop,Ge=V.props,et=Ge.height;(0,Ge.onScroll)({clientHeight:et,clientWidth:Ge.width,scrollHeight:ae,scrollLeft:De,scrollTop:ke,scrollWidth:me})},indices:{scrollLeft:Z,scrollTop:se}})}},{key:"_isScrolling",value:function(B,V){var Z=0<arguments.length&&B!==void 0?B:this.props,se=1<arguments.length&&V!==void 0?V:this.state;return Object.hasOwnProperty.call(Z,"isScrolling")?Boolean(Z.isScrolling):Boolean(se.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var B=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,B({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize})}}},{key:"scrollToPosition",value:function(B){var V=B.scrollLeft,Z=B.scrollTop,se=ie._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:V,scrollTop:Z});se&&(se.needToResetStyleCache=!1,this.setState(se))}},{key:"_getCalculatedScrollLeft",value:function(B,V){var Z=0<arguments.length&&B!==void 0?B:this.props,se=1<arguments.length&&V!==void 0?V:this.state;return ie._getCalculatedScrollLeft(Z,se)}},{key:"_updateScrollLeftForScrollToColumn",value:function(B,V){var Z=0<arguments.length&&B!==void 0?B:this.props,se=1<arguments.length&&V!==void 0?V:this.state,me=ie._getScrollLeftForScrollToColumnStateUpdate(Z,se);me&&(me.needToResetStyleCache=!1,this.setState(me))}},{key:"_getCalculatedScrollTop",value:function(B,V){var Z=0<arguments.length&&B!==void 0?B:this.props,se=1<arguments.length&&V!==void 0?V:this.state;return ie._getCalculatedScrollTop(Z,se)}},{key:"_resetStyleCache",value:function(){var B=this._styleCache,V=this._cellCache,Z=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var se=this._rowStartIndex;se<=this._rowStopIndex;se++)for(var me=this._columnStartIndex;me<=this._columnStopIndex;me++){var ae="".concat(se,"-").concat(me);this._styleCache[ae]=B[ae],Z&&(this._cellCache[ae]=V[ae])}}},{key:"_updateScrollTopForScrollToRow",value:function(B,V){var Z=0<arguments.length&&B!==void 0?B:this.props,se=1<arguments.length&&V!==void 0?V:this.state,me=ie._getScrollTopForScrollToRowStateUpdate(Z,se);me&&(me.needToResetStyleCache=!1,this.setState(me))}}],[{key:"getDerivedStateFromProps",value:function(B,V){var Z={};B.columnCount===0&&V.scrollLeft!==0||B.rowCount===0&&V.scrollTop!==0?(Z.scrollLeft=0,Z.scrollTop=0):(B.scrollLeft!==V.scrollLeft&&B.scrollToColumn<0||B.scrollTop!==V.scrollTop&&B.scrollToRow<0)&&Object.assign(Z,ie._getScrollToPositionStateUpdate({prevState:V,scrollLeft:B.scrollLeft,scrollTop:B.scrollTop}));var se,me,ae=V.instanceProps;return Z.needToResetStyleCache=!1,B.columnWidth===ae.prevColumnWidth&&B.rowHeight===ae.prevRowHeight||(Z.needToResetStyleCache=!0),ae.columnSizeAndPositionManager.configure({cellCount:B.columnCount,estimatedCellSize:ie._getEstimatedColumnSize(B),cellSizeGetter:ie._wrapSizeGetter(B.columnWidth)}),ae.rowSizeAndPositionManager.configure({cellCount:B.rowCount,estimatedCellSize:ie._getEstimatedRowSize(B),cellSizeGetter:ie._wrapSizeGetter(B.rowHeight)}),ae.prevColumnCount!==0&&ae.prevRowCount!==0||(ae.prevColumnCount=0,ae.prevRowCount=0),B.autoHeight&&B.isScrolling===!1&&ae.prevIsScrolling===!0&&Object.assign(Z,{isScrolling:!1}),b({cellCount:ae.prevColumnCount,cellSize:typeof ae.prevColumnWidth=="number"?ae.prevColumnWidth:null,computeMetadataCallback:function(){return ae.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:B,nextCellsCount:B.columnCount,nextCellSize:typeof B.columnWidth=="number"?B.columnWidth:null,nextScrollToIndex:B.scrollToColumn,scrollToIndex:ae.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){se=ie._getScrollLeftForScrollToColumnStateUpdate(B,V)}}),b({cellCount:ae.prevRowCount,cellSize:typeof ae.prevRowHeight=="number"?ae.prevRowHeight:null,computeMetadataCallback:function(){return ae.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:B,nextCellsCount:B.rowCount,nextCellSize:typeof B.rowHeight=="number"?B.rowHeight:null,nextScrollToIndex:B.scrollToRow,scrollToIndex:ae.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){me=ie._getScrollTopForScrollToRowStateUpdate(B,V)}}),ae.prevColumnCount=B.columnCount,ae.prevColumnWidth=B.columnWidth,ae.prevIsScrolling=B.isScrolling===!0,ae.prevRowCount=B.rowCount,ae.prevRowHeight=B.rowHeight,ae.prevScrollToColumn=B.scrollToColumn,ae.prevScrollToRow=B.scrollToRow,ae.scrollbarSize=B.getScrollbarSize(),ae.scrollbarSize===void 0?(ae.scrollbarSizeMeasured=!1,ae.scrollbarSize=0):ae.scrollbarSizeMeasured=!0,Z.instanceProps=ae,bi({},Z,{},se,{},me)}},{key:"_getEstimatedColumnSize",value:function(B){return typeof B.columnWidth=="number"?B.columnWidth:B.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(B){return typeof B.rowHeight=="number"?B.rowHeight:B.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(B){var V=B.prevState,Z=B.scrollLeft,se=B.scrollTop,me={scrollPositionChangeReason:Bd};return typeof Z=="number"&&0<=Z&&(me.scrollDirectionHorizontal=Z>V.scrollLeft?1:-1,me.scrollLeft=Z),typeof se=="number"&&0<=se&&(me.scrollDirectionVertical=se>V.scrollTop?1:-1,me.scrollTop=se),typeof Z=="number"&&0<=Z&&Z!==V.scrollLeft||typeof se=="number"&&0<=se&&se!==V.scrollTop?me:{}}},{key:"_wrapSizeGetter",value:function(B){return typeof B=="function"?B:function(){return B}}},{key:"_getCalculatedScrollLeft",value:function(B,V){var Z=B.columnCount,se=B.height,me=B.scrollToAlignment,ae=B.scrollToColumn,Te=B.width,De=V.scrollLeft,ke=V.instanceProps;if(0<Z){var Ge=Z-1,et=ae<0?Ge:Math.min(Ge,ae),lt=ke.rowSizeAndPositionManager.getTotalSize(),Mt=ke.scrollbarSizeMeasured&&se<lt?ke.scrollbarSize:0;return ke.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:me,containerSize:Te-Mt,currentOffset:De,targetIndex:et})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(B,V){var Z=V.scrollLeft,se=ie._getCalculatedScrollLeft(B,V);return typeof se=="number"&&0<=se&&Z!==se?ie._getScrollToPositionStateUpdate({prevState:V,scrollLeft:se,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(B,V){var Z=B.height,se=B.rowCount,me=B.scrollToAlignment,ae=B.scrollToRow,Te=B.width,De=V.scrollTop,ke=V.instanceProps;if(0<se){var Ge=se-1,et=ae<0?Ge:Math.min(Ge,ae),lt=ke.columnSizeAndPositionManager.getTotalSize(),Mt=ke.scrollbarSizeMeasured&&Te<lt?ke.scrollbarSize:0;return ke.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:me,containerSize:Z-Mt,currentOffset:De,targetIndex:et})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(B,V){var Z=V.scrollTop,se=ie._getCalculatedScrollTop(B,V);return typeof se=="number"&&0<=se&&Z!==se?ie._getScrollToPositionStateUpdate({prevState:V,scrollLeft:-1,scrollTop:se}):{}}}]),ie}();at(Ko,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:ye,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:_a,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:ue,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),$o(Ko);function Rc(ie){var B=ie.cellCount,V=ie.overscanCellsCount,Z=ie.scrollDirection,se=ie.startIndex,me=ie.stopIndex;return V=Math.max(1,V),Z===1?{overscanStartIndex:Math.max(0,se-1),overscanStopIndex:Math.min(B-1,me+V)}:{overscanStartIndex:Math.max(0,se-V),overscanStopIndex:Math.min(B-1,me+1)}}s(Rc,"defaultOverscanIndicesGetter$1");var Hf=function(){function ie(B,V){var Z;return er(this,ie),(Z=Ur(this,Cr(ie).call(this,B,V)))._loadMoreRowsMemoizer=rs(),Z._onRowsRendered=Z._onRowsRendered.bind(At(Z)),Z._registerChild=Z._registerChild.bind(At(Z)),Z}return s(ie,"InfiniteLoader"),Dr(ie,Dn.PureComponent),or(ie,[{key:"resetLoadMoreRowsCache",value:function(B){this._loadMoreRowsMemoizer=rs(),B&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(B){var V=this,Z=this.props.loadMoreRows;B.forEach(function(se){var me=Z(se);me&&me.then(function(){(function(ae){var Te=ae.lastRenderedStartIndex,De=ae.lastRenderedStopIndex,ke=ae.startIndex,Ge=ae.stopIndex;return!(De<ke||Ge<Te)})({lastRenderedStartIndex:V._lastRenderedStartIndex,lastRenderedStopIndex:V._lastRenderedStopIndex,startIndex:se.startIndex,stopIndex:se.stopIndex})&&V._registeredChild&&function(ae){var Te=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,De=typeof ae.recomputeGridSize=="function"?ae.recomputeGridSize:ae.recomputeRowHeights;De?De.call(ae,Te):ae.forceUpdate()}(V._registeredChild,V._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(B){var V=B.startIndex,Z=B.stopIndex;this._lastRenderedStartIndex=V,this._lastRenderedStopIndex=Z,this._doStuff(V,Z)}},{key:"_doStuff",value:function(B,V){var Z,se=this,me=this.props,ae=me.isRowLoaded,Te=me.minimumBatchSize,De=me.rowCount,ke=me.threshold,Ge=function(lt){for(var Mt=lt.isRowLoaded,dt=lt.minimumBatchSize,vt=lt.rowCount,Pt=lt.startIndex,Ut=lt.stopIndex,Xt=[],cn=null,yt=null,Ht=Pt;Ht<=Ut;Ht++)Mt({index:Ht})?yt!==null&&(Xt.push({startIndex:cn,stopIndex:yt}),cn=yt=null):(yt=Ht,cn===null&&(cn=Ht));if(yt!==null){for(var St=Math.min(Math.max(yt,cn+dt-1),vt-1),In=yt+1;In<=St&&!Mt({index:In});In++)yt=In;Xt.push({startIndex:cn,stopIndex:yt})}if(Xt.length)for(var Jn=Xt[0];Jn.stopIndex-Jn.startIndex+1<dt&&0<Jn.startIndex;){var Ai=Jn.startIndex-1;if(Mt({index:Ai}))break;Jn.startIndex=Ai}return Xt}({isRowLoaded:ae,minimumBatchSize:Te,rowCount:De,startIndex:Math.max(0,B-ke),stopIndex:Math.min(De-1,V+ke)}),et=(Z=[]).concat.apply(Z,Gs(Ge.map(function(lt){return[lt.startIndex,lt.stopIndex]})));this._loadMoreRowsMemoizer({callback:function(){se._loadUnloadedRanges(Ge)},indices:{squashedUnloadedRanges:et}})}},{key:"_registerChild",value:function(B){this._registeredChild=B}}]),ie}();at(Hf,"propTypes",{children:wt.func.isRequired,isRowLoaded:wt.func.isRequired,loadMoreRows:wt.func.isRequired,minimumBatchSize:wt.number.isRequired,rowCount:wt.number.isRequired,threshold:wt.number.isRequired}),at(Hf,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});var Hg=function(){function ie(){var B,V;er(this,ie);for(var Z=arguments.length,se=new Array(Z),me=0;me<Z;me++)se[me]=arguments[me];return at(At(V=Ur(this,(B=Cr(ie)).call.apply(B,[this].concat(se)))),"Grid",void 0),at(At(V),"_cellRenderer",function(ae){var Te=ae.parent,De=ae.rowIndex,ke=ae.style,Ge=ae.isScrolling,et=ae.isVisible,lt=ae.key,Mt=V.props.rowRenderer,dt=Object.getOwnPropertyDescriptor(ke,"width");return dt&&dt.writable&&(ke.width="100%"),Mt({index:De,style:ke,isScrolling:Ge,isVisible:et,key:lt,parent:Te})}),at(At(V),"_setRef",function(ae){V.Grid=ae}),at(At(V),"_onScroll",function(ae){var Te=ae.clientHeight,De=ae.scrollHeight,ke=ae.scrollTop;(0,V.props.onScroll)({clientHeight:Te,scrollHeight:De,scrollTop:ke})}),at(At(V),"_onSectionRendered",function(ae){var Te=ae.rowOverscanStartIndex,De=ae.rowOverscanStopIndex,ke=ae.rowStartIndex,Ge=ae.rowStopIndex;(0,V.props.onRowsRendered)({overscanStartIndex:Te,overscanStopIndex:De,startIndex:ke,stopIndex:Ge})}),V}return s(ie,"List"),Dr(ie,Dn.PureComponent),or(ie,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(B){var V=B.alignment,Z=B.index;return this.Grid?this.Grid.getOffsetForCell({alignment:V,rowIndex:Z,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(B){var V=B.columnIndex,Z=B.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:Z,columnIndex:V})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(B){var V=0<arguments.length&&B!==void 0?B:{},Z=V.columnIndex,se=Z===void 0?0:Z,me=V.rowIndex,ae=me===void 0?0:me;this.Grid&&this.Grid.recomputeGridSize({rowIndex:ae,columnIndex:se})}},{key:"recomputeRowHeights",value:function(B){var V=0<arguments.length&&B!==void 0?B:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:V,columnIndex:0})}},{key:"scrollToPosition",value:function(B){var V=0<arguments.length&&B!==void 0?B:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:V})}},{key:"scrollToRow",value:function(B){var V=0<arguments.length&&B!==void 0?B:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:V})}},{key:"render",value:function(){var B=this.props,V=B.className,Z=B.noRowsRenderer,se=B.scrollToIndex,me=B.width,ae=Oo("ReactVirtualized__List",V);return Dn.createElement(Ko,to({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:ae,columnWidth:me,columnCount:1,noContentRenderer:Z,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:se}))}}]),ie}();at(Hg,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:Rc,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Fd={ge:function(ie,B,V,Z,se){return typeof V=="function"?function(me,ae,Te,De,ke){for(var Ge=Te+1;ae<=Te;){var et=ae+Te>>>1;0<=ke(me[et],De)?Te=(Ge=et)-1:ae=1+et}return Ge}(ie,Z===void 0?0:0|Z,se===void 0?ie.length-1:0|se,B,V):function(me,ae,Te,De){for(var ke=Te+1;ae<=Te;){var Ge=ae+Te>>>1;De<=me[Ge]?Te=(ke=Ge)-1:ae=1+Ge}return ke}(ie,V===void 0?0:0|V,Z===void 0?ie.length-1:0|Z,B)},gt:function(ie,B,V,Z,se){return typeof V=="function"?function(me,ae,Te,De,ke){for(var Ge=Te+1;ae<=Te;){var et=ae+Te>>>1;0<ke(me[et],De)?Te=(Ge=et)-1:ae=1+et}return Ge}(ie,Z===void 0?0:0|Z,se===void 0?ie.length-1:0|se,B,V):function(me,ae,Te,De){for(var ke=Te+1;ae<=Te;){var Ge=ae+Te>>>1;De<me[Ge]?Te=(ke=Ge)-1:ae=1+Ge}return ke}(ie,V===void 0?0:0|V,Z===void 0?ie.length-1:0|Z,B)},lt:function(ie,B,V,Z,se){return typeof V=="function"?function(me,ae,Te,De,ke){for(var Ge=ae-1;ae<=Te;){var et=ae+Te>>>1;ke(me[et],De)<0?ae=1+(Ge=et):Te=et-1}return Ge}(ie,Z===void 0?0:0|Z,se===void 0?ie.length-1:0|se,B,V):function(me,ae,Te,De){for(var ke=ae-1;ae<=Te;){var Ge=ae+Te>>>1;me[Ge]<De?ae=1+(ke=Ge):Te=Ge-1}return ke}(ie,V===void 0?0:0|V,Z===void 0?ie.length-1:0|Z,B)},le:function(ie,B,V,Z,se){return typeof V=="function"?function(me,ae,Te,De,ke){for(var Ge=ae-1;ae<=Te;){var et=ae+Te>>>1;ke(me[et],De)<=0?ae=1+(Ge=et):Te=et-1}return Ge}(ie,Z===void 0?0:0|Z,se===void 0?ie.length-1:0|se,B,V):function(me,ae,Te,De){for(var ke=ae-1;ae<=Te;){var Ge=ae+Te>>>1;me[Ge]<=De?ae=1+(ke=Ge):Te=Ge-1}return ke}(ie,V===void 0?0:0|V,Z===void 0?ie.length-1:0|Z,B)},eq:function(ie,B,V,Z,se){return typeof V=="function"?function(me,ae,Te,De,ke){for(;ae<=Te;){var Ge=ae+Te>>>1,et=ke(me[Ge],De);if(et===0)return Ge;et<=0?ae=1+Ge:Te=Ge-1}return-1}(ie,Z===void 0?0:0|Z,se===void 0?ie.length-1:0|se,B,V):function(me,ae,Te,De){for(;ae<=Te;){var ke=ae+Te>>>1,Ge=me[ke];if(Ge===De)return ke;Ge<=De?ae=1+ke:Te=ke-1}return-1}(ie,V===void 0?0:0|V,Z===void 0?ie.length-1:0|Z,B)}};function Wf(ie,B,V,Z,se){this.mid=ie,this.left=B,this.right=V,this.leftPoints=Z,this.rightPoints=se,this.count=(B?B.count:0)+(V?V.count:0)+Z.length}s(Wf,"IntervalTreeNode");var Pc=Wf.prototype;function zf(ie,B){ie.mid=B.mid,ie.left=B.left,ie.right=B.right,ie.leftPoints=B.leftPoints,ie.rightPoints=B.rightPoints,ie.count=B.count}s(zf,"copy");function Wg(ie,B){var V=Hl(B);ie.mid=V.mid,ie.left=V.left,ie.right=V.right,ie.leftPoints=V.leftPoints,ie.rightPoints=V.rightPoints,ie.count=V.count}s(Wg,"rebuild");function zg(ie,B){var V=ie.intervals([]);V.push(B),Wg(ie,V)}s(zg,"rebuildWithInterval");function Gg(ie,B){var V=ie.intervals([]),Z=V.indexOf(B);return Z<0?0:(V.splice(Z,1),Wg(ie,V),1)}s(Gg,"rebuildWithoutInterval");function jg(ie,B,V){for(var Z=0;Z<ie.length&&ie[Z][0]<=B;++Z){var se=V(ie[Z]);if(se)return se}}s(jg,"reportLeftRange");function $g(ie,B,V){for(var Z=ie.length-1;0<=Z&&ie[Z][1]>=B;--Z){var se=V(ie[Z]);if(se)return se}}s($g,"reportRightRange");function Kg(ie,B){for(var V=0;V<ie.length;++V){var Z=B(ie[V]);if(Z)return Z}}s(Kg,"reportRange");function QS(ie,B){return ie-B}s(QS,"compareNumbers");function Gf(ie,B){var V=ie[0]-B[0];return V||ie[1]-B[1]}s(Gf,"compareBegin");function jf(ie,B){var V=ie[1]-B[1];return V||ie[0]-B[0]}s(jf,"compareEnd");function Hl(ie){if(ie.length===0)return null;for(var B=[],V=0;V<ie.length;++V)B.push(ie[V][0],ie[V][1]);B.sort(QS);var Z=B[B.length>>1],se=[],me=[],ae=[];for(V=0;V<ie.length;++V){var Te=ie[V];Te[1]<Z?se.push(Te):Z<Te[0]?me.push(Te):ae.push(Te)}var De=ae,ke=ae.slice();return De.sort(Gf),ke.sort(jf),new Wf(Z,Hl(se),Hl(me),De,ke)}s(Hl,"createIntervalTree");function $f(ie){this.root=ie}s($f,"IntervalTree"),Pc.intervals=function(ie){return ie.push.apply(ie,this.leftPoints),this.left&&this.left.intervals(ie),this.right&&this.right.intervals(ie),ie},Pc.insert=function(ie){var B=this.count-this.leftPoints.length;if(this.count+=1,ie[1]<this.mid)this.left?4*(this.left.count+1)>3*(1+B)?zg(this,ie):this.left.insert(ie):this.left=Hl([ie]);else if(ie[0]>this.mid)this.right?4*(this.right.count+1)>3*(1+B)?zg(this,ie):this.right.insert(ie):this.right=Hl([ie]);else{var V=Fd.ge(this.leftPoints,ie,Gf),Z=Fd.ge(this.rightPoints,ie,jf);this.leftPoints.splice(V,0,ie),this.rightPoints.splice(Z,0,ie)}},Pc.remove=function(ie){var B=this.count-this.leftPoints;if(ie[1]<this.mid)return this.left?3*(B-1)<4*(this.right?this.right.count:0)?Gg(this,ie):(me=this.left.remove(ie))===2?(this.left=null,this.count-=1,1):(me===1&&(this.count-=1),me):0;if(ie[0]>this.mid)return this.right?3*(B-1)<4*(this.left?this.left.count:0)?Gg(this,ie):(me=this.right.remove(ie))===2?(this.right=null,this.count-=1,1):(me===1&&(this.count-=1),me):0;if(this.count===1)return this.leftPoints[0]===ie?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===ie){if(this.left&&this.right){for(var V=this,Z=this.left;Z.right;)Z=(V=Z).right;if(V===this)Z.right=this.right;else{var se=this.left;me=this.right,V.count-=Z.count,V.right=Z.left,Z.left=se,Z.right=me}zf(this,Z),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?zf(this,this.left):zf(this,this.right);return 1}for(se=Fd.ge(this.leftPoints,ie,Gf);se<this.leftPoints.length&&this.leftPoints[se][0]===ie[0];++se)if(this.leftPoints[se]===ie){for(this.count-=1,this.leftPoints.splice(se,1),me=Fd.ge(this.rightPoints,ie,jf);me<this.rightPoints.length&&this.rightPoints[me][1]===ie[1];++me)if(this.rightPoints[me]===ie)return this.rightPoints.splice(me,1),1}return 0;var me},Pc.queryPoint=function(ie,B){if(ie<this.mid)return this.left&&(V=this.left.queryPoint(ie,B))?V:jg(this.leftPoints,ie,B);if(ie>this.mid){var V;return this.right&&(V=this.right.queryPoint(ie,B))?V:$g(this.rightPoints,ie,B)}return Kg(this.leftPoints,B)},Pc.queryInterval=function(ie,B,V){var Z;return ie<this.mid&&this.left&&(Z=this.left.queryInterval(ie,B,V))||B>this.mid&&this.right&&(Z=this.right.queryInterval(ie,B,V))?Z:B<this.mid?jg(this.leftPoints,B,V):ie>this.mid?$g(this.rightPoints,ie,V):Kg(this.leftPoints,V)};var Wl=$f.prototype;Wl.insert=function(ie){this.root?this.root.insert(ie):this.root=new Wf(ie[0],null,null,[ie],[ie])},Wl.remove=function(ie){if(this.root){var B=this.root.remove(ie);return B===2&&(this.root=null),B!==0}return!1},Wl.queryPoint=function(ie,B){if(this.root)return this.root.queryPoint(ie,B)},Wl.queryInterval=function(ie,B,V){if(ie<=B&&this.root)return this.root.queryInterval(ie,B,V)},Object.defineProperty(Wl,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(Wl,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var Kf=function(){function ie(){er(this,ie),at(this,"_columnSizeMap",{}),at(this,"_intervalTree",function(B){return B&&B.length!==0?new $f(Hl(B)):new $f(null)}()),at(this,"_leftMap",{})}return s(ie,"PositionCache"),or(ie,[{key:"estimateTotalHeight",value:function(B,V,Z){var se=B-this.count;return this.tallestColumnSize+Math.ceil(se/V)*Z}},{key:"range",value:function(B,V,Z){var se=this;this._intervalTree.queryInterval(B,B+V,function(me){var ae=Ea(me,3),Te=ae[0],De=(ae[1],ae[2]);return Z(De,se._leftMap[De],Te)})}},{key:"setPosition",value:function(B,V,Z,se){this._intervalTree.insert([Z,Z+se,B]),this._leftMap[B]=V;var me=this._columnSizeMap,ae=me[V];me[V]=ae===void 0?Z+se:Math.max(ae,Z+se)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var B=this._columnSizeMap,V=0;for(var Z in B){var se=B[Z];V=V===0?se:Math.min(V,se)}return V}},{key:"tallestColumnSize",get:function(){var B=this._columnSizeMap,V=0;for(var Z in B){var se=B[Z];V=Math.max(V,se)}return V}}]),ie}(),Jf=function(){function ie(){var B,V;er(this,ie);for(var Z=arguments.length,se=new Array(Z),me=0;me<Z;me++)se[me]=arguments[me];return at(At(V=Ur(this,(B=Cr(ie)).call.apply(B,[this].concat(se)))),"state",{isScrolling:!1,scrollTop:0}),at(At(V),"_debounceResetIsScrollingId",void 0),at(At(V),"_invalidateOnUpdateStartIndex",null),at(At(V),"_invalidateOnUpdateStopIndex",null),at(At(V),"_positionCache",new Kf),at(At(V),"_startIndex",null),at(At(V),"_startIndexMemoized",null),at(At(V),"_stopIndex",null),at(At(V),"_stopIndexMemoized",null),at(At(V),"_debounceResetIsScrollingCallback",function(){V.setState({isScrolling:!1})}),at(At(V),"_setScrollingContainerRef",function(ae){V._scrollingContainer=ae}),at(At(V),"_onScroll",function(ae){var Te=V.props.height,De=ae.currentTarget.scrollTop,ke=Math.min(Math.max(0,V._getEstimatedTotalHeight()-Te),De);De===ke&&(V._debounceResetIsScrolling(),V.state.scrollTop!==ke&&V.setState({isScrolling:!0,scrollTop:ke}))}),V}return s(ie,"Masonry"),Dr(ie,Dn.PureComponent),or(ie,[{key:"clearCellPositions",value:function(){this._positionCache=new Kf,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(B){var V=B.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=V,this._invalidateOnUpdateStopIndex=V):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,V),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,V))}},{key:"recomputeCellPositions",value:function(){var B=this._positionCache.count-1;this._positionCache=new Kf,this._populatePositionCache(0,B),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(B){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==B.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&tn(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var B,V=this,Z=this.props,se=Z.autoHeight,me=Z.cellCount,ae=Z.cellMeasurerCache,Te=Z.cellRenderer,De=Z.className,ke=Z.height,Ge=Z.id,et=Z.keyMapper,lt=Z.overscanByPixels,Mt=Z.role,dt=Z.style,vt=Z.tabIndex,Pt=Z.width,Ut=Z.rowDirection,Xt=this.state,cn=Xt.isScrolling,yt=Xt.scrollTop,Ht=[],St=this._getEstimatedTotalHeight(),In=this._positionCache.shortestColumnSize,Jn=this._positionCache.count,Ai=0;if(this._positionCache.range(Math.max(0,yt-lt),ke+2*lt,function(dr,ao,go){var Ao;B=B===void 0?Ai=dr:(Ai=Math.min(Ai,dr),Math.max(B,dr)),Ht.push(Te({index:dr,isScrolling:cn,key:et(dr),parent:V,style:(Ao={height:ae.getHeight(dr)},at(Ao,Ut==="ltr"?"left":"right",ao),at(Ao,"position","absolute"),at(Ao,"top",go),at(Ao,"width",ae.getWidth(dr)),Ao)}))}),In<yt+ke+lt&&Jn<me)for(var sr=Math.min(me-Jn,Math.ceil((yt+ke+lt-In)/ae.defaultHeight*Pt/ae.defaultWidth)),ar=Jn;ar<Jn+sr;ar++)B=ar,Ht.push(Te({index:ar,isScrolling:cn,key:et(ar),parent:this,style:{width:ae.getWidth(ar)}}));return this._startIndex=Ai,this._stopIndex=B,Dn.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Oo("ReactVirtualized__Masonry",De),id:Ge,onScroll:this._onScroll,role:Mt,style:bi({boxSizing:"border-box",direction:"ltr",height:se?"auto":ke,overflowX:"hidden",overflowY:St<ke?"hidden":"auto",position:"relative",width:Pt,WebkitOverflowScrolling:"touch",willChange:"transform"},dt),tabIndex:vt},Dn.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:St,maxWidth:"100%",maxHeight:St,overflow:"hidden",pointerEvents:cn?"none":"",position:"relative"}},Ht))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var B=this._invalidateOnUpdateStartIndex,V=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(B,V),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var B=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&tn(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=Pn(this._debounceResetIsScrollingCallback,B)}},{key:"_getEstimatedTotalHeight",value:function(){var B=this.props,V=B.cellCount,Z=B.cellMeasurerCache,se=B.width,me=Math.max(1,Math.floor(se/Z.defaultWidth));return this._positionCache.estimateTotalHeight(V,me,Z.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var B=this.props,V=B.height,Z=B.onScroll,se=this.state.scrollTop;this._onScrollMemoized!==se&&(Z({clientHeight:V,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:se}),this._onScrollMemoized=se)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(B,V){for(var Z=this.props,se=Z.cellMeasurerCache,me=Z.cellPositioner,ae=B;ae<=V;ae++){var Te=me(ae),De=Te.left,ke=Te.top;this._positionCache.setPosition(ae,De,ke,se.getHeight(ae))}}}],[{key:"getDerivedStateFromProps",value:function(B,V){return B.scrollTop!==void 0&&V.scrollTop!==B.scrollTop?{isScrolling:!0,scrollTop:B.scrollTop}:null}}]),ie}();function Jg(){}s(Jg,"noop"),at(Jf,"defaultProps",{autoHeight:!1,keyMapper:function(ie){return ie},onCellsRendered:Jg,onScroll:Jg,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),$o(Jf);var Yf=function(){function ie(){var B=this,V=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};er(this,ie),at(this,"_cellMeasurerCache",void 0),at(this,"_columnIndexOffset",void 0),at(this,"_rowIndexOffset",void 0),at(this,"columnWidth",function(De){var ke=De.index;B._cellMeasurerCache.columnWidth({index:ke+B._columnIndexOffset})}),at(this,"rowHeight",function(De){var ke=De.index;B._cellMeasurerCache.rowHeight({index:ke+B._rowIndexOffset})});var Z=V.cellMeasurerCache,se=V.columnIndexOffset,me=se===void 0?0:se,ae=V.rowIndexOffset,Te=ae===void 0?0:ae;this._cellMeasurerCache=Z,this._columnIndexOffset=me,this._rowIndexOffset=Te}return s(ie,"CellMeasurerCacheDecorator"),or(ie,[{key:"clear",value:function(B,V){this._cellMeasurerCache.clear(B+this._rowIndexOffset,V+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(B,V){var Z=1<arguments.length&&V!==void 0?V:0;return this._cellMeasurerCache.getHeight(B+this._rowIndexOffset,Z+this._columnIndexOffset)}},{key:"getWidth",value:function(B,V){var Z=1<arguments.length&&V!==void 0?V:0;return this._cellMeasurerCache.getWidth(B+this._rowIndexOffset,Z+this._columnIndexOffset)}},{key:"has",value:function(B,V){var Z=1<arguments.length&&V!==void 0?V:0;return this._cellMeasurerCache.has(B+this._rowIndexOffset,Z+this._columnIndexOffset)}},{key:"set",value:function(B,V,Z,se){this._cellMeasurerCache.set(B+this._rowIndexOffset,V+this._columnIndexOffset,Z,se)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),ie}(),Ud=function(){function ie(B,V){var Z;er(this,ie),at(At(Z=Ur(this,Cr(ie).call(this,B,V))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),at(At(Z),"_deferredInvalidateColumnIndex",null),at(At(Z),"_deferredInvalidateRowIndex",null),at(At(Z),"_bottomLeftGridRef",function(Te){Z._bottomLeftGrid=Te}),at(At(Z),"_bottomRightGridRef",function(Te){Z._bottomRightGrid=Te}),at(At(Z),"_cellRendererBottomLeftGrid",function(Te){var De=Te.rowIndex,ke=jo(Te,["rowIndex"]),Ge=Z.props,et=Ge.cellRenderer,lt=Ge.fixedRowCount;return De===Ge.rowCount-lt?Dn.createElement("div",{key:ke.key,style:bi({},ke.style,{height:20})}):et(bi({},ke,{parent:At(Z),rowIndex:De+lt}))}),at(At(Z),"_cellRendererBottomRightGrid",function(Te){var De=Te.columnIndex,ke=Te.rowIndex,Ge=jo(Te,["columnIndex","rowIndex"]),et=Z.props,lt=et.cellRenderer,Mt=et.fixedColumnCount,dt=et.fixedRowCount;return lt(bi({},Ge,{columnIndex:De+Mt,parent:At(Z),rowIndex:ke+dt}))}),at(At(Z),"_cellRendererTopRightGrid",function(Te){var De=Te.columnIndex,ke=jo(Te,["columnIndex"]),Ge=Z.props,et=Ge.cellRenderer,lt=Ge.columnCount,Mt=Ge.fixedColumnCount;return De===lt-Mt?Dn.createElement("div",{key:ke.key,style:bi({},ke.style,{width:20})}):et(bi({},ke,{columnIndex:De+Mt,parent:At(Z)}))}),at(At(Z),"_columnWidthRightGrid",function(Te){var De=Te.index,ke=Z.props,Ge=ke.columnCount,et=ke.fixedColumnCount,lt=ke.columnWidth,Mt=Z.state,dt=Mt.scrollbarSize;return Mt.showHorizontalScrollbar&&De===Ge-et?dt:typeof lt=="function"?lt({index:De+et}):lt}),at(At(Z),"_onScroll",function(Te){var De=Te.scrollLeft,ke=Te.scrollTop;Z.setState({scrollLeft:De,scrollTop:ke});var Ge=Z.props.onScroll;Ge&&Ge(Te)}),at(At(Z),"_onScrollbarPresenceChange",function(Te){var De=Te.horizontal,ke=Te.size,Ge=Te.vertical,et=Z.state,lt=et.showHorizontalScrollbar,Mt=et.showVerticalScrollbar;if(De!==lt||Ge!==Mt){Z.setState({scrollbarSize:ke,showHorizontalScrollbar:De,showVerticalScrollbar:Ge});var dt=Z.props.onScrollbarPresenceChange;typeof dt=="function"&&dt({horizontal:De,size:ke,vertical:Ge})}}),at(At(Z),"_onScrollLeft",function(Te){var De=Te.scrollLeft;Z._onScroll({scrollLeft:De,scrollTop:Z.state.scrollTop})}),at(At(Z),"_onScrollTop",function(Te){var De=Te.scrollTop;Z._onScroll({scrollTop:De,scrollLeft:Z.state.scrollLeft})}),at(At(Z),"_rowHeightBottomGrid",function(Te){var De=Te.index,ke=Z.props,Ge=ke.fixedRowCount,et=ke.rowCount,lt=ke.rowHeight,Mt=Z.state,dt=Mt.scrollbarSize;return Mt.showVerticalScrollbar&&De===et-Ge?dt:typeof lt=="function"?lt({index:De+Ge}):lt}),at(At(Z),"_topLeftGridRef",function(Te){Z._topLeftGrid=Te}),at(At(Z),"_topRightGridRef",function(Te){Z._topRightGrid=Te});var se=B.deferredMeasurementCache,me=B.fixedColumnCount,ae=B.fixedRowCount;return Z._maybeCalculateCachedStyles(!0),se&&(Z._deferredMeasurementCacheBottomLeftGrid=0<ae?new Yf({cellMeasurerCache:se,columnIndexOffset:0,rowIndexOffset:ae}):se,Z._deferredMeasurementCacheBottomRightGrid=0<me||0<ae?new Yf({cellMeasurerCache:se,columnIndexOffset:me,rowIndexOffset:ae}):se,Z._deferredMeasurementCacheTopRightGrid=0<me?new Yf({cellMeasurerCache:se,columnIndexOffset:me,rowIndexOffset:0}):se),Z}return s(ie,"MultiGrid"),Dr(ie,Dn.PureComponent),or(ie,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(B){var V=0<arguments.length&&B!==void 0?B:{},Z=V.columnIndex,se=Z===void 0?0:Z,me=V.rowIndex,ae=me===void 0?0:me;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,se):se,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,ae):ae}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(B){var V=0<arguments.length&&B!==void 0?B:{},Z=V.columnIndex,se=Z===void 0?0:Z,me=V.rowIndex,ae=me===void 0?0:me,Te=this.props,De=Te.fixedColumnCount,ke=Te.fixedRowCount,Ge=Math.max(0,se-De),et=Math.max(0,ae-ke);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:se,rowIndex:et}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:Ge,rowIndex:et}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:se,rowIndex:ae}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:Ge,rowIndex:ae}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var B=this.props,V=B.scrollLeft,Z=B.scrollTop;if(0<V||0<Z){var se={};0<V&&(se.scrollLeft=V),0<Z&&(se.scrollTop=Z),this.setState(se)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var B=this.props,V=B.onScroll,Z=B.onSectionRendered,se=(B.onScrollbarPresenceChange,B.scrollLeft,B.scrollToColumn),me=(B.scrollTop,B.scrollToRow),ae=jo(B,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var Te=this.state,De=Te.scrollLeft,ke=Te.scrollTop;return Dn.createElement("div",{style:this._containerOuterStyle},Dn.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(ae),this._renderTopRightGrid(bi({},ae,{onScroll:V,scrollLeft:De}))),Dn.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(bi({},ae,{onScroll:V,scrollTop:ke})),this._renderBottomRightGrid(bi({},ae,{onScroll:V,onSectionRendered:Z,scrollLeft:De,scrollToColumn:se,scrollToRow:me,scrollTop:ke}))))}},{key:"_getBottomGridHeight",value:function(B){return B.height-this._getTopGridHeight(B)}},{key:"_getLeftGridWidth",value:function(B){var V=B.fixedColumnCount,Z=B.columnWidth;if(this._leftGridWidth==null)if(typeof Z=="function"){for(var se=0,me=0;me<V;me++)se+=Z({index:me});this._leftGridWidth=se}else this._leftGridWidth=Z*V;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(B){return B.width-this._getLeftGridWidth(B)}},{key:"_getTopGridHeight",value:function(B){var V=B.fixedRowCount,Z=B.rowHeight;if(this._topGridHeight==null)if(typeof Z=="function"){for(var se=0,me=0;me<V;me++)se+=Z({index:me});this._topGridHeight=se}else this._topGridHeight=Z*V;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var B=this._deferredInvalidateColumnIndex,V=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:B,rowIndex:V}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(B){var V=this.props,Z=V.columnWidth,se=V.enableFixedColumnScroll,me=V.enableFixedRowScroll,ae=V.height,Te=V.fixedColumnCount,De=V.fixedRowCount,ke=V.rowHeight,Ge=V.style,et=V.styleBottomLeftGrid,lt=V.styleBottomRightGrid,Mt=V.styleTopLeftGrid,dt=V.styleTopRightGrid,vt=V.width,Pt=B||ae!==this._lastRenderedHeight||vt!==this._lastRenderedWidth,Ut=B||Z!==this._lastRenderedColumnWidth||Te!==this._lastRenderedFixedColumnCount,Xt=B||De!==this._lastRenderedFixedRowCount||ke!==this._lastRenderedRowHeight;(B||Pt||Ge!==this._lastRenderedStyle)&&(this._containerOuterStyle=bi({height:ae,overflow:"visible",width:vt},Ge)),(B||Pt||Xt)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:vt},this._containerBottomStyle={height:ae-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:vt}),!B&&et===this._lastRenderedStyleBottomLeftGrid||(this._bottomLeftGridStyle=bi({left:0,overflowX:"hidden",overflowY:se?"auto":"hidden",position:"absolute"},et)),(B||Ut||lt!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=bi({left:this._getLeftGridWidth(this.props),position:"absolute"},lt)),!B&&Mt===this._lastRenderedStyleTopLeftGrid||(this._topLeftGridStyle=bi({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},Mt)),(B||Ut||dt!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=bi({left:this._getLeftGridWidth(this.props),overflowX:me?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},dt)),this._lastRenderedColumnWidth=Z,this._lastRenderedFixedColumnCount=Te,this._lastRenderedFixedRowCount=De,this._lastRenderedHeight=ae,this._lastRenderedRowHeight=ke,this._lastRenderedStyle=Ge,this._lastRenderedStyleBottomLeftGrid=et,this._lastRenderedStyleBottomRightGrid=lt,this._lastRenderedStyleTopLeftGrid=Mt,this._lastRenderedStyleTopRightGrid=dt,this._lastRenderedWidth=vt}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(B){var V=B.enableFixedColumnScroll,Z=B.fixedColumnCount,se=B.fixedRowCount,me=B.rowCount,ae=B.hideBottomLeftGridScrollbar,Te=this.state.showVerticalScrollbar;if(!Z)return null;var De=Te?1:0,ke=this._getBottomGridHeight(B),Ge=this._getLeftGridWidth(B),et=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,lt=ae?Ge+et:Ge,Mt=Dn.createElement(Ko,to({},B,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:Z,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:ke,onScroll:V?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,me-se)+De,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:lt}));return ae?Dn.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:bi({},this._bottomLeftGridStyle,{height:ke,width:Ge,overflowY:"hidden"})},Mt):Mt}},{key:"_renderBottomRightGrid",value:function(B){var V=B.columnCount,Z=B.fixedColumnCount,se=B.fixedRowCount,me=B.rowCount,ae=B.scrollToColumn,Te=B.scrollToRow;return Dn.createElement(Ko,to({},B,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,V-Z),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(B),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,me-se),rowHeight:this._rowHeightBottomGrid,scrollToColumn:ae-Z,scrollToRow:Te-se,style:this._bottomRightGridStyle,width:this._getRightGridWidth(B)}))}},{key:"_renderTopLeftGrid",value:function(B){var V=B.fixedColumnCount,Z=B.fixedRowCount;return V&&Z?Dn.createElement(Ko,to({},B,{className:this.props.classNameTopLeftGrid,columnCount:V,height:this._getTopGridHeight(B),ref:this._topLeftGridRef,rowCount:Z,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(B)})):null}},{key:"_renderTopRightGrid",value:function(B){var V=B.columnCount,Z=B.enableFixedRowScroll,se=B.fixedColumnCount,me=B.fixedRowCount,ae=B.scrollLeft,Te=B.hideTopRightGridScrollbar,De=this.state,ke=De.showHorizontalScrollbar,Ge=De.scrollbarSize;if(!me)return null;var et=ke?1:0,lt=this._getTopGridHeight(B),Mt=this._getRightGridWidth(B),dt=ke?Ge:0,vt=lt,Pt=this._topRightGridStyle;Te&&(vt=lt+dt,Pt=bi({},this._topRightGridStyle,{left:0}));var Ut=Dn.createElement(Ko,to({},B,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,V-se)+et,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:vt,onScroll:Z?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:me,scrollLeft:ae,style:Pt,tabIndex:null,width:Mt}));return Te?Dn.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:bi({},this._topRightGridStyle,{height:lt,width:Mt,overflowX:"hidden"})},Ut):Ut}}],[{key:"getDerivedStateFromProps",value:function(B,V){return B.scrollLeft!==V.scrollLeft||B.scrollTop!==V.scrollTop?{scrollLeft:B.scrollLeft!=null&&0<=B.scrollLeft?B.scrollLeft:V.scrollLeft,scrollTop:B.scrollTop!=null&&0<=B.scrollTop?B.scrollTop:V.scrollTop}:null}}]),ie}();at(Ud,"propTypes",{classNameBottomLeftGrid:wt.string.isRequired,classNameBottomRightGrid:wt.string.isRequired,classNameTopLeftGrid:wt.string.isRequired,classNameTopRightGrid:wt.string.isRequired,enableFixedColumnScroll:wt.bool.isRequired,enableFixedRowScroll:wt.bool.isRequired,fixedColumnCount:wt.number.isRequired,fixedRowCount:wt.number.isRequired,onScrollbarPresenceChange:wt.func,style:wt.object.isRequired,styleBottomLeftGrid:wt.object.isRequired,styleBottomRightGrid:wt.object.isRequired,styleTopLeftGrid:wt.object.isRequired,styleTopRightGrid:wt.object.isRequired,hideTopRightGridScrollbar:wt.bool,hideBottomLeftGridScrollbar:wt.bool}),at(Ud,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),$o(Ud);var Yg=function(){function ie(B,V){var Z;return er(this,ie),(Z=Ur(this,Cr(ie).call(this,B,V))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},Z._onScroll=Z._onScroll.bind(At(Z)),Z}return s(ie,"ScrollSync"),Dr(ie,Dn.PureComponent),or(ie,[{key:"render",value:function(){var B=this.props.children,V=this.state,Z=V.clientHeight,se=V.clientWidth,me=V.scrollHeight,ae=V.scrollLeft,Te=V.scrollTop,De=V.scrollWidth;return B({clientHeight:Z,clientWidth:se,onScroll:this._onScroll,scrollHeight:me,scrollLeft:ae,scrollTop:Te,scrollWidth:De})}},{key:"_onScroll",value:function(B){var V=B.clientHeight,Z=B.clientWidth,se=B.scrollHeight,me=B.scrollLeft,ae=B.scrollTop,Te=B.scrollWidth;this.setState({clientHeight:V,clientWidth:Z,scrollHeight:se,scrollLeft:me,scrollTop:ae,scrollWidth:Te})}}]),ie}();function Xg(ie){var B=ie.dataKey,V=ie.rowData;return typeof V.get=="function"?V.get(B):V[B]}s(Xg,"defaultCellDataGetter");function Qg(ie){var B=ie.cellData;return B==null?"":String(B)}s(Qg,"defaultCellRenderer");function Zg(ie){var B=ie.className,V=ie.columns,Z=ie.style;return Dn.createElement("div",{className:B,role:"row",style:Z},V)}s(Zg,"defaultHeaderRowRenderer"),at(Yg,"propTypes",{children:wt.func.isRequired});var mo={ASC:"ASC",DESC:"DESC"};function Xf(ie){var B=ie.sortDirection,V=Oo("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":B===mo.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":B===mo.DESC});return Dn.createElement("svg",{className:V,width:18,height:18,viewBox:"0 0 24 24"},B===mo.ASC?Dn.createElement("path",{d:"M7 14l5-5 5 5z"}):Dn.createElement("path",{d:"M7 10l5 5 5-5z"}),Dn.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}s(Xf,"SortIndicator");function qg(ie){var B=ie.dataKey,V=ie.label,Z=ie.sortBy,se=ie.sortDirection,me=Z===B,ae=[Dn.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof V=="string"?V:null},V)];return me&&ae.push(Dn.createElement(Xf,{key:"SortIndicator",sortDirection:se})),ae}s(qg,"defaultHeaderRenderer");function eS(ie){var B=ie.className,V=ie.columns,Z=ie.index,se=ie.key,me=ie.onRowClick,ae=ie.onRowDoubleClick,Te=ie.onRowMouseOut,De=ie.onRowMouseOver,ke=ie.onRowRightClick,Ge=ie.rowData,et=ie.style,lt={"aria-rowindex":Z+1};return(me||ae||Te||De||ke)&&(lt["aria-label"]="row",lt.tabIndex=0,me&&(lt.onClick=function(Mt){return me({event:Mt,index:Z,rowData:Ge})}),ae&&(lt.onDoubleClick=function(Mt){return ae({event:Mt,index:Z,rowData:Ge})}),Te&&(lt.onMouseOut=function(Mt){return Te({event:Mt,index:Z,rowData:Ge})}),De&&(lt.onMouseOver=function(Mt){return De({event:Mt,index:Z,rowData:Ge})}),ke&&(lt.onContextMenu=function(Mt){return ke({event:Mt,index:Z,rowData:Ge})})),Dn.createElement("div",to({},lt,{className:B,key:se,role:"row",style:et}),V)}s(eS,"defaultRowRenderer"),Xf.propTypes={sortDirection:wt.oneOf([mo.ASC,mo.DESC])};var kc=function(){function ie(){return er(this,ie),Ur(this,Cr(ie).apply(this,arguments))}return s(ie,"Column"),Dr(ie,Dn.Component),ie}();at(kc,"propTypes",{"aria-label":wt.string,cellDataGetter:wt.func,cellRenderer:wt.func,className:wt.string,columnData:wt.object,dataKey:wt.any.isRequired,defaultSortDirection:wt.oneOf([mo.ASC,mo.DESC]),disableSort:wt.bool,flexGrow:wt.number,flexShrink:wt.number,headerClassName:wt.string,headerRenderer:wt.func.isRequired,headerStyle:wt.object,id:wt.string,label:wt.node,maxWidth:wt.number,minWidth:wt.number,style:wt.object,width:wt.number.isRequired}),at(kc,"defaultProps",{cellDataGetter:Xg,cellRenderer:Qg,defaultSortDirection:mo.ASC,flexGrow:0,flexShrink:1,headerRenderer:qg,style:{}});var Qf=function(){function ie(B){var V;return er(this,ie),(V=Ur(this,Cr(ie).call(this,B))).state={scrollbarWidth:0},V._createColumn=V._createColumn.bind(At(V)),V._createRow=V._createRow.bind(At(V)),V._onScroll=V._onScroll.bind(At(V)),V._onSectionRendered=V._onSectionRendered.bind(At(V)),V._setRef=V._setRef.bind(At(V)),V}return s(ie,"Table"),Dr(ie,Dn.PureComponent),or(ie,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(B){var V=B.alignment,Z=B.index;return this.Grid?this.Grid.getOffsetForCell({alignment:V,rowIndex:Z}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(B){var V=B.columnIndex,Z=B.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:Z,columnIndex:V})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(B){var V=0<arguments.length&&B!==void 0?B:{},Z=V.columnIndex,se=Z===void 0?0:Z,me=V.rowIndex,ae=me===void 0?0:me;this.Grid&&this.Grid.recomputeGridSize({rowIndex:ae,columnIndex:se})}},{key:"recomputeRowHeights",value:function(B){var V=0<arguments.length&&B!==void 0?B:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:V})}},{key:"scrollToPosition",value:function(B){var V=0<arguments.length&&B!==void 0?B:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:V})}},{key:"scrollToRow",value:function(B){var V=0<arguments.length&&B!==void 0?B:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:V})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var B=Es.findDOMNode(this.Grid),V=B.clientWidth||0;return(B.offsetWidth||0)-V}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var B=this,V=this.props,Z=V.children,se=V.className,me=V.disableHeader,ae=V.gridClassName,Te=V.gridStyle,De=V.headerHeight,ke=V.headerRowRenderer,Ge=V.height,et=V.id,lt=V.noRowsRenderer,Mt=V.rowClassName,dt=V.rowStyle,vt=V.scrollToIndex,Pt=V.style,Ut=V.width,Xt=this.state.scrollbarWidth,cn=me?Ge:Ge-De,yt=typeof Mt=="function"?Mt({index:-1}):Mt,Ht=typeof dt=="function"?dt({index:-1}):dt;return this._cachedColumnStyles=[],Dn.Children.toArray(Z).forEach(function(St,In){var Jn=B._getFlexStyleForColumn(St,St.props.style);B._cachedColumnStyles[In]=bi({overflow:"hidden"},Jn)}),Dn.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":Dn.Children.toArray(Z).length,"aria-rowcount":this.props.rowCount,className:Oo("ReactVirtualized__Table",se),id:et,role:"grid",style:Pt},!me&&ke({className:Oo("ReactVirtualized__Table__headerRow",yt),columns:this._getHeaderColumns(),style:bi({height:De,overflow:"hidden",paddingRight:Xt,width:Ut},Ht)}),Dn.createElement(Ko,to({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:Oo("ReactVirtualized__Table__Grid",ae),cellRenderer:this._createRow,columnWidth:Ut,columnCount:1,height:cn,id:void 0,noContentRenderer:lt,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:Xt,scrollToRow:vt,style:bi({},Te,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(B){var V=B.column,Z=B.columnIndex,se=B.isScrolling,me=B.parent,ae=B.rowData,Te=B.rowIndex,De=this.props.onColumnClick,ke=V.props,Ge=ke.cellDataGetter,et=ke.cellRenderer,lt=ke.className,Mt=ke.columnData,dt=ke.dataKey,vt=ke.id,Pt=et({cellData:Ge({columnData:Mt,dataKey:dt,rowData:ae}),columnData:Mt,columnIndex:Z,dataKey:dt,isScrolling:se,parent:me,rowData:ae,rowIndex:Te}),Ut=this._cachedColumnStyles[Z],Xt=typeof Pt=="string"?Pt:null;return Dn.createElement("div",{"aria-colindex":Z+1,"aria-describedby":vt,className:Oo("ReactVirtualized__Table__rowColumn",lt),key:"Row"+Te+"-Col"+Z,onClick:function(cn){De&&De({columnData:Mt,dataKey:dt,event:cn})},role:"gridcell",style:Ut,title:Xt},Pt)}},{key:"_createHeader",value:function(B){var V,Z,se,me,ae,Te=B.column,De=B.index,ke=this.props,Ge=ke.headerClassName,et=ke.headerStyle,lt=ke.onHeaderClick,Mt=ke.sort,dt=ke.sortBy,vt=ke.sortDirection,Pt=Te.props,Ut=Pt.columnData,Xt=Pt.dataKey,cn=Pt.defaultSortDirection,yt=Pt.disableSort,Ht=Pt.headerRenderer,St=Pt.id,In=Pt.label,Jn=!yt&&Mt,Ai=Oo("ReactVirtualized__Table__headerColumn",Ge,Te.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:Jn}),sr=this._getFlexStyleForColumn(Te,bi({},et,{},Te.props.headerStyle)),ar=Ht({columnData:Ut,dataKey:Xt,disableSort:yt,label:In,sortBy:dt,sortDirection:vt});if(Jn||lt){var dr=dt!==Xt?cn:vt===mo.DESC?mo.ASC:mo.DESC,ao=s(function(go){Jn&&Mt({defaultSortDirection:cn,event:go,sortBy:Xt,sortDirection:dr}),lt&&lt({columnData:Ut,dataKey:Xt,event:go})},"onClick");ae=Te.props["aria-label"]||In||Xt,me="none",se=0,V=ao,Z=s(function(go){go.key!=="Enter"&&go.key!==" "||ao(go)},"headerOnKeyDown")}return dt===Xt&&(me=vt===mo.ASC?"ascending":"descending"),Dn.createElement("div",{"aria-label":ae,"aria-sort":me,className:Ai,id:St,key:"Header-Col"+De,onClick:V,onKeyDown:Z,role:"columnheader",style:sr,tabIndex:se},ar)}},{key:"_createRow",value:function(B){var V=this,Z=B.rowIndex,se=B.isScrolling,me=B.key,ae=B.parent,Te=B.style,De=this.props,ke=De.children,Ge=De.onRowClick,et=De.onRowDoubleClick,lt=De.onRowRightClick,Mt=De.onRowMouseOver,dt=De.onRowMouseOut,vt=De.rowClassName,Pt=De.rowGetter,Ut=De.rowRenderer,Xt=De.rowStyle,cn=this.state.scrollbarWidth,yt=typeof vt=="function"?vt({index:Z}):vt,Ht=typeof Xt=="function"?Xt({index:Z}):Xt,St=Pt({index:Z}),In=Dn.Children.toArray(ke).map(function(sr,ar){return V._createColumn({column:sr,columnIndex:ar,isScrolling:se,parent:ae,rowData:St,rowIndex:Z,scrollbarWidth:cn})}),Jn=Oo("ReactVirtualized__Table__row",yt),Ai=bi({},Te,{height:this._getRowHeight(Z),overflow:"hidden",paddingRight:cn},Ht);return Ut({className:Jn,columns:In,index:Z,isScrolling:se,key:me,onRowClick:Ge,onRowDoubleClick:et,onRowRightClick:lt,onRowMouseOver:Mt,onRowMouseOut:dt,rowData:St,style:Ai})}},{key:"_getFlexStyleForColumn",value:function(B,V){var Z=1<arguments.length&&V!==void 0?V:{},se="".concat(B.props.flexGrow," ").concat(B.props.flexShrink," ").concat(B.props.width,"px"),me=bi({},Z,{flex:se,msFlex:se,WebkitFlex:se});return B.props.maxWidth&&(me.maxWidth=B.props.maxWidth),B.props.minWidth&&(me.minWidth=B.props.minWidth),me}},{key:"_getHeaderColumns",value:function(){var B=this,V=this.props,Z=V.children;return(V.disableHeader?[]:Dn.Children.toArray(Z)).map(function(se,me){return B._createHeader({column:se,index:me})})}},{key:"_getRowHeight",value:function(B){var V=this.props.rowHeight;return typeof V=="function"?V({index:B}):V}},{key:"_onScroll",value:function(B){var V=B.clientHeight,Z=B.scrollHeight,se=B.scrollTop;(0,this.props.onScroll)({clientHeight:V,scrollHeight:Z,scrollTop:se})}},{key:"_onSectionRendered",value:function(B){var V=B.rowOverscanStartIndex,Z=B.rowOverscanStopIndex,se=B.rowStartIndex,me=B.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:V,overscanStopIndex:Z,startIndex:se,stopIndex:me})}},{key:"_setRef",value:function(B){this.Grid=B}},{key:"_setScrollbarWidth",value:function(){var B=this.getScrollbarWidth();this.setState({scrollbarWidth:B})}}]),ie}();at(Qf,"propTypes",{"aria-label":wt.string,"aria-labelledby":wt.string,autoHeight:wt.bool,children:function(ie){for(var B=Dn.Children.toArray(ie.children),V=0;V<B.length;V++){var Z=B[V].type;if(Z!==kc&&!(Z.prototype instanceof kc))return new Error("Table only accepts children of type Column")}},className:wt.string,disableHeader:wt.bool,estimatedRowSize:wt.number.isRequired,gridClassName:wt.string,gridStyle:wt.object,headerClassName:wt.string,headerHeight:wt.number.isRequired,headerRowRenderer:wt.func,headerStyle:wt.object,height:wt.number.isRequired,id:wt.string,noRowsRenderer:wt.func,onColumnClick:wt.func,onHeaderClick:wt.func,onRowClick:wt.func,onRowDoubleClick:wt.func,onRowMouseOut:wt.func,onRowMouseOver:wt.func,onRowRightClick:wt.func,onRowsRendered:wt.func,onScroll:wt.func.isRequired,overscanIndicesGetter:wt.func.isRequired,overscanRowCount:wt.number.isRequired,rowClassName:wt.oneOfType([wt.string,wt.func]),rowGetter:wt.func.isRequired,rowHeight:wt.oneOfType([wt.number,wt.func]).isRequired,rowCount:wt.number.isRequired,rowRenderer:wt.func,rowStyle:wt.oneOfType([wt.object,wt.func]).isRequired,scrollToAlignment:wt.oneOf(["auto","end","start","center"]).isRequired,scrollToIndex:wt.number.isRequired,scrollTop:wt.number,sort:wt.func,sortBy:wt.string,sortDirection:wt.oneOf([mo.ASC,mo.DESC]),style:wt.object,tabIndex:wt.number,width:wt.number.isRequired}),at(Qf,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:Rc,overscanRowCount:10,rowRenderer:eS,headerRowRenderer:Zg,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Ca=[],Dc=null,Ia=null;function tS(){Ia&&(Ia=null,Vt.body&&Dc!=null&&(Vt.body.style.pointerEvents=Dc),Dc=null)}s(tS,"enablePointerEventsIfDisabled");function ZS(){tS(),Ca.forEach(function(ie){return ie.__resetIsScrolling()})}s(ZS,"enablePointerEventsAfterDelayCallback");function nS(ie){ie.currentTarget===J&&Dc==null&&Vt.body&&(Dc=Vt.body.style.pointerEvents,Vt.body.style.pointerEvents="none"),function(){Ia&&tn(Ia);var B=0;Ca.forEach(function(V){B=Math.max(B,V.props.scrollingResetTimeInterval)}),Ia=Pn(ZS,B)}(),Ca.forEach(function(B){B.props.scrollElement===ie.currentTarget&&B.__handleWindowScrollEvent()})}s(nS,"onScrollWindow");function iS(ie,B){Ca.some(function(V){return V.props.scrollElement===B})||B.addEventListener("scroll",nS),Ca.push(ie)}s(iS,"registerScrollListener");function rS(ie,B){(Ca=Ca.filter(function(V){return V!==ie})).length||(B.removeEventListener("scroll",nS),Ia&&(tn(Ia),tS()))}s(rS,"unregisterScrollListener");var Zf=s(function(ie){return ie===J},"isWindow"),Nc=s(function(ie){return ie.getBoundingClientRect()},"getBoundingBox");function oS(ie,B){if(ie){if(Zf(ie)){var V=J,Z=V.innerHeight,se=V.innerWidth;return{height:typeof Z=="number"?Z:0,width:typeof se=="number"?se:0}}return Nc(ie)}return{height:B.serverHeight,width:B.serverWidth}}s(oS,"getDimensions");function sS(ie){return Zf(ie)&&Vt.documentElement?{top:"scrollY"in J?J.scrollY:Vt.documentElement.scrollTop,left:"scrollX"in J?J.scrollX:Vt.documentElement.scrollLeft}:{top:ie.scrollTop,left:ie.scrollLeft}}s(sS,"getScrollOffset");var aS=s(function(){return typeof J<"u"?J:void 0},"getWindow"),lS=function(){function ie(){var B,V;er(this,ie);for(var Z=arguments.length,se=new Array(Z),me=0;me<Z;me++)se[me]=arguments[me];return at(At(V=Ur(this,(B=Cr(ie)).call.apply(B,[this].concat(se)))),"_window",aS()),at(At(V),"_isMounted",!1),at(At(V),"_positionFromTop",0),at(At(V),"_positionFromLeft",0),at(At(V),"_detectElementResize",void 0),at(At(V),"_child",void 0),at(At(V),"state",bi({},oS(V.props.scrollElement,V.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),at(At(V),"_registerChild",function(ae){!ae||ae instanceof hi||ot.warn("WindowScroller registerChild expects to be passed Element or null"),V._child=ae,V.updatePosition()}),at(At(V),"_onChildScroll",function(ae){var Te=ae.scrollTop;if(V.state.scrollTop!==Te){var De=V.props.scrollElement;De&&(typeof De.scrollTo=="function"?De.scrollTo(0,Te+V._positionFromTop):De.scrollTop=Te+V._positionFromTop)}}),at(At(V),"_registerResizeListener",function(ae){ae===J?J.addEventListener("resize",V._onResize,!1):V._detectElementResize.addResizeListener(ae,V._onResize)}),at(At(V),"_unregisterResizeListener",function(ae){ae===J?J.removeEventListener("resize",V._onResize,!1):ae&&V._detectElementResize.removeResizeListener(ae,V._onResize)}),at(At(V),"_onResize",function(){V.updatePosition()}),at(At(V),"__handleWindowScrollEvent",function(){if(V._isMounted){var ae=V.props.onScroll,Te=V.props.scrollElement;if(Te){var De=sS(Te),ke=Math.max(0,De.left-V._positionFromLeft),Ge=Math.max(0,De.top-V._positionFromTop);V.setState({isScrolling:!0,scrollLeft:ke,scrollTop:Ge}),ae({scrollLeft:ke,scrollTop:Ge})}}}),at(At(V),"__resetIsScrolling",function(){V.setState({isScrolling:!1})}),V}return s(ie,"WindowScroller"),Dr(ie,Dn.PureComponent),or(ie,[{key:"updatePosition",value:function(B){var V=0<arguments.length&&B!==void 0?B:this.props.scrollElement,Z=this.props.onResize,se=this.state,me=se.height,ae=se.width,Te=this._child||Es.findDOMNode(this);if(Te instanceof hi&&V){var De=function(Ge,et){if(Zf(et)&&Vt.documentElement){var lt=Vt.documentElement,Mt=Nc(Ge),dt=Nc(lt);return{top:Mt.top-dt.top,left:Mt.left-dt.left}}var vt=sS(et),Pt=Nc(Ge),Ut=Nc(et);return{top:Pt.top+vt.top-Ut.top,left:Pt.left+vt.left-Ut.left}}(Te,V);this._positionFromTop=De.top,this._positionFromLeft=De.left}var ke=oS(V,this.props);me===ke.height&&ae===ke.width||(this.setState({height:ke.height,width:ke.width}),Z({height:ke.height,width:ke.width}))}},{key:"componentDidMount",value:function(){var B=this.props.scrollElement;this._detectElementResize=Js(),this.updatePosition(B),B&&(iS(this,B),this._registerResizeListener(B)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(B){var V=this.props.scrollElement,Z=B.scrollElement;Z!==V&&Z!=null&&V!=null&&(this.updatePosition(V),rS(this,Z),iS(this,V),this._unregisterResizeListener(Z),this._registerResizeListener(V))}},{key:"componentWillUnmount",value:function(){var B=this.props.scrollElement;B&&(rS(this,B),this._unregisterResizeListener(B)),this._isMounted=!1}},{key:"render",value:function(){var B=this.props.children,V=this.state,Z=V.isScrolling,se=V.scrollTop,me=V.scrollLeft,ae=V.height,Te=V.width;return B({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:ae,isScrolling:Z,scrollLeft:me,scrollTop:se,width:Te})}}]),ie}();at(lS,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:aS(),serverHeight:0,serverWidth:0}),xi.ArrowKeyStepper=Cs,xi.AutoSizer=Ys,xi.CellMeasurer=Tc,xi.CellMeasurerCache=Cc,xi.Collection=C,xi.Column=kc,xi.ColumnSizer=y,xi.Grid=Ko,xi.InfiniteLoader=Hf,xi.List=Hg,xi.Masonry=Jf,xi.MultiGrid=Ud,xi.ScrollSync=Yg,xi.SortDirection=mo,xi.SortIndicator=Xf,xi.Table=Qf,xi.WindowScroller=lS,xi.accessibilityOverscanIndicesGetter=Rc,xi.createMasonryCellPositioner=function(ie){var B,V=ie.cellMeasurerCache,Z=ie.columnCount,se=ie.columnWidth,me=ie.spacer,ae=me===void 0?0:me;function Te(ke){for(var Ge=0,et=1;et<B.length;et++)B[et]<B[Ge]&&(Ge=et);var lt=Ge*(se+ae),Mt=B[Ge]||0;return B[Ge]=Mt+V.getHeight(ke)+ae,{left:lt,top:Mt}}s(Te,"cellPositioner");function De(){B=[];for(var ke=0;ke<Z;ke++)B[ke]=0}return s(De,"initOrResetDerivedValues"),De(),Te.reset=function(ke){Z=ke.columnCount,se=ke.columnWidth,ae=ke.spacer,De()},Te},xi.createTableMultiSort=function(ie){var B=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},V=B.defaultSortBy,Z=B.defaultSortDirection,se=Z===void 0?{}:Z;if(!ie)throw Error('Required parameter "sortCallback" not specified');var me=V||[],ae={};return me.forEach(function(Te){ae[Te]=se[Te]!==void 0?se[Te]:"ASC"}),{sort:function(Te){var De=Te.defaultSortDirection,ke=Te.event,Ge=Te.sortBy;if(ke.shiftKey)ae[Ge]!==void 0?ae[Ge]=ae[Ge]==="ASC"?"DESC":"ASC":(ae[Ge]=De,me.push(Ge));else if(ke.ctrlKey||ke.metaKey){var et=me.indexOf(Ge);0<=et&&(me.splice(et,1),delete ae[Ge])}else me.length=0,me.push(Ge),Object.keys(ae).forEach(function(lt){lt!==Ge&&delete ae[lt]}),ae[Ge]!==void 0?ae[Ge]=ae[Ge]==="ASC"?"DESC":"ASC":ae[Ge]=De;ie({sortBy:me,sortDirection:ae})},sortBy:me,sortDirection:ae}},xi.defaultCellRangeRenderer=ye,xi.defaultOverscanIndicesGetter=ue,xi.defaultTableCellDataGetter=Xg,xi.defaultTableCellRenderer=Qg,xi.defaultTableHeaderRenderer=qg,xi.defaultTableHeaderRowRenderer=Zg,xi.defaultTableRowRenderer=eS,Object.defineProperty(xi,"__esModule",{value:!0})}),r.exports}},1874409785:function(F){(function(a,c){F.exports=c()})(this,function(){return function(a){var c={};function d(p){if(c[p])return c[p].exports;var m=c[p]={i:p,l:!1,exports:{}};return a[p].call(m.exports,m,m.exports,d),m.l=!0,m.exports}return s(d,"r"),d.m=a,d.c=c,d.d=function(p,m,g){d.o(p,m)||Object.defineProperty(p,m,{enumerable:!0,get:g})},d.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},d.t=function(p,m){if(1&m&&(p=d(p)),8&m||4&m&&typeof p=="object"&&p&&p.__esModule)return p;var g=Object.create(null);if(d.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:p}),2&m&&typeof p!="string")for(var l in p)d.d(g,l,function(r){return p[r]}.bind(null,l));return g},d.n=function(p){var m=p&&p.__esModule?function(){return p.default}:function(){return p};return d.d(m,"a",m),m},d.o=function(p,m){return Object.prototype.hasOwnProperty.call(p,m)},d.p="",d(d.s=90)}({17:function(a,c,d){"use strict";c.__esModule=!0,c.default=void 0;var p=d(18),m=function(){function g(){}return s(g,"e"),g.getFirstMatch=function(l,r){var n=r.match(l);return n&&n.length>0&&n[1]||""},g.getSecondMatch=function(l,r){var n=r.match(l);return n&&n.length>1&&n[2]||""},g.matchAndReturnConst=function(l,r,n){if(l.test(r))return n},g.getWindowsVersionName=function(l){switch(l){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},g.getMacOSVersionName=function(l){var r=l.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},g.getAndroidVersionName=function(l){var r=l.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(r.push(0),!(r[0]===1&&r[1]<5))return r[0]===1&&r[1]<6?"Cupcake":r[0]===1&&r[1]>=6?"Donut":r[0]===2&&r[1]<2?"Eclair":r[0]===2&&r[1]===2?"Froyo":r[0]===2&&r[1]>2?"Gingerbread":r[0]===3?"Honeycomb":r[0]===4&&r[1]<1?"Ice Cream Sandwich":r[0]===4&&r[1]<4?"Jelly Bean":r[0]===4&&r[1]>=4?"KitKat":r[0]===5?"Lollipop":r[0]===6?"Marshmallow":r[0]===7?"Nougat":r[0]===8?"Oreo":r[0]===9?"Pie":void 0},g.getVersionPrecision=function(l){return l.split(".").length},g.compareVersions=function(l,r,n){n===void 0&&(n=!1);var e=g.getVersionPrecision(l),t=g.getVersionPrecision(r),i=Math.max(e,t),o=0,u=g.map([l,r],function(h){var S=i-g.getVersionPrecision(h),f=h+new Array(S+1).join(".0");return g.map(f.split("."),function(v){return new Array(20-v.length).join("0")+v}).reverse()});for(n&&(o=i-Math.min(e,t)),i-=1;i>=o;){if(u[0][i]>u[1][i])return 1;if(u[0][i]===u[1][i]){if(i===o)return 0;i-=1}else if(u[0][i]<u[1][i])return-1}},g.map=function(l,r){var n,e=[];if(Array.prototype.map)return Array.prototype.map.call(l,r);for(n=0;n<l.length;n+=1)e.push(r(l[n]));return e},g.find=function(l,r){var n,e;if(Array.prototype.find)return Array.prototype.find.call(l,r);for(n=0,e=l.length;n<e;n+=1){var t=l[n];if(r(t,n))return t}},g.assign=function(l){for(var r,n,e=l,t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[l].concat(i));var u=s(function(){var h=i[r];typeof h=="object"&&h!==null&&Object.keys(h).forEach(function(S){e[S]=h[S]})},"o");for(r=0,n=i.length;r<n;r+=1)u();return l},g.getBrowserAlias=function(l){return p.BROWSER_ALIASES_MAP[l]},g.getBrowserTypeByAlias=function(l){return p.BROWSER_MAP[l]||""},g}();c.default=m,a.exports=c.default},18:function(a,c,d){"use strict";c.__esModule=!0,c.ENGINE_MAP=c.OS_MAP=c.PLATFORMS_MAP=c.BROWSER_MAP=c.BROWSER_ALIASES_MAP=void 0,c.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},c.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},c.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},c.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},c.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(a,c,d){"use strict";c.__esModule=!0,c.default=void 0;var p,m=(p=d(91))&&p.__esModule?p:{default:p},g=d(18);function l(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}s(l,"a");var r=function(){function n(){}s(n,"e");var e,t,i;return n.getParser=function(o,u){if(u===void 0&&(u=!1),typeof o!="string")throw new Error("UserAgent should be a string");return new m.default(o,u)},n.parse=function(o){return new m.default(o).getResult()},e=n,i=[{key:"BROWSER_MAP",get:function(){return g.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return g.ENGINE_MAP}},{key:"OS_MAP",get:function(){return g.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return g.PLATFORMS_MAP}}],(t=null)&&l(e.prototype,t),i&&l(e,i),n}();c.default=r,a.exports=c.default},91:function(a,c,d){"use strict";c.__esModule=!0,c.default=void 0;var p=n(d(92)),m=n(d(93)),g=n(d(94)),l=n(d(95)),r=n(d(17));function n(t){return t&&t.__esModule?t:{default:t}}s(n,"u");var e=function(){function t(o,u){if(u===void 0&&(u=!1),o==null||o==="")throw new Error("UserAgent parameter can't be empty");this._ua=o,this.parsedResult={},u!==!0&&this.parse()}s(t,"e");var i=t.prototype;return i.getUA=function(){return this._ua},i.test=function(o){return o.test(this._ua)},i.parseBrowser=function(){var o=this;this.parsedResult.browser={};var u=r.default.find(p.default,function(h){if(typeof h.test=="function")return h.test(o);if(h.test instanceof Array)return h.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return u&&(this.parsedResult.browser=u.describe(this.getUA())),this.parsedResult.browser},i.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},i.getBrowserName=function(o){return o?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},i.getBrowserVersion=function(){return this.getBrowser().version},i.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},i.parseOS=function(){var o=this;this.parsedResult.os={};var u=r.default.find(m.default,function(h){if(typeof h.test=="function")return h.test(o);if(h.test instanceof Array)return h.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return u&&(this.parsedResult.os=u.describe(this.getUA())),this.parsedResult.os},i.getOSName=function(o){var u=this.getOS().name;return o?String(u).toLowerCase()||"":u||""},i.getOSVersion=function(){return this.getOS().version},i.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},i.getPlatformType=function(o){o===void 0&&(o=!1);var u=this.getPlatform().type;return o?String(u).toLowerCase()||"":u||""},i.parsePlatform=function(){var o=this;this.parsedResult.platform={};var u=r.default.find(g.default,function(h){if(typeof h.test=="function")return h.test(o);if(h.test instanceof Array)return h.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return u&&(this.parsedResult.platform=u.describe(this.getUA())),this.parsedResult.platform},i.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},i.getEngineName=function(o){return o?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},i.parseEngine=function(){var o=this;this.parsedResult.engine={};var u=r.default.find(l.default,function(h){if(typeof h.test=="function")return h.test(o);if(h.test instanceof Array)return h.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return u&&(this.parsedResult.engine=u.describe(this.getUA())),this.parsedResult.engine},i.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},i.getResult=function(){return r.default.assign({},this.parsedResult)},i.satisfies=function(o){var u=this,h={},S=0,f={},v=0;if(Object.keys(o).forEach(function(k){var A=o[k];typeof A=="string"?(f[k]=A,v+=1):typeof A=="object"&&(h[k]=A,S+=1)}),S>0){var E=Object.keys(h),_=r.default.find(E,function(k){return u.isOS(k)});if(_){var T=this.satisfies(h[_]);if(T!==void 0)return T}var w=r.default.find(E,function(k){return u.isPlatform(k)});if(w){var M=this.satisfies(h[w]);if(M!==void 0)return M}}if(v>0){var R=Object.keys(f),O=r.default.find(R,function(k){return u.isBrowser(k,!0)});if(O!==void 0)return this.compareVersion(f[O])}},i.isBrowser=function(o,u){u===void 0&&(u=!1);var h=this.getBrowserName().toLowerCase(),S=o.toLowerCase(),f=r.default.getBrowserTypeByAlias(S);return u&&f&&(S=f.toLowerCase()),S===h},i.compareVersion=function(o){var u=[0],h=o,S=!1,f=this.getBrowserVersion();if(typeof f=="string")return o[0]===">"||o[0]==="<"?(h=o.substr(1),o[1]==="="?(S=!0,h=o.substr(2)):u=[],o[0]===">"?u.push(1):u.push(-1)):o[0]==="="?h=o.substr(1):o[0]==="~"&&(S=!0,h=o.substr(1)),u.indexOf(r.default.compareVersions(f,h,S))>-1},i.isOS=function(o){return this.getOSName(!0)===String(o).toLowerCase()},i.isPlatform=function(o){return this.getPlatformType(!0)===String(o).toLowerCase()},i.isEngine=function(o){return this.getEngineName(!0)===String(o).toLowerCase()},i.is=function(o,u){return u===void 0&&(u=!1),this.isBrowser(o,u)||this.isOS(o)||this.isPlatform(o)},i.some=function(o){var u=this;return o===void 0&&(o=[]),o.some(function(h){return u.is(h)})},t}();c.default=e,a.exports=c.default},92:function(a,c,d){"use strict";c.__esModule=!0,c.default=void 0;var p,m=(p=d(17))&&p.__esModule?p:{default:p},g=/version\/(\d+(\.?_?\d+)+)/i,l=[{test:[/googlebot/i],describe:function(r){var n={name:"Googlebot"},e=m.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/opera/i],describe:function(r){var n={name:"Opera"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/opr\/|opios/i],describe:function(r){var n={name:"Opera"},e=m.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/SamsungBrowser/i],describe:function(r){var n={name:"Samsung Internet for Android"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/Whale/i],describe:function(r){var n={name:"NAVER Whale Browser"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/MZBrowser/i],describe:function(r){var n={name:"MZ Browser"},e=m.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/focus/i],describe:function(r){var n={name:"Focus"},e=m.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/swing/i],describe:function(r){var n={name:"Swing"},e=m.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/coast/i],describe:function(r){var n={name:"Opera Coast"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(r){var n={name:"Opera Touch"},e=m.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/yabrowser/i],describe:function(r){var n={name:"Yandex Browser"},e=m.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/ucbrowser/i],describe:function(r){var n={name:"UC Browser"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/Maxthon|mxios/i],describe:function(r){var n={name:"Maxthon"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/epiphany/i],describe:function(r){var n={name:"Epiphany"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/puffin/i],describe:function(r){var n={name:"Puffin"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/sleipnir/i],describe:function(r){var n={name:"Sleipnir"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/k-meleon/i],describe:function(r){var n={name:"K-Meleon"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/micromessenger/i],describe:function(r){var n={name:"WeChat"},e=m.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/qqbrowser/i],describe:function(r){var n={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},e=m.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/msie|trident/i],describe:function(r){var n={name:"Internet Explorer"},e=m.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/\sedg\//i],describe:function(r){var n={name:"Microsoft Edge"},e=m.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/edg([ea]|ios)/i],describe:function(r){var n={name:"Microsoft Edge"},e=m.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/vivaldi/i],describe:function(r){var n={name:"Vivaldi"},e=m.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/seamonkey/i],describe:function(r){var n={name:"SeaMonkey"},e=m.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/sailfish/i],describe:function(r){var n={name:"Sailfish"},e=m.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return e&&(n.version=e),n}},{test:[/silk/i],describe:function(r){var n={name:"Amazon Silk"},e=m.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/phantom/i],describe:function(r){var n={name:"PhantomJS"},e=m.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/slimerjs/i],describe:function(r){var n={name:"SlimerJS"},e=m.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(r){var n={name:"BlackBerry"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/(web|hpw)[o0]s/i],describe:function(r){var n={name:"WebOS Browser"},e=m.default.getFirstMatch(g,r)||m.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/bada/i],describe:function(r){var n={name:"Bada"},e=m.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/tizen/i],describe:function(r){var n={name:"Tizen"},e=m.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/qupzilla/i],describe:function(r){var n={name:"QupZilla"},e=m.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/firefox|iceweasel|fxios/i],describe:function(r){var n={name:"Firefox"},e=m.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/electron/i],describe:function(r){var n={name:"Electron"},e=m.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/MiuiBrowser/i],describe:function(r){var n={name:"Miui"},e=m.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/chromium/i],describe:function(r){var n={name:"Chromium"},e=m.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/chrome|crios|crmo/i],describe:function(r){var n={name:"Chrome"},e=m.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/GSA/i],describe:function(r){var n={name:"Google Search"},e=m.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:function(r){var n=!r.test(/like android/i),e=r.test(/android/i);return n&&e},describe:function(r){var n={name:"Android Browser"},e=m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/playstation 4/i],describe:function(r){var n={name:"PlayStation 4"},e=m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/safari|applewebkit/i],describe:function(r){var n={name:"Safari"},e=m.default.getFirstMatch(g,r);return e&&(n.version=e),n}},{test:[/.*/i],describe:function(r){var n=r.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:m.default.getFirstMatch(n,r),version:m.default.getSecondMatch(n,r)}}}];c.default=l,a.exports=c.default},93:function(a,c,d){"use strict";c.__esModule=!0,c.default=void 0;var p,m=(p=d(17))&&p.__esModule?p:{default:p},g=d(18),l=[{test:[/Roku\/DVP/],describe:function(r){var n=m.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:g.OS_MAP.Roku,version:n}}},{test:[/windows phone/i],describe:function(r){var n=m.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:g.OS_MAP.WindowsPhone,version:n}}},{test:[/windows /i],describe:function(r){var n=m.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),e=m.default.getWindowsVersionName(n);return{name:g.OS_MAP.Windows,version:n,versionName:e}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(r){var n={name:g.OS_MAP.iOS},e=m.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return e&&(n.version=e),n}},{test:[/macintosh/i],describe:function(r){var n=m.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),e=m.default.getMacOSVersionName(n),t={name:g.OS_MAP.MacOS,version:n};return e&&(t.versionName=e),t}},{test:[/(ipod|iphone|ipad)/i],describe:function(r){var n=m.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:g.OS_MAP.iOS,version:n}}},{test:function(r){var n=!r.test(/like android/i),e=r.test(/android/i);return n&&e},describe:function(r){var n=m.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),e=m.default.getAndroidVersionName(n),t={name:g.OS_MAP.Android,version:n};return e&&(t.versionName=e),t}},{test:[/(web|hpw)[o0]s/i],describe:function(r){var n=m.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),e={name:g.OS_MAP.WebOS};return n&&n.length&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(r){var n=m.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||m.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||m.default.getFirstMatch(/\bbb(\d+)/i,r);return{name:g.OS_MAP.BlackBerry,version:n}}},{test:[/bada/i],describe:function(r){var n=m.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:g.OS_MAP.Bada,version:n}}},{test:[/tizen/i],describe:function(r){var n=m.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:g.OS_MAP.Tizen,version:n}}},{test:[/linux/i],describe:function(){return{name:g.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:g.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(r){var n=m.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:g.OS_MAP.PlayStation4,version:n}}}];c.default=l,a.exports=c.default},94:function(a,c,d){"use strict";c.__esModule=!0,c.default=void 0;var p,m=(p=d(17))&&p.__esModule?p:{default:p},g=d(18),l=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(r){var n=m.default.getFirstMatch(/(can-l01)/i,r)&&"Nova",e={type:g.PLATFORMS_MAP.mobile,vendor:"Huawei"};return n&&(e.model=n),e}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet}}},{test:function(r){var n=r.test(/ipod|iphone/i),e=r.test(/like (ipod|iphone)/i);return n&&!e},describe:function(r){var n=m.default.getFirstMatch(/(ipod|iphone)/i,r);return{type:g.PLATFORMS_MAP.mobile,vendor:"Apple",model:n}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:g.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:g.PLATFORMS_MAP.mobile}}},{test:function(r){return r.getBrowserName(!0)==="blackberry"},describe:function(){return{type:g.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(r){return r.getBrowserName(!0)==="bada"},describe:function(){return{type:g.PLATFORMS_MAP.mobile}}},{test:function(r){return r.getBrowserName()==="windows phone"},describe:function(){return{type:g.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(r){var n=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&n>=3},describe:function(){return{type:g.PLATFORMS_MAP.tablet}}},{test:function(r){return r.getOSName(!0)==="android"},describe:function(){return{type:g.PLATFORMS_MAP.mobile}}},{test:function(r){return r.getOSName(!0)==="macos"},describe:function(){return{type:g.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(r){return r.getOSName(!0)==="windows"},describe:function(){return{type:g.PLATFORMS_MAP.desktop}}},{test:function(r){return r.getOSName(!0)==="linux"},describe:function(){return{type:g.PLATFORMS_MAP.desktop}}},{test:function(r){return r.getOSName(!0)==="playstation 4"},describe:function(){return{type:g.PLATFORMS_MAP.tv}}},{test:function(r){return r.getOSName(!0)==="roku"},describe:function(){return{type:g.PLATFORMS_MAP.tv}}}];c.default=l,a.exports=c.default},95:function(a,c,d){"use strict";c.__esModule=!0,c.default=void 0;var p,m=(p=d(17))&&p.__esModule?p:{default:p},g=d(18),l=[{test:function(r){return r.getBrowserName(!0)==="microsoft edge"},describe:function(r){if(/\sedg\//i.test(r))return{name:g.ENGINE_MAP.Blink};var n=m.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:g.ENGINE_MAP.EdgeHTML,version:n}}},{test:[/trident/i],describe:function(r){var n={name:g.ENGINE_MAP.Trident},e=m.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:function(r){return r.test(/presto/i)},describe:function(r){var n={name:g.ENGINE_MAP.Presto},e=m.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:function(r){var n=r.test(/gecko/i),e=r.test(/like gecko/i);return n&&!e},describe:function(r){var n={name:g.ENGINE_MAP.Gecko},e=m.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:g.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(r){var n={name:g.ENGINE_MAP.WebKit},e=m.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}}];c.default=l,a.exports=c.default}})})},585669709:(F,a,c)=>{"use strict";c.r(a),c.d(a,{BotInfo:()=>l,BrowserInfo:()=>p,NodeInfo:()=>m,ReactNativeInfo:()=>r,SearchBotDeviceInfo:()=>g,browserName:()=>S,detect:()=>u,detectOS:()=>v,getNodeVersion:()=>E,parseUserAgent:()=>f});var d=function(T,w,M){if(M||arguments.length===2)for(var R=0,O=w.length,k;R<O;R++)(k||!(R in w))&&(k||(k=Array.prototype.slice.call(w,0,R)),k[R]=w[R]);return T.concat(k||Array.prototype.slice.call(w))},p=function(){function T(w,M,R){this.name=w,this.version=M,this.os=R,this.type="browser"}return s(T,"BrowserInfo"),T}(),m=function(){function T(w){this.version=w,this.type="node",this.name="node",this.os=(void 0).platform}return s(T,"NodeInfo"),T}(),g=function(){function T(w,M,R,O){this.name=w,this.version=M,this.os=R,this.bot=O,this.type="bot-device"}return s(T,"SearchBotDeviceInfo"),T}(),l=function(){function T(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return s(T,"BotInfo"),T}(),r=function(){function T(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return s(T,"ReactNativeInfo"),T}(),n=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,t=3,i=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",n]],o=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function u(T){return T?f(T):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new r:typeof navigator<"u"?f(navigator.userAgent):E()}s(u,"detect");function h(T){return T!==""&&i.reduce(function(w,M){var R=M[0],O=M[1];if(w)return w;var k=O.exec(T);return!!k&&[R,k]},!1)}s(h,"matchUserAgent");function S(T){var w=h(T);return w?w[0]:null}s(S,"browserName");function f(T){var w=h(T);if(!w)return null;var M=w[0],R=w[1];if(M==="searchbot")return new l;var O=R[1]&&R[1].split(".").join("_").split("_").slice(0,3);O?O.length<t&&(O=d(d([],O,!0),_(t-O.length),!0)):O=[];var k=O.join("."),A=v(T),P=e.exec(T);return P&&P[1]?new g(M,k,A,P[1]):new p(M,k,A)}s(f,"parseUserAgent");function v(T){for(var w=0,M=o.length;w<M;w++){var R=o[w],O=R[0],k=R[1],A=k.exec(T);if(A)return O}return null}s(v,"detectOS");function E(){var T=!1;return T?new m((void 0).version.slice(1)):null}s(E,"getNodeVersion");function _(T){for(var w=[],M=0;M<T;M++)w.push("0");return w}s(_,"createVersionParts")},7763652800:(F,a,c)=>{"use strict";c.d(a,{P:()=>p});function d(g){return s(({dispatch:r,getState:n})=>e=>t=>typeof t=="function"?t(r,n,g):e(t),"middleware")}s(d,"createThunkMiddleware");var p=d(),m=null},4473827453:()=>{(function(){var F=["user-blocking","user-visible","background"];class a{constructor(){this.channel_=new MessageChannel,this.sendPort_=this.channel_.port2,this.messages_={},this.nextMessageHandle_=1,this.channel_.port1.onmessage=n=>this.onMessageReceived_(n)}queueCallback(n){var e=this.nextMessageHandle_++;return this.messages_[e]=n,this.sendPort_.postMessage(e),e}cancelCallback(n){delete this.messages_[n]}onMessageReceived_(n){var e=n.data;if(e in this.messages_){var t=this.messages_[e];delete this.messages_[e],t()}}}s(a,"t");function c(){return c.instance_||(c.instance_=new a),c.instance_}s(c,"i");class d{constructor(n,e,t){t===void 0&&(t=0),this.callback_=n,this.callbackType_=null,this.handle_=null,this.canceled_=!1,this.schedule_(e,t)}isIdleCallback(){return this.callbackType_===0}isMessageChannelCallback(){return this.callbackType_===2}cancel(){if(!this.canceled_)switch(this.canceled_=!0,this.callbackType_){case 0:cancelIdleCallback(this.handle_);break;case 1:clearTimeout(this.handle_);break;case 2:c().cancelCallback(this.handle_);break;default:throw new TypeError("Unknown CallbackType")}}schedule_(n,e){if(e&&e>0)return this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()},e));if(!F.includes(n))throw new TypeError("Invalid task priority : "+n);return n==="background"&&typeof requestIdleCallback=="function"?(this.callbackType_=0,void(this.handle_=requestIdleCallback(()=>{this.runCallback_()}))):typeof MessageChannel=="function"?(this.callbackType_=2,void(this.handle_=c().queueCallback(()=>{this.runCallback_()}))):(this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()})))}runCallback_(){this.canceled_||this.callback_()}}s(d,"s");var p=0;class m{constructor(){this.head_=null,this.tail_=null}isEmpty(){return this.head_==null}push(n){if(typeof n!="object")throw new TypeError("Task must be an Object");n.tq_sequence_=p++,this.isEmpty()?(n.tq_prev_=null,this.head_=n):(n.tq_prev_=this.tail_,this.tail_.tq_next_=n),n.tq_next_=null,this.tail_=n}takeNextTask(){if(this.isEmpty())return null;var n=this.head_;return this.remove_(n),n}merge(n,e){if(typeof e!="function")throw new TypeError("Must provide a selector function.");if(n==null)throw new Error("sourceQueue cannot be null");for(var t=this.head_,i=null,o=n.head_;o;){var u=o;if(o=o.tq_next_,e(u)){for(n.remove_(u);t&&t.tq_sequence_<u.tq_sequence_;)i=t,t=t.tq_next_;this.insert_(u,i),i=u}}}toArray(){for(var n=this.head_,e=[];n!==null;)e.push(n),n=n.tq_next_;return e}insert_(n,e){if(e!=this.tail_){var t=e?e.tq_next_:this.head_;n.tq_next_=t,t.tq_prev_=n,n.tq_prev_=e,e!=null?e.tq_next_=n:this.head_=n}else this.push(n)}remove_(n){if(n==null)throw new Error("Expected task to be non-null");n===this.head_&&(this.head_=n.tq_next_),n===this.tail_&&(this.tail_=this.tail_.tq_prev_),n.tq_next_&&(n.tq_next_.tq_prev_=n.tq_prev_),n.tq_prev_&&(n.tq_prev_.tq_next_=n.tq_next_)}}s(m,"a");class g extends Event{constructor(n,e){if(!e||!F.includes(e.previousPriority))throw new TypeError("Invalid task priority: '"+e.previousPriority+"'");super(n),this.previousPriority=e.previousPriority}}s(g,"n");class l extends AbortController{constructor(n){if(n===void 0&&(n={}),super(),n==null&&(n={}),typeof n!="object")throw new TypeError("'init' is not an object");var e,t,i=n.priority===void 0?"user-visible":n.priority;if(!F.includes(i))throw new TypeError("Invalid task priority: '"+i+"'");this.priority_=i,this.isPriorityChanging_=!1,t=(e=this).signal,Object.defineProperties(t,{priority:{get:function(){return e.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),t.addEventListener("prioritychange",o=>{t.onprioritychange&&t.onprioritychange(o)})}setPriority(n){if(!F.includes(n))throw new TypeError("Invalid task priority: "+n);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority!==n){this.isPriorityChanging_=!0;var e=this.priority_;this.priority_=n;var t=new g("prioritychange",{previousPriority:e});this.signal.dispatchEvent(t),this.isPriorityChanging_=!1}}}s(l,"l"),self.scheduler===void 0&&(self.scheduler=new class{constructor(){this.queues_={},F.forEach(r=>{this.queues_[r]=new m}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(r,n){if((n=Object.assign({},n)).signal!==void 0){if(n.signal===null||!("aborted"in n.signal)||typeof n.signal.addEventListener!="function")return Promise.reject(new TypeError("'signal' is not a valid 'AbortSignal'"));if(n.signal&&n.signal.priority&&!F.includes(n.signal.priority))return Promise.reject(new TypeError("Invalid task priority: '"+n.signal.priority+"'"))}if(n.priority!==void 0&&(n.priority===null||!F.includes(n.priority)))return Promise.reject(new TypeError("Invalid task priority: '"+n.priority+"'"));if(n.delay===void 0&&(n.delay=0),n.delay=Number(n.delay),n.delay<0)return Promise.reject(new TypeError("'delay' must be a positive number."));var e={callback:r,options:n,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(this.options.signal.reason)},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},t=new Promise((i,o)=>{e.resolve=i,e.reject=o});return this.schedule_(e),t}schedule_(r){var n=r.options.signal;if(n){if(n.aborted)return void r.reject(n.reason);r.abortCallback=()=>{r.onTaskAborted()},n.addEventListener("abort",r.abortCallback)}r.options.delay>0?r.hostCallback=new d(()=>{r.hostCallback=null,this.onTaskDelayExpired_(r)},null,r.options.delay):(this.pushTask_(r),this.scheduleHostCallbackIfNeeded_())}onTaskDelayExpired_(r){this.pushTask_(r),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(r){var n=this.signals_.get(r);if(n===void 0)throw new Error("Attempting to change priority on an unregistered signal");n!==r.priority&&(this.queues_[r.priority].merge(this.queues_[n],e=>e.options.signal===r),this.signals_.set(r,r.priority))}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){var r=this.nextTaskPriority_();r!=null&&(r!=="background"&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new d(()=>{this.schedulerEntryCallback_()},r,0)))}pushTask_(r){var n;if(!F.includes(n=r.options.priority?r.options.priority:r.options.signal&&r.options.signal.priority?r.options.signal.priority:"user-visible"))throw new TypeError("Invalid task priority: "+n);if(r.options.signal&&r.options.signal.priority){var e=r.options.signal;this.signals_.has(e)||(e.addEventListener("prioritychange",()=>{this.onPriorityChange_(e)}),this.signals_.set(e,e.priority))}this.queues_[n].push(r)}runNextTask_(){var r=null;do{var n=this.nextTaskPriority_();if(n==null)return;r=this.queues_[n].takeNextTask()}while(r.isAborted());try{var e=r.callback();r.resolve(e)}catch(t){r.reject(t)}finally{r.onTaskCompleted()}}nextTaskPriority_(){for(var r=0;r<F.length;r++){var n=F[r];if(!this.queues_[n].isEmpty())return n}return null}},self.TaskController=l,self.TaskPriorityChangeEvent=g)})()},8274921051:(F,a,c)=>{"use strict";c.d(a,{Q:()=>d,c:()=>p});var d;(function(m){m[m.ID=25]="ID",m[m.FRECENCY=0]="FRECENCY",m[m.RAW_FRECENCY=65]="RAW_FRECENCY",m[m.FRECENCY_BONUS=76]="FRECENCY_BONUS",m[m.FRECENCY_WEIGHT_HIT_VISITS=91]="FRECENCY_WEIGHT_HIT_VISITS",m[m.FRECENCY_HIT_COUNT=92]="FRECENCY_HIT_COUNT",m[m.FRECENCY_WEIGHT_ITEM_VISITS=93]="FRECENCY_WEIGHT_ITEM_VISITS",m[m.FRECENCY_ITEM_COUNT=94]="FRECENCY_ITEM_COUNT",m[m.FRECENCY_LOG_HIT_COUNT=105]="FRECENCY_LOG_HIT_COUNT",m[m.FRECENCY_LOG_HIT_COUNT_SCALED=106]="FRECENCY_LOG_HIT_COUNT_SCALED",m[m.FRECENCY_LOG_ITEM_COUNT=159]="FRECENCY_LOG_ITEM_COUNT",m[m.FRECENCY_LOG_ITEM_COUNT_SCALED=160]="FRECENCY_LOG_ITEM_COUNT_SCALED",m[m.FRECENCY_HIT_VISIT_DECAY_2H=162]="FRECENCY_HIT_VISIT_DECAY_2H",m[m.FRECENCY_HIT_VISIT_DECAY_7D=163]="FRECENCY_HIT_VISIT_DECAY_7D",m[m.FRECENCY_ITEM_VISIT_DECAY_2H=164]="FRECENCY_ITEM_VISIT_DECAY_2H",m[m.FRECENCY_ITEM_VISIT_DECAY_7D=165]="FRECENCY_ITEM_VISIT_DECAY_7D",m[m.FRECENCY_HIT_VISITS_4H=242]="FRECENCY_HIT_VISITS_4H",m[m.FRECENCY_HIT_VISITS_1D=243]="FRECENCY_HIT_VISITS_1D",m[m.FRECENCY_HIT_VISITS_3D=244]="FRECENCY_HIT_VISITS_3D",m[m.FRECENCY_HIT_VISITS_1W=245]="FRECENCY_HIT_VISITS_1W",m[m.FRECENCY_HIT_VISITS_1M=246]="FRECENCY_HIT_VISITS_1M",m[m.FRECENCY_HIT_VISITS_90D=247]="FRECENCY_HIT_VISITS_90D",m[m.FRECENCY_ITEM_VISITS_4H=248]="FRECENCY_ITEM_VISITS_4H",m[m.FRECENCY_ITEM_VISITS_1D=249]="FRECENCY_ITEM_VISITS_1D",m[m.FRECENCY_ITEM_VISITS_3D=250]="FRECENCY_ITEM_VISITS_3D",m[m.FRECENCY_ITEM_VISITS_1W=251]="FRECENCY_ITEM_VISITS_1W",m[m.FRECENCY_ITEM_VISITS_1M=252]="FRECENCY_ITEM_VISITS_1M",m[m.FRECENCY_ITEM_VISITS_90D=253]="FRECENCY_ITEM_VISITS_90D",m[m.TYPE_NAVIGATION_CHANNEL=2]="TYPE_NAVIGATION_CHANNEL",m[m.TYPE_NAVIGATION_LINK=172]="TYPE_NAVIGATION_LINK",m[m.TYPE_NAVIGATION_MPIM=4]="TYPE_NAVIGATION_MPIM",m[m.TYPE_NAVIGATION_MODAL=177]="TYPE_NAVIGATION_MODAL",m[m.TYPE_NAVIGATION_USER=5]="TYPE_NAVIGATION_USER",m[m.TYPE_QUERY=6]="TYPE_QUERY",m[m.TYPE_QUERY_HISTORY=7]="TYPE_QUERY_HISTORY",m[m.TYPE_EMOJI=178]="TYPE_EMOJI",m[m.ACTIVE_TOKEN_FILTER_IN=8]="ACTIVE_TOKEN_FILTER_IN",m[m.ACTIVE_TOKEN_FILTER_FROM=9]="ACTIVE_TOKEN_FILTER_FROM",m[m.ACTIVE_TOKEN_FILTER_TO=10]="ACTIVE_TOKEN_FILTER_TO",m[m.ACTIVE_TOKEN_FILTER_BEFORE=11]="ACTIVE_TOKEN_FILTER_BEFORE",m[m.ACTIVE_TOKEN_FILTER_DURING=12]="ACTIVE_TOKEN_FILTER_DURING",m[m.ACTIVE_TOKEN_FILTER_ON=13]="ACTIVE_TOKEN_FILTER_ON",m[m.ACTIVE_TOKEN_FILTER_AFTER=14]="ACTIVE_TOKEN_FILTER_AFTER",m[m.ACTIVE_TOKEN_FILTER_HAS=15]="ACTIVE_TOKEN_FILTER_HAS",m[m.ACTIVE_TOKEN_FILTER_IS=155]="ACTIVE_TOKEN_FILTER_IS",m[m.ACTIVE_TOKEN_FILTER_WITH=233]="ACTIVE_TOKEN_FILTER_WITH",m[m.ACTIVE_TOKEN_MEMBER=16]="ACTIVE_TOKEN_MEMBER",m[m.ACTIVE_TOKEN_STRING=17]="ACTIVE_TOKEN_STRING",m[m.ACTIVE_TOKEN_PHRASE=18]="ACTIVE_TOKEN_PHRASE",m[m.STRING_EXACT_MATCH=19]="STRING_EXACT_MATCH",m[m.STRING_EXACT_PREFIX_MATCH=20]="STRING_EXACT_PREFIX_MATCH",m[m.STRING_NORMAL_MATCH=21]="STRING_NORMAL_MATCH",m[m.STRING_NORMAL_PREFIX_MATCH=22]="STRING_NORMAL_PREFIX_MATCH",m[m.STRING_SAME_NUMBER_WORDS=23]="STRING_SAME_NUMBER_WORDS",m[m.EXCESS_STRING_LENGTH=24]="EXCESS_STRING_LENGTH",m[m.EXACT_MATCH_LOG_RESULTS=229]="EXACT_MATCH_LOG_RESULTS",m[m.FILE_SUGGESTION_SCORE=26]="FILE_SUGGESTION_SCORE",m[m.ACTIVE_TOKEN_QUERY_SUGGESTION=27]="ACTIVE_TOKEN_QUERY_SUGGESTION",m[m.QUERY_SUGGESTION_SCORE_V2=28]="QUERY_SUGGESTION_SCORE_V2",m[m.TYPE_NAVIGATION_TEAM=31]="TYPE_NAVIGATION_TEAM",m[m.TYPE_NAVIGATION_VIEW=32]="TYPE_NAVIGATION_VIEW",m[m.TYPE_USER_QUERY=33]="TYPE_USER_QUERY",m[m.NAV_EXACT_MATCH=35]="NAV_EXACT_MATCH",m[m.NAV_EXACT_PREFIX_MATCH=36]="NAV_EXACT_PREFIX_MATCH",m[m.NAV_NORMAL_MATCH=37]="NAV_NORMAL_MATCH",m[m.NAV_NORMAL_PREFIX_MATCH=75]="NAV_NORMAL_PREFIX_MATCH",m[m.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH=38]="CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH",m[m.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH=39]="CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH",m[m.CHANNEL_IS_ARCHIVED=40]="CHANNEL_IS_ARCHIVED",m[m.CHANNEL_IS_MEMBER=41]="CHANNEL_IS_MEMBER",m[m.CHANNEL_IS_STARRED=42]="CHANNEL_IS_STARRED",m[m.MPIM_IS_STARRED=43]="MPIM_IS_STARRED",m[m.CHANNEL_IS_UNREAD=44]="CHANNEL_IS_UNREAD",m[m.MPIM_IS_UNREAD=45]="MPIM_IS_UNREAD",m[m.CHANNEL_IS_OTHER_TEAM=46]="CHANNEL_IS_OTHER_TEAM",m[m.USER_IS_ACTIVE=47]="USER_IS_ACTIVE",m[m.USER_IS_CURRENT_USER=48]="USER_IS_CURRENT_USER",m[m.USER_DM_IS_STARRED=49]="USER_DM_IS_STARRED",m[m.USER_DM_IS_UNREAD=50]="USER_DM_IS_UNREAD",m[m.CHANNEL_PRIORITY=51]="CHANNEL_PRIORITY",m[m.CHANNEL_READ_AGE_DECAY_7D=52]="CHANNEL_READ_AGE_DECAY_7D",m[m.CHANNEL_READ_AGE_DECAY_2H=53]="CHANNEL_READ_AGE_DECAY_2H",m[m.MPIM_READ_AGE_DECAY_2H=54]="MPIM_READ_AGE_DECAY_2H",m[m.MPIM_READ_AGE_DECAY_7D=55]="MPIM_READ_AGE_DECAY_7D",m[m.USER_DM_READ_AGE_DECAY_7D=56]="USER_DM_READ_AGE_DECAY_7D",m[m.USER_DM_READ_AGE_DECAY_2H=57]="USER_DM_READ_AGE_DECAY_2H",m[m.USER_DM_READ_AGE_DECAY_7D_V2=274]="USER_DM_READ_AGE_DECAY_7D_V2",m[m.USER_DM_READ_AGE_DECAY_2H_V2=275]="USER_DM_READ_AGE_DECAY_2H_V2",m[m.QUERY_LENGTH=61]="QUERY_LENGTH",m[m.NAV_QUERY_LENGTH=62]="NAV_QUERY_LENGTH",m[m.SUGGESTION_TEXT_LENGTH=63]="SUGGESTION_TEXT_LENGTH",m[m.NAV_TEXT_LENGTH=64]="NAV_TEXT_LENGTH",m[m.MPIM_PRIORITY=66]="MPIM_PRIORITY",m[m.QUERY_RATIO_LENGTH_STRING=68]="QUERY_RATIO_LENGTH_STRING",m[m.NAV_QUERY_RATIO_LENGTH_STRING=69]="NAV_QUERY_RATIO_LENGTH_STRING",m[m.USER_QUERY_RATIO_LENGTH_STRING=70]="USER_QUERY_RATIO_LENGTH_STRING",m[m.CHANNEL_QUERY_RATIO_LENGTH_STRING=71]="CHANNEL_QUERY_RATIO_LENGTH_STRING",m[m.MPIM_QUERY_RATIO_LENGTH_STRING=72]="MPIM_QUERY_RATIO_LENGTH_STRING",m[m.FUZZY_SCORE=73]="FUZZY_SCORE",m[m.MPIM_WITH_DEACTIVATED_USER=74]="MPIM_WITH_DEACTIVATED_USER",m[m.USER_FIRST_NAME_EXACT_MATCH=81]="USER_FIRST_NAME_EXACT_MATCH",m[m.USER_FIRST_NAME_EXACT_PREFIX_MATCH=82]="USER_FIRST_NAME_EXACT_PREFIX_MATCH",m[m.USER_FIRST_NAME_NORMAL_MATCH=83]="USER_FIRST_NAME_NORMAL_MATCH",m[m.USER_FIRST_NAME_NORMAL_PREFIX_MATCH=84]="USER_FIRST_NAME_NORMAL_PREFIX_MATCH",m[m.USER_LAST_NAME_EXACT_MATCH=85]="USER_LAST_NAME_EXACT_MATCH",m[m.USER_LAST_NAME_EXACT_PREFIX_MATCH=86]="USER_LAST_NAME_EXACT_PREFIX_MATCH",m[m.USER_LAST_NAME_NORMAL_MATCH=87]="USER_LAST_NAME_NORMAL_MATCH",m[m.USER_LAST_NAME_NORMAL_PREFIX_MATCH=88]="USER_LAST_NAME_NORMAL_PREFIX_MATCH",m[m.USER_PRIORITY=89]="USER_PRIORITY",m[m.ONLY_MATCHES_PREVIOUS_NAME=90]="ONLY_MATCHES_PREVIOUS_NAME",m[m.NAV_NORMAL_MATCH_USER=95]="NAV_NORMAL_MATCH_USER",m[m.NAV_NORMAL_PREFIX_MATCH_USER=96]="NAV_NORMAL_PREFIX_MATCH_USER",m[m.NAV_NORMAL_MATCH_NO_USER=97]="NAV_NORMAL_MATCH_NO_USER",m[m.NAV_NORMAL_PREFIX_MATCH_NO_USER=98]="NAV_NORMAL_PREFIX_MATCH_NO_USER",m[m.CHANNEL_LATEST_MSG_AGE_DECAY_7D=99]="CHANNEL_LATEST_MSG_AGE_DECAY_7D",m[m.CHANNEL_LATEST_MSG_AGE_DECAY_2H=100]="CHANNEL_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_LATEST_MSG_AGE_DECAY_2H=101]="MPIM_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_LATEST_MSG_AGE_DECAY_7D=102]="MPIM_LATEST_MSG_AGE_DECAY_7D",m[m.USER_DM_LATEST_MSG_AGE_DECAY_7D=103]="USER_DM_LATEST_MSG_AGE_DECAY_7D",m[m.USER_DM_LATEST_MSG_AGE_DECAY_2H=104]="USER_DM_LATEST_MSG_AGE_DECAY_2H",m[m.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2=260]="USER_DM_LATEST_MSG_AGE_DECAY_7D_V2",m[m.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2=261]="USER_DM_LATEST_MSG_AGE_DECAY_2H_V2",m[m.FUZZY_SCORE_50=127]="FUZZY_SCORE_50",m[m.FUZZY_SCORE_25=128]="FUZZY_SCORE_25",m[m.FUZZY_SCORE_ALL=129]="FUZZY_SCORE_ALL",m[m.FUZZY_SCORE_SCALED_EXP=291]="FUZZY_SCORE_SCALED_EXP",m[m.FUZZY_SCORE_SCALED_FLIPPED=292]="FUZZY_SCORE_SCALED_FLIPPED",m[m.FUZZY_SCORE_SCALED_SUBTRACT=293]="FUZZY_SCORE_SCALED_SUBTRACT",m[m.HERE_KEYWORD=131]="HERE_KEYWORD",m[m.HERE_KEYWORD_EXACT_MATCH=132]="HERE_KEYWORD_EXACT_MATCH",m[m.IS_BROADCAST_KEYWORD=133]="IS_BROADCAST_KEYWORD",m[m.BROADCAST_KEYWORD_NORMAL_MATCH=134]="BROADCAST_KEYWORD_NORMAL_MATCH",m[m.MEMBER_OF_CURRENT_CHANNEL=153]="MEMBER_OF_CURRENT_CHANNEL",m[m.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL=154]="QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL",m[m.USER_EMAIL_MATCH=170]="USER_EMAIL_MATCH",m[m.USER_EMAIL_ONLY_MATCH=171]="USER_EMAIL_ONLY_MATCH",m[m.QUERY_IS_SELF=193]="QUERY_IS_SELF",m[m.CURRENT_USER_TEXTY=194]="CURRENT_USER_TEXTY",m[m.USER_IS_EXTERNAL=234]="USER_IS_EXTERNAL",m[m.USER_SAME_TEAM=235]="USER_SAME_TEAM",m[m.USER_IS_BOT=254]="USER_IS_BOT",m[m.CHANNEL_TEAM_CTR_90DD=189]="CHANNEL_TEAM_CTR_90DD",m[m.CHANNEL_USER_CTR_30DD=190]="CHANNEL_USER_CTR_30DD",m[m.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS=199]="NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS",m[m.HISTORY_AGE_DECAY_2H=230]="HISTORY_AGE_DECAY_2H",m[m.HISTORY_AGE_DECAY_7D=231]="HISTORY_AGE_DECAY_7D",m[m.HISTORY_POSITION=232]="HISTORY_POSITION",m[m.USER_DM_NULL=179]="USER_DM_NULL",m[m.USER_DM_EMPTY=180]="USER_DM_EMPTY",m[m.USER_DM_NOT_OPEN=181]="USER_DM_NOT_OPEN",m[m.USER_DM_OPEN=182]="USER_DM_OPEN",m[m.USER_DM_LATEST_OLDER_30D=183]="USER_DM_LATEST_OLDER_30D",m[m.USER_DM_LATEST_OLDER_90D=184]="USER_DM_LATEST_OLDER_90D",m[m.USER_DM_EMPTY_V2=257]="USER_DM_EMPTY_V2",m[m.USER_DM_LATEST_OLDER_30D_V2=258]="USER_DM_LATEST_OLDER_30D_V2",m[m.USER_DM_LATEST_OLDER_90D_V2=259]="USER_DM_LATEST_OLDER_90D_V2",m[m.USER_HAS_DMED=284]="USER_HAS_DMED",m[m.USER_DM_READ_AGE_DECAY_2H_V3=285]="USER_DM_READ_AGE_DECAY_2H_V3",m[m.USER_DM_READ_AGE_DECAY_7D_V3=286]="USER_DM_READ_AGE_DECAY_7D_V3",m[m.USER_DM_READ_OLDER_7D=287]="USER_DM_READ_OLDER_7D",m[m.USER_DM_READ_OLDER_30D=288]="USER_DM_READ_OLDER_30D",m[m.USER_DM_READ_OLDER_90D=289]="USER_DM_READ_OLDER_90D",m[m.USER_MPIM_READ_AGE_DECAY_7D=236]="USER_MPIM_READ_AGE_DECAY_7D",m[m.USER_MPIM_READ_AGE_DECAY_2H=237]="USER_MPIM_READ_AGE_DECAY_2H",m[m.USER_MPIM_LATEST_MSG_AGE_DECAY_7D=238]="USER_MPIM_LATEST_MSG_AGE_DECAY_7D",m[m.USER_MPIM_LATEST_MSG_AGE_DECAY_2H=239]="USER_MPIM_LATEST_MSG_AGE_DECAY_2H",m[m.USER_MPIM_FRECENCY_LOG_HIT_COUNT=240]="USER_MPIM_FRECENCY_LOG_HIT_COUNT",m[m.USER_MPIM_FRECENCY_LOG_ITEM_COUNT=241]="USER_MPIM_FRECENCY_LOG_ITEM_COUNT",m[m.MPIM_MEMBERS=166]="MPIM_MEMBERS",m[m.MPIM_MEMBER_NAME_MATCHES=167]="MPIM_MEMBER_NAME_MATCHES",m[m.MPIM_MEMBER_ALL_MATCHES=168]="MPIM_MEMBER_ALL_MATCHES",m[m.MPIM_MATCHER_SCORE=169]="MPIM_MATCHER_SCORE",m[m.MPIM_MATCHER_SCORE_0=173]="MPIM_MATCHER_SCORE_0",m[m.MPIM_MATCHER_SCORE_1=174]="MPIM_MATCHER_SCORE_1",m[m.MPIM_MATCHER_SCORE_2=175]="MPIM_MATCHER_SCORE_2",m[m.MPIM_MATCHER_SCORE_3=176]="MPIM_MATCHER_SCORE_3",m[m.MPIM_TEAM_CTR_90DD=187]="MPIM_TEAM_CTR_90DD",m[m.MPIM_USER_CTR_30DD=188]="MPIM_USER_CTR_30DD",m[m.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H=262]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D=263]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D",m[m.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H=264]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D=265]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D",m[m.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H=266]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H",m[m.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D=267]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D",m[m.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H=268]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H",m[m.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D=269]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D",m[m.MPIM_USERS_PCT_NON_EMPTY_DMS=270]="MPIM_USERS_PCT_NON_EMPTY_DMS",m[m.MPIM_USERS_PCT_NON_NULL_DMS=271]="MPIM_USERS_PCT_NON_NULL_DMS",m[m.MPIM_USERS_ALL_INTERNAL=272]="MPIM_USERS_ALL_INTERNAL",m[m.EMOJI_EXACT_MATCH=136]="EMOJI_EXACT_MATCH",m[m.EMOJI_QUERY_LENGTH_RATIO=150]="EMOJI_QUERY_LENGTH_RATIO",m[m.EMOJI_TOTAL_COMBO_BREAKS=151]="EMOJI_TOTAL_COMBO_BREAKS",m[m.EMOJI_COMBO_BREAK_0=161]="EMOJI_COMBO_BREAK_0",m[m.EMOJI_COMBO_BREAK_1=156]="EMOJI_COMBO_BREAK_1",m[m.EMOJI_COMBO_BREAK_2=157]="EMOJI_COMBO_BREAK_2",m[m.EMOJI_COMBO_BREAK_3=158]="EMOJI_COMBO_BREAK_3",m[m.EMOJI_TEAM_CTR_90DD=185]="EMOJI_TEAM_CTR_90DD",m[m.EMOJI_USER_CTR_30DD=186]="EMOJI_USER_CTR_30DD",m[m.CHANNEL_IS_FROZEN=146]="CHANNEL_IS_FROZEN",m[m.USER_DM_IS_FROZEN=147]="USER_DM_IS_FROZEN",m[m.CHANNEL_HAS_DRAFT=148]="CHANNEL_HAS_DRAFT",m[m.USER_DM_HAS_DRAFT=149]="USER_DM_HAS_DRAFT",m[m.QUERY_FRECENCY_RAW=107]="QUERY_FRECENCY_RAW",m[m.QUERY_FRECENCY_WEIGHT_HIT_VISITS=108]="QUERY_FRECENCY_WEIGHT_HIT_VISITS",m[m.QUERY_FRECENCY_HIT_COUNT=109]="QUERY_FRECENCY_HIT_COUNT",m[m.QUERY_FRECENCY_WEIGHT_ITEM_VISITS=110]="QUERY_FRECENCY_WEIGHT_ITEM_VISITS",m[m.QUERY_FRECENCY_ITEM_COUNT=111]="QUERY_FRECENCY_ITEM_COUNT",m[m.QUERY_FUZZY_SCORE=112]="QUERY_FUZZY_SCORE",m[m.QUERY_FRECENCY_BONUS=113]="QUERY_FRECENCY_BONUS",m[m.QUERY_LOG_HIT_COUNT=130]="QUERY_LOG_HIT_COUNT",m[m.QUERY_TOKEN_NORMAL_MATCH=137]="QUERY_TOKEN_NORMAL_MATCH",m[m.QUERY_TOKEN_NORMAL_PREFIX_MATCH=138]="QUERY_TOKEN_NORMAL_PREFIX_MATCH",m[m.QUERY_HISTORY_AGE_DECAY_30D=282]="QUERY_HISTORY_AGE_DECAY_30D",m[m.QUERY_HISTORY_LOG_INDEX=283]="QUERY_HISTORY_LOG_INDEX",m[m.FILTER_USER_IS_ACTIVE=114]="FILTER_USER_IS_ACTIVE",m[m.FILTER_USER_IS_CURRENT_USER=115]="FILTER_USER_IS_CURRENT_USER",m[m.FILTER_USER_DM_IS_STARRED=116]="FILTER_USER_DM_IS_STARRED",m[m.FILTER_USER_DM_IS_UNREAD=117]="FILTER_USER_DM_IS_UNREAD",m[m.FILTER_USER_DM_READ_AGE_DECAY_7D=118]="FILTER_USER_DM_READ_AGE_DECAY_7D",m[m.FILTER_USER_DM_READ_AGE_DECAY_2H=119]="FILTER_USER_DM_READ_AGE_DECAY_2H",m[m.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D=120]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D",m[m.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H=121]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H",m[m.FILTER_USER_FIRST_NAME_NORMAL_MATCH=122]="FILTER_USER_FIRST_NAME_NORMAL_MATCH",m[m.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH=123]="FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH",m[m.FILTER_USER_LAST_NAME_NORMAL_MATCH=124]="FILTER_USER_LAST_NAME_NORMAL_MATCH",m[m.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH=125]="FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH",m[m.FILTER_USER_PRIORITY=126]="FILTER_USER_PRIORITY",m[m.FILTER_CHANNEL_IS_ARCHIVED=139]="FILTER_CHANNEL_IS_ARCHIVED",m[m.FILTER_CHANNEL_IS_MEMBER=140]="FILTER_CHANNEL_IS_MEMBER",m[m.FILTER_CHANNEL_IS_STARRED=141]="FILTER_CHANNEL_IS_STARRED",m[m.FILTER_CHANNEL_IS_UNREAD=142]="FILTER_CHANNEL_IS_UNREAD",m[m.FILTER_CHANNEL_READ_AGE_DECAY_7D=143]="FILTER_CHANNEL_READ_AGE_DECAY_7D",m[m.FILTER_CHANNEL_READ_AGE_DECAY_2H=144]="FILTER_CHANNEL_READ_AGE_DECAY_2H",m[m.FILTER_CHANNEL_PRIORITY=145]="FILTER_CHANNEL_PRIORITY",m[m.USER_ENTITY_TYPE_CTR_30DD=191]="USER_ENTITY_TYPE_CTR_30DD",m[m.NUM_RESULTS=192]="NUM_RESULTS",m[m.TYPE_NAVIGATION_FILE=3]="TYPE_NAVIGATION_FILE",m[m.FILE_AGE_DECAY_7D=195]="FILE_AGE_DECAY_7D",m[m.FILE_AGE_DECAY_28D=196]="FILE_AGE_DECAY_28D",m[m.FILE_AGE_DECAY_90D=197]="FILE_AGE_DECAY_90D",m[m.FILE_FROM_CURRENT_USER=198]="FILE_FROM_CURRENT_USER",m[m.FILE_LOG_PRIVATE_SHARES=200]="FILE_LOG_PRIVATE_SHARES",m[m.FILE_LOG_PUBLIC_SHARES=201]="FILE_LOG_PUBLIC_SHARES",m[m.FILE_LOG_ACTIONS=202]="FILE_LOG_ACTIONS",m[m.FILE_LATEST_ACTION_AGE_DECAY_2H=203]="FILE_LATEST_ACTION_AGE_DECAY_2H",m[m.FILE_LATEST_ACTION_AGE_DECAY_7D=204]="FILE_LATEST_ACTION_AGE_DECAY_7D",m[m.FILE_LATEST_ACTION_AGE_DECAY_90D=205]="FILE_LATEST_ACTION_AGE_DECAY_90D",m[m.FILE_LATEST_SHARE_AGE_DECAY_2H=206]="FILE_LATEST_SHARE_AGE_DECAY_2H",m[m.FILE_LATEST_SHARE_AGE_DECAY_7D=207]="FILE_LATEST_SHARE_AGE_DECAY_7D",m[m.FILE_LATEST_SHARE_AGE_DECAY_90D=208]="FILE_LATEST_SHARE_AGE_DECAY_90D",m[m.FILE_CHANNEL_CTR=209]="FILE_CHANNEL_CTR",m[m.FILE_SUGGESTIONS_SEARCHER=210]="FILE_SUGGESTIONS_SEARCHER",m[m.FILE_USER_CTR=211]="FILE_USER_CTR",m[m.FILE_NAME_CONTAINS_QUERY_NORMALIZED=273]="FILE_NAME_CONTAINS_QUERY_NORMALIZED",m[m.FILE_IS_CANVAS=276]="FILE_IS_CANVAS",m[m.FILE_HAS_DMS_WITH_CREATOR=277]="FILE_HAS_DMS_WITH_CREATOR",m[m.FILE_LATEST_VIEW_BY_USER_OLDER_90D=278]="FILE_LATEST_VIEW_BY_USER_OLDER_90D",m[m.FILE_HAS_DMS_WITH_CREATOR_V2=290]="FILE_HAS_DMS_WITH_CREATOR_V2",m[m.APP_NAME_PREFIX_MATCH=215]="APP_NAME_PREFIX_MATCH",m[m.BEST_NAME_MATCH_LOG_RESULTS=218]="BEST_NAME_MATCH_LOG_RESULTS",m[m.SHORTCUT_ENTITY_TYPE_CTR=226]="SHORTCUT_ENTITY_TYPE_CTR",m[m.TYPE_SLASH_COMMAND=212]="TYPE_SLASH_COMMAND",m[m.SLASH_COMMAND_TEAM_CTR=227]="SLASH_COMMAND_TEAM_CTR",m[m.SLASH_COMMAND_USER_CTR=219]="SLASH_COMMAND_USER_CTR",m[m.TYPE_GLOBAL_ACTION=213]="TYPE_GLOBAL_ACTION",m[m.IS_INVITE_WORKSPACE=217]="IS_INVITE_WORKSPACE",m[m.GLOBAL_ACTION_TEAM_CTR=220]="GLOBAL_ACTION_TEAM_CTR",m[m.GLOBAL_ACTION_USER_CTR=221]="GLOBAL_ACTION_USER_CTR",m[m.TYPE_CHANNEL_ACTION=214]="TYPE_CHANNEL_ACTION",m[m.CHANNEL_ACTION_TEAM_CTR=222]="CHANNEL_ACTION_TEAM_CTR",m[m.CHANNEL_ACTION_USER_CTR=223]="CHANNEL_ACTION_USER_CTR",m[m.TYPE_APP_ACTION=152]="TYPE_APP_ACTION",m[m.APP_ACTION_TEAM_CTR=224]="APP_ACTION_TEAM_CTR",m[m.APP_ACTION_USER_CTR=225]="APP_ACTION_USER_CTR",m[m.OS_APP_ACTION=228]="OS_APP_ACTION",m[m.TYPE_APP=216]="TYPE_APP",m[m.TYPE_NAVIGATION_MESSAGE=255]="TYPE_NAVIGATION_MESSAGE",m[m.TYPE_WORKFLOW_TRIGGER=256]="TYPE_WORKFLOW_TRIGGER",m[m.WORKFLOW_TRIGGER_TEAM_CTR=279]="WORKFLOW_TRIGGER_TEAM_CTR",m[m.WORKFLOW_TRIGGER_USER_CTR=280]="WORKFLOW_TRIGGER_USER_CTR",m[m.HAS_CHANNEL_ASSOCIATION=281]="HAS_CHANNEL_ASSOCIATION",m[m.DEPRECATED_QUERY_SUGGESTION_SCORE=1]="DEPRECATED_QUERY_SUGGESTION_SCORE",m[m.DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL=29]="DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL",m[m.DEPRECATED_BM25_SCORE=30]="DEPRECATED_BM25_SCORE",m[m.DEPRECATED_NAV_EXCESS_STRING_LENGTH=34]="DEPRECATED_NAV_EXCESS_STRING_LENGTH",m[m.DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH=58]="DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH",m[m.DEPRECATED_USER_EXCESS_STRING_LENGTH=59]="DEPRECATED_USER_EXCESS_STRING_LENGTH",m[m.DEPRECATED_MPIM_EXCESS_STRING_LENGTH=60]="DEPRECATED_MPIM_EXCESS_STRING_LENGTH",m[m.DEPRECATED_LOG_FRECENCY=67]="DEPRECATED_LOG_FRECENCY",m[m.DEPRECATED_LOG_FRECENCY_BONUS=77]="DEPRECATED_LOG_FRECENCY_BONUS",m[m.DEPRECATED_LOG_FRECENCY_CHANNEL=78]="DEPRECATED_LOG_FRECENCY_CHANNEL",m[m.DEPRECATED_LOG_FRECENCY_USER=79]="DEPRECATED_LOG_FRECENCY_USER",m[m.DEPRECATED_LOG_FRECENCY_MPIM=80]="DEPRECATED_LOG_FRECENCY_MPIM",m[m.DEPRECATED_EMOJI_SCORE_BONUS=135]="DEPRECATED_EMOJI_SCORE_BONUS",m[m.TEST_FEATURE_1=1e3]="TEST_FEATURE_1",m[m.TEST_FEATURE_2=1001]="TEST_FEATURE_2",m[m.TEST_FEATURE_3=1002]="TEST_FEATURE_3",m[m.TEST_FEATURE_4=1003]="TEST_FEATURE_4",m[m.TEST_FEATURE_5=1004]="TEST_FEATURE_5",m[m.TEST_FEATURE_6=1005]="TEST_FEATURE_6",m[m.TEST_FEATURE_7=1006]="TEST_FEATURE_7",m[m.TEST_FEATURE_8=1007]="TEST_FEATURE_8",m[m.TEST_FEATURE_9=1008]="TEST_FEATURE_9",m[m.TEST_FEATURE_10=1009]="TEST_FEATURE_10"})(d||(d={}));var p;(function(m){m[m.NUMERICAL=1]="NUMERICAL",m[m.BINARY=2]="BINARY",m[m.TEXT=3]="TEXT"})(p||(p={}))},9372409576:(F,a,c)=>{"use strict";c.d(a,{$:()=>n});var d=c(4224187311),p=c.n(d);const m=d.Reader,g=d.Writer,l=d.util,r=d.roots.default||(d.roots.default={}),n=r.slack=(()=>{const e={};return e.calls=function(){const t={};return t.analytics=function(){const i={};return i.RecvMedia=function(){function o(h){if(h)for(let S=Object.keys(h),f=0;f<S.length;++f)h[S[f]]!=null&&(this[S[f]]=h[S[f]])}s(o,"RecvMedia"),o.prototype.peerId=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.bytesReceived=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.packetsReceived=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.fractionLost=0,o.prototype.jitter=0,o.prototype.packetsLost=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.userId="",o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let u;return Object.defineProperty(o.prototype,"mediaType",{get:l.oneOfGetter(u=["audioStats","videoStats"]),set:l.oneOfSetter(u)}),o.create=s(function(S){return new o(S)},"create"),o.encode=s(function(S,f){return f||(f=g.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&f.uint32(8).uint64(S.peerId),S.bytesReceived!=null&&Object.hasOwnProperty.call(S,"bytesReceived")&&f.uint32(16).uint64(S.bytesReceived),S.packetsReceived!=null&&Object.hasOwnProperty.call(S,"packetsReceived")&&f.uint32(24).uint64(S.packetsReceived),S.fractionLost!=null&&Object.hasOwnProperty.call(S,"fractionLost")&&f.uint32(33).double(S.fractionLost),S.jitter!=null&&Object.hasOwnProperty.call(S,"jitter")&&f.uint32(41).double(S.jitter),S.packetsLost!=null&&Object.hasOwnProperty.call(S,"packetsLost")&&f.uint32(48).uint64(S.packetsLost),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&f.uint32(56).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&r.slack.calls.analytics.RecvMedia.Audio.encode(S.audioStats,f.uint32(66).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&r.slack.calls.analytics.RecvMedia.Video.encode(S.videoStats,f.uint32(74).fork()).ldelim(),S.userId!=null&&Object.hasOwnProperty.call(S,"userId")&&f.uint32(82).string(S.userId),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&f.uint32(90).string(S.peerIdString),f},"encode"),o.encodeDelimited=s(function(S,f){return this.encode(S,f).ldelim()},"encodeDelimited"),o.decode=s(function(S,f){S instanceof m||(S=m.create(S));let v=f===void 0?S.len:S.pos+f,E=new r.slack.calls.analytics.RecvMedia;for(;S.pos<v;){let _=S.uint32();switch(_>>>3){case 1:{E.peerId=S.uint64();break}case 2:{E.bytesReceived=S.uint64();break}case 3:{E.packetsReceived=S.uint64();break}case 4:{E.fractionLost=S.double();break}case 5:{E.jitter=S.double();break}case 6:{E.packetsLost=S.uint64();break}case 7:{E.codec=S.int32();break}case 10:{E.userId=S.string();break}case 11:{E.peerIdString=S.string();break}case 8:{E.audioStats=r.slack.calls.analytics.RecvMedia.Audio.decode(S,S.uint32());break}case 9:{E.videoStats=r.slack.calls.analytics.RecvMedia.Video.decode(S,S.uint32());break}default:S.skipType(_&7);break}}return E},"decode"),o.decodeDelimited=s(function(S){return S instanceof m||(S=new m(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=s(function(S){if(typeof S!="object"||S===null)return"object expected";let f={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!l.isInteger(S.peerId)&&!(S.peerId&&l.isInteger(S.peerId.low)&&l.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&!l.isInteger(S.bytesReceived)&&!(S.bytesReceived&&l.isInteger(S.bytesReceived.low)&&l.isInteger(S.bytesReceived.high)))return"bytesReceived: integer|Long expected";if(S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&!l.isInteger(S.packetsReceived)&&!(S.packetsReceived&&l.isInteger(S.packetsReceived.low)&&l.isInteger(S.packetsReceived.high)))return"packetsReceived: integer|Long expected";if(S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&typeof S.fractionLost!="number")return"fractionLost: number expected";if(S.jitter!=null&&S.hasOwnProperty("jitter")&&typeof S.jitter!="number")return"jitter: number expected";if(S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&!l.isInteger(S.packetsLost)&&!(S.packetsLost&&l.isInteger(S.packetsLost.low)&&l.isInteger(S.packetsLost.high)))return"packetsLost: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.userId!=null&&S.hasOwnProperty("userId")&&!l.isString(S.userId))return"userId: string expected";if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!l.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){f.mediaType=1;{let v=r.slack.calls.analytics.RecvMedia.Audio.verify(S.audioStats);if(v)return"audioStats."+v}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(f.mediaType===1)return"mediaType: multiple values";f.mediaType=1;{let v=r.slack.calls.analytics.RecvMedia.Video.verify(S.videoStats);if(v)return"videoStats."+v}}return null},"verify"),o.fromObject=s(function(S){if(S instanceof r.slack.calls.analytics.RecvMedia)return S;let f=new r.slack.calls.analytics.RecvMedia;switch(S.peerId!=null&&(l.Long?(f.peerId=l.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?f.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?f.peerId=S.peerId:typeof S.peerId=="object"&&(f.peerId=new l.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesReceived!=null&&(l.Long?(f.bytesReceived=l.Long.fromValue(S.bytesReceived)).unsigned=!0:typeof S.bytesReceived=="string"?f.bytesReceived=parseInt(S.bytesReceived,10):typeof S.bytesReceived=="number"?f.bytesReceived=S.bytesReceived:typeof S.bytesReceived=="object"&&(f.bytesReceived=new l.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0))),S.packetsReceived!=null&&(l.Long?(f.packetsReceived=l.Long.fromValue(S.packetsReceived)).unsigned=!0:typeof S.packetsReceived=="string"?f.packetsReceived=parseInt(S.packetsReceived,10):typeof S.packetsReceived=="number"?f.packetsReceived=S.packetsReceived:typeof S.packetsReceived=="object"&&(f.packetsReceived=new l.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0))),S.fractionLost!=null&&(f.fractionLost=Number(S.fractionLost)),S.jitter!=null&&(f.jitter=Number(S.jitter)),S.packetsLost!=null&&(l.Long?(f.packetsLost=l.Long.fromValue(S.packetsLost)).unsigned=!0:typeof S.packetsLost=="string"?f.packetsLost=parseInt(S.packetsLost,10):typeof S.packetsLost=="number"?f.packetsLost=S.packetsLost:typeof S.packetsLost=="object"&&(f.packetsLost=new l.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){f.codec=S.codec;break}break;case"UNKNOWN":case 0:f.codec=0;break;case"OPUS":case 1:f.codec=1;break;case"VP8":case 2:f.codec=2;break;case"VP9":case 3:f.codec=3;break;case"H264":case 4:f.codec=4;break}if(S.userId!=null&&(f.userId=String(S.userId)),S.peerIdString!=null&&(f.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.audioStats: object expected");f.audioStats=r.slack.calls.analytics.RecvMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.videoStats: object expected");f.videoStats=r.slack.calls.analytics.RecvMedia.Video.fromObject(S.videoStats)}return f},"fromObject"),o.toObject=s(function(S,f){f||(f={});let v={};if(f.defaults){if(l.Long){let E=new l.Long(0,0,!0);v.peerId=f.longs===String?E.toString():f.longs===Number?E.toNumber():E}else v.peerId=f.longs===String?"0":0;if(l.Long){let E=new l.Long(0,0,!0);v.bytesReceived=f.longs===String?E.toString():f.longs===Number?E.toNumber():E}else v.bytesReceived=f.longs===String?"0":0;if(l.Long){let E=new l.Long(0,0,!0);v.packetsReceived=f.longs===String?E.toString():f.longs===Number?E.toNumber():E}else v.packetsReceived=f.longs===String?"0":0;if(v.fractionLost=0,v.jitter=0,l.Long){let E=new l.Long(0,0,!0);v.packetsLost=f.longs===String?E.toString():f.longs===Number?E.toNumber():E}else v.packetsLost=f.longs===String?"0":0;v.codec=f.enums===String?"UNKNOWN":0,v.userId="",v.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?v.peerId=f.longs===String?String(S.peerId):S.peerId:v.peerId=f.longs===String?l.Long.prototype.toString.call(S.peerId):f.longs===Number?new l.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&(typeof S.bytesReceived=="number"?v.bytesReceived=f.longs===String?String(S.bytesReceived):S.bytesReceived:v.bytesReceived=f.longs===String?l.Long.prototype.toString.call(S.bytesReceived):f.longs===Number?new l.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0):S.bytesReceived),S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&(typeof S.packetsReceived=="number"?v.packetsReceived=f.longs===String?String(S.packetsReceived):S.packetsReceived:v.packetsReceived=f.longs===String?l.Long.prototype.toString.call(S.packetsReceived):f.longs===Number?new l.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0):S.packetsReceived),S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&(v.fractionLost=f.json&&!isFinite(S.fractionLost)?String(S.fractionLost):S.fractionLost),S.jitter!=null&&S.hasOwnProperty("jitter")&&(v.jitter=f.json&&!isFinite(S.jitter)?String(S.jitter):S.jitter),S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&(typeof S.packetsLost=="number"?v.packetsLost=f.longs===String?String(S.packetsLost):S.packetsLost:v.packetsLost=f.longs===String?l.Long.prototype.toString.call(S.packetsLost):f.longs===Number?new l.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0):S.packetsLost),S.codec!=null&&S.hasOwnProperty("codec")&&(v.codec=f.enums===String?r.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:r.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(v.audioStats=r.slack.calls.analytics.RecvMedia.Audio.toObject(S.audioStats,f),f.oneofs&&(v.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(v.videoStats=r.slack.calls.analytics.RecvMedia.Video.toObject(S.videoStats,f),f.oneofs&&(v.mediaType="videoStats")),S.userId!=null&&S.hasOwnProperty("userId")&&(v.userId=S.userId),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(v.peerIdString=S.peerIdString),v},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.RecvMedia"},"getTypeUrl"),o.Audio=function(){function h(S){if(S)for(let f=Object.keys(S),v=0;v<f.length;++v)S[f[v]]!=null&&(this[f[v]]=S[f[v]])}return s(h,"Audio"),h.prototype.audioLevel=0,h.prototype.jitterBufferDelay=0,h.prototype.concealmentEvents=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.concealedSamples=l.Long?l.Long.fromBits(0,0,!0):0,h.create=s(function(f){return new h(f)},"create"),h.encode=s(function(f,v){return v||(v=g.create()),f.audioLevel!=null&&Object.hasOwnProperty.call(f,"audioLevel")&&v.uint32(9).double(f.audioLevel),f.jitterBufferDelay!=null&&Object.hasOwnProperty.call(f,"jitterBufferDelay")&&v.uint32(17).double(f.jitterBufferDelay),f.concealmentEvents!=null&&Object.hasOwnProperty.call(f,"concealmentEvents")&&v.uint32(24).uint64(f.concealmentEvents),f.concealedSamples!=null&&Object.hasOwnProperty.call(f,"concealedSamples")&&v.uint32(32).uint64(f.concealedSamples),v},"encode"),h.encodeDelimited=s(function(f,v){return this.encode(f,v).ldelim()},"encodeDelimited"),h.decode=s(function(f,v){f instanceof m||(f=m.create(f));let E=v===void 0?f.len:f.pos+v,_=new r.slack.calls.analytics.RecvMedia.Audio;for(;f.pos<E;){let T=f.uint32();switch(T>>>3){case 1:{_.audioLevel=f.double();break}case 2:{_.jitterBufferDelay=f.double();break}case 3:{_.concealmentEvents=f.uint64();break}case 4:{_.concealedSamples=f.uint64();break}default:f.skipType(T&7);break}}return _},"decode"),h.decodeDelimited=s(function(f){return f instanceof m||(f=new m(f)),this.decode(f,f.uint32())},"decodeDelimited"),h.verify=s(function(f){return typeof f!="object"||f===null?"object expected":f.audioLevel!=null&&f.hasOwnProperty("audioLevel")&&typeof f.audioLevel!="number"?"audioLevel: number expected":f.jitterBufferDelay!=null&&f.hasOwnProperty("jitterBufferDelay")&&typeof f.jitterBufferDelay!="number"?"jitterBufferDelay: number expected":f.concealmentEvents!=null&&f.hasOwnProperty("concealmentEvents")&&!l.isInteger(f.concealmentEvents)&&!(f.concealmentEvents&&l.isInteger(f.concealmentEvents.low)&&l.isInteger(f.concealmentEvents.high))?"concealmentEvents: integer|Long expected":f.concealedSamples!=null&&f.hasOwnProperty("concealedSamples")&&!l.isInteger(f.concealedSamples)&&!(f.concealedSamples&&l.isInteger(f.concealedSamples.low)&&l.isInteger(f.concealedSamples.high))?"concealedSamples: integer|Long expected":null},"verify"),h.fromObject=s(function(f){if(f instanceof r.slack.calls.analytics.RecvMedia.Audio)return f;let v=new r.slack.calls.analytics.RecvMedia.Audio;return f.audioLevel!=null&&(v.audioLevel=Number(f.audioLevel)),f.jitterBufferDelay!=null&&(v.jitterBufferDelay=Number(f.jitterBufferDelay)),f.concealmentEvents!=null&&(l.Long?(v.concealmentEvents=l.Long.fromValue(f.concealmentEvents)).unsigned=!0:typeof f.concealmentEvents=="string"?v.concealmentEvents=parseInt(f.concealmentEvents,10):typeof f.concealmentEvents=="number"?v.concealmentEvents=f.concealmentEvents:typeof f.concealmentEvents=="object"&&(v.concealmentEvents=new l.LongBits(f.concealmentEvents.low>>>0,f.concealmentEvents.high>>>0).toNumber(!0))),f.concealedSamples!=null&&(l.Long?(v.concealedSamples=l.Long.fromValue(f.concealedSamples)).unsigned=!0:typeof f.concealedSamples=="string"?v.concealedSamples=parseInt(f.concealedSamples,10):typeof f.concealedSamples=="number"?v.concealedSamples=f.concealedSamples:typeof f.concealedSamples=="object"&&(v.concealedSamples=new l.LongBits(f.concealedSamples.low>>>0,f.concealedSamples.high>>>0).toNumber(!0))),v},"fromObject"),h.toObject=s(function(f,v){v||(v={});let E={};if(v.defaults){if(E.audioLevel=0,E.jitterBufferDelay=0,l.Long){let _=new l.Long(0,0,!0);E.concealmentEvents=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.concealmentEvents=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.concealedSamples=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.concealedSamples=v.longs===String?"0":0}return f.audioLevel!=null&&f.hasOwnProperty("audioLevel")&&(E.audioLevel=v.json&&!isFinite(f.audioLevel)?String(f.audioLevel):f.audioLevel),f.jitterBufferDelay!=null&&f.hasOwnProperty("jitterBufferDelay")&&(E.jitterBufferDelay=v.json&&!isFinite(f.jitterBufferDelay)?String(f.jitterBufferDelay):f.jitterBufferDelay),f.concealmentEvents!=null&&f.hasOwnProperty("concealmentEvents")&&(typeof f.concealmentEvents=="number"?E.concealmentEvents=v.longs===String?String(f.concealmentEvents):f.concealmentEvents:E.concealmentEvents=v.longs===String?l.Long.prototype.toString.call(f.concealmentEvents):v.longs===Number?new l.LongBits(f.concealmentEvents.low>>>0,f.concealmentEvents.high>>>0).toNumber(!0):f.concealmentEvents),f.concealedSamples!=null&&f.hasOwnProperty("concealedSamples")&&(typeof f.concealedSamples=="number"?E.concealedSamples=v.longs===String?String(f.concealedSamples):f.concealedSamples:E.concealedSamples=v.longs===String?l.Long.prototype.toString.call(f.concealedSamples):v.longs===Number?new l.LongBits(f.concealedSamples.low>>>0,f.concealedSamples.high>>>0).toNumber(!0):f.concealedSamples),E},"toObject"),h.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),h.getTypeUrl=s(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/slack.calls.analytics.RecvMedia.Audio"},"getTypeUrl"),h}(),o.Video=function(){function h(S){if(S)for(let f=Object.keys(S),v=0;v<f.length;++v)S[f[v]]!=null&&(this[f[v]]=S[f[v]])}return s(h,"Video"),h.prototype.firCount=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.nackCount=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.pliCount=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.sliCount=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.frameHeight=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.frameWidth=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.framesPerSecond=0,h.prototype.framesCorrupted=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.framesDecoded=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.framesDropped=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.framesReceived=l.Long?l.Long.fromBits(0,0,!0):0,h.create=s(function(f){return new h(f)},"create"),h.encode=s(function(f,v){return v||(v=g.create()),f.firCount!=null&&Object.hasOwnProperty.call(f,"firCount")&&v.uint32(8).uint64(f.firCount),f.nackCount!=null&&Object.hasOwnProperty.call(f,"nackCount")&&v.uint32(16).uint64(f.nackCount),f.pliCount!=null&&Object.hasOwnProperty.call(f,"pliCount")&&v.uint32(24).uint64(f.pliCount),f.sliCount!=null&&Object.hasOwnProperty.call(f,"sliCount")&&v.uint32(32).uint64(f.sliCount),f.frameHeight!=null&&Object.hasOwnProperty.call(f,"frameHeight")&&v.uint32(40).uint64(f.frameHeight),f.frameWidth!=null&&Object.hasOwnProperty.call(f,"frameWidth")&&v.uint32(48).uint64(f.frameWidth),f.framesPerSecond!=null&&Object.hasOwnProperty.call(f,"framesPerSecond")&&v.uint32(57).double(f.framesPerSecond),f.framesCorrupted!=null&&Object.hasOwnProperty.call(f,"framesCorrupted")&&v.uint32(64).uint64(f.framesCorrupted),f.framesDecoded!=null&&Object.hasOwnProperty.call(f,"framesDecoded")&&v.uint32(72).uint64(f.framesDecoded),f.framesDropped!=null&&Object.hasOwnProperty.call(f,"framesDropped")&&v.uint32(80).uint64(f.framesDropped),f.framesReceived!=null&&Object.hasOwnProperty.call(f,"framesReceived")&&v.uint32(88).uint64(f.framesReceived),v},"encode"),h.encodeDelimited=s(function(f,v){return this.encode(f,v).ldelim()},"encodeDelimited"),h.decode=s(function(f,v){f instanceof m||(f=m.create(f));let E=v===void 0?f.len:f.pos+v,_=new r.slack.calls.analytics.RecvMedia.Video;for(;f.pos<E;){let T=f.uint32();switch(T>>>3){case 1:{_.firCount=f.uint64();break}case 2:{_.nackCount=f.uint64();break}case 3:{_.pliCount=f.uint64();break}case 4:{_.sliCount=f.uint64();break}case 5:{_.frameHeight=f.uint64();break}case 6:{_.frameWidth=f.uint64();break}case 7:{_.framesPerSecond=f.double();break}case 8:{_.framesCorrupted=f.uint64();break}case 9:{_.framesDecoded=f.uint64();break}case 10:{_.framesDropped=f.uint64();break}case 11:{_.framesReceived=f.uint64();break}default:f.skipType(T&7);break}}return _},"decode"),h.decodeDelimited=s(function(f){return f instanceof m||(f=new m(f)),this.decode(f,f.uint32())},"decodeDelimited"),h.verify=s(function(f){return typeof f!="object"||f===null?"object expected":f.firCount!=null&&f.hasOwnProperty("firCount")&&!l.isInteger(f.firCount)&&!(f.firCount&&l.isInteger(f.firCount.low)&&l.isInteger(f.firCount.high))?"firCount: integer|Long expected":f.nackCount!=null&&f.hasOwnProperty("nackCount")&&!l.isInteger(f.nackCount)&&!(f.nackCount&&l.isInteger(f.nackCount.low)&&l.isInteger(f.nackCount.high))?"nackCount: integer|Long expected":f.pliCount!=null&&f.hasOwnProperty("pliCount")&&!l.isInteger(f.pliCount)&&!(f.pliCount&&l.isInteger(f.pliCount.low)&&l.isInteger(f.pliCount.high))?"pliCount: integer|Long expected":f.sliCount!=null&&f.hasOwnProperty("sliCount")&&!l.isInteger(f.sliCount)&&!(f.sliCount&&l.isInteger(f.sliCount.low)&&l.isInteger(f.sliCount.high))?"sliCount: integer|Long expected":f.frameHeight!=null&&f.hasOwnProperty("frameHeight")&&!l.isInteger(f.frameHeight)&&!(f.frameHeight&&l.isInteger(f.frameHeight.low)&&l.isInteger(f.frameHeight.high))?"frameHeight: integer|Long expected":f.frameWidth!=null&&f.hasOwnProperty("frameWidth")&&!l.isInteger(f.frameWidth)&&!(f.frameWidth&&l.isInteger(f.frameWidth.low)&&l.isInteger(f.frameWidth.high))?"frameWidth: integer|Long expected":f.framesPerSecond!=null&&f.hasOwnProperty("framesPerSecond")&&typeof f.framesPerSecond!="number"?"framesPerSecond: number expected":f.framesCorrupted!=null&&f.hasOwnProperty("framesCorrupted")&&!l.isInteger(f.framesCorrupted)&&!(f.framesCorrupted&&l.isInteger(f.framesCorrupted.low)&&l.isInteger(f.framesCorrupted.high))?"framesCorrupted: integer|Long expected":f.framesDecoded!=null&&f.hasOwnProperty("framesDecoded")&&!l.isInteger(f.framesDecoded)&&!(f.framesDecoded&&l.isInteger(f.framesDecoded.low)&&l.isInteger(f.framesDecoded.high))?"framesDecoded: integer|Long expected":f.framesDropped!=null&&f.hasOwnProperty("framesDropped")&&!l.isInteger(f.framesDropped)&&!(f.framesDropped&&l.isInteger(f.framesDropped.low)&&l.isInteger(f.framesDropped.high))?"framesDropped: integer|Long expected":f.framesReceived!=null&&f.hasOwnProperty("framesReceived")&&!l.isInteger(f.framesReceived)&&!(f.framesReceived&&l.isInteger(f.framesReceived.low)&&l.isInteger(f.framesReceived.high))?"framesReceived: integer|Long expected":null},"verify"),h.fromObject=s(function(f){if(f instanceof r.slack.calls.analytics.RecvMedia.Video)return f;let v=new r.slack.calls.analytics.RecvMedia.Video;return f.firCount!=null&&(l.Long?(v.firCount=l.Long.fromValue(f.firCount)).unsigned=!0:typeof f.firCount=="string"?v.firCount=parseInt(f.firCount,10):typeof f.firCount=="number"?v.firCount=f.firCount:typeof f.firCount=="object"&&(v.firCount=new l.LongBits(f.firCount.low>>>0,f.firCount.high>>>0).toNumber(!0))),f.nackCount!=null&&(l.Long?(v.nackCount=l.Long.fromValue(f.nackCount)).unsigned=!0:typeof f.nackCount=="string"?v.nackCount=parseInt(f.nackCount,10):typeof f.nackCount=="number"?v.nackCount=f.nackCount:typeof f.nackCount=="object"&&(v.nackCount=new l.LongBits(f.nackCount.low>>>0,f.nackCount.high>>>0).toNumber(!0))),f.pliCount!=null&&(l.Long?(v.pliCount=l.Long.fromValue(f.pliCount)).unsigned=!0:typeof f.pliCount=="string"?v.pliCount=parseInt(f.pliCount,10):typeof f.pliCount=="number"?v.pliCount=f.pliCount:typeof f.pliCount=="object"&&(v.pliCount=new l.LongBits(f.pliCount.low>>>0,f.pliCount.high>>>0).toNumber(!0))),f.sliCount!=null&&(l.Long?(v.sliCount=l.Long.fromValue(f.sliCount)).unsigned=!0:typeof f.sliCount=="string"?v.sliCount=parseInt(f.sliCount,10):typeof f.sliCount=="number"?v.sliCount=f.sliCount:typeof f.sliCount=="object"&&(v.sliCount=new l.LongBits(f.sliCount.low>>>0,f.sliCount.high>>>0).toNumber(!0))),f.frameHeight!=null&&(l.Long?(v.frameHeight=l.Long.fromValue(f.frameHeight)).unsigned=!0:typeof f.frameHeight=="string"?v.frameHeight=parseInt(f.frameHeight,10):typeof f.frameHeight=="number"?v.frameHeight=f.frameHeight:typeof f.frameHeight=="object"&&(v.frameHeight=new l.LongBits(f.frameHeight.low>>>0,f.frameHeight.high>>>0).toNumber(!0))),f.frameWidth!=null&&(l.Long?(v.frameWidth=l.Long.fromValue(f.frameWidth)).unsigned=!0:typeof f.frameWidth=="string"?v.frameWidth=parseInt(f.frameWidth,10):typeof f.frameWidth=="number"?v.frameWidth=f.frameWidth:typeof f.frameWidth=="object"&&(v.frameWidth=new l.LongBits(f.frameWidth.low>>>0,f.frameWidth.high>>>0).toNumber(!0))),f.framesPerSecond!=null&&(v.framesPerSecond=Number(f.framesPerSecond)),f.framesCorrupted!=null&&(l.Long?(v.framesCorrupted=l.Long.fromValue(f.framesCorrupted)).unsigned=!0:typeof f.framesCorrupted=="string"?v.framesCorrupted=parseInt(f.framesCorrupted,10):typeof f.framesCorrupted=="number"?v.framesCorrupted=f.framesCorrupted:typeof f.framesCorrupted=="object"&&(v.framesCorrupted=new l.LongBits(f.framesCorrupted.low>>>0,f.framesCorrupted.high>>>0).toNumber(!0))),f.framesDecoded!=null&&(l.Long?(v.framesDecoded=l.Long.fromValue(f.framesDecoded)).unsigned=!0:typeof f.framesDecoded=="string"?v.framesDecoded=parseInt(f.framesDecoded,10):typeof f.framesDecoded=="number"?v.framesDecoded=f.framesDecoded:typeof f.framesDecoded=="object"&&(v.framesDecoded=new l.LongBits(f.framesDecoded.low>>>0,f.framesDecoded.high>>>0).toNumber(!0))),f.framesDropped!=null&&(l.Long?(v.framesDropped=l.Long.fromValue(f.framesDropped)).unsigned=!0:typeof f.framesDropped=="string"?v.framesDropped=parseInt(f.framesDropped,10):typeof f.framesDropped=="number"?v.framesDropped=f.framesDropped:typeof f.framesDropped=="object"&&(v.framesDropped=new l.LongBits(f.framesDropped.low>>>0,f.framesDropped.high>>>0).toNumber(!0))),f.framesReceived!=null&&(l.Long?(v.framesReceived=l.Long.fromValue(f.framesReceived)).unsigned=!0:typeof f.framesReceived=="string"?v.framesReceived=parseInt(f.framesReceived,10):typeof f.framesReceived=="number"?v.framesReceived=f.framesReceived:typeof f.framesReceived=="object"&&(v.framesReceived=new l.LongBits(f.framesReceived.low>>>0,f.framesReceived.high>>>0).toNumber(!0))),v},"fromObject"),h.toObject=s(function(f,v){v||(v={});let E={};if(v.defaults){if(l.Long){let _=new l.Long(0,0,!0);E.firCount=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.firCount=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.nackCount=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.nackCount=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.pliCount=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.pliCount=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.sliCount=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.sliCount=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.frameHeight=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.frameHeight=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.frameWidth=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.frameWidth=v.longs===String?"0":0;if(E.framesPerSecond=0,l.Long){let _=new l.Long(0,0,!0);E.framesCorrupted=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.framesCorrupted=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.framesDecoded=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.framesDecoded=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.framesDropped=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.framesDropped=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.framesReceived=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.framesReceived=v.longs===String?"0":0}return f.firCount!=null&&f.hasOwnProperty("firCount")&&(typeof f.firCount=="number"?E.firCount=v.longs===String?String(f.firCount):f.firCount:E.firCount=v.longs===String?l.Long.prototype.toString.call(f.firCount):v.longs===Number?new l.LongBits(f.firCount.low>>>0,f.firCount.high>>>0).toNumber(!0):f.firCount),f.nackCount!=null&&f.hasOwnProperty("nackCount")&&(typeof f.nackCount=="number"?E.nackCount=v.longs===String?String(f.nackCount):f.nackCount:E.nackCount=v.longs===String?l.Long.prototype.toString.call(f.nackCount):v.longs===Number?new l.LongBits(f.nackCount.low>>>0,f.nackCount.high>>>0).toNumber(!0):f.nackCount),f.pliCount!=null&&f.hasOwnProperty("pliCount")&&(typeof f.pliCount=="number"?E.pliCount=v.longs===String?String(f.pliCount):f.pliCount:E.pliCount=v.longs===String?l.Long.prototype.toString.call(f.pliCount):v.longs===Number?new l.LongBits(f.pliCount.low>>>0,f.pliCount.high>>>0).toNumber(!0):f.pliCount),f.sliCount!=null&&f.hasOwnProperty("sliCount")&&(typeof f.sliCount=="number"?E.sliCount=v.longs===String?String(f.sliCount):f.sliCount:E.sliCount=v.longs===String?l.Long.prototype.toString.call(f.sliCount):v.longs===Number?new l.LongBits(f.sliCount.low>>>0,f.sliCount.high>>>0).toNumber(!0):f.sliCount),f.frameHeight!=null&&f.hasOwnProperty("frameHeight")&&(typeof f.frameHeight=="number"?E.frameHeight=v.longs===String?String(f.frameHeight):f.frameHeight:E.frameHeight=v.longs===String?l.Long.prototype.toString.call(f.frameHeight):v.longs===Number?new l.LongBits(f.frameHeight.low>>>0,f.frameHeight.high>>>0).toNumber(!0):f.frameHeight),f.frameWidth!=null&&f.hasOwnProperty("frameWidth")&&(typeof f.frameWidth=="number"?E.frameWidth=v.longs===String?String(f.frameWidth):f.frameWidth:E.frameWidth=v.longs===String?l.Long.prototype.toString.call(f.frameWidth):v.longs===Number?new l.LongBits(f.frameWidth.low>>>0,f.frameWidth.high>>>0).toNumber(!0):f.frameWidth),f.framesPerSecond!=null&&f.hasOwnProperty("framesPerSecond")&&(E.framesPerSecond=v.json&&!isFinite(f.framesPerSecond)?String(f.framesPerSecond):f.framesPerSecond),f.framesCorrupted!=null&&f.hasOwnProperty("framesCorrupted")&&(typeof f.framesCorrupted=="number"?E.framesCorrupted=v.longs===String?String(f.framesCorrupted):f.framesCorrupted:E.framesCorrupted=v.longs===String?l.Long.prototype.toString.call(f.framesCorrupted):v.longs===Number?new l.LongBits(f.framesCorrupted.low>>>0,f.framesCorrupted.high>>>0).toNumber(!0):f.framesCorrupted),f.framesDecoded!=null&&f.hasOwnProperty("framesDecoded")&&(typeof f.framesDecoded=="number"?E.framesDecoded=v.longs===String?String(f.framesDecoded):f.framesDecoded:E.framesDecoded=v.longs===String?l.Long.prototype.toString.call(f.framesDecoded):v.longs===Number?new l.LongBits(f.framesDecoded.low>>>0,f.framesDecoded.high>>>0).toNumber(!0):f.framesDecoded),f.framesDropped!=null&&f.hasOwnProperty("framesDropped")&&(typeof f.framesDropped=="number"?E.framesDropped=v.longs===String?String(f.framesDropped):f.framesDropped:E.framesDropped=v.longs===String?l.Long.prototype.toString.call(f.framesDropped):v.longs===Number?new l.LongBits(f.framesDropped.low>>>0,f.framesDropped.high>>>0).toNumber(!0):f.framesDropped),f.framesReceived!=null&&f.hasOwnProperty("framesReceived")&&(typeof f.framesReceived=="number"?E.framesReceived=v.longs===String?String(f.framesReceived):f.framesReceived:E.framesReceived=v.longs===String?l.Long.prototype.toString.call(f.framesReceived):v.longs===Number?new l.LongBits(f.framesReceived.low>>>0,f.framesReceived.high>>>0).toNumber(!0):f.framesReceived),E},"toObject"),h.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),h.getTypeUrl=s(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/slack.calls.analytics.RecvMedia.Video"},"getTypeUrl"),h}(),o}(),i.SendMedia=function(){function o(h){if(h)for(let S=Object.keys(h),f=0;f<S.length;++f)h[S[f]]!=null&&(this[S[f]]=h[S[f]])}s(o,"SendMedia"),o.prototype.peerId=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.bytesSent=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.packetsSent=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let u;return Object.defineProperty(o.prototype,"mediaType",{get:l.oneOfGetter(u=["audioStats","videoStats"]),set:l.oneOfSetter(u)}),o.create=s(function(S){return new o(S)},"create"),o.encode=s(function(S,f){return f||(f=g.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&f.uint32(8).uint64(S.peerId),S.bytesSent!=null&&Object.hasOwnProperty.call(S,"bytesSent")&&f.uint32(16).uint64(S.bytesSent),S.packetsSent!=null&&Object.hasOwnProperty.call(S,"packetsSent")&&f.uint32(24).uint64(S.packetsSent),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&f.uint32(32).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&r.slack.calls.analytics.SendMedia.Audio.encode(S.audioStats,f.uint32(42).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&r.slack.calls.analytics.SendMedia.Video.encode(S.videoStats,f.uint32(50).fork()).ldelim(),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&f.uint32(58).string(S.peerIdString),f},"encode"),o.encodeDelimited=s(function(S,f){return this.encode(S,f).ldelim()},"encodeDelimited"),o.decode=s(function(S,f){S instanceof m||(S=m.create(S));let v=f===void 0?S.len:S.pos+f,E=new r.slack.calls.analytics.SendMedia;for(;S.pos<v;){let _=S.uint32();switch(_>>>3){case 1:{E.peerId=S.uint64();break}case 2:{E.bytesSent=S.uint64();break}case 3:{E.packetsSent=S.uint64();break}case 4:{E.codec=S.int32();break}case 7:{E.peerIdString=S.string();break}case 5:{E.audioStats=r.slack.calls.analytics.SendMedia.Audio.decode(S,S.uint32());break}case 6:{E.videoStats=r.slack.calls.analytics.SendMedia.Video.decode(S,S.uint32());break}default:S.skipType(_&7);break}}return E},"decode"),o.decodeDelimited=s(function(S){return S instanceof m||(S=new m(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=s(function(S){if(typeof S!="object"||S===null)return"object expected";let f={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!l.isInteger(S.peerId)&&!(S.peerId&&l.isInteger(S.peerId.low)&&l.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&!l.isInteger(S.bytesSent)&&!(S.bytesSent&&l.isInteger(S.bytesSent.low)&&l.isInteger(S.bytesSent.high)))return"bytesSent: integer|Long expected";if(S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&!l.isInteger(S.packetsSent)&&!(S.packetsSent&&l.isInteger(S.packetsSent.low)&&l.isInteger(S.packetsSent.high)))return"packetsSent: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!l.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){f.mediaType=1;{let v=r.slack.calls.analytics.SendMedia.Audio.verify(S.audioStats);if(v)return"audioStats."+v}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(f.mediaType===1)return"mediaType: multiple values";f.mediaType=1;{let v=r.slack.calls.analytics.SendMedia.Video.verify(S.videoStats);if(v)return"videoStats."+v}}return null},"verify"),o.fromObject=s(function(S){if(S instanceof r.slack.calls.analytics.SendMedia)return S;let f=new r.slack.calls.analytics.SendMedia;switch(S.peerId!=null&&(l.Long?(f.peerId=l.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?f.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?f.peerId=S.peerId:typeof S.peerId=="object"&&(f.peerId=new l.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesSent!=null&&(l.Long?(f.bytesSent=l.Long.fromValue(S.bytesSent)).unsigned=!0:typeof S.bytesSent=="string"?f.bytesSent=parseInt(S.bytesSent,10):typeof S.bytesSent=="number"?f.bytesSent=S.bytesSent:typeof S.bytesSent=="object"&&(f.bytesSent=new l.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0))),S.packetsSent!=null&&(l.Long?(f.packetsSent=l.Long.fromValue(S.packetsSent)).unsigned=!0:typeof S.packetsSent=="string"?f.packetsSent=parseInt(S.packetsSent,10):typeof S.packetsSent=="number"?f.packetsSent=S.packetsSent:typeof S.packetsSent=="object"&&(f.packetsSent=new l.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){f.codec=S.codec;break}break;case"UNKNOWN":case 0:f.codec=0;break;case"OPUS":case 1:f.codec=1;break;case"VP8":case 2:f.codec=2;break;case"VP9":case 3:f.codec=3;break;case"H264":case 4:f.codec=4;break}if(S.peerIdString!=null&&(f.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.audioStats: object expected");f.audioStats=r.slack.calls.analytics.SendMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.videoStats: object expected");f.videoStats=r.slack.calls.analytics.SendMedia.Video.fromObject(S.videoStats)}return f},"fromObject"),o.toObject=s(function(S,f){f||(f={});let v={};if(f.defaults){if(l.Long){let E=new l.Long(0,0,!0);v.peerId=f.longs===String?E.toString():f.longs===Number?E.toNumber():E}else v.peerId=f.longs===String?"0":0;if(l.Long){let E=new l.Long(0,0,!0);v.bytesSent=f.longs===String?E.toString():f.longs===Number?E.toNumber():E}else v.bytesSent=f.longs===String?"0":0;if(l.Long){let E=new l.Long(0,0,!0);v.packetsSent=f.longs===String?E.toString():f.longs===Number?E.toNumber():E}else v.packetsSent=f.longs===String?"0":0;v.codec=f.enums===String?"UNKNOWN":0,v.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?v.peerId=f.longs===String?String(S.peerId):S.peerId:v.peerId=f.longs===String?l.Long.prototype.toString.call(S.peerId):f.longs===Number?new l.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&(typeof S.bytesSent=="number"?v.bytesSent=f.longs===String?String(S.bytesSent):S.bytesSent:v.bytesSent=f.longs===String?l.Long.prototype.toString.call(S.bytesSent):f.longs===Number?new l.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0):S.bytesSent),S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&(typeof S.packetsSent=="number"?v.packetsSent=f.longs===String?String(S.packetsSent):S.packetsSent:v.packetsSent=f.longs===String?l.Long.prototype.toString.call(S.packetsSent):f.longs===Number?new l.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0):S.packetsSent),S.codec!=null&&S.hasOwnProperty("codec")&&(v.codec=f.enums===String?r.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:r.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(v.audioStats=r.slack.calls.analytics.SendMedia.Audio.toObject(S.audioStats,f),f.oneofs&&(v.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(v.videoStats=r.slack.calls.analytics.SendMedia.Video.toObject(S.videoStats,f),f.oneofs&&(v.mediaType="videoStats")),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(v.peerIdString=S.peerIdString),v},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.SendMedia"},"getTypeUrl"),o.Audio=function(){function h(S){if(S)for(let f=Object.keys(S),v=0;v<f.length;++v)S[f[v]]!=null&&(this[f[v]]=S[f[v]])}return s(h,"Audio"),h.prototype.audioLevel=0,h.prototype.echoReturnLoss=0,h.prototype.echoReturnLossEnhancement=0,h.prototype.totalAudioEnergy=0,h.prototype.totalSamplesDuration=0,h.create=s(function(f){return new h(f)},"create"),h.encode=s(function(f,v){return v||(v=g.create()),f.audioLevel!=null&&Object.hasOwnProperty.call(f,"audioLevel")&&v.uint32(9).double(f.audioLevel),f.echoReturnLoss!=null&&Object.hasOwnProperty.call(f,"echoReturnLoss")&&v.uint32(17).double(f.echoReturnLoss),f.echoReturnLossEnhancement!=null&&Object.hasOwnProperty.call(f,"echoReturnLossEnhancement")&&v.uint32(25).double(f.echoReturnLossEnhancement),f.totalAudioEnergy!=null&&Object.hasOwnProperty.call(f,"totalAudioEnergy")&&v.uint32(33).double(f.totalAudioEnergy),f.totalSamplesDuration!=null&&Object.hasOwnProperty.call(f,"totalSamplesDuration")&&v.uint32(41).double(f.totalSamplesDuration),v},"encode"),h.encodeDelimited=s(function(f,v){return this.encode(f,v).ldelim()},"encodeDelimited"),h.decode=s(function(f,v){f instanceof m||(f=m.create(f));let E=v===void 0?f.len:f.pos+v,_=new r.slack.calls.analytics.SendMedia.Audio;for(;f.pos<E;){let T=f.uint32();switch(T>>>3){case 1:{_.audioLevel=f.double();break}case 2:{_.echoReturnLoss=f.double();break}case 3:{_.echoReturnLossEnhancement=f.double();break}case 4:{_.totalAudioEnergy=f.double();break}case 5:{_.totalSamplesDuration=f.double();break}default:f.skipType(T&7);break}}return _},"decode"),h.decodeDelimited=s(function(f){return f instanceof m||(f=new m(f)),this.decode(f,f.uint32())},"decodeDelimited"),h.verify=s(function(f){return typeof f!="object"||f===null?"object expected":f.audioLevel!=null&&f.hasOwnProperty("audioLevel")&&typeof f.audioLevel!="number"?"audioLevel: number expected":f.echoReturnLoss!=null&&f.hasOwnProperty("echoReturnLoss")&&typeof f.echoReturnLoss!="number"?"echoReturnLoss: number expected":f.echoReturnLossEnhancement!=null&&f.hasOwnProperty("echoReturnLossEnhancement")&&typeof f.echoReturnLossEnhancement!="number"?"echoReturnLossEnhancement: number expected":f.totalAudioEnergy!=null&&f.hasOwnProperty("totalAudioEnergy")&&typeof f.totalAudioEnergy!="number"?"totalAudioEnergy: number expected":f.totalSamplesDuration!=null&&f.hasOwnProperty("totalSamplesDuration")&&typeof f.totalSamplesDuration!="number"?"totalSamplesDuration: number expected":null},"verify"),h.fromObject=s(function(f){if(f instanceof r.slack.calls.analytics.SendMedia.Audio)return f;let v=new r.slack.calls.analytics.SendMedia.Audio;return f.audioLevel!=null&&(v.audioLevel=Number(f.audioLevel)),f.echoReturnLoss!=null&&(v.echoReturnLoss=Number(f.echoReturnLoss)),f.echoReturnLossEnhancement!=null&&(v.echoReturnLossEnhancement=Number(f.echoReturnLossEnhancement)),f.totalAudioEnergy!=null&&(v.totalAudioEnergy=Number(f.totalAudioEnergy)),f.totalSamplesDuration!=null&&(v.totalSamplesDuration=Number(f.totalSamplesDuration)),v},"fromObject"),h.toObject=s(function(f,v){v||(v={});let E={};return v.defaults&&(E.audioLevel=0,E.echoReturnLoss=0,E.echoReturnLossEnhancement=0,E.totalAudioEnergy=0,E.totalSamplesDuration=0),f.audioLevel!=null&&f.hasOwnProperty("audioLevel")&&(E.audioLevel=v.json&&!isFinite(f.audioLevel)?String(f.audioLevel):f.audioLevel),f.echoReturnLoss!=null&&f.hasOwnProperty("echoReturnLoss")&&(E.echoReturnLoss=v.json&&!isFinite(f.echoReturnLoss)?String(f.echoReturnLoss):f.echoReturnLoss),f.echoReturnLossEnhancement!=null&&f.hasOwnProperty("echoReturnLossEnhancement")&&(E.echoReturnLossEnhancement=v.json&&!isFinite(f.echoReturnLossEnhancement)?String(f.echoReturnLossEnhancement):f.echoReturnLossEnhancement),f.totalAudioEnergy!=null&&f.hasOwnProperty("totalAudioEnergy")&&(E.totalAudioEnergy=v.json&&!isFinite(f.totalAudioEnergy)?String(f.totalAudioEnergy):f.totalAudioEnergy),f.totalSamplesDuration!=null&&f.hasOwnProperty("totalSamplesDuration")&&(E.totalSamplesDuration=v.json&&!isFinite(f.totalSamplesDuration)?String(f.totalSamplesDuration):f.totalSamplesDuration),E},"toObject"),h.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),h.getTypeUrl=s(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/slack.calls.analytics.SendMedia.Audio"},"getTypeUrl"),h}(),o.Video=function(){function h(S){if(S)for(let f=Object.keys(S),v=0;v<f.length;++v)S[f[v]]!=null&&(this[f[v]]=S[f[v]])}return s(h,"Video"),h.prototype.frameHeight=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.frameWidth=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.framesPerSecond=0,h.prototype.framesSent=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.framesEncoded=l.Long?l.Long.fromBits(0,0,!0):0,h.prototype.hugeFramesSent=l.Long?l.Long.fromBits(0,0,!0):0,h.create=s(function(f){return new h(f)},"create"),h.encode=s(function(f,v){return v||(v=g.create()),f.frameHeight!=null&&Object.hasOwnProperty.call(f,"frameHeight")&&v.uint32(8).uint64(f.frameHeight),f.frameWidth!=null&&Object.hasOwnProperty.call(f,"frameWidth")&&v.uint32(16).uint64(f.frameWidth),f.framesPerSecond!=null&&Object.hasOwnProperty.call(f,"framesPerSecond")&&v.uint32(25).double(f.framesPerSecond),f.framesSent!=null&&Object.hasOwnProperty.call(f,"framesSent")&&v.uint32(32).uint64(f.framesSent),f.framesEncoded!=null&&Object.hasOwnProperty.call(f,"framesEncoded")&&v.uint32(40).uint64(f.framesEncoded),f.hugeFramesSent!=null&&Object.hasOwnProperty.call(f,"hugeFramesSent")&&v.uint32(48).uint64(f.hugeFramesSent),v},"encode"),h.encodeDelimited=s(function(f,v){return this.encode(f,v).ldelim()},"encodeDelimited"),h.decode=s(function(f,v){f instanceof m||(f=m.create(f));let E=v===void 0?f.len:f.pos+v,_=new r.slack.calls.analytics.SendMedia.Video;for(;f.pos<E;){let T=f.uint32();switch(T>>>3){case 1:{_.frameHeight=f.uint64();break}case 2:{_.frameWidth=f.uint64();break}case 3:{_.framesPerSecond=f.double();break}case 4:{_.framesSent=f.uint64();break}case 5:{_.framesEncoded=f.uint64();break}case 6:{_.hugeFramesSent=f.uint64();break}default:f.skipType(T&7);break}}return _},"decode"),h.decodeDelimited=s(function(f){return f instanceof m||(f=new m(f)),this.decode(f,f.uint32())},"decodeDelimited"),h.verify=s(function(f){return typeof f!="object"||f===null?"object expected":f.frameHeight!=null&&f.hasOwnProperty("frameHeight")&&!l.isInteger(f.frameHeight)&&!(f.frameHeight&&l.isInteger(f.frameHeight.low)&&l.isInteger(f.frameHeight.high))?"frameHeight: integer|Long expected":f.frameWidth!=null&&f.hasOwnProperty("frameWidth")&&!l.isInteger(f.frameWidth)&&!(f.frameWidth&&l.isInteger(f.frameWidth.low)&&l.isInteger(f.frameWidth.high))?"frameWidth: integer|Long expected":f.framesPerSecond!=null&&f.hasOwnProperty("framesPerSecond")&&typeof f.framesPerSecond!="number"?"framesPerSecond: number expected":f.framesSent!=null&&f.hasOwnProperty("framesSent")&&!l.isInteger(f.framesSent)&&!(f.framesSent&&l.isInteger(f.framesSent.low)&&l.isInteger(f.framesSent.high))?"framesSent: integer|Long expected":f.framesEncoded!=null&&f.hasOwnProperty("framesEncoded")&&!l.isInteger(f.framesEncoded)&&!(f.framesEncoded&&l.isInteger(f.framesEncoded.low)&&l.isInteger(f.framesEncoded.high))?"framesEncoded: integer|Long expected":f.hugeFramesSent!=null&&f.hasOwnProperty("hugeFramesSent")&&!l.isInteger(f.hugeFramesSent)&&!(f.hugeFramesSent&&l.isInteger(f.hugeFramesSent.low)&&l.isInteger(f.hugeFramesSent.high))?"hugeFramesSent: integer|Long expected":null},"verify"),h.fromObject=s(function(f){if(f instanceof r.slack.calls.analytics.SendMedia.Video)return f;let v=new r.slack.calls.analytics.SendMedia.Video;return f.frameHeight!=null&&(l.Long?(v.frameHeight=l.Long.fromValue(f.frameHeight)).unsigned=!0:typeof f.frameHeight=="string"?v.frameHeight=parseInt(f.frameHeight,10):typeof f.frameHeight=="number"?v.frameHeight=f.frameHeight:typeof f.frameHeight=="object"&&(v.frameHeight=new l.LongBits(f.frameHeight.low>>>0,f.frameHeight.high>>>0).toNumber(!0))),f.frameWidth!=null&&(l.Long?(v.frameWidth=l.Long.fromValue(f.frameWidth)).unsigned=!0:typeof f.frameWidth=="string"?v.frameWidth=parseInt(f.frameWidth,10):typeof f.frameWidth=="number"?v.frameWidth=f.frameWidth:typeof f.frameWidth=="object"&&(v.frameWidth=new l.LongBits(f.frameWidth.low>>>0,f.frameWidth.high>>>0).toNumber(!0))),f.framesPerSecond!=null&&(v.framesPerSecond=Number(f.framesPerSecond)),f.framesSent!=null&&(l.Long?(v.framesSent=l.Long.fromValue(f.framesSent)).unsigned=!0:typeof f.framesSent=="string"?v.framesSent=parseInt(f.framesSent,10):typeof f.framesSent=="number"?v.framesSent=f.framesSent:typeof f.framesSent=="object"&&(v.framesSent=new l.LongBits(f.framesSent.low>>>0,f.framesSent.high>>>0).toNumber(!0))),f.framesEncoded!=null&&(l.Long?(v.framesEncoded=l.Long.fromValue(f.framesEncoded)).unsigned=!0:typeof f.framesEncoded=="string"?v.framesEncoded=parseInt(f.framesEncoded,10):typeof f.framesEncoded=="number"?v.framesEncoded=f.framesEncoded:typeof f.framesEncoded=="object"&&(v.framesEncoded=new l.LongBits(f.framesEncoded.low>>>0,f.framesEncoded.high>>>0).toNumber(!0))),f.hugeFramesSent!=null&&(l.Long?(v.hugeFramesSent=l.Long.fromValue(f.hugeFramesSent)).unsigned=!0:typeof f.hugeFramesSent=="string"?v.hugeFramesSent=parseInt(f.hugeFramesSent,10):typeof f.hugeFramesSent=="number"?v.hugeFramesSent=f.hugeFramesSent:typeof f.hugeFramesSent=="object"&&(v.hugeFramesSent=new l.LongBits(f.hugeFramesSent.low>>>0,f.hugeFramesSent.high>>>0).toNumber(!0))),v},"fromObject"),h.toObject=s(function(f,v){v||(v={});let E={};if(v.defaults){if(l.Long){let _=new l.Long(0,0,!0);E.frameHeight=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.frameHeight=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.frameWidth=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.frameWidth=v.longs===String?"0":0;if(E.framesPerSecond=0,l.Long){let _=new l.Long(0,0,!0);E.framesSent=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.framesSent=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.framesEncoded=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.framesEncoded=v.longs===String?"0":0;if(l.Long){let _=new l.Long(0,0,!0);E.hugeFramesSent=v.longs===String?_.toString():v.longs===Number?_.toNumber():_}else E.hugeFramesSent=v.longs===String?"0":0}return f.frameHeight!=null&&f.hasOwnProperty("frameHeight")&&(typeof f.frameHeight=="number"?E.frameHeight=v.longs===String?String(f.frameHeight):f.frameHeight:E.frameHeight=v.longs===String?l.Long.prototype.toString.call(f.frameHeight):v.longs===Number?new l.LongBits(f.frameHeight.low>>>0,f.frameHeight.high>>>0).toNumber(!0):f.frameHeight),f.frameWidth!=null&&f.hasOwnProperty("frameWidth")&&(typeof f.frameWidth=="number"?E.frameWidth=v.longs===String?String(f.frameWidth):f.frameWidth:E.frameWidth=v.longs===String?l.Long.prototype.toString.call(f.frameWidth):v.longs===Number?new l.LongBits(f.frameWidth.low>>>0,f.frameWidth.high>>>0).toNumber(!0):f.frameWidth),f.framesPerSecond!=null&&f.hasOwnProperty("framesPerSecond")&&(E.framesPerSecond=v.json&&!isFinite(f.framesPerSecond)?String(f.framesPerSecond):f.framesPerSecond),f.framesSent!=null&&f.hasOwnProperty("framesSent")&&(typeof f.framesSent=="number"?E.framesSent=v.longs===String?String(f.framesSent):f.framesSent:E.framesSent=v.longs===String?l.Long.prototype.toString.call(f.framesSent):v.longs===Number?new l.LongBits(f.framesSent.low>>>0,f.framesSent.high>>>0).toNumber(!0):f.framesSent),f.framesEncoded!=null&&f.hasOwnProperty("framesEncoded")&&(typeof f.framesEncoded=="number"?E.framesEncoded=v.longs===String?String(f.framesEncoded):f.framesEncoded:E.framesEncoded=v.longs===String?l.Long.prototype.toString.call(f.framesEncoded):v.longs===Number?new l.LongBits(f.framesEncoded.low>>>0,f.framesEncoded.high>>>0).toNumber(!0):f.framesEncoded),f.hugeFramesSent!=null&&f.hasOwnProperty("hugeFramesSent")&&(typeof f.hugeFramesSent=="number"?E.hugeFramesSent=v.longs===String?String(f.hugeFramesSent):f.hugeFramesSent:E.hugeFramesSent=v.longs===String?l.Long.prototype.toString.call(f.hugeFramesSent):v.longs===Number?new l.LongBits(f.hugeFramesSent.low>>>0,f.hugeFramesSent.high>>>0).toNumber(!0):f.hugeFramesSent),E},"toObject"),h.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),h.getTypeUrl=s(function(f){return f===void 0&&(f="type.googleapis.com"),f+"/slack.calls.analytics.SendMedia.Video"},"getTypeUrl"),h}(),o}(),i.MemoryInfo=function(){function o(u){if(u)for(let h=Object.keys(u),S=0;S<h.length;++S)u[h[S]]!=null&&(this[h[S]]=u[h[S]])}return s(o,"MemoryInfo"),o.prototype.workingSetSize=0,o.prototype.peakWorkingSetSize=0,o.create=s(function(h){return new o(h)},"create"),o.encode=s(function(h,S){return S||(S=g.create()),h.workingSetSize!=null&&Object.hasOwnProperty.call(h,"workingSetSize")&&S.uint32(9).double(h.workingSetSize),h.peakWorkingSetSize!=null&&Object.hasOwnProperty.call(h,"peakWorkingSetSize")&&S.uint32(17).double(h.peakWorkingSetSize),S},"encode"),o.encodeDelimited=s(function(h,S){return this.encode(h,S).ldelim()},"encodeDelimited"),o.decode=s(function(h,S){h instanceof m||(h=m.create(h));let f=S===void 0?h.len:h.pos+S,v=new r.slack.calls.analytics.MemoryInfo;for(;h.pos<f;){let E=h.uint32();switch(E>>>3){case 1:{v.workingSetSize=h.double();break}case 2:{v.peakWorkingSetSize=h.double();break}default:h.skipType(E&7);break}}return v},"decode"),o.decodeDelimited=s(function(h){return h instanceof m||(h=new m(h)),this.decode(h,h.uint32())},"decodeDelimited"),o.verify=s(function(h){return typeof h!="object"||h===null?"object expected":h.workingSetSize!=null&&h.hasOwnProperty("workingSetSize")&&typeof h.workingSetSize!="number"?"workingSetSize: number expected":h.peakWorkingSetSize!=null&&h.hasOwnProperty("peakWorkingSetSize")&&typeof h.peakWorkingSetSize!="number"?"peakWorkingSetSize: number expected":null},"verify"),o.fromObject=s(function(h){if(h instanceof r.slack.calls.analytics.MemoryInfo)return h;let S=new r.slack.calls.analytics.MemoryInfo;return h.workingSetSize!=null&&(S.workingSetSize=Number(h.workingSetSize)),h.peakWorkingSetSize!=null&&(S.peakWorkingSetSize=Number(h.peakWorkingSetSize)),S},"fromObject"),o.toObject=s(function(h,S){S||(S={});let f={};return S.defaults&&(f.workingSetSize=0,f.peakWorkingSetSize=0),h.workingSetSize!=null&&h.hasOwnProperty("workingSetSize")&&(f.workingSetSize=S.json&&!isFinite(h.workingSetSize)?String(h.workingSetSize):h.workingSetSize),h.peakWorkingSetSize!=null&&h.hasOwnProperty("peakWorkingSetSize")&&(f.peakWorkingSetSize=S.json&&!isFinite(h.peakWorkingSetSize)?String(h.peakWorkingSetSize):h.peakWorkingSetSize),f},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(h){return h===void 0&&(h="type.googleapis.com"),h+"/slack.calls.analytics.MemoryInfo"},"getTypeUrl"),o}(),i.AppMetrics=function(){function o(u){if(u)for(let h=Object.keys(u),S=0;S<h.length;++S)u[h[S]]!=null&&(this[h[S]]=u[h[S]])}return s(o,"AppMetrics"),o.prototype.cpu=0,o.prototype.memory=null,o.create=s(function(h){return new o(h)},"create"),o.encode=s(function(h,S){return S||(S=g.create()),h.cpu!=null&&Object.hasOwnProperty.call(h,"cpu")&&S.uint32(9).double(h.cpu),h.memory!=null&&Object.hasOwnProperty.call(h,"memory")&&r.slack.calls.analytics.MemoryInfo.encode(h.memory,S.uint32(18).fork()).ldelim(),S},"encode"),o.encodeDelimited=s(function(h,S){return this.encode(h,S).ldelim()},"encodeDelimited"),o.decode=s(function(h,S){h instanceof m||(h=m.create(h));let f=S===void 0?h.len:h.pos+S,v=new r.slack.calls.analytics.AppMetrics;for(;h.pos<f;){let E=h.uint32();switch(E>>>3){case 1:{v.cpu=h.double();break}case 2:{v.memory=r.slack.calls.analytics.MemoryInfo.decode(h,h.uint32());break}default:h.skipType(E&7);break}}return v},"decode"),o.decodeDelimited=s(function(h){return h instanceof m||(h=new m(h)),this.decode(h,h.uint32())},"decodeDelimited"),o.verify=s(function(h){if(typeof h!="object"||h===null)return"object expected";if(h.cpu!=null&&h.hasOwnProperty("cpu")&&typeof h.cpu!="number")return"cpu: number expected";if(h.memory!=null&&h.hasOwnProperty("memory")){let S=r.slack.calls.analytics.MemoryInfo.verify(h.memory);if(S)return"memory."+S}return null},"verify"),o.fromObject=s(function(h){if(h instanceof r.slack.calls.analytics.AppMetrics)return h;let S=new r.slack.calls.analytics.AppMetrics;if(h.cpu!=null&&(S.cpu=Number(h.cpu)),h.memory!=null){if(typeof h.memory!="object")throw TypeError(".slack.calls.analytics.AppMetrics.memory: object expected");S.memory=r.slack.calls.analytics.MemoryInfo.fromObject(h.memory)}return S},"fromObject"),o.toObject=s(function(h,S){S||(S={});let f={};return S.defaults&&(f.cpu=0,f.memory=null),h.cpu!=null&&h.hasOwnProperty("cpu")&&(f.cpu=S.json&&!isFinite(h.cpu)?String(h.cpu):h.cpu),h.memory!=null&&h.hasOwnProperty("memory")&&(f.memory=r.slack.calls.analytics.MemoryInfo.toObject(h.memory,S)),f},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(h){return h===void 0&&(h="type.googleapis.com"),h+"/slack.calls.analytics.AppMetrics"},"getTypeUrl"),o}(),i.Codec=function(){const o={},u=Object.create(o);return u[o[0]="UNKNOWN"]=0,u[o[1]="OPUS"]=1,u[o[2]="VP8"]=2,u[o[3]="VP9"]=3,u[o[4]="H264"]=4,u}(),i.Protocol=function(){const o={},u=Object.create(o);return u[o[0]="UDP"]=0,u[o[1]="TCP"]=1,u}(),i.PathType=function(){const o={},u=Object.create(o);return u[o[0]="DIRECT"]=0,u[o[1]="RELAY"]=1,u}(),i.Report=function(){function o(u){if(this.recv=[],this.send=[],u)for(let h=Object.keys(u),S=0;S<h.length;++S)u[h[S]]!=null&&(this[h[S]]=u[h[S]])}return s(o,"Report"),o.prototype.totalBytesSent=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.totalBytesReceived=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.totalRoundTripTime=0,o.prototype.currentRoundTripTime=0,o.prototype.availableOutgoingBitrate=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.protocol=0,o.prototype.pathType=0,o.prototype.recv=l.emptyArray,o.prototype.send=l.emptyArray,o.prototype.clientTime=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.availableIncomingBitrate=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.appMetrics=null,o.create=s(function(h){return new o(h)},"create"),o.encode=s(function(h,S){if(S||(S=g.create()),h.totalBytesSent!=null&&Object.hasOwnProperty.call(h,"totalBytesSent")&&S.uint32(8).uint64(h.totalBytesSent),h.totalBytesReceived!=null&&Object.hasOwnProperty.call(h,"totalBytesReceived")&&S.uint32(16).uint64(h.totalBytesReceived),h.totalRoundTripTime!=null&&Object.hasOwnProperty.call(h,"totalRoundTripTime")&&S.uint32(25).double(h.totalRoundTripTime),h.currentRoundTripTime!=null&&Object.hasOwnProperty.call(h,"currentRoundTripTime")&&S.uint32(33).double(h.currentRoundTripTime),h.availableOutgoingBitrate!=null&&Object.hasOwnProperty.call(h,"availableOutgoingBitrate")&&S.uint32(40).uint64(h.availableOutgoingBitrate),h.protocol!=null&&Object.hasOwnProperty.call(h,"protocol")&&S.uint32(48).int32(h.protocol),h.pathType!=null&&Object.hasOwnProperty.call(h,"pathType")&&S.uint32(56).int32(h.pathType),h.recv!=null&&h.recv.length)for(let f=0;f<h.recv.length;++f)r.slack.calls.analytics.RecvMedia.encode(h.recv[f],S.uint32(66).fork()).ldelim();if(h.send!=null&&h.send.length)for(let f=0;f<h.send.length;++f)r.slack.calls.analytics.SendMedia.encode(h.send[f],S.uint32(74).fork()).ldelim();return h.clientTime!=null&&Object.hasOwnProperty.call(h,"clientTime")&&S.uint32(80).uint64(h.clientTime),h.availableIncomingBitrate!=null&&Object.hasOwnProperty.call(h,"availableIncomingBitrate")&&S.uint32(88).uint64(h.availableIncomingBitrate),h.appMetrics!=null&&Object.hasOwnProperty.call(h,"appMetrics")&&r.slack.calls.analytics.AppMetrics.encode(h.appMetrics,S.uint32(98).fork()).ldelim(),S},"encode"),o.encodeDelimited=s(function(h,S){return this.encode(h,S).ldelim()},"encodeDelimited"),o.decode=s(function(h,S){h instanceof m||(h=m.create(h));let f=S===void 0?h.len:h.pos+S,v=new r.slack.calls.analytics.Report;for(;h.pos<f;){let E=h.uint32();switch(E>>>3){case 1:{v.totalBytesSent=h.uint64();break}case 2:{v.totalBytesReceived=h.uint64();break}case 3:{v.totalRoundTripTime=h.double();break}case 4:{v.currentRoundTripTime=h.double();break}case 5:{v.availableOutgoingBitrate=h.uint64();break}case 6:{v.protocol=h.int32();break}case 7:{v.pathType=h.int32();break}case 8:{v.recv&&v.recv.length||(v.recv=[]),v.recv.push(r.slack.calls.analytics.RecvMedia.decode(h,h.uint32()));break}case 9:{v.send&&v.send.length||(v.send=[]),v.send.push(r.slack.calls.analytics.SendMedia.decode(h,h.uint32()));break}case 10:{v.clientTime=h.uint64();break}case 11:{v.availableIncomingBitrate=h.uint64();break}case 12:{v.appMetrics=r.slack.calls.analytics.AppMetrics.decode(h,h.uint32());break}default:h.skipType(E&7);break}}return v},"decode"),o.decodeDelimited=s(function(h){return h instanceof m||(h=new m(h)),this.decode(h,h.uint32())},"decodeDelimited"),o.verify=s(function(h){if(typeof h!="object"||h===null)return"object expected";if(h.totalBytesSent!=null&&h.hasOwnProperty("totalBytesSent")&&!l.isInteger(h.totalBytesSent)&&!(h.totalBytesSent&&l.isInteger(h.totalBytesSent.low)&&l.isInteger(h.totalBytesSent.high)))return"totalBytesSent: integer|Long expected";if(h.totalBytesReceived!=null&&h.hasOwnProperty("totalBytesReceived")&&!l.isInteger(h.totalBytesReceived)&&!(h.totalBytesReceived&&l.isInteger(h.totalBytesReceived.low)&&l.isInteger(h.totalBytesReceived.high)))return"totalBytesReceived: integer|Long expected";if(h.totalRoundTripTime!=null&&h.hasOwnProperty("totalRoundTripTime")&&typeof h.totalRoundTripTime!="number")return"totalRoundTripTime: number expected";if(h.currentRoundTripTime!=null&&h.hasOwnProperty("currentRoundTripTime")&&typeof h.currentRoundTripTime!="number")return"currentRoundTripTime: number expected";if(h.availableOutgoingBitrate!=null&&h.hasOwnProperty("availableOutgoingBitrate")&&!l.isInteger(h.availableOutgoingBitrate)&&!(h.availableOutgoingBitrate&&l.isInteger(h.availableOutgoingBitrate.low)&&l.isInteger(h.availableOutgoingBitrate.high)))return"availableOutgoingBitrate: integer|Long expected";if(h.protocol!=null&&h.hasOwnProperty("protocol"))switch(h.protocol){default:return"protocol: enum value expected";case 0:case 1:break}if(h.pathType!=null&&h.hasOwnProperty("pathType"))switch(h.pathType){default:return"pathType: enum value expected";case 0:case 1:break}if(h.recv!=null&&h.hasOwnProperty("recv")){if(!Array.isArray(h.recv))return"recv: array expected";for(let S=0;S<h.recv.length;++S){let f=r.slack.calls.analytics.RecvMedia.verify(h.recv[S]);if(f)return"recv."+f}}if(h.send!=null&&h.hasOwnProperty("send")){if(!Array.isArray(h.send))return"send: array expected";for(let S=0;S<h.send.length;++S){let f=r.slack.calls.analytics.SendMedia.verify(h.send[S]);if(f)return"send."+f}}if(h.clientTime!=null&&h.hasOwnProperty("clientTime")&&!l.isInteger(h.clientTime)&&!(h.clientTime&&l.isInteger(h.clientTime.low)&&l.isInteger(h.clientTime.high)))return"clientTime: integer|Long expected";if(h.availableIncomingBitrate!=null&&h.hasOwnProperty("availableIncomingBitrate")&&!l.isInteger(h.availableIncomingBitrate)&&!(h.availableIncomingBitrate&&l.isInteger(h.availableIncomingBitrate.low)&&l.isInteger(h.availableIncomingBitrate.high)))return"availableIncomingBitrate: integer|Long expected";if(h.appMetrics!=null&&h.hasOwnProperty("appMetrics")){let S=r.slack.calls.analytics.AppMetrics.verify(h.appMetrics);if(S)return"appMetrics."+S}return null},"verify"),o.fromObject=s(function(h){if(h instanceof r.slack.calls.analytics.Report)return h;let S=new r.slack.calls.analytics.Report;switch(h.totalBytesSent!=null&&(l.Long?(S.totalBytesSent=l.Long.fromValue(h.totalBytesSent)).unsigned=!0:typeof h.totalBytesSent=="string"?S.totalBytesSent=parseInt(h.totalBytesSent,10):typeof h.totalBytesSent=="number"?S.totalBytesSent=h.totalBytesSent:typeof h.totalBytesSent=="object"&&(S.totalBytesSent=new l.LongBits(h.totalBytesSent.low>>>0,h.totalBytesSent.high>>>0).toNumber(!0))),h.totalBytesReceived!=null&&(l.Long?(S.totalBytesReceived=l.Long.fromValue(h.totalBytesReceived)).unsigned=!0:typeof h.totalBytesReceived=="string"?S.totalBytesReceived=parseInt(h.totalBytesReceived,10):typeof h.totalBytesReceived=="number"?S.totalBytesReceived=h.totalBytesReceived:typeof h.totalBytesReceived=="object"&&(S.totalBytesReceived=new l.LongBits(h.totalBytesReceived.low>>>0,h.totalBytesReceived.high>>>0).toNumber(!0))),h.totalRoundTripTime!=null&&(S.totalRoundTripTime=Number(h.totalRoundTripTime)),h.currentRoundTripTime!=null&&(S.currentRoundTripTime=Number(h.currentRoundTripTime)),h.availableOutgoingBitrate!=null&&(l.Long?(S.availableOutgoingBitrate=l.Long.fromValue(h.availableOutgoingBitrate)).unsigned=!0:typeof h.availableOutgoingBitrate=="string"?S.availableOutgoingBitrate=parseInt(h.availableOutgoingBitrate,10):typeof h.availableOutgoingBitrate=="number"?S.availableOutgoingBitrate=h.availableOutgoingBitrate:typeof h.availableOutgoingBitrate=="object"&&(S.availableOutgoingBitrate=new l.LongBits(h.availableOutgoingBitrate.low>>>0,h.availableOutgoingBitrate.high>>>0).toNumber(!0))),h.protocol){default:if(typeof h.protocol=="number"){S.protocol=h.protocol;break}break;case"UDP":case 0:S.protocol=0;break;case"TCP":case 1:S.protocol=1;break}switch(h.pathType){default:if(typeof h.pathType=="number"){S.pathType=h.pathType;break}break;case"DIRECT":case 0:S.pathType=0;break;case"RELAY":case 1:S.pathType=1;break}if(h.recv){if(!Array.isArray(h.recv))throw TypeError(".slack.calls.analytics.Report.recv: array expected");S.recv=[];for(let f=0;f<h.recv.length;++f){if(typeof h.recv[f]!="object")throw TypeError(".slack.calls.analytics.Report.recv: object expected");S.recv[f]=r.slack.calls.analytics.RecvMedia.fromObject(h.recv[f])}}if(h.send){if(!Array.isArray(h.send))throw TypeError(".slack.calls.analytics.Report.send: array expected");S.send=[];for(let f=0;f<h.send.length;++f){if(typeof h.send[f]!="object")throw TypeError(".slack.calls.analytics.Report.send: object expected");S.send[f]=r.slack.calls.analytics.SendMedia.fromObject(h.send[f])}}if(h.clientTime!=null&&(l.Long?(S.clientTime=l.Long.fromValue(h.clientTime)).unsigned=!0:typeof h.clientTime=="string"?S.clientTime=parseInt(h.clientTime,10):typeof h.clientTime=="number"?S.clientTime=h.clientTime:typeof h.clientTime=="object"&&(S.clientTime=new l.LongBits(h.clientTime.low>>>0,h.clientTime.high>>>0).toNumber(!0))),h.availableIncomingBitrate!=null&&(l.Long?(S.availableIncomingBitrate=l.Long.fromValue(h.availableIncomingBitrate)).unsigned=!0:typeof h.availableIncomingBitrate=="string"?S.availableIncomingBitrate=parseInt(h.availableIncomingBitrate,10):typeof h.availableIncomingBitrate=="number"?S.availableIncomingBitrate=h.availableIncomingBitrate:typeof h.availableIncomingBitrate=="object"&&(S.availableIncomingBitrate=new l.LongBits(h.availableIncomingBitrate.low>>>0,h.availableIncomingBitrate.high>>>0).toNumber(!0))),h.appMetrics!=null){if(typeof h.appMetrics!="object")throw TypeError(".slack.calls.analytics.Report.appMetrics: object expected");S.appMetrics=r.slack.calls.analytics.AppMetrics.fromObject(h.appMetrics)}return S},"fromObject"),o.toObject=s(function(h,S){S||(S={});let f={};if((S.arrays||S.defaults)&&(f.recv=[],f.send=[]),S.defaults){if(l.Long){let v=new l.Long(0,0,!0);f.totalBytesSent=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else f.totalBytesSent=S.longs===String?"0":0;if(l.Long){let v=new l.Long(0,0,!0);f.totalBytesReceived=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else f.totalBytesReceived=S.longs===String?"0":0;if(f.totalRoundTripTime=0,f.currentRoundTripTime=0,l.Long){let v=new l.Long(0,0,!0);f.availableOutgoingBitrate=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else f.availableOutgoingBitrate=S.longs===String?"0":0;if(f.protocol=S.enums===String?"UDP":0,f.pathType=S.enums===String?"DIRECT":0,l.Long){let v=new l.Long(0,0,!0);f.clientTime=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else f.clientTime=S.longs===String?"0":0;if(l.Long){let v=new l.Long(0,0,!0);f.availableIncomingBitrate=S.longs===String?v.toString():S.longs===Number?v.toNumber():v}else f.availableIncomingBitrate=S.longs===String?"0":0;f.appMetrics=null}if(h.totalBytesSent!=null&&h.hasOwnProperty("totalBytesSent")&&(typeof h.totalBytesSent=="number"?f.totalBytesSent=S.longs===String?String(h.totalBytesSent):h.totalBytesSent:f.totalBytesSent=S.longs===String?l.Long.prototype.toString.call(h.totalBytesSent):S.longs===Number?new l.LongBits(h.totalBytesSent.low>>>0,h.totalBytesSent.high>>>0).toNumber(!0):h.totalBytesSent),h.totalBytesReceived!=null&&h.hasOwnProperty("totalBytesReceived")&&(typeof h.totalBytesReceived=="number"?f.totalBytesReceived=S.longs===String?String(h.totalBytesReceived):h.totalBytesReceived:f.totalBytesReceived=S.longs===String?l.Long.prototype.toString.call(h.totalBytesReceived):S.longs===Number?new l.LongBits(h.totalBytesReceived.low>>>0,h.totalBytesReceived.high>>>0).toNumber(!0):h.totalBytesReceived),h.totalRoundTripTime!=null&&h.hasOwnProperty("totalRoundTripTime")&&(f.totalRoundTripTime=S.json&&!isFinite(h.totalRoundTripTime)?String(h.totalRoundTripTime):h.totalRoundTripTime),h.currentRoundTripTime!=null&&h.hasOwnProperty("currentRoundTripTime")&&(f.currentRoundTripTime=S.json&&!isFinite(h.currentRoundTripTime)?String(h.currentRoundTripTime):h.currentRoundTripTime),h.availableOutgoingBitrate!=null&&h.hasOwnProperty("availableOutgoingBitrate")&&(typeof h.availableOutgoingBitrate=="number"?f.availableOutgoingBitrate=S.longs===String?String(h.availableOutgoingBitrate):h.availableOutgoingBitrate:f.availableOutgoingBitrate=S.longs===String?l.Long.prototype.toString.call(h.availableOutgoingBitrate):S.longs===Number?new l.LongBits(h.availableOutgoingBitrate.low>>>0,h.availableOutgoingBitrate.high>>>0).toNumber(!0):h.availableOutgoingBitrate),h.protocol!=null&&h.hasOwnProperty("protocol")&&(f.protocol=S.enums===String?r.slack.calls.analytics.Protocol[h.protocol]===void 0?h.protocol:r.slack.calls.analytics.Protocol[h.protocol]:h.protocol),h.pathType!=null&&h.hasOwnProperty("pathType")&&(f.pathType=S.enums===String?r.slack.calls.analytics.PathType[h.pathType]===void 0?h.pathType:r.slack.calls.analytics.PathType[h.pathType]:h.pathType),h.recv&&h.recv.length){f.recv=[];for(let v=0;v<h.recv.length;++v)f.recv[v]=r.slack.calls.analytics.RecvMedia.toObject(h.recv[v],S)}if(h.send&&h.send.length){f.send=[];for(let v=0;v<h.send.length;++v)f.send[v]=r.slack.calls.analytics.SendMedia.toObject(h.send[v],S)}return h.clientTime!=null&&h.hasOwnProperty("clientTime")&&(typeof h.clientTime=="number"?f.clientTime=S.longs===String?String(h.clientTime):h.clientTime:f.clientTime=S.longs===String?l.Long.prototype.toString.call(h.clientTime):S.longs===Number?new l.LongBits(h.clientTime.low>>>0,h.clientTime.high>>>0).toNumber(!0):h.clientTime),h.availableIncomingBitrate!=null&&h.hasOwnProperty("availableIncomingBitrate")&&(typeof h.availableIncomingBitrate=="number"?f.availableIncomingBitrate=S.longs===String?String(h.availableIncomingBitrate):h.availableIncomingBitrate:f.availableIncomingBitrate=S.longs===String?l.Long.prototype.toString.call(h.availableIncomingBitrate):S.longs===Number?new l.LongBits(h.availableIncomingBitrate.low>>>0,h.availableIncomingBitrate.high>>>0).toNumber(!0):h.availableIncomingBitrate),h.appMetrics!=null&&h.hasOwnProperty("appMetrics")&&(f.appMetrics=r.slack.calls.analytics.AppMetrics.toObject(h.appMetrics,S)),f},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(h){return h===void 0&&(h="type.googleapis.com"),h+"/slack.calls.analytics.Report"},"getTypeUrl"),o}(),i}(),t}(),e})()},9240258658:(F,a,c)=>{"use strict";c.d(a,{Y:()=>n});var d=c(4224187311),p=c.n(d);const m=d.Reader,g=d.Writer,l=d.util,r=d.roots.default||(d.roots.default={}),n=r.PeerMessage=(()=>{function e(t){if(t)for(let i=Object.keys(t),o=0;o<i.length;++o)t[i[o]]!=null&&(this[i[o]]=t[i[o]])}return s(e,"PeerMessage1"),e.prototype.reacji=null,e.prototype.draw=null,e.prototype.fromPeerId=l.Long?l.Long.fromBits(0,0,!0):0,e.prototype.fromPeerIdString="",e.prototype.capabilities=null,e.prototype.background=null,e.prototype.muteRequest=null,e.prototype.awarenessBroadcast=null,e.prototype.awarenessQuery=null,e.prototype.awarenessClose=null,e.prototype.jukeboxRequest=null,e.prototype.contentShareDetails=null,e.prototype.recordingStartNotification=null,e.create=s(function(i){return new e(i)},"create"),e.encode=s(function(i,o){return o||(o=g.create()),i.reacji!=null&&Object.hasOwnProperty.call(i,"reacji")&&r.PeerMessage.Reacji.encode(i.reacji,o.uint32(10).fork()).ldelim(),i.draw!=null&&Object.hasOwnProperty.call(i,"draw")&&r.PeerMessage.Draw.encode(i.draw,o.uint32(18).fork()).ldelim(),i.fromPeerId!=null&&Object.hasOwnProperty.call(i,"fromPeerId")&&o.uint32(24).uint64(i.fromPeerId),i.fromPeerIdString!=null&&Object.hasOwnProperty.call(i,"fromPeerIdString")&&o.uint32(34).string(i.fromPeerIdString),i.capabilities!=null&&Object.hasOwnProperty.call(i,"capabilities")&&r.PeerMessage.Capabilities.encode(i.capabilities,o.uint32(42).fork()).ldelim(),i.background!=null&&Object.hasOwnProperty.call(i,"background")&&r.PeerMessage.Background.encode(i.background,o.uint32(50).fork()).ldelim(),i.muteRequest!=null&&Object.hasOwnProperty.call(i,"muteRequest")&&r.PeerMessage.MuteRequest.encode(i.muteRequest,o.uint32(82).fork()).ldelim(),i.awarenessBroadcast!=null&&Object.hasOwnProperty.call(i,"awarenessBroadcast")&&r.PeerMessage.AwarenessBroadcast.encode(i.awarenessBroadcast,o.uint32(90).fork()).ldelim(),i.awarenessQuery!=null&&Object.hasOwnProperty.call(i,"awarenessQuery")&&r.PeerMessage.AwarenessQuery.encode(i.awarenessQuery,o.uint32(98).fork()).ldelim(),i.awarenessClose!=null&&Object.hasOwnProperty.call(i,"awarenessClose")&&r.PeerMessage.AwarenessClose.encode(i.awarenessClose,o.uint32(106).fork()).ldelim(),i.jukeboxRequest!=null&&Object.hasOwnProperty.call(i,"jukeboxRequest")&&r.PeerMessage.JukeboxRequest.encode(i.jukeboxRequest,o.uint32(114).fork()).ldelim(),i.contentShareDetails!=null&&Object.hasOwnProperty.call(i,"contentShareDetails")&&r.PeerMessage.ContentShareDetails.encode(i.contentShareDetails,o.uint32(122).fork()).ldelim(),i.recordingStartNotification!=null&&Object.hasOwnProperty.call(i,"recordingStartNotification")&&r.PeerMessage.RecordingStartNotification.encode(i.recordingStartNotification,o.uint32(130).fork()).ldelim(),o},"encode"),e.encodeDelimited=s(function(i,o){return this.encode(i,o).ldelim()},"encodeDelimited"),e.decode=s(function(i,o){i instanceof m||(i=m.create(i));let u=o===void 0?i.len:i.pos+o,h=new r.PeerMessage;for(;i.pos<u;){let S=i.uint32();switch(S>>>3){case 1:{h.reacji=r.PeerMessage.Reacji.decode(i,i.uint32());break}case 2:{h.draw=r.PeerMessage.Draw.decode(i,i.uint32());break}case 3:{h.fromPeerId=i.uint64();break}case 4:{h.fromPeerIdString=i.string();break}case 5:{h.capabilities=r.PeerMessage.Capabilities.decode(i,i.uint32());break}case 6:{h.background=r.PeerMessage.Background.decode(i,i.uint32());break}case 10:{h.muteRequest=r.PeerMessage.MuteRequest.decode(i,i.uint32());break}case 11:{h.awarenessBroadcast=r.PeerMessage.AwarenessBroadcast.decode(i,i.uint32());break}case 12:{h.awarenessQuery=r.PeerMessage.AwarenessQuery.decode(i,i.uint32());break}case 13:{h.awarenessClose=r.PeerMessage.AwarenessClose.decode(i,i.uint32());break}case 14:{h.jukeboxRequest=r.PeerMessage.JukeboxRequest.decode(i,i.uint32());break}case 15:{h.contentShareDetails=r.PeerMessage.ContentShareDetails.decode(i,i.uint32());break}case 16:{h.recordingStartNotification=r.PeerMessage.RecordingStartNotification.decode(i,i.uint32());break}default:i.skipType(S&7);break}}return h},"decode"),e.decodeDelimited=s(function(i){return i instanceof m||(i=new m(i)),this.decode(i,i.uint32())},"decodeDelimited"),e.verify=s(function(i){if(typeof i!="object"||i===null)return"object expected";if(i.reacji!=null&&i.hasOwnProperty("reacji")){let o=r.PeerMessage.Reacji.verify(i.reacji);if(o)return"reacji."+o}if(i.draw!=null&&i.hasOwnProperty("draw")){let o=r.PeerMessage.Draw.verify(i.draw);if(o)return"draw."+o}if(i.fromPeerId!=null&&i.hasOwnProperty("fromPeerId")&&!l.isInteger(i.fromPeerId)&&!(i.fromPeerId&&l.isInteger(i.fromPeerId.low)&&l.isInteger(i.fromPeerId.high)))return"fromPeerId: integer|Long expected";if(i.fromPeerIdString!=null&&i.hasOwnProperty("fromPeerIdString")&&!l.isString(i.fromPeerIdString))return"fromPeerIdString: string expected";if(i.capabilities!=null&&i.hasOwnProperty("capabilities")){let o=r.PeerMessage.Capabilities.verify(i.capabilities);if(o)return"capabilities."+o}if(i.background!=null&&i.hasOwnProperty("background")){let o=r.PeerMessage.Background.verify(i.background);if(o)return"background."+o}if(i.muteRequest!=null&&i.hasOwnProperty("muteRequest")){let o=r.PeerMessage.MuteRequest.verify(i.muteRequest);if(o)return"muteRequest."+o}if(i.awarenessBroadcast!=null&&i.hasOwnProperty("awarenessBroadcast")){let o=r.PeerMessage.AwarenessBroadcast.verify(i.awarenessBroadcast);if(o)return"awarenessBroadcast."+o}if(i.awarenessQuery!=null&&i.hasOwnProperty("awarenessQuery")){let o=r.PeerMessage.AwarenessQuery.verify(i.awarenessQuery);if(o)return"awarenessQuery."+o}if(i.awarenessClose!=null&&i.hasOwnProperty("awarenessClose")){let o=r.PeerMessage.AwarenessClose.verify(i.awarenessClose);if(o)return"awarenessClose."+o}if(i.jukeboxRequest!=null&&i.hasOwnProperty("jukeboxRequest")){let o=r.PeerMessage.JukeboxRequest.verify(i.jukeboxRequest);if(o)return"jukeboxRequest."+o}if(i.contentShareDetails!=null&&i.hasOwnProperty("contentShareDetails")){let o=r.PeerMessage.ContentShareDetails.verify(i.contentShareDetails);if(o)return"contentShareDetails."+o}if(i.recordingStartNotification!=null&&i.hasOwnProperty("recordingStartNotification")){let o=r.PeerMessage.RecordingStartNotification.verify(i.recordingStartNotification);if(o)return"recordingStartNotification."+o}return null},"verify"),e.fromObject=s(function(i){if(i instanceof r.PeerMessage)return i;let o=new r.PeerMessage;if(i.reacji!=null){if(typeof i.reacji!="object")throw TypeError(".PeerMessage.reacji: object expected");o.reacji=r.PeerMessage.Reacji.fromObject(i.reacji)}if(i.draw!=null){if(typeof i.draw!="object")throw TypeError(".PeerMessage.draw: object expected");o.draw=r.PeerMessage.Draw.fromObject(i.draw)}if(i.fromPeerId!=null&&(l.Long?(o.fromPeerId=l.Long.fromValue(i.fromPeerId)).unsigned=!0:typeof i.fromPeerId=="string"?o.fromPeerId=parseInt(i.fromPeerId,10):typeof i.fromPeerId=="number"?o.fromPeerId=i.fromPeerId:typeof i.fromPeerId=="object"&&(o.fromPeerId=new l.LongBits(i.fromPeerId.low>>>0,i.fromPeerId.high>>>0).toNumber(!0))),i.fromPeerIdString!=null&&(o.fromPeerIdString=String(i.fromPeerIdString)),i.capabilities!=null){if(typeof i.capabilities!="object")throw TypeError(".PeerMessage.capabilities: object expected");o.capabilities=r.PeerMessage.Capabilities.fromObject(i.capabilities)}if(i.background!=null){if(typeof i.background!="object")throw TypeError(".PeerMessage.background: object expected");o.background=r.PeerMessage.Background.fromObject(i.background)}if(i.muteRequest!=null){if(typeof i.muteRequest!="object")throw TypeError(".PeerMessage.muteRequest: object expected");o.muteRequest=r.PeerMessage.MuteRequest.fromObject(i.muteRequest)}if(i.awarenessBroadcast!=null){if(typeof i.awarenessBroadcast!="object")throw TypeError(".PeerMessage.awarenessBroadcast: object expected");o.awarenessBroadcast=r.PeerMessage.AwarenessBroadcast.fromObject(i.awarenessBroadcast)}if(i.awarenessQuery!=null){if(typeof i.awarenessQuery!="object")throw TypeError(".PeerMessage.awarenessQuery: object expected");o.awarenessQuery=r.PeerMessage.AwarenessQuery.fromObject(i.awarenessQuery)}if(i.awarenessClose!=null){if(typeof i.awarenessClose!="object")throw TypeError(".PeerMessage.awarenessClose: object expected");o.awarenessClose=r.PeerMessage.AwarenessClose.fromObject(i.awarenessClose)}if(i.jukeboxRequest!=null){if(typeof i.jukeboxRequest!="object")throw TypeError(".PeerMessage.jukeboxRequest: object expected");o.jukeboxRequest=r.PeerMessage.JukeboxRequest.fromObject(i.jukeboxRequest)}if(i.contentShareDetails!=null){if(typeof i.contentShareDetails!="object")throw TypeError(".PeerMessage.contentShareDetails: object expected");o.contentShareDetails=r.PeerMessage.ContentShareDetails.fromObject(i.contentShareDetails)}if(i.recordingStartNotification!=null){if(typeof i.recordingStartNotification!="object")throw TypeError(".PeerMessage.recordingStartNotification: object expected");o.recordingStartNotification=r.PeerMessage.RecordingStartNotification.fromObject(i.recordingStartNotification)}return o},"fromObject"),e.toObject=s(function(i,o){o||(o={});let u={};if(o.defaults){if(u.reacji=null,u.draw=null,l.Long){let h=new l.Long(0,0,!0);u.fromPeerId=o.longs===String?h.toString():o.longs===Number?h.toNumber():h}else u.fromPeerId=o.longs===String?"0":0;u.fromPeerIdString="",u.capabilities=null,u.background=null,u.muteRequest=null,u.awarenessBroadcast=null,u.awarenessQuery=null,u.awarenessClose=null,u.jukeboxRequest=null,u.contentShareDetails=null,u.recordingStartNotification=null}return i.reacji!=null&&i.hasOwnProperty("reacji")&&(u.reacji=r.PeerMessage.Reacji.toObject(i.reacji,o)),i.draw!=null&&i.hasOwnProperty("draw")&&(u.draw=r.PeerMessage.Draw.toObject(i.draw,o)),i.fromPeerId!=null&&i.hasOwnProperty("fromPeerId")&&(typeof i.fromPeerId=="number"?u.fromPeerId=o.longs===String?String(i.fromPeerId):i.fromPeerId:u.fromPeerId=o.longs===String?l.Long.prototype.toString.call(i.fromPeerId):o.longs===Number?new l.LongBits(i.fromPeerId.low>>>0,i.fromPeerId.high>>>0).toNumber(!0):i.fromPeerId),i.fromPeerIdString!=null&&i.hasOwnProperty("fromPeerIdString")&&(u.fromPeerIdString=i.fromPeerIdString),i.capabilities!=null&&i.hasOwnProperty("capabilities")&&(u.capabilities=r.PeerMessage.Capabilities.toObject(i.capabilities,o)),i.background!=null&&i.hasOwnProperty("background")&&(u.background=r.PeerMessage.Background.toObject(i.background,o)),i.muteRequest!=null&&i.hasOwnProperty("muteRequest")&&(u.muteRequest=r.PeerMessage.MuteRequest.toObject(i.muteRequest,o)),i.awarenessBroadcast!=null&&i.hasOwnProperty("awarenessBroadcast")&&(u.awarenessBroadcast=r.PeerMessage.AwarenessBroadcast.toObject(i.awarenessBroadcast,o)),i.awarenessQuery!=null&&i.hasOwnProperty("awarenessQuery")&&(u.awarenessQuery=r.PeerMessage.AwarenessQuery.toObject(i.awarenessQuery,o)),i.awarenessClose!=null&&i.hasOwnProperty("awarenessClose")&&(u.awarenessClose=r.PeerMessage.AwarenessClose.toObject(i.awarenessClose,o)),i.jukeboxRequest!=null&&i.hasOwnProperty("jukeboxRequest")&&(u.jukeboxRequest=r.PeerMessage.JukeboxRequest.toObject(i.jukeboxRequest,o)),i.contentShareDetails!=null&&i.hasOwnProperty("contentShareDetails")&&(u.contentShareDetails=r.PeerMessage.ContentShareDetails.toObject(i.contentShareDetails,o)),i.recordingStartNotification!=null&&i.hasOwnProperty("recordingStartNotification")&&(u.recordingStartNotification=r.PeerMessage.RecordingStartNotification.toObject(i.recordingStartNotification,o)),u},"toObject"),e.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),e.getTypeUrl=s(function(i){return i===void 0&&(i="type.googleapis.com"),i+"/PeerMessage"},"getTypeUrl"),e.Reacji=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"Reacji"),t.prototype.emoji="",t.prototype.type=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.emoji!=null&&Object.hasOwnProperty.call(o,"emoji")&&u.uint32(10).string(o.emoji),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&u.uint32(16).int32(o.type),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.Reacji;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.emoji=o.string();break}case 2:{S.type=o.int32();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.emoji!=null&&o.hasOwnProperty("emoji")&&!l.isString(o.emoji))return"emoji: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:break}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Reacji)return o;let u=new r.PeerMessage.Reacji;switch(o.emoji!=null&&(u.emoji=String(o.emoji)),o.type){default:if(typeof o.type=="number"){u.type=o.type;break}break;case"Unknown_reaction_type":case 0:u.type=0;break;case"Effect":case 1:u.type=1;break;case"Standard":case 2:u.type=2;break;case"Gif":case 3:u.type=3;break}return u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.emoji="",h.type=u.enums===String?"Unknown_reaction_type":0),o.emoji!=null&&o.hasOwnProperty("emoji")&&(h.emoji=o.emoji),o.type!=null&&o.hasOwnProperty("type")&&(h.type=u.enums===String?r.PeerMessage.Reacji.Type[o.type]===void 0?o.type:r.PeerMessage.Reacji.Type[o.type]:o.type),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Reacji"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="Unknown_reaction_type"]=0,o[i[1]="Effect"]=1,o[i[2]="Standard"]=2,o[i[3]="Gif"]=3,o}(),t}(),e.Point=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"Point"),t.prototype.x=0,t.prototype.y=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&u.uint32(9).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&u.uint32(17).double(o.y),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.Point;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.x=o.double();break}case 2:{S.y=o.double();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Point)return o;let u=new r.PeerMessage.Point;return o.x!=null&&(u.x=Number(o.x)),o.y!=null&&(u.y=Number(o.y)),u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.x=0,h.y=0),o.x!=null&&o.hasOwnProperty("x")&&(h.x=u.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(h.y=u.json&&!isFinite(o.y)?String(o.y):o.y),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Point"},"getTypeUrl"),t}(),e.Segment=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"Segment"),t.prototype.a=null,t.prototype.b=null,t.prototype.c=null,t.prototype.d=null,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.a!=null&&Object.hasOwnProperty.call(o,"a")&&r.PeerMessage.Point.encode(o.a,u.uint32(10).fork()).ldelim(),o.b!=null&&Object.hasOwnProperty.call(o,"b")&&r.PeerMessage.Point.encode(o.b,u.uint32(18).fork()).ldelim(),o.c!=null&&Object.hasOwnProperty.call(o,"c")&&r.PeerMessage.Point.encode(o.c,u.uint32(26).fork()).ldelim(),o.d!=null&&Object.hasOwnProperty.call(o,"d")&&r.PeerMessage.Point.encode(o.d,u.uint32(34).fork()).ldelim(),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.Segment;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.a=r.PeerMessage.Point.decode(o,o.uint32());break}case 2:{S.b=r.PeerMessage.Point.decode(o,o.uint32());break}case 3:{S.c=r.PeerMessage.Point.decode(o,o.uint32());break}case 4:{S.d=r.PeerMessage.Point.decode(o,o.uint32());break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.a!=null&&o.hasOwnProperty("a")){let u=r.PeerMessage.Point.verify(o.a);if(u)return"a."+u}if(o.b!=null&&o.hasOwnProperty("b")){let u=r.PeerMessage.Point.verify(o.b);if(u)return"b."+u}if(o.c!=null&&o.hasOwnProperty("c")){let u=r.PeerMessage.Point.verify(o.c);if(u)return"c."+u}if(o.d!=null&&o.hasOwnProperty("d")){let u=r.PeerMessage.Point.verify(o.d);if(u)return"d."+u}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Segment)return o;let u=new r.PeerMessage.Segment;if(o.a!=null){if(typeof o.a!="object")throw TypeError(".PeerMessage.Segment.a: object expected");u.a=r.PeerMessage.Point.fromObject(o.a)}if(o.b!=null){if(typeof o.b!="object")throw TypeError(".PeerMessage.Segment.b: object expected");u.b=r.PeerMessage.Point.fromObject(o.b)}if(o.c!=null){if(typeof o.c!="object")throw TypeError(".PeerMessage.Segment.c: object expected");u.c=r.PeerMessage.Point.fromObject(o.c)}if(o.d!=null){if(typeof o.d!="object")throw TypeError(".PeerMessage.Segment.d: object expected");u.d=r.PeerMessage.Point.fromObject(o.d)}return u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.a=null,h.b=null,h.c=null,h.d=null),o.a!=null&&o.hasOwnProperty("a")&&(h.a=r.PeerMessage.Point.toObject(o.a,u)),o.b!=null&&o.hasOwnProperty("b")&&(h.b=r.PeerMessage.Point.toObject(o.b,u)),o.c!=null&&o.hasOwnProperty("c")&&(h.c=r.PeerMessage.Point.toObject(o.c,u)),o.d!=null&&o.hasOwnProperty("d")&&(h.d=r.PeerMessage.Point.toObject(o.d,u)),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Segment"},"getTypeUrl"),t}(),e.Draw=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"Draw"),t.prototype.type=0,t.prototype.segment=null,t.prototype.hue=0,t.prototype.itemId="",t.prototype.x=0,t.prototype.y=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&u.uint32(8).int32(o.type),o.segment!=null&&Object.hasOwnProperty.call(o,"segment")&&r.PeerMessage.Segment.encode(o.segment,u.uint32(18).fork()).ldelim(),o.hue!=null&&Object.hasOwnProperty.call(o,"hue")&&u.uint32(24).int32(o.hue),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&u.uint32(34).string(o.itemId),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&u.uint32(41).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&u.uint32(49).double(o.y),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.Draw;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.type=o.int32();break}case 2:{S.segment=r.PeerMessage.Segment.decode(o,o.uint32());break}case 3:{S.hue=o.int32();break}case 4:{S.itemId=o.string();break}case 5:{S.x=o.double();break}case 6:{S.y=o.double();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(o.segment!=null&&o.hasOwnProperty("segment")){let u=r.PeerMessage.Segment.verify(o.segment);if(u)return"segment."+u}return o.hue!=null&&o.hasOwnProperty("hue")&&!l.isInteger(o.hue)?"hue: integer expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!l.isString(o.itemId)?"itemId: string expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Draw)return o;let u=new r.PeerMessage.Draw;switch(o.type){default:if(typeof o.type=="number"){u.type=o.type;break}break;case"UNKNOWN_DRAW_TYPE":case 0:u.type=0;break;case"NEW":case 1:u.type=1;break;case"EDIT":case 2:u.type=2;break;case"END":case 3:u.type=3;break;case"CHANGE_HUE":case 4:u.type=4;break;case"POSITION":case 5:u.type=5;break}if(o.segment!=null){if(typeof o.segment!="object")throw TypeError(".PeerMessage.Draw.segment: object expected");u.segment=r.PeerMessage.Segment.fromObject(o.segment)}return o.hue!=null&&(u.hue=o.hue|0),o.itemId!=null&&(u.itemId=String(o.itemId)),o.x!=null&&(u.x=Number(o.x)),o.y!=null&&(u.y=Number(o.y)),u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.type=u.enums===String?"UNKNOWN_DRAW_TYPE":0,h.segment=null,h.hue=0,h.itemId="",h.x=0,h.y=0),o.type!=null&&o.hasOwnProperty("type")&&(h.type=u.enums===String?r.PeerMessage.Draw.Type[o.type]===void 0?o.type:r.PeerMessage.Draw.Type[o.type]:o.type),o.segment!=null&&o.hasOwnProperty("segment")&&(h.segment=r.PeerMessage.Segment.toObject(o.segment,u)),o.hue!=null&&o.hasOwnProperty("hue")&&(h.hue=o.hue),o.itemId!=null&&o.hasOwnProperty("itemId")&&(h.itemId=o.itemId),o.x!=null&&o.hasOwnProperty("x")&&(h.x=u.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(h.y=u.json&&!isFinite(o.y)?String(o.y):o.y),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Draw"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="UNKNOWN_DRAW_TYPE"]=0,o[i[1]="NEW"]=1,o[i[2]="EDIT"]=2,o[i[3]="END"]=3,o[i[4]="CHANGE_HUE"]=4,o[i[5]="POSITION"]=5,o}(),t}(),e.Capabilities=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"Capabilities"),t.prototype.isDrawEnabled=!1,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.isDrawEnabled!=null&&Object.hasOwnProperty.call(o,"isDrawEnabled")&&u.uint32(8).bool(o.isDrawEnabled),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.Capabilities;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.isDrawEnabled=o.bool();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&typeof o.isDrawEnabled!="boolean"?"isDrawEnabled: boolean expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Capabilities)return o;let u=new r.PeerMessage.Capabilities;return o.isDrawEnabled!=null&&(u.isDrawEnabled=Boolean(o.isDrawEnabled)),u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.isDrawEnabled=!1),o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&(h.isDrawEnabled=o.isDrawEnabled),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Capabilities"},"getTypeUrl"),t}(),e.ContentShareDetails=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"ContentShareDetails"),t.prototype.sourceType="",t.prototype.itemId="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.sourceType!=null&&Object.hasOwnProperty.call(o,"sourceType")&&u.uint32(10).string(o.sourceType),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&u.uint32(18).string(o.itemId),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.ContentShareDetails;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.sourceType=o.string();break}case 2:{S.itemId=o.string();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.sourceType!=null&&o.hasOwnProperty("sourceType")&&!l.isString(o.sourceType)?"sourceType: string expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!l.isString(o.itemId)?"itemId: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.ContentShareDetails)return o;let u=new r.PeerMessage.ContentShareDetails;return o.sourceType!=null&&(u.sourceType=String(o.sourceType)),o.itemId!=null&&(u.itemId=String(o.itemId)),u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.sourceType="",h.itemId=""),o.sourceType!=null&&o.hasOwnProperty("sourceType")&&(h.sourceType=o.sourceType),o.itemId!=null&&o.hasOwnProperty("itemId")&&(h.itemId=o.itemId),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.ContentShareDetails"},"getTypeUrl"),t}(),e.Background=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"Background"),t.prototype.url="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.url!=null&&Object.hasOwnProperty.call(o,"url")&&u.uint32(10).string(o.url),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.Background;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.url=o.string();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.url!=null&&o.hasOwnProperty("url")&&!l.isString(o.url)?"url: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Background)return o;let u=new r.PeerMessage.Background;return o.url!=null&&(u.url=String(o.url)),u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.url=""),o.url!=null&&o.hasOwnProperty("url")&&(h.url=o.url),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Background"},"getTypeUrl"),t}(),e.MuteRequest=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"MuteRequest"),t.prototype.peerId="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.peerId!=null&&Object.hasOwnProperty.call(o,"peerId")&&u.uint32(10).string(o.peerId),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.MuteRequest;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.peerId=o.string();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.peerId!=null&&o.hasOwnProperty("peerId")&&!l.isString(o.peerId)?"peerId: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.MuteRequest)return o;let u=new r.PeerMessage.MuteRequest;return o.peerId!=null&&(u.peerId=String(o.peerId)),u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.peerId=""),o.peerId!=null&&o.hasOwnProperty("peerId")&&(h.peerId=o.peerId),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.MuteRequest"},"getTypeUrl"),t}(),e.JukeboxRequest=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"JukeboxRequest"),t.prototype.songKey="",t.prototype.stop=!1,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.songKey!=null&&Object.hasOwnProperty.call(o,"songKey")&&u.uint32(10).string(o.songKey),o.stop!=null&&Object.hasOwnProperty.call(o,"stop")&&u.uint32(16).bool(o.stop),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.JukeboxRequest;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.songKey=o.string();break}case 2:{S.stop=o.bool();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.songKey!=null&&o.hasOwnProperty("songKey")&&!l.isString(o.songKey)?"songKey: string expected":o.stop!=null&&o.hasOwnProperty("stop")&&typeof o.stop!="boolean"?"stop: boolean expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.JukeboxRequest)return o;let u=new r.PeerMessage.JukeboxRequest;return o.songKey!=null&&(u.songKey=String(o.songKey)),o.stop!=null&&(u.stop=Boolean(o.stop)),u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.songKey="",h.stop=!1),o.songKey!=null&&o.hasOwnProperty("songKey")&&(h.songKey=o.songKey),o.stop!=null&&o.hasOwnProperty("stop")&&(h.stop=o.stop),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.JukeboxRequest"},"getTypeUrl"),t}(),e.RecordingStartNotification=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"RecordingStartNotification"),t.prototype.type=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&u.uint32(8).int32(o.type),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.RecordingStartNotification;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.type=o.int32();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:break}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.RecordingStartNotification)return o;let u=new r.PeerMessage.RecordingStartNotification;switch(o.type){default:if(typeof o.type=="number"){u.type=o.type;break}break;case"UNKNOWN_TYPE":case 0:u.type=0;break;case"SUMMARY":case 1:u.type=1;break}return u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.type=u.enums===String?"UNKNOWN_TYPE":0),o.type!=null&&o.hasOwnProperty("type")&&(h.type=u.enums===String?r.PeerMessage.RecordingStartNotification.Type[o.type]===void 0?o.type:r.PeerMessage.RecordingStartNotification.Type[o.type]:o.type),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.RecordingStartNotification"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="UNKNOWN_TYPE"]=0,o[i[1]="SUMMARY"]=1,o}(),t}(),e.AwarenessPayload=function(){function t(o){if(o)for(let u=Object.keys(o),h=0;h<u.length;++h)o[u[h]]!=null&&(this[u[h]]=o[u[h]])}s(t,"AwarenessPayload"),t.prototype.fieldName="",t.prototype.fieldValue="",t.prototype.fieldTimestampMs=null;let i;return Object.defineProperty(t.prototype,"_fieldTimestampMs",{get:l.oneOfGetter(i=["fieldTimestampMs"]),set:l.oneOfSetter(i)}),t.create=s(function(u){return new t(u)},"create"),t.encode=s(function(u,h){return h||(h=g.create()),u.fieldName!=null&&Object.hasOwnProperty.call(u,"fieldName")&&h.uint32(10).string(u.fieldName),u.fieldValue!=null&&Object.hasOwnProperty.call(u,"fieldValue")&&h.uint32(18).string(u.fieldValue),u.fieldTimestampMs!=null&&Object.hasOwnProperty.call(u,"fieldTimestampMs")&&h.uint32(24).int64(u.fieldTimestampMs),h},"encode"),t.encodeDelimited=s(function(u,h){return this.encode(u,h).ldelim()},"encodeDelimited"),t.decode=s(function(u,h){u instanceof m||(u=m.create(u));let S=h===void 0?u.len:u.pos+h,f=new r.PeerMessage.AwarenessPayload;for(;u.pos<S;){let v=u.uint32();switch(v>>>3){case 1:{f.fieldName=u.string();break}case 2:{f.fieldValue=u.string();break}case 3:{f.fieldTimestampMs=u.int64();break}default:u.skipType(v&7);break}}return f},"decode"),t.decodeDelimited=s(function(u){return u instanceof m||(u=new m(u)),this.decode(u,u.uint32())},"decodeDelimited"),t.verify=s(function(u){if(typeof u!="object"||u===null)return"object expected";let h={};return u.fieldName!=null&&u.hasOwnProperty("fieldName")&&!l.isString(u.fieldName)?"fieldName: string expected":u.fieldValue!=null&&u.hasOwnProperty("fieldValue")&&!l.isString(u.fieldValue)?"fieldValue: string expected":u.fieldTimestampMs!=null&&u.hasOwnProperty("fieldTimestampMs")&&(h._fieldTimestampMs=1,!l.isInteger(u.fieldTimestampMs)&&!(u.fieldTimestampMs&&l.isInteger(u.fieldTimestampMs.low)&&l.isInteger(u.fieldTimestampMs.high)))?"fieldTimestampMs: integer|Long expected":null},"verify"),t.fromObject=s(function(u){if(u instanceof r.PeerMessage.AwarenessPayload)return u;let h=new r.PeerMessage.AwarenessPayload;return u.fieldName!=null&&(h.fieldName=String(u.fieldName)),u.fieldValue!=null&&(h.fieldValue=String(u.fieldValue)),u.fieldTimestampMs!=null&&(l.Long?(h.fieldTimestampMs=l.Long.fromValue(u.fieldTimestampMs)).unsigned=!1:typeof u.fieldTimestampMs=="string"?h.fieldTimestampMs=parseInt(u.fieldTimestampMs,10):typeof u.fieldTimestampMs=="number"?h.fieldTimestampMs=u.fieldTimestampMs:typeof u.fieldTimestampMs=="object"&&(h.fieldTimestampMs=new l.LongBits(u.fieldTimestampMs.low>>>0,u.fieldTimestampMs.high>>>0).toNumber())),h},"fromObject"),t.toObject=s(function(u,h){h||(h={});let S={};return h.defaults&&(S.fieldName="",S.fieldValue=""),u.fieldName!=null&&u.hasOwnProperty("fieldName")&&(S.fieldName=u.fieldName),u.fieldValue!=null&&u.hasOwnProperty("fieldValue")&&(S.fieldValue=u.fieldValue),u.fieldTimestampMs!=null&&u.hasOwnProperty("fieldTimestampMs")&&(typeof u.fieldTimestampMs=="number"?S.fieldTimestampMs=h.longs===String?String(u.fieldTimestampMs):u.fieldTimestampMs:S.fieldTimestampMs=h.longs===String?l.Long.prototype.toString.call(u.fieldTimestampMs):h.longs===Number?new l.LongBits(u.fieldTimestampMs.low>>>0,u.fieldTimestampMs.high>>>0).toNumber():u.fieldTimestampMs,h.oneofs&&(S._fieldTimestampMs="fieldTimestampMs")),S},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(u){return u===void 0&&(u="type.googleapis.com"),u+"/PeerMessage.AwarenessPayload"},"getTypeUrl"),t}(),e.AwarenessBroadcast=function(){function t(i){if(this.awarenessState=[],i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"AwarenessBroadcast"),t.prototype.channel="",t.prototype.user="",t.prototype.awarenessState=l.emptyArray,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){if(u||(u=g.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&u.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&u.uint32(18).string(o.user),o.awarenessState!=null&&o.awarenessState.length)for(let h=0;h<o.awarenessState.length;++h)r.PeerMessage.AwarenessPayload.encode(o.awarenessState[h],u.uint32(26).fork()).ldelim();return u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.AwarenessBroadcast;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}case 3:{S.awarenessState&&S.awarenessState.length||(S.awarenessState=[]),S.awarenessState.push(r.PeerMessage.AwarenessPayload.decode(o,o.uint32()));break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.channel!=null&&o.hasOwnProperty("channel")&&!l.isString(o.channel))return"channel: string expected";if(o.user!=null&&o.hasOwnProperty("user")&&!l.isString(o.user))return"user: string expected";if(o.awarenessState!=null&&o.hasOwnProperty("awarenessState")){if(!Array.isArray(o.awarenessState))return"awarenessState: array expected";for(let u=0;u<o.awarenessState.length;++u){let h=r.PeerMessage.AwarenessPayload.verify(o.awarenessState[u]);if(h)return"awarenessState."+h}}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.AwarenessBroadcast)return o;let u=new r.PeerMessage.AwarenessBroadcast;if(o.channel!=null&&(u.channel=String(o.channel)),o.user!=null&&(u.user=String(o.user)),o.awarenessState){if(!Array.isArray(o.awarenessState))throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: array expected");u.awarenessState=[];for(let h=0;h<o.awarenessState.length;++h){if(typeof o.awarenessState[h]!="object")throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: object expected");u.awarenessState[h]=r.PeerMessage.AwarenessPayload.fromObject(o.awarenessState[h])}}return u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};if((u.arrays||u.defaults)&&(h.awarenessState=[]),u.defaults&&(h.channel="",h.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(h.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(h.user=o.user),o.awarenessState&&o.awarenessState.length){h.awarenessState=[];for(let S=0;S<o.awarenessState.length;++S)h.awarenessState[S]=r.PeerMessage.AwarenessPayload.toObject(o.awarenessState[S],u)}return h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessBroadcast"},"getTypeUrl"),t}(),e.AwarenessQuery=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"AwarenessQuery"),t.prototype.channel="",t.prototype.user="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&u.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&u.uint32(18).string(o.user),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.AwarenessQuery;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!l.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!l.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.AwarenessQuery)return o;let u=new r.PeerMessage.AwarenessQuery;return o.channel!=null&&(u.channel=String(o.channel)),o.user!=null&&(u.user=String(o.user)),u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.channel="",h.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(h.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(h.user=o.user),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessQuery"},"getTypeUrl"),t}(),e.AwarenessClose=function(){function t(i){if(i)for(let o=Object.keys(i),u=0;u<o.length;++u)i[o[u]]!=null&&(this[o[u]]=i[o[u]])}return s(t,"AwarenessClose"),t.prototype.channel="",t.prototype.user="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,u){return u||(u=g.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&u.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&u.uint32(18).string(o.user),u},"encode"),t.encodeDelimited=s(function(o,u){return this.encode(o,u).ldelim()},"encodeDelimited"),t.decode=s(function(o,u){o instanceof m||(o=m.create(o));let h=u===void 0?o.len:o.pos+u,S=new r.PeerMessage.AwarenessClose;for(;o.pos<h;){let f=o.uint32();switch(f>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(f&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!l.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!l.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.AwarenessClose)return o;let u=new r.PeerMessage.AwarenessClose;return o.channel!=null&&(u.channel=String(o.channel)),o.user!=null&&(u.user=String(o.user)),u},"fromObject"),t.toObject=s(function(o,u){u||(u={});let h={};return u.defaults&&(h.channel="",h.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(h.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(h.user=o.user),h},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessClose"},"getTypeUrl"),t}(),e})()},9648131521:(F,a,c)=>{"use strict";c.d(a,{X:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={InvalidCursor:"invalid_cursor",InvalidArguments:"invalid_arguments"},t=(0,l.A)("activity.feed generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"activity.feed",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to activity.feed
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcheractivityFeedFetcher",description:"activity.feed generated fetcher"}},1605540670:(F,a,c)=>{"use strict";c.d(a,{O:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={UserNotFound:"user_not_found",InvalidInviteType:"invalid_invite_type",Ratelimited:"ratelimited",OnlyCanUseParamInviteOrInviteIds:"only_can_use_param_invite_or_invite_ids"},t=(0,l.A)("connectInvites.list generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"connectInvites.list",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to connectInvites.list
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconnectInvitesListFetcher",description:"connectInvites.list generated fetcher"}},1614054140:(F,a,c)=>{"use strict";c.d(a,{T:()=>e,W:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={ChannelConversionInProgress:"channel_conversion_in_progress",ConnectionLimitExceeded:"connection_limit_exceeded",EmailDoesNotMatch:"email_does_not_match",FailedToStartTrial:"failed_to_start_trial",HasAlreadyConnectedToOrg:"has_already_connected_to_org",InvalidArguments:"invalid_arguments",InvalidEmojiNotAllowed:"invalid_emoji_not_allowed",InvalidHostTeam:"invalid_host_team",InvalidLink:"invalid_link",InvalidName:"invalid_name",InvalidNameMaxlength:"invalid_name_maxlength",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InviteFromSameOrg:"invite_from_same_org",InviteNotFound:"invite_not_found",InvalidPrivacy:"invalid_privacy",InvalidRecipientTeam:"invalid_recipient_team",InvalidTargetTeam:"invalid_target_team",InviteUsed:"invite_used",IsPendingConnectedToOrg:"is_pending_connected_to_org",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",NameTaken:"name_taken",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",NotPaid:"not_paid",RestrictedAction:"restricted_action",TeamNotFound:"team_not_found",UserCannotCreateChannel:"user_cannot_create_channel",UserIsRestricted:"user_is_restricted",UserNotFound:"user_not_found",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot"},t=(0,l.A)("conversations.acceptSharedInvite generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"conversations.acceptSharedInvite",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to conversations.acceptSharedInvite
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsAcceptSharedInviteFetcher",description:"conversations.acceptSharedInvite generated fetcher"}},6772985425:(F,a,c)=>{"use strict";c.d(a,{d:()=>e,y:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found",FileNotFound:"file_not_found",TooManyTabs:"too_many_tabs"},t=(0,l.A)("conversations.addTab generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"conversations.addTab",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to conversations.addTab
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsAddTabFetcher",description:"conversations.addTab generated fetcher"}},6639221719:(F,a,c)=>{"use strict";c.d(a,{U:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={FeatureNotEnabled:"feature_not_enabled",ChannelNotFound:"channel_not_found",ErrorFetchingChannelPrefs:"error_fetching_channel_prefs"},t=(0,l.A)("conversations.listPrefs generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"conversations.listPrefs",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to conversations.listPrefs
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsListPrefsFetcher",description:"conversations.listPrefs generated fetcher"}},1783582283:(F,a,c)=>{"use strict";c.d(a,{i:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found",FileNotFound:"file_not_found",TabNotFound:"tab_not_found"},t=(0,l.A)("conversations.moveTab generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"conversations.moveTab",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to conversations.moveTab
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsMoveTabFetcher",description:"conversations.moveTab generated fetcher"}},4347488242:(F,a,c)=>{"use strict";c.d(a,{D:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found"},t=(0,l.A)("conversations.setProperties generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"conversations.setProperties",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to conversations.setProperties
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsSetPropertiesFetcher",description:"conversations.setProperties generated fetcher"}},4349526263:(F,a,c)=>{"use strict";c.d(a,{Sv:()=>e,a0:()=>i,jB:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={Unknown:"unknown",UserCannotCreateChannel:"user_cannot_create_channel",IsPendingConnectedToOrg:"is_pending_connected_to_org",HasAlreadyConnectedToOrg:"has_already_connected_to_org",EmailDoesNotMatch:"email_does_not_match",InviteFromSameOrg:"invite_from_same_org",UserIsRestricted:"user_is_restricted",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",GridWorkspaceRequired:"grid_workspace_required",RestrictedAction:"restricted_action",ConnectionLimitExceeded:"connection_limit_exceeded",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot",NotPaid:"not_paid",UpgradeRequiredButUserCannot:"upgrade_required_but_user_cannot",InvalidRecipientTeam:"invalid_recipient_team"},t={InvalidArguments:"invalid_arguments",InviteNotFound:"invite_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",DomainClaimed:"domain_claimed"},i=(0,l.A)("conversations.sharedInviteAcceptanceEligibility generated fetcher",function(){var o=(0,d.coroutine)(function*(u,h,S){try{const f=["reason"],v=(0,m.A)(S,f),E=(0,n.VA)(v);return yield u((0,g.apiCall)({method:"conversations.sharedInviteAcceptanceEligibility",args:E,reason:S.reason}))}catch(f){throw(0,r.Ay)({getState:h}).error(`API call to conversations.sharedInviteAcceptanceEligibility
				with reason ${S.reason} failed, initiated by generated fetcher`),f}});return function(u,h,S){return o.apply(this,arguments)}}());i.meta={name:"createFetcher",key:"createFetcherconversationsSharedInviteAcceptanceEligibilityFetcher",description:"conversations.sharedInviteAcceptanceEligibility generated fetcher"}},8864306005:(F,a,c)=>{"use strict";c.d(a,{I:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id"},t=(0,l.A)("conversations.teamConnections generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"conversations.teamConnections",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to conversations.teamConnections
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsTeamConnectionsFetcher",description:"conversations.teamConnections generated fetcher"}},7056498591:(F,a,c)=>{"use strict";c.d(a,{k:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={DisallowedAction:"disallowed_action",RestrictedAction:"restricted_action",InvalidArguments:"invalid_arguments",ChannelNotFound:"channel_not_found",TabNotFound:"tab_not_found",FileNotFound:"file_not_found",TooManyTabs:"too_many_tabs"},t=(0,l.A)("conversations.updateTab generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"conversations.updateTab",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to conversations.updateTab
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsUpdateTabFetcher",description:"conversations.updateTab generated fetcher"}},3456937405:(F,a,c)=>{"use strict";c.d(a,{W:()=>e,l:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={NoAliasSelected:"no_alias_selected",RateLimited:"rate_limited",NoImageUploaded:"no_image_uploaded",InvalidMode:"invalid_mode",ErrorBadNameI18N:"error_bad_name_i18n",ErrorNameTaken:"error_name_taken",ErrorNameTakenI18N:"error_name_taken_i18n",ErrorLowerCaseNamesOnly:"error_lower_case_names_only",ErrorInvalidAlias:"error_invalid_alias",ErrorBadUpload:"error_bad_upload",ErrorTooBig:"error_too_big",ErrorBadWide:"error_bad_wide",ErrorMissingName:"error_missing_name",ErrorNoImage:"error_no_image",ErrorBadFormat:"error_bad_format",ResizedButStillTooLarge:"resized_but_still_too_large",UnableToEnqueue:"unable_to_enqueue",TooManyFrames:"too_many_frames",UnknownMethod:"unknown_method",NoPermission:"no_permission",UnableToFetchEmoji:"unable_to_fetch_emoji",EmojiLimitReached:"emoji_limit_reached",NoUrlProvided:"no_url_provided",NoUrlImage:"no_url_image"},t=(0,l.A)("emoji.add generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"emoji.add",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to emoji.add
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcheremojiAddFetcher",description:"emoji.add generated fetcher"}},5216556985:(F,a,c)=>{"use strict";c.d(a,{D:()=>t,G:()=>e});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={FeatureNotEnabled:"feature_not_enabled",InviteNotFound:"invite_not_found",WorkspaceNotFound:"workspace_not_found",OperationNotAllowed:"operation_not_allowed",ExternalWorkspaceLimitReached:"external_workspace_limit_reached",FailedToFetchTermsOfService:"failed_to_fetch_terms_of_service",TermsOfServiceNotAccepted:"terms_of_service_not_accepted",GuestUserNotAllowed:"guest_user_not_allowed"},t=(0,l.A)("externalWorkspaces.invites.accept generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"externalWorkspaces.invites.accept",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to externalWorkspaces.invites.accept
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesAcceptFetcher",description:"externalWorkspaces.invites.accept generated fetcher"}},8485081141:(F,a,c)=>{"use strict";c.d(a,{I:()=>e,l:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={InviteNotFound:"invite_not_found",InviteInvalid:"invite_invalid",RateLimited:"rate_limited",InviteUsed:"invite_used",FailedGeneratingInviteOutput:"failed_generating_invite_output"},t=(0,l.A)("externalWorkspaces.invites.info generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason","token"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"externalWorkspaces.invites.info",args:v,reason:h.reason,computeToken:!1}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to externalWorkspaces.invites.info
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesInfoFetcher",description:"externalWorkspaces.invites.info generated fetcher"}},5502459222:(F,a,c)=>{"use strict";c.d(a,{R:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={FileNotFound:"file_not_found",ExperimentNotEnabled:"experiment_not_enabled"},t=(0,l.A)("files.readStatus generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"files.readStatus",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to files.readStatus
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherfilesReadStatusFetcher",description:"files.readStatus generated fetcher"}},8726791251:(F,a,c)=>{"use strict";c.d(a,{I:()=>e});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e=(0,l.A)("help.issues.ticketStats generated fetcher",function(){var t=(0,d.coroutine)(function*(i,o,u){try{const h=["reason"],S=(0,m.A)(u,h),f=(0,n.VA)(S);return yield i((0,g.apiCall)({method:"help.issues.ticketStats",args:f,reason:u.reason}))}catch(h){throw(0,r.Ay)({getState:o}).error(`API call to help.issues.ticketStats
				with reason ${u.reason} failed, initiated by generated fetcher`),h}});return function(i,o,u){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpIssuesTicketStatsFetcher",description:"help.issues.ticketStats generated fetcher"}},930270247:(F,a,c)=>{"use strict";c.d(a,{l:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={},t=(0,l.A)("help.productHelpCard.list generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"help.productHelpCard.list",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to help.productHelpCard.list
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpProductHelpCardListFetcher",description:"help.productHelpCard.list generated fetcher"}},138202077:(F,a,c)=>{"use strict";c.d(a,{H:()=>e});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e=(0,l.A)("help.getRecommendedArticles generated fetcher",function(){var t=(0,d.coroutine)(function*(i,o,u){try{const h=["reason"],S=(0,m.A)(u,h),f=(0,n.VA)(S);return yield i((0,g.apiCall)({method:"help.getRecommendedArticles",args:f,reason:u.reason}))}catch(h){throw(0,r.Ay)({getState:o}).error(`API call to help.getRecommendedArticles
				with reason ${u.reason} failed, initiated by generated fetcher`),h}});return function(i,o,u){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpGetRecommendedArticlesFetcher",description:"help.getRecommendedArticles generated fetcher"}},6936450040:(F,a,c)=>{"use strict";c.d(a,{G:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={InvalidAuth:"invalid_auth",MissingArgument:"missing_argument",Shrug:"shrug"},t=(0,l.A)("helpdesk.categories generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason","token"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"helpdesk.categories",args:v,reason:h.reason,computeToken:!1}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to helpdesk.categories
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskCategoriesFetcher",description:"helpdesk.categories generated fetcher"}},3593297427:(F,a,c)=>{"use strict";c.d(a,{w:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={CouldNotFindArticle:"could_not_find_article"},t=(0,l.A)("helpdesk.getArticle generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"helpdesk.getArticle",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to helpdesk.getArticle
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetArticleFetcher",description:"helpdesk.getArticle generated fetcher"}},8745755260:(F,a,c)=>{"use strict";c.d(a,{h:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={CouldNotFetchSections:"could_not_fetch_sections"},t=(0,l.A)("helpdesk.getSectionsAndArticlesByCategory generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason","token"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"helpdesk.getSectionsAndArticlesByCategory",args:v,reason:h.reason,computeToken:!1}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to helpdesk.getSectionsAndArticlesByCategory
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetSectionsAndArticlesByCategoryFetcher",description:"helpdesk.getSectionsAndArticlesByCategory generated fetcher"}},9532047472:(F,a,c)=>{"use strict";c.d(a,{a:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={MissingArgument:"missing_argument",InvalidAuth:"invalid_auth",UnknownError:"unknown_error"},t=(0,l.A)("helpdesk.get generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason","token"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"helpdesk.get",args:v,reason:h.reason,computeToken:!1}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to helpdesk.get
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetFetcher",description:"helpdesk.get generated fetcher"}},2694081143:(F,a,c)=>{"use strict";c.d(a,{Q:()=>e,T:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={ListNotFound:"list_not_found",RecordNotFound:"record_not_found",RecordDeleted:"record_deleted",TeamNotFound:"team_not_found",UserNotFound:"user_not_found"},t=(0,l.A)("lists.records.info generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"lists.records.info",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to lists.records.info
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherlistsRecordsInfoFetcher",description:"lists.records.info generated fetcher"}},444762595:(F,a,c)=>{"use strict";c.d(a,{z:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={ListNotFound:"list_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",InvalidCursor:"invalid_cursor",SortsNotSupported:"sorts_not_supported",FiltersNotSupported:"filters_not_supported"},t=(0,l.A)("lists.records.list generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"lists.records.list",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to lists.records.list
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherlistsRecordsListFetcher",description:"lists.records.list generated fetcher"}},6485511687:(F,a,c)=>{"use strict";c.d(a,{a:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={NotificationNotFound:"notification_not_found",InvalidAction:"invalid_action",ErrorPersistingImpression:"error_persisting_impression",ChannelNotFound:"channel_not_found",InvalidNotificationParams:"invalid_notification_params",CannotProvideChannelAndEntityId:"cannot_provide_channel_and_entity_id",MissingEntityType:"missing_entity_type",InvalidEntityType:"invalid_entity_type"},t=(0,l.A)("megaphone.setNotificationAsSeen generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"megaphone.setNotificationAsSeen",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to megaphone.setNotificationAsSeen
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchermegaphoneSetNotificationAsSeenFetcher",description:"megaphone.setNotificationAsSeen generated fetcher"}},9869343146:(F,a,c)=>{"use strict";c.d(a,{V:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={InvalidCampaign:"invalid_campaign"},t=(0,l.A)("promo.campaigns.eligibilityInfo generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f),E=yield o((0,g.apiCall)({method:"promo.campaigns.eligibilityInfo",args:v,reason:h.reason}));return(0,n.XK)(E)}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to promo.campaigns.eligibilityInfo
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpromoCampaignsEligibilityInfoFetcher",description:"promo.campaigns.eligibilityInfo generated fetcher"}},4585652590:(F,a,c)=>{"use strict";c.d(a,{a:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={TeamIneligible:"team_ineligible",TeamOnPaidPlan:"team_on_paid_plan",InvalidCampaign:"invalid_campaign",InsufficientPermissions:"insufficient_permissions",CodeTypeRedeemed:"code_type_redeemed",CodeSubtypeRedeemed:"code_subtype_redeemed",NotInExperiment:"not_in_experiment",TeamDoesntSatisfyDaysAfterReachedMessageLimitCriteria:"team_doesnt_satisfy_days_after_reached_message_limit_criteria"},t=(0,l.A)("promo.campaigns.redeem generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"promo.campaigns.redeem",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to promo.campaigns.redeem
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpromoCampaignsRedeemFetcher",description:"promo.campaigns.redeem generated fetcher"}},2332966328:(F,a,c)=>{"use strict";c.d(a,{I:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={NotFound:"not_found"},t=(0,l.A)("quip.lookupFileId generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"quip.lookupFileId",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to quip.lookupFileId
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherquipLookupFileIdFetcher",description:"quip.lookupFileId generated fetcher"}},5170073955:(F,a,c)=>{"use strict";c.d(a,{Q:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={UserNotFound:"user_not_found",AlreadyInCall:"already_in_call",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",InvalidResponse:"invalid_response",InviteNotFound:"invite_not_found",PermissionDenied:"permission_denied",TeamNotFound:"team_not_found"},t=(0,l.A)("rooms.inviteResponse generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"rooms.inviteResponse",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to rooms.inviteResponse
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsInviteResponseFetcher",description:"rooms.inviteResponse generated fetcher"}},5142752606:(F,a,c)=>{"use strict";c.d(a,{g:()=>e});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={InvalidUser:"invalid_user",ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id",PermissionDenied:"permission_denied",CannotInviteExternal:"cannot_invite_external",InviteFailed:"invite_failed",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",MaxPotentialParticipants:"max_potential_participants",RecipientHuddlesDisabled:"recipient_huddles_disabled",FreemiumMaxParticipants:"freemium_max_participants"},t=(0,l.A)("rooms.notifyMember generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"rooms.notifyMember",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to rooms.notifyMember
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsNotifyMemberFetcher",description:"rooms.notifyMember generated fetcher"}},727128009:(F,a,c)=>{"use strict";c.d(a,{i:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=(0,l.A)("rooms.startTranscription generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"rooms.startTranscription",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to rooms.startTranscription
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStartTranscriptionFetcher",description:"rooms.startTranscription generated fetcher"}},580220061:(F,a,c)=>{"use strict";c.d(a,{W:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",InvalidTranscriptionCache:"invalid_transcription_cache",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=(0,l.A)("rooms.stopTranscription generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"rooms.stopTranscription",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to rooms.stopTranscription
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStopTranscriptionFetcher",description:"rooms.stopTranscription generated fetcher"}},5276466411:(F,a,c)=>{"use strict";c.d(a,{z:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={},t=(0,l.A)("search.autocomplete.topEngagedFiles generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"search.autocomplete.topEngagedFiles",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to search.autocomplete.topEngagedFiles
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTopEngagedFilesFetcher",description:"search.autocomplete.topEngagedFiles generated fetcher"}},6494470131:(F,a,c)=>{"use strict";c.d(a,{v:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={AuthError:"auth_error"},t=(0,l.A)("search.autocomplete.triggers generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"search.autocomplete.triggers",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to search.autocomplete.triggers
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTriggersFetcher",description:"search.autocomplete.triggers generated fetcher"}},6515569951:(F,a,c)=>{"use strict";c.d(a,{Z:()=>t,q:()=>e});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={MissingArgument:"missing_argument",NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",FeatureDisabled:"feature_disabled",OrgsSevered:"orgs_severed",InternalError:"internal_error",CustomInvitesNotSupported:"custom_invites_not_supported",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team"},t=(0,l.A)("sharedInvites.accept generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"sharedInvites.accept",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to sharedInvites.accept
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersharedInvitesAcceptFetcher",description:"sharedInvites.accept generated fetcher"}},9291336591:(F,a,c)=>{"use strict";c.d(a,{k:()=>e,n:()=>t});var d=c(9706240641),p=c.n(d),m=c(1649982175),g=c(1269227002),l=c(5257368278),r=c(796111729),n=c(5873468694);const e={BadUsername:"bad_username",CannotUpdateAdminUser:"cannot_update_admin_user",EmailBad:"email_bad",EmailTaken:"email_taken",DisplayNameNotAllowed:"display_name_not_allowed",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InvalidProfile:"invalid_profile",InvalidReservedWord:"invalid_reserved_word",InvalidUser:"invalid_user",LongUsername:"long_username",MustClearBothStatusTextAndStatusEmoji:"must_clear_both_status_text_and_status_emoji",NameNotAllowed:"name_not_allowed",NotAdmin:"not_admin",NotAppAdmin:"not_app_admin",PartialProfileSetFailed:"partial_profile_set_failed",ProfileSetFailed:"profile_set_failed",ProfileStatusSetFailedNotEmojiSyntax:"profile_status_set_failed_not_emoji_syntax",ProfileStatusSetFailedNotValidEmoji:"profile_status_set_failed_not_valid_emoji",ProfileStatusSetFailedWritingExpiration:"profile_status_set_failed_writing_expiration",ReadOnlyProfileField:"read_only_profile_field",ReservedName:"reserved_name",SudoRequired:"sudo_required",TooLong:"too_long",UserNotFound:"user_not_found",UserNotSpecified:"user_not_specified",UserRemovedFromTeam:"user_removed_from_team",UsernameEmpty:"username_empty",UsernameTaken:"username_taken"},t=(0,l.A)("users.profile.set generated fetcher",function(){var i=(0,d.coroutine)(function*(o,u,h){try{const S=["reason"],f=(0,m.A)(h,S),v=(0,n.VA)(f);return yield o((0,g.apiCall)({method:"users.profile.set",args:v,reason:h.reason}))}catch(S){throw(0,r.Ay)({getState:u}).error(`API call to users.profile.set
				with reason ${h.reason} failed, initiated by generated fetcher`),S}});return function(o,u,h){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherusersProfileSetFetcher",description:"users.profile.set generated fetcher"}},4097827290:(F,a,c)=>{"use strict";c.d(a,{p:()=>d,t:()=>p});const d={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"},p={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"}},2164700852:(F,a,c)=>{"use strict";c.d(a,{k:()=>d});const d={NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",OrgsSevered:"orgs_severed",OrgNotVerified:"org_not_verified",UserIsRestricted:"user_is_restricted",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",Generic:"generic",SlackConnectDmNotAllowedOnTeam:"slack_connect_dm_not_allowed_on_team"}},7135774191:(F,a,c)=>{"use strict";c.r(a),c.d(a,{$Command:()=>Vn,AllowNotifications:()=>Ih,AssociateChannelFlowCommand:()=>fl,BadRequestException:()=>Za,BatchChannelMembershipsFilterSensitiveLog:()=>vu,BatchCreateChannelMembershipCommand:()=>hl,BatchCreateChannelMembershipResponseFilterSensitiveLog:()=>yu,ChannelAssociatedWithFlowSummaryFilterSensitiveLog:()=>bu,ChannelBanFilterSensitiveLog:()=>_u,ChannelBanSummaryFilterSensitiveLog:()=>Tu,ChannelFilterSensitiveLog:()=>Eu,ChannelFlowCallbackCommand:()=>pl,ChannelFlowCallbackRequestFilterSensitiveLog:()=>wu,ChannelFlowFilterSensitiveLog:()=>Cu,ChannelFlowSummaryFilterSensitiveLog:()=>Ou,ChannelMembershipFilterSensitiveLog:()=>Au,ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog:()=>Md,ChannelMembershipPreferencesFilterSensitiveLog:()=>_c,ChannelMembershipSummaryFilterSensitiveLog:()=>Ru,ChannelMembershipType:()=>wh,ChannelMessageCallbackFilterSensitiveLog:()=>Iu,ChannelMessageFilterSensitiveLog:()=>Pu,ChannelMessagePersistenceType:()=>Nh,ChannelMessageStatus:()=>Lh,ChannelMessageSummaryFilterSensitiveLog:()=>ku,ChannelMessageType:()=>xh,ChannelMode:()=>Mh,ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog:()=>Rd,ChannelModeratorFilterSensitiveLog:()=>Du,ChannelModeratorSummaryFilterSensitiveLog:()=>Nu,ChannelPrivacy:()=>Rh,ChannelSummaryFilterSensitiveLog:()=>cl,ChimeSDKMessaging:()=>Cc,ChimeSDKMessagingClient:()=>ho,ChimeSDKMessagingServiceException:()=>po,ConflictException:()=>qa,CreateChannelBanCommand:()=>ml,CreateChannelBanResponseFilterSensitiveLog:()=>xu,CreateChannelCommand:()=>gl,CreateChannelFlowCommand:()=>Sl,CreateChannelFlowRequestFilterSensitiveLog:()=>Bu,CreateChannelMembershipCommand:()=>vl,CreateChannelMembershipResponseFilterSensitiveLog:()=>Fu,CreateChannelModeratorCommand:()=>yl,CreateChannelModeratorResponseFilterSensitiveLog:()=>Uu,CreateChannelRequestFilterSensitiveLog:()=>Lu,DeleteChannelBanCommand:()=>El,DeleteChannelCommand:()=>bl,DeleteChannelFlowCommand:()=>_l,DeleteChannelMembershipCommand:()=>Tl,DeleteChannelMessageCommand:()=>J,DeleteChannelModeratorCommand:()=>Cl,DeleteMessagingStreamingConfigurationsCommand:()=>Il,DescribeChannelBanCommand:()=>wl,DescribeChannelBanResponseFilterSensitiveLog:()=>Hu,DescribeChannelCommand:()=>Ol,DescribeChannelFlowCommand:()=>Al,DescribeChannelFlowResponseFilterSensitiveLog:()=>Wu,DescribeChannelMembershipCommand:()=>Ml,DescribeChannelMembershipForAppInstanceUserCommand:()=>Rl,DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog:()=>Gu,DescribeChannelMembershipResponseFilterSensitiveLog:()=>zu,DescribeChannelModeratedByAppInstanceUserCommand:()=>Pl,DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>ju,DescribeChannelModeratorCommand:()=>kl,DescribeChannelModeratorResponseFilterSensitiveLog:()=>$u,DescribeChannelResponseFilterSensitiveLog:()=>Vu,DisassociateChannelFlowCommand:()=>Dl,ErrorCode:()=>Oh,ExpirationCriterion:()=>Ah,FallbackAction:()=>kh,ForbiddenException:()=>el,GetChannelMembershipPreferencesCommand:()=>Nl,GetChannelMembershipPreferencesResponseFilterSensitiveLog:()=>Ku,GetChannelMessageCommand:()=>Ll,GetChannelMessageResponseFilterSensitiveLog:()=>Ju,GetChannelMessageStatusCommand:()=>xi,GetMessagingSessionEndpointCommand:()=>Dn,GetMessagingStreamingConfigurationsCommand:()=>Es,IdentityFilterSensitiveLog:()=>Br,InvocationType:()=>Ph,ListChannelBansCommand:()=>bs,ListChannelBansRequestFilterSensitiveLog:()=>Yu,ListChannelBansResponseFilterSensitiveLog:()=>Xu,ListChannelFlowsCommand:()=>er,ListChannelFlowsRequestFilterSensitiveLog:()=>Qu,ListChannelFlowsResponseFilterSensitiveLog:()=>Zu,ListChannelMembershipsCommand:()=>_s,ListChannelMembershipsForAppInstanceUserCommand:()=>or,ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog:()=>tf,ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog:()=>nf,ListChannelMembershipsRequestFilterSensitiveLog:()=>qu,ListChannelMembershipsResponseFilterSensitiveLog:()=>ef,ListChannelMessagesCommand:()=>at,ListChannelMessagesRequestFilterSensitiveLog:()=>rf,ListChannelMessagesResponseFilterSensitiveLog:()=>of,ListChannelModeratorsCommand:()=>to,ListChannelModeratorsRequestFilterSensitiveLog:()=>sf,ListChannelModeratorsResponseFilterSensitiveLog:()=>af,ListChannelsAssociatedWithChannelFlowCommand:()=>Ts,ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog:()=>df,ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog:()=>uf,ListChannelsCommand:()=>bi,ListChannelsModeratedByAppInstanceUserCommand:()=>Dr,ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog:()=>ff,ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>hf,ListChannelsRequestFilterSensitiveLog:()=>lf,ListChannelsResponseFilterSensitiveLog:()=>cf,ListSubChannelsCommand:()=>Cr,ListSubChannelsRequestFilterSensitiveLog:()=>pf,ListSubChannelsResponseFilterSensitiveLog:()=>mf,ListTagsForResourceCommand:()=>zs,ListTagsForResourceResponseFilterSensitiveLog:()=>gf,MessageAttributeValueFilterSensitiveLog:()=>ll,MessagingDataType:()=>Bh,NotFoundException:()=>tl,ProcessorFilterSensitiveLog:()=>al,PushNotificationConfigurationFilterSensitiveLog:()=>Ad,PushNotificationPreferencesFilterSensitiveLog:()=>Mu,PushNotificationType:()=>Dh,PutChannelExpirationSettingsCommand:()=>jo,PutChannelMembershipPreferencesCommand:()=>At,PutChannelMembershipPreferencesRequestFilterSensitiveLog:()=>Sf,PutChannelMembershipPreferencesResponseFilterSensitiveLog:()=>vf,PutMessagingStreamingConfigurationsCommand:()=>Ur,RedactChannelMessageCommand:()=>Ea,ResourceLimitExceededException:()=>sl,SearchChannelsCommand:()=>Gs,SearchChannelsRequestFilterSensitiveLog:()=>yf,SearchChannelsResponseFilterSensitiveLog:()=>Ef,SearchFieldKey:()=>Uh,SearchFieldOperator:()=>Vh,SendChannelMessageCommand:()=>js,SendChannelMessageRequestFilterSensitiveLog:()=>bf,ServiceFailureException:()=>nl,ServiceUnavailableException:()=>il,SortOrder:()=>Fh,TagFilterSensitiveLog:()=>dl,TagResourceCommand:()=>$s,TagResourceRequestFilterSensitiveLog:()=>_f,ThrottledClientException:()=>rl,UnauthorizedClientException:()=>ol,UntagResourceCommand:()=>Ks,UntagResourceRequestFilterSensitiveLog:()=>Tf,UpdateChannelCommand:()=>$o,UpdateChannelFlowCommand:()=>Cs,UpdateChannelFlowRequestFilterSensitiveLog:()=>If,UpdateChannelMessageCommand:()=>Js,UpdateChannelMessageRequestFilterSensitiveLog:()=>wf,UpdateChannelReadMarkerCommand:()=>Ys,UpdateChannelRequestFilterSensitiveLog:()=>Cf,__Client:()=>Ua,paginateListChannelBans:()=>Nd,paginateListChannelFlows:()=>ji,paginateListChannelMemberships:()=>Nf,paginateListChannelMembershipsForAppInstanceUser:()=>Df,paginateListChannelMessages:()=>Lf,paginateListChannelModerators:()=>xd,paginateListChannels:()=>Bf,paginateListChannelsAssociatedWithChannelFlow:()=>xf,paginateListChannelsModeratedByAppInstanceUser:()=>Oo,paginateListSubChannels:()=>Ta,paginateSearchChannels:()=>Vf});var d={};c.r(d),c.d(d,{getUserAgentPrefix:()=>gs,isVirtualHostableS3Bucket:()=>Na,parseArn:()=>Gc,partition:()=>Ds,setPartitionInfo:()=>ki,useDefaultPartitionInfo:()=>Ns});var p={};c.r(p),c.d(p,{aws:()=>d,booleanEquals:()=>jc,getAttr:()=>sa,isSet:()=>Kc,isValidHostLabel:()=>oa,not:()=>Jc,parseURL:()=>Yc,stringEquals:()=>Ba,substring:()=>nc,uriEncode:()=>ic});var m;(function(C){C.ENV="env",C.CONFIG="shared config entry"})(m||(m={}));const g=s((C,y,b)=>{if(y in C){if(C[y]==="true")return!0;if(C[y]==="false")return!1;throw new Error(`Cannot load ${b} "${y}". Expected "true" or "false", got ${C[y]}.`)}},"booleanSelector"),l="AWS_USE_DUALSTACK_ENDPOINT",r="use_dualstack_endpoint",n=!1,e={environmentVariableSelector:C=>g(C,l,m.ENV),configFileSelector:C=>g(C,r,m.CONFIG),default:!1},t="AWS_USE_FIPS_ENDPOINT",i="use_fips_endpoint",o=!1,u={environmentVariableSelector:C=>g(C,t,m.ENV),configFileSelector:C=>g(C,i,m.CONFIG),default:!1};var h=c(9706240641);const S=function(){var C=(0,h.coroutine)(function*(y){const{tls:b=!0}=y,I=yield y.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(I))throw new Error("Invalid region in client config");const G=yield y.useDualstackEndpoint(),Y=yield y.useFipsEndpoint();var ue;const{hostname:re}=(ue=yield y.regionInfoProvider(I,{useDualstackEndpoint:G,useFipsEndpoint:Y}))!==null&&ue!==void 0?ue:{};if(!re)throw new Error("Cannot resolve hostname from client config");return y.urlParser(`${b?"https:":"http:"}//${re}`)});return s(function(b){return C.apply(this,arguments)},"getEndpointFromRegion")}(),f=s(C=>{var y;const b=normalizeProvider((y=C.useDualstackEndpoint)!==null&&y!==void 0?y:!1),{endpoint:I,useFipsEndpoint:z,urlParser:G}=C;var Y;return{...C,tls:(Y=C.tls)!==null&&Y!==void 0?Y:!0,endpoint:I?normalizeProvider(typeof I=="string"?G(I):I):()=>getEndpointFromRegion({...C,useDualstackEndpoint:b,useFipsEndpoint:z}),isCustomEndpoint:!!I,useDualstackEndpoint:b}},"resolveEndpointsConfig"),v="AWS_REGION",E="region",_={environmentVariableSelector:C=>C[v],configFileSelector:C=>C[E],default:()=>{throw new Error("Region is missing")}},T={preferredFile:"credentials"},w=s(C=>typeof C=="string"&&(C.startsWith("fips-")||C.endsWith("-fips")),"isFipsRegion"),M=s(C=>w(C)?["fips-aws-global","aws-fips"].includes(C)?"us-east-1":C.replace(/fips-(dkr-|prod-)?|-fips/,""):C,"getRealRegion"),R=s(C=>{const{region:y,useFipsEndpoint:b}=C;if(!y)throw new Error("Region is missing");return{...C,region:(0,h.coroutine)(function*(){if(typeof y=="string")return M(y);const I=yield y();return M(I)}),useFipsEndpoint:(0,h.coroutine)(function*(){const I=typeof y=="string"?y:yield y();return w(I)?!0:typeof b!="function"?Promise.resolve(!!b):b()})}},"resolveRegionConfig");var O;(function(C){C[C.HEADER=0]="HEADER",C[C.TRAILER=1]="TRAILER"})(O||(O={}));class k{add(y){this.values.push(y)}set(y){this.values=y}remove(y){this.values=this.values.filter(b=>b!==y)}toString(){return this.values.map(y=>y.includes(",")||y.includes(" ")?`"${y}"`:y).join(", ")}get(){return this.values}constructor({name:y,kind:b=FieldPosition.HEADER,values:I=[]}){this.name=y,this.kind=b,this.values=I}}s(k,"Field");class A{static isInstance(y){if(!y)return!1;const b=y;return"method"in b&&"protocol"in b&&"hostname"in b&&"path"in b&&typeof b.query=="object"&&typeof b.headers=="object"}clone(){const y=new A({...this,headers:{...this.headers}});return y.query&&(y.query=P(y.query)),y}constructor(y){this.method=y.method||"GET",this.hostname=y.hostname||"localhost",this.port=y.port,this.query=y.query||{},this.headers=y.headers||{},this.body=y.body,this.protocol=y.protocol?y.protocol.slice(-1)!==":"?`${y.protocol}:`:y.protocol:"https:",this.path=y.path?y.path.charAt(0)!=="/"?`/${y.path}`:y.path:"/"}}s(A,"httpRequest_HttpRequest");function P(C){return Object.keys(C).reduce((y,b)=>{const I=C[b];return{...y,[b]:Array.isArray(I)?[...I]:I}},{})}s(P,"cloneQuery");class D{static isInstance(y){if(!y)return!1;const b=y;return typeof b.statusCode=="number"&&typeof b.headers=="object"}constructor(y){this.statusCode=y.statusCode,this.headers=y.headers||{},this.body=y.body}}s(D,"HttpResponse");const H="content-length";function j(C){return y=>function(){var b=(0,h.coroutine)(function*(I){const z=I.request;if(A.isInstance(z)){const{body:G,headers:Y}=z;if(G&&Object.keys(Y).map(ue=>ue.toLowerCase()).indexOf(H)===-1)try{const ue=C(G);z.headers={...z.headers,[H]:String(ue)}}catch{}}return y({...I,request:z})});return function(I){return b.apply(this,arguments)}}()}s(j,"contentLengthMiddleware");const W={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},X=s(C=>({applyToStack:y=>{y.add(j(C.bodyLengthChecker),W)}}),"getContentLengthPlugin"),ee=function(){var C=(0,h.coroutine)(function*(y){const b=(y==null?void 0:y.Bucket)||"";if(typeof y.Bucket=="string"&&(y.Bucket=b.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),$e(b)){if(y.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Me(b)||b.indexOf(".")!==-1&&!String(y.Endpoint).startsWith("http:")||b.toLowerCase()!==b||b.length<3)&&(y.ForcePathStyle=!0);return y.DisableMultiRegionAccessPoints&&(y.disableMultiRegionAccessPoints=!0,y.DisableMRAP=!0),y});return s(function(b){return C.apply(this,arguments)},"resolveParamsForS3")}(),fe=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,oe=/(\d+\.){3}\d+/,Oe=/\.\./,Xe=/\./,ge=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,Me=s(C=>fe.test(C)&&!oe.test(C)&&!Oe.test(C),"isDnsCompatibleBucketName"),$e=s(C=>{const[y,b,I,z,G,Y]=C.split(":"),ue=y==="arn"&&C.split(":").length>=6,re=[y,b,I,G,Y].filter(Boolean).length===5;if(ue&&!re)throw new Error(`Invalid ARN: ${C} was an invalid ARN.`);return y==="arn"&&!!b&&!!I&&!!G&&!!Y},"isArnBucketName"),ze=s((C,y,b)=>{const I=function(){var z=(0,h.coroutine)(function*(){var G;const Y=(G=b[C])!==null&&G!==void 0?G:b[y];return typeof Y=="function"?Y():Y});return s(function(){return z.apply(this,arguments)},"configProvider")}();return C==="endpoint"||y==="endpoint"?(0,h.coroutine)(function*(){const z=yield I();if(z&&typeof z=="object"){if("url"in z)return z.url.href;if("hostname"in z){const{protocol:G,hostname:Y,port:ue,path:re}=z;return`${G}//${Y}${ue?":"+ue:""}${re}`}}return z}):I},"createConfigValueProvider"),nt=function(){var C=(0,h.coroutine)(function*(y,b,I,z){const G=yield mt(y,b,I);if(typeof I.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return I.endpointProvider(G,z)});return s(function(b,I,z,G){return C.apply(this,arguments)},"getEndpointFromInstructions")}(),mt=function(){var C=(0,h.coroutine)(function*(y,b,I){var z;const G={},Y=(b==null||(z=b.getEndpointParameterInstructions)===null||z===void 0?void 0:z.call(b))||{};for(const[ue,re]of Object.entries(Y))switch(re.type){case"staticContextParams":G[ue]=re.value;break;case"contextParams":G[ue]=y[re.name];break;case"clientContextParams":case"builtInParams":G[ue]=yield ze(re.name,ue,I)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(re))}return Object.keys(Y).length===0&&Object.assign(G,I),String(I.serviceId).toLowerCase()==="s3"&&(yield ee(G)),G});return s(function(b,I,z){return C.apply(this,arguments)},"resolveParams")}(),gt=s(C=>{let{config:y,instructions:b}=C;return(I,z)=>function(){var G=(0,h.coroutine)(function*(Y){var ue,re;const ye=yield nt(Y.input,{getEndpointParameterInstructions(){return b}},{...y},z);z.endpointV2=ye,z.authSchemes=(ue=ye.properties)===null||ue===void 0?void 0:ue.authSchemes;const le=(re=z.authSchemes)===null||re===void 0?void 0:re[0];return le&&(z.signing_region=le.signingRegion,z.signing_service=le.signingName),I({...Y})});return function(Y){return G.apply(this,arguments)}}()},"endpointMiddleware"),Pe=s((C,y)=>(b,I)=>function(){var z=(0,h.coroutine)(function*(G){const{response:Y}=yield b(G);try{const ue=yield y(Y,C);return{response:Y,output:ue}}catch(ue){if(Object.defineProperty(ue,"$response",{value:Y}),!("$metadata"in ue)){const re="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";ue.message+=`
  `+re}throw ue}});return function(G){return z.apply(this,arguments)}}(),"deserializerMiddleware"),xe=s((C,y)=>(b,I)=>function(){var z=(0,h.coroutine)(function*(G){var Y;const ue=!((Y=I.endpointV2)===null||Y===void 0)&&Y.url&&C.urlParser?(0,h.coroutine)(function*(){return C.urlParser(I.endpointV2.url)}):C.endpoint;if(!ue)throw new Error("No valid endpoint provider available.");const re=yield y(G.input,{...C,endpoint:ue});return b({...G,request:re})});return function(G){return z.apply(this,arguments)}}(),"serializerMiddleware"),Ye={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ze={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Re(C,y,b){return{applyToStack:I=>{I.add(Pe(C,b),Ye),I.add(xe(C,y),Ze)}}}s(Re,"getSerdePlugin");const Tt={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ze.name},rt=s((C,y)=>({applyToStack:b=>{b.addRelativeTo(gt({config:C,instructions:y}),Tt)}}),"getEndpointPlugin"),Nt=s(C=>{if(typeof C=="function")return C;const y=Promise.resolve(C);return()=>y},"normalizeProvider_normalizeProvider");function Wt(C){const y={};if(C=C.replace(/^\?/,""),C)for(const b of C.split("&")){let[I,z=null]=b.split("=");I=decodeURIComponent(I),z&&(z=decodeURIComponent(z)),I in y?Array.isArray(y[I])?y[I].push(z):y[I]=[y[I],z]:y[I]=z}return y}s(Wt,"parseQueryString");const Qt=s(C=>{if(typeof C=="string")return Qt(new URL(C));const{hostname:y,pathname:b,port:I,protocol:z,search:G}=C;let Y;return G&&(Y=Wt(G)),{hostname:y,port:I?parseInt(I):void 0,protocol:z,path:b,query:Y}},"parseUrl"),Ot=s(C=>typeof C=="object"?"url"in C?Qt(C.url):C:Qt(C),"toEndpointV1"),hn=s(C=>{var y;const b=(y=C.tls)!==null&&y!==void 0?y:!0,{endpoint:I}=C,z=I!=null?(0,h.coroutine)(function*(){return Ot(yield Nt(I)())}):void 0,G=!!I;var Y,ue;return{...C,endpoint:z,tls:b,isCustomEndpoint:G,useDualstackEndpoint:Nt((Y=C.useDualstackEndpoint)!==null&&Y!==void 0?Y:!1),useFipsEndpoint:Nt((ue=C.useFipsEndpoint)!==null&&ue!==void 0?ue:!1)}},"resolveEndpointConfig");function fi(C){return C}s(fi,"resolveHostHeaderConfig");const wn=s(C=>y=>function(){var b=(0,h.coroutine)(function*(I){if(!A.isInstance(I.request))return y(I);const{request:z}=I,{handlerProtocol:G=""}=C.requestHandler.metadata||{};if(G.indexOf("h2")>=0&&!z.headers[":authority"])delete z.headers.host,z.headers[":authority"]="";else if(!z.headers.host){let Y=z.hostname;z.port!=null&&(Y+=`:${z.port}`),z.headers.host=Y}return y(I)});return function(I){return b.apply(this,arguments)}}(),"hostHeaderMiddleware"),Jt={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},on=s(C=>({applyToStack:y=>{y.add(wn(C),Jt)}}),"getHostHeaderPlugin"),kt=s(()=>(C,y)=>function(){var b=(0,h.coroutine)(function*(I){try{var z;const Y=yield C(I),{clientName:ue,commandName:re,logger:ye,dynamoDbDocumentClientOptions:le={}}=y,{overrideInputFilterSensitiveLog:_t,overrideOutputFilterSensitiveLog:qt}=le,vn=_t??y.inputFilterSensitiveLog,yn=qt??y.outputFilterSensitiveLog,{$metadata:tn,...Pn}=Y.output;return ye==null||(z=ye.info)===null||z===void 0||z.call(ye,{clientName:ue,commandName:re,input:vn(I.input),output:yn(Pn),metadata:tn}),Y}catch(Y){var G;const{clientName:ue,commandName:re,logger:ye,dynamoDbDocumentClientOptions:le={}}=y,{overrideInputFilterSensitiveLog:_t}=le,qt=_t??y.inputFilterSensitiveLog;throw ye==null||(G=ye.error)===null||G===void 0||G.call(ye,{clientName:ue,commandName:re,input:qt(I.input),error:Y,metadata:Y.$metadata}),Y}});return function(I){return b.apply(this,arguments)}}(),"loggerMiddleware"),$t={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},en=s(C=>({applyToStack:y=>{y.add(kt(),$t)}}),"getLoggerPlugin"),zt="X-Amzn-Trace-Id",Kt="AWS_LAMBDA_FUNCTION_NAME",Q="_X_AMZN_TRACE_ID",Ve=s(C=>y=>function(){var b=(0,h.coroutine)(function*(I){const{request:z}=I;if(!A.isInstance(z)||C.runtime!=="node"||z.headers.hasOwnProperty(zt))return y(I);const G={NODE_ENV:"production"}[Kt],Y={NODE_ENV:"production"}[Q],ue=s(re=>typeof re=="string"&&re.length>0,"nonEmptyString");return ue(G)&&ue(Y)&&(z.headers[zt]=Y),y({...I,request:z})});return function(I){return b.apply(this,arguments)}}(),"recursionDetectionMiddleware"),Be={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Je=s(C=>({applyToStack:y=>{y.add(Ve(C),Be)}}),"getRecursionDetectionPlugin");var ut;(function(C){C.STANDARD="standard",C.ADAPTIVE="adaptive"})(ut||(ut={}));const ot=3,de=ut.STANDARD,Ue=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],K=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],q=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Ee=[500,502,503,504],be=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],it=s(C=>C.$retryable!==void 0,"isRetryableByTrait"),He=s(C=>Ue.includes(C.name),"isClockSkewError"),Qe=s(C=>{var y,b;return((y=C.$metadata)===null||y===void 0?void 0:y.httpStatusCode)===429||K.includes(C.name)||((b=C.$retryable)===null||b===void 0?void 0:b.throttling)==!0},"isThrottlingError"),Se=s(C=>{var y;return q.includes(C.name)||be.includes((C==null?void 0:C.code)||"")||Ee.includes(((y=C.$metadata)===null||y===void 0?void 0:y.httpStatusCode)||0)},"isTransientError"),Ae=s(C=>{var y;if(((y=C.$metadata)===null||y===void 0?void 0:y.httpStatusCode)!==void 0){const b=C.$metadata.httpStatusCode;return 500<=b&&b<=599&&!Se(C)}return!1},"isServerError");class L{getCurrentTimeInSeconds(){return Date.now()/1e3}getSendToken(){var y=this;return(0,h.coroutine)(function*(){return y.acquireTokenBucket(1)})()}acquireTokenBucket(y){var b=this;return(0,h.coroutine)(function*(){if(b.enabled){if(b.refillTokenBucket(),y>b.currentCapacity){const I=(y-b.currentCapacity)/b.fillRate*1e3;yield new Promise(z=>setTimeout(z,I))}b.currentCapacity=b.currentCapacity-y}})()}refillTokenBucket(){const y=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=y;return}const b=(y-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+b),this.lastTimestamp=y}updateClientSendingRate(y){let b;if(this.updateMeasuredRate(),Qe(y)){const z=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=z,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),b=this.cubicThrottle(z),this.enableTokenBucket()}else this.calculateTimeWindow(),b=this.cubicSuccess(this.getCurrentTimeInSeconds());const I=Math.min(b,2*this.measuredTxRate);this.updateTokenBucketRate(I)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(y){return this.getPrecise(y*this.beta)}cubicSuccess(y){return this.getPrecise(this.scaleConstant*Math.pow(y-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(y){this.refillTokenBucket(),this.fillRate=Math.max(y,this.minFillRate),this.maxCapacity=Math.max(y,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const y=this.getCurrentTimeInSeconds(),b=Math.floor(y*2)/2;if(this.requestCount++,b>this.lastTxRateBucket){const I=this.requestCount/(b-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(I*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=b}}getPrecise(y){return parseFloat(y.toFixed(8))}constructor(y){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0;var b;this.beta=(b=y==null?void 0:y.beta)!==null&&b!==void 0?b:.7;var I;this.minCapacity=(I=y==null?void 0:y.minCapacity)!==null&&I!==void 0?I:1;var z;this.minFillRate=(z=y==null?void 0:y.minFillRate)!==null&&z!==void 0?z:.5;var G;this.scaleConstant=(G=y==null?void 0:y.scaleConstant)!==null&&G!==void 0?G:.4;var Y;this.smooth=(Y=y==null?void 0:y.smooth)!==null&&Y!==void 0?Y:.8;const ue=this.getCurrentTimeInSeconds();this.lastThrottleTime=ue,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}}s(L,"DefaultRateLimiter");const ve=100,_e=20*1e3,Ie=500,ne=500,Ft=5,qe=10,ft=1,En="amz-sdk-invocation-id",xt="amz-sdk-request",Ui=s(()=>{let C=ve;return{computeNextBackoffDelay:s(I=>Math.floor(Math.min(_e,Math.random()*2**I*C)),"computeNextBackoffDelay"),setDelayBase:s(I=>{C=I},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),_i=s(C=>{let{retryDelay:y,retryCount:b,retryCost:I}=C;return{getRetryCount:s(()=>b,"getRetryCount"),getRetryDelay:s(()=>Math.min(_e,y),"getRetryDelay"),getRetryCost:s(()=>I,"getRetryCost")}},"createDefaultRetryToken");class bn{acquireInitialRetryToken(y){return(0,h.coroutine)(function*(){return _i({retryDelay:ve,retryCount:0})})()}refreshRetryTokenForRetry(y,b){var I=this;return(0,h.coroutine)(function*(){const z=yield I.getMaxAttempts();if(I.shouldRetry(y,b,z)){const G=b.errorType;I.retryBackoffStrategy.setDelayBase(G==="THROTTLING"?Ie:ve);const Y=I.retryBackoffStrategy.computeNextBackoffDelay(y.getRetryCount()),ue=b.retryAfterHint?Math.max(b.retryAfterHint.getTime()-Date.now()||0,Y):Y,re=I.getCapacityCost(G);return I.capacity-=re,_i({retryDelay:ue,retryCount:y.getRetryCount()+1,retryCost:re})}throw new Error("No retry token available")})()}recordSuccess(y){var b;this.capacity=Math.max(ne,this.capacity+((b=y.getRetryCost())!==null&&b!==void 0?b:ft))}getCapacity(){return this.capacity}getMaxAttempts(){var y=this;return(0,h.coroutine)(function*(){try{return yield y.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${ot}`),ot}})()}shouldRetry(y,b,I){return y.getRetryCount()<I&&this.capacity>=this.getCapacityCost(b.errorType)&&this.isRetryableError(b.errorType)}getCapacityCost(y){return y==="TRANSIENT"?qe:Ft}isRetryableError(y){return y==="THROTTLING"||y==="TRANSIENT"}constructor(y){this.maxAttempts=y,this.mode=ut.STANDARD,this.capacity=ne,this.retryBackoffStrategy=Ui(),this.maxAttemptsProvider=typeof y=="function"?y:(0,h.coroutine)(function*(){return y})}}s(bn,"StandardRetryStrategy");class zn{acquireInitialRetryToken(y){var b=this;return(0,h.coroutine)(function*(){return yield b.rateLimiter.getSendToken(),b.standardRetryStrategy.acquireInitialRetryToken(y)})()}refreshRetryTokenForRetry(y,b){var I=this;return(0,h.coroutine)(function*(){return I.rateLimiter.updateClientSendingRate(b),I.standardRetryStrategy.refreshRetryTokenForRetry(y,b)})()}recordSuccess(y){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(y)}constructor(y,b){this.maxAttemptsProvider=y,this.mode=ut.ADAPTIVE;const{rateLimiter:I}=b??{};this.rateLimiter=I??new L,this.standardRetryStrategy=new bn(y)}}s(zn,"AdaptiveRetryStrategy");class gn extends bn{refreshRetryTokenForRetry(y,b){var I=this,z=s(()=>super.refreshRetryTokenForRetry,"_superprop_get_refreshRetryTokenForRetry");return(0,h.coroutine)(function*(){const G=yield z().call(I,y,b);return G.getRetryDelay=()=>I.computeNextBackoffDelay(G.getRetryCount()),G})()}constructor(y,b=ve){super(typeof y=="function"?y:(0,h.coroutine)(function*(){return y})),typeof b=="number"?this.computeNextBackoffDelay=()=>b:this.computeNextBackoffDelay=b}}s(gn,"ConfiguredRetryStrategy");var gi,ai=new Uint8Array(16);function yr(){if(!gi&&(gi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!gi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gi(ai)}s(yr,"rng");const Bt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Et(C){return typeof C=="string"&&Bt.test(C)}s(Et,"validate");const On=Et;for(var nn=[],Bn=0;Bn<256;++Bn)nn.push((Bn+256).toString(16).substr(1));function li(C){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=(nn[C[y+0]]+nn[C[y+1]]+nn[C[y+2]]+nn[C[y+3]]+"-"+nn[C[y+4]]+nn[C[y+5]]+"-"+nn[C[y+6]]+nn[C[y+7]]+"-"+nn[C[y+8]]+nn[C[y+9]]+"-"+nn[C[y+10]]+nn[C[y+11]]+nn[C[y+12]]+nn[C[y+13]]+nn[C[y+14]]+nn[C[y+15]]).toLowerCase();if(!On(b))throw TypeError("Stringified UUID is invalid");return b}s(li,"stringify");const ui=li;function Gn(C,y,b){C=C||{};var I=C.random||(C.rng||yr)();if(I[6]=I[6]&15|64,I[8]=I[8]&63|128,y){b=b||0;for(var z=0;z<16;++z)y[b+z]=I[z];return y}return ui(I)}s(Gn,"v4");const Yn=Gn,Ci=s((C,y)=>{const b=C;var I;const z=(I=y==null?void 0:y.noRetryIncrement)!==null&&I!==void 0?I:ft;var G;const Y=(G=y==null?void 0:y.retryCost)!==null&&G!==void 0?G:Ft;var ue;const re=(ue=y==null?void 0:y.timeoutRetryCost)!==null&&ue!==void 0?ue:qe;let ye=C;const le=s(yn=>yn.name==="TimeoutError"?re:Y,"getCapacityAmount"),_t=s(yn=>le(yn)<=ye,"hasRetryTokens");return Object.freeze({hasRetryTokens:_t,retrieveRetryTokens:s(yn=>{if(!_t(yn))throw new Error("No retry token available");const tn=le(yn);return ye-=tn,tn},"retrieveRetryTokens"),releaseRetryTokens:s(yn=>{ye+=yn??z,ye=Math.min(ye,b)},"releaseRetryTokens")})},"getDefaultRetryQuota"),Ti=s((C,y)=>Math.floor(Math.min(_e,Math.random()*2**y*C)),"defaultDelayDecider"),Un=s(C=>C?it(C)||He(C)||Qe(C)||Se(C):!1,"defaultRetryDecider"),U=s(C=>C instanceof Error?C:C instanceof Object?Object.assign(new Error,C):typeof C=="string"?new Error(C):new Error(`AWS SDK error wrapper for ${C}`),"asSdkError");class ce{shouldRetry(y,b,I){return b<I&&this.retryDecider(y)&&this.retryQuota.hasRetryTokens(y)}getMaxAttempts(){var y=this;return(0,h.coroutine)(function*(){let b;try{b=yield y.maxAttemptsProvider()}catch{b=ot}return b})()}retry(y,b,I){var z=this;return(0,h.coroutine)(function*(){let G,Y=0,ue=0;const re=yield z.getMaxAttempts(),{request:ye}=b;for(A.isInstance(ye)&&(ye.headers[En]=Yn());;)try{A.isInstance(ye)&&(ye.headers[xt]=`attempt=${Y+1}; max=${re}`),I!=null&&I.beforeRequest&&(yield I.beforeRequest());const{response:le,output:_t}=yield y(b);return I!=null&&I.afterRequest&&I.afterRequest(le),z.retryQuota.releaseRetryTokens(G),_t.$metadata.attempts=Y+1,_t.$metadata.totalRetryDelay=ue,{response:le,output:_t}}catch(le){const _t=U(le);if(Y++,z.shouldRetry(_t,Y,re)){G=z.retryQuota.retrieveRetryTokens(_t);const qt=z.delayDecider(Qe(_t)?Ie:ve,Y),vn=Fe(_t.$response),yn=Math.max(vn||0,qt);ue+=yn,yield new Promise(tn=>setTimeout(tn,yn));continue}throw _t.$metadata||(_t.$metadata={}),_t.$metadata.attempts=Y,_t.$metadata.totalRetryDelay=ue,_t}})()}constructor(y,b){this.maxAttemptsProvider=y,this.mode=ut.STANDARD;var I;this.retryDecider=(I=b==null?void 0:b.retryDecider)!==null&&I!==void 0?I:Un;var z;this.delayDecider=(z=b==null?void 0:b.delayDecider)!==null&&z!==void 0?z:Ti;var G;this.retryQuota=(G=b==null?void 0:b.retryQuota)!==null&&G!==void 0?G:Ci(ne)}}s(ce,"StandardRetryStrategy_StandardRetryStrategy");const Fe=s(C=>{if(!D.isInstance(C))return;const y=Object.keys(C.headers).find(G=>G.toLowerCase()==="retry-after");if(!y)return;const b=C.headers[y],I=Number(b);return Number.isNaN(I)?new Date(b).getTime()-Date.now():I*1e3},"getDelayFromRetryAfterHeader");class Ke extends ce{retry(y,b){var I=this,z=s(()=>super.retry,"_superprop_get_retry");return(0,h.coroutine)(function*(){return z().call(I,y,b,{beforeRequest:(0,h.coroutine)(function*(){return I.rateLimiter.getSendToken()}),afterRequest:G=>{I.rateLimiter.updateClientSendingRate(G)}})})()}constructor(y,b){const{rateLimiter:I,...z}=b??{};super(y,z),this.rateLimiter=I??new L,this.mode=ut.ADAPTIVE}}s(Ke,"AdaptiveRetryStrategy_AdaptiveRetryStrategy");const st="AWS_MAX_ATTEMPTS",Dt="max_attempts",Vt={environmentVariableSelector:C=>{const y=C[st];if(!y)return;const b=parseInt(y);if(Number.isNaN(b))throw new Error(`Environment variable ${st} mast be a number, got "${y}"`);return b},configFileSelector:C=>{const y=C[Dt];if(!y)return;const b=parseInt(y);if(Number.isNaN(b))throw new Error(`Shared config file entry ${Dt} mast be a number, got "${y}"`);return b},default:ot},Yt=s(C=>{const{retryStrategy:y}=C;var b;const I=Nt((b=C.maxAttempts)!==null&&b!==void 0?b:ot);return{...C,maxAttempts:I,retryStrategy:(0,h.coroutine)(function*(){return y||((yield Nt(C.retryMode)())===ut.ADAPTIVE?new zn(I):new bn(I))})}},"resolveRetryConfig"),pn="AWS_RETRY_MODE",dn="retry_mode",An={environmentVariableSelector:C=>C[pn],configFileSelector:C=>C[dn],default:de},ci=s(()=>C=>function(){var y=_bluebirdCoroutine(function*(b){const{request:I}=b;return HttpRequest.isInstance(I)&&(delete I.headers[INVOCATION_ID_HEADER],delete I.headers[REQUEST_HEADER]),C(b)});return function(b){return y.apply(this,arguments)}}(),"omitRetryHeadersMiddleware"),ri={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},Vi=s(C=>({applyToStack:y=>{y.addRelativeTo(ci(),ri)}}),"getOmitRetryHeadersPlugin"),Zi=s(C=>(y,b)=>function(){var I=(0,h.coroutine)(function*(z){let G=yield C.retryStrategy();const Y=yield C.maxAttempts();if(pr(G)){G=G;let ue=yield G.acquireInitialRetryToken(b.partition_id),re=new Error,ye=0,le=0;const{request:_t}=z;for(A.isInstance(_t)&&(_t.headers[En]=Yn());;)try{A.isInstance(_t)&&(_t.headers[xt]=`attempt=${ye+1}; max=${Y}`);const{response:qt,output:vn}=yield y(z);return G.recordSuccess(ue),vn.$metadata.attempts=ye+1,vn.$metadata.totalRetryDelay=le,{response:qt,output:vn}}catch(qt){const vn=Or(qt);re=U(qt);try{ue=yield G.refreshRetryTokenForRetry(ue,vn)}catch{throw re.$metadata||(re.$metadata={}),re.$metadata.attempts=ye+1,re.$metadata.totalRetryDelay=le,re}ye=ue.getRetryCount();const yn=ue.getRetryDelay();le+=yn,yield new Promise(tn=>setTimeout(tn,yn))}}else return G=G,G!=null&&G.mode&&(b.userAgent=[...b.userAgent||[],["cfg/retry-mode",G.mode]]),G.retry(y,z)});return function(z){return I.apply(this,arguments)}}(),"retryMiddleware"),pr=s(C=>typeof C.acquireInitialRetryToken<"u"&&typeof C.refreshRetryTokenForRetry<"u"&&typeof C.recordSuccess<"u","isRetryStrategyV2"),Or=s(C=>{const y={errorType:Ar(C)},b=kn(C.$response);return b&&(y.retryAfterHint=b),y},"getRetryErrorInfo"),Ar=s(C=>Qe(C)?"THROTTLING":Se(C)?"TRANSIENT":Ae(C)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),Xr={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},tr=s(C=>({applyToStack:y=>{y.add(Zi(C),Xr)}}),"getRetryPlugin"),kn=s(C=>{if(!D.isInstance(C))return;const y=Object.keys(C.headers).find(G=>G.toLowerCase()==="retry-after");if(!y)return;const b=C.headers[y],I=Number(b);return Number.isNaN(I)?new Date(b):new Date(I*1e3)},"getRetryAfterHint");class Mi extends Error{static from(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Object.assign(new this(y.message,b),y)}constructor(y,b=!0){super(y),this.tryNextLink=b,this.name="ProviderError",Object.setPrototypeOf(this,Mi.prototype)}}s(Mi,"ProviderError_ProviderError");class Hi extends Mi{constructor(y,b=!0){super(y,b),this.tryNextLink=b,this.name="CredentialsProviderError",Object.setPrototypeOf(this,Hi.prototype)}}s(Hi,"CredentialsProviderError");class $i extends Mi{constructor(y,b=!0){super(y,b),this.tryNextLink=b,this.name="TokenProviderError",Object.setPrototypeOf(this,$i.prototype)}}s($i,"TokenProviderError");function qi(){for(var C=arguments.length,y=new Array(C),b=0;b<C;b++)y[b]=arguments[b];return()=>{let I=Promise.reject(new ProviderError("No providers in chain"));for(const z of y)I=I.catch(G=>{if(G!=null&&G.tryNextLink)return z();throw G});return I}}s(qi,"chain");const Er=s((C,y,b)=>{let I,z,G,Y=!1;const ue=function(){var re=(0,h.coroutine)(function*(){z||(z=C());try{I=yield z,G=!0,Y=!1}finally{z=void 0}return I});return s(function(){return re.apply(this,arguments)},"coalesceProvider")}();return y===void 0?function(){var re=(0,h.coroutine)(function*(ye){return(!G||ye!=null&&ye.forceRefresh)&&(I=yield ue()),I});return function(ye){return re.apply(this,arguments)}}():function(){var re=(0,h.coroutine)(function*(ye){return(!G||ye!=null&&ye.forceRefresh)&&(I=yield ue()),Y?I:b&&!b(I)?(Y=!0,I):(y(I)&&(yield ue()),I)});return function(ye){return re.apply(this,arguments)}}()},"memoize"),Wr={},hi={};for(let C=0;C<256;C++){let y=C.toString(16).toLowerCase();y.length===1&&(y=`0${y}`),Wr[C]=y,hi[y]=C}function Ki(C){if(C.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const y=new Uint8Array(C.length/2);for(let b=0;b<C.length;b+=2){const I=C.slice(b,b+2).toLowerCase();if(I in hi)y[b/2]=hi[I];else throw new Error(`Cannot decode unrecognized sequence ${I} as hexadecimal`)}return y}s(Ki,"fromHex");function ur(C){let y="";for(let b=0;b<C.byteLength;b++)y+=Wr[C[b]];return y}s(ur,"toHex");const pe=s(C=>new TextEncoder().encode(C),"fromUtf8"),Ce=s(C=>typeof C=="string"?pe(C):ArrayBuffer.isView(C)?new Uint8Array(C.buffer,C.byteOffset,C.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(C),"toUint8Array"),Le="X-Amz-Algorithm",tt="X-Amz-Credential",ct="X-Amz-Date",pt="X-Amz-SignedHeaders",Zt="X-Amz-Expires",an="X-Amz-Signature",ln="X-Amz-Security-Token",Gt="X-Amz-Region-Set",Fn="authorization",bt=ct.toLowerCase(),mn=[Fn,bt,"date"],yi=an.toLowerCase(),zi="x-amz-content-sha256",Ri=ln.toLowerCase(),Sn="host",Tn={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Kn=/^proxy-/,Si=/^sec-/,lr=null,mr="AWS4-HMAC-SHA256",jn="AWS4-ECDSA-P256-SHA256",Lr="AWS4-HMAC-SHA256-PAYLOAD",Ii="UNSIGNED-PAYLOAD",gr=50,lo="aws4_request",bo=60*60*24*7,Zr={},co=[],oo=s((C,y,b)=>`${C}/${y}/${b}/${lo}`,"createScope"),So=function(){var C=(0,h.coroutine)(function*(y,b,I,z,G){const Y=yield zr(y,b.secretAccessKey,b.accessKeyId),ue=`${I}:${z}:${G}:${ur(Y)}:${b.sessionToken}`;if(ue in Zr)return Zr[ue];for(co.push(ue);co.length>gr;)delete Zr[co.shift()];let re=`AWS4${b.secretAccessKey}`;for(const ye of[I,z,G,lo])re=yield zr(y,re,ye);return Zr[ue]=re});return s(function(b,I,z,G,Y){return C.apply(this,arguments)},"getSigningKey")}(),br=s(()=>{co.length=0,Object.keys(Zr).forEach(C=>{delete Zr[C]})},"clearCredentialCache"),zr=s((C,y,b)=>{const I=new C(y);return I.update(Ce(b)),I.digest()},"hmac"),uo=s((C,y,b)=>{let{headers:I}=C;const z={};for(const G of Object.keys(I).sort()){if(I[G]==null)continue;const Y=G.toLowerCase();(Y in Tn||y!=null&&y.has(Y)||Kn.test(Y)||Si.test(Y))&&(!b||b&&!b.has(Y))||(z[Y]=I[G].trim().replace(/\s+/g," "))}return z},"getCanonicalHeaders"),Xi=s(C=>encodeURIComponent(C).replace(/[!'()*]/g,xr),"escapeUri"),xr=s(C=>`%${C.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),vo=s(C=>{let{query:y={}}=C;const b=[],I={};for(const z of Object.keys(y).sort()){if(z.toLowerCase()===yi)continue;b.push(z);const G=y[z];typeof G=="string"?I[z]=`${Xi(z)}=${Xi(G)}`:Array.isArray(G)&&(I[z]=G.slice(0).sort().reduce((Y,ue)=>Y.concat([`${Xi(z)}=${Xi(ue)}`]),[]).join("&"))}return b.map(z=>I[z]).filter(z=>z).join("&")},"getCanonicalQuery"),qr=s(C=>typeof ArrayBuffer=="function"&&C instanceof ArrayBuffer||Object.prototype.toString.call(C)==="[object ArrayBuffer]","isArrayBuffer"),_o=function(){var C=(0,h.coroutine)(function*(y,b){let{headers:I,body:z}=y;for(const G of Object.keys(I))if(G.toLowerCase()===zi)return I[G];if(z==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof z=="string"||ArrayBuffer.isView(z)||qr(z)){const G=new b;return G.update(Ce(z)),ur(yield G.digest())}return Ii});return s(function(b,I){return C.apply(this,arguments)},"getPayloadHash")}(),Bo=s((C,y)=>{C=C.toLowerCase();for(const b of Object.keys(y))if(C===b.toLowerCase())return!0;return!1},"hasHeader"),Xo=s((C,y)=>{C=C.toLowerCase();for(const b of Object.keys(y))if(C===b.toLowerCase())return y[b]},"getHeaderValue"),Fo=s((C,y)=>{C=C.toLowerCase();for(const b of Object.keys(y))C===b.toLowerCase()&&delete y[b]},"deleteHeader"),Ji=s(C=>{let{headers:y,query:b,...I}=C;return{...I,headers:{...y},query:b?fr(b):void 0}},"cloneRequest"),fr=s(C=>Object.keys(C).reduce((y,b)=>{const I=C[b];return{...y,[b]:Array.isArray(I)?[...I]:I}},{}),"cloneRequest_cloneQuery"),Sr=s(function(C){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{headers:b,query:I={}}=typeof C.clone=="function"?C.clone():Ji(C);for(const G of Object.keys(b)){var z;const Y=G.toLowerCase();Y.slice(0,6)==="x-amz-"&&!(!((z=y.unhoistableHeaders)===null||z===void 0)&&z.has(Y))&&(I[G]=b[G],delete b[G])}return{...C,headers:b,query:I}},"moveHeadersToQuery"),vr=s(C=>{C=typeof C.clone=="function"?C.clone():Ji(C);for(const y of Object.keys(C.headers))mn.indexOf(y.toLowerCase())>-1&&delete C.headers[y];return C},"prepareRequest"),_r=s(C=>Mo(C).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),Mo=s(C=>typeof C=="number"?new Date(C*1e3):typeof C=="string"?Number(C)?new Date(Number(C)*1e3):new Date(C):C,"toDate");class no{presign(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var I=this;return(0,h.coroutine)(function*(){const{signingDate:z=new Date,expiresIn:G=3600,unsignableHeaders:Y,unhoistableHeaders:ue,signableHeaders:re,signingRegion:ye,signingService:le}=b,_t=yield I.credentialProvider();I.validateResolvedCredentials(_t);const qt=ye??(yield I.regionProvider()),{longDate:vn,shortDate:yn}=Mr(z);if(G>bo)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const tn=oo(yn,qt,le??I.service),Pn=Sr(vr(y),{unhoistableHeaders:ue});_t.sessionToken&&(Pn.query[ln]=_t.sessionToken),Pn.query[Le]=mr,Pn.query[tt]=`${_t.accessKeyId}/${tn}`,Pn.query[ct]=vn,Pn.query[Zt]=G.toString(10);const Nr=uo(Pn,Y,re);return Pn.query[pt]=Ro(Nr),Pn.query[an]=yield I.getSignature(vn,tn,I.getSigningKey(_t,qt,yn,le),I.createCanonicalRequest(Pn,Nr,yield _o(y,I.sha256))),Pn})()}sign(y,b){var I=this;return(0,h.coroutine)(function*(){return typeof y=="string"?I.signString(y,b):y.headers&&y.payload?I.signEvent(y,b):I.signRequest(y,b)})()}signEvent(y,b){let{headers:I,payload:z}=y,{signingDate:G=new Date,priorSignature:Y,signingRegion:ue,signingService:re}=b;var ye=this;return(0,h.coroutine)(function*(){const le=ue??(yield ye.regionProvider()),{shortDate:_t,longDate:qt}=Mr(G),vn=oo(_t,le,re??ye.service),yn=yield _o({headers:{},body:z},ye.sha256),tn=new ye.sha256;tn.update(I);const Pn=ur(yield tn.digest()),Nr=[Lr,qt,vn,Y,Pn,yn].join(`
`);return ye.signString(Nr,{signingDate:G,signingRegion:le,signingService:re})})()}signString(y){let{signingDate:b=new Date,signingRegion:I,signingService:z}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var G=this;return(0,h.coroutine)(function*(){const Y=yield G.credentialProvider();G.validateResolvedCredentials(Y);const ue=I??(yield G.regionProvider()),{shortDate:re}=Mr(b),ye=new G.sha256(yield G.getSigningKey(Y,ue,re,z));return ye.update(Ce(y)),ur(yield ye.digest())})()}signRequest(y){let{signingDate:b=new Date,signableHeaders:I,unsignableHeaders:z,signingRegion:G,signingService:Y}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var ue=this;return(0,h.coroutine)(function*(){const re=yield ue.credentialProvider();ue.validateResolvedCredentials(re);const ye=G??(yield ue.regionProvider()),le=vr(y),{longDate:_t,shortDate:qt}=Mr(b),vn=oo(qt,ye,Y??ue.service);le.headers[bt]=_t,re.sessionToken&&(le.headers[Ri]=re.sessionToken);const yn=yield _o(le,ue.sha256);!Bo(zi,le.headers)&&ue.applyChecksum&&(le.headers[zi]=yn);const tn=uo(le,z,I),Pn=yield ue.getSignature(_t,vn,ue.getSigningKey(re,ye,qt,Y),ue.createCanonicalRequest(le,tn,yn));return le.headers[Fn]=`${mr} Credential=${re.accessKeyId}/${vn}, SignedHeaders=${Ro(tn)}, Signature=${Pn}`,le})()}createCanonicalRequest(y,b,I){const z=Object.keys(b).sort();return`${y.method}
${this.getCanonicalPath(y)}
${vo(y)}
${z.map(G=>`${G}:${b[G]}`).join(`
`)}

${z.join(";")}
${I}`}createStringToSign(y,b,I){var z=this;return(0,h.coroutine)(function*(){const G=new z.sha256;G.update(Ce(I));const Y=yield G.digest();return`${mr}
${y}
${b}
${ur(Y)}`})()}getCanonicalPath(y){let{path:b}=y;if(this.uriEscapePath){const I=[];for(const Y of b.split("/"))(Y==null?void 0:Y.length)!==0&&Y!=="."&&(Y===".."?I.pop():I.push(Y));const z=`${b!=null&&b.startsWith("/")?"/":""}${I.join("/")}${I.length>0&&(b!=null&&b.endsWith("/"))?"/":""}`;return encodeURIComponent(z).replace(/%2F/g,"/")}return b}getSignature(y,b,I,z){var G=this;return(0,h.coroutine)(function*(){const Y=yield G.createStringToSign(y,b,z),ue=new G.sha256(yield I);return ue.update(Ce(Y)),ur(yield ue.digest())})()}getSigningKey(y,b,I,z){return So(this.sha256,y,I,b,z||this.service)}validateResolvedCredentials(y){if(typeof y!="object"||typeof y.accessKeyId!="string"||typeof y.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}constructor({applyChecksum:y,credentials:b,region:I,service:z,sha256:G,uriEscapePath:Y=!0}){this.service=z,this.sha256=G,this.uriEscapePath=Y,this.applyChecksum=typeof y=="boolean"?y:!0,this.regionProvider=Nt(I),this.credentialProvider=Nt(b)}}s(no,"SignatureV4_SignatureV4");const Mr=s(C=>{const y=_r(C).replace(/[\-:]/g,"");return{longDate:y,shortDate:y.slice(0,8)}},"formatDate"),Ro=s(C=>Object.keys(C).sort().join(";"),"getCanonicalHeaderList"),Os=3e5,As=s(C=>{const y=C.credentials?Qo(C.credentials):C.credentialDefaultProvider(C),{signingEscapePath:b=!0,systemClockOffset:I=C.systemClockOffset||0,sha256:z}=C;let G;return C.signer?G=Nt(C.signer):C.regionInfoProvider?G=s(()=>Nt(C.region)().then(function(){var Y=(0,h.coroutine)(function*(ue){return[(yield C.regionInfoProvider(ue,{useFipsEndpoint:yield C.useFipsEndpoint(),useDualstackEndpoint:yield C.useDualstackEndpoint()}))||{},ue]});return function(ue){return Y.apply(this,arguments)}}()).then(Y=>{let[ue,re]=Y;const{signingRegion:ye,signingService:le}=ue;C.signingRegion=C.signingRegion||ye||re,C.signingName=C.signingName||le||C.serviceId;const _t={...C,credentials:y,region:C.signingRegion,service:C.signingName,sha256:z,uriEscapePath:b},qt=C.signerConstructor||no;return new qt(_t)}),"signer"):G=function(){var Y=(0,h.coroutine)(function*(ue){ue=Object.assign({},{name:"sigv4",signingName:C.signingName||C.defaultSigningName,signingRegion:yield Nt(C.region)(),properties:{}},ue);const re=ue.signingRegion,ye=ue.signingName;C.signingRegion=C.signingRegion||re,C.signingName=C.signingName||ye||C.serviceId;const le={...C,credentials:y,region:C.signingRegion,service:C.signingName,sha256:z,uriEscapePath:b},_t=C.signerConstructor||no;return new _t(le)});return function(ue){return Y.apply(this,arguments)}}(),{...C,systemClockOffset:I,signingEscapePath:b,credentials:y,signer:G}},"resolveAwsAuthConfig"),ia=s(C=>{const y=C.credentials?Qo(C.credentials):C.credentialDefaultProvider(C),{signingEscapePath:b=!0,systemClockOffset:I=C.systemClockOffset||0,sha256:z}=C;let G;return C.signer?G=normalizeProvider(C.signer):G=normalizeProvider(new SignatureV4({credentials:y,region:C.region,service:C.signingName,sha256:z,uriEscapePath:b})),{...C,systemClockOffset:I,signingEscapePath:b,credentials:y,signer:G}},"resolveSigV4AuthConfig"),Qo=s(C=>typeof C=="function"?Er(C,y=>y.expiration!==void 0&&y.expiration.getTime()-Date.now()<Os,y=>y.expiration!==void 0):Nt(C),"normalizeCredentialProvider"),cs=s(C=>new Date(Date.now()+C),"getSkewCorrectedDate"),Ms=s((C,y)=>Math.abs(cs(y).getTime()-C)>=3e5,"isClockSkewed"),ds=s((C,y)=>{const b=Date.parse(C);return Ms(b,y)?b-Date.now():y},"getUpdatedSystemClockOffset"),Rs=s(C=>(y,b)=>function(){var I=(0,h.coroutine)(function*(z){var G,Y,ue,re;if(!A.isInstance(z.request))return y(z);const ye=(G=b.endpointV2)===null||G===void 0||(Y=G.properties)===null||Y===void 0||(ue=Y.authSchemes)===null||ue===void 0?void 0:ue[0],le=(ye==null?void 0:ye.name)==="sigv4a"?ye==null||(re=ye.signingRegionSet)===null||re===void 0?void 0:re.join(","):void 0,_t=yield C.signer(ye),qt=yield y({...z,request:yield _t.sign(z.request,{signingDate:cs(C.systemClockOffset),signingRegion:le||b.signing_region,signingService:b.signing_service})}).catch(yn=>{var tn;const Pn=(tn=yn.ServerTime)!==null&&tn!==void 0?tn:us(yn.$response);throw Pn&&(C.systemClockOffset=ds(Pn,C.systemClockOffset)),yn}),vn=us(qt.response);return vn&&(C.systemClockOffset=ds(vn,C.systemClockOffset)),qt});return function(z){return I.apply(this,arguments)}}(),"awsAuthMiddleware");var Zo;const us=s(C=>{var y,b;return D.isInstance(C)?(Zo=(y=C.headers)===null||y===void 0?void 0:y.date)!==null&&Zo!==void 0?Zo:(b=C.headers)===null||b===void 0?void 0:b.Date:void 0},"getDateHeader"),fs={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Ps=s(C=>({applyToStack:y=>{y.addRelativeTo(Rs(C),fs)}}),"getAwsAuthPlugin"),ra=null;function To(C){return{...C,customUserAgent:typeof C.customUserAgent=="string"?[[C.customUserAgent]]:C.customUserAgent}}s(To,"resolveUserAgentConfig");var ks=c(1209174152),hs=c.n(ks);let ps=hs(),ms="";const Ds=s(C=>{const{partitions:y}=ps;for(const I of y){const{regions:z,outputs:G}=I;for(const[Y,ue]of Object.entries(z))if(Y===C)return{...G,...ue}}for(const I of y){const{regionRegex:z,outputs:G}=I;if(new RegExp(z).test(C))return{...G}}const b=y.find(I=>I.id==="aws");if(!b)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...b.outputs}},"partition"),ki=s(function(C){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";ps=C,ms=y},"setPartitionInfo"),Ns=s(()=>{ki(hs(),"")},"useDefaultPartitionInfo"),gs=s(()=>ms,"getUserAgentPrefix"),Qi="endpoints";function Gr(C){return typeof C!="object"||C==null?C:"ref"in C?`$${Gr(C.ref)}`:"fn"in C?`${C.fn}(${(C.argv||[]).map(Gr).join(", ")})`:JSON.stringify(C,null,2)}s(Gr,"toDebugString");class Rr extends Error{constructor(y){super(y),this.name="EndpointError"}}s(Rr,"EndpointError");const Uo=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),io=s(C=>Uo.test(C)||C.startsWith("[")&&C.endsWith("]"),"isIpAddress"),ec=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),oa=s(function(C){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return ec.test(C);const b=C.split(".");for(const I of b)if(!oa(I))return!1;return!0},"isValidHostLabel"),Na=s(function(C){if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){for(const b of C.split("."))if(!Na(b))return!1;return!0}return!(!oa(C)||C.length<3||C.length>63||C!==C.toLowerCase()||io(C))},"isVirtualHostableS3Bucket"),Gc=s(C=>{const y=C.split(":");if(y.length<6)return null;const[b,I,z,G,Y,...ue]=y;return b!=="arn"||I===""||z===""||ue[0]===""?null:{partition:I,service:z,region:G,accountId:Y,resourceId:ue[0].includes("/")?ue[0].split("/"):ue}},"parseArn"),jc=s((C,y)=>C===y,"booleanEquals"),$c=s(C=>{const y=C.split("."),b=[];for(const I of y){const z=I.indexOf("[");if(z!==-1){if(I.indexOf("]")!==I.length-1)throw new Rr(`Path: '${C}' does not end with ']'`);const G=I.slice(z+1,-1);if(Number.isNaN(parseInt(G)))throw new Rr(`Invalid array index: '${G}' in path: '${C}'`);z!==0&&b.push(I.slice(0,z)),b.push(G)}else b.push(I)}return b},"getAttrPathList"),sa=s((C,y)=>$c(y).reduce((b,I)=>{if(typeof b!="object")throw new Rr(`Index '${I}' in '${y}' not found in '${JSON.stringify(C)}'`);return Array.isArray(b)?b[parseInt(I)]:b[I]},C),"getAttr"),Kc=s(C=>C!=null,"isSet"),Jc=s(C=>!C,"not");var La;(function(C){C.HEADER="header",C.QUERY="query"})(La||(La={}));var xa;(function(C){C.AAAA="AAAA",C.A="A"})(xa||(xa={}));var qo;(function(C){C.HTTP="http",C.HTTPS="https"})(qo||(qo={}));var tc;(function(C){C.HTTP_0_9="http/0.9",C.HTTP_1_0="http/1.0",C.TDS_8_0="tds/8.0"})(tc||(tc={}));const aa={[qo.HTTP]:80,[qo.HTTPS]:443},Yc=s(C=>{const y=(()=>{try{if(C instanceof URL)return C;if(typeof C=="object"&&"hostname"in C){const{hostname:qt,port:vn,protocol:yn="",path:tn="",query:Pn={}}=C,Nr=new URL(`${yn}//${qt}${vn?`:${vn}`:""}${tn}`);return Nr.search=Object.entries(Pn).map(Bd=>{let[Ko,Rc]=Bd;return`${Ko}=${Rc}`}).join("&"),Nr}return new URL(C)}catch{return null}})();if(!y)return console.error(`Unable to parse ${JSON.stringify(C)} as a whatwg URL.`),null;const b=y.href,{host:I,hostname:z,pathname:G,protocol:Y,search:ue}=y;if(ue)return null;const re=Y.slice(0,-1);if(!Object.values(qo).includes(re))return null;const ye=io(z),le=b.includes(`${I}:${aa[re]}`)||typeof C=="string"&&C.includes(`${I}:${aa[re]}`),_t=`${I}${le?`:${aa[re]}`:""}`;return{scheme:re,authority:_t,path:G,normalizedPath:G.endsWith("/")?G:`${G}/`,isIp:ye}},"parseURL"),Ba=s((C,y)=>C===y,"stringEquals"),nc=s((C,y,b,I)=>y>=b||C.length<b?null:I?C.substring(C.length-b,C.length-y):C.substring(y,b),"substring"),ic=s(C=>encodeURIComponent(C).replace(/[!*'()]/g,y=>`%${y.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),la=s((C,y)=>{const b=[],I={...y.endpointParams,...y.referenceRecord};let z=0;for(;z<C.length;){const G=C.indexOf("{",z);if(G===-1){b.push(C.slice(z));break}b.push(C.slice(z,G));const Y=C.indexOf("}",G);if(Y===-1){b.push(C.slice(G));break}C[G+1]==="{"&&C[Y+1]==="}"&&(b.push(C.slice(G+1,Y)),z=Y+2);const ue=C.substring(G+1,Y);if(ue.includes("#")){const[re,ye]=ue.split("#");b.push(sa(I[re],ye))}else b.push(I[ue]);z=Y+1}return b.join("")},"evaluateTemplate"),Xc=s((C,y)=>{let{ref:b}=C;return{...y.endpointParams,...y.referenceRecord}[b]},"getReferenceValue"),Ss=s((C,y,b)=>{if(typeof C=="string")return la(C,b);if(C.fn)return rc(C,b);if(C.ref)return Xc(C,b);throw new Rr(`'${y}': ${String(C)} is not a string, function or reference.`)},"evaluateExpression"),rc=s((C,y)=>{let{fn:b,argv:I}=C;const z=I.map(G=>["boolean","number"].includes(typeof G)?G:Ss(G,"arg",y));return b.split(".").reduce((G,Y)=>G[Y],p)(...z)},"callFunction"),oc=s((C,y)=>{let{assign:b,...I}=C;var z,G;if(b&&b in y.referenceRecord)throw new Rr(`'${b}' is already defined in Reference Record.`);const Y=rc(I,y);return(z=y.logger)===null||z===void 0||(G=z.debug)===null||G===void 0||G.call(z,Qi,`evaluateCondition: ${Gr(I)} = ${Gr(Y)}`),{result:Y===""?!0:!!Y,...b!=null&&{toAssign:{name:b,value:Y}}}},"evaluateCondition"),ca=s(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=arguments.length>1?arguments[1]:void 0;const b={};for(const G of C){const{result:Y,toAssign:ue}=oc(G,{...y,referenceRecord:{...y.referenceRecord,...b}});if(!Y)return{result:Y};if(ue){var I,z;b[ue.name]=ue.value,(I=y.logger)===null||I===void 0||(z=I.debug)===null||z===void 0||z.call(I,Qi,`assign: ${ue.name} := ${Gr(ue.value)}`)}}return{result:!0,referenceRecord:b}},"evaluateConditions"),Qc=s((C,y)=>Object.entries(C).reduce((b,I)=>{let[z,G]=I;return{...b,[z]:G.map(Y=>{const ue=Ss(Y,"Header value entry",y);if(typeof ue!="string")throw new Rr(`Header '${z}' value '${ue}' is not a string`);return ue})}},{}),"getEndpointHeaders"),da=s((C,y)=>{if(Array.isArray(C))return C.map(b=>da(b,y));switch(typeof C){case"string":return la(C,y);case"object":if(C===null)throw new Rr(`Unexpected endpoint property: ${C}`);return ua(C,y);case"boolean":return C;default:throw new Rr(`Unexpected endpoint property type: ${typeof C}`)}},"getEndpointProperty"),ua=s((C,y)=>Object.entries(C).reduce((b,I)=>{let[z,G]=I;return{...b,[z]:da(G,y)}},{}),"getEndpointProperties"),Zc=s((C,y)=>{const b=Ss(C,"Endpoint URL",y);if(typeof b=="string")try{return new URL(b)}catch(I){throw console.error(`Failed to construct URL with ${b}`,I),I}throw new Rr(`Endpoint URL must be a string, got ${typeof b}`)},"getEndpointUrl"),sc=s((C,y)=>{var b,I;const{conditions:z,endpoint:G}=C,{result:Y,referenceRecord:ue}=ca(z,y);if(!Y)return;const re={...y,referenceRecord:{...y.referenceRecord,...ue}},{url:ye,properties:le,headers:_t}=G;return(b=y.logger)===null||b===void 0||(I=b.debug)===null||I===void 0||I.call(b,Qi,`Resolving endpoint from template: ${Gr(G)}`),{..._t!=null&&{headers:Qc(_t,re)},...le!=null&&{properties:ua(le,re)},url:Zc(ye,re)}},"evaluateEndpointRule"),qc=s((C,y)=>{const{conditions:b,error:I}=C,{result:z,referenceRecord:G}=ca(b,y);if(z)throw new Rr(Ss(I,"Error",{...y,referenceRecord:{...y.referenceRecord,...G}}))},"evaluateErrorRule"),ed=s((C,y)=>{const{conditions:b,rules:I}=C,{result:z,referenceRecord:G}=ca(b,y);if(z)return ac(I,{...y,referenceRecord:{...y.referenceRecord,...G}})},"evaluateTreeRule"),ac=s((C,y)=>{for(const b of C)if(b.type==="endpoint"){const I=sc(b,y);if(I)return I}else if(b.type==="error")qc(b,y);else if(b.type==="tree"){const I=ed(b,y);if(I)return I}else throw new Rr(`Unknown endpoint rule: ${b}`);throw new Rr("Rules evaluation failed")},"evaluateRules"),td=s((C,y)=>{var b,I,z,G,Y;const{endpointParams:ue,logger:re}=y,{parameters:ye,rules:le}=C;(b=y.logger)===null||b===void 0||(I=b.debug)===null||I===void 0||I.call(b,`${Qi} Initial EndpointParams: ${Gr(ue)}`);const _t=Object.entries(ye).filter(tn=>{let[,Pn]=tn;return Pn.default!=null}).map(tn=>{let[Pn,Nr]=tn;return[Pn,Nr.default]});if(_t.length>0)for(const[tn,Pn]of _t){var qt;ue[tn]=(qt=ue[tn])!==null&&qt!==void 0?qt:Pn}const vn=Object.entries(ye).filter(tn=>{let[,Pn]=tn;return Pn.required}).map(tn=>{let[Pn]=tn;return Pn});for(const tn of vn)if(ue[tn]==null)throw new Rr(`Missing required parameter: '${tn}'`);const yn=ac(le,{endpointParams:ue,logger:re,referenceRecord:{}});if(!((z=y.endpointParams)===null||z===void 0)&&z.Endpoint)try{const tn=new URL(y.endpointParams.Endpoint),{protocol:Pn,port:Nr}=tn;yn.url.protocol=Pn,yn.url.port=Nr}catch{}return(G=y.logger)===null||G===void 0||(Y=G.debug)===null||Y===void 0||Y.call(G,`${Qi} Resolved endpoint: ${Gr(yn)}`),yn},"resolveEndpoint"),lc="user-agent",Fa="x-amz-user-agent",cc=" ",nd=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,id=s(C=>(y,b)=>function(){var I=(0,h.coroutine)(function*(z){var G,Y;const{request:ue}=z;if(!A.isInstance(ue))return y(z);const{headers:re}=ue,ye=(b==null||(G=b.userAgent)===null||G===void 0?void 0:G.map(fa))||[],le=(yield C.defaultUserAgentProvider()).map(fa),_t=(C==null||(Y=C.customUserAgent)===null||Y===void 0?void 0:Y.map(fa))||[],qt=gs(),vn=(qt?[qt]:[]).concat([...le,...ye,..._t]).join(cc),yn=[...le.filter(tn=>tn.startsWith("aws-sdk-")),..._t].join(cc);return C.runtime!=="browser"?(yn&&(re[Fa]=re[Fa]?`${re[lc]} ${yn}`:yn),re[lc]=vn):re[Fa]=vn,y({...z,request:ue})});return function(z){return I.apply(this,arguments)}}(),"userAgentMiddleware"),fa=s(C=>{let[y,b]=C;const I=y.indexOf("/"),z=y.substring(0,I);let G=y.substring(I+1);return z==="api"&&(G=G.toLowerCase()),[z,G,b].filter(Y=>Y&&Y.length>0).map(Y=>Y==null?void 0:Y.replace(nd,"_")).join("/")},"escapeUserAgent"),rd={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},od=s(C=>({applyToStack:y=>{y.add(id(C),rd)}}),"getUserAgentPlugin");class dc{trace(){}debug(){}info(){}warn(){}error(){}}s(dc,"NoOpLogger");const ha=s(()=>{let C=[],y=[];const b=new Set,I=s(le=>le.sort((_t,qt)=>Ls[qt.step]-Ls[_t.step]||uc[qt.priority||"normal"]-uc[_t.priority||"normal"]),"sort"),z=s(le=>{let _t=!1;const qt=s(vn=>vn.name&&vn.name===le?(_t=!0,b.delete(le),!1):!0,"filterCb");return C=C.filter(qt),y=y.filter(qt),_t},"removeByName"),G=s(le=>{let _t=!1;const qt=s(vn=>vn.middleware===le?(_t=!0,vn.name&&b.delete(vn.name),!1):!0,"filterCb");return C=C.filter(qt),y=y.filter(qt),_t},"removeByReference"),Y=s(le=>(C.forEach(_t=>{le.add(_t.middleware,{..._t})}),y.forEach(_t=>{le.addRelativeTo(_t.middleware,{..._t})}),le),"cloneTo"),ue=s(le=>{const _t=[];return le.before.forEach(qt=>{qt.before.length===0&&qt.after.length===0?_t.push(qt):_t.push(...ue(qt))}),_t.push(le),le.after.reverse().forEach(qt=>{qt.before.length===0&&qt.after.length===0?_t.push(qt):_t.push(...ue(qt))}),_t},"expandRelativeMiddlewareList"),re=s(function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const _t=[],qt=[],vn={};return C.forEach(tn=>{const Pn={...tn,before:[],after:[]};Pn.name&&(vn[Pn.name]=Pn),_t.push(Pn)}),y.forEach(tn=>{const Pn={...tn,before:[],after:[]};Pn.name&&(vn[Pn.name]=Pn),qt.push(Pn)}),qt.forEach(tn=>{if(tn.toMiddleware){const Pn=vn[tn.toMiddleware];if(Pn===void 0){if(le)return;throw new Error(`${tn.toMiddleware} is not found when adding ${tn.name||"anonymous"} middleware ${tn.relation} ${tn.toMiddleware}`)}tn.relation==="after"&&Pn.after.push(tn),tn.relation==="before"&&Pn.before.push(tn)}}),I(_t).map(ue).reduce((tn,Pn)=>(tn.push(...Pn),tn),[])},"getMiddlewareList"),ye={add:function(le){let _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{name:qt,override:vn}=_t,yn={step:"initialize",priority:"normal",middleware:le,..._t};if(qt){if(b.has(qt)){if(!vn)throw new Error(`Duplicate middleware name '${qt}'`);const tn=C.findIndex(Nr=>Nr.name===qt),Pn=C[tn];if(Pn.step!==yn.step||Pn.priority!==yn.priority)throw new Error(`"${qt}" middleware with ${Pn.priority} priority in ${Pn.step} step cannot be overridden by same-name middleware with ${yn.priority} priority in ${yn.step} step.`);C.splice(tn,1)}b.add(qt)}C.push(yn)},addRelativeTo:(le,_t)=>{const{name:qt,override:vn}=_t,yn={middleware:le,..._t};if(qt){if(b.has(qt)){if(!vn)throw new Error(`Duplicate middleware name '${qt}'`);const tn=y.findIndex(Nr=>Nr.name===qt),Pn=y[tn];if(Pn.toMiddleware!==yn.toMiddleware||Pn.relation!==yn.relation)throw new Error(`"${qt}" middleware ${Pn.relation} "${Pn.toMiddleware}" middleware cannot be overridden by same-name middleware ${yn.relation} "${yn.toMiddleware}" middleware.`);y.splice(tn,1)}b.add(qt)}y.push(yn)},clone:()=>Y(ha()),use:le=>{le.applyToStack(ye)},remove:le=>typeof le=="string"?z(le):G(le),removeByTag:le=>{let _t=!1;const qt=s(vn=>{const{tags:yn,name:tn}=vn;return yn&&yn.includes(le)?(tn&&b.delete(tn),_t=!0,!1):!0},"filterCb");return C=C.filter(qt),y=y.filter(qt),_t},concat:le=>{const _t=Y(ha());return _t.use(le),_t},applyToStack:Y,identify:()=>re(!0).map(le=>le.name+": "+(le.tags||[]).join(",")),resolve:(le,_t)=>{for(const qt of re().map(vn=>vn.middleware).reverse())le=qt(le,_t);return le}};return ye},"constructStack"),Ls={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},uc={high:3,normal:2,low:1};class Ua{send(y,b,I){const z=typeof b!="function"?b:void 0,G=typeof b=="function"?b:I,Y=y.resolveMiddleware(this.middlewareStack,this.config,z);if(G)Y(y).then(ue=>G(null,ue.output),ue=>G(ue)).catch(()=>{});else return Y(y).then(ue=>ue.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}constructor(y){this.middlewareStack=ha(),this.config=y}}s(Ua,"Client");class Vn{constructor(){this.middlewareStack=ha()}}s(Vn,"Command");const _n="***SensitiveInformation***",pa=s((C,y)=>{for(const b of Object.keys(C)){const I=C[b],z=function(){var Y=(0,h.coroutine)(function*(ue,re,ye){const le=new I(ue);if(typeof re=="function")this.send(le,re);else if(typeof ye=="function"){if(typeof re!="object")throw new Error(`Expected http options but got ${typeof re}`);this.send(le,re||{},ye)}else return this.send(le,re)});return s(function(re,ye,le){return Y.apply(this,arguments)},"methodImpl")}(),G=(b[0].toLowerCase()+b.slice(1)).replace(/Command$/,"");y.prototype[G]=z}},"createAggregatedClient"),sd=s(C=>{switch(C){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${C}"`)}},"parseBoolean"),Va=s(C=>{if(C!=null){if(typeof C=="number"){if((C===0||C===1)&&ga.warn(ma(`Expected boolean, got ${typeof C}: ${C}`)),C===0)return!1;if(C===1)return!0}if(typeof C=="string"){const y=C.toLowerCase();if((y==="false"||y==="true")&&ga.warn(ma(`Expected boolean, got ${typeof C}: ${C}`)),y==="false")return!1;if(y==="true")return!0}if(typeof C=="boolean")return C;throw new TypeError(`Expected boolean, got ${typeof C}: ${C}`)}},"expectBoolean"),cr=s(C=>{if(C!=null){if(typeof C=="string"){const y=parseFloat(C);if(!Number.isNaN(y))return String(y)!==String(C)&&ga.warn(ma(`Expected number but observed string: ${C}`)),y}if(typeof C=="number")return C;throw new TypeError(`Expected number, got ${typeof C}: ${C}`)}},"expectNumber"),fc=Math.ceil(2**127*(2-2**-23)),es=s(C=>{const y=cr(C);if(y!==void 0&&!Number.isNaN(y)&&y!==1/0&&y!==-1/0&&Math.abs(y)>fc)throw new TypeError(`Expected 32-bit float, got ${C}`);return y},"expectFloat32"),Co=s(C=>{if(C!=null){if(Number.isInteger(C)&&!Number.isNaN(C))return C;throw new TypeError(`Expected integer, got ${typeof C}: ${C}`)}},"expectLong"),hc=null,Ha=s(C=>vs(C,32),"expectInt32"),pc=s(C=>vs(C,16),"expectShort"),mc=s(C=>vs(C,8),"expectByte"),vs=s((C,y)=>{const b=Co(C);if(b!==void 0&&ad(b,y)!==b)throw new TypeError(`Expected ${y}-bit integer, got ${C}`);return b},"expectSizedInt"),ad=s((C,y)=>{switch(y){case 32:return Int32Array.of(C)[0];case 16:return Int16Array.of(C)[0];case 8:return Int8Array.of(C)[0]}},"castInt"),Mn=s((C,y)=>{if(C==null)throw y?new TypeError(`Expected a non-null value for ${y}`):new TypeError("Expected a non-null value");return C},"expectNonNull"),vi=s(C=>{if(C==null)return;if(typeof C=="object"&&!Array.isArray(C))return C;const y=Array.isArray(C)?"array":typeof C;throw new TypeError(`Expected object, got ${y}: ${C}`)},"expectObject"),jt=s(C=>{if(C!=null){if(typeof C=="string")return C;if(["boolean","number","bigint"].includes(typeof C))return ga.warn(ma(`Expected string, got ${typeof C}: ${C}`)),String(C);throw new TypeError(`Expected string, got ${typeof C}: ${C}`)}},"expectString"),nu=s(C=>{if(C==null)return;const y=vi(C),b=Object.entries(y).filter(I=>{let[,z]=I;return z!=null}).map(I=>{let[z]=I;return z});if(b.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(b.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${b} were not null.`);return y},"expectUnion"),ld=s(C=>cr(typeof C=="string"?ts(C):C),"strictParseDouble"),iu=null,ru=s(C=>es(typeof C=="string"?ts(C):C),"parse_utils_strictParseFloat32"),gc=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,ts=s(C=>{const y=C.match(gc);if(y===null||y[0].length!==C.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(C)},"parseNumber"),ou=s(C=>typeof C=="string"?Sc(C):cr(C),"limitedParseDouble"),cd=null,su=null,au=s(C=>typeof C=="string"?Sc(C):es(C),"limitedParseFloat32"),Sc=s(C=>{switch(C){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${C}`)}},"parseFloatString"),lu=s(C=>Co(typeof C=="string"?ts(C):C),"strictParseLong"),cu=null,du=s(C=>Ha(typeof C=="string"?ts(C):C),"strictParseInt32"),uu=s(C=>pc(typeof C=="string"?ts(C):C),"parse_utils_strictParseShort"),fu=s(C=>mc(typeof C=="string"?ts(C):C),"parse_utils_strictParseByte"),ma=s(C=>String(new TypeError(C).stack||C).split(`
`).slice(0,5).filter(y=>!y.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),ga={warn:console.warn},dd=null,Wa=null;function hu(C){const y=C.getUTCFullYear(),b=C.getUTCMonth(),I=C.getUTCDay(),z=C.getUTCDate(),G=C.getUTCHours(),Y=C.getUTCMinutes(),ue=C.getUTCSeconds(),re=z<10?`0${z}`:`${z}`,ye=G<10?`0${G}`:`${G}`,le=Y<10?`0${Y}`:`${Y}`,_t=ue<10?`0${ue}`:`${ue}`;return`${dd[I]}, ${re} ${Wa[b]} ${y} ${ye}:${le}:${_t} GMT`}s(hu,"dateToUtcString");const ud=null,pu=s(C=>{if(C==null)return;if(typeof C!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const y=ud.exec(C);if(!y)throw new TypeError("Invalid RFC-3339 date-time value");const[b,I,z,G,Y,ue,re,ye]=y,le=strictParseShort(ro(I)),_t=yo(z,"month",1,12),qt=yo(G,"day",1,31);return xs(le,_t,qt,{hours:Y,minutes:ue,seconds:re,fractionalMilliseconds:ye})},"parseRfc3339DateTime"),fd=null,mu=s(C=>{if(C==null)return;if(typeof C!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const y=fd.exec(C);if(!y)throw new TypeError("Invalid RFC-3339 date-time value");const[b,I,z,G,Y,ue,re,ye,le]=y,_t=strictParseShort(ro(I)),qt=yo(z,"month",1,12),vn=yo(G,"day",1,31),yn=xs(_t,qt,vn,{hours:Y,minutes:ue,seconds:re,fractionalMilliseconds:ye});return le.toUpperCase()!="Z"&&yn.setTime(yn.getTime()-Ed(le)),yn},"parseRfc3339DateTimeWithOffset"),hd=null,pd=null,md=null,gu=s(C=>{if(C==null)return;if(typeof C!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let y=hd.exec(C);if(y){const[b,I,z,G,Y,ue,re,ye]=y;return xs(strictParseShort(ro(G)),za(z),yo(I,"day",1,31),{hours:Y,minutes:ue,seconds:re,fractionalMilliseconds:ye})}if(y=pd.exec(C),y){const[b,I,z,G,Y,ue,re,ye]=y;return vd(xs(gd(G),za(z),yo(I,"day",1,31),{hours:Y,minutes:ue,seconds:re,fractionalMilliseconds:ye}))}if(y=md.exec(C),y){const[b,I,z,G,Y,ue,re,ye]=y;return xs(strictParseShort(ro(ye)),za(I),yo(z.trimLeft(),"day",1,31),{hours:G,minutes:Y,seconds:ue,fractionalMilliseconds:re})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),jr=s(C=>{if(C==null)return;let y;if(typeof C=="number")y=C;else if(typeof C=="string")y=ld(C);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(y)||y===1/0||y===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(y*1e3))},"parseEpochTimestamp"),xs=s((C,y,b,I)=>{const z=y-1;return ja(C,z,b),new Date(Date.UTC(C,z,b,yo(I.hours,"hour",0,23),yo(I.minutes,"minute",0,59),yo(I.seconds,"seconds",0,60),yd(I.fractionalMilliseconds)))},"buildDate"),gd=s(C=>{const y=new Date().getUTCFullYear(),b=Math.floor(y/100)*100+strictParseShort(ro(C));return b<y?b+100:b},"parseTwoDigitYear"),Sd=null,vd=s(C=>C.getTime()-new Date().getTime()>Sd?new Date(Date.UTC(C.getUTCFullYear()-100,C.getUTCMonth(),C.getUTCDate(),C.getUTCHours(),C.getUTCMinutes(),C.getUTCSeconds(),C.getUTCMilliseconds())):C,"adjustRfc850Year"),za=s(C=>{const y=Wa.indexOf(C);if(y<0)throw new TypeError(`Invalid month: ${C}`);return y+1},"parseMonthByShortName"),Ga=null,ja=s((C,y,b)=>{let I=Ga[y];if(y===1&&vc(C)&&(I=29),b>I)throw new TypeError(`Invalid day for ${Wa[y]} in ${C}: ${b}`)},"validateDayOfMonth"),vc=s(C=>C%4===0&&(C%100!==0||C%400===0),"isLeapYear"),yo=s((C,y,b,I)=>{const z=strictParseByte(ro(C));if(z<b||z>I)throw new TypeError(`${y} must be between ${b} and ${I}, inclusive`);return z},"parseDateValue"),yd=s(C=>C==null?0:strictParseFloat32("0."+C)*1e3,"parseMilliseconds"),Ed=s(C=>{const y=C[0];let b=1;if(y=="+")b=1;else if(y=="-")b=-1;else throw new TypeError(`Offset direction, ${y}, must be "+" or "-"`);const I=Number(C.substring(1,3)),z=Number(C.substring(4,6));return b*(I*60+z)*60*1e3},"parseOffsetToMilliseconds"),ro=s(C=>{let y=0;for(;y<C.length-1&&C.charAt(y)==="0";)y++;return y===0?C:C.slice(y)},"stripLeadingZeroes");class Vo extends Error{constructor(y){super(y.message),Object.setPrototypeOf(this,Vo.prototype),this.name=y.name,this.$fault=y.$fault,this.$metadata=y.$metadata}}s(Vo,"ServiceException");const Io=s(function(C){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.entries(y).filter(I=>{let[,z]=I;return z!==void 0}).forEach(I=>{let[z,G]=I;(C[z]==null||C[z]==="")&&(C[z]=G)});const b=C.message||C.Message||"UnknownError";return C.message=b,delete C.Message,C},"decorateServiceException"),bd=s(C=>{let{output:y,parsedBody:b,exceptionCtor:I,errorCode:z}=C;const G=_d(y),Y=G.httpStatusCode?G.httpStatusCode+"":void 0,ue=new I({name:(b==null?void 0:b.code)||(b==null?void 0:b.Code)||z||Y||"UnknownError",$fault:"client",$metadata:G});throw Io(ue,b)},"throwDefaultError"),yc=s(C=>y=>{let{output:b,parsedBody:I,errorCode:z}=y;bd({output:b,parsedBody:I,exceptionCtor:C,errorCode:z})},"withBaseException");var $a,Sa;const _d=s(C=>({httpStatusCode:C.statusCode,requestId:(Sa=($a=C.headers["x-amzn-requestid"])!==null&&$a!==void 0?$a:C.headers["x-amzn-request-id"])!==null&&Sa!==void 0?Sa:C.headers["x-amz-request-id"],extendedRequestId:C.headers["x-amz-id-2"],cfId:C.headers["x-amz-cf-id"]}),"deserializeMetadata"),Bs=s(C=>{switch(C){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),Ka=s(function(){const C=Object.getPrototypeOf(this).constructor,y=Function.bind.apply(String,[null,...arguments]),b=new y;return Object.setPrototypeOf(b,C.prototype),b},"StringWrapper");Ka.prototype=Object.create(String.prototype,{constructor:{value:Ka,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Ka,String);class ys extends null{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(y){return y instanceof ys?y:y instanceof String||typeof y=="string"?new ys(y):new ys(JSON.stringify(y))}}s(ys,"LazyJsonString");function Ct(C,y,b){let I,z,G;if(typeof y>"u"&&typeof b>"u")I={},G=C;else{if(I=C,typeof y=="function")return z=y,G=b,$(I,z,G);G=y}for(const Y of Object.keys(G)){if(!Array.isArray(G[Y])){I[Y]=G[Y];continue}te(I,null,G,Y)}return I}s(Ct,"map");const N=s(C=>{const y={};for(const[b,I]of Object.entries(C||{}))y[b]=[,I];return y},"convertMap"),x=s((C,y)=>{const b={};for(const I in y)te(b,C,y,I);return b},"take"),$=s((C,y,b)=>Ct(C,Object.entries(b).reduce((I,z)=>{let[G,Y]=z;return Array.isArray(Y)?I[G]=Y:typeof Y=="function"?I[G]=[y,Y()]:I[G]=[y,Y],I},{})),"mapWithFilter"),te=s((C,y,b,I)=>{if(y!==null){let Y=b[I];typeof Y=="function"&&(Y=[,Y]);const[ue=he,re=we,ye=I]=Y;(typeof ue=="function"&&ue(y[ye])||typeof ue!="function"&&ue)&&(C[I]=re(y[ye]));return}let[z,G]=b[I];if(typeof G=="function"){let Y;const ue=z===void 0&&(Y=G())!=null,re=typeof z=="function"&&!!z(void 0)||typeof z!="function"&&!!z;ue?C[I]=Y:re&&(C[I]=G())}else{const Y=z===void 0&&G!=null,ue=typeof z=="function"&&!!z(G)||typeof z!="function"&&!!z;(Y||ue)&&(C[I]=G)}},"applyInstruction"),he=s(C=>C!=null,"nonNullish"),we=s(C=>C,"pass");function We(C){return encodeURIComponent(C).replace(/[!'()*]/g,function(y){return"%"+y.charCodeAt(0).toString(16).toUpperCase()})}s(We,"extendedEncodeURIComponent");const je=s((C,y,b,I,z,G)=>{if(y!=null&&y[b]!==void 0){const Y=I();if(Y.length<=0)throw new Error("Empty value provided for input HTTP label: "+b+".");C=C.replace(z,G?Y.split("/").map(ue=>We(ue)).join("/"):We(Y))}else throw new Error("No value provided for input HTTP label: "+b+".");return C},"resolve_path_resolvedPath"),Ne=s(C=>{if(C==null)return{};if(Array.isArray(C))return C.filter(y=>y!=null);if(typeof C=="object"){const y={};for(const b of Object.keys(C))C[b]!=null&&(y[b]=Ne(C[b]));return y}return C},"_json"),ht=s(C=>{var y,b;return{...C,useDualstackEndpoint:(y=C.useDualstackEndpoint)!==null&&y!==void 0?y:!1,useFipsEndpoint:(b=C.useFipsEndpoint)!==null&&b!==void 0?b:!1,defaultSigningName:"chime"}},"resolveClientEndpointParameters");var Rt=c(7229287800),It=c.n(Rt),Lt=c(3661302631);function sn(C){const y=[];for(let b of Object.keys(C).sort()){const I=C[b];if(b=Xi(b),Array.isArray(I))for(let z=0,G=I.length;z<G;z++)y.push(`${b}=${Xi(I[z])}`);else{let z=b;(I||typeof I=="string")&&(z+=`=${Xi(I)}`),y.push(z)}}return y.join("&")}s(sn,"buildQueryString");function rn(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise((y,b)=>{C&&setTimeout(()=>{const I=new Error(`Request did not complete within ${C} ms`);I.name="TimeoutError",b(I)},C)})}s(rn,"requestTimeout");class Cn{destroy(){}handle(y){let{abortSignal:b}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var I=this;return(0,h.coroutine)(function*(){I.config||(I.config=yield I.configProvider);const z=I.config.requestTimeout;if(b!=null&&b.aborted){const vn=new Error("Request aborted");return vn.name="AbortError",Promise.reject(vn)}let G=y.path;if(y.query){const vn=sn(y.query);vn&&(G+=`?${vn}`)}const{port:Y,method:ue}=y,re=`${y.protocol}//${y.hostname}${Y?`:${Y}`:""}${G}`,le={body:ue==="GET"||ue==="HEAD"?void 0:y.body,headers:new Headers(y.headers),method:ue};typeof AbortController<"u"&&(le.signal=b);const _t=new Request(re,le),qt=[fetch(_t).then(vn=>{const yn=vn.headers,tn={};for(const Nr of yn.entries())tn[Nr[0]]=Nr[1];return vn.body!=null?{response:new D({headers:tn,statusCode:vn.status,body:vn.body})}:vn.blob().then(Nr=>({response:new D({headers:tn,statusCode:vn.status,body:Nr})}))}),rn(z)];return b&&qt.push(new Promise((vn,yn)=>{b.onabort=()=>{const tn=new Error("Request aborted");tn.name="AbortError",yn(tn)}})),Promise.race(qt)})()}constructor(y){typeof y=="function"?this.configProvider=y().then(b=>b||{}):(this.config=y??{},this.configProvider=Promise.resolve(this.config))}}s(Cn,"FetchHttpHandler");const Hn={},Rn=new Array(64);for(let C=0,y="A".charCodeAt(0),b="Z".charCodeAt(0);C+y<=b;C++){const I=String.fromCharCode(C+y);Hn[I]=C,Rn[C]=I}for(let C=0,y="a".charCodeAt(0),b="z".charCodeAt(0);C+y<=b;C++){const I=String.fromCharCode(C+y),z=C+26;Hn[I]=z,Rn[z]=I}for(let C=0;C<10;C++){Hn[C.toString(10)]=C+52;const y=C.toString(10),b=C+52;Hn[y]=b,Rn[b]=y}Hn["+"]=62,Rn[62]="+",Hn["/"]=63,Rn[63]="/";const di=6,Di=8,Ni=63,nr=s(C=>{let y=C.length/4*3;C.slice(-2)==="=="?y-=2:C.slice(-1)==="="&&y--;const b=new ArrayBuffer(y),I=new DataView(b);for(let z=0;z<C.length;z+=4){let G=0,Y=0;for(let ye=z,le=z+3;ye<=le;ye++)if(C[ye]!=="="){if(!(C[ye]in Hn))throw new TypeError(`Invalid character ${C[ye]} in base64 string.`);G|=Hn[C[ye]]<<(le-ye)*di,Y+=di}else G>>=di;const ue=z/4*3;G>>=Y%Di;const re=Math.floor(Y/Di);for(let ye=0;ye<re;ye++){const le=(re-ye-1)*Di;I.setUint8(ue+ye,(G&255<<le)>>le)}}return new Uint8Array(b)},"fromBase64");function pi(C){let y="";for(let b=0;b<C.length;b+=3){let I=0,z=0;for(let Y=b,ue=Math.min(b+3,C.length);Y<ue;Y++)I|=C[Y]<<(ue-Y-1)*Di,z+=Di;const G=Math.ceil(z/di);I<<=G*di-z;for(let Y=1;Y<=G;Y++){const ue=(G-Y)*di;y+=Rn[(I&Ni<<ue)>>ue]}y+="==".slice(0,4-G)}return y}s(pi,"toBase64");const Nn=s(C=>typeof Blob=="function"&&C instanceof Blob?wi(C):xn(C),"streamCollector");function wi(C){return hr.apply(this,arguments)}s(wi,"collectBlob");function hr(){return hr=(0,h.coroutine)(function*(C){const y=yield ir(C),b=nr(y);return new Uint8Array(b)}),hr.apply(this,arguments)}s(hr,"_collectBlob");function xn(C){return mi.apply(this,arguments)}s(xn,"collectStream");function mi(){return mi=(0,h.coroutine)(function*(C){let y=new Uint8Array(0);const b=C.getReader();let I=!1;for(;!I;){const{done:z,value:G}=yield b.read();if(G){const Y=y;y=new Uint8Array(Y.length+G.length),y.set(Y),y.set(G,Y.length)}I=z}return y}),mi.apply(this,arguments)}s(mi,"_collectStream");function ir(C){return new Promise((y,b)=>{const I=new FileReader;I.onloadend=()=>{if(I.readyState!==2)return b(new Error("Reader aborted too early"));var z;const G=(z=I.result)!==null&&z!==void 0?z:"",Y=G.indexOf(","),ue=Y>-1?Y+1:G.length;y(G.substring(ue))},I.onabort=()=>b(new Error("Read aborted")),I.onerror=()=>b(I.error),I.readAsDataURL(C)})}s(ir,"readToBase64");const Pr=s(C=>()=>Promise.reject(C),"invalidProvider"),Tr=s(C=>{if(typeof C=="string"){let y=C.length;for(let b=y-1;b>=0;b--){const I=C.charCodeAt(b);I>127&&I<=2047?y++:I>2047&&I<=65535&&(y+=2),I>=56320&&I<=57343&&b--}return y}else{if(typeof C.byteLength=="number")return C.byteLength;if(typeof C.size=="number")return C.size}throw new Error(`Body Length computation failed for ${C}`)},"calculateBodyLength");var eo=c(1874409785),Gi=c.n(eo);const fo=s(C=>{let{serviceId:y,clientVersion:b}=C;return(0,h.coroutine)(function*(){var I,z,G,Y,ue;const re=typeof window<"u"&&(!(window==null||(I=window.navigator)===null||I===void 0)&&I.userAgent)?Gi().parse(window.navigator.userAgent):void 0;var ye,le;const _t=[["aws-sdk-js",b],[`os/${(re==null||(z=re.os)===null||z===void 0?void 0:z.name)||"other"}`,re==null||(G=re.os)===null||G===void 0?void 0:G.version],["lang/js"],["md/browser",`${(ye=re==null||(Y=re.browser)===null||Y===void 0?void 0:Y.name)!==null&&ye!==void 0?ye:"unknown"}_${(le=re==null||(ue=re.browser)===null||ue===void 0?void 0:ue.version)!==null&&le!==void 0?le:"unknown"}`]];return y&&_t.push([`api/${y}`,b]),_t})},"defaultUserAgent"),kr=s(C=>new TextDecoder("utf-8").decode(C),"toUtf8"),so="required",$r="fn",Po="argv",Ho="ref",Fs="isSet",Kr="tree",Wo="error",ns="endpoint",Us="PartitionResult",Ja={[so]:!1,type:"String"},Vs={[so]:!0,default:!1,type:"Boolean"},Ya={[Ho]:"Endpoint"},Ec={[$r]:"booleanEquals",[Po]:[{[Ho]:"UseFIPS"},!0]},bc={[$r]:"booleanEquals",[Po]:[{[Ho]:"UseDualStack"},!0]},Qr={},zo={[$r]:"booleanEquals",[Po]:[!0,{[$r]:"getAttr",[Po]:[{[Ho]:Us},"supportsFIPS"]}]},va={[$r]:"booleanEquals",[Po]:[!0,{[$r]:"getAttr",[Po]:[{[Ho]:Us},"supportsDualStack"]}]},Xa=[Ec],Hs=[bc],ya=[{[Ho]:"Region"}],Eo={version:"1.0",parameters:{Region:Ja,UseDualStack:Vs,UseFIPS:Vs,Endpoint:Ja},rules:[{conditions:[{[$r]:Fs,[Po]:[Ya]}],type:Kr,rules:[{conditions:Xa,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Wo},{type:Kr,rules:[{conditions:Hs,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Wo},{endpoint:{url:Ya,properties:Qr,headers:Qr},type:ns}]}]},{type:Kr,rules:[{conditions:[{[$r]:Fs,[Po]:ya}],type:Kr,rules:[{conditions:[{[$r]:"aws.partition",[Po]:ya,assign:Us}],type:Kr,rules:[{conditions:[Ec,bc],type:Kr,rules:[{conditions:[zo,va],type:Kr,rules:[{type:Kr,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qr,headers:Qr},type:ns}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Wo}]},{conditions:Xa,type:Kr,rules:[{conditions:[zo],type:Kr,rules:[{type:Kr,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Qr,headers:Qr},type:ns}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Wo}]},{conditions:Hs,type:Kr,rules:[{conditions:[va],type:Kr,rules:[{type:Kr,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qr,headers:Qr},type:ns}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Wo}]},{type:Kr,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:Qr,headers:Qr},type:ns}]}]}]},{error:"Invalid Configuration: Missing Region",type:Wo}]}]},Li=s(function(C){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return td(Eo,{endpointParams:C,logger:y.logger})},"defaultEndpointResolver");var rr,Pi,ko,Qa,Td,Cd,Id,wd,Od;const vh=s(C=>({apiVersion:"2021-05-15",base64Decoder:(rr=C==null?void 0:C.base64Decoder)!==null&&rr!==void 0?rr:nr,base64Encoder:(Pi=C==null?void 0:C.base64Encoder)!==null&&Pi!==void 0?Pi:pi,disableHostPrefix:(ko=C==null?void 0:C.disableHostPrefix)!==null&&ko!==void 0?ko:!1,endpointProvider:(Qa=C==null?void 0:C.endpointProvider)!==null&&Qa!==void 0?Qa:Li,logger:(Td=C==null?void 0:C.logger)!==null&&Td!==void 0?Td:new dc,serviceId:(Cd=C==null?void 0:C.serviceId)!==null&&Cd!==void 0?Cd:"Chime SDK Messaging",urlParser:(Id=C==null?void 0:C.urlParser)!==null&&Id!==void 0?Id:Qt,utf8Decoder:(wd=C==null?void 0:C.utf8Decoder)!==null&&wd!==void 0?wd:pe,utf8Encoder:(Od=C==null?void 0:C.utf8Encoder)!==null&&Od!==void 0?Od:kr}),"getRuntimeConfig"),yh=["in-region","cross-region","mobile","standard","legacy"],Eh=s(function(){let{defaultsMode:C}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Er((0,h.coroutine)(function*(){const y=typeof C=="function"?yield C():C;switch(y==null?void 0:y.toLowerCase()){case"auto":return Promise.resolve(bh()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(y==null?void 0:y.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${yh.join(", ")}, got ${y}`)}}))},"resolveDefaultsModeConfig"),bh=s(()=>{var C,y;const b=typeof window<"u"&&(!(window==null||(C=window.navigator)===null||C===void 0)&&C.userAgent)?Gi().parse(window.navigator.userAgent):void 0,I=b==null||(y=b.platform)===null||y===void 0?void 0:y.type;return I==="tablet"||I==="mobile"},"isMobileBrowser"),_h=s(C=>{const y=Eh(C),b=s(()=>y().then(Bs),"defaultConfigProvider"),I=vh(C);var z,G,Y,ue,re,ye,le,_t,qt,vn,yn;return{...I,...C,runtime:"browser",defaultsMode:y,bodyLengthChecker:(z=C==null?void 0:C.bodyLengthChecker)!==null&&z!==void 0?z:Tr,credentialDefaultProvider:(G=C==null?void 0:C.credentialDefaultProvider)!==null&&G!==void 0?G:tn=>()=>Promise.reject(new Error("Credential is missing")),defaultUserAgentProvider:(Y=C==null?void 0:C.defaultUserAgentProvider)!==null&&Y!==void 0?Y:fo({serviceId:I.serviceId,clientVersion:It().version}),maxAttempts:(ue=C==null?void 0:C.maxAttempts)!==null&&ue!==void 0?ue:ot,region:(re=C==null?void 0:C.region)!==null&&re!==void 0?re:Pr("Region is missing"),requestHandler:(ye=C==null?void 0:C.requestHandler)!==null&&ye!==void 0?ye:new Cn(b),retryMode:(le=C==null?void 0:C.retryMode)!==null&&le!==void 0?le:(0,h.coroutine)(function*(){return(yield b()).retryMode||de}),sha256:(_t=C==null?void 0:C.sha256)!==null&&_t!==void 0?_t:Lt.Sha256,streamCollector:(qt=C==null?void 0:C.streamCollector)!==null&&qt!==void 0?qt:Nn,useDualstackEndpoint:(vn=C==null?void 0:C.useDualstackEndpoint)!==null&&vn!==void 0?vn:()=>Promise.resolve(n),useFipsEndpoint:(yn=C==null?void 0:C.useFipsEndpoint)!==null&&yn!==void 0?yn:()=>Promise.resolve(o)}},"runtimeConfig_browser_getRuntimeConfig");class ho extends Ua{destroy(){super.destroy()}constructor(y){const b=_h(y),I=ht(b),z=R(I),G=hn(z),Y=Yt(G),ue=Y,re=As(ue),ye=To(re);super(ye),this.config=ye,this.middlewareStack.use(tr(this.config)),this.middlewareStack.use(X(this.config)),this.middlewareStack.use(on(this.config)),this.middlewareStack.use(en(this.config)),this.middlewareStack.use(Je(this.config)),this.middlewareStack.use(Ps(this.config)),this.middlewareStack.use(od(this.config))}}s(ho,"ChimeSDKMessagingClient");var Su;(function(C){C[C.HEADER=0]="HEADER",C[C.TRAILER=1]="TRAILER"})(Su||(Su={}));class Th{constructor({name:y,kind:b=FieldPosition.HEADER,values:I=[]}){this.name=y,this.kind=b,this.values=I}add(y){this.values.push(y)}set(y){this.values=y}remove(y){this.values=this.values.filter(b=>b!==y)}toString(){return this.values.map(y=>y.includes(",")||y.includes(" ")?`"${y}"`:y).join(", ")}get(){return this.values}}s(Th,"Field_Field");class Wn{constructor(y){this.method=y.method||"GET",this.hostname=y.hostname||"localhost",this.port=y.port,this.query=y.query||{},this.headers=y.headers||{},this.body=y.body,this.protocol=y.protocol?y.protocol.slice(-1)!==":"?`${y.protocol}:`:y.protocol:"https:",this.path=y.path?y.path.charAt(0)!=="/"?`/${y.path}`:y.path:"/"}static isInstance(y){if(!y)return!1;const b=y;return"method"in b&&"protocol"in b&&"hostname"in b&&"path"in b&&typeof b.query=="object"&&typeof b.headers=="object"}clone(){const y=new Wn({...this,headers:{...this.headers}});return y.query&&(y.query=Ch(y.query)),y}}s(Wn,"dist_es_httpRequest_HttpRequest");function Ch(C){return Object.keys(C).reduce((y,b)=>{const I=C[b];return{...y,[b]:Array.isArray(I)?[...I]:I}},{})}s(Ch,"httpRequest_cloneQuery");class po extends Vo{constructor(y){super(y),Object.setPrototypeOf(this,po.prototype)}}s(po,"ChimeSDKMessagingServiceException");const Ih={ALL:"ALL",FILTERED:"FILTERED",NONE:"NONE"},wh={DEFAULT:"DEFAULT",HIDDEN:"HIDDEN"},Oh={AccessDenied:"AccessDenied",BadRequest:"BadRequest",Conflict:"Conflict",Forbidden:"Forbidden",NotFound:"NotFound",PhoneNumberAssociationsExist:"PhoneNumberAssociationsExist",PreconditionFailed:"PreconditionFailed",ResourceLimitExceeded:"ResourceLimitExceeded",ServiceFailure:"ServiceFailure",ServiceUnavailable:"ServiceUnavailable",Throttled:"Throttled",Throttling:"Throttling",Unauthorized:"Unauthorized",Unprocessable:"Unprocessable",VoiceConnectorGroupAssociationsExist:"VoiceConnectorGroupAssociationsExist"};class Za extends po{constructor(y){super({name:"BadRequestException",$fault:"client",...y}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,Za.prototype),this.Code=y.Code,this.Message=y.Message}}s(Za,"BadRequestException");class qa extends po{constructor(y){super({name:"ConflictException",$fault:"client",...y}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,qa.prototype),this.Code=y.Code,this.Message=y.Message}}s(qa,"ConflictException");class el extends po{constructor(y){super({name:"ForbiddenException",$fault:"client",...y}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,el.prototype),this.Code=y.Code,this.Message=y.Message}}s(el,"ForbiddenException");class tl extends po{constructor(y){super({name:"NotFoundException",$fault:"client",...y}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,tl.prototype),this.Code=y.Code,this.Message=y.Message}}s(tl,"NotFoundException");class nl extends po{constructor(y){super({name:"ServiceFailureException",$fault:"server",...y}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,nl.prototype),this.Code=y.Code,this.Message=y.Message}}s(nl,"ServiceFailureException");class il extends po{constructor(y){super({name:"ServiceUnavailableException",$fault:"server",...y}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,il.prototype),this.Code=y.Code,this.Message=y.Message}}s(il,"ServiceUnavailableException");class rl extends po{constructor(y){super({name:"ThrottledClientException",$fault:"client",...y}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,rl.prototype),this.Code=y.Code,this.Message=y.Message}}s(rl,"ThrottledClientException");class ol extends po{constructor(y){super({name:"UnauthorizedClientException",$fault:"client",...y}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,ol.prototype),this.Code=y.Code,this.Message=y.Message}}s(ol,"UnauthorizedClientException");class sl extends po{constructor(y){super({name:"ResourceLimitExceededException",$fault:"client",...y}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,sl.prototype),this.Code=y.Code,this.Message=y.Message}}s(sl,"ResourceLimitExceededException");const Ah={CREATED_TIMESTAMP:"CREATED_TIMESTAMP",LAST_MESSAGE_TIMESTAMP:"LAST_MESSAGE_TIMESTAMP"},Mh={RESTRICTED:"RESTRICTED",UNRESTRICTED:"UNRESTRICTED"},Rh={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},Ph={ASYNC:"ASYNC"},kh={ABORT:"ABORT",CONTINUE:"CONTINUE"},Dh={DEFAULT:"DEFAULT",VOIP:"VOIP"},Nh={NON_PERSISTENT:"NON_PERSISTENT",PERSISTENT:"PERSISTENT"},Lh={DENIED:"DENIED",FAILED:"FAILED",PENDING:"PENDING",SENT:"SENT"},xh={CONTROL:"CONTROL",STANDARD:"STANDARD"},Bh={Channel:"Channel",ChannelMessage:"ChannelMessage"},Fh={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},Uh={MEMBERS:"MEMBERS"},Vh={EQUALS:"EQUALS",INCLUDES:"INCLUDES"},Br=s(C=>({...C,...C.Name&&{Name:_n}}),"IdentityFilterSensitiveLog"),vu=s(C=>({...C,...C.InvitedBy&&{InvitedBy:Br(C.InvitedBy)},...C.Members&&{Members:C.Members.map(y=>Br(y))}}),"BatchChannelMembershipsFilterSensitiveLog"),yu=s(C=>({...C,...C.BatchChannelMemberships&&{BatchChannelMemberships:vu(C.BatchChannelMemberships)}}),"BatchCreateChannelMembershipResponseFilterSensitiveLog"),Eu=s(C=>({...C,...C.Name&&{Name:_n},...C.Metadata&&{Metadata:_n},...C.CreatedBy&&{CreatedBy:Br(C.CreatedBy)}}),"ChannelFilterSensitiveLog"),bu=s(C=>({...C,...C.Name&&{Name:_n},...C.Metadata&&{Metadata:_n}}),"ChannelAssociatedWithFlowSummaryFilterSensitiveLog"),_u=s(C=>({...C,...C.Member&&{Member:Br(C.Member)},...C.CreatedBy&&{CreatedBy:Br(C.CreatedBy)}}),"ChannelBanFilterSensitiveLog"),Tu=s(C=>({...C,...C.Member&&{Member:Br(C.Member)}}),"ChannelBanSummaryFilterSensitiveLog"),al=s(C=>({...C,...C.Name&&{Name:_n}}),"ProcessorFilterSensitiveLog"),Cu=s(C=>({...C,...C.Processors&&{Processors:C.Processors.map(y=>al(y))},...C.Name&&{Name:_n}}),"ChannelFlowFilterSensitiveLog"),ll=s(C=>({...C,...C.StringValues&&{StringValues:_n}}),"MessageAttributeValueFilterSensitiveLog"),Ad=s(C=>({...C,...C.Title&&{Title:_n},...C.Body&&{Body:_n}}),"PushNotificationConfigurationFilterSensitiveLog"),Iu=s(C=>({...C,...C.Content&&{Content:_n},...C.Metadata&&{Metadata:_n},...C.PushNotification&&{PushNotification:Ad(C.PushNotification)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((y,b)=>{let[I,z]=b;return y[I]=ll(z),y},{})},...C.ContentType&&{ContentType:_n}}),"ChannelMessageCallbackFilterSensitiveLog"),wu=s(C=>({...C,...C.ChannelMessage&&{ChannelMessage:Iu(C.ChannelMessage)}}),"ChannelFlowCallbackRequestFilterSensitiveLog"),Ou=s(C=>({...C,...C.Name&&{Name:_n},...C.Processors&&{Processors:C.Processors.map(y=>al(y))}}),"ChannelFlowSummaryFilterSensitiveLog"),Au=s(C=>({...C,...C.InvitedBy&&{InvitedBy:Br(C.InvitedBy)},...C.Member&&{Member:Br(C.Member)}}),"ChannelMembershipFilterSensitiveLog"),cl=s(C=>({...C,...C.Name&&{Name:_n},...C.Metadata&&{Metadata:_n}}),"ChannelSummaryFilterSensitiveLog"),Md=s(C=>({...C,...C.ChannelSummary&&{ChannelSummary:cl(C.ChannelSummary)}}),"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog"),Mu=s(C=>({...C,...C.FilterRule&&{FilterRule:_n}}),"PushNotificationPreferencesFilterSensitiveLog"),_c=s(C=>({...C,...C.PushNotifications&&{PushNotifications:Mu(C.PushNotifications)}}),"ChannelMembershipPreferencesFilterSensitiveLog"),Ru=s(C=>({...C,...C.Member&&{Member:Br(C.Member)}}),"ChannelMembershipSummaryFilterSensitiveLog"),Pu=s(C=>({...C,...C.Content&&{Content:_n},...C.Metadata&&{Metadata:_n},...C.Sender&&{Sender:Br(C.Sender)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((y,b)=>{let[I,z]=b;return y[I]=ll(z),y},{})},...C.ContentType&&{ContentType:_n}}),"ChannelMessageFilterSensitiveLog"),ku=s(C=>({...C,...C.Content&&{Content:_n},...C.Metadata&&{Metadata:_n},...C.Sender&&{Sender:Br(C.Sender)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((y,b)=>{let[I,z]=b;return y[I]=ll(z),y},{})},...C.ContentType&&{ContentType:_n}}),"ChannelMessageSummaryFilterSensitiveLog"),Rd=s(C=>({...C,...C.ChannelSummary&&{ChannelSummary:cl(C.ChannelSummary)}}),"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog"),Du=s(C=>({...C,...C.Moderator&&{Moderator:Br(C.Moderator)},...C.CreatedBy&&{CreatedBy:Br(C.CreatedBy)}}),"ChannelModeratorFilterSensitiveLog"),Nu=s(C=>({...C,...C.Moderator&&{Moderator:Br(C.Moderator)}}),"ChannelModeratorSummaryFilterSensitiveLog"),dl=s(C=>({...C,...C.Key&&{Key:_n},...C.Value&&{Value:_n}}),"TagFilterSensitiveLog"),Lu=s(C=>({...C,...C.Name&&{Name:_n},...C.Metadata&&{Metadata:_n},...C.ClientRequestToken&&{ClientRequestToken:_n},...C.Tags&&{Tags:C.Tags.map(y=>dl(y))},...C.ChannelId&&{ChannelId:_n}}),"CreateChannelRequestFilterSensitiveLog"),xu=s(C=>({...C,...C.Member&&{Member:Br(C.Member)}}),"CreateChannelBanResponseFilterSensitiveLog"),Bu=s(C=>({...C,...C.Processors&&{Processors:C.Processors.map(y=>al(y))},...C.Name&&{Name:_n},...C.Tags&&{Tags:C.Tags.map(y=>dl(y))},...C.ClientRequestToken&&{ClientRequestToken:_n}}),"CreateChannelFlowRequestFilterSensitiveLog"),Fu=s(C=>({...C,...C.Member&&{Member:Br(C.Member)}}),"CreateChannelMembershipResponseFilterSensitiveLog"),Uu=s(C=>({...C,...C.ChannelModerator&&{ChannelModerator:Br(C.ChannelModerator)}}),"CreateChannelModeratorResponseFilterSensitiveLog"),Vu=s(C=>({...C,...C.Channel&&{Channel:Eu(C.Channel)}}),"DescribeChannelResponseFilterSensitiveLog"),Hu=s(C=>({...C,...C.ChannelBan&&{ChannelBan:_u(C.ChannelBan)}}),"DescribeChannelBanResponseFilterSensitiveLog"),Wu=s(C=>({...C,...C.ChannelFlow&&{ChannelFlow:Cu(C.ChannelFlow)}}),"DescribeChannelFlowResponseFilterSensitiveLog"),zu=s(C=>({...C,...C.ChannelMembership&&{ChannelMembership:Au(C.ChannelMembership)}}),"DescribeChannelMembershipResponseFilterSensitiveLog"),Gu=s(C=>({...C,...C.ChannelMembership&&{ChannelMembership:Md(C.ChannelMembership)}}),"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog"),ju=s(C=>({...C,...C.Channel&&{Channel:Rd(C.Channel)}}),"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog"),$u=s(C=>({...C,...C.ChannelModerator&&{ChannelModerator:Du(C.ChannelModerator)}}),"DescribeChannelModeratorResponseFilterSensitiveLog"),Ku=s(C=>({...C,...C.Member&&{Member:Br(C.Member)},...C.Preferences&&{Preferences:_c(C.Preferences)}}),"GetChannelMembershipPreferencesResponseFilterSensitiveLog"),Ju=s(C=>({...C,...C.ChannelMessage&&{ChannelMessage:Pu(C.ChannelMessage)}}),"GetChannelMessageResponseFilterSensitiveLog"),Yu=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListChannelBansRequestFilterSensitiveLog"),Xu=s(C=>({...C,...C.NextToken&&{NextToken:_n},...C.ChannelBans&&{ChannelBans:C.ChannelBans.map(y=>Tu(y))}}),"ListChannelBansResponseFilterSensitiveLog"),Qu=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListChannelFlowsRequestFilterSensitiveLog"),Zu=s(C=>({...C,...C.ChannelFlows&&{ChannelFlows:C.ChannelFlows.map(y=>Ou(y))},...C.NextToken&&{NextToken:_n}}),"ListChannelFlowsResponseFilterSensitiveLog"),qu=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListChannelMembershipsRequestFilterSensitiveLog"),ef=s(C=>({...C,...C.ChannelMemberships&&{ChannelMemberships:C.ChannelMemberships.map(y=>Ru(y))},...C.NextToken&&{NextToken:_n}}),"ListChannelMembershipsResponseFilterSensitiveLog"),tf=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog"),nf=s(C=>({...C,...C.ChannelMemberships&&{ChannelMemberships:C.ChannelMemberships.map(y=>Md(y))},...C.NextToken&&{NextToken:_n}}),"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog"),rf=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListChannelMessagesRequestFilterSensitiveLog"),of=s(C=>({...C,...C.NextToken&&{NextToken:_n},...C.ChannelMessages&&{ChannelMessages:C.ChannelMessages.map(y=>ku(y))}}),"ListChannelMessagesResponseFilterSensitiveLog"),sf=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListChannelModeratorsRequestFilterSensitiveLog"),af=s(C=>({...C,...C.NextToken&&{NextToken:_n},...C.ChannelModerators&&{ChannelModerators:C.ChannelModerators.map(y=>Nu(y))}}),"ListChannelModeratorsResponseFilterSensitiveLog"),lf=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListChannelsRequestFilterSensitiveLog"),cf=s(C=>({...C,...C.Channels&&{Channels:C.Channels.map(y=>cl(y))},...C.NextToken&&{NextToken:_n}}),"ListChannelsResponseFilterSensitiveLog"),df=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog"),uf=s(C=>({...C,...C.Channels&&{Channels:C.Channels.map(y=>bu(y))},...C.NextToken&&{NextToken:_n}}),"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog"),ff=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog"),hf=s(C=>({...C,...C.Channels&&{Channels:C.Channels.map(y=>Rd(y))},...C.NextToken&&{NextToken:_n}}),"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog"),pf=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListSubChannelsRequestFilterSensitiveLog"),mf=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"ListSubChannelsResponseFilterSensitiveLog"),gf=s(C=>({...C,...C.Tags&&{Tags:C.Tags.map(y=>dl(y))}}),"ListTagsForResourceResponseFilterSensitiveLog"),Sf=s(C=>({...C,...C.Preferences&&{Preferences:_c(C.Preferences)}}),"PutChannelMembershipPreferencesRequestFilterSensitiveLog"),vf=s(C=>({...C,...C.Member&&{Member:Br(C.Member)},...C.Preferences&&{Preferences:_c(C.Preferences)}}),"PutChannelMembershipPreferencesResponseFilterSensitiveLog"),yf=s(C=>({...C,...C.NextToken&&{NextToken:_n}}),"SearchChannelsRequestFilterSensitiveLog"),Ef=s(C=>({...C,...C.Channels&&{Channels:C.Channels.map(y=>cl(y))},...C.NextToken&&{NextToken:_n}}),"SearchChannelsResponseFilterSensitiveLog"),bf=s(C=>({...C,...C.Content&&{Content:_n},...C.Metadata&&{Metadata:_n},...C.ClientRequestToken&&{ClientRequestToken:_n},...C.PushNotification&&{PushNotification:Ad(C.PushNotification)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((y,b)=>{let[I,z]=b;return y[I]=ll(z),y},{})},...C.ContentType&&{ContentType:_n}}),"SendChannelMessageRequestFilterSensitiveLog"),_f=s(C=>({...C,...C.Tags&&{Tags:C.Tags.map(y=>dl(y))}}),"TagResourceRequestFilterSensitiveLog"),Tf=s(C=>({...C,...C.TagKeys&&{TagKeys:_n}}),"UntagResourceRequestFilterSensitiveLog"),Cf=s(C=>({...C,...C.Name&&{Name:_n},...C.Metadata&&{Metadata:_n}}),"UpdateChannelRequestFilterSensitiveLog"),If=s(C=>({...C,...C.Processors&&{Processors:C.Processors.map(y=>al(y))},...C.Name&&{Name:_n}}),"UpdateChannelFlowRequestFilterSensitiveLog"),wf=s(C=>({...C,...C.Content&&{Content:_n},...C.Metadata&&{Metadata:_n},...C.ContentType&&{ContentType:_n}}),"UpdateChannelMessageRequestFilterSensitiveLog"),Hh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/channel-flow`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return ye=JSON.stringify(x(y,{ChannelFlowArn:[]})),new Wn({protocol:z,hostname:I,port:G,method:"PUT",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_AssociateChannelFlowCommand")}(),Wh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/memberships`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const ye=Ct({operation:[,"batch-create"]});let le;return le=JSON.stringify(x(y,{MemberArns:_t=>Ne(_t),SubChannelId:[],Type:[]})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_BatchCreateChannelMembershipCommand")}(),zh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={"content-type":"application/json"};let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const ye=Ct({operation:[,"channel-flow-callback"]});let le;return le=JSON.stringify(x(y,{CallbackId:[!0,_t=>_t??Yn()],ChannelMessage:_t=>Ne(_t),DeleteResource:[]})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ChannelFlowCallbackCommand")}(),Gh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer}),re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels`;let ye;return ye=JSON.stringify(x(y,{AppInstanceArn:[],ChannelId:[],ClientRequestToken:[!0,le=>le??Yn()],ElasticChannelConfiguration:le=>Ne(le),ExpirationSettings:le=>Ne(le),MemberArns:le=>Ne(le),Metadata:[],Mode:[],ModeratorArns:le=>Ne(le),Name:[],Privacy:[],Tags:le=>Ne(le)})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_CreateChannelCommand")}(),jh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/bans`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return ye=JSON.stringify(x(y,{MemberArn:[]})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_CreateChannelBanCommand")}(),$h=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={"content-type":"application/json"},re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channel-flows`;let ye;return ye=JSON.stringify(x(y,{AppInstanceArn:[],ClientRequestToken:[!0,le=>le??Yn()],Name:[],Processors:le=>Ne(le),Tags:le=>Ne(le)})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_CreateChannelFlowCommand")}(),Kh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/memberships`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return ye=JSON.stringify(x(y,{MemberArn:[],SubChannelId:[],Type:[]})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_CreateChannelMembershipCommand")}(),Jh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/moderators`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return ye=JSON.stringify(x(y,{ChannelModeratorArn:[]})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_CreateChannelModeratorCommand")}(),Yh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"DELETE",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelCommand")}(),Xh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/bans/{MemberArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"DELETE",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelBanCommand")}(),Qh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={};let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channel-flows/{ChannelFlowArn}`;re=je(re,y,"ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"DELETE",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelFlowCommand")}(),Zh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/memberships/{MemberArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MemberArn",()=>y.MemberArn,"{MemberArn}",!1);const ye=Ct({"sub-channel-id":[,y.SubChannelId]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"DELETE",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelMembershipCommand")}(),qh=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/messages/{MessageId}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MessageId",()=>y.MessageId,"{MessageId}",!1);const ye=Ct({"sub-channel-id":[,y.SubChannelId]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"DELETE",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelMessageCommand")}(),ep=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"ChannelModeratorArn",()=>y.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"DELETE",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DeleteChannelModeratorCommand")}(),tp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={};let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/app-instances/{AppInstanceArn}/streaming-configurations`;re=je(re,y,"AppInstanceArn",()=>y.AppInstanceArn,"{AppInstanceArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"DELETE",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DeleteMessagingStreamingConfigurationsCommand")}(),np=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelCommand")}(),ip=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/bans/{MemberArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelBanCommand")}(),rp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={};let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channel-flows/{ChannelFlowArn}`;re=je(re,y,"ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelFlowCommand")}(),op=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/memberships/{MemberArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MemberArn",()=>y.MemberArn,"{MemberArn}",!1);const ye=Ct({"sub-channel-id":[,y.SubChannelId]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelMembershipCommand")}(),sp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const ye=Ct({scope:[,"app-instance-user-membership"],"app-instance-user-arn":[,Mn(y.AppInstanceUserArn,"AppInstanceUserArn")]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelMembershipForAppInstanceUserCommand")}(),ap=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const ye=Ct({scope:[,"app-instance-user-moderated-channel"],"app-instance-user-arn":[,Mn(y.AppInstanceUserArn,"AppInstanceUserArn")]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelModeratedByAppInstanceUserCommand")}(),lp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"ChannelModeratorArn",()=>y.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DescribeChannelModeratorCommand")}(),cp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"DELETE",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_DisassociateChannelFlowCommand")}(),dp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_GetChannelMembershipPreferencesCommand")}(),up=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/messages/{MessageId}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MessageId",()=>y.MessageId,"{MessageId}",!1);const ye=Ct({"sub-channel-id":[,y.SubChannelId]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_GetChannelMessageCommand")}(),fp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/messages/{MessageId}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MessageId",()=>y.MessageId,"{MessageId}",!1);const ye=Ct({scope:[,"message-status"],"sub-channel-id":[,y.SubChannelId]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_GetChannelMessageStatusCommand")}(),hp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={"content-type":"application/json"},re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/endpoints/messaging-session`;let ye;return ye="",new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_GetMessagingSessionEndpointCommand")}(),ul=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={};let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/app-instances/{AppInstanceArn}/streaming-configurations`;re=je(re,y,"AppInstanceArn",()=>y.AppInstanceArn,"{AppInstanceArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_GetMessagingStreamingConfigurationsCommand")}(),pp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/bans`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const ye=Ct({"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListChannelBansCommand")}(),mp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={},re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channel-flows`,ye=Ct({"app-instance-arn":[,Mn(y.AppInstanceArn,"AppInstanceArn")],"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListChannelFlowsCommand")}(),gp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/memberships`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const ye=Ct({type:[,y.Type],"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken],"sub-channel-id":[,y.SubChannelId]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListChannelMembershipsCommand")}(),Sp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer}),re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels`,ye=Ct({scope:[,"app-instance-user-memberships"],"app-instance-user-arn":[,y.AppInstanceUserArn],"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListChannelMembershipsForAppInstanceUserCommand")}(),vp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/messages`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const ye=Ct({"sort-order":[,y.SortOrder],"not-before":[()=>y.NotBefore!==void 0,()=>(y.NotBefore.toISOString().split(".")[0]+"Z").toString()],"not-after":[()=>y.NotAfter!==void 0,()=>(y.NotAfter.toISOString().split(".")[0]+"Z").toString()],"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken],"sub-channel-id":[,y.SubChannelId]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListChannelMessagesCommand")}(),Of=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/moderators`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const ye=Ct({"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListChannelModeratorsCommand")}(),yp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer}),re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels`,ye=Ct({"app-instance-arn":[,Mn(y.AppInstanceArn,"AppInstanceArn")],privacy:[,y.Privacy],"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListChannelsCommand")}(),Ep=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={},re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels`,ye=Ct({scope:[,"channel-flow-associations"],"channel-flow-arn":[,Mn(y.ChannelFlowArn,"ChannelFlowArn")],"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListChannelsAssociatedWithChannelFlowCommand")}(),bp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer}),re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels`,ye=Ct({scope:[,"app-instance-user-moderated-channels"],"app-instance-user-arn":[,y.AppInstanceUserArn],"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListChannelsModeratedByAppInstanceUserCommand")}(),_p=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/subchannels`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);const ye=Ct({"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListSubChannelsCommand")}(),Tp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={},re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/tags`,ye=Ct({arn:[,Mn(y.ResourceARN,"ResourceARN")]});let le;return new Wn({protocol:z,hostname:I,port:G,method:"GET",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_ListTagsForResourceCommand")}(),Cp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/expiration-settings`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return ye=JSON.stringify(x(y,{ExpirationSettings:le=>Ne(le)})),new Wn({protocol:z,hostname:I,port:G,method:"PUT",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_PutChannelExpirationSettingsCommand")}(),Ip=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MemberArn",()=>y.MemberArn,"{MemberArn}",!1);let ye;return ye=JSON.stringify(x(y,{Preferences:le=>Ne(le)})),new Wn({protocol:z,hostname:I,port:G,method:"PUT",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_PutChannelMembershipPreferencesCommand")}(),wp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={"content-type":"application/json"};let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/app-instances/{AppInstanceArn}/streaming-configurations`;re=je(re,y,"AppInstanceArn",()=>y.AppInstanceArn,"{AppInstanceArn}",!1);let ye;return ye=JSON.stringify(x(y,{StreamingConfigurations:le=>Ne(le)})),new Wn({protocol:z,hostname:I,port:G,method:"PUT",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_PutMessagingStreamingConfigurationsCommand")}(),Op=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/messages/{MessageId}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MessageId",()=>y.MessageId,"{MessageId}",!1);const ye=Ct({operation:[,"redact"]});let le;return le=JSON.stringify(x(y,{SubChannelId:[]})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_RedactChannelMessageCommand")}(),Ap=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer}),re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels`,ye=Ct({operation:[,"search"],"max-results":[()=>y.MaxResults!==void 0,()=>y.MaxResults.toString()],"next-token":[,y.NextToken]});let le;return le=JSON.stringify(x(y,{Fields:_t=>Ne(_t)})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_SearchChannelsCommand")}(),Mp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/messages`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return ye=JSON.stringify(x(y,{ClientRequestToken:[!0,le=>le??Yn()],Content:[],ContentType:[],MessageAttributes:le=>Ne(le),Metadata:[],Persistence:[],PushNotification:le=>Ne(le),SubChannelId:[],Type:[]})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_SendChannelMessageCommand")}(),Rp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={"content-type":"application/json"},re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/tags`,ye=Ct({operation:[,"tag-resource"]});let le;return le=JSON.stringify(x(y,{ResourceARN:[],Tags:_t=>Ne(_t)})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_TagResourceCommand")}(),Pp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={"content-type":"application/json"},re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/tags`,ye=Ct({operation:[,"untag-resource"]});let le;return le=JSON.stringify(x(y,{ResourceARN:[],TagKeys:_t=>Ne(_t)})),new Wn({protocol:z,hostname:I,port:G,method:"POST",headers:ue,path:re,query:ye,body:le})});return s(function(b,I){return C.apply(this,arguments)},"se_UntagResourceCommand")}(),kp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return ye=JSON.stringify(x(y,{Metadata:[],Mode:[],Name:[]})),new Wn({protocol:z,hostname:I,port:G,method:"PUT",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_UpdateChannelCommand")}(),Dp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue={"content-type":"application/json"};let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channel-flows/{ChannelFlowArn}`;re=je(re,y,"ChannelFlowArn",()=>y.ChannelFlowArn,"{ChannelFlowArn}",!1);let ye;return ye=JSON.stringify(x(y,{Name:[],Processors:le=>Ne(le)})),new Wn({protocol:z,hostname:I,port:G,method:"PUT",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_UpdateChannelFlowCommand")}(),Np=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"content-type":"application/json","x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/messages/{MessageId}`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1),re=je(re,y,"MessageId",()=>y.MessageId,"{MessageId}",!1);let ye;return ye=JSON.stringify(x(y,{Content:[],ContentType:[],Metadata:[],SubChannelId:[]})),new Wn({protocol:z,hostname:I,port:G,method:"PUT",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_UpdateChannelMessageCommand")}(),Lp=function(){var C=(0,h.coroutine)(function*(y,b){const{hostname:I,protocol:z="https",port:G,path:Y}=yield b.endpoint(),ue=Ct({},Oi,{"x-amz-chime-bearer":y.ChimeBearer});let re=`${Y!=null&&Y.endsWith("/")?Y.slice(0,-1):Y||""}/channels/{ChannelArn}/readMarker`;re=je(re,y,"ChannelArn",()=>y.ChannelArn,"{ChannelArn}",!1);let ye;return new Wn({protocol:z,hostname:I,port:G,method:"PUT",headers:ue,path:re,body:ye})});return s(function(b,I){return C.apply(this,arguments)},"se_UpdateChannelReadMarkerCommand")}(),xp=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Bp(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_AssociateChannelFlowCommand")}(),Bp=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_AssociateChannelFlowCommandError")}(),Fp=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Up(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{BatchChannelMemberships:Ne,Errors:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_BatchCreateChannelMembershipCommand")}(),Up=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ws(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_BatchCreateChannelMembershipCommandError")}(),Vp=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Hp(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{CallbackId:jt,ChannelArn:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ChannelFlowCallbackCommand")}(),Hp=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ChannelFlowCallbackCommandError")}(),Wp=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==201&&y.statusCode>=300)return zp(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelCommand")}(),zp=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ws(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelCommandError")}(),Gp=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==201&&y.statusCode>=300)return jp(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,Member:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelBanCommand")}(),jp=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ws(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelBanCommandError")}(),$p=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==201&&y.statusCode>=300)return Kp(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelFlowArn:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelFlowCommand")}(),Kp=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ws(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelFlowCommandError")}(),Jp=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==201&&y.statusCode>=300)return Yp(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,Member:Ne,SubChannelId:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelMembershipCommand")}(),Yp=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ws(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelMembershipCommandError")}(),Xp=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==201&&y.statusCode>=300)return Qp(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,ChannelModerator:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelModeratorCommand")}(),Qp=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ws(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_CreateChannelModeratorCommandError")}(),Zp=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return qp(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelCommand")}(),qp=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelCommandError")}(),em=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return tm(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelBanCommand")}(),tm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelBanCommandError")}(),nm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return im(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelFlowCommand")}(),im=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelFlowCommandError")}(),rm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return om(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelMembershipCommand")}(),om=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelMembershipCommandError")}(),sm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return am(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelMessageCommand")}(),am=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelMessageCommandError")}(),lm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return cm(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelModeratorCommand")}(),cm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteChannelModeratorCommandError")}(),dm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return um(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommand")}(),um=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommandError")}(),fm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return hm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{Channel:Y=>Pg(Y,b)});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelCommand")}(),hm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelCommandError")}(),pm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return mm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelBan:Y=>kg(Y,b)});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelBanCommand")}(),mm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelBanCommandError")}(),gm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Sm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelFlow:Y=>Dg(Y,b)});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelFlowCommand")}(),Sm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelFlowCommandError")}(),vm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return ym(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelMembership:Y=>Ng(Y,b)});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelMembershipCommand")}(),ym=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelMembershipCommandError")}(),Em=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return bm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelMembership:Y=>Af(Y,b)});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommand")}(),bm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommandError")}(),_m=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Tm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{Channel:Y=>Rf(Y,b)});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommand")}(),Tm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommandError")}(),Cm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Im(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelModerator:Y=>Ug(Y,b)});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelModeratorCommand")}(),Im=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DescribeChannelModeratorCommandError")}(),wm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return Om(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_DisassociateChannelFlowCommand")}(),Om=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_DisassociateChannelFlowCommandError")}(),Am=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Mm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,Member:Ne,Preferences:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommand")}(),Mm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommandError")}(),Rm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Pm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelMessage:Y=>Mf(Y,b)});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_GetChannelMessageCommand")}(),Pm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_GetChannelMessageCommandError")}(),km=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Dm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{Status:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_GetChannelMessageStatusCommand")}(),Dm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_GetChannelMessageStatusCommandError")}(),Nm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Lm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{Endpoint:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_GetMessagingSessionEndpointCommand")}(),Lm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_GetMessagingSessionEndpointCommandError")}(),xm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Bm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{StreamingConfigurations:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommand")}(),Bm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommandError")}(),Fm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Um(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,ChannelBans:Ne,NextToken:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelBansCommand")}(),Um=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelBansCommandError")}(),Vm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Hm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelFlows:Ne,NextToken:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelFlowsCommand")}(),Hm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelFlowsCommandError")}(),Wm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return zm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,ChannelMemberships:Ne,NextToken:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelMembershipsCommand")}(),zm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelMembershipsCommandError")}(),Gm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return jm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelMemberships:Y=>Lg(Y,b),NextToken:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommand")}(),jm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommandError")}(),$m=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Km(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,ChannelMessages:Y=>Bg(Y,b),NextToken:jt,SubChannelId:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelMessagesCommand")}(),Km=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelMessagesCommandError")}(),Jm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Ym(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,ChannelModerators:Ne,NextToken:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelModeratorsCommand")}(),Ym=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelModeratorsCommandError")}(),Xm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Qm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{Channels:Y=>Pf(Y,b),NextToken:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelsCommand")}(),Qm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelsCommandError")}(),Zm=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return qm(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{Channels:Ne,NextToken:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommand")}(),qm=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommandError")}(),eg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return tg(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{Channels:Y=>Fg(Y,b),NextToken:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommand")}(),tg=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommandError")}(),ng=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return ig(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,NextToken:jt,SubChannels:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListSubChannelsCommand")}(),ig=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListSubChannelsCommandError")}(),rg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return og(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{Tags:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_ListTagsForResourceCommand")}(),og=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_ListTagsForResourceCommandError")}(),sg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return ag(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,ExpirationSettings:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_PutChannelExpirationSettingsCommand")}(),ag=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_PutChannelExpirationSettingsCommandError")}(),lg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return cg(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,Member:Ne,Preferences:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommand")}(),cg=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommandError")}(),dg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return ug(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{StreamingConfigurations:Ne});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommand")}(),ug=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Go(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommandError")}(),fg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return hg(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,MessageId:jt,SubChannelId:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_RedactChannelMessageCommand")}(),hg=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_RedactChannelMessageCommandError")}(),pg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return mg(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{Channels:Y=>Pf(Y,b),NextToken:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_SearchChannelsCommand")}(),mg=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_SearchChannelsCommandError")}(),gg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==201&&y.statusCode>=300)return Sg(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,MessageId:jt,Status:Ne,SubChannelId:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_SendChannelMessageCommand")}(),Sg=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_SendChannelMessageCommandError")}(),vg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return yg(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_TagResourceCommand")}(),yg=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ws(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_TagResourceCommandError")}(),Eg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==204&&y.statusCode>=300)return bg(y,b);const I=Ct({$metadata:Ln(y)});return yield wo(y.body,b),I});return s(function(b,I){return C.apply(this,arguments)},"de_UntagResourceCommand")}(),bg=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_UntagResourceCommandError")}(),_g=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Tg(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelCommand")}(),Tg=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelCommandError")}(),Cg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Ig(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelFlowArn:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelFlowCommand")}(),Ig=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelFlowCommandError")}(),wg=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Og(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt,MessageId:jt,Status:Ne,SubChannelId:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelMessageCommand")}(),Og=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelMessageCommandError")}(),Ag=function(){var C=(0,h.coroutine)(function*(y,b){if(y.statusCode!==200&&y.statusCode>=300)return Mg(y,b);const I=Ct({$metadata:Ln(y)}),z=Mn(vi(yield Ei(y.body,b)),"body"),G=x(z,{ChannelArn:jt});return Object.assign(I,G),I});return s(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelReadMarkerCommand")}(),Mg=function(){var C=(0,h.coroutine)(function*(y,b){const I={...y,body:yield ni(y.body,b)},z=ii(y,I.body);switch(z){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield si(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield Fr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Qn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Zn(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield qn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield ei(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield ti(I,b);default:const G=I.body;return Xn({output:y,parsedBody:G,errorCode:z})}});return s(function(b,I){return C.apply(this,arguments)},"de_UpdateChannelReadMarkerCommandError")}(),Xn=yc(po),si=function(){var C=(0,h.coroutine)(function*(y,b){const I=Ct({}),z=y.body,G=x(z,{Code:jt,Message:jt});Object.assign(I,G);const Y=new Za({$metadata:Ln(y),...I});return Io(Y,y.body)});return s(function(b,I){return C.apply(this,arguments)},"de_BadRequestExceptionRes")}(),Fr=function(){var C=(0,h.coroutine)(function*(y,b){const I=Ct({}),z=y.body,G=x(z,{Code:jt,Message:jt});Object.assign(I,G);const Y=new qa({$metadata:Ln(y),...I});return Io(Y,y.body)});return s(function(b,I){return C.apply(this,arguments)},"de_ConflictExceptionRes")}(),Qn=function(){var C=(0,h.coroutine)(function*(y,b){const I=Ct({}),z=y.body,G=x(z,{Code:jt,Message:jt});Object.assign(I,G);const Y=new el({$metadata:Ln(y),...I});return Io(Y,y.body)});return s(function(b,I){return C.apply(this,arguments)},"de_ForbiddenExceptionRes")}(),Go=function(){var C=(0,h.coroutine)(function*(y,b){const I=Ct({}),z=y.body,G=x(z,{Code:jt,Message:jt});Object.assign(I,G);const Y=new tl({$metadata:Ln(y),...I});return Io(Y,y.body)});return s(function(b,I){return C.apply(this,arguments)},"de_NotFoundExceptionRes")}(),Ws=function(){var C=(0,h.coroutine)(function*(y,b){const I=Ct({}),z=y.body,G=x(z,{Code:jt,Message:jt});Object.assign(I,G);const Y=new sl({$metadata:Ln(y),...I});return Io(Y,y.body)});return s(function(b,I){return C.apply(this,arguments)},"de_ResourceLimitExceededExceptionRes")}(),Zn=function(){var C=(0,h.coroutine)(function*(y,b){const I=Ct({}),z=y.body,G=x(z,{Code:jt,Message:jt});Object.assign(I,G);const Y=new nl({$metadata:Ln(y),...I});return Io(Y,y.body)});return s(function(b,I){return C.apply(this,arguments)},"de_ServiceFailureExceptionRes")}(),qn=function(){var C=(0,h.coroutine)(function*(y,b){const I=Ct({}),z=y.body,G=x(z,{Code:jt,Message:jt});Object.assign(I,G);const Y=new il({$metadata:Ln(y),...I});return Io(Y,y.body)});return s(function(b,I){return C.apply(this,arguments)},"de_ServiceUnavailableExceptionRes")}(),ei=function(){var C=(0,h.coroutine)(function*(y,b){const I=Ct({}),z=y.body,G=x(z,{Code:jt,Message:jt});Object.assign(I,G);const Y=new rl({$metadata:Ln(y),...I});return Io(Y,y.body)});return s(function(b,I){return C.apply(this,arguments)},"de_ThrottledClientExceptionRes")}(),ti=function(){var C=(0,h.coroutine)(function*(y,b){const I=Ct({}),z=y.body,G=x(z,{Code:jt,Message:jt});Object.assign(I,G);const Y=new ol({$metadata:Ln(y),...I});return Io(Y,y.body)});return s(function(b,I){return C.apply(this,arguments)},"de_UnauthorizedClientExceptionRes")}(),Rg=s((C,y)=>x(C,{ReadMarkerTimestamp:b=>Mn(jr(cr(b))),SubChannelId:jt,Type:jt}),"de_AppInstanceUserMembershipSummary"),Pg=s((C,y)=>x(C,{ChannelArn:jt,ChannelFlowArn:jt,CreatedBy:Ne,CreatedTimestamp:b=>Mn(jr(cr(b))),ElasticChannelConfiguration:Ne,ExpirationSettings:Ne,LastMessageTimestamp:b=>Mn(jr(cr(b))),LastUpdatedTimestamp:b=>Mn(jr(cr(b))),Metadata:jt,Mode:jt,Name:jt,Privacy:jt}),"de_Channel"),kg=s((C,y)=>x(C,{ChannelArn:jt,CreatedBy:Ne,CreatedTimestamp:b=>Mn(jr(cr(b))),Member:Ne}),"de_ChannelBan"),Dg=s((C,y)=>x(C,{ChannelFlowArn:jt,CreatedTimestamp:b=>Mn(jr(cr(b))),LastUpdatedTimestamp:b=>Mn(jr(cr(b))),Name:jt,Processors:Ne}),"de_ChannelFlow"),Ng=s((C,y)=>x(C,{ChannelArn:jt,CreatedTimestamp:b=>Mn(jr(cr(b))),InvitedBy:Ne,LastUpdatedTimestamp:b=>Mn(jr(cr(b))),Member:Ne,SubChannelId:jt,Type:jt}),"de_ChannelMembership"),Af=s((C,y)=>x(C,{AppInstanceUserMembershipSummary:b=>Rg(b,y),ChannelSummary:b=>Pd(b,y)}),"de_ChannelMembershipForAppInstanceUserSummary"),Lg=s((C,y)=>(C||[]).filter(I=>I!=null).map(I=>Af(I,y)),"de_ChannelMembershipForAppInstanceUserSummaryList"),Mf=s((C,y)=>x(C,{ChannelArn:jt,Content:jt,ContentType:jt,CreatedTimestamp:b=>Mn(jr(cr(b))),LastEditedTimestamp:b=>Mn(jr(cr(b))),LastUpdatedTimestamp:b=>Mn(jr(cr(b))),MessageAttributes:Ne,MessageId:jt,Metadata:jt,Persistence:jt,Redacted:Va,Sender:Ne,Status:Ne,SubChannelId:jt,Type:jt}),"de_ChannelMessage"),xg=s((C,y)=>x(C,{Content:jt,ContentType:jt,CreatedTimestamp:b=>Mn(jr(cr(b))),LastEditedTimestamp:b=>Mn(jr(cr(b))),LastUpdatedTimestamp:b=>Mn(jr(cr(b))),MessageAttributes:Ne,MessageId:jt,Metadata:jt,Redacted:Va,Sender:Ne,Status:Ne,Type:jt}),"de_ChannelMessageSummary"),Bg=s((C,y)=>(C||[]).filter(I=>I!=null).map(I=>xg(I,y)),"de_ChannelMessageSummaryList"),Rf=s((C,y)=>x(C,{ChannelSummary:b=>Pd(b,y)}),"de_ChannelModeratedByAppInstanceUserSummary"),Fg=s((C,y)=>(C||[]).filter(I=>I!=null).map(I=>Rf(I,y)),"de_ChannelModeratedByAppInstanceUserSummaryList"),Ug=s((C,y)=>x(C,{ChannelArn:jt,CreatedBy:Ne,CreatedTimestamp:b=>Mn(jr(cr(b))),Moderator:Ne}),"de_ChannelModerator"),Pd=s((C,y)=>x(C,{ChannelArn:jt,LastMessageTimestamp:b=>Mn(jr(cr(b))),Metadata:jt,Mode:jt,Name:jt,Privacy:jt}),"de_ChannelSummary"),Pf=s((C,y)=>(C||[]).filter(I=>I!=null).map(I=>Pd(I,y)),"de_ChannelSummaryList");var kd,Dd;const Ln=s(C=>({httpStatusCode:C.statusCode,requestId:(Dd=(kd=C.headers["x-amzn-requestid"])!==null&&kd!==void 0?kd:C.headers["x-amzn-request-id"])!==null&&Dd!==void 0?Dd:C.headers["x-amz-request-id"],extendedRequestId:C.headers["x-amz-id-2"],cfId:C.headers["x-amz-cf-id"]}),"Aws_restJson1_deserializeMetadata"),wo=s(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Uint8Array,y=arguments.length>1?arguments[1]:void 0;return C instanceof Uint8Array?Promise.resolve(C):y.streamCollector(C)||Promise.resolve(new Uint8Array)},"collectBody"),Vg=s((C,y)=>wo(C,y).then(b=>y.utf8Encoder(b)),"collectBodyString"),Oi=s(C=>C!=null&&C!==""&&(!Object.getOwnPropertyNames(C).includes("length")||C.length!=0)&&(!Object.getOwnPropertyNames(C).includes("size")||C.size!=0),"isSerializableHeaderValue"),Ei=s((C,y)=>Vg(C,y).then(b=>b.length?JSON.parse(b):{}),"parseBody"),ni=function(){var C=(0,h.coroutine)(function*(y,b){const I=yield Ei(y,b);var z;return I.message=(z=I.message)!==null&&z!==void 0?z:I.Message,I});return s(function(b,I){return C.apply(this,arguments)},"parseErrorBody")}(),ii=s((C,y)=>{const b=s((G,Y)=>Object.keys(G).find(ue=>ue.toLowerCase()===Y.toLowerCase()),"findKey"),I=s(G=>{let Y=G;return typeof Y=="number"&&(Y=Y.toString()),Y.indexOf(",")>=0&&(Y=Y.split(",")[0]),Y.indexOf(":")>=0&&(Y=Y.split(":")[0]),Y.indexOf("#")>=0&&(Y=Y.split("#")[1]),Y},"sanitizeErrorCode"),z=b(C.headers,"x-amzn-errortype");if(z!==void 0)return I(C.headers[z]);if(y.code!==void 0)return I(y.code);if(y.__type!==void 0)return I(y.__type)},"loadRestJsonErrorCode");class fl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,fl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"AssociateChannelFlowCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Hh(y,b)}deserialize(y,b){return xp(y,b)}constructor(y){super(),this.input=y}}s(fl,"AssociateChannelFlowCommand");class hl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,hl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"BatchCreateChannelMembershipCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:yu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Wh(y,b)}deserialize(y,b){return Fp(y,b)}constructor(y){super(),this.input=y}}s(hl,"BatchCreateChannelMembershipCommand");class pl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,pl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ChannelFlowCallbackCommand",inputFilterSensitiveLog:wu,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return zh(y,b)}deserialize(y,b){return Vp(y,b)}constructor(y){super(),this.input=y}}s(pl,"ChannelFlowCallbackCommand");class ml extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,ml.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelBanCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:xu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return jh(y,b)}deserialize(y,b){return Gp(y,b)}constructor(y){super(),this.input=y}}s(ml,"CreateChannelBanCommand");class gl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,gl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelCommand",inputFilterSensitiveLog:Lu,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Gh(y,b)}deserialize(y,b){return Wp(y,b)}constructor(y){super(),this.input=y}}s(gl,"CreateChannelCommand");class Sl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Sl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelFlowCommand",inputFilterSensitiveLog:Bu,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return $h(y,b)}deserialize(y,b){return $p(y,b)}constructor(y){super(),this.input=y}}s(Sl,"CreateChannelFlowCommand");class vl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,vl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelMembershipCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Fu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Kh(y,b)}deserialize(y,b){return Jp(y,b)}constructor(y){super(),this.input=y}}s(vl,"CreateChannelMembershipCommand");class yl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,yl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelModeratorCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Uu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Jh(y,b)}deserialize(y,b){return Xp(y,b)}constructor(y){super(),this.input=y}}s(yl,"CreateChannelModeratorCommand");class El extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,El.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelBanCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Xh(y,b)}deserialize(y,b){return em(y,b)}constructor(y){super(),this.input=y}}s(El,"DeleteChannelBanCommand");class bl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,bl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Yh(y,b)}deserialize(y,b){return Zp(y,b)}constructor(y){super(),this.input=y}}s(bl,"DeleteChannelCommand");class _l extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,_l.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelFlowCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Qh(y,b)}deserialize(y,b){return nm(y,b)}constructor(y){super(),this.input=y}}s(_l,"DeleteChannelFlowCommand");class Tl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Tl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMembershipCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Zh(y,b)}deserialize(y,b){return rm(y,b)}constructor(y){super(),this.input=y}}s(Tl,"DeleteChannelMembershipCommand");class J extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,J.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMessageCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return qh(y,b)}deserialize(y,b){return sm(y,b)}constructor(y){super(),this.input=y}}s(J,"DeleteChannelMessageCommand");class Cl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Cl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelModeratorCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return ep(y,b)}deserialize(y,b){return lm(y,b)}constructor(y){super(),this.input=y}}s(Cl,"DeleteChannelModeratorCommand");class Il extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Il.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DeleteMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return tp(y,b)}deserialize(y,b){return dm(y,b)}constructor(y){super(),this.input=y}}s(Il,"DeleteMessagingStreamingConfigurationsCommand");class wl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,wl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelBanCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Hu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return ip(y,b)}deserialize(y,b){return pm(y,b)}constructor(y){super(),this.input=y}}s(wl,"DescribeChannelBanCommand");class Ol extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ol.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Vu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return np(y,b)}deserialize(y,b){return fm(y,b)}constructor(y){super(),this.input=y}}s(Ol,"DescribeChannelCommand");class Al extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Al.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelFlowCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Wu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return rp(y,b)}deserialize(y,b){return gm(y,b)}constructor(y){super(),this.input=y}}s(Al,"DescribeChannelFlowCommand");class Ml extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ml.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:zu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return op(y,b)}deserialize(y,b){return vm(y,b)}constructor(y){super(),this.input=y}}s(Ml,"DescribeChannelMembershipCommand");class Rl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Rl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipForAppInstanceUserCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Gu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return sp(y,b)}deserialize(y,b){return Em(y,b)}constructor(y){super(),this.input=y}}s(Rl,"DescribeChannelMembershipForAppInstanceUserCommand");class Pl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Pl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:ju},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return ap(y,b)}deserialize(y,b){return _m(y,b)}constructor(y){super(),this.input=y}}s(Pl,"DescribeChannelModeratedByAppInstanceUserCommand");class kl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,kl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratorCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:$u},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return lp(y,b)}deserialize(y,b){return Cm(y,b)}constructor(y){super(),this.input=y}}s(kl,"DescribeChannelModeratorCommand");class Dl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Dl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"DisassociateChannelFlowCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return cp(y,b)}deserialize(y,b){return wm(y,b)}constructor(y){super(),this.input=y}}s(Dl,"DisassociateChannelFlowCommand");class Nl extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Nl.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMembershipPreferencesCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Ku},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return dp(y,b)}deserialize(y,b){return Am(y,b)}constructor(y){super(),this.input=y}}s(Nl,"GetChannelMembershipPreferencesCommand");class Ll extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ll.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Ju},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return up(y,b)}deserialize(y,b){return Rm(y,b)}constructor(y){super(),this.input=y}}s(Ll,"GetChannelMessageCommand");class xi extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,xi.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageStatusCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return fp(y,b)}deserialize(y,b){return km(y,b)}constructor(y){super(),this.input=y}}s(xi,"GetChannelMessageStatusCommand");class Dn extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Dn.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingSessionEndpointCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return hp(y,b)}deserialize(y,b){return Nm(y,b)}constructor(y){super(),this.input=y}}s(Dn,"GetMessagingSessionEndpointCommand");class Es extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Es.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return ul(y,b)}deserialize(y,b){return xm(y,b)}constructor(y){super(),this.input=y}}s(Es,"GetMessagingStreamingConfigurationsCommand");class bs extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,bs.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelBansCommand",inputFilterSensitiveLog:Yu,outputFilterSensitiveLog:Xu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return pp(y,b)}deserialize(y,b){return Fm(y,b)}constructor(y){super(),this.input=y}}s(bs,"ListChannelBansCommand");class er extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,er.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelFlowsCommand",inputFilterSensitiveLog:Qu,outputFilterSensitiveLog:Zu},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return mp(y,b)}deserialize(y,b){return Vm(y,b)}constructor(y){super(),this.input=y}}s(er,"ListChannelFlowsCommand");class _s extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,_s.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsCommand",inputFilterSensitiveLog:qu,outputFilterSensitiveLog:ef},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return gp(y,b)}deserialize(y,b){return Wm(y,b)}constructor(y){super(),this.input=y}}s(_s,"ListChannelMembershipsCommand");class or extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,or.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsForAppInstanceUserCommand",inputFilterSensitiveLog:tf,outputFilterSensitiveLog:nf},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Sp(y,b)}deserialize(y,b){return Gm(y,b)}constructor(y){super(),this.input=y}}s(or,"ListChannelMembershipsForAppInstanceUserCommand");class at extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,at.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMessagesCommand",inputFilterSensitiveLog:rf,outputFilterSensitiveLog:of},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return vp(y,b)}deserialize(y,b){return $m(y,b)}constructor(y){super(),this.input=y}}s(at,"ListChannelMessagesCommand");class to extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,to.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelModeratorsCommand",inputFilterSensitiveLog:sf,outputFilterSensitiveLog:af},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Of(y,b)}deserialize(y,b){return Jm(y,b)}constructor(y){super(),this.input=y}}s(to,"ListChannelModeratorsCommand");class Ts extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ts.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsAssociatedWithChannelFlowCommand",inputFilterSensitiveLog:df,outputFilterSensitiveLog:uf},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Ep(y,b)}deserialize(y,b){return Zm(y,b)}constructor(y){super(),this.input=y}}s(Ts,"ListChannelsAssociatedWithChannelFlowCommand");class bi extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,bi.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsCommand",inputFilterSensitiveLog:lf,outputFilterSensitiveLog:cf},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return yp(y,b)}deserialize(y,b){return Xm(y,b)}constructor(y){super(),this.input=y}}s(bi,"ListChannelsCommand");class Dr extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Dr.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:ff,outputFilterSensitiveLog:hf},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return bp(y,b)}deserialize(y,b){return eg(y,b)}constructor(y){super(),this.input=y}}s(Dr,"ListChannelsModeratedByAppInstanceUserCommand");class Cr extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Cr.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListSubChannelsCommand",inputFilterSensitiveLog:pf,outputFilterSensitiveLog:mf},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return _p(y,b)}deserialize(y,b){return ng(y,b)}constructor(y){super(),this.input=y}}s(Cr,"ListSubChannelsCommand");class zs extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,zs.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"ListTagsForResourceCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:gf},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Tp(y,b)}deserialize(y,b){return rg(y,b)}constructor(y){super(),this.input=y}}s(zs,"ListTagsForResourceCommand");class jo extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,jo.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelExpirationSettingsCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Cp(y,b)}deserialize(y,b){return sg(y,b)}constructor(y){super(),this.input=y}}s(jo,"PutChannelExpirationSettingsCommand");class At extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,At.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelMembershipPreferencesCommand",inputFilterSensitiveLog:Sf,outputFilterSensitiveLog:vf},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Ip(y,b)}deserialize(y,b){return lg(y,b)}constructor(y){super(),this.input=y}}s(At,"PutChannelMembershipPreferencesCommand");class Ur extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ur.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"PutMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return wp(y,b)}deserialize(y,b){return dg(y,b)}constructor(y){super(),this.input=y}}s(Ur,"PutMessagingStreamingConfigurationsCommand");class Ea extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ea.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"RedactChannelMessageCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Op(y,b)}deserialize(y,b){return fg(y,b)}constructor(y){super(),this.input=y}}s(Ea,"RedactChannelMessageCommand");class Gs extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Gs.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"SearchChannelsCommand",inputFilterSensitiveLog:yf,outputFilterSensitiveLog:Ef},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Ap(y,b)}deserialize(y,b){return pg(y,b)}constructor(y){super(),this.input=y}}s(Gs,"SearchChannelsCommand");class js extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,js.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"SendChannelMessageCommand",inputFilterSensitiveLog:bf,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Mp(y,b)}deserialize(y,b){return gg(y,b)}constructor(y){super(),this.input=y}}s(js,"SendChannelMessageCommand");class $s extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,$s.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:_f,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Rp(y,b)}deserialize(y,b){return vg(y,b)}constructor(y){super(),this.input=y}}s($s,"TagResourceCommand");class Ks extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ks.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UntagResourceCommand",inputFilterSensitiveLog:Tf,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Pp(y,b)}deserialize(y,b){return Eg(y,b)}constructor(y){super(),this.input=y}}s(Ks,"UntagResourceCommand");class $o extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,$o.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelCommand",inputFilterSensitiveLog:Cf,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return kp(y,b)}deserialize(y,b){return _g(y,b)}constructor(y){super(),this.input=y}}s($o,"UpdateChannelCommand");class Cs extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Cs.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelFlowCommand",inputFilterSensitiveLog:If,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Dp(y,b)}deserialize(y,b){return Cg(y,b)}constructor(y){super(),this.input=y}}s(Cs,"UpdateChannelFlowCommand");class Js extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Js.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelMessageCommand",inputFilterSensitiveLog:wf,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Np(y,b)}deserialize(y,b){return wg(y,b)}constructor(y){super(),this.input=y}}s(Js,"UpdateChannelMessageCommand");class Ys extends Vn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(y,b,I){this.middlewareStack.use(Re(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ys.getEndpointParameterInstructions()));const z=y.concat(this.middlewareStack),{logger:G}=b,re={logger:G,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelReadMarkerCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:ye}=b;return z.resolve(le=>ye.handle(le.request,I||{}),re)}serialize(y,b){return Lp(y,b)}deserialize(y,b){return Ag(y,b)}constructor(y){super(),this.input=y}}s(Ys,"UpdateChannelReadMarkerCommand");const Tc={AssociateChannelFlowCommand:fl,BatchCreateChannelMembershipCommand:hl,ChannelFlowCallbackCommand:pl,CreateChannelCommand:gl,CreateChannelBanCommand:ml,CreateChannelFlowCommand:Sl,CreateChannelMembershipCommand:vl,CreateChannelModeratorCommand:yl,DeleteChannelCommand:bl,DeleteChannelBanCommand:El,DeleteChannelFlowCommand:_l,DeleteChannelMembershipCommand:Tl,DeleteChannelMessageCommand:J,DeleteChannelModeratorCommand:Cl,DeleteMessagingStreamingConfigurationsCommand:Il,DescribeChannelCommand:Ol,DescribeChannelBanCommand:wl,DescribeChannelFlowCommand:Al,DescribeChannelMembershipCommand:Ml,DescribeChannelMembershipForAppInstanceUserCommand:Rl,DescribeChannelModeratedByAppInstanceUserCommand:Pl,DescribeChannelModeratorCommand:kl,DisassociateChannelFlowCommand:Dl,GetChannelMembershipPreferencesCommand:Nl,GetChannelMessageCommand:Ll,GetChannelMessageStatusCommand:xi,GetMessagingSessionEndpointCommand:Dn,GetMessagingStreamingConfigurationsCommand:Es,ListChannelBansCommand:bs,ListChannelFlowsCommand:er,ListChannelMembershipsCommand:_s,ListChannelMembershipsForAppInstanceUserCommand:or,ListChannelMessagesCommand:at,ListChannelModeratorsCommand:to,ListChannelsCommand:bi,ListChannelsAssociatedWithChannelFlowCommand:Ts,ListChannelsModeratedByAppInstanceUserCommand:Dr,ListSubChannelsCommand:Cr,ListTagsForResourceCommand:zs,PutChannelExpirationSettingsCommand:jo,PutChannelMembershipPreferencesCommand:At,PutMessagingStreamingConfigurationsCommand:Ur,RedactChannelMessageCommand:Ea,SearchChannelsCommand:Gs,SendChannelMessageCommand:js,TagResourceCommand:$s,UntagResourceCommand:Ks,UpdateChannelCommand:$o,UpdateChannelFlowCommand:Cs,UpdateChannelMessageCommand:Js,UpdateChannelReadMarkerCommand:Ys};class Cc extends ho{}s(Cc,"ChimeSDKMessaging"),pa(Tc,Cc);const kf=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new bs(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Nd(C,y){return Xs.apply(this,arguments)}s(Nd,"paginateListChannelBans");function Xs(){return Xs=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(kf(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),Xs.apply(this,arguments)}s(Xs,"_paginateListChannelBans");const Yi=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new er(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function ji(C,y){return xl.apply(this,arguments)}s(ji,"paginateListChannelFlows");function xl(){return xl=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(Yi(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),xl.apply(this,arguments)}s(xl,"_paginateListChannelFlows");const Ld=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new or(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Df(C,y){return Ic.apply(this,arguments)}s(Df,"paginateListChannelMembershipsForAppInstanceUser");function Ic(){return Ic=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(Ld(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),Ic.apply(this,arguments)}s(Ic,"_paginateListChannelMembershipsForAppInstanceUser");const wc=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new _s(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Nf(C,y){return is.apply(this,arguments)}s(Nf,"paginateListChannelMemberships");function is(){return is=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(wc(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),is.apply(this,arguments)}s(is,"_paginateListChannelMemberships");const Oc=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new at(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Lf(C,y){return Bl.apply(this,arguments)}s(Lf,"paginateListChannelMessages");function Bl(){return Bl=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(Oc(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),Bl.apply(this,arguments)}s(Bl,"_paginateListChannelMessages");const ba=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new to(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function xd(C,y){return Ac.apply(this,arguments)}s(xd,"paginateListChannelModerators");function Ac(){return Ac=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(ba(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),Ac.apply(this,arguments)}s(Ac,"_paginateListChannelModerators");const Fl=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new Ts(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function xf(C,y){return wt.apply(this,arguments)}s(xf,"paginateListChannelsAssociatedWithChannelFlow");function wt(){return wt=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(Fl(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),wt.apply(this,arguments)}s(wt,"_paginateListChannelsAssociatedWithChannelFlow");const Mc=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new Dr(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Oo(C,y){return rs.apply(this,arguments)}s(Oo,"paginateListChannelsModeratedByAppInstanceUser");function rs(){return rs=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(Mc(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),rs.apply(this,arguments)}s(rs,"_paginateListChannelsModeratedByAppInstanceUser");const Ul=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new bi(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Bf(C,y){return _a.apply(this,arguments)}s(Bf,"paginateListChannels");function _a(){return _a=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(Ul(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),_a.apply(this,arguments)}s(_a,"_paginateListChannels");const Ff=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new Cr(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Ta(C,y){return Qs.apply(this,arguments)}s(Ta,"paginateListSubChannels");function Qs(){return Qs=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(Ff(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),Qs.apply(this,arguments)}s(Qs,"_paginateListSubChannels");const Uf=function(){var C=(0,h.coroutine)(function*(y,b){for(var I=arguments.length,z=new Array(I>2?I-2:0),G=2;G<I;G++)z[G-2]=arguments[G];return yield y.send(new Gs(b),...z)});return s(function(b,I){return C.apply(this,arguments)},"makePagedClientRequest")}();function Vf(C,y){return Vl.apply(this,arguments)}s(Vf,"paginateSearchChannels");function Vl(){return Vl=_wrapAsyncGenerator(function*(C,y){for(var b=arguments.length,I=new Array(b>2?b-2:0),z=2;z<b;z++)I[z-2]=arguments[z];let G=C.startingToken||void 0,Y=!0,ue;for(;Y;){if(y.NextToken=G,y.MaxResults=C.pageSize,C.client instanceof ho)ue=yield _awaitAsyncGenerator(Uf(C.client,y,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ue;const re=G;G=ue.NextToken,Y=!!(G&&(!C.stopOnSameToken||G!==re))}}),Vl.apply(this,arguments)}s(Vl,"_paginateSearchChannels")},6594694778:(F,a,c)=>{"use strict";c.r(a),c.d(a,{locateWindow:()=>p});const d={};function p(){return typeof window<"u"?window:typeof self<"u"?self:d}s(p,"locateWindow")},2412280125:(F,a,c)=>{"use strict";c.r(a),c.d(a,{fromUtf8:()=>l,toUtf8:()=>r});const d=s(n=>{const e=[];for(let t=0,i=n.length;t<i;t++){const o=n.charCodeAt(t);if(o<128)e.push(o);else if(o<2048)e.push(o>>6|192,o&63|128);else if(t+1<n.length&&(o&64512)===55296&&(n.charCodeAt(t+1)&64512)===56320){const u=65536+((o&1023)<<10)+(n.charCodeAt(++t)&1023);e.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else e.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(e)},"fromUtf8"),p=s(n=>{let e="";for(let t=0,i=n.length;t<i;t++){const o=n[t];if(o<128)e+=String.fromCharCode(o);else if(192<=o&&o<224){const u=n[++t];e+=String.fromCharCode((o&31)<<6|u&63)}else if(240<=o&&o<365){const h="%"+[o,n[++t],n[++t],n[++t]].map(S=>S.toString(16)).join("%");e+=decodeURIComponent(h)}else e+=String.fromCharCode((o&15)<<12|(n[++t]&63)<<6|n[++t]&63)}return e},"toUtf8");function m(n){return new TextEncoder().encode(n)}s(m,"whatwgEncodingApi_fromUtf8");function g(n){return new TextDecoder("utf-8").decode(n)}s(g,"whatwgEncodingApi_toUtf8");const l=s(n=>typeof TextEncoder=="function"?m(n):d(n),"dist_es_fromUtf8"),r=s(n=>typeof TextDecoder=="function"?g(n):p(n),"dist_es_toUtf8")},7581324406:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9877075638));let g=s(class{needUpdate(r){return this.activeSpeakers?this.speakerScores[r]===0&&this.activeSpeakers.includes(r)||this.speakerScores[r]>0&&!this.activeSpeakers.includes(r):!0}updateActiveSpeakers(r,n,e){if(!this.needUpdate(e))return;const t=[],i=Object.keys(this.speakerScores);for(let f=0;f<i.length;f++){const v=i[f];t.push({attendeeId:v,activeScore:this.speakerScores[v]})}const o=t.sort((f,v)=>v.activeScore-f.activeScore).filter(function(f){return f.activeScore>0}).map(function(f){return f.attendeeId});this.activeSpeakers=o,n(o);const h=o.length>0&&o[0]===this.selfAttendeeId&&r.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==h&&(this.hasBandwidthPriority=h,this.hasBandwidthPriorityCallback(h))}updateScore(r,n,e,t,i){const o=r.calculateScore(e,t,i);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(r,n,e))}subscribe(r,n,e,t){const i=s((u,h)=>{if(!h){this.speakerScores[u]=0,this.mostRecentUpdateTimestamp[u]=Date.now(),this.updateActiveSpeakers(r,n,u);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(u,(S,f,v,E)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),v!==null&&(this.speakerMuteState[S]=v),this.updateScore(r,n,S,f,v)})},"handler");this.detectorCallbackToHandler.set(n,i);const o=new m.default(this.updateIntervalMs);if(o.start(()=>{for(const u in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[u]>this.waitIntervalMs&&this.updateScore(r,n,u,0,this.speakerMuteState[u])}),this.detectorCallbackToActivityTimer.set(n,o),e&&t){const u=new m.default(t);u.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(n,u)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)}unsubscribe(r){const n=this.detectorCallbackToHandler.get(r);this.detectorCallbackToHandler.delete(r),n&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n);const e=this.detectorCallbackToActivityTimer.get(r);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(r));const t=this.detectorCallbackToScoresTimer.get(r);t&&(t.stop(),this.detectorCallbackToHandler.delete(r))}destroy(){return d(this,void 0,void 0,function*(){for(const r of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r);for(const r of this.detectorCallbackToActivityTimer.values())r.stop();for(const r of this.detectorCallbackToScoresTimer.values())r.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(r,n,e,t=1e3,i=200){this.realtimeController=r,this.selfAttendeeId=n,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=i,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");a.default=g},1473791890:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{calculateScore(p,m,g){(g||m===null)&&(m=0),this.volumes.hasOwnProperty(p)||(this.volumes[p]=0),m>this.silenceThreshold?m=1:m=0;const l=this.volumes[p]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[p]=l;for(const r in this.volumes)r!==p&&(this.volumes[r]=Math.max(this.volumes[r]-this.takeoverRate*m,0));return l<this.cutoffThreshold?0:l}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(p=.9,m=.01,g=.2,l=.2){this.speakerWeight=p,this.cutoffThreshold=m,this.silenceThreshold=g,this.takeoverRate=l,this.volumes={}}},"DefaultActiveSpeakerPolicy");a.default=c},1035256489:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class hS{static create(p,m){const g=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!p||p.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!g.test(p))throw new Error(`appName must satisfy ${g} regular expression`);const l=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!l.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new hS(p,m)}constructor(p,m){this.appName=p,this.appVersion=m}},"ApplicationMetadata");a.default=c},9898009183:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"Attendee");a.default=c},9598694912:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5546774952)),g=p(c(9649641385));let l=s(class{bindAudioElement(n){return d(this,void 0,void 0,function*(){if(!n)throw new Error(`Cannot bind audio element: ${n}`);return this.audioElement=n,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(n=>{this.audioStream&&n.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(n){return d(this,void 0,void 0,function*(){if(n){this.audioStream=n;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(n){return d(this,void 0,void 0,function*(){if(n&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=n,this.bindAudioMix()})}forEachObserver(n){for(const e of this.observers)g.default.nextTick(()=>{n(e)})}bindAudioMix(){var n,e;return d(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(f=>{t&&f.meetingAudioStreamBecameInactive(t),this.audioStream&&f.meetingAudioStreamBecameActive(this.audioStream)});const i=((n=this.audioDevice)===null||n===void 0?void 0:n.deviceId)!==this.audioElement.sinkId;if(i&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",u=this.audioElement.sinkId;if(o===u)return;const h=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(h.srcObject=null),i)try{yield h.setSinkId(o)}catch(f){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${f}`),f}this.browserBehavior.hasChromiumWebRTC()&&(h.srcObject=S)})}getCurrentMeetingAudioStream(){return d(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(n){return d(this,void 0,void 0,function*(){this.observers.add(n)})}removeAudioMixObserver(n){return d(this,void 0,void 0,function*(){this.observers.delete(n)})}audioOutputDidChange(n){return d(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(n)})}constructor(n){this.logger=n,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new m.default,this.observers=new Set}},"DefaultAudioMixController");a.default=l},5983965185:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5546774952));let m=s(class Wd{static fullbandSpeechMono(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Wd(4e4,l)}static fullbandMusicMono(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Wd(64e3,l)}static fullbandMusicStereo(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Wd(128e3,l)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(l=null,r=!0){this.audioBitrateBps=l,this.enableAudioRedundancy=new p.default().supportsAudioRedundancy()&&r}},"AudioProfile");a.default=m},4610074022:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,a.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let c=s(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=a.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=a.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");a.default=c},1833994912:function(F,a,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(K,q,Ee,be){be===void 0&&(be=Ee),Object.defineProperty(K,be,{enumerable:!0,get:function(){return q[Ee]}})}:function(K,q,Ee,be){be===void 0&&(be=Ee),K[be]=q[Ee]}),p=this&&this.__setModuleDefault||(Object.create?function(K,q){Object.defineProperty(K,"default",{enumerable:!0,value:q})}:function(K,q){K.default=q}),m=this&&this.__importStar||function(K){if(K&&K.__esModule)return K;var q={};if(K!=null)for(var Ee in K)Ee!=="default"&&Object.prototype.hasOwnProperty.call(K,Ee)&&d(q,K,Ee);return p(q,K),q},g=this&&this.__awaiter||function(K,q,Ee,be){function it(He){return He instanceof Ee?He:new Ee(function(Qe){Qe(He)})}return s(it,"adopt"),new(Ee||(Ee=Promise))(function(He,Qe){function Se(ve){try{L(be.next(ve))}catch(_e){Qe(_e)}}s(Se,"fulfilled");function Ae(ve){try{L(be.throw(ve))}catch(_e){Qe(_e)}}s(Ae,"rejected");function L(ve){ve.done?He(ve.value):it(ve.value).then(Se,Ae)}s(L,"step"),L((be=be.apply(K,q||[])).next())})},l=this&&this.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(a,"__esModule",{value:!0});const r=l(c(7581324406)),n=l(c(9598694912)),e=l(c(5983965185)),t=l(c(5546774952)),i=l(c(9200233701)),o=l(c(8619504925)),u=l(c(1197017824)),h=l(c(7551081659)),S=l(c(9447989038)),f=l(c(488357679)),v=l(c(8006173476)),E=l(c(6348496904)),_=l(c(7692233712)),T=l(c(9649641385)),w=l(c(6900744364)),M=l(c(3795683579)),R=l(c(2092275410)),O=l(c(583806999)),k=l(c(7570945794)),A=m(c(5393388022)),P=l(c(7969706599)),D=l(c(4804743313)),H=c(4136617125),j=l(c(4562177071)),W=l(c(4713678292)),X=l(c(9089081530)),ee=l(c(5703332651)),fe=l(c(9049733277)),oe=l(c(4708498556)),Oe=l(c(2635066756)),Xe=l(c(9488451395)),ge=l(c(9638153336)),Me=l(c(7966229607)),$e=l(c(1614136239)),ze=l(c(3292077469)),nt=l(c(6085879951)),mt=l(c(9588672479)),gt=l(c(9531998674)),Pe=l(c(587698570)),xe=l(c(86955145)),Ye=l(c(8297256329)),Ze=l(c(7680112541)),Re=l(c(8872868578)),Tt=l(c(5976676062)),rt=l(c(339097629)),Nt=l(c(3248483798)),Wt=l(c(7638277718)),Qt=l(c(4098780146)),Ot=l(c(2392158736)),hn=l(c(8213452704)),fi=l(c(372560720)),wn=l(c(161472916)),Jt=c(6527539809),on=l(c(1695739824)),kt=l(c(9677745702)),$t=l(c(3368465086)),en=c(8071414974),zt=l(c(1865309432)),Kt=l(c(2469210420)),Q=l(c(8697249276)),Ve=l(c(4675986794)),Be=l(c(1309535200)),Je=l(c(1604549269)),ut=l(c(9136055221)),ot=l(c(8058016368)),de=l(c(4610074022));let Ue=s(class zd{destroy(){return g(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new r.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(q){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(q):null}setAudioProfile(q){this._audioProfile=q}addObserver(q){this.logger.info("adding meeting observer"),this.observerQueue.add(q)}removeObserver(q){this.logger.info("removing meeting observer"),this.observerQueue.delete(q)}forEachObserver(q){for(const Ee of this.observerQueue)T.default.nextTick(()=>{this.observerQueue.has(Ee)&&q(Ee)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new de.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new k.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const q=s(()=>g(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(Ee){Ee.type===P.default.WebSocketClosed&&q()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(q=>{this.logger.error(`Signaling task pre-start failed: ${q}`),this.signalingTask=void 0})}start(q){this.startReturningPromise(q).then(()=>{this.logger.info("start completed")}).catch(Ee=>{this.logger.error(`start failed: ${Ee}`)})}startReturningPromise(q){return(q==null?void 0:q.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((Ee,be)=>{this.sessionStateController.perform(M.default.Connect,()=>{this.actionConnect(!1).then(Ee).catch(be)})}))}connectWithPromises(q){const Ee=this.meetingSessionContext,be=s((ne,Ft)=>new Wt.default(this.logger,Ft,ne),"timeout");this.monitorTask=new $e.default(Ee,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const it=this.monitorTask.once(),He=new gt.default(Ee).once();this.receiveIndexTask=new Ye.default(Ee),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Qe=new Re.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Me.default(Ee),new Ze.default(Ee),new Xe.default(Ee),this.receiveIndexTask]).once(),Se=new fe.default(Ee).once(Qe),Ae=new W.default(Ee).once(Se,He),L=new oe.default(Ee).once(Ae),ve=new Tt.default(Ee).once(L),_e=new Oe.default(Ee).once(ve),Ie=new Nt.default(Ee).once(_e);return this.receiveRemotePauseResumeTask=new Pe.default(Ee),this.receiveRemotePauseResumeTask.once(Ie),new Re.default(this.logger,this.wrapTaskName("AudioVideoStart"),[it,be(this.configuration.connectionTimeoutMs,new Re.default(this.logger,"Peer",[Ie,this.receiveRemotePauseResumeTask,q?new Wt.default(this.logger,new nt.default(this.logger,"FinalizeConnection",[new Qt.default(Ee),new rt.default(Ee)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new rt.default(Ee)]))])}actionConnect(q){var Ee;return g(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const be=!!this.configuration.urls.audioHostURL;if(be?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new hn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new fi.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Ot.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new wn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new ot.default(this.logger,this._realtimeController,zd.MIN_VOLUME_DECIBELS,zd.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Qe=this.meetingSessionContext.videoUplinkBandwidthPolicy;Qe||(Qe=new Je.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Qe),Qe.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new $t.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new Q.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new Kt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new ut.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new kt.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)){const Qe=this.configuration.meetingFeatures.contentMaxResolution===u.default.VideoResolutionUHD;Qe&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Qe)}else{const Qe=this.configuration.meetingFeatures.videoMaxResolution===u.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Qe)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new f.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new on.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new zt.default,this.meetingSessionContext.videosPaused=new zt.default,this.meetingSessionContext.statsCollector=new j.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new E.default(this.meetingSessionContext.signalingClient,zd.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},q||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Qe=>{Jt.Maybe.of(Qe.audioVideoDidStartConnecting).map(Se=>Se.bind(Qe)(!1))}),(Ee=this.eventController)===null||Ee===void 0||Ee.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const it=be&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+it);const He=this.connectWithPromises(it);try{yield He.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(M.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Qe){this.signalingTask=void 0;const Se=new h.default(this.getMeetingStatusCode(Qe)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${Se} due to error ${Qe}.`),this.sessionStateController.state()===R.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(M.default.Fail,()=>g(this,void 0,void 0,function*(){yield this.actionDisconnect(Se,!0,Qe),this.handleMeetingSessionStatus(Se,Qe)||this.notifyStop(Se,Qe)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new Wt.default(this.logger,new ze.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=H.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(q=>{Jt.Maybe.of(q.audioVideoDidStart).map(Ee=>Ee.bind(q)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var q;return this.sessionStateController.state()===R.default.NotConnected?((q=this.meetingSessionContext.signalingClient)===null||q===void 0||q.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((Ee,be)=>{this.sessionStateController.perform(M.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new h.default(S.default.Left),!1,null).then(Ee).catch(be)})})}stop(){this.stopReturningPromise()}actionDisconnect(q,Ee,be){return g(this,void 0,void 0,function*(){try{yield new Re.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new Wt.default(this.logger,new ge.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const it=[new Wt.default(this.logger,new ee.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new Re.default(this.logger,this.wrapTaskName("AudioVideoClean"),it).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(M.default.FinishDisconnecting,()=>{Ee||this.notifyStop(q,be)})})}update(){let Ee=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(Ee||(Ee=this.meetingSessionContext.peer===void 0),Ee||(Ee=!this.updateRemoteVideosFromPolicy()),Ee||(Ee=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!Ee)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const be=this.sessionStateController.perform(M.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return be===O.default.Transitioned||be===O.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!A.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===A.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const q=this.detectChangesInVideosToReceive();if(q===void 0)return!1;const Ee=q.added,be=q.simulcastStreamUpdates,it=q.removed,He=this.meetingSessionContext,Qe=[];for(const[Se,Ae]of be.entries()){const L=new D.default;if(L.streamId=Ae,L.attendeeId=He.videoStreamIndex.attendeeIdForStreamId(Ae),L.mid=He.transceiverController.getMidForStreamId(Se),L.mid===void 0)return this.logger.info(`No MID found for stream ID ${Se}, cannot update stream without renegotiation`),!1;if(Qe.push(L),He.transceiverController.setStreamIdForMid(L.mid,Ae),He.videoStreamIndex.overrideStreamIdMappings(Se,Ae),He.videoTileController.haveVideoTileForAttendeeId(L.attendeeId)){const ve=He.videoTileController.getVideoTileForAttendeeId(L.attendeeId);if(!ve.setStreamId)return!1;ve.setStreamId(Ae)}}return Qe.length!==0&&He.signalingClient.remoteVideoUpdate(Qe,[]),Ee.length!==0||it.length!==0?!1:(He.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const q=this.meetingSessionContext;if(q.videosToReceive===null||!q.transceiverController||!q.transceiverController.getMidForStreamId||!q.transceiverController.setStreamIdForMid||!q.videosToReceive.forEach||!q.signalingClient.remoteVideoUpdate||!q.videoStreamIndex.overrideStreamIdMappings)return;let Ee=[];const be=new Map;let it=[];if(q.lastVideosToReceive===null)Ee=q.videosToReceive.array();else{const He=q.videoStreamIndex;q.videosToReceive.forEach(Qe=>{if(q.lastVideosToReceive.contain(Qe))return;let Se=!1;q.lastVideosToReceive.forEach(Ae=>{Se||He.StreamIdsInSameGroup(Ae,Qe)&&(be.set(Ae,Qe),Se=!0)}),Se||Ee.push(Qe)}),it=q.lastVideosToReceive.array().filter(Qe=>{const Se=q.videosToReceive.contain(Qe),Ae=be.has(Qe);return!Se&&!Ae})}return this.logger.info(`Request to update remote videos with added: [${Ee}], updated: [${Array.from(be.entries()).map(He=>{let[Qe,Se]=He;return`${Qe}->${Se}`}).join(",")}], removed: [${it}]`),{added:Ee,removed:it,simulcastStreamUpdates:be}}isNotAddingOrRemovingStreams(){const q=this.detectChangesInVideosToReceive();if(q===void 0)return!1;const Ee=q.added,be=q.removed;return Ee.length!==0||be.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const q=this.meetingSessionContext;if(q.videosToReceive===null)return!1;const Ee=q.videosToReceive.array().map(Se=>q.videoStreamIndex.groupIdForStreamId(Se));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(Ee));const be=en.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(q,Ee,q.videoDownlinkBandwidthPolicy.getVideoPreferences()),it=new Map,He=[];for(const Se of be){let Ae=!1;if(!q.lastVideoSubscriptionConfiguration.has(Se.groupId))Ae=!0;else{const L=q.lastVideoSubscriptionConfiguration.get(Se.groupId);Se.equals(L)||(this.logger.debug(`${JSON.stringify(Se)} does not equal ${JSON.stringify(L)}, sending update`),Ae=!0)}it.set(Se.groupId,Se),Ae&&He.push(Se)}q.lastVideoSubscriptionConfiguration=it;const Qe=[];if(q.lastVideosToReceive!==null){const Se=new Set(Ee);for(const Ae of q.lastVideosToReceive.array()){const L=q.videoStreamIndex.groupIdForStreamId(Ae);if(!Se.has(L)){const ve=q.transceiverController.getMidForGroupId(L);if(ve===void 0){q.logger.warn(`Could not find MID for group ID to remove: ${L}`);continue}Qe.push(ve)}}}return(He.length!==0||Qe.length!==0)&&q.signalingClient.remoteVideoUpdate(He,Qe),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const q=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(q)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const q=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!q||!q.headerExtensions?!1:q.headerExtensions.some(Ee=>Ee.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(q){const Ee=s(()=>g(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),q()}),"restartVideo"),be=this.sessionStateController.perform(M.default.Update,()=>{Ee()});return be===O.default.Transitioned||be===O.default.DeferredTransition}replaceLocalVideo(q){return g(this,void 0,void 0,function*(){if(!q||q.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const Ee=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(Ee){const be=Ee.state(),it=q.getVideoTracks()[0].getSettings();Ee.bindVideoStream(be.boundAttendeeId,!0,q,it.width,it.height,be.streamId,be.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(q.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=q,this.logger.info("Local video input is updated")})}replaceLocalAudio(q){return g(this,void 0,void 0,function*(){if(!q||q.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(q.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=q,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(q){return g(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new Re.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new xe.default(this.meetingSessionContext),new Wt.default(this.logger,new Re.default(this.logger,"UpdateSession",[new W.default(this.meetingSessionContext),new oe.default(this.meetingSessionContext),new Tt.default(this.meetingSessionContext),new Oe.default(this.meetingSessionContext),new Nt.default(this.meetingSessionContext),new rt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),q&&this.sessionStateController.perform(M.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(Ee){this.sessionStateController.perform(M.default.FinishUpdating,()=>{const be=new h.default(this.getMeetingStatusCode(Ee)||S.default.TaskFailed);be.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(be,Ee)})}})}notifyStop(q,Ee){var be;if(this.forEachObserver(it=>{Jt.Maybe.of(it.audioVideoDidStop).map(He=>He.bind(it)(q))}),this.eventController){const{signalingOpenDurationMs:it,poorConnectionCount:He,startTimeMs:Qe,iceGatheringDurationMs:Se,attendeePresenceDurationMs:Ae,meetingStartDurationMs:L}=this.meetingSessionContext,ve={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Qe===null?0:Math.round(Date.now()-Qe),meetingStatus:S.default[q.statusCode()],signalingOpenDurationMs:it,iceGatheringDurationMs:Se,attendeePresenceDurationMs:Ae,poorConnectionCount:He,meetingStartDurationMs:L,retryCount:this.totalRetryCount},_e=Ee&&Ee.message||((be=q.toString)===null||be===void 0?void 0:be.call(q))||"";ve.meetingDurationMs===0?(ve.meetingErrorMessage=_e,delete ve.meetingDurationMs,delete ve.attendeePresenceDurationMs,delete ve.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",ve)):q.isFailure()||q.isAudioConnectionFailure()?(ve.meetingErrorMessage=_e,this.eventController.publishEvent("meetingFailed",ve)):this.eventController.publishEvent("meetingEnded",ve)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const q=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(q)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(q,Ee){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(it=>{Jt.Maybe.of(it.audioVideoWasDemotedFromPrimaryMeeting).map(He=>He.bind(it)(new h.default(S.default.AudioVideoDisconnectedWhilePromoted)))}));const be=this._reconnectController.retryWithBackoff(()=>g(this,void 0,void 0,function*(){this.sessionStateController.state()===R.default.NotConnected?this.sessionStateController.perform(M.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(M.default.Reconnect,()=>{this.actionReconnect(q)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return be||this.sessionStateController.perform(M.default.Fail,()=>{this.actionDisconnect(q,!1,Ee)}),be}actionReconnect(q){return g(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(Ee=>{Jt.Maybe.of(Ee.audioVideoDidStartConnecting).map(be=>be.bind(Ee)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new Pe.default(this.meetingSessionContext);try{yield new Re.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new Wt.default(this.logger,new Re.default(this.logger,"Media",[new X.default(this.meetingSessionContext),new Re.default(this.logger,"Signaling",[new ze.default(this.meetingSessionContext),new Xe.default(this.meetingSessionContext)]),new fe.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new xe.default(this.meetingSessionContext),new Wt.default(this.logger,new Re.default(this.logger,"UpdateSession",[new W.default(this.meetingSessionContext),new oe.default(this.meetingSessionContext),new Tt.default(this.meetingSessionContext),new Oe.default(this.meetingSessionContext),new Nt.default(this.meetingSessionContext),new rt.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(M.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:Ee,poorConnectionCount:be,startTimeMs:it,iceGatheringDurationMs:He,attendeePresenceDurationMs:Qe,meetingStartDurationMs:Se}=this.meetingSessionContext,Ae={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-it),meetingStatus:S.default[q.statusCode()],signalingOpenDurationMs:Ee,iceGatheringDurationMs:He,attendeePresenceDurationMs:Qe,poorConnectionCount:be,meetingStartDurationMs:Se,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",Ae)}this.actionFinishConnecting()})}catch(Ee){this.sessionStateController.perform(M.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const be=new h.default(this.getMeetingStatusCode(Ee)||S.default.TaskFailed);this.handleMeetingSessionStatus(be,Ee)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(q){return`${q}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(q){const Ee=/the meeting status code: (\d+)/.exec(q&&q.message);return Ee&&Ee.length>1?Number.parseInt(Ee[1],10):null}enforceBandwidthLimitationForSender(q){return g(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(q)})}handleMeetingSessionStatus(q,Ee){if(this.logger.info(`handling status: ${S.default[q.statusCode()]}`),q.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(q),q.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(q.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(be=>{Jt.Maybe.of(be.videoSendDidBecomeUnavailable).map(it=>it.bind(be)())}),!1;if(q.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(be=>{Jt.Maybe.of(be.audioVideoWasDemotedFromPrimaryMeeting).map(it=>it.bind(be)(q))}),!1;if(q.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(q.isFailure()||q.isTerminal())&&this.meetingSessionContext.reconnectController){const be=this.reconnect(q,Ee);return be?this.logger.warn(`will retry due to status code ${S.default[q.statusCode()]}${Ee?` and error: ${Ee.message}`:""}`):this.logger.error(`failed with status code ${S.default[q.statusCode()]}${Ee?` and error: ${Ee.message}`:""}`),be}return!1}setVideoMaxBandwidthKbps(q){if(q<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${q} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(q)),this.maxUplinkBandwidthKbps=q}handleHasBandwidthPriority(q){return g(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(q),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const Ee=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(q);const be=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();Ee!==be&&(this.logger.info(`video send bandwidth priority ${q} max has changed from ${Ee} kbps to ${be} kbps`),yield this.enforceBandwidthLimitationForSender(be))}})}pauseReceivingStream(q){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([q])}resumeReceivingStream(q){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([q])}setVideoCodecSendPreferences(q){this.videoSendCodecPreferences=q,this.meetingSessionContext.videoSendCodecPreferences=q,this.sessionStateController.state()!==R.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:q}=this.meetingSessionContext;if(!q)return this.logger.info("meeting has not started"),[];const Ee=this.configuration.credentials.attendeeId;return q.allVideoSendingSourcesExcludingSelf(Ee)}encodingSimulcastLayersDidChange(q){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(Ee=>{Jt.Maybe.of(Ee.encodingSimulcastLayersDidChange).map(be=>be.bind(Ee)(q))})}promoteToPrimaryMeeting(q){return this.actionPromoteToPrimaryMeeting(q)}actionPromoteToPrimaryMeeting(q){return g(this,void 0,void 0,function*(){let Ee=new h.default(S.default.SignalingRequestFailed);return yield new Re.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new Wt.default(this.logger,new mt.default(this.meetingSessionContext,q,be=>{Ee=be}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=Ee.statusCode()===S.default.OK,Ee})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(q=>{Jt.Maybe.of(q.audioVideoWasDemotedFromPrimaryMeeting).map(Ee=>Ee.bind(q)(new h.default(S.default.OK)))})}videoInputDidChange(q){return g(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(q?yield this.replaceLocalVideo(q):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(q){return g(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!q)try{q=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(q)})}constructor(q,Ee,be,it,He,Qe){this._audioProfile=new e.default,this.connectionHealthData=new i.default,this.observerQueue=new Set,this.meetingSessionContext=new de.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=Ee,this.sessionStateController=new w.default(this._logger),this._configuration=q,this._webSocketAdapter=be,this._realtimeController=new _.default(it),this._realtimeController.realtimeSetLocalAttendeeId(q.credentials.attendeeId,q.credentials.externalUserId),this._mediaStreamBroker=it,this._reconnectController=He,this._videoTileController=new Ve.default(new Be.default,this,this._logger),this._audioMixController=new n.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Qe}},"DefaultAudioVideoController");a.default=Ue,Ue.MIN_VOLUME_DECIBELS=-42,Ue.MAX_VOLUME_DECIBELS=-14,Ue.PING_PONG_INTERVAL_MS=1e4},8589145157:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(4571447548)),m=d(c(913629600)),g=d(c(5047661014)),l=d(c(9437918857)),r=d(c(6226061697)),n=d(c(8023404193)),e=d(c(7551081659)),t=d(c(9447989038)),i=d(c(803810435)),o=d(c(2114525466)),u=d(c(7880459944)),h=d(c(1833994912));let S=s(class extends h.default{setAudioProfile(v){}start(){}stop(){}promoteToPrimaryMeeting(v){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(v){const E=new r.default;E.meetingId="",E.externalMeetingId="",E.credentials=new n.default,E.credentials.attendeeId="",E.credentials.joinToken="",E.urls=new i.default,E.urls.turnControlURL="",E.urls.audioHostURL="",E.urls.signalingURL="wss://localhost/";const _=new g.default;super(v||E,_,new u.default(new g.default),new l.default,new o.default(0,new p.default(0,0,0)),new m.default(v||E,_))}},"NoOpAudioVideoController");a.default=S},9305916160:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(g,l,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{h(n.next(S))}catch(f){i(f)}}s(o,"fulfilled");function u(S){try{h(n.throw(S))}catch(f){i(f)}}s(u,"rejected");function h(S){S.done?t(S.value):e(S.value).then(o,u)}s(h,"step"),h((n=n.apply(g,l||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(7952414906);let m=s(class{addObserver(l){this.audioVideoController.addObserver(l),this.trace("addObserver")}removeObserver(l){this.audioVideoController.removeObserver(l),this.trace("removeObserver")}setAudioProfile(l){this.trace("setAudioProfile",l),this.audioVideoController.setAudioProfile(l)}start(l){this.audioVideoController.start(l),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(l){return this.trace("getRTCPeerConnectionStats",l?l.id:null),this.audioVideoController.getRTCPeerConnectionStats(l)}bindAudioElement(l){const r=this.audioMixController.bindAudioElement(l);return this.trace("bindAudioElement",l.id,r),r}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(l){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(l)}removeAudioMixObserver(l){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(l)}bindVideoElement(l,r){this.videoTileController.bindVideoElement(l,r),this.trace("bindVideoElement",{tileId:l,videoElementId:r.id})}unbindVideoElement(l){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(l,r),this.trace("unbindVideoElement",{tileId:l,cleanUpVideoElement:r})}startLocalVideoTile(){const l=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,l),l}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const l=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,l),l}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const l=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),l}pauseVideoTile(l){this.videoTileController.pauseVideoTile(l),this.trace("pauseVideoTile",l)}unpauseVideoTile(l){this.videoTileController.unpauseVideoTile(l),this.trace("unpauseVideoTile",l)}getVideoTile(l){const r=this.videoTileController.getVideoTile(l);return this.trace("getVideoTile",l),r}getAllRemoteVideoTiles(){const l=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),l}getAllVideoTiles(){const l=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),l}addVideoTile(){const l=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,l.state()),l}removeVideoTile(l){this.videoTileController.removeVideoTile(l),this.trace("removeVideoTile",l)}removeVideoTilesByAttendeeId(l){const r=this.videoTileController.removeVideoTilesByAttendeeId(l);return this.trace("removeVideoTilesByAttendeeId",l,r),r}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(l){const r=this.videoTileController.captureVideoTile(l);return this.trace("captureVideoTile",l),r}realtimeSubscribeToAttendeeIdPresence(l){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(l),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(l){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(l),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(l){this.realtimeController.realtimeSetCanUnmuteLocalAudio(l),this.trace("realtimeSetCanUnmuteLocalAudio",l)}realtimeSubscribeToSetCanUnmuteLocalAudio(l){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(l),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(l){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(l),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const l=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,l),l}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const l=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),l}realtimeSubscribeToMuteAndUnmuteLocalAudio(l){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(l),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(l){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(l),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const l=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),l}realtimeSubscribeToVolumeIndicator(l,r){this.realtimeController.realtimeSubscribeToVolumeIndicator(l,r),this.trace("realtimeSubscribeToVolumeIndicator",l)}realtimeUnsubscribeFromVolumeIndicator(l,r){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(l,r),this.trace("realtimeUnsubscribeFromVolumeIndicator",l,r)}realtimeSubscribeToLocalSignalStrengthChange(l){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(l),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(l){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(l),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(l,r,n){this.realtimeController.realtimeSendDataMessage(l,r,n),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(l,r){this.realtimeController.realtimeSubscribeToReceiveDataMessage(l,r),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(l){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(l){this.realtimeController.realtimeSubscribeToFatalError(l),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(l){this.realtimeController.realtimeUnsubscribeToFatalError(l),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(l,r,n,e){this.audioVideoController.activeSpeakerDetector.subscribe(l,r,n,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(l){this.audioVideoController.activeSpeakerDetector.unsubscribe(l),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioInputDevices(l);return this.trace("listAudioInputDevices",l,r),r})}listVideoInputDevices(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const r=yield this.deviceController.listVideoInputDevices(l);return this.trace("listVideoInputDevices",l,r),r})}listAudioOutputDevices(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioOutputDevices(l);return this.trace("listAudioOutputDevices",l,r),r})}startAudioInput(l){return d(this,void 0,void 0,function*(){return this.trace("startAudioInput",l),this.deviceController.startAudioInput(l)})}stopAudioInput(){return d(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(l){return d(this,void 0,void 0,function*(){return p.isVideoTransformDevice(l)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",l),this.deviceController.startVideoInput(l)})}stopVideoInput(){return d(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(l){const r=this.deviceController.chooseAudioOutput(l);return this.trace("chooseAudioOutput",l),r}addDeviceChangeObserver(l){this.deviceController.addDeviceChangeObserver(l),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(l){this.deviceController.removeDeviceChangeObserver(l),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const l=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),l}startVideoPreviewForVideoInput(l){this.deviceController.startVideoPreviewForVideoInput(l),this.trace("startVideoPreviewForVideoInput",l.id)}stopVideoPreviewForVideoInput(l){this.deviceController.stopVideoPreviewForVideoInput(l),this.trace("stopVideoPreviewForVideoInput",l.id)}setDeviceLabelTrigger(l){this.deviceController.setDeviceLabelTrigger(l),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(l){const r=this.deviceController.mixIntoAudioInput(l);return this.trace("mixIntoAudioInput",l.id),r}chooseVideoInputQuality(l,r,n){this.deviceController.chooseVideoInputQuality(l,r,n),this.trace("chooseVideoInputQuality",{width:l,height:r,frameRate:n})}setVideoMaxBandwidthKbps(l){this.audioVideoController.setVideoMaxBandwidthKbps(l),this.trace("setVideoMaxBandwidthKbps",l)}setVideoCodecSendPreferences(l){this.audioVideoController.setVideoCodecSendPreferences(l),this.trace("setVideoCodecSendPreferences",l)}getVideoInputQualitySettings(){const l=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),l}setContentAudioProfile(l){this.trace("setContentAudioProfile",l),this.contentShareController.setContentAudioProfile(l)}enableSimulcastForContentShare(l,r){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(l,r)}enableSVCForContentShare(l){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(l)}startContentShare(l){const r=this.contentShareController.startContentShare(l);return this.trace("startContentShare"),r}startContentShareFromScreenCapture(l,r){const n=this.contentShareController.startContentShareFromScreenCapture(l,r);return this.trace("startContentShareFromScreenCapture"),n}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(l){this.contentShareController.addContentShareObserver(l),this.trace("addContentShareObserver")}removeContentShareObserver(l){this.contentShareController.removeContentShareObserver(l),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(l){this.contentShareController.setContentShareVideoCodecPreferences(l),this.trace("setContentShareVideoCodecPreferences")}trace(l,r,n){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let i=`API/DefaultAudioVideoFacade/${e}/${t}/${l}`;typeof r<"u"&&(i+=` ${JSON.stringify(r)}`),typeof n<"u"&&(i+=` -> ${JSON.stringify(n)}`),this.audioVideoController.logger.info(i)}getRemoteVideoSources(){const l=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,l),l}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(l){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const r=this.audioVideoController.promoteToPrimaryMeeting(l);return this.trace("promoteToPrimaryMeeting",null,r),r}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(l){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(l,r,n,e,t,i){this.audioVideoController=l,this.videoTileController=r,this.realtimeController=n,this.audioMixController=e,this.deviceController=t,this.contentShareController=i}},"DefaultAudioVideoFacade");a.default=m},5281791356:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(890779530)),g=c(1174868230);let l=s(class extends m.default{drawImageWithMask(n,e){const t=this.blurredImage,{canvasCtx:i,targetCanvas:o}=this,{width:u,height:h}=o;if(!e||!t){i.clearRect(0,0,u,h);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),i.save(),i.clearRect(0,0,u,h),i.drawImage(this.scaledCanvas,0,0,u,h),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,u,h),i.globalCompositeOperation="destination-over",i.drawImage(this.blurCanvas,0,0,u,h),i.restore()}setBlurStrength(n){if(super.setBlurStrength(n),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=g.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(n){this.blurredImage=n.payload.blurOutput,super.handlePredict(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return d(this,void 0,void 0,function*(){n.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(n,e){super(n,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");a.default=l},890779530:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5407648653)),g=c(1174868230),l=p(c(3724840282));let r=s(class extends m.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:u}=this,{width:h,height:S}=u;o.save(),o.clearRect(0,0,h,S),o.drawImage(this.scaledCanvas,0,0,h,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,h,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,u.width,u.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=g.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return d(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new l.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");a.default=r},1174868230:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.BlurStrengthMapper=void 0;const c={LOW:7,MEDIUM:15,HIGH:30};let d=s(class{static getBlurAmount(m,g){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*g.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");a.BlurStrengthMapper=d,d.BLUR_STRENGTH_DIVISOR=540,a.default=c},3437938989:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(u,h,S,f){function v(E){return E instanceof S?E:new S(function(_){_(E)})}return s(v,"adopt"),new(S||(S=Promise))(function(E,_){function T(R){try{M(f.next(R))}catch(O){_(O)}}s(T,"fulfilled");function w(R){try{M(f.throw(R))}catch(O){_(O)}}s(w,"rejected");function M(R){R.done?E(R.value):v(R.value).then(T,w)}s(M,"step"),M((f=f.apply(u,h||[])).next())})},p=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(6828608641)),g=p(c(3714104304)),l=p(c(1370928943)),r=p(c(3814682321)),n=p(c(5281791356)),e=p(c(890779530)),t=p(c(1174868230));let i=s(class extends r.default{setBlurStrength(){}loadAssets(){return d(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=s(class Gl extends m.default{static create(h,S){return d(this,void 0,void 0,function*(){h=Gl.resolveSpec(h),S=Gl.resolveOptions(S);const{logger:f}=S,v=yield Gl.isSupported(h,S);if(f.info(`processor is ${v?"":"not"} supported`),!v)return f.warn("Using no-op processor because background blur is not supported"),new i;let E;return(yield e.default.isSupported())?(f.info("Using browser-provided background blur"),E=new e.default(h,S)):(f.info("Using built-in background blur"),E=new n.default(h,S)),yield E.loadAssets(),E})}static resolveOptions(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},h);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new g.default("BackgroundBlurProcessor",l.default.INFO)),S=super.resolveOptions(S),S}static isSupported(h,S){return h=Gl.resolveSpec(h),S=Gl.resolveOptions(S),super.isSupported(h,S)}},"BackgroundBlurVideoFrameProcessor");a.default=o},3724840282:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5703733606));let m=s(class extends p.default{},"BackgroundBlurVideoFrameProcessorDelegate");a.default=m},3051230507:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class pS{static builder(){return new pS}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const p={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},g="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=g,this.input=p,this.output=m,this}withPath(p){return this.path=p,this}withInput(p){return this.input=p,this}withOutput(p){return this.output=p,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");a.default=c},3522273832:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const c=.8;let d=s(class{reportEvent(m){const g=m-this.lastReportedEventTimestamp;if(g>=this.reportingPeriodMillis){const l=this.filterCount,r=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||l===0)return;const n=Math.round(r/l),e=Math.round(this.framerate*(g/1e3))-l,t=Math.round(100*r/g);n>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:n,framerate:this.framerate,periodMillis:g}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:r,periodMillis:g})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*c)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const g=Date.now();this.reportEvent(g)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,g,l,r){this.delegate=m,this.reportingPeriodMillis=g,this.filterCPUUtilization=l,this.logger=r,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");a.default=d},5407648653:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(t,i,o,u){function h(S){return S instanceof o?S:new o(function(f){f(S)})}return s(h,"adopt"),new(o||(o=Promise))(function(S,f){function v(T){try{_(u.next(T))}catch(w){f(w)}}s(v,"fulfilled");function E(T){try{_(u.throw(T))}catch(w){f(w)}}s(E,"rejected");function _(T){T.done?S(T.value):h(T.value).then(v,E)}s(_,"step"),_((u=u.apply(t,i||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0}),a.BackgroundFilterMonitor=void 0;const m=c(5963876428),g=p(c(1458156729)),l=p(c(3522273832));let r=s(class{whenNext(){return this.promise||(this.promise=new Promise(i=>this.resolve=i)),this.promise}next(i){this.value=i,this.resolve(i),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),n=s(class eh{static createWorkerPromise(){const i={resolve:null,reject:null,promise:null};return i.promise=new Promise((o,u)=>{i.resolve=o,i.reject=u}),i}validateSpec(i){if(!i)throw new Error("processor has null spec");if(!i.model)throw new Error("processor spec has null model");if(!i.paths)throw new Error("processor spec has null paths")}validateOptions(i){if(!i)throw new Error("processor has null options");if(!i.logger)throw new Error("processor has null options - logger");if(!i.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!i.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(i){this.videoFramesPerFilterUpdate=1,this.frameCounter=new l.default(this.delegate,i.reportingPeriodMillis,i.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(i){return JSON.stringify(i,null,2)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(i){if(this.logger.info(`received load model message: ${this.stringify(i)}`),i.payload!==2){this.logger.error("failed to load model! status: "+i.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+i.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(i){this.mask$.next(i.payload.output)}handleWorkerEvent(i){const o=i.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return d(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield m.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",i=>this.handleWorkerEvent(i)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(i){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${i.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(i){return d(this,void 0,void 0,function*(){if(this.destroyed)return i;this.frameCounter.frameReceived(i[0].framerate),this.cpuMonitor.frameReceived();const o=i[0].asCanvasElement();if(!o)return i;if(!this.modelInitialized)return i[0]=this.canvasVideoFrameBuffer,i;const u=o.width,h=o.height;if(u===0||h===0)return i;this.sourceWidth===0&&(this.sourceWidth=u,this.sourceHeight=h,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==u||this.sourceHeight!==h)&&(this.sourceWidth=u,this.sourceHeight=h,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const f=this.spec.model.input.width/o.width,v=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const E=this.scaledCanvas.getContext("2d");E.save(),E.scale(f,v),E.drawImage(o,0,0),E.restore();const _=E.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const T=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:_},[_.data.buffer]),S=yield T}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),i}finally{this.frameCounter.filterComplete(),this.frameNumber++}return i[0]=this.canvasVideoFrameBuffer,i})}updateVideoFramesPerFilterUpdate(i){i!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=i,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var i,o,u,h;return d(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(i=this.worker)===null||i===void 0||i.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(u=this.targetCanvas)===null||u===void 0||u.remove(),this.targetCanvas=void 0,(h=this.scaledCanvas)===null||h===void 0||h.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(i,o,u,h,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new g.default(this.targetCanvas),this.mask$=new r,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=eh.createWorkerPromise(),this.loadModelPromise=eh.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=i,this.validateSpec(o),this.validateOptions(u),this.spec=o,this.logger=u.logger,this.delegate=h,this.initCPUMonitor(u),this.eventController=S}},"BackgroundFilterProcessor");a.default=n;let e=s(class{filterCPUUtilizationHigh(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=i,this.observer.reduceCPUUtilization())}frameReceived(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=i,this.observer.increaseCPUUtilization())}constructor(i,o){this.monitoringPeriodMillis=i,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");a.BackgroundFilterMonitor=e},6828608641:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(u,h,S,f){function v(E){return E instanceof S?E:new S(function(_){_(E)})}return s(v,"adopt"),new(S||(S=Promise))(function(E,_){function T(R){try{M(f.next(R))}catch(O){_(O)}}s(T,"fulfilled");function w(R){try{M(f.throw(R))}catch(O){_(O)}}s(w,"rejected");function M(R){R.done?E(R.value):v(R.value).then(T,w)}s(M,"step"),M((f=f.apply(u,h||[])).next())})},p=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(5963876428),g=c(7984036634),l=p(c(3051230507)),r=p(c(5546774952)),n=p(c(6885109343)),e=s(()=>l.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",i={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=s(class{static defaultAssetSpec(){const h=n.default.sdkVersionSemVer;return{assetGroup:`sdk-${h.major}.${h.minor}`}}static createUrlWithParams(h,S){const f=new URL(h),v=Object.keys(S);for(const E of v)S[E]!==void 0&&f.searchParams.set(E,S[E]);return f.toString()}static resolveSpec(h){const{paths:S=i,model:f=e(),assetGroup:v=this.defaultAssetSpec().assetGroup,revisionID:E=this.defaultAssetSpec().revisionID}=h||{},_={assetGroup:v,revisionID:E,sdk:encodeURIComponent(n.default.sdkVersion),ua:encodeURIComponent(n.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,_),S.wasm=this.createUrlWithParams(S.wasm,_),S.simd=this.createUrlWithParams(S.simd,_),f.path=this.createUrlWithParams(f.path,_),{paths:S,model:f,assetGroup:v,revisionID:E}}static resolveOptions(h){h.reportingPeriodMillis||(h.reportingPeriodMillis=1e3);const S=30;return h.filterCPUUtilization?(h.filterCPUUtilization<0||h.filterCPUUtilization>100)&&(h.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),h.filterCPUUtilization=S):h.filterCPUUtilization=S,h}static isSupported(h,S){const{logger:f}=S;return typeof globalThis>"u"?(f.info("Browser does not have globalThis."),Promise.resolve(!1)):new r.default().supportsBackgroundFilter()?g.supportsWASM(globalThis,f)?this.supportsBackgroundFilter(globalThis,h,f):(f.info("Browser does not support WASM."),Promise.resolve(!1)):(f.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0;return d(this,void 0,void 0,function*(){if(!g.supportsWorker(h,f))return f.info("Browser does not support web workers."),!1;const v=S.paths.worker;try{const E=yield m.loadWorker(v,"BackgroundFilterWorker",{},null);try{E.terminate()}catch(_){f.info(`Failed to terminate worker. ${_.message}`)}return!0}catch(E){return f.info(`Failed to fetch and instantiate test worker ${E.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");a.default=o},5703733606:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{addObserver(p){this.observers.add(p)}removeObserver(p){this.observers.delete(p)}filterFrameDurationHigh(p){var m;for(const g of this.observers)(m=g.filterFrameDurationHigh)===null||m===void 0||m.call(g,p)}filterCPUUtilizationHigh(p){var m;for(const g of this.observers)(m=g.filterCPUUtilizationHigh)===null||m===void 0||m.call(g,p)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");a.default=c},4950936447:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5407648653)),g=p(c(2254148388));let l=s(class th extends m.default{setImageBlob(n){return d(this,void 0,void 0,function*(){this.replacementBlob=n,this.replacementImage=yield th.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(n,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:i,targetCanvas:o}=this,{width:u,height:h}=o;i.save(),i.clearRect(0,0,u,h),i.drawImage(this.scaledCanvas,0,0,u,h),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,u,h),i.globalCompositeOperation="destination-over",i.drawImage(this.replacementImage,0,0,o.width,o.height),i.restore()}static loadImageExecutor(n,e,t){const i=new Image;i.crossOrigin="Anonymous",i.addEventListener("load",()=>{n(i)},!1),i.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${i.src}: ${o.message}`))},!1),i.src=t}static loadImage(n){return d(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,n))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const n=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return d(this,void 0,void 0,function*(){this.replacementImage=yield th.loadImage(this.createReplacementObjectUrl()),n.loadAssets.call(this)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});return d(this,void 0,void 0,function*(){n.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(n){this.eventController?this.eventController=n:(this.eventController=n,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const n={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",n)}constructor(n,e){super("background replacement",n,e,new g.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");a.default=l},3561775467:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(i,o,u,h){function S(f){return f instanceof u?f:new u(function(v){v(f)})}return s(S,"adopt"),new(u||(u=Promise))(function(f,v){function E(w){try{T(h.next(w))}catch(M){v(M)}}s(E,"fulfilled");function _(w){try{T(h.throw(w))}catch(M){v(M)}}s(_,"rejected");function T(w){w.done?f(w.value):S(w.value).then(E,_)}s(T,"step"),T((h=h.apply(i,o||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(6828608641)),g=p(c(3714104304)),l=p(c(1370928943)),r=p(c(3814682321)),n=p(c(4950936447));let e=s(class extends r.default{loadAssets(){return d(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return d(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=s(class mS extends m.default{static create(o,u){return d(this,void 0,void 0,function*(){o=this.resolveSpec(o),u=this.resolveOptions(u),yield this.resolveOptionsAsync(u);const{logger:h}=u;if(!(yield mS.isSupported(o,u)))return h.warn("Using no-op processor because background replacement is not supported"),new e;h.info("Using background replacement filter");const f=new n.default(o,u);return yield f.loadAssets(),f})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const u=Object.assign({},o);return u.logger||(u.logger=new g.default("BackgroundReplacementProcessor",l.default.INFO)),super.resolveOptions(u)}static resolveOptionsAsync(o){return d(this,void 0,void 0,function*(){if(!o.imageBlob){const u=document.createElement("canvas");u.width=100,u.height=100;const h=u.getContext("2d");h.fillStyle="blue",h.fillRect(0,0,100,100);const S=yield new Promise(f=>{u.toBlob(f)});o.imageBlob=S}})}static isSupported(o,u){const h=Object.create(null,{isSupported:{get:()=>super.isSupported}});return d(this,void 0,void 0,function*(){o=this.resolveSpec(o),u=this.resolveOptions(u),yield this.resolveOptionsAsync(u);const S=u.imageBlob,f=URL.createObjectURL(S);try{yield n.default.loadImage(f)}catch(v){return u.logger.info(`Failed to fetch load replacement image ${v.message}`),!1}finally{URL.revokeObjectURL(f)}return h.isSupported.call(this,o,u)})}},"BackgroundReplacementVideoFrameProcessor");a.default=t},2254148388:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5703733606));let m=s(class extends p.default{},"BackgroundReplacementVideoFrameProcessorDelegate");a.default=m},4571447548:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const p=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,p}constructor(p,m,g){this.fixedWaitMs=p,this.shortBackoffMs=m,this.longBackoffMs=g,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");a.default=c},4692955950:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(4571447548)),m=d(c(1733276918));let g=s(class{create(){return new p.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(r){return new m.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,r)}constructor(r,n,e){this.fixedWaitMs=r,this.shortBackoffMs=n,this.longBackoffMs=e}},"FullJitterBackoffFactory");a.default=g},1733276918:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(4571447548));let m=s(class extends p.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(l,r,n,e){super(l,r,n),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");a.default=m},5546774952:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(585669709),m=c(888724265);let g=s(class nh{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const r of this.chromeLike)if(r===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const r of this.webkitBrowsers)if(r===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=nh.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=nh.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(r,n){return this.isAndroid()&&this.isPixel3()?[Math.ceil(r/64)*64,Math.ceil(n/64)*64]:[r,n]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const r=[];for(const n in this.browserSupport)r.push(`${this.browserName[n]} ${this.browserSupport[n]}+`);return r.join(", ")}supportedVideoCodecs(){return d(this,void 0,void 0,function*(){const r=new RTCPeerConnection;return r.addTransceiver("video",{direction:"inactive",streams:[]}),(yield r.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(n=>n.includes("a=rtpmap:")).map(n=>n.replace(/.* /,"").replace(/\/.*/,"")).filter((n,e,t)=>t.indexOf(n)===e).filter(n=>n!=="rtx"&&n!=="red"&&n!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=p.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");a.default=g,g.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,g.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},9029233041:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(4136617125),m=d(c(6502873558)),g=d(c(6132421099)),l=d(c(7966078085));let r=s(class gS{getMetricMap(e,t){switch(e){case g.default.AUDIO:switch(t){case m.default.UPSTREAM:return this.audioUpstreamMetricMap;case m.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case g.default.VIDEO:switch(t){case m.default.UPSTREAM:return this.videoUpstreamMetricMap;case m.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:u,source:h}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const f=this.streamMetricReports[S];if(f.direction===t.dir&&f.mediaType===t.media)return u(h||t.source,Number(S))}else return u(h||t.source);return 0}getObservableVideoMetricValue(e,t){const i=this.observableVideoMetricSpec[e],u=this.getMetricMap(i.media,i.dir)[i.source],{transform:h,source:S}=u;return h(S||i.source,t)}getVideoUpstreamSsrc(){for(const e in this.streamMetricReports)if(this.streamMetricReports[e].mediaType===g.default.VIDEO&&this.streamMetricReports[e].direction===m.default.UPSTREAM)return Number(e);return null}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===g.default.VIDEO){const i={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const f=this.getObservableVideoMetricValue(S,Number(t));isNaN(f)||(i[S]=f)}const o=this.streamMetricReports[t].groupId,u=this.streamMetricReports[t].streamId;let h="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?h=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:h=u?this.videoStreamIndex.attendeeIdForStreamId(u):this.selfAttendeeId,e[h]=e[h]?e[h]:{},e[h][t]=i}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new gS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,i){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=i,this.globalMetricReport=new l.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;return Number(h.currentMetrics[o])},this.decoderLossPercent=(o,u)=>{const h=this.streamMetricReports[u],S=h.currentMetrics.concealedSamples-(h.previousMetrics.concealedSamples||0),f=h.currentMetrics.totalSamplesReceived-(h.previousMetrics.totalSamplesReceived||0);return f<=0||f-S<=0?0:S/f*100},this.packetLossPercent=(o,u)=>{const h=this.streamMetricReports[u],S=h.currentMetrics[o]-(h.previousMetrics[o]||0),f=h.currentMetrics.packetsLost-(h.previousMetrics.packetsLost||0),v=S+f;return v<=0||f<=0?0:f*100/v},this.jitterBufferMs=(o,u)=>{const h=this.streamMetricReports[u],S=h.currentMetrics.jitterBufferDelay-(h.previousMetrics.jitterBufferDelay||0),f=h.currentMetrics.jitterBufferEmittedCount-(h.previousMetrics.jitterBufferEmittedCount||0);return S<=0||f<=0?0:S/f*1e3},this.countPerSecond=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const f=h.currentMetrics[o]-(h.previousMetrics[o]||0);return f<=0?0:Math.trunc(f/S)},this.bitsPerSecond=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const f=(h.currentMetrics[o]-(h.previousMetrics[o]||0))*8;return f<=0?0:Math.trunc(f/S)},this.secondsToMilliseconds=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;return Number(h.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const f=h.currentMetrics[o]-(h.previousMetrics[o]||0);return f<=0?0:f*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,u)=>{const h=this.streamMetricReports[u];if(h.previousObjectMetrics[o]===void 0||h.currentObjectMetrics[o]===void 0)return NaN;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let f=0,v=0;for(const[_,T]of Object.entries(h.previousObjectMetrics[o]))_==="cpu"&&(f=T);for(const[_,T]of Object.entries(h.currentObjectMetrics[o]))_==="cpu"&&(v=T);const E=v-f;return E<=0?0:E*1e3/S},this.isHardwareImplementation=(o,u)=>{const h=this.streamMetricReports[u];if(h.currentStringMetrics[o]===void 0)return NaN;const S=String(h.currentStringMetrics[o]),f=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),v=S.includes("fallback from");return f&&!v?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:p.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:p.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:p.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:p.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:p.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:p.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:p.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:p.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:p.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:p.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:g.default.VIDEO,dir:m.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:g.default.AUDIO,dir:m.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:g.default.AUDIO,dir:m.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:g.default.AUDIO,dir:m.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:g.default.VIDEO,dir:m.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:g.default.AUDIO,dir:m.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:g.default.VIDEO,dir:m.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");a.default=r},6502873558:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ClientMetricReportDirection=void 0;var c;(function(d){d[d.UPSTREAM=0]="UPSTREAM",d[d.DOWNSTREAM=1]="DOWNSTREAM"})(c=a.ClientMetricReportDirection||(a.ClientMetricReportDirection={})),a.default=c},6132421099:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ClientMetricReportMediaType=void 0;var c;(function(d){d[d.AUDIO=0]="AUDIO",d[d.VIDEO=1]="VIDEO"})(c=a.ClientMetricReportMediaType||(a.ClientMetricReportMediaType={})),a.default=c},863418510:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"ClientVideoStreamReceivingReport");a.default=c},7966078085:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");a.default=c},3237015968:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");a.default=c},6172292806:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");a.default=c},1516469294:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(p){this.currentData=p}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const p=this.health();return p!==this.currentHealth?(this.currentHealth=p,p):null}constructor(p,m,g){this.minHealth=p.minHealth,this.maxHealth=p.maxHealth,this.currentHealth=p.initialHealth,this.currentData=m.clone(),this.name=g}},"BaseConnectionHealthPolicy");a.default=c},9200233701:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class wa{static isTimestampRecent(p,m){return Date.now()<p+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(p){return wa.isTimestampRecent(this.connectionStartTimestampMs,p)}isLastPacketLossRecent(p){return wa.isTimestampRecent(this.lastPacketLossInboundTimestampMs,p)}isGoodSignalRecent(p){return wa.isTimestampRecent(this.lastGoodSignalTimestampMs,p)}isWeakSignalRecent(p){return wa.isTimestampRecent(this.lastWeakSignalTimestampMs,p)}isNoSignalRecent(p){return wa.isTimestampRecent(this.lastNoSignalTimestampMs,p)}clone(){const p=new wa;return p.connectionStartTimestampMs=this.connectionStartTimestampMs,p.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,p.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,p.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,p.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,p.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,p.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,p.consecutiveMissedPongs=this.consecutiveMissedPongs,p.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),p.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),p.audioSpeakerDelayMs=this.audioSpeakerDelayMs,p.isVideoEncoderHardware=this.isVideoEncoderHardware,p.videoEncodingTimeInMs=this.videoEncodingTimeInMs,p.cpuLimitationDuration=this.cpuLimitationDuration,p.videoInputFps=this.videoInputFps,p.videoEncodeFps=this.videoEncodeFps,p}setConsecutiveMissedPongs(p){this.consecutiveMissedPongs=p}setConsecutiveStatsWithNoPackets(p){this.consecutiveStatsWithNoPackets=p}setConsecutiveStatsWithNoAudioPacketsSent(p){this.consecutiveStatsWithNoAudioPacketsSent=p}setLastPacketLossInboundTimestampMs(p){this.lastPacketLossInboundTimestampMs=p}setLastNoSignalTimestampMs(p){this.lastNoSignalTimestampMs=p}setLastWeakSignalTimestampMs(p){this.lastWeakSignalTimestampMs=p}setLastGoodSignalTimestampMs(p){this.lastGoodSignalTimestampMs=p}setAudioSpeakerDelayMs(p){this.audioSpeakerDelayMs=p}setIsVideoEncoderHardware(p){this.isVideoEncoderHardware=p}setVideoEncodingTimeInMs(p){this.videoEncodingTimeInMs=p}setCpuLimitationDuration(p){this.cpuLimitationDuration=p}setVideoInputFps(p){this.videoInputFps=p}setVideoEncodeFps(p){this.videoEncodeFps=p}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");a.default=c},8692068971:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6661072615)),m=d(c(1502393534));let g=s(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[p.default,m.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");a.default=g},5850044630:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1516469294));let m=s(class Jo extends p.default{health(){if(this.currentData.isConnectionStartRecent(Jo.CONNECTION_WAIT_TIME_MS))return 1;const r=this.currentData.consecutiveStatsWithNoPackets>=Jo.CONNECTION_UNHEALTHY_THRESHOLD,n=this.currentData.consecutiveMissedPongs>=Jo.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>Jo.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>Jo.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),r||n||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${r}, missed pongs: ${n}, bad audio delay: ${e}`),0):1}constructor(l,r,n){super(r,n,"Reconnection Health"),this.logger=l,this.audioDelayPointsOverMaximum=0,Jo.CONNECTION_UNHEALTHY_THRESHOLD=r.connectionUnhealthyThreshold,Jo.CONNECTION_WAIT_TIME_MS=r.connectionWaitTimeMs,Jo.MISSED_PONGS_THRESHOLD=r.missedPongsUpperThreshold,Jo.MAXIMUM_AUDIO_DELAY_MS=r.maximumAudioDelayMs,Jo.MAXIMUM_AUDIO_DELAY_DATA_POINTS=r.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");a.default=m},4866586987:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1516469294));let m=s(class extends p.default{isSendingAudioUnhealthy(){const l=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),r=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return l&&r}health(){if(this.isSendingAudioUnhealthy()){const l=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!l?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(l,r,n){super(r,n,"Sending Audio Health"),this.logger=l,this.sendingAudioFailureSamplesToConsider=r.sendingAudioFailureSamplesToConsider>0?r.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=r.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=r.maximumTimesToWarn,this.coolDownTimeMs=r.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");a.default=m},174963938:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1516469294));let m=s(class extends p.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const l=this.pastSamplesToConsider,r=l*this.packetsExpected;let n=0;for(let e=0;e<l;e++)n+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-n/r,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(l,r){super(l,r,"Unusable Audio Warning"),this.coolDownTimeMs=l.cooldownTimeMs,this.pastSamplesToConsider=l.pastSamplesToConsider,this.fractionalLoss=l.fractionalLoss,this.packetsExpected=l.packetsExpected,this.maximumTimesToWarn=l.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");a.default=m},3334420728:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VideoEncodingConnectionHealthPolicyName=void 0;var c;(function(d){d.VideoEncodingCpuHealth="Video Encoding CPU Health",d.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(c=a.VideoEncodingConnectionHealthPolicyName||(a.VideoEncodingConnectionHealthPolicyName={})),a.default=c},6661072615:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1516469294)),m=d(c(3334420728));let g=s(class extends p.default{health(){if(!this.currentData.isVideoEncoderHardware&&(this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=r.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=r.highEncodeCpuMsThreshold}},"VideoEncodingCpuConnectionHealthPolicy");a.default=g},1502393534:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1516469294)),m=d(c(3334420728));let g=s(class extends p.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=r.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");a.default=g},8619504925:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(6527539809);let p=s(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(g){g===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):g<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(g,l,r){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",l),this.statsCollector.logLatency("ping_pong_clock_skew",r),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(g){let l=0,r=0;const n=g.getObservableMetrics(),e=n.audioPacketsReceived,t=n.audioPacketsReceivedFractionLoss,i=n.audioSpeakerDelayMs;typeof i=="number"&&!isNaN(i)&&this.connectionHealthData.setAudioSpeakerDelayMs(i);const o=g.getRTCStatsReport();let u=0;o.forEach(S=>{S.type==="candidate-pair"&&S.bytesReceived&&(u+=S.bytesReceived)});const h=u-this.lastTotalBytesReceived;if(this.lastTotalBytesReceived=u,typeof e=="number"&&typeof t=="number"){if(l=e,r=t,l<0||r<0||h<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,l),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,r),h>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(l===0||r>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof n.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(n.audioPacketsSent),this.updateVideoEncodingHealth(g),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(g){g>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(g){const l=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),r=g.getVideoUpstreamSsrc();if(!l||r===null){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimeInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}const n=g.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",r),e=g.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",r),t=g.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",r),i=g.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",r),o=g.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",r);this.connectionHealthData.setIsVideoEncoderHardware(Boolean(n)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(i),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(g,l){g.unshift(l),g.length>60&&g.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(g=>{d.Maybe.of(g.connectionHealthDidChange).map(l=>l.bind(g)(this.connectionHealthData.clone()))})}constructor(g,l,r,n,e){this.audioVideoController=g,this.realtimeController=l,this.connectionHealthData=r,this.pingPong=n,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");a.default=p},805846668:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.Modality="#content"})(c||(c={})),a.default=c},220809536:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5546774952)),g=p(c(8503424008));let l=s(class ih{get mediaStream(){return this._mediaStream}set mediaStream(n){this._mediaStream=n}acquireAudioInputStream(){return d(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),g.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return d(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(n){return d(this,void 0,void 0,function*(){return n&&n.video&&n.video.mandatory&&n.video.mandatory.chromeMediaSource&&n.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(n):navigator.mediaDevices.getDisplayMedia(n)})}acquireScreenCaptureDisplayInputStream(n,e){return d(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(n,e))})}screenCaptureDisplayMediaConstraints(n,e){return{audio:!!(!n&&new m.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!n&&{frameRate:{max:e||ih.defaultFrameRate}}),n&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:e||ih.defaultFrameRate}})}}toggleMediaStream(n){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==n&&(this.mediaStream.getTracks()[t].enabled=n,e=!0);return e}cleanup(){if(this.mediaStream)for(let n=0;n<this.mediaStream.getTracks().length;n++)this.mediaStream.getTracks()[n].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(n){}removeMediaStreamBrokerObserver(n){}constructor(n){this.logger=n}},"ContentShareMediaStreamBroker");a.default=l,l.defaultFrameRate=15},7050079116:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(h,S,f,v){function E(_){return _ instanceof f?_:new f(function(T){T(_)})}return s(E,"adopt"),new(f||(f=Promise))(function(_,T){function w(O){try{R(v.next(O))}catch(k){T(k)}}s(w,"fulfilled");function M(O){try{R(v.throw(O))}catch(k){T(k)}}s(M,"rejected");function R(O){O.done?_(O.value):E(O.value).then(w,M)}s(R,"step"),R((v=v.apply(h,S||[])).next())})},p=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(1197017824)),g=p(c(6226061697)),l=p(c(8023404193)),r=p(c(8006173476)),n=p(c(9649641385)),e=c(6527539809),t=p(c(681222244)),i=p(c(4499376852)),o=p(c(805846668));let u=s(class{static createContentShareMeetingSessionConfigure(S){const f=new g.default;return f.meetingId=S.meetingId,f.externalMeetingId=S.externalMeetingId,f.urls=S.urls,f.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,f.credentials=new l.default,f.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,f.credentials.externalUserId=S.credentials.externalUserId,f.credentials.joinToken=S.credentials.joinToken+o.default.Modality,f.meetingFeatures=S.meetingFeatures.clone(),f.videoDownlinkBandwidthPolicy=new t.default,f}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,f){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new i.default(this.contentAudioVideo.logger,f)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return d(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===m.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let f=0;f<this.mediaStreamBroker.mediaStream.getTracks().length;f++)this.mediaStreamBroker.mediaStream.getTracks()[f].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,f){return d(this,void 0,void 0,function*(){const v=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,f);return yield this.startContentShare(v),v})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(f=>f.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(f=>f.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return d(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const f of this.observerQueue)n.default.nextTick(()=>{this.observerQueue.has(f)&&S(f)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(f=>{e.Maybe.of(f.contentShareDidStop).map(v=>v.call(f))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,f,v,E)=>{const _=new r.default(S).hasModality(r.default.MODALITY_CONTENT),T=new r.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!_||!T||!f||this.contentShareTile)return;const w=this.mediaStreamBroker.mediaStream;if(w!=null&&w.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const M=w.getVideoTracks()[0];let R,O;if(M.getSettings){const k=M.getSettings();R=k.width,O=k.height}else{const k=M.getCapabilities();R=k.width,O=k.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,w,R,O,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(M=>{e.Maybe.of(M.contentShareDidStart).map(R=>R.call(M))})})}constructor(S,f,v){this.mediaStreamBroker=S,this.contentAudioVideo=f,this.attendeeAudioVideo=v,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");a.default=u},8207737579:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let d=s(class Do{static register(){!("document"in c.g)||!document.addEventListener||Do.shouldRegisterCSPMonitor&&(Do.added||(document.addEventListener("securitypolicyviolation",Do.listener),Do.added=!0))}static unregister(){!("document"in c.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Do.listener),Do.loggers=new Set,Do.added=!1)}static disable(){Do.shouldRegisterCSPMonitor=!1,Do.unregister()}static addLogger(m){m&&Do.loggers.add(m)}static removeLogger(m){m&&Do.loggers.delete(m)}},"CSPMonitor");a.default=d,d.loggers=new Set,d.shouldRegisterCSPMonitor=!0,d.added=!1,d.listener=p=>{const m=`Security Policy Violation
Blocked URI: ${p.blockedURI}
Violated Directive: ${p.violatedDirective}
Original Policy: ${p.originalPolicy}
Document URI: ${p.documentURI}
Source File: ${p.sourceFile}
Line No.: ${p.lineNumber}
`;for(const g of d.loggers)g.error(m);d.loggers.size===0&&console.error(m)}},9091803745:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(p,m,g,l,r,n){this.timestampMs=p,this.topic=m,this.data=g,this.senderAttendeeId=l,this.senderExternalUserId=r,this.throttled=!!n}},"DataMessage");a.default=c},4236152345:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isDestroyable=void 0;function c(d){return d&&"destroy"in d}s(c,"isDestroyable"),a.isDestroyable=c},9678458173:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isAudioTransformDevice=void 0;function c(d){return!!d&&typeof d=="object"&&"mute"in d&&"stop"in d&&"intrinsicDevice"in d}s(c,"isAudioTransformDevice"),a.isAudioTransformDevice=c},8503424008:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(R,O,k,A){function P(D){return D instanceof k?D:new k(function(H){H(D)})}return s(P,"adopt"),new(k||(k=Promise))(function(D,H){function j(ee){try{X(A.next(ee))}catch(fe){H(fe)}}s(j,"fulfilled");function W(ee){try{X(A.throw(ee))}catch(fe){H(fe)}}s(W,"rejected");function X(ee){ee.done?D(ee.value):P(ee.value).then(j,W)}s(X,"step"),X((A=A.apply(R,O||[])).next())})},p=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5546774952)),g=p(c(1716952340)),l=p(c(9649641385)),r=p(c(3054351868)),n=c(6527539809),e=p(c(7309008175)),t=p(c(8089299542)),i=c(9678458173),o=p(c(1869028663)),u=p(c(7754931014)),h=p(c(1823340272)),S=p(c(566402552)),f=p(c(5336609685)),v=p(c(763542717)),E=p(c(9398215393)),_=p(c(1197017824)),T=c(7952414906);let w=s(class Bi{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var O;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(O=this.mediaDeviceWrapper)===null||O===void 0||O.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var O;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(O=this.mediaDeviceWrapper)===null||O===void 0||O.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return d(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const k=yield this.listDevicesOfKind("audioinput",O);return this.trace("listAudioInputDevices",O,k),k})}listVideoInputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const k=yield this.listDevicesOfKind("videoinput",O);return this.trace("listVideoInputDevices",O,k),k})}listAudioOutputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const k=yield this.listDevicesOfKind("audiooutput",O);return this.trace("listAudioOutputDevices",O,k),k})}pushAudioMeetingStateForPermissions(O){var k;(k=this.eventController)===null||k===void 0||k.publishEvent(O===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(O){var k;(k=this.eventController)===null||k===void 0||k.publishEvent(O===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(O){return d(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(O))})}startAudioInputTask(O){var k;return d(this,void 0,void 0,function*(){if(O===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return i.isAudioTransformDevice(O)?(this.logger.info(`Choosing transform input device ${O}`),yield this.chooseAudioTransformInputDevice(O)):(this.logger.info(`Choosing intrinsic audio input device ${O}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",O)),this.trace("startAudioInputDevice",O,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(k=this.transform)===null||k===void 0?void 0:k.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(A){throw A}})}stopAudioInput(){return d(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return d(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(O){var k;return d(this,void 0,void 0,function*(){if(((k=this.transform)===null||k===void 0?void 0:k.device)===O)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const A=Bi.getAudioContext();if(!(A instanceof OfflineAudioContext))switch(A.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield A.resume()}let P;try{P=yield O.createAudioNode(A)}catch(H){throw this.logger.error(`Unable to create transform device node: ${H}.`),H}const D=yield O.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",D),this.logger.debug(`Got inner stream: ${D}.`),this.setTransform(O,P)})}chooseVideoTransformInputDevice(O){var k;return d(this,void 0,void 0,function*(){if(this.eventController&&O instanceof e.default&&O.passEventControllerToProcessors(this.eventController),O===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const A=this.chosenVideoTransformDevice;A&&this.logger.info("Switched from previous VideoTransformDevice");const P=!!A,D=yield O.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((k=this.activeDevices.video)===null||k===void 0?void 0:k.stream,D)){this.logger.info("video transform device needs new intrinsic device"),P&&A.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=O,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",D),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=O,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield O.transformStream(this.activeDevices.video.stream)})}startVideoInput(O){return d(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(O))})}startVideoInputTask(O){return d(this,void 0,void 0,function*(){if(!O){this.logger.error("Invalid video input device");return}try{return T.isVideoTransformDevice(O)?(this.logger.info(`Choosing video transform device ${O}`),yield this.chooseVideoTransformInputDevice(O),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",O),this.trace("startVideoInputDevice",O),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(k){throw k}})}stopVideoInput(){return d(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return d(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(O){return d(this,void 0,void 0,function*(){this.audioOutputDeviceId=O,this.watchForDeviceChangesIfNecessary();const k=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(k),this.trace("chooseAudioOutput",O,null)})}addDeviceChangeObserver(O){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(O),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(O){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(O),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var O,k;if(!this.activeDevices.audio)return null;const A=(k=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||k===void 0?void 0:k.end;if(A){const P=A.context.createAnalyser();return P.removeOriginalInputs=()=>{try{A.disconnect(P)}catch{}},A.connect(P),P}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(O){const k=Bi.getAudioContext(),A=k.createAnalyser(),P=k.createMediaStreamSource(O);return P.connect(A),this.trace("createAnalyserNodeForAudioInput"),A.removeOriginalInputs=()=>{try{P.disconnect(A)}catch{}},A}startVideoPreviewForVideoInput(O){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",O.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,O,!0),this.trace("startVideoPreviewForVideoInput",O.id)}stopVideoPreviewForVideoInput(O){t.default.disconnectVideoStreamFromVideoElement(O,!1),this.trace("stopVideoPreviewForVideoInput",O.id)}setDeviceLabelTrigger(O){if(this.deviceInfoCache){for(const k of this.deviceInfoCache)if(!k.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=O,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(O){let k=null;return this.useWebAudio?(k=Bi.getAudioContext().createMediaStreamSource(O),k.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",O.id),k}chooseVideoInputQuality(O,k,A){const P=this.browserBehavior.requiresResolutionAlignment(O,k);this.videoInputQualitySettings=new _.default(P[0],P[1],A)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return d(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return d(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(O){return d(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(O){const k=this.activeDevices[O];if(!k)return;const A=k.endedCallback,P=k.trackMuteCallback,D=k.trackUnmuteCallback;for(const H of k.stream.getTracks())H.stop(),A&&H.removeEventListener("ended",A),P&&H.removeEventListener("mute",P),D&&H.removeEventListener("unmute",D),delete k.endedCallback,delete k.trackMuteCallback,delete k.trackUnmuteCallback,delete this.activeDevices[O]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(O){var k;let A=this.activeDevices.audio;if(this.useWebAudio&&(A=this.getMediaStreamDestinationNode()),!!A){for(const P of A.stream.getTracks())P.enabled!==O&&(P.enabled=O);this.muted!==!O&&(this.muted=!O,(k=this.transform)===null||k===void 0||k.device.mute(this.muted))}}static getIntrinsicDeviceId(O){if(!O)return;if(typeof O=="string")return O;if(O.id)return O.id;const A=O.deviceId;if(!A)return;if(typeof A=="string"||Array.isArray(A))return A;const P=A;if(typeof P.exact=="string"||Array.isArray(P.exact))return P.exact}static createEmptyAudioDevice(){return Bi.synthesizeAudioDevice(0)}static synthesizeAudioDevice(O){const k=Bi.getAudioContext(),A=k.createMediaStreamDestination();if(O){const P=k.createGain();P.gain.value=.1,P.connect(A);const D=k.createOscillator();D.frequency.value=O,D.connect(P),D.start()}else{const P=k.createBufferSource();try{P.buffer=k.createBuffer(1,k.sampleRate*5,k.sampleRate)}catch(D){if(D&&D.name==="NotSupportedError")P.buffer=k.createBuffer(1,Bi.defaultSampleRate*5,Bi.defaultSampleRate);else throw D}P.buffer.getChannelData(0)[0]=3e-4,P.loop=!0,P.connect(A),P.start()}return A.stream}listDevicesOfKind(O,k){return d(this,void 0,void 0,function*(){return(k||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(O)})}updateDeviceInfoCacheFromBrowser(){var O;return d(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let A=yield navigator.mediaDevices.enumerateDevices(),P=!0;for(const D of A)if(!D.label){P=!1;break}if(!P)try{this.logger.info("attempting to trigger media device labels since they are hidden");const D=yield this.deviceLabelTrigger();A=yield navigator.mediaDevices.enumerateDevices();for(const H of D.getTracks())H.stop()}catch(D){this.logger.info("unable to get media device labels"),(O=this.eventController)===null||O===void 0||O.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(D)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(A)}`),this.deviceInfoCache=A})}listCachedDevicesOfKind(O){const k=[];if(this.deviceInfoCache)for(const A of this.deviceInfoCache)A.kind===O&&k.push(A);return k}handleDeviceChange(){return d(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){l.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const O=this.listCachedDevicesOfKind("audioinput"),k=this.listCachedDevicesOfKind("videoinput"),A=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const P=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),H=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(j=>{this.areDeviceListsEqual(O,P)||n.Maybe.of(j.audioInputsChanged).map(W=>W.bind(j)(P)),this.areDeviceListsEqual(k,D)||n.Maybe.of(j.videoInputsChanged).map(W=>W.bind(j)(D)),this.areDeviceListsEqual(A,H)||n.Maybe.of(j.audioOutputsChanged).map(W=>W.bind(j)(H))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(O,k){return d(this,void 0,void 0,function*(){try{O==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}O==="audio"?this.forEachObserver(A=>{n.Maybe.of(A.audioInputStreamEnded).map(P=>P.bind(A)(k))}):this.forEachObserver(A=>{n.Maybe.of(A.videoInputStreamEnded).map(P=>P.bind(A)(k))})})}forEachObserver(O){for(const k of this.deviceChangeObservers)l.default.nextTick(()=>{this.deviceChangeObservers.has(k)&&O(k)})}forEachMediaStreamBrokerObserver(O){for(const k of this.mediaStreamBrokerObservers)l.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(k)&&O(k)})}areDeviceListsEqual(O,k){return JSON.stringify(O.map(A=>JSON.stringify(A)).sort())===JSON.stringify(k.map(A=>JSON.stringify(A)).sort())}intrinsicDeviceAsMediaStream(O){return O&&O.id?O:null}hasSameMediaStreamId(O,k,A){var P,D,H,j;let W;return O==="audio"?(W=A==null?void 0:A.audio.streamId,!!W&&W===((D=(P=k.constraints)===null||P===void 0?void 0:P.audio)===null||D===void 0?void 0:D.streamId)):(W=A==null?void 0:A.video.streamId,!!W&&W===((j=(H=k==null?void 0:k.constraints)===null||H===void 0?void 0:H.video)===null||j===void 0?void 0:j.streamId))}hasSameGroupId(O,k,A){if(O==="")return!0;const P=Bi.getIntrinsicDeviceId(A);return this.logger.debug(`Checking deviceIds ${P} of type ${typeof P} with groupId ${O}`),typeof P=="string"&&O===this.getGroupIdFromDeviceId(k,P)}getGroupIdFromDeviceId(O,k){if(this.deviceInfoCache!==null){const A=this.listCachedDevicesOfKind(`${O}input`).find(P=>P.deviceId===k);if(A&&A.groupId)return this.logger.debug(`GroupId of deviceId ${k} found in cache is ${A.groupId}`),A.groupId}return this.logger.debug(`GroupId of deviceId ${k} found in cache is empty`),""}handleGetUserMediaError(O,k){if(!O)throw new u.default(O);switch(O.name){case"NotReadableError":case"TrackStartError":throw new S.default(O);case"NotFoundError":case"DevicesNotFoundError":throw new h.default(O);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw k&&k<Bi.permissionDeniedOriginDetectionThresholdMs?new v.default(O,"Permission denied by browser"):new v.default(O,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new f.default(O);case"TypeError":throw new E.default(O);case"AbortError":default:throw new u.default(O)}}matchesDeviceSelection(O,k,A,P){return A&&A.stream.active&&(this.hasSameMediaStreamId(O,A,P)||A.groupId!==null&&this.hasSameGroupId(A.groupId,O,k))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(A.constraints)} to proposed constraints ${JSON.stringify(P)}`),A.matchesConstraints(P)):!1}chooseInputIntrinsicDevice(O,k){var A,P;return d(this,void 0,void 0,function*(){const D=this.getMediaStreamConstraints(O,k);if(this.matchesDeviceSelection(O,k,this.activeDevices[O],D)){this.logger.info(`reusing existing ${O} input device`);return}this.activeDevices[O]&&this.activeDevices[O].stream&&this.stopTracksAndRemoveCallbacks(O);const H=Date.now(),j=new o.default;try{this.logger.info(`requesting new ${O} device with constraint ${JSON.stringify(D)}`);const W=this.intrinsicDeviceAsMediaStream(k);O==="audio"&&k===null?(j.stream=Bi.createEmptyAudioDevice(),j.constraints=null):W?(this.logger.info(`using media stream ${W.id} for ${O} device`),j.stream=W,j.constraints=D):(j.stream=yield navigator.mediaDevices.getUserMedia(D),j.constraints=D),yield this.handleNewInputDevice(O,j)}catch(W){const X=this.getErrorMessage(W);O==="audio"?(A=this.eventController)===null||A===void 0||A.publishEvent("audioInputFailed",{audioInputErrorMessage:X}):(P=this.eventController)===null||P===void 0||P.publishEvent("videoInputFailed",{videoInputErrorMessage:X}),this.logger.error(`failed to get ${O} device for constraints ${JSON.stringify(D)}: ${X}`);let ee=!0;if(W&&"constraint"in W&&(this.logger.error(`Over-constrained by constraint: ${W.constraint}`),this.useMediaConstraintsFallback)){const fe=this.getMediaStreamConstraints(O,k,!0),oe=JSON.stringify(fe);if(oe!==JSON.stringify(D)){this.logger.info(`retry requesting new ${O} device with minimal constraint ${oe}`);try{j.stream=yield navigator.mediaDevices.getUserMedia(fe),j.constraints=fe,yield this.handleNewInputDevice(O,j),ee=!1}catch(Oe){this.logger.error(`failed to get ${O} device for constraints ${oe}: ${this.getErrorMessage(Oe)}`)}}}if(ee){if(O==="audio"){this.logger.info(`choosing null ${O} device instead`);try{j.stream=Bi.createEmptyAudioDevice(),j.constraints=null,yield this.handleNewInputDevice(O,j)}catch(fe){this.logger.error(`failed to choose null ${O} device. ${fe.name}: ${fe.message}`)}}this.handleGetUserMediaError(W,Date.now()-H)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(O){return O?O.name&&O.message?`${O.name}: ${O.message}`:O.name?O.name:O.message?O.message:"UnknownError":"UnknownError"}handleNewInputDevice(O,k){var A;return d(this,void 0,void 0,function*(){this.logger.info(`got ${O} device for constraints ${JSON.stringify(k.constraints)}`);const P=(A=this.getMediaTrackSettings(k.stream))===null||A===void 0?void 0:A.deviceId;k.groupId=P?this.getGroupIdFromDeviceId(O,P):"",this.activeDevices[O]=k,this.logger.debug(`Set activeDevice to ${JSON.stringify(k)}`),this.watchForDeviceChangesIfNecessary();const D=k.stream.getTracks()[0];if(D&&(k.endedCallback=()=>{this.activeDevices[O]&&this.activeDevices[O].stream===k.stream&&(this.handleDeviceStreamEnded(O,P),delete k.endedCallback)},D.addEventListener("ended",k.endedCallback,{once:!0})),O==="audio"){const H=k.stream.getAudioTracks()[0];if(H){const j=H.getSettings().deviceId||k.stream;k.trackMuteCallback=()=>{this.mediaStreamMuteObserver(j,!0)},k.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(j,!1)},H.addEventListener("mute",k.trackMuteCallback,{once:!1}),H.addEventListener("unmute",k.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),H.muted?k.trackMuteCallback():k.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(O,k,A,P){if(P&&this.listCachedDevicesOfKind(`${O}input`).length===1)return!0;const D={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?D.deviceId=k:D.deviceId={exact:k},A&&(D.groupId=A),P?D:O==="video"?(D.width={ideal:this.videoInputQualitySettings.videoWidth},D.height={ideal:this.videoInputQualitySettings.videoHeight},D.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},D):(this.supportSampleRateConstraint()&&(D.sampleRate={ideal:Bi.defaultSampleRate}),this.supportSampleSizeConstraint()&&(D.sampleSize={ideal:Bi.defaultSampleSize}),this.supportChannelCountConstraint()&&(D.channelCount={ideal:Bi.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},D))}getMediaStreamConstraintsFromTrackConstraints(O,k){return O==="audio"?{audio:k}:{video:k}}getMediaStreamConstraints(O,k){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,P={};if(!k)return null;const D=this.intrinsicDeviceAsMediaStream(k);if(D)return P.streamId=D.id,this.getMediaStreamConstraintsFromTrackConstraints(O,P);if(typeof k=="string"){let H="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?H=this.getGroupIdFromDeviceId(O,k):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),P=this.calculateMediaStreamConstraints(O,k,H,A),this.getMediaStreamConstraintsFromTrackConstraints(O,P)}return M(k)?(P=this.calculateMediaStreamConstraints(O,k.deviceId,k.groupId,A),this.getMediaStreamConstraintsFromTrackConstraints(O,P)):(P=k,this.getMediaStreamConstraintsFromTrackConstraints(O,P))}deviceInfoFromDeviceId(O,k){if(this.deviceInfoCache===null)return null;for(const A of this.deviceInfoCache)if(A.kind===O&&A.deviceId===k)return A;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(O,k){if(!O||!O.active||!k)return!1;if(k.id)return O.id===k.id;const A=this.getMediaTrackSettings(O);if(!A.deviceId)return!1;const P=Bi.getIntrinsicDeviceId(k);return typeof P=="string"?A.deviceId===P:!1}getMediaTrackSettings(O){var k;return(k=O.getTracks()[0])===null||k===void 0?void 0:k.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const O=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(O)}setTransform(O,k){var A,P;(P=(A=this.transform)===null||A===void 0?void 0:A.nodes)===null||P===void 0||P.end.disconnect(),this.transform={nodes:k,device:O};const D=k==null?void 0:k.end,H=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${D} to destination ${H}.`),D==null||D.connect(H),this.reconnectAudioInputs()}removeTransform(){var O;const k=this.transform;if(k)return(O=this.transform.nodes)===null||O===void 0||O.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),k}attachAudioInputStreamToAudioContext(O){var k;(k=this.audioInputSourceNode)===null||k===void 0||k.disconnect(),this.audioInputSourceNode=Bi.getAudioContext().createMediaStreamSource(O);const A=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(A)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Bi.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var O,k;return((k=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||k===void 0?void 0:k.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(O){Bi.defaultLatencyHint=O}static getAudioContext(){if(!Bi.audioContext){const O={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(O.sampleRate=Bi.defaultSampleRate),new m.default().requiresPlaybackLatencyHintForAudioContext()&&(O.latencyHint="playback"),Bi.defaultLatencyHint&&(O.latencyHint=Bi.defaultLatencyHint),Bi.audioContext=new(window.AudioContext||window.webkitAudioContext)(O)}return Bi.audioContext}static suspendAudioContext(){return d(this,void 0,void 0,function*(){return Bi.audioContext?Bi.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return d(this,void 0,void 0,function*(){return Bi.audioContext?Bi.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(Bi.audioContext)try{Bi.audioContext.close()}catch{}Bi.audioContext=null}addMediaStreamBrokerObserver(O){this.mediaStreamBrokerObservers.add(O)}removeMediaStreamBrokerObserver(O){this.mediaStreamBrokerObservers.delete(O)}publishVideoInputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(k=>{k.videoInputDidChange&&k.videoInputDidChange(O)}),this.pushVideoMeetingStateForPermissions(O)}publishAudioInputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(k=>{k.audioInputDidChange&&k.audioInputDidChange(O)}),this.pushAudioMeetingStateForPermissions(O)}publishAudioOutputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(k=>{k.audioOutputDidChange&&k.audioOutputDidChange(O)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(O,k,A){let P=`API/DefaultDeviceController/${O}`;typeof k<"u"&&(P+=` ${JSON.stringify(k)}`),typeof A<"u"&&(P+=` -> ${JSON.stringify(A)}`),this.logger.info(P)}constructor(O,k,A=new m.default,P){this.logger=O,this.browserBehavior=A,this.eventController=P,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new r.default,this.videoInputTaskQueue=new r.default,this.muted=!1,this.mediaStreamMuteObserver=(W,X)=>{for(const ee of this.deviceChangeObservers)l.default.nextTick(()=>{this.deviceChangeObservers.has(ee)&&ee.audioInputMuteStateChanged&&ee.audioInputMuteStateChanged(W,X)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:D=!1,useMediaConstraintsFallback:H=!0}=k||{};this.useWebAudio=D,this.useMediaConstraintsFallback=H,this.videoInputQualitySettings=new _.default(Bi.defaultVideoWidth,Bi.defaultVideoHeight,Bi.defaultVideoFrameRate);const j=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=j[0],this.videoInputQualitySettings.videoHeight=j[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new g.default().create();const W=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(W)}`)}catch(W){O.error(W.message)}}},"DefaultDeviceController");a.default=w,w.permissionDeniedOriginDetectionThresholdMs=500,w.defaultVideoWidth=960,w.defaultVideoHeight=540,w.defaultVideoFrameRate=15,w.defaultSampleRate=48e3,w.defaultSampleSize=16,w.defaultChannelCount=1,w.audioContext=null;function M(R){return typeof R=="object"&&"deviceId"in R&&"groupId"in R&&"kind"in R&&"label"in R}s(M,"isMediaDeviceInfo")},1869028663:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{matchesConstraints(p){return JSON.stringify(this.constraints)===JSON.stringify(p)}constructor(){this.groupId=""}},"DeviceSelection");a.default=c},7754931014:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class extends Error{constructor(p,m){super(m||"Error fetching device."),this.cause=p,this.name="GetUserMediaError"}},"GetUserMediaError");a.default=c},8082139119:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0}),a.NoOpDeviceControllerWithEventController=void 0;const m=p(c(9437918857)),g=p(c(1197017824));let l=s(class extends m.default{destroy(){return d(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,i){}getVideoInputQualitySettings(){return g.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");a.default=l;let r=s(class extends l{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");a.NoOpDeviceControllerWithEventController=r},1823340272:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(7754931014));let m=s(class extends p.default{constructor(l){super(l),this.name="NotFoundError"}},"NotFoundError");a.default=m},566402552:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(7754931014));let m=s(class extends p.default{constructor(l){super(l),this.name="NotReadableError"}},"NotReadableError");a.default=m},5336609685:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(7754931014));let m=s(class extends p.default{constructor(l,r){super(l),this.constraint=r,this.name="OverconstrainedError"}},"OverconstrainedError");a.default=m},763542717:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(7754931014));let m=s(class extends p.default{constructor(l,r){super(l,r),this.name="PermissionDeniedError"}},"PermissionDeniedError");a.default=m},2847388805:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{mute(m){return c(this,void 0,void 0,function*(){})}stop(){var m;return c(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return c(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var g;return c(this,void 0,void 0,function*(){return(g=this.node)===null||g===void 0||g.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");a.default=d},9398215393:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(7754931014));let m=s(class extends p.default{constructor(l){super(l),this.name="TypeError"}},"TypeError");a.default=m},1197017824:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{equals(p){return this.videoWidth===p.videoWidth&&this.videoHeight===p.videoHeight&&this.videoFrameRate===p.videoFrameRate}constructor(p,m,g){this.videoWidth=p,this.videoHeight=m,this.videoFrameRate=g}},"VideoQualitySettings");a.default=c,c.VideoDisabled=new c(0,0,0),c.VideoResolutionHD=new c(1280,720,30),c.VideoResolutionFHD=new c(1920,1080,30),c.VideoResolutionUHD=new c(3840,2160,30)},7952414906:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isVideoTransformDevice=void 0;function c(d){return!!d&&typeof d=="object"&&"transformStream"in d&&"stop"in d&&"intrinsicDevice"in d}s(c,"isVideoTransformDevice"),a.isVideoTransformDevice=c},5163444346:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{destroy(){return c(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,g){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(r=>{r.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const l=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof l.addEventListener=="function"?(l.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=l):typeof l.addListener=="function"?(l.addListener(this.mediaQueryListener),this.mediaQueryList=l):g.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");a.default=d},3563909523:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");a.default=c},9004346135:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(t,i,o,u){function h(S){return S instanceof o?S:new o(function(f){f(S)})}return s(h,"adopt"),new(o||(o=Promise))(function(S,f){function v(T){try{_(u.next(T))}catch(w){f(w)}}s(v,"fulfilled");function E(T){try{_(u.throw(T))}catch(w){f(w)}}s(E,"rejected");function _(T){T.done?S(T.value):h(T.value).then(v,E)}s(_,"step"),_((u=u.apply(t,i||[])).next())})},p=this&&this.__rest||function(t,i){var o={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(o[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,u=Object.getOwnPropertySymbols(t);h<u.length;h++)i.indexOf(u[h])<0&&Object.prototype.propertyIsEnumerable.call(t,u[h])&&(o[u[h]]=t[u[h]]);return o},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const g=m(c(4571447548)),l=m(c(9877075638)),r=m(c(3894274294)),n=c(5685319565);let e=s(class qs{addEventListeners(){!this.beaconEventListener||!("window"in c.g)||!window.addEventListener||!("document"in c.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(i){(i.type==="visibilitychange"&&document.visibilityState==="hidden"||i.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in c.g)||!window.removeEventListener||!("document"in c.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var i;this.removeEventListeners(),this.addEventListeners(),(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=new l.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var i;(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(i){return d(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(i)}`);const{name:o,ts:u,attributes:h}=i,S=h&&this.filterAttributes(h,this.attributesToFilter),f=Object.assign({name:o,ts:u},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(f)}`);const v=this.getSize(f);if(v>qs.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${v} bytes. Item cannot exceed max item size allowed of ${qs.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(f)}`),this.sendEventImmediately({name:o,ts:u,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(f),this.ingestionEventSize+=v,this.bufferItemThresholdReached(v)){const E=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(E),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(i,o){const u=new Set(o);return Object.keys(i).filter(S=>u.has(S)).forEach(S=>delete i[S]),i}initializeAndGetCurrentIngestionEvent(){const i={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(i),i}bufferItemThresholdReached(i){return i+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===qs.MAX_PAYLOAD_ITEMS}getSize(i){let o=0;if(typeof i=="object")for(const[u,h]of Object.entries(i))o+=this.getPrimitiveSize(u),o+=this.getSize(h);else o+=this.getPrimitiveSize(i);return o}getPrimitiveSize(i){let o=0;return typeof i=="string"?o+=i.length*2:typeof i=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(i=Math.min(this.buffer.length,i+1),this.buffer.splice(o,i))}makeBeaconRequestBody(i){const o={metadata:this.metadata,events:i,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(i){const o={metadata:this.metadata,events:i};return JSON.stringify(o)}sendEventImmediately(i){return d(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(i)}`);const{name:o,ts:u,attributes:h}=i,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:u},h)]};let f=!1,v=null;const E=this.makeRequestBody([S]);try{if(v=yield this.send(E),v.ok){try{const _=yield v.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${E}, message: ${JSON.stringify(_)}`)}catch(_){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${_} for event ${E}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${E} with response status ${v.status}`),f=!0}catch(_){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${E} to the ingestion endpoint ${_}.`),f=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const T=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${T}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,T)?f=!1:f=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${E}`),f=!0}}f&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${E}`),this.failedIngestionEvents.push(S))})}send(i){return d(this,void 0,void 0,function*(){const o=new g.default(qs.RETRY_FIXED_BACKOFF_WAIT_MS,qs.RETRY_SHORT_BACKOFF_MS,qs.RETRY_LONG_BACKOFF_MS);try{let u=0;for(;u<this.retryCountLimit;){const h=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:i});if(h.ok||!qs.SENDING_FAILURE_CODES.has(h.status))return h;if(this.logger.warn(`Will retry sending failure for ${i} due to status code ${h.status}.`),u++,u<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield n.wait(S)}}if(u===this.retryCountLimit)throw new Error(`Retry count limit reached for ${i}`)}catch(u){throw u}})}sendBeacon(){return d(this,void 0,void 0,function*(){const i=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(i)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const u=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);i.push(u),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(u)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const u=this.failedIngestionEvents.map(h=>this.deepCopyCurrentIngestionEvent(h));i.push(...u),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(u)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(u=>{i.push(...u),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(u)}`)}),this.cancellableEvents.clear()),i.length===0)return;const o=this.makeBeaconRequestBody(i);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(u){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${u}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return d(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(i,o,u,h,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=D=>({type:D.type,v:D.v,payloads:[...D.payloads]}),this.sendEvents=()=>d(this,void 0,void 0,function*(){if(this.lock)return;const D=this.getItems(this.flushSize);if(D.length===0)return;this.lock=!0;const H=this.makeRequestBody(D);let j=!1;const W=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(W,D);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${H}`);const X=yield this.send(H);if(this.cancellableEvents.delete(W),!X.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${H} with response status ${X.status}`),j=!0;else try{const ee=yield X.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${H} message: ${JSON.stringify(ee)}`)}catch(ee){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${ee} for events ${H}`)}}catch(X){j=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${H} to the ingestion endpoint ${X}`)}finally{this.lock=!1}j&&(this.cancellableEvents.delete(W),this.failedIngestionEvents.push(...D))});const f=new r.default(S).getParserResult(),{browserMajorVersion:v}=f,E=p(f,["browserMajorVersion"]),_=o.toJSON(),{type:T,v:w}=_,M=p(_,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},E),M),Object.keys(this.metadata).forEach(D=>this.attributesToFilter.push(D)),this.type=T,this.v=w,this.ingestionURL=u,this.logger=S,this.importantEvents=new Set(h);const{maxBufferCapacityKb:R,totalBufferItems:O,flushSize:k,flushIntervalMs:A,retryCountLimit:P}=i;this.maxBufferCapacityBytes=R*1024,this.totalBufferItems=O,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/O),this.flushIntervalMs=A,this.flushSize=k,this.retryCountLimit=P,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=D=>this.beaconEventHandler(D),this.addEventListeners()}},"InMemoryJSONEventBuffer");a.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},666910387:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(p=5e3,m=2,g=64,l=100,r=15){this.flushIntervalMs=p,this.flushSize=m,this.maxBufferCapacityKb=g,this.totalBufferItems=l,this.retryCountLimit=r}},"EventBufferConfiguration");a.default=c},913629600:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(u,h,S,f){function v(E){return E instanceof S?E:new S(function(_){_(E)})}return s(v,"adopt"),new(S||(S=Promise))(function(E,_){function T(R){try{M(f.next(R))}catch(O){_(O)}}s(T,"fulfilled");function w(R){try{M(f.throw(R))}catch(O){_(O)}}s(w,"rejected");function M(R){R.done?E(R.value):v(R.value).then(T,w)}s(M,"step"),M((f=f.apply(u,h||[])).next())})},p=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(888724265),g=c(4236152345),l=p(c(8302308181)),r=p(c(7733481723)),n=p(c(2864685592)),e=p(c(9649641385)),t=p(c(6885109343)),i=p(c(7750779956));let o=s(class Oa{addObserver(h){this.observerSet.add(h)}removeObserver(h){this.observerSet.delete(h)}forEachObserver(h){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&h(S)})}publishEvent(h,S){return d(this,void 0,void 0,function*(){const f=Date.now();this.meetingHistoryStates.push({name:h,timestampMs:f});const v=Object.freeze(Object.assign(this.getAttributes(f),S));this.forEachObserver(E=>{E.eventDidReceive(h,v)}),this.reportEvent(h,f,S)})}reportEvent(h,S,f){var v;return d(this,void 0,void 0,function*(){let E;try{f&&(E=i.default(f)),yield(v=this.eventReporter)===null||v===void 0?void 0:v.reportEvent(S,h,E)}catch(_){this.logger.error(`Error reporting event ${_}`)}})}setupEventReporter(h,S,f){if(f)this._eventReporter=f;else if(h.urls){const v=h.urls.eventIngestionURL;if(v){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:E,credentials:{attendeeId:_,joinToken:T}}=h,w=new n.default(E,_,T),M=new l.default(w,v);this._eventReporter=new r.default(M,S)}}}getAttributes(h){var S,f;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||Oa.UNAVAILABLE,osVersion:((f=this.parserResult)===null||f===void 0?void 0:f.os.version)||Oa.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:h}}get eventReporter(){return this._eventReporter}destroy(){return d(this,void 0,void 0,function*(){g.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(h,S,f){var v,E,_,T,w,M,R;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=h,this.setupEventReporter(h,S,f);try{this.parserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null}catch(O){this.logger.error(O.message)}this.browserMajorVersion=((_=(E=(v=this.parserResult)===null||v===void 0?void 0:v.browser)===null||E===void 0?void 0:E.version)===null||_===void 0?void 0:_.split(".")[0])||Oa.UNAVAILABLE,this.browserName=((T=this.parserResult)===null||T===void 0?void 0:T.browser.name)||Oa.UNAVAILABLE,this.browserVersion=((w=this.parserResult)===null||w===void 0?void 0:w.browser.version)||Oa.UNAVAILABLE,this.deviceName=[((M=this.parserResult)===null||M===void 0?void 0:M.device.vendor)||"",((R=this.parserResult)===null||R===void 0?void 0:R.device.model)||""].join(" ").trim()||Oa.UNAVAILABLE}},"DefaultEventController");a.default=o,o.UNAVAILABLE="Unavailable"},7750779956:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const c=s(d=>{const p={};for(const[m,g]of Object.entries(d))if(!(g==null||g===""))if(typeof g=="number"||typeof g=="string")p[m]=g;else throw new TypeError("Unhandled type received while flattening attributes.");return p},"flattenEventAttributes");a.default=c},8302308181:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(666910387));let m=s(class{constructor(l,r,n=new p.default){this.eventsClientConfiguration=l,this.ingestionURL=r,this.eventBufferConfiguration=n}},"EventIngestionConfiguration");a.default=m},7733481723:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(4236152345),g=p(c(9004346135));let l=s(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(n){this.logger.error(`Event Reporting - Error starting the event buffer ${n}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(n){this.logger.error(`Event Reporting - Error stopping the event buffer ${n}`)}}reportEvent(n,e,t){return d(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${n}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:n,name:e,attributes:t})}catch(i){this.logger.error(`Event Reporting - Error adding event to buffer ${i}`)}})}destroy(){return d(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),m.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(n,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:i,eventBufferConfiguration:o}=n,{eventsToIgnore:u}=t;this.eventBuffer=new g.default(o,t,i,this.importantEvents,e),this.logger=e,this.eventsToIgnore=u,this.start()}},"DefaultMeetingEventReporter");a.default=l},9931580517:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{reportEvent(p,m,g){}start(){}stop(){}constructor(){}},"NoOpEventReporter");a.default=c},2864685592:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const p={};return p.type=this.type,p.v=this.v,p.meetingId=this.meetingId,p.attendeeId=this.attendeeId,p}constructor(p,m,g,l=[]){this.type="Meet",this.v=1,this.meetingId=p,this.attendeeId=m,this.eventsToIgnore=l,this.authenticationToken=g}},"MeetingEventsClientConfiguration");a.default=c},3305135794:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(io){return io&&io.__esModule?io:{default:io}};Object.defineProperty(a,"__esModule",{value:!0}),a.DefaultEventController=a.DefaultDevicePixelRatioMonitor=a.DefaultDeviceController=a.DefaultContentShareController=a.DefaultBrowserBehavior=a.DefaultAudioVideoFacade=a.DefaultAudioVideoController=a.DefaultAudioMixController=a.DefaultActiveSpeakerPolicy=a.DefaultActiveSpeakerDetector=a.DataMessage=a.CreateSDPTask=a.CreatePeerConnectionTask=a.ContentShareMediaStreamBroker=a.ContentShareConstants=a.ConsoleLogger=a.ConnectionHealthPolicyConfiguration=a.ConnectionHealthData=a.ClientVideoStreamReceivingReport=a.ClientMetricReportMediaType=a.ClientMetricReportDirection=a.ClientMetricReport=a.CleanStoppedSessionTask=a.CleanRestartedSessionTask=a.CheckVideoInputFeedback=a.CheckVideoConnectivityFeedback=a.CheckNetworkUDPConnectivityFeedback=a.CheckNetworkTCPConnectivityFeedback=a.CheckContentShareConnectivityFeedback=a.CheckCameraResolutionFeedback=a.CheckAudioOutputFeedback=a.CheckAudioInputFeedback=a.CheckAudioConnectivityFeedback=a.CanvasVideoFrameBuffer=a.CSPMonitor=a.BitrateParameters=a.BaseTask=a.BaseConnectionHealthPolicy=a.BackgroundReplacementVideoFrameProcessor=a.BackgroundFilterVideoFrameProcessor=a.BackgroundBlurVideoFrameProcessor=a.BackgroundBlurStrength=a.AudioVideoControllerState=a.AudioProfile=a.AudioLogEvent=a.Attendee=a.AttachMediaInputTask=a.AsyncScheduler=a.ApplicationMetadata=a.AllHighestVideoBandwidthPolicy=void 0,a.MeetingReadinessCheckerConfiguration=a.MeetingFeatures=a.MeetingEventsClientConfiguration=a.MediaDeviceProxyHandler=a.Maybe=a.LogLevel=a.Log=a.ListenForVolumeIndicatorsTask=a.LeaveAndReceiveLeaveAckTask=a.JoinAndReceiveIndexTask=a.IntervalScheduler=a.InMemoryJSONEventBuffer=a.GlobalMetricReport=a.GetUserMediaError=a.FullJitterLimitedBackoff=a.FullJitterBackoffFactory=a.FullJitterBackoff=a.FinishGatheringICECandidatesTask=a.EventIngestionConfiguration=a.EventBufferConfiguration=a.DeviceSelection=a.DevicePixelRatioWindowSource=a.DefaultWebSocketAdapter=a.DefaultVolumeIndicatorAdapter=a.DefaultVideoTransformDevice=a.DefaultVideoTileFactory=a.DefaultVideoTileController=a.DefaultVideoTile=a.DefaultVideoStreamIndex=a.DefaultVideoStreamIdSet=a.DefaultVideoFrameProcessorTimer=a.DefaultVideoFrameProcessorPipeline=a.DefaultVideoCaptureAndEncodeParameter=a.DefaultUserAgentParser=a.DefaultTranscriptionController=a.DefaultTransceiverController=a.DefaultSimulcastUplinkPolicyForContentShare=a.DefaultSimulcastUplinkPolicy=a.DefaultSignalingClient=a.DefaultSigV4=a.DefaultSessionStateController=a.DefaultReconnectController=a.DefaultRealtimeController=a.DefaultPingPong=a.DefaultModality=a.DefaultMessagingSession=a.DefaultMeetingSession=a.DefaultMeetingReadinessChecker=a.DefaultMeetingEventReporter=a.DefaultMediaDeviceFactory=void 0,a.RedundantAudioEncoderWorkerCode=a.RedundantAudioEncoder=a.ReconnectionHealthPolicy=a.ReceiveVideoStreamIndexTask=a.ReceiveVideoInputTask=a.ReceiveRemoteVideoPauseResumeTask=a.ReceiveAudioInputTask=a.RealtimeVolumeIndicator=a.RealtimeState=a.RealtimeAttendeePositionInFrame=a.PromoteToPrimaryMeetingTask=a.PromiseQueue=a.PrefetchSortBy=a.PrefetchOn=a.PermissionDeniedError=a.ParallelGroupTask=a.POSTLogger=a.OverconstrainedError=a.OpenSignalingConnectionTask=a.OnceTask=a.NotReadableError=a.NotFoundError=a.None=a.NoVideoUplinkBandwidthPolicy=a.NoVideoDownlinkBandwidthPolicy=a.NoOpVideoFrameProcessor=a.NoOpVideoElementFactory=a.NoOpTask=a.NoOpMediaStreamBroker=a.NoOpLogger=a.NoOpEventReporter=a.NoOpDeviceController=a.NoOpDebugLogger=a.NoOpAudioVideoController=a.NScaleVideoUplinkBandwidthPolicy=a.MutableVideoPreferences=a.MultiLogger=a.MonitorTask=a.ModelSpecBuilder=a.MessagingSessionConfiguration=a.Message=a.MeetingSessionVideoAvailability=a.MeetingSessionURLs=a.MeetingSessionTURNCredentials=a.MeetingSessionStatusCode=a.MeetingSessionStatus=a.MeetingSessionLifecycleEventCondition=a.MeetingSessionLifecycleEvent=a.MeetingSessionCredentials=a.MeetingSessionConfiguration=void 0,a.VideoEncodingCpuConnectionHealthPolicy=a.VideoEncodingConnectionHealthPolicyName=a.VideoCodecCapability=a.VideoAdaptiveProbePolicy=a.Versioning=a.UnusableAudioWarningConnectionHealthPolicy=a.TypeError=a.TranscriptionStatusType=a.TranscriptionStatus=a.TranscriptResult=a.TranscriptLanguageWithScore=a.TranscriptItemType=a.TranscriptItem=a.TranscriptEntity=a.TranscriptAlternative=a.Transcript=a.TimeoutTask=a.TimeoutScheduler=a.TaskStatus=a.TargetDisplaySize=a.SubscribeAndReceiveSubscribeAckTask=a.StreamMetricReport=a.Some=a.SingleNodeAudioTransformDevice=a.SimulcastVideoStreamIndex=a.SimulcastTransceiverController=a.SimulcastLayers=a.SimulcastContentShareTransceiverController=a.SignalingClientVideoSubscriptionConfiguration=a.SignalingClientSubscribe=a.SignalingClientJoin=a.SignalingClientEventType=a.SignalingClientEvent=a.SignalingClientConnectionRequest=a.SignalingAndMetricsConnectionMonitor=a.SetRemoteDescriptionTask=a.SetLocalDescriptionTask=a.SessionStateControllerTransitionResult=a.SessionStateControllerState=a.SessionStateControllerDeferPriority=a.SessionStateControllerAction=a.ServerSideNetworkAdaption=a.SerialGroupTask=a.SendingAudioFailureConnectionHealthPolicy=a.SendAndReceiveDataMessagesTask=a.SDPMediaSection=a.SDPCandidateType=a.SDP=a.RunnableTask=a.RedundantAudioRecoveryMetricReport=void 0,a.isVideoTransformDevice=a.isDestroyable=a.isAudioTransformDevice=a.ZLIBTextCompressor=a.WebSocketReadyState=a.WaitForAttendeePresenceTask=a.VoiceFocusTransformDevice=a.VoiceFocusDeviceTransformer=a.VideoTileState=a.VideoStreamDescription=a.VideoSource=a.VideoQualitySettings=a.VideoQualityAdaptationPreference=a.VideoPriorityBasedPolicyConfig=a.VideoPriorityBasedPolicy=a.VideoPreferences=a.VideoPreference=a.VideoOnlyTransceiverController=a.VideoLogEvent=a.VideoFxProcessor=a.VideoEncodingFramerateConnectionHealthPolicy=void 0;const p=d(c(9677745702));a.AllHighestVideoBandwidthPolicy=p.default;const m=d(c(1035256489));a.ApplicationMetadata=m.default;const g=d(c(9649641385));a.AsyncScheduler=g.default;const l=d(c(4713678292));a.AttachMediaInputTask=l.default;const r=d(c(9898009183));a.Attendee=r.default;const n=d(c(4882678815));a.AudioLogEvent=n.default;const e=d(c(5983965185));a.AudioProfile=e.default;const t=d(c(4610074022));a.AudioVideoControllerState=t.default;const i=d(c(1174868230));a.BackgroundBlurStrength=i.default;const o=d(c(3437938989));a.BackgroundBlurVideoFrameProcessor=o.default;const u=d(c(6828608641));a.BackgroundFilterVideoFrameProcessor=u.default;const h=d(c(3561775467));a.BackgroundReplacementVideoFrameProcessor=h.default;const S=d(c(1516469294));a.BaseConnectionHealthPolicy=S.default;const f=d(c(5009059128));a.BaseTask=f.default;const v=d(c(4207915265));a.BitrateParameters=v.default;const E=d(c(8207737579));a.CSPMonitor=E.default;const _=d(c(1458156729));a.CanvasVideoFrameBuffer=_.default;const T=d(c(5131738647));a.CheckAudioConnectivityFeedback=T.default;const w=d(c(5912013634));a.CheckAudioInputFeedback=w.default;const M=d(c(5266008321));a.CheckAudioOutputFeedback=M.default;const R=d(c(492984661));a.CheckCameraResolutionFeedback=R.default;const O=d(c(1012711751));a.CheckContentShareConnectivityFeedback=O.default;const k=d(c(1711209018));a.CheckNetworkTCPConnectivityFeedback=k.default;const A=d(c(1519813406));a.CheckNetworkUDPConnectivityFeedback=A.default;const P=d(c(5425713910));a.CheckVideoConnectivityFeedback=P.default;const D=d(c(2656423953));a.CheckVideoInputFeedback=D.default;const H=d(c(9089081530));a.CleanRestartedSessionTask=H.default;const j=d(c(5703332651));a.CleanStoppedSessionTask=j.default;const W=d(c(9029233041));a.ClientMetricReport=W.default;const X=d(c(6502873558));a.ClientMetricReportDirection=X.default;const ee=d(c(6132421099));a.ClientMetricReportMediaType=ee.default;const fe=d(c(863418510));a.ClientVideoStreamReceivingReport=fe.default;const oe=d(c(9200233701));a.ConnectionHealthData=oe.default;const Oe=d(c(8692068971));a.ConnectionHealthPolicyConfiguration=Oe.default;const Xe=d(c(3714104304));a.ConsoleLogger=Xe.default;const ge=d(c(805846668));a.ContentShareConstants=ge.default;const Me=d(c(220809536));a.ContentShareMediaStreamBroker=Me.default;const $e=d(c(9049733277));a.CreatePeerConnectionTask=$e.default;const ze=d(c(4708498556));a.CreateSDPTask=ze.default;const nt=d(c(9091803745));a.DataMessage=nt.default;const mt=d(c(7581324406));a.DefaultActiveSpeakerDetector=mt.default;const gt=d(c(1473791890));a.DefaultActiveSpeakerPolicy=gt.default;const Pe=d(c(9598694912));a.DefaultAudioMixController=Pe.default;const xe=d(c(1833994912));a.DefaultAudioVideoController=xe.default;const Ye=d(c(9305916160));a.DefaultAudioVideoFacade=Ye.default;const Ze=d(c(5546774952));a.DefaultBrowserBehavior=Ze.default;const Re=d(c(7050079116));a.DefaultContentShareController=Re.default;const Tt=d(c(8503424008));a.DefaultDeviceController=Tt.default;const rt=d(c(5163444346));a.DefaultDevicePixelRatioMonitor=rt.default;const Nt=d(c(913629600));a.DefaultEventController=Nt.default;const Wt=d(c(1716952340));a.DefaultMediaDeviceFactory=Wt.default;const Qt=d(c(7733481723));a.DefaultMeetingEventReporter=Qt.default;const Ot=d(c(5346911216));a.DefaultMeetingReadinessChecker=Ot.default;const hn=d(c(6643608480));a.DefaultMeetingSession=hn.default;const fi=d(c(9331325908));a.DefaultMessagingSession=fi.default;const wn=d(c(8006173476));a.DefaultModality=wn.default;const Jt=d(c(6348496904));a.DefaultPingPong=Jt.default;const on=d(c(7692233712));a.DefaultRealtimeController=on.default;const kt=d(c(2114525466));a.DefaultReconnectController=kt.default;const $t=d(c(6900744364));a.DefaultSessionStateController=$t.default;const en=d(c(7924674822));a.DefaultSigV4=en.default;const zt=d(c(7570945794));a.DefaultSignalingClient=zt.default;const Kt=d(c(1604549269));a.DefaultSimulcastUplinkPolicy=Kt.default;const Q=d(c(4499376852));a.DefaultSimulcastUplinkPolicyForContentShare=Q.default;const Ve=d(c(2392158736));a.DefaultTransceiverController=Ve.default;const Be=d(c(6391477986));a.DefaultTranscriptionController=Be.default;const Je=d(c(3894274294));a.DefaultUserAgentParser=Je.default;const ut=d(c(1695739824));a.DefaultVideoCaptureAndEncodeParameter=ut.default;const ot=d(c(4353575046));a.DefaultVideoFrameProcessorPipeline=ot.default;const de=d(c(4223139537));a.DefaultVideoFrameProcessorTimer=de.default;const Ue=d(c(1865309432));a.DefaultVideoStreamIdSet=Ue.default;const K=d(c(2469210420));a.DefaultVideoStreamIndex=K.default;const q=d(c(8089299542));a.DefaultVideoTile=q.default;const Ee=d(c(4675986794));a.DefaultVideoTileController=Ee.default;const be=d(c(1309535200));a.DefaultVideoTileFactory=be.default;const it=d(c(7309008175));a.DefaultVideoTransformDevice=it.default;const He=d(c(8058016368));a.DefaultVolumeIndicatorAdapter=He.default;const Qe=d(c(7880459944));a.DefaultWebSocketAdapter=Qe.default;const Se=d(c(3563909523));a.DevicePixelRatioWindowSource=Se.default;const Ae=d(c(1869028663));a.DeviceSelection=Ae.default;const L=d(c(666910387));a.EventBufferConfiguration=L.default;const ve=d(c(8302308181));a.EventIngestionConfiguration=ve.default;const _e=d(c(2635066756));a.FinishGatheringICECandidatesTask=_e.default;const Ie=d(c(4571447548));a.FullJitterBackoff=Ie.default;const ne=d(c(4692955950));a.FullJitterBackoffFactory=ne.default;const Ft=d(c(1733276918));a.FullJitterLimitedBackoff=Ft.default;const qe=d(c(7754931014));a.GetUserMediaError=qe.default;const ft=d(c(7966078085));a.GlobalMetricReport=ft.default;const En=d(c(9004346135));a.InMemoryJSONEventBuffer=En.default;const xt=d(c(9877075638));a.IntervalScheduler=xt.default;const Ui=d(c(9488451395));a.JoinAndReceiveIndexTask=Ui.default;const _i=d(c(9638153336));a.LeaveAndReceiveLeaveAckTask=_i.default;const bn=d(c(7966229607));a.ListenForVolumeIndicatorsTask=bn.default;const zn=d(c(4153358599));a.Log=zn.default;const gn=d(c(1370928943));a.LogLevel=gn.default;const gi=d(c(7632020355));a.MediaDeviceProxyHandler=gi.default;const ai=d(c(2864685592));a.MeetingEventsClientConfiguration=ai.default;const yr=d(c(2612255336));a.MeetingFeatures=yr.default;const Bt=d(c(898490693));a.MeetingReadinessCheckerConfiguration=Bt.default;const Et=d(c(6226061697));a.MeetingSessionConfiguration=Et.default;const On=d(c(8023404193));a.MeetingSessionCredentials=On.default;const nn=d(c(2234819701));a.MeetingSessionLifecycleEvent=nn.default;const Bn=d(c(546597810));a.MeetingSessionLifecycleEventCondition=Bn.default;const li=d(c(7551081659));a.MeetingSessionStatus=li.default;const ui=d(c(9447989038));a.MeetingSessionStatusCode=ui.default;const Gn=d(c(4943767904));a.MeetingSessionTURNCredentials=Gn.default;const Yn=d(c(803810435));a.MeetingSessionURLs=Yn.default;const Ci=d(c(488357679));a.MeetingSessionVideoAvailability=Ci.default;const Ti=d(c(1261307249));a.Message=Ti.default;const Un=d(c(6589808043));a.MessagingSessionConfiguration=Un.default;const U=d(c(3051230507));a.ModelSpecBuilder=U.default;const ce=d(c(1614136239));a.MonitorTask=ce.default;const Fe=d(c(23593200));a.MultiLogger=Fe.default;const Ke=d(c(9136055221));a.NScaleVideoUplinkBandwidthPolicy=Ke.default;const st=d(c(8589145157));a.NoOpAudioVideoController=st.default;const Dt=d(c(5047661014));a.NoOpDebugLogger=Dt.default;const Vt=d(c(8082139119));a.NoOpDeviceController=Vt.default;const Yt=d(c(9931580517));a.NoOpEventReporter=Yt.default;const pn=d(c(1831006443));a.NoOpLogger=pn.default;const dn=d(c(9437918857));a.NoOpMediaStreamBroker=dn.default;const An=d(c(5628139313));a.NoOpTask=An.default;const ci=d(c(3718889761));a.NoOpVideoElementFactory=ci.default;const ri=d(c(3814682321));a.NoOpVideoFrameProcessor=ri.default;const Vi=d(c(681222244));a.NoVideoDownlinkBandwidthPolicy=Vi.default;const Zi=d(c(9871896518));a.NoVideoUplinkBandwidthPolicy=Zi.default;const pr=d(c(1823340272));a.NotFoundError=pr.default;const Or=d(c(566402552));a.NotReadableError=Or.default;const Ar=d(c(7537135456));a.OnceTask=Ar.default;const Xr=d(c(3292077469));a.OpenSignalingConnectionTask=Xr.default;const tr=d(c(5336609685));a.OverconstrainedError=tr.default;const kn=d(c(7722414101));a.POSTLogger=kn.default;const Mi=d(c(6085879951));a.ParallelGroupTask=Mi.default;const Hi=d(c(763542717));a.PermissionDeniedError=Hi.default;const $i=d(c(4741303625));a.PrefetchOn=$i.default;const qi=d(c(2097622617));a.PrefetchSortBy=qi.default;const Er=d(c(3054351868));a.PromiseQueue=Er.default;const Wr=d(c(9588672479));a.PromoteToPrimaryMeetingTask=Wr.default;const hi=d(c(3171391796));a.RealtimeAttendeePositionInFrame=hi.default;const Ki=d(c(7618200138));a.RealtimeState=Ki.default;const ur=d(c(7832597620));a.RealtimeVolumeIndicator=ur.default;const pe=d(c(9531998674));a.ReceiveAudioInputTask=pe.default;const Ce=d(c(587698570));a.ReceiveRemoteVideoPauseResumeTask=Ce.default;const Le=d(c(86955145));a.ReceiveVideoInputTask=Le.default;const tt=d(c(8297256329));a.ReceiveVideoStreamIndexTask=tt.default;const ct=d(c(5850044630));a.ReconnectionHealthPolicy=ct.default;const pt=d(c(3937896393));a.RedundantAudioEncoder=pt.default;const Zt=d(c(9337558969));a.RedundantAudioEncoderWorkerCode=Zt.default;const an=d(c(3237015968));a.RedundantAudioRecoveryMetricReport=an.default;const ln=d(c(457099596));a.RunnableTask=ln.default;const Gt=d(c(182939685));a.SDP=Gt.default;const Fn=d(c(9489740826));a.SDPCandidateType=Fn.default;const bt=d(c(6818892922));a.SDPMediaSection=bt.default;const oi=d(c(7680112541));a.SendAndReceiveDataMessagesTask=oi.default;const mn=d(c(4866586987));a.SendingAudioFailureConnectionHealthPolicy=mn.default;const yi=d(c(8872868578));a.SerialGroupTask=yi.default;const zi=d(c(5393388022));a.ServerSideNetworkAdaption=zi.default;const Ri=d(c(3795683579));a.SessionStateControllerAction=Ri.default;const Sn=d(c(7012117651));a.SessionStateControllerDeferPriority=Sn.default;const Tn=d(c(2092275410));a.SessionStateControllerState=Tn.default;const Kn=d(c(583806999));a.SessionStateControllerTransitionResult=Kn.default;const Si=d(c(5976676062));a.SetLocalDescriptionTask=Si.default;const lr=d(c(339097629));a.SetRemoteDescriptionTask=lr.default;const mr=d(c(8619504925));a.SignalingAndMetricsConnectionMonitor=mr.default;const jn=d(c(7263318766));a.SignalingClientConnectionRequest=jn.default;const Lr=d(c(1578897375));a.SignalingClientEvent=Lr.default;const Ii=d(c(7969706599));a.SignalingClientEventType=Ii.default;const gr=d(c(3867485289));a.SignalingClientJoin=gr.default;const lo=d(c(3735795291));a.SignalingClientSubscribe=lo.default;const bo=d(c(4804743313));a.SignalingClientVideoSubscriptionConfiguration=bo.default;const Zr=d(c(8213452704));a.SimulcastContentShareTransceiverController=Zr.default;const co=d(c(9131051489));a.SimulcastLayers=co.default;const oo=d(c(372560720));a.SimulcastTransceiverController=oo.default;const So=d(c(8697249276));a.SimulcastVideoStreamIndex=So.default;const br=d(c(2847388805));a.SingleNodeAudioTransformDevice=br.default;const zr=d(c(6172292806));a.StreamMetricReport=zr.default;const uo=d(c(3248483798));a.SubscribeAndReceiveSubscribeAckTask=uo.default;const Xi=d(c(2178339051));a.TargetDisplaySize=Xi.default;const xr=d(c(6013191119));a.TaskStatus=xr.default;const vo=d(c(5824864644));a.TimeoutScheduler=vo.default;const qr=d(c(7638277718));a.TimeoutTask=qr.default;const _o=d(c(4042214483));a.Transcript=_o.default;const Bo=d(c(8928051514));a.TranscriptAlternative=Bo.default;const Xo=d(c(3886666628));a.TranscriptEntity=Xo.default;const Fo=d(c(6128278192));a.TranscriptItem=Fo.default;const Ji=d(c(2855080400));a.TranscriptItemType=Ji.default;const fr=d(c(2600940909));a.TranscriptLanguageWithScore=fr.default;const Sr=d(c(3373821534));a.TranscriptResult=Sr.default;const vr=d(c(2832046333));a.TranscriptionStatus=vr.default;const _r=d(c(8532168277));a.TranscriptionStatusType=_r.default;const Mo=d(c(9398215393));a.TypeError=Mo.default;const no=d(c(174963938));a.UnusableAudioWarningConnectionHealthPolicy=no.default;const Mr=d(c(6885109343));a.Versioning=Mr.default;const Ro=d(c(3368465086));a.VideoAdaptiveProbePolicy=Ro.default;const Os=d(c(8804723777));a.VideoCodecCapability=Os.default;const As=d(c(3334420728));a.VideoEncodingConnectionHealthPolicyName=As.default;const ia=d(c(6661072615));a.VideoEncodingCpuConnectionHealthPolicy=ia.default;const Qo=d(c(1502393534));a.VideoEncodingFramerateConnectionHealthPolicy=Qo.default;const cs=d(c(1314104503));a.VideoFxProcessor=cs.default;const Ms=d(c(1404048602));a.VideoLogEvent=Ms.default;const ds=d(c(161472916));a.VideoOnlyTransceiverController=ds.default;const Rs=d(c(3803169181));a.VideoPreference=Rs.default;const Zo=d(c(8071414974));a.VideoPreferences=Zo.default;const us=d(c(8681774825));a.VideoPriorityBasedPolicy=us.default;const fs=d(c(3348721919));a.VideoPriorityBasedPolicyConfig=fs.default;const Ps=d(c(4829581265));a.VideoQualityAdaptationPreference=Ps.default;const ra=d(c(1197017824));a.VideoQualitySettings=ra.default;const To=d(c(8050111605));a.VideoSource=To.default;const ks=d(c(6105894327));a.VideoStreamDescription=ks.default;const hs=d(c(6345807038));a.VideoTileState=hs.default;const ps=d(c(1644756024));a.VoiceFocusDeviceTransformer=ps.default;const ms=d(c(7141525823));a.VoiceFocusTransformDevice=ms.default;const Ds=d(c(4098780146));a.WaitForAttendeePresenceTask=Ds.default;const ki=d(c(5638612424));a.WebSocketReadyState=ki.default;const Ns=d(c(3475297719));a.ZLIBTextCompressor=Ns.default;const gs=c(8071414974);Object.defineProperty(a,"MutableVideoPreferences",{enumerable:!0,get:function(){return gs.MutableVideoPreferences}});const Qi=c(6527539809);Object.defineProperty(a,"Some",{enumerable:!0,get:function(){return Qi.Some}}),Object.defineProperty(a,"None",{enumerable:!0,get:function(){return Qi.None}}),Object.defineProperty(a,"Maybe",{enumerable:!0,get:function(){return Qi.Maybe}});const Gr=c(9678458173);Object.defineProperty(a,"isAudioTransformDevice",{enumerable:!0,get:function(){return Gr.isAudioTransformDevice}});const Rr=c(4236152345);Object.defineProperty(a,"isDestroyable",{enumerable:!0,get:function(){return Rr.isDestroyable}});const Uo=c(7952414906);Object.defineProperty(a,"isVideoTransformDevice",{enumerable:!0,get:function(){return Uo.isVideoTransformDevice}})},3714104304:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1370928943));let m=s(class{info(l){this.log(p.default.INFO,l)}warn(l){this.log(p.default.WARN,l)}error(l){this.log(p.default.ERROR,l)}debug(l){p.default.DEBUG<this.level||(typeof l=="string"?this.log(p.default.DEBUG,l):l?this.log(p.default.DEBUG,l()):this.log(p.default.DEBUG,""+l))}setLogLevel(l){this.level=l}getLogLevel(){return this.level}log(l,r){if(l<this.level)return;const e=`${new Date().toISOString()} [${p.default[l]}] ${this.name} - ${r}`;switch(l){case p.default.ERROR:console.error(e);break;case p.default.WARN:console.warn(e);break;case p.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case p.default.INFO:console.info(e);break}}constructor(l,r=p.default.WARN){this.name=l,this.level=r}},"ConsoleLogger");a.default=m},4153358599:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(p,m,g,l){this.sequenceNumber=p,this.message=m,this.timestampMs=g,this.logLevel=l}},"Log");a.default=c},1370928943:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.LogLevel=void 0;var c;(function(d){d[d.DEBUG=0]="DEBUG",d[d.INFO=1]="INFO",d[d.WARN=2]="WARN",d[d.ERROR=3]="ERROR",d[d.OFF=4]="OFF"})(c=a.LogLevel||(a.LogLevel={})),a.default=c},23593200:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1370928943));let m=s(class{info(l){for(const r of this._loggers)r.info(l)}warn(l){for(const r of this._loggers)r.warn(l)}error(l){for(const r of this._loggers)r.error(l)}debug(l){let r,n;typeof l=="string"?n=l:l?n=s(()=>(r||(r=l()),r),"memoized"):n=""+l;for(const e of this._loggers)e.debug(n)}setLogLevel(l){for(const r of this._loggers)r.setLogLevel(l)}getLogLevel(){for(const l of this._loggers)return l.getLogLevel();return p.default.OFF}constructor(...l){this._loggers=l}},"MultiLogger");a.default=m},5047661014:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1370928943)),m=d(c(1831006443));let g=s(class extends m.default{constructor(){super(p.default.DEBUG)}},"NoOpDebugLogger");a.default=g},1831006443:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1370928943));let m=s(class{info(l){}warn(l){}error(l){}debug(l){p.default.DEBUG<this.level||typeof l!="string"&&l()}setLogLevel(l){this.level=l}getLogLevel(){return this.level}constructor(l=p.default.OFF){this.level=l}},"NoOpLogger");a.default=m},7722414101:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9877075638)),g=p(c(4153358599)),l=p(c(1370928943));let r=s(class rh{addEventListener(){!this.eventListener||!("window"in c.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in c.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){l.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(l.default.DEBUG,e):e?this.log(l.default.DEBUG,e()):this.log(l.default.DEBUG,""+e))}info(e){this.log(l.default.INFO,e)}warn(e){this.log(l.default.WARN,e)}error(e){this.log(l.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>d(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(i){console.warn("[POSTLogger] "+i.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return d(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const i=Date.now();this.logCapture.push(new g.default(this.sequenceNumber,t,i,l.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:i=rh.BATCH_SIZE,intervalMs:o=rh.INTERVAL_MS,logLevel:u=l.default.WARN,metadata:h,headers:S}=e;this.url=t,this.batchSize=i,this.intervalMs=o,this.logLevel=u,this.metadata=h,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");a.default=r,r.BATCH_SIZE=85,r.INTERVAL_MS=2e3},1716952340:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(7632020355));let m=s(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new p.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");a.default=m},7632020355:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9649641385)),g=p(c(9877075638));let l=s(class SS{sortedDeviceList(){return d(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const n of this.deviceChangeListeners)m.default.nextTick(()=>{if(this.deviceChangeListeners.has(n)){const e=new Event("devicechange");typeof n=="function"?n(e):n.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(n,e,t)=>{if(!Reflect.has(n,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(n,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(n,e,t)}const i=Reflect.get(n,e,t);return typeof i=="function"?i.bind(n):i},this.patchAddEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,u,h)=>{if(o==="devicechange")this.deviceChangeListeners.add(u),this.scheduler||(this.scheduler=new g.default(SS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(i,n,[o,u,h])}},this.patchRemoveEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,u,h)=>{if(o==="devicechange")this.deviceChangeListeners.delete(u),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(i,n,[o,u,h])}},this.pollDeviceLists=()=>d(this,void 0,void 0,function*(){const n=yield this.sortedDeviceList();this.devices&&(n.length!==this.devices.length||n.some((t,i)=>t.deviceId!==this.devices[i].deviceId))&&this.handleDeviceChangeEvent(),this.devices=n})}},"MediaDeviceProxyHandler");a.default=l,l.INTERVAL_MS=1e3},9437918857:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(p){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(p){}removeMediaStreamBrokerObserver(p){}},"NoOpMediaStreamBroker");a.default=c},5131738647:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckAudioConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.AudioInputRequestFailed=1]="AudioInputRequestFailed",d[d.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",d[d.ConnectionFailed=3]="ConnectionFailed",d[d.AudioNotReceived=4]="AudioNotReceived"})(c=a.CheckAudioConnectivityFeedback||(a.CheckAudioConnectivityFeedback={})),a.default=c},5912013634:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckAudioInputFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed",d[d.PermissionDenied=2]="PermissionDenied"})(c=a.CheckAudioInputFeedback||(a.CheckAudioInputFeedback={})),a.default=c},5266008321:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckAudioOutputFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed"})(c=a.CheckAudioOutputFeedback||(a.CheckAudioOutputFeedback={})),a.default=c},492984661:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckCameraResolutionFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed",d[d.ResolutionNotSupported=2]="ResolutionNotSupported",d[d.PermissionDenied=3]="PermissionDenied"})(c=a.CheckCameraResolutionFeedback||(a.CheckCameraResolutionFeedback={})),a.default=c},1012711751:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckContentShareConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed",d[d.PermissionDenied=2]="PermissionDenied",d[d.TimedOut=3]="TimedOut",d[d.ConnectionFailed=4]="ConnectionFailed"})(c=a.CheckContentShareConnectivityFeedback||(a.CheckContentShareConnectivityFeedback={})),a.default=c},1711209018:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckNetworkTCPConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",d[d.ConnectionFailed=2]="ConnectionFailed",d[d.ICENegotiationFailed=3]="ICENegotiationFailed"})(c=a.CheckNetworkTCPConnectivityFeedback||(a.CheckNetworkTCPConnectivityFeedback={})),a.default=c},1519813406:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckNetworkUDPConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",d[d.ConnectionFailed=2]="ConnectionFailed",d[d.ICENegotiationFailed=3]="ICENegotiationFailed"})(c=a.CheckNetworkUDPConnectivityFeedback||(a.CheckNetworkUDPConnectivityFeedback={})),a.default=c},5425713910:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckVideoConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.VideoInputRequestFailed=1]="VideoInputRequestFailed",d[d.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",d[d.ConnectionFailed=3]="ConnectionFailed",d[d.VideoNotSent=4]="VideoNotSent"})(c=a.CheckVideoConnectivityFeedback||(a.CheckVideoConnectivityFeedback={})),a.default=c},2656423953:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckVideoInputFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed",d[d.PermissionDenied=2]="PermissionDenied"})(c=a.CheckVideoInputFeedback||(a.CheckVideoInputFeedback={})),a.default=c},5346911216:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(w,M,R,O){function k(A){return A instanceof R?A:new R(function(P){P(A)})}return s(k,"adopt"),new(R||(R=Promise))(function(A,P){function D(W){try{j(O.next(W))}catch(X){P(X)}}s(D,"fulfilled");function H(W){try{j(O.throw(W))}catch(X){P(X)}}s(H,"rejected");function j(W){W.done?A(W.value):k(W.value).then(D,H)}s(j,"step"),j((O=O.apply(w,M||[])).next())})},p=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9598694912)),g=p(c(5546774952)),l=p(c(8503424008)),r=p(c(763542717)),n=p(c(5009059128)),e=p(c(7638277718)),t=p(c(5131738647)),i=p(c(5912013634)),o=p(c(5266008321)),u=p(c(492984661)),h=p(c(1012711751)),S=p(c(1711209018)),f=p(c(1519813406)),v=p(c(5425713910)),E=p(c(2656423953)),_=p(c(898490693));let T=s(class vS{static delay(M){return d(this,void 0,void 0,function*(){return new Promise(R=>setTimeout(R,M))})}checkAudioInput(M){return d(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(M),yield this.meetingSession.audioVideo.stopAudioInput(),i.default.Succeeded}catch(R){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${R}`),R instanceof r.default?i.default.PermissionDenied:i.default.Failed}})}checkAudioOutput(M,R){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return d(this,void 0,void 0,function*(){try{const k=M?l.default.getIntrinsicDeviceId(M):"";return yield this.playTone(k,this.configuration.audioOutputFrequency,O),(yield R())?o.default.Succeeded:o.default.Failed}catch(k){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${k}`),o.default.Failed}finally{this.stopTone()}})}playTone(M,R,O){return d(this,void 0,void 0,function*(){const A=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=l.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=R,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const D=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,D),this.gainNode.gain.linearRampToValueAtTime(A,D+.1),this.oscillatorNode.start();const H=new m.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield H.bindAudioDevice({deviceId:M}))}catch(j){this.logger.error(`Failed to bind audio device: ${j}`)}try{yield H.bindAudioElement(O||new Audio)}catch(j){this.logger.error(`Failed to bind audio element: ${j}`)}yield H.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const M=1,R=.1,O=this.configuration.audioOutputGain,k=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(O,k+R+M),this.gainNode.gain.linearRampToValueAtTime(0,k+R*2+M),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(M){return d(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(M),yield this.meetingSession.audioVideo.stopVideoInput(),E.default.Succeeded}catch(R){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${R}`),R instanceof r.default?E.default.PermissionDenied:E.default.Failed}})}checkCameraResolution(M,R,O){return d(this,void 0,void 0,function*(){let k;try{const A=l.default.getIntrinsicDeviceId(M),P={video:this.calculateVideoConstraint(A,R,O)};k=yield navigator.mediaDevices.getUserMedia(P)}catch(A){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${R} height ${O} failed with error ${A}`),A&&A.name==="OverconstrainedError"?u.default.ResolutionNotSupported:A&&A.name==="NotAllowedError"?u.default.PermissionDenied:u.default.Failed}finally{k&&k.getTracks().forEach(function(A){A.stop()})}return u.default.Succeeded})}calculateVideoConstraint(M,R,O){const k=this.browserBehavior.requiresResolutionAlignment(R,O),A={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(A.deviceId=M,A.width=R,A.height=O):(A.deviceId={exact:M},A.width={exact:k[0]},A.height={exact:k[1]}),A}checkContentShareConnectivity(M){return d(this,void 0,void 0,function*(){let R=!1,O=!1;const k={contentShareDidStart:()=>{R=!0}},A={audioVideoDidStart:()=>{O=!0}};try{return this.meetingSession.audioVideo.addObserver(A),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(k),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(M),yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return O&&R})),O?(yield this.stopMeeting(),R?h.default.Succeeded:h.default.TimedOut):h.default.ConnectionFailed}catch(P){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${P}`),P.name==="NotAllowedError"?h.default.PermissionDenied:h.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(A),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(k)}})}checkAudioConnectivity(M){return d(this,void 0,void 0,function*(){let R=!1;const O={packetsReceived:0},k=this.meetingSession.audioVideo,A={metricsDidReceive(D){D.getRTCStatsReport().forEach(H=>{H.type==="inbound-rtp"&&(H.mediaType==="audio"||H.kind==="audio")&&(O.packetsReceived=H.packetsReceived)})}},P=s((D,H,j,W)=>{D===this.meetingSession.configuration.credentials.attendeeId&&H&&(R=!0)},"attendeePresenceHandler");try{yield k.startAudioInput(M)}catch(D){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${D}`),D instanceof r.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return k.realtimeSubscribeToAttendeeIdPresence(P),k.addObserver(A),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(R,O)})),k.removeObserver(A),k.realtimeUnsubscribeToAttendeeIdPresence(P),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(R,O)?t.default.Succeeded:t.default.AudioNotReceived):(k.removeObserver(A),k.realtimeUnsubscribeToAttendeeIdPresence(P),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(M){return d(this,void 0,void 0,function*(){const R=this.meetingSession.audioVideo;let O=0;const k={metricsDidReceive(A){A.getRTCStatsReport().forEach(D=>{D.type==="outbound-rtp"&&(D.mediaType==="video"||D.kind==="video")&&(O=D.packetsSent)})}};try{yield R.startVideoInput(M)}catch(A){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${A}`),A instanceof r.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}return R.addObserver(k),(yield this.startMeeting())?(R.startLocalVideoTile(),yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return O>0})),yield R.stopVideoInput(),yield this.stopMeeting(),R.removeObserver(k),O<=0?v.default.VideoNotSent:v.default.Succeeded):v.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return d(this,void 0,void 0,function*(){let M=!1;const R={metricsDidReceive(k){k.getRTCStatsReport().forEach(P=>{P.type==="candidate-pair"&&P.state==="succeeded"&&(M=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(k){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${k}`),f.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=k=>{const A=this.originalURLRewriter(k);return A.includes("transport=tcp")?"":A};const O=this.meetingSession.audioVideo;return O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return M})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),O.removeObserver(R),M?f.default.Succeeded:f.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,f.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return d(this,void 0,void 0,function*(){let M=!1;const R={metricsDidReceive(k){k.getRTCStatsReport().forEach(P=>{P.type==="candidate-pair"&&P.state==="succeeded"&&(M=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(k){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${k}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=k=>{const A=this.originalURLRewriter(k);return A.includes("transport=udp")?"":A};const O=this.meetingSession.audioVideo;return O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return M})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),O.removeObserver(R),M?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return d(this,void 0,void 0,function*(){let M=!1;const R={audioVideoDidStart:()=>{M=!0}};return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return M})),this.meetingSession.audioVideo.removeObserver(R),M})}stopMeeting(){return d(this,void 0,void 0,function*(){let M=!1;const R={audioVideoDidStop:O=>{M=!0}};return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return M})),this.meetingSession.audioVideo.removeObserver(R),M})}executeTimeoutTask(M){return d(this,void 0,void 0,function*(){let R=!1,O=s(class extends n.default{cancel(){this.isCancelled=!0}run(){return d(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield M()){R=!0;break}yield vS.delay(this.waitDurationMs)}})}constructor(P,D){super(P),this.waitDurationMs=D,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new O(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),R})}isAudioConnectionSuccessful(M,R){return M&&R.packetsReceived>0}constructor(M,R,O=new _.default){this.logger=M,this.meetingSession=R,this.configuration=O,this.browserBehavior=new g.default}},"DefaultMeetingReadinessChecker");a.default=T},898490693:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");a.default=c},6643608480:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(f,v,E,_){function T(w){return w instanceof E?w:new E(function(M){M(w)})}return s(T,"adopt"),new(E||(E=Promise))(function(w,M){function R(A){try{k(_.next(A))}catch(P){M(P)}}s(R,"fulfilled");function O(A){try{k(_.throw(A))}catch(P){M(P)}}s(O,"rejected");function k(A){A.done?w(A.value):T(A.value).then(R,O)}s(k,"step"),k((_=_.apply(f,v||[])).next())})},p=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(1833994912)),g=p(c(9305916160)),l=p(c(4571447548)),r=p(c(5546774952)),n=p(c(220809536)),e=p(c(7050079116)),t=p(c(8207737579)),i=c(4236152345),o=p(c(913629600)),u=p(c(2114525466)),h=p(c(7880459944));let S=s(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return d(this,void 0,void 0,function*(){i.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),i.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),i.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const v=new r.default,E=`${v.name()} ${v.majorVersion()} (${v.version()})`;if(this.logger.info(`browser is ${E}`),v.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${v.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!v.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(v.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${v.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!v.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(v){return!!(v&&v.addObserver)}constructor(v,E,_,T){this._eventController=T,this._configuration=v,this._logger=E,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(v,E)),_.eventController||(_.eventController=this.eventController),this.audioVideoController=new m.default(this._configuration,this._logger,new h.default(this._logger),_,new u.default(this._configuration.reconnectTimeoutMs,new l.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=_,this.logger.info(`MeetingFeatures: ${JSON.stringify(v.meetingFeatures)}`);const w=new n.default(this._logger);this.contentShareController=new e.default(w,new m.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new h.default(this._logger),w,new u.default(this._configuration.reconnectTimeoutMs,new l.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new g.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");a.default=S},2612255336:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1197017824));let m=s(class yS{clone(){return new yS(this.videoMaxResolution,this.contentMaxResolution)}constructor(l=p.default.VideoResolutionHD,r=p.default.VideoResolutionFHD){this.videoMaxResolution=l,this.contentMaxResolution=r}},"MeetingFeatures");a.default=m},6226061697:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8692068971)),m=d(c(1197017824)),g=c(5685319565),l=d(c(2612255336)),r=d(c(8023404193)),n=d(c(803810435));let e=s(class{constructor(i,o){var u,h;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new p.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new l.default,i){i=g.toLowerCasePropertyNames(i),i.meeting&&(i=i.meeting),this.meetingId=i.meetingid,this.externalMeetingId=i.externalmeetingid,this.urls=new n.default,this.urls.audioHostURL=i.mediaplacement.audiohosturl,this.urls.signalingURL=i.mediaplacement.signalingurl,this.urls.turnControlURL=i.mediaplacement.turncontrolurl,i.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=i.mediaplacement.eventingestionurl);const S=s((f,v)=>{switch(f){case"None":return m.default.VideoDisabled;case"HD":return m.default.VideoResolutionHD;case"FHD":return m.default.VideoResolutionFHD;case"UHD":return m.default.VideoResolutionUHD;default:return v}},"parseVideoResolution");if(((u=i.meetingfeatures)===null||u===void 0?void 0:u.video)!==void 0||((h=i.meetingfeatures)===null||h===void 0?void 0:h.content)!==void 0){const f=i.meetingfeatures.video===void 0?"HD":i.meetingfeatures.video.maxresolution,v=i.meetingfeatures.content===void 0?"FHD":i.meetingfeatures.content.maxresolution;this.meetingFeatures=new l.default(S(f,m.default.VideoResolutionHD),S(v,m.default.VideoResolutionFHD))}}o&&(o=g.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new r.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");a.default=e},8023404193:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");a.default=c},2234819701:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MeetingSessionLifecycleEvent=void 0;var c;(function(d){d[d.Connecting=0]="Connecting",d[d.Started=1]="Started",d[d.Stopped=2]="Stopped"})(c=a.MeetingSessionLifecycleEvent||(a.MeetingSessionLifecycleEvent={})),a.default=c},546597810:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MeetingSessionLifecycleEventCondition=void 0;var c;(function(d){d[d.ConnectingNew=0]="ConnectingNew",d[d.ReconnectingExisting=1]="ReconnectingExisting",d[d.StartedNew=2]="StartedNew",d[d.StartedExisting=3]="StartedExisting",d[d.StartedAfterReconnect=4]="StartedAfterReconnect",d[d.StoppedCleanly=5]="StoppedCleanly",d[d.StoppedWithFailure=6]="StoppedWithFailure"})(c=a.MeetingSessionLifecycleEventCondition||(a.MeetingSessionLifecycleEventCondition={})),a.default=c},7551081659:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(4136617125),m=d(c(9447989038));let g=s(class Ir{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:case m.default.VideoCallAtSourceCapacity:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.ICEGatheringTimeoutWorkaround:case m.default.ConnectionHealthReconnect:case m.default.RealtimeApiFailed:case m.default.TaskFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case m.default.Left:case m.default.AudioJoinedFromAnotherDevice:case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.MeetingEnded:case m.default.AudioDisconnected:case m.default.TURNCredentialsForbidden:case m.default.SignalingBadRequest:case m.default.SignalingRequestFailed:case m.default.VideoCallAtSourceCapacity:case m.default.RealtimeApiFailed:case m.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.ICEGatheringTimeoutWorkaround:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.RealtimeApiFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case m.default.OK:return"Everything is OK so far.";case m.default.Left:return"The attendee left the meeting.";case m.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case m.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case m.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case m.default.MeetingEnded:return"The meeting ended.";case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:return"The audio connection failed.";case m.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case m.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:return"The signaling connection failed.";case m.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case m.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case m.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case m.default.TaskFailed:return"The connection failed. See the error message for more details.";case m.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case m.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case m.default.NoAttendeePresent:return"The attendee was not present.";case m.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case m.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case m.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case m.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const r=this._statusCode;throw new Error(`Unhandled case: ${r}`)}}}static fromSignalFrame(r){return r.error&&r.error.status?this.fromSignalingStatus(r.error.status):r.type===p.SdkSignalFrame.Type.AUDIO_STATUS?r.audioStatus?this.fromAudioStatus(r.audioStatus.audioStatus):new Ir(m.default.SignalingRequestFailed):r.type===p.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new Ir(m.default.AudioVideoWasRemovedFromPrimaryMeeting):new Ir(m.default.OK)}static fromAudioStatus(r){switch(r){case 200:return new Ir(m.default.OK);case 301:return new Ir(m.default.AudioJoinedFromAnotherDevice);case 302:return new Ir(m.default.AudioDisconnectAudio);case 403:return new Ir(m.default.AudioAuthenticationRejected);case 409:return new Ir(m.default.AudioCallAtCapacity);case 410:return new Ir(m.default.MeetingEnded);case 411:return new Ir(m.default.AudioAttendeeRemoved);case 500:return new Ir(m.default.AudioInternalServerError);case 503:return new Ir(m.default.AudioServiceUnavailable);default:switch(Math.floor(r/100)){case 2:return new Ir(m.default.OK);default:return new Ir(m.default.AudioDisconnected)}}}static fromSignalingStatus(r){switch(r){case 206:return new Ir(m.default.VideoCallSwitchToViewOnly);case 509:return new Ir(m.default.VideoCallAtSourceCapacity);case 403:return new Ir(m.default.AudioAuthenticationRejected);case 409:return new Ir(m.default.AudioCallAtCapacity);default:switch(Math.floor(r/100)){case 2:return new Ir(m.default.OK);case 4:return new Ir(m.default.SignalingBadRequest);case 5:return new Ir(m.default.SignalingInternalServerError);default:return new Ir(m.default.SignalingRequestFailed)}}}constructor(r){this._statusCode=r}},"MeetingSessionStatus");a.default=g},9447989038:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MeetingSessionStatusCode=void 0;var c;(function(d){d[d.OK=0]="OK",d[d.Left=1]="Left",d[d.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",d[d.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",d[d.AudioCallAtCapacity=4]="AudioCallAtCapacity",d[d.MeetingEnded=5]="MeetingEnded",d[d.AudioInternalServerError=6]="AudioInternalServerError",d[d.AudioServiceUnavailable=7]="AudioServiceUnavailable",d[d.AudioDisconnected=8]="AudioDisconnected",d[d.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",d[d.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",d[d.SignalingBadRequest=11]="SignalingBadRequest",d[d.SignalingInternalServerError=12]="SignalingInternalServerError",d[d.SignalingRequestFailed=13]="SignalingRequestFailed",d[d.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",d[d.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",d[d.RealtimeApiFailed=16]="RealtimeApiFailed",d[d.TaskFailed=17]="TaskFailed",d[d.IncompatibleSDP=18]="IncompatibleSDP",d[d.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",d[d.NoAttendeePresent=20]="NoAttendeePresent",d[d.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",d[d.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",d[d.AudioVideoDisconnectedWhilePromoted=23]="AudioVideoDisconnectedWhilePromoted",d[d.AudioDisconnectAudio=24]="AudioDisconnectAudio"})(c=a.MeetingSessionStatusCode||(a.MeetingSessionStatusCode={})),a.default=c},4943767904:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");a.default=c},803810435:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(p){this._audioHostURL=p}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(p){this._signalingURL=p}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(p){this._turnControlURL=p}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(p){this._eventIngestionURL=p}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=p=>p}},"MeetingSessionURLs");a.default=c},488357679:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class ES{equal(p){return this.remoteVideoAvailable===p.remoteVideoAvailable&&this.canStartLocalVideo===p.canStartLocalVideo}clone(){const p=new ES;return p.remoteVideoAvailable=this.remoteVideoAvailable,p.canStartLocalVideo=this.canStartLocalVideo,p}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");a.default=c},1261307249:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(p,m,g){this.type=p,this.headers=m,this.payload=g}},"Message");a.default=c},9331325908:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(S,f,v,E){function _(T){return T instanceof v?T:new v(function(w){w(T)})}return s(_,"adopt"),new(v||(v=Promise))(function(T,w){function M(k){try{O(E.next(k))}catch(A){w(A)}}s(M,"fulfilled");function R(k){try{O(E.throw(k))}catch(A){w(A)}}s(R,"rejected");function O(k){k.done?T(k.value):_(k.value).then(M,R)}s(O,"step"),O((E=E.apply(S,f||[])).next())})},p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(7135774191),g=p(c(4571447548)),l=p(c(8207737579)),r=p(c(1261307249)),n=p(c(2114525466)),e=p(c(9649641385)),t=p(c(7924674822)),i=p(c(7880459944)),o=p(c(5638612424)),u=p(c(4741303625));let h=s(class{addObserver(f){this.logger.info("adding messaging observer"),this.observerQueue.add(f)}removeObserver(f){this.logger.info("removing messaging observer"),this.observerQueue.delete(f)}start(){return d(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),l.default.removeLogger(this.logger))}forEachObserver(f){for(const v of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(v)&&f(v)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",f=>{this.receiveMessageHandler(f.data)}),this.webSocket.addEventListener("close",f=>{this.closeEventHandler(f)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(f){return d(this,void 0,void 0,function*(){return yield this.startConnectingInternal(f),yield new Promise((v,E)=>{this.bootstrapResolved=v,this.bootstrapRejected=E})})}startConnectingInternal(f){var v;return d(this,void 0,void 0,function*(){let E=this.configuration.endpointUrl;if(f||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),f||E===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const T=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((v=T.Endpoint)===null||v===void 0)&&v.Url?E=T.Endpoint.Url:E=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else E=(yield this.configuration.chimeClient.send(new m.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${E}`)}catch(T){this.logger.error(`Messaging Session failed to resolve endpoint: ${T}`);const w=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(w);return}const _=yield this.prepareWebSocketUrl(E);this.logger.info(`opening connection to ${_}`),f||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(_,[],!0),this.forEachObserver(T=>{T.messagingSessionDidStartConnecting&&T.messagingSessionDidStartConnecting(f)}),this.setUpEventListeners()})}prepareWebSocketUrl(f){return d(this,void 0,void 0,function*(){const v=new Map;return v.set("userArn",[this.configuration.userArn]),v.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===u.default.Connect&&v.set("prefetch-on",[u.default.Connect]),this.configuration.prefetchSortBy&&v.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",f,"/connect","",v)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(f){try{const v=JSON.parse(f),E=v.Headers["x-amz-chime-event-type"],_=new r.default(E,v.Headers,v.Payload||null);if(!this.isSessionEstablished&&E==="SESSION_ESTABLISHED"){this.forEachObserver(w=>{w.messagingSessionDidStart&&w.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const T=this.preBootstrapMessages.length;for(let w=0;w<T;w++){const M=this.preBootstrapMessages.shift();this.forEachObserver(R=>{this.sendMessageToObserver(R,M)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(_);return}this.forEachObserver(T=>{this.sendMessageToObserver(T,_)})}catch(v){this.logger.error(`Messaging parsing failed: ${v}`)}}sendMessageToObserver(f,v){f.messagingSessionDidReceiveMessage&&f.messagingSessionDidReceiveMessage(v)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>d(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(f){this.logger.info(`WebSocket close: ${f.code} ${f.reason}`),f.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(f.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(v=>{v.messagingSessionDidStop&&v.messagingSessionDidStop(f)}):this.bootstrapRejected(f))}canReconnect(f){return f===1001||f===1006||f>=1011&&f<=1014||f>4e3&&f!==4002&&f!==4003&&f!==4401}constructor(f,v,E,_,T){this.configuration=f,this.logger=v,this.webSocket=E,this.reconnectController=_,this.sigV4=T,this.observerQueue=new Set,this.webSocket||(this.webSocket=new i.default(this.logger)),this.reconnectController||(this.reconnectController=new n.default(f.reconnectTimeoutMs,new g.default(f.reconnectFixedWaitMs,f.reconnectShortBackoffMs,f.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),l.default.addLogger(this.logger),l.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");a.default=h},6589808043:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(5685319565);let p=s(class{generateSessionId(){const g=new Uint32Array(1);return d.getRandomValues(g),g[0].toString()}constructor(g,l,r,n){this.userArn=g,this.messagingSessionId=l,this.endpointUrl=r,this.chimeClient=n,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");a.default=p},4741303625:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.Connect="connect"})(c||(c={})),a.default=c},2097622617:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.Unread="unread",d.LastMessageTimestamp="last-message-timestamp"})(c||(c={})),a.default=c},8006173476:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(805846668));let m=s(class Aa{id(){return this._id}base(){return this._id?this._id.split(Aa.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const l=this._id.split(Aa.MODALITY_SEPARATOR);return l.length===2?l[1]:""}hasModality(l){return l!==""&&this.modality()===l}withModality(l){const r=new Aa(this.base()+Aa.MODALITY_SEPARATOR+l);return l===""||this.base()===""||new Aa(r._id).modality()!==l?new Aa(this.base()):r}constructor(l){this._id=l}},"DefaultModality");a.default=m,m.MODALITY_SEPARATOR=p.default.Modality[0],m.MODALITY_CONTENT=p.default.Modality.substr(1)},6348496904:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(9649641385)),m=d(c(9877075638)),g=d(c(7969706599)),l=c(4136617125),r=c(6527539809);let n=s(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)p.default.nextTick(()=>{this.observerQueue.has(i)&&t(i)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(i=>{r.Maybe.of(i.didMissPongs).map(o=>o.bind(i)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=l.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=l.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const i=l.SdkPingPongFrame.create();i.pingId=t,i.type=l.SdkPingPongType.PONG,this.signalingClient.pingPong(i)}handleSignalingClientEvent(t){switch(t.type){case g.default.WebSocketOpen:this.startPingInterval();break;case g.default.WebSocketFailed:case g.default.WebSocketError:this.logger.warn(`stopped pinging (${g.default[t.type]})`),this.stopPingInterval();break;case g.default.WebSocketClosing:case g.default.WebSocketClosed:this.logger.info(`stopped pinging (${g.default[t.type]})`),this.stopPingInterval();break;case g.default.ReceivedSignalFrame:if(t.message.type!==l.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===l.SdkPingPongType.PONG){const i=t.message.pingPong.pingId;if(i!==this.pingId){this.logger.warn(`unexpected ping id ${i} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${i} with timestamp ${o}`);const h=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-h/2),f=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${f}ms from ping-pong time=${h}ms`),this.forEachObserver(v=>{r.Maybe.of(v.didReceivePong).map(E=>E.bind(v)(i,f,h))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,i,o){this.signalingClient=t,this.intervalMs=i,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new m.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");a.default=n},7692233712:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6391477986)),m=d(c(7618200138)),g=d(c(7832597620));let l=s(class{realtimeSetLocalAttendeeId(n,e){this.state.localAttendeeId=n,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(n,e,t,i,o){try{e&&(this.state.attendeeIdToExternalUserId[n]=t);for(const u of this.state.attendeeIdChangesCallbacks)u(n,e,t,i,o)}catch(u){this.onError(u)}}realtimeSubscribeToAttendeeIdPresence(n){try{this.state.attendeeIdChangesCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(n){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(n);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(n){try{if(this.state.canUnmute===n)return;this.state.canUnmute=n;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(n)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(n){try{this.state.setCanUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(n){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!0)}catch(n){this.onError(n)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!1);return!0}catch(n){return this.onError(n),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(n){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(n){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(n,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(n)||(this.state.volumeIndicatorCallbacks[n]=[]),this.state.volumeIndicatorCallbacks[n].push(e),this.sendVolumeIndicatorChange(n,!0,!0,!0,this.state.attendeeIdToExternalUserId[n])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(n,e){if(this.state.volumeIndicatorCallbacks[n])if(e){const i=this.state.volumeIndicatorCallbacks[n].indexOf(e);i>=0&&this.state.volumeIndicatorCallbacks[n].splice(i,1)}else delete this.state.volumeIndicatorCallbacks[n]}realtimeUpdateVolumeIndicator(n,e,t,i,o){try{t=this.applyLocalMuteOverride(n,t);const u=this.getVolumeIndicatorState(n);let h=!1,S=!1,f=!1;t!==null&&u.muted!==t&&(u.muted=t,S=!0,u.muted&&u.volume!==0&&(u.volume=0,h=!0)),!u.muted&&e!==null&&(u.volume!==e&&(u.volume=e,h=!0),u.muted===null&&(u.muted=!1,S=!0)),i!==null&&u.signalStrength!==i&&(u.signalStrength=i,f=!0),this.sendVolumeIndicatorChange(n,h,S,f,o)}catch(u){this.onError(u)}}realtimeSubscribeToLocalSignalStrengthChange(n){try{if(this.state.localSignalStrengthChangeCallbacks.push(n),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(n){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(n);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(n){try{this.state.sendDataMessageCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(n){try{const e=this.state.sendDataMessageCallbacks.indexOf(n);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(n,e,t){try{for(const i of this.state.sendDataMessageCallbacks)i(n,e,t)}catch(i){this.onError(i)}}realtimeSubscribeToReceiveDataMessage(n,e){try{this.state.receiveDataMessageCallbacks.has(n)?this.state.receiveDataMessageCallbacks.get(n).push(e):this.state.receiveDataMessageCallbacks.set(n,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(n){try{this.state.receiveDataMessageCallbacks.delete(n)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(n){try{if(this.state.receiveDataMessageCallbacks.has(n.topic))for(const e of this.state.receiveDataMessageCallbacks.get(n.topic))e(n)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(n){try{this.state.fatalErrorCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(n){try{const e=this.state.fatalErrorCallbacks.indexOf(n);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(n){n?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(n,e){const t=this.state.localAttendeeId,i=this.state.muted;return n!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:i}sendVolumeIndicatorChange(n,e,t,i,o){if(this.sendLocalSignalStrengthChange(n,i),!this.state.volumeIndicatorCallbacks.hasOwnProperty(n))return;const u=this.getVolumeIndicatorState(n),h=new g.default;if(e&&(h.volume=u.volume),t&&(h.muted=u.muted),i&&(h.signalStrength=u.signalStrength),!this.stateIsEmpty(h))for(const S of this.state.volumeIndicatorCallbacks[n])S(n,h.volume,h.muted,h.signalStrength,o)}sendLocalSignalStrengthChange(n,e){if(!e||n!==this.state.localAttendeeId)return;const i=this.getVolumeIndicatorState(n).signalStrength;if(i!==null)for(const o of this.state.localSignalStrengthChangeCallbacks)o(i)}getVolumeIndicatorState(n){return this.state.volumeIndicatorState.hasOwnProperty(n)||(this.state.volumeIndicatorState[n]=new g.default),this.state.volumeIndicatorState[n]}stateIsEmpty(n){return n.volume===null&&n.muted===null&&n.signalStrength===null}onError(n){try{for(const e of this.state.fatalErrorCallbacks)e(n)}catch(e){try{console.error(n),console.error(e)}catch{}}}constructor(n,e){this.mediaStreamBroker=n,this.state=new m.default,this._transcriptionController=e||new p.default(this)}},"DefaultRealtimeController");a.default=l},3171391796:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");a.default=c},7618200138:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");a.default=c},7832597620:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");a.default=c},2114525466:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5824864644));let m=s(class bS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(l){this._isFirstConnection=l,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(l,r){const n=this.shouldReconnect&&!this.hasPastReconnectDeadline();return n&&(this.backoffCancel=r,this.backoffTimer=new p.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,l()})),n}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new bS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(l){this.lastActiveTimestampMs=l}constructor(l,r){this.reconnectTimeoutMs=l,this.backoffPolicy=r,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");a.default=m},3937896393:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class No{static initializeWorker(){No.log("Initializing RedundantAudioEncoder");const p=new No;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?p.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?p.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&p.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(p.setupSenderTransform(m.data.send.readable,m.data.send.writable),p.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="PassthroughTransform"?(p.setupPassthroughTransform(m.data.send.readable,m.data.send.writable),p.setupPassthroughTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?p.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?p.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?p.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?p.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&p.setRedundancyEnabled(!1)}}static log(p){No.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${p}`})}static getNumRedundantEncodingsForPacketLoss(p){let m=0,g=!1;return p<=8?m=0:p<=18?m=1:p<=75?m=2:(m=0,g=!0),[m,g]}setupPassthroughTransform(p,m){No.log("Setting up passthrough transform"),p.pipeTo(m)}setupSenderTransform(p,m){No.log("Setting up sender RED transform");const g=new TransformStream({transform:this.senderTransform.bind(this)});p.pipeThrough(g).pipeTo(m)}setupReceiverTransform(p,m){No.log("Setting up receiver RED transform");const g=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});p.pipeThrough(g).pipeTo(m)}setRedPayloadType(p){this.redPayloadType=p,No.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(p){this.opusPayloadType=p,No.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(p){this.numRedundantEncodings=p,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),No.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(p){this.redundancyEnabled=p,No.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(p,m){p.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(p)}senderTransform(p,m){if(p.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}const l=this.getPrimaryPayload(p.timestamp,p.data);if(!l){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}const r=this.encode(p.timestamp,l);if(!r){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}p.data=r,this.enqueueAudioFrameIfPayloadSizeIsValid(p,m)}getPrimaryPayload(p,m){const g=this.splitEncodings(p,m);return!g||g.length<1?null:g[g.length-1].payload}splitEncodings(p,m){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const r=new DataView(m);let n=r.byteLength,e=0,t=0,i=0,o=0,u=!1;const h=new Array,S=new Array,f=new Array;for(;n>0;)if(u=(r.getUint8(o)&128)===0,u){if((r.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=r.byteLength))return null;i=r.byteLength-e;break}else{if(n<this.redHeaderSizeBytes)return null;const M=((r.getUint8(o+2)&3)<<8)+r.getUint8(o+3);S.push(M);const R=r.getUint16(o+1)>>2,O=p-R;f.push(O),e+=M+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,n-=this.redHeaderSizeBytes}if(!u)return null;let v=t;for(let M=0;M<f.length;M++){const R=new ArrayBuffer(S[M]);new Uint8Array(R).set(new Uint8Array(r.buffer,v,S[M]),0);const k={timestamp:f[M],payload:R,isRedundant:!0};g&&(k.hasFec=this.opusPacketHasFec(new DataView(R),R.byteLength)),h.push(k),v+=S[M]}const E=r.byteLength-i,_=new ArrayBuffer(i);new Uint8Array(_).set(new Uint8Array(r.buffer,E,i),0);const w={timestamp:p,payload:_,isRedundant:!1,seq:l};return g&&(w.hasFec=this.opusPacketHasFec(new DataView(_),_.byteLength)),h.push(w),h}encode(p,m){const g=m.byteLength;if(g===0||g>=this.maxRedPacketSizeBytes||g>=this.maxAudioPayloadSizeBytes)return null;const l=this.numRedundantEncodings;let r=this.redLastHeaderSizeBytes,n=g,e=this.maxAudioPayloadSizeBytes-g-r;const t=new Array,i=new Array;if(this.redundancyEnabled){let f=this.uint32WrapAround(p-this.redPacketizationTime*this.redPacketDistance);for(let v=0;v<l&&!(this.uint32WrapAround(p-f)>=this.maxRedTimestampOffset);v++){let E=f,_=this.encodingHistory.find(T=>T.timestamp===E);if(_||(E=this.uint32WrapAround(f-this.redPacketizationTime),_=this.encodingHistory.find(T=>T.timestamp===E)),_){const T=_.payload.byteLength;if(e<this.redHeaderSizeBytes+T)break;e-=this.redHeaderSizeBytes+T,r+=this.redHeaderSizeBytes,n+=T,t.unshift(_.timestamp),i.unshift(_.payload)}f-=this.redPacketizationTime*this.redPacketDistance,f=this.uint32WrapAround(f)}}const o=new ArrayBuffer(r+n),u=new DataView(o);let h=0;for(let f=0;f<t.length;f++){const v=p-t[f];u.setUint8(h,this.opusPayloadType|128),u.setUint16(h+1,v<<2|i[f].byteLength>>8),u.setUint8(h+3,i[f].byteLength&255),h+=this.redHeaderSizeBytes}u.setUint8(h,this.opusPayloadType),h+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let f=0;f<i.length;f++)S.set(new Uint8Array(i[f]),h),h+=i[f].byteLength;return S.set(new Uint8Array(m),h),h+=m.byteLength,h!==r+n?null:(this.updateEncodingHistory(p,m),o)}updateEncodingHistory(p,m){for(const l of this.encodingHistory){const r=this.redPacketizationTime*this.redMaxRecoveryDistance;if(p-l.timestamp>=r)this.encodingHistory.shift();else break}const g=new DataView(m);(this.opusPacketIsCeltOnly(g)||this.opusPacketHasVoiceActivity(g,g.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:p,payload:m}))}initializePacketLogs(){const p=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(p),index:0,windowSize:p},this.redRecoveryLog={window:new Array(p),index:0,windowSize:p},this.fecRecoveryLog={window:new Array(p),index:0,windowSize:p},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(p,m){const g=p.getMetadata();if(g.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}const l=this.splitEncodings(p.timestamp,p.data,!0,g.sequenceNumber);if(!l){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}for(let r=l.length-1;r>=0;r--)this.updateLossStats(l[r])&&(this.updateRedStats(l[r]),this.updateFecStats(l[r]));this.maybeReportLossStats(l[l.length-1].timestamp,g.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(p,m)}updateLossStats(p){if(p.isRedundant)return!0;const m=p.timestamp,g=p.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=g,this.addTimestamp(this.primaryPacketLog,m),!0;const l=this.int16(g-this.newestSequenceNumber);return l<-this.maxOutOfOrderPacketDistance?!1:(l<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):l>1&&(this.totalAudioPacketsLost+=l-1),l>0&&(this.totalAudioPacketsExpected+=l,this.newestSequenceNumber=p.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(p){if(!p.isRedundant||this.totalAudioPacketsLost===0)return;const m=p.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(p){if(!p.hasFec||this.totalAudioPacketsLost===0)return;const m=p.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(p,m){p-this.lastLossReportTimestamp<this.lossReportInterval||(No.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=p)}addTimestamp(p,m){p.window[p.index]=m,p.index=(p.index+1)%p.windowSize}hasTimestamp(p,m){return!!p.window.find(l=>l===m)}removeTimestamp(p,m){const g=p.window.indexOf(m);return g>=0?(p.window[g]=void 0,!0):!1}removeFromRecoveryWindows(p){let m=this.removeTimestamp(this.redRecoveryLog,p);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,p),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(p){let g=p;return p>=4294967296?g=p-4294967296:p<0&&(g=4294967296+p),g}int16(p){return p<<16>>16}opusPacketIsCeltOnly(p){return!!(p.getUint8(0)&128)}opusPacketGetSamplesPerFrame(p,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let g,l;return this.opusPacketIsCeltOnly(p)?(l=p.getUint8(0)>>3&3,g=(m<<l)/400):(p.getUint8(0)&96)===96?g=p.getUint8(0)&8?m/50:m/100:(l=p.getUint8(0)>>3&3,l===3?g=m*60/1e3:g=(m<<l)/100),g}opusNumSilkFrames(p){let m=this.opusPacketGetSamplesPerFrame(p,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(p){return p.getUint8(0)&4?2:1}opusParseSize(p,m,g,l){return g<1?(l[0]=-1,-1):p.getUint8(m)<252?(l[0]=p.getUint8(m),1):g<2?(l[0]=-1,-1):(l[0]=4*p.getUint8(m+1)+p.getUint8(m),2)}opusPacketParseImpl(p,m,g,l,r,n,e,t){if(!n||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let i,o,u=0,h=!1;const S=p.getUint8(0);l&&(l[0]=S);let f=m-1,v=1,E=f;switch(S&3){case 0:i=1;break;case 1:if(i=2,h=!0,!g){if(f&1)return this.OPUS_INVALID_PACKET;E=f/2,n[0][0]=E}break;case 2:if(i=2,o=this.opusParseSize(p,v,f,n[0]),f-=o,n[0][0]<0||n[0][0]>f)return this.OPUS_INVALID_PACKET;v+=o,E=f-n[0][0];break;default:if(f<1)return this.OPUS_INVALID_PACKET;const _=p.getUint8(v++);if(--f,i=_&63,i<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(p,48e3)*i>5760)return this.OPUS_INVALID_PACKET;if(_&64){let w,M;do{if(f<=0)return this.OPUS_INVALID_PACKET;w=p.getUint8(v++),--f,M=w===255?254:w,f-=M,u+=M}while(w===255)}if(f<0)return this.OPUS_INVALID_PACKET;if(h=!(_&128),h){if(!g){if(E=Math.trunc(f/i),E*i!==f)return this.OPUS_INVALID_PACKET;for(let w=0;w<i-1;++w)n[w][0]=E}}else{E=f;for(let w=0;w<i-1;++w){if(o=this.opusParseSize(p,v,f,n[w]),f-=o,n[w][0]<0||n[w][0]>f)return this.OPUS_INVALID_PACKET;v+=o,E-=o+n[w][0]}if(E<0)return this.OPUS_INVALID_PACKET}}if(g){if(o=this.opusParseSize(p,v,f,n[i-1]),f-=o,n[i-1][0]<0||n[i-1][0]>f)return this.OPUS_INVALID_PACKET;if(v+=o,h){if(n[i-1][0]*i>f)return this.OPUS_INVALID_PACKET;for(let _=0;_<i-1;++_)n[_][0]=n[i-1][0]}else if(!(o+n[i-1][0]<=E))return this.OPUS_INVALID_PACKET}else{if(E>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;n[i-1][0]=E}e&&(e[0]=v);for(let _=0;_<i;++_)r&&(r[_][0]=v),v+=n[_][0];return t&&(t[0]=v+u),i}opusPacketParse(p,m,g,l,r,n){return this.opusPacketParseImpl(p,m,!1,g,l,r,n,null)}opusPacketHasVoiceActivity(p,m){if(!p||m<=0)return 0;if(this.opusPacketIsCeltOnly(p))return-1;const g=this.opusNumSilkFrames(p);if(g===0)return-1;const l=new Array(this.OPUS_MAX_OPUS_FRAMES),r=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)l[e]=[void 0],r[e]=[void 0];const n=this.opusPacketParse(p,m,null,l,r,null);if(n<0)return-1;for(let e=0;e<n;++e){if(r[e][0]<1)continue;if(p.getUint8(l[e][0])>>8-g||this.opusPacketGetNumChannels(p)===2&&p.getUint8(l[e][0])<<g+1>>8-g)return 1}return 0}opusPacketHasFec(p,m){if(!p||m<=0||this.opusPacketIsCeltOnly(p))return!1;const g=new Array(this.OPUS_MAX_OPUS_FRAMES),l=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)g[t]=[void 0],l[t]=[void 0];if(this.opusPacketParse(p,m,null,g,l,null)<0||l[0][0]<=1)return!1;const n=this.opusNumSilkFrames(p);if(n===0)return!1;const e=this.opusPacketGetNumChannels(p);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(p.getUint8(g[0][0])&128>>(t+1)*(n+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");a.default=c,c.shouldLog=!1,c.shouldReportStats=!1},9337558969:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const c=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;a.default=c},9649641385:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5824864644));let m=s(class extends p.default{static nextTick(l){setTimeout(l,0)}constructor(){super(0)}},"AsyncScheduler");a.default=m},9877075638:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{start(p){this.stop(),this.timer=setInterval(p,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(p){this.intervalMs=p}},"IntervalScheduler");a.default=c},5824864644:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{start(p){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),p()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(p){this.timeoutMs=p,this.timer=null}},"TimeoutScheduler");a.default=c},182939685:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(9489740826)),m=d(c(6818892922)),g=d(c(8804723777));let l=s(class un{clone(){return new un(this.sdp)}static isRTPCandidate(n){const e=/candidate[:](\S+) (\d+)/g.exec(n);return!(e===null||e[2]!=="1")}static linesToSDP(n){return new un(n.join(un.CRLF))}static candidateTypeFromString(n){switch(n){case p.default.Host:return p.default.Host;case p.default.ServerReflexive:return p.default.ServerReflexive;case p.default.PeerReflexive:return p.default.PeerReflexive;case p.default.Relay:return p.default.Relay}return null}static candidateType(n){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(n);return e===null?null:un.candidateTypeFromString(e[1])}static mediaType(n){const e=/m=(audio|video)/g.exec(n);if(e!==null)return e[1]}static mid(n){if(n.includes("a=mid:"))return n.replace(/^(a=mid:)/,"")}static direction(n){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(n);if(e!==null)return e[1]}static splitLines(n){return n.trim().split(`
`).map(e=>e.trim())}static splitSections(n){return n.split(`
m=`).map((t,i)=>(i>0?"m="+t:t).trim()+un.CRLF)}static findActiveCameraSection(n){let e=0,t=!1;for(const i of n){if(/^m=video/.test(i)&&(i.indexOf("sendrecv")>-1||i.indexOf("sendonly")===-1&&i.indexOf("recvonly")===-1&&i.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(n){return/^a=ssrc-group:FID\s(.+)/.exec(n)[1]}static matchPrefix(n,e){return un.splitLines(n).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(un.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(n){return un.linesToSDP(this.lines().filter(e=>un.candidateType(e)!==n))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(p.default.ServerReflexive)}withAudioMaxAverageBitrate(n){if(!n)return this.clone();n=Math.trunc(Math.min(Math.max(n,un.rfc7587LowestBitrate),un.rfc7587HighestBitrate));const e=this.lines(),t=un.findOpusFmtpAttributes(e),i=un.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${n}`]);return un.linesToSDP(i)}withStereoAudio(){const n=this.lines(),e=un.findOpusFmtpAttributes(n),t=un.updateOpusFmtpAttributes(n,e,["stereo=1","sprop-stereo=1"]);return un.linesToSDP(t)}static findOpusFmtpAttributes(n){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const i=[];for(const o of n)if(o.startsWith("m=audio")&&(i.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const u=e.exec(o);u!==null&&(i[i.length-1]=`a=fmtp:${u[1]} `)}return i}static updateOpusFmtpAttributes(n,e,t){const i=[];let o=0,u=null;for(const h of n)if(h.startsWith("m=audio")&&(u=e[o],o++),h.startsWith("m=video")&&(u=null),u&&h.startsWith(u)){const S=h.slice(u.length).split(";"),f=[];for(const v of S)t.findIndex(_=>_.startsWith(v.split("=")[0]))<0&&f.push(v);for(const v of t)f.push(v);i.push(u+f.join(";"))}else i.push(h);return i}withUnifiedPlanFormat(){let n=this.sdp;return n.includes("mozilla")?this.clone():(n=n.replace("o=-","o=mozilla-chrome"),new un(n))}getUniqueRtpHeaderExtensionId(n){const e=[];for(const i of n)if(/^a=extmap:/.test(i.trim())){const u=+i.split("a=extmap:")[1].split(" ")[0];e.includes(u)||e.push(u)}e.sort((i,o)=>i-o);let t=0;for(const i of e){if(i-t>1)return t+1;t=i}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,un.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,un.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const n=un.splitLines(this.sdp).filter(e=>!e.includes(un.dependencyDescriptorRtpHeaderExtensionUrl));return new un(n.join(un.CRLF)+un.CRLF)}withRtpHeaderExtension(n,e){const t=n?n.getRtpHeaderExtensionId(e):-1,i=t===-1?this.getUniqueRtpHeaderExtensionId(un.splitLines(this.sdp)):t,o=un.splitSections(this.sdp),u=[];for(let S of o){if(/^m=video/.test(S)&&un.getRtpHeaderExtensionIdInSection(S,e)===-1){const f=un.splitLines(S),v=[];if(i===-1||this.hasRtpHeaderExtensionId(i)){u.push(S);continue}for(const E of f)if(v.push(E),/^a=sendrecv/.test(E.trim())){const _="a=extmap:"+i+" "+e;v.push(_)}S=v.join(un.CRLF)+un.CRLF}else if(t!==-1&&/^m=video/.test(S)&&un.getRtpHeaderExtensionIdInSection(S,e)!==t){const f=un.splitLines(S),v=[];for(const E of f){if(/^a=extmap:/.test(E.trim())&&E.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const T="a=extmap:"+t+" "+e;v.push(T)}continue}v.push(E)}S=v.join(un.CRLF)+un.CRLF}u.push(S)}const h=u.join("");return new un(h)}ssrcForVideoSendingSection(){const n=this.sdp,e=un.splitSections(n);if(e.length<2)return"";const t=un.findActiveCameraSection(e);if(t===-1)return"";const i=un.matchPrefix(e[t],"a=ssrc-group:FID ");if(i.length<1)return"";const o=un.extractSSRCsFromFIDGroupLine(i[0]),[u]=o.split(" ").map(h=>parseInt(h,10));return u.toString()}videoSendSectionHasDifferentSSRC(n){const e=this.ssrcForVideoSendingSection(),t=n.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const i=parseInt(e,10),o=parseInt(t,10);return i!==o}removeH264SupportFromSendSection(){const n=this.sdp,e=un.splitSections(n),t=un.findActiveCameraSection(e);if(t===-1)return new un(this.sdp);const i=e[t],o=un.splitLines(i),u=[],h=new Map;o.forEach(E=>{if(/^a=rtpmap:/.test(E)){const _=/^a=rtpmap:([0-9]+)\s/.exec(E);_&&E.toLowerCase().includes("h264")&&u.push(parseInt(_[1],10))}if(/^a=fmtp:/.test(E)){const _=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(E);if(_&&_.length===3){const T=parseInt(_[1],10),w=parseInt(_[2],10);h.has(w)?h.get(w).push(T):h.set(w,[T])}}});const S=new Set;for(const E of u){S.add(E);const _=h.get(E);if(_)for(const T of _)S.add(T)}if(u.length>0){const E=o[0].split(" ");o[0]=E.filter(_=>!S.has(parseInt(_))).join(" ")}const f=o.filter(E=>{if(!E.includes("rtpmap")&&!E.includes("rtcp-fb")&&!E.includes("fmtp"))return!0;for(const _ of S)if(E.includes(_.toString()))return!1;return!0});e[t]=f.join(un.CRLF)+un.CRLF;const v=e.join("");return new un(v)}mediaSections(){const n=un.splitSections(this.sdp);if(n.length<2)return[];const e=[];for(let t=1;t<n.length;t++){const i=new m.default,o=un.splitLines(n[t]);for(const u of o){const h=un.mediaType(u);if(h!==void 0){i.mediaType=h;continue}const S=un.direction(u);if(S!==void 0){i.direction=S;continue}const f=un.mid(u);if(f!==void 0){i.mid=f;continue}}e.push(i)}return e}static getRtpHeaderExtensionIdInSection(n,e){const t=un.splitLines(n);for(const i of t)if(/^a=extmap:/.test(i.trim())){const o=i.split("a=extmap:")[1].split(" "),u=+o[0];if(o[1]===e)return u}return-1}getRtpHeaderExtensionId(n){const e=un.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const i=un.getRtpHeaderExtensionIdInSection(t,n);if(i!==-1)return i}return-1}hasRtpHeaderExtensionId(n){const e=un.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===n)return!0;return!1}withVideoSendCodecPreferences(n){const e=this.sdp,t=un.splitSections(e),i=un.findActiveCameraSection(t);if(i===-1)return new un(this.sdp);t[i]=this.sectionWithCodecPreferences(t[i],n);const o=t.join("");return new un(o)}sectionWithCodecPreferences(n,e){const t=new Map,i=un.splitLines(n);i.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const f=/^a=rtpmap:(\d+)\s/.exec(S);if(!f)return;const v=f[1];for(const E of e){if(!S.includes(`${E.codecName}/${E.codecCapability.clockRate}`))continue;let _=!1;if(E.codecCapability.sdpFmtpLine!==void 0){let T=!1;for(const w of i){if(E.fmtpLineMatches(w,parseInt(v))){_=!0;break}T||(T=w.startsWith(`a=fmtp:${v} profile-id=`))}E.equals(g.default.vp9Profile0())&&!T&&(_=!0)}else _=!0;if(_){t.set(v,E);break}}});const o=new Set(t.keys()),u=i[0].split(" ").filter(S=>!o.has(S)),h=Array.from(t.entries()).sort((S,f)=>{let[v,E]=S,[_,T]=f;const w=e.indexOf(E),M=e.indexOf(T);return w-M}).map(S=>{let[f,v]=S;return f});return u.splice(3,0,...h),i[0]=u.join(" "),i.join(un.CRLF)+un.CRLF}highestPriorityVideoSendCodec(){const n=this.prioritizedSendVideoCodecCapabilities();return n.length>0?n[0]:void 0}prioritizedSendVideoCodecCapabilities(){const n=this.sdp,e=un.splitSections(n),t=un.findActiveCameraSection(e);if(t===-1)return[];const i=un.splitLines(e[t]),o=i[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(i,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(n,e){let t,i,o;for(const u of n){const h=/^a=rtpmap:([0-9]+)\s/.exec(u);if(h&&h[1]===e){const f=u.split(" ")[1].split("/");f.length>=2&&(t=f[0],i=f[1])}u.startsWith(`a=fmtp:${e} `)&&(o=u.split(" ")[1])}if(t!==void 0)return new g.default(t,{clockRate:parseInt(i),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const n=new Map,e=this.sdp,t=un.splitSections(e);return n.set("opus",un.findAudioPayloadType("opus",t)),n.set("red",un.findAudioPayloadType("red",t)),n}static findAudioPayloadType(n,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${n}\\/48000`,i=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const u=i.exec(o);if(u!==null)return Number(u[1])}return 0}withStartingVideoSendBitrate(n){const e=un.splitSections(this.sdp),t=un.findActiveCameraSection(e);if(t===-1)return this;const i=un.splitLines(e[t]),o=[];for(const h of i)if(/^a=fmtp:\d*/.test(h)){const S=h+`;x-google-start-bitrate=${n*1e3}`;o.push(S)}else o.push(h);e[t]=o.join(un.CRLF)+un.CRLF;const u=e.join("");return new un(u)}constructor(n){this.sdp=n}},"SDP");a.default=l,l.CRLF=`\r
`,l.rfc7587LowestBitrate=6e3,l.rfc7587HighestBitrate=51e4,l.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",l.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},9489740826:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SDPCandidateType=void 0;var c;(function(d){d.Host="host",d.ServerReflexive="srflx",d.PeerReflexive="prflx",d.Relay="relay"})(c=a.SDPCandidateType||(a.SDPCandidateType={})),a.default=c},6818892922:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"SDPMediaSection");a.default=c},8804723777:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(4136617125);let p=s(class Jr{equals(g){return g!==void 0&&this.codecName===g.codecName&&this.codecCapability.mimeType===g.codecCapability.mimeType&&this.codecCapability.clockRate===g.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===g.codecCapability.sdpFmtpLine}fmtpLineMatches(g,l){const r=this.codecCapability.sdpFmtpLine;if(!r)return!1;if(this.codecName==="H264"){const n=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=r.replace(n,"profile-level-id=$1");return g.replace(n,"profile-level-id=$1").startsWith(`a=fmtp:${l} ${e}`)}return g.startsWith(`a=fmtp:${l} ${r}`)}static vp8(){return new Jr("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new Jr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new Jr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new Jr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new Jr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new Jr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return Jr.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new Jr("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return Jr.vp9Profile0()}static av1Main(){return new Jr("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return Jr.av1Main()}static fromSignaled(g){switch(g){case d.SdkVideoCodecCapability.VP8:return Jr.vp8();case d.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return Jr.h264BaselineProfile();case d.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return Jr.h264ConstrainedBaselineProfile();case d.SdkVideoCodecCapability.H264_MAIN_PROFILE:return Jr.h264MainProfile();case d.SdkVideoCodecCapability.H264_HIGH_PROFILE:return Jr.h264HighProfile();case d.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return Jr.h264ConstrainedHighProfile();case d.SdkVideoCodecCapability.VP9_PROFILE_0:return Jr.vp9Profile0();case d.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return Jr.av1Main();default:return}}constructor(g,l){this.codecName=g,this.codecCapability=l}},"VideoCodecCapability");a.default=p},3475297719:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(9385915920);let p=s(class Gd{compress(g,l){if(l.length>0){const e=Math.min(l.length,Gd.MAX_DICTIONARY_SIZE);l=l.slice(0,e)}const r={memLevel:Gd.Z_MEM_LEVEL,dictionary:l};return d.deflateRaw(g,r)}decompress(g,l){if(l.length>0){const e=Math.min(l.length,Gd.MAX_DICTIONARY_SIZE);l=l.slice(0,e)}const r={to:"string",dictionary:l,chunkSize:4096};let n="";try{n=d.inflateRaw(g,r)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return n}constructor(g){this.logger=g}},"ZLIBTextCompressor");a.default=p,p.Z_MEM_LEVEL=9,p.MAX_DICTIONARY_SIZE=31744},6900744364:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(3795683579),p=c(7012117651),m=c(2092275410),g=c(583806999);let l=s(class{perform(n,e){const t=this.currentState;if(t===m.SessionStateControllerState.NotConnected&&n===d.SessionStateControllerAction.Connect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===d.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===d.SessionStateControllerAction.FinishConnecting)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Connected&&n===d.SessionStateControllerAction.Disconnect)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===d.SessionStateControllerAction.Reconnect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connected&&n===d.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===d.SessionStateControllerAction.Update)this.transition(m.SessionStateControllerState.Updating,n);else if(t===m.SessionStateControllerState.Updating&&n===d.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Updating&&n===d.SessionStateControllerAction.FinishUpdating)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Disconnecting&&n===d.SessionStateControllerAction.FinishDisconnecting)this.transition(m.SessionStateControllerState.NotConnected,n);else return this.canDefer(n)?(this.logger.info(`deferring transition from ${m.SessionStateControllerState[this.currentState]} with ${d.SessionStateControllerAction[n]}`),this.deferAction(n,e),g.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${m.SessionStateControllerState[this.currentState]} with ${d.SessionStateControllerAction[n]}`),g.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(i){return this.logger.error(`error during state ${m.SessionStateControllerState[this.currentState]} with action ${d.SessionStateControllerAction[n]}: ${i}`),this.logger.info(`rolling back transition to ${m.SessionStateControllerState[t]}`),this.currentState=t,g.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),g.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(n,e){this.logger.info(`transitioning from ${m.SessionStateControllerState[this.currentState]} to ${m.SessionStateControllerState[n]} with ${d.SessionStateControllerAction[e]}`),this.currentState=n}deferPriority(n){switch(n){case d.SessionStateControllerAction.Disconnect:return p.SessionStateControllerDeferPriority.VeryHigh;case d.SessionStateControllerAction.Fail:return p.SessionStateControllerDeferPriority.High;case d.SessionStateControllerAction.Reconnect:return p.SessionStateControllerDeferPriority.Medium;case d.SessionStateControllerAction.Update:return p.SessionStateControllerDeferPriority.Low;default:return p.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(n,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(n)||(this.deferredAction=n,this.deferredWork=e)}canDefer(n){return this.deferPriority(n)!==p.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===m.SessionStateControllerState.Connecting||this.currentState===m.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const n=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${d.SessionStateControllerAction[n]}`),this.perform(n,e)!==g.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${d.SessionStateControllerAction[n]} in state ${m.SessionStateControllerState[this.currentState]}`)}constructor(n){this.logger=n,this.currentState=m.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");a.default=l},3795683579:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SessionStateControllerAction=void 0;var c;(function(d){d[d.Connect=0]="Connect",d[d.FinishConnecting=1]="FinishConnecting",d[d.Update=2]="Update",d[d.FinishUpdating=3]="FinishUpdating",d[d.Reconnect=4]="Reconnect",d[d.Disconnect=5]="Disconnect",d[d.Fail=6]="Fail",d[d.FinishDisconnecting=7]="FinishDisconnecting"})(c=a.SessionStateControllerAction||(a.SessionStateControllerAction={})),a.default=c},7012117651:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SessionStateControllerDeferPriority=void 0;var c;(function(d){d[d.DoNotDefer=0]="DoNotDefer",d[d.Low=1]="Low",d[d.Medium=2]="Medium",d[d.High=3]="High",d[d.VeryHigh=4]="VeryHigh"})(c=a.SessionStateControllerDeferPriority||(a.SessionStateControllerDeferPriority={})),a.default=c},2092275410:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SessionStateControllerState=void 0;var c;(function(d){d[d.NotConnected=0]="NotConnected",d[d.Connecting=1]="Connecting",d[d.Connected=2]="Connected",d[d.Updating=3]="Updating",d[d.Disconnecting=4]="Disconnecting"})(c=a.SessionStateControllerState||(a.SessionStateControllerState={})),a.default=c},583806999:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SessionStateControllerTransitionResult=void 0;var c;(function(d){d[d.Transitioned=0]="Transitioned",d[d.NoTransitionAvailable=1]="NoTransitionAvailable",d[d.DeferredTransition=2]="DeferredTransition",d[d.TransitionFailed=3]="TransitionFailed"})(c=a.SessionStateControllerTransitionResult||(a.SessionStateControllerTransitionResult={})),a.default=c},7570945794:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5546774952)),m=d(c(5824864644)),g=c(4136617125),l=c(5685319565),r=d(c(6885109343)),n=d(c(4829581265)),e=d(c(5638612424)),t=c(5393388022),i=d(c(1578897375)),o=d(c(7969706599));let u=s(class Fc{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const f=g.SdkSignalFrame.create();return f.type=g.SdkSignalFrame.Type.PING_PONG,f.pingPong=S,this.sendMessage(f),f.timestampMs}join(S){this.logger.info("sending join");const f=g.SdkJoinFrame.create();f.protocolVersion=2,f.flags=g.SdkJoinFlags.HAS_STREAM_UPDATE;const v=new p.default,E={platformName:v.name(),platformVersion:v.version(),clientSource:r.default.sdkName,chimeSdkVersion:r.default.sdkVersion,clientUtcOffset:l.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:T,appVersion:w}=S.applicationMetadata;E.appName=T,E.appVersion=w}f.clientDetails=g.SdkClientDetails.create(E),f.audioSessionId=this.audioSessionId,f.wantsCompressedSdp=Fc.CLIENT_SUPPORTS_COMPRESSION,f.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,f.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),f.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),f.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const _=g.SdkSignalFrame.create();_.type=g.SdkSignalFrame.Type.JOIN,_.join=f,this.sendMessage(_)}subscribe(S){const f=g.SdkSubscribeFrame.create();if(f.sendStreams=[],f.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(f.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(f.audioCheckin=S.audioCheckin,f.audioHost=S.audioHost,f.audioMuted=S.audioMuted,!S.audioCheckin)){const E=g.SdkStreamDescriptor.create();E.mediaType=g.SdkStreamMediaType.AUDIO,E.trackLabel="AmazonChimeExpressAudio",E.attendeeId=S.attendeeId,E.streamId=1,E.groupId=1,E.framerate=15,E.maxBitrateKbps=600,E.avgBitrateBps=4e5,f.sendStreams.push(E)}if(f.compressedSdpOffer=S.compressedSdpOffer,f.duplex=g.SdkStreamServiceType.RX,S.localVideoEnabled){f.duplex=g.SdkStreamServiceType.DUPLEX;for(let E=0;E<S.videoStreamDescriptions.length;E++){const _=S.videoStreamDescriptions[E].clone();_.attendeeId=S.attendeeId,f.sendStreams.push(_.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(f.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const v=g.SdkSignalFrame.create();v.type=g.SdkSignalFrame.Type.SUBSCRIBE,v.sub=f,this.sendMessage(v)}remoteVideoUpdate(S,f){const v=g.SdkRemoteVideoUpdateFrame.create();v.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),v.removedVideoSubscriptionMids=f;const E=g.SdkSignalFrame.create();E.type=g.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,E.remoteVideoUpdate=v,this.sendMessage(E)}convertSignalingClientVideoSubscriptionConfiguration(S){const f=new g.SdkVideoSubscriptionConfiguration;switch(f.mid=S.mid,f.attendeeId=S.attendeeId,f.streamId=S.streamId,f.groupId=S.groupId,f.priority=S.priority,f.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case n.default.Balanced:f.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.BALANCED;break;case n.default.MaintainFramerate:f.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case n.default.MaintainResolution:f.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:f.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.BALANCED}return f}leave(){const S=g.SdkSignalFrame.create();S.type=g.SdkSignalFrame.Type.LEAVE,S.leave=g.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.CLIENT_METRIC,f.clientMetric=S,this.sendMessage(f)}sendDataMessage(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.DATA_MESSAGE,f.dataMessage=S,this.sendMessage(f)}closeConnection(){var S,f;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new i.default(this,o.default.WebSocketClosing,null));const v=new m.default(Fc.CLOSE_EVENT_TIMEOUT_MS),E=s(_=>{var T,w;(w=(T=this.webSocket).removeEventListener)===null||w===void 0||w.call(T,"close",E),v.stop(),this.closeEventHandler(_)},"handler");(f=(S=this.webSocket).removeEventListener)===null||f===void 0||f.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",E),v.start(()=>{E(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.AUDIO_CONTROL;const v=g.SdkAudioControlFrame.create();v.muted=S,f.audioControl=v,this.sendMessage(f)}pause(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.PAUSE,f.pause=g.SdkPauseResumeFrame.create(),f.pause.streamIds=S,this.sendMessage(f)}resume(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.RESUME,f.pause=g.SdkPauseResumeFrame.create(),f.pause.streamIds=S,this.sendMessage(f)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const f=this.prependWithFrameTypeRTC(g.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(f)){this.sendEvent(new i.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new i.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new i.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let f;try{f=g.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new i.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(f)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new i.default(this,o.default.ReceivedSignalFrame,f)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(f)}`)}stripFrameTypeRTC(S){const f=S[0];return f!==Fc.FRAME_TYPE_RTC&&f!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${f}`),S.slice(1)}prependWithFrameTypeRTC(S){const f=new Uint8Array(S.length+1);return f[0]=Fc.FRAME_TYPE_RTC,f.set(S,1),f}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new i.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const f of this.observerQueue)f.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new i.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new i.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new i.default(this,o.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new i.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=c.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=c.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return l.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const f=g.SdkMeetingSessionCredentials.create();f.attendeeId=S.attendeeId,f.externalUserId=S.externalUserId,f.joinToken=S.joinToken;const v=g.SdkPrimaryMeetingJoinFrame.create();v.credentials=f;const E=g.SdkSignalFrame.create();E.type=g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,E.primaryMeetingJoin=v,this.sendMessage(E)}demoteFromPrimaryMeeting(){const S=g.SdkPrimaryMeetingLeaveFrame.create(),f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,f.primaryMeetingLeave=S,this.sendMessage(f)}constructor(S,f){this.webSocket=S,this.logger=f,this.unloadHandler=null,this.closeEventHandler=v=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new i.default(this,o.default.WebSocketClosed,null,v.code,v.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");a.default=u,u.FRAME_TYPE_RTC=5,u.CLOSE_EVENT_TIMEOUT_MS=2e3,u.CLIENT_SUPPORTS_COMPRESSION=!0},5393388022:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.convertServerSideNetworkAdaptionEnumToSignaled=a.convertServerSideNetworkAdaptionEnumFromSignaled=a.serverSideNetworkAdaptionIsNoneOrDefault=a.ServerSideNetworkAdaption=void 0;const d=c(4136617125);var p;(function(r){r[r.Default=0]="Default",r[r.None=1]="None",r[r.BandwidthProbing=2]="BandwidthProbing",r[r.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(p=a.ServerSideNetworkAdaption||(a.ServerSideNetworkAdaption={})),a.default=p;function m(r){return r===p.None||r===p.Default}s(m,"serverSideNetworkAdaptionIsNoneOrDefault"),a.serverSideNetworkAdaptionIsNoneOrDefault=m;function g(r){switch(r){case d.SdkServerSideNetworkAdaption.DEFAULT:return p.Default;case d.SdkServerSideNetworkAdaption.NONE:return p.None;case d.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return p.BandwidthProbing;case d.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return p.BandwidthProbingAndRemoteVideoQualityAdaption}}s(g,"convertServerSideNetworkAdaptionEnumFromSignaled"),a.convertServerSideNetworkAdaptionEnumFromSignaled=g;function l(r){switch(r){case p.Default:return d.SdkServerSideNetworkAdaption.DEFAULT;case p.None:return d.SdkServerSideNetworkAdaption.NONE;case p.BandwidthProbing:return d.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case p.BandwidthProbingAndRemoteVideoQualityAdaption:return d.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}s(l,"convertServerSideNetworkAdaptionEnumToSignaled"),a.convertServerSideNetworkAdaptionEnumToSignaled=l},7263318766:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(p,m){this.signalingURL=p,this.joinToken=m}},"SignalingClientConnectionRequest");a.default=c},1578897375:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(7969706599));let m=s(class{isConnectionTerminated(){switch(this.type){case p.default.WebSocketFailed:case p.default.WebSocketError:case p.default.WebSocketClosing:case p.default.WebSocketClosed:return!0;default:return!1}}constructor(l,r,n,e,t){this.client=l,this.type=r,this.message=n,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");a.default=m},7969706599:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SignalingClientEventType=void 0;var c;(function(d){d[d.WebSocketConnecting=0]="WebSocketConnecting",d[d.WebSocketOpen=1]="WebSocketOpen",d[d.WebSocketError=2]="WebSocketError",d[d.WebSocketClosing=3]="WebSocketClosing",d[d.WebSocketClosed=4]="WebSocketClosed",d[d.WebSocketFailed=5]="WebSocketFailed",d[d.WebSocketMessage=6]="WebSocketMessage",d[d.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",d[d.WebSocketSentMessage=8]="WebSocketSentMessage",d[d.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",d[d.ReceivedSignalFrame=10]="ReceivedSignalFrame",d[d.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(c=a.SignalingClientEventType||(a.SignalingClientEventType={})),a.default=c},3867485289:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5393388022));let m=s(class{constructor(l){this.applicationMetadata=l,this.serverSideNetworkAdaption=p.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");a.default=m},3735795291:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(p,m,g,l,r,n,e,t,i,o){this.attendeeId=p,this.sdpOffer=m,this.audioHost=g,this.audioMuted=l,this.audioCheckin=r,this.receiveStreamIds=n,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=i,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");a.default=c},4804743313:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{equals(p){return p!==void 0&&this.mid===p.mid&&this.attendeeId===p.attendeeId&&this.streamId===p.streamId&&this.groupId===p.groupId&&this.priority===p.priority&&this.targetBitrateKbps===p.targetBitrateKbps&&this.qualityAdaptationPreference===p.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");a.default=c},4136617125:(F,a,c)=>{"use strict";var d=c(8203499834),p=d.Reader,m=d.Writer,g=d.util,l=d.roots.default||(d.roots.default={});l.SdkSignalFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSignalFrame"),r.prototype.timestampMs=g.Long?g.Long.fromBits(0,0,!0):0,r.prototype.type=1,r.prototype.error=null,r.prototype.join=null,r.prototype.joinack=null,r.prototype.sub=null,r.prototype.suback=null,r.prototype.index=null,r.prototype.pause=null,r.prototype.leave=null,r.prototype.leaveAck=null,r.prototype.bitrates=null,r.prototype.audioControl=null,r.prototype.audioMetadata=null,r.prototype.audioStreamIdInfo=null,r.prototype.pingPong=null,r.prototype.audioStatus=null,r.prototype.clientMetric=null,r.prototype.dataMessage=null,r.prototype.remoteVideoUpdate=null,r.prototype.primaryMeetingJoin=null,r.prototype.primaryMeetingJoinAck=null,r.prototype.primaryMeetingLeave=null,r.prototype.notification=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&l.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&l.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&l.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&l.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&l.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&l.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&l.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&l.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&l.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&l.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&l.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&l.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&l.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&l.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&l.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&l.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&l.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&l.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&l.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&l.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&l.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&l.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkSignalFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=l.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=l.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=l.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=l.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=l.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=l.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=l.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=l.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=l.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=l.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=l.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=l.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=l.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=l.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=l.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=l.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=l.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=l.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=l.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=l.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=l.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=l.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(u&7);break}}if(!o.hasOwnProperty("timestampMs"))throw g.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw g.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!g.isInteger(e.timestampMs)&&!(e.timestampMs&&g.isInteger(e.timestampMs.low)&&g.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=l.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=l.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=l.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=l.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=l.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=l.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=l.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=l.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=l.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=l.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=l.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=l.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=l.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=l.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=l.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=l.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=l.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=l.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=l.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=l.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=l.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=l.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkSignalFrame)return e;var t=new l.SdkSignalFrame;switch(e.timestampMs!=null&&(g.Long?(t.timestampMs=g.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new g.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=l.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=l.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=l.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=l.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=l.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=l.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=l.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=l.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=l.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=l.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=l.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=l.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=l.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=l.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=l.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=l.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=l.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=l.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=l.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=l.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=l.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=l.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(g.Long){var o=new g.Long(0,0,!0);i.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.timestampMs=t.longs===String?"0":0;i.type=t.enums===String?"JOIN":1,i.error=null,i.join=null,i.joinack=null,i.sub=null,i.suback=null,i.index=null,i.pause=null,i.leave=null,i.leaveAck=null,i.bitrates=null,i.audioControl=null,i.audioMetadata=null,i.audioStreamIdInfo=null,i.pingPong=null,i.audioStatus=null,i.clientMetric=null,i.dataMessage=null,i.remoteVideoUpdate=null,i.primaryMeetingJoin=null,i.primaryMeetingJoinAck=null,i.primaryMeetingLeave=null,i.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?i.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:i.timestampMs=t.longs===String?g.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new g.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkSignalFrame.Type[e.type]===void 0?e.type:l.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(i.error=l.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(i.join=l.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(i.joinack=l.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(i.sub=l.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(i.suback=l.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(i.index=l.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(i.pause=l.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(i.leave=l.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(i.leaveAck=l.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(i.bitrates=l.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(i.audioControl=l.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(i.audioMetadata=l.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(i.audioStreamIdInfo=l.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(i.pingPong=l.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=l.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(i.clientMetric=l.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(i.dataMessage=l.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(i.remoteVideoUpdate=l.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(i.primaryMeetingJoin=l.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(i.primaryMeetingJoinAck=l.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(i.primaryMeetingLeave=l.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(i.notification=l.SdkNotificationFrame.toObject(e.notification,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="JOIN"]=1,e[n[2]="JOIN_ACK"]=2,e[n[3]="SUBSCRIBE"]=3,e[n[4]="SUBSCRIBE_ACK"]=4,e[n[5]="INDEX"]=5,e[n[7]="PAUSE"]=7,e[n[8]="RESUME"]=8,e[n[9]="LEAVE"]=9,e[n[10]="LEAVE_ACK"]=10,e[n[13]="BITRATES"]=13,e[n[16]="AUDIO_CONTROL"]=16,e[n[17]="AUDIO_METADATA"]=17,e[n[18]="AUDIO_STREAM_ID_INFO"]=18,e[n[19]="PING_PONG"]=19,e[n[20]="AUDIO_STATUS"]=20,e[n[21]="CLIENT_METRIC"]=21,e[n[22]="DATA_MESSAGE"]=22,e[n[24]="REMOTE_VIDEO_UPDATE"]=24,e[n[25]="PRIMARY_MEETING_JOIN"]=25,e[n[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[n[27]="PRIMARY_MEETING_LEAVE"]=27,e[n[34]="NOTIFICATION"]=34,e}(),r}(),l.SdkErrorFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkErrorFrame"),r.prototype.status=0,r.prototype.description="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkErrorFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!g.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!g.isString(e.description)?"description: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkErrorFrame)return e;var t=new l.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.status=0,i.description=""),e.status!=null&&e.hasOwnProperty("status")&&(i.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(i.description=e.description),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),r}(),l.SdkJoinFlags=function(){var r={},n=Object.create(r);return n[r[2]="HAS_STREAM_UPDATE"]=2,n[r[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,n[r[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,n}(),l.SdkClientDetails=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientDetails"),r.prototype.appName="",r.prototype.appVersion="",r.prototype.deviceModel="",r.prototype.deviceMake="",r.prototype.platformName="",r.prototype.platformVersion="",r.prototype.clientSource="",r.prototype.chimeSdkVersion="",r.prototype.clientUtcOffset="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkClientDetails;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!g.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!g.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!g.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!g.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!g.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!g.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!g.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!g.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!g.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkClientDetails)return e;var t=new l.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.appName="",i.appVersion="",i.deviceModel="",i.deviceMake="",i.platformName="",i.platformVersion="",i.clientSource="",i.chimeSdkVersion="",i.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(i.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(i.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(i.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(i.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(i.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(i.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(i.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(i.clientUtcOffset=e.clientUtcOffset),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),r}(),l.SdkServerSideNetworkAdaption=function(){var r={},n=Object.create(r);return n[r[1]="DEFAULT"]=1,n[r[2]="NONE"]=2,n[r[3]="BANDWIDTH_PROBING"]=3,n[r[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,n}(),l.SdkJoinFrame=function(){function r(n){if(this.supportedServerSideNetworkAdaptions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinFrame"),r.prototype.protocolVersion=2,r.prototype.maxNumOfVideos=0,r.prototype.flags=0,r.prototype.clientDetails=null,r.prototype.audioSessionId=g.Long?g.Long.fromBits(0,0,!0):0,r.prototype.wantsCompressedSdp=!1,r.prototype.serverSideNetworkAdaption=1,r.prototype.supportedServerSideNetworkAdaptions=g.emptyArray,r.prototype.wantsAllTemporalLayersInIndex=!1,r.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&l.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[i]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkJoinFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=l.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!g.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!g.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=l.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!g.isInteger(e.audioSessionId)&&!(e.audioSessionId&&g.isInteger(e.audioSessionId.low)&&g.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkJoinFrame)return e;var t=new l.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=l.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(g.Long?(t.audioSessionId=g.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new g.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:if(typeof e.supportedServerSideNetworkAdaptions[i]=="number"){t.supportedServerSideNetworkAdaptions[i]=e.supportedServerSideNetworkAdaptions[i];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[i]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[i]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[i]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[i]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.supportedServerSideNetworkAdaptions=[]),t.defaults){if(i.protocolVersion=2,i.maxNumOfVideos=0,i.flags=0,i.clientDetails=null,g.Long){var o=new g.Long(0,0,!0);i.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.audioSessionId=t.longs===String?"0":0;i.wantsCompressedSdp=!1,i.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,i.wantsAllTemporalLayersInIndex=!1,i.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(i.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(i.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(i.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(i.clientDetails=l.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?i.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:i.audioSessionId=t.longs===String?g.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new g.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(i.serverSideNetworkAdaption=t.enums===String?l.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:l.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){i.supportedServerSideNetworkAdaptions=[];for(var u=0;u<e.supportedServerSideNetworkAdaptions.length;++u)i.supportedServerSideNetworkAdaptions[u]=t.enums===String?l.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[u]]===void 0?e.supportedServerSideNetworkAdaptions[u]:l.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[u]]:e.supportedServerSideNetworkAdaptions[u]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(i.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(i.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),r}(),l.SdkJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinAckFrame"),r.prototype.turnCredentials=null,r.prototype.videoSubscriptionLimit=0,r.prototype.wantsCompressedSdp=!1,r.prototype.defaultServerSideNetworkAdaption=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&l.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkJoinAckFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.turnCredentials=l.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=l.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!g.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkJoinAckFrame)return e;var t=new l.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=l.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.turnCredentials=null,i.videoSubscriptionLimit=0,i.wantsCompressedSdp=!1,i.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(i.turnCredentials=l.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(i.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(i.defaultServerSideNetworkAdaption=t.enums===String?l.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:l.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),r}(),l.SdkLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkLeaveFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof l.SdkLeaveFrame?e:new l.SdkLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),r}(),l.SdkLeaveAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkLeaveAckFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof l.SdkLeaveAckFrame?e:new l.SdkLeaveAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),r}(),l.SdkStreamServiceType=function(){var r={},n=Object.create(r);return n[r[1]="RX"]=1,n[r[2]="TX"]=2,n[r[3]="DUPLEX"]=3,n}(),l.SdkStreamMediaType=function(){var r={},n=Object.create(r);return n[r[1]="AUDIO"]=1,n[r[2]="VIDEO"]=2,n}(),l.SdkSubscribeFrame=function(){function r(n){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeFrame"),r.prototype.duplex=1,r.prototype.sendStreams=g.emptyArray,r.prototype.receiveStreamIds=g.emptyArray,r.prototype.sdpOffer="",r.prototype.audioHost="",r.prototype.audioCheckin=!1,r.prototype.audioMuted=!1,r.prototype.compressedSdpOffer=g.newBuffer([]),r.prototype.videoSubscriptionConfiguration=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var i=0;i<e.sendStreams.length;++i)l.SdkStreamDescriptor.encode(e.sendStreams[i],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var i=0;i<e.receiveStreamIds.length;++i)t.uint32(24).uint32(e.receiveStreamIds[i]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var i=0;i<e.videoSubscriptionConfiguration.length;++i)l.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[i],t.uint32(74).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkSubscribeFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(l.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(l.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var i=l.SdkStreamDescriptor.verify(e.sendStreams[t]);if(i)return"sendStreams."+i}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!g.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!g.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!g.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||g.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var i=l.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(i)return"videoSubscriptionConfiguration."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkSubscribeFrame)return e;var t=new l.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i){if(typeof e.sendStreams[i]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[i]=l.SdkStreamDescriptor.fromObject(e.sendStreams[i])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var i=0;i<e.receiveStreamIds.length;++i)t.receiveStreamIds[i]=e.receiveStreamIds[i]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?g.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=g.newBuffer(g.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var i=0;i<e.videoSubscriptionConfiguration.length;++i){if(typeof e.videoSubscriptionConfiguration[i]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[i]=l.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sendStreams=[],i.receiveStreamIds=[],i.videoSubscriptionConfiguration=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpOffer="",i.audioHost="",i.audioCheckin=!1,i.audioMuted=!1,t.bytes===String?i.compressedSdpOffer="":(i.compressedSdpOffer=[],t.bytes!==Array&&(i.compressedSdpOffer=g.newBuffer(i.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?l.SdkStreamServiceType[e.duplex]===void 0?e.duplex:l.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){i.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)i.sendStreams[o]=l.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){i.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)i.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(i.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(i.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(i.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(i.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(i.compressedSdpOffer=t.bytes===String?g.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){i.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)i.videoSubscriptionConfiguration[o]=l.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),r}(),l.SdkSubscribeAckFrame=function(){function r(n){if(this.allocations=[],this.tracks=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeAckFrame"),r.prototype.duplex=1,r.prototype.allocations=g.emptyArray,r.prototype.sdpAnswer="",r.prototype.tracks=g.emptyArray,r.prototype.compressedSdpAnswer=g.newBuffer([]),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var i=0;i<e.allocations.length;++i)l.SdkStreamAllocation.encode(e.allocations[i],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var i=0;i<e.tracks.length;++i)l.SdkTrackMapping.encode(e.tracks[i],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkSubscribeAckFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(l.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(l.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var i=l.SdkStreamAllocation.verify(e.allocations[t]);if(i)return"allocations."+i}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!g.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var i=l.SdkTrackMapping.verify(e.tracks[t]);if(i)return"tracks."+i}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||g.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkSubscribeAckFrame)return e;var t=new l.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var i=0;i<e.allocations.length;++i){if(typeof e.allocations[i]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[i]=l.SdkStreamAllocation.fromObject(e.allocations[i])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var i=0;i<e.tracks.length;++i){if(typeof e.tracks[i]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[i]=l.SdkTrackMapping.fromObject(e.tracks[i])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?g.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=g.newBuffer(g.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.allocations=[],i.tracks=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpAnswer="",t.bytes===String?i.compressedSdpAnswer="":(i.compressedSdpAnswer=[],t.bytes!==Array&&(i.compressedSdpAnswer=g.newBuffer(i.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?l.SdkStreamServiceType[e.duplex]===void 0?e.duplex:l.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){i.allocations=[];for(var o=0;o<e.allocations.length;++o)i.allocations[o]=l.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(i.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){i.tracks=[];for(var o=0;o<e.tracks.length;++o)i.tracks[o]=l.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(i.compressedSdpAnswer=t.bytes===String?g.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),r}(),l.SdkIndexFrame=function(){function r(n){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkIndexFrame"),r.prototype.atCapacity=!1,r.prototype.sources=g.emptyArray,r.prototype.pausedAtSourceIds=g.emptyArray,r.prototype.numParticipants=0,r.prototype.supportedReceiveCodecIntersection=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var i=0;i<e.sources.length;++i)l.SdkStreamDescriptor.encode(e.sources[i],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var i=0;i<e.pausedAtSourceIds.length;++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)t.uint32(40).int32(e.supportedReceiveCodecIntersection[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkIndexFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(l.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var i=l.SdkStreamDescriptor.verify(e.sources[t]);if(i)return"sources."+i}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!g.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!g.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkIndexFrame)return e;var t=new l.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var i=0;i<e.sources.length;++i){if(typeof e.sources[i]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[i]=l.SdkStreamDescriptor.fromObject(e.sources[i])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var i=0;i<e.pausedAtSourceIds.length;++i)t.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)switch(e.supportedReceiveCodecIntersection[i]){default:if(typeof e.supportedReceiveCodecIntersection[i]=="number"){t.supportedReceiveCodecIntersection[i]=e.supportedReceiveCodecIntersection[i];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[i]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[i]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[i]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[i]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[i]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[i]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[i]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[i]=11;break}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sources=[],i.pausedAtSourceIds=[],i.supportedReceiveCodecIntersection=[]),t.defaults&&(i.atCapacity=!1,i.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(i.atCapacity=e.atCapacity),e.sources&&e.sources.length){i.sources=[];for(var o=0;o<e.sources.length;++o)i.sources[o]=l.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){i.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)i.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(i.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){i.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)i.supportedReceiveCodecIntersection[o]=t.enums===String?l.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:l.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),r}(),l.SdkPauseResumeFrame=function(){function r(n){if(this.streamIds=[],this.groupIds=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPauseResumeFrame"),r.prototype.streamIds=g.emptyArray,r.prototype.groupIds=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamIds!=null&&e.streamIds.length)for(var i=0;i<e.streamIds.length;++i)t.uint32(8).uint32(e.streamIds[i]);if(e.groupIds!=null&&e.groupIds.length)for(var i=0;i<e.groupIds.length;++i)t.uint32(16).uint32(e.groupIds[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPauseResumeFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!g.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!g.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkPauseResumeFrame)return e;var t=new l.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var i=0;i<e.streamIds.length;++i)t.streamIds[i]=e.streamIds[i]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var i=0;i<e.groupIds.length;++i)t.groupIds[i]=e.groupIds[i]>>>0}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streamIds=[],i.groupIds=[]),e.streamIds&&e.streamIds.length){i.streamIds=[];for(var o=0;o<e.streamIds.length;++o)i.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){i.groupIds=[];for(var o=0;o<e.groupIds.length;++o)i.groupIds[o]=e.groupIds[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),r}(),l.SdkBitrateFrame=function(){function r(n){if(this.bitrates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrateFrame"),r.prototype.bitrates=g.emptyArray,r.prototype.serverAvailableOutgoingBitrate=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.bitrates!=null&&e.bitrates.length)for(var i=0;i<e.bitrates.length;++i)l.SdkBitrate.encode(e.bitrates[i],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkBitrateFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(l.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var i=l.SdkBitrate.verify(e.bitrates[t]);if(i)return"bitrates."+i}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!g.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkBitrateFrame)return e;var t=new l.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var i=0;i<e.bitrates.length;++i){if(typeof e.bitrates[i]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[i]=l.SdkBitrate.fromObject(e.bitrates[i])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.bitrates=[]),t.defaults&&(i.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){i.bitrates=[];for(var o=0;o<e.bitrates.length;++o)i.bitrates[o]=l.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(i.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),r}(),l.SdkStreamDescriptor=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDescriptor"),r.prototype.streamId=0,r.prototype.framerate=0,r.prototype.maxBitrateKbps=0,r.prototype.trackLabel="",r.prototype.groupId=0,r.prototype.avgBitrateBps=0,r.prototype.attendeeId="",r.prototype.mediaType=1,r.prototype.externalUserId="",r.prototype.width=0,r.prototype.height=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkStreamDescriptor;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!g.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!g.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!g.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!g.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!g.isInteger(e.height)?"height: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkStreamDescriptor)return e;var t=new l.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.framerate=0,i.maxBitrateKbps=0,i.trackLabel="",i.groupId=0,i.avgBitrateBps=0,i.attendeeId="",i.mediaType=t.enums===String?"AUDIO":1,i.externalUserId="",i.width=0,i.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(i.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(i.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?l.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:l.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(i.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(i.height=e.height),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),r}(),l.SdkStreamAllocation=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamAllocation"),r.prototype.trackLabel="",r.prototype.streamId=0,r.prototype.groupId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkStreamAllocation;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkStreamAllocation)return e;var t=new l.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.trackLabel="",i.streamId=0,i.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),r}(),l.SdkTrackMapping=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTrackMapping"),r.prototype.streamId=0,r.prototype.ssrc=0,r.prototype.trackLabel="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTrackMapping;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!g.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTrackMapping)return e;var t=new l.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.ssrc=0,i.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(i.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),r}(),l.SdkBitrate=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrate"),r.prototype.sourceStreamId=0,r.prototype.avgBitrateBps=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkBitrate;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!g.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!g.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkBitrate)return e;var t=new l.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.sourceStreamId=0,i.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(i.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),r}(),l.SdkAudioControlFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioControlFrame"),r.prototype.muted=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioControlFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioControlFrame)return e;var t=new l.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),r}(),l.SdkAudioMetadataFrame=function(){function r(n){if(this.attendeeStates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioMetadataFrame"),r.prototype.attendeeStates=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var i=0;i<e.attendeeStates.length;++i)l.SdkAudioAttendeeState.encode(e.attendeeStates[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioMetadataFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(l.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var i=l.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(i)return"attendeeStates."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioMetadataFrame)return e;var t=new l.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i){if(typeof e.attendeeStates[i]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[i]=l.SdkAudioAttendeeState.fromObject(e.attendeeStates[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){i.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)i.attendeeStates[o]=l.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),r}(),l.SdkAudioAttendeeState=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioAttendeeState"),r.prototype.audioStreamId=0,r.prototype.volume=0,r.prototype.muted=!1,r.prototype.signalStrength=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioAttendeeState;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!g.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!g.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!g.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioAttendeeState)return e;var t=new l.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.volume=0,i.muted=!1,i.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(i.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(i.signalStrength=e.signalStrength),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),r}(),l.SdkAudioStreamIdInfoFrame=function(){function r(n){if(this.streams=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfoFrame"),r.prototype.streams=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streams!=null&&e.streams.length)for(var i=0;i<e.streams.length;++i)l.SdkAudioStreamIdInfo.encode(e.streams[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioStreamIdInfoFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(l.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var i=l.SdkAudioStreamIdInfo.verify(e.streams[t]);if(i)return"streams."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioStreamIdInfoFrame)return e;var t=new l.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var i=0;i<e.streams.length;++i){if(typeof e.streams[i]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[i]=l.SdkAudioStreamIdInfo.fromObject(e.streams[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streams=[]),e.streams&&e.streams.length){i.streams=[];for(var o=0;o<e.streams.length;++o)i.streams[o]=l.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),r}(),l.SdkAudioStreamIdInfo=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfo"),r.prototype.audioStreamId=0,r.prototype.attendeeId="",r.prototype.muted=!1,r.prototype.externalUserId="",r.prototype.dropped=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioStreamIdInfo;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!g.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioStreamIdInfo)return e;var t=new l.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.attendeeId="",i.muted=!1,i.externalUserId="",i.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(i.dropped=e.dropped),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),r}(),l.SdkPingPongType=function(){var r={},n=Object.create(r);return n[r[1]="PING"]=1,n[r[2]="PONG"]=2,n}(),l.SdkPingPongFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPingPongFrame"),r.prototype.type=1,r.prototype.pingId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPingPongFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(u&7);break}}if(!o.hasOwnProperty("type"))throw g.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw g.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return g.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkPingPongFrame)return e;var t=new l.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"PING":1,i.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkPingPongType[e.type]===void 0?e.type:l.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(i.pingId=e.pingId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),r}(),l.SdkAudioStatusFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStatusFrame"),r.prototype.audioStatus=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioStatusFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!g.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioStatusFrame)return e;var t=new l.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=e.audioStatus),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),r}(),l.SdkMetric=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMetric"),r.prototype.type=1,r.prototype.value=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkMetric;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkMetric)return e;var t=new l.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,i.value=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkMetric.Type[e.type]===void 0?e.type:l.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=t.json&&!isFinite(e.value)?String(e.value):e.value),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[n[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[n[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[n[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[n[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[n[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[n[7]="STUN_RTT_MS"]=7,e[n[8]="SOCKET_DISCARDED_PPS"]=8,e[n[9]="RTC_MIC_JITTER_MS"]=9,e[n[10]="RTC_MIC_PPS"]=10,e[n[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[n[12]="RTC_MIC_BITRATE"]=12,e[n[13]="RTC_MIC_RTT_MS"]=13,e[n[14]="RTC_SPK_PPS"]=14,e[n[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[n[16]="RTC_SPK_JITTER_MS"]=16,e[n[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[n[18]="RTC_SPK_BITRATE"]=18,e[n[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[n[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[n[21]="VIDEO_SENT_RTT_MS"]=21,e[n[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[n[23]="VIDEO_NACKS_RECEIVED"]=23,e[n[24]="VIDEO_PLIS_RECEIVED"]=24,e[n[25]="VIDEO_ENCODE_MS"]=25,e[n[26]="VIDEO_INPUT_FPS"]=26,e[n[27]="VIDEO_ENCODE_FPS"]=27,e[n[28]="VIDEO_SENT_FPS"]=28,e[n[29]="VIDEO_FIRS_RECEIVED"]=29,e[n[30]="VIDEO_SENT_PPS"]=30,e[n[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[n[32]="VIDEO_SENT_BITRATE"]=32,e[n[33]="VIDEO_DROPPED_FPS"]=33,e[n[34]="VIDEO_TARGET_DELAY_MS"]=34,e[n[35]="VIDEO_DECODE_MS"]=35,e[n[36]="VIDEO_OUTPUT_FPS"]=36,e[n[37]="VIDEO_RECEIVED_PPS"]=37,e[n[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[n[39]="VIDEO_RENDER_DELAY_MS"]=39,e[n[40]="VIDEO_RECEIVED_FPS"]=40,e[n[41]="VIDEO_DECODE_FPS"]=41,e[n[42]="VIDEO_NACKS_SENT"]=42,e[n[43]="VIDEO_FIRS_SENT"]=43,e[n[44]="VIDEO_RECEIVED_BITRATE"]=44,e[n[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[n[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[n[47]="VIDEO_DISCARDED_PPS"]=47,e[n[48]="VIDEO_PLIS_SENT"]=48,e[n[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[n[64]="VIDEO_ENCODE_HEIGHT"]=64,e[n[66]="VIDEO_SENT_QP_SUM"]=66,e[n[69]="VIDEO_DECODE_HEIGHT"]=69,e[n[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[n[86]="VIDEO_ENCODE_WIDTH"]=86,e[n[87]="VIDEO_DECODE_WIDTH"]=87,e[n[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[n[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[n[90]="VIDEO_FREEZE_COUNT"]=90,e[n[91]="VIDEO_FREEZE_DURATION"]=91,e[n[92]="VIDEO_PAUSE_COUNT"]=92,e[n[93]="VIDEO_PAUSE_DURATION"]=93,e[n[94]="VIDEO_QUALITY_REASON"]=94,e[n[95]="VIDEO_PROCESSING_TIME"]=95,e[n[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[n[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[n[98]="RTC_SPK_TOTAL_LOST"]=98,e[n[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[n[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[n[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[n[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[n[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[n[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e}(),r}(),l.SdkStreamMetricFrame=function(){function r(n){if(this.metrics=[],this.dimensions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamMetricFrame"),r.prototype.streamId=0,r.prototype.groupId=0,r.prototype.metrics=g.emptyArray,r.prototype.dimensions=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var i=0;i<e.metrics.length;++i)l.SdkMetric.encode(e.metrics[i],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var i=0;i<e.dimensions.length;++i)l.SdkStreamDimension.encode(e.dimensions[i],t.uint32(50).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkStreamMetricFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(l.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(l.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var i=l.SdkMetric.verify(e.metrics[t]);if(i)return"metrics."+i}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var i=l.SdkStreamDimension.verify(e.dimensions[t]);if(i)return"dimensions."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkStreamMetricFrame)return e;var t=new l.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var i=0;i<e.metrics.length;++i){if(typeof e.metrics[i]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[i]=l.SdkMetric.fromObject(e.metrics[i])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var i=0;i<e.dimensions.length;++i){if(typeof e.dimensions[i]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[i]=l.SdkStreamDimension.fromObject(e.dimensions[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.metrics=[],i.dimensions=[]),t.defaults&&(i.streamId=0,i.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.metrics&&e.metrics.length){i.metrics=[];for(var o=0;o<e.metrics.length;++o)i.metrics[o]=l.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){i.dimensions=[];for(var o=0;o<e.dimensions.length;++o)i.dimensions[o]=l.SdkStreamDimension.toObject(e.dimensions[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),r}(),l.SdkClientMetricFrame=function(){function r(n){if(this.globalMetrics=[],this.streamMetricFrames=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientMetricFrame"),r.prototype.globalMetrics=g.emptyArray,r.prototype.streamMetricFrames=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var i=0;i<e.globalMetrics.length;++i)l.SdkMetric.encode(e.globalMetrics[i],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var i=0;i<e.streamMetricFrames.length;++i)l.SdkStreamMetricFrame.encode(e.streamMetricFrames[i],t.uint32(18).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkClientMetricFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(l.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(l.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var i=l.SdkMetric.verify(e.globalMetrics[t]);if(i)return"globalMetrics."+i}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var i=l.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(i)return"streamMetricFrames."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkClientMetricFrame)return e;var t=new l.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i){if(typeof e.globalMetrics[i]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[i]=l.SdkMetric.fromObject(e.globalMetrics[i])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var i=0;i<e.streamMetricFrames.length;++i){if(typeof e.streamMetricFrames[i]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[i]=l.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.globalMetrics=[],i.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){i.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)i.globalMetrics[o]=l.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){i.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)i.streamMetricFrames[o]=l.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),r}(),l.SdkStreamDimension=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDimension"),r.prototype.type=1,r.prototype.value=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&l.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkStreamDimension;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=l.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=l.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkStreamDimension)return e;var t=new l.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=l.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ENCODER_NAME":1,i.value=null),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkStreamDimension.Type[e.type]===void 0?e.type:l.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=l.SdkDimensionValue.toObject(e.value,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ENCODER_NAME"]=1,e[n[2]="VIDEO_DECODER_NAME"]=2,e}(),r}(),l.SdkDimensionValue=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDimensionValue"),r.prototype.stringValue="",r.prototype.boolValue=!1,r.prototype.uintValue=g.Long?g.Long.fromBits(0,0,!0):0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkDimensionValue;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!g.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!g.isInteger(e.uintValue)&&!(e.uintValue&&g.isInteger(e.uintValue.low)&&g.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkDimensionValue)return e;var t=new l.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(g.Long?(t.uintValue=g.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new g.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults)if(i.stringValue="",i.boolValue=!1,g.Long){var o=new g.Long(0,0,!0);i.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(i.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(i.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?i.uintValue=t.longs===String?String(e.uintValue):e.uintValue:i.uintValue=t.longs===String?g.Long.prototype.toString.call(e.uintValue):t.longs===Number?new g.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),r}(),l.SdkDataMessageFrame=function(){function r(n){if(this.messages=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessageFrame"),r.prototype.messages=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.messages!=null&&e.messages.length)for(var i=0;i<e.messages.length;++i)l.SdkDataMessagePayload.encode(e.messages[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkDataMessageFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(l.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var i=l.SdkDataMessagePayload.verify(e.messages[t]);if(i)return"messages."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkDataMessageFrame)return e;var t=new l.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var i=0;i<e.messages.length;++i){if(typeof e.messages[i]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[i]=l.SdkDataMessagePayload.fromObject(e.messages[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.messages=[]),e.messages&&e.messages.length){i.messages=[];for(var o=0;o<e.messages.length;++o)i.messages[o]=l.SdkDataMessagePayload.toObject(e.messages[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),r}(),l.SdkDataMessagePayload=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessagePayload"),r.prototype.topic="",r.prototype.data=g.newBuffer([]),r.prototype.lifetimeMs=0,r.prototype.senderAttendeeId="",r.prototype.ingestTimeNs=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.senderExternalUserId="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkDataMessagePayload;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!g.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||g.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!g.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!g.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!g.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&g.isInteger(e.ingestTimeNs.low)&&g.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!g.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkDataMessagePayload)return e;var t=new l.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?g.base64.decode(e.data,t.data=g.newBuffer(g.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(g.Long?(t.ingestTimeNs=g.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new g.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.topic="",t.bytes===String?i.data="":(i.data=[],t.bytes!==Array&&(i.data=g.newBuffer(i.data))),i.lifetimeMs=0,i.senderAttendeeId="",g.Long){var o=new g.Long(0,0,!1);i.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.ingestTimeNs=t.longs===String?"0":0;i.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(i.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(i.data=t.bytes===String?g.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(i.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(i.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?i.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:i.ingestTimeNs=t.longs===String?g.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new g.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(i.senderExternalUserId=e.senderExternalUserId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),r}(),l.SdkTurnCredentials=function(){function r(n){if(this.uris=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTurnCredentials"),r.prototype.username="",r.prototype.password="",r.prototype.ttl=0,r.prototype.uris=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var i=0;i<e.uris.length;++i)t.uint32(34).string(e.uris[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTurnCredentials;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!g.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!g.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!g.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!g.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTurnCredentials)return e;var t=new l.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var i=0;i<e.uris.length;++i)t.uris[i]=String(e.uris[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.uris=[]),t.defaults&&(i.username="",i.password="",i.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(i.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(i.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(i.ttl=e.ttl),e.uris&&e.uris.length){i.uris=[];for(var o=0;o<e.uris.length;++o)i.uris[o]=e.uris[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),r}(),l.SdkTranscriptItem=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptItem"),r.prototype.content="",r.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.speakerAttendeeId="",r.prototype.speakerExternalUserId="",r.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.type=1,r.prototype.vocabularyFilterMatch=!1,r.prototype.confidence=0,r.prototype.stable=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptItem;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!g.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!g.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!g.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptItem)return e;var t=new l.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.content="",g.Long){var o=new g.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.speakerAttendeeId="",i.speakerExternalUserId="",g.Long){var o=new g.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=t.enums===String?"PRONUNCIATION":1,i.vocabularyFilterMatch=!1,i.confidence=0,i.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(i.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(i.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkTranscriptItem.Type[e.type]===void 0?e.type:l.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(i.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(i.stable=e.stable),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="PRONUNCIATION"]=1,e[n[2]="PUNCTUATION"]=2,e}(),r}(),l.SdkTranscriptEntity=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptEntity"),r.prototype.category="",r.prototype.confidence=0,r.prototype.content="",r.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.type="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptEntity;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!g.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!g.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!g.isString(e.type)?"type: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptEntity)return e;var t=new l.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.category="",i.confidence=0,i.content="",g.Long){var o=new g.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(g.Long){var o=new g.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(i.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=e.type),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),r}(),l.SdkTranscriptAlternative=function(){function r(n){if(this.items=[],this.entities=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptAlternative"),r.prototype.items=g.emptyArray,r.prototype.transcript="",r.prototype.entities=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.items!=null&&e.items.length)for(var i=0;i<e.items.length;++i)l.SdkTranscriptItem.encode(e.items[i],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var i=0;i<e.entities.length;++i)l.SdkTranscriptEntity.encode(e.entities[i],t.uint32(26).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptAlternative;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(l.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(l.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var i=l.SdkTranscriptItem.verify(e.items[t]);if(i)return"items."+i}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!g.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var i=l.SdkTranscriptEntity.verify(e.entities[t]);if(i)return"entities."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptAlternative)return e;var t=new l.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i){if(typeof e.items[i]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[i]=l.SdkTranscriptItem.fromObject(e.items[i])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var i=0;i<e.entities.length;++i){if(typeof e.entities[i]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[i]=l.SdkTranscriptEntity.fromObject(e.entities[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.items=[],i.entities=[]),t.defaults&&(i.transcript=""),e.items&&e.items.length){i.items=[];for(var o=0;o<e.items.length;++o)i.items[o]=l.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(i.transcript=e.transcript),e.entities&&e.entities.length){i.entities=[];for(var o=0;o<e.entities.length;++o)i.entities[o]=l.SdkTranscriptEntity.toObject(e.entities[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),r}(),l.SdkTranscriptLanguageWithScore=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptLanguageWithScore"),r.prototype.languageCode="",r.prototype.score=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptLanguageWithScore;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!g.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptLanguageWithScore)return e;var t=new l.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.languageCode="",i.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(i.score=t.json&&!isFinite(e.score)?String(e.score):e.score),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),r}(),l.SdkTranscriptResult=function(){function r(n){if(this.alternatives=[],this.languageIdentification=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptResult"),r.prototype.alternatives=g.emptyArray,r.prototype.channelId="",r.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.isPartial=!1,r.prototype.resultId="",r.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.languageCode="",r.prototype.languageIdentification=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.alternatives!=null&&e.alternatives.length)for(var i=0;i<e.alternatives.length;++i)l.SdkTranscriptAlternative.encode(e.alternatives[i],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var i=0;i<e.languageIdentification.length;++i)l.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[i],t.uint32(66).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptResult;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(l.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(l.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var i=l.SdkTranscriptAlternative.verify(e.alternatives[t]);if(i)return"alternatives."+i}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!g.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!g.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!g.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var i=l.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(i)return"languageIdentification."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptResult)return e;var t=new l.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var i=0;i<e.alternatives.length;++i){if(typeof e.alternatives[i]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[i]=l.SdkTranscriptAlternative.fromObject(e.alternatives[i])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var i=0;i<e.languageIdentification.length;++i){if(typeof e.languageIdentification[i]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[i]=l.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.alternatives=[],i.languageIdentification=[]),t.defaults){if(i.channelId="",g.Long){var o=new g.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.isPartial=!1,i.resultId="",g.Long){var o=new g.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.languageCode=""}if(e.alternatives&&e.alternatives.length){i.alternatives=[];for(var u=0;u<e.alternatives.length;++u)i.alternatives[u]=l.SdkTranscriptAlternative.toObject(e.alternatives[u],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(i.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(i.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(i.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){i.languageIdentification=[];for(var u=0;u<e.languageIdentification.length;++u)i.languageIdentification[u]=l.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[u],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),r}(),l.SdkTranscript=function(){function r(n){if(this.results=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscript"),r.prototype.results=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.results!=null&&e.results.length)for(var i=0;i<e.results.length;++i)l.SdkTranscriptResult.encode(e.results[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscript;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(l.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var i=l.SdkTranscriptResult.verify(e.results[t]);if(i)return"results."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscript)return e;var t=new l.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var i=0;i<e.results.length;++i){if(typeof e.results[i]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[i]=l.SdkTranscriptResult.fromObject(e.results[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.results=[]),e.results&&e.results.length){i.results=[];for(var o=0;o<e.results.length;++o)i.results[o]=l.SdkTranscriptResult.toObject(e.results[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),r}(),l.SdkTranscriptionStatus=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptionStatus"),r.prototype.type=1,r.prototype.eventTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.transcriptionRegion="",r.prototype.transcriptionConfiguration="",r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptionStatus;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!g.isInteger(e.eventTime)&&!(e.eventTime&&g.isInteger(e.eventTime.low)&&g.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!g.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!g.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!g.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptionStatus)return e;var t=new l.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(g.Long?(t.eventTime=g.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new g.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.type=t.enums===String?"STARTED":1,g.Long){var o=new g.Long(0,0,!1);i.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.eventTime=t.longs===String?"0":0;i.transcriptionRegion="",i.transcriptionConfiguration="",i.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:l.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?i.eventTime=t.longs===String?String(e.eventTime):e.eventTime:i.eventTime=t.longs===String?g.Long.prototype.toString.call(e.eventTime):t.longs===Number?new g.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(i.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(i.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="STARTED"]=1,e[n[2]="INTERRUPTED"]=2,e[n[3]="RESUMED"]=3,e[n[4]="STOPPED"]=4,e[n[5]="FAILED"]=5,e}(),r}(),l.SdkTranscriptEvent=function(){function r(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)e[t[i]]!=null&&(this[t[i]]=e[t[i]])}s(r,"SdkTranscriptEvent"),r.prototype.status=null,r.prototype.transcript=null;var n;return Object.defineProperty(r.prototype,"Event",{get:g.oneOfGetter(n=["status","transcript"]),set:g.oneOfSetter(n)}),r.create=s(function(t){return new r(t)},"create"),r.encode=s(function(t,i){return i||(i=m.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&l.SdkTranscriptionStatus.encode(t.status,i.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&l.SdkTranscript.encode(t.transcript,i.uint32(18).fork()).ldelim(),i},"encode"),r.encodeDelimited=s(function(t,i){return this.encode(t,i).ldelim()},"encodeDelimited"),r.decode=s(function(t,i){t instanceof p||(t=p.create(t));for(var o=i===void 0?t.len:t.pos+i,u=new l.SdkTranscriptEvent;t.pos<o;){var h=t.uint32();switch(h>>>3){case 1:{u.status=l.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{u.transcript=l.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(h&7);break}}return u},"decode"),r.decodeDelimited=s(function(t){return t instanceof p||(t=new p(t)),this.decode(t,t.uint32())},"decodeDelimited"),r.verify=s(function(t){if(typeof t!="object"||t===null)return"object expected";var i={};if(t.status!=null&&t.hasOwnProperty("status")){i.Event=1;{var o=l.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(i.Event===1)return"Event: multiple values";i.Event=1;{var o=l.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),r.fromObject=s(function(t){if(t instanceof l.SdkTranscriptEvent)return t;var i=new l.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");i.status=l.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");i.transcript=l.SdkTranscript.fromObject(t.transcript)}return i},"fromObject"),r.toObject=s(function(t,i){i||(i={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=l.SdkTranscriptionStatus.toObject(t.status,i),i.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=l.SdkTranscript.toObject(t.transcript,i),i.oneofs&&(o.Event="transcript")),o},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),r}(),l.SdkTranscriptFrame=function(){function r(n){if(this.events=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptFrame"),r.prototype.events=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.events!=null&&e.events.length)for(var i=0;i<e.events.length;++i)l.SdkTranscriptEvent.encode(e.events[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(l.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var i=l.SdkTranscriptEvent.verify(e.events[t]);if(i)return"events."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptFrame)return e;var t=new l.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var i=0;i<e.events.length;++i){if(typeof e.events[i]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[i]=l.SdkTranscriptEvent.fromObject(e.events[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.events=[]),e.events&&e.events.length){i.events=[];for(var o=0;o<e.events.length;++o)i.events[o]=l.SdkTranscriptEvent.toObject(e.events[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),r}(),l.SdkRemoteVideoUpdateFrame=function(){function r(n){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkRemoteVideoUpdateFrame"),r.prototype.addedOrUpdatedVideoSubscriptions=g.emptyArray,r.prototype.removedVideoSubscriptionMids=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i)l.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[i],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.uint32(18).string(e.removedVideoSubscriptionMids[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkRemoteVideoUpdateFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(l.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var i=l.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(i)return"addedOrUpdatedVideoSubscriptions."+i}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!g.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkRemoteVideoUpdateFrame)return e;var t=new l.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i){if(typeof e.addedOrUpdatedVideoSubscriptions[i]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[i]=l.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[i])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.removedVideoSubscriptionMids[i]=String(e.removedVideoSubscriptionMids[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.addedOrUpdatedVideoSubscriptions=[],i.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){i.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)i.addedOrUpdatedVideoSubscriptions[o]=l.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){i.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)i.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),r}(),l.SdkVideoQualityAdaptationPreference=function(){var r={},n=Object.create(r);return n[r[1]="BALANCED"]=1,n[r[2]="MAINTAIN_FRAMERATE"]=2,n[r[3]="MAINTAIN_RESOLUTION"]=3,n}(),l.SdkVideoSubscriptionConfiguration=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkVideoSubscriptionConfiguration"),r.prototype.mid="",r.prototype.attendeeId="",r.prototype.streamId=0,r.prototype.priority=0,r.prototype.targetBitrateKbps=0,r.prototype.groupId=0,r.prototype.qualityAdaptationPreference=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkVideoSubscriptionConfiguration;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(u&7);break}}if(!o.hasOwnProperty("mid"))throw g.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!g.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!g.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!g.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkVideoSubscriptionConfiguration)return e;var t=new l.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.mid="",i.attendeeId="",i.streamId=0,i.priority=0,i.targetBitrateKbps=0,i.groupId=0,i.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(i.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(i.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(i.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(i.qualityAdaptationPreference=t.enums===String?l.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:l.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),r}(),l.SdkNotificationFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkNotificationFrame"),r.prototype.level=3,r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkNotificationFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!g.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkNotificationFrame)return e;var t=new l.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.level=t.enums===String?"ERROR":3,i.message=""),e.level!=null&&e.hasOwnProperty("level")&&(i.level=t.enums===String?l.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:l.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),r.NotificationLevel=function(){var n={},e=Object.create(n);return e[n[1]="INFO"]=1,e[n[2]="WARNING"]=2,e[n[3]="ERROR"]=3,e}(),r}(),l.SdkPrimaryMeetingJoinFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinFrame"),r.prototype.credentials=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&l.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPrimaryMeetingJoinFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.credentials=l.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=l.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkPrimaryMeetingJoinFrame)return e;var t=new l.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=l.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(i.credentials=l.SdkMeetingSessionCredentials.toObject(e.credentials,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),r}(),l.SdkPrimaryMeetingJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPrimaryMeetingJoinAckFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof l.SdkPrimaryMeetingJoinAckFrame?e:new l.SdkPrimaryMeetingJoinAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),r}(),l.SdkPrimaryMeetingLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPrimaryMeetingLeaveFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof l.SdkPrimaryMeetingLeaveFrame?e:new l.SdkPrimaryMeetingLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),r}(),l.SdkMeetingSessionCredentials=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMeetingSessionCredentials"),r.prototype.attendeeId="",r.prototype.externalUserId="",r.prototype.joinToken="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkMeetingSessionCredentials;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!g.isString(e.joinToken)?"joinToken: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkMeetingSessionCredentials)return e;var t=new l.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.attendeeId="",i.externalUserId="",i.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(i.joinToken=e.joinToken),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),r}(),l.SdkVideoCodecCapability=function(){var r={},n=Object.create(r);return n[r[1]="VP8"]=1,n[r[2]="H264_BASELINE_PROFILE"]=2,n[r[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,n[r[4]="H264_MAIN_PROFILE"]=4,n[r[5]="H264_HIGH_PROFILE"]=5,n[r[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,n[r[8]="VP9_PROFILE_0"]=8,n[r[11]="AV1_MAIN_PROFILE"]=11,n}(),F.exports=l,g.Long=void 0,d.configure()},7924674822:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(7288346005),g=c(1668212732),l=p(c(6885109343));let r=s(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const i=new m.Sha256(t);return i.update(e),i.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,i,o){return d(this,void 0,void 0,function*(){const u=yield this.hmac(t,"AWS4"+e),h=yield this.hmac(i,u),S=yield this.hmac(o,h);return yield this.hmac("aws4_request",S)})}signURL(e,t,i,o,u,h,S){return d(this,void 0,void 0,function*(){const f=this.getDateTimeString(),v=this.getDateString(f),E="AWS4-HMAC-SHA256";let _="";this.chimeClient.config.region instanceof Function?_=yield this.chimeClient.config.region():_=this.chimeClient.config.region;const T="host",w="host:"+o.toLowerCase()+`
`,M=v+"/"+_+"/"+i+"/aws4_request";let R;this.chimeClient.config.credentials instanceof Function?R=yield this.chimeClient.config.credentials():R=this.chimeClient.config.credentials;let O=new Map;O.set("X-Amz-Algorithm",[E]),O.set("X-Amz-Credential",[encodeURIComponent(R.accessKeyId+"/"+M)]),O.set("X-Amz-Date",[f]),O.set("X-Amz-Expires",["10"]),O.set("X-Amz-SignedHeaders",["host"]),R.sessionToken&&O.set("X-Amz-Security-Token",[encodeURIComponent(R.sessionToken)]),O.set(l.default.X_AMZN_VERSION,[encodeURIComponent(l.default.sdkVersion)]),O.set(l.default.X_AMZN_USER_AGENT,[encodeURIComponent(l.default.sdkUserAgentLowResolution)]),S==null||S.forEach((X,ee)=>{const fe=encodeURIComponent(ee);X.sort().forEach(oe=>{O.has(fe)||O.set(fe,[]),O.get(fe).push(encodeURIComponent(oe))})});let k="";O=new Map([...O.entries()].sort()),O.forEach((X,ee)=>{X.forEach(fe=>{k.length&&(k+="&"),k+=ee+"="+fe})});const A=e+`
`+u+`
`+k+`
`+w+`
`+T+`
`+g.toHex(yield this.hmac(h)),P=g.toHex(yield this.hmac(A)),D=`AWS4-HMAC-SHA256
`+f+`
`+v+"/"+_+"/"+i+`/aws4_request
`+P,H=yield this.getSignatureKey(R.secretAccessKey,v,_,i),j=g.toHex(yield this.hmac(D,H)),W=k+"&X-Amz-Signature="+j;return t+"://"+o+u+"?"+W})}constructor(e){this.chimeClient=e}},"DefaultSigV4");a.default=r},9131051489:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SimulcastLayers=void 0;var c;(function(d){d[d.Low=0]="Low",d[d.LowAndMedium=1]="LowAndMedium",d[d.LowAndHigh=2]="LowAndHigh",d[d.Medium=3]="Medium",d[d.MediumAndHigh=4]="MediumAndHigh",d[d.High=5]="High"})(c=a.SimulcastLayers||(a.SimulcastLayers={})),a.default=c},4882678815:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AudioLogEvent=void 0;var c;(function(d){d[d.DeviceChanged=0]="DeviceChanged",d[d.MutedLocal=1]="MutedLocal",d[d.UnmutedLocal=2]="UnmutedLocal",d[d.Connected=3]="Connected",d[d.ConnectFailed=4]="ConnectFailed",d[d.RedmicStartLoss=5]="RedmicStartLoss",d[d.RedmicEndLoss=6]="RedmicEndLoss"})(c=a.AudioLogEvent||(a.AudioLogEvent={})),a.default=c},4562177071:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(v,E,_,T){function w(M){return M instanceof _?M:new _(function(R){R(M)})}return s(w,"adopt"),new(_||(_=Promise))(function(M,R){function O(P){try{A(T.next(P))}catch(D){R(D)}}s(O,"fulfilled");function k(P){try{A(T.throw(P))}catch(D){R(D)}}s(k,"rejected");function A(P){P.done?M(P.value):w(P.value).then(O,k)}s(A,"step"),A((T=T.apply(v,E||[])).next())})},p=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9029233041)),g=p(c(6502873558)),l=p(c(6132421099)),r=p(c(3237015968)),n=p(c(6172292806)),e=p(c(2234819701)),t=p(c(546597810)),i=p(c(9877075638)),o=c(4136617125),u=c(6527539809),h=p(c(4882678815)),S=p(c(1404048602));let f=s(class jd{toAttribute(E){return this.toSuffix(E).substring(1)}toSuffix(E){return E.toLowerCase()===E?`_${E}`:E.toUpperCase()===E?`_${E.toLowerCase()}`:E.replace(/([A-Z][a-z]+)/g,function(_){return`_${_}`}).replace(/([A-Z][A-Z]+)/g,function(_){return`_${_}`}).toLowerCase()}logLatency(E,_,T){const w=this.toSuffix(E);this.logEventTime("meeting"+w,_,T)}logStateTimeout(E,_){const T=this.toSuffix(E);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},_),{state:`state${T}`}))}logAudioEvent(E,_){const T="audio"+this.toSuffix(h.default[E]);this.logEvent(T,_)}logVideoEvent(E,_){const T="video"+this.toSuffix(S.default[E]);this.logEvent(T,_)}logEventTime(E,_){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const w=Object.assign(Object.assign({},T),{call_id:this.audioVideoController.configuration.meetingId,client_type:jd.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(w)}`),this.metricsAddTime(E,_,w)}logMeetingSessionStatus(E){const _=`${E.statusCode()}`;this.logEvent(_);const T={status:_,status_code:`${E.statusCode()}`};this.logEvent("meeting_session_status",T),E.isTerminal()&&this.logEvent("meeting_session_stopped",T),E.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",T),E.isFailure()&&this.logEvent("meeting_session_failed",T)}logLifecycleEvent(E,_){const T={lifecycle_event:`lifecycle${this.toSuffix(e.default[E])}`,lifecycle_event_code:`${E}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[_])}`,lifecycle_event_condition_code:`${_}`};this.logEvent("meeting_session_lifecycle",T)}logEvent(E){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const T=Object.assign(Object.assign({},_),{call_id:this.audioVideoController.configuration.meetingId,client_type:jd.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(T)}`),this.metricsLogEvent(E,T)}start(E,_){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=E,this.videoStreamIndex=_,this.clientMetricReport=new m.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new i.default(this.interval),this.intervalScheduler.start(()=>d(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(E,_){const T=_?this.clientMetricReport.streamMetricReports[Number(E.ssrc)]:this.clientMetricReport.globalMetricReport;let w;_?w=this.clientMetricReport.getMetricMap(T.mediaType,T.direction):w=this.clientMetricReport.getMetricMap();for(const M in E)M in w&&(typeof E[M]=="number"?(T.previousMetrics[M]=T.currentMetrics[M],T.currentMetrics[M]=E[M]):typeof E[M]=="string"?T.currentStringMetrics[M]=E[M]:typeof E[M]=="object"?(T.previousObjectMetrics[M]=T.currentObjectMetrics[M]===void 0?E[M]:T.currentObjectMetrics[M],T.currentObjectMetrics[M]=E[M]):this.logger.error(`Unknown metric value type ${typeof E[M]} for metric ${M}`))}processRawMetricReports(E){this.clientMetricReport.currentSsrcs={};const _=Date.now();for(const T of E){const w=this.isStreamRawMetricReport(T.type);if(w){const M=this.clientMetricReport.streamMetricReports[Number(T.ssrc)];if(M)M.mediaType===l.default.VIDEO&&M.direction===g.default.UPSTREAM?M.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(T.rid):M.streamId=this.videoStreamIndex.streamIdForSSRC(Number(T.ssrc));else{const R=new n.default;R.mediaType=this.getMediaType(T),R.direction=this.getDirectionType(T),R.mediaType===l.default.VIDEO&&R.direction===g.default.UPSTREAM?R.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(T.rid):this.videoStreamIndex.allStreams().empty()||(R.streamId=this.videoStreamIndex.streamIdForSSRC(Number(T.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(R.groupId=this.videoStreamIndex.groupIdForSSRC(Number(T.ssrc)))),this.clientMetricReport.streamMetricReports[Number(T.ssrc)]=R}this.clientMetricReport.currentSsrcs[Number(T.ssrc)]=1}this.updateMetricValues(T,w)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=_,this.clientMetricReport.print()}addStreamMetricDimensionFrames(E,_){const T=this.clientMetricReport.getStreamDimensionMap();for(const w in _.currentStringMetrics)if(w in T){const M=o.SdkStreamDimension.create();M.type=T[w];const R=o.SdkDimensionValue.create();R.stringValue=_.currentStringMetrics[w],M.value=R,E.dimensions.push(M)}}addMetricFrame(E,_,T,w){const M=T.type,R=T.transform,O=T.source,k=_.streamMetricFrames.length,A=_.streamMetricFrames[k-1];if(M){const P=o.SdkMetric.create();P.type=M,P.value=R(O||E,w),w?A.metrics.push(P):_.globalMetrics.push(P)}}addGlobalMetricsToProtobuf(E){const _=this.clientMetricReport.getMetricMap();for(const T in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(T,E,_[T])}addStreamMetricsToProtobuf(E){for(const _ in this.clientMetricReport.streamMetricReports){const T=this.clientMetricReport.streamMetricReports[_],w=o.SdkStreamMetricFrame.create();w.streamId=T.streamId,w.metrics=[],this.addStreamMetricDimensionFrames(w,T),E.streamMetricFrames.push(w);const M=this.clientMetricReport.getMetricMap(T.mediaType,T.direction);for(const R in T.currentMetrics)this.addMetricFrame(R,E,M[R],Number(_));for(const R in T.currentStringMetrics)this.addMetricFrame(R,E,M[R],Number(_));for(const R in T.currentObjectMetrics)this.addMetricFrame(R,E,M[R],Number(_))}}makeClientMetricProtobuf(){const E=o.SdkClientMetricFrame.create();return E.globalMetrics=[],E.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(E),this.addStreamMetricsToProtobuf(E),E}sendClientMetricProtobuf(E){this.signalingClient.sendClientMetrics(E)}isStreamRawMetricReport(E){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(E)}getMediaType(E){return E.kind==="audio"?l.default.AUDIO:l.default.VIDEO}getDirectionType(E){const{type:_}=E;return _==="inbound-rtp"||_==="remote-outbound-rtp"||_==="inbound-rtp-red"?g.default.DOWNSTREAM:g.default.UPSTREAM}isValidStandardRawMetric(E){return E.type==="inbound-rtp"||E.type==="inbound-rtp-red"||E.type==="outbound-rtp"||E.type==="remote-inbound-rtp"||E.type==="remote-outbound-rtp"||E.type==="candidate-pair"&&E.state==="succeeded"||E.type==="media-source"&&E.kind==="audio"}isValidSsrc(E){let _=!0;return this.isStreamRawMetricReport(E.type)&&this.getDirectionType(E)===g.default.DOWNSTREAM&&this.getMediaType(E)===l.default.VIDEO&&(_=this.videoStreamIndex.streamIdForSSRC(Number(E.ssrc))>0),_}isValidRawMetricReport(E){return this.isValidStandardRawMetric(E)&&this.isValidSsrc(E)}filterRawMetricReports(E){const _=[];for(const T of E)this.isValidRawMetricReport(T)&&_.push(T);return _}handleRawMetricReports(E){const _=this.filterRawMetricReports(E);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(_)}`);const T=[];this.maybeAddRedRecoveryMetrics(T),this.addVideoCodecDegradationMetrics(T),this.clientMetricReport.customStatsReports=T,_.push(...T),this.processRawMetricReports(_);const w=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(w),this.audioVideoController.forEachObserver(M=>{u.Maybe.of(M.metricsDidReceive).map(R=>R.bind(M)(this.clientMetricReport.clone()))})}getStatsWrapper(){return d(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const E=[];try{const _=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=_,_.forEach(T=>{E.push(T)}),this.handleRawMetricReports(E)}catch(_){this.logger.error(_.message)}})}overrideObservableMetric(E,_){this.clientMetricReport.overrideObservableMetric(E,_)}recoveryMetricsDidReceive(E){this.redRecoveryMetricReport=E}maybeAddRedRecoveryMetrics(E){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(E.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(E){const _=this.clientMetricReport.getVideoUpstreamSsrc();_!==null&&E.push({kind:"video",type:"outbound-rtp",ssrc:_,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}constructor(E,_,T=jd.INTERVAL_MS){this.audioVideoController=E,this.logger=_,this.interval=T,this.intervalScheduler=null,this.redRecoveryMetricReport=new r.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.metricsAddTime=(w,M,R)=>{},this.metricsLogEvent=(w,M)=>{}}},"StatsCollector");a.default=f,f.INTERVAL_MS=1e3,f.CLIENT_TYPE="amazon-chime-sdk-js"},1404048602:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VideoLogEvent=void 0;var c;(function(d){d[d.InputAttached=0]="InputAttached",d[d.SendingFailed=1]="SendingFailed",d[d.SendingSuccess=2]="SendingSuccess"})(c=a.VideoLogEvent||(a.VideoLogEvent={})),a.default=c},4713678292:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(1404048602)),g=p(c(5009059128));let l=s(class extends g.default{run(){return d(this,void 0,void 0,function*(){const n=this.context.transceiverController;n.setPeer(this.context.peer),n.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const i=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield n.setAudioInput(i.length?i[0]:null)}else yield n.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const i=t.getVideoTracks(),o=i.length?i[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield n.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const u=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();n.setEncodingParameters(u)}o&&this.context.statsCollector.logVideoEvent(m.default.InputAttached,this.context.videoDeviceInformation)}else yield n.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=n.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const n=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!n){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:i}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(i,null,4)}`);const o=i.findIndex(u=>u.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const u=i[o];i.splice(o,1),e?(i.unshift(u),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(i);return}this.context.logger.info("audio/red codec not supported")}constructor(n){super(n.logger),this.context=n,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");a.default=l},5009059128:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(7537135456)),g=p(c(6013191119));let l=s(class{once(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return new m.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(n){this.parentTask=n}getStatus(){return this.status}logAndThrow(n){throw this.logger.info(n),new Error(n)}baseRun(n){return d(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case g.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case g.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case g.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=g.default.RUNNING,yield n.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==g.default.CANCELED&&(this.status=g.default.FINISHED)}})}baseCancel(n){if(this.status===g.default.CANCELED||this.status===g.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=g.default.CANCELED,n.call(this)}constructor(n){this.logger=n,this.taskName="BaseTask",this.parentTask=null,this.status=g.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");a.default=l},9089081530:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5009059128));let g=s(class extends m.default{run(){return d(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(r){super(r.logger),this.context=r,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");a.default=g},5703332651:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(7969706599)),g=p(c(5009059128));let l=s(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(n){throw n}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const n=this.context.videoTileController.getLocalVideoTile();n&&n.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((n,e)=>{let t=s(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(u){u.type===m.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),n())}constructor(u){this.signalingClient=u}},"Interceptor");const i=new t(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)})}constructor(n){super(n.logger),this.context=n,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");a.default=l},9049733277:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5009059128));let g=s(class extends m.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const r in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[r]()}addPeerConnectionEventLogger(){const r=this.context.peer;r.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${r.connectionState}`)}),r.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),r.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${r.iceGatheringState}`)}),r.addEventListener("icecandidate",n=>{this.context.logger.info(`peer connection ice candidate: ${n.candidate?n.candidate.candidate:"(null)"}`)}),r.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${r.iceConnectionState}`)})}run(){return d(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const n=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};n.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),n.sdpSemantics="unified-plan",n.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(n),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(r){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(r)):!1}addRemoteVideoTrack(r,n){var e;const t=n.id,i=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,u;if(this.context.videoTileController.getVideoTileForAttendeeId?(u=this.context.videoTileController.getVideoTileForAttendeeId(i),o=!!(!((e=u==null?void 0:u.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(i),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${i}`);return}u||(u=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${u.id()}`));let h=this.context.videoStreamIndex.streamIdForTrack(t);typeof h>"u"&&(this.logger.warn(`stream not found for tile=${u.id()} track=${t}`),h=null);let S=this.context.videoStreamIndex.groupIdForStreamId(h);S===void 0&&(S=null);for(let M=0;M<this.trackEvents.length;M++){const R=this.trackEvents[M],O=n.getVideoTracks();if(O&&O.length){const k=O[0],A=s(()=>{this.context.logger.info(`received the ${R} event for tile=${u.id()} id=${r.id} streamId=${h}`),R==="ended"&&this.removeRemoteVideoTrack(r,u.state())},"callback");k.addEventListener(R,A),this.removeVideoTrackEventListeners[r.id]||(this.removeVideoTrackEventListeners[r.id]=[]),this.removeVideoTrackEventListeners[r.id].push(()=>{k.removeEventListener(R,A)})}}let f,v;if(r.getSettings){const M=r.getSettings();f=M.width,v=M.height}else{const M=r.getCapabilities();f=M.width,v=M.height}const E=this.context.videoStreamIndex.externalUserIdForTrack(t);u.bindVideoStream(i,!1,n,f,v,h,E,S),this.logger.info(`video track added, use tile=${u.id()} track=${t} streamId=${h} groupId=${S}`);const _="removetrack",T=n,w=s(()=>this.removeRemoteVideoTrack(r,u.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[r.id]=()=>{T.removeEventListener(_,w),delete this.removeTrackRemovedEventListeners[r.id]},T.addEventListener(_,w)}removeRemoteVideoTrack(r,n){if(this.removeTrackRemovedEventListeners.hasOwnProperty(r.id)){this.removeTrackRemovedEventListeners[r.id]();for(const e of this.removeVideoTrackEventListeners[r.id])e();delete this.removeVideoTrackEventListeners[r.id]}this.logger.info(`video track ended, removing tile=${n.tileId} id=${r.id} stream=${n.streamId}`),n.streamId?this.context.videosPaused.remove(n.streamId):this.logger.warn(`no stream found for tile=${n.tileId}`),this.context.videoTileController.removeVideoTile(n.tileId)}constructor(r){super(r.logger),this.context=r,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=n=>{const e=n.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),n.transceiver&&n.transceiver.currentDirection==="inactive")return;if(n.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=n.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");a.default=g,g.REMOVE_HANDLER_INTERVAL_MS=1e4},4708498556:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9447989038)),g=p(c(182939685)),l=p(c(5009059128));let r=s(class extends l.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const i=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||i;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${i})`),o}run(){return d(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,i)=>d(this,void 0,void 0,function*(){this.cancelPromise=o=>{i(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new g.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,i(o);return}t()}catch(o){i(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");a.default=r},2635066756:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9447989038)),g=p(c(182939685)),l=p(c(5009059128));let r=s(class _S extends l.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return d(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new g.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new g.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=i=>{this.removeEventListener(),t(i)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=i=>{if(this.context.logger.info(`ice candidate: ${i.candidate?i.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),i.candidate&&(g.default.isRTPCandidate(i.candidate.candidate)&&this.context.iceCandidates.push(i.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new g.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=_S.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");a.default=r,r.CHROME_VPN_TIMEOUT_MS=5e3},9488451395:function(F,a,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(f,v,E,_){_===void 0&&(_=E),Object.defineProperty(f,_,{enumerable:!0,get:function(){return v[E]}})}:function(f,v,E,_){_===void 0&&(_=E),f[_]=v[E]}),p=this&&this.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),m=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var v={};if(f!=null)for(var E in f)E!=="default"&&Object.prototype.hasOwnProperty.call(f,E)&&d(v,f,E);return p(v,f),v},g=this&&this.__awaiter||function(f,v,E,_){function T(w){return w instanceof E?w:new E(function(M){M(w)})}return s(T,"adopt"),new(E||(E=Promise))(function(w,M){function R(A){try{k(_.next(A))}catch(P){M(P)}}s(R,"fulfilled");function O(A){try{k(_.throw(A))}catch(P){M(P)}}s(O,"rejected");function k(A){A.done?w(A.value):T(A.value).then(R,O)}s(k,"step"),k((_=_.apply(f,v||[])).next())})},l=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(a,"__esModule",{value:!0});const r=l(c(7551081659)),n=l(c(9447989038)),e=l(c(4943767904)),t=m(c(5393388022)),i=l(c(7969706599)),o=l(c(3867485289)),u=c(4136617125),h=l(c(5009059128));let S=s(class extends h.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){const v=yield new Promise((E,_)=>{const T=this.context;T.turnCredentials=null;let w=s(class{cancel(){this.signalingClient.removeObserver(this),_(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(k){if(k.type===i.default.WebSocketClosed){let P=`The signaling connection was closed with code ${k.closeCode} and reason: ${k.closeReason}`;T.logger.warn(P);let D=n.default.SignalingBadRequest;k.closeCode===4410?(P="The meeting already ended.",T.logger.warn(P),D=n.default.MeetingEnded):k.closeCode>=4500&&k.closeCode<4600&&(D=n.default.SignalingInternalServerError),T.audioVideoController.handleMeetingSessionStatus(new r.default(D),new Error(P));return}if(k.type!==i.default.ReceivedSignalFrame)return;if(k.message.type===u.SdkSignalFrame.Type.JOIN_ACK){const P=k.message.joinack;if(!P){T.audioVideoController.handleMeetingSessionStatus(new r.default(n.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(P.videoSubscriptionLimit&&(T.videoSubscriptionLimit=P.videoSubscriptionLimit),T.serverSupportsCompression=P.wantsCompressedSdp,P.defaultServerSideNetworkAdaption!==void 0&&P.defaultServerSideNetworkAdaption!==t.default.Default&&T.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const D=P.defaultServerSideNetworkAdaption;T.logger.info(`Overriding server side network adaption value to ${D}`),T.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(D))}P&&P.turnCredentials?(T.turnCredentials=new e.default,T.turnCredentials.username=P.turnCredentials.username,T.turnCredentials.password=P.turnCredentials.password,T.turnCredentials.ttl=P.turnCredentials.ttl,T.turnCredentials.uris=P.turnCredentials.uris.map(D=>T.meetingSessionConfiguration.urls.urlRewriter(D)).filter(D=>!!D)):T.logger.error("missing TURN credentials in JoinAckFrame");return}if(k.message.type!==u.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const A=k.message.index;E(A)}constructor(k){this.signalingClient=k}},"IndexFrameInterceptor");const M=new w(this.context.signalingClient);this.context.signalingClient.registerObserver(M),this.taskCanceler=M,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const R=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(R.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),R.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(R.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),R.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(R)});this.context.logger.info(`received first index ${JSON.stringify(v)}`),this.context.indexFrame=v})}constructor(v){super(v.logger),this.context=v,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");a.default=S},9638153336:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(7969706599)),g=c(4136617125),l=p(c(5009059128));let r=s(class extends l.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let i=s(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(h){if(h.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}h.type===m.default.ReceivedSignalFrame&&h.message.type===g.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(h,S){this.signalingClient=h,this.logger=S}},"Interceptor");const o=new i(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");a.default=r},7966229607:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(7969706599)),g=c(4136617125),l=p(c(5009059128));let r=s(class extends l.default{run(){return d(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===m.default.ReceivedSignalFrame){if(e.message.type===g.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===g.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");a.default=r},1614136239:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(_,T,w,M){function R(O){return O instanceof w?O:new w(function(k){k(O)})}return s(R,"adopt"),new(w||(w=Promise))(function(O,k){function A(H){try{D(M.next(H))}catch(j){k(j)}}s(A,"fulfilled");function P(H){try{D(M.throw(H))}catch(j){k(j)}}s(P,"rejected");function D(H){H.done?O(H.value):R(H.value).then(A,P)}s(D,"step"),D((M=M.apply(_,T||[])).next())})},p=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(6502873558)),g=p(c(6132421099)),l=p(c(5850044630)),r=p(c(4866586987)),n=p(c(174963938)),e=p(c(3334420728)),t=p(c(7551081659)),i=p(c(9447989038)),o=p(c(8804723777)),u=p(c(7969706599)),h=c(4136617125),S=p(c(4882678815)),f=c(6527539809),v=p(c(5009059128));let E=s(class extends v.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return d(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(T){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(T){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=T;return}else this.pendingMetricsReport=void 0;const w=T.getObservableMetrics(),M=w.availableOutgoingBitrate,R=w.nackCountReceivedPerSecond;let O=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(T);const k=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(O=O||k,k){const A=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=A.truncate(this.context.videoSubscriptionLimit),A.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${k}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:M/1e3,nackCountPerSecond:R});const A=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();O=O||A,A&&(this.logger.info(`trigger resubscribe for up=${A}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return O}metricsDidReceive(T){if(this.checkResubscribe(T)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const w=T.streamMetricReports,M=new Map;for(const R in w)w[R].mediaType===g.default.VIDEO&&w[R].direction===m.default.DOWNSTREAM&&M.set(w[R].streamId,w[R])}connectionHealthDidChange(T){T.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,T,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,T,()=>{var w;this.context.poorConnectionCount+=1;const M=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(w=this.context.eventController)===null||w===void 0||w.publishEvent("receivingAudioDropped",M),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(R=>{f.Maybe.of(R.connectionDidSuggestStopVideo).map(O=>O.bind(R)())}):this.context.audioVideoController.forEachObserver(R=>{f.Maybe.of(R.connectionDidBecomePoor).map(O=>O.bind(R)())})},()=>{this.context.audioVideoController.forEachObserver(w=>{f.Maybe.of(w.connectionDidBecomeGood).map(M=>M.bind(w)())})});for(const w of this.videoEncodingHealthPolicies)this.applyHealthPolicy(w,T,()=>{switch(this.degradeVideoCodec(w.name),w.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,T,()=>{var w;const M=this.generateBaseAudioVideoEventAttributes();(w=this.context.eventController)===null||w===void 0||w.publishEvent("sendingAudioFailed",M)},()=>{var w;const M=this.generateBaseAudioVideoEventAttributes();(w=this.context.eventController)===null||w===void 0||w.publishEvent("sendingAudioRecovered",M)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(T){this.isMeetingConnected=!1}audioVideoDidStop(T){this.isMeetingConnected=!1}applyHealthPolicy(T,w,M,R){T.update(w);const O=T.healthIfChanged();O!==null&&(this.logger.info(`${T.name} value is now ${O}`),O<=T.minimumHealth()?f.Maybe.of(M).map(k=>k.bind(this)()):f.Maybe.of(R).map(k=>k.bind(this)()))}handleBitrateFrame(T){this.currentAvailableStreamAvgBitrates=T,T.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${T.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",T.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(T){var w;if(T.type===u.default.WebSocketClosed&&(T.closeCode===4410||T.closeCode>=4500&&T.closeCode<4600)||T.type===u.default.WebSocketError||T.type===u.default.WebSocketFailed){if(!this.hasSignalingError){const M=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(w=this.context.eventController)===null||w===void 0||w.publishEvent("signalingDropped",M),this.hasSignalingError=!0}}else T.type===u.default.WebSocketOpen&&(this.hasSignalingError=!1);if(T.type===u.default.ReceivedSignalFrame){if(T.message.type===h.SdkSignalFrame.Type.NOTIFICATION){switch(T.message.notification.level){case h.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${T.message.notification.message}`);break;case h.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${T.message.notification.message}`);break;case h.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${T.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${T.message.notification.level}: ${T.message.notification.message}`);break}return}if(T.message.bitrates){const R=T.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(R),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(T.message.bitrates)}const M=t.default.fromSignalFrame(T.message);T.message.type!==h.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&M.statusCode()!==i.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(M,null)}}degradeVideoCodec(T){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const w=[];for(const M of this.context.videoSendCodecPreferences)M.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||w.push(M);w.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${w[0].codecName} due to ${T}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=w,this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(M=>M.codecName).join(",")}`)}}constructor(T,w,M){super(T.logger),this.context=T,this.initialConnectionHealthData=M,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=R=>{const O=R<1,k=this.prevSignalStrength<1,A=O?k?null:S.default.RedmicStartLoss:k?S.default.RedmicEndLoss:null;A&&this.context.statsCollector.logAudioEvent(A),this.prevSignalStrength=R},this.realtimeFatalErrorCallback=R=>{this.logger.error(`realtime error: ${R}: ${R.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.RealtimeApiFailed),R)},this.realtimeAttendeeIdPresenceHandler=(R,O)=>{var k;const A=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${A}`),A===R&&O&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(k=this.context.eventController)===null||k===void 0||k.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:R,startTimeMs:O,iceGatheringDurationMs:k,attendeePresenceDurationMs:A,meetingStartDurationMs:P}=this.context;return{meetingDurationMs:O===null?0:Math.round(Date.now()-O),signalingOpenDurationMs:R,iceGatheringDurationMs:k,attendeePresenceDurationMs:A,meetingStartDurationMs:P}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const R=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},R),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new l.default(T.logger,Object.assign({},w),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new n.default(Object.assign({},w),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new r.default(T.logger,Object.assign({},w),this.initialConnectionHealthData.clone());for(const R of w.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new R(Object.assign({},w),this.initialConnectionHealthData.clone()))}},"MonitorTask");a.default=E},5628139313:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(p){}},"NoOpTask");a.default=c},7537135456:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1370928943)),m=d(c(9649641385));let g=s(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const r of this.dependencies)r.cancel();this.logger.info(`Canceling ${this.name()}`),m.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&m.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>p.default.INFO||!this.dependencies)return;const r=this.dependencies.filter(n=>n).map(n=>n.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${r}`)}run(){if(this.promise)return this.promise;const r=this.dependencies?Promise.all(this.dependencies.map(n=>n==null?void 0:n.run())):Promise.resolve();return this.logDependencies(),this.ongoing=r.then(()=>this.task.run()),this.promise=new Promise((n,e)=>{this.cancelPromise=e,this.ongoing.then(n).catch(e)})}setParent(r){this.task.setParent(r)}constructor(r,n,e){this.logger=r,this.task=n,this.dependencies=e,this.canceled=!1}},"OnceTask");a.default=g},3292077469:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(7263318766)),g=p(c(7969706599)),l=p(c(5009059128));let r=s(class extends l.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new m.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((i,o)=>{let u=s(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(f){switch(f.type){case g.default.WebSocketOpen:this.signalingClient.removeObserver(this),i();break;case g.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(f){this.signalingClient=f}},"WebSocketOpenInterceptor");const h=new u(this.context.signalingClient);this.context.signalingClient.registerObserver(h),this.taskCanceler=h})}catch(i){throw i}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");a.default=r},6085879951:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5009059128));let g=s(class extends m.default{cancel(){for(const r of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${r.name()}`),r.cancel()}run(){return d(this,void 0,void 0,function*(){const r=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),r.push(e.run());const n=[];for(let e=0;e<r.length;e++){try{yield r[e]}catch(t){n.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(n.length>0){const e=n.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(r,n,e){super(r),this.taskName=n,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");a.default=g},9588672479:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(e,t,i,o){function u(h){return h instanceof i?h:new i(function(S){S(h)})}return s(u,"adopt"),new(i||(i=Promise))(function(h,S){function f(_){try{E(o.next(_))}catch(T){S(T)}}s(f,"fulfilled");function v(_){try{E(o.throw(_))}catch(T){S(T)}}s(v,"rejected");function E(_){_.done?h(_.value):u(_.value).then(f,v)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(3305135794),g=p(c(7969706599)),l=c(4136617125),r=p(c(5009059128));let n=s(class extends r.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,i)=>{let o=s(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===g.default.ReceivedSignalFrame&&S.message.type===l.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(m.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,f,v){this.signalingClient=S,this.completionCallback=f,this.logger=v}},"Interceptor");const u=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=u,this.context.signalingClient.registerObserver(u)})}constructor(t,i,o){super(t.logger),this.context=t,this.credentials=i,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");a.default=n},9531998674:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5009059128));let g=s(class extends m.default{run(){var r,n;return d(this,void 0,void 0,function*(){if(!(!((n=(r=this.context.meetingSessionConfiguration)===null||r===void 0?void 0:r.urls)===null||n===void 0)&&n.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(r){super(r.logger),this.context=r,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");a.default=g},587698570:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(7969706599)),g=c(4136617125),l=p(c(5009059128));let r=s(class extends l.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return d(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const i of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(i);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${i}`);continue}let u=this.context.videoTileController.getVideoTileForAttendeeId(o);u===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${i}. Creating new one.`),u=this.context.videoTileController.addVideoTile(),u.bindVideoStream(o,!1,null,0,0,0,null)),t.add(u.id())}this.serverPausedVideoTileIds.forEach(i=>{t.has(i)||this.serverPausedVideoTileIds.delete(i)})}handleSignalingClientEvent(e){if(e.type!==m.default.ReceivedSignalFrame||e.message.type!==g.SdkSignalFrame.Type.PAUSE&&e.message.type!==g.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,i=e.message.type;if(this.logger.info(`Received new ${i===g.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(u=>{const h=this.context.videoStreamIndex.attendeeIdForGroupId(u);if(h.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${u}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(h)});for(const u of o)u!==void 0&&(i===g.SdkSignalFrame.Type.PAUSE?u.state().paused||(this.serverPausedVideoTileIds.add(u.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(h=>{h.tileWillBePausedByDownlinkPolicy(u.id())}),u.pause()):u.state().paused&&this.serverPausedVideoTileIds.has(u.id())&&(this.serverPausedVideoTileIds.delete(u.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(h=>{h.tileWillBeUnpausedByDownlinkPolicy(u.id())}),u.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");a.default=r},86955145:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8006173476)),g=c(4136617125),l=p(c(5009059128));let r=s(class extends l.default{checkAndApplyVideoConstraint(e,t,i,o,u){return d(this,void 0,void 0,function*(){const h=t.getSettings();let S;if(e?S=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:S=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,i>S.videoWidth||o>S.videoHeight||u>S.videoFrameRate){const f={width:{ideal:S.videoWidth},height:{ideal:S.videoHeight},frameRate:{ideal:S.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(f)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(h)}`);try{yield t.applyConstraints(f)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return d(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===g.SdkStreamServiceType.RX||this.context.videoDuplexMode===g.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?g.SdkStreamServiceType.DUPLEX:g.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?g.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let i;try{i=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=i,i){const o=i.getVideoTracks();if(!o||o.length===0)return;const u=this.context.meetingSessionConfiguration.credentials.attendeeId,h=new m.default(u).hasModality(m.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(h,o[0],S.width,S.height,S.frameRate);const f=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(u,!0,i,S.width,S.height,null,f);for(const v of o)this.logger.info(`Using video device label=${v.label} id=${v.id}`),this.context.videoDeviceInformation.current_camera_name=v.label,this.context.videoDeviceInformation.current_camera_id=v.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");a.default=r},8297256329:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(o,u,h,S){function f(v){return v instanceof h?v:new h(function(E){E(v)})}return s(f,"adopt"),new(h||(h=Promise))(function(v,E){function _(M){try{w(S.next(M))}catch(R){E(R)}}s(_,"fulfilled");function T(M){try{w(S.throw(M))}catch(R){E(R)}}s(T,"rejected");function w(M){M.done?v(M.value):f(M.value).then(_,T)}s(w,"step"),w((S=S.apply(o,u||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(488357679)),g=p(c(8006173476)),l=p(c(8804723777)),r=p(c(7969706599)),n=c(4136617125),e=c(6527539809),t=p(c(5009059128));let i=s(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return d(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(u){if(u.type!==r.default.ReceivedSignalFrame||u.message.type!==n.SdkSignalFrame.Type.INDEX)return;const h=u.message.index;this.context.logger.info(`received new index ${JSON.stringify(h)}`),this.handleIndexFrame(h)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(u){if(!u)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=u;return}else this.pendingIndex=null;const h=this.context.audioVideoController.configuration.credentials.attendeeId;u.sources=u.sources.filter(T=>{const w=new g.default(T.attendeeId);return!(w.base()===h&&w.hasModality(g.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:f,videoUplinkBandwidthPolicy:v}=this.context,E=S.allVideoSendingSourcesExcludingSelf(h);S.integrateIndexFrame(u),f.updateIndex(S),v.updateIndex(S),this.resubscribe(f,v),this.updateVideoAvailability(u),this.handleIndexVideosPausedAtSource(),u.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(u);const _=S.allVideoSendingSourcesExcludingSelf(h);this.areVideoSourcesEqual(E,_)||this.context.audioVideoController.forEachObserver(T=>{e.Maybe.of(T.remoteVideoSourcesDidChange).map(w=>w.bind(T)(_))})}areVideoSourcesEqual(u,h){if(u.length!==h.length)return!1;const S=s((E,_)=>E.attendee.attendeeId.localeCompare(_.attendee.attendeeId),"compare"),f=[...u].sort(S),v=[...h].sort(S);for(let E=0;E<f.length;E++)if(f[E].attendee.attendeeId!==v[E].attendee.attendeeId)return!1;return!0}resubscribe(u,h){const S=u.wantsResubscribe(),f=(this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX)&&h.wantsResubscribe(),v=S||f;if(this.logger.info(`should resubscribe: ${v} (downlink: ${S} uplink: ${f})`),!v)return;const E=u.chooseSubscriptions();this.context.videosToReceive=E.truncate(this.context.videoSubscriptionLimit),E.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=h.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${f} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(u){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const h=new m.default;h.remoteVideoAvailable=!this.context.videosToReceive.empty(),h.canStartLocalVideo=!u.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(h))&&(this.context.lastKnownVideoAvailability=h.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(f=>f.bind(S)(h.clone()))}))}handleSupportedVideoReceiveCodecIntersection(u){if(this.context.videoSendCodecPreferences===void 0)return;const h=[];let S=!1;for(const f of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(v=>f.equals(v))){this.logger.info(`Skipping ${f.codecName} since the codec has been identfied as degraded`);continue}for(const v of u.supportedReceiveCodecIntersection)if(f.equals(l.default.fromSignaled(v))){h.push(f);break}}if(h.length>0){const f=h.find(v=>this.context.prioritizedSendVideoCodecCapabilities.some(E=>v.equals(E)));this.context.currentVideoSendCodec!==void 0&&(f===void 0||!this.context.currentVideoSendCodec.equals(f))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=h}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const u=this.context.videoStreamIndex.streamsPausedAtSource();for(const h of this.context.videoTileController.getAllVideoTiles()){const S=h.state();u.contain(S.streamId)?h.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):h.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(u){super(u.logger),this.context=u,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");a.default=i},457099596:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5009059128));let m=s(class extends p.default{run(){return this.fn().then(()=>{})}constructor(l,r,n="RunnableTask"){super(l),this.fn=r,this.taskName=n}},"RunnableTask");a.default=m},7680112541:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(e,t,i,o){function u(h){return h instanceof i?h:new i(function(S){S(h)})}return s(u,"adopt"),new(i||(i=Promise))(function(h,S){function f(_){try{E(o.next(_))}catch(T){S(T)}}s(f,"fulfilled");function v(_){try{E(o.throw(_))}catch(T){S(T)}}s(v,"rejected");function E(_){_.done?h(_.value):u(_.value).then(f,v)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9091803745)),g=p(c(7969706599)),l=c(4136617125),r=p(c(5009059128));let n=s(class oh extends r.default{run(){return d(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===g.default.ReceivedSignalFrame&&t.message.type===l.SdkSignalFrame.Type.DATA_MESSAGE)for(const i of t.message.dataMessage.messages){const o=new m.default(i.ingestTimeNs/1e6,i.topic,i.data,i.senderAttendeeId,i.senderExternalUserId,i.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,i,o){if(!oh.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(i.length>oh.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(i,o,u)=>{if(this.context.signalingClient.ready()){let h;o instanceof Uint8Array?h=o:typeof o=="string"?h=new TextEncoder().encode(o):h=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(i,h,u);const S=l.SdkDataMessagePayload.create();S.topic=i,S.lifetimeMs=u,S.data=h;const f=l.SdkDataMessageFrame.create();f.messages=[S],this.context.signalingClient.sendDataMessage(f)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");a.default=n,n.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),n.DATA_SIZE=2048},8872868578:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5009059128)),g=p(c(6013191119));let l=s(class extends m.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return d(this,void 0,void 0,function*(){for(const n of this.tasksToRunSerially){this.getStatus()===g.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${n.name()}`),this.currentTask=n,yield n.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${n.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const i of t)i.setParent(this)}},"SerialGroupTask");a.default=l},5976676062:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(e,t,i,o){function u(h){return h instanceof i?h:new i(function(S){S(h)})}return s(u,"adopt"),new(i||(i=Promise))(function(h,S){function f(_){try{E(o.next(_))}catch(T){S(T)}}s(f,"fulfilled");function v(_){try{E(o.throw(_))}catch(T){S(T)}}s(v,"rejected");function E(_){_.done?h(_.value):u(_.value).then(f,v)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5546774952)),g=p(c(8006173476)),l=p(c(182939685)),r=p(c(5009059128));let n=s(class extends r.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return d(this,void 0,void 0,function*(){const t=this.context.peer;let o=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(o=new l.default(o).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(o=new l.default(o).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new m.default().requiresDisablingH264Encoding()&&(o=new l.default(o).removeH264SupportFromSendSection().sdp);const u=this.context.audioVideoController.configuration.credentials.attendeeId;if(new g.default(u).hasModality(g.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(o=new l.default(o).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new l.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(o=new l.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new l.default(o).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const f=new l.default(o).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(f)}this.logger.debug(()=>`local description is >>>${o}<<<`);const S={type:"offer",sdp:o,toJSON:null};yield new Promise((f,v)=>d(this,void 0,void 0,function*(){this.cancelPromise=E=>{v(E)};try{yield t.setLocalDescription(S),f()}catch(E){v(E)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");a.default=n},339097629:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(e,t,i,o){function u(h){return h instanceof i?h:new i(function(S){S(h)})}return s(u,"adopt"),new(i||(i=Promise))(function(h,S){function f(_){try{E(o.next(_))}catch(T){S(T)}}s(f,"fulfilled");function v(_){try{E(o.throw(_))}catch(T){S(T)}}s(v,"rejected");function E(_){_.done?h(_.value):u(_.value).then(f,v)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8006173476)),g=p(c(182939685)),l=p(c(8804723777)),r=p(c(5009059128));let n=s(class extends r.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return d(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new g.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new g.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new g.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new g.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new g.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const u=this.context.activeVideoInput;if(u!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,f=new m.default(S).hasModality(m.default.MODALITY_CONTENT),v=u.getVideoTracks()[0];f&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===l.default.av1Main().codecName?(v.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(v.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const h={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(h)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((i,o)=>d(this,void 0,void 0,function*(){const u=s(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",u),i())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",u),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",u);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),u()}catch(h){o(h)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");a.default=n},3248483798:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(S,f,v,E){function _(T){return T instanceof v?T:new v(function(w){w(T)})}return s(_,"adopt"),new(v||(v=Promise))(function(T,w){function M(k){try{O(E.next(k))}catch(A){w(A)}}s(M,"fulfilled");function R(k){try{O(E.throw(k))}catch(A){w(A)}}s(R,"rejected");function O(k){k.done?T(k.value):_(k.value).then(M,R)}s(O,"step"),O((E=E.apply(S,f||[])).next())})},p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(7551081659)),g=p(c(9447989038)),l=p(c(182939685)),r=p(c(3475297719)),n=c(5393388022),e=p(c(7969706599)),t=p(c(3735795291)),i=c(4136617125),o=c(8071414974),u=p(c(5009059128));let h=s(class extends u.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){let f="";if(this.context.peer&&this.context.peer.localDescription&&(f=new l.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let O=0,k=0;this.context.videoCaptureAndEncodeParameter&&(O=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),k=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const A={rid:"hi",maxBitrate:k*1e3,maxFramerate:O,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([A])}const v=this.fixUpSubscriptionOrder(f,this.context.videoSubscriptions),E=this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX;let _,T=f;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(T=new l.default(T).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const O=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";_=this.textCompressor.compress(T,O),this.context.logger.info(`Compressed the SDP message from ${T.length} to ${_.length} bytes.`),f=""}this.context.previousSdpOffer=new l.default(f);const w=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,f,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,v,E,this.context.videoStreamIndex.localStreamDescriptions(),!0,_);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!n.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(w.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,v.map(O=>O===0?0:this.context.videoStreamIndex.groupIdForStreamId(O)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(w)}`),this.context.signalingClient.subscribe(w);const M=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(M)}`);let R="";M.compressedSdpAnswer&&M.compressedSdpAnswer.length?(R=this.textCompressor.decompress(M.compressedSdpAnswer,this.context.previousSdpAnswerAsString),R.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${M.compressedSdpAnswer.length} to ${R.length} bytes.`),this.context.sdpAnswer=R):this.context.sdpAnswer=M.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(M)})}fixUpSubscriptionOrder(f,v){if(this.context.transceiverController.getMidForStreamId===void 0)return v;const E=new Map;for(const w of v){const M=this.context.transceiverController.getMidForStreamId(w);if(M===void 0){w!==0&&this.logger.warn(`Could not find MID for stream ID: ${w}`);continue}E.set(M,w)}const _=new l.default(f).mediaSections(),T=[];for(const w of _)if(w.mediaType==="video")if(w.direction==="recvonly"){const M=E.get(w.mid);if(M===void 0){this.logger.warn(`Could not find stream ID for MID: ${w.mid}`);continue}T.push(M)}else T.push(0);return this.logger.info(`Fixed up ${JSON.stringify(v)} to ${JSON.stringify(T)} (may be same))}`),T}receiveSubscribeAck(){return new Promise((f,v)=>{const E=this.context;let _=s(class{cancel(){this.signalingClient.removeObserver(this),v(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(M){if(M.isConnectionTerminated()){const O=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${M.closeCode} and reason: ${M.closeReason}`;E.logger.warn(O);let k=g.default.TaskFailed;M.closeCode>=4500&&M.closeCode<4600&&(k=g.default.SignalingInternalServerError),E.audioVideoController.handleMeetingSessionStatus(new m.default(k),new Error(O));return}if(M.type!==e.default.ReceivedSignalFrame||M.message.type!==i.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const R=M.message.suback;f(R)}constructor(M){this.signalingClient=M}},"Interceptor");const T=new _(this.context.signalingClient);this.context.signalingClient.registerObserver(T),this.taskCanceler=T})}constructor(f){super(f.logger),this.context=f,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new r.default(f.logger)}},"SubscribeAndReceiveSubscribeAckTask");a.default=h},6013191119:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.IDLE="IDLE",d.RUNNING="RUNNING",d.CANCELED="CANCELED",d.FINISHED="FINISHED"})(c||(c={})),a.default=c},7638277718:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5824864644)),g=p(c(5009059128));let l=s(class extends g.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return d(this,void 0,void 0,function*(){const n=new m.default(this.timeoutMs);n.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{n.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");a.default=l},4098780146:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9447989038)),g=p(c(5009059128));let l=s(class extends g.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.NoAttendeePresent}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return d(this,void 0,void 0,function*(){const n=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const i=s((o,u,h,S,f)=>{n===o&&u&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)})})}constructor(n){super(n.logger),this.context=n,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");a.default=l},2392158736:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(t,i,o,u){function h(S){return S instanceof o?S:new o(function(f){f(S)})}return s(h,"adopt"),new(o||(o=Promise))(function(S,f){function v(T){try{_(u.next(T))}catch(w){f(w)}}s(v,"fulfilled");function E(T){try{_(u.throw(T))}catch(w){f(w)}}s(E,"rejected");function _(T){T.done?S(T.value):h(T.value).then(v,E)}s(_,"step"),_((u=u.apply(t,i||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5983965185)),g=p(c(3237015968)),l=p(c(3937896393)),r=p(c(9337558969)),n=p(c(9649641385));let e=s(class{setEncodingParameters(i){return d(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!i||i.size===0)return;const u=Array.from(i.values()),h=o.getParameters();if(!h.encodings||h.encodings.length===0)h.encodings=u;else for(const S of h.encodings)for(const f of u){if((S.rid||f.rid)&&S.rid!==f.rid)continue;let v;for(v in f)v==="rid"||v==="codecPayloadType"||f.hasOwnProperty(v)&&(S[v]=f[v])}yield o.setParameters(h)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(i){return d(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||i<=0)return;const u=o.getParameters();u.encodings||(u.encodings=[{}]);for(const h of u.encodings)h.maxBitrate=i*1e3;yield o.setParameters(u)})}setPeer(i){this.peer=i}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(i){return this._localCameraTransceiver?i===this._localCameraTransceiver.sender.track||i===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var i,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(i=this.meetingSessionContext)===null||i===void 0?void 0:i.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(i){return d(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(i),!0)})}setAudioInput(i){return d(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,i)})}setVideoInput(i){return d(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,i)})}updateVideoTransceivers(i,o){if(!this.useTransceivers())return o.array();const u=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(u,i,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(i,o,u){const h=u.array();i.length!==0&&!i[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(i,o,h)):i.length!==0&&this.updateTransceiverWithStop(i,o,h);for(const S of h){const f=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,f),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),f),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${f.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(i,o,u){let h=1;this.videoSubscriptions=[0];for(const S of i){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let f=!1;const v=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&v!==void 0){for(const[E,_]of u.entries())if(o.StreamIdsInSameGroup(v,_)){S.direction="recvonly",this.videoSubscriptions[h]=_,f=!0,this.streamIdToTransceiver.delete(v),this.streamIdToTransceiver.set(_,S),u.splice(E,1);break}}if(!f){this.videoSubscriptions[h]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[E,_]of this.streamIdToTransceiver.entries())S.mid===_.mid&&(this.streamIdToTransceiver.delete(E),this.groupIdToTransceiver.delete(o.groupIdForStreamId(E)))}h+=1}}updateTransceiverWithoutStop(i,o,u){let h=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[h]=0,S.direction!=="inactive"){const f=o.streamIdForTrack("v_"+S.mid);if(f!==void 0){for(const[v,E]of u.entries())if(o.StreamIdsInSameGroup(f,E)){S.direction="recvonly",this.videoSubscriptions[h]=E,this.streamIdToTransceiver.delete(f),this.streamIdToTransceiver.set(E,S),u.splice(v,1);break}}}h+=1}h=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&u.length>0){S.direction="recvonly";const f=u.shift();this.videoSubscriptions[h]=f,this.streamIdToTransceiver.set(f,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(f),S)}else if(this.videoSubscriptions[h]===0){S.direction="inactive";for(const[f,v]of this.streamIdToTransceiver.entries())S===v&&(this.streamIdToTransceiver.delete(f),this.groupIdToTransceiver.delete(o.groupIdForStreamId(f)))}h+=1}}getMidForStreamId(i){var o;return(o=this.streamIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid}setStreamIdForMid(i,o){for(const[u,h]of this.streamIdToTransceiver.entries())if(h.mid===i){this.streamIdToTransceiver.delete(u),this.streamIdToTransceiver.set(o,h);return}}getMidForGroupId(i){var o,u;return(u=(o=this.groupIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid)!==null&&u!==void 0?u:void 0}transceiverIsVideo(i){return i.receiver&&i.receiver.track&&i.receiver.track.kind==="video"||i.sender&&i.sender.track&&i.sender.track.kind==="video"}debugDumpTransceivers(){let i="",o=0;for(const u of this.peer.getTransceivers())this.transceiverIsVideo(u)&&(i+=`transceiver index=${o} mid=${u.mid} subscription=${this.videoSubscriptions[o]} direction=${u.direction}
`,o+=1);return i}setTransceiverInput(i,o){return d(this,void 0,void 0,function*(){i&&(o?i.direction="sendrecv":i.direction="inactive",yield i.sender.replaceTrack(o))})}forEachRedMetricsObserver(i){for(const o of this.redMetricsObservers)n.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(i)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new m.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var i,o;const u=!!window.RTCRtpScriptTransform,h=!!RTCRtpSender.prototype.createEncodedStreams;if(u)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(h)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([r.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const f=new g.default;f.currentTimestampMs=Date.now(),f.ssrc=S.data.ssrc,f.totalAudioPacketsLost=S.data.totalAudioPacketsLost,f.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,f.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,f.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(f)}},u)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(h){const S=this._localAudioTransceiver.sender.createEncodedStreams(),f=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:f},[S.readable,S.writable,f.readable,f.writable])}(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(i,o){var u;const h=this.peer.addTransceiver(i,o);if(!(!((u=this.peer.getConfiguration())===null||u===void 0)&&u.encodedInsertableStreams)||!this.audioRedWorker)return h;const S=!!window.RTCRtpScriptTransform,f=!!RTCRtpSender.prototype.createEncodedStreams;if(S)h.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),h.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(f){const v=h.sender.createEncodedStreams(),E=h.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:v,receive:E},[v.readable,v.writable,E.readable,E.writable])}return h}destroyAudioRedWorkerAndStates(){var i,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(i){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:i.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:i.get("opus")}))}metricsDidReceive(i){const{currentTimestampMs:o}=i,u=i.getRTCStatsReport();let h=0,S=0,f=0;u.forEach(M=>{M.kind==="audio"&&(M.type==="outbound-rtp"?S=M.packetsSent:M.type==="remote-inbound-rtp"&&(h=M.timestamp,f=M.packetsLost))}),(this.audioMetricsHistory.length===0||h>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:h,totalPacketsSent:S,totalPacketsLost:f}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const v=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),E=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),_=Math.max(v,E),[T,w]=l.default.getNumRedundantEncodingsForPacketLoss(_);if(w){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const M=o-this.lastAudioRedTurnOffTimestampMs,R=o-this.lastHighPacketLossEventTimestampMs;if(M>=this.audioRedPacketLossLongEvalPeriodMs&&R<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,T)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:T})}maybeResetHoldDownTimer(i){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=i)}lossPercent(i){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,u=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,h=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=i){const f=h-this.audioMetricsHistory[S].totalPacketsLost,v=u-this.audioMetricsHistory[S].totalPacketsSent,E=100*(f/v);return Math.max(0,Math.min(E,100))}return 0}shouldUpdateAudioRedWorkerEncodings(i,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(i),!1):o<this.currentNumRedundantEncodings&&i-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(i),!0)}addRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.add(i)}removeRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.delete(i)}constructor(i,o,u){this.logger=i,this.browserBehavior=o,this.meetingSessionContext=u,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");a.default=e},8213452704:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(372560720));let g=s(class $d extends m.default{setEncodingParameters(r){return d(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(let i=0;i<t.encodings.length;i++)t.encodings[i].rid===m.default.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.LOW_LEVEL_NAME),t.encodings[i]),t.encodings[i].rid===m.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.HIGH_LEVEL_NAME),t.encodings[i]);yield n.setParameters(t),this.logVideoTransceiverParameters()})}constructor(r,n,e){super(r,n,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<$d.NAME_ARR_ASCENDING.length;i++){const o=$d.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:$d.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");a.default=g,g.NAME_ARR_ASCENDING=["low","hi"],g.BITRATE_ARR_ASCENDING=[300,1200]},372560720:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(2392158736));let g=s(class os extends m.default{setEncodingParameters(r){return d(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(const i of t.encodings)i.rid===os.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(os.LOW_LEVEL_NAME),i),i.rid===os.MID_LEVEL_NAME&&this.copyEncodingParams(r.get(os.MID_LEVEL_NAME),i),i.rid===os.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(os.HIGH_LEVEL_NAME),i);yield n.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(r){return d(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var r,n;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((n=(r=this.meetingSessionContext)===null||r===void 0?void 0:r.audioProfile)===null||n===void 0)&&n.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const n=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of n)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(r,n){n.active=r.active,n.maxBitrate=r.maxBitrate,n.scaleResolutionDownBy=r.scaleResolutionDownBy,n.maxFramerate=r.maxFramerate}constructor(r,n,e){super(r,n,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let i=0;i<os.NAME_ARR_ASCENDING.length;i++){const o=os.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:os.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastTransceiverController");a.default=g,g.LOW_LEVEL_NAME="low",g.MID_LEVEL_NAME="mid",g.HIGH_LEVEL_NAME="hi",g.NAME_ARR_ASCENDING=["low","mid","hi"],g.BITRATE_ARR_ASCENDING=[200,400,1100]},161472916:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(2392158736));let m=s(class extends p.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(l,r,n){super(l,r,n)}},"VideoOnlyTransceiverController");a.default=m},6391477986:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const d=c(4497810965);a.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let p=s(class{subscribeToTranscriptEvent(g){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(a.TRANSCRIPTION_DATA_MESSAGE_TOPIC,l=>{for(const r of d.TranscriptEventConverter.from(l))for(const n of this.transcriptEventCallbacks)n(r)}),this.transcriptEventCallbacks.add(g)}unsubscribeFromTranscriptEvent(g){this.transcriptEventCallbacks.delete(g),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(g){this.realtimeController=g,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");a.default=p},4042214483:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"Transcript");a.default=c},8928051514:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptAlternative");a.default=c},3886666628:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptEntity");a.default=c},4497810965:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0}),a.TranscriptEventConverter=void 0;const p=c(4136617125),m=d(c(4042214483)),g=d(c(2832046333)),l=d(c(8532168277)),r=d(c(2855080400)),n={[p.SdkTranscriptionStatus.Type.STARTED]:l.default.STARTED,[p.SdkTranscriptionStatus.Type.INTERRUPTED]:l.default.INTERRUPTED,[p.SdkTranscriptionStatus.Type.RESUMED]:l.default.RESUMED,[p.SdkTranscriptionStatus.Type.STOPPED]:l.default.STOPPED,[p.SdkTranscriptionStatus.Type.FAILED]:l.default.FAILED};let e=s(class{static from(i){let o;try{o=p.SdkTranscriptFrame.decode(i.data)}catch(h){throw new Error("Cannot decode transcript data message: "+h)}const u=[];for(const h of o.events)if(h.status){const S=n[h.status.type];if(!S)continue;const f=new g.default;f.type=S,f.eventTimeMs=h.status.eventTime,f.transcriptionRegion=h.status.transcriptionRegion,f.transcriptionConfiguration=h.status.transcriptionConfiguration,h.status.message&&(f.message=h.status.message),u.push(f)}else if(h.transcript){const S=new m.default;S.results=[];for(const f of h.transcript.results){const v={channelId:f.channelId,isPartial:f.isPartial,resultId:f.resultId,startTimeMs:f.startTime,endTimeMs:f.endTime,alternatives:[]};if(f.languageCode&&(v.languageCode=f.languageCode),f.languageIdentification&&f.languageIdentification.length>0){v.languageIdentification=[];for(const E of f.languageIdentification){const _={languageCode:E.languageCode,score:E.score};v.languageIdentification.push(_)}}for(const E of f.alternatives){const _={items:[],transcript:E.transcript};for(const T of E.items){const w={content:T.content,attendee:{attendeeId:T.speakerAttendeeId,externalUserId:T.speakerExternalUserId},startTimeMs:T.startTime,endTimeMs:T.endTime,type:null};switch(T.vocabularyFilterMatch&&(w.vocabularyFilterMatch=T.vocabularyFilterMatch),T.hasOwnProperty("stable")&&(w.stable=T.stable),T.hasOwnProperty("confidence")&&(w.confidence=T.confidence),T.type){case p.SdkTranscriptItem.Type.PRONUNCIATION:w.type=r.default.PRONUNCIATION;break;case p.SdkTranscriptItem.Type.PUNCTUATION:w.type=r.default.PUNCTUATION;break}_.items.push(w)}for(const T of E.entities){_.entities||(_.entities=[]);const w={category:T.category,confidence:T.confidence,content:T.content,startTimeMs:T.startTime,endTimeMs:T.endTime};T.type&&(w.type=T.type),_.entities.push(w)}v.alternatives.push(_)}S.results.push(v)}u.push(S)}return u}},"TranscriptEventConverter");a.TranscriptEventConverter=e},6128278192:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptItem");a.default=c},2855080400:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.PRONUNCIATION="pronunciation",d.PUNCTUATION="punctuation"})(c||(c={})),a.default=c},2600940909:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptLanguageWithScore");a.default=c},3373821534:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptResult");a.default=c},2832046333:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptionStatus");a.default=c},8532168277:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.STARTED="started",d.INTERRUPTED="interrupted",d.RESUMED="resumed",d.STOPPED="stopped",d.FAILED="failed"})(c||(c={})),a.default=c},3894274294:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(888724265),m=d(c(6885109343));let g=s(class Ma{getParserResult(){var r,n;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((r=this.parserResult)===null||r===void 0?void 0:r.os.name)||Ma.UNAVAILABLE,osVersion:((n=this.parserResult)===null||n===void 0?void 0:n.os.version)||Ma.UNAVAILABLE,sdkVersion:m.default.sdkVersion,sdkName:m.default.sdkName}}constructor(r){var n,e,t,i,o,u,h;try{this.parserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():void 0}catch(S){r.error(S.message)}this.browserMajorVersion=((t=(e=(n=this.parserResult)===null||n===void 0?void 0:n.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||Ma.UNAVAILABLE,this.browserName=((i=this.parserResult)===null||i===void 0?void 0:i.browser.name)||Ma.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||Ma.UNAVAILABLE,this.deviceName=[((u=this.parserResult)===null||u===void 0?void 0:u.device.vendor)||"",((h=this.parserResult)===null||h===void 0?void 0:h.device.model)||""].join(" ").trim()||Ma.UNAVAILABLE}},"DefaultUserAgentParser");a.default=g,g.UNAVAILABLE="Unavailable"},3054351868:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{add(p){return new Promise((m,g)=>{this.queue=this.queue.then(p).then(m).catch(g)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");a.default=c},6527539809:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.None=a.Some=a.Maybe=void 0;let c=s(class{static of(g){return g==null?p.of():d.of(g)}},"Maybe");a.Maybe=c;let d=s(class TS{map(g){return c.of(g(this.value))}flatMap(g){return g(this.value)}get(){return this.value}getOrElse(g){return this.value}defaulting(g){return c.of(this.getOrElse(g))}static of(g){if(g==null)throw new Error("value is ${value}");return new TS(g)}constructor(g){this.value=g,this.isSome=!0,this.isNone=!1}},"Some");a.Some=d;let p=s(class Kd{get(){throw new Error("value is null")}getOrElse(g){return g}map(g){return new Kd}flatMap(g){return new Kd}defaulting(g){return c.of(this.getOrElse(g))}static of(){return new Kd}constructor(){this.isSome=!1,this.isNone=!0}},"None");a.None=p},5685319565:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0}),a.getRandomValues=a.getFormattedOffset=a.getDefaultAssetSpec=a.toLowerCasePropertyNames=a.isIFramed=a.wait=void 0;const p=d(c(6885109343));function m(t){return new Promise(i=>setTimeout(i,t))}s(m,"wait"),a.wait=m;function g(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}s(g,"isIFramed"),a.isIFramed=g;function l(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(l):Object.keys(t).reduce((i,o)=>{const u=t[o],h=typeof u=="object"?l(u):u;return i[o.toLowerCase()]=h,i},{})}s(l,"toLowerCasePropertyNames"),a.toLowerCasePropertyNames=l;function r(){const t=p.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}s(r,"getDefaultAssetSpec"),a.getDefaultAssetSpec=r;function n(t){const i=Math.abs(t),o=t<=0?"+":"-",u=Math.floor(i/60).toString().padStart(2,"0"),h=Math.floor(i%60).toString().padStart(2,"0");return`${o}${u}:${h}`}s(n,"getFormattedOffset"),a.getFormattedOffset=n;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}s(e,"getRandomValues"),a.getRandomValues=e},6885109343:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5546774952)),m=d(c(5554749645));let g=s(class Uc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return m.default.semverString}static get sdkVersionSemVer(){var r,n,e,t;const i=m.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(r=i==null?void 0:i.groups)===null||r===void 0?void 0:r.major,minor:(n=i==null?void 0:i.groups)===null||n===void 0?void 0:n.minor,patch:(e=i==null?void 0:i.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=i==null?void 0:i.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return m.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const r=new p.default;return`${r.name()}-${r.majorVersion()}`}static urlWithVersion(r){const n=new URL(r);return n.searchParams.append(Uc.X_AMZN_VERSION,Uc.sdkVersion),n.searchParams.append(Uc.X_AMZN_USER_AGENT,Uc.sdkUserAgentLowResolution),n.toString()}},"Versioning");a.default=g,g.X_AMZN_VERSION="X-Amzn-Version",g.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},5554749645:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={hash:"d7eee1f",raw:"v3.23.0",semverString:"3.23.0"}},1695739824:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class CS{equal(p){let m=p.captureWidth()===this.cameraWidth&&p.captureHeight()===this.cameraHeight&&p.captureFrameRate()===this.cameraFrameRate&&p.encodeBitrates().length===this.encodeBitrates().length&&p.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&p.encodeWidths().length===this.encodeWidths().length&&p.encodeHeights().length===this.encodeHeights().length&&p.isSVCEncoding()===this.isSVC;if(m){for(let g=0;g<p.encodeWidths().length;g++)if(p.encodeWidths()[g]!==this.encodeWidths()[g]||p.encodeHeights()[g]!==this.encodeHeights()[g]||p.encodeBitrates()[g]!==this.encodeBitrates()[g]||p.encodeScaleResolutionDownBy()[g]!==this.encodeScaleResolutionDownBy()[g])return m=!1,m}return m}clone(){return new CS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(p,m,g,l,r,n=1,e=!1){this.cameraWidth=p,this.cameraHeight=m,this.cameraFrameRate=g,this.maxEncodeBitrateKbps=l,this.isSimulcast=r,this.scaleResolutionDownBy=n,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");a.default=c},9677745702:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1865309432));let m=s(class IS{reset(){this.optimalReceiveSet=new p.default,this.subscribedReceiveSet=new p.default,this.videoSources=void 0}updateIndex(l){this.videoIndex=l,this.optimalReceiveSet=this.calculateOptimalReceiveSet(l)}updateMetrics(l){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(l){this.videoSources=l,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(l){const r=new p.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return r;const n=l.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),i=new Map;for(const u of t)n.contain(u.streamId)&&i.set(u.attendeeId,u);let o=0;for(const u of e){const h=u.attendee.attendeeId;if(i.has(h)){const S=i.get(h);if(o+S.maxBitrateKbps<=IS.maxReceiveBitrateKbps)r.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return r}constructor(l){this.selfAttendeeId=l,this.reset()}},"AllHighestVideoBandwidthPolicy");a.default=m,m.maxReceiveBitrateKbps=15e3},681222244:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1865309432));let m=s(class{reset(){}updateIndex(l){}updateMetrics(l){}wantsResubscribe(){return!1}chooseSubscriptions(){return new p.default}},"NoVideoDownlinkBandwidthPolicy");a.default=m},2178339051:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.TargetDisplaySize=void 0;var c;(function(d){d[d.Low=0]="Low",d[d.Medium=1]="Medium",d[d.High=2]="High",d[d.Maximum=3]="Maximum"})(c=a.TargetDisplaySize||(a.TargetDisplaySize={})),a.default=c},3368465086:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(805846668)),m=d(c(5393388022)),g=d(c(3803169181)),l=c(8071414974),r=d(c(8681774825)),n=d(c(3348721919));let e=s(class wS extends r.default{static createConfig(){const i=new n.default;return i.serverSideNetworkAdaption=m.default.None,i}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(i){super.updateIndex(i);const o=l.VideoPreferences.prepare();let u=!1;const h=i.remoteStreamDescriptions();for(const S of h)o.some(f=>f.attendeeId===S.attendeeId)||(S.attendeeId.endsWith(p.default.Modality)?(o.add(new g.default(S.attendeeId,1)),u=!0):o.add(new g.default(S.attendeeId,2)));u?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(i){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(i){super(i,wS.createConfig()),this.logger=i,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");a.default=e},3803169181:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(2178339051)),m=d(c(4829581265));let g=s(class jl{partialCompare(r){return this.priority-r.priority}equals(r){return this.attendeeId===r.attendeeId&&this.targetSize===r.targetSize&&this.priority===r.priority&&this.degradationPreference===r.degradationPreference}clone(){return new jl(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(r){switch(r){case p.default.Maximum:return jl.MAXIMUM_BITRATE_KBPS;case p.default.High:return jl.HIGH_BITRATE_KBPS;case p.default.Medium:return jl.MID_BITRATE_KBPS;case p.default.Low:return jl.LOW_BITRATE_KBPS}}constructor(r,n,e,t){this.attendeeId=r,this.priority=n,this.targetSize=e!==void 0?e:p.default.Maximum,this.degradationPreference=t!==void 0?t:m.default.Balanced}},"VideoPreference");a.default=g,g.LOW_BITRATE_KBPS=300,g.MID_BITRATE_KBPS=600,g.HIGH_BITRATE_KBPS=1500,g.MAXIMUM_BITRATE_KBPS=1e4},8071414974:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.VideoPreferences=a.MutableVideoPreferences=a.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const p=d(c(4804743313));function m(e,t,i){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||i===void 0)return[];const o=new Array,u=new Map,h=new Map;for(const S of t){const f=e.transceiverController.getMidForGroupId(S);if(f===void 0)continue;const v=e.videoStreamIndex.attendeeIdForGroupId(S);u.set(v,f),h.set(v,S)}for(const S of i){const f=new p.default,v=u.get(S.attendeeId);v!==void 0&&(f.mid=v,f.attendeeId=S.attendeeId,f.groupId=h.get(S.attendeeId),f.priority=Number.MAX_SAFE_INTEGER-S.priority,f.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),f.qualityAdaptationPreference=S.degradationPreference,o.push(f))}return o}s(m,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),a.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=m;let g=s(class sh{static default(){return new sh([])}[Symbol.iterator](){let t=0;const i=this.items;return{next(){return t<i.length?{done:!1,value:i[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,i){const o=this.items.findIndex(i);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(i=>!i.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const i of this.items)if(!t.items.some(o=>o.equals(i)))return!1;return!0}has(t){return this.items.some(i=>i.equals(t))}some(t){return this.items.some(t)}clone(){return new sh([...this.items])}sort(){this.items.sort((t,i)=>t.partialCompare(i))}modify(){return new l(this)}constructor(t=[]){this.items=t}},"ObjectSet"),l=s(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,i){this.items.has(t)&&!this.items.some(i)||(this.cow(),this.items.replaceFirst(t,i))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new g){this.items=t,this.copied=!1}},"SetBuilder"),r=s(class{add(t){this.builder.add(t)}replaceFirst(t,i){this.builder.replaceFirst(t,i)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new n(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");a.MutableVideoPreferences=r;let n=s(class ah{static prepare(){return new r(new l)}static default(){return new ah(g.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new r(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=ah.prepare();for(const i of this.items)t.add(i.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");a.VideoPreferences=n,a.default=n},8681774825:function(F,a,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(M,R,O,k){k===void 0&&(k=O),Object.defineProperty(M,k,{enumerable:!0,get:function(){return R[O]}})}:function(M,R,O,k){k===void 0&&(k=O),M[k]=R[O]}),p=this&&this.__setModuleDefault||(Object.create?function(M,R){Object.defineProperty(M,"default",{enumerable:!0,value:R})}:function(M,R){M.default=R}),m=this&&this.__importStar||function(M){if(M&&M.__esModule)return M;var R={};if(M!=null)for(var O in M)O!=="default"&&Object.prototype.hasOwnProperty.call(M,O)&&d(R,M,O);return p(R,M),R},g=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(a,"__esModule",{value:!0});const l=g(c(9898009183)),r=g(c(6502873558)),n=g(c(6132421099)),e=g(c(805846668)),t=c(1370928943),i=m(c(5393388022)),o=g(c(8050111605)),u=g(c(1865309432)),h=g(c(9677745702)),S=g(c(2178339051)),f=g(c(3803169181)),v=c(8071414974),E=g(c(3348721919)),_=g(c(4829581265));let T=s(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),w=s(class Vr{reset(){this.allHighestPolicy=new h.default(""),this.optimalReceiveSet=new u.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new u.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new u.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=Vr.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=Vr.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new T,this.prevDownlinkStats=new T,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(R){this.tileController=R,this.logger.info("tileController bound")}setWantsResubscribeObserver(R){this.wantsResubscribeObserver=R}chooseRemoteVideoSources(R){var O;if(!(!((O=this.videoPreferences)===null||O===void 0)&&O.equals(R))){if(this.videoPreferences=R==null?void 0:R.clone(),!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const k=new Array;for(const A of this.videoPreferences){const P=new o.default;P.attendee=new l.default,P.attendee.attendeeId=A.attendeeId,k.push(P)}this.allHighestPolicy.chooseRemoteVideoSources(k);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(R)}`)}}updateIndex(R){this.videoIndex=R,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(R),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const R=new Set;for(const P of this.videoIndex.remoteStreamDescriptions())R.add(P.attendeeId);const O=v.VideoPreferences.prepare(),k=R.size;let A=S.default.Maximum;k>8?A=S.default.Low:k>4&&(A=S.default.Medium);for(const P of R)O.add(new f.default(P,1,A));this.defaultVideoPreferences=O.build()}updateMetrics(R){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new T;const O=R.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=O.availableIncomingBitrate/1e3;for(const k in R.streamMetricReports){const A=Number.parseInt(k,10),P=R.streamMetricReports[A];P.direction===r.default.DOWNSTREAM&&P.mediaType===n.default.VIDEO&&(P.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=R.countPerSecond("nackCount",A)),P.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=R.countPerSecond("packetsLost",A)),P.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=R.bitsPerSecond("bytesReceived",A)/1e3))}}wantsResubscribe(){let R=!1;return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(R||(R=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?R||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),R||(R=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),R)}chooseSubscriptions(){return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(R){this.observerQueue.add(R)}removeObserver(R){this.observerQueue.delete(R)}forEachObserver(R){for(const O of this.observerQueue)R(O)}setVideoPriorityBasedPolicyConfigs(R){this.videoPriorityBasedPolicyConfig=R}calculateOptimalReceiveStreams(){var R;const O=[],k=this.videoIndex.remoteStreamDescriptions();if(k.length===0||!((R=this.videoPreferences)===null||R===void 0)&&R.isEmpty()){this.optimalReceiveStreams=[];return}const A=this.rateProbeState;this.cleanBwPausedTiles(k),this.handleAppPausedStreams(O,k);const P=new Map;for(const ze of this.getCurrentVideoPreferences())P.set(ze.attendeeId,ze);const D=k.filter(ze=>P.has(ze.attendeeId)),H=!this.streamsWithPreferenceDidChange(D),j=!this.startupPeriod&&H;if(j&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;D.sort((ze,nt)=>ze.maxBitrateKbps===nt.maxBitrateKbps?ze.streamId-nt.streamId:ze.maxBitrateKbps-nt.maxBitrateKbps);for(const ze of D)(ze.avgBitrateKbps===0||ze.avgBitrateKbps>ze.maxBitrateKbps)&&(ze.attendeeId.endsWith(e.default.Modality)&&ze.maxBitrateKbps<100?ze.maxBitrateKbps=ze.avgBitrateKbps:ze.avgBitrateKbps=ze.maxBitrateKbps);const W=new Set;for(const ze of this.getCurrentVideoPreferences()){const nt=D.filter(xe=>xe.attendeeId===ze.attendeeId);if(nt.length<3)continue;let mt=15,gt=320*480;nt.forEach(xe=>{mt=Math.max(mt,xe.maxFrameRate),gt=Math.max(gt,xe.totalPixels())}),nt.sort((xe,Ye)=>{if(ze.degradationPreference===_.default.MaintainResolution)return Math.abs(xe.maxFrameRate-Ye.maxFrameRate)<2?xe.totalPixels()-Ye.totalPixels():xe.maxFrameRate-Ye.maxFrameRate;if(ze.degradationPreference===_.default.MaintainFramerate)return xe.totalPixels()===Ye.totalPixels()?xe.maxFrameRate-Ye.maxFrameRate:xe.totalPixels()-Ye.totalPixels();{const Tt=s(rt=>rt.avgBitrateKbps*Math.pow(2,5*rt.maxFrameRate/mt*Math.pow(4,rt.totalPixels()/gt)),"weighByFramerate");return Tt(xe)-Tt(Ye)}});let Pe;for(const xe of nt){if(Pe!==void 0&&(xe.maxFrameRate<Pe.maxFrameRate&&Math.abs(Pe.maxFrameRate-xe.maxFrameRate)>2||xe.totalPixels()<Pe.totalPixels())){W.add(xe.streamId);continue}Pe=xe}}const X=D.filter(ze=>!W.has(ze.streamId));this.logger.info(`Filtered to ${JSON.stringify(X)}`);const ee={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};ee.targetDownlinkBitrate=this.determineTargetRate();const fe=this.subscribedReceiveSet.size(),oe=this.downlinkStats.bandwidthEstimateKbps,Oe=!this.videoPriorityBasedPolicyConfig.allowSubscribe(fe,oe);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=Vr.MIN_TIME_BETWEEN_SUBSCRIBE_MS,j&&Oe))return;const Xe=this.priorityPolicy(ee,X,O),ge=!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Me=0;if(!ge&&!this.startupPeriod&&H?this.rateProbeState==="Probing"?Me=this.handleProbe(O,ee.targetDownlinkBitrate):ee.deltaToNextUpgrade!==0&&(Me=this.maybeOverrideOrProbe(O,ee,Xe)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=D,this.videoPreferencesUpdated=!1,Me===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=ee.targetDownlinkBitrate;return}if(Me===2){const ze=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(D,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+ze);return}this.optimalNonPausedReceiveStreams=O.slice();const $e=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(D,O),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==A||this.optimalReceiveStreams.length!==O.length||$e!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(k,ee.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=ee.targetDownlinkBitrate,this.optimalReceiveStreams=O.slice()}calculateOptimalReceiveSet(){const R=new u.default;this.calculateOptimalReceiveStreams();for(const O of this.optimalReceiveStreams)R.add(O.streamId);if(!this.optimalReceiveSet.equal(R)){const O=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(R)} subscribedRate:${O}`)}this.optimalReceiveSet=R}determineTargetRate(){let R=0;const O=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=O),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>Vr.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||O-this.firstEstimateTimestamp>Vr.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?R=Vr.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<Vr.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),R=this.downlinkStats.usedBandwidthKbps+Vr.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):R=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?R=Vr.DEFAULT_BANDWIDTH_KBPS:R=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-Vr.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*Vr.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,R=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,R>15e3&&this.logger.warn("bwe: "+R+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(R,15e3)}setProbeState(R){if(this.rateProbeState===R)return!1;const O=Date.now();switch(R){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||O-this.lastProbeTimestamp>Vr.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=O;else return!1;break;case"Probing":if(O-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=O,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,Vr.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+R+" from "+this.rateProbeState),this.rateProbeState=R,!0}upgradeToStream(R,O){for(let k=0;k<R.length;k++)if(R[k].groupId===O.groupId){const A=O.avgBitrateKbps-R[k].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(R[k])+" to "+O),this.lastUpgradeRateKbps=A,R[k]=O,A}return R.push(O),this.lastUpgradeRateKbps=O.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(R,O){if(Date.now()-this.lastProbeTimestamp>Vr.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>Vr.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(Vr.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const k=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(R)||O>k?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=Vr.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(R,O,k){const A=this.chosenStreamsSameAsLast(R);let P=0;const D=O.targetDownlinkBitrate>Vr.LOW_BITRATE_THRESHOLD_KBPS?Vr.TARGET_RATE_CHANGE_TRIGGER_PERCENT:Vr.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,H=O.targetDownlinkBitrate*D/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!A&&Math.abs(O.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<H?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),P=1):this.targetRateBaselineForDeltaCheckKbps=O.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,P;if(A||P===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(R,k),P=0);break}else this.setProbeState("Not Probing");return P}calculateSubscribeRate(R){let O=0;for(const k of R)!this.pausedStreamIds.contain(k.streamId)&&!this.pausedBwAttendeeIds.has(k.attendeeId)&&(O+=k.maxBitrateKbps);return O}handleAppPausedStreams(R,O){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new u.default;const k=this.tileController.getAllRemoteVideoTiles();for(const A of k){const P=A.state();if(P.paused&&!this.pausedBwAttendeeIds.has(P.boundAttendeeId)){let D=O.length;for(;D--;)O[D].attendeeId===P.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+P.boundAttendeeId+" streamId: "+O[D].streamId),this.pausedStreamIds.add(O[D].streamId),this.subscribedReceiveSet.contain(O[D].streamId)&&R.push(O[D]),O.splice(D,1))}}}processBwPausedStreams(R,O){if(!this.tileController){this.logger.warn("tileController not found!");return}const k=this.getCurrentVideoPreferences();if(k&&this.shouldPauseTiles){const A=this.tileController.getAllVideoTiles();for(const P of k){const D=this.getVideoTileForAttendeeId(P.attendeeId,A),H=(D==null?void 0:D.state().paused)||!1;if(O.some(j=>j.attendeeId===P.attendeeId))H&&this.pausedBwAttendeeIds.has(P.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${P.attendeeId} due to bandwidth`),this.forEachObserver(j=>{j.tileWillBeUnpausedByDownlinkPolicy(D.id())}),this.tileController.unpauseVideoTile(D.id()),this.pausedBwAttendeeIds.delete(P.attendeeId));else{const j=R.some(W=>W.attendeeId===P.attendeeId);if(D&&j){const W=this.optimalReceiveStreams.find(X=>X.attendeeId===P.attendeeId);W!==void 0&&(H||(this.logger.info(`bwe: pausing streamId ${W.streamId} attendee ${P.attendeeId} due to bandwidth`),this.forEachObserver(X=>{X.tileWillBePausedByDownlinkPolicy(D.id())}),this.tileController.pauseVideoTile(D.id())),O.push(W)),this.pausedBwAttendeeIds.add(P.attendeeId)}else if(j){const W=this.tileController.addVideoTile();W.bindVideoStream(P.attendeeId,!1,null,0,0,0,null),this.forEachObserver(X=>{X.tileWillBePausedByDownlinkPolicy(W.id())}),W.pause(),this.logger.info(`bwe: Created video tile ${W.id()} for bw paused attendee ${P.attendeeId}`),this.pausedBwAttendeeIds.add(P.attendeeId)}}}}}cleanBwPausedTiles(R){if(!this.tileController){this.logger.warn("tileController not found!");return}const O=this.tileController.getAllRemoteVideoTiles(),k=this.getCurrentVideoPreferences();for(const A of O){const P=A.state();P.boundVideoStream||(R.some(D=>D.attendeeId===P.boundAttendeeId)?k!==void 0&&!k.some(D=>D.attendeeId===P.boundAttendeeId)&&this.tileController.removeVideoTile(P.tileId):(this.tileController.removeVideoTile(P.tileId),this.logger.info(`bwe: Removed video tile ${P.tileId} for bw paused attendee ${P.boundAttendeeId}`)))}}priorityPolicy(R,O,k){let A;const P=this.getCurrentVideoPreferences(),D=P.highestPriority();let H,j=D;for(;j!==-1;){H=-1;for(const W of P)if(W.priority===j)for(const X of O)X.attendeeId===W.attendeeId&&(k.some(ee=>ee.groupId===X.groupId)||(R.chosenTotalBitrate+X.avgBitrateKbps<=R.targetDownlinkBitrate?(k.push(X),R.chosenTotalBitrate+=X.avgBitrateKbps):R.deltaToNextUpgrade===0&&(R.deltaToNextUpgrade=X.avgBitrateKbps,A=X)));else if(W.priority>j){H=W.priority;break}for(const W of P)if(W.priority===j){for(const X of O)if(X.attendeeId===W.attendeeId){const ee=k.findIndex(fe=>fe.groupId===X.groupId&&fe.maxBitrateKbps<=X.maxBitrateKbps&&fe.avgBitrateKbps<X.avgBitrateKbps);if(ee!==-1){const fe=X.avgBitrateKbps-k[ee].avgBitrateKbps;this.hasSimulcastStreams(O,X.attendeeId,X.groupId)&&this.canUpgrade(X.avgBitrateKbps,W.targetSize,W.targetSizeToBitrateKbps(W.targetSize),X.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${X.attendeeId} group: ${X.groupId} has simulcast and can upgrade avgBitrate: ${X.avgBitrateKbps} target: ${W.targetSizeToBitrateKbps(W.targetSize)} targetTotalBitrate: ${R.targetDownlinkBitrate}`),R.chosenTotalBitrate+fe<=R.targetDownlinkBitrate?(R.chosenTotalBitrate+=fe,k[ee]=X):R.deltaToNextUpgrade===0&&(R.deltaToNextUpgrade=fe,A=X)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(W.priority>j)break;if(j===D&&R.deltaToNextUpgrade!==0)break;j=H}return A}getVideoTileForAttendeeId(R,O){for(const k of O)if(k.state().boundAttendeeId===R)return k;return null}canUpgrade(R,O,k,A){let P=!1;return(O===S.default.High||!A&&R<=k||A&&O===S.default.Medium&&R<=k)&&(P=!0),P?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${R} targetBitrateKbps: ${k}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${R} targetBitrateKbps: ${k}`),!1)}hasSimulcastStreams(R,O,k){let A=0;for(const P of R)P.attendeeId===O&&P.groupId===k&&A++;return this.logger.info(`bwe: attendeeId: ${O} groupId: ${k} hasSimulcastStreams: streamCount: ${A}`),A>1}streamsWithPreferenceDidChange(R){if(this.previousStreamsWithPreference===void 0||R.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const O of R)if(this.previousStreamsWithPreference.find(A=>A.groupId===O.groupId&&A.streamId===O.streamId&&A.maxBitrateKbps===O.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(R){if(this.optimalNonPausedReceiveStreams.length!==R.length)return!1;for(const O of this.optimalNonPausedReceiveStreams)if(!R.some(k=>k.streamId===O.streamId))return!1;return!0}policyStateLogStr(R,O){const k=this.calculateSubscribeRate(this.optimalReceiveStreams),A={targetBitrate:O,subscribedRate:k,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let P="remoteInfos: [";for(const H of R)P+=`{grpId:${H.groupId} strId:${H.streamId} maxBr:${H.maxBitrateKbps} avgBr:${H.avgBitrateKbps}}, `;P+="]";let D=`bwe: optimalReceiveSet ${JSON.stringify(A)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${P}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(D+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?D+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:D+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,D}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(R){this.serverSideNetworkAdaption=R,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[i.default.None,i.default.BandwidthProbing,i.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let R=this.getCurrentVideoPreferences();return R||(R=v.VideoPreferences.prepare().build()),R}wantsAllTemporalLayersInIndex(){return!0}constructor(R,O=E.default.Default){this.logger=R,this.videoPriorityBasedPolicyConfig=O,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===i.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=i.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");a.default=w,w.DEFAULT_BANDWIDTH_KBPS=2800,w.STARTUP_PERIOD_MS=6e3,w.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,w.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,w.LOW_BITRATE_THRESHOLD_KBPS=300,w.MIN_TIME_BETWEEN_PROBE_MS=5e3,w.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,w.MAX_HOLD_BEFORE_PROBE_MS=3e4,w.MAX_ALLOWED_PROBE_TIME_MS=6e4,w.SPURIOUS_PACKET_LOST_THRESHOLD=2,w.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},3348721919:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5393388022));let m=s(class Vc{allowSubscribe(l,r){let n=0;const e=this.currentNetworkEvent;if(r>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=r,!0;if(r<this.referenceBitrate){if(this.currentNetworkEvent=1,n=this.getSubscribeDelay(this.currentNetworkEvent,l),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>n)return this.referenceBitrate=r,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(l,r){let n=Vc.MINIMUM_DELAY_MS;const e=Vc.MAXIMUM_DELAY_MS-Vc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(l){case 1:n+=e*t*(1+r/10),n=Math.min(Vc.MAXIMUM_DELAY_MS,n);break}return n}constructor(l=0,r=0){this.networkIssueResponseDelayFactor=l,this.networkIssueRecoveryDelayFactor=r,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=p.default.BandwidthProbingAndRemoteVideoQualityAdaption,l<0?l=0:l>1&&(l=1),this.networkIssueResponseDelayFactor=l,r<0?r=0:r>1&&(r=1),this.networkIssueRecoveryDelayFactor=r}},"VideoPriorityBasedPolicyConfig");a.default=m,m.MINIMUM_DELAY_MS=2e3,m.MAXIMUM_DELAY_MS=8e3,m.Default=new m(0,0),m.UnstableNetworkPreset=new m(0,1),m.StableNetworkPreset=new m(1,0)},4829581265:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VideoQualityAdaptationPreference=void 0;var c;(function(d){d[d.Balanced=0]="Balanced",d[d.MaintainFramerate=1]="MaintainFramerate",d[d.MaintainResolution=2]="MaintainResolution"})(c=a.VideoQualityAdaptationPreference||(a.VideoQualityAdaptationPreference={})),a.default=c},3718889761:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{create(){const p={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{p.paused=!0},play:()=>(p.paused=!1,Promise.resolve())};return p}},"NoOpVideoElementFactory");a.default=c},1458156729:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return c(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");a.default=d},4353575046:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(1458156729)),g=p(c(4223139537)),l=15;let r=s(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?l:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return d(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return d(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const i=new m.default(this.canvasInput);this.sourceBuffers.push(i),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,i=new g.default){this.logger=e,this.stages=t,this.fr=l,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>d(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const u=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let h=[];h.push(this.sourceBuffers[0]);try{for(const w of this.processors)h=yield w.process(h)}catch{this.forEachObserver(M=>{M.processingDidFailToStart&&M.processingDidFailToStart()});return}this.destBuffers=h;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(M=>{M.processingDidFailToStart&&M.processingDidFailToStart()}));return}const f=S.width,v=S.height;f!==0&&v!==0&&(this.canvasOutput.width!==f&&this.canvasOutput.height!==v&&(this.canvasOutput.width=f,this.canvasOutput.height=v),this.outputCtx.drawImage(S,0,0,f,v,0,0,f,v),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(w=>{w.processingDidStart&&w.processingDidStart()})));const E=performance.now()-u,_=1e3*2/this.framerate-E,T=Math.max(0,1e3/this.framerate-E);_<=0&&this.forEachObserver(w=>{w.processingLatencyTooHigh&&w.processingLatencyTooHigh(E)}),yield this.timer.start(T,this.process.bind(this))}),this.timer=i}},"DefaultVideoFrameProcessorPipeline");a.default=r},4223139537:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,g){return c(this,void 0,void 0,function*(){this.callback=g,this.workerTimer?(this.workerTimer.onmessage=l=>{this.lastTimeout=l.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return c(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");a.default=d},7309008175:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5546774952)),g=p(c(4353575046));let l=s(class OS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(n){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(n)}chooseNewInnerDevice(n){const e=new OS(this.logger,n,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return d(this,void 0,void 0,function*(){return this.device})}transformStream(n){return d(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(n),this.inputMediaStream=n,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const n=this.device&&this.device.id;if(this.pipe.stop(),!n&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return d(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const n of this.inputMediaStream.getVideoTracks())n.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(n){this.observers.add(n)}removeObserver(n){this.observers.delete(n)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(n=>{n.processingDidStart&&n.processingDidStart()})}processingLatencyTooHigh(n){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(n)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(n=>{n.processingDidFailToStart&&n.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(n=>{n.processingDidStop&&n.processingDidStop()})}forEachObserver(n){for(const e of this.observers)setTimeout(()=>{n(e)},0)}constructor(n,e,t,i=new m.default){this.logger=n,this.device=e,this.processors=t,this.browserBehavior=i,this.observers=new Set,this.pipe=new g.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");a.default=l},3814682321:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{process(m){return c(this,void 0,void 0,function*(){return m})}destroy(){return c(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");a.default=d},8994379632:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.DeferredPromise=void 0;let c=s(class{getPromise(){return this.promise}resolvePromise(p){this.resolve(p)}resolveAndReplacePromise(p){this.resolve(p),this.promise=new Promise((m,g)=>{this.resolve=m,this.reject=g})}rejectPromise(p){this.reject(p)}rejectAndReplacePromise(p){this.reject(p),this.promise=new Promise((m,g)=>{this.resolve=m,this.reject=g})}constructor(){this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}},"DeferredPromise");a.DeferredPromise=c},8001499918:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(g,l,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{h(n.next(S))}catch(f){i(f)}}s(o,"fulfilled");function u(S){try{h(n.throw(S))}catch(f){i(f)}}s(u,"rejected");function h(S){S.done?t(S.value):e(S.value).then(o,u)}s(h,"step"),h((n=n.apply(g,l||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.VideoFxCanvasOpsManager=void 0;const p=c(2014740298);let m=s(class{getInferenceInputData(l){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(l,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(l){return d(this,void 0,void 0,function*(){if(this.streamParameters=l,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const r=document.createElement("canvas");r.width=this.streamParameters.width,r.height=this.streamParameters.height,r.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(l){return d(this,void 0,void 0,function*(){const r=l.backgroundReplacement.backgroundImageURL,n=l.backgroundReplacement.defaultColor;if(r)try{const e=yield this.loadImage(r);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(n)})}resizeAndSetReplacementImage(l){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.drawImage(l,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}resizeAndSetReplacementColor(l){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.fillStyle=l,n.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}loadImage(l){return d(this,void 0,void 0,function*(){const n=yield(yield fetch(l).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(n),new Promise((t,i)=>{e.onload=()=>{t(e)},e.onerror=o=>{i(o)}})})}constructor(l,r){this.streamParameters=l,this.outputCanvas=r,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");a.VideoFxCanvasOpsManager=m},2014740298:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.FXLIB_PATH=a.WORKER_PATH=a.CDN_BASE_PATH=a.RESOURCE_CONSTRAINTS=a.SEGMENTATION_MODEL=a.DEFAULT_STREAM_PARAMETERS=a.WORKER_MSG=void 0,a.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},a.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},a.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},a.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},a.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const c="/ml_media_fx/otherassets";a.WORKER_PATH=`${c}/worker.js`,a.FXLIB_PATH=`${c}/fxlib.js`},1314104503:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(v,E,_,T){function w(M){return M instanceof _?M:new _(function(R){R(M)})}return s(w,"adopt"),new(_||(_=Promise))(function(M,R){function O(P){try{A(T.next(P))}catch(D){R(D)}}s(O,"fulfilled");function k(P){try{A(T.throw(P))}catch(D){R(D)}}s(k,"rejected");function A(P){P.done?M(P.value):w(P.value).then(O,k)}s(A,"step"),A((T=T.apply(v,E||[])).next())})},p=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(9463981249),g=c(5963876428),l=c(7984036634),r=p(c(5546774952)),n=p(c(1831006443)),e=c(5685319565),t=p(c(6885109343)),i=p(c(1458156729)),o=c(8994379632),u=c(8001499918),h=c(2014740298),S=c(6322494344);let f=s(class $l{process(E){return d(this,void 0,void 0,function*(){return E})}fxProcess(E){return d(this,void 0,void 0,function*(){const _=E[0].asCanvasElement();this.didStreamParametersChange(_)&&(yield this.adjustProcessorForNewStreamParameters(_));try{yield this.manageSegmentationMask(_)}catch(T){throw this.logger.error(T),new Error("Video stream could not be processed")}return yield this.renderer.render(_,this.segmentationMask),E[0]=this.canvasVideoFrameBuffer,E})}noOpProcess(E){return d(this,void 0,void 0,function*(){return E})}didStreamParametersChange(E){return E.width!==this.streamParameters.width||E.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(E){return d(this,void 0,void 0,function*(){this.streamParameters.width=E.width,this.streamParameters.height=E.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return d(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:h.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:h.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(E){return d(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const _=this.canvasOpsManager.getInferenceInputData(E);this.segmentationMask=yield this.generateSegmentationMask(_),this.segmentationRateManager.completeSegmentation()}}catch(_){throw this.logger.error(_.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(E){return d(this,void 0,void 0,function*(){$l.isSharedArrayBufferSupported?(this.sharedImageData.set(E.data),this.engineWorker.postMessage({msg:h.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:h.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:E},[E.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(_){throw this.logger.error(_.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(E){return{backgroundBlur:{isEnabled:E.backgroundBlur.isEnabled,strength:E.backgroundBlur.strength},backgroundReplacement:{isEnabled:E.backgroundReplacement.isEnabled,backgroundImageURL:E.backgroundReplacement.backgroundImageURL,defaultColor:E.backgroundReplacement.defaultColor}}}setEffectConfig(E){return d(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(E,this.effectConfig))return;const _=this.cloneConfigFrom(E);try{yield this.validateEffectConfig(_)}catch(T){throw this.logger.error(T.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}_.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(_),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,_),this.effectConfig=_,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(E){return d(this,void 0,void 0,function*(){if(E.backgroundBlur.isEnabled&&E.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");E.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(E))})}validateReplacementConfig(E){return d(this,void 0,void 0,function*(){if(E.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!E.backgroundReplacement.backgroundImageURL&&!E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{E.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(E.backgroundReplacement.backgroundImageURL))}catch(T){throw this.logger.error(T.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const _=E.backgroundReplacement.defaultColor;if(_&&_!=="black"&&_!=="#000000"&&_!=="#000"){if(_.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(_))throw new Error(`Invalid hexadecimal color code for default replacement background: ${_}`);const w=document.createElement("canvas").getContext("2d"),M=w.fillStyle;if(w.fillStyle=_,w.fillStyle===M)throw new Error(`Invalid color for default replacement background: ${_}`)}})}validateProcessingBudgetPerFrame(E){if(E<h.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||E>h.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${h.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${h.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return d(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const E=this.getVideoFxAssetParams();yield this.loadEngineWorker(E),yield this.buildEngine(E),yield this.loadFxLib(E),this.renderer=constructRenderer(h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const E=e.getDefaultAssetSpec();return{assetGroup:E.assetGroup,revisionID:E.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(E,_){const T=new URL(E);for(const[w,M]of Object.entries(_))if(M!==void 0){const R=encodeURIComponent(w),O=encodeURIComponent(M);T.searchParams.set(R,O)}return T.toString()}loadEngineWorker(E){return d(this,void 0,void 0,function*(){try{const _=this.getPathFromVideoFxAssetParams(h.CDN_BASE_PATH+h.WORKER_PATH,E);this.engineWorker=yield g.loadWorker(_,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",T=>this.engineWorkerReceiver(T))}catch(_){throw this.logger.error(_.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(E){return d(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:h.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:h.CDN_BASE_PATH,sdkVersioningParams:E}});try{yield this.buildEnginePromise.getPromise()}catch(_){throw this.logger.error(_.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(E){return d(this,void 0,void 0,function*(){const _=this.getPathFromVideoFxAssetParams(h.CDN_BASE_PATH+h.FXLIB_PATH,E),T={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const w=yield m.fetchWithBehavior(_,T,{});if(!w.ok)throw new Error("Fetch failed.");const M=window.URL.createObjectURL(yield w.blob());yield new Promise((R,O)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",M),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",R),this.fxLibScript.addEventListener("error",O),document.body.appendChild(this.fxLibScript)})}catch(w){throw this.logger.error(w.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(E){const _=E.data;switch(_.msg){case h.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(_.payload);break;case h.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(_.payload.output);break;case h.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case h.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(_)}`);break}}settleEngineBuildPromise(E){E!==h.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(E){E?this.segmentationRequestPromise.resolveAndReplacePromise(E):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const E=new ImageData(new Uint8ClampedArray(this.sharedImageData),h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(E)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n.default,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return d(this,void 0,void 0,function*(){let T=!0;const w=s((O,k)=>{O&&(E.info(k),T=!1)},"checkEnv");w(typeof globalThis>"u","Browser does not have globalThis."),w(!l.supportsWorker(globalThis,E),"Browser does not support web workers."),w(!l.supportsWASM(globalThis,E),"Browser does not support wasm."),w(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const M=new r.default;w(!M.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const R=s(()=>d(this,void 0,void 0,function*(){if(_)try{const O=new $l(E);yield O.loadAssets(),yield O.destroy()}catch{return E.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(T?yield R():!1)})}static create(E,_){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return d(this,void 0,void 0,function*(){const w=new $l(E,T);try{return yield w.loadAssets(),yield w.setEffectConfig(_),w}catch(M){throw E.error(M.toString()),w.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(E){this.eventController?this.eventController=E:(this.eventController=E,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const E={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",E)}sameVideoFxConfig(E,_){return E.backgroundBlur.isEnabled===_.backgroundBlur.isEnabled&&E.backgroundBlur.strength===_.backgroundBlur.strength&&E.backgroundReplacement.backgroundImageURL===_.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor===_.backgroundReplacement.defaultColor&&E.backgroundReplacement.isEnabled===_.backgroundReplacement.isEnabled}constructor(E,_=h.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,T){this.logger=E,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new i.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(_)}catch(w){throw this.logger.error(w),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${_}`)}T&&(this.eventController=T),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,_),this.streamParameters={framerate:h.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:h.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:h.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:h.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},$l.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${$l.isSharedArrayBufferSupported}`),this.canvasOpsManager=new u.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${_}`)}},"VideoFxProcessor");a.default=f,f.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},6322494344:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VideoFxSegmentationRateManager=void 0;const d=c(2014740298);let p=s(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=d.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(g){g>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&g<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(g,l){this.logger=g,this.targetSegmentationCyclePercentage=l/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=d.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");a.VideoFxSegmentationRateManager=p},8050111605:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"VideoSource");a.default=c},1865309432:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class lh{add(p){this.ids.add(p)}array(){return Array.from(this.ids.values()).sort((m,g)=>m-g)}contain(p){return this.ids.has(p)}forEach(p){this.ids.forEach(p)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(p){if(!p)return this.ids.size===0;const m=this.array(),g=p.array();if(m.length!==g.length)return!1;for(let l=0;l<m.length;l++)if(m[l]!==g[l])return!1;return!0}clone(){return new lh(this.array())}remove(p){this.ids.delete(p)}toJSON(){return this.array()}truncate(p){const m=this.array();return new lh(m.splice(0,p))}constructor(p){this.ids=new Set(p)}},"DefaultVideoStreamIdSet");a.default=c},2469210420:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(4136617125),m=d(c(1865309432)),g=d(c(6105894327));let l=s(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(n){return n>0&&n<1e3?1:Math.trunc(n/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const n=[];return this.currentIndex.sources.forEach(e=>{const t=new g.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,n.push(t)}),n}integrateUplinkPolicyDecision(n){if(n&&n.length){const e=n[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(n){if(this.currentIndex=n,!n)return;const e=new Map;let t=!1;for(const i of n.sources){if(!e.has(i.attendeeId)){e.set(i.attendeeId,i.groupId);continue}const o=e.get(i.attendeeId);o<i.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${i.attendeeId}, replacing with newer group ID ${i.groupId}`),e.set(i.attendeeId,i.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(i=>e.get(i.attendeeId)===i.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(n){this.currentSubscribeAck=n,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,n.allocations&&n.allocations!==void 0&&n.allocations.length>0&&(this.sendVideoStreamId=n.allocations[0].streamId)}integrateBitratesFrame(n){if(this.currentIndex)for(const e of n.bitrates){const t=this.currentIndex.sources.find(i=>i.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.sources)n.add(e.streamId);return n}allVideoSendingSourcesExcludingSelf(n){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const i of this.currentIndex.sources){const{attendeeId:o,externalUserId:u,mediaType:h}=i;o!==n&&h===p.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:u}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(n,e,t,i){const o=new Set;if(this.currentIndex)for(const v of this.currentIndex.sources)v.attendeeId===n||v.mediaType!==p.SdkStreamMediaType.VIDEO||!e.has(v.attendeeId)&&!t.has(v.attendeeId)&&o.add(v.attendeeId);const u=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n),h=new Map;let S=0;u.forEach((v,E)=>{h.set(E,v[0]),S+=v[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(u,e,S,i,h),this.trySelectHighBitrateForAttendees(u,o,S,i,h);const f=new m.default;for(const v of h.values())f.add(v.streamId);return f}highestQualityStreamFromEachGroupExcludingSelf(n){const e=new m.default;if(this.currentIndex){const t=new Map;for(const i of this.currentIndex.sources)i.attendeeId===n||i.mediaType!==p.SdkStreamMediaType.VIDEO||(!t.has(i.groupId)||i.maxBitrateKbps>t.get(i.groupId).maxBitrateKbps)&&t.set(i.groupId,i);for(const i of t.values())e.add(i.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(n){return this.highestQualityStreamFromEachGroupExcludingSelf(n).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${n}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${n}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(n){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(n);return e||(this.logger.info(`stream ID ${n} does not correspond to a known attendee`),"")}attendeeIdForGroupId(n){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(n);return e||(this.logger.info(`group ID ${n} does not correspond to a known attendee`),"")}groupIdForStreamId(n){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===n)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===n)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===n)return e.groupId}}}StreamIdsInSameGroup(n,e){return this.groupIdForStreamId(n)===this.groupIdForStreamId(e)}streamIdForTrack(n){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(n)}streamIdForSSRC(n){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(n)}overrideStreamIdMappings(n,e){if(this.subscribeTrackToStreamMap){for(const[t,i]of this.subscribeTrackToStreamMap.entries())if(n===i){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,i]of this.subscribeSsrcToStreamMap.entries())if(n===i){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(n){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(n)}streamsPausedAtSource(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)n.add(e);return n}sendVideoStreamIdFromRid(n){return this.sendVideoStreamId}buildTrackToStreamMap(n){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(n){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(n){const e=new Map;for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(n){const e=new Map;if(n)for(const t of n.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(n){const e=new Map;for(const t of n.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(n){const e=new Map;if(n)for(const t of n.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(n,e,t,i,o){for(const u of e){if(t>=i)break;if(n.has(u)){const h=n.get(u);for(const S of h.reverse())if(t-o.get(u).maxBitrateKbps+S.maxBitrateKbps<i){t=t-o.get(u).maxBitrateKbps+S.maxBitrateKbps,o.set(u,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===n||t.mediaType!==p.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,i)=>{t.sort((o,u)=>o.maxBitrateKbps>u.maxBitrateKbps?1:o.maxBitrateKbps<u.maxBitrateKbps?-1:0)}),e}constructor(n){this.logger=n,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new g.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");a.default=l},8697249276:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(4136617125),m=d(c(2469210420)),g=d(c(6105894327));let l=s(class Kl extends m.default{localStreamDescriptions(){const n=[];return this._localStreamInfos.forEach(e=>{n.push(e.clone())}),n}integrateUplinkPolicyDecision(n){let e=!0,t=0;for(let i=0;i<n.length;i++){const o=n[i].maxBitrate/1e3,u=n[i].maxFramerate;if(!e||i===this._localStreamInfos.length){e=!1;const h=new g.default;h.maxBitrateKbps=o,h.maxFrameRate=u,h.disabledByUplinkPolicy=o===0,h.rid=n[i].rid,o!==0&&(h.timeEnabled=Date.now()),this._localStreamInfos.push(h),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=u,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(n){super.integrateBitratesFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of n.bitrates)e.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const i of t)e.has(i)||(this.streamIdToBitrateKbpsMap.get(i)===Kl.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(i,Kl.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(i,Kl.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let n="";for(const e of this._localStreamInfos)n+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>n)}integrateIndexFrame(n){super.integrateIndexFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of this.currentIndex.sources)i.mediaType===p.SdkStreamMediaType.VIDEO&&(e.add(i.streamId),this.streamIdToBitrateKbpsMap.has(i.streamId)||this.streamIdToBitrateKbpsMap.set(i.streamId,Kl.UNSEEN_STREAM_BITRATE));for(const i of t)e.has(i)||this.streamIdToBitrateKbpsMap.delete(i)}integrateSubscribeAckFrame(n){if(super.integrateSubscribeAckFrame(n),!n.allocations||n.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of n.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,Kl.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(n){let e=0;return this._sendRidToVideoStreamIdMap.has(n)&&(e=this._sendRidToVideoStreamIdMap.get(n)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");a.default=l,l.UNSEEN_STREAM_BITRATE=-2,l.RECENTLY_INACTIVE_STREAM_BITRATE=-1,l.NOT_SENDING_STREAM_BITRATE=0,l.BitratesMsgFrequencyMs=4e3},6105894327:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(4136617125);let p=s(class AS{clone(){const g=new AS;return g.attendeeId=this.attendeeId,g.groupId=this.groupId,g.streamId=this.streamId,g.ssrc=this.ssrc,g.trackLabel=this.trackLabel,g.maxBitrateKbps=this.maxBitrateKbps,g.avgBitrateKbps=this.avgBitrateKbps,g.maxFrameRate=this.maxFrameRate,g.timeEnabled=this.timeEnabled,g.disabledByUplinkPolicy=this.disabledByUplinkPolicy,g.width=this.width,g.height=this.height,g}toStreamDescriptor(){const g=d.SdkStreamDescriptor.create();return g.mediaType=d.SdkStreamMediaType.VIDEO,g.trackLabel=this.trackLabel,g.attendeeId=this.attendeeId,g.streamId=this.streamId,g.groupId=this.groupId,g.framerate=this.maxFrameRate,g.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,g.avgBitrateBps=this.avgBitrateKbps,g}totalPixels(){return this.width*this.height}constructor(g,l,r,n,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=g,this.groupId=l,this.streamId=r,this.maxBitrateKbps=n,this.avgBitrateKbps=e}},"VideoStreamDescription");a.default=p},8089299542:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5546774952)),m=d(c(8006173476)),g=d(c(6345807038));let l=s(class ea{static connectVideoStreamToVideoElement(n,e,t){const i=t&&n.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(ea.setVideoElementFlag(e,"disablePictureInPicture",t),ea.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==i&&(e.style.transform=i),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==n&&(e.srcObject=n,new p.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(u=>{console.warn("Error playing video in Safari",u)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n)if(e)t||(n.srcObject=null,n.style.transform="");else{if(!n.srcObject)return;n.pause(),n.style.transform="",ea.setVideoElementFlag(n,"disablePictureInPicture",!1),ea.setVideoElementFlag(n,"disableRemotePlayback",!1),n.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&ea.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new g.default}devicePixelRatioChanged(n){this.tileState.devicePixelRatio=n,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(n,e,t,i,o,u,h,S){let f=!1;this.tileState.boundAttendeeId!==n&&(this.tileState.boundAttendeeId=n,new m.default(n).hasModality(m.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),f=!0),this.tileState.boundExternalUserId!==h&&(this.tileState.boundExternalUserId=h,f=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,f=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,f=!0),this.tileState.videoStreamContentWidth!==i&&(this.tileState.videoStreamContentWidth=i,f=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,f=!0),this.tileState.streamId!==u&&(this.tileState.streamId=u,f=!0),this.tileState.groupId!==S&&(this.tileState.groupId=S,f=!0),f&&this.sendTileStateUpdate()}bindVideoElement(n){let e=!1;this.tileState.boundVideoElement!==n&&(this.tileState.boundVideoElement=n,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==n.clientWidth&&(this.tileState.videoElementCSSWidthPixels=n.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==n.clientHeight&&(this.tileState.videoElementCSSHeightPixels=n.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const n=document.createElement("canvas"),e=this.tileState.boundVideoElement;n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height;const t=n.getContext("2d");return t.drawImage(e,0,0,n.width,n.height),t.getImageData(0,0,n.width,n.height)}setStreamId(n){this.tileState.streamId=n,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?ea.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):ea.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(n,e,t){e in n&&(n[e]=t)}constructor(n,e,t,i){this.tileController=t,this.devicePixelRatioMonitor=i,this.tileState=new g.default,this.tileState.tileId=n,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");a.default=l},6345807038:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class MS{clone(){const p=new MS;return p.tileId=this.tileId,p.localTile=this.localTile,p.isContent=this.isContent,p.active=this.active,p.paused=this.paused,p.poorConnection=this.poorConnection,p.boundAttendeeId=this.boundAttendeeId,p.boundExternalUserId=this.boundExternalUserId,p.boundVideoStream=this.boundVideoStream,p.boundVideoElement=this.boundVideoElement,p.nameplate=this.nameplate,p.videoStreamContentWidth=this.videoStreamContentWidth,p.videoStreamContentHeight=this.videoStreamContentHeight,p.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,p.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,p.devicePixelRatio=this.devicePixelRatio,p.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,p.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,p.streamId=this.streamId,p.groupId=this.groupId,p}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");a.default=c},4675986794:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(t,i,o,u){function h(S){return S instanceof o?S:new o(function(f){f(S)})}return s(h,"adopt"),new(o||(o=Promise))(function(S,f){function v(T){try{_(u.next(T))}catch(w){f(w)}}s(v,"fulfilled");function E(T){try{_(u.throw(T))}catch(w){f(w)}}s(E,"rejected");function _(T){T.done?S(T.value):h(T.value).then(v,E)}s(_,"step"),_((u=u.apply(t,i||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(1197017824)),g=p(c(5163444346)),l=p(c(3563909523)),r=c(6527539809),n=p(c(8089299542));let e=s(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new g.default(new l.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return d(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const i=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,i.destroy()})}bindVideoElement(i,o){const u=this.getVideoTile(i);if(u===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${i}`);return}u.bindVideoElement(o)}unbindVideoElement(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const u=this.getVideoTile(i);if(u===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${i}`);return}this.logger.info("Unbinding the video element");const h=u.stateRef().boundVideoElement;u.bindVideoElement(null),o&&(this.logger.info("Cleaning up the video element"),n.default.disconnectVideoStreamFromVideoElement(h,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===m.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const i=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),i.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)||(this.audioVideoController.pauseReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.add(i)),o.pause())}unpauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)&&(this.audioVideoController.resumeReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.delete(i)),o.unpause())}getVideoTile(i){return this.tileMap.has(i)?this.tileMap.get(i):null}getVideoTileArea(i){const o=i.state();let u=0,h=0;return o.boundVideoElement&&(u=o.boundVideoElement.clientHeight*o.devicePixelRatio,h=o.boundVideoElement.clientWidth*o.devicePixelRatio),u*h}getAllRemoteVideoTiles(){const i=new Array;return this.tileMap.forEach((o,u)=>{(!this.currentLocalTile||u!==this.currentLocalTile.id())&&i.push(o)}),i}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const o=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const u=this.tileFactory.makeTile(o,i,this,this.devicePixelRatioMonitor);return this.tileMap.set(o,u),u}removeVideoTile(i){if(!this.tileMap.has(i))return;const o=this.tileMap.get(i);this.currentLocalTile===o&&(this.currentLocalTile=null),o.destroy(),this.tileMap.delete(i),this.audioVideoController.forEachObserver(u=>{r.Maybe.of(u.videoTileWasRemoved).map(h=>h.bind(u)(i))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(i){const o=[];for(const u of this.getAllVideoTiles()){const h=u.state();h.boundAttendeeId===i&&(this.removeVideoTile(h.tileId),o.push(h.tileId))}return o}removeAllVideoTiles(){const i=Array.from(this.tileMap.keys());for(const o of i)this.removeVideoTile(o)}sendTileStateUpdate(i){this.audioVideoController.forEachObserver(o=>{r.Maybe.of(o.videoTileDidUpdate).map(u=>u.bind(o)(i))})}haveVideoTilesWithStreams(){for(const i of this.getAllVideoTiles())if(i.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(i){return!!this.getVideoTileForAttendeeId(i)}getVideoTileForAttendeeId(i){for(const o of this.getAllVideoTiles())if(o.state().boundAttendeeId===i)return o}captureVideoTile(i){const o=this.getVideoTile(i);return o?o.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(i,o,u){this.tileFactory=i,this.audioVideoController=o,this.logger=u,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=o.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");a.default=e},1309535200:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8089299542));let m=s(class{makeTile(l,r,n,e){return new p.default(l,r,n,e)}},"DefaultVideoTileFactory");a.default=m},4207915265:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"BitrateParameters");a.default=c},1604549269:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(9131051489)),m=d(c(372560720)),g=c(6527539809),l=d(c(1695739824)),r=d(c(4207915265));let n=s(class ss{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new r.default,new r.default,new r.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const i=t.map((o,u,h)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(i),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const i=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=i!==this.numSenders,u=t.numberOfParticipants(),h=u>=0&&u<=2,S=this.shouldDisableSimulcast!==h;this.numSenders=i,this.shouldDisableSimulcast=h,this.optimalParameters=new l.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,i){return JSON.stringify(t)===JSON.stringify(i)}encodingParametersEqual(){let t=!1;for(const i of m.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(i),this.currentQualityMap.get(i)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?ss.kHiTargetBitrateKbpsFhd:ss.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?ss.kMidTargetBitrateKbpsFhd:ss.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?ss.kLowTargetBitrateKbpsFhd:ss.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const i=new Map,o=1e3,u=m.default.NAME_ARR_ASCENDING,h=t;let S=this.shouldDisableSimulcast?1:4;for(let f=0;f<u.length;f++){const v=u[f];i.set(v,{rid:v,active:h[f]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:h[f]*o}),S=S/2}return i}getQualityMapString(t){let i="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(u=>{i+=`{ rid: ${u.rid} active:${u.active} maxBitrate:${u.maxBitrate}}`}),i}getEncodingSimulcastLayer(t){switch(t){case 0:return p.default.High;case 1:return p.default.LowAndHigh;case 2:return p.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(i=>{g.Maybe.of(i.encodingSimulcastLayersDidChange).map(o=>o.bind(i)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)t(i)}constructor(t,i){this.selfAttendeeId=t,this.logger=i,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=ss.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=ss.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=ss.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new l.default(0,0,0,0,!0),this.parametersInEffect=new l.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");a.default=n,n.kHiTargetBitrateKbpsHd=1200,n.kMidTargetBitrateKbpsHd=600,n.kLowTargetBitrateKbpsHd=300,n.kHiTargetBitrateKbpsFhd=2e3,n.kMidTargetBitrateKbpsFhd=1e3,n.kLowTargetBitrateKbpsFhd=500},4499376852:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8213452704));let m=s(class{updateConnectionMetric(l){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var l,r,n,e,t,i,o,u,h,S,f,v;const E=new Map,_=1e3,T=p.default.NAME_ARR_ASCENDING;return E.set(T[0],{rid:T[0],active:!0,scaleResolutionDownBy:((r=(l=this.encodingParams)===null||l===void 0?void 0:l.low)===null||r===void 0?void 0:r.scaleResolutionDownBy)||2,maxBitrate:(((e=(n=this.encodingParams)===null||n===void 0?void 0:n.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*_,maxFramerate:((i=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||i===void 0?void 0:i.maxFramerate)||5}),E.set(T[1],{rid:T[1],active:!0,scaleResolutionDownBy:((u=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||u===void 0?void 0:u.scaleResolutionDownBy)||1,maxBitrate:(((S=(h=this.encodingParams)===null||h===void 0?void 0:h.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*_,maxFramerate:(v=(f=this.encodingParams)===null||f===void 0?void 0:f.high)===null||v===void 0?void 0:v.maxFramerate}),E}updateIndex(l){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(l){}setHasBandwidthPriority(l){}setHighResolutionFeatureEnabled(l){this.enableUhdContent=l,this.defaultHiTargetBitrateKbps=l?2e3:1200,this.defaultLowTargetBitrateKbps=l?500:300}addObserver(l){}removeObserver(l){}forEachObserver(l){}constructor(l,r){this.encodingParams=r,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");a.default=m},9136055221:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(1695739824));let g=s(class Jl{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new m.default(0,0,0,0,!1),this.parametersInEffect=new m.default(0,0,0,0,!1),this.encodingParamMap.set(Jl.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(r){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(r){var n;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=r.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),i=r.numberOfParticipants();if(this.numParticipants===i&&this.numberOfPublishedVideoSources===t){(n=this.logger)===null||n===void 0||n.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=i,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let r=1;if(this.transceiverController){const n=this.getStreamCaptureSetting();n&&(r=this.calculateEncodingParameters(n).scaleResolutionDownBy)}this.optimalParameters=new m.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,r,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let r=640;return this.getNumberOfPublishedVideoSources()>4&&(r=320),r}captureHeight(){let r=384;return this.getNumberOfPublishedVideoSources()>4&&(r=192),r}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let r=0;return this.getNumberOfPublishedVideoSources()<=2?r=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?r=this.idealMaxBandwidthKbps*2/3:r=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(r)}setIdealMaxBandwidthKbps(r){this.idealMaxBandwidthKbps=r}setHasBandwidthPriority(r){this.hasBandwidthPriority=r}setTransceiverController(r){this.transceiverController=r}setSVCEnabled(r){var n;this.enableSVC=r,(n=this.logger)===null||n===void 0||n.info(`setSVCEnabled, enable: ${r}}`)}setHighResolutionFeatureEnabled(r){this.enableHighResolutionFeature=r}updateTransceiverController(){return d(this,void 0,void 0,function*(){const r=this.getStreamCaptureSetting();if(!r)return;const n=this.calculateEncodingParameters(r);this.shouldUpdateEndcodingParameters(n)&&(this.encodingParamMap.set(Jl.encodingMapKey,n),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(r){var n,e;const t=(e=(n=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||n===void 0?void 0:n.encodings)===null||e===void 0?void 0:e[0];return r.maxBitrate!==(t==null?void 0:t.maxBitrate)||r.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(r==null?void 0:r.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(r){var n,e,t;const i=this.maxBandwidthKbps()*1e3;let o=1,u=720;if(r.height!==void 0&&r.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(u=Jl.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),Jl.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],u===480&&(!((n=this.browserBehavior)===null||n===void 0)&&n.disable480pResolutionScaleDown())&&(u=360),o=Math.max(Math.min(r.height,r.width)/u,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${r.width}x${r.height}. New dimension is ${r.width/o}x${r.height/o}`)),this.enableSVC){let h;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?h="L1T1":h="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${i}  targetHeight: ${u}  scalabilityMode: ${h}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:i,scalabilityMode:h}}else return{scaleResolutionDownBy:o,maxBitrate:i}}getStreamCaptureSetting(){var r,n,e,t;return(t=(e=(n=(r=this.transceiverController)===null||r===void 0?void 0:r.localVideoTransceiver())===null||n===void 0?void 0:n.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var r;return(r=this.numberOfPublishedVideoSources)!==null&&r!==void 0?r:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(r,n){const e=r??n,t=e.length>0&&Jl.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(r,n=!0,e=void 0,t=void 0){this.selfAttendeeId=r,this.scaleResolution=n,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");a.default=g,g.encodingMapKey="video",g.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],g.SVCCodecNames=["VP9"]},9871896518:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1695739824));let m=s(class{updateConnectionMetric(l){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(l){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new p.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(l){}setHasBandwidthPriority(l){}setHighResolutionFeatureEnabled(l){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");a.default=m},6133497304:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});function c(p){return p.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}s(c,"stringify");let d=s(class{debug(){for(var m=arguments.length,g=new Array(m),l=0;l<m;l++)g[l]=arguments[l];this.base.debug(c(g))}info(){for(var m=arguments.length,g=new Array(m),l=0;l<m;l++)g[l]=arguments[l];this.base.info(c(g))}warn(){for(var m=arguments.length,g=new Array(m),l=0;l<m;l++)g[l]=arguments[l];this.base.warn(c(g))}error(){for(var m=arguments.length,g=new Array(m),l=0;l<m;l++)g[l]=arguments[l];this.base.error(c(g))}constructor(m){this.base=m}},"LoggerAdapter");a.default=d},1644756024:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(i,o,u,h){function S(f){return f instanceof u?f:new u(function(v){v(f)})}return s(S,"adopt"),new(u||(u=Promise))(function(f,v){function E(w){try{T(h.next(w))}catch(M){v(M)}}s(E,"fulfilled");function _(w){try{T(h.throw(w))}catch(M){v(M)}}s(_,"rejected");function T(w){w.done?f(w.value):S(w.value).then(E,_)}s(T,"step"),T((h=h.apply(i,o||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(a,"__esModule",{value:!0}),a.VoiceFocusDeviceTransformer=void 0;const m=c(5700998045),g=c(5685319565),l=p(c(6885109343)),r=p(c(6133497304)),n=p(c(7141525823)),e=p(c(7075076608));let t=s(class Is{static isSupported(o,u){var h,S;const f=Is.defaultFetchBehavior(),v=u!=null&&u.logger?new r.default(u.logger):void 0,E={fetchBehavior:f,logger:v};if(g.isIFramed()){if((u==null?void 0:u.allowIFrame)===!1)return(h=u==null?void 0:u.logger)===null||h===void 0||h.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=u==null?void 0:u.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return m.VoiceFocus.isSupported(Is.augmentSpec(o),E)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,f=arguments.length>4?arguments[4]:void 0;var v,E,_;return d(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const T=((_=(E=(v=S==null?void 0:S.Meeting)===null||v===void 0?void 0:v.MeetingFeatures)===null||E===void 0?void 0:E.Audio)===null||_===void 0?void 0:_.EchoReduction)==="AVAILABLE",w=h&&h.supported===!0&&h.model.name==="ns_es"&&!T,M=o.name==="ns_es"&&!T;if(w||M)throw new Error("Echo Reduction requested but not enabled.");const R=new Is(o,u,h);return yield R.init(),R})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d(this,void 0,void 0,function*(){return new Is(o,u,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,u){return d(this,void 0,void 0,function*(){if(this.supported)try{const[S,f]=yield this.allocateVoiceFocus(!0),v=Object.assign(Object.assign({},u),{es:this.spec.name==="ns_es"});return new n.default(o,S,f,v)}catch{return}})}static destroyVoiceFocus(o){var u;return d(this,void 0,void 0,function*(){(u=o==null?void 0:o.vf)===null||u===void 0||u.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:Is.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const u={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return m.VoiceFocus.configure(this.spec,u)})}init(){var o;return d(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const u=yield this.configuration;if(!u.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(u,this.preload);try{yield this.pendingVoiceFocus}catch(h){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${h}`),this.supported=!1}})}createVoiceFocus(o,u){return d(this,void 0,void 0,function*(){const h=new e.default;return this.vf=yield m.VoiceFocus.init(o,{delegate:h,preload:u,logger:this.vfLogger}),[this.vf,h]})}allocateVoiceFocus(o){return d(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const u=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,u}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return l.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return l.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=Is.majorMinorVersion()||"unknown",u=l.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(u)}`}}constructor(o,{preload:u=!0,logger:h,fetchBehavior:S=Is.defaultFetchBehavior()},f){this.spec=o,this.supported=!0,this.logger=h,this.vfLogger=h?new r.default(h):void 0,this.preload=u,this.fetchBehavior=S,this.spec=Is.augmentSpec(this.spec),f&&(this.configuration=Promise.resolve(f))}},"VoiceFocusDeviceTransformer");a.VoiceFocusDeviceTransformer=t,a.default=t},7141525823:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5546774952));let g=s(class RS{getInnerDevice(){return this.device}mute(n){return d(this,void 0,void 0,function*(){this.node&&(n?yield this.node.disable():yield this.node.enable())})}stop(){return d(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(n){return d(this,void 0,void 0,function*(){return this.device===n&&!l(n)?this:new RS(n,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return d(this,void 0,void 0,function*(){if(this.failed)return this.device;const n=this.nodeOptions.es,e={echoCancellation:!n,googEchoCancellation:!n,googEchoCancellation2:!n,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(n){var e,t;return d(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===n)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(n,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(n,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const u=this.node,h=this.node;return{start:u,end:h}}catch(u){throw this.failed=!0,this.delegate.onFallback(this,u),u}})}observeMeetingAudio(n){return d(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.addAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(n){return d(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.removeAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}addFarEndStream(n){return d(this,void 0,void 0,function*(){!this.nodeOptions.es||!n||this.farEndStreamToAudioSourceNode.has(n)||(this.node?this.assignFarEndStreamToAudioSourceNode(n):this.farEndStreamToAudioSourceNode.set(n,null))})}removeFarendStream(n){var e;return d(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(n))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(n)})}meetingAudioStreamBecameActive(n){return d(this,void 0,void 0,function*(){this.addFarEndStream(n)})}meetingAudioStreamBecameInactive(n){return d(this,void 0,void 0,function*(){this.removeFarendStream(n)})}assignFarEndStreamToAudioSourceNode(n){const e=this.node.context.createMediaStreamSource(n);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(n,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(n,e,t,i,o=!1,u=void 0,h=new m.default,S=new Map,f=void 0,v=void 0){this.device=n,this.voiceFocus=e,this.delegate=t,this.nodeOptions=i,this.failed=o,this.node=u,this.browserBehavior=h,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=f,this.mixSourceNode=v}},"VoiceFocusTransformDevice");function l(r){return r==="default"?!0:!r||typeof r!="object"?!1:"deviceId"in r&&r.deviceId==="default"||"id"in r&&r.id==="default"}s(l,"isDefaultDevice"),a.default=g},7075076608:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{addObserver(p){this.observers.add(p)}removeObserver(p){this.observers.delete(p)}onFallback(p,m){var g;for(const l of this.observers)(g=l.voiceFocusFellBackToInnerStream)===null||g===void 0||g.call(l,p,m)}onCPUWarning(){var p;for(const m of this.observers)(p=m.voiceFocusInsufficientResources)===null||p===void 0||p.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");a.default=c},8058016368:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class Jd{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(p){let m=0;for(const g of p.streams){const l=!!g.attendeeId,r=!!g.externalUserId,n=g.hasOwnProperty("muted"),e=!!g.dropped;if(l){this.attendeeIdToStreamId[g.attendeeId]&&this.attendeeIdToStreamId[g.attendeeId]<g.audioStreamId&&delete this.attendeeIdToStreamId[g.attendeeId],this.streamIdToAttendeeId[g.audioStreamId]=g.attendeeId;const t=r?g.externalUserId:g.attendeeId;this.streamIdToExternalUserId[g.audioStreamId]=t,this.attendeeIdToStreamId[g.attendeeId]=g.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(g.attendeeId,!0,t,!1,{attendeeIndex:m++,attendeesInFrame:p.streams.length})}if(n){const t=this.streamIdToAttendeeId[g.audioStreamId],i=this.streamIdToExternalUserId[g.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,g.muted,null,i)}if(!l&&!n){const t=this.streamIdToAttendeeId[g.audioStreamId];if(t){const i=this.streamIdToExternalUserId[g.audioStreamId];delete this.streamIdToAttendeeId[g.audioStreamId],delete this.streamIdToExternalUserId[g.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[g.audioStreamId],this.attendeeIdToStreamId[t]===g.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const u of Object.keys(this.streamIdToAttendeeId)){const h=parseInt(u);if(h>g.audioStreamId&&this.streamIdToAttendeeId[h]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,i,e,{attendeeIndex:m++,attendeesInFrame:p.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(p),this.sessionReconnected=!1)}cleanUpState(p){const m=Object.values(this.streamIdToAttendeeId),g=p.streams.map(r=>r.attendeeId),l=m.filter(r=>!g.includes(r));for(const[r,n]of l.entries()){const e=this.attendeeIdToStreamId[n],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[n],n===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,t,!1,{attendeeIndex:r,attendeesInFrame:n.length})}}sendRealtimeUpdatesForAudioMetadata(p){let m=null,g=null;for(const l of p.attendeeStates){const r=this.attendeeIdForStreamId(l.audioStreamId);l.hasOwnProperty("volume")&&(m===null&&(m={}),r!==null&&(m[r]=this.normalizedVolume(l))),l.hasOwnProperty("signalStrength")&&(g===null&&(g={}),r!==null&&(g[r]=this.normalizedSignalStrength(l)))}this.applyRealtimeUpdatesForAudioMetadata(m,g)}normalizedVolume(p){const g=1-(-p.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(g,0),1)}normalizedSignalStrength(p){const m=p.signalStrength/Jd.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(p,m){for(const g in this.streamIdToAttendeeId){const l=this.streamIdToAttendeeId[g],r=this.streamIdToExternalUserId[g];let n=null,e=null;p!==null&&(p.hasOwnProperty(l)?n=p[l]:n=Jd.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(l)?e=m[l]:e=Jd.IMPLICIT_SIGNAL_STRENGTH),(n!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(l,n,null,e,r)}}attendeeIdForStreamId(p){if(p===0)return null;const m=this.streamIdToAttendeeId[p];return m||(this.warnedAboutMissingStreamIdMapping[p]||(this.warnedAboutMissingStreamIdMapping[p]=!0,this.logger.warn(`volume indicator stream id ${p} seen before being defined`)),null)}constructor(p,m,g,l,r){this.logger=p,this.realtimeController=m,this.minVolumeDecibels=g,this.maxVolumeDecibels=l,this.selfAttendeeId=r,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");a.default=c,c.MAX_SIGNAL_STRENGTH_LEVELS=2,c.IMPLICIT_VOLUME=0,c.IMPLICIT_SIGNAL_STRENGTH=1},7880459944:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6885109343)),m=d(c(5638612424));let g=s(class{create(r,n,e){this.connection=new WebSocket(e?r:p.default.urlWithVersion(r),n),this.connection.binaryType="arraybuffer"}send(r){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return r instanceof Uint8Array?this.connection.send(r.buffer):this.connection.send(r),!0}catch(n){return this.logger.debug(()=>`send error: ${n.message}, websocket state=${m.default[this.readyState()]}`),!1}}close(r,n){var e;(e=this.connection)===null||e===void 0||e.close(r,n)}destroy(){this.connection=void 0}addEventListener(r,n){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(r,n)}removeEventListener(r,n){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(r,n)}readyState(){if(!this.connection)return m.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return m.default.Connecting;case WebSocket.OPEN:return m.default.Open;case WebSocket.CLOSING:return m.default.Closing;case WebSocket.CLOSED:return m.default.Closed}}constructor(r){this.logger=r}},"DefaultWebSocketAdapter");a.default=g},5638612424:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.WebSocketReadyState=void 0;var c;(function(d){d[d.None=0]="None",d[d.Connecting=1]="Connecting",d[d.Open=2]="Open",d[d.Closing=3]="Closing",d[d.Closed=4]="Closed"})(c=a.WebSocketReadyState||(a.WebSocketReadyState={})),a.default=c},7729790247:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(T,w,M,R){function O(k){return k instanceof M?k:new M(function(A){A(k)})}return s(O,"adopt"),new(M||(M=Promise))(function(k,A){function P(j){try{H(R.next(j))}catch(W){A(W)}}s(P,"fulfilled");function D(j){try{H(R.throw(j))}catch(W){A(W)}}s(D,"rejected");function H(j){j.done?k(j.value):O(j.value).then(P,D)}s(H,"step"),H((R=R.apply(T,w||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.decideModel=a.measureAndDecideExecutionApproach=void 0;const p=c(5963876428),m=c(7984036634),g=3,l=2.5,r=2.63,n=.6,e=.65,t=.5,i=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let u=s(class{roundtrip(w,M,R){return new Promise((O,k)=>{this.worker.then(A=>{let P;P=s(D=>{const{message:H,key:j}=D.data;H===M&&j===R&&(A.removeEventListener("message",P),O(D.data))},"listener"),A.addEventListener("message",P),A.postMessage(w)}).catch(A=>{var P;(P=this.logger)===null||P===void 0||P.error("Failed to load worker.",A),k(A)})})}supportsSIMD(w){const M="simd",R=w||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,O={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:R,key:M};return this.roundtrip(O,"simd-support",M).then(k=>k.supports)}measure(w,M){const R=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,O=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,k=w?O:R,A=`bench:${w}`,P={message:"measure",fetchBehavior:this.fetchBehavior,budget:M,path:k,key:A};return this.roundtrip(P,"measurement",A).then(D=>{if(D.measurement)return D.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(w=>{var M;(M=this.logger)===null||M===void 0||M.debug("Stopping estimator worker."),w.terminate()}).catch(w=>{})}constructor(w,M){this.fetchConfig=w,this.logger=M;const R=`${w.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:w.headers,escapedQueryString:w.escapedQueryString},this.worker=p.loadWorker(R,"VoiceFocusEstimator",this.fetchBehavior,M)}},"Estimator");const h=s((T,w)=>T===1?n:w==="quality"?e*T:t*T,"inlineScoreMultiplier"),S=s(function(T){let{supportsSIMD:w,supportsSAB:M,duration:R,executionPreference:O="auto",simdPreference:k,variantPreference:A="auto",namePreference:P="default",usagePreference:D,executionQuantaPreference:H=g}=T,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,W=arguments.length>2?arguments[2]:void 0;const ee=k==="force"||k!=="disable"&&w,fe=R!==-1,oe=fe?(ee?l:r)/R:0,Oe=ee?j.simd:j.wasm,Xe=fe?h(H,D)*oe:0,ge=fe?i*oe:0,Me=P,$e=s(gt=>({supported:!1,reason:gt}),"unsupported");if(fe){if(oe<Oe.noSupport)return $e(`Performance score ${oe} worse than threshold ${Oe.noSupport}.`)}else if(O==="auto"||A==="auto")return $e(`Missing explicit execution (${O}) or variant (${A}) preference, but no scoring performed.`);W==null||W.debug(`Bench duration ${R} yields inline score ${Xe} and worker score ${ge}.`);const ze=s((gt,Pe,xe)=>({supported:!0,useSIMD:ee,processor:gt,executionApproach:Pe,variant:xe,executionQuanta:Pe==="inline"?H:void 0,name:Me}),"succeed"),nt=s((gt,Pe,xe)=>Pe!=="auto"?!fe||gt>xe[Pe]?Pe:"failed":gt>xe.c100?"c100":gt>xe.c50?"c50":gt>xe.c20?"c20":gt>xe.c10?"c10":"failed","resolveVariant"),mt=s(gt=>{switch(gt||"auto"){case"auto":{let Pe=mt("inline"),xe=mt("worker");return W==null||W.debug(`Reducing auto preference: ${JSON.stringify(Pe)} vs ${JSON.stringify(xe)}`),Pe.supported===!1||xe.supported===!1?xe:Pe.variant===xe.variant||Pe.variant==="c50"?Pe:xe}case"worker":return m.supportsSharedArrayBuffer(globalThis,window,W)?mt("worker-sab"):mt("worker-postMessage");case"inline":{const Pe=nt(Xe,A,Oe.inline);return Pe==="failed"?$e(`Performance score ${Xe} not sufficient for inline use with variant preference ${A}.`):ze("voicefocus-inline-processor","inline",Pe)}case"worker-sab":{if(!M){const xe="Requested worker-sab but no SharedArrayBuffer support.";return W==null||W.warn(xe),{supported:!1,reason:xe}}const Pe=nt(ge,A,Oe.worker);return Pe==="failed"?$e(`Performance score ${ge} not sufficient for worker use with variant preference ${A}.`):ze("voicefocus-worker-sab-processor","worker-sab",Pe)}case"worker-postMessage":{const Pe=nt(ge,A,Oe.worker);if(Pe==="failed")return $e(`Performance score ${ge} not sufficient for worker use.`);if(Me==="ns_es"){const xe="Requested echo suppression but postMessage executor does not support it.";return W==null||W.warn(xe),{supported:!1,reason:xe}}return ze("voicefocus-worker-postMessage-processor","worker-postMessage",Pe)}}},"reducePreference");return mt(O)},"decideExecutionApproach"),f=s((T,w,M,R)=>d(void 0,void 0,void 0,function*(){const O={supportsSIMD:T,supportsSAB:m.supportsSharedArrayBuffer(globalThis,window,M),duration:-1};if(T)return M==null||M.info("Supports SIMD: true (force)"),O;const k=!R,A=R||new u(w,M);try{const P=!m.isOldChrome(window,M)&&(yield A.supportsSIMD());return M==null||M.info(`Supports SIMD: ${P} (force: ${T})`),O.supportsSIMD=P,O}finally{k&&A.stop()}}),"featureCheck"),v=s((T,w,M,R)=>d(void 0,void 0,void 0,function*(){const O=new u(w,R);try{const k=yield f(T,w,R,O);if(k.supportsSIMD)try{return k.duration=yield O.measure(!0,M),R==null||R.info("SIMD timing:",k.duration),k}catch{R==null||R.warn("Failed SIMD estimation; falling back to non-SIMD."),k.supportsSIMD=!1}return k.duration=yield O.measure(!1,M),R==null||R.info("No-SIMD timing:",k.duration),k}catch(k){throw R==null||R.error("Could not feature check.",k),k}finally{O.stop()}}),"estimateAndFeatureCheck"),E=s(function(T,w,M){let R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return d(void 0,void 0,void 0,function*(){let O=T.executionPreference;const{usagePreference:k,variantPreference:A,namePreference:P,simdPreference:D,estimatorBudget:H,executionQuantaPreference:j}=T;k==="interactivity"&&O!=="inline"&&(M==null||M.debug(`Overriding execution preference ${O} to reflect interactivity preference.`),O="inline");const W=D==="force",X=A!=="auto",ee=O!=="auto";let fe;try{X&&ee?fe=yield f(W,w,M):fe=yield v(W,w,H,M)}catch(oe){throw M==null||M.error("Could not load estimator.",oe),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},fe),{simdPreference:D,executionPreference:O,variantPreference:A,namePreference:P,usagePreference:k,executionQuantaPreference:j}),R,M)})},"measureAndDecideExecutionApproach");a.measureAndDecideExecutionApproach=E;const _=s(T=>{let{category:w,name:M,variant:R,simd:O,url:k}=T;return`${w}-${M}-${R}-v1${O?"_simd":""}`},"decideModel");a.decideModel=_},9463981249:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isValidRevisionID=a.isValidAssetGroup=a.resolveURL=a.addQueryParams=a.withQueryString=a.withRequestHeaders=a.fetchWithBehavior=void 0;function c(e,t,i){if(!i)return fetch(e,t);const o=p(e,i),u=d(t,i);return fetch(o,u)}s(c,"fetchWithBehavior"),a.fetchWithBehavior=c;function d(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}s(d,"withRequestHeaders"),a.withRequestHeaders=d;function p(e,t){if(!(t!=null&&t.escapedQueryString))return e;const i=e.lastIndexOf("?")!==-1;return`${e}${i?"&":"?"}${t.escapedQueryString}`}s(p,"withQueryString"),a.withQueryString=p;function m(e,t){const i=Object.keys(t);if(!i.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const u of i)o.append(u,t[u]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}s(m,"addQueryParams"),a.addQueryParams=m;const g={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function l(e,t){return c(e,g,t).then(i=>i.redirected?i.url:e)}s(l,"resolveURL"),a.resolveURL=l;function r(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}s(r,"isValidAssetGroup"),a.isValidAssetGroup=r;function n(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}s(n,"isValidRevisionID"),a.isValidRevisionID=n},5963876428:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.loadWorker=void 0;const d=c(9463981249),p={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},m=s((g,l,r,n)=>{n==null||n.debug(`Loading ${l} worker from ${g}.`);let e=!1;try{e=self.origin===new URL(g).origin}catch(t){n==null||n.error("Could not compare origins.",t)}if(e){const t=d.withQueryString(g,r);return Promise.resolve(new Worker(t,{name:l}))}return d.fetchWithBehavior(g,p,r).then(t=>{if(t.ok)return t.blob().then(i=>new Worker(window.URL.createObjectURL(i)));throw new Error("Fetch failed.")})},"loadWorker");a.loadWorker=m},7984036634:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(f,v,E,_){function T(w){return w instanceof E?w:new E(function(M){M(w)})}return s(T,"adopt"),new(E||(E=Promise))(function(w,M){function R(A){try{k(_.next(A))}catch(P){M(P)}}s(R,"fulfilled");function O(A){try{k(_.throw(A))}catch(P){M(P)}}s(O,"rejected");function k(A){A.done?w(A.value):T(A.value).then(R,O)}s(k,"step"),k((_=_.apply(f,v||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.isOldChrome=a.supportsWASMStreaming=a.supportsSharedArrayBuffer=a.supportsWASM=a.supportsAudioWorklet=a.supportsWorker=a.supportsVoiceFocusWorker=a.supportsWASMPostMessage=a.isSafari=void 0;const p=c(5963876428),m=s(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),g=s(function(){const v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,E=v.match(/Safari\//),_=v.match(/Chrom(?:e|ium)\//);return!!(E&&!_)},"isSafari");a.isSafari=g;const l=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return a.isSafari(f)?!1:m(f)?(h(f)||0)<95:!0},"supportsWASMPostMessage");a.supportsWASMPostMessage=l;const r=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0,E=arguments.length>2?arguments[2]:void 0;return d(void 0,void 0,void 0,function*(){if(!a.supportsWorker(f,E))return!1;const _=`${v.paths.workers}worker-v1.js`;try{const T=yield p.loadWorker(_,"VoiceFocusTestWorker",v,E);try{T.terminate()}catch(w){E==null||E.debug("Failed to terminate worker.",w)}return!0}catch(T){return E==null||E.info("Failed to fetch and instantiate test worker",T),!1}})},"supportsVoiceFocusWorker");a.supportsVoiceFocusWorker=r;const n=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!f.Worker}catch(E){return v==null||v.info("Does not support Worker",E),!1}},"supportsWorker");a.supportsWorker=n;const e=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!f.AudioWorklet&&!!f.AudioWorkletNode}catch(E){return v==null||v.info("Does not support Audio Worklet",E),!1}},"supportsAudioWorklet");a.supportsAudioWorklet=e;const t=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!f.WebAssembly&&(!!f.WebAssembly.compile||!!f.WebAssembly.compileStreaming)}catch(E){return v==null||v.info("Does not support WASM",E),!1}},"supportsWASM");a.supportsWASM=t;const i=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,E=arguments.length>2?arguments[2]:void 0;try{return!!f.SharedArrayBuffer&&(!!v.chrome||!!f.crossOriginIsolated)}catch{return E==null||E.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");a.supportsSharedArrayBuffer=i;const o=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;var E;try{return!!(!((E=f.WebAssembly)===null||E===void 0)&&E.compileStreaming)}catch(_){return v==null||v.info("Does not support WASM streaming compilation",_),!1}},"supportsWASMStreaming");a.supportsWASMStreaming=o;const u=90,h=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!f.chrome)return}catch{}const v=f.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(v)return parseInt(v[1],10)},"chromeVersion"),S=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;const E=h(f);return E&&E<u?(v==null||v.debug(`Chrome ${E} has incomplete SIMD support.`),!0):!1},"isOldChrome");a.isOldChrome=S},6021562188:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VoiceFocusAudioWorkletNode=void 0;let c=s(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||s(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");a.VoiceFocusAudioWorkletNode=c},5700998045:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(A,P,D,H){function j(W){return W instanceof D?W:new D(function(X){X(W)})}return s(j,"adopt"),new(D||(D=Promise))(function(W,X){function ee(Oe){try{oe(H.next(Oe))}catch(Xe){X(Xe)}}s(ee,"fulfilled");function fe(Oe){try{oe(H.throw(Oe))}catch(Xe){X(Xe)}}s(fe,"rejected");function oe(Oe){Oe.done?W(Oe.value):j(Oe.value).then(ee,fe)}s(oe,"step"),oe((H=H.apply(A,P||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.getAudioInput=a.createAudioContext=a.VoiceFocus=void 0;const p=c(7729790247),m=c(9463981249),g=c(5963876428),l=c(7984036634),r=c(79783582),n=c(161673934),e=c(641640331),i={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",u="https://static.sdkassets.chime.aws",h={processors:`${u}/processors/`,workers:`${u}/workers/`,wasm:`${u}/wasm/`,models:`${u}/wasm/`},S={latencyHint:0},f={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},v=Object.assign(Object.assign({},f),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),E=Object.assign(Object.assign({},f),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),_={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:n.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:r.default}},T=s((A,P)=>{if(A!==void 0&&!m.isValidAssetGroup(A))throw new Error(`Invalid asset group ${A}`);if(P!==void 0&&!m.isValidRevisionID(P))throw new Error(`Invalid revision ID ${P}`)},"validateAssetSpec"),w=s((A,P)=>{let D;if(P.useBuiltInAGC?D=v:D=E,!A)return{audio:D};if(!A.audio)return A;if(A.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},A),{audio:A.audio===!0?D:Object.assign(Object.assign({},A.audio),D)})},"mungeConstraints"),M=s((A,P)=>`${P.models}${p.decideModel(A)}.wasm`,"urlForModel");let R=s(class PS{static isSupported(P,D){const{fetchBehavior:H,logger:j}=D||{};if(typeof globalThis>"u")return j==null||j.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!l.supportsAudioWorklet(globalThis,j))return j==null||j.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!l.supportsWASM(globalThis,j))return j==null||j.debug("Browser does not support WASM."),Promise.resolve(!1);l.supportsWASMStreaming(globalThis,j)||j==null||j.debug("Browser does not support streaming WASM compilation.");const{assetGroup:W=o,revisionID:X,paths:ee=h}=P||{};T(W,X);const fe=X?{revisionID:X}:{assetGroup:W},oe=m.addQueryParams(H,fe),Oe=Object.assign(Object.assign({},oe),{paths:ee});return l.supportsVoiceFocusWorker(globalThis,Oe,j)}static mungeExecutionPreference(P,D){const H=P===void 0||P==="auto";if(l.isSafari(globalThis)){if(H||P==="inline")return"inline";if(!H)throw new Error(`Unsupported execution preference ${P}`)}if(P==="worker-sab"&&!l.supportsSharedArrayBuffer(globalThis,globalThis,D))throw new Error(`Unsupported execution preference ${P}`);return P||"auto"}static configure(P,D){return d(this,void 0,void 0,function*(){const{fetchBehavior:H,preResolve:j,logger:W}=D||{},{category:X="voicefocus",name:ee="default",variant:fe="auto",assetGroup:oe=o,revisionID:Oe,simd:Xe="detect",executionPreference:ge="auto",executionQuantaPreference:Me,usagePreference:$e="interactivity",estimatorBudget:ze=100,paths:nt=h,thresholds:mt}=P||{};if(W==null||W.debug("Configuring Voice Focus with spec",P),X!==void 0&&X!=="voicefocus")throw new Error(`Unrecognized category ${X}`);if(ee!==void 0&&ee!=="default"&&ee!=="ns_es")throw new Error(`Unrecognized feature name ${ee}`);if(fe!==void 0&&!["auto","c100","c50","c20","c10"].includes(fe))throw new Error(`Unrecognized feature variant ${fe}`);if(Me!==void 0&&![1,2,3].includes(Me))throw new Error(`Unrecognized execution quanta preference ${Me}`);if(T(oe,Oe),Xe!==void 0&&!["detect","force","disable"].includes(Xe))throw new Error(`Unrecognized SIMD option ${Xe}`);if(ge!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(ge))throw new Error(`Unrecognized execution preference ${ge}`);if($e!==void 0&&!["quality","interactivity"].includes($e))throw new Error(`Unrecognized usage preference ${$e}`);const gt={executionPreference:this.mungeExecutionPreference(ge,W),usagePreference:$e,executionQuantaPreference:Me,variantPreference:fe,namePreference:ee,simdPreference:Xe,estimatorBudget:ze},Pe=Oe?{revisionID:Oe}:{assetGroup:oe},xe=m.addQueryParams(H,Pe),Ye=Object.assign({paths:nt},xe),Ze=yield p.measureAndDecideExecutionApproach(gt,Ye,W,mt);if(Ze.supported===!1)return{supported:!1,reason:Ze.reason};W==null||W.info("Decided execution approach",Ze);const{useSIMD:Re,processor:Tt,variant:rt,executionQuanta:Nt}=Ze,Wt={category:X||"voicefocus",name:ee||"default",variant:rt,simd:Re};if(j){const Qt=M(Wt,nt);Wt.url=yield m.resolveURL(Qt,xe)}return{fetchConfig:Ye,model:Wt,processor:Tt,executionQuanta:Nt,supported:!0}})}static init(P,D){let{delegate:H,preload:j=!0,logger:W}=D;return d(this,void 0,void 0,function*(){if(P.supported===!1)throw new Error("Voice Focus not supported. Reason: "+P.reason);const{model:X,processor:ee,fetchConfig:fe,executionQuanta:oe}=P,{simd:Oe,name:Xe}=X,{paths:ge}=fe;if(ee!=="voicefocus-inline-processor"&&ee!=="voicefocus-worker-postMessage-processor"&&ee!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${ee}`);const Me=X.url||M(X,ge);W==null||W.debug(`Using model URL ${Me}.`);const $e=`${ge.wasm}audio_buffer-v1${Oe?"_simd":""}.wasm`,ze=`${ge.wasm}resampler-v1${Oe?"_simd":""}.wasm`,nt=`${ge.workers}worker-v1.js`,{file:mt,node:gt}=_[ee],Pe=`${ge.processors}${mt}`,xe=yield g.loadWorker(nt,"VoiceFocusWorker",fe,W);if(j){W==null||W.debug("Preloading",Me);let Tt=l.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";xe.postMessage({message:Tt,preload:!0,key:"model",fetchBehavior:fe,path:Me})}const Ze={processor:ee,worker:xe,audioBufferURL:$e,resamplerURL:ze,fetchBehavior:fe,modelURL:Me,delegate:H,logger:W,numberOfInputs:Xe==="ns_es"?2:1},Re=new PS(xe,Pe,gt,Ze,oe);return Promise.resolve(Re)})}createNode(P,D){var H;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:j=P.sampleRate===16e3?16e3:48e3,enabled:W=!0,agc:X=i}=D||{},ee=D==null?void 0:D.es,fe={voiceFocusSampleRate:j,enabled:W,sendBufferCount:10,prefill:6,agc:X,executionQuanta:this.executionQuanta,supportFarendStream:ee},oe=m.withQueryString(this.processorURL,(H=this.nodeOptions)===null||H===void 0?void 0:H.fetchBehavior);return P.audioWorklet.addModule(oe).then(()=>new this.nodeConstructor(P,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:fe})))}applyToStream(P,D,H){return d(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const j=D.createMediaStreamSource(P),W=yield this.applyToSourceNode(j,D,H),X=D.createMediaStreamDestination();return W.connect(X),{node:W,source:j,destination:X,stream:X.stream}})}applyToSourceNode(P,D,H){return d(this,void 0,void 0,function*(){const j=yield this.createNode(D,H);return P.connect(j),j})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(P,D,H,j,W){this.processorURL=D,this.nodeConstructor=H,this.nodeOptions=j,this.executionQuanta=W,this.internal={worker:P,nodeOptions:j,isDestroyed:!1}}},"VoiceFocus");a.VoiceFocus=R;const O=s(function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(A)},"createAudioContext");a.createAudioContext=O;const k=s((A,P,D)=>d(void 0,void 0,void 0,function*(){var H,j;const{constraints:W,spec:X,delegate:ee,preload:fe=!0,options:oe}=P,{logger:Oe}=D,Xe=yield R.configure(X,D);if(!Xe.supported)return(H=D.logger)===null||H===void 0||H.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(W);const ge=yield R.init(Xe,{delegate:ee,preload:fe,logger:Oe}),Me=((j=P.options)===null||j===void 0?void 0:j.agc)||i,$e=yield window.navigator.mediaDevices.getUserMedia(w(W,Me));return ge.applyToStream($e,A,oe).then(ze=>ze.stream)}),"getAudioInput");a.getAudioInput=k},79783582:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(7984036634),m=c(6021562188),g=5*1e3;let l=s(class extends m.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(n,e){this.port.postMessage({message:"module-buffer",buffer:n,key:e})}onModuleLoaded(n,e){this.port.postMessage({message:"module",module:n,key:e})}enable(){return d(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return d(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var n;return d(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(n=this.worker)===null||n===void 0||n.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(n){var e,t,i;const o=n.data;switch(o.message){case"cpu":this.cpuWarningCount++;const u=Date.now(),h=this.cpuWarningLastTriggered||u,S=Math.abs(u-h);(!this.cpuWarningLastTriggered||S>g)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=u),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(i=this.logger)===null||i===void 0||i.debug("Ignoring processor message.")}}onWorkerMessage(n){const e=n.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(n,e){super(n,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:i,fetchBehavior:o,logger:u,delegate:h}=e;this.logger=u,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=h,u&&u.debug("VoiceFocusInlineNode:",t),this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");a.default=l},641640331:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(7984036634),m=c(6021562188);let g=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return d(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return d(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return d(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(r){var n;const e=r.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(r){var n;const e=r.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(r,n){super(r,n.processor,n),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:i,fetchBehavior:o,delegate:u}=n;this.delegate=u,this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:h,agc:S,supportFarendStream:f}=n.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:r.sampleRate===16e3?160:480,enabled:h,agc:S,fetchBehavior:o,model:e,supportFarendStream:f});const v=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:v,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");a.default=g},161673934:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(7984036634),m=c(6021562188),g={ready:0,enabled:1},l={disabled:0,enabled:1,stopped:2};let r=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return d(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,g.enabled,l.enabled),Atomics.notify(this.state,g.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return d(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,g.enabled,l.disabled),Atomics.notify(this.state,g.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return d(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,g.enabled,l.stopped),Atomics.notify(this.state,g.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":if(!i.shared)throw new Error("No shared state.");this.state=new Int32Array(i.shared.state),this.port.postMessage(i);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(i);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(i);break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:i,resamplerURL:o,worker:u,fetchBehavior:h,delegate:S}=t;this.delegate=S,this.worker=u,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:f,supportFarendStream:v}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:f,model:i,supportFarendStream:v});const E=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:E,key:"resampler",fetchBehavior:h,path:o})}},"VoiceFocusWorkerBufferNode");a.default=r},4499531780:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.RawSha256=void 0;var d=c(8411923784),p=function(){function m(){this.state=Int32Array.from(d.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(m,"RawSha2561"),m.prototype.update=function(g){if(this.finished)throw new Error("Attempted to update an already finished hash.");var l=0,r=g.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>d.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=g[l++],r--,this.bufferLength===d.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var g=this.bytesHashed*8,l=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(l.setUint8(this.bufferLength++,128),r%d.BLOCK_SIZE>=d.BLOCK_SIZE-8){for(var n=this.bufferLength;n<d.BLOCK_SIZE;n++)l.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<d.BLOCK_SIZE-8;n++)l.setUint8(n,0);l.setUint32(d.BLOCK_SIZE-8,Math.floor(g/4294967296),!0),l.setUint32(d.BLOCK_SIZE-4,g),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(d.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},m.prototype.hashBuffer=function(){for(var g=this,l=g.buffer,r=g.state,n=r[0],e=r[1],t=r[2],i=r[3],o=r[4],u=r[5],h=r[6],S=r[7],f=0;f<d.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(l[f*4]&255)<<24|(l[f*4+1]&255)<<16|(l[f*4+2]&255)<<8|l[f*4+3]&255;else{var v=this.temp[f-2],E=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[f-15];var _=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[f]=(E+this.temp[f-7]|0)+(_+this.temp[f-16]|0)}var T=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&u^~o&h)|0)+(S+(d.KEY[f]+this.temp[f]|0)|0)|0,w=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=h,h=u,u=o,o=i+T|0,i=t,t=e,e=n,n=T+w|0}r[0]+=n,r[1]+=e,r[2]+=t,r[3]+=i,r[4]+=o,r[5]+=u,r[6]+=h,r[7]+=S},m}();a.RawSha256=p},8411923784:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MAX_HASHABLE_LENGTH=a.INIT=a.KEY=a.DIGEST_LENGTH=a.BLOCK_SIZE=void 0,a.BLOCK_SIZE=64,a.DIGEST_LENGTH=32,a.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],a.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},7288346005:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=c(8842724253);d.__exportStar(c(9337996847),a)},9337996847:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Sha256=void 0;var d=c(8842724253),p=c(8411923784),m=c(4499531780),g=c(7626896220),l=function(){function n(e){if(this.hash=new m.RawSha256,e){this.outer=new m.RawSha256;var t=r(e),i=new Uint8Array(p.BLOCK_SIZE);i.set(t);for(var o=0;o<p.BLOCK_SIZE;o++)t[o]^=54,i[o]^=92;this.hash.update(t),this.outer.update(i);for(var o=0;o<t.byteLength;o++)t[o]=0}}return s(n,"Sha2561"),n.prototype.update=function(e){if(!((0,g.isEmptyData)(e)||this.error))try{this.hash.update((0,g.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(e){return[2,this.digestSync()]})})},n}();a.Sha256=l;function r(n){var e=(0,g.convertToBuffer)(n);if(e.byteLength>p.BLOCK_SIZE){var t=new m.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(p.BLOCK_SIZE);return i.set(e),i}s(r,"bufferFromSecret")},271264648:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.convertToBuffer=void 0;var d=c(2412280125),p=typeof Buffer<"u"&&Buffer.from?function(g){return Buffer.from(g,"utf8")}:d.fromUtf8;function m(g){return g instanceof Uint8Array?g:typeof g=="string"?p(g):ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(g)}s(m,"convertToBuffer"),a.convertToBuffer=m},7626896220:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.uint32ArrayFrom=a.numToUint8=a.isEmptyData=a.convertToBuffer=void 0;var d=c(271264648);Object.defineProperty(a,"convertToBuffer",{enumerable:!0,get:function(){return d.convertToBuffer}});var p=c(8695908309);Object.defineProperty(a,"isEmptyData",{enumerable:!0,get:function(){return p.isEmptyData}});var m=c(3332263431);Object.defineProperty(a,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var g=c(5480401346);Object.defineProperty(a,"uint32ArrayFrom",{enumerable:!0,get:function(){return g.uint32ArrayFrom}})},8695908309:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isEmptyData=void 0;function c(d){return typeof d=="string"?d.length===0:d.byteLength===0}s(c,"isEmptyData"),a.isEmptyData=c},3332263431:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.numToUint8=void 0;function c(d){return new Uint8Array([(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255])}s(c,"numToUint8"),a.numToUint8=c},5480401346:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.uint32ArrayFrom=void 0;function c(d){if(!Uint32Array.from){for(var p=new Uint32Array(d.length),m=0;m<d.length;)p[m]=d[m],m+=1;return p}return Uint32Array.from(d)}s(c,"uint32ArrayFrom"),a.uint32ArrayFrom=c},1668212732:(F,a,c)=>{"use strict";c.r(a),c.d(a,{fromHex:()=>m,toHex:()=>g});const d={},p={};for(let l=0;l<256;l++){let r=l.toString(16).toLowerCase();r.length===1&&(r=`0${r}`),d[l]=r,p[r]=l}function m(l){if(l.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const r=new Uint8Array(l.length/2);for(let n=0;n<l.length;n+=2){const e=l.slice(n,n+2).toLowerCase();if(e in p)r[n/2]=p[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return r}s(m,"fromHex");function g(l){let r="";for(let n=0;n<l.byteLength;n++)r+=d[l[n]];return r}s(g,"toHex")},9385915920:(F,a,c)=>{"use strict";const{Deflate:d,deflate:p,deflateRaw:m,gzip:g}=c(5602788515),{Inflate:l,inflate:r,inflateRaw:n,ungzip:e}=c(6716562227),t=c(7496116979);F.exports.Deflate=d,F.exports.deflate=p,F.exports.deflateRaw=m,F.exports.gzip=g,F.exports.Inflate=l,F.exports.inflate=r,F.exports.inflateRaw=n,F.exports.ungzip=e,F.exports.constants=t},5602788515:(F,a,c)=>{"use strict";const d=c(872668561),p=c(4109671863),m=c(931830944),g=c(3435039830),l=c(8713386032),r=Object.prototype.toString,{Z_NO_FLUSH:n,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:i,Z_OK:o,Z_STREAM_END:u,Z_DEFAULT_COMPRESSION:h,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:f}=c(7496116979);function v(w){this.options=p.assign({level:h,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},w||{});let M=this.options;M.raw&&M.windowBits>0?M.windowBits=-M.windowBits:M.gzip&&M.windowBits>0&&M.windowBits<16&&(M.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;let R=d.deflateInit2(this.strm,M.level,M.method,M.windowBits,M.memLevel,M.strategy);if(R!==o)throw new Error(g[R]);if(M.header&&d.deflateSetHeader(this.strm,M.header),M.dictionary){let O;if(typeof M.dictionary=="string"?O=m.string2buf(M.dictionary):r.call(M.dictionary)==="[object ArrayBuffer]"?O=new Uint8Array(M.dictionary):O=M.dictionary,R=d.deflateSetDictionary(this.strm,O),R!==o)throw new Error(g[R]);this._dict_set=!0}}s(v,"Deflate"),v.prototype.push=function(w,M){const R=this.strm,O=this.options.chunkSize;let k,A;if(this.ended)return!1;for(M===~~M?A=M:A=M===!0?i:n,typeof w=="string"?R.input=m.string2buf(w):r.call(w)==="[object ArrayBuffer]"?R.input=new Uint8Array(w):R.input=w,R.next_in=0,R.avail_in=R.input.length;;){if(R.avail_out===0&&(R.output=new Uint8Array(O),R.next_out=0,R.avail_out=O),(A===e||A===t)&&R.avail_out<=6){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(k=d.deflate(R,A),k===u)return R.next_out>0&&this.onData(R.output.subarray(0,R.next_out)),k=d.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===o;if(R.avail_out===0){this.onData(R.output);continue}if(A>0&&R.next_out>0){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(R.avail_in===0)break}return!0},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===o&&(this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg};function E(w,M){const R=new v(M);if(R.push(w,!0),R.err)throw R.msg||g[R.err];return R.result}s(E,"deflate");function _(w,M){return M=M||{},M.raw=!0,E(w,M)}s(_,"deflateRaw");function T(w,M){return M=M||{},M.gzip=!0,E(w,M)}s(T,"gzip"),F.exports.Deflate=v,F.exports.deflate=E,F.exports.deflateRaw=_,F.exports.gzip=T,F.exports.constants=c(7496116979)},6716562227:(F,a,c)=>{"use strict";const d=c(4532140493),p=c(4109671863),m=c(931830944),g=c(3435039830),l=c(8713386032),r=c(5341695802),n=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:i,Z_STREAM_END:o,Z_NEED_DICT:u,Z_STREAM_ERROR:h,Z_DATA_ERROR:S,Z_MEM_ERROR:f}=c(7496116979);function v(T){this.options=p.assign({chunkSize:1024*64,windowBits:15,to:""},T||{});const w=this.options;w.raw&&w.windowBits>=0&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),w.windowBits>=0&&w.windowBits<16&&!(T&&T.windowBits)&&(w.windowBits+=32),w.windowBits>15&&w.windowBits<48&&(w.windowBits&15||(w.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;let M=d.inflateInit2(this.strm,w.windowBits);if(M!==i)throw new Error(g[M]);if(this.header=new r,d.inflateGetHeader(this.strm,this.header),w.dictionary&&(typeof w.dictionary=="string"?w.dictionary=m.string2buf(w.dictionary):n.call(w.dictionary)==="[object ArrayBuffer]"&&(w.dictionary=new Uint8Array(w.dictionary)),w.raw&&(M=d.inflateSetDictionary(this.strm,w.dictionary),M!==i)))throw new Error(g[M])}s(v,"Inflate"),v.prototype.push=function(T,w){const M=this.strm,R=this.options.chunkSize,O=this.options.dictionary;let k,A,P;if(this.ended)return!1;for(w===~~w?A=w:A=w===!0?t:e,n.call(T)==="[object ArrayBuffer]"?M.input=new Uint8Array(T):M.input=T,M.next_in=0,M.avail_in=M.input.length;;){for(M.avail_out===0&&(M.output=new Uint8Array(R),M.next_out=0,M.avail_out=R),k=d.inflate(M,A),k===u&&O&&(k=d.inflateSetDictionary(M,O),k===i?k=d.inflate(M,A):k===S&&(k=u));M.avail_in>0&&k===o&&M.state.wrap>0&&T[M.next_in]!==0;)d.inflateReset(M),k=d.inflate(M,A);switch(k){case h:case S:case u:case f:return this.onEnd(k),this.ended=!0,!1}if(P=M.avail_out,M.next_out&&(M.avail_out===0||k===o))if(this.options.to==="string"){let D=m.utf8border(M.output,M.next_out),H=M.next_out-D,j=m.buf2string(M.output,D);M.next_out=H,M.avail_out=R-H,H&&M.output.set(M.output.subarray(D,D+H),0),this.onData(j)}else this.onData(M.output.length===M.next_out?M.output:M.output.subarray(0,M.next_out));if(!(k===i&&P===0)){if(k===o)return k=d.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,!0;if(M.avail_in===0)break}}return!0},v.prototype.onData=function(T){this.chunks.push(T)},v.prototype.onEnd=function(T){T===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function E(T,w){const M=new v(w);if(M.push(T),M.err)throw M.msg||g[M.err];return M.result}s(E,"inflate");function _(T,w){return w=w||{},w.raw=!0,E(T,w)}s(_,"inflateRaw"),F.exports.Inflate=v,F.exports.inflate=E,F.exports.inflateRaw=_,F.exports.ungzip=E,F.exports.constants=c(7496116979)},4109671863:F=>{"use strict";const a=s((c,d)=>Object.prototype.hasOwnProperty.call(c,d),"_has");F.exports.assign=function(c){const d=Array.prototype.slice.call(arguments,1);for(;d.length;){const p=d.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(const m in p)a(p,m)&&(c[m]=p[m])}}return c},F.exports.flattenChunks=c=>{let d=0;for(let m=0,g=c.length;m<g;m++)d+=c[m].length;const p=new Uint8Array(d);for(let m=0,g=0,l=c.length;m<l;m++){let r=c[m];p.set(r,g),g+=r.length}return p}},931830944:F=>{"use strict";let a=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}const c=new Uint8Array(256);for(let p=0;p<256;p++)c[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;c[254]=c[254]=1,F.exports.string2buf=p=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(p);let m,g,l,r,n,e=p.length,t=0;for(r=0;r<e;r++)g=p.charCodeAt(r),(g&64512)===55296&&r+1<e&&(l=p.charCodeAt(r+1),(l&64512)===56320&&(g=65536+(g-55296<<10)+(l-56320),r++)),t+=g<128?1:g<2048?2:g<65536?3:4;for(m=new Uint8Array(t),n=0,r=0;n<t;r++)g=p.charCodeAt(r),(g&64512)===55296&&r+1<e&&(l=p.charCodeAt(r+1),(l&64512)===56320&&(g=65536+(g-55296<<10)+(l-56320),r++)),g<128?m[n++]=g:g<2048?(m[n++]=192|g>>>6,m[n++]=128|g&63):g<65536?(m[n++]=224|g>>>12,m[n++]=128|g>>>6&63,m[n++]=128|g&63):(m[n++]=240|g>>>18,m[n++]=128|g>>>12&63,m[n++]=128|g>>>6&63,m[n++]=128|g&63);return m};const d=s((p,m)=>{if(m<65534&&p.subarray&&a)return String.fromCharCode.apply(null,p.length===m?p:p.subarray(0,m));let g="";for(let l=0;l<m;l++)g+=String.fromCharCode(p[l]);return g},"buf2binstring");F.exports.buf2string=(p,m)=>{const g=m||p.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(p.subarray(0,m));let l,r;const n=new Array(g*2);for(r=0,l=0;l<g;){let e=p[l++];if(e<128){n[r++]=e;continue}let t=c[e];if(t>4){n[r++]=65533,l+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&l<g;)e=e<<6|p[l++]&63,t--;if(t>1){n[r++]=65533;continue}e<65536?n[r++]=e:(e-=65536,n[r++]=55296|e>>10&1023,n[r++]=56320|e&1023)}return d(n,r)},F.exports.utf8border=(p,m)=>{m=m||p.length,m>p.length&&(m=p.length);let g=m-1;for(;g>=0&&(p[g]&192)===128;)g--;return g<0||g===0?m:g+c[p[g]]>m?g:m}},7775889903:F=>{"use strict";const a=s((c,d,p,m)=>{let g=c&65535|0,l=c>>>16&65535|0,r=0;for(;p!==0;){r=p>2e3?2e3:p,p-=r;do g=g+d[m++]|0,l=l+g|0;while(--r);g%=65521,l%=65521}return g|l<<16|0},"adler32");F.exports=a},7496116979:F=>{"use strict";F.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},9538018229:F=>{"use strict";const a=s(()=>{let p,m=[];for(var g=0;g<256;g++){p=g;for(var l=0;l<8;l++)p=p&1?3988292384^p>>>1:p>>>1;m[g]=p}return m},"makeTable"),c=new Uint32Array(a()),d=s((p,m,g,l)=>{const r=c,n=l+g;p^=-1;for(let e=l;e<n;e++)p=p>>>8^r[(p^m[e])&255];return p^-1},"crc32");F.exports=d},872668561:(F,a,c)=>{"use strict";const{_tr_init:d,_tr_stored_block:p,_tr_flush_block:m,_tr_tally:g,_tr_align:l}=c(8891166839),r=c(7775889903),n=c(9538018229),e=c(3435039830),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:i,Z_FULL_FLUSH:o,Z_FINISH:u,Z_BLOCK:h,Z_OK:S,Z_STREAM_END:f,Z_STREAM_ERROR:v,Z_DATA_ERROR:E,Z_BUF_ERROR:_,Z_DEFAULT_COMPRESSION:T,Z_FILTERED:w,Z_HUFFMAN_ONLY:M,Z_RLE:R,Z_FIXED:O,Z_DEFAULT_STRATEGY:k,Z_UNKNOWN:A,Z_DEFLATED:P}=c(7496116979),D=9,H=15,j=8,W=29,ee=256+1+W,fe=30,oe=19,Oe=2*ee+1,Xe=15,ge=3,Me=258,$e=Me+ge+1,ze=32,nt=42,mt=69,gt=73,Pe=91,xe=103,Ye=113,Ze=666,Re=1,Tt=2,rt=3,Nt=4,Wt=3,Qt=s((L,ve)=>(L.msg=e[ve],ve),"err"),Ot=s(L=>(L<<1)-(L>4?9:0),"rank"),hn=s(L=>{let ve=L.length;for(;--ve>=0;)L[ve]=0},"zero");let wn=s((L,ve,_e)=>(ve<<L.hash_shift^_e)&L.hash_mask,"HASH_ZLIB");const Jt=s(L=>{const ve=L.state;let _e=ve.pending;_e>L.avail_out&&(_e=L.avail_out),_e!==0&&(L.output.set(ve.pending_buf.subarray(ve.pending_out,ve.pending_out+_e),L.next_out),L.next_out+=_e,ve.pending_out+=_e,L.total_out+=_e,L.avail_out-=_e,ve.pending-=_e,ve.pending===0&&(ve.pending_out=0))},"flush_pending"),on=s((L,ve)=>{m(L,L.block_start>=0?L.block_start:-1,L.strstart-L.block_start,ve),L.block_start=L.strstart,Jt(L.strm)},"flush_block_only"),kt=s((L,ve)=>{L.pending_buf[L.pending++]=ve},"put_byte"),$t=s((L,ve)=>{L.pending_buf[L.pending++]=ve>>>8&255,L.pending_buf[L.pending++]=ve&255},"putShortMSB"),en=s((L,ve,_e,Ie)=>{let ne=L.avail_in;return ne>Ie&&(ne=Ie),ne===0?0:(L.avail_in-=ne,ve.set(L.input.subarray(L.next_in,L.next_in+ne),_e),L.state.wrap===1?L.adler=r(L.adler,ve,ne,_e):L.state.wrap===2&&(L.adler=n(L.adler,ve,ne,_e)),L.next_in+=ne,L.total_in+=ne,ne)},"read_buf"),zt=s((L,ve)=>{let _e=L.max_chain_length,Ie=L.strstart,ne,Ft,qe=L.prev_length,ft=L.nice_match;const En=L.strstart>L.w_size-$e?L.strstart-(L.w_size-$e):0,xt=L.window,Ui=L.w_mask,_i=L.prev,bn=L.strstart+Me;let zn=xt[Ie+qe-1],gn=xt[Ie+qe];L.prev_length>=L.good_match&&(_e>>=2),ft>L.lookahead&&(ft=L.lookahead);do if(ne=ve,!(xt[ne+qe]!==gn||xt[ne+qe-1]!==zn||xt[ne]!==xt[Ie]||xt[++ne]!==xt[Ie+1])){Ie+=2,ne++;do;while(xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&Ie<bn);if(Ft=Me-(bn-Ie),Ie=bn-Me,Ft>qe){if(L.match_start=ve,qe=Ft,Ft>=ft)break;zn=xt[Ie+qe-1],gn=xt[Ie+qe]}}while((ve=_i[ve&Ui])>En&&--_e!==0);return qe<=L.lookahead?qe:L.lookahead},"longest_match"),Kt=s(L=>{const ve=L.w_size;let _e,Ie,ne,Ft,qe;do{if(Ft=L.window_size-L.lookahead-L.strstart,L.strstart>=ve+(ve-$e)){L.window.set(L.window.subarray(ve,ve+ve),0),L.match_start-=ve,L.strstart-=ve,L.block_start-=ve,Ie=L.hash_size,_e=Ie;do ne=L.head[--_e],L.head[_e]=ne>=ve?ne-ve:0;while(--Ie);Ie=ve,_e=Ie;do ne=L.prev[--_e],L.prev[_e]=ne>=ve?ne-ve:0;while(--Ie);Ft+=ve}if(L.strm.avail_in===0)break;if(Ie=en(L.strm,L.window,L.strstart+L.lookahead,Ft),L.lookahead+=Ie,L.lookahead+L.insert>=ge)for(qe=L.strstart-L.insert,L.ins_h=L.window[qe],L.ins_h=wn(L,L.ins_h,L.window[qe+1]);L.insert&&(L.ins_h=wn(L,L.ins_h,L.window[qe+ge-1]),L.prev[qe&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=qe,qe++,L.insert--,!(L.lookahead+L.insert<ge)););}while(L.lookahead<$e&&L.strm.avail_in!==0)},"fill_window"),Q=s((L,ve)=>{let _e=65535;for(_e>L.pending_buf_size-5&&(_e=L.pending_buf_size-5);;){if(L.lookahead<=1){if(Kt(L),L.lookahead===0&&ve===t)return Re;if(L.lookahead===0)break}L.strstart+=L.lookahead,L.lookahead=0;const Ie=L.block_start+_e;if((L.strstart===0||L.strstart>=Ie)&&(L.lookahead=L.strstart-Ie,L.strstart=Ie,on(L,!1),L.strm.avail_out===0)||L.strstart-L.block_start>=L.w_size-$e&&(on(L,!1),L.strm.avail_out===0))return Re}return L.insert=0,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):(L.strstart>L.block_start&&(on(L,!1),L.strm.avail_out===0),Re)},"deflate_stored"),Ve=s((L,ve)=>{let _e,Ie;for(;;){if(L.lookahead<$e){if(Kt(L),L.lookahead<$e&&ve===t)return Re;if(L.lookahead===0)break}if(_e=0,L.lookahead>=ge&&(L.ins_h=wn(L,L.ins_h,L.window[L.strstart+ge-1]),_e=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),_e!==0&&L.strstart-_e<=L.w_size-$e&&(L.match_length=zt(L,_e)),L.match_length>=ge)if(Ie=g(L,L.strstart-L.match_start,L.match_length-ge),L.lookahead-=L.match_length,L.match_length<=L.max_lazy_match&&L.lookahead>=ge){L.match_length--;do L.strstart++,L.ins_h=wn(L,L.ins_h,L.window[L.strstart+ge-1]),_e=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart;while(--L.match_length!==0);L.strstart++}else L.strstart+=L.match_length,L.match_length=0,L.ins_h=L.window[L.strstart],L.ins_h=wn(L,L.ins_h,L.window[L.strstart+1]);else Ie=g(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++;if(Ie&&(on(L,!1),L.strm.avail_out===0))return Re}return L.insert=L.strstart<ge-1?L.strstart:ge-1,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):L.last_lit&&(on(L,!1),L.strm.avail_out===0)?Re:Tt},"deflate_fast"),Be=s((L,ve)=>{let _e,Ie,ne;for(;;){if(L.lookahead<$e){if(Kt(L),L.lookahead<$e&&ve===t)return Re;if(L.lookahead===0)break}if(_e=0,L.lookahead>=ge&&(L.ins_h=wn(L,L.ins_h,L.window[L.strstart+ge-1]),_e=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),L.prev_length=L.match_length,L.prev_match=L.match_start,L.match_length=ge-1,_e!==0&&L.prev_length<L.max_lazy_match&&L.strstart-_e<=L.w_size-$e&&(L.match_length=zt(L,_e),L.match_length<=5&&(L.strategy===w||L.match_length===ge&&L.strstart-L.match_start>4096)&&(L.match_length=ge-1)),L.prev_length>=ge&&L.match_length<=L.prev_length){ne=L.strstart+L.lookahead-ge,Ie=g(L,L.strstart-1-L.prev_match,L.prev_length-ge),L.lookahead-=L.prev_length-1,L.prev_length-=2;do++L.strstart<=ne&&(L.ins_h=wn(L,L.ins_h,L.window[L.strstart+ge-1]),_e=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart);while(--L.prev_length!==0);if(L.match_available=0,L.match_length=ge-1,L.strstart++,Ie&&(on(L,!1),L.strm.avail_out===0))return Re}else if(L.match_available){if(Ie=g(L,0,L.window[L.strstart-1]),Ie&&on(L,!1),L.strstart++,L.lookahead--,L.strm.avail_out===0)return Re}else L.match_available=1,L.strstart++,L.lookahead--}return L.match_available&&(Ie=g(L,0,L.window[L.strstart-1]),L.match_available=0),L.insert=L.strstart<ge-1?L.strstart:ge-1,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):L.last_lit&&(on(L,!1),L.strm.avail_out===0)?Re:Tt},"deflate_slow"),Je=s((L,ve)=>{let _e,Ie,ne,Ft;const qe=L.window;for(;;){if(L.lookahead<=Me){if(Kt(L),L.lookahead<=Me&&ve===t)return Re;if(L.lookahead===0)break}if(L.match_length=0,L.lookahead>=ge&&L.strstart>0&&(ne=L.strstart-1,Ie=qe[ne],Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne])){Ft=L.strstart+Me;do;while(Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&ne<Ft);L.match_length=Me-(Ft-ne),L.match_length>L.lookahead&&(L.match_length=L.lookahead)}if(L.match_length>=ge?(_e=g(L,1,L.match_length-ge),L.lookahead-=L.match_length,L.strstart+=L.match_length,L.match_length=0):(_e=g(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++),_e&&(on(L,!1),L.strm.avail_out===0))return Re}return L.insert=0,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):L.last_lit&&(on(L,!1),L.strm.avail_out===0)?Re:Tt},"deflate_rle"),ut=s((L,ve)=>{let _e;for(;;){if(L.lookahead===0&&(Kt(L),L.lookahead===0)){if(ve===t)return Re;break}if(L.match_length=0,_e=g(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++,_e&&(on(L,!1),L.strm.avail_out===0))return Re}return L.insert=0,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):L.last_lit&&(on(L,!1),L.strm.avail_out===0)?Re:Tt},"deflate_huff");function ot(L,ve,_e,Ie,ne){this.good_length=L,this.max_lazy=ve,this.nice_length=_e,this.max_chain=Ie,this.func=ne}s(ot,"Config");const de=[new ot(0,0,0,0,Q),new ot(4,4,8,4,Ve),new ot(4,5,16,8,Ve),new ot(4,6,32,32,Ve),new ot(4,4,16,16,Be),new ot(8,16,32,32,Be),new ot(8,16,128,128,Be),new ot(8,32,128,256,Be),new ot(32,128,258,1024,Be),new ot(32,258,258,4096,Be)],Ue=s(L=>{L.window_size=2*L.w_size,hn(L.head),L.max_lazy_match=de[L.level].max_lazy,L.good_match=de[L.level].good_length,L.nice_match=de[L.level].nice_length,L.max_chain_length=de[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=ge-1,L.match_available=0,L.ins_h=0},"lm_init");function K(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Oe*2),this.dyn_dtree=new Uint16Array((2*fe+1)*2),this.bl_tree=new Uint16Array((2*oe+1)*2),hn(this.dyn_ltree),hn(this.dyn_dtree),hn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Xe+1),this.heap=new Uint16Array(2*ee+1),hn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ee+1),hn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}s(K,"DeflateState");const q=s(L=>{if(!L||!L.state)return Qt(L,v);L.total_in=L.total_out=0,L.data_type=A;const ve=L.state;return ve.pending=0,ve.pending_out=0,ve.wrap<0&&(ve.wrap=-ve.wrap),ve.status=ve.wrap?nt:Ye,L.adler=ve.wrap===2?0:1,ve.last_flush=t,d(ve),S},"deflateResetKeep"),Ee=s(L=>{const ve=q(L);return ve===S&&Ue(L.state),ve},"deflateReset"),be=s((L,ve)=>!L||!L.state||L.state.wrap!==2?v:(L.state.gzhead=ve,S),"deflateSetHeader"),it=s((L,ve,_e,Ie,ne,Ft)=>{if(!L)return v;let qe=1;if(ve===T&&(ve=6),Ie<0?(qe=0,Ie=-Ie):Ie>15&&(qe=2,Ie-=16),ne<1||ne>D||_e!==P||Ie<8||Ie>15||ve<0||ve>9||Ft<0||Ft>O)return Qt(L,v);Ie===8&&(Ie=9);const ft=new K;return L.state=ft,ft.strm=L,ft.wrap=qe,ft.gzhead=null,ft.w_bits=Ie,ft.w_size=1<<ft.w_bits,ft.w_mask=ft.w_size-1,ft.hash_bits=ne+7,ft.hash_size=1<<ft.hash_bits,ft.hash_mask=ft.hash_size-1,ft.hash_shift=~~((ft.hash_bits+ge-1)/ge),ft.window=new Uint8Array(ft.w_size*2),ft.head=new Uint16Array(ft.hash_size),ft.prev=new Uint16Array(ft.w_size),ft.lit_bufsize=1<<ne+6,ft.pending_buf_size=ft.lit_bufsize*4,ft.pending_buf=new Uint8Array(ft.pending_buf_size),ft.d_buf=1*ft.lit_bufsize,ft.l_buf=(1+2)*ft.lit_bufsize,ft.level=ve,ft.strategy=Ft,ft.method=_e,Ee(L)},"deflateInit2"),He=s((L,ve)=>it(L,ve,P,H,j,k),"deflateInit"),Qe=s((L,ve)=>{let _e,Ie;if(!L||!L.state||ve>h||ve<0)return L?Qt(L,v):v;const ne=L.state;if(!L.output||!L.input&&L.avail_in!==0||ne.status===Ze&&ve!==u)return Qt(L,L.avail_out===0?_:v);ne.strm=L;const Ft=ne.last_flush;if(ne.last_flush=ve,ne.status===nt)if(ne.wrap===2)L.adler=0,kt(ne,31),kt(ne,139),kt(ne,8),ne.gzhead?(kt(ne,(ne.gzhead.text?1:0)+(ne.gzhead.hcrc?2:0)+(ne.gzhead.extra?4:0)+(ne.gzhead.name?8:0)+(ne.gzhead.comment?16:0)),kt(ne,ne.gzhead.time&255),kt(ne,ne.gzhead.time>>8&255),kt(ne,ne.gzhead.time>>16&255),kt(ne,ne.gzhead.time>>24&255),kt(ne,ne.level===9?2:ne.strategy>=M||ne.level<2?4:0),kt(ne,ne.gzhead.os&255),ne.gzhead.extra&&ne.gzhead.extra.length&&(kt(ne,ne.gzhead.extra.length&255),kt(ne,ne.gzhead.extra.length>>8&255)),ne.gzhead.hcrc&&(L.adler=n(L.adler,ne.pending_buf,ne.pending,0)),ne.gzindex=0,ne.status=mt):(kt(ne,0),kt(ne,0),kt(ne,0),kt(ne,0),kt(ne,0),kt(ne,ne.level===9?2:ne.strategy>=M||ne.level<2?4:0),kt(ne,Wt),ne.status=Ye);else{let qe=P+(ne.w_bits-8<<4)<<8,ft=-1;ne.strategy>=M||ne.level<2?ft=0:ne.level<6?ft=1:ne.level===6?ft=2:ft=3,qe|=ft<<6,ne.strstart!==0&&(qe|=ze),qe+=31-qe%31,ne.status=Ye,$t(ne,qe),ne.strstart!==0&&($t(ne,L.adler>>>16),$t(ne,L.adler&65535)),L.adler=1}if(ne.status===mt)if(ne.gzhead.extra){for(_e=ne.pending;ne.gzindex<(ne.gzhead.extra.length&65535)&&!(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Jt(L),_e=ne.pending,ne.pending===ne.pending_buf_size));)kt(ne,ne.gzhead.extra[ne.gzindex]&255),ne.gzindex++;ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),ne.gzindex===ne.gzhead.extra.length&&(ne.gzindex=0,ne.status=gt)}else ne.status=gt;if(ne.status===gt)if(ne.gzhead.name){_e=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Jt(L),_e=ne.pending,ne.pending===ne.pending_buf_size)){Ie=1;break}ne.gzindex<ne.gzhead.name.length?Ie=ne.gzhead.name.charCodeAt(ne.gzindex++)&255:Ie=0,kt(ne,Ie)}while(Ie!==0);ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Ie===0&&(ne.gzindex=0,ne.status=Pe)}else ne.status=Pe;if(ne.status===Pe)if(ne.gzhead.comment){_e=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Jt(L),_e=ne.pending,ne.pending===ne.pending_buf_size)){Ie=1;break}ne.gzindex<ne.gzhead.comment.length?Ie=ne.gzhead.comment.charCodeAt(ne.gzindex++)&255:Ie=0,kt(ne,Ie)}while(Ie!==0);ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Ie===0&&(ne.status=xe)}else ne.status=xe;if(ne.status===xe&&(ne.gzhead.hcrc?(ne.pending+2>ne.pending_buf_size&&Jt(L),ne.pending+2<=ne.pending_buf_size&&(kt(ne,L.adler&255),kt(ne,L.adler>>8&255),L.adler=0,ne.status=Ye)):ne.status=Ye),ne.pending!==0){if(Jt(L),L.avail_out===0)return ne.last_flush=-1,S}else if(L.avail_in===0&&Ot(ve)<=Ot(Ft)&&ve!==u)return Qt(L,_);if(ne.status===Ze&&L.avail_in!==0)return Qt(L,_);if(L.avail_in!==0||ne.lookahead!==0||ve!==t&&ne.status!==Ze){let qe=ne.strategy===M?ut(ne,ve):ne.strategy===R?Je(ne,ve):de[ne.level].func(ne,ve);if((qe===rt||qe===Nt)&&(ne.status=Ze),qe===Re||qe===rt)return L.avail_out===0&&(ne.last_flush=-1),S;if(qe===Tt&&(ve===i?l(ne):ve!==h&&(p(ne,0,0,!1),ve===o&&(hn(ne.head),ne.lookahead===0&&(ne.strstart=0,ne.block_start=0,ne.insert=0))),Jt(L),L.avail_out===0))return ne.last_flush=-1,S}return ve!==u?S:ne.wrap<=0?f:(ne.wrap===2?(kt(ne,L.adler&255),kt(ne,L.adler>>8&255),kt(ne,L.adler>>16&255),kt(ne,L.adler>>24&255),kt(ne,L.total_in&255),kt(ne,L.total_in>>8&255),kt(ne,L.total_in>>16&255),kt(ne,L.total_in>>24&255)):($t(ne,L.adler>>>16),$t(ne,L.adler&65535)),Jt(L),ne.wrap>0&&(ne.wrap=-ne.wrap),ne.pending!==0?S:f)},"deflate"),Se=s(L=>{if(!L||!L.state)return v;const ve=L.state.status;return ve!==nt&&ve!==mt&&ve!==gt&&ve!==Pe&&ve!==xe&&ve!==Ye&&ve!==Ze?Qt(L,v):(L.state=null,ve===Ye?Qt(L,E):S)},"deflateEnd"),Ae=s((L,ve)=>{let _e=ve.length;if(!L||!L.state)return v;const Ie=L.state,ne=Ie.wrap;if(ne===2||ne===1&&Ie.status!==nt||Ie.lookahead)return v;if(ne===1&&(L.adler=r(L.adler,ve,_e,0)),Ie.wrap=0,_e>=Ie.w_size){ne===0&&(hn(Ie.head),Ie.strstart=0,Ie.block_start=0,Ie.insert=0);let En=new Uint8Array(Ie.w_size);En.set(ve.subarray(_e-Ie.w_size,_e),0),ve=En,_e=Ie.w_size}const Ft=L.avail_in,qe=L.next_in,ft=L.input;for(L.avail_in=_e,L.next_in=0,L.input=ve,Kt(Ie);Ie.lookahead>=ge;){let En=Ie.strstart,xt=Ie.lookahead-(ge-1);do Ie.ins_h=wn(Ie,Ie.ins_h,Ie.window[En+ge-1]),Ie.prev[En&Ie.w_mask]=Ie.head[Ie.ins_h],Ie.head[Ie.ins_h]=En,En++;while(--xt);Ie.strstart=En,Ie.lookahead=ge-1,Kt(Ie)}return Ie.strstart+=Ie.lookahead,Ie.block_start=Ie.strstart,Ie.insert=Ie.lookahead,Ie.lookahead=0,Ie.match_length=Ie.prev_length=ge-1,Ie.match_available=0,L.next_in=qe,L.input=ft,L.avail_in=Ft,Ie.wrap=ne,S},"deflateSetDictionary");F.exports.deflateInit=He,F.exports.deflateInit2=it,F.exports.deflateReset=Ee,F.exports.deflateResetKeep=q,F.exports.deflateSetHeader=be,F.exports.deflate=Qe,F.exports.deflateEnd=Se,F.exports.deflateSetDictionary=Ae,F.exports.deflateInfo="pako deflate (from Nodeca project)"},5341695802:F=>{"use strict";function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}s(a,"GZheader"),F.exports=a},4690928475:F=>{"use strict";F.exports=s(function(p,m){let g,l,r,n,e,t,i,o,u,h,S,f,v,E,_,T,w,M,R,O,k,A,P,D;const H=p.state;g=p.next_in,P=p.input,l=g+(p.avail_in-5),r=p.next_out,D=p.output,n=r-(m-p.avail_out),e=r+(p.avail_out-257),t=H.dmax,i=H.wsize,o=H.whave,u=H.wnext,h=H.window,S=H.hold,f=H.bits,v=H.lencode,E=H.distcode,_=(1<<H.lenbits)-1,T=(1<<H.distbits)-1;e:do{f<15&&(S+=P[g++]<<f,f+=8,S+=P[g++]<<f,f+=8),w=v[S&_];t:for(;;){if(M=w>>>24,S>>>=M,f-=M,M=w>>>16&255,M===0)D[r++]=w&65535;else if(M&16){R=w&65535,M&=15,M&&(f<M&&(S+=P[g++]<<f,f+=8),R+=S&(1<<M)-1,S>>>=M,f-=M),f<15&&(S+=P[g++]<<f,f+=8,S+=P[g++]<<f,f+=8),w=E[S&T];n:for(;;){if(M=w>>>24,S>>>=M,f-=M,M=w>>>16&255,M&16){if(O=w&65535,M&=15,f<M&&(S+=P[g++]<<f,f+=8,f<M&&(S+=P[g++]<<f,f+=8)),O+=S&(1<<M)-1,O>t){p.msg="invalid distance too far back",H.mode=30;break e}if(S>>>=M,f-=M,M=r-n,O>M){if(M=O-M,M>o&&H.sane){p.msg="invalid distance too far back",H.mode=30;break e}if(k=0,A=h,u===0){if(k+=i-M,M<R){R-=M;do D[r++]=h[k++];while(--M);k=r-O,A=D}}else if(u<M){if(k+=i+u-M,M-=u,M<R){R-=M;do D[r++]=h[k++];while(--M);if(k=0,u<R){M=u,R-=M;do D[r++]=h[k++];while(--M);k=r-O,A=D}}}else if(k+=u-M,M<R){R-=M;do D[r++]=h[k++];while(--M);k=r-O,A=D}for(;R>2;)D[r++]=A[k++],D[r++]=A[k++],D[r++]=A[k++],R-=3;R&&(D[r++]=A[k++],R>1&&(D[r++]=A[k++]))}else{k=r-O;do D[r++]=D[k++],D[r++]=D[k++],D[r++]=D[k++],R-=3;while(R>2);R&&(D[r++]=D[k++],R>1&&(D[r++]=D[k++]))}}else if(M&64){p.msg="invalid distance code",H.mode=30;break e}else{w=E[(w&65535)+(S&(1<<M)-1)];continue n}break}}else if(M&64)if(M&32){H.mode=12;break e}else{p.msg="invalid literal/length code",H.mode=30;break e}else{w=v[(w&65535)+(S&(1<<M)-1)];continue t}break}}while(g<l&&r<e);R=f>>3,g-=R,f-=R<<3,S&=(1<<f)-1,p.next_in=g,p.next_out=r,p.avail_in=g<l?5+(l-g):5-(g-l),p.avail_out=r<e?257+(e-r):257-(r-e),H.hold=S,H.bits=f},"inflate_fast")},4532140493:(F,a,c)=>{"use strict";const d=c(7775889903),p=c(9538018229),m=c(4690928475),g=c(9709058974),l=0,r=1,n=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:i,Z_OK:o,Z_STREAM_END:u,Z_NEED_DICT:h,Z_STREAM_ERROR:S,Z_DATA_ERROR:f,Z_MEM_ERROR:v,Z_BUF_ERROR:E,Z_DEFLATED:_}=c(7496116979),T=1,w=2,M=3,R=4,O=5,k=6,A=7,P=8,D=9,H=10,j=11,W=12,X=13,ee=14,fe=15,oe=16,Oe=17,Xe=18,ge=19,Me=20,$e=21,ze=22,nt=23,mt=24,gt=25,Pe=26,xe=27,Ye=28,Ze=29,Re=30,Tt=31,rt=32,Nt=852,Wt=592,Ot=15,hn=s(de=>(de>>>24&255)+(de>>>8&65280)+((de&65280)<<8)+((de&255)<<24),"zswap32");function fi(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}s(fi,"InflateState");const wn=s(de=>{if(!de||!de.state)return S;const Ue=de.state;return de.total_in=de.total_out=Ue.total=0,de.msg="",Ue.wrap&&(de.adler=Ue.wrap&1),Ue.mode=T,Ue.last=0,Ue.havedict=0,Ue.dmax=32768,Ue.head=null,Ue.hold=0,Ue.bits=0,Ue.lencode=Ue.lendyn=new Int32Array(Nt),Ue.distcode=Ue.distdyn=new Int32Array(Wt),Ue.sane=1,Ue.back=-1,o},"inflateResetKeep"),Jt=s(de=>{if(!de||!de.state)return S;const Ue=de.state;return Ue.wsize=0,Ue.whave=0,Ue.wnext=0,wn(de)},"inflateReset"),on=s((de,Ue)=>{let K;if(!de||!de.state)return S;const q=de.state;return Ue<0?(K=0,Ue=-Ue):(K=(Ue>>4)+1,Ue<48&&(Ue&=15)),Ue&&(Ue<8||Ue>15)?S:(q.window!==null&&q.wbits!==Ue&&(q.window=null),q.wrap=K,q.wbits=Ue,Jt(de))},"inflateReset2"),kt=s((de,Ue)=>{if(!de)return S;const K=new fi;de.state=K,K.window=null;const q=on(de,Ue);return q!==o&&(de.state=null),q},"inflateInit2"),$t=s(de=>kt(de,Ot),"inflateInit");let en=!0,zt,Kt;const Q=s(de=>{if(en){zt=new Int32Array(512),Kt=new Int32Array(32);let Ue=0;for(;Ue<144;)de.lens[Ue++]=8;for(;Ue<256;)de.lens[Ue++]=9;for(;Ue<280;)de.lens[Ue++]=7;for(;Ue<288;)de.lens[Ue++]=8;for(g(r,de.lens,0,288,zt,0,de.work,{bits:9}),Ue=0;Ue<32;)de.lens[Ue++]=5;g(n,de.lens,0,32,Kt,0,de.work,{bits:5}),en=!1}de.lencode=zt,de.lenbits=9,de.distcode=Kt,de.distbits=5},"fixedtables"),Ve=s((de,Ue,K,q)=>{let Ee;const be=de.state;return be.window===null&&(be.wsize=1<<be.wbits,be.wnext=0,be.whave=0,be.window=new Uint8Array(be.wsize)),q>=be.wsize?(be.window.set(Ue.subarray(K-be.wsize,K),0),be.wnext=0,be.whave=be.wsize):(Ee=be.wsize-be.wnext,Ee>q&&(Ee=q),be.window.set(Ue.subarray(K-q,K-q+Ee),be.wnext),q-=Ee,q?(be.window.set(Ue.subarray(K-q,K),0),be.wnext=q,be.whave=be.wsize):(be.wnext+=Ee,be.wnext===be.wsize&&(be.wnext=0),be.whave<be.wsize&&(be.whave+=Ee))),0},"updatewindow"),Be=s((de,Ue)=>{let K,q,Ee,be,it,He,Qe,Se,Ae,L,ve,_e,Ie,ne,Ft=0,qe,ft,En,xt,Ui,_i,bn,zn;const gn=new Uint8Array(4);let gi,ai;const yr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!de||!de.state||!de.output||!de.input&&de.avail_in!==0)return S;K=de.state,K.mode===W&&(K.mode=X),it=de.next_out,Ee=de.output,Qe=de.avail_out,be=de.next_in,q=de.input,He=de.avail_in,Se=K.hold,Ae=K.bits,L=He,ve=Qe,zn=o;e:for(;;)switch(K.mode){case T:if(K.wrap===0){K.mode=X;break}for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(K.wrap&2&&Se===35615){K.check=0,gn[0]=Se&255,gn[1]=Se>>>8&255,K.check=p(K.check,gn,2,0),Se=0,Ae=0,K.mode=w;break}if(K.flags=0,K.head&&(K.head.done=!1),!(K.wrap&1)||(((Se&255)<<8)+(Se>>8))%31){de.msg="incorrect header check",K.mode=Re;break}if((Se&15)!==_){de.msg="unknown compression method",K.mode=Re;break}if(Se>>>=4,Ae-=4,bn=(Se&15)+8,K.wbits===0)K.wbits=bn;else if(bn>K.wbits){de.msg="invalid window size",K.mode=Re;break}K.dmax=1<<K.wbits,de.adler=K.check=1,K.mode=Se&512?H:W,Se=0,Ae=0;break;case w:for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(K.flags=Se,(K.flags&255)!==_){de.msg="unknown compression method",K.mode=Re;break}if(K.flags&57344){de.msg="unknown header flags set",K.mode=Re;break}K.head&&(K.head.text=Se>>8&1),K.flags&512&&(gn[0]=Se&255,gn[1]=Se>>>8&255,K.check=p(K.check,gn,2,0)),Se=0,Ae=0,K.mode=M;case M:for(;Ae<32;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.head&&(K.head.time=Se),K.flags&512&&(gn[0]=Se&255,gn[1]=Se>>>8&255,gn[2]=Se>>>16&255,gn[3]=Se>>>24&255,K.check=p(K.check,gn,4,0)),Se=0,Ae=0,K.mode=R;case R:for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.head&&(K.head.xflags=Se&255,K.head.os=Se>>8),K.flags&512&&(gn[0]=Se&255,gn[1]=Se>>>8&255,K.check=p(K.check,gn,2,0)),Se=0,Ae=0,K.mode=O;case O:if(K.flags&1024){for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.length=Se,K.head&&(K.head.extra_len=Se),K.flags&512&&(gn[0]=Se&255,gn[1]=Se>>>8&255,K.check=p(K.check,gn,2,0)),Se=0,Ae=0}else K.head&&(K.head.extra=null);K.mode=k;case k:if(K.flags&1024&&(_e=K.length,_e>He&&(_e=He),_e&&(K.head&&(bn=K.head.extra_len-K.length,K.head.extra||(K.head.extra=new Uint8Array(K.head.extra_len)),K.head.extra.set(q.subarray(be,be+_e),bn)),K.flags&512&&(K.check=p(K.check,q,_e,be)),He-=_e,be+=_e,K.length-=_e),K.length))break e;K.length=0,K.mode=A;case A:if(K.flags&2048){if(He===0)break e;_e=0;do bn=q[be+_e++],K.head&&bn&&K.length<65536&&(K.head.name+=String.fromCharCode(bn));while(bn&&_e<He);if(K.flags&512&&(K.check=p(K.check,q,_e,be)),He-=_e,be+=_e,bn)break e}else K.head&&(K.head.name=null);K.length=0,K.mode=P;case P:if(K.flags&4096){if(He===0)break e;_e=0;do bn=q[be+_e++],K.head&&bn&&K.length<65536&&(K.head.comment+=String.fromCharCode(bn));while(bn&&_e<He);if(K.flags&512&&(K.check=p(K.check,q,_e,be)),He-=_e,be+=_e,bn)break e}else K.head&&(K.head.comment=null);K.mode=D;case D:if(K.flags&512){for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(Se!==(K.check&65535)){de.msg="header crc mismatch",K.mode=Re;break}Se=0,Ae=0}K.head&&(K.head.hcrc=K.flags>>9&1,K.head.done=!0),de.adler=K.check=0,K.mode=W;break;case H:for(;Ae<32;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}de.adler=K.check=hn(Se),Se=0,Ae=0,K.mode=j;case j:if(K.havedict===0)return de.next_out=it,de.avail_out=Qe,de.next_in=be,de.avail_in=He,K.hold=Se,K.bits=Ae,h;de.adler=K.check=1,K.mode=W;case W:if(Ue===t||Ue===i)break e;case X:if(K.last){Se>>>=Ae&7,Ae-=Ae&7,K.mode=xe;break}for(;Ae<3;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}switch(K.last=Se&1,Se>>>=1,Ae-=1,Se&3){case 0:K.mode=ee;break;case 1:if(Q(K),K.mode=Me,Ue===i){Se>>>=2,Ae-=2;break e}break;case 2:K.mode=Oe;break;case 3:de.msg="invalid block type",K.mode=Re}Se>>>=2,Ae-=2;break;case ee:for(Se>>>=Ae&7,Ae-=Ae&7;Ae<32;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if((Se&65535)!==(Se>>>16^65535)){de.msg="invalid stored block lengths",K.mode=Re;break}if(K.length=Se&65535,Se=0,Ae=0,K.mode=fe,Ue===i)break e;case fe:K.mode=oe;case oe:if(_e=K.length,_e){if(_e>He&&(_e=He),_e>Qe&&(_e=Qe),_e===0)break e;Ee.set(q.subarray(be,be+_e),it),He-=_e,be+=_e,Qe-=_e,it+=_e,K.length-=_e;break}K.mode=W;break;case Oe:for(;Ae<14;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(K.nlen=(Se&31)+257,Se>>>=5,Ae-=5,K.ndist=(Se&31)+1,Se>>>=5,Ae-=5,K.ncode=(Se&15)+4,Se>>>=4,Ae-=4,K.nlen>286||K.ndist>30){de.msg="too many length or distance symbols",K.mode=Re;break}K.have=0,K.mode=Xe;case Xe:for(;K.have<K.ncode;){for(;Ae<3;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.lens[yr[K.have++]]=Se&7,Se>>>=3,Ae-=3}for(;K.have<19;)K.lens[yr[K.have++]]=0;if(K.lencode=K.lendyn,K.lenbits=7,gi={bits:K.lenbits},zn=g(l,K.lens,0,19,K.lencode,0,K.work,gi),K.lenbits=gi.bits,zn){de.msg="invalid code lengths set",K.mode=Re;break}K.have=0,K.mode=ge;case ge:for(;K.have<K.nlen+K.ndist;){for(;Ft=K.lencode[Se&(1<<K.lenbits)-1],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(En<16)Se>>>=qe,Ae-=qe,K.lens[K.have++]=En;else{if(En===16){for(ai=qe+2;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(Se>>>=qe,Ae-=qe,K.have===0){de.msg="invalid bit length repeat",K.mode=Re;break}bn=K.lens[K.have-1],_e=3+(Se&3),Se>>>=2,Ae-=2}else if(En===17){for(ai=qe+3;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}Se>>>=qe,Ae-=qe,bn=0,_e=3+(Se&7),Se>>>=3,Ae-=3}else{for(ai=qe+7;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}Se>>>=qe,Ae-=qe,bn=0,_e=11+(Se&127),Se>>>=7,Ae-=7}if(K.have+_e>K.nlen+K.ndist){de.msg="invalid bit length repeat",K.mode=Re;break}for(;_e--;)K.lens[K.have++]=bn}}if(K.mode===Re)break;if(K.lens[256]===0){de.msg="invalid code -- missing end-of-block",K.mode=Re;break}if(K.lenbits=9,gi={bits:K.lenbits},zn=g(r,K.lens,0,K.nlen,K.lencode,0,K.work,gi),K.lenbits=gi.bits,zn){de.msg="invalid literal/lengths set",K.mode=Re;break}if(K.distbits=6,K.distcode=K.distdyn,gi={bits:K.distbits},zn=g(n,K.lens,K.nlen,K.ndist,K.distcode,0,K.work,gi),K.distbits=gi.bits,zn){de.msg="invalid distances set",K.mode=Re;break}if(K.mode=Me,Ue===i)break e;case Me:K.mode=$e;case $e:if(He>=6&&Qe>=258){de.next_out=it,de.avail_out=Qe,de.next_in=be,de.avail_in=He,K.hold=Se,K.bits=Ae,m(de,ve),it=de.next_out,Ee=de.output,Qe=de.avail_out,be=de.next_in,q=de.input,He=de.avail_in,Se=K.hold,Ae=K.bits,K.mode===W&&(K.back=-1);break}for(K.back=0;Ft=K.lencode[Se&(1<<K.lenbits)-1],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(ft&&!(ft&240)){for(xt=qe,Ui=ft,_i=En;Ft=K.lencode[_i+((Se&(1<<xt+Ui)-1)>>xt)],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(xt+qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}Se>>>=xt,Ae-=xt,K.back+=xt}if(Se>>>=qe,Ae-=qe,K.back+=qe,K.length=En,ft===0){K.mode=Pe;break}if(ft&32){K.back=-1,K.mode=W;break}if(ft&64){de.msg="invalid literal/length code",K.mode=Re;break}K.extra=ft&15,K.mode=ze;case ze:if(K.extra){for(ai=K.extra;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.length+=Se&(1<<K.extra)-1,Se>>>=K.extra,Ae-=K.extra,K.back+=K.extra}K.was=K.length,K.mode=nt;case nt:for(;Ft=K.distcode[Se&(1<<K.distbits)-1],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(!(ft&240)){for(xt=qe,Ui=ft,_i=En;Ft=K.distcode[_i+((Se&(1<<xt+Ui)-1)>>xt)],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(xt+qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}Se>>>=xt,Ae-=xt,K.back+=xt}if(Se>>>=qe,Ae-=qe,K.back+=qe,ft&64){de.msg="invalid distance code",K.mode=Re;break}K.offset=En,K.extra=ft&15,K.mode=mt;case mt:if(K.extra){for(ai=K.extra;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.offset+=Se&(1<<K.extra)-1,Se>>>=K.extra,Ae-=K.extra,K.back+=K.extra}if(K.offset>K.dmax){de.msg="invalid distance too far back",K.mode=Re;break}K.mode=gt;case gt:if(Qe===0)break e;if(_e=ve-Qe,K.offset>_e){if(_e=K.offset-_e,_e>K.whave&&K.sane){de.msg="invalid distance too far back",K.mode=Re;break}_e>K.wnext?(_e-=K.wnext,Ie=K.wsize-_e):Ie=K.wnext-_e,_e>K.length&&(_e=K.length),ne=K.window}else ne=Ee,Ie=it-K.offset,_e=K.length;_e>Qe&&(_e=Qe),Qe-=_e,K.length-=_e;do Ee[it++]=ne[Ie++];while(--_e);K.length===0&&(K.mode=$e);break;case Pe:if(Qe===0)break e;Ee[it++]=K.length,Qe--,K.mode=$e;break;case xe:if(K.wrap){for(;Ae<32;){if(He===0)break e;He--,Se|=q[be++]<<Ae,Ae+=8}if(ve-=Qe,de.total_out+=ve,K.total+=ve,ve&&(de.adler=K.check=K.flags?p(K.check,Ee,ve,it-ve):d(K.check,Ee,ve,it-ve)),ve=Qe,(K.flags?Se:hn(Se))!==K.check){de.msg="incorrect data check",K.mode=Re;break}Se=0,Ae=0}K.mode=Ye;case Ye:if(K.wrap&&K.flags){for(;Ae<32;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(Se!==(K.total&4294967295)){de.msg="incorrect length check",K.mode=Re;break}Se=0,Ae=0}K.mode=Ze;case Ze:zn=u;break e;case Re:zn=f;break e;case Tt:return v;case rt:default:return S}return de.next_out=it,de.avail_out=Qe,de.next_in=be,de.avail_in=He,K.hold=Se,K.bits=Ae,(K.wsize||ve!==de.avail_out&&K.mode<Re&&(K.mode<xe||Ue!==e))&&Ve(de,de.output,de.next_out,ve-de.avail_out)?(K.mode=Tt,v):(L-=de.avail_in,ve-=de.avail_out,de.total_in+=L,de.total_out+=ve,K.total+=ve,K.wrap&&ve&&(de.adler=K.check=K.flags?p(K.check,Ee,ve,de.next_out-ve):d(K.check,Ee,ve,de.next_out-ve)),de.data_type=K.bits+(K.last?64:0)+(K.mode===W?128:0)+(K.mode===Me||K.mode===fe?256:0),(L===0&&ve===0||Ue===e)&&zn===o&&(zn=E),zn)},"inflate"),Je=s(de=>{if(!de||!de.state)return S;let Ue=de.state;return Ue.window&&(Ue.window=null),de.state=null,o},"inflateEnd"),ut=s((de,Ue)=>{if(!de||!de.state)return S;const K=de.state;return K.wrap&2?(K.head=Ue,Ue.done=!1,o):S},"inflateGetHeader"),ot=s((de,Ue)=>{const K=Ue.length;let q,Ee,be;return!de||!de.state||(q=de.state,q.wrap!==0&&q.mode!==j)?S:q.mode===j&&(Ee=1,Ee=d(Ee,Ue,K,0),Ee!==q.check)?f:(be=Ve(de,Ue,K,K),be?(q.mode=Tt,v):(q.havedict=1,o))},"inflateSetDictionary");F.exports.inflateReset=Jt,F.exports.inflateReset2=on,F.exports.inflateResetKeep=wn,F.exports.inflateInit=$t,F.exports.inflateInit2=kt,F.exports.inflate=Be,F.exports.inflateEnd=Je,F.exports.inflateGetHeader=ut,F.exports.inflateSetDictionary=ot,F.exports.inflateInfo="pako inflate (from Nodeca project)"},9709058974:F=>{"use strict";const l=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=s((i,o,u,h,S,f,v,E)=>{const _=E.bits;let T=0,w=0,M=0,R=0,O=0,k=0,A=0,P=0,D=0,H=0,j,W,X,ee,fe,oe=null,Oe=0,Xe;const ge=new Uint16Array(15+1),Me=new Uint16Array(15+1);let $e=null,ze=0,nt,mt,gt;for(T=0;T<=15;T++)ge[T]=0;for(w=0;w<h;w++)ge[o[u+w]]++;for(O=_,R=15;R>=1&&ge[R]===0;R--);if(O>R&&(O=R),R===0)return S[f++]=1<<24|64<<16|0,S[f++]=1<<24|64<<16|0,E.bits=1,0;for(M=1;M<R&&ge[M]===0;M++);for(O<M&&(O=M),P=1,T=1;T<=15;T++)if(P<<=1,P-=ge[T],P<0)return-1;if(P>0&&(i===0||R!==1))return-1;for(Me[1]=0,T=1;T<15;T++)Me[T+1]=Me[T]+ge[T];for(w=0;w<h;w++)o[u+w]!==0&&(v[Me[o[u+w]]++]=w);if(i===0?(oe=$e=v,Xe=19):i===1?(oe=l,Oe-=257,$e=r,ze-=257,Xe=256):(oe=n,$e=e,Xe=-1),H=0,w=0,T=M,fe=f,k=O,A=0,X=-1,D=1<<O,ee=D-1,i===1&&D>852||i===2&&D>592)return 1;for(;;){nt=T-A,v[w]<Xe?(mt=0,gt=v[w]):v[w]>Xe?(mt=$e[ze+v[w]],gt=oe[Oe+v[w]]):(mt=32+64,gt=0),j=1<<T-A,W=1<<k,M=W;do W-=j,S[fe+(H>>A)+W]=nt<<24|mt<<16|gt|0;while(W!==0);for(j=1<<T-1;H&j;)j>>=1;if(j!==0?(H&=j-1,H+=j):H=0,w++,--ge[T]===0){if(T===R)break;T=o[u+v[w]]}if(T>O&&(H&ee)!==X){for(A===0&&(A=O),fe+=M,k=T-A,P=1<<k;k+A<R&&(P-=ge[k+A],!(P<=0));)k++,P<<=1;if(D+=1<<k,i===1&&D>852||i===2&&D>592)return 1;X=H&ee,S[X]=O<<24|k<<16|fe-f|0}}return H!==0&&(S[fe+H]=T-A<<24|64<<16|0),E.bits=O,0},"inflate_table");F.exports=t},3435039830:F=>{"use strict";F.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},8891166839:F=>{"use strict";function m(Q){let Ve=Q.length;for(;--Ve>=0;)Q[Ve]=0}s(m,"zero");const g=0,l=1,r=2,n=3,e=258,t=29,i=256,o=i+1+t,u=30,h=19,S=2*o+1,f=15,v=16,E=7,_=256,T=16,w=17,M=18,R=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),O=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),k=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),P=512,D=new Array((o+2)*2);m(D);const H=new Array(u*2);m(H);const j=new Array(P);m(j);const W=new Array(e-n+1);m(W);const X=new Array(t);m(X);const ee=new Array(u);m(ee);function fe(Q,Ve,Be,Je,ut){this.static_tree=Q,this.extra_bits=Ve,this.extra_base=Be,this.elems=Je,this.max_length=ut,this.has_stree=Q&&Q.length}s(fe,"StaticTreeDesc");let oe,Oe,Xe;function ge(Q,Ve){this.dyn_tree=Q,this.max_code=0,this.stat_desc=Ve}s(ge,"TreeDesc");const Me=s(Q=>Q<256?j[Q]:j[256+(Q>>>7)],"d_code"),$e=s((Q,Ve)=>{Q.pending_buf[Q.pending++]=Ve&255,Q.pending_buf[Q.pending++]=Ve>>>8&255},"put_short"),ze=s((Q,Ve,Be)=>{Q.bi_valid>v-Be?(Q.bi_buf|=Ve<<Q.bi_valid&65535,$e(Q,Q.bi_buf),Q.bi_buf=Ve>>v-Q.bi_valid,Q.bi_valid+=Be-v):(Q.bi_buf|=Ve<<Q.bi_valid&65535,Q.bi_valid+=Be)},"send_bits"),nt=s((Q,Ve,Be)=>{ze(Q,Be[Ve*2],Be[Ve*2+1])},"send_code"),mt=s((Q,Ve)=>{let Be=0;do Be|=Q&1,Q>>>=1,Be<<=1;while(--Ve>0);return Be>>>1},"bi_reverse"),gt=s(Q=>{Q.bi_valid===16?($e(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):Q.bi_valid>=8&&(Q.pending_buf[Q.pending++]=Q.bi_buf&255,Q.bi_buf>>=8,Q.bi_valid-=8)},"bi_flush"),Pe=s((Q,Ve)=>{const Be=Ve.dyn_tree,Je=Ve.max_code,ut=Ve.stat_desc.static_tree,ot=Ve.stat_desc.has_stree,de=Ve.stat_desc.extra_bits,Ue=Ve.stat_desc.extra_base,K=Ve.stat_desc.max_length;let q,Ee,be,it,He,Qe,Se=0;for(it=0;it<=f;it++)Q.bl_count[it]=0;for(Be[Q.heap[Q.heap_max]*2+1]=0,q=Q.heap_max+1;q<S;q++)Ee=Q.heap[q],it=Be[Be[Ee*2+1]*2+1]+1,it>K&&(it=K,Se++),Be[Ee*2+1]=it,!(Ee>Je)&&(Q.bl_count[it]++,He=0,Ee>=Ue&&(He=de[Ee-Ue]),Qe=Be[Ee*2],Q.opt_len+=Qe*(it+He),ot&&(Q.static_len+=Qe*(ut[Ee*2+1]+He)));if(Se!==0){do{for(it=K-1;Q.bl_count[it]===0;)it--;Q.bl_count[it]--,Q.bl_count[it+1]+=2,Q.bl_count[K]--,Se-=2}while(Se>0);for(it=K;it!==0;it--)for(Ee=Q.bl_count[it];Ee!==0;)be=Q.heap[--q],!(be>Je)&&(Be[be*2+1]!==it&&(Q.opt_len+=(it-Be[be*2+1])*Be[be*2],Be[be*2+1]=it),Ee--)}},"gen_bitlen"),xe=s((Q,Ve,Be)=>{const Je=new Array(f+1);let ut=0,ot,de;for(ot=1;ot<=f;ot++)Je[ot]=ut=ut+Be[ot-1]<<1;for(de=0;de<=Ve;de++){let Ue=Q[de*2+1];Ue!==0&&(Q[de*2]=mt(Je[Ue]++,Ue))}},"gen_codes"),Ye=s(()=>{let Q,Ve,Be,Je,ut;const ot=new Array(f+1);for(Be=0,Je=0;Je<t-1;Je++)for(X[Je]=Be,Q=0;Q<1<<R[Je];Q++)W[Be++]=Je;for(W[Be-1]=Je,ut=0,Je=0;Je<16;Je++)for(ee[Je]=ut,Q=0;Q<1<<O[Je];Q++)j[ut++]=Je;for(ut>>=7;Je<u;Je++)for(ee[Je]=ut<<7,Q=0;Q<1<<O[Je]-7;Q++)j[256+ut++]=Je;for(Ve=0;Ve<=f;Ve++)ot[Ve]=0;for(Q=0;Q<=143;)D[Q*2+1]=8,Q++,ot[8]++;for(;Q<=255;)D[Q*2+1]=9,Q++,ot[9]++;for(;Q<=279;)D[Q*2+1]=7,Q++,ot[7]++;for(;Q<=287;)D[Q*2+1]=8,Q++,ot[8]++;for(xe(D,o+1,ot),Q=0;Q<u;Q++)H[Q*2+1]=5,H[Q*2]=mt(Q,5);oe=new fe(D,R,i+1,o,f),Oe=new fe(H,O,0,u,f),Xe=new fe(new Array(0),k,0,h,E)},"tr_static_init"),Ze=s(Q=>{let Ve;for(Ve=0;Ve<o;Ve++)Q.dyn_ltree[Ve*2]=0;for(Ve=0;Ve<u;Ve++)Q.dyn_dtree[Ve*2]=0;for(Ve=0;Ve<h;Ve++)Q.bl_tree[Ve*2]=0;Q.dyn_ltree[_*2]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0},"init_block"),Re=s(Q=>{Q.bi_valid>8?$e(Q,Q.bi_buf):Q.bi_valid>0&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0},"bi_windup"),Tt=s((Q,Ve,Be,Je)=>{Re(Q),Je&&($e(Q,Be),$e(Q,~Be)),Q.pending_buf.set(Q.window.subarray(Ve,Ve+Be),Q.pending),Q.pending+=Be},"copy_block"),rt=s((Q,Ve,Be,Je)=>{const ut=Ve*2,ot=Be*2;return Q[ut]<Q[ot]||Q[ut]===Q[ot]&&Je[Ve]<=Je[Be]},"smaller"),Nt=s((Q,Ve,Be)=>{const Je=Q.heap[Be];let ut=Be<<1;for(;ut<=Q.heap_len&&(ut<Q.heap_len&&rt(Ve,Q.heap[ut+1],Q.heap[ut],Q.depth)&&ut++,!rt(Ve,Je,Q.heap[ut],Q.depth));)Q.heap[Be]=Q.heap[ut],Be=ut,ut<<=1;Q.heap[Be]=Je},"pqdownheap"),Wt=s((Q,Ve,Be)=>{let Je,ut,ot=0,de,Ue;if(Q.last_lit!==0)do Je=Q.pending_buf[Q.d_buf+ot*2]<<8|Q.pending_buf[Q.d_buf+ot*2+1],ut=Q.pending_buf[Q.l_buf+ot],ot++,Je===0?nt(Q,ut,Ve):(de=W[ut],nt(Q,de+i+1,Ve),Ue=R[de],Ue!==0&&(ut-=X[de],ze(Q,ut,Ue)),Je--,de=Me(Je),nt(Q,de,Be),Ue=O[de],Ue!==0&&(Je-=ee[de],ze(Q,Je,Ue)));while(ot<Q.last_lit);nt(Q,_,Ve)},"compress_block"),Qt=s((Q,Ve)=>{const Be=Ve.dyn_tree,Je=Ve.stat_desc.static_tree,ut=Ve.stat_desc.has_stree,ot=Ve.stat_desc.elems;let de,Ue,K=-1,q;for(Q.heap_len=0,Q.heap_max=S,de=0;de<ot;de++)Be[de*2]!==0?(Q.heap[++Q.heap_len]=K=de,Q.depth[de]=0):Be[de*2+1]=0;for(;Q.heap_len<2;)q=Q.heap[++Q.heap_len]=K<2?++K:0,Be[q*2]=1,Q.depth[q]=0,Q.opt_len--,ut&&(Q.static_len-=Je[q*2+1]);for(Ve.max_code=K,de=Q.heap_len>>1;de>=1;de--)Nt(Q,Be,de);q=ot;do de=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],Nt(Q,Be,1),Ue=Q.heap[1],Q.heap[--Q.heap_max]=de,Q.heap[--Q.heap_max]=Ue,Be[q*2]=Be[de*2]+Be[Ue*2],Q.depth[q]=(Q.depth[de]>=Q.depth[Ue]?Q.depth[de]:Q.depth[Ue])+1,Be[de*2+1]=Be[Ue*2+1]=q,Q.heap[1]=q++,Nt(Q,Be,1);while(Q.heap_len>=2);Q.heap[--Q.heap_max]=Q.heap[1],Pe(Q,Ve),xe(Be,K,Q.bl_count)},"build_tree"),Ot=s((Q,Ve,Be)=>{let Je,ut=-1,ot,de=Ve[0*2+1],Ue=0,K=7,q=4;for(de===0&&(K=138,q=3),Ve[(Be+1)*2+1]=65535,Je=0;Je<=Be;Je++)ot=de,de=Ve[(Je+1)*2+1],!(++Ue<K&&ot===de)&&(Ue<q?Q.bl_tree[ot*2]+=Ue:ot!==0?(ot!==ut&&Q.bl_tree[ot*2]++,Q.bl_tree[T*2]++):Ue<=10?Q.bl_tree[w*2]++:Q.bl_tree[M*2]++,Ue=0,ut=ot,de===0?(K=138,q=3):ot===de?(K=6,q=3):(K=7,q=4))},"scan_tree"),hn=s((Q,Ve,Be)=>{let Je,ut=-1,ot,de=Ve[0*2+1],Ue=0,K=7,q=4;for(de===0&&(K=138,q=3),Je=0;Je<=Be;Je++)if(ot=de,de=Ve[(Je+1)*2+1],!(++Ue<K&&ot===de)){if(Ue<q)do nt(Q,ot,Q.bl_tree);while(--Ue!==0);else ot!==0?(ot!==ut&&(nt(Q,ot,Q.bl_tree),Ue--),nt(Q,T,Q.bl_tree),ze(Q,Ue-3,2)):Ue<=10?(nt(Q,w,Q.bl_tree),ze(Q,Ue-3,3)):(nt(Q,M,Q.bl_tree),ze(Q,Ue-11,7));Ue=0,ut=ot,de===0?(K=138,q=3):ot===de?(K=6,q=3):(K=7,q=4)}},"send_tree"),fi=s(Q=>{let Ve;for(Ot(Q,Q.dyn_ltree,Q.l_desc.max_code),Ot(Q,Q.dyn_dtree,Q.d_desc.max_code),Qt(Q,Q.bl_desc),Ve=h-1;Ve>=3&&Q.bl_tree[A[Ve]*2+1]===0;Ve--);return Q.opt_len+=3*(Ve+1)+5+5+4,Ve},"build_bl_tree"),wn=s((Q,Ve,Be,Je)=>{let ut;for(ze(Q,Ve-257,5),ze(Q,Be-1,5),ze(Q,Je-4,4),ut=0;ut<Je;ut++)ze(Q,Q.bl_tree[A[ut]*2+1],3);hn(Q,Q.dyn_ltree,Ve-1),hn(Q,Q.dyn_dtree,Be-1)},"send_all_trees"),Jt=s(Q=>{let Ve=4093624447,Be;for(Be=0;Be<=31;Be++,Ve>>>=1)if(Ve&1&&Q.dyn_ltree[Be*2]!==0)return 0;if(Q.dyn_ltree[9*2]!==0||Q.dyn_ltree[10*2]!==0||Q.dyn_ltree[13*2]!==0)return 1;for(Be=32;Be<i;Be++)if(Q.dyn_ltree[Be*2]!==0)return 1;return 0},"detect_data_type");let on=!1;const kt=s(Q=>{on||(Ye(),on=!0),Q.l_desc=new ge(Q.dyn_ltree,oe),Q.d_desc=new ge(Q.dyn_dtree,Oe),Q.bl_desc=new ge(Q.bl_tree,Xe),Q.bi_buf=0,Q.bi_valid=0,Ze(Q)},"_tr_init"),$t=s((Q,Ve,Be,Je)=>{ze(Q,(g<<1)+(Je?1:0),3),Tt(Q,Ve,Be,!0)},"_tr_stored_block"),en=s(Q=>{ze(Q,l<<1,3),nt(Q,_,D),gt(Q)},"_tr_align"),zt=s((Q,Ve,Be,Je)=>{let ut,ot,de=0;Q.level>0?(Q.strm.data_type===2&&(Q.strm.data_type=Jt(Q)),Qt(Q,Q.l_desc),Qt(Q,Q.d_desc),de=fi(Q),ut=Q.opt_len+3+7>>>3,ot=Q.static_len+3+7>>>3,ot<=ut&&(ut=ot)):ut=ot=Be+5,Be+4<=ut&&Ve!==-1?$t(Q,Ve,Be,Je):Q.strategy===4||ot===ut?(ze(Q,(l<<1)+(Je?1:0),3),Wt(Q,D,H)):(ze(Q,(r<<1)+(Je?1:0),3),wn(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,de+1),Wt(Q,Q.dyn_ltree,Q.dyn_dtree)),Ze(Q),Je&&Re(Q)},"_tr_flush_block"),Kt=s((Q,Ve,Be)=>(Q.pending_buf[Q.d_buf+Q.last_lit*2]=Ve>>>8&255,Q.pending_buf[Q.d_buf+Q.last_lit*2+1]=Ve&255,Q.pending_buf[Q.l_buf+Q.last_lit]=Be&255,Q.last_lit++,Ve===0?Q.dyn_ltree[Be*2]++:(Q.matches++,Ve--,Q.dyn_ltree[(W[Be]+i+1)*2]++,Q.dyn_dtree[Me(Ve)*2]++),Q.last_lit===Q.lit_bufsize-1),"_tr_tally");F.exports._tr_init=kt,F.exports._tr_stored_block=$t,F.exports._tr_flush_block=zt,F.exports._tr_tally=Kt,F.exports._tr_align=en},8713386032:F=>{"use strict";function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}s(a,"ZStream"),F.exports=a},8203499834:(F,a,c)=>{"use strict";F.exports=c(687426846)},687426846:(F,a,c)=>{"use strict";var d=a;d.build="minimal",d.Writer=c(2360491163),d.BufferWriter=c(2563953490),d.Reader=c(6844776027),d.BufferReader=c(7297964050),d.util=c(6168016328),d.rpc=c(3806126143),d.roots=c(9353233933),d.configure=p;function p(){d.util._configure(),d.Writer._configure(d.BufferWriter),d.Reader._configure(d.BufferReader)}s(p,"configure"),p()},6844776027:(F,a,c)=>{"use strict";F.exports=r;var d=c(6168016328),p,m=d.LongBits,g=d.utf8;function l(u,h){return RangeError("index out of range: "+u.pos+" + "+(h||1)+" > "+u.len)}s(l,"indexOutOfRange");function r(u){this.buf=u,this.pos=0,this.len=u.length}s(r,"Reader");var n=typeof Uint8Array<"u"?s(function(h){if(h instanceof Uint8Array||Array.isArray(h))return new r(h);throw Error("illegal buffer")},"create_typed_array"):s(function(h){if(Array.isArray(h))return new r(h);throw Error("illegal buffer")},"create_array"),e=s(function(){return d.Buffer?s(function(S){return(r.create=s(function(v){return d.Buffer.isBuffer(v)?new p(v):n(v)},"create_buffer"))(S)},"create_buffer_setup"):n},"create");r.create=e(),r.prototype._slice=d.Array.prototype.subarray||d.Array.prototype.slice,r.prototype.uint32=s(function(){var h=4294967295;return s(function(){if(h=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(h=(h|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return h;if((this.pos+=5)>this.len)throw this.pos=this.len,l(this,10);return h},"read_uint32")},"read_uint32_setup")(),r.prototype.int32=s(function(){return this.uint32()|0},"read_int32"),r.prototype.sint32=s(function(){var h=this.uint32();return h>>>1^-(h&1)|0},"read_sint32");function t(){var u=new m(0,0),h=0;if(this.len-this.pos>4){for(;h<4;++h)if(u.lo=(u.lo|(this.buf[this.pos]&127)<<h*7)>>>0,this.buf[this.pos++]<128)return u;if(u.lo=(u.lo|(this.buf[this.pos]&127)<<28)>>>0,u.hi=(u.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return u;h=0}else{for(;h<3;++h){if(this.pos>=this.len)throw l(this);if(u.lo=(u.lo|(this.buf[this.pos]&127)<<h*7)>>>0,this.buf[this.pos++]<128)return u}return u.lo=(u.lo|(this.buf[this.pos++]&127)<<h*7)>>>0,u}if(this.len-this.pos>4){for(;h<5;++h)if(u.hi=(u.hi|(this.buf[this.pos]&127)<<h*7+3)>>>0,this.buf[this.pos++]<128)return u}else for(;h<5;++h){if(this.pos>=this.len)throw l(this);if(u.hi=(u.hi|(this.buf[this.pos]&127)<<h*7+3)>>>0,this.buf[this.pos++]<128)return u}throw Error("invalid varint encoding")}s(t,"readLongVarint"),r.prototype.bool=s(function(){return this.uint32()!==0},"read_bool");function i(u,h){return(u[h-4]|u[h-3]<<8|u[h-2]<<16|u[h-1]<<24)>>>0}s(i,"readFixed32_end"),r.prototype.fixed32=s(function(){if(this.pos+4>this.len)throw l(this,4);return i(this.buf,this.pos+=4)},"read_fixed32"),r.prototype.sfixed32=s(function(){if(this.pos+4>this.len)throw l(this,4);return i(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw l(this,8);return new m(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}s(o,"readFixed64"),r.prototype.float=s(function(){if(this.pos+4>this.len)throw l(this,4);var h=d.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h},"read_float"),r.prototype.double=s(function(){if(this.pos+8>this.len)throw l(this,4);var h=d.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h},"read_double"),r.prototype.bytes=s(function(){var h=this.uint32(),S=this.pos,f=this.pos+h;if(f>this.len)throw l(this,h);if(this.pos+=h,Array.isArray(this.buf))return this.buf.slice(S,f);if(S===f){var v=d.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,f)},"read_bytes"),r.prototype.string=s(function(){var h=this.bytes();return g.read(h,0,h.length)},"read_string"),r.prototype.skip=s(function(h){if(typeof h=="number"){if(this.pos+h>this.len)throw l(this,h);this.pos+=h}else do if(this.pos>=this.len)throw l(this);while(this.buf[this.pos++]&128);return this},"skip"),r.prototype.skipType=function(u){switch(u){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(u=this.uint32()&7)!==4;)this.skipType(u);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+u+" at offset "+this.pos)}return this},r._configure=function(u){p=u,r.create=e(),p._configure();var h=d.Long?"toLong":"toNumber";d.merge(r.prototype,{int64:s(function(){return t.call(this)[h](!1)},"read_int64"),uint64:s(function(){return t.call(this)[h](!0)},"read_uint64"),sint64:s(function(){return t.call(this).zzDecode()[h](!1)},"read_sint64"),fixed64:s(function(){return o.call(this)[h](!0)},"read_fixed64"),sfixed64:s(function(){return o.call(this)[h](!1)},"read_sfixed64")})}},7297964050:(F,a,c)=>{"use strict";F.exports=m;var d=c(6844776027);(m.prototype=Object.create(d.prototype)).constructor=m;var p=c(6168016328);function m(g){d.call(this,g)}s(m,"BufferReader"),m._configure=function(){p.Buffer&&(m.prototype._slice=p.Buffer.prototype.slice)},m.prototype.string=s(function(){var l=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+l,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+l,this.len))},"read_string_buffer"),m._configure()},9353233933:F=>{"use strict";F.exports={}},3806126143:(F,a,c)=>{"use strict";var d=a;d.Service=c(8739400271)},8739400271:(F,a,c)=>{"use strict";F.exports=p;var d=c(6168016328);(p.prototype=Object.create(d.EventEmitter.prototype)).constructor=p;function p(m,g,l){if(typeof m!="function")throw TypeError("rpcImpl must be a function");d.EventEmitter.call(this),this.rpcImpl=m,this.requestDelimited=Boolean(g),this.responseDelimited=Boolean(l)}s(p,"Service"),p.prototype.rpcCall=s(function m(g,l,r,n,e){if(!n)throw TypeError("request must be specified");var t=this;if(!e)return d.asPromise(m,t,g,l,r,n);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(g,l[t.requestDelimited?"encodeDelimited":"encode"](n).finish(),s(function(o,u){if(o)return t.emit("error",o,g),e(o);if(u===null){t.end(!0);return}if(!(u instanceof r))try{u=r[t.responseDelimited?"decodeDelimited":"decode"](u)}catch(h){return t.emit("error",h,g),e(h)}return t.emit("data",u,g),e(null,u)},"rpcCallback"))}catch(i){t.emit("error",i,g),setTimeout(function(){e(i)},0);return}},"rpcCall"),p.prototype.end=s(function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},9382774951:(F,a,c)=>{"use strict";F.exports=p;var d=c(6168016328);function p(r,n){this.lo=r>>>0,this.hi=n>>>0}s(p,"LongBits");var m=p.zero=new p(0,0);m.toNumber=function(){return 0},m.zzEncode=m.zzDecode=function(){return this},m.length=function(){return 1};var g=p.zeroHash="\0\0\0\0\0\0\0\0";p.fromNumber=s(function(n){if(n===0)return m;var e=n<0;e&&(n=-n);var t=n>>>0,i=(n-t)/4294967296>>>0;return e&&(i=~i>>>0,t=~t>>>0,++t>4294967295&&(t=0,++i>4294967295&&(i=0))),new p(t,i)},"fromNumber"),p.from=s(function(n){if(typeof n=="number")return p.fromNumber(n);if(d.isString(n))if(d.Long)n=d.Long.fromString(n);else return p.fromNumber(parseInt(n,10));return n.low||n.high?new p(n.low>>>0,n.high>>>0):m},"from"),p.prototype.toNumber=s(function(n){if(!n&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),p.prototype.toLong=s(function(n){return d.Long?new d.Long(this.lo|0,this.hi|0,Boolean(n)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(n)}},"toLong");var l=String.prototype.charCodeAt;p.fromHash=s(function(n){return n===g?m:new p((l.call(n,0)|l.call(n,1)<<8|l.call(n,2)<<16|l.call(n,3)<<24)>>>0,(l.call(n,4)|l.call(n,5)<<8|l.call(n,6)<<16|l.call(n,7)<<24)>>>0)},"fromHash"),p.prototype.toHash=s(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),p.prototype.zzEncode=s(function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this},"zzEncode"),p.prototype.zzDecode=s(function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this},"zzDecode"),p.prototype.length=s(function(){var n=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?n<16384?n<128?1:2:n<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},6168016328:function(F,a,c){"use strict";var d=a;d.asPromise=c(7410930532),d.base64=c(3824736026),d.EventEmitter=c(6627060659),d.float=c(6797650127),d.inquire=c(3923667175),d.utf8=c(4612067386),d.pool=c(3002561995),d.LongBits=c(9382774951),d.isNode=Boolean(typeof c.g<"u"&&c.g&&c.g.process&&c.g.process.versions&&c.g.process.versions.node),d.global=d.isNode&&c.g||typeof window<"u"&&window||typeof self<"u"&&self||this,d.emptyArray=Object.freeze?Object.freeze([]):[],d.emptyObject=Object.freeze?Object.freeze({}):{},d.isInteger=Number.isInteger||s(function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},"isInteger"),d.isString=s(function(l){return typeof l=="string"||l instanceof String},"isString"),d.isObject=s(function(l){return l&&typeof l=="object"},"isObject"),d.isset=d.isSet=s(function(l,r){var n=l[r];return n!=null&&l.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1},"isSet"),d.Buffer=function(){try{var g=d.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch{return null}}(),d._Buffer_from=null,d._Buffer_allocUnsafe=null,d.newBuffer=s(function(l){return typeof l=="number"?d.Buffer?d._Buffer_allocUnsafe(l):new d.Array(l):d.Buffer?d._Buffer_from(l):typeof Uint8Array>"u"?l:new Uint8Array(l)},"newBuffer"),d.Array=typeof Uint8Array<"u"?Uint8Array:Array,d.Long=d.global.dcodeIO&&d.global.dcodeIO.Long||d.global.Long||d.inquire("long"),d.key2Re=/^true|false|0|1$/,d.key32Re=/^-?(?:0|[1-9][0-9]*)$/,d.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,d.longToHash=s(function(l){return l?d.LongBits.from(l).toHash():d.LongBits.zeroHash},"longToHash"),d.longFromHash=s(function(l,r){var n=d.LongBits.fromHash(l);return d.Long?d.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},"longFromHash");function p(g,l,r){for(var n=Object.keys(l),e=0;e<n.length;++e)(g[n[e]]===void 0||!r)&&(g[n[e]]=l[n[e]]);return g}s(p,"merge"),d.merge=p,d.lcFirst=s(function(l){return l.charAt(0).toLowerCase()+l.substring(1)},"lcFirst");function m(g){function l(r,n){if(!(this instanceof l))return new l(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,l):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&p(this,n)}return s(l,"CustomError"),l.prototype=Object.create(Error.prototype,{constructor:{value:l,writable:!0,enumerable:!1,configurable:!0},name:{get:s(function(){return g},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:s(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),l}s(m,"newError"),d.newError=m,d.ProtocolError=m("ProtocolError"),d.oneOfGetter=s(function(l){for(var r={},n=0;n<l.length;++n)r[l[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),d.oneOfSetter=s(function(l){return function(r){for(var n=0;n<l.length;++n)l[n]!==r&&delete this[l[n]]}},"setOneOf"),d.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},d._configure=function(){var g=d.Buffer;if(!g){d._Buffer_from=d._Buffer_allocUnsafe=null;return}d._Buffer_from=g.from!==Uint8Array.from&&g.from||s(function(r,n){return new g(r,n)},"Buffer_from"),d._Buffer_allocUnsafe=g.allocUnsafe||s(function(r){return new g(r)},"Buffer_allocUnsafe")}},2360491163:(F,a,c)=>{"use strict";F.exports=t;var d=c(6168016328),p,m=d.LongBits,g=d.base64,l=d.utf8;function r(E,_,T){this.fn=E,this.len=_,this.next=void 0,this.val=T}s(r,"Op");function n(){}s(n,"noop");function e(E){this.head=E.head,this.tail=E.tail,this.len=E.len,this.next=E.states}s(e,"State");function t(){this.len=0,this.head=new r(n,0,0),this.tail=this.head,this.states=null}s(t,"Writer");var i=s(function(){return d.Buffer?s(function(){return(t.create=s(function(){return new p},"create_buffer"))()},"create_buffer_setup"):s(function(){return new t},"create_array")},"create");t.create=i(),t.alloc=s(function(_){return new d.Array(_)},"alloc"),d.Array!==Array&&(t.alloc=d.pool(t.alloc,d.Array.prototype.subarray)),t.prototype._push=s(function(_,T,w){return this.tail=this.tail.next=new r(_,T,w),this.len+=T,this},"push");function o(E,_,T){_[T]=E&255}s(o,"writeByte");function u(E,_,T){for(;E>127;)_[T++]=E&127|128,E>>>=7;_[T]=E}s(u,"writeVarint32");function h(E,_){this.len=E,this.next=void 0,this.val=_}s(h,"VarintOp"),h.prototype=Object.create(r.prototype),h.prototype.fn=u,t.prototype.uint32=s(function(_){return this.len+=(this.tail=this.tail.next=new h((_=_>>>0)<128?1:_<16384?2:_<2097152?3:_<268435456?4:5,_)).len,this},"write_uint32"),t.prototype.int32=s(function(_){return _<0?this._push(S,10,m.fromNumber(_)):this.uint32(_)},"write_int32"),t.prototype.sint32=s(function(_){return this.uint32((_<<1^_>>31)>>>0)},"write_sint32");function S(E,_,T){for(;E.hi;)_[T++]=E.lo&127|128,E.lo=(E.lo>>>7|E.hi<<25)>>>0,E.hi>>>=7;for(;E.lo>127;)_[T++]=E.lo&127|128,E.lo=E.lo>>>7;_[T++]=E.lo}s(S,"writeVarint64"),t.prototype.uint64=s(function(_){var T=m.from(_);return this._push(S,T.length(),T)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=s(function(_){var T=m.from(_).zzEncode();return this._push(S,T.length(),T)},"write_sint64"),t.prototype.bool=s(function(_){return this._push(o,1,_?1:0)},"write_bool");function f(E,_,T){_[T]=E&255,_[T+1]=E>>>8&255,_[T+2]=E>>>16&255,_[T+3]=E>>>24}s(f,"writeFixed32"),t.prototype.fixed32=s(function(_){return this._push(f,4,_>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=s(function(_){var T=m.from(_);return this._push(f,4,T.lo)._push(f,4,T.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=s(function(_){return this._push(d.float.writeFloatLE,4,_)},"write_float"),t.prototype.double=s(function(_){return this._push(d.float.writeDoubleLE,8,_)},"write_double");var v=d.Array.prototype.set?s(function(_,T,w){T.set(_,w)},"writeBytes_set"):s(function(_,T,w){for(var M=0;M<_.length;++M)T[w+M]=_[M]},"writeBytes_for");t.prototype.bytes=s(function(_){var T=_.length>>>0;if(!T)return this._push(o,1,0);if(d.isString(_)){var w=t.alloc(T=g.length(_));g.decode(_,w,0),_=w}return this.uint32(T)._push(v,T,_)},"write_bytes"),t.prototype.string=s(function(_){var T=l.length(_);return T?this.uint32(T)._push(l.write,T,_):this._push(o,1,0)},"write_string"),t.prototype.fork=s(function(){return this.states=new e(this),this.head=this.tail=new r(n,0,0),this.len=0,this},"fork"),t.prototype.reset=s(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(n,0,0),this.len=0),this},"reset"),t.prototype.ldelim=s(function(){var _=this.head,T=this.tail,w=this.len;return this.reset().uint32(w),w&&(this.tail.next=_.next,this.tail=T,this.len+=w),this},"ldelim"),t.prototype.finish=s(function(){for(var _=this.head.next,T=this.constructor.alloc(this.len),w=0;_;)_.fn(_.val,T,w),w+=_.len,_=_.next;return T},"finish"),t._configure=function(E){p=E,t.create=i(),p._configure()}},2563953490:(F,a,c)=>{"use strict";F.exports=m;var d=c(2360491163);(m.prototype=Object.create(d.prototype)).constructor=m;var p=c(6168016328);function m(){d.call(this)}s(m,"BufferWriter"),m._configure=function(){m.alloc=p._Buffer_allocUnsafe,m.writeBytesBuffer=p.Buffer&&p.Buffer.prototype instanceof Uint8Array&&p.Buffer.prototype.set.name==="set"?s(function(r,n,e){n.set(r,e)},"writeBytesBuffer_set"):s(function(r,n,e){if(r.copy)r.copy(n,e,0,r.length);else for(var t=0;t<r.length;)n[e++]=r[t++]},"writeBytesBuffer_copy")},m.prototype.bytes=s(function(r){p.isString(r)&&(r=p._Buffer_from(r,"base64"));var n=r.length>>>0;return this.uint32(n),n&&this._push(m.writeBytesBuffer,n,r),this},"write_bytes_buffer");function g(l,r,n){l.length<40?p.utf8.write(l,r,n):r.utf8Write?r.utf8Write(l,n):r.write(l,n)}s(g,"writeStringBuffer"),m.prototype.string=s(function(r){var n=p.Buffer.byteLength(r);return this.uint32(n),n&&this._push(g,n,r),this},"write_string_buffer"),m._configure()},8842724253:(F,a,c)=>{"use strict";c.r(a),c.d(a,{__assign:()=>m,__asyncDelegator:()=>_,__asyncGenerator:()=>E,__asyncValues:()=>T,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>k,__createBinding:()=>i,__decorate:()=>l,__exportStar:()=>o,__extends:()=>p,__generator:()=>t,__importDefault:()=>R,__importStar:()=>M,__makeTemplateObject:()=>w,__metadata:()=>n,__param:()=>r,__read:()=>h,__rest:()=>g,__spread:()=>S,__spreadArrays:()=>f,__values:()=>u});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d=s(function(A,P){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,H){D.__proto__=H}||function(D,H){for(var j in H)H.hasOwnProperty(j)&&(D[j]=H[j])},d(A,P)},"extendStatics");function p(A,P){d(A,P);function D(){this.constructor=A}s(D,"__"),A.prototype=P===null?Object.create(P):(D.prototype=P.prototype,new D)}s(p,"__extends");var m=s(function(){return m=Object.assign||s(function(P){for(var D,H=1,j=arguments.length;H<j;H++){D=arguments[H];for(var W in D)Object.prototype.hasOwnProperty.call(D,W)&&(P[W]=D[W])}return P},"__assign"),m.apply(this,arguments)},"__assign");function g(A,P){var D={};for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&P.indexOf(H)<0&&(D[H]=A[H]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,H=Object.getOwnPropertySymbols(A);j<H.length;j++)P.indexOf(H[j])<0&&Object.prototype.propertyIsEnumerable.call(A,H[j])&&(D[H[j]]=A[H[j]]);return D}s(g,"__rest");function l(A,P,D,H){var j=arguments.length,W=j<3?P:H===null?H=Object.getOwnPropertyDescriptor(P,D):H,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(A,P,D,H);else for(var ee=A.length-1;ee>=0;ee--)(X=A[ee])&&(W=(j<3?X(W):j>3?X(P,D,W):X(P,D))||W);return j>3&&W&&Object.defineProperty(P,D,W),W}s(l,"__decorate");function r(A,P){return function(D,H){P(D,H,A)}}s(r,"__param");function n(A,P){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,P)}s(n,"__metadata");function e(A,P,D,H){function j(W){return W instanceof D?W:new D(function(X){X(W)})}return s(j,"adopt"),new(D||(D=Promise))(function(W,X){function ee(Oe){try{oe(H.next(Oe))}catch(Xe){X(Xe)}}s(ee,"fulfilled");function fe(Oe){try{oe(H.throw(Oe))}catch(Xe){X(Xe)}}s(fe,"rejected");function oe(Oe){Oe.done?W(Oe.value):j(Oe.value).then(ee,fe)}s(oe,"step"),oe((H=H.apply(A,P||[])).next())})}s(e,"__awaiter");function t(A,P){var D={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},H,j,W,X;return X={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function ee(oe){return function(Oe){return fe([oe,Oe])}}function fe(oe){if(H)throw new TypeError("Generator is already executing.");for(;D;)try{if(H=1,j&&(W=oe[0]&2?j.return:oe[0]?j.throw||((W=j.return)&&W.call(j),0):j.next)&&!(W=W.call(j,oe[1])).done)return W;switch(j=0,W&&(oe=[oe[0]&2,W.value]),oe[0]){case 0:case 1:W=oe;break;case 4:return D.label++,{value:oe[1],done:!1};case 5:D.label++,j=oe[1],oe=[0];continue;case 7:oe=D.ops.pop(),D.trys.pop();continue;default:if(W=D.trys,!(W=W.length>0&&W[W.length-1])&&(oe[0]===6||oe[0]===2)){D=0;continue}if(oe[0]===3&&(!W||oe[1]>W[0]&&oe[1]<W[3])){D.label=oe[1];break}if(oe[0]===6&&D.label<W[1]){D.label=W[1],W=oe;break}if(W&&D.label<W[2]){D.label=W[2],D.ops.push(oe);break}W[2]&&D.ops.pop(),D.trys.pop();continue}oe=P.call(A,D)}catch(Oe){oe=[6,Oe],j=0}finally{H=W=0}if(oe[0]&5)throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}}s(t,"__generator");function i(A,P,D,H){H===void 0&&(H=D),A[H]=P[D]}s(i,"__createBinding");function o(A,P){for(var D in A)D!=="default"&&!P.hasOwnProperty(D)&&(P[D]=A[D])}s(o,"__exportStar");function u(A){var P=typeof Symbol=="function"&&Symbol.iterator,D=P&&A[P],H=0;if(D)return D.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&H>=A.length&&(A=void 0),{value:A&&A[H++],done:!A}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}s(u,"__values");function h(A,P){var D=typeof Symbol=="function"&&A[Symbol.iterator];if(!D)return A;var H=D.call(A),j,W=[],X;try{for(;(P===void 0||P-- >0)&&!(j=H.next()).done;)W.push(j.value)}catch(ee){X={error:ee}}finally{try{j&&!j.done&&(D=H.return)&&D.call(H)}finally{if(X)throw X.error}}return W}s(h,"__read");function S(){for(var A=[],P=0;P<arguments.length;P++)A=A.concat(h(arguments[P]));return A}s(S,"__spread");function f(){for(var A=0,P=0,D=arguments.length;P<D;P++)A+=arguments[P].length;for(var H=Array(A),j=0,P=0;P<D;P++)for(var W=arguments[P],X=0,ee=W.length;X<ee;X++,j++)H[j]=W[X];return H}s(f,"__spreadArrays");function v(A){return this instanceof v?(this.v=A,this):new v(A)}s(v,"__await");function E(A,P,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H=D.apply(A,P||[]),j,W=[];return j={},X("next"),X("throw"),X("return"),j[Symbol.asyncIterator]=function(){return this},j;function X(ge){H[ge]&&(j[ge]=function(Me){return new Promise(function($e,ze){W.push([ge,Me,$e,ze])>1||ee(ge,Me)})})}function ee(ge,Me){try{fe(H[ge](Me))}catch($e){Xe(W[0][3],$e)}}function fe(ge){ge.value instanceof v?Promise.resolve(ge.value.v).then(oe,Oe):Xe(W[0][2],ge)}function oe(ge){ee("next",ge)}function Oe(ge){ee("throw",ge)}function Xe(ge,Me){ge(Me),W.shift(),W.length&&ee(W[0][0],W[0][1])}}s(E,"__asyncGenerator");function _(A){var P,D;return P={},H("next"),H("throw",function(j){throw j}),H("return"),P[Symbol.iterator]=function(){return this},P;function H(j,W){P[j]=A[j]?function(X){return(D=!D)?{value:v(A[j](X)),done:j==="return"}:W?W(X):X}:W}}s(_,"__asyncDelegator");function T(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=A[Symbol.asyncIterator],D;return P?P.call(A):(A=typeof u=="function"?u(A):A[Symbol.iterator](),D={},H("next"),H("throw"),H("return"),D[Symbol.asyncIterator]=function(){return this},D);function H(W){D[W]=A[W]&&function(X){return new Promise(function(ee,fe){X=A[W](X),j(ee,fe,X.done,X.value)})}}function j(W,X,ee,fe){Promise.resolve(fe).then(function(oe){W({value:oe,done:ee})},X)}}s(T,"__asyncValues");function w(A,P){return Object.defineProperty?Object.defineProperty(A,"raw",{value:P}):A.raw=P,A}s(w,"__makeTemplateObject");function M(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var D in A)Object.hasOwnProperty.call(A,D)&&(P[D]=A[D]);return P.default=A,P}s(M,"__importStar");function R(A){return A&&A.__esModule?A:{default:A}}s(R,"__importDefault");function O(A,P){if(!P.has(A))throw new TypeError("attempted to get private field on non-instance");return P.get(A)}s(O,"__classPrivateFieldGet");function k(A,P,D){if(!P.has(A))throw new TypeError("attempted to set private field on non-instance");return P.set(A,D),D}s(k,"__classPrivateFieldSet")},3323583056:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9013967876));let g=s(class{needUpdate(r){return this.activeSpeakers?this.speakerScores[r]===0&&this.activeSpeakers.includes(r)||this.speakerScores[r]>0&&!this.activeSpeakers.includes(r):!0}updateActiveSpeakers(r,n,e){if(!this.needUpdate(e))return;const t=[],i=Object.keys(this.speakerScores);for(let f=0;f<i.length;f++){const v=i[f];t.push({attendeeId:v,activeScore:this.speakerScores[v]})}const o=t.sort((f,v)=>v.activeScore-f.activeScore).filter(function(f){return f.activeScore>0}).map(function(f){return f.attendeeId});this.activeSpeakers=o,n(o);const h=o.length>0&&o[0]===this.selfAttendeeId&&r.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==h&&(this.hasBandwidthPriority=h,this.hasBandwidthPriorityCallback(h))}updateScore(r,n,e,t,i){const o=r.calculateScore(e,t,i);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(r,n,e))}subscribe(r,n,e,t){const i=s((u,h)=>{if(!h){this.speakerScores[u]=0,this.mostRecentUpdateTimestamp[u]=Date.now(),this.updateActiveSpeakers(r,n,u);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(u,(S,f,v,E)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),v!==null&&(this.speakerMuteState[S]=v),this.updateScore(r,n,S,f,v)})},"handler");this.detectorCallbackToHandler.set(n,i);const o=new m.default(this.updateIntervalMs);if(o.start(()=>{for(const u in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[u]>this.waitIntervalMs&&this.updateScore(r,n,u,0,this.speakerMuteState[u])}),this.detectorCallbackToActivityTimer.set(n,o),e&&t){const u=new m.default(t);u.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(n,u)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)}unsubscribe(r){const n=this.detectorCallbackToHandler.get(r);this.detectorCallbackToHandler.delete(r),n&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n);const e=this.detectorCallbackToActivityTimer.get(r);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(r));const t=this.detectorCallbackToScoresTimer.get(r);t&&(t.stop(),this.detectorCallbackToHandler.delete(r))}destroy(){return d(this,void 0,void 0,function*(){for(const r of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r);for(const r of this.detectorCallbackToActivityTimer.values())r.stop();for(const r of this.detectorCallbackToScoresTimer.values())r.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(r,n,e,t=1e3,i=200){this.realtimeController=r,this.selfAttendeeId=n,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=i,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");a.default=g},1644292716:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{calculateScore(p,m,g){(g||m===null)&&(m=0),this.volumes.hasOwnProperty(p)||(this.volumes[p]=0),m>this.silenceThreshold?m=1:m=0;const l=this.volumes[p]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[p]=l;for(const r in this.volumes)r!==p&&(this.volumes[r]=Math.max(this.volumes[r]-this.takeoverRate*m,0));return l<this.cutoffThreshold?0:l}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(p=.9,m=.01,g=.2,l=.2){this.speakerWeight=p,this.cutoffThreshold=m,this.silenceThreshold=g,this.takeoverRate=l,this.volumes={}}},"DefaultActiveSpeakerPolicy");a.default=c},9821410283:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class kS{static create(p,m){const g=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!p||p.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!g.test(p))throw new Error(`appName must satisfy ${g} regular expression`);const l=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!l.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new kS(p,m)}constructor(p,m){this.appName=p,this.appVersion=m}},"ApplicationMetadata");a.default=c},4846700713:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"Attendee");a.default=c},3227886346:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8351168186)),g=p(c(3741513515));let l=s(class{bindAudioElement(n){return d(this,void 0,void 0,function*(){if(!n)throw new Error(`Cannot bind audio element: ${n}`);return this.audioElement=n,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(n=>{this.audioStream&&n.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(n){return d(this,void 0,void 0,function*(){if(n){this.audioStream=n;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(n){return d(this,void 0,void 0,function*(){if(n&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=n,this.bindAudioMix()})}forEachObserver(n){for(const e of this.observers)g.default.nextTick(()=>{n(e)})}bindAudioMix(){var n,e;return d(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(f=>{t&&f.meetingAudioStreamBecameInactive(t),this.audioStream&&f.meetingAudioStreamBecameActive(this.audioStream)});const i=((n=this.audioDevice)===null||n===void 0?void 0:n.deviceId)!==this.audioElement.sinkId;if(i&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",u=this.audioElement.sinkId;if(o===u)return;const h=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(h.srcObject=null),i)try{yield h.setSinkId(o)}catch(f){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${f}`),f}this.browserBehavior.hasChromiumWebRTC()&&(h.srcObject=S)})}getCurrentMeetingAudioStream(){return d(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(n){return d(this,void 0,void 0,function*(){this.observers.add(n)})}removeAudioMixObserver(n){return d(this,void 0,void 0,function*(){this.observers.delete(n)})}audioOutputDidChange(n){return d(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(n)})}constructor(n){this.logger=n,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new m.default,this.observers=new Set}},"DefaultAudioMixController");a.default=l},4999349075:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8351168186));let m=s(class Yd{static fullbandSpeechMono(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Yd(4e4,l)}static fullbandMusicMono(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Yd(64e3,l)}static fullbandMusicStereo(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Yd(128e3,l)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(l=null,r=!0){this.audioBitrateBps=l,this.enableAudioRedundancy=new p.default().supportsAudioRedundancy()&&r}},"AudioProfile");a.default=m},8430013536:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,a.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let c=s(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=a.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=a.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");a.default=c},616382858:function(F,a,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(K,q,Ee,be){be===void 0&&(be=Ee),Object.defineProperty(K,be,{enumerable:!0,get:function(){return q[Ee]}})}:function(K,q,Ee,be){be===void 0&&(be=Ee),K[be]=q[Ee]}),p=this&&this.__setModuleDefault||(Object.create?function(K,q){Object.defineProperty(K,"default",{enumerable:!0,value:q})}:function(K,q){K.default=q}),m=this&&this.__importStar||function(K){if(K&&K.__esModule)return K;var q={};if(K!=null)for(var Ee in K)Ee!=="default"&&Object.prototype.hasOwnProperty.call(K,Ee)&&d(q,K,Ee);return p(q,K),q},g=this&&this.__awaiter||function(K,q,Ee,be){function it(He){return He instanceof Ee?He:new Ee(function(Qe){Qe(He)})}return s(it,"adopt"),new(Ee||(Ee=Promise))(function(He,Qe){function Se(ve){try{L(be.next(ve))}catch(_e){Qe(_e)}}s(Se,"fulfilled");function Ae(ve){try{L(be.throw(ve))}catch(_e){Qe(_e)}}s(Ae,"rejected");function L(ve){ve.done?He(ve.value):it(ve.value).then(Se,Ae)}s(L,"step"),L((be=be.apply(K,q||[])).next())})},l=this&&this.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(a,"__esModule",{value:!0});const r=l(c(3323583056)),n=l(c(3227886346)),e=l(c(4999349075)),t=l(c(8351168186)),i=l(c(3544934903)),o=l(c(1523356655)),u=l(c(8981226922)),h=l(c(3777990285)),S=l(c(4882394368)),f=l(c(1880578541)),v=l(c(4599834734)),E=l(c(2311029370)),_=l(c(5403024322)),T=l(c(3741513515)),w=l(c(4641929542)),M=l(c(3097552577)),R=l(c(953236500)),O=l(c(7338273141)),k=l(c(7258714924)),A=m(c(1448262436)),P=l(c(426218501)),D=l(c(4983545831)),H=c(5391134031),j=l(c(5954709649)),W=l(c(7063021350)),X=l(c(4019918320)),ee=l(c(7819987893)),fe=l(c(2918138407)),oe=l(c(7869625838)),Oe=l(c(9613312866)),Xe=l(c(1495317641)),ge=l(c(5110013894)),Me=l(c(3708122413)),$e=l(c(1504187181)),ze=l(c(6907504899)),nt=l(c(6015743885)),mt=l(c(3627106901)),gt=l(c(3151098372)),Pe=l(c(9363406688)),xe=l(c(6069988831)),Ye=l(c(2452872079)),Ze=l(c(2471283351)),Re=l(c(3894566132)),Tt=l(c(6412210284)),rt=l(c(839180639)),Nt=l(c(2641934340)),Wt=l(c(3450261616)),Qt=l(c(7500181884)),Ot=l(c(6769427378)),hn=l(c(1438956810)),fi=l(c(2962876954)),wn=l(c(3052177122)),Jt=c(903520651),on=l(c(8261422434)),kt=l(c(7744958188)),$t=l(c(1437705752)),en=c(6700033168),zt=l(c(5134603106)),Kt=l(c(5216544790)),Q=l(c(7562203998)),Ve=l(c(9251190564)),Be=l(c(1695899970)),Je=l(c(3361826027)),ut=l(c(3423911843)),ot=l(c(338869682)),de=l(c(8430013536));let Ue=s(class Xd{destroy(){return g(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new r.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(q){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(q):null}setAudioProfile(q){this._audioProfile=q}addObserver(q){this.logger.info("adding meeting observer"),this.observerQueue.add(q)}removeObserver(q){this.logger.info("removing meeting observer"),this.observerQueue.delete(q)}forEachObserver(q){for(const Ee of this.observerQueue)T.default.nextTick(()=>{this.observerQueue.has(Ee)&&q(Ee)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new de.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new k.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const q=s(()=>g(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(Ee){Ee.type===P.default.WebSocketClosed&&q()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(q=>{this.logger.error(`Signaling task pre-start failed: ${q}`),this.signalingTask=void 0})}start(q){this.startReturningPromise(q).then(()=>{this.logger.info("start completed")}).catch(Ee=>{this.logger.error(`start failed: ${Ee}`)})}startReturningPromise(q){return(q==null?void 0:q.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((Ee,be)=>{this.sessionStateController.perform(M.default.Connect,()=>{this.actionConnect(!1).then(Ee).catch(be)})}))}connectWithPromises(q){const Ee=this.meetingSessionContext,be=s((ne,Ft)=>new Wt.default(this.logger,Ft,ne),"timeout");this.monitorTask=new $e.default(Ee,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const it=this.monitorTask.once(),He=new gt.default(Ee).once();this.receiveIndexTask=new Ye.default(Ee),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Qe=new Re.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new Me.default(Ee),new Ze.default(Ee),new Xe.default(Ee),this.receiveIndexTask]).once(),Se=new fe.default(Ee).once(Qe),Ae=new W.default(Ee).once(Se,He),L=new oe.default(Ee).once(Ae),ve=new Tt.default(Ee).once(L),_e=new Oe.default(Ee).once(ve),Ie=new Nt.default(Ee).once(_e);return this.receiveRemotePauseResumeTask=new Pe.default(Ee),this.receiveRemotePauseResumeTask.once(Ie),new Re.default(this.logger,this.wrapTaskName("AudioVideoStart"),[it,be(this.configuration.connectionTimeoutMs,new Re.default(this.logger,"Peer",[Ie,this.receiveRemotePauseResumeTask,q?new Wt.default(this.logger,new nt.default(this.logger,"FinalizeConnection",[new Qt.default(Ee),new rt.default(Ee)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new rt.default(Ee)]))])}actionConnect(q){var Ee;return g(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const be=!!this.configuration.urls.audioHostURL;if(be?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new hn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new fi.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Ot.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new wn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new ot.default(this.logger,this._realtimeController,Xd.MIN_VOLUME_DECIBELS,Xd.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Qe=this.meetingSessionContext.videoUplinkBandwidthPolicy;Qe||(Qe=new Je.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Qe),Qe.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new $t.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new Q.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new Kt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new ut.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new kt.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new v.default(this.configuration.credentials.attendeeId).hasModality(v.default.MODALITY_CONTENT)){const Qe=this.configuration.meetingFeatures.contentMaxResolution===u.default.VideoResolutionUHD;Qe&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Qe)}else{const Qe=this.configuration.meetingFeatures.videoMaxResolution===u.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Qe)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new f.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new on.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new zt.default,this.meetingSessionContext.videosPaused=new zt.default,this.meetingSessionContext.statsCollector=new j.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new E.default(this.meetingSessionContext.signalingClient,Xd.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},q||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Qe=>{Jt.Maybe.of(Qe.audioVideoDidStartConnecting).map(Se=>Se.bind(Qe)(!1))}),(Ee=this.eventController)===null||Ee===void 0||Ee.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const it=be&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+it);const He=this.connectWithPromises(it);try{yield He.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(M.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Qe){this.signalingTask=void 0;const Se=new h.default(this.getMeetingStatusCode(Qe)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${Se} due to error ${Qe}.`),this.sessionStateController.state()===R.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(M.default.Fail,()=>g(this,void 0,void 0,function*(){yield this.actionDisconnect(Se,!0,Qe),this.handleMeetingSessionStatus(Se,Qe)||this.notifyStop(Se,Qe)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new Wt.default(this.logger,new ze.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=H.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(q=>{Jt.Maybe.of(q.audioVideoDidStart).map(Ee=>Ee.bind(q)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var q;return this.sessionStateController.state()===R.default.NotConnected?((q=this.meetingSessionContext.signalingClient)===null||q===void 0||q.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((Ee,be)=>{this.sessionStateController.perform(M.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new h.default(S.default.Left),!1,null).then(Ee).catch(be)})})}stop(){this.stopReturningPromise()}actionDisconnect(q,Ee,be){return g(this,void 0,void 0,function*(){try{yield new Re.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new Wt.default(this.logger,new ge.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const it=[new Wt.default(this.logger,new ee.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new Re.default(this.logger,this.wrapTaskName("AudioVideoClean"),it).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(M.default.FinishDisconnecting,()=>{Ee||this.notifyStop(q,be)})})}update(){let Ee=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(Ee||(Ee=this.meetingSessionContext.peer===void 0),Ee||(Ee=!this.updateRemoteVideosFromPolicy()),Ee||(Ee=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!Ee)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const be=this.sessionStateController.perform(M.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return be===O.default.Transitioned||be===O.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!A.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===A.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const q=this.detectChangesInVideosToReceive();if(q===void 0)return!1;const Ee=q.added,be=q.simulcastStreamUpdates,it=q.removed,He=this.meetingSessionContext,Qe=[];for(const[Se,Ae]of be.entries()){const L=new D.default;if(L.streamId=Ae,L.attendeeId=He.videoStreamIndex.attendeeIdForStreamId(Ae),L.mid=He.transceiverController.getMidForStreamId(Se),L.mid===void 0)return this.logger.info(`No MID found for stream ID ${Se}, cannot update stream without renegotiation`),!1;if(Qe.push(L),He.transceiverController.setStreamIdForMid(L.mid,Ae),He.videoStreamIndex.overrideStreamIdMappings(Se,Ae),He.videoTileController.haveVideoTileForAttendeeId(L.attendeeId)){const ve=He.videoTileController.getVideoTileForAttendeeId(L.attendeeId);if(!ve.setStreamId)return!1;ve.setStreamId(Ae)}}return Qe.length!==0&&He.signalingClient.remoteVideoUpdate(Qe,[]),Ee.length!==0||it.length!==0?!1:(He.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const q=this.meetingSessionContext;if(q.videosToReceive===null||!q.transceiverController||!q.transceiverController.getMidForStreamId||!q.transceiverController.setStreamIdForMid||!q.videosToReceive.forEach||!q.signalingClient.remoteVideoUpdate||!q.videoStreamIndex.overrideStreamIdMappings)return;let Ee=[];const be=new Map;let it=[];if(q.lastVideosToReceive===null)Ee=q.videosToReceive.array();else{const He=q.videoStreamIndex;q.videosToReceive.forEach(Qe=>{if(q.lastVideosToReceive.contain(Qe))return;let Se=!1;q.lastVideosToReceive.forEach(Ae=>{Se||He.StreamIdsInSameGroup(Ae,Qe)&&(be.set(Ae,Qe),Se=!0)}),Se||Ee.push(Qe)}),it=q.lastVideosToReceive.array().filter(Qe=>{const Se=q.videosToReceive.contain(Qe),Ae=be.has(Qe);return!Se&&!Ae})}return this.logger.info(`Request to update remote videos with added: [${Ee}], updated: [${Array.from(be.entries()).map(He=>{let[Qe,Se]=He;return`${Qe}->${Se}`}).join(",")}], removed: [${it}]`),{added:Ee,removed:it,simulcastStreamUpdates:be}}isNotAddingOrRemovingStreams(){const q=this.detectChangesInVideosToReceive();if(q===void 0)return!1;const Ee=q.added,be=q.removed;return Ee.length!==0||be.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const q=this.meetingSessionContext;if(q.videosToReceive===null)return!1;const Ee=q.videosToReceive.array().map(Se=>q.videoStreamIndex.groupIdForStreamId(Se));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(Ee));const be=en.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(q,Ee,q.videoDownlinkBandwidthPolicy.getVideoPreferences()),it=new Map,He=[];for(const Se of be){let Ae=!1;if(!q.lastVideoSubscriptionConfiguration.has(Se.groupId))Ae=!0;else{const L=q.lastVideoSubscriptionConfiguration.get(Se.groupId);Se.equals(L)||(this.logger.debug(`${JSON.stringify(Se)} does not equal ${JSON.stringify(L)}, sending update`),Ae=!0)}it.set(Se.groupId,Se),Ae&&He.push(Se)}q.lastVideoSubscriptionConfiguration=it;const Qe=[];if(q.lastVideosToReceive!==null){const Se=new Set(Ee);for(const Ae of q.lastVideosToReceive.array()){const L=q.videoStreamIndex.groupIdForStreamId(Ae);if(!Se.has(L)){const ve=q.transceiverController.getMidForGroupId(L);if(ve===void 0){q.logger.warn(`Could not find MID for group ID to remove: ${L}`);continue}Qe.push(ve)}}}return(He.length!==0||Qe.length!==0)&&q.signalingClient.remoteVideoUpdate(He,Qe),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const q=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(q)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const q=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!q||!q.headerExtensions?!1:q.headerExtensions.some(Ee=>Ee.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(q){const Ee=s(()=>g(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),q()}),"restartVideo"),be=this.sessionStateController.perform(M.default.Update,()=>{Ee()});return be===O.default.Transitioned||be===O.default.DeferredTransition}replaceLocalVideo(q){return g(this,void 0,void 0,function*(){if(!q||q.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const Ee=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(Ee){const be=Ee.state(),it=q.getVideoTracks()[0].getSettings();Ee.bindVideoStream(be.boundAttendeeId,!0,q,it.width,it.height,be.streamId,be.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(q.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=q,this.logger.info("Local video input is updated")})}replaceLocalAudio(q){return g(this,void 0,void 0,function*(){if(!q||q.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(q.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=q,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(q){return g(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new Re.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new xe.default(this.meetingSessionContext),new Wt.default(this.logger,new Re.default(this.logger,"UpdateSession",[new W.default(this.meetingSessionContext),new oe.default(this.meetingSessionContext),new Tt.default(this.meetingSessionContext),new Oe.default(this.meetingSessionContext),new Nt.default(this.meetingSessionContext),new rt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),q&&this.sessionStateController.perform(M.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(Ee){this.sessionStateController.perform(M.default.FinishUpdating,()=>{const be=new h.default(this.getMeetingStatusCode(Ee)||S.default.TaskFailed);be.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(be,Ee)})}})}notifyStop(q,Ee){var be;if(this.forEachObserver(it=>{Jt.Maybe.of(it.audioVideoDidStop).map(He=>He.bind(it)(q))}),this.eventController){const{signalingOpenDurationMs:it,poorConnectionCount:He,startTimeMs:Qe,iceGatheringDurationMs:Se,attendeePresenceDurationMs:Ae,meetingStartDurationMs:L}=this.meetingSessionContext,ve={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Qe===null?0:Math.round(Date.now()-Qe),meetingStatus:S.default[q.statusCode()],signalingOpenDurationMs:it,iceGatheringDurationMs:Se,attendeePresenceDurationMs:Ae,poorConnectionCount:He,meetingStartDurationMs:L,retryCount:this.totalRetryCount},_e=Ee&&Ee.message||((be=q.toString)===null||be===void 0?void 0:be.call(q))||"";ve.meetingDurationMs===0?(ve.meetingErrorMessage=_e,delete ve.meetingDurationMs,delete ve.attendeePresenceDurationMs,delete ve.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",ve)):q.isFailure()||q.isAudioConnectionFailure()?(ve.meetingErrorMessage=_e,this.eventController.publishEvent("meetingFailed",ve)):this.eventController.publishEvent("meetingEnded",ve)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const q=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(q)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(q,Ee){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(it=>{Jt.Maybe.of(it.audioVideoWasDemotedFromPrimaryMeeting).map(He=>He.bind(it)(new h.default(S.default.AudioVideoDisconnectedWhilePromoted)))}));const be=this._reconnectController.retryWithBackoff(()=>g(this,void 0,void 0,function*(){this.sessionStateController.state()===R.default.NotConnected?this.sessionStateController.perform(M.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(M.default.Reconnect,()=>{this.actionReconnect(q)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return be||this.sessionStateController.perform(M.default.Fail,()=>{this.actionDisconnect(q,!1,Ee)}),be}actionReconnect(q){return g(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(Ee=>{Jt.Maybe.of(Ee.audioVideoDidStartConnecting).map(be=>be.bind(Ee)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new Pe.default(this.meetingSessionContext);try{yield new Re.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new Wt.default(this.logger,new Re.default(this.logger,"Media",[new X.default(this.meetingSessionContext),new Re.default(this.logger,"Signaling",[new ze.default(this.meetingSessionContext),new Xe.default(this.meetingSessionContext)]),new fe.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new xe.default(this.meetingSessionContext),new Wt.default(this.logger,new Re.default(this.logger,"UpdateSession",[new W.default(this.meetingSessionContext),new oe.default(this.meetingSessionContext),new Tt.default(this.meetingSessionContext),new Oe.default(this.meetingSessionContext),new Nt.default(this.meetingSessionContext),new rt.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(M.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:Ee,poorConnectionCount:be,startTimeMs:it,iceGatheringDurationMs:He,attendeePresenceDurationMs:Qe,meetingStartDurationMs:Se}=this.meetingSessionContext,Ae={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-it),meetingStatus:S.default[q.statusCode()],signalingOpenDurationMs:Ee,iceGatheringDurationMs:He,attendeePresenceDurationMs:Qe,poorConnectionCount:be,meetingStartDurationMs:Se,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",Ae)}this.actionFinishConnecting()})}catch(Ee){this.sessionStateController.perform(M.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const be=new h.default(this.getMeetingStatusCode(Ee)||S.default.TaskFailed);this.handleMeetingSessionStatus(be,Ee)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(q){return`${q}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(q){const Ee=/the meeting status code: (\d+)/.exec(q&&q.message);return Ee&&Ee.length>1?Number.parseInt(Ee[1],10):null}enforceBandwidthLimitationForSender(q){return g(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(q)})}handleMeetingSessionStatus(q,Ee){if(this.logger.info(`handling status: ${S.default[q.statusCode()]}`),q.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(q),q.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(q.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(be=>{Jt.Maybe.of(be.videoSendDidBecomeUnavailable).map(it=>it.bind(be)())}),!1;if(q.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(be=>{Jt.Maybe.of(be.audioVideoWasDemotedFromPrimaryMeeting).map(it=>it.bind(be)(q))}),!1;if(q.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(q.isFailure()||q.isTerminal())&&this.meetingSessionContext.reconnectController){const be=this.reconnect(q,Ee);return be?this.logger.warn(`will retry due to status code ${S.default[q.statusCode()]}${Ee?` and error: ${Ee.message}`:""}`):this.logger.error(`failed with status code ${S.default[q.statusCode()]}${Ee?` and error: ${Ee.message}`:""}`),be}return!1}setVideoMaxBandwidthKbps(q){if(q<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${q} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(q)),this.maxUplinkBandwidthKbps=q}handleHasBandwidthPriority(q){return g(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(q),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const Ee=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(q);const be=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();Ee!==be&&(this.logger.info(`video send bandwidth priority ${q} max has changed from ${Ee} kbps to ${be} kbps`),yield this.enforceBandwidthLimitationForSender(be))}})}pauseReceivingStream(q){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([q])}resumeReceivingStream(q){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([q])}setVideoCodecSendPreferences(q){this.videoSendCodecPreferences=q,this.meetingSessionContext.videoSendCodecPreferences=q,this.sessionStateController.state()!==R.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:q}=this.meetingSessionContext;if(!q)return this.logger.info("meeting has not started"),[];const Ee=this.configuration.credentials.attendeeId;return q.allVideoSendingSourcesExcludingSelf(Ee)}encodingSimulcastLayersDidChange(q){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(Ee=>{Jt.Maybe.of(Ee.encodingSimulcastLayersDidChange).map(be=>be.bind(Ee)(q))})}promoteToPrimaryMeeting(q){return this.actionPromoteToPrimaryMeeting(q)}actionPromoteToPrimaryMeeting(q){return g(this,void 0,void 0,function*(){let Ee=new h.default(S.default.SignalingRequestFailed);return yield new Re.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new Wt.default(this.logger,new mt.default(this.meetingSessionContext,q,be=>{Ee=be}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=Ee.statusCode()===S.default.OK,Ee})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(q=>{Jt.Maybe.of(q.audioVideoWasDemotedFromPrimaryMeeting).map(Ee=>Ee.bind(q)(new h.default(S.default.OK)))})}videoInputDidChange(q){return g(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(q?yield this.replaceLocalVideo(q):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(q){return g(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!q)try{q=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(q)})}constructor(q,Ee,be,it,He,Qe){this._audioProfile=new e.default,this.connectionHealthData=new i.default,this.observerQueue=new Set,this.meetingSessionContext=new de.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=Ee,this.sessionStateController=new w.default(this._logger),this._configuration=q,this._webSocketAdapter=be,this._realtimeController=new _.default(it),this._realtimeController.realtimeSetLocalAttendeeId(q.credentials.attendeeId,q.credentials.externalUserId),this._mediaStreamBroker=it,this._reconnectController=He,this._videoTileController=new Ve.default(new Be.default,this,this._logger),this._audioMixController=new n.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Qe}},"DefaultAudioVideoController");a.default=Ue,Ue.MIN_VOLUME_DECIBELS=-42,Ue.MAX_VOLUME_DECIBELS=-14,Ue.PING_PONG_INTERVAL_MS=1e4},1292880771:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5384631890)),m=d(c(1653454410)),g=d(c(9416545472)),l=d(c(1946951215)),r=d(c(7136804647)),n=d(c(7147499759)),e=d(c(3777990285)),t=d(c(4882394368)),i=d(c(2653083101)),o=d(c(8855787924)),u=d(c(8796204466)),h=d(c(616382858));let S=s(class extends h.default{setAudioProfile(v){}start(){}stop(){}promoteToPrimaryMeeting(v){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(v){const E=new r.default;E.meetingId="",E.externalMeetingId="",E.credentials=new n.default,E.credentials.attendeeId="",E.credentials.joinToken="",E.urls=new i.default,E.urls.turnControlURL="",E.urls.audioHostURL="",E.urls.signalingURL="wss://localhost/";const _=new g.default;super(v||E,_,new u.default(new g.default),new l.default,new o.default(0,new p.default(0,0,0)),new m.default(v||E,_))}},"NoOpAudioVideoController");a.default=S},314828250:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(g,l,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{h(n.next(S))}catch(f){i(f)}}s(o,"fulfilled");function u(S){try{h(n.throw(S))}catch(f){i(f)}}s(u,"rejected");function h(S){S.done?t(S.value):e(S.value).then(o,u)}s(h,"step"),h((n=n.apply(g,l||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(272852764);let m=s(class{addObserver(l){this.audioVideoController.addObserver(l),this.trace("addObserver")}removeObserver(l){this.audioVideoController.removeObserver(l),this.trace("removeObserver")}setAudioProfile(l){this.trace("setAudioProfile",l),this.audioVideoController.setAudioProfile(l)}start(l){this.audioVideoController.start(l),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(l){return this.trace("getRTCPeerConnectionStats",l?l.id:null),this.audioVideoController.getRTCPeerConnectionStats(l)}bindAudioElement(l){const r=this.audioMixController.bindAudioElement(l);return this.trace("bindAudioElement",l.id,r),r}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(l){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(l)}removeAudioMixObserver(l){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(l)}bindVideoElement(l,r){this.videoTileController.bindVideoElement(l,r),this.trace("bindVideoElement",{tileId:l,videoElementId:r.id})}unbindVideoElement(l){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(l,r),this.trace("unbindVideoElement",{tileId:l,cleanUpVideoElement:r})}startLocalVideoTile(){const l=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,l),l}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const l=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,l),l}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const l=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),l}pauseVideoTile(l){this.videoTileController.pauseVideoTile(l),this.trace("pauseVideoTile",l)}unpauseVideoTile(l){this.videoTileController.unpauseVideoTile(l),this.trace("unpauseVideoTile",l)}getVideoTile(l){const r=this.videoTileController.getVideoTile(l);return this.trace("getVideoTile",l),r}getAllRemoteVideoTiles(){const l=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),l}getAllVideoTiles(){const l=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),l}addVideoTile(){const l=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,l.state()),l}removeVideoTile(l){this.videoTileController.removeVideoTile(l),this.trace("removeVideoTile",l)}removeVideoTilesByAttendeeId(l){const r=this.videoTileController.removeVideoTilesByAttendeeId(l);return this.trace("removeVideoTilesByAttendeeId",l,r),r}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(l){const r=this.videoTileController.captureVideoTile(l);return this.trace("captureVideoTile",l),r}realtimeSubscribeToAttendeeIdPresence(l){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(l),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(l){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(l),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(l){this.realtimeController.realtimeSetCanUnmuteLocalAudio(l),this.trace("realtimeSetCanUnmuteLocalAudio",l)}realtimeSubscribeToSetCanUnmuteLocalAudio(l){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(l),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(l){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(l),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const l=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,l),l}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const l=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),l}realtimeSubscribeToMuteAndUnmuteLocalAudio(l){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(l),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(l){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(l),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const l=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),l}realtimeSubscribeToVolumeIndicator(l,r){this.realtimeController.realtimeSubscribeToVolumeIndicator(l,r),this.trace("realtimeSubscribeToVolumeIndicator",l)}realtimeUnsubscribeFromVolumeIndicator(l,r){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(l,r),this.trace("realtimeUnsubscribeFromVolumeIndicator",l,r)}realtimeSubscribeToLocalSignalStrengthChange(l){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(l),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(l){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(l),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(l,r,n){this.realtimeController.realtimeSendDataMessage(l,r,n),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(l,r){this.realtimeController.realtimeSubscribeToReceiveDataMessage(l,r),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(l){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(l){this.realtimeController.realtimeSubscribeToFatalError(l),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(l){this.realtimeController.realtimeUnsubscribeToFatalError(l),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(l,r,n,e){this.audioVideoController.activeSpeakerDetector.subscribe(l,r,n,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(l){this.audioVideoController.activeSpeakerDetector.unsubscribe(l),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioInputDevices(l);return this.trace("listAudioInputDevices",l,r),r})}listVideoInputDevices(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const r=yield this.deviceController.listVideoInputDevices(l);return this.trace("listVideoInputDevices",l,r),r})}listAudioOutputDevices(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioOutputDevices(l);return this.trace("listAudioOutputDevices",l,r),r})}startAudioInput(l){return d(this,void 0,void 0,function*(){return this.trace("startAudioInput",l),this.deviceController.startAudioInput(l)})}stopAudioInput(){return d(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(l){return d(this,void 0,void 0,function*(){return p.isVideoTransformDevice(l)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",l),this.deviceController.startVideoInput(l)})}stopVideoInput(){return d(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(l){const r=this.deviceController.chooseAudioOutput(l);return this.trace("chooseAudioOutput",l),r}addDeviceChangeObserver(l){this.deviceController.addDeviceChangeObserver(l),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(l){this.deviceController.removeDeviceChangeObserver(l),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const l=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),l}startVideoPreviewForVideoInput(l){this.deviceController.startVideoPreviewForVideoInput(l),this.trace("startVideoPreviewForVideoInput",l.id)}stopVideoPreviewForVideoInput(l){this.deviceController.stopVideoPreviewForVideoInput(l),this.trace("stopVideoPreviewForVideoInput",l.id)}setDeviceLabelTrigger(l){this.deviceController.setDeviceLabelTrigger(l),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(l){const r=this.deviceController.mixIntoAudioInput(l);return this.trace("mixIntoAudioInput",l.id),r}chooseVideoInputQuality(l,r,n){this.deviceController.chooseVideoInputQuality(l,r,n),this.trace("chooseVideoInputQuality",{width:l,height:r,frameRate:n})}setVideoMaxBandwidthKbps(l){this.audioVideoController.setVideoMaxBandwidthKbps(l),this.trace("setVideoMaxBandwidthKbps",l)}setVideoCodecSendPreferences(l){this.audioVideoController.setVideoCodecSendPreferences(l),this.trace("setVideoCodecSendPreferences",l)}getVideoInputQualitySettings(){const l=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),l}setContentAudioProfile(l){this.trace("setContentAudioProfile",l),this.contentShareController.setContentAudioProfile(l)}enableSimulcastForContentShare(l,r){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(l,r)}enableSVCForContentShare(l){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(l)}startContentShare(l){const r=this.contentShareController.startContentShare(l);return this.trace("startContentShare"),r}startContentShareFromScreenCapture(l,r){const n=this.contentShareController.startContentShareFromScreenCapture(l,r);return this.trace("startContentShareFromScreenCapture"),n}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(l){this.contentShareController.addContentShareObserver(l),this.trace("addContentShareObserver")}removeContentShareObserver(l){this.contentShareController.removeContentShareObserver(l),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(l){this.contentShareController.setContentShareVideoCodecPreferences(l),this.trace("setContentShareVideoCodecPreferences")}trace(l,r,n){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let i=`API/DefaultAudioVideoFacade/${e}/${t}/${l}`;typeof r<"u"&&(i+=` ${JSON.stringify(r)}`),typeof n<"u"&&(i+=` -> ${JSON.stringify(n)}`),this.audioVideoController.logger.info(i)}getRemoteVideoSources(){const l=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,l),l}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(l){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const r=this.audioVideoController.promoteToPrimaryMeeting(l);return this.trace("promoteToPrimaryMeeting",null,r),r}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(l){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(l,r,n,e,t,i){this.audioVideoController=l,this.videoTileController=r,this.realtimeController=n,this.audioMixController=e,this.deviceController=t,this.contentShareController=i}},"DefaultAudioVideoFacade");a.default=m},5565992874:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9775024432)),g=c(9721779232);let l=s(class extends m.default{drawImageWithMask(n,e){const t=this.blurredImage,{canvasCtx:i,targetCanvas:o}=this,{width:u,height:h}=o;if(!e||!t){i.clearRect(0,0,u,h);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),i.save(),i.clearRect(0,0,u,h),i.drawImage(this.scaledCanvas,0,0,u,h),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,u,h),i.globalCompositeOperation="destination-over",i.drawImage(this.blurCanvas,0,0,u,h),i.restore()}setBlurStrength(n){if(super.setBlurStrength(n),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=g.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(n){this.blurredImage=n.payload.blurOutput,super.handlePredict(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return d(this,void 0,void 0,function*(){n.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(n,e){super(n,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");a.default=l},9775024432:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8080066655)),g=c(9721779232),l=p(c(9387566064));let r=s(class extends m.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:u}=this,{width:h,height:S}=u;o.save(),o.clearRect(0,0,h,S),o.drawImage(this.scaledCanvas,0,0,h,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,h,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,u.width,u.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=g.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return d(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new l.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");a.default=r},9721779232:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.BlurStrengthMapper=void 0;const c={LOW:7,MEDIUM:15,HIGH:30};let d=s(class{static getBlurAmount(m,g){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*g.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");a.BlurStrengthMapper=d,d.BLUR_STRENGTH_DIVISOR=540,a.default=c},7840699215:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(u,h,S,f){function v(E){return E instanceof S?E:new S(function(_){_(E)})}return s(v,"adopt"),new(S||(S=Promise))(function(E,_){function T(R){try{M(f.next(R))}catch(O){_(O)}}s(T,"fulfilled");function w(R){try{M(f.throw(R))}catch(O){_(O)}}s(w,"rejected");function M(R){R.done?E(R.value):v(R.value).then(T,w)}s(M,"step"),M((f=f.apply(u,h||[])).next())})},p=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(6292069043)),g=p(c(5956893594)),l=p(c(3756404293)),r=p(c(7000795223)),n=p(c(5565992874)),e=p(c(9775024432)),t=p(c(9721779232));let i=s(class extends r.default{setBlurStrength(){}loadAssets(){return d(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=s(class Yl extends m.default{static create(h,S){return d(this,void 0,void 0,function*(){h=Yl.resolveSpec(h),S=Yl.resolveOptions(S);const{logger:f}=S,v=yield Yl.isSupported(h,S);if(f.info(`processor is ${v?"":"not"} supported`),!v)return f.warn("Using no-op processor because background blur is not supported"),new i;let E;return(yield e.default.isSupported())?(f.info("Using browser-provided background blur"),E=new e.default(h,S)):(f.info("Using built-in background blur"),E=new n.default(h,S)),yield E.loadAssets(),E})}static resolveOptions(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},h);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new g.default("BackgroundBlurProcessor",l.default.INFO)),S=super.resolveOptions(S),S}static isSupported(h,S){return h=Yl.resolveSpec(h),S=Yl.resolveOptions(S),super.isSupported(h,S)}},"BackgroundBlurVideoFrameProcessor");a.default=o},9387566064:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(7898988988));let m=s(class extends p.default{},"BackgroundBlurVideoFrameProcessorDelegate");a.default=m},7472936477:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class DS{static builder(){return new DS}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const p={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},g="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=g,this.input=p,this.output=m,this}withPath(p){return this.path=p,this}withInput(p){return this.input=p,this}withOutput(p){return this.output=p,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");a.default=c},8924517826:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const c=.8;let d=s(class{reportEvent(m){const g=m-this.lastReportedEventTimestamp;if(g>=this.reportingPeriodMillis){const l=this.filterCount,r=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||l===0)return;const n=Math.round(r/l),e=Math.round(this.framerate*(g/1e3))-l,t=Math.round(100*r/g);n>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:n,framerate:this.framerate,periodMillis:g}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:r,periodMillis:g})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*c)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const g=Date.now();this.reportEvent(g)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,g,l,r){this.delegate=m,this.reportingPeriodMillis=g,this.filterCPUUtilization=l,this.logger=r,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");a.default=d},8080066655:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(t,i,o,u){function h(S){return S instanceof o?S:new o(function(f){f(S)})}return s(h,"adopt"),new(o||(o=Promise))(function(S,f){function v(T){try{_(u.next(T))}catch(w){f(w)}}s(v,"fulfilled");function E(T){try{_(u.throw(T))}catch(w){f(w)}}s(E,"rejected");function _(T){T.done?S(T.value):h(T.value).then(v,E)}s(_,"step"),_((u=u.apply(t,i||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0}),a.BackgroundFilterMonitor=void 0;const m=c(6582301018),g=p(c(6672418579)),l=p(c(8924517826));let r=s(class{whenNext(){return this.promise||(this.promise=new Promise(i=>this.resolve=i)),this.promise}next(i){this.value=i,this.resolve(i),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),n=s(class ch{static createWorkerPromise(){const i={resolve:null,reject:null,promise:null};return i.promise=new Promise((o,u)=>{i.resolve=o,i.reject=u}),i}validateSpec(i){if(!i)throw new Error("processor has null spec");if(!i.model)throw new Error("processor spec has null model");if(!i.paths)throw new Error("processor spec has null paths")}validateOptions(i){if(!i)throw new Error("processor has null options");if(!i.logger)throw new Error("processor has null options - logger");if(!i.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!i.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(i){this.videoFramesPerFilterUpdate=1,this.frameCounter=new l.default(this.delegate,i.reportingPeriodMillis,i.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(i){return JSON.stringify(i,null,2)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(i){if(this.logger.info(`received load model message: ${this.stringify(i)}`),i.payload!==2){this.logger.error("failed to load model! status: "+i.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+i.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(i){this.mask$.next(i.payload.output)}handleWorkerEvent(i){const o=i.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return d(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield m.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",i=>this.handleWorkerEvent(i)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(i){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${i.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(i){return d(this,void 0,void 0,function*(){if(this.destroyed)return i;this.frameCounter.frameReceived(i[0].framerate),this.cpuMonitor.frameReceived();const o=i[0].asCanvasElement();if(!o)return i;if(!this.modelInitialized)return i[0]=this.canvasVideoFrameBuffer,i;const u=o.width,h=o.height;if(u===0||h===0)return i;this.sourceWidth===0&&(this.sourceWidth=u,this.sourceHeight=h,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==u||this.sourceHeight!==h)&&(this.sourceWidth=u,this.sourceHeight=h,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const f=this.spec.model.input.width/o.width,v=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const E=this.scaledCanvas.getContext("2d");E.save(),E.scale(f,v),E.drawImage(o,0,0),E.restore();const _=E.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const T=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:_},[_.data.buffer]),S=yield T}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),i}finally{this.frameCounter.filterComplete(),this.frameNumber++}return i[0]=this.canvasVideoFrameBuffer,i})}updateVideoFramesPerFilterUpdate(i){i!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=i,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var i,o,u,h;return d(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(i=this.worker)===null||i===void 0||i.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(u=this.targetCanvas)===null||u===void 0||u.remove(),this.targetCanvas=void 0,(h=this.scaledCanvas)===null||h===void 0||h.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(i,o,u,h,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new g.default(this.targetCanvas),this.mask$=new r,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=ch.createWorkerPromise(),this.loadModelPromise=ch.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=i,this.validateSpec(o),this.validateOptions(u),this.spec=o,this.logger=u.logger,this.delegate=h,this.initCPUMonitor(u),this.eventController=S}},"BackgroundFilterProcessor");a.default=n;let e=s(class{filterCPUUtilizationHigh(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=i,this.observer.reduceCPUUtilization())}frameReceived(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=i,this.observer.increaseCPUUtilization())}constructor(i,o){this.monitoringPeriodMillis=i,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");a.BackgroundFilterMonitor=e},6292069043:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(u,h,S,f){function v(E){return E instanceof S?E:new S(function(_){_(E)})}return s(v,"adopt"),new(S||(S=Promise))(function(E,_){function T(R){try{M(f.next(R))}catch(O){_(O)}}s(T,"fulfilled");function w(R){try{M(f.throw(R))}catch(O){_(O)}}s(w,"rejected");function M(R){R.done?E(R.value):v(R.value).then(T,w)}s(M,"step"),M((f=f.apply(u,h||[])).next())})},p=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(6582301018),g=c(8113008952),l=p(c(7472936477)),r=p(c(8351168186)),n=p(c(8066052849)),e=s(()=>l.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",i={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=s(class{static defaultAssetSpec(){const h=n.default.sdkVersionSemVer;return{assetGroup:`sdk-${h.major}.${h.minor}`}}static createUrlWithParams(h,S){const f=new URL(h),v=Object.keys(S);for(const E of v)S[E]!==void 0&&f.searchParams.set(E,S[E]);return f.toString()}static resolveSpec(h){const{paths:S=i,model:f=e(),assetGroup:v=this.defaultAssetSpec().assetGroup,revisionID:E=this.defaultAssetSpec().revisionID}=h||{},_={assetGroup:v,revisionID:E,sdk:encodeURIComponent(n.default.sdkVersion),ua:encodeURIComponent(n.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,_),S.wasm=this.createUrlWithParams(S.wasm,_),S.simd=this.createUrlWithParams(S.simd,_),f.path=this.createUrlWithParams(f.path,_),{paths:S,model:f,assetGroup:v,revisionID:E}}static resolveOptions(h){h.reportingPeriodMillis||(h.reportingPeriodMillis=1e3);const S=30;return h.filterCPUUtilization?(h.filterCPUUtilization<0||h.filterCPUUtilization>100)&&(h.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),h.filterCPUUtilization=S):h.filterCPUUtilization=S,h}static isSupported(h,S){const{logger:f}=S;return typeof globalThis>"u"?(f.info("Browser does not have globalThis."),Promise.resolve(!1)):new r.default().supportsBackgroundFilter()?g.supportsWASM(globalThis,f)?this.supportsBackgroundFilter(globalThis,h,f):(f.info("Browser does not support WASM."),Promise.resolve(!1)):(f.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0;return d(this,void 0,void 0,function*(){if(!g.supportsWorker(h,f))return f.info("Browser does not support web workers."),!1;const v=S.paths.worker;try{const E=yield m.loadWorker(v,"BackgroundFilterWorker",{},null);try{E.terminate()}catch(_){f.info(`Failed to terminate worker. ${_.message}`)}return!0}catch(E){return f.info(`Failed to fetch and instantiate test worker ${E.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");a.default=o},7898988988:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{addObserver(p){this.observers.add(p)}removeObserver(p){this.observers.delete(p)}filterFrameDurationHigh(p){var m;for(const g of this.observers)(m=g.filterFrameDurationHigh)===null||m===void 0||m.call(g,p)}filterCPUUtilizationHigh(p){var m;for(const g of this.observers)(m=g.filterCPUUtilizationHigh)===null||m===void 0||m.call(g,p)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");a.default=c},1069044041:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8080066655)),g=p(c(1434097650));let l=s(class dh extends m.default{setImageBlob(n){return d(this,void 0,void 0,function*(){this.replacementBlob=n,this.replacementImage=yield dh.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(n,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:i,targetCanvas:o}=this,{width:u,height:h}=o;i.save(),i.clearRect(0,0,u,h),i.drawImage(this.scaledCanvas,0,0,u,h),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,u,h),i.globalCompositeOperation="destination-over",i.drawImage(this.replacementImage,0,0,o.width,o.height),i.restore()}static loadImageExecutor(n,e,t){const i=new Image;i.crossOrigin="Anonymous",i.addEventListener("load",()=>{n(i)},!1),i.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${i.src}: ${o.message}`))},!1),i.src=t}static loadImage(n){return d(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,n))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const n=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return d(this,void 0,void 0,function*(){this.replacementImage=yield dh.loadImage(this.createReplacementObjectUrl()),n.loadAssets.call(this)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});return d(this,void 0,void 0,function*(){n.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(n){this.eventController?this.eventController=n:(this.eventController=n,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const n={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",n)}constructor(n,e){super("background replacement",n,e,new g.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");a.default=l},45891509:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(i,o,u,h){function S(f){return f instanceof u?f:new u(function(v){v(f)})}return s(S,"adopt"),new(u||(u=Promise))(function(f,v){function E(w){try{T(h.next(w))}catch(M){v(M)}}s(E,"fulfilled");function _(w){try{T(h.throw(w))}catch(M){v(M)}}s(_,"rejected");function T(w){w.done?f(w.value):S(w.value).then(E,_)}s(T,"step"),T((h=h.apply(i,o||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(6292069043)),g=p(c(5956893594)),l=p(c(3756404293)),r=p(c(7000795223)),n=p(c(1069044041));let e=s(class extends r.default{loadAssets(){return d(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return d(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=s(class NS extends m.default{static create(o,u){return d(this,void 0,void 0,function*(){o=this.resolveSpec(o),u=this.resolveOptions(u),yield this.resolveOptionsAsync(u);const{logger:h}=u;if(!(yield NS.isSupported(o,u)))return h.warn("Using no-op processor because background replacement is not supported"),new e;h.info("Using background replacement filter");const f=new n.default(o,u);return yield f.loadAssets(),f})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const u=Object.assign({},o);return u.logger||(u.logger=new g.default("BackgroundReplacementProcessor",l.default.INFO)),super.resolveOptions(u)}static resolveOptionsAsync(o){return d(this,void 0,void 0,function*(){if(!o.imageBlob){const u=document.createElement("canvas");u.width=100,u.height=100;const h=u.getContext("2d");h.fillStyle="blue",h.fillRect(0,0,100,100);const S=yield new Promise(f=>{u.toBlob(f)});o.imageBlob=S}})}static isSupported(o,u){const h=Object.create(null,{isSupported:{get:()=>super.isSupported}});return d(this,void 0,void 0,function*(){o=this.resolveSpec(o),u=this.resolveOptions(u),yield this.resolveOptionsAsync(u);const S=u.imageBlob,f=URL.createObjectURL(S);try{yield n.default.loadImage(f)}catch(v){return u.logger.info(`Failed to fetch load replacement image ${v.message}`),!1}finally{URL.revokeObjectURL(f)}return h.isSupported.call(this,o,u)})}},"BackgroundReplacementVideoFrameProcessor");a.default=t},1434097650:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(7898988988));let m=s(class extends p.default{},"BackgroundReplacementVideoFrameProcessorDelegate");a.default=m},5384631890:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const p=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,p}constructor(p,m,g){this.fixedWaitMs=p,this.shortBackoffMs=m,this.longBackoffMs=g,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");a.default=c},1363278032:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5384631890)),m=d(c(8220481840));let g=s(class{create(){return new p.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(r){return new m.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,r)}constructor(r,n,e){this.fixedWaitMs=r,this.shortBackoffMs=n,this.longBackoffMs=e}},"FullJitterBackoffFactory");a.default=g},8220481840:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5384631890));let m=s(class extends p.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(l,r,n,e){super(l,r,n),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");a.default=m},8351168186:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(585669709),m=c(888724265);let g=s(class uh{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const r of this.chromeLike)if(r===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const r of this.webkitBrowsers)if(r===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=uh.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=uh.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(r,n){return this.isAndroid()&&this.isPixel3()?[Math.ceil(r/64)*64,Math.ceil(n/64)*64]:[r,n]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const r=[];for(const n in this.browserSupport)r.push(`${this.browserName[n]} ${this.browserSupport[n]}+`);return r.join(", ")}supportedVideoCodecs(){return d(this,void 0,void 0,function*(){const r=new RTCPeerConnection;return r.addTransceiver("video",{direction:"inactive",streams:[]}),(yield r.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(n=>n.includes("a=rtpmap:")).map(n=>n.replace(/.* /,"").replace(/\/.*/,"")).filter((n,e,t)=>t.indexOf(n)===e).filter(n=>n!=="rtx"&&n!=="red"&&n!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=p.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");a.default=g,g.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,g.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},7059763395:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(5391134031),m=d(c(5147189764)),g=d(c(1847926377)),l=d(c(3572556907));let r=s(class LS{getMetricMap(e,t){switch(e){case g.default.AUDIO:switch(t){case m.default.UPSTREAM:return this.audioUpstreamMetricMap;case m.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case g.default.VIDEO:switch(t){case m.default.UPSTREAM:return this.videoUpstreamMetricMap;case m.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:u,source:h}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const f=this.streamMetricReports[S];if(f.direction===t.dir&&f.mediaType===t.media)return u(h||t.source,Number(S))}else return u(h||t.source);return 0}getObservableVideoMetricValue(e,t){const i=this.observableVideoMetricSpec[e],u=this.getMetricMap(i.media,i.dir)[i.source],{transform:h,source:S}=u;return h(S||i.source,t)}getVideoUpstreamSsrc(){for(const e in this.streamMetricReports)if(this.streamMetricReports[e].mediaType===g.default.VIDEO&&this.streamMetricReports[e].direction===m.default.UPSTREAM)return Number(e);return null}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===g.default.VIDEO){const i={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const f=this.getObservableVideoMetricValue(S,Number(t));isNaN(f)||(i[S]=f)}const o=this.streamMetricReports[t].groupId,u=this.streamMetricReports[t].streamId;let h="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?h=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:h=u?this.videoStreamIndex.attendeeIdForStreamId(u):this.selfAttendeeId,e[h]=e[h]?e[h]:{},e[h][t]=i}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new LS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,i){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=i,this.globalMetricReport=new l.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;return Number(h.currentMetrics[o])},this.decoderLossPercent=(o,u)=>{const h=this.streamMetricReports[u],S=h.currentMetrics.concealedSamples-(h.previousMetrics.concealedSamples||0),f=h.currentMetrics.totalSamplesReceived-(h.previousMetrics.totalSamplesReceived||0);return f<=0||f-S<=0?0:S/f*100},this.packetLossPercent=(o,u)=>{const h=this.streamMetricReports[u],S=h.currentMetrics[o]-(h.previousMetrics[o]||0),f=h.currentMetrics.packetsLost-(h.previousMetrics.packetsLost||0),v=S+f;return v<=0||f<=0?0:f*100/v},this.jitterBufferMs=(o,u)=>{const h=this.streamMetricReports[u],S=h.currentMetrics.jitterBufferDelay-(h.previousMetrics.jitterBufferDelay||0),f=h.currentMetrics.jitterBufferEmittedCount-(h.previousMetrics.jitterBufferEmittedCount||0);return S<=0||f<=0?0:S/f*1e3},this.countPerSecond=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const f=h.currentMetrics[o]-(h.previousMetrics[o]||0);return f<=0?0:Math.trunc(f/S)},this.bitsPerSecond=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const f=(h.currentMetrics[o]-(h.previousMetrics[o]||0))*8;return f<=0?0:Math.trunc(f/S)},this.secondsToMilliseconds=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;return Number(h.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,u)=>{const h=u?this.streamMetricReports[u]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const f=h.currentMetrics[o]-(h.previousMetrics[o]||0);return f<=0?0:f*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,u)=>{const h=this.streamMetricReports[u];if(h.previousObjectMetrics[o]===void 0||h.currentObjectMetrics[o]===void 0)return NaN;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let f=0,v=0;for(const[_,T]of Object.entries(h.previousObjectMetrics[o]))_==="cpu"&&(f=T);for(const[_,T]of Object.entries(h.currentObjectMetrics[o]))_==="cpu"&&(v=T);const E=v-f;return E<=0?0:E*1e3/S},this.isHardwareImplementation=(o,u)=>{const h=this.streamMetricReports[u];if(h.currentStringMetrics[o]===void 0)return NaN;const S=String(h.currentStringMetrics[o]),f=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),v=S.includes("fallback from");return f&&!v?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:p.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:p.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:p.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:p.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:p.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:p.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:p.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:p.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:p.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:p.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:p.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:p.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:p.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:p.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:p.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:p.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:g.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:g.default.VIDEO,dir:m.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:g.default.AUDIO,dir:m.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:g.default.AUDIO,dir:m.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:g.default.AUDIO,dir:m.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:g.default.VIDEO,dir:m.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:g.default.VIDEO,dir:m.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:g.default.AUDIO,dir:m.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:g.default.VIDEO,dir:m.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:g.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");a.default=r},5147189764:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ClientMetricReportDirection=void 0;var c;(function(d){d[d.UPSTREAM=0]="UPSTREAM",d[d.DOWNSTREAM=1]="DOWNSTREAM"})(c=a.ClientMetricReportDirection||(a.ClientMetricReportDirection={})),a.default=c},1847926377:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ClientMetricReportMediaType=void 0;var c;(function(d){d[d.AUDIO=0]="AUDIO",d[d.VIDEO=1]="VIDEO"})(c=a.ClientMetricReportMediaType||(a.ClientMetricReportMediaType={})),a.default=c},9895069884:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"ClientVideoStreamReceivingReport");a.default=c},3572556907:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");a.default=c},7894724558:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");a.default=c},7825873064:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");a.default=c},6963727640:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(p){this.currentData=p}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const p=this.health();return p!==this.currentHealth?(this.currentHealth=p,p):null}constructor(p,m,g){this.minHealth=p.minHealth,this.maxHealth=p.maxHealth,this.currentHealth=p.initialHealth,this.currentData=m.clone(),this.name=g}},"BaseConnectionHealthPolicy");a.default=c},3544934903:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class Ra{static isTimestampRecent(p,m){return Date.now()<p+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(p){return Ra.isTimestampRecent(this.connectionStartTimestampMs,p)}isLastPacketLossRecent(p){return Ra.isTimestampRecent(this.lastPacketLossInboundTimestampMs,p)}isGoodSignalRecent(p){return Ra.isTimestampRecent(this.lastGoodSignalTimestampMs,p)}isWeakSignalRecent(p){return Ra.isTimestampRecent(this.lastWeakSignalTimestampMs,p)}isNoSignalRecent(p){return Ra.isTimestampRecent(this.lastNoSignalTimestampMs,p)}clone(){const p=new Ra;return p.connectionStartTimestampMs=this.connectionStartTimestampMs,p.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,p.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,p.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,p.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,p.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,p.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,p.consecutiveMissedPongs=this.consecutiveMissedPongs,p.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),p.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),p.audioSpeakerDelayMs=this.audioSpeakerDelayMs,p.isVideoEncoderHardware=this.isVideoEncoderHardware,p.videoEncodingTimeInMs=this.videoEncodingTimeInMs,p.cpuLimitationDuration=this.cpuLimitationDuration,p.videoInputFps=this.videoInputFps,p.videoEncodeFps=this.videoEncodeFps,p}setConsecutiveMissedPongs(p){this.consecutiveMissedPongs=p}setConsecutiveStatsWithNoPackets(p){this.consecutiveStatsWithNoPackets=p}setConsecutiveStatsWithNoAudioPacketsSent(p){this.consecutiveStatsWithNoAudioPacketsSent=p}setLastPacketLossInboundTimestampMs(p){this.lastPacketLossInboundTimestampMs=p}setLastNoSignalTimestampMs(p){this.lastNoSignalTimestampMs=p}setLastWeakSignalTimestampMs(p){this.lastWeakSignalTimestampMs=p}setLastGoodSignalTimestampMs(p){this.lastGoodSignalTimestampMs=p}setAudioSpeakerDelayMs(p){this.audioSpeakerDelayMs=p}setIsVideoEncoderHardware(p){this.isVideoEncoderHardware=p}setVideoEncodingTimeInMs(p){this.videoEncodingTimeInMs=p}setCpuLimitationDuration(p){this.cpuLimitationDuration=p}setVideoInputFps(p){this.videoInputFps=p}setVideoEncodeFps(p){this.videoEncodeFps=p}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");a.default=c},1091173065:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8438187697)),m=d(c(1615281264));let g=s(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[p.default,m.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");a.default=g},8929805428:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6963727640));let m=s(class Yo extends p.default{health(){if(this.currentData.isConnectionStartRecent(Yo.CONNECTION_WAIT_TIME_MS))return 1;const r=this.currentData.consecutiveStatsWithNoPackets>=Yo.CONNECTION_UNHEALTHY_THRESHOLD,n=this.currentData.consecutiveMissedPongs>=Yo.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>Yo.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>Yo.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),r||n||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${r}, missed pongs: ${n}, bad audio delay: ${e}`),0):1}constructor(l,r,n){super(r,n,"Reconnection Health"),this.logger=l,this.audioDelayPointsOverMaximum=0,Yo.CONNECTION_UNHEALTHY_THRESHOLD=r.connectionUnhealthyThreshold,Yo.CONNECTION_WAIT_TIME_MS=r.connectionWaitTimeMs,Yo.MISSED_PONGS_THRESHOLD=r.missedPongsUpperThreshold,Yo.MAXIMUM_AUDIO_DELAY_MS=r.maximumAudioDelayMs,Yo.MAXIMUM_AUDIO_DELAY_DATA_POINTS=r.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");a.default=m},2115341037:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6963727640));let m=s(class extends p.default{isSendingAudioUnhealthy(){const l=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),r=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return l&&r}health(){if(this.isSendingAudioUnhealthy()){const l=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!l?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(l,r,n){super(r,n,"Sending Audio Health"),this.logger=l,this.sendingAudioFailureSamplesToConsider=r.sendingAudioFailureSamplesToConsider>0?r.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=r.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=r.maximumTimesToWarn,this.coolDownTimeMs=r.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");a.default=m},5928001672:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6963727640));let m=s(class extends p.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const l=this.pastSamplesToConsider,r=l*this.packetsExpected;let n=0;for(let e=0;e<l;e++)n+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-n/r,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(l,r){super(l,r,"Unusable Audio Warning"),this.coolDownTimeMs=l.cooldownTimeMs,this.pastSamplesToConsider=l.pastSamplesToConsider,this.fractionalLoss=l.fractionalLoss,this.packetsExpected=l.packetsExpected,this.maximumTimesToWarn=l.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");a.default=m},6005421222:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VideoEncodingConnectionHealthPolicyName=void 0;var c;(function(d){d.VideoEncodingCpuHealth="Video Encoding CPU Health",d.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(c=a.VideoEncodingConnectionHealthPolicyName||(a.VideoEncodingConnectionHealthPolicyName={})),a.default=c},8438187697:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6963727640)),m=d(c(6005421222));let g=s(class extends p.default{health(){if(!this.currentData.isVideoEncoderHardware&&(this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=r.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=r.highEncodeCpuMsThreshold}},"VideoEncodingCpuConnectionHealthPolicy");a.default=g},1615281264:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6963727640)),m=d(c(6005421222));let g=s(class extends p.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=r.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");a.default=g},1523356655:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(903520651);let p=s(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(g){g===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):g<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(g,l,r){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",l),this.statsCollector.logLatency("ping_pong_clock_skew",r),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(g){let l=0,r=0;const n=g.getObservableMetrics(),e=n.audioPacketsReceived,t=n.audioPacketsReceivedFractionLoss,i=n.audioSpeakerDelayMs;typeof i=="number"&&!isNaN(i)&&this.connectionHealthData.setAudioSpeakerDelayMs(i);const o=g.getRTCStatsReport();let u=0;o.forEach(S=>{S.type==="candidate-pair"&&S.bytesReceived&&(u+=S.bytesReceived)});const h=u-this.lastTotalBytesReceived;if(this.lastTotalBytesReceived=u,typeof e=="number"&&typeof t=="number"){if(l=e,r=t,l<0||r<0||h<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,l),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,r),h>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(l===0||r>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof n.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(n.audioPacketsSent),this.updateVideoEncodingHealth(g),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(g){g>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(g){const l=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),r=g.getVideoUpstreamSsrc();if(!l||r===null){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimeInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}const n=g.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",r),e=g.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",r),t=g.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",r),i=g.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",r),o=g.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",r);this.connectionHealthData.setIsVideoEncoderHardware(Boolean(n)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(i),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(g,l){g.unshift(l),g.length>60&&g.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(g=>{d.Maybe.of(g.connectionHealthDidChange).map(l=>l.bind(g)(this.connectionHealthData.clone()))})}constructor(g,l,r,n,e){this.audioVideoController=g,this.realtimeController=l,this.connectionHealthData=r,this.pingPong=n,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");a.default=p},3560634922:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.Modality="#content"})(c||(c={})),a.default=c},8271576690:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8351168186)),g=p(c(8152963890));let l=s(class fh{get mediaStream(){return this._mediaStream}set mediaStream(n){this._mediaStream=n}acquireAudioInputStream(){return d(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),g.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return d(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(n){return d(this,void 0,void 0,function*(){return n&&n.video&&n.video.mandatory&&n.video.mandatory.chromeMediaSource&&n.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(n):navigator.mediaDevices.getDisplayMedia(n)})}acquireScreenCaptureDisplayInputStream(n,e){return d(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(n,e))})}screenCaptureDisplayMediaConstraints(n,e){return{audio:!!(!n&&new m.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!n&&{frameRate:{max:e||fh.defaultFrameRate}}),n&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:e||fh.defaultFrameRate}})}}toggleMediaStream(n){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==n&&(this.mediaStream.getTracks()[t].enabled=n,e=!0);return e}cleanup(){if(this.mediaStream)for(let n=0;n<this.mediaStream.getTracks().length;n++)this.mediaStream.getTracks()[n].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(n){}removeMediaStreamBrokerObserver(n){}constructor(n){this.logger=n}},"ContentShareMediaStreamBroker");a.default=l,l.defaultFrameRate=15},4707988254:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(h,S,f,v){function E(_){return _ instanceof f?_:new f(function(T){T(_)})}return s(E,"adopt"),new(f||(f=Promise))(function(_,T){function w(O){try{R(v.next(O))}catch(k){T(k)}}s(w,"fulfilled");function M(O){try{R(v.throw(O))}catch(k){T(k)}}s(M,"rejected");function R(O){O.done?_(O.value):E(O.value).then(w,M)}s(R,"step"),R((v=v.apply(h,S||[])).next())})},p=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8981226922)),g=p(c(7136804647)),l=p(c(7147499759)),r=p(c(4599834734)),n=p(c(3741513515)),e=c(903520651),t=p(c(9248911078)),i=p(c(4134174226)),o=p(c(3560634922));let u=s(class{static createContentShareMeetingSessionConfigure(S){const f=new g.default;return f.meetingId=S.meetingId,f.externalMeetingId=S.externalMeetingId,f.urls=S.urls,f.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,f.credentials=new l.default,f.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,f.credentials.externalUserId=S.credentials.externalUserId,f.credentials.joinToken=S.credentials.joinToken+o.default.Modality,f.meetingFeatures=S.meetingFeatures.clone(),f.videoDownlinkBandwidthPolicy=new t.default,f}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,f){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new i.default(this.contentAudioVideo.logger,f)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return d(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===m.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let f=0;f<this.mediaStreamBroker.mediaStream.getTracks().length;f++)this.mediaStreamBroker.mediaStream.getTracks()[f].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,f){return d(this,void 0,void 0,function*(){const v=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,f);return yield this.startContentShare(v),v})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(f=>f.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(f=>f.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return d(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const f of this.observerQueue)n.default.nextTick(()=>{this.observerQueue.has(f)&&S(f)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(f=>{e.Maybe.of(f.contentShareDidStop).map(v=>v.call(f))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,f,v,E)=>{const _=new r.default(S).hasModality(r.default.MODALITY_CONTENT),T=new r.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!_||!T||!f||this.contentShareTile)return;const w=this.mediaStreamBroker.mediaStream;if(w!=null&&w.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const M=w.getVideoTracks()[0];let R,O;if(M.getSettings){const k=M.getSettings();R=k.width,O=k.height}else{const k=M.getCapabilities();R=k.width,O=k.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,w,R,O,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(M=>{e.Maybe.of(M.contentShareDidStart).map(R=>R.call(M))})})}constructor(S,f,v){this.mediaStreamBroker=S,this.contentAudioVideo=f,this.attendeeAudioVideo=v,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");a.default=u},1252089397:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let d=s(class Lo{static register(){!("document"in c.g)||!document.addEventListener||Lo.shouldRegisterCSPMonitor&&(Lo.added||(document.addEventListener("securitypolicyviolation",Lo.listener),Lo.added=!0))}static unregister(){!("document"in c.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Lo.listener),Lo.loggers=new Set,Lo.added=!1)}static disable(){Lo.shouldRegisterCSPMonitor=!1,Lo.unregister()}static addLogger(m){m&&Lo.loggers.add(m)}static removeLogger(m){m&&Lo.loggers.delete(m)}},"CSPMonitor");a.default=d,d.loggers=new Set,d.shouldRegisterCSPMonitor=!0,d.added=!1,d.listener=p=>{const m=`Security Policy Violation
Blocked URI: ${p.blockedURI}
Violated Directive: ${p.violatedDirective}
Original Policy: ${p.originalPolicy}
Document URI: ${p.documentURI}
Source File: ${p.sourceFile}
Line No.: ${p.lineNumber}
`;for(const g of d.loggers)g.error(m);d.loggers.size===0&&console.error(m)}},1766966835:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(p,m,g,l,r,n){this.timestampMs=p,this.topic=m,this.data=g,this.senderAttendeeId=l,this.senderExternalUserId=r,this.throttled=!!n}},"DataMessage");a.default=c},3171772403:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isDestroyable=void 0;function c(d){return d&&"destroy"in d}s(c,"isDestroyable"),a.isDestroyable=c},3961458747:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isAudioTransformDevice=void 0;function c(d){return!!d&&typeof d=="object"&&"mute"in d&&"stop"in d&&"intrinsicDevice"in d}s(c,"isAudioTransformDevice"),a.isAudioTransformDevice=c},8152963890:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(R,O,k,A){function P(D){return D instanceof k?D:new k(function(H){H(D)})}return s(P,"adopt"),new(k||(k=Promise))(function(D,H){function j(ee){try{X(A.next(ee))}catch(fe){H(fe)}}s(j,"fulfilled");function W(ee){try{X(A.throw(ee))}catch(fe){H(fe)}}s(W,"rejected");function X(ee){ee.done?D(ee.value):P(ee.value).then(j,W)}s(X,"step"),X((A=A.apply(R,O||[])).next())})},p=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8351168186)),g=p(c(113406342)),l=p(c(3741513515)),r=p(c(2997222898)),n=c(903520651),e=p(c(5709738441)),t=p(c(1140481832)),i=c(3961458747),o=p(c(4261566413)),u=p(c(2083236720)),h=p(c(9468773362)),S=p(c(6809352498)),f=p(c(3288618491)),v=p(c(6997557363)),E=p(c(8219602063)),_=p(c(8981226922)),T=c(272852764);let w=s(class Fi{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var O;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(O=this.mediaDeviceWrapper)===null||O===void 0||O.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var O;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(O=this.mediaDeviceWrapper)===null||O===void 0||O.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return d(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const k=yield this.listDevicesOfKind("audioinput",O);return this.trace("listAudioInputDevices",O,k),k})}listVideoInputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const k=yield this.listDevicesOfKind("videoinput",O);return this.trace("listVideoInputDevices",O,k),k})}listAudioOutputDevices(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const k=yield this.listDevicesOfKind("audiooutput",O);return this.trace("listAudioOutputDevices",O,k),k})}pushAudioMeetingStateForPermissions(O){var k;(k=this.eventController)===null||k===void 0||k.publishEvent(O===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(O){var k;(k=this.eventController)===null||k===void 0||k.publishEvent(O===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(O){return d(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(O))})}startAudioInputTask(O){var k;return d(this,void 0,void 0,function*(){if(O===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return i.isAudioTransformDevice(O)?(this.logger.info(`Choosing transform input device ${O}`),yield this.chooseAudioTransformInputDevice(O)):(this.logger.info(`Choosing intrinsic audio input device ${O}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",O)),this.trace("startAudioInputDevice",O,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(k=this.transform)===null||k===void 0?void 0:k.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(A){throw A}})}stopAudioInput(){return d(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return d(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(O){var k;return d(this,void 0,void 0,function*(){if(((k=this.transform)===null||k===void 0?void 0:k.device)===O)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const A=Fi.getAudioContext();if(!(A instanceof OfflineAudioContext))switch(A.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield A.resume()}let P;try{P=yield O.createAudioNode(A)}catch(H){throw this.logger.error(`Unable to create transform device node: ${H}.`),H}const D=yield O.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",D),this.logger.debug(`Got inner stream: ${D}.`),this.setTransform(O,P)})}chooseVideoTransformInputDevice(O){var k;return d(this,void 0,void 0,function*(){if(this.eventController&&O instanceof e.default&&O.passEventControllerToProcessors(this.eventController),O===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const A=this.chosenVideoTransformDevice;A&&this.logger.info("Switched from previous VideoTransformDevice");const P=!!A,D=yield O.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((k=this.activeDevices.video)===null||k===void 0?void 0:k.stream,D)){this.logger.info("video transform device needs new intrinsic device"),P&&A.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=O,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",D),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=O,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield O.transformStream(this.activeDevices.video.stream)})}startVideoInput(O){return d(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(O))})}startVideoInputTask(O){return d(this,void 0,void 0,function*(){if(!O){this.logger.error("Invalid video input device");return}try{return T.isVideoTransformDevice(O)?(this.logger.info(`Choosing video transform device ${O}`),yield this.chooseVideoTransformInputDevice(O),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",O),this.trace("startVideoInputDevice",O),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(k){throw k}})}stopVideoInput(){return d(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return d(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(O){return d(this,void 0,void 0,function*(){this.audioOutputDeviceId=O,this.watchForDeviceChangesIfNecessary();const k=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(k),this.trace("chooseAudioOutput",O,null)})}addDeviceChangeObserver(O){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(O),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(O){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(O),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var O,k;if(!this.activeDevices.audio)return null;const A=(k=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||k===void 0?void 0:k.end;if(A){const P=A.context.createAnalyser();return P.removeOriginalInputs=()=>{try{A.disconnect(P)}catch{}},A.connect(P),P}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(O){const k=Fi.getAudioContext(),A=k.createAnalyser(),P=k.createMediaStreamSource(O);return P.connect(A),this.trace("createAnalyserNodeForAudioInput"),A.removeOriginalInputs=()=>{try{P.disconnect(A)}catch{}},A}startVideoPreviewForVideoInput(O){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",O.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,O,!0),this.trace("startVideoPreviewForVideoInput",O.id)}stopVideoPreviewForVideoInput(O){t.default.disconnectVideoStreamFromVideoElement(O,!1),this.trace("stopVideoPreviewForVideoInput",O.id)}setDeviceLabelTrigger(O){if(this.deviceInfoCache){for(const k of this.deviceInfoCache)if(!k.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=O,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(O){let k=null;return this.useWebAudio?(k=Fi.getAudioContext().createMediaStreamSource(O),k.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",O.id),k}chooseVideoInputQuality(O,k,A){const P=this.browserBehavior.requiresResolutionAlignment(O,k);this.videoInputQualitySettings=new _.default(P[0],P[1],A)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return d(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return d(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(O){return d(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(O){const k=this.activeDevices[O];if(!k)return;const A=k.endedCallback,P=k.trackMuteCallback,D=k.trackUnmuteCallback;for(const H of k.stream.getTracks())H.stop(),A&&H.removeEventListener("ended",A),P&&H.removeEventListener("mute",P),D&&H.removeEventListener("unmute",D),delete k.endedCallback,delete k.trackMuteCallback,delete k.trackUnmuteCallback,delete this.activeDevices[O]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(O){var k;let A=this.activeDevices.audio;if(this.useWebAudio&&(A=this.getMediaStreamDestinationNode()),!!A){for(const P of A.stream.getTracks())P.enabled!==O&&(P.enabled=O);this.muted!==!O&&(this.muted=!O,(k=this.transform)===null||k===void 0||k.device.mute(this.muted))}}static getIntrinsicDeviceId(O){if(!O)return;if(typeof O=="string")return O;if(O.id)return O.id;const A=O.deviceId;if(!A)return;if(typeof A=="string"||Array.isArray(A))return A;const P=A;if(typeof P.exact=="string"||Array.isArray(P.exact))return P.exact}static createEmptyAudioDevice(){return Fi.synthesizeAudioDevice(0)}static synthesizeAudioDevice(O){const k=Fi.getAudioContext(),A=k.createMediaStreamDestination();if(O){const P=k.createGain();P.gain.value=.1,P.connect(A);const D=k.createOscillator();D.frequency.value=O,D.connect(P),D.start()}else{const P=k.createBufferSource();try{P.buffer=k.createBuffer(1,k.sampleRate*5,k.sampleRate)}catch(D){if(D&&D.name==="NotSupportedError")P.buffer=k.createBuffer(1,Fi.defaultSampleRate*5,Fi.defaultSampleRate);else throw D}P.buffer.getChannelData(0)[0]=3e-4,P.loop=!0,P.connect(A),P.start()}return A.stream}listDevicesOfKind(O,k){return d(this,void 0,void 0,function*(){return(k||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(O)})}updateDeviceInfoCacheFromBrowser(){var O;return d(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let A=yield navigator.mediaDevices.enumerateDevices(),P=!0;for(const D of A)if(!D.label){P=!1;break}if(!P)try{this.logger.info("attempting to trigger media device labels since they are hidden");const D=yield this.deviceLabelTrigger();A=yield navigator.mediaDevices.enumerateDevices();for(const H of D.getTracks())H.stop()}catch(D){this.logger.info("unable to get media device labels"),(O=this.eventController)===null||O===void 0||O.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(D)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(A)}`),this.deviceInfoCache=A})}listCachedDevicesOfKind(O){const k=[];if(this.deviceInfoCache)for(const A of this.deviceInfoCache)A.kind===O&&k.push(A);return k}handleDeviceChange(){return d(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){l.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const O=this.listCachedDevicesOfKind("audioinput"),k=this.listCachedDevicesOfKind("videoinput"),A=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const P=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),H=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(j=>{this.areDeviceListsEqual(O,P)||n.Maybe.of(j.audioInputsChanged).map(W=>W.bind(j)(P)),this.areDeviceListsEqual(k,D)||n.Maybe.of(j.videoInputsChanged).map(W=>W.bind(j)(D)),this.areDeviceListsEqual(A,H)||n.Maybe.of(j.audioOutputsChanged).map(W=>W.bind(j)(H))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(O,k){return d(this,void 0,void 0,function*(){try{O==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}O==="audio"?this.forEachObserver(A=>{n.Maybe.of(A.audioInputStreamEnded).map(P=>P.bind(A)(k))}):this.forEachObserver(A=>{n.Maybe.of(A.videoInputStreamEnded).map(P=>P.bind(A)(k))})})}forEachObserver(O){for(const k of this.deviceChangeObservers)l.default.nextTick(()=>{this.deviceChangeObservers.has(k)&&O(k)})}forEachMediaStreamBrokerObserver(O){for(const k of this.mediaStreamBrokerObservers)l.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(k)&&O(k)})}areDeviceListsEqual(O,k){return JSON.stringify(O.map(A=>JSON.stringify(A)).sort())===JSON.stringify(k.map(A=>JSON.stringify(A)).sort())}intrinsicDeviceAsMediaStream(O){return O&&O.id?O:null}hasSameMediaStreamId(O,k,A){var P,D,H,j;let W;return O==="audio"?(W=A==null?void 0:A.audio.streamId,!!W&&W===((D=(P=k.constraints)===null||P===void 0?void 0:P.audio)===null||D===void 0?void 0:D.streamId)):(W=A==null?void 0:A.video.streamId,!!W&&W===((j=(H=k==null?void 0:k.constraints)===null||H===void 0?void 0:H.video)===null||j===void 0?void 0:j.streamId))}hasSameGroupId(O,k,A){if(O==="")return!0;const P=Fi.getIntrinsicDeviceId(A);return this.logger.debug(`Checking deviceIds ${P} of type ${typeof P} with groupId ${O}`),typeof P=="string"&&O===this.getGroupIdFromDeviceId(k,P)}getGroupIdFromDeviceId(O,k){if(this.deviceInfoCache!==null){const A=this.listCachedDevicesOfKind(`${O}input`).find(P=>P.deviceId===k);if(A&&A.groupId)return this.logger.debug(`GroupId of deviceId ${k} found in cache is ${A.groupId}`),A.groupId}return this.logger.debug(`GroupId of deviceId ${k} found in cache is empty`),""}handleGetUserMediaError(O,k){if(!O)throw new u.default(O);switch(O.name){case"NotReadableError":case"TrackStartError":throw new S.default(O);case"NotFoundError":case"DevicesNotFoundError":throw new h.default(O);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw k&&k<Fi.permissionDeniedOriginDetectionThresholdMs?new v.default(O,"Permission denied by browser"):new v.default(O,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new f.default(O);case"TypeError":throw new E.default(O);case"AbortError":default:throw new u.default(O)}}matchesDeviceSelection(O,k,A,P){return A&&A.stream.active&&(this.hasSameMediaStreamId(O,A,P)||A.groupId!==null&&this.hasSameGroupId(A.groupId,O,k))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(A.constraints)} to proposed constraints ${JSON.stringify(P)}`),A.matchesConstraints(P)):!1}chooseInputIntrinsicDevice(O,k){var A,P;return d(this,void 0,void 0,function*(){const D=this.getMediaStreamConstraints(O,k);if(this.matchesDeviceSelection(O,k,this.activeDevices[O],D)){this.logger.info(`reusing existing ${O} input device`);return}this.activeDevices[O]&&this.activeDevices[O].stream&&this.stopTracksAndRemoveCallbacks(O);const H=Date.now(),j=new o.default;try{this.logger.info(`requesting new ${O} device with constraint ${JSON.stringify(D)}`);const W=this.intrinsicDeviceAsMediaStream(k);O==="audio"&&k===null?(j.stream=Fi.createEmptyAudioDevice(),j.constraints=null):W?(this.logger.info(`using media stream ${W.id} for ${O} device`),j.stream=W,j.constraints=D):(j.stream=yield navigator.mediaDevices.getUserMedia(D),j.constraints=D),yield this.handleNewInputDevice(O,j)}catch(W){const X=this.getErrorMessage(W);O==="audio"?(A=this.eventController)===null||A===void 0||A.publishEvent("audioInputFailed",{audioInputErrorMessage:X}):(P=this.eventController)===null||P===void 0||P.publishEvent("videoInputFailed",{videoInputErrorMessage:X}),this.logger.error(`failed to get ${O} device for constraints ${JSON.stringify(D)}: ${X}`);let ee=!0;if(W&&"constraint"in W&&(this.logger.error(`Over-constrained by constraint: ${W.constraint}`),this.useMediaConstraintsFallback)){const fe=this.getMediaStreamConstraints(O,k,!0),oe=JSON.stringify(fe);if(oe!==JSON.stringify(D)){this.logger.info(`retry requesting new ${O} device with minimal constraint ${oe}`);try{j.stream=yield navigator.mediaDevices.getUserMedia(fe),j.constraints=fe,yield this.handleNewInputDevice(O,j),ee=!1}catch(Oe){this.logger.error(`failed to get ${O} device for constraints ${oe}: ${this.getErrorMessage(Oe)}`)}}}if(ee){if(O==="audio"){this.logger.info(`choosing null ${O} device instead`);try{j.stream=Fi.createEmptyAudioDevice(),j.constraints=null,yield this.handleNewInputDevice(O,j)}catch(fe){this.logger.error(`failed to choose null ${O} device. ${fe.name}: ${fe.message}`)}}this.handleGetUserMediaError(W,Date.now()-H)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(O){return O?O.name&&O.message?`${O.name}: ${O.message}`:O.name?O.name:O.message?O.message:"UnknownError":"UnknownError"}handleNewInputDevice(O,k){var A;return d(this,void 0,void 0,function*(){this.logger.info(`got ${O} device for constraints ${JSON.stringify(k.constraints)}`);const P=(A=this.getMediaTrackSettings(k.stream))===null||A===void 0?void 0:A.deviceId;k.groupId=P?this.getGroupIdFromDeviceId(O,P):"",this.activeDevices[O]=k,this.logger.debug(`Set activeDevice to ${JSON.stringify(k)}`),this.watchForDeviceChangesIfNecessary();const D=k.stream.getTracks()[0];if(D&&(k.endedCallback=()=>{this.activeDevices[O]&&this.activeDevices[O].stream===k.stream&&(this.handleDeviceStreamEnded(O,P),delete k.endedCallback)},D.addEventListener("ended",k.endedCallback,{once:!0})),O==="audio"){const H=k.stream.getAudioTracks()[0];if(H){const j=H.getSettings().deviceId||k.stream;k.trackMuteCallback=()=>{this.mediaStreamMuteObserver(j,!0)},k.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(j,!1)},H.addEventListener("mute",k.trackMuteCallback,{once:!1}),H.addEventListener("unmute",k.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),H.muted?k.trackMuteCallback():k.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(O,k,A,P){if(P&&this.listCachedDevicesOfKind(`${O}input`).length===1)return!0;const D={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?D.deviceId=k:D.deviceId={exact:k},A&&(D.groupId=A),P?D:O==="video"?(D.width={ideal:this.videoInputQualitySettings.videoWidth},D.height={ideal:this.videoInputQualitySettings.videoHeight},D.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},D):(this.supportSampleRateConstraint()&&(D.sampleRate={ideal:Fi.defaultSampleRate}),this.supportSampleSizeConstraint()&&(D.sampleSize={ideal:Fi.defaultSampleSize}),this.supportChannelCountConstraint()&&(D.channelCount={ideal:Fi.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},D))}getMediaStreamConstraintsFromTrackConstraints(O,k){return O==="audio"?{audio:k}:{video:k}}getMediaStreamConstraints(O,k){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,P={};if(!k)return null;const D=this.intrinsicDeviceAsMediaStream(k);if(D)return P.streamId=D.id,this.getMediaStreamConstraintsFromTrackConstraints(O,P);if(typeof k=="string"){let H="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?H=this.getGroupIdFromDeviceId(O,k):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),P=this.calculateMediaStreamConstraints(O,k,H,A),this.getMediaStreamConstraintsFromTrackConstraints(O,P)}return M(k)?(P=this.calculateMediaStreamConstraints(O,k.deviceId,k.groupId,A),this.getMediaStreamConstraintsFromTrackConstraints(O,P)):(P=k,this.getMediaStreamConstraintsFromTrackConstraints(O,P))}deviceInfoFromDeviceId(O,k){if(this.deviceInfoCache===null)return null;for(const A of this.deviceInfoCache)if(A.kind===O&&A.deviceId===k)return A;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(O,k){if(!O||!O.active||!k)return!1;if(k.id)return O.id===k.id;const A=this.getMediaTrackSettings(O);if(!A.deviceId)return!1;const P=Fi.getIntrinsicDeviceId(k);return typeof P=="string"?A.deviceId===P:!1}getMediaTrackSettings(O){var k;return(k=O.getTracks()[0])===null||k===void 0?void 0:k.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const O=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(O)}setTransform(O,k){var A,P;(P=(A=this.transform)===null||A===void 0?void 0:A.nodes)===null||P===void 0||P.end.disconnect(),this.transform={nodes:k,device:O};const D=k==null?void 0:k.end,H=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${D} to destination ${H}.`),D==null||D.connect(H),this.reconnectAudioInputs()}removeTransform(){var O;const k=this.transform;if(k)return(O=this.transform.nodes)===null||O===void 0||O.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),k}attachAudioInputStreamToAudioContext(O){var k;(k=this.audioInputSourceNode)===null||k===void 0||k.disconnect(),this.audioInputSourceNode=Fi.getAudioContext().createMediaStreamSource(O);const A=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(A)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Fi.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var O,k;return((k=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||k===void 0?void 0:k.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(O){Fi.defaultLatencyHint=O}static getAudioContext(){if(!Fi.audioContext){const O={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(O.sampleRate=Fi.defaultSampleRate),new m.default().requiresPlaybackLatencyHintForAudioContext()&&(O.latencyHint="playback"),Fi.defaultLatencyHint&&(O.latencyHint=Fi.defaultLatencyHint),Fi.audioContext=new(window.AudioContext||window.webkitAudioContext)(O)}return Fi.audioContext}static suspendAudioContext(){return d(this,void 0,void 0,function*(){return Fi.audioContext?Fi.audioContext.suspend():Promise.resolve()})}static resumeAudioContext(){return d(this,void 0,void 0,function*(){return Fi.audioContext?Fi.audioContext.resume():Promise.resolve()})}static closeAudioContext(){if(Fi.audioContext)try{Fi.audioContext.close()}catch{}Fi.audioContext=null}addMediaStreamBrokerObserver(O){this.mediaStreamBrokerObservers.add(O)}removeMediaStreamBrokerObserver(O){this.mediaStreamBrokerObservers.delete(O)}publishVideoInputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(k=>{k.videoInputDidChange&&k.videoInputDidChange(O)}),this.pushVideoMeetingStateForPermissions(O)}publishAudioInputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(k=>{k.audioInputDidChange&&k.audioInputDidChange(O)}),this.pushAudioMeetingStateForPermissions(O)}publishAudioOutputDidChangeEvent(O){this.forEachMediaStreamBrokerObserver(k=>{k.audioOutputDidChange&&k.audioOutputDidChange(O)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(O,k,A){let P=`API/DefaultDeviceController/${O}`;typeof k<"u"&&(P+=` ${JSON.stringify(k)}`),typeof A<"u"&&(P+=` -> ${JSON.stringify(A)}`),this.logger.info(P)}constructor(O,k,A=new m.default,P){this.logger=O,this.browserBehavior=A,this.eventController=P,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new r.default,this.videoInputTaskQueue=new r.default,this.muted=!1,this.mediaStreamMuteObserver=(W,X)=>{for(const ee of this.deviceChangeObservers)l.default.nextTick(()=>{this.deviceChangeObservers.has(ee)&&ee.audioInputMuteStateChanged&&ee.audioInputMuteStateChanged(W,X)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:D=!1,useMediaConstraintsFallback:H=!0}=k||{};this.useWebAudio=D,this.useMediaConstraintsFallback=H,this.videoInputQualitySettings=new _.default(Fi.defaultVideoWidth,Fi.defaultVideoHeight,Fi.defaultVideoFrameRate);const j=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=j[0],this.videoInputQualitySettings.videoHeight=j[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new g.default().create();const W=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(W)}`)}catch(W){O.error(W.message)}}},"DefaultDeviceController");a.default=w,w.permissionDeniedOriginDetectionThresholdMs=500,w.defaultVideoWidth=960,w.defaultVideoHeight=540,w.defaultVideoFrameRate=15,w.defaultSampleRate=48e3,w.defaultSampleSize=16,w.defaultChannelCount=1,w.audioContext=null;function M(R){return typeof R=="object"&&"deviceId"in R&&"groupId"in R&&"kind"in R&&"label"in R}s(M,"isMediaDeviceInfo")},4261566413:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{matchesConstraints(p){return JSON.stringify(this.constraints)===JSON.stringify(p)}constructor(){this.groupId=""}},"DeviceSelection");a.default=c},2083236720:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class extends Error{constructor(p,m){super(m||"Error fetching device."),this.cause=p,this.name="GetUserMediaError"}},"GetUserMediaError");a.default=c},9799823045:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0}),a.NoOpDeviceControllerWithEventController=void 0;const m=p(c(1946951215)),g=p(c(8981226922));let l=s(class extends m.default{destroy(){return d(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,i){}getVideoInputQualitySettings(){return g.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");a.default=l;let r=s(class extends l{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");a.NoOpDeviceControllerWithEventController=r},9468773362:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(2083236720));let m=s(class extends p.default{constructor(l){super(l),this.name="NotFoundError"}},"NotFoundError");a.default=m},6809352498:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(2083236720));let m=s(class extends p.default{constructor(l){super(l),this.name="NotReadableError"}},"NotReadableError");a.default=m},3288618491:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(2083236720));let m=s(class extends p.default{constructor(l,r){super(l),this.constraint=r,this.name="OverconstrainedError"}},"OverconstrainedError");a.default=m},6997557363:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(2083236720));let m=s(class extends p.default{constructor(l,r){super(l,r),this.name="PermissionDeniedError"}},"PermissionDeniedError");a.default=m},3083691903:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{mute(m){return c(this,void 0,void 0,function*(){})}stop(){var m;return c(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return c(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var g;return c(this,void 0,void 0,function*(){return(g=this.node)===null||g===void 0||g.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");a.default=d},8219602063:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(2083236720));let m=s(class extends p.default{constructor(l){super(l),this.name="TypeError"}},"TypeError");a.default=m},8981226922:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{equals(p){return this.videoWidth===p.videoWidth&&this.videoHeight===p.videoHeight&&this.videoFrameRate===p.videoFrameRate}constructor(p,m,g){this.videoWidth=p,this.videoHeight=m,this.videoFrameRate=g}},"VideoQualitySettings");a.default=c,c.VideoDisabled=new c(0,0,0),c.VideoResolutionHD=new c(1280,720,30),c.VideoResolutionFHD=new c(1920,1080,30),c.VideoResolutionUHD=new c(3840,2160,30)},272852764:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isVideoTransformDevice=void 0;function c(d){return!!d&&typeof d=="object"&&"transformStream"in d&&"stop"in d&&"intrinsicDevice"in d}s(c,"isVideoTransformDevice"),a.isVideoTransformDevice=c},2343182956:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{destroy(){return c(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,g){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(r=>{r.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const l=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof l.addEventListener=="function"?(l.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=l):typeof l.addListener=="function"?(l.addListener(this.mediaQueryListener),this.mediaQueryList=l):g.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");a.default=d},2827699573:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");a.default=c},5578123693:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(t,i,o,u){function h(S){return S instanceof o?S:new o(function(f){f(S)})}return s(h,"adopt"),new(o||(o=Promise))(function(S,f){function v(T){try{_(u.next(T))}catch(w){f(w)}}s(v,"fulfilled");function E(T){try{_(u.throw(T))}catch(w){f(w)}}s(E,"rejected");function _(T){T.done?S(T.value):h(T.value).then(v,E)}s(_,"step"),_((u=u.apply(t,i||[])).next())})},p=this&&this.__rest||function(t,i){var o={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.indexOf(u)<0&&(o[u]=t[u]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,u=Object.getOwnPropertySymbols(t);h<u.length;h++)i.indexOf(u[h])<0&&Object.prototype.propertyIsEnumerable.call(t,u[h])&&(o[u[h]]=t[u[h]]);return o},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const g=m(c(5384631890)),l=m(c(9013967876)),r=m(c(3564840480)),n=c(840544383);let e=s(class ta{addEventListeners(){!this.beaconEventListener||!("window"in c.g)||!window.addEventListener||!("document"in c.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(i){(i.type==="visibilitychange"&&document.visibilityState==="hidden"||i.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in c.g)||!window.removeEventListener||!("document"in c.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var i;this.removeEventListeners(),this.addEventListeners(),(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=new l.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var i;(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(i){return d(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(i)}`);const{name:o,ts:u,attributes:h}=i,S=h&&this.filterAttributes(h,this.attributesToFilter),f=Object.assign({name:o,ts:u},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(f)}`);const v=this.getSize(f);if(v>ta.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${v} bytes. Item cannot exceed max item size allowed of ${ta.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(f)}`),this.sendEventImmediately({name:o,ts:u,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(f),this.ingestionEventSize+=v,this.bufferItemThresholdReached(v)){const E=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(E),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(i,o){const u=new Set(o);return Object.keys(i).filter(S=>u.has(S)).forEach(S=>delete i[S]),i}initializeAndGetCurrentIngestionEvent(){const i={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(i),i}bufferItemThresholdReached(i){return i+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===ta.MAX_PAYLOAD_ITEMS}getSize(i){let o=0;if(typeof i=="object")for(const[u,h]of Object.entries(i))o+=this.getPrimitiveSize(u),o+=this.getSize(h);else o+=this.getPrimitiveSize(i);return o}getPrimitiveSize(i){let o=0;return typeof i=="string"?o+=i.length*2:typeof i=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(i=Math.min(this.buffer.length,i+1),this.buffer.splice(o,i))}makeBeaconRequestBody(i){const o={metadata:this.metadata,events:i,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(i){const o={metadata:this.metadata,events:i};return JSON.stringify(o)}sendEventImmediately(i){return d(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(i)}`);const{name:o,ts:u,attributes:h}=i,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:u},h)]};let f=!1,v=null;const E=this.makeRequestBody([S]);try{if(v=yield this.send(E),v.ok){try{const _=yield v.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${E}, message: ${JSON.stringify(_)}`)}catch(_){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${_} for event ${E}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${E} with response status ${v.status}`),f=!0}catch(_){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${E} to the ingestion endpoint ${_}.`),f=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const T=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${T}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,T)?f=!1:f=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${E}`),f=!0}}f&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${E}`),this.failedIngestionEvents.push(S))})}send(i){return d(this,void 0,void 0,function*(){const o=new g.default(ta.RETRY_FIXED_BACKOFF_WAIT_MS,ta.RETRY_SHORT_BACKOFF_MS,ta.RETRY_LONG_BACKOFF_MS);try{let u=0;for(;u<this.retryCountLimit;){const h=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:i});if(h.ok||!ta.SENDING_FAILURE_CODES.has(h.status))return h;if(this.logger.warn(`Will retry sending failure for ${i} due to status code ${h.status}.`),u++,u<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield n.wait(S)}}if(u===this.retryCountLimit)throw new Error(`Retry count limit reached for ${i}`)}catch(u){throw u}})}sendBeacon(){return d(this,void 0,void 0,function*(){const i=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(i)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const u=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);i.push(u),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(u)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const u=this.failedIngestionEvents.map(h=>this.deepCopyCurrentIngestionEvent(h));i.push(...u),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(u)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(u=>{i.push(...u),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(u)}`)}),this.cancellableEvents.clear()),i.length===0)return;const o=this.makeBeaconRequestBody(i);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(u){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${u}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return d(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(i,o,u,h,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=D=>({type:D.type,v:D.v,payloads:[...D.payloads]}),this.sendEvents=()=>d(this,void 0,void 0,function*(){if(this.lock)return;const D=this.getItems(this.flushSize);if(D.length===0)return;this.lock=!0;const H=this.makeRequestBody(D);let j=!1;const W=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(W,D);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${H}`);const X=yield this.send(H);if(this.cancellableEvents.delete(W),!X.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${H} with response status ${X.status}`),j=!0;else try{const ee=yield X.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${H} message: ${JSON.stringify(ee)}`)}catch(ee){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${ee} for events ${H}`)}}catch(X){j=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${H} to the ingestion endpoint ${X}`)}finally{this.lock=!1}j&&(this.cancellableEvents.delete(W),this.failedIngestionEvents.push(...D))});const f=new r.default(S).getParserResult(),{browserMajorVersion:v}=f,E=p(f,["browserMajorVersion"]),_=o.toJSON(),{type:T,v:w}=_,M=p(_,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},E),M),Object.keys(this.metadata).forEach(D=>this.attributesToFilter.push(D)),this.type=T,this.v=w,this.ingestionURL=u,this.logger=S,this.importantEvents=new Set(h);const{maxBufferCapacityKb:R,totalBufferItems:O,flushSize:k,flushIntervalMs:A,retryCountLimit:P}=i;this.maxBufferCapacityBytes=R*1024,this.totalBufferItems=O,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/O),this.flushIntervalMs=A,this.flushSize=k,this.retryCountLimit=P,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=D=>this.beaconEventHandler(D),this.addEventListeners()}},"InMemoryJSONEventBuffer");a.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},375752845:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(p=5e3,m=2,g=64,l=100,r=15){this.flushIntervalMs=p,this.flushSize=m,this.maxBufferCapacityKb=g,this.totalBufferItems=l,this.retryCountLimit=r}},"EventBufferConfiguration");a.default=c},1653454410:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(u,h,S,f){function v(E){return E instanceof S?E:new S(function(_){_(E)})}return s(v,"adopt"),new(S||(S=Promise))(function(E,_){function T(R){try{M(f.next(R))}catch(O){_(O)}}s(T,"fulfilled");function w(R){try{M(f.throw(R))}catch(O){_(O)}}s(w,"rejected");function M(R){R.done?E(R.value):v(R.value).then(T,w)}s(M,"step"),M((f=f.apply(u,h||[])).next())})},p=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(888724265),g=c(3171772403),l=p(c(6329274303)),r=p(c(3645942785)),n=p(c(380175942)),e=p(c(3741513515)),t=p(c(8066052849)),i=p(c(4622151742));let o=s(class Pa{addObserver(h){this.observerSet.add(h)}removeObserver(h){this.observerSet.delete(h)}forEachObserver(h){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&h(S)})}publishEvent(h,S){return d(this,void 0,void 0,function*(){const f=Date.now();this.meetingHistoryStates.push({name:h,timestampMs:f});const v=Object.freeze(Object.assign(this.getAttributes(f),S));this.forEachObserver(E=>{E.eventDidReceive(h,v)}),this.reportEvent(h,f,S)})}reportEvent(h,S,f){var v;return d(this,void 0,void 0,function*(){let E;try{f&&(E=i.default(f)),yield(v=this.eventReporter)===null||v===void 0?void 0:v.reportEvent(S,h,E)}catch(_){this.logger.error(`Error reporting event ${_}`)}})}setupEventReporter(h,S,f){if(f)this._eventReporter=f;else if(h.urls){const v=h.urls.eventIngestionURL;if(v){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:E,credentials:{attendeeId:_,joinToken:T}}=h,w=new n.default(E,_,T),M=new l.default(w,v);this._eventReporter=new r.default(M,S)}}}getAttributes(h){var S,f;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||Pa.UNAVAILABLE,osVersion:((f=this.parserResult)===null||f===void 0?void 0:f.os.version)||Pa.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:h}}get eventReporter(){return this._eventReporter}destroy(){return d(this,void 0,void 0,function*(){g.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(h,S,f){var v,E,_,T,w,M,R;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=h,this.setupEventReporter(h,S,f);try{this.parserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null}catch(O){this.logger.error(O.message)}this.browserMajorVersion=((_=(E=(v=this.parserResult)===null||v===void 0?void 0:v.browser)===null||E===void 0?void 0:E.version)===null||_===void 0?void 0:_.split(".")[0])||Pa.UNAVAILABLE,this.browserName=((T=this.parserResult)===null||T===void 0?void 0:T.browser.name)||Pa.UNAVAILABLE,this.browserVersion=((w=this.parserResult)===null||w===void 0?void 0:w.browser.version)||Pa.UNAVAILABLE,this.deviceName=[((M=this.parserResult)===null||M===void 0?void 0:M.device.vendor)||"",((R=this.parserResult)===null||R===void 0?void 0:R.device.model)||""].join(" ").trim()||Pa.UNAVAILABLE}},"DefaultEventController");a.default=o,o.UNAVAILABLE="Unavailable"},4622151742:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const c=s(d=>{const p={};for(const[m,g]of Object.entries(d))if(!(g==null||g===""))if(typeof g=="number"||typeof g=="string")p[m]=g;else throw new TypeError("Unhandled type received while flattening attributes.");return p},"flattenEventAttributes");a.default=c},6329274303:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(375752845));let m=s(class{constructor(l,r,n=new p.default){this.eventsClientConfiguration=l,this.ingestionURL=r,this.eventBufferConfiguration=n}},"EventIngestionConfiguration");a.default=m},3645942785:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(3171772403),g=p(c(5578123693));let l=s(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(n){this.logger.error(`Event Reporting - Error starting the event buffer ${n}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(n){this.logger.error(`Event Reporting - Error stopping the event buffer ${n}`)}}reportEvent(n,e,t){return d(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${n}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:n,name:e,attributes:t})}catch(i){this.logger.error(`Event Reporting - Error adding event to buffer ${i}`)}})}destroy(){return d(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),m.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(n,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:i,eventBufferConfiguration:o}=n,{eventsToIgnore:u}=t;this.eventBuffer=new g.default(o,t,i,this.importantEvents,e),this.logger=e,this.eventsToIgnore=u,this.start()}},"DefaultMeetingEventReporter");a.default=l},4400960579:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{reportEvent(p,m,g){}start(){}stop(){}constructor(){}},"NoOpEventReporter");a.default=c},380175942:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const p={};return p.type=this.type,p.v=this.v,p.meetingId=this.meetingId,p.attendeeId=this.attendeeId,p}constructor(p,m,g,l=[]){this.type="Meet",this.v=1,this.meetingId=p,this.attendeeId=m,this.eventsToIgnore=l,this.authenticationToken=g}},"MeetingEventsClientConfiguration");a.default=c},7164668892:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(io){return io&&io.__esModule?io:{default:io}};Object.defineProperty(a,"__esModule",{value:!0}),a.DefaultEventController=a.DefaultDevicePixelRatioMonitor=a.DefaultDeviceController=a.DefaultContentShareController=a.DefaultBrowserBehavior=a.DefaultAudioVideoFacade=a.DefaultAudioVideoController=a.DefaultAudioMixController=a.DefaultActiveSpeakerPolicy=a.DefaultActiveSpeakerDetector=a.DataMessage=a.CreateSDPTask=a.CreatePeerConnectionTask=a.ContentShareMediaStreamBroker=a.ContentShareConstants=a.ConsoleLogger=a.ConnectionHealthPolicyConfiguration=a.ConnectionHealthData=a.ClientVideoStreamReceivingReport=a.ClientMetricReportMediaType=a.ClientMetricReportDirection=a.ClientMetricReport=a.CleanStoppedSessionTask=a.CleanRestartedSessionTask=a.CheckVideoInputFeedback=a.CheckVideoConnectivityFeedback=a.CheckNetworkUDPConnectivityFeedback=a.CheckNetworkTCPConnectivityFeedback=a.CheckContentShareConnectivityFeedback=a.CheckCameraResolutionFeedback=a.CheckAudioOutputFeedback=a.CheckAudioInputFeedback=a.CheckAudioConnectivityFeedback=a.CanvasVideoFrameBuffer=a.CSPMonitor=a.BitrateParameters=a.BaseTask=a.BaseConnectionHealthPolicy=a.BackgroundReplacementVideoFrameProcessor=a.BackgroundFilterVideoFrameProcessor=a.BackgroundBlurVideoFrameProcessor=a.BackgroundBlurStrength=a.AudioVideoControllerState=a.AudioProfile=a.AudioLogEvent=a.Attendee=a.AttachMediaInputTask=a.AsyncScheduler=a.ApplicationMetadata=a.AllHighestVideoBandwidthPolicy=void 0,a.MeetingReadinessCheckerConfiguration=a.MeetingFeatures=a.MeetingEventsClientConfiguration=a.MediaDeviceProxyHandler=a.Maybe=a.LogLevel=a.Log=a.ListenForVolumeIndicatorsTask=a.LeaveAndReceiveLeaveAckTask=a.JoinAndReceiveIndexTask=a.IntervalScheduler=a.InMemoryJSONEventBuffer=a.GlobalMetricReport=a.GetUserMediaError=a.FullJitterLimitedBackoff=a.FullJitterBackoffFactory=a.FullJitterBackoff=a.FinishGatheringICECandidatesTask=a.EventIngestionConfiguration=a.EventBufferConfiguration=a.DeviceSelection=a.DevicePixelRatioWindowSource=a.DefaultWebSocketAdapter=a.DefaultVolumeIndicatorAdapter=a.DefaultVideoTransformDevice=a.DefaultVideoTileFactory=a.DefaultVideoTileController=a.DefaultVideoTile=a.DefaultVideoStreamIndex=a.DefaultVideoStreamIdSet=a.DefaultVideoFrameProcessorTimer=a.DefaultVideoFrameProcessorPipeline=a.DefaultVideoCaptureAndEncodeParameter=a.DefaultUserAgentParser=a.DefaultTranscriptionController=a.DefaultTransceiverController=a.DefaultSimulcastUplinkPolicyForContentShare=a.DefaultSimulcastUplinkPolicy=a.DefaultSignalingClient=a.DefaultSigV4=a.DefaultSessionStateController=a.DefaultReconnectController=a.DefaultRealtimeController=a.DefaultPingPong=a.DefaultModality=a.DefaultMessagingSession=a.DefaultMeetingSession=a.DefaultMeetingReadinessChecker=a.DefaultMeetingEventReporter=a.DefaultMediaDeviceFactory=void 0,a.RedundantAudioEncoderWorkerCode=a.RedundantAudioEncoder=a.ReconnectionHealthPolicy=a.ReceiveVideoStreamIndexTask=a.ReceiveVideoInputTask=a.ReceiveRemoteVideoPauseResumeTask=a.ReceiveAudioInputTask=a.RealtimeVolumeIndicator=a.RealtimeState=a.RealtimeAttendeePositionInFrame=a.PromoteToPrimaryMeetingTask=a.PromiseQueue=a.PrefetchSortBy=a.PrefetchOn=a.PermissionDeniedError=a.ParallelGroupTask=a.POSTLogger=a.OverconstrainedError=a.OpenSignalingConnectionTask=a.OnceTask=a.NotReadableError=a.NotFoundError=a.None=a.NoVideoUplinkBandwidthPolicy=a.NoVideoDownlinkBandwidthPolicy=a.NoOpVideoFrameProcessor=a.NoOpVideoElementFactory=a.NoOpTask=a.NoOpMediaStreamBroker=a.NoOpLogger=a.NoOpEventReporter=a.NoOpDeviceController=a.NoOpDebugLogger=a.NoOpAudioVideoController=a.NScaleVideoUplinkBandwidthPolicy=a.MutableVideoPreferences=a.MultiLogger=a.MonitorTask=a.ModelSpecBuilder=a.MessagingSessionConfiguration=a.Message=a.MeetingSessionVideoAvailability=a.MeetingSessionURLs=a.MeetingSessionTURNCredentials=a.MeetingSessionStatusCode=a.MeetingSessionStatus=a.MeetingSessionLifecycleEventCondition=a.MeetingSessionLifecycleEvent=a.MeetingSessionCredentials=a.MeetingSessionConfiguration=void 0,a.VideoEncodingCpuConnectionHealthPolicy=a.VideoEncodingConnectionHealthPolicyName=a.VideoCodecCapability=a.VideoAdaptiveProbePolicy=a.Versioning=a.UnusableAudioWarningConnectionHealthPolicy=a.TypeError=a.TranscriptionStatusType=a.TranscriptionStatus=a.TranscriptResult=a.TranscriptLanguageWithScore=a.TranscriptItemType=a.TranscriptItem=a.TranscriptEntity=a.TranscriptAlternative=a.Transcript=a.TimeoutTask=a.TimeoutScheduler=a.TaskStatus=a.TargetDisplaySize=a.SubscribeAndReceiveSubscribeAckTask=a.StreamMetricReport=a.Some=a.SingleNodeAudioTransformDevice=a.SimulcastVideoStreamIndex=a.SimulcastTransceiverController=a.SimulcastLayers=a.SimulcastContentShareTransceiverController=a.SignalingClientVideoSubscriptionConfiguration=a.SignalingClientSubscribe=a.SignalingClientJoin=a.SignalingClientEventType=a.SignalingClientEvent=a.SignalingClientConnectionRequest=a.SignalingAndMetricsConnectionMonitor=a.SetRemoteDescriptionTask=a.SetLocalDescriptionTask=a.SessionStateControllerTransitionResult=a.SessionStateControllerState=a.SessionStateControllerDeferPriority=a.SessionStateControllerAction=a.ServerSideNetworkAdaption=a.SerialGroupTask=a.SendingAudioFailureConnectionHealthPolicy=a.SendAndReceiveDataMessagesTask=a.SDPMediaSection=a.SDPCandidateType=a.SDP=a.RunnableTask=a.RedundantAudioRecoveryMetricReport=void 0,a.isVideoTransformDevice=a.isDestroyable=a.isAudioTransformDevice=a.ZLIBTextCompressor=a.WebSocketReadyState=a.WaitForAttendeePresenceTask=a.VoiceFocusTransformDevice=a.VoiceFocusDeviceTransformer=a.VideoTileState=a.VideoStreamDescription=a.VideoSource=a.VideoQualitySettings=a.VideoQualityAdaptationPreference=a.VideoPriorityBasedPolicyConfig=a.VideoPriorityBasedPolicy=a.VideoPreferences=a.VideoPreference=a.VideoOnlyTransceiverController=a.VideoLogEvent=a.VideoFxProcessor=a.VideoEncodingFramerateConnectionHealthPolicy=void 0;const p=d(c(7744958188));a.AllHighestVideoBandwidthPolicy=p.default;const m=d(c(9821410283));a.ApplicationMetadata=m.default;const g=d(c(3741513515));a.AsyncScheduler=g.default;const l=d(c(7063021350));a.AttachMediaInputTask=l.default;const r=d(c(4846700713));a.Attendee=r.default;const n=d(c(6392364773));a.AudioLogEvent=n.default;const e=d(c(4999349075));a.AudioProfile=e.default;const t=d(c(8430013536));a.AudioVideoControllerState=t.default;const i=d(c(9721779232));a.BackgroundBlurStrength=i.default;const o=d(c(7840699215));a.BackgroundBlurVideoFrameProcessor=o.default;const u=d(c(6292069043));a.BackgroundFilterVideoFrameProcessor=u.default;const h=d(c(45891509));a.BackgroundReplacementVideoFrameProcessor=h.default;const S=d(c(6963727640));a.BaseConnectionHealthPolicy=S.default;const f=d(c(516529594));a.BaseTask=f.default;const v=d(c(7699083583));a.BitrateParameters=v.default;const E=d(c(1252089397));a.CSPMonitor=E.default;const _=d(c(6672418579));a.CanvasVideoFrameBuffer=_.default;const T=d(c(7337337789));a.CheckAudioConnectivityFeedback=T.default;const w=d(c(9946611704));a.CheckAudioInputFeedback=w.default;const M=d(c(2655850275));a.CheckAudioOutputFeedback=M.default;const R=d(c(9670709847));a.CheckCameraResolutionFeedback=R.default;const O=d(c(1236878429));a.CheckContentShareConnectivityFeedback=O.default;const k=d(c(9380119960));a.CheckNetworkTCPConnectivityFeedback=k.default;const A=d(c(7487205960));a.CheckNetworkUDPConnectivityFeedback=A.default;const P=d(c(2886652712));a.CheckVideoConnectivityFeedback=P.default;const D=d(c(4725233475));a.CheckVideoInputFeedback=D.default;const H=d(c(4019918320));a.CleanRestartedSessionTask=H.default;const j=d(c(7819987893));a.CleanStoppedSessionTask=j.default;const W=d(c(7059763395));a.ClientMetricReport=W.default;const X=d(c(5147189764));a.ClientMetricReportDirection=X.default;const ee=d(c(1847926377));a.ClientMetricReportMediaType=ee.default;const fe=d(c(9895069884));a.ClientVideoStreamReceivingReport=fe.default;const oe=d(c(3544934903));a.ConnectionHealthData=oe.default;const Oe=d(c(1091173065));a.ConnectionHealthPolicyConfiguration=Oe.default;const Xe=d(c(5956893594));a.ConsoleLogger=Xe.default;const ge=d(c(3560634922));a.ContentShareConstants=ge.default;const Me=d(c(8271576690));a.ContentShareMediaStreamBroker=Me.default;const $e=d(c(2918138407));a.CreatePeerConnectionTask=$e.default;const ze=d(c(7869625838));a.CreateSDPTask=ze.default;const nt=d(c(1766966835));a.DataMessage=nt.default;const mt=d(c(3323583056));a.DefaultActiveSpeakerDetector=mt.default;const gt=d(c(1644292716));a.DefaultActiveSpeakerPolicy=gt.default;const Pe=d(c(3227886346));a.DefaultAudioMixController=Pe.default;const xe=d(c(616382858));a.DefaultAudioVideoController=xe.default;const Ye=d(c(314828250));a.DefaultAudioVideoFacade=Ye.default;const Ze=d(c(8351168186));a.DefaultBrowserBehavior=Ze.default;const Re=d(c(4707988254));a.DefaultContentShareController=Re.default;const Tt=d(c(8152963890));a.DefaultDeviceController=Tt.default;const rt=d(c(2343182956));a.DefaultDevicePixelRatioMonitor=rt.default;const Nt=d(c(1653454410));a.DefaultEventController=Nt.default;const Wt=d(c(113406342));a.DefaultMediaDeviceFactory=Wt.default;const Qt=d(c(3645942785));a.DefaultMeetingEventReporter=Qt.default;const Ot=d(c(2741503378));a.DefaultMeetingReadinessChecker=Ot.default;const hn=d(c(542823578));a.DefaultMeetingSession=hn.default;const fi=d(c(9249618790));a.DefaultMessagingSession=fi.default;const wn=d(c(4599834734));a.DefaultModality=wn.default;const Jt=d(c(2311029370));a.DefaultPingPong=Jt.default;const on=d(c(5403024322));a.DefaultRealtimeController=on.default;const kt=d(c(8855787924));a.DefaultReconnectController=kt.default;const $t=d(c(4641929542));a.DefaultSessionStateController=$t.default;const en=d(c(7822521824));a.DefaultSigV4=en.default;const zt=d(c(7258714924));a.DefaultSignalingClient=zt.default;const Kt=d(c(3361826027));a.DefaultSimulcastUplinkPolicy=Kt.default;const Q=d(c(4134174226));a.DefaultSimulcastUplinkPolicyForContentShare=Q.default;const Ve=d(c(6769427378));a.DefaultTransceiverController=Ve.default;const Be=d(c(246495600));a.DefaultTranscriptionController=Be.default;const Je=d(c(3564840480));a.DefaultUserAgentParser=Je.default;const ut=d(c(8261422434));a.DefaultVideoCaptureAndEncodeParameter=ut.default;const ot=d(c(7145536260));a.DefaultVideoFrameProcessorPipeline=ot.default;const de=d(c(1902736443));a.DefaultVideoFrameProcessorTimer=de.default;const Ue=d(c(5134603106));a.DefaultVideoStreamIdSet=Ue.default;const K=d(c(5216544790));a.DefaultVideoStreamIndex=K.default;const q=d(c(1140481832));a.DefaultVideoTile=q.default;const Ee=d(c(9251190564));a.DefaultVideoTileController=Ee.default;const be=d(c(1695899970));a.DefaultVideoTileFactory=be.default;const it=d(c(5709738441));a.DefaultVideoTransformDevice=it.default;const He=d(c(338869682));a.DefaultVolumeIndicatorAdapter=He.default;const Qe=d(c(8796204466));a.DefaultWebSocketAdapter=Qe.default;const Se=d(c(2827699573));a.DevicePixelRatioWindowSource=Se.default;const Ae=d(c(4261566413));a.DeviceSelection=Ae.default;const L=d(c(375752845));a.EventBufferConfiguration=L.default;const ve=d(c(6329274303));a.EventIngestionConfiguration=ve.default;const _e=d(c(9613312866));a.FinishGatheringICECandidatesTask=_e.default;const Ie=d(c(5384631890));a.FullJitterBackoff=Ie.default;const ne=d(c(1363278032));a.FullJitterBackoffFactory=ne.default;const Ft=d(c(8220481840));a.FullJitterLimitedBackoff=Ft.default;const qe=d(c(2083236720));a.GetUserMediaError=qe.default;const ft=d(c(3572556907));a.GlobalMetricReport=ft.default;const En=d(c(5578123693));a.InMemoryJSONEventBuffer=En.default;const xt=d(c(9013967876));a.IntervalScheduler=xt.default;const Ui=d(c(1495317641));a.JoinAndReceiveIndexTask=Ui.default;const _i=d(c(5110013894));a.LeaveAndReceiveLeaveAckTask=_i.default;const bn=d(c(3708122413));a.ListenForVolumeIndicatorsTask=bn.default;const zn=d(c(3382381733));a.Log=zn.default;const gn=d(c(3756404293));a.LogLevel=gn.default;const gi=d(c(3072764689));a.MediaDeviceProxyHandler=gi.default;const ai=d(c(380175942));a.MeetingEventsClientConfiguration=ai.default;const yr=d(c(7584876358));a.MeetingFeatures=yr.default;const Bt=d(c(7683606499));a.MeetingReadinessCheckerConfiguration=Bt.default;const Et=d(c(7136804647));a.MeetingSessionConfiguration=Et.default;const On=d(c(7147499759));a.MeetingSessionCredentials=On.default;const nn=d(c(5446246651));a.MeetingSessionLifecycleEvent=nn.default;const Bn=d(c(7192341248));a.MeetingSessionLifecycleEventCondition=Bn.default;const li=d(c(3777990285));a.MeetingSessionStatus=li.default;const ui=d(c(4882394368));a.MeetingSessionStatusCode=ui.default;const Gn=d(c(7999114886));a.MeetingSessionTURNCredentials=Gn.default;const Yn=d(c(2653083101));a.MeetingSessionURLs=Yn.default;const Ci=d(c(1880578541));a.MeetingSessionVideoAvailability=Ci.default;const Ti=d(c(1721682483));a.Message=Ti.default;const Un=d(c(9309957401));a.MessagingSessionConfiguration=Un.default;const U=d(c(7472936477));a.ModelSpecBuilder=U.default;const ce=d(c(1504187181));a.MonitorTask=ce.default;const Fe=d(c(950290054));a.MultiLogger=Fe.default;const Ke=d(c(3423911843));a.NScaleVideoUplinkBandwidthPolicy=Ke.default;const st=d(c(1292880771));a.NoOpAudioVideoController=st.default;const Dt=d(c(9416545472));a.NoOpDebugLogger=Dt.default;const Vt=d(c(9799823045));a.NoOpDeviceController=Vt.default;const Yt=d(c(4400960579));a.NoOpEventReporter=Yt.default;const pn=d(c(7338764361));a.NoOpLogger=pn.default;const dn=d(c(1946951215));a.NoOpMediaStreamBroker=dn.default;const An=d(c(1992142375));a.NoOpTask=An.default;const ci=d(c(8481249111));a.NoOpVideoElementFactory=ci.default;const ri=d(c(7000795223));a.NoOpVideoFrameProcessor=ri.default;const Vi=d(c(9248911078));a.NoVideoDownlinkBandwidthPolicy=Vi.default;const Zi=d(c(9128807920));a.NoVideoUplinkBandwidthPolicy=Zi.default;const pr=d(c(9468773362));a.NotFoundError=pr.default;const Or=d(c(6809352498));a.NotReadableError=Or.default;const Ar=d(c(2913368614));a.OnceTask=Ar.default;const Xr=d(c(6907504899));a.OpenSignalingConnectionTask=Xr.default;const tr=d(c(3288618491));a.OverconstrainedError=tr.default;const kn=d(c(1141297335));a.POSTLogger=kn.default;const Mi=d(c(6015743885));a.ParallelGroupTask=Mi.default;const Hi=d(c(6997557363));a.PermissionDeniedError=Hi.default;const $i=d(c(6747155167));a.PrefetchOn=$i.default;const qi=d(c(9468168383));a.PrefetchSortBy=qi.default;const Er=d(c(2997222898));a.PromiseQueue=Er.default;const Wr=d(c(3627106901));a.PromoteToPrimaryMeetingTask=Wr.default;const hi=d(c(4412582314));a.RealtimeAttendeePositionInFrame=hi.default;const Ki=d(c(6045987188));a.RealtimeState=Ki.default;const ur=d(c(2450851234));a.RealtimeVolumeIndicator=ur.default;const pe=d(c(3151098372));a.ReceiveAudioInputTask=pe.default;const Ce=d(c(9363406688));a.ReceiveRemoteVideoPauseResumeTask=Ce.default;const Le=d(c(6069988831));a.ReceiveVideoInputTask=Le.default;const tt=d(c(2452872079));a.ReceiveVideoStreamIndexTask=tt.default;const ct=d(c(8929805428));a.ReconnectionHealthPolicy=ct.default;const pt=d(c(1510239283));a.RedundantAudioEncoder=pt.default;const Zt=d(c(3440292739));a.RedundantAudioEncoderWorkerCode=Zt.default;const an=d(c(7894724558));a.RedundantAudioRecoveryMetricReport=an.default;const ln=d(c(6771673942));a.RunnableTask=ln.default;const Gt=d(c(3430379175));a.SDP=Gt.default;const Fn=d(c(9615283928));a.SDPCandidateType=Fn.default;const bt=d(c(3364495052));a.SDPMediaSection=bt.default;const oi=d(c(2471283351));a.SendAndReceiveDataMessagesTask=oi.default;const mn=d(c(2115341037));a.SendingAudioFailureConnectionHealthPolicy=mn.default;const yi=d(c(3894566132));a.SerialGroupTask=yi.default;const zi=d(c(1448262436));a.ServerSideNetworkAdaption=zi.default;const Ri=d(c(3097552577));a.SessionStateControllerAction=Ri.default;const Sn=d(c(3049140029));a.SessionStateControllerDeferPriority=Sn.default;const Tn=d(c(953236500));a.SessionStateControllerState=Tn.default;const Kn=d(c(7338273141));a.SessionStateControllerTransitionResult=Kn.default;const Si=d(c(6412210284));a.SetLocalDescriptionTask=Si.default;const lr=d(c(839180639));a.SetRemoteDescriptionTask=lr.default;const mr=d(c(1523356655));a.SignalingAndMetricsConnectionMonitor=mr.default;const jn=d(c(893025464));a.SignalingClientConnectionRequest=jn.default;const Lr=d(c(8152250765));a.SignalingClientEvent=Lr.default;const Ii=d(c(426218501));a.SignalingClientEventType=Ii.default;const gr=d(c(9315300759));a.SignalingClientJoin=gr.default;const lo=d(c(1026405281));a.SignalingClientSubscribe=lo.default;const bo=d(c(4983545831));a.SignalingClientVideoSubscriptionConfiguration=bo.default;const Zr=d(c(1438956810));a.SimulcastContentShareTransceiverController=Zr.default;const co=d(c(8438160003));a.SimulcastLayers=co.default;const oo=d(c(2962876954));a.SimulcastTransceiverController=oo.default;const So=d(c(7562203998));a.SimulcastVideoStreamIndex=So.default;const br=d(c(3083691903));a.SingleNodeAudioTransformDevice=br.default;const zr=d(c(7825873064));a.StreamMetricReport=zr.default;const uo=d(c(2641934340));a.SubscribeAndReceiveSubscribeAckTask=uo.default;const Xi=d(c(6110401981));a.TargetDisplaySize=Xi.default;const xr=d(c(9293073193));a.TaskStatus=xr.default;const vo=d(c(6393942734));a.TimeoutScheduler=vo.default;const qr=d(c(3450261616));a.TimeoutTask=qr.default;const _o=d(c(9138893973));a.Transcript=_o.default;const Bo=d(c(866659076));a.TranscriptAlternative=Bo.default;const Xo=d(c(7538060970));a.TranscriptEntity=Xo.default;const Fo=d(c(3531434754));a.TranscriptItem=Fo.default;const Ji=d(c(2024984314));a.TranscriptItemType=Ji.default;const fr=d(c(9584814027));a.TranscriptLanguageWithScore=fr.default;const Sr=d(c(3443368328));a.TranscriptResult=Sr.default;const vr=d(c(2461374283));a.TranscriptionStatus=vr.default;const _r=d(c(3798201443));a.TranscriptionStatusType=_r.default;const Mo=d(c(8219602063));a.TypeError=Mo.default;const no=d(c(5928001672));a.UnusableAudioWarningConnectionHealthPolicy=no.default;const Mr=d(c(8066052849));a.Versioning=Mr.default;const Ro=d(c(1437705752));a.VideoAdaptiveProbePolicy=Ro.default;const Os=d(c(4883941895));a.VideoCodecCapability=Os.default;const As=d(c(6005421222));a.VideoEncodingConnectionHealthPolicyName=As.default;const ia=d(c(8438187697));a.VideoEncodingCpuConnectionHealthPolicy=ia.default;const Qo=d(c(1615281264));a.VideoEncodingFramerateConnectionHealthPolicy=Qo.default;const cs=d(c(2403769553));a.VideoFxProcessor=cs.default;const Ms=d(c(4715258780));a.VideoLogEvent=Ms.default;const ds=d(c(3052177122));a.VideoOnlyTransceiverController=ds.default;const Rs=d(c(7981698535));a.VideoPreference=Rs.default;const Zo=d(c(6700033168));a.VideoPreferences=Zo.default;const us=d(c(6313276823));a.VideoPriorityBasedPolicy=us.default;const fs=d(c(9837586225));a.VideoPriorityBasedPolicyConfig=fs.default;const Ps=d(c(5116495551));a.VideoQualityAdaptationPreference=Ps.default;const ra=d(c(8981226922));a.VideoQualitySettings=ra.default;const To=d(c(2551170247));a.VideoSource=To.default;const ks=d(c(4202624657));a.VideoStreamDescription=ks.default;const hs=d(c(5449946032));a.VideoTileState=hs.default;const ps=d(c(8525594090));a.VoiceFocusDeviceTransformer=ps.default;const ms=d(c(282836061));a.VoiceFocusTransformDevice=ms.default;const Ds=d(c(7500181884));a.WaitForAttendeePresenceTask=Ds.default;const ki=d(c(2686893898));a.WebSocketReadyState=ki.default;const Ns=d(c(9675039205));a.ZLIBTextCompressor=Ns.default;const gs=c(6700033168);Object.defineProperty(a,"MutableVideoPreferences",{enumerable:!0,get:function(){return gs.MutableVideoPreferences}});const Qi=c(903520651);Object.defineProperty(a,"Some",{enumerable:!0,get:function(){return Qi.Some}}),Object.defineProperty(a,"None",{enumerable:!0,get:function(){return Qi.None}}),Object.defineProperty(a,"Maybe",{enumerable:!0,get:function(){return Qi.Maybe}});const Gr=c(3961458747);Object.defineProperty(a,"isAudioTransformDevice",{enumerable:!0,get:function(){return Gr.isAudioTransformDevice}});const Rr=c(3171772403);Object.defineProperty(a,"isDestroyable",{enumerable:!0,get:function(){return Rr.isDestroyable}});const Uo=c(272852764);Object.defineProperty(a,"isVideoTransformDevice",{enumerable:!0,get:function(){return Uo.isVideoTransformDevice}})},5956893594:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(3756404293));let m=s(class{info(l){this.log(p.default.INFO,l)}warn(l){this.log(p.default.WARN,l)}error(l){this.log(p.default.ERROR,l)}debug(l){p.default.DEBUG<this.level||(typeof l=="string"?this.log(p.default.DEBUG,l):l?this.log(p.default.DEBUG,l()):this.log(p.default.DEBUG,""+l))}setLogLevel(l){this.level=l}getLogLevel(){return this.level}log(l,r){if(l<this.level)return;const e=`${new Date().toISOString()} [${p.default[l]}] ${this.name} - ${r}`;switch(l){case p.default.ERROR:console.error(e);break;case p.default.WARN:console.warn(e);break;case p.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case p.default.INFO:console.info(e);break}}constructor(l,r=p.default.WARN){this.name=l,this.level=r}},"ConsoleLogger");a.default=m},3382381733:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(p,m,g,l){this.sequenceNumber=p,this.message=m,this.timestampMs=g,this.logLevel=l}},"Log");a.default=c},3756404293:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.LogLevel=void 0;var c;(function(d){d[d.DEBUG=0]="DEBUG",d[d.INFO=1]="INFO",d[d.WARN=2]="WARN",d[d.ERROR=3]="ERROR",d[d.OFF=4]="OFF"})(c=a.LogLevel||(a.LogLevel={})),a.default=c},950290054:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(3756404293));let m=s(class{info(l){for(const r of this._loggers)r.info(l)}warn(l){for(const r of this._loggers)r.warn(l)}error(l){for(const r of this._loggers)r.error(l)}debug(l){let r,n;typeof l=="string"?n=l:l?n=s(()=>(r||(r=l()),r),"memoized"):n=""+l;for(const e of this._loggers)e.debug(n)}setLogLevel(l){for(const r of this._loggers)r.setLogLevel(l)}getLogLevel(){for(const l of this._loggers)return l.getLogLevel();return p.default.OFF}constructor(...l){this._loggers=l}},"MultiLogger");a.default=m},9416545472:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(3756404293)),m=d(c(7338764361));let g=s(class extends m.default{constructor(){super(p.default.DEBUG)}},"NoOpDebugLogger");a.default=g},7338764361:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(3756404293));let m=s(class{info(l){}warn(l){}error(l){}debug(l){p.default.DEBUG<this.level||typeof l!="string"&&l()}setLogLevel(l){this.level=l}getLogLevel(){return this.level}constructor(l=p.default.OFF){this.level=l}},"NoOpLogger");a.default=m},1141297335:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(9013967876)),g=p(c(3382381733)),l=p(c(3756404293));let r=s(class hh{addEventListener(){!this.eventListener||!("window"in c.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in c.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){l.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(l.default.DEBUG,e):e?this.log(l.default.DEBUG,e()):this.log(l.default.DEBUG,""+e))}info(e){this.log(l.default.INFO,e)}warn(e){this.log(l.default.WARN,e)}error(e){this.log(l.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>d(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(i){console.warn("[POSTLogger] "+i.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return d(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const i=Date.now();this.logCapture.push(new g.default(this.sequenceNumber,t,i,l.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:i=hh.BATCH_SIZE,intervalMs:o=hh.INTERVAL_MS,logLevel:u=l.default.WARN,metadata:h,headers:S}=e;this.url=t,this.batchSize=i,this.intervalMs=o,this.logLevel=u,this.metadata=h,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");a.default=r,r.BATCH_SIZE=85,r.INTERVAL_MS=2e3},113406342:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(3072764689));let m=s(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new p.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");a.default=m},3072764689:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(3741513515)),g=p(c(9013967876));let l=s(class xS{sortedDeviceList(){return d(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const n of this.deviceChangeListeners)m.default.nextTick(()=>{if(this.deviceChangeListeners.has(n)){const e=new Event("devicechange");typeof n=="function"?n(e):n.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(n,e,t)=>{if(!Reflect.has(n,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(n,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(n,e,t)}const i=Reflect.get(n,e,t);return typeof i=="function"?i.bind(n):i},this.patchAddEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,u,h)=>{if(o==="devicechange")this.deviceChangeListeners.add(u),this.scheduler||(this.scheduler=new g.default(xS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(i,n,[o,u,h])}},this.patchRemoveEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,u,h)=>{if(o==="devicechange")this.deviceChangeListeners.delete(u),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(i,n,[o,u,h])}},this.pollDeviceLists=()=>d(this,void 0,void 0,function*(){const n=yield this.sortedDeviceList();this.devices&&(n.length!==this.devices.length||n.some((t,i)=>t.deviceId!==this.devices[i].deviceId))&&this.handleDeviceChangeEvent(),this.devices=n})}},"MediaDeviceProxyHandler");a.default=l,l.INTERVAL_MS=1e3},1946951215:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(p){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(p){}removeMediaStreamBrokerObserver(p){}},"NoOpMediaStreamBroker");a.default=c},7337337789:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckAudioConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.AudioInputRequestFailed=1]="AudioInputRequestFailed",d[d.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",d[d.ConnectionFailed=3]="ConnectionFailed",d[d.AudioNotReceived=4]="AudioNotReceived"})(c=a.CheckAudioConnectivityFeedback||(a.CheckAudioConnectivityFeedback={})),a.default=c},9946611704:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckAudioInputFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed",d[d.PermissionDenied=2]="PermissionDenied"})(c=a.CheckAudioInputFeedback||(a.CheckAudioInputFeedback={})),a.default=c},2655850275:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckAudioOutputFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed"})(c=a.CheckAudioOutputFeedback||(a.CheckAudioOutputFeedback={})),a.default=c},9670709847:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckCameraResolutionFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed",d[d.ResolutionNotSupported=2]="ResolutionNotSupported",d[d.PermissionDenied=3]="PermissionDenied"})(c=a.CheckCameraResolutionFeedback||(a.CheckCameraResolutionFeedback={})),a.default=c},1236878429:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckContentShareConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed",d[d.PermissionDenied=2]="PermissionDenied",d[d.TimedOut=3]="TimedOut",d[d.ConnectionFailed=4]="ConnectionFailed"})(c=a.CheckContentShareConnectivityFeedback||(a.CheckContentShareConnectivityFeedback={})),a.default=c},9380119960:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckNetworkTCPConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",d[d.ConnectionFailed=2]="ConnectionFailed",d[d.ICENegotiationFailed=3]="ICENegotiationFailed"})(c=a.CheckNetworkTCPConnectivityFeedback||(a.CheckNetworkTCPConnectivityFeedback={})),a.default=c},7487205960:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckNetworkUDPConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",d[d.ConnectionFailed=2]="ConnectionFailed",d[d.ICENegotiationFailed=3]="ICENegotiationFailed"})(c=a.CheckNetworkUDPConnectivityFeedback||(a.CheckNetworkUDPConnectivityFeedback={})),a.default=c},2886652712:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckVideoConnectivityFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.VideoInputRequestFailed=1]="VideoInputRequestFailed",d[d.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",d[d.ConnectionFailed=3]="ConnectionFailed",d[d.VideoNotSent=4]="VideoNotSent"})(c=a.CheckVideoConnectivityFeedback||(a.CheckVideoConnectivityFeedback={})),a.default=c},4725233475:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CheckVideoInputFeedback=void 0;var c;(function(d){d[d.Succeeded=0]="Succeeded",d[d.Failed=1]="Failed",d[d.PermissionDenied=2]="PermissionDenied"})(c=a.CheckVideoInputFeedback||(a.CheckVideoInputFeedback={})),a.default=c},2741503378:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(w,M,R,O){function k(A){return A instanceof R?A:new R(function(P){P(A)})}return s(k,"adopt"),new(R||(R=Promise))(function(A,P){function D(W){try{j(O.next(W))}catch(X){P(X)}}s(D,"fulfilled");function H(W){try{j(O.throw(W))}catch(X){P(X)}}s(H,"rejected");function j(W){W.done?A(W.value):k(W.value).then(D,H)}s(j,"step"),j((O=O.apply(w,M||[])).next())})},p=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(3227886346)),g=p(c(8351168186)),l=p(c(8152963890)),r=p(c(6997557363)),n=p(c(516529594)),e=p(c(3450261616)),t=p(c(7337337789)),i=p(c(9946611704)),o=p(c(2655850275)),u=p(c(9670709847)),h=p(c(1236878429)),S=p(c(9380119960)),f=p(c(7487205960)),v=p(c(2886652712)),E=p(c(4725233475)),_=p(c(7683606499));let T=s(class BS{static delay(M){return d(this,void 0,void 0,function*(){return new Promise(R=>setTimeout(R,M))})}checkAudioInput(M){return d(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(M),yield this.meetingSession.audioVideo.stopAudioInput(),i.default.Succeeded}catch(R){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${R}`),R instanceof r.default?i.default.PermissionDenied:i.default.Failed}})}checkAudioOutput(M,R){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return d(this,void 0,void 0,function*(){try{const k=M?l.default.getIntrinsicDeviceId(M):"";return yield this.playTone(k,this.configuration.audioOutputFrequency,O),(yield R())?o.default.Succeeded:o.default.Failed}catch(k){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${k}`),o.default.Failed}finally{this.stopTone()}})}playTone(M,R,O){return d(this,void 0,void 0,function*(){const A=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=l.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=R,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const D=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,D),this.gainNode.gain.linearRampToValueAtTime(A,D+.1),this.oscillatorNode.start();const H=new m.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield H.bindAudioDevice({deviceId:M}))}catch(j){this.logger.error(`Failed to bind audio device: ${j}`)}try{yield H.bindAudioElement(O||new Audio)}catch(j){this.logger.error(`Failed to bind audio element: ${j}`)}yield H.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const M=1,R=.1,O=this.configuration.audioOutputGain,k=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(O,k+R+M),this.gainNode.gain.linearRampToValueAtTime(0,k+R*2+M),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(M){return d(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(M),yield this.meetingSession.audioVideo.stopVideoInput(),E.default.Succeeded}catch(R){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${R}`),R instanceof r.default?E.default.PermissionDenied:E.default.Failed}})}checkCameraResolution(M,R,O){return d(this,void 0,void 0,function*(){let k;try{const A=l.default.getIntrinsicDeviceId(M),P={video:this.calculateVideoConstraint(A,R,O)};k=yield navigator.mediaDevices.getUserMedia(P)}catch(A){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${R} height ${O} failed with error ${A}`),A&&A.name==="OverconstrainedError"?u.default.ResolutionNotSupported:A&&A.name==="NotAllowedError"?u.default.PermissionDenied:u.default.Failed}finally{k&&k.getTracks().forEach(function(A){A.stop()})}return u.default.Succeeded})}calculateVideoConstraint(M,R,O){const k=this.browserBehavior.requiresResolutionAlignment(R,O),A={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(A.deviceId=M,A.width=R,A.height=O):(A.deviceId={exact:M},A.width={exact:k[0]},A.height={exact:k[1]}),A}checkContentShareConnectivity(M){return d(this,void 0,void 0,function*(){let R=!1,O=!1;const k={contentShareDidStart:()=>{R=!0}},A={audioVideoDidStart:()=>{O=!0}};try{return this.meetingSession.audioVideo.addObserver(A),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(k),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(M),yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return O&&R})),O?(yield this.stopMeeting(),R?h.default.Succeeded:h.default.TimedOut):h.default.ConnectionFailed}catch(P){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${P}`),P.name==="NotAllowedError"?h.default.PermissionDenied:h.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(A),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(k)}})}checkAudioConnectivity(M){return d(this,void 0,void 0,function*(){let R=!1;const O={packetsReceived:0},k=this.meetingSession.audioVideo,A={metricsDidReceive(D){D.getRTCStatsReport().forEach(H=>{H.type==="inbound-rtp"&&(H.mediaType==="audio"||H.kind==="audio")&&(O.packetsReceived=H.packetsReceived)})}},P=s((D,H,j,W)=>{D===this.meetingSession.configuration.credentials.attendeeId&&H&&(R=!0)},"attendeePresenceHandler");try{yield k.startAudioInput(M)}catch(D){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${D}`),D instanceof r.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return k.realtimeSubscribeToAttendeeIdPresence(P),k.addObserver(A),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(R,O)})),k.removeObserver(A),k.realtimeUnsubscribeToAttendeeIdPresence(P),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(R,O)?t.default.Succeeded:t.default.AudioNotReceived):(k.removeObserver(A),k.realtimeUnsubscribeToAttendeeIdPresence(P),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(M){return d(this,void 0,void 0,function*(){const R=this.meetingSession.audioVideo;let O=0;const k={metricsDidReceive(A){A.getRTCStatsReport().forEach(D=>{D.type==="outbound-rtp"&&(D.mediaType==="video"||D.kind==="video")&&(O=D.packetsSent)})}};try{yield R.startVideoInput(M)}catch(A){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${A}`),A instanceof r.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}return R.addObserver(k),(yield this.startMeeting())?(R.startLocalVideoTile(),yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return O>0})),yield R.stopVideoInput(),yield this.stopMeeting(),R.removeObserver(k),O<=0?v.default.VideoNotSent:v.default.Succeeded):v.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return d(this,void 0,void 0,function*(){let M=!1;const R={metricsDidReceive(k){k.getRTCStatsReport().forEach(P=>{P.type==="candidate-pair"&&P.state==="succeeded"&&(M=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(k){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${k}`),f.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=k=>{const A=this.originalURLRewriter(k);return A.includes("transport=tcp")?"":A};const O=this.meetingSession.audioVideo;return O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return M})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),O.removeObserver(R),M?f.default.Succeeded:f.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,f.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return d(this,void 0,void 0,function*(){let M=!1;const R={metricsDidReceive(k){k.getRTCStatsReport().forEach(P=>{P.type==="candidate-pair"&&P.state==="succeeded"&&(M=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(k){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${k}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=k=>{const A=this.originalURLRewriter(k);return A.includes("transport=udp")?"":A};const O=this.meetingSession.audioVideo;return O.addObserver(R),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return M})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),O.removeObserver(R),M?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return d(this,void 0,void 0,function*(){let M=!1;const R={audioVideoDidStart:()=>{M=!0}};return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return M})),this.meetingSession.audioVideo.removeObserver(R),M})}stopMeeting(){return d(this,void 0,void 0,function*(){let M=!1;const R={audioVideoDidStop:O=>{M=!0}};return this.meetingSession.audioVideo.addObserver(R),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>d(this,void 0,void 0,function*(){return M})),this.meetingSession.audioVideo.removeObserver(R),M})}executeTimeoutTask(M){return d(this,void 0,void 0,function*(){let R=!1,O=s(class extends n.default{cancel(){this.isCancelled=!0}run(){return d(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield M()){R=!0;break}yield BS.delay(this.waitDurationMs)}})}constructor(P,D){super(P),this.waitDurationMs=D,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new O(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),R})}isAudioConnectionSuccessful(M,R){return M&&R.packetsReceived>0}constructor(M,R,O=new _.default){this.logger=M,this.meetingSession=R,this.configuration=O,this.browserBehavior=new g.default}},"DefaultMeetingReadinessChecker");a.default=T},7683606499:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");a.default=c},542823578:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(f,v,E,_){function T(w){return w instanceof E?w:new E(function(M){M(w)})}return s(T,"adopt"),new(E||(E=Promise))(function(w,M){function R(A){try{k(_.next(A))}catch(P){M(P)}}s(R,"fulfilled");function O(A){try{k(_.throw(A))}catch(P){M(P)}}s(O,"rejected");function k(A){A.done?w(A.value):T(A.value).then(R,O)}s(k,"step"),k((_=_.apply(f,v||[])).next())})},p=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(616382858)),g=p(c(314828250)),l=p(c(5384631890)),r=p(c(8351168186)),n=p(c(8271576690)),e=p(c(4707988254)),t=p(c(1252089397)),i=c(3171772403),o=p(c(1653454410)),u=p(c(8855787924)),h=p(c(8796204466));let S=s(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return d(this,void 0,void 0,function*(){i.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),i.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),i.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const v=new r.default,E=`${v.name()} ${v.majorVersion()} (${v.version()})`;if(this.logger.info(`browser is ${E}`),v.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${v.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!v.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(v.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${v.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!v.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(v){return!!(v&&v.addObserver)}constructor(v,E,_,T){this._eventController=T,this._configuration=v,this._logger=E,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(v,E)),_.eventController||(_.eventController=this.eventController),this.audioVideoController=new m.default(this._configuration,this._logger,new h.default(this._logger),_,new u.default(this._configuration.reconnectTimeoutMs,new l.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=_,this.logger.info(`MeetingFeatures: ${JSON.stringify(v.meetingFeatures)}`);const w=new n.default(this._logger);this.contentShareController=new e.default(w,new m.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new h.default(this._logger),w,new u.default(this._configuration.reconnectTimeoutMs,new l.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new g.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");a.default=S},7584876358:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8981226922));let m=s(class FS{clone(){return new FS(this.videoMaxResolution,this.contentMaxResolution)}constructor(l=p.default.VideoResolutionHD,r=p.default.VideoResolutionFHD){this.videoMaxResolution=l,this.contentMaxResolution=r}},"MeetingFeatures");a.default=m},7136804647:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1091173065)),m=d(c(8981226922)),g=c(840544383),l=d(c(7584876358)),r=d(c(7147499759)),n=d(c(2653083101));let e=s(class{constructor(i,o){var u,h;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new p.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new l.default,i){i=g.toLowerCasePropertyNames(i),i.meeting&&(i=i.meeting),this.meetingId=i.meetingid,this.externalMeetingId=i.externalmeetingid,this.urls=new n.default,this.urls.audioHostURL=i.mediaplacement.audiohosturl,this.urls.signalingURL=i.mediaplacement.signalingurl,this.urls.turnControlURL=i.mediaplacement.turncontrolurl,i.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=i.mediaplacement.eventingestionurl);const S=s((f,v)=>{switch(f){case"None":return m.default.VideoDisabled;case"HD":return m.default.VideoResolutionHD;case"FHD":return m.default.VideoResolutionFHD;case"UHD":return m.default.VideoResolutionUHD;default:return v}},"parseVideoResolution");if(((u=i.meetingfeatures)===null||u===void 0?void 0:u.video)!==void 0||((h=i.meetingfeatures)===null||h===void 0?void 0:h.content)!==void 0){const f=i.meetingfeatures.video===void 0?"HD":i.meetingfeatures.video.maxresolution,v=i.meetingfeatures.content===void 0?"FHD":i.meetingfeatures.content.maxresolution;this.meetingFeatures=new l.default(S(f,m.default.VideoResolutionHD),S(v,m.default.VideoResolutionFHD))}}o&&(o=g.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new r.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");a.default=e},7147499759:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");a.default=c},5446246651:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MeetingSessionLifecycleEvent=void 0;var c;(function(d){d[d.Connecting=0]="Connecting",d[d.Started=1]="Started",d[d.Stopped=2]="Stopped"})(c=a.MeetingSessionLifecycleEvent||(a.MeetingSessionLifecycleEvent={})),a.default=c},7192341248:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MeetingSessionLifecycleEventCondition=void 0;var c;(function(d){d[d.ConnectingNew=0]="ConnectingNew",d[d.ReconnectingExisting=1]="ReconnectingExisting",d[d.StartedNew=2]="StartedNew",d[d.StartedExisting=3]="StartedExisting",d[d.StartedAfterReconnect=4]="StartedAfterReconnect",d[d.StoppedCleanly=5]="StoppedCleanly",d[d.StoppedWithFailure=6]="StoppedWithFailure"})(c=a.MeetingSessionLifecycleEventCondition||(a.MeetingSessionLifecycleEventCondition={})),a.default=c},3777990285:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(5391134031),m=d(c(4882394368));let g=s(class wr{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:case m.default.VideoCallAtSourceCapacity:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.ICEGatheringTimeoutWorkaround:case m.default.ConnectionHealthReconnect:case m.default.RealtimeApiFailed:case m.default.TaskFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case m.default.Left:case m.default.AudioJoinedFromAnotherDevice:case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.MeetingEnded:case m.default.AudioDisconnected:case m.default.TURNCredentialsForbidden:case m.default.SignalingBadRequest:case m.default.SignalingRequestFailed:case m.default.VideoCallAtSourceCapacity:case m.default.RealtimeApiFailed:case m.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.ICEGatheringTimeoutWorkaround:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.RealtimeApiFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case m.default.OK:return"Everything is OK so far.";case m.default.Left:return"The attendee left the meeting.";case m.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case m.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case m.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case m.default.MeetingEnded:return"The meeting ended.";case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:return"The audio connection failed.";case m.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case m.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:return"The signaling connection failed.";case m.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case m.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case m.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case m.default.TaskFailed:return"The connection failed. See the error message for more details.";case m.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case m.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case m.default.NoAttendeePresent:return"The attendee was not present.";case m.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case m.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case m.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case m.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const r=this._statusCode;throw new Error(`Unhandled case: ${r}`)}}}static fromSignalFrame(r){return r.error&&r.error.status?this.fromSignalingStatus(r.error.status):r.type===p.SdkSignalFrame.Type.AUDIO_STATUS?r.audioStatus?this.fromAudioStatus(r.audioStatus.audioStatus):new wr(m.default.SignalingRequestFailed):r.type===p.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new wr(m.default.AudioVideoWasRemovedFromPrimaryMeeting):new wr(m.default.OK)}static fromAudioStatus(r){switch(r){case 200:return new wr(m.default.OK);case 301:return new wr(m.default.AudioJoinedFromAnotherDevice);case 302:return new wr(m.default.AudioDisconnectAudio);case 403:return new wr(m.default.AudioAuthenticationRejected);case 409:return new wr(m.default.AudioCallAtCapacity);case 410:return new wr(m.default.MeetingEnded);case 411:return new wr(m.default.AudioAttendeeRemoved);case 500:return new wr(m.default.AudioInternalServerError);case 503:return new wr(m.default.AudioServiceUnavailable);default:switch(Math.floor(r/100)){case 2:return new wr(m.default.OK);default:return new wr(m.default.AudioDisconnected)}}}static fromSignalingStatus(r){switch(r){case 206:return new wr(m.default.VideoCallSwitchToViewOnly);case 509:return new wr(m.default.VideoCallAtSourceCapacity);case 403:return new wr(m.default.AudioAuthenticationRejected);case 409:return new wr(m.default.AudioCallAtCapacity);default:switch(Math.floor(r/100)){case 2:return new wr(m.default.OK);case 4:return new wr(m.default.SignalingBadRequest);case 5:return new wr(m.default.SignalingInternalServerError);default:return new wr(m.default.SignalingRequestFailed)}}}constructor(r){this._statusCode=r}},"MeetingSessionStatus");a.default=g},4882394368:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MeetingSessionStatusCode=void 0;var c;(function(d){d[d.OK=0]="OK",d[d.Left=1]="Left",d[d.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",d[d.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",d[d.AudioCallAtCapacity=4]="AudioCallAtCapacity",d[d.MeetingEnded=5]="MeetingEnded",d[d.AudioInternalServerError=6]="AudioInternalServerError",d[d.AudioServiceUnavailable=7]="AudioServiceUnavailable",d[d.AudioDisconnected=8]="AudioDisconnected",d[d.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",d[d.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",d[d.SignalingBadRequest=11]="SignalingBadRequest",d[d.SignalingInternalServerError=12]="SignalingInternalServerError",d[d.SignalingRequestFailed=13]="SignalingRequestFailed",d[d.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",d[d.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",d[d.RealtimeApiFailed=16]="RealtimeApiFailed",d[d.TaskFailed=17]="TaskFailed",d[d.IncompatibleSDP=18]="IncompatibleSDP",d[d.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",d[d.NoAttendeePresent=20]="NoAttendeePresent",d[d.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",d[d.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",d[d.AudioVideoDisconnectedWhilePromoted=23]="AudioVideoDisconnectedWhilePromoted",d[d.AudioDisconnectAudio=24]="AudioDisconnectAudio"})(c=a.MeetingSessionStatusCode||(a.MeetingSessionStatusCode={})),a.default=c},7999114886:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");a.default=c},2653083101:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(p){this._audioHostURL=p}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(p){this._signalingURL=p}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(p){this._turnControlURL=p}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(p){this._eventIngestionURL=p}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=p=>p}},"MeetingSessionURLs");a.default=c},1880578541:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class US{equal(p){return this.remoteVideoAvailable===p.remoteVideoAvailable&&this.canStartLocalVideo===p.canStartLocalVideo}clone(){const p=new US;return p.remoteVideoAvailable=this.remoteVideoAvailable,p.canStartLocalVideo=this.canStartLocalVideo,p}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");a.default=c},1721682483:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(p,m,g){this.type=p,this.headers=m,this.payload=g}},"Message");a.default=c},9249618790:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(S,f,v,E){function _(T){return T instanceof v?T:new v(function(w){w(T)})}return s(_,"adopt"),new(v||(v=Promise))(function(T,w){function M(k){try{O(E.next(k))}catch(A){w(A)}}s(M,"fulfilled");function R(k){try{O(E.throw(k))}catch(A){w(A)}}s(R,"rejected");function O(k){k.done?T(k.value):_(k.value).then(M,R)}s(O,"step"),O((E=E.apply(S,f||[])).next())})},p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(7135774191),g=p(c(5384631890)),l=p(c(1252089397)),r=p(c(1721682483)),n=p(c(8855787924)),e=p(c(3741513515)),t=p(c(7822521824)),i=p(c(8796204466)),o=p(c(2686893898)),u=p(c(6747155167));let h=s(class{addObserver(f){this.logger.info("adding messaging observer"),this.observerQueue.add(f)}removeObserver(f){this.logger.info("removing messaging observer"),this.observerQueue.delete(f)}start(){return d(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),l.default.removeLogger(this.logger))}forEachObserver(f){for(const v of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(v)&&f(v)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",f=>{this.receiveMessageHandler(f.data)}),this.webSocket.addEventListener("close",f=>{this.closeEventHandler(f)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(f){return d(this,void 0,void 0,function*(){return yield this.startConnectingInternal(f),yield new Promise((v,E)=>{this.bootstrapResolved=v,this.bootstrapRejected=E})})}startConnectingInternal(f){var v;return d(this,void 0,void 0,function*(){let E=this.configuration.endpointUrl;if(f||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),f||E===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const T=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((v=T.Endpoint)===null||v===void 0)&&v.Url?E=T.Endpoint.Url:E=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else E=(yield this.configuration.chimeClient.send(new m.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${E}`)}catch(T){this.logger.error(`Messaging Session failed to resolve endpoint: ${T}`);const w=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(w);return}const _=yield this.prepareWebSocketUrl(E);this.logger.info(`opening connection to ${_}`),f||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(_,[],!0),this.forEachObserver(T=>{T.messagingSessionDidStartConnecting&&T.messagingSessionDidStartConnecting(f)}),this.setUpEventListeners()})}prepareWebSocketUrl(f){return d(this,void 0,void 0,function*(){const v=new Map;return v.set("userArn",[this.configuration.userArn]),v.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===u.default.Connect&&v.set("prefetch-on",[u.default.Connect]),this.configuration.prefetchSortBy&&v.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",f,"/connect","",v)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(f){try{const v=JSON.parse(f),E=v.Headers["x-amz-chime-event-type"],_=new r.default(E,v.Headers,v.Payload||null);if(!this.isSessionEstablished&&E==="SESSION_ESTABLISHED"){this.forEachObserver(w=>{w.messagingSessionDidStart&&w.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const T=this.preBootstrapMessages.length;for(let w=0;w<T;w++){const M=this.preBootstrapMessages.shift();this.forEachObserver(R=>{this.sendMessageToObserver(R,M)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(_);return}this.forEachObserver(T=>{this.sendMessageToObserver(T,_)})}catch(v){this.logger.error(`Messaging parsing failed: ${v}`)}}sendMessageToObserver(f,v){f.messagingSessionDidReceiveMessage&&f.messagingSessionDidReceiveMessage(v)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>d(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(f){this.logger.info(`WebSocket close: ${f.code} ${f.reason}`),f.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(f.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(v=>{v.messagingSessionDidStop&&v.messagingSessionDidStop(f)}):this.bootstrapRejected(f))}canReconnect(f){return f===1001||f===1006||f>=1011&&f<=1014||f>4e3&&f!==4002&&f!==4003&&f!==4401}constructor(f,v,E,_,T){this.configuration=f,this.logger=v,this.webSocket=E,this.reconnectController=_,this.sigV4=T,this.observerQueue=new Set,this.webSocket||(this.webSocket=new i.default(this.logger)),this.reconnectController||(this.reconnectController=new n.default(f.reconnectTimeoutMs,new g.default(f.reconnectFixedWaitMs,f.reconnectShortBackoffMs,f.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),l.default.addLogger(this.logger),l.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");a.default=h},9309957401:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(840544383);let p=s(class{generateSessionId(){const g=new Uint32Array(1);return d.getRandomValues(g),g[0].toString()}constructor(g,l,r,n){this.userArn=g,this.messagingSessionId=l,this.endpointUrl=r,this.chimeClient=n,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");a.default=p},6747155167:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.Connect="connect"})(c||(c={})),a.default=c},9468168383:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.Unread="unread",d.LastMessageTimestamp="last-message-timestamp"})(c||(c={})),a.default=c},4599834734:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(3560634922));let m=s(class ka{id(){return this._id}base(){return this._id?this._id.split(ka.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const l=this._id.split(ka.MODALITY_SEPARATOR);return l.length===2?l[1]:""}hasModality(l){return l!==""&&this.modality()===l}withModality(l){const r=new ka(this.base()+ka.MODALITY_SEPARATOR+l);return l===""||this.base()===""||new ka(r._id).modality()!==l?new ka(this.base()):r}constructor(l){this._id=l}},"DefaultModality");a.default=m,m.MODALITY_SEPARATOR=p.default.Modality[0],m.MODALITY_CONTENT=p.default.Modality.substr(1)},2311029370:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(3741513515)),m=d(c(9013967876)),g=d(c(426218501)),l=c(5391134031),r=c(903520651);let n=s(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)p.default.nextTick(()=>{this.observerQueue.has(i)&&t(i)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(i=>{r.Maybe.of(i.didMissPongs).map(o=>o.bind(i)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=l.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=l.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const i=l.SdkPingPongFrame.create();i.pingId=t,i.type=l.SdkPingPongType.PONG,this.signalingClient.pingPong(i)}handleSignalingClientEvent(t){switch(t.type){case g.default.WebSocketOpen:this.startPingInterval();break;case g.default.WebSocketFailed:case g.default.WebSocketError:this.logger.warn(`stopped pinging (${g.default[t.type]})`),this.stopPingInterval();break;case g.default.WebSocketClosing:case g.default.WebSocketClosed:this.logger.info(`stopped pinging (${g.default[t.type]})`),this.stopPingInterval();break;case g.default.ReceivedSignalFrame:if(t.message.type!==l.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===l.SdkPingPongType.PONG){const i=t.message.pingPong.pingId;if(i!==this.pingId){this.logger.warn(`unexpected ping id ${i} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${i} with timestamp ${o}`);const h=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-h/2),f=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${f}ms from ping-pong time=${h}ms`),this.forEachObserver(v=>{r.Maybe.of(v.didReceivePong).map(E=>E.bind(v)(i,f,h))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,i,o){this.signalingClient=t,this.intervalMs=i,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new m.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");a.default=n},5403024322:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(246495600)),m=d(c(6045987188)),g=d(c(2450851234));let l=s(class{realtimeSetLocalAttendeeId(n,e){this.state.localAttendeeId=n,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(n,e,t,i,o){try{e&&(this.state.attendeeIdToExternalUserId[n]=t);for(const u of this.state.attendeeIdChangesCallbacks)u(n,e,t,i,o)}catch(u){this.onError(u)}}realtimeSubscribeToAttendeeIdPresence(n){try{this.state.attendeeIdChangesCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(n){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(n);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(n){try{if(this.state.canUnmute===n)return;this.state.canUnmute=n;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(n)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(n){try{this.state.setCanUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(n){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!0)}catch(n){this.onError(n)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!1);return!0}catch(n){return this.onError(n),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(n){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(n){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(n,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(n)||(this.state.volumeIndicatorCallbacks[n]=[]),this.state.volumeIndicatorCallbacks[n].push(e),this.sendVolumeIndicatorChange(n,!0,!0,!0,this.state.attendeeIdToExternalUserId[n])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(n,e){if(this.state.volumeIndicatorCallbacks[n])if(e){const i=this.state.volumeIndicatorCallbacks[n].indexOf(e);i>=0&&this.state.volumeIndicatorCallbacks[n].splice(i,1)}else delete this.state.volumeIndicatorCallbacks[n]}realtimeUpdateVolumeIndicator(n,e,t,i,o){try{t=this.applyLocalMuteOverride(n,t);const u=this.getVolumeIndicatorState(n);let h=!1,S=!1,f=!1;t!==null&&u.muted!==t&&(u.muted=t,S=!0,u.muted&&u.volume!==0&&(u.volume=0,h=!0)),!u.muted&&e!==null&&(u.volume!==e&&(u.volume=e,h=!0),u.muted===null&&(u.muted=!1,S=!0)),i!==null&&u.signalStrength!==i&&(u.signalStrength=i,f=!0),this.sendVolumeIndicatorChange(n,h,S,f,o)}catch(u){this.onError(u)}}realtimeSubscribeToLocalSignalStrengthChange(n){try{if(this.state.localSignalStrengthChangeCallbacks.push(n),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(n){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(n);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(n){try{this.state.sendDataMessageCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(n){try{const e=this.state.sendDataMessageCallbacks.indexOf(n);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(n,e,t){try{for(const i of this.state.sendDataMessageCallbacks)i(n,e,t)}catch(i){this.onError(i)}}realtimeSubscribeToReceiveDataMessage(n,e){try{this.state.receiveDataMessageCallbacks.has(n)?this.state.receiveDataMessageCallbacks.get(n).push(e):this.state.receiveDataMessageCallbacks.set(n,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(n){try{this.state.receiveDataMessageCallbacks.delete(n)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(n){try{if(this.state.receiveDataMessageCallbacks.has(n.topic))for(const e of this.state.receiveDataMessageCallbacks.get(n.topic))e(n)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(n){try{this.state.fatalErrorCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(n){try{const e=this.state.fatalErrorCallbacks.indexOf(n);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(n){n?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(n,e){const t=this.state.localAttendeeId,i=this.state.muted;return n!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:i}sendVolumeIndicatorChange(n,e,t,i,o){if(this.sendLocalSignalStrengthChange(n,i),!this.state.volumeIndicatorCallbacks.hasOwnProperty(n))return;const u=this.getVolumeIndicatorState(n),h=new g.default;if(e&&(h.volume=u.volume),t&&(h.muted=u.muted),i&&(h.signalStrength=u.signalStrength),!this.stateIsEmpty(h))for(const S of this.state.volumeIndicatorCallbacks[n])S(n,h.volume,h.muted,h.signalStrength,o)}sendLocalSignalStrengthChange(n,e){if(!e||n!==this.state.localAttendeeId)return;const i=this.getVolumeIndicatorState(n).signalStrength;if(i!==null)for(const o of this.state.localSignalStrengthChangeCallbacks)o(i)}getVolumeIndicatorState(n){return this.state.volumeIndicatorState.hasOwnProperty(n)||(this.state.volumeIndicatorState[n]=new g.default),this.state.volumeIndicatorState[n]}stateIsEmpty(n){return n.volume===null&&n.muted===null&&n.signalStrength===null}onError(n){try{for(const e of this.state.fatalErrorCallbacks)e(n)}catch(e){try{console.error(n),console.error(e)}catch{}}}constructor(n,e){this.mediaStreamBroker=n,this.state=new m.default,this._transcriptionController=e||new p.default(this)}},"DefaultRealtimeController");a.default=l},4412582314:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");a.default=c},6045987188:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");a.default=c},2450851234:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");a.default=c},8855787924:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6393942734));let m=s(class VS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(l){this._isFirstConnection=l,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(l,r){const n=this.shouldReconnect&&!this.hasPastReconnectDeadline();return n&&(this.backoffCancel=r,this.backoffTimer=new p.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,l()})),n}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new VS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(l){this.lastActiveTimestampMs=l}constructor(l,r){this.reconnectTimeoutMs=l,this.backoffPolicy=r,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");a.default=m},1510239283:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class xo{static initializeWorker(){xo.log("Initializing RedundantAudioEncoder");const p=new xo;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?p.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?p.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&p.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(p.setupSenderTransform(m.data.send.readable,m.data.send.writable),p.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="PassthroughTransform"?(p.setupPassthroughTransform(m.data.send.readable,m.data.send.writable),p.setupPassthroughTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?p.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?p.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?p.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?p.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&p.setRedundancyEnabled(!1)}}static log(p){xo.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${p}`})}static getNumRedundantEncodingsForPacketLoss(p){let m=0,g=!1;return p<=8?m=0:p<=18?m=1:p<=75?m=2:(m=0,g=!0),[m,g]}setupPassthroughTransform(p,m){xo.log("Setting up passthrough transform"),p.pipeTo(m)}setupSenderTransform(p,m){xo.log("Setting up sender RED transform");const g=new TransformStream({transform:this.senderTransform.bind(this)});p.pipeThrough(g).pipeTo(m)}setupReceiverTransform(p,m){xo.log("Setting up receiver RED transform");const g=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});p.pipeThrough(g).pipeTo(m)}setRedPayloadType(p){this.redPayloadType=p,xo.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(p){this.opusPayloadType=p,xo.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(p){this.numRedundantEncodings=p,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),xo.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(p){this.redundancyEnabled=p,xo.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(p,m){p.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(p)}senderTransform(p,m){if(p.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}const l=this.getPrimaryPayload(p.timestamp,p.data);if(!l){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}const r=this.encode(p.timestamp,l);if(!r){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}p.data=r,this.enqueueAudioFrameIfPayloadSizeIsValid(p,m)}getPrimaryPayload(p,m){const g=this.splitEncodings(p,m);return!g||g.length<1?null:g[g.length-1].payload}splitEncodings(p,m){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const r=new DataView(m);let n=r.byteLength,e=0,t=0,i=0,o=0,u=!1;const h=new Array,S=new Array,f=new Array;for(;n>0;)if(u=(r.getUint8(o)&128)===0,u){if((r.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=r.byteLength))return null;i=r.byteLength-e;break}else{if(n<this.redHeaderSizeBytes)return null;const M=((r.getUint8(o+2)&3)<<8)+r.getUint8(o+3);S.push(M);const R=r.getUint16(o+1)>>2,O=p-R;f.push(O),e+=M+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,n-=this.redHeaderSizeBytes}if(!u)return null;let v=t;for(let M=0;M<f.length;M++){const R=new ArrayBuffer(S[M]);new Uint8Array(R).set(new Uint8Array(r.buffer,v,S[M]),0);const k={timestamp:f[M],payload:R,isRedundant:!0};g&&(k.hasFec=this.opusPacketHasFec(new DataView(R),R.byteLength)),h.push(k),v+=S[M]}const E=r.byteLength-i,_=new ArrayBuffer(i);new Uint8Array(_).set(new Uint8Array(r.buffer,E,i),0);const w={timestamp:p,payload:_,isRedundant:!1,seq:l};return g&&(w.hasFec=this.opusPacketHasFec(new DataView(_),_.byteLength)),h.push(w),h}encode(p,m){const g=m.byteLength;if(g===0||g>=this.maxRedPacketSizeBytes||g>=this.maxAudioPayloadSizeBytes)return null;const l=this.numRedundantEncodings;let r=this.redLastHeaderSizeBytes,n=g,e=this.maxAudioPayloadSizeBytes-g-r;const t=new Array,i=new Array;if(this.redundancyEnabled){let f=this.uint32WrapAround(p-this.redPacketizationTime*this.redPacketDistance);for(let v=0;v<l&&!(this.uint32WrapAround(p-f)>=this.maxRedTimestampOffset);v++){let E=f,_=this.encodingHistory.find(T=>T.timestamp===E);if(_||(E=this.uint32WrapAround(f-this.redPacketizationTime),_=this.encodingHistory.find(T=>T.timestamp===E)),_){const T=_.payload.byteLength;if(e<this.redHeaderSizeBytes+T)break;e-=this.redHeaderSizeBytes+T,r+=this.redHeaderSizeBytes,n+=T,t.unshift(_.timestamp),i.unshift(_.payload)}f-=this.redPacketizationTime*this.redPacketDistance,f=this.uint32WrapAround(f)}}const o=new ArrayBuffer(r+n),u=new DataView(o);let h=0;for(let f=0;f<t.length;f++){const v=p-t[f];u.setUint8(h,this.opusPayloadType|128),u.setUint16(h+1,v<<2|i[f].byteLength>>8),u.setUint8(h+3,i[f].byteLength&255),h+=this.redHeaderSizeBytes}u.setUint8(h,this.opusPayloadType),h+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let f=0;f<i.length;f++)S.set(new Uint8Array(i[f]),h),h+=i[f].byteLength;return S.set(new Uint8Array(m),h),h+=m.byteLength,h!==r+n?null:(this.updateEncodingHistory(p,m),o)}updateEncodingHistory(p,m){for(const l of this.encodingHistory){const r=this.redPacketizationTime*this.redMaxRecoveryDistance;if(p-l.timestamp>=r)this.encodingHistory.shift();else break}const g=new DataView(m);(this.opusPacketIsCeltOnly(g)||this.opusPacketHasVoiceActivity(g,g.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:p,payload:m}))}initializePacketLogs(){const p=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(p),index:0,windowSize:p},this.redRecoveryLog={window:new Array(p),index:0,windowSize:p},this.fecRecoveryLog={window:new Array(p),index:0,windowSize:p},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(p,m){const g=p.getMetadata();if(g.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}const l=this.splitEncodings(p.timestamp,p.data,!0,g.sequenceNumber);if(!l){this.enqueueAudioFrameIfPayloadSizeIsValid(p,m);return}for(let r=l.length-1;r>=0;r--)this.updateLossStats(l[r])&&(this.updateRedStats(l[r]),this.updateFecStats(l[r]));this.maybeReportLossStats(l[l.length-1].timestamp,g.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(p,m)}updateLossStats(p){if(p.isRedundant)return!0;const m=p.timestamp,g=p.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=g,this.addTimestamp(this.primaryPacketLog,m),!0;const l=this.int16(g-this.newestSequenceNumber);return l<-this.maxOutOfOrderPacketDistance?!1:(l<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):l>1&&(this.totalAudioPacketsLost+=l-1),l>0&&(this.totalAudioPacketsExpected+=l,this.newestSequenceNumber=p.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(p){if(!p.isRedundant||this.totalAudioPacketsLost===0)return;const m=p.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(p){if(!p.hasFec||this.totalAudioPacketsLost===0)return;const m=p.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(p,m){p-this.lastLossReportTimestamp<this.lossReportInterval||(xo.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=p)}addTimestamp(p,m){p.window[p.index]=m,p.index=(p.index+1)%p.windowSize}hasTimestamp(p,m){return!!p.window.find(l=>l===m)}removeTimestamp(p,m){const g=p.window.indexOf(m);return g>=0?(p.window[g]=void 0,!0):!1}removeFromRecoveryWindows(p){let m=this.removeTimestamp(this.redRecoveryLog,p);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,p),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(p){let g=p;return p>=4294967296?g=p-4294967296:p<0&&(g=4294967296+p),g}int16(p){return p<<16>>16}opusPacketIsCeltOnly(p){return!!(p.getUint8(0)&128)}opusPacketGetSamplesPerFrame(p,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let g,l;return this.opusPacketIsCeltOnly(p)?(l=p.getUint8(0)>>3&3,g=(m<<l)/400):(p.getUint8(0)&96)===96?g=p.getUint8(0)&8?m/50:m/100:(l=p.getUint8(0)>>3&3,l===3?g=m*60/1e3:g=(m<<l)/100),g}opusNumSilkFrames(p){let m=this.opusPacketGetSamplesPerFrame(p,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(p){return p.getUint8(0)&4?2:1}opusParseSize(p,m,g,l){return g<1?(l[0]=-1,-1):p.getUint8(m)<252?(l[0]=p.getUint8(m),1):g<2?(l[0]=-1,-1):(l[0]=4*p.getUint8(m+1)+p.getUint8(m),2)}opusPacketParseImpl(p,m,g,l,r,n,e,t){if(!n||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let i,o,u=0,h=!1;const S=p.getUint8(0);l&&(l[0]=S);let f=m-1,v=1,E=f;switch(S&3){case 0:i=1;break;case 1:if(i=2,h=!0,!g){if(f&1)return this.OPUS_INVALID_PACKET;E=f/2,n[0][0]=E}break;case 2:if(i=2,o=this.opusParseSize(p,v,f,n[0]),f-=o,n[0][0]<0||n[0][0]>f)return this.OPUS_INVALID_PACKET;v+=o,E=f-n[0][0];break;default:if(f<1)return this.OPUS_INVALID_PACKET;const _=p.getUint8(v++);if(--f,i=_&63,i<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(p,48e3)*i>5760)return this.OPUS_INVALID_PACKET;if(_&64){let w,M;do{if(f<=0)return this.OPUS_INVALID_PACKET;w=p.getUint8(v++),--f,M=w===255?254:w,f-=M,u+=M}while(w===255)}if(f<0)return this.OPUS_INVALID_PACKET;if(h=!(_&128),h){if(!g){if(E=Math.trunc(f/i),E*i!==f)return this.OPUS_INVALID_PACKET;for(let w=0;w<i-1;++w)n[w][0]=E}}else{E=f;for(let w=0;w<i-1;++w){if(o=this.opusParseSize(p,v,f,n[w]),f-=o,n[w][0]<0||n[w][0]>f)return this.OPUS_INVALID_PACKET;v+=o,E-=o+n[w][0]}if(E<0)return this.OPUS_INVALID_PACKET}}if(g){if(o=this.opusParseSize(p,v,f,n[i-1]),f-=o,n[i-1][0]<0||n[i-1][0]>f)return this.OPUS_INVALID_PACKET;if(v+=o,h){if(n[i-1][0]*i>f)return this.OPUS_INVALID_PACKET;for(let _=0;_<i-1;++_)n[_][0]=n[i-1][0]}else if(!(o+n[i-1][0]<=E))return this.OPUS_INVALID_PACKET}else{if(E>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;n[i-1][0]=E}e&&(e[0]=v);for(let _=0;_<i;++_)r&&(r[_][0]=v),v+=n[_][0];return t&&(t[0]=v+u),i}opusPacketParse(p,m,g,l,r,n){return this.opusPacketParseImpl(p,m,!1,g,l,r,n,null)}opusPacketHasVoiceActivity(p,m){if(!p||m<=0)return 0;if(this.opusPacketIsCeltOnly(p))return-1;const g=this.opusNumSilkFrames(p);if(g===0)return-1;const l=new Array(this.OPUS_MAX_OPUS_FRAMES),r=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)l[e]=[void 0],r[e]=[void 0];const n=this.opusPacketParse(p,m,null,l,r,null);if(n<0)return-1;for(let e=0;e<n;++e){if(r[e][0]<1)continue;if(p.getUint8(l[e][0])>>8-g||this.opusPacketGetNumChannels(p)===2&&p.getUint8(l[e][0])<<g+1>>8-g)return 1}return 0}opusPacketHasFec(p,m){if(!p||m<=0||this.opusPacketIsCeltOnly(p))return!1;const g=new Array(this.OPUS_MAX_OPUS_FRAMES),l=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)g[t]=[void 0],l[t]=[void 0];if(this.opusPacketParse(p,m,null,g,l,null)<0||l[0][0]<=1)return!1;const n=this.opusNumSilkFrames(p);if(n===0)return!1;const e=this.opusPacketGetNumChannels(p);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(p.getUint8(g[0][0])&128>>(t+1)*(n+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");a.default=c,c.shouldLog=!1,c.shouldReportStats=!1},3440292739:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const c=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;a.default=c},3741513515:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6393942734));let m=s(class extends p.default{static nextTick(l){setTimeout(l,0)}constructor(){super(0)}},"AsyncScheduler");a.default=m},9013967876:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{start(p){this.stop(),this.timer=setInterval(p,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(p){this.intervalMs=p}},"IntervalScheduler");a.default=c},6393942734:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{start(p){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),p()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(p){this.timeoutMs=p,this.timer=null}},"TimeoutScheduler");a.default=c},3430379175:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(9615283928)),m=d(c(3364495052)),g=d(c(4883941895));let l=s(class fn{clone(){return new fn(this.sdp)}static isRTPCandidate(n){const e=/candidate[:](\S+) (\d+)/g.exec(n);return!(e===null||e[2]!=="1")}static linesToSDP(n){return new fn(n.join(fn.CRLF))}static candidateTypeFromString(n){switch(n){case p.default.Host:return p.default.Host;case p.default.ServerReflexive:return p.default.ServerReflexive;case p.default.PeerReflexive:return p.default.PeerReflexive;case p.default.Relay:return p.default.Relay}return null}static candidateType(n){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(n);return e===null?null:fn.candidateTypeFromString(e[1])}static mediaType(n){const e=/m=(audio|video)/g.exec(n);if(e!==null)return e[1]}static mid(n){if(n.includes("a=mid:"))return n.replace(/^(a=mid:)/,"")}static direction(n){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(n);if(e!==null)return e[1]}static splitLines(n){return n.trim().split(`
`).map(e=>e.trim())}static splitSections(n){return n.split(`
m=`).map((t,i)=>(i>0?"m="+t:t).trim()+fn.CRLF)}static findActiveCameraSection(n){let e=0,t=!1;for(const i of n){if(/^m=video/.test(i)&&(i.indexOf("sendrecv")>-1||i.indexOf("sendonly")===-1&&i.indexOf("recvonly")===-1&&i.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(n){return/^a=ssrc-group:FID\s(.+)/.exec(n)[1]}static matchPrefix(n,e){return fn.splitLines(n).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(fn.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(n){return fn.linesToSDP(this.lines().filter(e=>fn.candidateType(e)!==n))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(p.default.ServerReflexive)}withAudioMaxAverageBitrate(n){if(!n)return this.clone();n=Math.trunc(Math.min(Math.max(n,fn.rfc7587LowestBitrate),fn.rfc7587HighestBitrate));const e=this.lines(),t=fn.findOpusFmtpAttributes(e),i=fn.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${n}`]);return fn.linesToSDP(i)}withStereoAudio(){const n=this.lines(),e=fn.findOpusFmtpAttributes(n),t=fn.updateOpusFmtpAttributes(n,e,["stereo=1","sprop-stereo=1"]);return fn.linesToSDP(t)}static findOpusFmtpAttributes(n){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const i=[];for(const o of n)if(o.startsWith("m=audio")&&(i.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const u=e.exec(o);u!==null&&(i[i.length-1]=`a=fmtp:${u[1]} `)}return i}static updateOpusFmtpAttributes(n,e,t){const i=[];let o=0,u=null;for(const h of n)if(h.startsWith("m=audio")&&(u=e[o],o++),h.startsWith("m=video")&&(u=null),u&&h.startsWith(u)){const S=h.slice(u.length).split(";"),f=[];for(const v of S)t.findIndex(_=>_.startsWith(v.split("=")[0]))<0&&f.push(v);for(const v of t)f.push(v);i.push(u+f.join(";"))}else i.push(h);return i}withUnifiedPlanFormat(){let n=this.sdp;return n.includes("mozilla")?this.clone():(n=n.replace("o=-","o=mozilla-chrome"),new fn(n))}getUniqueRtpHeaderExtensionId(n){const e=[];for(const i of n)if(/^a=extmap:/.test(i.trim())){const u=+i.split("a=extmap:")[1].split(" ")[0];e.includes(u)||e.push(u)}e.sort((i,o)=>i-o);let t=0;for(const i of e){if(i-t>1)return t+1;t=i}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,fn.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,fn.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const n=fn.splitLines(this.sdp).filter(e=>!e.includes(fn.dependencyDescriptorRtpHeaderExtensionUrl));return new fn(n.join(fn.CRLF)+fn.CRLF)}withRtpHeaderExtension(n,e){const t=n?n.getRtpHeaderExtensionId(e):-1,i=t===-1?this.getUniqueRtpHeaderExtensionId(fn.splitLines(this.sdp)):t,o=fn.splitSections(this.sdp),u=[];for(let S of o){if(/^m=video/.test(S)&&fn.getRtpHeaderExtensionIdInSection(S,e)===-1){const f=fn.splitLines(S),v=[];if(i===-1||this.hasRtpHeaderExtensionId(i)){u.push(S);continue}for(const E of f)if(v.push(E),/^a=sendrecv/.test(E.trim())){const _="a=extmap:"+i+" "+e;v.push(_)}S=v.join(fn.CRLF)+fn.CRLF}else if(t!==-1&&/^m=video/.test(S)&&fn.getRtpHeaderExtensionIdInSection(S,e)!==t){const f=fn.splitLines(S),v=[];for(const E of f){if(/^a=extmap:/.test(E.trim())&&E.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const T="a=extmap:"+t+" "+e;v.push(T)}continue}v.push(E)}S=v.join(fn.CRLF)+fn.CRLF}u.push(S)}const h=u.join("");return new fn(h)}ssrcForVideoSendingSection(){const n=this.sdp,e=fn.splitSections(n);if(e.length<2)return"";const t=fn.findActiveCameraSection(e);if(t===-1)return"";const i=fn.matchPrefix(e[t],"a=ssrc-group:FID ");if(i.length<1)return"";const o=fn.extractSSRCsFromFIDGroupLine(i[0]),[u]=o.split(" ").map(h=>parseInt(h,10));return u.toString()}videoSendSectionHasDifferentSSRC(n){const e=this.ssrcForVideoSendingSection(),t=n.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const i=parseInt(e,10),o=parseInt(t,10);return i!==o}removeH264SupportFromSendSection(){const n=this.sdp,e=fn.splitSections(n),t=fn.findActiveCameraSection(e);if(t===-1)return new fn(this.sdp);const i=e[t],o=fn.splitLines(i),u=[],h=new Map;o.forEach(E=>{if(/^a=rtpmap:/.test(E)){const _=/^a=rtpmap:([0-9]+)\s/.exec(E);_&&E.toLowerCase().includes("h264")&&u.push(parseInt(_[1],10))}if(/^a=fmtp:/.test(E)){const _=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(E);if(_&&_.length===3){const T=parseInt(_[1],10),w=parseInt(_[2],10);h.has(w)?h.get(w).push(T):h.set(w,[T])}}});const S=new Set;for(const E of u){S.add(E);const _=h.get(E);if(_)for(const T of _)S.add(T)}if(u.length>0){const E=o[0].split(" ");o[0]=E.filter(_=>!S.has(parseInt(_))).join(" ")}const f=o.filter(E=>{if(!E.includes("rtpmap")&&!E.includes("rtcp-fb")&&!E.includes("fmtp"))return!0;for(const _ of S)if(E.includes(_.toString()))return!1;return!0});e[t]=f.join(fn.CRLF)+fn.CRLF;const v=e.join("");return new fn(v)}mediaSections(){const n=fn.splitSections(this.sdp);if(n.length<2)return[];const e=[];for(let t=1;t<n.length;t++){const i=new m.default,o=fn.splitLines(n[t]);for(const u of o){const h=fn.mediaType(u);if(h!==void 0){i.mediaType=h;continue}const S=fn.direction(u);if(S!==void 0){i.direction=S;continue}const f=fn.mid(u);if(f!==void 0){i.mid=f;continue}}e.push(i)}return e}static getRtpHeaderExtensionIdInSection(n,e){const t=fn.splitLines(n);for(const i of t)if(/^a=extmap:/.test(i.trim())){const o=i.split("a=extmap:")[1].split(" "),u=+o[0];if(o[1]===e)return u}return-1}getRtpHeaderExtensionId(n){const e=fn.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const i=fn.getRtpHeaderExtensionIdInSection(t,n);if(i!==-1)return i}return-1}hasRtpHeaderExtensionId(n){const e=fn.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===n)return!0;return!1}withVideoSendCodecPreferences(n){const e=this.sdp,t=fn.splitSections(e),i=fn.findActiveCameraSection(t);if(i===-1)return new fn(this.sdp);t[i]=this.sectionWithCodecPreferences(t[i],n);const o=t.join("");return new fn(o)}sectionWithCodecPreferences(n,e){const t=new Map,i=fn.splitLines(n);i.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const f=/^a=rtpmap:(\d+)\s/.exec(S);if(!f)return;const v=f[1];for(const E of e){if(!S.includes(`${E.codecName}/${E.codecCapability.clockRate}`))continue;let _=!1;if(E.codecCapability.sdpFmtpLine!==void 0){let T=!1;for(const w of i){if(E.fmtpLineMatches(w,parseInt(v))){_=!0;break}T||(T=w.startsWith(`a=fmtp:${v} profile-id=`))}E.equals(g.default.vp9Profile0())&&!T&&(_=!0)}else _=!0;if(_){t.set(v,E);break}}});const o=new Set(t.keys()),u=i[0].split(" ").filter(S=>!o.has(S)),h=Array.from(t.entries()).sort((S,f)=>{let[v,E]=S,[_,T]=f;const w=e.indexOf(E),M=e.indexOf(T);return w-M}).map(S=>{let[f,v]=S;return f});return u.splice(3,0,...h),i[0]=u.join(" "),i.join(fn.CRLF)+fn.CRLF}highestPriorityVideoSendCodec(){const n=this.prioritizedSendVideoCodecCapabilities();return n.length>0?n[0]:void 0}prioritizedSendVideoCodecCapabilities(){const n=this.sdp,e=fn.splitSections(n),t=fn.findActiveCameraSection(e);if(t===-1)return[];const i=fn.splitLines(e[t]),o=i[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(i,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(n,e){let t,i,o;for(const u of n){const h=/^a=rtpmap:([0-9]+)\s/.exec(u);if(h&&h[1]===e){const f=u.split(" ")[1].split("/");f.length>=2&&(t=f[0],i=f[1])}u.startsWith(`a=fmtp:${e} `)&&(o=u.split(" ")[1])}if(t!==void 0)return new g.default(t,{clockRate:parseInt(i),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const n=new Map,e=this.sdp,t=fn.splitSections(e);return n.set("opus",fn.findAudioPayloadType("opus",t)),n.set("red",fn.findAudioPayloadType("red",t)),n}static findAudioPayloadType(n,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${n}\\/48000`,i=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const u=i.exec(o);if(u!==null)return Number(u[1])}return 0}withStartingVideoSendBitrate(n){const e=fn.splitSections(this.sdp),t=fn.findActiveCameraSection(e);if(t===-1)return this;const i=fn.splitLines(e[t]),o=[];for(const h of i)if(/^a=fmtp:\d*/.test(h)){const S=h+`;x-google-start-bitrate=${n*1e3}`;o.push(S)}else o.push(h);e[t]=o.join(fn.CRLF)+fn.CRLF;const u=e.join("");return new fn(u)}constructor(n){this.sdp=n}},"SDP");a.default=l,l.CRLF=`\r
`,l.rfc7587LowestBitrate=6e3,l.rfc7587HighestBitrate=51e4,l.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",l.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},9615283928:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SDPCandidateType=void 0;var c;(function(d){d.Host="host",d.ServerReflexive="srflx",d.PeerReflexive="prflx",d.Relay="relay"})(c=a.SDPCandidateType||(a.SDPCandidateType={})),a.default=c},3364495052:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"SDPMediaSection");a.default=c},4883941895:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(5391134031);let p=s(class Yr{equals(g){return g!==void 0&&this.codecName===g.codecName&&this.codecCapability.mimeType===g.codecCapability.mimeType&&this.codecCapability.clockRate===g.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===g.codecCapability.sdpFmtpLine}fmtpLineMatches(g,l){const r=this.codecCapability.sdpFmtpLine;if(!r)return!1;if(this.codecName==="H264"){const n=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=r.replace(n,"profile-level-id=$1");return g.replace(n,"profile-level-id=$1").startsWith(`a=fmtp:${l} ${e}`)}return g.startsWith(`a=fmtp:${l} ${r}`)}static vp8(){return new Yr("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new Yr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new Yr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new Yr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new Yr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new Yr("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return Yr.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new Yr("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return Yr.vp9Profile0()}static av1Main(){return new Yr("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return Yr.av1Main()}static fromSignaled(g){switch(g){case d.SdkVideoCodecCapability.VP8:return Yr.vp8();case d.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return Yr.h264BaselineProfile();case d.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return Yr.h264ConstrainedBaselineProfile();case d.SdkVideoCodecCapability.H264_MAIN_PROFILE:return Yr.h264MainProfile();case d.SdkVideoCodecCapability.H264_HIGH_PROFILE:return Yr.h264HighProfile();case d.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return Yr.h264ConstrainedHighProfile();case d.SdkVideoCodecCapability.VP9_PROFILE_0:return Yr.vp9Profile0();case d.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return Yr.av1Main();default:return}}constructor(g,l){this.codecName=g,this.codecCapability=l}},"VideoCodecCapability");a.default=p},9675039205:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(2179555054);let p=s(class Qd{compress(g,l){if(l.length>0){const e=Math.min(l.length,Qd.MAX_DICTIONARY_SIZE);l=l.slice(0,e)}const r={memLevel:Qd.Z_MEM_LEVEL,dictionary:l};return d.deflateRaw(g,r)}decompress(g,l){if(l.length>0){const e=Math.min(l.length,Qd.MAX_DICTIONARY_SIZE);l=l.slice(0,e)}const r={to:"string",dictionary:l,chunkSize:4096};let n="";try{n=d.inflateRaw(g,r)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return n}constructor(g){this.logger=g}},"ZLIBTextCompressor");a.default=p,p.Z_MEM_LEVEL=9,p.MAX_DICTIONARY_SIZE=31744},4641929542:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(3097552577),p=c(3049140029),m=c(953236500),g=c(7338273141);let l=s(class{perform(n,e){const t=this.currentState;if(t===m.SessionStateControllerState.NotConnected&&n===d.SessionStateControllerAction.Connect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===d.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===d.SessionStateControllerAction.FinishConnecting)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Connected&&n===d.SessionStateControllerAction.Disconnect)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===d.SessionStateControllerAction.Reconnect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connected&&n===d.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===d.SessionStateControllerAction.Update)this.transition(m.SessionStateControllerState.Updating,n);else if(t===m.SessionStateControllerState.Updating&&n===d.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Updating&&n===d.SessionStateControllerAction.FinishUpdating)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Disconnecting&&n===d.SessionStateControllerAction.FinishDisconnecting)this.transition(m.SessionStateControllerState.NotConnected,n);else return this.canDefer(n)?(this.logger.info(`deferring transition from ${m.SessionStateControllerState[this.currentState]} with ${d.SessionStateControllerAction[n]}`),this.deferAction(n,e),g.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${m.SessionStateControllerState[this.currentState]} with ${d.SessionStateControllerAction[n]}`),g.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(i){return this.logger.error(`error during state ${m.SessionStateControllerState[this.currentState]} with action ${d.SessionStateControllerAction[n]}: ${i}`),this.logger.info(`rolling back transition to ${m.SessionStateControllerState[t]}`),this.currentState=t,g.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),g.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(n,e){this.logger.info(`transitioning from ${m.SessionStateControllerState[this.currentState]} to ${m.SessionStateControllerState[n]} with ${d.SessionStateControllerAction[e]}`),this.currentState=n}deferPriority(n){switch(n){case d.SessionStateControllerAction.Disconnect:return p.SessionStateControllerDeferPriority.VeryHigh;case d.SessionStateControllerAction.Fail:return p.SessionStateControllerDeferPriority.High;case d.SessionStateControllerAction.Reconnect:return p.SessionStateControllerDeferPriority.Medium;case d.SessionStateControllerAction.Update:return p.SessionStateControllerDeferPriority.Low;default:return p.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(n,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(n)||(this.deferredAction=n,this.deferredWork=e)}canDefer(n){return this.deferPriority(n)!==p.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===m.SessionStateControllerState.Connecting||this.currentState===m.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const n=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${d.SessionStateControllerAction[n]}`),this.perform(n,e)!==g.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${d.SessionStateControllerAction[n]} in state ${m.SessionStateControllerState[this.currentState]}`)}constructor(n){this.logger=n,this.currentState=m.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");a.default=l},3097552577:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SessionStateControllerAction=void 0;var c;(function(d){d[d.Connect=0]="Connect",d[d.FinishConnecting=1]="FinishConnecting",d[d.Update=2]="Update",d[d.FinishUpdating=3]="FinishUpdating",d[d.Reconnect=4]="Reconnect",d[d.Disconnect=5]="Disconnect",d[d.Fail=6]="Fail",d[d.FinishDisconnecting=7]="FinishDisconnecting"})(c=a.SessionStateControllerAction||(a.SessionStateControllerAction={})),a.default=c},3049140029:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SessionStateControllerDeferPriority=void 0;var c;(function(d){d[d.DoNotDefer=0]="DoNotDefer",d[d.Low=1]="Low",d[d.Medium=2]="Medium",d[d.High=3]="High",d[d.VeryHigh=4]="VeryHigh"})(c=a.SessionStateControllerDeferPriority||(a.SessionStateControllerDeferPriority={})),a.default=c},953236500:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SessionStateControllerState=void 0;var c;(function(d){d[d.NotConnected=0]="NotConnected",d[d.Connecting=1]="Connecting",d[d.Connected=2]="Connected",d[d.Updating=3]="Updating",d[d.Disconnecting=4]="Disconnecting"})(c=a.SessionStateControllerState||(a.SessionStateControllerState={})),a.default=c},7338273141:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SessionStateControllerTransitionResult=void 0;var c;(function(d){d[d.Transitioned=0]="Transitioned",d[d.NoTransitionAvailable=1]="NoTransitionAvailable",d[d.DeferredTransition=2]="DeferredTransition",d[d.TransitionFailed=3]="TransitionFailed"})(c=a.SessionStateControllerTransitionResult||(a.SessionStateControllerTransitionResult={})),a.default=c},7258714924:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8351168186)),m=d(c(6393942734)),g=c(5391134031),l=c(840544383),r=d(c(8066052849)),n=d(c(5116495551)),e=d(c(2686893898)),t=c(1448262436),i=d(c(8152250765)),o=d(c(426218501));let u=s(class Hc{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const f=g.SdkSignalFrame.create();return f.type=g.SdkSignalFrame.Type.PING_PONG,f.pingPong=S,this.sendMessage(f),f.timestampMs}join(S){this.logger.info("sending join");const f=g.SdkJoinFrame.create();f.protocolVersion=2,f.flags=g.SdkJoinFlags.HAS_STREAM_UPDATE;const v=new p.default,E={platformName:v.name(),platformVersion:v.version(),clientSource:r.default.sdkName,chimeSdkVersion:r.default.sdkVersion,clientUtcOffset:l.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:T,appVersion:w}=S.applicationMetadata;E.appName=T,E.appVersion=w}f.clientDetails=g.SdkClientDetails.create(E),f.audioSessionId=this.audioSessionId,f.wantsCompressedSdp=Hc.CLIENT_SUPPORTS_COMPRESSION,f.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,f.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),f.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),f.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const _=g.SdkSignalFrame.create();_.type=g.SdkSignalFrame.Type.JOIN,_.join=f,this.sendMessage(_)}subscribe(S){const f=g.SdkSubscribeFrame.create();if(f.sendStreams=[],f.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(f.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(f.audioCheckin=S.audioCheckin,f.audioHost=S.audioHost,f.audioMuted=S.audioMuted,!S.audioCheckin)){const E=g.SdkStreamDescriptor.create();E.mediaType=g.SdkStreamMediaType.AUDIO,E.trackLabel="AmazonChimeExpressAudio",E.attendeeId=S.attendeeId,E.streamId=1,E.groupId=1,E.framerate=15,E.maxBitrateKbps=600,E.avgBitrateBps=4e5,f.sendStreams.push(E)}if(f.compressedSdpOffer=S.compressedSdpOffer,f.duplex=g.SdkStreamServiceType.RX,S.localVideoEnabled){f.duplex=g.SdkStreamServiceType.DUPLEX;for(let E=0;E<S.videoStreamDescriptions.length;E++){const _=S.videoStreamDescriptions[E].clone();_.attendeeId=S.attendeeId,f.sendStreams.push(_.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(f.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const v=g.SdkSignalFrame.create();v.type=g.SdkSignalFrame.Type.SUBSCRIBE,v.sub=f,this.sendMessage(v)}remoteVideoUpdate(S,f){const v=g.SdkRemoteVideoUpdateFrame.create();v.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),v.removedVideoSubscriptionMids=f;const E=g.SdkSignalFrame.create();E.type=g.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,E.remoteVideoUpdate=v,this.sendMessage(E)}convertSignalingClientVideoSubscriptionConfiguration(S){const f=new g.SdkVideoSubscriptionConfiguration;switch(f.mid=S.mid,f.attendeeId=S.attendeeId,f.streamId=S.streamId,f.groupId=S.groupId,f.priority=S.priority,f.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case n.default.Balanced:f.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.BALANCED;break;case n.default.MaintainFramerate:f.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case n.default.MaintainResolution:f.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:f.qualityAdaptationPreference=g.SdkVideoQualityAdaptationPreference.BALANCED}return f}leave(){const S=g.SdkSignalFrame.create();S.type=g.SdkSignalFrame.Type.LEAVE,S.leave=g.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.CLIENT_METRIC,f.clientMetric=S,this.sendMessage(f)}sendDataMessage(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.DATA_MESSAGE,f.dataMessage=S,this.sendMessage(f)}closeConnection(){var S,f;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new i.default(this,o.default.WebSocketClosing,null));const v=new m.default(Hc.CLOSE_EVENT_TIMEOUT_MS),E=s(_=>{var T,w;(w=(T=this.webSocket).removeEventListener)===null||w===void 0||w.call(T,"close",E),v.stop(),this.closeEventHandler(_)},"handler");(f=(S=this.webSocket).removeEventListener)===null||f===void 0||f.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",E),v.start(()=>{E(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.AUDIO_CONTROL;const v=g.SdkAudioControlFrame.create();v.muted=S,f.audioControl=v,this.sendMessage(f)}pause(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.PAUSE,f.pause=g.SdkPauseResumeFrame.create(),f.pause.streamIds=S,this.sendMessage(f)}resume(S){const f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.RESUME,f.pause=g.SdkPauseResumeFrame.create(),f.pause.streamIds=S,this.sendMessage(f)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const f=this.prependWithFrameTypeRTC(g.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(f)){this.sendEvent(new i.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new i.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new i.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let f;try{f=g.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new i.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(f)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new i.default(this,o.default.ReceivedSignalFrame,f)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(f)}`)}stripFrameTypeRTC(S){const f=S[0];return f!==Hc.FRAME_TYPE_RTC&&f!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${f}`),S.slice(1)}prependWithFrameTypeRTC(S){const f=new Uint8Array(S.length+1);return f[0]=Hc.FRAME_TYPE_RTC,f.set(S,1),f}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new i.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const f of this.observerQueue)f.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new i.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new i.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new i.default(this,o.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new i.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=c.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=c.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return l.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const f=g.SdkMeetingSessionCredentials.create();f.attendeeId=S.attendeeId,f.externalUserId=S.externalUserId,f.joinToken=S.joinToken;const v=g.SdkPrimaryMeetingJoinFrame.create();v.credentials=f;const E=g.SdkSignalFrame.create();E.type=g.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,E.primaryMeetingJoin=v,this.sendMessage(E)}demoteFromPrimaryMeeting(){const S=g.SdkPrimaryMeetingLeaveFrame.create(),f=g.SdkSignalFrame.create();f.type=g.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,f.primaryMeetingLeave=S,this.sendMessage(f)}constructor(S,f){this.webSocket=S,this.logger=f,this.unloadHandler=null,this.closeEventHandler=v=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new i.default(this,o.default.WebSocketClosed,null,v.code,v.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");a.default=u,u.FRAME_TYPE_RTC=5,u.CLOSE_EVENT_TIMEOUT_MS=2e3,u.CLIENT_SUPPORTS_COMPRESSION=!0},1448262436:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.convertServerSideNetworkAdaptionEnumToSignaled=a.convertServerSideNetworkAdaptionEnumFromSignaled=a.serverSideNetworkAdaptionIsNoneOrDefault=a.ServerSideNetworkAdaption=void 0;const d=c(5391134031);var p;(function(r){r[r.Default=0]="Default",r[r.None=1]="None",r[r.BandwidthProbing=2]="BandwidthProbing",r[r.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(p=a.ServerSideNetworkAdaption||(a.ServerSideNetworkAdaption={})),a.default=p;function m(r){return r===p.None||r===p.Default}s(m,"serverSideNetworkAdaptionIsNoneOrDefault"),a.serverSideNetworkAdaptionIsNoneOrDefault=m;function g(r){switch(r){case d.SdkServerSideNetworkAdaption.DEFAULT:return p.Default;case d.SdkServerSideNetworkAdaption.NONE:return p.None;case d.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return p.BandwidthProbing;case d.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return p.BandwidthProbingAndRemoteVideoQualityAdaption}}s(g,"convertServerSideNetworkAdaptionEnumFromSignaled"),a.convertServerSideNetworkAdaptionEnumFromSignaled=g;function l(r){switch(r){case p.Default:return d.SdkServerSideNetworkAdaption.DEFAULT;case p.None:return d.SdkServerSideNetworkAdaption.NONE;case p.BandwidthProbing:return d.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case p.BandwidthProbingAndRemoteVideoQualityAdaption:return d.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}s(l,"convertServerSideNetworkAdaptionEnumToSignaled"),a.convertServerSideNetworkAdaptionEnumToSignaled=l},893025464:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(p,m){this.signalingURL=p,this.joinToken=m}},"SignalingClientConnectionRequest");a.default=c},8152250765:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(426218501));let m=s(class{isConnectionTerminated(){switch(this.type){case p.default.WebSocketFailed:case p.default.WebSocketError:case p.default.WebSocketClosing:case p.default.WebSocketClosed:return!0;default:return!1}}constructor(l,r,n,e,t){this.client=l,this.type=r,this.message=n,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");a.default=m},426218501:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SignalingClientEventType=void 0;var c;(function(d){d[d.WebSocketConnecting=0]="WebSocketConnecting",d[d.WebSocketOpen=1]="WebSocketOpen",d[d.WebSocketError=2]="WebSocketError",d[d.WebSocketClosing=3]="WebSocketClosing",d[d.WebSocketClosed=4]="WebSocketClosed",d[d.WebSocketFailed=5]="WebSocketFailed",d[d.WebSocketMessage=6]="WebSocketMessage",d[d.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",d[d.WebSocketSentMessage=8]="WebSocketSentMessage",d[d.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",d[d.ReceivedSignalFrame=10]="ReceivedSignalFrame",d[d.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(c=a.SignalingClientEventType||(a.SignalingClientEventType={})),a.default=c},9315300759:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1448262436));let m=s(class{constructor(l){this.applicationMetadata=l,this.serverSideNetworkAdaption=p.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");a.default=m},1026405281:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{constructor(p,m,g,l,r,n,e,t,i,o){this.attendeeId=p,this.sdpOffer=m,this.audioHost=g,this.audioMuted=l,this.audioCheckin=r,this.receiveStreamIds=n,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=i,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");a.default=c},4983545831:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{equals(p){return p!==void 0&&this.mid===p.mid&&this.attendeeId===p.attendeeId&&this.streamId===p.streamId&&this.groupId===p.groupId&&this.priority===p.priority&&this.targetBitrateKbps===p.targetBitrateKbps&&this.qualityAdaptationPreference===p.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");a.default=c},5391134031:(F,a,c)=>{"use strict";var d=c(7232944804),p=d.Reader,m=d.Writer,g=d.util,l=d.roots.default||(d.roots.default={});l.SdkSignalFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSignalFrame"),r.prototype.timestampMs=g.Long?g.Long.fromBits(0,0,!0):0,r.prototype.type=1,r.prototype.error=null,r.prototype.join=null,r.prototype.joinack=null,r.prototype.sub=null,r.prototype.suback=null,r.prototype.index=null,r.prototype.pause=null,r.prototype.leave=null,r.prototype.leaveAck=null,r.prototype.bitrates=null,r.prototype.audioControl=null,r.prototype.audioMetadata=null,r.prototype.audioStreamIdInfo=null,r.prototype.pingPong=null,r.prototype.audioStatus=null,r.prototype.clientMetric=null,r.prototype.dataMessage=null,r.prototype.remoteVideoUpdate=null,r.prototype.primaryMeetingJoin=null,r.prototype.primaryMeetingJoinAck=null,r.prototype.primaryMeetingLeave=null,r.prototype.notification=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&l.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&l.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&l.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&l.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&l.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&l.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&l.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&l.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&l.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&l.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&l.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&l.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&l.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&l.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&l.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&l.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&l.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&l.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&l.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&l.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&l.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&l.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkSignalFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=l.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=l.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=l.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=l.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=l.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=l.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=l.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=l.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=l.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=l.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=l.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=l.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=l.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=l.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=l.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=l.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=l.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=l.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=l.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=l.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=l.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=l.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(u&7);break}}if(!o.hasOwnProperty("timestampMs"))throw g.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw g.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!g.isInteger(e.timestampMs)&&!(e.timestampMs&&g.isInteger(e.timestampMs.low)&&g.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=l.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=l.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=l.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=l.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=l.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=l.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=l.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=l.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=l.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=l.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=l.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=l.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=l.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=l.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=l.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=l.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=l.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=l.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=l.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=l.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=l.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=l.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkSignalFrame)return e;var t=new l.SdkSignalFrame;switch(e.timestampMs!=null&&(g.Long?(t.timestampMs=g.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new g.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=l.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=l.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=l.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=l.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=l.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=l.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=l.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=l.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=l.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=l.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=l.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=l.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=l.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=l.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=l.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=l.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=l.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=l.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=l.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=l.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=l.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=l.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(g.Long){var o=new g.Long(0,0,!0);i.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.timestampMs=t.longs===String?"0":0;i.type=t.enums===String?"JOIN":1,i.error=null,i.join=null,i.joinack=null,i.sub=null,i.suback=null,i.index=null,i.pause=null,i.leave=null,i.leaveAck=null,i.bitrates=null,i.audioControl=null,i.audioMetadata=null,i.audioStreamIdInfo=null,i.pingPong=null,i.audioStatus=null,i.clientMetric=null,i.dataMessage=null,i.remoteVideoUpdate=null,i.primaryMeetingJoin=null,i.primaryMeetingJoinAck=null,i.primaryMeetingLeave=null,i.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?i.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:i.timestampMs=t.longs===String?g.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new g.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkSignalFrame.Type[e.type]===void 0?e.type:l.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(i.error=l.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(i.join=l.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(i.joinack=l.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(i.sub=l.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(i.suback=l.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(i.index=l.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(i.pause=l.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(i.leave=l.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(i.leaveAck=l.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(i.bitrates=l.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(i.audioControl=l.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(i.audioMetadata=l.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(i.audioStreamIdInfo=l.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(i.pingPong=l.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=l.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(i.clientMetric=l.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(i.dataMessage=l.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(i.remoteVideoUpdate=l.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(i.primaryMeetingJoin=l.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(i.primaryMeetingJoinAck=l.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(i.primaryMeetingLeave=l.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(i.notification=l.SdkNotificationFrame.toObject(e.notification,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="JOIN"]=1,e[n[2]="JOIN_ACK"]=2,e[n[3]="SUBSCRIBE"]=3,e[n[4]="SUBSCRIBE_ACK"]=4,e[n[5]="INDEX"]=5,e[n[7]="PAUSE"]=7,e[n[8]="RESUME"]=8,e[n[9]="LEAVE"]=9,e[n[10]="LEAVE_ACK"]=10,e[n[13]="BITRATES"]=13,e[n[16]="AUDIO_CONTROL"]=16,e[n[17]="AUDIO_METADATA"]=17,e[n[18]="AUDIO_STREAM_ID_INFO"]=18,e[n[19]="PING_PONG"]=19,e[n[20]="AUDIO_STATUS"]=20,e[n[21]="CLIENT_METRIC"]=21,e[n[22]="DATA_MESSAGE"]=22,e[n[24]="REMOTE_VIDEO_UPDATE"]=24,e[n[25]="PRIMARY_MEETING_JOIN"]=25,e[n[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[n[27]="PRIMARY_MEETING_LEAVE"]=27,e[n[34]="NOTIFICATION"]=34,e}(),r}(),l.SdkErrorFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkErrorFrame"),r.prototype.status=0,r.prototype.description="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkErrorFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!g.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!g.isString(e.description)?"description: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkErrorFrame)return e;var t=new l.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.status=0,i.description=""),e.status!=null&&e.hasOwnProperty("status")&&(i.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(i.description=e.description),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),r}(),l.SdkJoinFlags=function(){var r={},n=Object.create(r);return n[r[2]="HAS_STREAM_UPDATE"]=2,n[r[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,n[r[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,n}(),l.SdkClientDetails=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientDetails"),r.prototype.appName="",r.prototype.appVersion="",r.prototype.deviceModel="",r.prototype.deviceMake="",r.prototype.platformName="",r.prototype.platformVersion="",r.prototype.clientSource="",r.prototype.chimeSdkVersion="",r.prototype.clientUtcOffset="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkClientDetails;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!g.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!g.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!g.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!g.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!g.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!g.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!g.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!g.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!g.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkClientDetails)return e;var t=new l.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.appName="",i.appVersion="",i.deviceModel="",i.deviceMake="",i.platformName="",i.platformVersion="",i.clientSource="",i.chimeSdkVersion="",i.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(i.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(i.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(i.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(i.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(i.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(i.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(i.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(i.clientUtcOffset=e.clientUtcOffset),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),r}(),l.SdkServerSideNetworkAdaption=function(){var r={},n=Object.create(r);return n[r[1]="DEFAULT"]=1,n[r[2]="NONE"]=2,n[r[3]="BANDWIDTH_PROBING"]=3,n[r[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,n}(),l.SdkJoinFrame=function(){function r(n){if(this.supportedServerSideNetworkAdaptions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinFrame"),r.prototype.protocolVersion=2,r.prototype.maxNumOfVideos=0,r.prototype.flags=0,r.prototype.clientDetails=null,r.prototype.audioSessionId=g.Long?g.Long.fromBits(0,0,!0):0,r.prototype.wantsCompressedSdp=!1,r.prototype.serverSideNetworkAdaption=1,r.prototype.supportedServerSideNetworkAdaptions=g.emptyArray,r.prototype.wantsAllTemporalLayersInIndex=!1,r.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&l.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[i]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkJoinFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=l.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!g.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!g.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=l.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!g.isInteger(e.audioSessionId)&&!(e.audioSessionId&&g.isInteger(e.audioSessionId.low)&&g.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkJoinFrame)return e;var t=new l.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=l.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(g.Long?(t.audioSessionId=g.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new g.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:if(typeof e.supportedServerSideNetworkAdaptions[i]=="number"){t.supportedServerSideNetworkAdaptions[i]=e.supportedServerSideNetworkAdaptions[i];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[i]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[i]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[i]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[i]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.supportedServerSideNetworkAdaptions=[]),t.defaults){if(i.protocolVersion=2,i.maxNumOfVideos=0,i.flags=0,i.clientDetails=null,g.Long){var o=new g.Long(0,0,!0);i.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.audioSessionId=t.longs===String?"0":0;i.wantsCompressedSdp=!1,i.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,i.wantsAllTemporalLayersInIndex=!1,i.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(i.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(i.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(i.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(i.clientDetails=l.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?i.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:i.audioSessionId=t.longs===String?g.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new g.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(i.serverSideNetworkAdaption=t.enums===String?l.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:l.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){i.supportedServerSideNetworkAdaptions=[];for(var u=0;u<e.supportedServerSideNetworkAdaptions.length;++u)i.supportedServerSideNetworkAdaptions[u]=t.enums===String?l.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[u]]===void 0?e.supportedServerSideNetworkAdaptions[u]:l.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[u]]:e.supportedServerSideNetworkAdaptions[u]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(i.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(i.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),r}(),l.SdkJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinAckFrame"),r.prototype.turnCredentials=null,r.prototype.videoSubscriptionLimit=0,r.prototype.wantsCompressedSdp=!1,r.prototype.defaultServerSideNetworkAdaption=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&l.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkJoinAckFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.turnCredentials=l.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=l.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!g.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkJoinAckFrame)return e;var t=new l.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=l.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.turnCredentials=null,i.videoSubscriptionLimit=0,i.wantsCompressedSdp=!1,i.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(i.turnCredentials=l.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(i.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(i.defaultServerSideNetworkAdaption=t.enums===String?l.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:l.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),r}(),l.SdkLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkLeaveFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof l.SdkLeaveFrame?e:new l.SdkLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),r}(),l.SdkLeaveAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkLeaveAckFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof l.SdkLeaveAckFrame?e:new l.SdkLeaveAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),r}(),l.SdkStreamServiceType=function(){var r={},n=Object.create(r);return n[r[1]="RX"]=1,n[r[2]="TX"]=2,n[r[3]="DUPLEX"]=3,n}(),l.SdkStreamMediaType=function(){var r={},n=Object.create(r);return n[r[1]="AUDIO"]=1,n[r[2]="VIDEO"]=2,n}(),l.SdkSubscribeFrame=function(){function r(n){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeFrame"),r.prototype.duplex=1,r.prototype.sendStreams=g.emptyArray,r.prototype.receiveStreamIds=g.emptyArray,r.prototype.sdpOffer="",r.prototype.audioHost="",r.prototype.audioCheckin=!1,r.prototype.audioMuted=!1,r.prototype.compressedSdpOffer=g.newBuffer([]),r.prototype.videoSubscriptionConfiguration=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var i=0;i<e.sendStreams.length;++i)l.SdkStreamDescriptor.encode(e.sendStreams[i],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var i=0;i<e.receiveStreamIds.length;++i)t.uint32(24).uint32(e.receiveStreamIds[i]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var i=0;i<e.videoSubscriptionConfiguration.length;++i)l.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[i],t.uint32(74).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkSubscribeFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(l.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(l.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var i=l.SdkStreamDescriptor.verify(e.sendStreams[t]);if(i)return"sendStreams."+i}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!g.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!g.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!g.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||g.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var i=l.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(i)return"videoSubscriptionConfiguration."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkSubscribeFrame)return e;var t=new l.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i){if(typeof e.sendStreams[i]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[i]=l.SdkStreamDescriptor.fromObject(e.sendStreams[i])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var i=0;i<e.receiveStreamIds.length;++i)t.receiveStreamIds[i]=e.receiveStreamIds[i]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?g.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=g.newBuffer(g.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var i=0;i<e.videoSubscriptionConfiguration.length;++i){if(typeof e.videoSubscriptionConfiguration[i]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[i]=l.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sendStreams=[],i.receiveStreamIds=[],i.videoSubscriptionConfiguration=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpOffer="",i.audioHost="",i.audioCheckin=!1,i.audioMuted=!1,t.bytes===String?i.compressedSdpOffer="":(i.compressedSdpOffer=[],t.bytes!==Array&&(i.compressedSdpOffer=g.newBuffer(i.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?l.SdkStreamServiceType[e.duplex]===void 0?e.duplex:l.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){i.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)i.sendStreams[o]=l.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){i.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)i.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(i.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(i.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(i.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(i.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(i.compressedSdpOffer=t.bytes===String?g.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){i.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)i.videoSubscriptionConfiguration[o]=l.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),r}(),l.SdkSubscribeAckFrame=function(){function r(n){if(this.allocations=[],this.tracks=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeAckFrame"),r.prototype.duplex=1,r.prototype.allocations=g.emptyArray,r.prototype.sdpAnswer="",r.prototype.tracks=g.emptyArray,r.prototype.compressedSdpAnswer=g.newBuffer([]),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var i=0;i<e.allocations.length;++i)l.SdkStreamAllocation.encode(e.allocations[i],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var i=0;i<e.tracks.length;++i)l.SdkTrackMapping.encode(e.tracks[i],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkSubscribeAckFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(l.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(l.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var i=l.SdkStreamAllocation.verify(e.allocations[t]);if(i)return"allocations."+i}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!g.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var i=l.SdkTrackMapping.verify(e.tracks[t]);if(i)return"tracks."+i}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||g.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkSubscribeAckFrame)return e;var t=new l.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var i=0;i<e.allocations.length;++i){if(typeof e.allocations[i]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[i]=l.SdkStreamAllocation.fromObject(e.allocations[i])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var i=0;i<e.tracks.length;++i){if(typeof e.tracks[i]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[i]=l.SdkTrackMapping.fromObject(e.tracks[i])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?g.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=g.newBuffer(g.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.allocations=[],i.tracks=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpAnswer="",t.bytes===String?i.compressedSdpAnswer="":(i.compressedSdpAnswer=[],t.bytes!==Array&&(i.compressedSdpAnswer=g.newBuffer(i.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?l.SdkStreamServiceType[e.duplex]===void 0?e.duplex:l.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){i.allocations=[];for(var o=0;o<e.allocations.length;++o)i.allocations[o]=l.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(i.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){i.tracks=[];for(var o=0;o<e.tracks.length;++o)i.tracks[o]=l.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(i.compressedSdpAnswer=t.bytes===String?g.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),r}(),l.SdkIndexFrame=function(){function r(n){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkIndexFrame"),r.prototype.atCapacity=!1,r.prototype.sources=g.emptyArray,r.prototype.pausedAtSourceIds=g.emptyArray,r.prototype.numParticipants=0,r.prototype.supportedReceiveCodecIntersection=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var i=0;i<e.sources.length;++i)l.SdkStreamDescriptor.encode(e.sources[i],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var i=0;i<e.pausedAtSourceIds.length;++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)t.uint32(40).int32(e.supportedReceiveCodecIntersection[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkIndexFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(l.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var i=l.SdkStreamDescriptor.verify(e.sources[t]);if(i)return"sources."+i}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!g.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!g.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkIndexFrame)return e;var t=new l.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var i=0;i<e.sources.length;++i){if(typeof e.sources[i]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[i]=l.SdkStreamDescriptor.fromObject(e.sources[i])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var i=0;i<e.pausedAtSourceIds.length;++i)t.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)switch(e.supportedReceiveCodecIntersection[i]){default:if(typeof e.supportedReceiveCodecIntersection[i]=="number"){t.supportedReceiveCodecIntersection[i]=e.supportedReceiveCodecIntersection[i];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[i]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[i]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[i]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[i]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[i]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[i]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[i]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[i]=11;break}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sources=[],i.pausedAtSourceIds=[],i.supportedReceiveCodecIntersection=[]),t.defaults&&(i.atCapacity=!1,i.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(i.atCapacity=e.atCapacity),e.sources&&e.sources.length){i.sources=[];for(var o=0;o<e.sources.length;++o)i.sources[o]=l.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){i.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)i.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(i.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){i.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)i.supportedReceiveCodecIntersection[o]=t.enums===String?l.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:l.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),r}(),l.SdkPauseResumeFrame=function(){function r(n){if(this.streamIds=[],this.groupIds=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPauseResumeFrame"),r.prototype.streamIds=g.emptyArray,r.prototype.groupIds=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamIds!=null&&e.streamIds.length)for(var i=0;i<e.streamIds.length;++i)t.uint32(8).uint32(e.streamIds[i]);if(e.groupIds!=null&&e.groupIds.length)for(var i=0;i<e.groupIds.length;++i)t.uint32(16).uint32(e.groupIds[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPauseResumeFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(u&7)===2)for(var h=e.uint32()+e.pos;e.pos<h;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!g.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!g.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkPauseResumeFrame)return e;var t=new l.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var i=0;i<e.streamIds.length;++i)t.streamIds[i]=e.streamIds[i]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var i=0;i<e.groupIds.length;++i)t.groupIds[i]=e.groupIds[i]>>>0}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streamIds=[],i.groupIds=[]),e.streamIds&&e.streamIds.length){i.streamIds=[];for(var o=0;o<e.streamIds.length;++o)i.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){i.groupIds=[];for(var o=0;o<e.groupIds.length;++o)i.groupIds[o]=e.groupIds[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),r}(),l.SdkBitrateFrame=function(){function r(n){if(this.bitrates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrateFrame"),r.prototype.bitrates=g.emptyArray,r.prototype.serverAvailableOutgoingBitrate=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.bitrates!=null&&e.bitrates.length)for(var i=0;i<e.bitrates.length;++i)l.SdkBitrate.encode(e.bitrates[i],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkBitrateFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(l.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var i=l.SdkBitrate.verify(e.bitrates[t]);if(i)return"bitrates."+i}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!g.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkBitrateFrame)return e;var t=new l.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var i=0;i<e.bitrates.length;++i){if(typeof e.bitrates[i]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[i]=l.SdkBitrate.fromObject(e.bitrates[i])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.bitrates=[]),t.defaults&&(i.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){i.bitrates=[];for(var o=0;o<e.bitrates.length;++o)i.bitrates[o]=l.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(i.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),r}(),l.SdkStreamDescriptor=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDescriptor"),r.prototype.streamId=0,r.prototype.framerate=0,r.prototype.maxBitrateKbps=0,r.prototype.trackLabel="",r.prototype.groupId=0,r.prototype.avgBitrateBps=0,r.prototype.attendeeId="",r.prototype.mediaType=1,r.prototype.externalUserId="",r.prototype.width=0,r.prototype.height=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkStreamDescriptor;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!g.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!g.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!g.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!g.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!g.isInteger(e.height)?"height: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkStreamDescriptor)return e;var t=new l.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.framerate=0,i.maxBitrateKbps=0,i.trackLabel="",i.groupId=0,i.avgBitrateBps=0,i.attendeeId="",i.mediaType=t.enums===String?"AUDIO":1,i.externalUserId="",i.width=0,i.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(i.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(i.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?l.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:l.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(i.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(i.height=e.height),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),r}(),l.SdkStreamAllocation=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamAllocation"),r.prototype.trackLabel="",r.prototype.streamId=0,r.prototype.groupId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkStreamAllocation;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkStreamAllocation)return e;var t=new l.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.trackLabel="",i.streamId=0,i.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),r}(),l.SdkTrackMapping=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTrackMapping"),r.prototype.streamId=0,r.prototype.ssrc=0,r.prototype.trackLabel="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTrackMapping;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!g.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!g.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTrackMapping)return e;var t=new l.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.ssrc=0,i.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(i.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),r}(),l.SdkBitrate=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrate"),r.prototype.sourceStreamId=0,r.prototype.avgBitrateBps=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkBitrate;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!g.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!g.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkBitrate)return e;var t=new l.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.sourceStreamId=0,i.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(i.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),r}(),l.SdkAudioControlFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioControlFrame"),r.prototype.muted=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioControlFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioControlFrame)return e;var t=new l.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),r}(),l.SdkAudioMetadataFrame=function(){function r(n){if(this.attendeeStates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioMetadataFrame"),r.prototype.attendeeStates=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var i=0;i<e.attendeeStates.length;++i)l.SdkAudioAttendeeState.encode(e.attendeeStates[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioMetadataFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(l.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var i=l.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(i)return"attendeeStates."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioMetadataFrame)return e;var t=new l.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i){if(typeof e.attendeeStates[i]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[i]=l.SdkAudioAttendeeState.fromObject(e.attendeeStates[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){i.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)i.attendeeStates[o]=l.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),r}(),l.SdkAudioAttendeeState=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioAttendeeState"),r.prototype.audioStreamId=0,r.prototype.volume=0,r.prototype.muted=!1,r.prototype.signalStrength=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioAttendeeState;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!g.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!g.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!g.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioAttendeeState)return e;var t=new l.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.volume=0,i.muted=!1,i.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(i.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(i.signalStrength=e.signalStrength),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),r}(),l.SdkAudioStreamIdInfoFrame=function(){function r(n){if(this.streams=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfoFrame"),r.prototype.streams=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streams!=null&&e.streams.length)for(var i=0;i<e.streams.length;++i)l.SdkAudioStreamIdInfo.encode(e.streams[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioStreamIdInfoFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(l.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var i=l.SdkAudioStreamIdInfo.verify(e.streams[t]);if(i)return"streams."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioStreamIdInfoFrame)return e;var t=new l.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var i=0;i<e.streams.length;++i){if(typeof e.streams[i]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[i]=l.SdkAudioStreamIdInfo.fromObject(e.streams[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streams=[]),e.streams&&e.streams.length){i.streams=[];for(var o=0;o<e.streams.length;++o)i.streams[o]=l.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),r}(),l.SdkAudioStreamIdInfo=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfo"),r.prototype.audioStreamId=0,r.prototype.attendeeId="",r.prototype.muted=!1,r.prototype.externalUserId="",r.prototype.dropped=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioStreamIdInfo;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!g.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioStreamIdInfo)return e;var t=new l.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.attendeeId="",i.muted=!1,i.externalUserId="",i.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(i.dropped=e.dropped),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),r}(),l.SdkPingPongType=function(){var r={},n=Object.create(r);return n[r[1]="PING"]=1,n[r[2]="PONG"]=2,n}(),l.SdkPingPongFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPingPongFrame"),r.prototype.type=1,r.prototype.pingId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPingPongFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(u&7);break}}if(!o.hasOwnProperty("type"))throw g.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw g.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return g.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkPingPongFrame)return e;var t=new l.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"PING":1,i.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkPingPongType[e.type]===void 0?e.type:l.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(i.pingId=e.pingId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),r}(),l.SdkAudioStatusFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStatusFrame"),r.prototype.audioStatus=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkAudioStatusFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!g.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkAudioStatusFrame)return e;var t=new l.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=e.audioStatus),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),r}(),l.SdkMetric=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMetric"),r.prototype.type=1,r.prototype.value=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkMetric;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkMetric)return e;var t=new l.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,i.value=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkMetric.Type[e.type]===void 0?e.type:l.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=t.json&&!isFinite(e.value)?String(e.value):e.value),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[n[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[n[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[n[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[n[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[n[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[n[7]="STUN_RTT_MS"]=7,e[n[8]="SOCKET_DISCARDED_PPS"]=8,e[n[9]="RTC_MIC_JITTER_MS"]=9,e[n[10]="RTC_MIC_PPS"]=10,e[n[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[n[12]="RTC_MIC_BITRATE"]=12,e[n[13]="RTC_MIC_RTT_MS"]=13,e[n[14]="RTC_SPK_PPS"]=14,e[n[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[n[16]="RTC_SPK_JITTER_MS"]=16,e[n[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[n[18]="RTC_SPK_BITRATE"]=18,e[n[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[n[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[n[21]="VIDEO_SENT_RTT_MS"]=21,e[n[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[n[23]="VIDEO_NACKS_RECEIVED"]=23,e[n[24]="VIDEO_PLIS_RECEIVED"]=24,e[n[25]="VIDEO_ENCODE_MS"]=25,e[n[26]="VIDEO_INPUT_FPS"]=26,e[n[27]="VIDEO_ENCODE_FPS"]=27,e[n[28]="VIDEO_SENT_FPS"]=28,e[n[29]="VIDEO_FIRS_RECEIVED"]=29,e[n[30]="VIDEO_SENT_PPS"]=30,e[n[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[n[32]="VIDEO_SENT_BITRATE"]=32,e[n[33]="VIDEO_DROPPED_FPS"]=33,e[n[34]="VIDEO_TARGET_DELAY_MS"]=34,e[n[35]="VIDEO_DECODE_MS"]=35,e[n[36]="VIDEO_OUTPUT_FPS"]=36,e[n[37]="VIDEO_RECEIVED_PPS"]=37,e[n[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[n[39]="VIDEO_RENDER_DELAY_MS"]=39,e[n[40]="VIDEO_RECEIVED_FPS"]=40,e[n[41]="VIDEO_DECODE_FPS"]=41,e[n[42]="VIDEO_NACKS_SENT"]=42,e[n[43]="VIDEO_FIRS_SENT"]=43,e[n[44]="VIDEO_RECEIVED_BITRATE"]=44,e[n[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[n[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[n[47]="VIDEO_DISCARDED_PPS"]=47,e[n[48]="VIDEO_PLIS_SENT"]=48,e[n[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[n[64]="VIDEO_ENCODE_HEIGHT"]=64,e[n[66]="VIDEO_SENT_QP_SUM"]=66,e[n[69]="VIDEO_DECODE_HEIGHT"]=69,e[n[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[n[86]="VIDEO_ENCODE_WIDTH"]=86,e[n[87]="VIDEO_DECODE_WIDTH"]=87,e[n[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[n[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[n[90]="VIDEO_FREEZE_COUNT"]=90,e[n[91]="VIDEO_FREEZE_DURATION"]=91,e[n[92]="VIDEO_PAUSE_COUNT"]=92,e[n[93]="VIDEO_PAUSE_DURATION"]=93,e[n[94]="VIDEO_QUALITY_REASON"]=94,e[n[95]="VIDEO_PROCESSING_TIME"]=95,e[n[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[n[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[n[98]="RTC_SPK_TOTAL_LOST"]=98,e[n[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[n[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[n[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[n[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[n[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[n[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e}(),r}(),l.SdkStreamMetricFrame=function(){function r(n){if(this.metrics=[],this.dimensions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamMetricFrame"),r.prototype.streamId=0,r.prototype.groupId=0,r.prototype.metrics=g.emptyArray,r.prototype.dimensions=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var i=0;i<e.metrics.length;++i)l.SdkMetric.encode(e.metrics[i],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var i=0;i<e.dimensions.length;++i)l.SdkStreamDimension.encode(e.dimensions[i],t.uint32(50).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkStreamMetricFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(l.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(l.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var i=l.SdkMetric.verify(e.metrics[t]);if(i)return"metrics."+i}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var i=l.SdkStreamDimension.verify(e.dimensions[t]);if(i)return"dimensions."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkStreamMetricFrame)return e;var t=new l.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var i=0;i<e.metrics.length;++i){if(typeof e.metrics[i]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[i]=l.SdkMetric.fromObject(e.metrics[i])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var i=0;i<e.dimensions.length;++i){if(typeof e.dimensions[i]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[i]=l.SdkStreamDimension.fromObject(e.dimensions[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.metrics=[],i.dimensions=[]),t.defaults&&(i.streamId=0,i.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.metrics&&e.metrics.length){i.metrics=[];for(var o=0;o<e.metrics.length;++o)i.metrics[o]=l.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){i.dimensions=[];for(var o=0;o<e.dimensions.length;++o)i.dimensions[o]=l.SdkStreamDimension.toObject(e.dimensions[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),r}(),l.SdkClientMetricFrame=function(){function r(n){if(this.globalMetrics=[],this.streamMetricFrames=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientMetricFrame"),r.prototype.globalMetrics=g.emptyArray,r.prototype.streamMetricFrames=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var i=0;i<e.globalMetrics.length;++i)l.SdkMetric.encode(e.globalMetrics[i],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var i=0;i<e.streamMetricFrames.length;++i)l.SdkStreamMetricFrame.encode(e.streamMetricFrames[i],t.uint32(18).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkClientMetricFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(l.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(l.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var i=l.SdkMetric.verify(e.globalMetrics[t]);if(i)return"globalMetrics."+i}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var i=l.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(i)return"streamMetricFrames."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkClientMetricFrame)return e;var t=new l.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i){if(typeof e.globalMetrics[i]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[i]=l.SdkMetric.fromObject(e.globalMetrics[i])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var i=0;i<e.streamMetricFrames.length;++i){if(typeof e.streamMetricFrames[i]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[i]=l.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.globalMetrics=[],i.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){i.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)i.globalMetrics[o]=l.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){i.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)i.streamMetricFrames[o]=l.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),r}(),l.SdkStreamDimension=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDimension"),r.prototype.type=1,r.prototype.value=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&l.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkStreamDimension;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=l.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=l.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkStreamDimension)return e;var t=new l.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=l.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ENCODER_NAME":1,i.value=null),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkStreamDimension.Type[e.type]===void 0?e.type:l.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=l.SdkDimensionValue.toObject(e.value,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ENCODER_NAME"]=1,e[n[2]="VIDEO_DECODER_NAME"]=2,e}(),r}(),l.SdkDimensionValue=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDimensionValue"),r.prototype.stringValue="",r.prototype.boolValue=!1,r.prototype.uintValue=g.Long?g.Long.fromBits(0,0,!0):0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkDimensionValue;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!g.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!g.isInteger(e.uintValue)&&!(e.uintValue&&g.isInteger(e.uintValue.low)&&g.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkDimensionValue)return e;var t=new l.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(g.Long?(t.uintValue=g.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new g.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults)if(i.stringValue="",i.boolValue=!1,g.Long){var o=new g.Long(0,0,!0);i.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(i.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(i.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?i.uintValue=t.longs===String?String(e.uintValue):e.uintValue:i.uintValue=t.longs===String?g.Long.prototype.toString.call(e.uintValue):t.longs===Number?new g.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),r}(),l.SdkDataMessageFrame=function(){function r(n){if(this.messages=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessageFrame"),r.prototype.messages=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.messages!=null&&e.messages.length)for(var i=0;i<e.messages.length;++i)l.SdkDataMessagePayload.encode(e.messages[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkDataMessageFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(l.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var i=l.SdkDataMessagePayload.verify(e.messages[t]);if(i)return"messages."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkDataMessageFrame)return e;var t=new l.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var i=0;i<e.messages.length;++i){if(typeof e.messages[i]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[i]=l.SdkDataMessagePayload.fromObject(e.messages[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.messages=[]),e.messages&&e.messages.length){i.messages=[];for(var o=0;o<e.messages.length;++o)i.messages[o]=l.SdkDataMessagePayload.toObject(e.messages[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),r}(),l.SdkDataMessagePayload=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessagePayload"),r.prototype.topic="",r.prototype.data=g.newBuffer([]),r.prototype.lifetimeMs=0,r.prototype.senderAttendeeId="",r.prototype.ingestTimeNs=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.senderExternalUserId="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkDataMessagePayload;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!g.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||g.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!g.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!g.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!g.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&g.isInteger(e.ingestTimeNs.low)&&g.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!g.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkDataMessagePayload)return e;var t=new l.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?g.base64.decode(e.data,t.data=g.newBuffer(g.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(g.Long?(t.ingestTimeNs=g.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new g.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.topic="",t.bytes===String?i.data="":(i.data=[],t.bytes!==Array&&(i.data=g.newBuffer(i.data))),i.lifetimeMs=0,i.senderAttendeeId="",g.Long){var o=new g.Long(0,0,!1);i.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.ingestTimeNs=t.longs===String?"0":0;i.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(i.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(i.data=t.bytes===String?g.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(i.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(i.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?i.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:i.ingestTimeNs=t.longs===String?g.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new g.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(i.senderExternalUserId=e.senderExternalUserId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),r}(),l.SdkTurnCredentials=function(){function r(n){if(this.uris=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTurnCredentials"),r.prototype.username="",r.prototype.password="",r.prototype.ttl=0,r.prototype.uris=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var i=0;i<e.uris.length;++i)t.uint32(34).string(e.uris[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTurnCredentials;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!g.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!g.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!g.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!g.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTurnCredentials)return e;var t=new l.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var i=0;i<e.uris.length;++i)t.uris[i]=String(e.uris[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.uris=[]),t.defaults&&(i.username="",i.password="",i.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(i.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(i.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(i.ttl=e.ttl),e.uris&&e.uris.length){i.uris=[];for(var o=0;o<e.uris.length;++o)i.uris[o]=e.uris[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),r}(),l.SdkTranscriptItem=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptItem"),r.prototype.content="",r.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.speakerAttendeeId="",r.prototype.speakerExternalUserId="",r.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.type=1,r.prototype.vocabularyFilterMatch=!1,r.prototype.confidence=0,r.prototype.stable=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptItem;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!g.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!g.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!g.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptItem)return e;var t=new l.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.content="",g.Long){var o=new g.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.speakerAttendeeId="",i.speakerExternalUserId="",g.Long){var o=new g.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=t.enums===String?"PRONUNCIATION":1,i.vocabularyFilterMatch=!1,i.confidence=0,i.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(i.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(i.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkTranscriptItem.Type[e.type]===void 0?e.type:l.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(i.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(i.stable=e.stable),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="PRONUNCIATION"]=1,e[n[2]="PUNCTUATION"]=2,e}(),r}(),l.SdkTranscriptEntity=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptEntity"),r.prototype.category="",r.prototype.confidence=0,r.prototype.content="",r.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.type="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptEntity;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!g.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!g.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!g.isString(e.type)?"type: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptEntity)return e;var t=new l.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.category="",i.confidence=0,i.content="",g.Long){var o=new g.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(g.Long){var o=new g.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(i.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=e.type),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),r}(),l.SdkTranscriptAlternative=function(){function r(n){if(this.items=[],this.entities=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptAlternative"),r.prototype.items=g.emptyArray,r.prototype.transcript="",r.prototype.entities=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.items!=null&&e.items.length)for(var i=0;i<e.items.length;++i)l.SdkTranscriptItem.encode(e.items[i],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var i=0;i<e.entities.length;++i)l.SdkTranscriptEntity.encode(e.entities[i],t.uint32(26).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptAlternative;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(l.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(l.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var i=l.SdkTranscriptItem.verify(e.items[t]);if(i)return"items."+i}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!g.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var i=l.SdkTranscriptEntity.verify(e.entities[t]);if(i)return"entities."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptAlternative)return e;var t=new l.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i){if(typeof e.items[i]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[i]=l.SdkTranscriptItem.fromObject(e.items[i])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var i=0;i<e.entities.length;++i){if(typeof e.entities[i]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[i]=l.SdkTranscriptEntity.fromObject(e.entities[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.items=[],i.entities=[]),t.defaults&&(i.transcript=""),e.items&&e.items.length){i.items=[];for(var o=0;o<e.items.length;++o)i.items[o]=l.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(i.transcript=e.transcript),e.entities&&e.entities.length){i.entities=[];for(var o=0;o<e.entities.length;++o)i.entities[o]=l.SdkTranscriptEntity.toObject(e.entities[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),r}(),l.SdkTranscriptLanguageWithScore=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptLanguageWithScore"),r.prototype.languageCode="",r.prototype.score=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptLanguageWithScore;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!g.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptLanguageWithScore)return e;var t=new l.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.languageCode="",i.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(i.score=t.json&&!isFinite(e.score)?String(e.score):e.score),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),r}(),l.SdkTranscriptResult=function(){function r(n){if(this.alternatives=[],this.languageIdentification=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptResult"),r.prototype.alternatives=g.emptyArray,r.prototype.channelId="",r.prototype.endTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.isPartial=!1,r.prototype.resultId="",r.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.languageCode="",r.prototype.languageIdentification=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.alternatives!=null&&e.alternatives.length)for(var i=0;i<e.alternatives.length;++i)l.SdkTranscriptAlternative.encode(e.alternatives[i],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var i=0;i<e.languageIdentification.length;++i)l.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[i],t.uint32(66).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptResult;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(l.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(l.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var i=l.SdkTranscriptAlternative.verify(e.alternatives[t]);if(i)return"alternatives."+i}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!g.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!g.isInteger(e.endTime)&&!(e.endTime&&g.isInteger(e.endTime.low)&&g.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!g.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!g.isInteger(e.startTime)&&!(e.startTime&&g.isInteger(e.startTime.low)&&g.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!g.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var i=l.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(i)return"languageIdentification."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptResult)return e;var t=new l.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var i=0;i<e.alternatives.length;++i){if(typeof e.alternatives[i]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[i]=l.SdkTranscriptAlternative.fromObject(e.alternatives[i])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(g.Long?(t.endTime=g.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(g.Long?(t.startTime=g.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var i=0;i<e.languageIdentification.length;++i){if(typeof e.languageIdentification[i]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[i]=l.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.alternatives=[],i.languageIdentification=[]),t.defaults){if(i.channelId="",g.Long){var o=new g.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.isPartial=!1,i.resultId="",g.Long){var o=new g.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.languageCode=""}if(e.alternatives&&e.alternatives.length){i.alternatives=[];for(var u=0;u<e.alternatives.length;++u)i.alternatives[u]=l.SdkTranscriptAlternative.toObject(e.alternatives[u],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(i.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?g.Long.prototype.toString.call(e.endTime):t.longs===Number?new g.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(i.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(i.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?g.Long.prototype.toString.call(e.startTime):t.longs===Number?new g.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){i.languageIdentification=[];for(var u=0;u<e.languageIdentification.length;++u)i.languageIdentification[u]=l.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[u],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),r}(),l.SdkTranscript=function(){function r(n){if(this.results=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscript"),r.prototype.results=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.results!=null&&e.results.length)for(var i=0;i<e.results.length;++i)l.SdkTranscriptResult.encode(e.results[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscript;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(l.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var i=l.SdkTranscriptResult.verify(e.results[t]);if(i)return"results."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscript)return e;var t=new l.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var i=0;i<e.results.length;++i){if(typeof e.results[i]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[i]=l.SdkTranscriptResult.fromObject(e.results[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.results=[]),e.results&&e.results.length){i.results=[];for(var o=0;o<e.results.length;++o)i.results[o]=l.SdkTranscriptResult.toObject(e.results[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),r}(),l.SdkTranscriptionStatus=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptionStatus"),r.prototype.type=1,r.prototype.eventTime=g.Long?g.Long.fromBits(0,0,!1):0,r.prototype.transcriptionRegion="",r.prototype.transcriptionConfiguration="",r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptionStatus;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!g.isInteger(e.eventTime)&&!(e.eventTime&&g.isInteger(e.eventTime.low)&&g.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!g.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!g.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!g.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptionStatus)return e;var t=new l.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(g.Long?(t.eventTime=g.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new g.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.type=t.enums===String?"STARTED":1,g.Long){var o=new g.Long(0,0,!1);i.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.eventTime=t.longs===String?"0":0;i.transcriptionRegion="",i.transcriptionConfiguration="",i.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?l.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:l.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?i.eventTime=t.longs===String?String(e.eventTime):e.eventTime:i.eventTime=t.longs===String?g.Long.prototype.toString.call(e.eventTime):t.longs===Number?new g.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(i.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(i.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="STARTED"]=1,e[n[2]="INTERRUPTED"]=2,e[n[3]="RESUMED"]=3,e[n[4]="STOPPED"]=4,e[n[5]="FAILED"]=5,e}(),r}(),l.SdkTranscriptEvent=function(){function r(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)e[t[i]]!=null&&(this[t[i]]=e[t[i]])}s(r,"SdkTranscriptEvent"),r.prototype.status=null,r.prototype.transcript=null;var n;return Object.defineProperty(r.prototype,"Event",{get:g.oneOfGetter(n=["status","transcript"]),set:g.oneOfSetter(n)}),r.create=s(function(t){return new r(t)},"create"),r.encode=s(function(t,i){return i||(i=m.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&l.SdkTranscriptionStatus.encode(t.status,i.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&l.SdkTranscript.encode(t.transcript,i.uint32(18).fork()).ldelim(),i},"encode"),r.encodeDelimited=s(function(t,i){return this.encode(t,i).ldelim()},"encodeDelimited"),r.decode=s(function(t,i){t instanceof p||(t=p.create(t));for(var o=i===void 0?t.len:t.pos+i,u=new l.SdkTranscriptEvent;t.pos<o;){var h=t.uint32();switch(h>>>3){case 1:{u.status=l.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{u.transcript=l.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(h&7);break}}return u},"decode"),r.decodeDelimited=s(function(t){return t instanceof p||(t=new p(t)),this.decode(t,t.uint32())},"decodeDelimited"),r.verify=s(function(t){if(typeof t!="object"||t===null)return"object expected";var i={};if(t.status!=null&&t.hasOwnProperty("status")){i.Event=1;{var o=l.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(i.Event===1)return"Event: multiple values";i.Event=1;{var o=l.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),r.fromObject=s(function(t){if(t instanceof l.SdkTranscriptEvent)return t;var i=new l.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");i.status=l.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");i.transcript=l.SdkTranscript.fromObject(t.transcript)}return i},"fromObject"),r.toObject=s(function(t,i){i||(i={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=l.SdkTranscriptionStatus.toObject(t.status,i),i.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=l.SdkTranscript.toObject(t.transcript,i),i.oneofs&&(o.Event="transcript")),o},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),r}(),l.SdkTranscriptFrame=function(){function r(n){if(this.events=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptFrame"),r.prototype.events=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.events!=null&&e.events.length)for(var i=0;i<e.events.length;++i)l.SdkTranscriptEvent.encode(e.events[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkTranscriptFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(l.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var i=l.SdkTranscriptEvent.verify(e.events[t]);if(i)return"events."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkTranscriptFrame)return e;var t=new l.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var i=0;i<e.events.length;++i){if(typeof e.events[i]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[i]=l.SdkTranscriptEvent.fromObject(e.events[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.events=[]),e.events&&e.events.length){i.events=[];for(var o=0;o<e.events.length;++o)i.events[o]=l.SdkTranscriptEvent.toObject(e.events[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),r}(),l.SdkRemoteVideoUpdateFrame=function(){function r(n){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkRemoteVideoUpdateFrame"),r.prototype.addedOrUpdatedVideoSubscriptions=g.emptyArray,r.prototype.removedVideoSubscriptionMids=g.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i)l.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[i],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.uint32(18).string(e.removedVideoSubscriptionMids[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkRemoteVideoUpdateFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(l.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var i=l.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(i)return"addedOrUpdatedVideoSubscriptions."+i}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!g.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkRemoteVideoUpdateFrame)return e;var t=new l.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i){if(typeof e.addedOrUpdatedVideoSubscriptions[i]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[i]=l.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[i])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.removedVideoSubscriptionMids[i]=String(e.removedVideoSubscriptionMids[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.addedOrUpdatedVideoSubscriptions=[],i.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){i.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)i.addedOrUpdatedVideoSubscriptions[o]=l.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){i.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)i.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),r}(),l.SdkVideoQualityAdaptationPreference=function(){var r={},n=Object.create(r);return n[r[1]="BALANCED"]=1,n[r[2]="MAINTAIN_FRAMERATE"]=2,n[r[3]="MAINTAIN_RESOLUTION"]=3,n}(),l.SdkVideoSubscriptionConfiguration=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkVideoSubscriptionConfiguration"),r.prototype.mid="",r.prototype.attendeeId="",r.prototype.streamId=0,r.prototype.priority=0,r.prototype.targetBitrateKbps=0,r.prototype.groupId=0,r.prototype.qualityAdaptationPreference=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkVideoSubscriptionConfiguration;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(u&7);break}}if(!o.hasOwnProperty("mid"))throw g.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!g.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!g.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!g.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!g.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!g.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkVideoSubscriptionConfiguration)return e;var t=new l.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.mid="",i.attendeeId="",i.streamId=0,i.priority=0,i.targetBitrateKbps=0,i.groupId=0,i.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(i.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(i.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(i.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(i.qualityAdaptationPreference=t.enums===String?l.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:l.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),r}(),l.SdkNotificationFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkNotificationFrame"),r.prototype.level=3,r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkNotificationFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!g.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkNotificationFrame)return e;var t=new l.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.level=t.enums===String?"ERROR":3,i.message=""),e.level!=null&&e.hasOwnProperty("level")&&(i.level=t.enums===String?l.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:l.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),r.NotificationLevel=function(){var n={},e=Object.create(n);return e[n[1]="INFO"]=1,e[n[2]="WARNING"]=2,e[n[3]="ERROR"]=3,e}(),r}(),l.SdkPrimaryMeetingJoinFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinFrame"),r.prototype.credentials=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&l.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPrimaryMeetingJoinFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.credentials=l.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=l.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkPrimaryMeetingJoinFrame)return e;var t=new l.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=l.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(i.credentials=l.SdkMeetingSessionCredentials.toObject(e.credentials,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),r}(),l.SdkPrimaryMeetingJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPrimaryMeetingJoinAckFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof l.SdkPrimaryMeetingJoinAckFrame?e:new l.SdkPrimaryMeetingJoinAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),r}(),l.SdkPrimaryMeetingLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkPrimaryMeetingLeaveFrame;e.pos<i;){var u=e.uint32();switch(u>>>3){default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof l.SdkPrimaryMeetingLeaveFrame?e:new l.SdkPrimaryMeetingLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),r}(),l.SdkMeetingSessionCredentials=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMeetingSessionCredentials"),r.prototype.attendeeId="",r.prototype.externalUserId="",r.prototype.joinToken="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof p||(e=p.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new l.SdkMeetingSessionCredentials;e.pos<i;){var u=e.uint32();switch(u>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(u&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof p||(e=new p(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!g.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!g.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!g.isString(e.joinToken)?"joinToken: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof l.SdkMeetingSessionCredentials)return e;var t=new l.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.attendeeId="",i.externalUserId="",i.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(i.joinToken=e.joinToken),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,d.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),r}(),l.SdkVideoCodecCapability=function(){var r={},n=Object.create(r);return n[r[1]="VP8"]=1,n[r[2]="H264_BASELINE_PROFILE"]=2,n[r[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,n[r[4]="H264_MAIN_PROFILE"]=4,n[r[5]="H264_HIGH_PROFILE"]=5,n[r[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,n[r[8]="VP9_PROFILE_0"]=8,n[r[11]="AV1_MAIN_PROFILE"]=11,n}(),F.exports=l,g.Long=void 0,d.configure()},7822521824:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(1222670195),g=c(4602188990),l=p(c(8066052849));let r=s(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const i=new m.Sha256(t);return i.update(e),i.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,i,o){return d(this,void 0,void 0,function*(){const u=yield this.hmac(t,"AWS4"+e),h=yield this.hmac(i,u),S=yield this.hmac(o,h);return yield this.hmac("aws4_request",S)})}signURL(e,t,i,o,u,h,S){return d(this,void 0,void 0,function*(){const f=this.getDateTimeString(),v=this.getDateString(f),E="AWS4-HMAC-SHA256";let _="";this.chimeClient.config.region instanceof Function?_=yield this.chimeClient.config.region():_=this.chimeClient.config.region;const T="host",w="host:"+o.toLowerCase()+`
`,M=v+"/"+_+"/"+i+"/aws4_request";let R;this.chimeClient.config.credentials instanceof Function?R=yield this.chimeClient.config.credentials():R=this.chimeClient.config.credentials;let O=new Map;O.set("X-Amz-Algorithm",[E]),O.set("X-Amz-Credential",[encodeURIComponent(R.accessKeyId+"/"+M)]),O.set("X-Amz-Date",[f]),O.set("X-Amz-Expires",["10"]),O.set("X-Amz-SignedHeaders",["host"]),R.sessionToken&&O.set("X-Amz-Security-Token",[encodeURIComponent(R.sessionToken)]),O.set(l.default.X_AMZN_VERSION,[encodeURIComponent(l.default.sdkVersion)]),O.set(l.default.X_AMZN_USER_AGENT,[encodeURIComponent(l.default.sdkUserAgentLowResolution)]),S==null||S.forEach((X,ee)=>{const fe=encodeURIComponent(ee);X.sort().forEach(oe=>{O.has(fe)||O.set(fe,[]),O.get(fe).push(encodeURIComponent(oe))})});let k="";O=new Map([...O.entries()].sort()),O.forEach((X,ee)=>{X.forEach(fe=>{k.length&&(k+="&"),k+=ee+"="+fe})});const A=e+`
`+u+`
`+k+`
`+w+`
`+T+`
`+g.toHex(yield this.hmac(h)),P=g.toHex(yield this.hmac(A)),D=`AWS4-HMAC-SHA256
`+f+`
`+v+"/"+_+"/"+i+`/aws4_request
`+P,H=yield this.getSignatureKey(R.secretAccessKey,v,_,i),j=g.toHex(yield this.hmac(D,H)),W=k+"&X-Amz-Signature="+j;return t+"://"+o+u+"?"+W})}constructor(e){this.chimeClient=e}},"DefaultSigV4");a.default=r},8438160003:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.SimulcastLayers=void 0;var c;(function(d){d[d.Low=0]="Low",d[d.LowAndMedium=1]="LowAndMedium",d[d.LowAndHigh=2]="LowAndHigh",d[d.Medium=3]="Medium",d[d.MediumAndHigh=4]="MediumAndHigh",d[d.High=5]="High"})(c=a.SimulcastLayers||(a.SimulcastLayers={})),a.default=c},6392364773:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AudioLogEvent=void 0;var c;(function(d){d[d.DeviceChanged=0]="DeviceChanged",d[d.MutedLocal=1]="MutedLocal",d[d.UnmutedLocal=2]="UnmutedLocal",d[d.Connected=3]="Connected",d[d.ConnectFailed=4]="ConnectFailed",d[d.RedmicStartLoss=5]="RedmicStartLoss",d[d.RedmicEndLoss=6]="RedmicEndLoss"})(c=a.AudioLogEvent||(a.AudioLogEvent={})),a.default=c},5954709649:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(v,E,_,T){function w(M){return M instanceof _?M:new _(function(R){R(M)})}return s(w,"adopt"),new(_||(_=Promise))(function(M,R){function O(P){try{A(T.next(P))}catch(D){R(D)}}s(O,"fulfilled");function k(P){try{A(T.throw(P))}catch(D){R(D)}}s(k,"rejected");function A(P){P.done?M(P.value):w(P.value).then(O,k)}s(A,"step"),A((T=T.apply(v,E||[])).next())})},p=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(7059763395)),g=p(c(5147189764)),l=p(c(1847926377)),r=p(c(7894724558)),n=p(c(7825873064)),e=p(c(5446246651)),t=p(c(7192341248)),i=p(c(9013967876)),o=c(5391134031),u=c(903520651),h=p(c(6392364773)),S=p(c(4715258780));let f=s(class Zd{toAttribute(E){return this.toSuffix(E).substring(1)}toSuffix(E){return E.toLowerCase()===E?`_${E}`:E.toUpperCase()===E?`_${E.toLowerCase()}`:E.replace(/([A-Z][a-z]+)/g,function(_){return`_${_}`}).replace(/([A-Z][A-Z]+)/g,function(_){return`_${_}`}).toLowerCase()}logLatency(E,_,T){const w=this.toSuffix(E);this.logEventTime("meeting"+w,_,T)}logStateTimeout(E,_){const T=this.toSuffix(E);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},_),{state:`state${T}`}))}logAudioEvent(E,_){const T="audio"+this.toSuffix(h.default[E]);this.logEvent(T,_)}logVideoEvent(E,_){const T="video"+this.toSuffix(S.default[E]);this.logEvent(T,_)}logEventTime(E,_){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const w=Object.assign(Object.assign({},T),{call_id:this.audioVideoController.configuration.meetingId,client_type:Zd.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(w)}`),this.metricsAddTime(E,_,w)}logMeetingSessionStatus(E){const _=`${E.statusCode()}`;this.logEvent(_);const T={status:_,status_code:`${E.statusCode()}`};this.logEvent("meeting_session_status",T),E.isTerminal()&&this.logEvent("meeting_session_stopped",T),E.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",T),E.isFailure()&&this.logEvent("meeting_session_failed",T)}logLifecycleEvent(E,_){const T={lifecycle_event:`lifecycle${this.toSuffix(e.default[E])}`,lifecycle_event_code:`${E}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[_])}`,lifecycle_event_condition_code:`${_}`};this.logEvent("meeting_session_lifecycle",T)}logEvent(E){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const T=Object.assign(Object.assign({},_),{call_id:this.audioVideoController.configuration.meetingId,client_type:Zd.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(T)}`),this.metricsLogEvent(E,T)}start(E,_){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=E,this.videoStreamIndex=_,this.clientMetricReport=new m.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new i.default(this.interval),this.intervalScheduler.start(()=>d(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(E,_){const T=_?this.clientMetricReport.streamMetricReports[Number(E.ssrc)]:this.clientMetricReport.globalMetricReport;let w;_?w=this.clientMetricReport.getMetricMap(T.mediaType,T.direction):w=this.clientMetricReport.getMetricMap();for(const M in E)M in w&&(typeof E[M]=="number"?(T.previousMetrics[M]=T.currentMetrics[M],T.currentMetrics[M]=E[M]):typeof E[M]=="string"?T.currentStringMetrics[M]=E[M]:typeof E[M]=="object"?(T.previousObjectMetrics[M]=T.currentObjectMetrics[M]===void 0?E[M]:T.currentObjectMetrics[M],T.currentObjectMetrics[M]=E[M]):this.logger.error(`Unknown metric value type ${typeof E[M]} for metric ${M}`))}processRawMetricReports(E){this.clientMetricReport.currentSsrcs={};const _=Date.now();for(const T of E){const w=this.isStreamRawMetricReport(T.type);if(w){const M=this.clientMetricReport.streamMetricReports[Number(T.ssrc)];if(M)M.mediaType===l.default.VIDEO&&M.direction===g.default.UPSTREAM?M.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(T.rid):M.streamId=this.videoStreamIndex.streamIdForSSRC(Number(T.ssrc));else{const R=new n.default;R.mediaType=this.getMediaType(T),R.direction=this.getDirectionType(T),R.mediaType===l.default.VIDEO&&R.direction===g.default.UPSTREAM?R.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(T.rid):this.videoStreamIndex.allStreams().empty()||(R.streamId=this.videoStreamIndex.streamIdForSSRC(Number(T.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(R.groupId=this.videoStreamIndex.groupIdForSSRC(Number(T.ssrc)))),this.clientMetricReport.streamMetricReports[Number(T.ssrc)]=R}this.clientMetricReport.currentSsrcs[Number(T.ssrc)]=1}this.updateMetricValues(T,w)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=_,this.clientMetricReport.print()}addStreamMetricDimensionFrames(E,_){const T=this.clientMetricReport.getStreamDimensionMap();for(const w in _.currentStringMetrics)if(w in T){const M=o.SdkStreamDimension.create();M.type=T[w];const R=o.SdkDimensionValue.create();R.stringValue=_.currentStringMetrics[w],M.value=R,E.dimensions.push(M)}}addMetricFrame(E,_,T,w){const M=T.type,R=T.transform,O=T.source,k=_.streamMetricFrames.length,A=_.streamMetricFrames[k-1];if(M){const P=o.SdkMetric.create();P.type=M,P.value=R(O||E,w),w?A.metrics.push(P):_.globalMetrics.push(P)}}addGlobalMetricsToProtobuf(E){const _=this.clientMetricReport.getMetricMap();for(const T in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(T,E,_[T])}addStreamMetricsToProtobuf(E){for(const _ in this.clientMetricReport.streamMetricReports){const T=this.clientMetricReport.streamMetricReports[_],w=o.SdkStreamMetricFrame.create();w.streamId=T.streamId,w.metrics=[],this.addStreamMetricDimensionFrames(w,T),E.streamMetricFrames.push(w);const M=this.clientMetricReport.getMetricMap(T.mediaType,T.direction);for(const R in T.currentMetrics)this.addMetricFrame(R,E,M[R],Number(_));for(const R in T.currentStringMetrics)this.addMetricFrame(R,E,M[R],Number(_));for(const R in T.currentObjectMetrics)this.addMetricFrame(R,E,M[R],Number(_))}}makeClientMetricProtobuf(){const E=o.SdkClientMetricFrame.create();return E.globalMetrics=[],E.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(E),this.addStreamMetricsToProtobuf(E),E}sendClientMetricProtobuf(E){this.signalingClient.sendClientMetrics(E)}isStreamRawMetricReport(E){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(E)}getMediaType(E){return E.kind==="audio"?l.default.AUDIO:l.default.VIDEO}getDirectionType(E){const{type:_}=E;return _==="inbound-rtp"||_==="remote-outbound-rtp"||_==="inbound-rtp-red"?g.default.DOWNSTREAM:g.default.UPSTREAM}isValidStandardRawMetric(E){return E.type==="inbound-rtp"||E.type==="inbound-rtp-red"||E.type==="outbound-rtp"||E.type==="remote-inbound-rtp"||E.type==="remote-outbound-rtp"||E.type==="candidate-pair"&&E.state==="succeeded"||E.type==="media-source"&&E.kind==="audio"}isValidSsrc(E){let _=!0;return this.isStreamRawMetricReport(E.type)&&this.getDirectionType(E)===g.default.DOWNSTREAM&&this.getMediaType(E)===l.default.VIDEO&&(_=this.videoStreamIndex.streamIdForSSRC(Number(E.ssrc))>0),_}isValidRawMetricReport(E){return this.isValidStandardRawMetric(E)&&this.isValidSsrc(E)}filterRawMetricReports(E){const _=[];for(const T of E)this.isValidRawMetricReport(T)&&_.push(T);return _}handleRawMetricReports(E){const _=this.filterRawMetricReports(E);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(_)}`);const T=[];this.maybeAddRedRecoveryMetrics(T),this.addVideoCodecDegradationMetrics(T),this.clientMetricReport.customStatsReports=T,_.push(...T),this.processRawMetricReports(_);const w=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(w),this.audioVideoController.forEachObserver(M=>{u.Maybe.of(M.metricsDidReceive).map(R=>R.bind(M)(this.clientMetricReport.clone()))})}getStatsWrapper(){return d(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const E=[];try{const _=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=_,_.forEach(T=>{E.push(T)}),this.handleRawMetricReports(E)}catch(_){this.logger.error(_.message)}})}overrideObservableMetric(E,_){this.clientMetricReport.overrideObservableMetric(E,_)}recoveryMetricsDidReceive(E){this.redRecoveryMetricReport=E}maybeAddRedRecoveryMetrics(E){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(E.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(E){const _=this.clientMetricReport.getVideoUpstreamSsrc();_!==null&&E.push({kind:"video",type:"outbound-rtp",ssrc:_,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}constructor(E,_,T=Zd.INTERVAL_MS){this.audioVideoController=E,this.logger=_,this.interval=T,this.intervalScheduler=null,this.redRecoveryMetricReport=new r.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.metricsAddTime=(w,M,R)=>{},this.metricsLogEvent=(w,M)=>{}}},"StatsCollector");a.default=f,f.INTERVAL_MS=1e3,f.CLIENT_TYPE="amazon-chime-sdk-js"},4715258780:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VideoLogEvent=void 0;var c;(function(d){d[d.InputAttached=0]="InputAttached",d[d.SendingFailed=1]="SendingFailed",d[d.SendingSuccess=2]="SendingSuccess"})(c=a.VideoLogEvent||(a.VideoLogEvent={})),a.default=c},7063021350:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(4715258780)),g=p(c(516529594));let l=s(class extends g.default{run(){return d(this,void 0,void 0,function*(){const n=this.context.transceiverController;n.setPeer(this.context.peer),n.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const i=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield n.setAudioInput(i.length?i[0]:null)}else yield n.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const i=t.getVideoTracks(),o=i.length?i[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield n.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const u=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();n.setEncodingParameters(u)}o&&this.context.statsCollector.logVideoEvent(m.default.InputAttached,this.context.videoDeviceInformation)}else yield n.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=n.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()})}setAudioCodecPreferences(){const n=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!n){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:i}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(i,null,4)}`);const o=i.findIndex(u=>u.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const u=i[o];i.splice(o,1),e?(i.unshift(u),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(i);return}this.context.logger.info("audio/red codec not supported")}constructor(n){super(n.logger),this.context=n,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");a.default=l},516529594:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(2913368614)),g=p(c(9293073193));let l=s(class{once(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return new m.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(n){this.parentTask=n}getStatus(){return this.status}logAndThrow(n){throw this.logger.info(n),new Error(n)}baseRun(n){return d(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case g.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case g.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case g.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=g.default.RUNNING,yield n.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==g.default.CANCELED&&(this.status=g.default.FINISHED)}})}baseCancel(n){if(this.status===g.default.CANCELED||this.status===g.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=g.default.CANCELED,n.call(this)}constructor(n){this.logger=n,this.taskName="BaseTask",this.parentTask=null,this.status=g.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");a.default=l},4019918320:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(516529594));let g=s(class extends m.default{run(){return d(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(r){super(r.logger),this.context=r,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");a.default=g},7819987893:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(426218501)),g=p(c(516529594));let l=s(class extends g.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(n){throw n}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const n=this.context.videoTileController.getLocalVideoTile();n&&n.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((n,e)=>{let t=s(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(u){u.type===m.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),n())}constructor(u){this.signalingClient=u}},"Interceptor");const i=new t(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)})}constructor(n){super(n.logger),this.context=n,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");a.default=l},2918138407:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(516529594));let g=s(class extends m.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const r in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[r]()}addPeerConnectionEventLogger(){const r=this.context.peer;r.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${r.connectionState}`)}),r.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),r.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${r.iceGatheringState}`)}),r.addEventListener("icecandidate",n=>{this.context.logger.info(`peer connection ice candidate: ${n.candidate?n.candidate.candidate:"(null)"}`)}),r.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${r.iceConnectionState}`)})}run(){return d(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const n=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};n.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),n.sdpSemantics="unified-plan",n.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(n),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(r){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(r)):!1}addRemoteVideoTrack(r,n){var e;const t=n.id,i=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,u;if(this.context.videoTileController.getVideoTileForAttendeeId?(u=this.context.videoTileController.getVideoTileForAttendeeId(i),o=!!(!((e=u==null?void 0:u.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(i),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${i}`);return}u||(u=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${u.id()}`));let h=this.context.videoStreamIndex.streamIdForTrack(t);typeof h>"u"&&(this.logger.warn(`stream not found for tile=${u.id()} track=${t}`),h=null);let S=this.context.videoStreamIndex.groupIdForStreamId(h);S===void 0&&(S=null);for(let M=0;M<this.trackEvents.length;M++){const R=this.trackEvents[M],O=n.getVideoTracks();if(O&&O.length){const k=O[0],A=s(()=>{this.context.logger.info(`received the ${R} event for tile=${u.id()} id=${r.id} streamId=${h}`),R==="ended"&&this.removeRemoteVideoTrack(r,u.state())},"callback");k.addEventListener(R,A),this.removeVideoTrackEventListeners[r.id]||(this.removeVideoTrackEventListeners[r.id]=[]),this.removeVideoTrackEventListeners[r.id].push(()=>{k.removeEventListener(R,A)})}}let f,v;if(r.getSettings){const M=r.getSettings();f=M.width,v=M.height}else{const M=r.getCapabilities();f=M.width,v=M.height}const E=this.context.videoStreamIndex.externalUserIdForTrack(t);u.bindVideoStream(i,!1,n,f,v,h,E,S),this.logger.info(`video track added, use tile=${u.id()} track=${t} streamId=${h} groupId=${S}`);const _="removetrack",T=n,w=s(()=>this.removeRemoteVideoTrack(r,u.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[r.id]=()=>{T.removeEventListener(_,w),delete this.removeTrackRemovedEventListeners[r.id]},T.addEventListener(_,w)}removeRemoteVideoTrack(r,n){if(this.removeTrackRemovedEventListeners.hasOwnProperty(r.id)){this.removeTrackRemovedEventListeners[r.id]();for(const e of this.removeVideoTrackEventListeners[r.id])e();delete this.removeVideoTrackEventListeners[r.id]}this.logger.info(`video track ended, removing tile=${n.tileId} id=${r.id} stream=${n.streamId}`),n.streamId?this.context.videosPaused.remove(n.streamId):this.logger.warn(`no stream found for tile=${n.tileId}`),this.context.videoTileController.removeVideoTile(n.tileId)}constructor(r){super(r.logger),this.context=r,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=n=>{const e=n.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),n.transceiver&&n.transceiver.currentDirection==="inactive")return;if(n.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=n.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");a.default=g,g.REMOVE_HANDLER_INTERVAL_MS=1e4},7869625838:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(4882394368)),g=p(c(3430379175)),l=p(c(516529594));let r=s(class extends l.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const i=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||i;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${i})`),o}run(){return d(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,i)=>d(this,void 0,void 0,function*(){this.cancelPromise=o=>{i(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new g.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,i(o);return}t()}catch(o){i(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");a.default=r},9613312866:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(4882394368)),g=p(c(3430379175)),l=p(c(516529594));let r=s(class HS extends l.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return d(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new g.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new g.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=i=>{this.removeEventListener(),t(i)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=i=>{if(this.context.logger.info(`ice candidate: ${i.candidate?i.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),i.candidate&&(g.default.isRTPCandidate(i.candidate.candidate)&&this.context.iceCandidates.push(i.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new g.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=HS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");a.default=r,r.CHROME_VPN_TIMEOUT_MS=5e3},1495317641:function(F,a,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(f,v,E,_){_===void 0&&(_=E),Object.defineProperty(f,_,{enumerable:!0,get:function(){return v[E]}})}:function(f,v,E,_){_===void 0&&(_=E),f[_]=v[E]}),p=this&&this.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),m=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var v={};if(f!=null)for(var E in f)E!=="default"&&Object.prototype.hasOwnProperty.call(f,E)&&d(v,f,E);return p(v,f),v},g=this&&this.__awaiter||function(f,v,E,_){function T(w){return w instanceof E?w:new E(function(M){M(w)})}return s(T,"adopt"),new(E||(E=Promise))(function(w,M){function R(A){try{k(_.next(A))}catch(P){M(P)}}s(R,"fulfilled");function O(A){try{k(_.throw(A))}catch(P){M(P)}}s(O,"rejected");function k(A){A.done?w(A.value):T(A.value).then(R,O)}s(k,"step"),k((_=_.apply(f,v||[])).next())})},l=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(a,"__esModule",{value:!0});const r=l(c(3777990285)),n=l(c(4882394368)),e=l(c(7999114886)),t=m(c(1448262436)),i=l(c(426218501)),o=l(c(9315300759)),u=c(5391134031),h=l(c(516529594));let S=s(class extends h.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return g(this,void 0,void 0,function*(){const v=yield new Promise((E,_)=>{const T=this.context;T.turnCredentials=null;let w=s(class{cancel(){this.signalingClient.removeObserver(this),_(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(k){if(k.type===i.default.WebSocketClosed){let P=`The signaling connection was closed with code ${k.closeCode} and reason: ${k.closeReason}`;T.logger.warn(P);let D=n.default.SignalingBadRequest;k.closeCode===4410?(P="The meeting already ended.",T.logger.warn(P),D=n.default.MeetingEnded):k.closeCode>=4500&&k.closeCode<4600&&(D=n.default.SignalingInternalServerError),T.audioVideoController.handleMeetingSessionStatus(new r.default(D),new Error(P));return}if(k.type!==i.default.ReceivedSignalFrame)return;if(k.message.type===u.SdkSignalFrame.Type.JOIN_ACK){const P=k.message.joinack;if(!P){T.audioVideoController.handleMeetingSessionStatus(new r.default(n.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(P.videoSubscriptionLimit&&(T.videoSubscriptionLimit=P.videoSubscriptionLimit),T.serverSupportsCompression=P.wantsCompressedSdp,P.defaultServerSideNetworkAdaption!==void 0&&P.defaultServerSideNetworkAdaption!==t.default.Default&&T.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const D=P.defaultServerSideNetworkAdaption;T.logger.info(`Overriding server side network adaption value to ${D}`),T.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(D))}P&&P.turnCredentials?(T.turnCredentials=new e.default,T.turnCredentials.username=P.turnCredentials.username,T.turnCredentials.password=P.turnCredentials.password,T.turnCredentials.ttl=P.turnCredentials.ttl,T.turnCredentials.uris=P.turnCredentials.uris.map(D=>T.meetingSessionConfiguration.urls.urlRewriter(D)).filter(D=>!!D)):T.logger.error("missing TURN credentials in JoinAckFrame");return}if(k.message.type!==u.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const A=k.message.index;E(A)}constructor(k){this.signalingClient=k}},"IndexFrameInterceptor");const M=new w(this.context.signalingClient);this.context.signalingClient.registerObserver(M),this.taskCanceler=M,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const R=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(R.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),R.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(R.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),R.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(R)});this.context.logger.info(`received first index ${JSON.stringify(v)}`),this.context.indexFrame=v})}constructor(v){super(v.logger),this.context=v,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");a.default=S},5110013894:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(426218501)),g=c(5391134031),l=p(c(516529594));let r=s(class extends l.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let i=s(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(h){if(h.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}h.type===m.default.ReceivedSignalFrame&&h.message.type===g.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(h,S){this.signalingClient=h,this.logger=S}},"Interceptor");const o=new i(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");a.default=r},3708122413:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(426218501)),g=c(5391134031),l=p(c(516529594));let r=s(class extends l.default{run(){return d(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===m.default.ReceivedSignalFrame){if(e.message.type===g.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===g.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");a.default=r},1504187181:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(_,T,w,M){function R(O){return O instanceof w?O:new w(function(k){k(O)})}return s(R,"adopt"),new(w||(w=Promise))(function(O,k){function A(H){try{D(M.next(H))}catch(j){k(j)}}s(A,"fulfilled");function P(H){try{D(M.throw(H))}catch(j){k(j)}}s(P,"rejected");function D(H){H.done?O(H.value):R(H.value).then(A,P)}s(D,"step"),D((M=M.apply(_,T||[])).next())})},p=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(5147189764)),g=p(c(1847926377)),l=p(c(8929805428)),r=p(c(2115341037)),n=p(c(5928001672)),e=p(c(6005421222)),t=p(c(3777990285)),i=p(c(4882394368)),o=p(c(4883941895)),u=p(c(426218501)),h=c(5391134031),S=p(c(6392364773)),f=c(903520651),v=p(c(516529594));let E=s(class extends v.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return d(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(T){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(T){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=T;return}else this.pendingMetricsReport=void 0;const w=T.getObservableMetrics(),M=w.availableOutgoingBitrate,R=w.nackCountReceivedPerSecond;let O=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(T);const k=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(O=O||k,k){const A=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=A.truncate(this.context.videoSubscriptionLimit),A.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${k}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:M/1e3,nackCountPerSecond:R});const A=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();O=O||A,A&&(this.logger.info(`trigger resubscribe for up=${A}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return O}metricsDidReceive(T){if(this.checkResubscribe(T)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const w=T.streamMetricReports,M=new Map;for(const R in w)w[R].mediaType===g.default.VIDEO&&w[R].direction===m.default.DOWNSTREAM&&M.set(w[R].streamId,w[R])}connectionHealthDidChange(T){T.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,T,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,T,()=>{var w;this.context.poorConnectionCount+=1;const M=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(w=this.context.eventController)===null||w===void 0||w.publishEvent("receivingAudioDropped",M),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(R=>{f.Maybe.of(R.connectionDidSuggestStopVideo).map(O=>O.bind(R)())}):this.context.audioVideoController.forEachObserver(R=>{f.Maybe.of(R.connectionDidBecomePoor).map(O=>O.bind(R)())})},()=>{this.context.audioVideoController.forEachObserver(w=>{f.Maybe.of(w.connectionDidBecomeGood).map(M=>M.bind(w)())})});for(const w of this.videoEncodingHealthPolicies)this.applyHealthPolicy(w,T,()=>{switch(this.degradeVideoCodec(w.name),w.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,T,()=>{var w;const M=this.generateBaseAudioVideoEventAttributes();(w=this.context.eventController)===null||w===void 0||w.publishEvent("sendingAudioFailed",M)},()=>{var w;const M=this.generateBaseAudioVideoEventAttributes();(w=this.context.eventController)===null||w===void 0||w.publishEvent("sendingAudioRecovered",M)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(T){this.isMeetingConnected=!1}audioVideoDidStop(T){this.isMeetingConnected=!1}applyHealthPolicy(T,w,M,R){T.update(w);const O=T.healthIfChanged();O!==null&&(this.logger.info(`${T.name} value is now ${O}`),O<=T.minimumHealth()?f.Maybe.of(M).map(k=>k.bind(this)()):f.Maybe.of(R).map(k=>k.bind(this)()))}handleBitrateFrame(T){this.currentAvailableStreamAvgBitrates=T,T.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${T.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",T.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(T){var w;if(T.type===u.default.WebSocketClosed&&(T.closeCode===4410||T.closeCode>=4500&&T.closeCode<4600)||T.type===u.default.WebSocketError||T.type===u.default.WebSocketFailed){if(!this.hasSignalingError){const M=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(w=this.context.eventController)===null||w===void 0||w.publishEvent("signalingDropped",M),this.hasSignalingError=!0}}else T.type===u.default.WebSocketOpen&&(this.hasSignalingError=!1);if(T.type===u.default.ReceivedSignalFrame){if(T.message.type===h.SdkSignalFrame.Type.NOTIFICATION){switch(T.message.notification.level){case h.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${T.message.notification.message}`);break;case h.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${T.message.notification.message}`);break;case h.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${T.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${T.message.notification.level}: ${T.message.notification.message}`);break}return}if(T.message.bitrates){const R=T.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(R),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(T.message.bitrates)}const M=t.default.fromSignalFrame(T.message);T.message.type!==h.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&M.statusCode()!==i.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(M,null)}}degradeVideoCodec(T){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const w=[];for(const M of this.context.videoSendCodecPreferences)M.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||w.push(M);w.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${w[0].codecName} due to ${T}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=w,this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(M=>M.codecName).join(",")}`)}}constructor(T,w,M){super(T.logger),this.context=T,this.initialConnectionHealthData=M,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=R=>{const O=R<1,k=this.prevSignalStrength<1,A=O?k?null:S.default.RedmicStartLoss:k?S.default.RedmicEndLoss:null;A&&this.context.statsCollector.logAudioEvent(A),this.prevSignalStrength=R},this.realtimeFatalErrorCallback=R=>{this.logger.error(`realtime error: ${R}: ${R.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.RealtimeApiFailed),R)},this.realtimeAttendeeIdPresenceHandler=(R,O)=>{var k;const A=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${A}`),A===R&&O&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(k=this.context.eventController)===null||k===void 0||k.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:R,startTimeMs:O,iceGatheringDurationMs:k,attendeePresenceDurationMs:A,meetingStartDurationMs:P}=this.context;return{meetingDurationMs:O===null?0:Math.round(Date.now()-O),signalingOpenDurationMs:R,iceGatheringDurationMs:k,attendeePresenceDurationMs:A,meetingStartDurationMs:P}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const R=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},R),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new l.default(T.logger,Object.assign({},w),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new n.default(Object.assign({},w),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new r.default(T.logger,Object.assign({},w),this.initialConnectionHealthData.clone());for(const R of w.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new R(Object.assign({},w),this.initialConnectionHealthData.clone()))}},"MonitorTask");a.default=E},1992142375:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(p){}},"NoOpTask");a.default=c},2913368614:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(3756404293)),m=d(c(3741513515));let g=s(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const r of this.dependencies)r.cancel();this.logger.info(`Canceling ${this.name()}`),m.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&m.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>p.default.INFO||!this.dependencies)return;const r=this.dependencies.filter(n=>n).map(n=>n.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${r}`)}run(){if(this.promise)return this.promise;const r=this.dependencies?Promise.all(this.dependencies.map(n=>n==null?void 0:n.run())):Promise.resolve();return this.logDependencies(),this.ongoing=r.then(()=>this.task.run()),this.promise=new Promise((n,e)=>{this.cancelPromise=e,this.ongoing.then(n).catch(e)})}setParent(r){this.task.setParent(r)}constructor(r,n,e){this.logger=r,this.task=n,this.dependencies=e,this.canceled=!1}},"OnceTask");a.default=g},6907504899:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(893025464)),g=p(c(426218501)),l=p(c(516529594));let r=s(class extends l.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new m.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((i,o)=>{let u=s(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(f){switch(f.type){case g.default.WebSocketOpen:this.signalingClient.removeObserver(this),i();break;case g.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(f){this.signalingClient=f}},"WebSocketOpenInterceptor");const h=new u(this.context.signalingClient);this.context.signalingClient.registerObserver(h),this.taskCanceler=h})}catch(i){throw i}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");a.default=r},6015743885:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(516529594));let g=s(class extends m.default{cancel(){for(const r of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${r.name()}`),r.cancel()}run(){return d(this,void 0,void 0,function*(){const r=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),r.push(e.run());const n=[];for(let e=0;e<r.length;e++){try{yield r[e]}catch(t){n.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(n.length>0){const e=n.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(r,n,e){super(r),this.taskName=n,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");a.default=g},3627106901:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(e,t,i,o){function u(h){return h instanceof i?h:new i(function(S){S(h)})}return s(u,"adopt"),new(i||(i=Promise))(function(h,S){function f(_){try{E(o.next(_))}catch(T){S(T)}}s(f,"fulfilled");function v(_){try{E(o.throw(_))}catch(T){S(T)}}s(v,"rejected");function E(_){_.done?h(_.value):u(_.value).then(f,v)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(7164668892),g=p(c(426218501)),l=c(5391134031),r=p(c(516529594));let n=s(class extends r.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,i)=>{let o=s(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===g.default.ReceivedSignalFrame&&S.message.type===l.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(m.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,f,v){this.signalingClient=S,this.completionCallback=f,this.logger=v}},"Interceptor");const u=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=u,this.context.signalingClient.registerObserver(u)})}constructor(t,i,o){super(t.logger),this.context=t,this.credentials=i,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");a.default=n},3151098372:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(516529594));let g=s(class extends m.default{run(){var r,n;return d(this,void 0,void 0,function*(){if(!(!((n=(r=this.context.meetingSessionConfiguration)===null||r===void 0?void 0:r.urls)===null||n===void 0)&&n.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(r){super(r.logger),this.context=r,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");a.default=g},9363406688:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(426218501)),g=c(5391134031),l=p(c(516529594));let r=s(class extends l.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return d(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}updateSubscribedGroupdIds(e){const t=new Set;for(const i of e){const o=this.context.videoStreamIndex.attendeeIdForGroupId(i);if(o.length===0){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${i}`);continue}let u=this.context.videoTileController.getVideoTileForAttendeeId(o);u===void 0&&(this.logger.info(`No existing video tile for attendee ID ${o} with new group ID ${i}. Creating new one.`),u=this.context.videoTileController.addVideoTile(),u.bindVideoStream(o,!1,null,0,0,0,null)),t.add(u.id())}this.serverPausedVideoTileIds.forEach(i=>{t.has(i)||this.serverPausedVideoTileIds.delete(i)})}handleSignalingClientEvent(e){if(e.type!==m.default.ReceivedSignalFrame||e.message.type!==g.SdkSignalFrame.Type.PAUSE&&e.message.type!==g.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,i=e.message.type;if(this.logger.info(`Received new ${i===g.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(u=>{const h=this.context.videoStreamIndex.attendeeIdForGroupId(u);if(h.length===0){this.logger.warn(`Could not find attendee ID for paused group ID ${u}`);return}return this.context.videoTileController.getVideoTileForAttendeeId(h)});for(const u of o)u!==void 0&&(i===g.SdkSignalFrame.Type.PAUSE?u.state().paused||(this.serverPausedVideoTileIds.add(u.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(h=>{h.tileWillBePausedByDownlinkPolicy(u.id())}),u.pause()):u.state().paused&&this.serverPausedVideoTileIds.has(u.id())&&(this.serverPausedVideoTileIds.delete(u.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(h=>{h.tileWillBeUnpausedByDownlinkPolicy(u.id())}),u.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");a.default=r},6069988831:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(4599834734)),g=c(5391134031),l=p(c(516529594));let r=s(class extends l.default{checkAndApplyVideoConstraint(e,t,i,o,u){return d(this,void 0,void 0,function*(){const h=t.getSettings();let S;if(e?S=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:S=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,i>S.videoWidth||o>S.videoHeight||u>S.videoFrameRate){const f={width:{ideal:S.videoWidth},height:{ideal:S.videoHeight},frameRate:{ideal:S.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(f)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(h)}`);try{yield t.applyConstraints(f)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return d(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===g.SdkStreamServiceType.RX||this.context.videoDuplexMode===g.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?g.SdkStreamServiceType.DUPLEX:g.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?g.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let i;try{i=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=i,i){const o=i.getVideoTracks();if(!o||o.length===0)return;const u=this.context.meetingSessionConfiguration.credentials.attendeeId,h=new m.default(u).hasModality(m.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(h,o[0],S.width,S.height,S.frameRate);const f=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(u,!0,i,S.width,S.height,null,f);for(const v of o)this.logger.info(`Using video device label=${v.label} id=${v.id}`),this.context.videoDeviceInformation.current_camera_name=v.label,this.context.videoDeviceInformation.current_camera_id=v.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");a.default=r},2452872079:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(o,u,h,S){function f(v){return v instanceof h?v:new h(function(E){E(v)})}return s(f,"adopt"),new(h||(h=Promise))(function(v,E){function _(M){try{w(S.next(M))}catch(R){E(R)}}s(_,"fulfilled");function T(M){try{w(S.throw(M))}catch(R){E(R)}}s(T,"rejected");function w(M){M.done?v(M.value):f(M.value).then(_,T)}s(w,"step"),w((S=S.apply(o,u||[])).next())})},p=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(1880578541)),g=p(c(4599834734)),l=p(c(4883941895)),r=p(c(426218501)),n=c(5391134031),e=c(903520651),t=p(c(516529594));let i=s(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return d(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(u){if(u.type!==r.default.ReceivedSignalFrame||u.message.type!==n.SdkSignalFrame.Type.INDEX)return;const h=u.message.index;this.context.logger.info(`received new index ${JSON.stringify(h)}`),this.handleIndexFrame(h)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(u){if(!u)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=u;return}else this.pendingIndex=null;const h=this.context.audioVideoController.configuration.credentials.attendeeId;u.sources=u.sources.filter(T=>{const w=new g.default(T.attendeeId);return!(w.base()===h&&w.hasModality(g.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:f,videoUplinkBandwidthPolicy:v}=this.context,E=S.allVideoSendingSourcesExcludingSelf(h);S.integrateIndexFrame(u),f.updateIndex(S),v.updateIndex(S),this.resubscribe(f,v),this.updateVideoAvailability(u),this.handleIndexVideosPausedAtSource(),u.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(u);const _=S.allVideoSendingSourcesExcludingSelf(h);this.areVideoSourcesEqual(E,_)||this.context.audioVideoController.forEachObserver(T=>{e.Maybe.of(T.remoteVideoSourcesDidChange).map(w=>w.bind(T)(_))})}areVideoSourcesEqual(u,h){if(u.length!==h.length)return!1;const S=s((E,_)=>E.attendee.attendeeId.localeCompare(_.attendee.attendeeId),"compare"),f=[...u].sort(S),v=[...h].sort(S);for(let E=0;E<f.length;E++)if(f[E].attendee.attendeeId!==v[E].attendee.attendeeId)return!1;return!0}resubscribe(u,h){const S=u.wantsResubscribe(),f=(this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX)&&h.wantsResubscribe(),v=S||f;if(this.logger.info(`should resubscribe: ${v} (downlink: ${S} uplink: ${f})`),!v)return;const E=u.chooseSubscriptions();this.context.videosToReceive=E.truncate(this.context.videoSubscriptionLimit),E.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=h.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${f} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(u){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const h=new m.default;h.remoteVideoAvailable=!this.context.videosToReceive.empty(),h.canStartLocalVideo=!u.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(h))&&(this.context.lastKnownVideoAvailability=h.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(f=>f.bind(S)(h.clone()))}))}handleSupportedVideoReceiveCodecIntersection(u){if(this.context.videoSendCodecPreferences===void 0)return;const h=[];let S=!1;for(const f of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(v=>f.equals(v))){this.logger.info(`Skipping ${f.codecName} since the codec has been identfied as degraded`);continue}for(const v of u.supportedReceiveCodecIntersection)if(f.equals(l.default.fromSignaled(v))){h.push(f);break}}if(h.length>0){const f=h.find(v=>this.context.prioritizedSendVideoCodecCapabilities.some(E=>v.equals(E)));this.context.currentVideoSendCodec!==void 0&&(f===void 0||!this.context.currentVideoSendCodec.equals(f))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=h}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const u=this.context.videoStreamIndex.streamsPausedAtSource();for(const h of this.context.videoTileController.getAllVideoTiles()){const S=h.state();u.contain(S.streamId)?h.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):h.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(u){super(u.logger),this.context=u,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");a.default=i},6771673942:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(516529594));let m=s(class extends p.default{run(){return this.fn().then(()=>{})}constructor(l,r,n="RunnableTask"){super(l),this.fn=r,this.taskName=n}},"RunnableTask");a.default=m},2471283351:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(e,t,i,o){function u(h){return h instanceof i?h:new i(function(S){S(h)})}return s(u,"adopt"),new(i||(i=Promise))(function(h,S){function f(_){try{E(o.next(_))}catch(T){S(T)}}s(f,"fulfilled");function v(_){try{E(o.throw(_))}catch(T){S(T)}}s(v,"rejected");function E(_){_.done?h(_.value):u(_.value).then(f,v)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(1766966835)),g=p(c(426218501)),l=c(5391134031),r=p(c(516529594));let n=s(class ph extends r.default{run(){return d(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===g.default.ReceivedSignalFrame&&t.message.type===l.SdkSignalFrame.Type.DATA_MESSAGE)for(const i of t.message.dataMessage.messages){const o=new m.default(i.ingestTimeNs/1e6,i.topic,i.data,i.senderAttendeeId,i.senderExternalUserId,i.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,i,o){if(!ph.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(i.length>ph.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(i,o,u)=>{if(this.context.signalingClient.ready()){let h;o instanceof Uint8Array?h=o:typeof o=="string"?h=new TextEncoder().encode(o):h=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(i,h,u);const S=l.SdkDataMessagePayload.create();S.topic=i,S.lifetimeMs=u,S.data=h;const f=l.SdkDataMessageFrame.create();f.messages=[S],this.context.signalingClient.sendDataMessage(f)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");a.default=n,n.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),n.DATA_SIZE=2048},3894566132:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(516529594)),g=p(c(9293073193));let l=s(class extends m.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return d(this,void 0,void 0,function*(){for(const n of this.tasksToRunSerially){this.getStatus()===g.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${n.name()}`),this.currentTask=n,yield n.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${n.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const i of t)i.setParent(this)}},"SerialGroupTask");a.default=l},6412210284:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(e,t,i,o){function u(h){return h instanceof i?h:new i(function(S){S(h)})}return s(u,"adopt"),new(i||(i=Promise))(function(h,S){function f(_){try{E(o.next(_))}catch(T){S(T)}}s(f,"fulfilled");function v(_){try{E(o.throw(_))}catch(T){S(T)}}s(v,"rejected");function E(_){_.done?h(_.value):u(_.value).then(f,v)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8351168186)),g=p(c(4599834734)),l=p(c(3430379175)),r=p(c(516529594));let n=s(class extends r.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return d(this,void 0,void 0,function*(){const t=this.context.peer;let o=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(o=new l.default(o).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(o=new l.default(o).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new m.default().requiresDisablingH264Encoding()&&(o=new l.default(o).removeH264SupportFromSendSection().sdp);const u=this.context.audioVideoController.configuration.credentials.attendeeId;if(new g.default(u).hasModality(g.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(o=new l.default(o).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new l.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(o=new l.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new l.default(o).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const f=new l.default(o).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(f)}this.logger.debug(()=>`local description is >>>${o}<<<`);const S={type:"offer",sdp:o,toJSON:null};yield new Promise((f,v)=>d(this,void 0,void 0,function*(){this.cancelPromise=E=>{v(E)};try{yield t.setLocalDescription(S),f()}catch(E){v(E)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");a.default=n},839180639:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(e,t,i,o){function u(h){return h instanceof i?h:new i(function(S){S(h)})}return s(u,"adopt"),new(i||(i=Promise))(function(h,S){function f(_){try{E(o.next(_))}catch(T){S(T)}}s(f,"fulfilled");function v(_){try{E(o.throw(_))}catch(T){S(T)}}s(v,"rejected");function E(_){_.done?h(_.value):u(_.value).then(f,v)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(4599834734)),g=p(c(3430379175)),l=p(c(4883941895)),r=p(c(516529594));let n=s(class extends r.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return d(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new g.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new g.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new g.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new g.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new g.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const u=this.context.activeVideoInput;if(u!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,f=new m.default(S).hasModality(m.default.MODALITY_CONTENT),v=u.getVideoTracks()[0];f&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===l.default.av1Main().codecName?(v.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(v.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const h={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(h)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((i,o)=>d(this,void 0,void 0,function*(){const u=s(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",u),i())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",u),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",u);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),u()}catch(h){o(h)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");a.default=n},2641934340:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(S,f,v,E){function _(T){return T instanceof v?T:new v(function(w){w(T)})}return s(_,"adopt"),new(v||(v=Promise))(function(T,w){function M(k){try{O(E.next(k))}catch(A){w(A)}}s(M,"fulfilled");function R(k){try{O(E.throw(k))}catch(A){w(A)}}s(R,"rejected");function O(k){k.done?T(k.value):_(k.value).then(M,R)}s(O,"step"),O((E=E.apply(S,f||[])).next())})},p=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(3777990285)),g=p(c(4882394368)),l=p(c(3430379175)),r=p(c(9675039205)),n=c(1448262436),e=p(c(426218501)),t=p(c(1026405281)),i=c(5391134031),o=c(6700033168),u=p(c(516529594));let h=s(class extends u.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return d(this,void 0,void 0,function*(){let f="";if(this.context.peer&&this.context.peer.localDescription&&(f=new l.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let O=0,k=0;this.context.videoCaptureAndEncodeParameter&&(O=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),k=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const A={rid:"hi",maxBitrate:k*1e3,maxFramerate:O,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([A])}const v=this.fixUpSubscriptionOrder(f,this.context.videoSubscriptions),E=this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX;let _,T=f;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(T=new l.default(T).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const O=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";_=this.textCompressor.compress(T,O),this.context.logger.info(`Compressed the SDP message from ${T.length} to ${_.length} bytes.`),f=""}this.context.previousSdpOffer=new l.default(f);const w=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,f,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,v,E,this.context.videoStreamIndex.localStreamDescriptions(),!0,_);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!n.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(w.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,v.map(O=>O===0?0:this.context.videoStreamIndex.groupIdForStreamId(O)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(w)}`),this.context.signalingClient.subscribe(w);const M=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(M)}`);let R="";M.compressedSdpAnswer&&M.compressedSdpAnswer.length?(R=this.textCompressor.decompress(M.compressedSdpAnswer,this.context.previousSdpAnswerAsString),R.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${M.compressedSdpAnswer.length} to ${R.length} bytes.`),this.context.sdpAnswer=R):this.context.sdpAnswer=M.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(M)})}fixUpSubscriptionOrder(f,v){if(this.context.transceiverController.getMidForStreamId===void 0)return v;const E=new Map;for(const w of v){const M=this.context.transceiverController.getMidForStreamId(w);if(M===void 0){w!==0&&this.logger.warn(`Could not find MID for stream ID: ${w}`);continue}E.set(M,w)}const _=new l.default(f).mediaSections(),T=[];for(const w of _)if(w.mediaType==="video")if(w.direction==="recvonly"){const M=E.get(w.mid);if(M===void 0){this.logger.warn(`Could not find stream ID for MID: ${w.mid}`);continue}T.push(M)}else T.push(0);return this.logger.info(`Fixed up ${JSON.stringify(v)} to ${JSON.stringify(T)} (may be same))}`),T}receiveSubscribeAck(){return new Promise((f,v)=>{const E=this.context;let _=s(class{cancel(){this.signalingClient.removeObserver(this),v(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(M){if(M.isConnectionTerminated()){const O=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${M.closeCode} and reason: ${M.closeReason}`;E.logger.warn(O);let k=g.default.TaskFailed;M.closeCode>=4500&&M.closeCode<4600&&(k=g.default.SignalingInternalServerError),E.audioVideoController.handleMeetingSessionStatus(new m.default(k),new Error(O));return}if(M.type!==e.default.ReceivedSignalFrame||M.message.type!==i.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const R=M.message.suback;f(R)}constructor(M){this.signalingClient=M}},"Interceptor");const T=new _(this.context.signalingClient);this.context.signalingClient.registerObserver(T),this.taskCanceler=T})}constructor(f){super(f.logger),this.context=f,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new r.default(f.logger)}},"SubscribeAndReceiveSubscribeAckTask");a.default=h},9293073193:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.IDLE="IDLE",d.RUNNING="RUNNING",d.CANCELED="CANCELED",d.FINISHED="FINISHED"})(c||(c={})),a.default=c},3450261616:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(6393942734)),g=p(c(516529594));let l=s(class extends g.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return d(this,void 0,void 0,function*(){const n=new m.default(this.timeoutMs);n.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{n.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");a.default=l},7500181884:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(4882394368)),g=p(c(516529594));let l=s(class extends g.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.NoAttendeePresent}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return d(this,void 0,void 0,function*(){const n=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const i=s((o,u,h,S,f)=>{n===o&&u&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)})})}constructor(n){super(n.logger),this.context=n,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");a.default=l},6769427378:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(t,i,o,u){function h(S){return S instanceof o?S:new o(function(f){f(S)})}return s(h,"adopt"),new(o||(o=Promise))(function(S,f){function v(T){try{_(u.next(T))}catch(w){f(w)}}s(v,"fulfilled");function E(T){try{_(u.throw(T))}catch(w){f(w)}}s(E,"rejected");function _(T){T.done?S(T.value):h(T.value).then(v,E)}s(_,"step"),_((u=u.apply(t,i||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(4999349075)),g=p(c(7894724558)),l=p(c(1510239283)),r=p(c(3440292739)),n=p(c(3741513515));let e=s(class{setEncodingParameters(i){return d(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!i||i.size===0)return;const u=Array.from(i.values()),h=o.getParameters();if(!h.encodings||h.encodings.length===0)h.encodings=u;else for(const S of h.encodings)for(const f of u){if((S.rid||f.rid)&&S.rid!==f.rid)continue;let v;for(v in f)v==="rid"||v==="codecPayloadType"||f.hasOwnProperty(v)&&(S[v]=f[v])}yield o.setParameters(h)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(i){return d(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||i<=0)return;const u=o.getParameters();u.encodings||(u.encodings=[{}]);for(const h of u.encodings)h.maxBitrate=i*1e3;yield o.setParameters(u)})}setPeer(i){this.peer=i}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(i){return this._localCameraTransceiver?i===this._localCameraTransceiver.sender.track||i===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var i,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(i=this.meetingSessionContext)===null||i===void 0?void 0:i.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(i){return d(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(i),!0)})}setAudioInput(i){return d(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,i)})}setVideoInput(i){return d(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,i)})}updateVideoTransceivers(i,o){if(!this.useTransceivers())return o.array();const u=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(u,i,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(i,o,u){const h=u.array();i.length!==0&&!i[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(i,o,h)):i.length!==0&&this.updateTransceiverWithStop(i,o,h);for(const S of h){const f=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,f),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),f),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${f.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(i,o,u){let h=1;this.videoSubscriptions=[0];for(const S of i){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let f=!1;const v=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&v!==void 0){for(const[E,_]of u.entries())if(o.StreamIdsInSameGroup(v,_)){S.direction="recvonly",this.videoSubscriptions[h]=_,f=!0,this.streamIdToTransceiver.delete(v),this.streamIdToTransceiver.set(_,S),u.splice(E,1);break}}if(!f){this.videoSubscriptions[h]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[E,_]of this.streamIdToTransceiver.entries())S.mid===_.mid&&(this.streamIdToTransceiver.delete(E),this.groupIdToTransceiver.delete(o.groupIdForStreamId(E)))}h+=1}}updateTransceiverWithoutStop(i,o,u){let h=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[h]=0,S.direction!=="inactive"){const f=o.streamIdForTrack("v_"+S.mid);if(f!==void 0){for(const[v,E]of u.entries())if(o.StreamIdsInSameGroup(f,E)){S.direction="recvonly",this.videoSubscriptions[h]=E,this.streamIdToTransceiver.delete(f),this.streamIdToTransceiver.set(E,S),u.splice(v,1);break}}}h+=1}h=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&u.length>0){S.direction="recvonly";const f=u.shift();this.videoSubscriptions[h]=f,this.streamIdToTransceiver.set(f,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(f),S)}else if(this.videoSubscriptions[h]===0){S.direction="inactive";for(const[f,v]of this.streamIdToTransceiver.entries())S===v&&(this.streamIdToTransceiver.delete(f),this.groupIdToTransceiver.delete(o.groupIdForStreamId(f)))}h+=1}}getMidForStreamId(i){var o;return(o=this.streamIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid}setStreamIdForMid(i,o){for(const[u,h]of this.streamIdToTransceiver.entries())if(h.mid===i){this.streamIdToTransceiver.delete(u),this.streamIdToTransceiver.set(o,h);return}}getMidForGroupId(i){var o,u;return(u=(o=this.groupIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid)!==null&&u!==void 0?u:void 0}transceiverIsVideo(i){return i.receiver&&i.receiver.track&&i.receiver.track.kind==="video"||i.sender&&i.sender.track&&i.sender.track.kind==="video"}debugDumpTransceivers(){let i="",o=0;for(const u of this.peer.getTransceivers())this.transceiverIsVideo(u)&&(i+=`transceiver index=${o} mid=${u.mid} subscription=${this.videoSubscriptions[o]} direction=${u.direction}
`,o+=1);return i}setTransceiverInput(i,o){return d(this,void 0,void 0,function*(){i&&(o?i.direction="sendrecv":i.direction="inactive",yield i.sender.replaceTrack(o))})}forEachRedMetricsObserver(i){for(const o of this.redMetricsObservers)n.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(i)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new m.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var i,o;const u=!!window.RTCRtpScriptTransform,h=!!RTCRtpSender.prototype.createEncodedStreams;if(u)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(h)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([r.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const f=new g.default;f.currentTimestampMs=Date.now(),f.ssrc=S.data.ssrc,f.totalAudioPacketsLost=S.data.totalAudioPacketsLost,f.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,f.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,f.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(f)}},u)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(h){const S=this._localAudioTransceiver.sender.createEncodedStreams(),f=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:f},[S.readable,S.writable,f.readable,f.writable])}(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(i,o){var u;const h=this.peer.addTransceiver(i,o);if(!(!((u=this.peer.getConfiguration())===null||u===void 0)&&u.encodedInsertableStreams)||!this.audioRedWorker)return h;const S=!!window.RTCRtpScriptTransform,f=!!RTCRtpSender.prototype.createEncodedStreams;if(S)h.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),h.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(f){const v=h.sender.createEncodedStreams(),E=h.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:v,receive:E},[v.readable,v.writable,E.readable,E.writable])}return h}destroyAudioRedWorkerAndStates(){var i,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(i){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:i.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:i.get("opus")}))}metricsDidReceive(i){const{currentTimestampMs:o}=i,u=i.getRTCStatsReport();let h=0,S=0,f=0;u.forEach(M=>{M.kind==="audio"&&(M.type==="outbound-rtp"?S=M.packetsSent:M.type==="remote-inbound-rtp"&&(h=M.timestamp,f=M.packetsLost))}),(this.audioMetricsHistory.length===0||h>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:h,totalPacketsSent:S,totalPacketsLost:f}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const v=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),E=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),_=Math.max(v,E),[T,w]=l.default.getNumRedundantEncodingsForPacketLoss(_);if(w){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const M=o-this.lastAudioRedTurnOffTimestampMs,R=o-this.lastHighPacketLossEventTimestampMs;if(M>=this.audioRedPacketLossLongEvalPeriodMs&&R<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,T)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:T})}maybeResetHoldDownTimer(i){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=i)}lossPercent(i){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,u=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,h=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=i){const f=h-this.audioMetricsHistory[S].totalPacketsLost,v=u-this.audioMetricsHistory[S].totalPacketsSent,E=100*(f/v);return Math.max(0,Math.min(E,100))}return 0}shouldUpdateAudioRedWorkerEncodings(i,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(i),!1):o<this.currentNumRedundantEncodings&&i-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(i),!0)}addRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.add(i)}removeRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.delete(i)}constructor(i,o,u){this.logger=i,this.browserBehavior=o,this.meetingSessionContext=u,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");a.default=e},1438956810:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(2962876954));let g=s(class qd extends m.default{setEncodingParameters(r){return d(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(let i=0;i<t.encodings.length;i++)t.encodings[i].rid===m.default.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.LOW_LEVEL_NAME),t.encodings[i]),t.encodings[i].rid===m.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.HIGH_LEVEL_NAME),t.encodings[i]);yield n.setParameters(t),this.logVideoTransceiverParameters()})}constructor(r,n,e){super(r,n,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<qd.NAME_ARR_ASCENDING.length;i++){const o=qd.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:qd.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");a.default=g,g.NAME_ARR_ASCENDING=["low","hi"],g.BITRATE_ARR_ASCENDING=[300,1200]},2962876954:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(6769427378));let g=s(class as extends m.default{setEncodingParameters(r){return d(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(const i of t.encodings)i.rid===as.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(as.LOW_LEVEL_NAME),i),i.rid===as.MID_LEVEL_NAME&&this.copyEncodingParams(r.get(as.MID_LEVEL_NAME),i),i.rid===as.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(as.HIGH_LEVEL_NAME),i);yield n.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(r){return d(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var r,n;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((n=(r=this.meetingSessionContext)===null||r===void 0?void 0:r.audioProfile)===null||n===void 0)&&n.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const n=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of n)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(r,n){n.active=r.active,n.maxBitrate=r.maxBitrate,n.scaleResolutionDownBy=r.scaleResolutionDownBy,n.maxFramerate=r.maxFramerate}constructor(r,n,e){super(r,n,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let i=0;i<as.NAME_ARR_ASCENDING.length;i++){const o=as.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:as.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastTransceiverController");a.default=g,g.LOW_LEVEL_NAME="low",g.MID_LEVEL_NAME="mid",g.HIGH_LEVEL_NAME="hi",g.NAME_ARR_ASCENDING=["low","mid","hi"],g.BITRATE_ARR_ASCENDING=[200,400,1100]},3052177122:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6769427378));let m=s(class extends p.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(l,r,n){super(l,r,n)}},"VideoOnlyTransceiverController");a.default=m},246495600:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const d=c(5269429115);a.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let p=s(class{subscribeToTranscriptEvent(g){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(a.TRANSCRIPTION_DATA_MESSAGE_TOPIC,l=>{for(const r of d.TranscriptEventConverter.from(l))for(const n of this.transcriptEventCallbacks)n(r)}),this.transcriptEventCallbacks.add(g)}unsubscribeFromTranscriptEvent(g){this.transcriptEventCallbacks.delete(g),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(g){this.realtimeController=g,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");a.default=p},9138893973:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"Transcript");a.default=c},866659076:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptAlternative");a.default=c},7538060970:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptEntity");a.default=c},5269429115:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0}),a.TranscriptEventConverter=void 0;const p=c(5391134031),m=d(c(9138893973)),g=d(c(2461374283)),l=d(c(3798201443)),r=d(c(2024984314)),n={[p.SdkTranscriptionStatus.Type.STARTED]:l.default.STARTED,[p.SdkTranscriptionStatus.Type.INTERRUPTED]:l.default.INTERRUPTED,[p.SdkTranscriptionStatus.Type.RESUMED]:l.default.RESUMED,[p.SdkTranscriptionStatus.Type.STOPPED]:l.default.STOPPED,[p.SdkTranscriptionStatus.Type.FAILED]:l.default.FAILED};let e=s(class{static from(i){let o;try{o=p.SdkTranscriptFrame.decode(i.data)}catch(h){throw new Error("Cannot decode transcript data message: "+h)}const u=[];for(const h of o.events)if(h.status){const S=n[h.status.type];if(!S)continue;const f=new g.default;f.type=S,f.eventTimeMs=h.status.eventTime,f.transcriptionRegion=h.status.transcriptionRegion,f.transcriptionConfiguration=h.status.transcriptionConfiguration,h.status.message&&(f.message=h.status.message),u.push(f)}else if(h.transcript){const S=new m.default;S.results=[];for(const f of h.transcript.results){const v={channelId:f.channelId,isPartial:f.isPartial,resultId:f.resultId,startTimeMs:f.startTime,endTimeMs:f.endTime,alternatives:[]};if(f.languageCode&&(v.languageCode=f.languageCode),f.languageIdentification&&f.languageIdentification.length>0){v.languageIdentification=[];for(const E of f.languageIdentification){const _={languageCode:E.languageCode,score:E.score};v.languageIdentification.push(_)}}for(const E of f.alternatives){const _={items:[],transcript:E.transcript};for(const T of E.items){const w={content:T.content,attendee:{attendeeId:T.speakerAttendeeId,externalUserId:T.speakerExternalUserId},startTimeMs:T.startTime,endTimeMs:T.endTime,type:null};switch(T.vocabularyFilterMatch&&(w.vocabularyFilterMatch=T.vocabularyFilterMatch),T.hasOwnProperty("stable")&&(w.stable=T.stable),T.hasOwnProperty("confidence")&&(w.confidence=T.confidence),T.type){case p.SdkTranscriptItem.Type.PRONUNCIATION:w.type=r.default.PRONUNCIATION;break;case p.SdkTranscriptItem.Type.PUNCTUATION:w.type=r.default.PUNCTUATION;break}_.items.push(w)}for(const T of E.entities){_.entities||(_.entities=[]);const w={category:T.category,confidence:T.confidence,content:T.content,startTimeMs:T.startTime,endTimeMs:T.endTime};T.type&&(w.type=T.type),_.entities.push(w)}v.alternatives.push(_)}S.results.push(v)}u.push(S)}return u}},"TranscriptEventConverter");a.TranscriptEventConverter=e},3531434754:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptItem");a.default=c},2024984314:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.PRONUNCIATION="pronunciation",d.PUNCTUATION="punctuation"})(c||(c={})),a.default=c},9584814027:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptLanguageWithScore");a.default=c},3443368328:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptResult");a.default=c},2461374283:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"TranscriptionStatus");a.default=c},3798201443:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c;(function(d){d.STARTED="started",d.INTERRUPTED="interrupted",d.RESUMED="resumed",d.STOPPED="stopped",d.FAILED="failed"})(c||(c={})),a.default=c},3564840480:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(888724265),m=d(c(8066052849));let g=s(class Da{getParserResult(){var r,n;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((r=this.parserResult)===null||r===void 0?void 0:r.os.name)||Da.UNAVAILABLE,osVersion:((n=this.parserResult)===null||n===void 0?void 0:n.os.version)||Da.UNAVAILABLE,sdkVersion:m.default.sdkVersion,sdkName:m.default.sdkName}}constructor(r){var n,e,t,i,o,u,h;try{this.parserResult=navigator&&navigator.userAgent?new p.UAParser(navigator.userAgent).getResult():void 0}catch(S){r.error(S.message)}this.browserMajorVersion=((t=(e=(n=this.parserResult)===null||n===void 0?void 0:n.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||Da.UNAVAILABLE,this.browserName=((i=this.parserResult)===null||i===void 0?void 0:i.browser.name)||Da.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||Da.UNAVAILABLE,this.deviceName=[((u=this.parserResult)===null||u===void 0?void 0:u.device.vendor)||"",((h=this.parserResult)===null||h===void 0?void 0:h.device.model)||""].join(" ").trim()||Da.UNAVAILABLE}},"DefaultUserAgentParser");a.default=g,g.UNAVAILABLE="Unavailable"},2997222898:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{add(p){return new Promise((m,g)=>{this.queue=this.queue.then(p).then(m).catch(g)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");a.default=c},903520651:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.None=a.Some=a.Maybe=void 0;let c=s(class{static of(g){return g==null?p.of():d.of(g)}},"Maybe");a.Maybe=c;let d=s(class WS{map(g){return c.of(g(this.value))}flatMap(g){return g(this.value)}get(){return this.value}getOrElse(g){return this.value}defaulting(g){return c.of(this.getOrElse(g))}static of(g){if(g==null)throw new Error("value is ${value}");return new WS(g)}constructor(g){this.value=g,this.isSome=!0,this.isNone=!1}},"Some");a.Some=d;let p=s(class eu{get(){throw new Error("value is null")}getOrElse(g){return g}map(g){return new eu}flatMap(g){return new eu}defaulting(g){return c.of(this.getOrElse(g))}static of(){return new eu}constructor(){this.isSome=!1,this.isNone=!0}},"None");a.None=p},840544383:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0}),a.getRandomValues=a.getFormattedOffset=a.getDefaultAssetSpec=a.toLowerCasePropertyNames=a.isIFramed=a.wait=void 0;const p=d(c(8066052849));function m(t){return new Promise(i=>setTimeout(i,t))}s(m,"wait"),a.wait=m;function g(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}s(g,"isIFramed"),a.isIFramed=g;function l(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(l):Object.keys(t).reduce((i,o)=>{const u=t[o],h=typeof u=="object"?l(u):u;return i[o.toLowerCase()]=h,i},{})}s(l,"toLowerCasePropertyNames"),a.toLowerCasePropertyNames=l;function r(){const t=p.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}s(r,"getDefaultAssetSpec"),a.getDefaultAssetSpec=r;function n(t){const i=Math.abs(t),o=t<=0?"+":"-",u=Math.floor(i/60).toString().padStart(2,"0"),h=Math.floor(i%60).toString().padStart(2,"0");return`${o}${u}:${h}`}s(n,"getFormattedOffset"),a.getFormattedOffset=n;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}s(e,"getRandomValues"),a.getRandomValues=e},8066052849:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8351168186)),m=d(c(9778296323));let g=s(class Wc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return m.default.semverString}static get sdkVersionSemVer(){var r,n,e,t;const i=m.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(r=i==null?void 0:i.groups)===null||r===void 0?void 0:r.major,minor:(n=i==null?void 0:i.groups)===null||n===void 0?void 0:n.minor,patch:(e=i==null?void 0:i.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=i==null?void 0:i.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return m.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const r=new p.default;return`${r.name()}-${r.majorVersion()}`}static urlWithVersion(r){const n=new URL(r);return n.searchParams.append(Wc.X_AMZN_VERSION,Wc.sdkVersion),n.searchParams.append(Wc.X_AMZN_USER_AGENT,Wc.sdkUserAgentLowResolution),n.toString()}},"Versioning");a.default=g,g.X_AMZN_VERSION="X-Amzn-Version",g.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},9778296323:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={hash:"d7eee1f",raw:"v3.23.0",semverString:"3.23.0"}},8261422434:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class zS{equal(p){let m=p.captureWidth()===this.cameraWidth&&p.captureHeight()===this.cameraHeight&&p.captureFrameRate()===this.cameraFrameRate&&p.encodeBitrates().length===this.encodeBitrates().length&&p.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&p.encodeWidths().length===this.encodeWidths().length&&p.encodeHeights().length===this.encodeHeights().length&&p.isSVCEncoding()===this.isSVC;if(m){for(let g=0;g<p.encodeWidths().length;g++)if(p.encodeWidths()[g]!==this.encodeWidths()[g]||p.encodeHeights()[g]!==this.encodeHeights()[g]||p.encodeBitrates()[g]!==this.encodeBitrates()[g]||p.encodeScaleResolutionDownBy()[g]!==this.encodeScaleResolutionDownBy()[g])return m=!1,m}return m}clone(){return new zS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(p,m,g,l,r,n=1,e=!1){this.cameraWidth=p,this.cameraHeight=m,this.cameraFrameRate=g,this.maxEncodeBitrateKbps=l,this.isSimulcast=r,this.scaleResolutionDownBy=n,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");a.default=c},7744958188:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5134603106));let m=s(class GS{reset(){this.optimalReceiveSet=new p.default,this.subscribedReceiveSet=new p.default,this.videoSources=void 0}updateIndex(l){this.videoIndex=l,this.optimalReceiveSet=this.calculateOptimalReceiveSet(l)}updateMetrics(l){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(l){this.videoSources=l,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(l){const r=new p.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return r;const n=l.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),i=new Map;for(const u of t)n.contain(u.streamId)&&i.set(u.attendeeId,u);let o=0;for(const u of e){const h=u.attendee.attendeeId;if(i.has(h)){const S=i.get(h);if(o+S.maxBitrateKbps<=GS.maxReceiveBitrateKbps)r.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return r}constructor(l){this.selfAttendeeId=l,this.reset()}},"AllHighestVideoBandwidthPolicy");a.default=m,m.maxReceiveBitrateKbps=15e3},9248911078:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(5134603106));let m=s(class{reset(){}updateIndex(l){}updateMetrics(l){}wantsResubscribe(){return!1}chooseSubscriptions(){return new p.default}},"NoVideoDownlinkBandwidthPolicy");a.default=m},6110401981:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.TargetDisplaySize=void 0;var c;(function(d){d[d.Low=0]="Low",d[d.Medium=1]="Medium",d[d.High=2]="High",d[d.Maximum=3]="Maximum"})(c=a.TargetDisplaySize||(a.TargetDisplaySize={})),a.default=c},1437705752:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(3560634922)),m=d(c(1448262436)),g=d(c(7981698535)),l=c(6700033168),r=d(c(6313276823)),n=d(c(9837586225));let e=s(class jS extends r.default{static createConfig(){const i=new n.default;return i.serverSideNetworkAdaption=m.default.None,i}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(i){super.updateIndex(i);const o=l.VideoPreferences.prepare();let u=!1;const h=i.remoteStreamDescriptions();for(const S of h)o.some(f=>f.attendeeId===S.attendeeId)||(S.attendeeId.endsWith(p.default.Modality)?(o.add(new g.default(S.attendeeId,1)),u=!0):o.add(new g.default(S.attendeeId,2)));u?(this.videoPreferences=o.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(i){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(i){super(i,jS.createConfig()),this.logger=i,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");a.default=e},7981698535:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(6110401981)),m=d(c(5116495551));let g=s(class Xl{partialCompare(r){return this.priority-r.priority}equals(r){return this.attendeeId===r.attendeeId&&this.targetSize===r.targetSize&&this.priority===r.priority&&this.degradationPreference===r.degradationPreference}clone(){return new Xl(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(r){switch(r){case p.default.Maximum:return Xl.MAXIMUM_BITRATE_KBPS;case p.default.High:return Xl.HIGH_BITRATE_KBPS;case p.default.Medium:return Xl.MID_BITRATE_KBPS;case p.default.Low:return Xl.LOW_BITRATE_KBPS}}constructor(r,n,e,t){this.attendeeId=r,this.priority=n,this.targetSize=e!==void 0?e:p.default.Maximum,this.degradationPreference=t!==void 0?t:m.default.Balanced}},"VideoPreference");a.default=g,g.LOW_BITRATE_KBPS=300,g.MID_BITRATE_KBPS=600,g.HIGH_BITRATE_KBPS=1500,g.MAXIMUM_BITRATE_KBPS=1e4},6700033168:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.VideoPreferences=a.MutableVideoPreferences=a.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const p=d(c(4983545831));function m(e,t,i){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||i===void 0)return[];const o=new Array,u=new Map,h=new Map;for(const S of t){const f=e.transceiverController.getMidForGroupId(S);if(f===void 0)continue;const v=e.videoStreamIndex.attendeeIdForGroupId(S);u.set(v,f),h.set(v,S)}for(const S of i){const f=new p.default,v=u.get(S.attendeeId);v!==void 0&&(f.mid=v,f.attendeeId=S.attendeeId,f.groupId=h.get(S.attendeeId),f.priority=Number.MAX_SAFE_INTEGER-S.priority,f.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),f.qualityAdaptationPreference=S.degradationPreference,o.push(f))}return o}s(m,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),a.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=m;let g=s(class mh{static default(){return new mh([])}[Symbol.iterator](){let t=0;const i=this.items;return{next(){return t<i.length?{done:!1,value:i[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,i){const o=this.items.findIndex(i);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(i=>!i.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const i of this.items)if(!t.items.some(o=>o.equals(i)))return!1;return!0}has(t){return this.items.some(i=>i.equals(t))}some(t){return this.items.some(t)}clone(){return new mh([...this.items])}sort(){this.items.sort((t,i)=>t.partialCompare(i))}modify(){return new l(this)}constructor(t=[]){this.items=t}},"ObjectSet"),l=s(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,i){this.items.has(t)&&!this.items.some(i)||(this.cow(),this.items.replaceFirst(t,i))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new g){this.items=t,this.copied=!1}},"SetBuilder"),r=s(class{add(t){this.builder.add(t)}replaceFirst(t,i){this.builder.replaceFirst(t,i)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new n(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");a.MutableVideoPreferences=r;let n=s(class gh{static prepare(){return new r(new l)}static default(){return new gh(g.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new r(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=gh.prepare();for(const i of this.items)t.add(i.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");a.VideoPreferences=n,a.default=n},6313276823:function(F,a,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(M,R,O,k){k===void 0&&(k=O),Object.defineProperty(M,k,{enumerable:!0,get:function(){return R[O]}})}:function(M,R,O,k){k===void 0&&(k=O),M[k]=R[O]}),p=this&&this.__setModuleDefault||(Object.create?function(M,R){Object.defineProperty(M,"default",{enumerable:!0,value:R})}:function(M,R){M.default=R}),m=this&&this.__importStar||function(M){if(M&&M.__esModule)return M;var R={};if(M!=null)for(var O in M)O!=="default"&&Object.prototype.hasOwnProperty.call(M,O)&&d(R,M,O);return p(R,M),R},g=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(a,"__esModule",{value:!0});const l=g(c(4846700713)),r=g(c(5147189764)),n=g(c(1847926377)),e=g(c(3560634922)),t=c(3756404293),i=m(c(1448262436)),o=g(c(2551170247)),u=g(c(5134603106)),h=g(c(7744958188)),S=g(c(6110401981)),f=g(c(7981698535)),v=c(6700033168),E=g(c(9837586225)),_=g(c(5116495551));let T=s(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),w=s(class Hr{reset(){this.allHighestPolicy=new h.default(""),this.optimalReceiveSet=new u.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new u.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new u.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=Hr.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=Hr.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new T,this.prevDownlinkStats=new T,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(R){this.tileController=R,this.logger.info("tileController bound")}setWantsResubscribeObserver(R){this.wantsResubscribeObserver=R}chooseRemoteVideoSources(R){var O;if(!(!((O=this.videoPreferences)===null||O===void 0)&&O.equals(R))){if(this.videoPreferences=R==null?void 0:R.clone(),!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const k=new Array;for(const A of this.videoPreferences){const P=new o.default;P.attendee=new l.default,P.attendee.attendeeId=A.attendeeId,k.push(P)}this.allHighestPolicy.chooseRemoteVideoSources(k);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(R)}`)}}updateIndex(R){this.videoIndex=R,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(R),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const R=new Set;for(const P of this.videoIndex.remoteStreamDescriptions())R.add(P.attendeeId);const O=v.VideoPreferences.prepare(),k=R.size;let A=S.default.Maximum;k>8?A=S.default.Low:k>4&&(A=S.default.Medium);for(const P of R)O.add(new f.default(P,1,A));this.defaultVideoPreferences=O.build()}updateMetrics(R){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new T;const O=R.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=O.availableIncomingBitrate/1e3;for(const k in R.streamMetricReports){const A=Number.parseInt(k,10),P=R.streamMetricReports[A];P.direction===r.default.DOWNSTREAM&&P.mediaType===n.default.VIDEO&&(P.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=R.countPerSecond("nackCount",A)),P.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=R.countPerSecond("packetsLost",A)),P.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=R.bitsPerSecond("bytesReceived",A)/1e3))}}wantsResubscribe(){let R=!1;return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(R||(R=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?R||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),R||(R=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),R)}chooseSubscriptions(){return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(R){this.observerQueue.add(R)}removeObserver(R){this.observerQueue.delete(R)}forEachObserver(R){for(const O of this.observerQueue)R(O)}setVideoPriorityBasedPolicyConfigs(R){this.videoPriorityBasedPolicyConfig=R}calculateOptimalReceiveStreams(){var R;const O=[],k=this.videoIndex.remoteStreamDescriptions();if(k.length===0||!((R=this.videoPreferences)===null||R===void 0)&&R.isEmpty()){this.optimalReceiveStreams=[];return}const A=this.rateProbeState;this.cleanBwPausedTiles(k),this.handleAppPausedStreams(O,k);const P=new Map;for(const ze of this.getCurrentVideoPreferences())P.set(ze.attendeeId,ze);const D=k.filter(ze=>P.has(ze.attendeeId)),H=!this.streamsWithPreferenceDidChange(D),j=!this.startupPeriod&&H;if(j&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;D.sort((ze,nt)=>ze.maxBitrateKbps===nt.maxBitrateKbps?ze.streamId-nt.streamId:ze.maxBitrateKbps-nt.maxBitrateKbps);for(const ze of D)(ze.avgBitrateKbps===0||ze.avgBitrateKbps>ze.maxBitrateKbps)&&(ze.attendeeId.endsWith(e.default.Modality)&&ze.maxBitrateKbps<100?ze.maxBitrateKbps=ze.avgBitrateKbps:ze.avgBitrateKbps=ze.maxBitrateKbps);const W=new Set;for(const ze of this.getCurrentVideoPreferences()){const nt=D.filter(xe=>xe.attendeeId===ze.attendeeId);if(nt.length<3)continue;let mt=15,gt=320*480;nt.forEach(xe=>{mt=Math.max(mt,xe.maxFrameRate),gt=Math.max(gt,xe.totalPixels())}),nt.sort((xe,Ye)=>{if(ze.degradationPreference===_.default.MaintainResolution)return Math.abs(xe.maxFrameRate-Ye.maxFrameRate)<2?xe.totalPixels()-Ye.totalPixels():xe.maxFrameRate-Ye.maxFrameRate;if(ze.degradationPreference===_.default.MaintainFramerate)return xe.totalPixels()===Ye.totalPixels()?xe.maxFrameRate-Ye.maxFrameRate:xe.totalPixels()-Ye.totalPixels();{const Tt=s(rt=>rt.avgBitrateKbps*Math.pow(2,5*rt.maxFrameRate/mt*Math.pow(4,rt.totalPixels()/gt)),"weighByFramerate");return Tt(xe)-Tt(Ye)}});let Pe;for(const xe of nt){if(Pe!==void 0&&(xe.maxFrameRate<Pe.maxFrameRate&&Math.abs(Pe.maxFrameRate-xe.maxFrameRate)>2||xe.totalPixels()<Pe.totalPixels())){W.add(xe.streamId);continue}Pe=xe}}const X=D.filter(ze=>!W.has(ze.streamId));this.logger.info(`Filtered to ${JSON.stringify(X)}`);const ee={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};ee.targetDownlinkBitrate=this.determineTargetRate();const fe=this.subscribedReceiveSet.size(),oe=this.downlinkStats.bandwidthEstimateKbps,Oe=!this.videoPriorityBasedPolicyConfig.allowSubscribe(fe,oe);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=Hr.MIN_TIME_BETWEEN_SUBSCRIBE_MS,j&&Oe))return;const Xe=this.priorityPolicy(ee,X,O),ge=!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let Me=0;if(!ge&&!this.startupPeriod&&H?this.rateProbeState==="Probing"?Me=this.handleProbe(O,ee.targetDownlinkBitrate):ee.deltaToNextUpgrade!==0&&(Me=this.maybeOverrideOrProbe(O,ee,Xe)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=D,this.videoPreferencesUpdated=!1,Me===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=ee.targetDownlinkBitrate;return}if(Me===2){const ze=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(D,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+ze);return}this.optimalNonPausedReceiveStreams=O.slice();const $e=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(D,O),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==A||this.optimalReceiveStreams.length!==O.length||$e!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(k,ee.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=ee.targetDownlinkBitrate,this.optimalReceiveStreams=O.slice()}calculateOptimalReceiveSet(){const R=new u.default;this.calculateOptimalReceiveStreams();for(const O of this.optimalReceiveStreams)R.add(O.streamId);if(!this.optimalReceiveSet.equal(R)){const O=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(R)} subscribedRate:${O}`)}this.optimalReceiveSet=R}determineTargetRate(){let R=0;const O=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=O),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>Hr.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||O-this.firstEstimateTimestamp>Hr.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?R=Hr.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<Hr.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),R=this.downlinkStats.usedBandwidthKbps+Hr.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):R=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?R=Hr.DEFAULT_BANDWIDTH_KBPS:R=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-Hr.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*Hr.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,R=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,R>15e3&&this.logger.warn("bwe: "+R+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(R,15e3)}setProbeState(R){if(this.rateProbeState===R)return!1;const O=Date.now();switch(R){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||O-this.lastProbeTimestamp>Hr.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=O;else return!1;break;case"Probing":if(O-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=O,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,Hr.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+R+" from "+this.rateProbeState),this.rateProbeState=R,!0}upgradeToStream(R,O){for(let k=0;k<R.length;k++)if(R[k].groupId===O.groupId){const A=O.avgBitrateKbps-R[k].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(R[k])+" to "+O),this.lastUpgradeRateKbps=A,R[k]=O,A}return R.push(O),this.lastUpgradeRateKbps=O.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(R,O){if(Date.now()-this.lastProbeTimestamp>Hr.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>Hr.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(Hr.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const k=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(R)||O>k?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=Hr.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(R,O,k){const A=this.chosenStreamsSameAsLast(R);let P=0;const D=O.targetDownlinkBitrate>Hr.LOW_BITRATE_THRESHOLD_KBPS?Hr.TARGET_RATE_CHANGE_TRIGGER_PERCENT:Hr.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,H=O.targetDownlinkBitrate*D/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!A&&Math.abs(O.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<H?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),P=1):this.targetRateBaselineForDeltaCheckKbps=O.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,P;if(A||P===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(R,k),P=0);break}else this.setProbeState("Not Probing");return P}calculateSubscribeRate(R){let O=0;for(const k of R)!this.pausedStreamIds.contain(k.streamId)&&!this.pausedBwAttendeeIds.has(k.attendeeId)&&(O+=k.maxBitrateKbps);return O}handleAppPausedStreams(R,O){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new u.default;const k=this.tileController.getAllRemoteVideoTiles();for(const A of k){const P=A.state();if(P.paused&&!this.pausedBwAttendeeIds.has(P.boundAttendeeId)){let D=O.length;for(;D--;)O[D].attendeeId===P.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+P.boundAttendeeId+" streamId: "+O[D].streamId),this.pausedStreamIds.add(O[D].streamId),this.subscribedReceiveSet.contain(O[D].streamId)&&R.push(O[D]),O.splice(D,1))}}}processBwPausedStreams(R,O){if(!this.tileController){this.logger.warn("tileController not found!");return}const k=this.getCurrentVideoPreferences();if(k&&this.shouldPauseTiles){const A=this.tileController.getAllVideoTiles();for(const P of k){const D=this.getVideoTileForAttendeeId(P.attendeeId,A),H=(D==null?void 0:D.state().paused)||!1;if(O.some(j=>j.attendeeId===P.attendeeId))H&&this.pausedBwAttendeeIds.has(P.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${P.attendeeId} due to bandwidth`),this.forEachObserver(j=>{j.tileWillBeUnpausedByDownlinkPolicy(D.id())}),this.tileController.unpauseVideoTile(D.id()),this.pausedBwAttendeeIds.delete(P.attendeeId));else{const j=R.some(W=>W.attendeeId===P.attendeeId);if(D&&j){const W=this.optimalReceiveStreams.find(X=>X.attendeeId===P.attendeeId);W!==void 0&&(H||(this.logger.info(`bwe: pausing streamId ${W.streamId} attendee ${P.attendeeId} due to bandwidth`),this.forEachObserver(X=>{X.tileWillBePausedByDownlinkPolicy(D.id())}),this.tileController.pauseVideoTile(D.id())),O.push(W)),this.pausedBwAttendeeIds.add(P.attendeeId)}else if(j){const W=this.tileController.addVideoTile();W.bindVideoStream(P.attendeeId,!1,null,0,0,0,null),this.forEachObserver(X=>{X.tileWillBePausedByDownlinkPolicy(W.id())}),W.pause(),this.logger.info(`bwe: Created video tile ${W.id()} for bw paused attendee ${P.attendeeId}`),this.pausedBwAttendeeIds.add(P.attendeeId)}}}}}cleanBwPausedTiles(R){if(!this.tileController){this.logger.warn("tileController not found!");return}const O=this.tileController.getAllRemoteVideoTiles(),k=this.getCurrentVideoPreferences();for(const A of O){const P=A.state();P.boundVideoStream||(R.some(D=>D.attendeeId===P.boundAttendeeId)?k!==void 0&&!k.some(D=>D.attendeeId===P.boundAttendeeId)&&this.tileController.removeVideoTile(P.tileId):(this.tileController.removeVideoTile(P.tileId),this.logger.info(`bwe: Removed video tile ${P.tileId} for bw paused attendee ${P.boundAttendeeId}`)))}}priorityPolicy(R,O,k){let A;const P=this.getCurrentVideoPreferences(),D=P.highestPriority();let H,j=D;for(;j!==-1;){H=-1;for(const W of P)if(W.priority===j)for(const X of O)X.attendeeId===W.attendeeId&&(k.some(ee=>ee.groupId===X.groupId)||(R.chosenTotalBitrate+X.avgBitrateKbps<=R.targetDownlinkBitrate?(k.push(X),R.chosenTotalBitrate+=X.avgBitrateKbps):R.deltaToNextUpgrade===0&&(R.deltaToNextUpgrade=X.avgBitrateKbps,A=X)));else if(W.priority>j){H=W.priority;break}for(const W of P)if(W.priority===j){for(const X of O)if(X.attendeeId===W.attendeeId){const ee=k.findIndex(fe=>fe.groupId===X.groupId&&fe.maxBitrateKbps<=X.maxBitrateKbps&&fe.avgBitrateKbps<X.avgBitrateKbps);if(ee!==-1){const fe=X.avgBitrateKbps-k[ee].avgBitrateKbps;this.hasSimulcastStreams(O,X.attendeeId,X.groupId)&&this.canUpgrade(X.avgBitrateKbps,W.targetSize,W.targetSizeToBitrateKbps(W.targetSize),X.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${X.attendeeId} group: ${X.groupId} has simulcast and can upgrade avgBitrate: ${X.avgBitrateKbps} target: ${W.targetSizeToBitrateKbps(W.targetSize)} targetTotalBitrate: ${R.targetDownlinkBitrate}`),R.chosenTotalBitrate+fe<=R.targetDownlinkBitrate?(R.chosenTotalBitrate+=fe,k[ee]=X):R.deltaToNextUpgrade===0&&(R.deltaToNextUpgrade=fe,A=X)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(W.priority>j)break;if(j===D&&R.deltaToNextUpgrade!==0)break;j=H}return A}getVideoTileForAttendeeId(R,O){for(const k of O)if(k.state().boundAttendeeId===R)return k;return null}canUpgrade(R,O,k,A){let P=!1;return(O===S.default.High||!A&&R<=k||A&&O===S.default.Medium&&R<=k)&&(P=!0),P?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${R} targetBitrateKbps: ${k}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${R} targetBitrateKbps: ${k}`),!1)}hasSimulcastStreams(R,O,k){let A=0;for(const P of R)P.attendeeId===O&&P.groupId===k&&A++;return this.logger.info(`bwe: attendeeId: ${O} groupId: ${k} hasSimulcastStreams: streamCount: ${A}`),A>1}streamsWithPreferenceDidChange(R){if(this.previousStreamsWithPreference===void 0||R.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const O of R)if(this.previousStreamsWithPreference.find(A=>A.groupId===O.groupId&&A.streamId===O.streamId&&A.maxBitrateKbps===O.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(R){if(this.optimalNonPausedReceiveStreams.length!==R.length)return!1;for(const O of this.optimalNonPausedReceiveStreams)if(!R.some(k=>k.streamId===O.streamId))return!1;return!0}policyStateLogStr(R,O){const k=this.calculateSubscribeRate(this.optimalReceiveStreams),A={targetBitrate:O,subscribedRate:k,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let P="remoteInfos: [";for(const H of R)P+=`{grpId:${H.groupId} strId:${H.streamId} maxBr:${H.maxBitrateKbps} avgBr:${H.avgBitrateKbps}}, `;P+="]";let D=`bwe: optimalReceiveSet ${JSON.stringify(A)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${P}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(D+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?D+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:D+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,D}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(R){this.serverSideNetworkAdaption=R,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[i.default.None,i.default.BandwidthProbing,i.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let R=this.getCurrentVideoPreferences();return R||(R=v.VideoPreferences.prepare().build()),R}wantsAllTemporalLayersInIndex(){return!0}constructor(R,O=E.default.Default){this.logger=R,this.videoPriorityBasedPolicyConfig=O,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===i.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=i.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}},"VideoPriorityBasedPolicy");a.default=w,w.DEFAULT_BANDWIDTH_KBPS=2800,w.STARTUP_PERIOD_MS=6e3,w.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,w.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,w.LOW_BITRATE_THRESHOLD_KBPS=300,w.MIN_TIME_BETWEEN_PROBE_MS=5e3,w.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,w.MAX_HOLD_BEFORE_PROBE_MS=3e4,w.MAX_ALLOWED_PROBE_TIME_MS=6e4,w.SPURIOUS_PACKET_LOST_THRESHOLD=2,w.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},9837586225:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1448262436));let m=s(class zc{allowSubscribe(l,r){let n=0;const e=this.currentNetworkEvent;if(r>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=r,!0;if(r<this.referenceBitrate){if(this.currentNetworkEvent=1,n=this.getSubscribeDelay(this.currentNetworkEvent,l),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>n)return this.referenceBitrate=r,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(l,r){let n=zc.MINIMUM_DELAY_MS;const e=zc.MAXIMUM_DELAY_MS-zc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(l){case 1:n+=e*t*(1+r/10),n=Math.min(zc.MAXIMUM_DELAY_MS,n);break}return n}constructor(l=0,r=0){this.networkIssueResponseDelayFactor=l,this.networkIssueRecoveryDelayFactor=r,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=p.default.BandwidthProbingAndRemoteVideoQualityAdaption,l<0?l=0:l>1&&(l=1),this.networkIssueResponseDelayFactor=l,r<0?r=0:r>1&&(r=1),this.networkIssueRecoveryDelayFactor=r}},"VideoPriorityBasedPolicyConfig");a.default=m,m.MINIMUM_DELAY_MS=2e3,m.MAXIMUM_DELAY_MS=8e3,m.Default=new m(0,0),m.UnstableNetworkPreset=new m(0,1),m.StableNetworkPreset=new m(1,0)},5116495551:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VideoQualityAdaptationPreference=void 0;var c;(function(d){d[d.Balanced=0]="Balanced",d[d.MaintainFramerate=1]="MaintainFramerate",d[d.MaintainResolution=2]="MaintainResolution"})(c=a.VideoQualityAdaptationPreference||(a.VideoQualityAdaptationPreference={})),a.default=c},8481249111:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{create(){const p={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{p.paused=!0},play:()=>(p.paused=!1,Promise.resolve())};return p}},"NoOpVideoElementFactory");a.default=c},6672418579:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return c(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");a.default=d},7145536260:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})},p=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(6672418579)),g=p(c(1902736443)),l=15;let r=s(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?l:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return d(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return d(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const i=new m.default(this.canvasInput);this.sourceBuffers.push(i),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,i=new g.default){this.logger=e,this.stages=t,this.fr=l,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>d(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const u=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let h=[];h.push(this.sourceBuffers[0]);try{for(const w of this.processors)h=yield w.process(h)}catch{this.forEachObserver(M=>{M.processingDidFailToStart&&M.processingDidFailToStart()});return}this.destBuffers=h;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(M=>{M.processingDidFailToStart&&M.processingDidFailToStart()}));return}const f=S.width,v=S.height;f!==0&&v!==0&&(this.canvasOutput.width!==f&&this.canvasOutput.height!==v&&(this.canvasOutput.width=f,this.canvasOutput.height=v),this.outputCtx.drawImage(S,0,0,f,v,0,0,f,v),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(w=>{w.processingDidStart&&w.processingDidStart()})));const E=performance.now()-u,_=1e3*2/this.framerate-E,T=Math.max(0,1e3/this.framerate-E);_<=0&&this.forEachObserver(w=>{w.processingLatencyTooHigh&&w.processingLatencyTooHigh(E)}),yield this.timer.start(T,this.process.bind(this))}),this.timer=i}},"DefaultVideoFrameProcessorPipeline");a.default=r},1902736443:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,g){return c(this,void 0,void 0,function*(){this.callback=g,this.workerTimer?(this.workerTimer.onmessage=l=>{this.lastTimeout=l.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return c(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");a.default=d},5709738441:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8351168186)),g=p(c(7145536260));let l=s(class $S{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(n){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(n)}chooseNewInnerDevice(n){const e=new $S(this.logger,n,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return d(this,void 0,void 0,function*(){return this.device})}transformStream(n){return d(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(n),this.inputMediaStream=n,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const n=this.device&&this.device.id;if(this.pipe.stop(),!n&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return d(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const n of this.inputMediaStream.getVideoTracks())n.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(n){this.observers.add(n)}removeObserver(n){this.observers.delete(n)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(n=>{n.processingDidStart&&n.processingDidStart()})}processingLatencyTooHigh(n){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(n)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(n=>{n.processingDidFailToStart&&n.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(n=>{n.processingDidStop&&n.processingDidStop()})}forEachObserver(n){for(const e of this.observers)setTimeout(()=>{n(e)},0)}constructor(n,e,t,i=new m.default){this.logger=n,this.device=e,this.processors=t,this.browserBehavior=i,this.observers=new Set,this.pipe=new g.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");a.default=l},7000795223:function(F,a){"use strict";var c=this&&this.__awaiter||function(p,m,g,l){function r(n){return n instanceof g?n:new g(function(e){e(n)})}return s(r,"adopt"),new(g||(g=Promise))(function(n,e){function t(u){try{o(l.next(u))}catch(h){e(h)}}s(t,"fulfilled");function i(u){try{o(l.throw(u))}catch(h){e(h)}}s(i,"rejected");function o(u){u.done?n(u.value):r(u.value).then(t,i)}s(o,"step"),o((l=l.apply(p,m||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});let d=s(class{process(m){return c(this,void 0,void 0,function*(){return m})}destroy(){return c(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");a.default=d},2887752350:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.DeferredPromise=void 0;let c=s(class{getPromise(){return this.promise}resolvePromise(p){this.resolve(p)}resolveAndReplacePromise(p){this.resolve(p),this.promise=new Promise((m,g)=>{this.resolve=m,this.reject=g})}rejectPromise(p){this.reject(p)}rejectAndReplacePromise(p){this.reject(p),this.promise=new Promise((m,g)=>{this.resolve=m,this.reject=g})}constructor(){this.promise=new Promise((p,m)=>{this.resolve=p,this.reject=m})}},"DeferredPromise");a.DeferredPromise=c},8023592660:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(g,l,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{h(n.next(S))}catch(f){i(f)}}s(o,"fulfilled");function u(S){try{h(n.throw(S))}catch(f){i(f)}}s(u,"rejected");function h(S){S.done?t(S.value):e(S.value).then(o,u)}s(h,"step"),h((n=n.apply(g,l||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.VideoFxCanvasOpsManager=void 0;const p=c(5513317584);let m=s(class{getInferenceInputData(l){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(l,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(l){return d(this,void 0,void 0,function*(){if(this.streamParameters=l,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const r=document.createElement("canvas");r.width=this.streamParameters.width,r.height=this.streamParameters.height,r.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(l){return d(this,void 0,void 0,function*(){const r=l.backgroundReplacement.backgroundImageURL,n=l.backgroundReplacement.defaultColor;if(r)try{const e=yield this.loadImage(r);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(n)})}resizeAndSetReplacementImage(l){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.drawImage(l,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}resizeAndSetReplacementColor(l){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.fillStyle=l,n.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}loadImage(l){return d(this,void 0,void 0,function*(){const n=yield(yield fetch(l).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(n),new Promise((t,i)=>{e.onload=()=>{t(e)},e.onerror=o=>{i(o)}})})}constructor(l,r){this.streamParameters=l,this.outputCanvas=r,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");a.VideoFxCanvasOpsManager=m},5513317584:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.FXLIB_PATH=a.WORKER_PATH=a.CDN_BASE_PATH=a.RESOURCE_CONSTRAINTS=a.SEGMENTATION_MODEL=a.DEFAULT_STREAM_PARAMETERS=a.WORKER_MSG=void 0,a.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},a.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},a.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},a.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},a.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const c="/ml_media_fx/otherassets";a.WORKER_PATH=`${c}/worker.js`,a.FXLIB_PATH=`${c}/fxlib.js`},2403769553:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(v,E,_,T){function w(M){return M instanceof _?M:new _(function(R){R(M)})}return s(w,"adopt"),new(_||(_=Promise))(function(M,R){function O(P){try{A(T.next(P))}catch(D){R(D)}}s(O,"fulfilled");function k(P){try{A(T.throw(P))}catch(D){R(D)}}s(k,"rejected");function A(P){P.done?M(P.value):w(P.value).then(O,k)}s(A,"step"),A((T=T.apply(v,E||[])).next())})},p=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(a,"__esModule",{value:!0});const m=c(4179955699),g=c(6582301018),l=c(8113008952),r=p(c(8351168186)),n=p(c(7338764361)),e=c(840544383),t=p(c(8066052849)),i=p(c(6672418579)),o=c(2887752350),u=c(8023592660),h=c(5513317584),S=c(615959602);let f=s(class Ql{process(E){return d(this,void 0,void 0,function*(){return E})}fxProcess(E){return d(this,void 0,void 0,function*(){const _=E[0].asCanvasElement();this.didStreamParametersChange(_)&&(yield this.adjustProcessorForNewStreamParameters(_));try{yield this.manageSegmentationMask(_)}catch(T){throw this.logger.error(T),new Error("Video stream could not be processed")}return yield this.renderer.render(_,this.segmentationMask),E[0]=this.canvasVideoFrameBuffer,E})}noOpProcess(E){return d(this,void 0,void 0,function*(){return E})}didStreamParametersChange(E){return E.width!==this.streamParameters.width||E.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(E){return d(this,void 0,void 0,function*(){this.streamParameters.width=E.width,this.streamParameters.height=E.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return d(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:h.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:h.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(E){return d(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const _=this.canvasOpsManager.getInferenceInputData(E);this.segmentationMask=yield this.generateSegmentationMask(_),this.segmentationRateManager.completeSegmentation()}}catch(_){throw this.logger.error(_.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(E){return d(this,void 0,void 0,function*(){Ql.isSharedArrayBufferSupported?(this.sharedImageData.set(E.data),this.engineWorker.postMessage({msg:h.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:h.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:E},[E.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(_){throw this.logger.error(_.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(E){return{backgroundBlur:{isEnabled:E.backgroundBlur.isEnabled,strength:E.backgroundBlur.strength},backgroundReplacement:{isEnabled:E.backgroundReplacement.isEnabled,backgroundImageURL:E.backgroundReplacement.backgroundImageURL,defaultColor:E.backgroundReplacement.defaultColor}}}setEffectConfig(E){return d(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(E,this.effectConfig))return;const _=this.cloneConfigFrom(E);try{yield this.validateEffectConfig(_)}catch(T){throw this.logger.error(T.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}_.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(_),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,_),this.effectConfig=_,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(E){return d(this,void 0,void 0,function*(){if(E.backgroundBlur.isEnabled&&E.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");E.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(E))})}validateReplacementConfig(E){return d(this,void 0,void 0,function*(){if(E.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!E.backgroundReplacement.backgroundImageURL&&!E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{E.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(E.backgroundReplacement.backgroundImageURL))}catch(T){throw this.logger.error(T.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const _=E.backgroundReplacement.defaultColor;if(_&&_!=="black"&&_!=="#000000"&&_!=="#000"){if(_.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(_))throw new Error(`Invalid hexadecimal color code for default replacement background: ${_}`);const w=document.createElement("canvas").getContext("2d"),M=w.fillStyle;if(w.fillStyle=_,w.fillStyle===M)throw new Error(`Invalid color for default replacement background: ${_}`)}})}validateProcessingBudgetPerFrame(E){if(E<h.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||E>h.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${h.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${h.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return d(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const E=this.getVideoFxAssetParams();yield this.loadEngineWorker(E),yield this.buildEngine(E),yield this.loadFxLib(E),this.renderer=constructRenderer(h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const E=e.getDefaultAssetSpec();return{assetGroup:E.assetGroup,revisionID:E.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(E,_){const T=new URL(E);for(const[w,M]of Object.entries(_))if(M!==void 0){const R=encodeURIComponent(w),O=encodeURIComponent(M);T.searchParams.set(R,O)}return T.toString()}loadEngineWorker(E){return d(this,void 0,void 0,function*(){try{const _=this.getPathFromVideoFxAssetParams(h.CDN_BASE_PATH+h.WORKER_PATH,E);this.engineWorker=yield g.loadWorker(_,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",T=>this.engineWorkerReceiver(T))}catch(_){throw this.logger.error(_.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(E){return d(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:h.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:h.CDN_BASE_PATH,sdkVersioningParams:E}});try{yield this.buildEnginePromise.getPromise()}catch(_){throw this.logger.error(_.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(E){return d(this,void 0,void 0,function*(){const _=this.getPathFromVideoFxAssetParams(h.CDN_BASE_PATH+h.FXLIB_PATH,E),T={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const w=yield m.fetchWithBehavior(_,T,{});if(!w.ok)throw new Error("Fetch failed.");const M=window.URL.createObjectURL(yield w.blob());yield new Promise((R,O)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",M),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",R),this.fxLibScript.addEventListener("error",O),document.body.appendChild(this.fxLibScript)})}catch(w){throw this.logger.error(w.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(E){const _=E.data;switch(_.msg){case h.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(_.payload);break;case h.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(_.payload.output);break;case h.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case h.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(_)}`);break}}settleEngineBuildPromise(E){E!==h.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(E){E?this.segmentationRequestPromise.resolveAndReplacePromise(E):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const E=new ImageData(new Uint8ClampedArray(this.sharedImageData),h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(E)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n.default,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return d(this,void 0,void 0,function*(){let T=!0;const w=s((O,k)=>{O&&(E.info(k),T=!1)},"checkEnv");w(typeof globalThis>"u","Browser does not have globalThis."),w(!l.supportsWorker(globalThis,E),"Browser does not support web workers."),w(!l.supportsWASM(globalThis,E),"Browser does not support wasm."),w(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const M=new r.default;w(!M.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const R=s(()=>d(this,void 0,void 0,function*(){if(_)try{const O=new Ql(E);yield O.loadAssets(),yield O.destroy()}catch{return E.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(T?yield R():!1)})}static create(E,_){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return d(this,void 0,void 0,function*(){const w=new Ql(E,T);try{return yield w.loadAssets(),yield w.setEffectConfig(_),w}catch(M){throw E.error(M.toString()),w.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(E){this.eventController?this.eventController=E:(this.eventController=E,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const E={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",E)}sameVideoFxConfig(E,_){return E.backgroundBlur.isEnabled===_.backgroundBlur.isEnabled&&E.backgroundBlur.strength===_.backgroundBlur.strength&&E.backgroundReplacement.backgroundImageURL===_.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor===_.backgroundReplacement.defaultColor&&E.backgroundReplacement.isEnabled===_.backgroundReplacement.isEnabled}constructor(E,_=h.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,T){this.logger=E,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new i.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(_)}catch(w){throw this.logger.error(w),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${_}`)}T&&(this.eventController=T),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,_),this.streamParameters={framerate:h.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:h.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:h.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:h.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},Ql.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${Ql.isSharedArrayBufferSupported}`),this.canvasOpsManager=new u.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${_}`)}},"VideoFxProcessor");a.default=f,f.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},615959602:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VideoFxSegmentationRateManager=void 0;const d=c(5513317584);let p=s(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=d.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(g){g>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&g<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(g,l){this.logger=g,this.targetSegmentationCyclePercentage=l/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=d.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");a.VideoFxSegmentationRateManager=p},2551170247:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"VideoSource");a.default=c},5134603106:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class Sh{add(p){this.ids.add(p)}array(){return Array.from(this.ids.values()).sort((m,g)=>m-g)}contain(p){return this.ids.has(p)}forEach(p){this.ids.forEach(p)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(p){if(!p)return this.ids.size===0;const m=this.array(),g=p.array();if(m.length!==g.length)return!1;for(let l=0;l<m.length;l++)if(m[l]!==g[l])return!1;return!0}clone(){return new Sh(this.array())}remove(p){this.ids.delete(p)}toJSON(){return this.array()}truncate(p){const m=this.array();return new Sh(m.splice(0,p))}constructor(p){this.ids=new Set(p)}},"DefaultVideoStreamIdSet");a.default=c},5216544790:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(5391134031),m=d(c(5134603106)),g=d(c(4202624657));let l=s(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(n){return n>0&&n<1e3?1:Math.trunc(n/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const n=[];return this.currentIndex.sources.forEach(e=>{const t=new g.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,n.push(t)}),n}integrateUplinkPolicyDecision(n){if(n&&n.length){const e=n[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(n){if(this.currentIndex=n,!n)return;const e=new Map;let t=!1;for(const i of n.sources){if(!e.has(i.attendeeId)){e.set(i.attendeeId,i.groupId);continue}const o=e.get(i.attendeeId);o<i.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${i.attendeeId}, replacing with newer group ID ${i.groupId}`),e.set(i.attendeeId,i.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(i=>e.get(i.attendeeId)===i.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(n){this.currentSubscribeAck=n,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,n.allocations&&n.allocations!==void 0&&n.allocations.length>0&&(this.sendVideoStreamId=n.allocations[0].streamId)}integrateBitratesFrame(n){if(this.currentIndex)for(const e of n.bitrates){const t=this.currentIndex.sources.find(i=>i.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.sources)n.add(e.streamId);return n}allVideoSendingSourcesExcludingSelf(n){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const i of this.currentIndex.sources){const{attendeeId:o,externalUserId:u,mediaType:h}=i;o!==n&&h===p.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:u}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(n,e,t,i){const o=new Set;if(this.currentIndex)for(const v of this.currentIndex.sources)v.attendeeId===n||v.mediaType!==p.SdkStreamMediaType.VIDEO||!e.has(v.attendeeId)&&!t.has(v.attendeeId)&&o.add(v.attendeeId);const u=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n),h=new Map;let S=0;u.forEach((v,E)=>{h.set(E,v[0]),S+=v[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(u,e,S,i,h),this.trySelectHighBitrateForAttendees(u,o,S,i,h);const f=new m.default;for(const v of h.values())f.add(v.streamId);return f}highestQualityStreamFromEachGroupExcludingSelf(n){const e=new m.default;if(this.currentIndex){const t=new Map;for(const i of this.currentIndex.sources)i.attendeeId===n||i.mediaType!==p.SdkStreamMediaType.VIDEO||(!t.has(i.groupId)||i.maxBitrateKbps>t.get(i.groupId).maxBitrateKbps)&&t.set(i.groupId,i);for(const i of t.values())e.add(i.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(n){return this.highestQualityStreamFromEachGroupExcludingSelf(n).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${n}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${n}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(n){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(n);return e||(this.logger.info(`stream ID ${n} does not correspond to a known attendee`),"")}attendeeIdForGroupId(n){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(n);return e||(this.logger.info(`group ID ${n} does not correspond to a known attendee`),"")}groupIdForStreamId(n){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===n)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===n)return e.groupId}if(this.indexForLastRemoteVideoUpdate){for(const e of this.indexForLastRemoteVideoUpdate.sources)if(e.streamId===n)return e.groupId}}}StreamIdsInSameGroup(n,e){return this.groupIdForStreamId(n)===this.groupIdForStreamId(e)}streamIdForTrack(n){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(n)}streamIdForSSRC(n){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(n)}overrideStreamIdMappings(n,e){if(this.subscribeTrackToStreamMap){for(const[t,i]of this.subscribeTrackToStreamMap.entries())if(n===i){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,i]of this.subscribeSsrcToStreamMap.entries())if(n===i){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(n){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(n)}streamsPausedAtSource(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)n.add(e);return n}sendVideoStreamIdFromRid(n){return this.sendVideoStreamId}buildTrackToStreamMap(n){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(n){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(n){const e=new Map;for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(n){const e=new Map;if(n)for(const t of n.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(n){const e=new Map;for(const t of n.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(n){const e=new Map;if(n)for(const t of n.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(n,e,t,i,o){for(const u of e){if(t>=i)break;if(n.has(u)){const h=n.get(u);for(const S of h.reverse())if(t-o.get(u).maxBitrateKbps+S.maxBitrateKbps<i){t=t-o.get(u).maxBitrateKbps+S.maxBitrateKbps,o.set(u,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===n||t.mediaType!==p.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,i)=>{t.sort((o,u)=>o.maxBitrateKbps>u.maxBitrateKbps?1:o.maxBitrateKbps<u.maxBitrateKbps?-1:0)}),e}constructor(n){this.logger=n,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new g.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");a.default=l},7562203998:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=c(5391134031),m=d(c(5216544790)),g=d(c(4202624657));let l=s(class Zl extends m.default{localStreamDescriptions(){const n=[];return this._localStreamInfos.forEach(e=>{n.push(e.clone())}),n}integrateUplinkPolicyDecision(n){let e=!0,t=0;for(let i=0;i<n.length;i++){const o=n[i].maxBitrate/1e3,u=n[i].maxFramerate;if(!e||i===this._localStreamInfos.length){e=!1;const h=new g.default;h.maxBitrateKbps=o,h.maxFrameRate=u,h.disabledByUplinkPolicy=o===0,h.rid=n[i].rid,o!==0&&(h.timeEnabled=Date.now()),this._localStreamInfos.push(h),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=u,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(n){super.integrateBitratesFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of n.bitrates)e.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const i of t)e.has(i)||(this.streamIdToBitrateKbpsMap.get(i)===Zl.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(i,Zl.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(i,Zl.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let n="";for(const e of this._localStreamInfos)n+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>n)}integrateIndexFrame(n){super.integrateIndexFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of this.currentIndex.sources)i.mediaType===p.SdkStreamMediaType.VIDEO&&(e.add(i.streamId),this.streamIdToBitrateKbpsMap.has(i.streamId)||this.streamIdToBitrateKbpsMap.set(i.streamId,Zl.UNSEEN_STREAM_BITRATE));for(const i of t)e.has(i)||this.streamIdToBitrateKbpsMap.delete(i)}integrateSubscribeAckFrame(n){if(super.integrateSubscribeAckFrame(n),!n.allocations||n.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of n.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,Zl.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(n){let e=0;return this._sendRidToVideoStreamIdMap.has(n)&&(e=this._sendRidToVideoStreamIdMap.get(n)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");a.default=l,l.UNSEEN_STREAM_BITRATE=-2,l.RECENTLY_INACTIVE_STREAM_BITRATE=-1,l.NOT_SENDING_STREAM_BITRATE=0,l.BitratesMsgFrequencyMs=4e3},4202624657:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});const d=c(5391134031);let p=s(class KS{clone(){const g=new KS;return g.attendeeId=this.attendeeId,g.groupId=this.groupId,g.streamId=this.streamId,g.ssrc=this.ssrc,g.trackLabel=this.trackLabel,g.maxBitrateKbps=this.maxBitrateKbps,g.avgBitrateKbps=this.avgBitrateKbps,g.maxFrameRate=this.maxFrameRate,g.timeEnabled=this.timeEnabled,g.disabledByUplinkPolicy=this.disabledByUplinkPolicy,g.width=this.width,g.height=this.height,g}toStreamDescriptor(){const g=d.SdkStreamDescriptor.create();return g.mediaType=d.SdkStreamMediaType.VIDEO,g.trackLabel=this.trackLabel,g.attendeeId=this.attendeeId,g.streamId=this.streamId,g.groupId=this.groupId,g.framerate=this.maxFrameRate,g.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,g.avgBitrateBps=this.avgBitrateKbps,g}totalPixels(){return this.width*this.height}constructor(g,l,r,n,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=g,this.groupId=l,this.streamId=r,this.maxBitrateKbps=n,this.avgBitrateKbps=e}},"VideoStreamDescription");a.default=p},1140481832:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8351168186)),m=d(c(4599834734)),g=d(c(5449946032));let l=s(class na{static connectVideoStreamToVideoElement(n,e,t){const i=t&&n.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(na.setVideoElementFlag(e,"disablePictureInPicture",t),na.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==i&&(e.style.transform=i),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==n&&(e.srcObject=n,new p.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(u=>{console.warn("Error playing video in Safari",u)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n)if(e)t||(n.srcObject=null,n.style.transform="");else{if(!n.srcObject)return;n.pause(),n.style.transform="",na.setVideoElementFlag(n,"disablePictureInPicture",!1),na.setVideoElementFlag(n,"disableRemotePlayback",!1),n.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&na.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new g.default}devicePixelRatioChanged(n){this.tileState.devicePixelRatio=n,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(n,e,t,i,o,u,h,S){let f=!1;this.tileState.boundAttendeeId!==n&&(this.tileState.boundAttendeeId=n,new m.default(n).hasModality(m.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),f=!0),this.tileState.boundExternalUserId!==h&&(this.tileState.boundExternalUserId=h,f=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,f=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,f=!0),this.tileState.videoStreamContentWidth!==i&&(this.tileState.videoStreamContentWidth=i,f=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,f=!0),this.tileState.streamId!==u&&(this.tileState.streamId=u,f=!0),this.tileState.groupId!==S&&(this.tileState.groupId=S,f=!0),f&&this.sendTileStateUpdate()}bindVideoElement(n){let e=!1;this.tileState.boundVideoElement!==n&&(this.tileState.boundVideoElement=n,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==n.clientWidth&&(this.tileState.videoElementCSSWidthPixels=n.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==n.clientHeight&&(this.tileState.videoElementCSSHeightPixels=n.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const n=document.createElement("canvas"),e=this.tileState.boundVideoElement;n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height;const t=n.getContext("2d");return t.drawImage(e,0,0,n.width,n.height),t.getImageData(0,0,n.width,n.height)}setStreamId(n){this.tileState.streamId=n,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?na.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):na.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(n,e,t){e in n&&(n[e]=t)}constructor(n,e,t,i){this.tileController=t,this.devicePixelRatioMonitor=i,this.tileState=new g.default,this.tileState.tileId=n,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");a.default=l},5449946032:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class JS{clone(){const p=new JS;return p.tileId=this.tileId,p.localTile=this.localTile,p.isContent=this.isContent,p.active=this.active,p.paused=this.paused,p.poorConnection=this.poorConnection,p.boundAttendeeId=this.boundAttendeeId,p.boundExternalUserId=this.boundExternalUserId,p.boundVideoStream=this.boundVideoStream,p.boundVideoElement=this.boundVideoElement,p.nameplate=this.nameplate,p.videoStreamContentWidth=this.videoStreamContentWidth,p.videoStreamContentHeight=this.videoStreamContentHeight,p.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,p.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,p.devicePixelRatio=this.devicePixelRatio,p.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,p.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,p.streamId=this.streamId,p.groupId=this.groupId,p}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");a.default=c},9251190564:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(t,i,o,u){function h(S){return S instanceof o?S:new o(function(f){f(S)})}return s(h,"adopt"),new(o||(o=Promise))(function(S,f){function v(T){try{_(u.next(T))}catch(w){f(w)}}s(v,"fulfilled");function E(T){try{_(u.throw(T))}catch(w){f(w)}}s(E,"rejected");function _(T){T.done?S(T.value):h(T.value).then(v,E)}s(_,"step"),_((u=u.apply(t,i||[])).next())})},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8981226922)),g=p(c(2343182956)),l=p(c(2827699573)),r=c(903520651),n=p(c(1140481832));let e=s(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new g.default(new l.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return d(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const i=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,i.destroy()})}bindVideoElement(i,o){const u=this.getVideoTile(i);if(u===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${i}`);return}u.bindVideoElement(o)}unbindVideoElement(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const u=this.getVideoTile(i);if(u===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${i}`);return}this.logger.info("Unbinding the video element");const h=u.stateRef().boundVideoElement;u.bindVideoElement(null),o&&(this.logger.info("Cleaning up the video element"),n.default.disconnectVideoStreamFromVideoElement(h,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===m.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const i=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),i.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)||(this.audioVideoController.pauseReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.add(i)),o.pause())}unpauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)&&(this.audioVideoController.resumeReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.delete(i)),o.unpause())}getVideoTile(i){return this.tileMap.has(i)?this.tileMap.get(i):null}getVideoTileArea(i){const o=i.state();let u=0,h=0;return o.boundVideoElement&&(u=o.boundVideoElement.clientHeight*o.devicePixelRatio,h=o.boundVideoElement.clientWidth*o.devicePixelRatio),u*h}getAllRemoteVideoTiles(){const i=new Array;return this.tileMap.forEach((o,u)=>{(!this.currentLocalTile||u!==this.currentLocalTile.id())&&i.push(o)}),i}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const o=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const u=this.tileFactory.makeTile(o,i,this,this.devicePixelRatioMonitor);return this.tileMap.set(o,u),u}removeVideoTile(i){if(!this.tileMap.has(i))return;const o=this.tileMap.get(i);this.currentLocalTile===o&&(this.currentLocalTile=null),o.destroy(),this.tileMap.delete(i),this.audioVideoController.forEachObserver(u=>{r.Maybe.of(u.videoTileWasRemoved).map(h=>h.bind(u)(i))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(i){const o=[];for(const u of this.getAllVideoTiles()){const h=u.state();h.boundAttendeeId===i&&(this.removeVideoTile(h.tileId),o.push(h.tileId))}return o}removeAllVideoTiles(){const i=Array.from(this.tileMap.keys());for(const o of i)this.removeVideoTile(o)}sendTileStateUpdate(i){this.audioVideoController.forEachObserver(o=>{r.Maybe.of(o.videoTileDidUpdate).map(u=>u.bind(o)(i))})}haveVideoTilesWithStreams(){for(const i of this.getAllVideoTiles())if(i.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(i){return!!this.getVideoTileForAttendeeId(i)}getVideoTileForAttendeeId(i){for(const o of this.getAllVideoTiles())if(o.state().boundAttendeeId===i)return o}captureVideoTile(i){const o=this.getVideoTile(i);return o?o.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(i,o,u){this.tileFactory=i,this.audioVideoController=o,this.logger=u,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=o.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");a.default=e},1695899970:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1140481832));let m=s(class{makeTile(l,r,n,e){return new p.default(l,r,n,e)}},"DefaultVideoTileFactory");a.default=m},7699083583:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{},"BitrateParameters");a.default=c},3361826027:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8438160003)),m=d(c(2962876954)),g=c(903520651),l=d(c(8261422434)),r=d(c(7699083583));let n=s(class ls{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new r.default,new r.default,new r.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const i=t.map((o,u,h)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(i),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const i=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=i!==this.numSenders,u=t.numberOfParticipants(),h=u>=0&&u<=2,S=this.shouldDisableSimulcast!==h;this.numSenders=i,this.shouldDisableSimulcast=h,this.optimalParameters=new l.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,i){return JSON.stringify(t)===JSON.stringify(i)}encodingParametersEqual(){let t=!1;for(const i of m.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(i),this.currentQualityMap.get(i)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?ls.kHiTargetBitrateKbpsFhd:ls.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?ls.kMidTargetBitrateKbpsFhd:ls.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?ls.kLowTargetBitrateKbpsFhd:ls.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const i=new Map,o=1e3,u=m.default.NAME_ARR_ASCENDING,h=t;let S=this.shouldDisableSimulcast?1:4;for(let f=0;f<u.length;f++){const v=u[f];i.set(v,{rid:v,active:h[f]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:h[f]*o}),S=S/2}return i}getQualityMapString(t){let i="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(u=>{i+=`{ rid: ${u.rid} active:${u.active} maxBitrate:${u.maxBitrate}}`}),i}getEncodingSimulcastLayer(t){switch(t){case 0:return p.default.High;case 1:return p.default.LowAndHigh;case 2:return p.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(i=>{g.Maybe.of(i.encodingSimulcastLayersDidChange).map(o=>o.bind(i)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)t(i)}constructor(t,i){this.selfAttendeeId=t,this.logger=i,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=ls.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=ls.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=ls.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new l.default(0,0,0,0,!0),this.parametersInEffect=new l.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");a.default=n,n.kHiTargetBitrateKbpsHd=1200,n.kMidTargetBitrateKbpsHd=600,n.kLowTargetBitrateKbpsHd=300,n.kHiTargetBitrateKbpsFhd=2e3,n.kMidTargetBitrateKbpsFhd=1e3,n.kLowTargetBitrateKbpsFhd=500},4134174226:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(1438956810));let m=s(class{updateConnectionMetric(l){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var l,r,n,e,t,i,o,u,h,S,f,v;const E=new Map,_=1e3,T=p.default.NAME_ARR_ASCENDING;return E.set(T[0],{rid:T[0],active:!0,scaleResolutionDownBy:((r=(l=this.encodingParams)===null||l===void 0?void 0:l.low)===null||r===void 0?void 0:r.scaleResolutionDownBy)||2,maxBitrate:(((e=(n=this.encodingParams)===null||n===void 0?void 0:n.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*_,maxFramerate:((i=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||i===void 0?void 0:i.maxFramerate)||5}),E.set(T[1],{rid:T[1],active:!0,scaleResolutionDownBy:((u=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||u===void 0?void 0:u.scaleResolutionDownBy)||1,maxBitrate:(((S=(h=this.encodingParams)===null||h===void 0?void 0:h.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*_,maxFramerate:(v=(f=this.encodingParams)===null||f===void 0?void 0:f.high)===null||v===void 0?void 0:v.maxFramerate}),E}updateIndex(l){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(l){}setHasBandwidthPriority(l){}setHighResolutionFeatureEnabled(l){this.enableUhdContent=l,this.defaultHiTargetBitrateKbps=l?2e3:1200,this.defaultLowTargetBitrateKbps=l?500:300}addObserver(l){}removeObserver(l){}forEachObserver(l){}constructor(l,r){this.encodingParams=r,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");a.default=m},3423911843:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})},p=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8261422434));let g=s(class ql{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new m.default(0,0,0,0,!1),this.parametersInEffect=new m.default(0,0,0,0,!1),this.encodingParamMap.set(ql.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(r){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(r){var n;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=r.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),i=r.numberOfParticipants();if(this.numParticipants===i&&this.numberOfPublishedVideoSources===t){(n=this.logger)===null||n===void 0||n.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=i,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let r=1;if(this.transceiverController){const n=this.getStreamCaptureSetting();n&&(r=this.calculateEncodingParameters(n).scaleResolutionDownBy)}this.optimalParameters=new m.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,r,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let r=640;return this.getNumberOfPublishedVideoSources()>4&&(r=320),r}captureHeight(){let r=384;return this.getNumberOfPublishedVideoSources()>4&&(r=192),r}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let r=0;return this.getNumberOfPublishedVideoSources()<=2?r=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?r=this.idealMaxBandwidthKbps*2/3:r=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(r)}setIdealMaxBandwidthKbps(r){this.idealMaxBandwidthKbps=r}setHasBandwidthPriority(r){this.hasBandwidthPriority=r}setTransceiverController(r){this.transceiverController=r}setSVCEnabled(r){var n;this.enableSVC=r,(n=this.logger)===null||n===void 0||n.info(`setSVCEnabled, enable: ${r}}`)}setHighResolutionFeatureEnabled(r){this.enableHighResolutionFeature=r}updateTransceiverController(){return d(this,void 0,void 0,function*(){const r=this.getStreamCaptureSetting();if(!r)return;const n=this.calculateEncodingParameters(r);this.shouldUpdateEndcodingParameters(n)&&(this.encodingParamMap.set(ql.encodingMapKey,n),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(r){var n,e;const t=(e=(n=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||n===void 0?void 0:n.encodings)===null||e===void 0?void 0:e[0];return r.maxBitrate!==(t==null?void 0:t.maxBitrate)||r.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(r==null?void 0:r.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(r){var n,e,t;const i=this.maxBandwidthKbps()*1e3;let o=1,u=720;if(r.height!==void 0&&r.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(u=ql.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),ql.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],u===480&&(!((n=this.browserBehavior)===null||n===void 0)&&n.disable480pResolutionScaleDown())&&(u=360),o=Math.max(Math.min(r.height,r.width)/u,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${r.width}x${r.height}. New dimension is ${r.width/o}x${r.height/o}`)),this.enableSVC){let h;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?h="L1T1":h="L3T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${i}  targetHeight: ${u}  scalabilityMode: ${h}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:i,scalabilityMode:h}}else return{scaleResolutionDownBy:o,maxBitrate:i}}getStreamCaptureSetting(){var r,n,e,t;return(t=(e=(n=(r=this.transceiverController)===null||r===void 0?void 0:r.localVideoTransceiver())===null||n===void 0?void 0:n.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var r;return(r=this.numberOfPublishedVideoSources)!==null&&r!==void 0?r:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(r,n){const e=r??n,t=e.length>0&&ql.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(r,n=!0,e=void 0,t=void 0){this.selfAttendeeId=r,this.scaleResolution=n,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");a.default=g,g.encodingMapKey="video",g.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],g.SVCCodecNames=["VP9"]},9128807920:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8261422434));let m=s(class{updateConnectionMetric(l){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(l){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new p.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(l){}setHasBandwidthPriority(l){}setHighResolutionFeatureEnabled(l){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");a.default=m},1622249334:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});function c(p){return p.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}s(c,"stringify");let d=s(class{debug(){for(var m=arguments.length,g=new Array(m),l=0;l<m;l++)g[l]=arguments[l];this.base.debug(c(g))}info(){for(var m=arguments.length,g=new Array(m),l=0;l<m;l++)g[l]=arguments[l];this.base.info(c(g))}warn(){for(var m=arguments.length,g=new Array(m),l=0;l<m;l++)g[l]=arguments[l];this.base.warn(c(g))}error(){for(var m=arguments.length,g=new Array(m),l=0;l<m;l++)g[l]=arguments[l];this.base.error(c(g))}constructor(m){this.base=m}},"LoggerAdapter");a.default=d},8525594090:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(i,o,u,h){function S(f){return f instanceof u?f:new u(function(v){v(f)})}return s(S,"adopt"),new(u||(u=Promise))(function(f,v){function E(w){try{T(h.next(w))}catch(M){v(M)}}s(E,"fulfilled");function _(w){try{T(h.throw(w))}catch(M){v(M)}}s(_,"rejected");function T(w){w.done?f(w.value):S(w.value).then(E,_)}s(T,"step"),T((h=h.apply(i,o||[])).next())})},p=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(a,"__esModule",{value:!0}),a.VoiceFocusDeviceTransformer=void 0;const m=c(8019356695),g=c(840544383),l=p(c(8066052849)),r=p(c(1622249334)),n=p(c(282836061)),e=p(c(9502253674));let t=s(class ws{static isSupported(o,u){var h,S;const f=ws.defaultFetchBehavior(),v=u!=null&&u.logger?new r.default(u.logger):void 0,E={fetchBehavior:f,logger:v};if(g.isIFramed()){if((u==null?void 0:u.allowIFrame)===!1)return(h=u==null?void 0:u.logger)===null||h===void 0||h.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=u==null?void 0:u.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return m.VoiceFocus.isSupported(ws.augmentSpec(o),E)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,f=arguments.length>4?arguments[4]:void 0;var v,E,_;return d(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const T=((_=(E=(v=S==null?void 0:S.Meeting)===null||v===void 0?void 0:v.MeetingFeatures)===null||E===void 0?void 0:E.Audio)===null||_===void 0?void 0:_.EchoReduction)==="AVAILABLE",w=h&&h.supported===!0&&h.model.name==="ns_es"&&!T,M=o.name==="ns_es"&&!T;if(w||M)throw new Error("Echo Reduction requested but not enabled.");const R=new ws(o,u,h);return yield R.init(),R})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d(this,void 0,void 0,function*(){return new ws(o,u,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,u){return d(this,void 0,void 0,function*(){if(this.supported)try{const[S,f]=yield this.allocateVoiceFocus(!0),v=Object.assign(Object.assign({},u),{es:this.spec.name==="ns_es"});return new n.default(o,S,f,v)}catch{return}})}static destroyVoiceFocus(o){var u;return d(this,void 0,void 0,function*(){(u=o==null?void 0:o.vf)===null||u===void 0||u.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:ws.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d(this,void 0,void 0,function*(){const u={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return m.VoiceFocus.configure(this.spec,u)})}init(){var o;return d(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const u=yield this.configuration;if(!u.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(u,this.preload);try{yield this.pendingVoiceFocus}catch(h){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${h}`),this.supported=!1}})}createVoiceFocus(o,u){return d(this,void 0,void 0,function*(){const h=new e.default;return this.vf=yield m.VoiceFocus.init(o,{delegate:h,preload:u,logger:this.vfLogger}),[this.vf,h]})}allocateVoiceFocus(o){return d(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const u=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,u}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return l.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return l.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=ws.majorMinorVersion()||"unknown",u=l.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(u)}`}}constructor(o,{preload:u=!0,logger:h,fetchBehavior:S=ws.defaultFetchBehavior()},f){this.spec=o,this.supported=!0,this.logger=h,this.vfLogger=h?new r.default(h):void 0,this.preload=u,this.fetchBehavior=S,this.spec=ws.augmentSpec(this.spec),f&&(this.configuration=Promise.resolve(f))}},"VoiceFocusDeviceTransformer");a.VoiceFocusDeviceTransformer=t,a.default=t},282836061:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});const m=p(c(8351168186));let g=s(class YS{getInnerDevice(){return this.device}mute(n){return d(this,void 0,void 0,function*(){this.node&&(n?yield this.node.disable():yield this.node.enable())})}stop(){return d(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(n){return d(this,void 0,void 0,function*(){return this.device===n&&!l(n)?this:new YS(n,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return d(this,void 0,void 0,function*(){if(this.failed)return this.device;const n=this.nodeOptions.es,e={echoCancellation:!n,googEchoCancellation:!n,googEchoCancellation2:!n,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(n){var e,t;return d(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===n)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(n,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(n,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const u=this.node,h=this.node;return{start:u,end:h}}catch(u){throw this.failed=!0,this.delegate.onFallback(this,u),u}})}observeMeetingAudio(n){return d(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.addAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(n){return d(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.removeAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}addFarEndStream(n){return d(this,void 0,void 0,function*(){!this.nodeOptions.es||!n||this.farEndStreamToAudioSourceNode.has(n)||(this.node?this.assignFarEndStreamToAudioSourceNode(n):this.farEndStreamToAudioSourceNode.set(n,null))})}removeFarendStream(n){var e;return d(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(n))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(n)})}meetingAudioStreamBecameActive(n){return d(this,void 0,void 0,function*(){this.addFarEndStream(n)})}meetingAudioStreamBecameInactive(n){return d(this,void 0,void 0,function*(){this.removeFarendStream(n)})}assignFarEndStreamToAudioSourceNode(n){const e=this.node.context.createMediaStreamSource(n);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(n,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(n,e,t,i,o=!1,u=void 0,h=new m.default,S=new Map,f=void 0,v=void 0){this.device=n,this.voiceFocus=e,this.delegate=t,this.nodeOptions=i,this.failed=o,this.node=u,this.browserBehavior=h,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=f,this.mixSourceNode=v}},"VoiceFocusTransformDevice");function l(r){return r==="default"?!0:!r||typeof r!="object"?!1:"deviceId"in r&&r.deviceId==="default"||"id"in r&&r.id==="default"}s(l,"isDefaultDevice"),a.default=g},9502253674:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class{addObserver(p){this.observers.add(p)}removeObserver(p){this.observers.delete(p)}onFallback(p,m){var g;for(const l of this.observers)(g=l.voiceFocusFellBackToInnerStream)===null||g===void 0||g.call(l,p,m)}onCPUWarning(){var p;for(const m of this.observers)(p=m.voiceFocusInsufficientResources)===null||p===void 0||p.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");a.default=c},338869682:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});let c=s(class tu{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(p){let m=0;for(const g of p.streams){const l=!!g.attendeeId,r=!!g.externalUserId,n=g.hasOwnProperty("muted"),e=!!g.dropped;if(l){this.attendeeIdToStreamId[g.attendeeId]&&this.attendeeIdToStreamId[g.attendeeId]<g.audioStreamId&&delete this.attendeeIdToStreamId[g.attendeeId],this.streamIdToAttendeeId[g.audioStreamId]=g.attendeeId;const t=r?g.externalUserId:g.attendeeId;this.streamIdToExternalUserId[g.audioStreamId]=t,this.attendeeIdToStreamId[g.attendeeId]=g.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(g.attendeeId,!0,t,!1,{attendeeIndex:m++,attendeesInFrame:p.streams.length})}if(n){const t=this.streamIdToAttendeeId[g.audioStreamId],i=this.streamIdToExternalUserId[g.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,g.muted,null,i)}if(!l&&!n){const t=this.streamIdToAttendeeId[g.audioStreamId];if(t){const i=this.streamIdToExternalUserId[g.audioStreamId];delete this.streamIdToAttendeeId[g.audioStreamId],delete this.streamIdToExternalUserId[g.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[g.audioStreamId],this.attendeeIdToStreamId[t]===g.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const u of Object.keys(this.streamIdToAttendeeId)){const h=parseInt(u);if(h>g.audioStreamId&&this.streamIdToAttendeeId[h]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,i,e,{attendeeIndex:m++,attendeesInFrame:p.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(p),this.sessionReconnected=!1)}cleanUpState(p){const m=Object.values(this.streamIdToAttendeeId),g=p.streams.map(r=>r.attendeeId),l=m.filter(r=>!g.includes(r));for(const[r,n]of l.entries()){const e=this.attendeeIdToStreamId[n],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[n],n===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,t,!1,{attendeeIndex:r,attendeesInFrame:n.length})}}sendRealtimeUpdatesForAudioMetadata(p){let m=null,g=null;for(const l of p.attendeeStates){const r=this.attendeeIdForStreamId(l.audioStreamId);l.hasOwnProperty("volume")&&(m===null&&(m={}),r!==null&&(m[r]=this.normalizedVolume(l))),l.hasOwnProperty("signalStrength")&&(g===null&&(g={}),r!==null&&(g[r]=this.normalizedSignalStrength(l)))}this.applyRealtimeUpdatesForAudioMetadata(m,g)}normalizedVolume(p){const g=1-(-p.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(g,0),1)}normalizedSignalStrength(p){const m=p.signalStrength/tu.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(p,m){for(const g in this.streamIdToAttendeeId){const l=this.streamIdToAttendeeId[g],r=this.streamIdToExternalUserId[g];let n=null,e=null;p!==null&&(p.hasOwnProperty(l)?n=p[l]:n=tu.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(l)?e=m[l]:e=tu.IMPLICIT_SIGNAL_STRENGTH),(n!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(l,n,null,e,r)}}attendeeIdForStreamId(p){if(p===0)return null;const m=this.streamIdToAttendeeId[p];return m||(this.warnedAboutMissingStreamIdMapping[p]||(this.warnedAboutMissingStreamIdMapping[p]=!0,this.logger.warn(`volume indicator stream id ${p} seen before being defined`)),null)}constructor(p,m,g,l,r){this.logger=p,this.realtimeController=m,this.minVolumeDecibels=g,this.maxVolumeDecibels=l,this.selfAttendeeId=r,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");a.default=c,c.MAX_SIGNAL_STRENGTH_LEVELS=2,c.IMPLICIT_VOLUME=0,c.IMPLICIT_SIGNAL_STRENGTH=1},8796204466:function(F,a,c){"use strict";var d=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0});const p=d(c(8066052849)),m=d(c(2686893898));let g=s(class{create(r,n,e){this.connection=new WebSocket(e?r:p.default.urlWithVersion(r),n),this.connection.binaryType="arraybuffer"}send(r){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return r instanceof Uint8Array?this.connection.send(r.buffer):this.connection.send(r),!0}catch(n){return this.logger.debug(()=>`send error: ${n.message}, websocket state=${m.default[this.readyState()]}`),!1}}close(r,n){var e;(e=this.connection)===null||e===void 0||e.close(r,n)}destroy(){this.connection=void 0}addEventListener(r,n){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(r,n)}removeEventListener(r,n){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(r,n)}readyState(){if(!this.connection)return m.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return m.default.Connecting;case WebSocket.OPEN:return m.default.Open;case WebSocket.CLOSING:return m.default.Closing;case WebSocket.CLOSED:return m.default.Closed}}constructor(r){this.logger=r}},"DefaultWebSocketAdapter");a.default=g},2686893898:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.WebSocketReadyState=void 0;var c;(function(d){d[d.None=0]="None",d[d.Connecting=1]="Connecting",d[d.Open=2]="Open",d[d.Closing=3]="Closing",d[d.Closed=4]="Closed"})(c=a.WebSocketReadyState||(a.WebSocketReadyState={})),a.default=c},1716026697:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(T,w,M,R){function O(k){return k instanceof M?k:new M(function(A){A(k)})}return s(O,"adopt"),new(M||(M=Promise))(function(k,A){function P(j){try{H(R.next(j))}catch(W){A(W)}}s(P,"fulfilled");function D(j){try{H(R.throw(j))}catch(W){A(W)}}s(D,"rejected");function H(j){j.done?k(j.value):O(j.value).then(P,D)}s(H,"step"),H((R=R.apply(T,w||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.decideModel=a.measureAndDecideExecutionApproach=void 0;const p=c(6582301018),m=c(8113008952),g=3,l=2.5,r=2.63,n=.6,e=.65,t=.5,i=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let u=s(class{roundtrip(w,M,R){return new Promise((O,k)=>{this.worker.then(A=>{let P;P=s(D=>{const{message:H,key:j}=D.data;H===M&&j===R&&(A.removeEventListener("message",P),O(D.data))},"listener"),A.addEventListener("message",P),A.postMessage(w)}).catch(A=>{var P;(P=this.logger)===null||P===void 0||P.error("Failed to load worker.",A),k(A)})})}supportsSIMD(w){const M="simd",R=w||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,O={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:R,key:M};return this.roundtrip(O,"simd-support",M).then(k=>k.supports)}measure(w,M){const R=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,O=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,k=w?O:R,A=`bench:${w}`,P={message:"measure",fetchBehavior:this.fetchBehavior,budget:M,path:k,key:A};return this.roundtrip(P,"measurement",A).then(D=>{if(D.measurement)return D.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(w=>{var M;(M=this.logger)===null||M===void 0||M.debug("Stopping estimator worker."),w.terminate()}).catch(w=>{})}constructor(w,M){this.fetchConfig=w,this.logger=M;const R=`${w.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:w.headers,escapedQueryString:w.escapedQueryString},this.worker=p.loadWorker(R,"VoiceFocusEstimator",this.fetchBehavior,M)}},"Estimator");const h=s((T,w)=>T===1?n:w==="quality"?e*T:t*T,"inlineScoreMultiplier"),S=s(function(T){let{supportsSIMD:w,supportsSAB:M,duration:R,executionPreference:O="auto",simdPreference:k,variantPreference:A="auto",namePreference:P="default",usagePreference:D,executionQuantaPreference:H=g}=T,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,W=arguments.length>2?arguments[2]:void 0;const ee=k==="force"||k!=="disable"&&w,fe=R!==-1,oe=fe?(ee?l:r)/R:0,Oe=ee?j.simd:j.wasm,Xe=fe?h(H,D)*oe:0,ge=fe?i*oe:0,Me=P,$e=s(gt=>({supported:!1,reason:gt}),"unsupported");if(fe){if(oe<Oe.noSupport)return $e(`Performance score ${oe} worse than threshold ${Oe.noSupport}.`)}else if(O==="auto"||A==="auto")return $e(`Missing explicit execution (${O}) or variant (${A}) preference, but no scoring performed.`);W==null||W.debug(`Bench duration ${R} yields inline score ${Xe} and worker score ${ge}.`);const ze=s((gt,Pe,xe)=>({supported:!0,useSIMD:ee,processor:gt,executionApproach:Pe,variant:xe,executionQuanta:Pe==="inline"?H:void 0,name:Me}),"succeed"),nt=s((gt,Pe,xe)=>Pe!=="auto"?!fe||gt>xe[Pe]?Pe:"failed":gt>xe.c100?"c100":gt>xe.c50?"c50":gt>xe.c20?"c20":gt>xe.c10?"c10":"failed","resolveVariant"),mt=s(gt=>{switch(gt||"auto"){case"auto":{let Pe=mt("inline"),xe=mt("worker");return W==null||W.debug(`Reducing auto preference: ${JSON.stringify(Pe)} vs ${JSON.stringify(xe)}`),Pe.supported===!1||xe.supported===!1?xe:Pe.variant===xe.variant||Pe.variant==="c50"?Pe:xe}case"worker":return m.supportsSharedArrayBuffer(globalThis,window,W)?mt("worker-sab"):mt("worker-postMessage");case"inline":{const Pe=nt(Xe,A,Oe.inline);return Pe==="failed"?$e(`Performance score ${Xe} not sufficient for inline use with variant preference ${A}.`):ze("voicefocus-inline-processor","inline",Pe)}case"worker-sab":{if(!M){const xe="Requested worker-sab but no SharedArrayBuffer support.";return W==null||W.warn(xe),{supported:!1,reason:xe}}const Pe=nt(ge,A,Oe.worker);return Pe==="failed"?$e(`Performance score ${ge} not sufficient for worker use with variant preference ${A}.`):ze("voicefocus-worker-sab-processor","worker-sab",Pe)}case"worker-postMessage":{const Pe=nt(ge,A,Oe.worker);if(Pe==="failed")return $e(`Performance score ${ge} not sufficient for worker use.`);if(Me==="ns_es"){const xe="Requested echo suppression but postMessage executor does not support it.";return W==null||W.warn(xe),{supported:!1,reason:xe}}return ze("voicefocus-worker-postMessage-processor","worker-postMessage",Pe)}}},"reducePreference");return mt(O)},"decideExecutionApproach"),f=s((T,w,M,R)=>d(void 0,void 0,void 0,function*(){const O={supportsSIMD:T,supportsSAB:m.supportsSharedArrayBuffer(globalThis,window,M),duration:-1};if(T)return M==null||M.info("Supports SIMD: true (force)"),O;const k=!R,A=R||new u(w,M);try{const P=!m.isOldChrome(window,M)&&(yield A.supportsSIMD());return M==null||M.info(`Supports SIMD: ${P} (force: ${T})`),O.supportsSIMD=P,O}finally{k&&A.stop()}}),"featureCheck"),v=s((T,w,M,R)=>d(void 0,void 0,void 0,function*(){const O=new u(w,R);try{const k=yield f(T,w,R,O);if(k.supportsSIMD)try{return k.duration=yield O.measure(!0,M),R==null||R.info("SIMD timing:",k.duration),k}catch{R==null||R.warn("Failed SIMD estimation; falling back to non-SIMD."),k.supportsSIMD=!1}return k.duration=yield O.measure(!1,M),R==null||R.info("No-SIMD timing:",k.duration),k}catch(k){throw R==null||R.error("Could not feature check.",k),k}finally{O.stop()}}),"estimateAndFeatureCheck"),E=s(function(T,w,M){let R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return d(void 0,void 0,void 0,function*(){let O=T.executionPreference;const{usagePreference:k,variantPreference:A,namePreference:P,simdPreference:D,estimatorBudget:H,executionQuantaPreference:j}=T;k==="interactivity"&&O!=="inline"&&(M==null||M.debug(`Overriding execution preference ${O} to reflect interactivity preference.`),O="inline");const W=D==="force",X=A!=="auto",ee=O!=="auto";let fe;try{X&&ee?fe=yield f(W,w,M):fe=yield v(W,w,H,M)}catch(oe){throw M==null||M.error("Could not load estimator.",oe),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},fe),{simdPreference:D,executionPreference:O,variantPreference:A,namePreference:P,usagePreference:k,executionQuantaPreference:j}),R,M)})},"measureAndDecideExecutionApproach");a.measureAndDecideExecutionApproach=E;const _=s(T=>{let{category:w,name:M,variant:R,simd:O,url:k}=T;return`${w}-${M}-${R}-v1${O?"_simd":""}`},"decideModel");a.decideModel=_},4179955699:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isValidRevisionID=a.isValidAssetGroup=a.resolveURL=a.addQueryParams=a.withQueryString=a.withRequestHeaders=a.fetchWithBehavior=void 0;function c(e,t,i){if(!i)return fetch(e,t);const o=p(e,i),u=d(t,i);return fetch(o,u)}s(c,"fetchWithBehavior"),a.fetchWithBehavior=c;function d(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}s(d,"withRequestHeaders"),a.withRequestHeaders=d;function p(e,t){if(!(t!=null&&t.escapedQueryString))return e;const i=e.lastIndexOf("?")!==-1;return`${e}${i?"&":"?"}${t.escapedQueryString}`}s(p,"withQueryString"),a.withQueryString=p;function m(e,t){const i=Object.keys(t);if(!i.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const u of i)o.append(u,t[u]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}s(m,"addQueryParams"),a.addQueryParams=m;const g={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function l(e,t){return c(e,g,t).then(i=>i.redirected?i.url:e)}s(l,"resolveURL"),a.resolveURL=l;function r(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}s(r,"isValidAssetGroup"),a.isValidAssetGroup=r;function n(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}s(n,"isValidRevisionID"),a.isValidRevisionID=n},6582301018:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.loadWorker=void 0;const d=c(4179955699),p={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},m=s((g,l,r,n)=>{n==null||n.debug(`Loading ${l} worker from ${g}.`);let e=!1;try{e=self.origin===new URL(g).origin}catch(t){n==null||n.error("Could not compare origins.",t)}if(e){const t=d.withQueryString(g,r);return Promise.resolve(new Worker(t,{name:l}))}return d.fetchWithBehavior(g,p,r).then(t=>{if(t.ok)return t.blob().then(i=>new Worker(window.URL.createObjectURL(i)));throw new Error("Fetch failed.")})},"loadWorker");a.loadWorker=m},8113008952:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(f,v,E,_){function T(w){return w instanceof E?w:new E(function(M){M(w)})}return s(T,"adopt"),new(E||(E=Promise))(function(w,M){function R(A){try{k(_.next(A))}catch(P){M(P)}}s(R,"fulfilled");function O(A){try{k(_.throw(A))}catch(P){M(P)}}s(O,"rejected");function k(A){A.done?w(A.value):T(A.value).then(R,O)}s(k,"step"),k((_=_.apply(f,v||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.isOldChrome=a.supportsWASMStreaming=a.supportsSharedArrayBuffer=a.supportsWASM=a.supportsAudioWorklet=a.supportsWorker=a.supportsVoiceFocusWorker=a.supportsWASMPostMessage=a.isSafari=void 0;const p=c(6582301018),m=s(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),g=s(function(){const v=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,E=v.match(/Safari\//),_=v.match(/Chrom(?:e|ium)\//);return!!(E&&!_)},"isSafari");a.isSafari=g;const l=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return a.isSafari(f)?!1:m(f)?(h(f)||0)<95:!0},"supportsWASMPostMessage");a.supportsWASMPostMessage=l;const r=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0,E=arguments.length>2?arguments[2]:void 0;return d(void 0,void 0,void 0,function*(){if(!a.supportsWorker(f,E))return!1;const _=`${v.paths.workers}worker-v1.js`;try{const T=yield p.loadWorker(_,"VoiceFocusTestWorker",v,E);try{T.terminate()}catch(w){E==null||E.debug("Failed to terminate worker.",w)}return!0}catch(T){return E==null||E.info("Failed to fetch and instantiate test worker",T),!1}})},"supportsVoiceFocusWorker");a.supportsVoiceFocusWorker=r;const n=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!f.Worker}catch(E){return v==null||v.info("Does not support Worker",E),!1}},"supportsWorker");a.supportsWorker=n;const e=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!f.AudioWorklet&&!!f.AudioWorkletNode}catch(E){return v==null||v.info("Does not support Audio Worklet",E),!1}},"supportsAudioWorklet");a.supportsAudioWorklet=e;const t=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;try{return!!f.WebAssembly&&(!!f.WebAssembly.compile||!!f.WebAssembly.compileStreaming)}catch(E){return v==null||v.info("Does not support WASM",E),!1}},"supportsWASM");a.supportsWASM=t;const i=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,E=arguments.length>2?arguments[2]:void 0;try{return!!f.SharedArrayBuffer&&(!!v.chrome||!!f.crossOriginIsolated)}catch{return E==null||E.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");a.supportsSharedArrayBuffer=i;const o=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;var E;try{return!!(!((E=f.WebAssembly)===null||E===void 0)&&E.compileStreaming)}catch(_){return v==null||v.info("Does not support WASM streaming compilation",_),!1}},"supportsWASMStreaming");a.supportsWASMStreaming=o;const u=90,h=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!f.chrome)return}catch{}const v=f.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(v)return parseInt(v[1],10)},"chromeVersion"),S=s(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,v=arguments.length>1?arguments[1]:void 0;const E=h(f);return E&&E<u?(v==null||v.debug(`Chrome ${E} has incomplete SIMD support.`),!0):!1},"isOldChrome");a.isOldChrome=S},3587844202:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.VoiceFocusAudioWorkletNode=void 0;let c=s(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||s(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");a.VoiceFocusAudioWorkletNode=c},8019356695:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(A,P,D,H){function j(W){return W instanceof D?W:new D(function(X){X(W)})}return s(j,"adopt"),new(D||(D=Promise))(function(W,X){function ee(Oe){try{oe(H.next(Oe))}catch(Xe){X(Xe)}}s(ee,"fulfilled");function fe(Oe){try{oe(H.throw(Oe))}catch(Xe){X(Xe)}}s(fe,"rejected");function oe(Oe){Oe.done?W(Oe.value):j(Oe.value).then(ee,fe)}s(oe,"step"),oe((H=H.apply(A,P||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.getAudioInput=a.createAudioContext=a.VoiceFocus=void 0;const p=c(1716026697),m=c(4179955699),g=c(6582301018),l=c(8113008952),r=c(1074507e3),n=c(4096494996),e=c(1035990965),i={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",u="https://static.sdkassets.chime.aws",h={processors:`${u}/processors/`,workers:`${u}/workers/`,wasm:`${u}/wasm/`,models:`${u}/wasm/`},S={latencyHint:0},f={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},v=Object.assign(Object.assign({},f),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),E=Object.assign(Object.assign({},f),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),_={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:n.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:r.default}},T=s((A,P)=>{if(A!==void 0&&!m.isValidAssetGroup(A))throw new Error(`Invalid asset group ${A}`);if(P!==void 0&&!m.isValidRevisionID(P))throw new Error(`Invalid revision ID ${P}`)},"validateAssetSpec"),w=s((A,P)=>{let D;if(P.useBuiltInAGC?D=v:D=E,!A)return{audio:D};if(!A.audio)return A;if(A.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},A),{audio:A.audio===!0?D:Object.assign(Object.assign({},A.audio),D)})},"mungeConstraints"),M=s((A,P)=>`${P.models}${p.decideModel(A)}.wasm`,"urlForModel");let R=s(class XS{static isSupported(P,D){const{fetchBehavior:H,logger:j}=D||{};if(typeof globalThis>"u")return j==null||j.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!l.supportsAudioWorklet(globalThis,j))return j==null||j.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!l.supportsWASM(globalThis,j))return j==null||j.debug("Browser does not support WASM."),Promise.resolve(!1);l.supportsWASMStreaming(globalThis,j)||j==null||j.debug("Browser does not support streaming WASM compilation.");const{assetGroup:W=o,revisionID:X,paths:ee=h}=P||{};T(W,X);const fe=X?{revisionID:X}:{assetGroup:W},oe=m.addQueryParams(H,fe),Oe=Object.assign(Object.assign({},oe),{paths:ee});return l.supportsVoiceFocusWorker(globalThis,Oe,j)}static mungeExecutionPreference(P,D){const H=P===void 0||P==="auto";if(l.isSafari(globalThis)){if(H||P==="inline")return"inline";if(!H)throw new Error(`Unsupported execution preference ${P}`)}if(P==="worker-sab"&&!l.supportsSharedArrayBuffer(globalThis,globalThis,D))throw new Error(`Unsupported execution preference ${P}`);return P||"auto"}static configure(P,D){return d(this,void 0,void 0,function*(){const{fetchBehavior:H,preResolve:j,logger:W}=D||{},{category:X="voicefocus",name:ee="default",variant:fe="auto",assetGroup:oe=o,revisionID:Oe,simd:Xe="detect",executionPreference:ge="auto",executionQuantaPreference:Me,usagePreference:$e="interactivity",estimatorBudget:ze=100,paths:nt=h,thresholds:mt}=P||{};if(W==null||W.debug("Configuring Voice Focus with spec",P),X!==void 0&&X!=="voicefocus")throw new Error(`Unrecognized category ${X}`);if(ee!==void 0&&ee!=="default"&&ee!=="ns_es")throw new Error(`Unrecognized feature name ${ee}`);if(fe!==void 0&&!["auto","c100","c50","c20","c10"].includes(fe))throw new Error(`Unrecognized feature variant ${fe}`);if(Me!==void 0&&![1,2,3].includes(Me))throw new Error(`Unrecognized execution quanta preference ${Me}`);if(T(oe,Oe),Xe!==void 0&&!["detect","force","disable"].includes(Xe))throw new Error(`Unrecognized SIMD option ${Xe}`);if(ge!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(ge))throw new Error(`Unrecognized execution preference ${ge}`);if($e!==void 0&&!["quality","interactivity"].includes($e))throw new Error(`Unrecognized usage preference ${$e}`);const gt={executionPreference:this.mungeExecutionPreference(ge,W),usagePreference:$e,executionQuantaPreference:Me,variantPreference:fe,namePreference:ee,simdPreference:Xe,estimatorBudget:ze},Pe=Oe?{revisionID:Oe}:{assetGroup:oe},xe=m.addQueryParams(H,Pe),Ye=Object.assign({paths:nt},xe),Ze=yield p.measureAndDecideExecutionApproach(gt,Ye,W,mt);if(Ze.supported===!1)return{supported:!1,reason:Ze.reason};W==null||W.info("Decided execution approach",Ze);const{useSIMD:Re,processor:Tt,variant:rt,executionQuanta:Nt}=Ze,Wt={category:X||"voicefocus",name:ee||"default",variant:rt,simd:Re};if(j){const Qt=M(Wt,nt);Wt.url=yield m.resolveURL(Qt,xe)}return{fetchConfig:Ye,model:Wt,processor:Tt,executionQuanta:Nt,supported:!0}})}static init(P,D){let{delegate:H,preload:j=!0,logger:W}=D;return d(this,void 0,void 0,function*(){if(P.supported===!1)throw new Error("Voice Focus not supported. Reason: "+P.reason);const{model:X,processor:ee,fetchConfig:fe,executionQuanta:oe}=P,{simd:Oe,name:Xe}=X,{paths:ge}=fe;if(ee!=="voicefocus-inline-processor"&&ee!=="voicefocus-worker-postMessage-processor"&&ee!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${ee}`);const Me=X.url||M(X,ge);W==null||W.debug(`Using model URL ${Me}.`);const $e=`${ge.wasm}audio_buffer-v1${Oe?"_simd":""}.wasm`,ze=`${ge.wasm}resampler-v1${Oe?"_simd":""}.wasm`,nt=`${ge.workers}worker-v1.js`,{file:mt,node:gt}=_[ee],Pe=`${ge.processors}${mt}`,xe=yield g.loadWorker(nt,"VoiceFocusWorker",fe,W);if(j){W==null||W.debug("Preloading",Me);let Tt=l.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";xe.postMessage({message:Tt,preload:!0,key:"model",fetchBehavior:fe,path:Me})}const Ze={processor:ee,worker:xe,audioBufferURL:$e,resamplerURL:ze,fetchBehavior:fe,modelURL:Me,delegate:H,logger:W,numberOfInputs:Xe==="ns_es"?2:1},Re=new XS(xe,Pe,gt,Ze,oe);return Promise.resolve(Re)})}createNode(P,D){var H;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:j=P.sampleRate===16e3?16e3:48e3,enabled:W=!0,agc:X=i}=D||{},ee=D==null?void 0:D.es,fe={voiceFocusSampleRate:j,enabled:W,sendBufferCount:10,prefill:6,agc:X,executionQuanta:this.executionQuanta,supportFarendStream:ee},oe=m.withQueryString(this.processorURL,(H=this.nodeOptions)===null||H===void 0?void 0:H.fetchBehavior);return P.audioWorklet.addModule(oe).then(()=>new this.nodeConstructor(P,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:fe})))}applyToStream(P,D,H){return d(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const j=D.createMediaStreamSource(P),W=yield this.applyToSourceNode(j,D,H),X=D.createMediaStreamDestination();return W.connect(X),{node:W,source:j,destination:X,stream:X.stream}})}applyToSourceNode(P,D,H){return d(this,void 0,void 0,function*(){const j=yield this.createNode(D,H);return P.connect(j),j})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(P,D,H,j,W){this.processorURL=D,this.nodeConstructor=H,this.nodeOptions=j,this.executionQuanta=W,this.internal={worker:P,nodeOptions:j,isDestroyed:!1}}},"VoiceFocus");a.VoiceFocus=R;const O=s(function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(A)},"createAudioContext");a.createAudioContext=O;const k=s((A,P,D)=>d(void 0,void 0,void 0,function*(){var H,j;const{constraints:W,spec:X,delegate:ee,preload:fe=!0,options:oe}=P,{logger:Oe}=D,Xe=yield R.configure(X,D);if(!Xe.supported)return(H=D.logger)===null||H===void 0||H.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(W);const ge=yield R.init(Xe,{delegate:ee,preload:fe,logger:Oe}),Me=((j=P.options)===null||j===void 0?void 0:j.agc)||i,$e=yield window.navigator.mediaDevices.getUserMedia(w(W,Me));return ge.applyToStream($e,A,oe).then(ze=>ze.stream)}),"getAudioInput");a.getAudioInput=k},1074507e3:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function h(v){try{f(t.next(v))}catch(E){u(E)}}s(h,"fulfilled");function S(v){try{f(t.throw(v))}catch(E){u(E)}}s(S,"rejected");function f(v){v.done?o(v.value):i(v.value).then(h,S)}s(f,"step"),f((t=t.apply(r,n||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(8113008952),m=c(3587844202),g=5*1e3;let l=s(class extends m.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(n,e){this.port.postMessage({message:"module-buffer",buffer:n,key:e})}onModuleLoaded(n,e){this.port.postMessage({message:"module",module:n,key:e})}enable(){return d(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return d(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var n;return d(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(n=this.worker)===null||n===void 0||n.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(n){var e,t,i;const o=n.data;switch(o.message){case"cpu":this.cpuWarningCount++;const u=Date.now(),h=this.cpuWarningLastTriggered||u,S=Math.abs(u-h);(!this.cpuWarningLastTriggered||S>g)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=u),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(i=this.logger)===null||i===void 0||i.debug("Ignoring processor message.")}}onWorkerMessage(n){const e=n.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(n,e){super(n,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:i,fetchBehavior:o,logger:u,delegate:h}=e;this.logger=u,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=h,u&&u.debug("VoiceFocusInlineNode:",t),this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");a.default=l},1035990965:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(l,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function u(f){try{S(e.next(f))}catch(v){o(v)}}s(u,"fulfilled");function h(f){try{S(e.throw(f))}catch(v){o(v)}}s(h,"rejected");function S(f){f.done?i(f.value):t(f.value).then(u,h)}s(S,"step"),S((e=e.apply(l,r||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(8113008952),m=c(3587844202);let g=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return d(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return d(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return d(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(r){var n;const e=r.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(r){var n;const e=r.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(r,n){super(r,n.processor,n),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:i,fetchBehavior:o,delegate:u}=n;this.delegate=u,this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:h,agc:S,supportFarendStream:f}=n.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:r.sampleRate===16e3?160:480,enabled:h,agc:S,fetchBehavior:o,model:e,supportFarendStream:f});const v=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:v,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");a.default=g},4096494996:function(F,a,c){"use strict";var d=this&&this.__awaiter||function(n,e,t,i){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return s(o,"adopt"),new(t||(t=Promise))(function(u,h){function S(E){try{v(i.next(E))}catch(_){h(_)}}s(S,"fulfilled");function f(E){try{v(i.throw(E))}catch(_){h(_)}}s(f,"rejected");function v(E){E.done?u(E.value):o(E.value).then(S,f)}s(v,"step"),v((i=i.apply(n,e||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const p=c(8113008952),m=c(3587844202),g={ready:0,enabled:1},l={disabled:0,enabled:1,stopped:2};let r=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return d(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,g.enabled,l.enabled),Atomics.notify(this.state,g.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return d(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,g.enabled,l.disabled),Atomics.notify(this.state,g.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return d(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,g.enabled,l.stopped),Atomics.notify(this.state,g.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":if(!i.shared)throw new Error("No shared state.");this.state=new Int32Array(i.shared.state),this.port.postMessage(i);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(i);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(i);break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:i,resamplerURL:o,worker:u,fetchBehavior:h,delegate:S}=t;this.delegate=S,this.worker=u,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:f,supportFarendStream:v}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:f,model:i,supportFarendStream:v});const E=p.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:E,key:"resampler",fetchBehavior:h,path:o})}},"VoiceFocusWorkerBufferNode");a.default=r},3712740514:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.RawSha256=void 0;var d=c(2291918858),p=function(){function m(){this.state=Int32Array.from(d.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(m,"RawSha2561"),m.prototype.update=function(g){if(this.finished)throw new Error("Attempted to update an already finished hash.");var l=0,r=g.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>d.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=g[l++],r--,this.bufferLength===d.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var g=this.bytesHashed*8,l=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(l.setUint8(this.bufferLength++,128),r%d.BLOCK_SIZE>=d.BLOCK_SIZE-8){for(var n=this.bufferLength;n<d.BLOCK_SIZE;n++)l.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<d.BLOCK_SIZE-8;n++)l.setUint8(n,0);l.setUint32(d.BLOCK_SIZE-8,Math.floor(g/4294967296),!0),l.setUint32(d.BLOCK_SIZE-4,g),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(d.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},m.prototype.hashBuffer=function(){for(var g=this,l=g.buffer,r=g.state,n=r[0],e=r[1],t=r[2],i=r[3],o=r[4],u=r[5],h=r[6],S=r[7],f=0;f<d.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(l[f*4]&255)<<24|(l[f*4+1]&255)<<16|(l[f*4+2]&255)<<8|l[f*4+3]&255;else{var v=this.temp[f-2],E=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[f-15];var _=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[f]=(E+this.temp[f-7]|0)+(_+this.temp[f-16]|0)}var T=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&u^~o&h)|0)+(S+(d.KEY[f]+this.temp[f]|0)|0)|0,w=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=h,h=u,u=o,o=i+T|0,i=t,t=e,e=n,n=T+w|0}r[0]+=n,r[1]+=e,r[2]+=t,r[3]+=i,r[4]+=o,r[5]+=u,r[6]+=h,r[7]+=S},m}();a.RawSha256=p},2291918858:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MAX_HASHABLE_LENGTH=a.INIT=a.KEY=a.DIGEST_LENGTH=a.BLOCK_SIZE=void 0,a.BLOCK_SIZE=64,a.DIGEST_LENGTH=32,a.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],a.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},1222670195:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=c(8400004479);d.__exportStar(c(9697312697),a)},9697312697:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Sha256=void 0;var d=c(8400004479),p=c(2291918858),m=c(3712740514),g=c(9346984146),l=function(){function n(e){if(this.hash=new m.RawSha256,e){this.outer=new m.RawSha256;var t=r(e),i=new Uint8Array(p.BLOCK_SIZE);i.set(t);for(var o=0;o<p.BLOCK_SIZE;o++)t[o]^=54,i[o]^=92;this.hash.update(t),this.outer.update(i);for(var o=0;o<t.byteLength;o++)t[o]=0}}return s(n,"Sha2561"),n.prototype.update=function(e){if(!((0,g.isEmptyData)(e)||this.error))try{this.hash.update((0,g.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(e){return[2,this.digestSync()]})})},n}();a.Sha256=l;function r(n){var e=(0,g.convertToBuffer)(n);if(e.byteLength>p.BLOCK_SIZE){var t=new m.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(p.BLOCK_SIZE);return i.set(e),i}s(r,"bufferFromSecret")},1717667466:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.convertToBuffer=void 0;var d=c(2412280125),p=typeof Buffer<"u"&&Buffer.from?function(g){return Buffer.from(g,"utf8")}:d.fromUtf8;function m(g){return g instanceof Uint8Array?g:typeof g=="string"?p(g):ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(g)}s(m,"convertToBuffer"),a.convertToBuffer=m},9346984146:(F,a,c)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.uint32ArrayFrom=a.numToUint8=a.isEmptyData=a.convertToBuffer=void 0;var d=c(1717667466);Object.defineProperty(a,"convertToBuffer",{enumerable:!0,get:function(){return d.convertToBuffer}});var p=c(4931641723);Object.defineProperty(a,"isEmptyData",{enumerable:!0,get:function(){return p.isEmptyData}});var m=c(3533405281);Object.defineProperty(a,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var g=c(4862639932);Object.defineProperty(a,"uint32ArrayFrom",{enumerable:!0,get:function(){return g.uint32ArrayFrom}})},4931641723:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isEmptyData=void 0;function c(d){return typeof d=="string"?d.length===0:d.byteLength===0}s(c,"isEmptyData"),a.isEmptyData=c},3533405281:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.numToUint8=void 0;function c(d){return new Uint8Array([(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255])}s(c,"numToUint8"),a.numToUint8=c},4862639932:(F,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.uint32ArrayFrom=void 0;function c(d){if(!Uint32Array.from){for(var p=new Uint32Array(d.length),m=0;m<d.length;)p[m]=d[m],m+=1;return p}return Uint32Array.from(d)}s(c,"uint32ArrayFrom"),a.uint32ArrayFrom=c},4602188990:(F,a,c)=>{"use strict";c.r(a),c.d(a,{fromHex:()=>m,toHex:()=>g});const d={},p={};for(let l=0;l<256;l++){let r=l.toString(16).toLowerCase();r.length===1&&(r=`0${r}`),d[l]=r,p[r]=l}function m(l){if(l.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const r=new Uint8Array(l.length/2);for(let n=0;n<l.length;n+=2){const e=l.slice(n,n+2).toLowerCase();if(e in p)r[n/2]=p[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return r}s(m,"fromHex");function g(l){let r="";for(let n=0;n<l.byteLength;n++)r+=d[l[n]];return r}s(g,"toHex")},2179555054:(F,a,c)=>{"use strict";const{Deflate:d,deflate:p,deflateRaw:m,gzip:g}=c(8596517657),{Inflate:l,inflate:r,inflateRaw:n,ungzip:e}=c(5407065173),t=c(9516153853);F.exports.Deflate=d,F.exports.deflate=p,F.exports.deflateRaw=m,F.exports.gzip=g,F.exports.Inflate=l,F.exports.inflate=r,F.exports.inflateRaw=n,F.exports.ungzip=e,F.exports.constants=t},8596517657:(F,a,c)=>{"use strict";const d=c(9071164343),p=c(5261709245),m=c(3455347086),g=c(4276546412),l=c(8079600486),r=Object.prototype.toString,{Z_NO_FLUSH:n,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:i,Z_OK:o,Z_STREAM_END:u,Z_DEFAULT_COMPRESSION:h,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:f}=c(9516153853);function v(w){this.options=p.assign({level:h,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},w||{});let M=this.options;M.raw&&M.windowBits>0?M.windowBits=-M.windowBits:M.gzip&&M.windowBits>0&&M.windowBits<16&&(M.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;let R=d.deflateInit2(this.strm,M.level,M.method,M.windowBits,M.memLevel,M.strategy);if(R!==o)throw new Error(g[R]);if(M.header&&d.deflateSetHeader(this.strm,M.header),M.dictionary){let O;if(typeof M.dictionary=="string"?O=m.string2buf(M.dictionary):r.call(M.dictionary)==="[object ArrayBuffer]"?O=new Uint8Array(M.dictionary):O=M.dictionary,R=d.deflateSetDictionary(this.strm,O),R!==o)throw new Error(g[R]);this._dict_set=!0}}s(v,"Deflate"),v.prototype.push=function(w,M){const R=this.strm,O=this.options.chunkSize;let k,A;if(this.ended)return!1;for(M===~~M?A=M:A=M===!0?i:n,typeof w=="string"?R.input=m.string2buf(w):r.call(w)==="[object ArrayBuffer]"?R.input=new Uint8Array(w):R.input=w,R.next_in=0,R.avail_in=R.input.length;;){if(R.avail_out===0&&(R.output=new Uint8Array(O),R.next_out=0,R.avail_out=O),(A===e||A===t)&&R.avail_out<=6){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(k=d.deflate(R,A),k===u)return R.next_out>0&&this.onData(R.output.subarray(0,R.next_out)),k=d.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===o;if(R.avail_out===0){this.onData(R.output);continue}if(A>0&&R.next_out>0){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(R.avail_in===0)break}return!0},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===o&&(this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg};function E(w,M){const R=new v(M);if(R.push(w,!0),R.err)throw R.msg||g[R.err];return R.result}s(E,"deflate");function _(w,M){return M=M||{},M.raw=!0,E(w,M)}s(_,"deflateRaw");function T(w,M){return M=M||{},M.gzip=!0,E(w,M)}s(T,"gzip"),F.exports.Deflate=v,F.exports.deflate=E,F.exports.deflateRaw=_,F.exports.gzip=T,F.exports.constants=c(9516153853)},5407065173:(F,a,c)=>{"use strict";const d=c(8029791791),p=c(5261709245),m=c(3455347086),g=c(4276546412),l=c(8079600486),r=c(9654919892),n=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:i,Z_STREAM_END:o,Z_NEED_DICT:u,Z_STREAM_ERROR:h,Z_DATA_ERROR:S,Z_MEM_ERROR:f}=c(9516153853);function v(T){this.options=p.assign({chunkSize:1024*64,windowBits:15,to:""},T||{});const w=this.options;w.raw&&w.windowBits>=0&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),w.windowBits>=0&&w.windowBits<16&&!(T&&T.windowBits)&&(w.windowBits+=32),w.windowBits>15&&w.windowBits<48&&(w.windowBits&15||(w.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;let M=d.inflateInit2(this.strm,w.windowBits);if(M!==i)throw new Error(g[M]);if(this.header=new r,d.inflateGetHeader(this.strm,this.header),w.dictionary&&(typeof w.dictionary=="string"?w.dictionary=m.string2buf(w.dictionary):n.call(w.dictionary)==="[object ArrayBuffer]"&&(w.dictionary=new Uint8Array(w.dictionary)),w.raw&&(M=d.inflateSetDictionary(this.strm,w.dictionary),M!==i)))throw new Error(g[M])}s(v,"Inflate"),v.prototype.push=function(T,w){const M=this.strm,R=this.options.chunkSize,O=this.options.dictionary;let k,A,P;if(this.ended)return!1;for(w===~~w?A=w:A=w===!0?t:e,n.call(T)==="[object ArrayBuffer]"?M.input=new Uint8Array(T):M.input=T,M.next_in=0,M.avail_in=M.input.length;;){for(M.avail_out===0&&(M.output=new Uint8Array(R),M.next_out=0,M.avail_out=R),k=d.inflate(M,A),k===u&&O&&(k=d.inflateSetDictionary(M,O),k===i?k=d.inflate(M,A):k===S&&(k=u));M.avail_in>0&&k===o&&M.state.wrap>0&&T[M.next_in]!==0;)d.inflateReset(M),k=d.inflate(M,A);switch(k){case h:case S:case u:case f:return this.onEnd(k),this.ended=!0,!1}if(P=M.avail_out,M.next_out&&(M.avail_out===0||k===o))if(this.options.to==="string"){let D=m.utf8border(M.output,M.next_out),H=M.next_out-D,j=m.buf2string(M.output,D);M.next_out=H,M.avail_out=R-H,H&&M.output.set(M.output.subarray(D,D+H),0),this.onData(j)}else this.onData(M.output.length===M.next_out?M.output:M.output.subarray(0,M.next_out));if(!(k===i&&P===0)){if(k===o)return k=d.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,!0;if(M.avail_in===0)break}}return!0},v.prototype.onData=function(T){this.chunks.push(T)},v.prototype.onEnd=function(T){T===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function E(T,w){const M=new v(w);if(M.push(T),M.err)throw M.msg||g[M.err];return M.result}s(E,"inflate");function _(T,w){return w=w||{},w.raw=!0,E(T,w)}s(_,"inflateRaw"),F.exports.Inflate=v,F.exports.inflate=E,F.exports.inflateRaw=_,F.exports.ungzip=E,F.exports.constants=c(9516153853)},5261709245:F=>{"use strict";const a=s((c,d)=>Object.prototype.hasOwnProperty.call(c,d),"_has");F.exports.assign=function(c){const d=Array.prototype.slice.call(arguments,1);for(;d.length;){const p=d.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(const m in p)a(p,m)&&(c[m]=p[m])}}return c},F.exports.flattenChunks=c=>{let d=0;for(let m=0,g=c.length;m<g;m++)d+=c[m].length;const p=new Uint8Array(d);for(let m=0,g=0,l=c.length;m<l;m++){let r=c[m];p.set(r,g),g+=r.length}return p}},3455347086:F=>{"use strict";let a=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}const c=new Uint8Array(256);for(let p=0;p<256;p++)c[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;c[254]=c[254]=1,F.exports.string2buf=p=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(p);let m,g,l,r,n,e=p.length,t=0;for(r=0;r<e;r++)g=p.charCodeAt(r),(g&64512)===55296&&r+1<e&&(l=p.charCodeAt(r+1),(l&64512)===56320&&(g=65536+(g-55296<<10)+(l-56320),r++)),t+=g<128?1:g<2048?2:g<65536?3:4;for(m=new Uint8Array(t),n=0,r=0;n<t;r++)g=p.charCodeAt(r),(g&64512)===55296&&r+1<e&&(l=p.charCodeAt(r+1),(l&64512)===56320&&(g=65536+(g-55296<<10)+(l-56320),r++)),g<128?m[n++]=g:g<2048?(m[n++]=192|g>>>6,m[n++]=128|g&63):g<65536?(m[n++]=224|g>>>12,m[n++]=128|g>>>6&63,m[n++]=128|g&63):(m[n++]=240|g>>>18,m[n++]=128|g>>>12&63,m[n++]=128|g>>>6&63,m[n++]=128|g&63);return m};const d=s((p,m)=>{if(m<65534&&p.subarray&&a)return String.fromCharCode.apply(null,p.length===m?p:p.subarray(0,m));let g="";for(let l=0;l<m;l++)g+=String.fromCharCode(p[l]);return g},"buf2binstring");F.exports.buf2string=(p,m)=>{const g=m||p.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(p.subarray(0,m));let l,r;const n=new Array(g*2);for(r=0,l=0;l<g;){let e=p[l++];if(e<128){n[r++]=e;continue}let t=c[e];if(t>4){n[r++]=65533,l+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&l<g;)e=e<<6|p[l++]&63,t--;if(t>1){n[r++]=65533;continue}e<65536?n[r++]=e:(e-=65536,n[r++]=55296|e>>10&1023,n[r++]=56320|e&1023)}return d(n,r)},F.exports.utf8border=(p,m)=>{m=m||p.length,m>p.length&&(m=p.length);let g=m-1;for(;g>=0&&(p[g]&192)===128;)g--;return g<0||g===0?m:g+c[p[g]]>m?g:m}},3145109445:F=>{"use strict";const a=s((c,d,p,m)=>{let g=c&65535|0,l=c>>>16&65535|0,r=0;for(;p!==0;){r=p>2e3?2e3:p,p-=r;do g=g+d[m++]|0,l=l+g|0;while(--r);g%=65521,l%=65521}return g|l<<16|0},"adler32");F.exports=a},9516153853:F=>{"use strict";F.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},3332910147:F=>{"use strict";const a=s(()=>{let p,m=[];for(var g=0;g<256;g++){p=g;for(var l=0;l<8;l++)p=p&1?3988292384^p>>>1:p>>>1;m[g]=p}return m},"makeTable"),c=new Uint32Array(a()),d=s((p,m,g,l)=>{const r=c,n=l+g;p^=-1;for(let e=l;e<n;e++)p=p>>>8^r[(p^m[e])&255];return p^-1},"crc32");F.exports=d},9071164343:(F,a,c)=>{"use strict";const{_tr_init:d,_tr_stored_block:p,_tr_flush_block:m,_tr_tally:g,_tr_align:l}=c(4407910137),r=c(3145109445),n=c(3332910147),e=c(4276546412),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:i,Z_FULL_FLUSH:o,Z_FINISH:u,Z_BLOCK:h,Z_OK:S,Z_STREAM_END:f,Z_STREAM_ERROR:v,Z_DATA_ERROR:E,Z_BUF_ERROR:_,Z_DEFAULT_COMPRESSION:T,Z_FILTERED:w,Z_HUFFMAN_ONLY:M,Z_RLE:R,Z_FIXED:O,Z_DEFAULT_STRATEGY:k,Z_UNKNOWN:A,Z_DEFLATED:P}=c(9516153853),D=9,H=15,j=8,W=29,ee=256+1+W,fe=30,oe=19,Oe=2*ee+1,Xe=15,ge=3,Me=258,$e=Me+ge+1,ze=32,nt=42,mt=69,gt=73,Pe=91,xe=103,Ye=113,Ze=666,Re=1,Tt=2,rt=3,Nt=4,Wt=3,Qt=s((L,ve)=>(L.msg=e[ve],ve),"err"),Ot=s(L=>(L<<1)-(L>4?9:0),"rank"),hn=s(L=>{let ve=L.length;for(;--ve>=0;)L[ve]=0},"zero");let wn=s((L,ve,_e)=>(ve<<L.hash_shift^_e)&L.hash_mask,"HASH_ZLIB");const Jt=s(L=>{const ve=L.state;let _e=ve.pending;_e>L.avail_out&&(_e=L.avail_out),_e!==0&&(L.output.set(ve.pending_buf.subarray(ve.pending_out,ve.pending_out+_e),L.next_out),L.next_out+=_e,ve.pending_out+=_e,L.total_out+=_e,L.avail_out-=_e,ve.pending-=_e,ve.pending===0&&(ve.pending_out=0))},"flush_pending"),on=s((L,ve)=>{m(L,L.block_start>=0?L.block_start:-1,L.strstart-L.block_start,ve),L.block_start=L.strstart,Jt(L.strm)},"flush_block_only"),kt=s((L,ve)=>{L.pending_buf[L.pending++]=ve},"put_byte"),$t=s((L,ve)=>{L.pending_buf[L.pending++]=ve>>>8&255,L.pending_buf[L.pending++]=ve&255},"putShortMSB"),en=s((L,ve,_e,Ie)=>{let ne=L.avail_in;return ne>Ie&&(ne=Ie),ne===0?0:(L.avail_in-=ne,ve.set(L.input.subarray(L.next_in,L.next_in+ne),_e),L.state.wrap===1?L.adler=r(L.adler,ve,ne,_e):L.state.wrap===2&&(L.adler=n(L.adler,ve,ne,_e)),L.next_in+=ne,L.total_in+=ne,ne)},"read_buf"),zt=s((L,ve)=>{let _e=L.max_chain_length,Ie=L.strstart,ne,Ft,qe=L.prev_length,ft=L.nice_match;const En=L.strstart>L.w_size-$e?L.strstart-(L.w_size-$e):0,xt=L.window,Ui=L.w_mask,_i=L.prev,bn=L.strstart+Me;let zn=xt[Ie+qe-1],gn=xt[Ie+qe];L.prev_length>=L.good_match&&(_e>>=2),ft>L.lookahead&&(ft=L.lookahead);do if(ne=ve,!(xt[ne+qe]!==gn||xt[ne+qe-1]!==zn||xt[ne]!==xt[Ie]||xt[++ne]!==xt[Ie+1])){Ie+=2,ne++;do;while(xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&xt[++Ie]===xt[++ne]&&Ie<bn);if(Ft=Me-(bn-Ie),Ie=bn-Me,Ft>qe){if(L.match_start=ve,qe=Ft,Ft>=ft)break;zn=xt[Ie+qe-1],gn=xt[Ie+qe]}}while((ve=_i[ve&Ui])>En&&--_e!==0);return qe<=L.lookahead?qe:L.lookahead},"longest_match"),Kt=s(L=>{const ve=L.w_size;let _e,Ie,ne,Ft,qe;do{if(Ft=L.window_size-L.lookahead-L.strstart,L.strstart>=ve+(ve-$e)){L.window.set(L.window.subarray(ve,ve+ve),0),L.match_start-=ve,L.strstart-=ve,L.block_start-=ve,Ie=L.hash_size,_e=Ie;do ne=L.head[--_e],L.head[_e]=ne>=ve?ne-ve:0;while(--Ie);Ie=ve,_e=Ie;do ne=L.prev[--_e],L.prev[_e]=ne>=ve?ne-ve:0;while(--Ie);Ft+=ve}if(L.strm.avail_in===0)break;if(Ie=en(L.strm,L.window,L.strstart+L.lookahead,Ft),L.lookahead+=Ie,L.lookahead+L.insert>=ge)for(qe=L.strstart-L.insert,L.ins_h=L.window[qe],L.ins_h=wn(L,L.ins_h,L.window[qe+1]);L.insert&&(L.ins_h=wn(L,L.ins_h,L.window[qe+ge-1]),L.prev[qe&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=qe,qe++,L.insert--,!(L.lookahead+L.insert<ge)););}while(L.lookahead<$e&&L.strm.avail_in!==0)},"fill_window"),Q=s((L,ve)=>{let _e=65535;for(_e>L.pending_buf_size-5&&(_e=L.pending_buf_size-5);;){if(L.lookahead<=1){if(Kt(L),L.lookahead===0&&ve===t)return Re;if(L.lookahead===0)break}L.strstart+=L.lookahead,L.lookahead=0;const Ie=L.block_start+_e;if((L.strstart===0||L.strstart>=Ie)&&(L.lookahead=L.strstart-Ie,L.strstart=Ie,on(L,!1),L.strm.avail_out===0)||L.strstart-L.block_start>=L.w_size-$e&&(on(L,!1),L.strm.avail_out===0))return Re}return L.insert=0,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):(L.strstart>L.block_start&&(on(L,!1),L.strm.avail_out===0),Re)},"deflate_stored"),Ve=s((L,ve)=>{let _e,Ie;for(;;){if(L.lookahead<$e){if(Kt(L),L.lookahead<$e&&ve===t)return Re;if(L.lookahead===0)break}if(_e=0,L.lookahead>=ge&&(L.ins_h=wn(L,L.ins_h,L.window[L.strstart+ge-1]),_e=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),_e!==0&&L.strstart-_e<=L.w_size-$e&&(L.match_length=zt(L,_e)),L.match_length>=ge)if(Ie=g(L,L.strstart-L.match_start,L.match_length-ge),L.lookahead-=L.match_length,L.match_length<=L.max_lazy_match&&L.lookahead>=ge){L.match_length--;do L.strstart++,L.ins_h=wn(L,L.ins_h,L.window[L.strstart+ge-1]),_e=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart;while(--L.match_length!==0);L.strstart++}else L.strstart+=L.match_length,L.match_length=0,L.ins_h=L.window[L.strstart],L.ins_h=wn(L,L.ins_h,L.window[L.strstart+1]);else Ie=g(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++;if(Ie&&(on(L,!1),L.strm.avail_out===0))return Re}return L.insert=L.strstart<ge-1?L.strstart:ge-1,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):L.last_lit&&(on(L,!1),L.strm.avail_out===0)?Re:Tt},"deflate_fast"),Be=s((L,ve)=>{let _e,Ie,ne;for(;;){if(L.lookahead<$e){if(Kt(L),L.lookahead<$e&&ve===t)return Re;if(L.lookahead===0)break}if(_e=0,L.lookahead>=ge&&(L.ins_h=wn(L,L.ins_h,L.window[L.strstart+ge-1]),_e=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),L.prev_length=L.match_length,L.prev_match=L.match_start,L.match_length=ge-1,_e!==0&&L.prev_length<L.max_lazy_match&&L.strstart-_e<=L.w_size-$e&&(L.match_length=zt(L,_e),L.match_length<=5&&(L.strategy===w||L.match_length===ge&&L.strstart-L.match_start>4096)&&(L.match_length=ge-1)),L.prev_length>=ge&&L.match_length<=L.prev_length){ne=L.strstart+L.lookahead-ge,Ie=g(L,L.strstart-1-L.prev_match,L.prev_length-ge),L.lookahead-=L.prev_length-1,L.prev_length-=2;do++L.strstart<=ne&&(L.ins_h=wn(L,L.ins_h,L.window[L.strstart+ge-1]),_e=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart);while(--L.prev_length!==0);if(L.match_available=0,L.match_length=ge-1,L.strstart++,Ie&&(on(L,!1),L.strm.avail_out===0))return Re}else if(L.match_available){if(Ie=g(L,0,L.window[L.strstart-1]),Ie&&on(L,!1),L.strstart++,L.lookahead--,L.strm.avail_out===0)return Re}else L.match_available=1,L.strstart++,L.lookahead--}return L.match_available&&(Ie=g(L,0,L.window[L.strstart-1]),L.match_available=0),L.insert=L.strstart<ge-1?L.strstart:ge-1,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):L.last_lit&&(on(L,!1),L.strm.avail_out===0)?Re:Tt},"deflate_slow"),Je=s((L,ve)=>{let _e,Ie,ne,Ft;const qe=L.window;for(;;){if(L.lookahead<=Me){if(Kt(L),L.lookahead<=Me&&ve===t)return Re;if(L.lookahead===0)break}if(L.match_length=0,L.lookahead>=ge&&L.strstart>0&&(ne=L.strstart-1,Ie=qe[ne],Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne])){Ft=L.strstart+Me;do;while(Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&Ie===qe[++ne]&&ne<Ft);L.match_length=Me-(Ft-ne),L.match_length>L.lookahead&&(L.match_length=L.lookahead)}if(L.match_length>=ge?(_e=g(L,1,L.match_length-ge),L.lookahead-=L.match_length,L.strstart+=L.match_length,L.match_length=0):(_e=g(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++),_e&&(on(L,!1),L.strm.avail_out===0))return Re}return L.insert=0,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):L.last_lit&&(on(L,!1),L.strm.avail_out===0)?Re:Tt},"deflate_rle"),ut=s((L,ve)=>{let _e;for(;;){if(L.lookahead===0&&(Kt(L),L.lookahead===0)){if(ve===t)return Re;break}if(L.match_length=0,_e=g(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++,_e&&(on(L,!1),L.strm.avail_out===0))return Re}return L.insert=0,ve===u?(on(L,!0),L.strm.avail_out===0?rt:Nt):L.last_lit&&(on(L,!1),L.strm.avail_out===0)?Re:Tt},"deflate_huff");function ot(L,ve,_e,Ie,ne){this.good_length=L,this.max_lazy=ve,this.nice_length=_e,this.max_chain=Ie,this.func=ne}s(ot,"Config");const de=[new ot(0,0,0,0,Q),new ot(4,4,8,4,Ve),new ot(4,5,16,8,Ve),new ot(4,6,32,32,Ve),new ot(4,4,16,16,Be),new ot(8,16,32,32,Be),new ot(8,16,128,128,Be),new ot(8,32,128,256,Be),new ot(32,128,258,1024,Be),new ot(32,258,258,4096,Be)],Ue=s(L=>{L.window_size=2*L.w_size,hn(L.head),L.max_lazy_match=de[L.level].max_lazy,L.good_match=de[L.level].good_length,L.nice_match=de[L.level].nice_length,L.max_chain_length=de[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=ge-1,L.match_available=0,L.ins_h=0},"lm_init");function K(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Oe*2),this.dyn_dtree=new Uint16Array((2*fe+1)*2),this.bl_tree=new Uint16Array((2*oe+1)*2),hn(this.dyn_ltree),hn(this.dyn_dtree),hn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Xe+1),this.heap=new Uint16Array(2*ee+1),hn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ee+1),hn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}s(K,"DeflateState");const q=s(L=>{if(!L||!L.state)return Qt(L,v);L.total_in=L.total_out=0,L.data_type=A;const ve=L.state;return ve.pending=0,ve.pending_out=0,ve.wrap<0&&(ve.wrap=-ve.wrap),ve.status=ve.wrap?nt:Ye,L.adler=ve.wrap===2?0:1,ve.last_flush=t,d(ve),S},"deflateResetKeep"),Ee=s(L=>{const ve=q(L);return ve===S&&Ue(L.state),ve},"deflateReset"),be=s((L,ve)=>!L||!L.state||L.state.wrap!==2?v:(L.state.gzhead=ve,S),"deflateSetHeader"),it=s((L,ve,_e,Ie,ne,Ft)=>{if(!L)return v;let qe=1;if(ve===T&&(ve=6),Ie<0?(qe=0,Ie=-Ie):Ie>15&&(qe=2,Ie-=16),ne<1||ne>D||_e!==P||Ie<8||Ie>15||ve<0||ve>9||Ft<0||Ft>O)return Qt(L,v);Ie===8&&(Ie=9);const ft=new K;return L.state=ft,ft.strm=L,ft.wrap=qe,ft.gzhead=null,ft.w_bits=Ie,ft.w_size=1<<ft.w_bits,ft.w_mask=ft.w_size-1,ft.hash_bits=ne+7,ft.hash_size=1<<ft.hash_bits,ft.hash_mask=ft.hash_size-1,ft.hash_shift=~~((ft.hash_bits+ge-1)/ge),ft.window=new Uint8Array(ft.w_size*2),ft.head=new Uint16Array(ft.hash_size),ft.prev=new Uint16Array(ft.w_size),ft.lit_bufsize=1<<ne+6,ft.pending_buf_size=ft.lit_bufsize*4,ft.pending_buf=new Uint8Array(ft.pending_buf_size),ft.d_buf=1*ft.lit_bufsize,ft.l_buf=(1+2)*ft.lit_bufsize,ft.level=ve,ft.strategy=Ft,ft.method=_e,Ee(L)},"deflateInit2"),He=s((L,ve)=>it(L,ve,P,H,j,k),"deflateInit"),Qe=s((L,ve)=>{let _e,Ie;if(!L||!L.state||ve>h||ve<0)return L?Qt(L,v):v;const ne=L.state;if(!L.output||!L.input&&L.avail_in!==0||ne.status===Ze&&ve!==u)return Qt(L,L.avail_out===0?_:v);ne.strm=L;const Ft=ne.last_flush;if(ne.last_flush=ve,ne.status===nt)if(ne.wrap===2)L.adler=0,kt(ne,31),kt(ne,139),kt(ne,8),ne.gzhead?(kt(ne,(ne.gzhead.text?1:0)+(ne.gzhead.hcrc?2:0)+(ne.gzhead.extra?4:0)+(ne.gzhead.name?8:0)+(ne.gzhead.comment?16:0)),kt(ne,ne.gzhead.time&255),kt(ne,ne.gzhead.time>>8&255),kt(ne,ne.gzhead.time>>16&255),kt(ne,ne.gzhead.time>>24&255),kt(ne,ne.level===9?2:ne.strategy>=M||ne.level<2?4:0),kt(ne,ne.gzhead.os&255),ne.gzhead.extra&&ne.gzhead.extra.length&&(kt(ne,ne.gzhead.extra.length&255),kt(ne,ne.gzhead.extra.length>>8&255)),ne.gzhead.hcrc&&(L.adler=n(L.adler,ne.pending_buf,ne.pending,0)),ne.gzindex=0,ne.status=mt):(kt(ne,0),kt(ne,0),kt(ne,0),kt(ne,0),kt(ne,0),kt(ne,ne.level===9?2:ne.strategy>=M||ne.level<2?4:0),kt(ne,Wt),ne.status=Ye);else{let qe=P+(ne.w_bits-8<<4)<<8,ft=-1;ne.strategy>=M||ne.level<2?ft=0:ne.level<6?ft=1:ne.level===6?ft=2:ft=3,qe|=ft<<6,ne.strstart!==0&&(qe|=ze),qe+=31-qe%31,ne.status=Ye,$t(ne,qe),ne.strstart!==0&&($t(ne,L.adler>>>16),$t(ne,L.adler&65535)),L.adler=1}if(ne.status===mt)if(ne.gzhead.extra){for(_e=ne.pending;ne.gzindex<(ne.gzhead.extra.length&65535)&&!(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Jt(L),_e=ne.pending,ne.pending===ne.pending_buf_size));)kt(ne,ne.gzhead.extra[ne.gzindex]&255),ne.gzindex++;ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),ne.gzindex===ne.gzhead.extra.length&&(ne.gzindex=0,ne.status=gt)}else ne.status=gt;if(ne.status===gt)if(ne.gzhead.name){_e=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Jt(L),_e=ne.pending,ne.pending===ne.pending_buf_size)){Ie=1;break}ne.gzindex<ne.gzhead.name.length?Ie=ne.gzhead.name.charCodeAt(ne.gzindex++)&255:Ie=0,kt(ne,Ie)}while(Ie!==0);ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Ie===0&&(ne.gzindex=0,ne.status=Pe)}else ne.status=Pe;if(ne.status===Pe)if(ne.gzhead.comment){_e=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Jt(L),_e=ne.pending,ne.pending===ne.pending_buf_size)){Ie=1;break}ne.gzindex<ne.gzhead.comment.length?Ie=ne.gzhead.comment.charCodeAt(ne.gzindex++)&255:Ie=0,kt(ne,Ie)}while(Ie!==0);ne.gzhead.hcrc&&ne.pending>_e&&(L.adler=n(L.adler,ne.pending_buf,ne.pending-_e,_e)),Ie===0&&(ne.status=xe)}else ne.status=xe;if(ne.status===xe&&(ne.gzhead.hcrc?(ne.pending+2>ne.pending_buf_size&&Jt(L),ne.pending+2<=ne.pending_buf_size&&(kt(ne,L.adler&255),kt(ne,L.adler>>8&255),L.adler=0,ne.status=Ye)):ne.status=Ye),ne.pending!==0){if(Jt(L),L.avail_out===0)return ne.last_flush=-1,S}else if(L.avail_in===0&&Ot(ve)<=Ot(Ft)&&ve!==u)return Qt(L,_);if(ne.status===Ze&&L.avail_in!==0)return Qt(L,_);if(L.avail_in!==0||ne.lookahead!==0||ve!==t&&ne.status!==Ze){let qe=ne.strategy===M?ut(ne,ve):ne.strategy===R?Je(ne,ve):de[ne.level].func(ne,ve);if((qe===rt||qe===Nt)&&(ne.status=Ze),qe===Re||qe===rt)return L.avail_out===0&&(ne.last_flush=-1),S;if(qe===Tt&&(ve===i?l(ne):ve!==h&&(p(ne,0,0,!1),ve===o&&(hn(ne.head),ne.lookahead===0&&(ne.strstart=0,ne.block_start=0,ne.insert=0))),Jt(L),L.avail_out===0))return ne.last_flush=-1,S}return ve!==u?S:ne.wrap<=0?f:(ne.wrap===2?(kt(ne,L.adler&255),kt(ne,L.adler>>8&255),kt(ne,L.adler>>16&255),kt(ne,L.adler>>24&255),kt(ne,L.total_in&255),kt(ne,L.total_in>>8&255),kt(ne,L.total_in>>16&255),kt(ne,L.total_in>>24&255)):($t(ne,L.adler>>>16),$t(ne,L.adler&65535)),Jt(L),ne.wrap>0&&(ne.wrap=-ne.wrap),ne.pending!==0?S:f)},"deflate"),Se=s(L=>{if(!L||!L.state)return v;const ve=L.state.status;return ve!==nt&&ve!==mt&&ve!==gt&&ve!==Pe&&ve!==xe&&ve!==Ye&&ve!==Ze?Qt(L,v):(L.state=null,ve===Ye?Qt(L,E):S)},"deflateEnd"),Ae=s((L,ve)=>{let _e=ve.length;if(!L||!L.state)return v;const Ie=L.state,ne=Ie.wrap;if(ne===2||ne===1&&Ie.status!==nt||Ie.lookahead)return v;if(ne===1&&(L.adler=r(L.adler,ve,_e,0)),Ie.wrap=0,_e>=Ie.w_size){ne===0&&(hn(Ie.head),Ie.strstart=0,Ie.block_start=0,Ie.insert=0);let En=new Uint8Array(Ie.w_size);En.set(ve.subarray(_e-Ie.w_size,_e),0),ve=En,_e=Ie.w_size}const Ft=L.avail_in,qe=L.next_in,ft=L.input;for(L.avail_in=_e,L.next_in=0,L.input=ve,Kt(Ie);Ie.lookahead>=ge;){let En=Ie.strstart,xt=Ie.lookahead-(ge-1);do Ie.ins_h=wn(Ie,Ie.ins_h,Ie.window[En+ge-1]),Ie.prev[En&Ie.w_mask]=Ie.head[Ie.ins_h],Ie.head[Ie.ins_h]=En,En++;while(--xt);Ie.strstart=En,Ie.lookahead=ge-1,Kt(Ie)}return Ie.strstart+=Ie.lookahead,Ie.block_start=Ie.strstart,Ie.insert=Ie.lookahead,Ie.lookahead=0,Ie.match_length=Ie.prev_length=ge-1,Ie.match_available=0,L.next_in=qe,L.input=ft,L.avail_in=Ft,Ie.wrap=ne,S},"deflateSetDictionary");F.exports.deflateInit=He,F.exports.deflateInit2=it,F.exports.deflateReset=Ee,F.exports.deflateResetKeep=q,F.exports.deflateSetHeader=be,F.exports.deflate=Qe,F.exports.deflateEnd=Se,F.exports.deflateSetDictionary=Ae,F.exports.deflateInfo="pako deflate (from Nodeca project)"},9654919892:F=>{"use strict";function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}s(a,"GZheader"),F.exports=a},1551921669:F=>{"use strict";F.exports=s(function(p,m){let g,l,r,n,e,t,i,o,u,h,S,f,v,E,_,T,w,M,R,O,k,A,P,D;const H=p.state;g=p.next_in,P=p.input,l=g+(p.avail_in-5),r=p.next_out,D=p.output,n=r-(m-p.avail_out),e=r+(p.avail_out-257),t=H.dmax,i=H.wsize,o=H.whave,u=H.wnext,h=H.window,S=H.hold,f=H.bits,v=H.lencode,E=H.distcode,_=(1<<H.lenbits)-1,T=(1<<H.distbits)-1;e:do{f<15&&(S+=P[g++]<<f,f+=8,S+=P[g++]<<f,f+=8),w=v[S&_];t:for(;;){if(M=w>>>24,S>>>=M,f-=M,M=w>>>16&255,M===0)D[r++]=w&65535;else if(M&16){R=w&65535,M&=15,M&&(f<M&&(S+=P[g++]<<f,f+=8),R+=S&(1<<M)-1,S>>>=M,f-=M),f<15&&(S+=P[g++]<<f,f+=8,S+=P[g++]<<f,f+=8),w=E[S&T];n:for(;;){if(M=w>>>24,S>>>=M,f-=M,M=w>>>16&255,M&16){if(O=w&65535,M&=15,f<M&&(S+=P[g++]<<f,f+=8,f<M&&(S+=P[g++]<<f,f+=8)),O+=S&(1<<M)-1,O>t){p.msg="invalid distance too far back",H.mode=30;break e}if(S>>>=M,f-=M,M=r-n,O>M){if(M=O-M,M>o&&H.sane){p.msg="invalid distance too far back",H.mode=30;break e}if(k=0,A=h,u===0){if(k+=i-M,M<R){R-=M;do D[r++]=h[k++];while(--M);k=r-O,A=D}}else if(u<M){if(k+=i+u-M,M-=u,M<R){R-=M;do D[r++]=h[k++];while(--M);if(k=0,u<R){M=u,R-=M;do D[r++]=h[k++];while(--M);k=r-O,A=D}}}else if(k+=u-M,M<R){R-=M;do D[r++]=h[k++];while(--M);k=r-O,A=D}for(;R>2;)D[r++]=A[k++],D[r++]=A[k++],D[r++]=A[k++],R-=3;R&&(D[r++]=A[k++],R>1&&(D[r++]=A[k++]))}else{k=r-O;do D[r++]=D[k++],D[r++]=D[k++],D[r++]=D[k++],R-=3;while(R>2);R&&(D[r++]=D[k++],R>1&&(D[r++]=D[k++]))}}else if(M&64){p.msg="invalid distance code",H.mode=30;break e}else{w=E[(w&65535)+(S&(1<<M)-1)];continue n}break}}else if(M&64)if(M&32){H.mode=12;break e}else{p.msg="invalid literal/length code",H.mode=30;break e}else{w=v[(w&65535)+(S&(1<<M)-1)];continue t}break}}while(g<l&&r<e);R=f>>3,g-=R,f-=R<<3,S&=(1<<f)-1,p.next_in=g,p.next_out=r,p.avail_in=g<l?5+(l-g):5-(g-l),p.avail_out=r<e?257+(e-r):257-(r-e),H.hold=S,H.bits=f},"inflate_fast")},8029791791:(F,a,c)=>{"use strict";const d=c(3145109445),p=c(3332910147),m=c(1551921669),g=c(9262713900),l=0,r=1,n=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:i,Z_OK:o,Z_STREAM_END:u,Z_NEED_DICT:h,Z_STREAM_ERROR:S,Z_DATA_ERROR:f,Z_MEM_ERROR:v,Z_BUF_ERROR:E,Z_DEFLATED:_}=c(9516153853),T=1,w=2,M=3,R=4,O=5,k=6,A=7,P=8,D=9,H=10,j=11,W=12,X=13,ee=14,fe=15,oe=16,Oe=17,Xe=18,ge=19,Me=20,$e=21,ze=22,nt=23,mt=24,gt=25,Pe=26,xe=27,Ye=28,Ze=29,Re=30,Tt=31,rt=32,Nt=852,Wt=592,Ot=15,hn=s(de=>(de>>>24&255)+(de>>>8&65280)+((de&65280)<<8)+((de&255)<<24),"zswap32");function fi(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}s(fi,"InflateState");const wn=s(de=>{if(!de||!de.state)return S;const Ue=de.state;return de.total_in=de.total_out=Ue.total=0,de.msg="",Ue.wrap&&(de.adler=Ue.wrap&1),Ue.mode=T,Ue.last=0,Ue.havedict=0,Ue.dmax=32768,Ue.head=null,Ue.hold=0,Ue.bits=0,Ue.lencode=Ue.lendyn=new Int32Array(Nt),Ue.distcode=Ue.distdyn=new Int32Array(Wt),Ue.sane=1,Ue.back=-1,o},"inflateResetKeep"),Jt=s(de=>{if(!de||!de.state)return S;const Ue=de.state;return Ue.wsize=0,Ue.whave=0,Ue.wnext=0,wn(de)},"inflateReset"),on=s((de,Ue)=>{let K;if(!de||!de.state)return S;const q=de.state;return Ue<0?(K=0,Ue=-Ue):(K=(Ue>>4)+1,Ue<48&&(Ue&=15)),Ue&&(Ue<8||Ue>15)?S:(q.window!==null&&q.wbits!==Ue&&(q.window=null),q.wrap=K,q.wbits=Ue,Jt(de))},"inflateReset2"),kt=s((de,Ue)=>{if(!de)return S;const K=new fi;de.state=K,K.window=null;const q=on(de,Ue);return q!==o&&(de.state=null),q},"inflateInit2"),$t=s(de=>kt(de,Ot),"inflateInit");let en=!0,zt,Kt;const Q=s(de=>{if(en){zt=new Int32Array(512),Kt=new Int32Array(32);let Ue=0;for(;Ue<144;)de.lens[Ue++]=8;for(;Ue<256;)de.lens[Ue++]=9;for(;Ue<280;)de.lens[Ue++]=7;for(;Ue<288;)de.lens[Ue++]=8;for(g(r,de.lens,0,288,zt,0,de.work,{bits:9}),Ue=0;Ue<32;)de.lens[Ue++]=5;g(n,de.lens,0,32,Kt,0,de.work,{bits:5}),en=!1}de.lencode=zt,de.lenbits=9,de.distcode=Kt,de.distbits=5},"fixedtables"),Ve=s((de,Ue,K,q)=>{let Ee;const be=de.state;return be.window===null&&(be.wsize=1<<be.wbits,be.wnext=0,be.whave=0,be.window=new Uint8Array(be.wsize)),q>=be.wsize?(be.window.set(Ue.subarray(K-be.wsize,K),0),be.wnext=0,be.whave=be.wsize):(Ee=be.wsize-be.wnext,Ee>q&&(Ee=q),be.window.set(Ue.subarray(K-q,K-q+Ee),be.wnext),q-=Ee,q?(be.window.set(Ue.subarray(K-q,K),0),be.wnext=q,be.whave=be.wsize):(be.wnext+=Ee,be.wnext===be.wsize&&(be.wnext=0),be.whave<be.wsize&&(be.whave+=Ee))),0},"updatewindow"),Be=s((de,Ue)=>{let K,q,Ee,be,it,He,Qe,Se,Ae,L,ve,_e,Ie,ne,Ft=0,qe,ft,En,xt,Ui,_i,bn,zn;const gn=new Uint8Array(4);let gi,ai;const yr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!de||!de.state||!de.output||!de.input&&de.avail_in!==0)return S;K=de.state,K.mode===W&&(K.mode=X),it=de.next_out,Ee=de.output,Qe=de.avail_out,be=de.next_in,q=de.input,He=de.avail_in,Se=K.hold,Ae=K.bits,L=He,ve=Qe,zn=o;e:for(;;)switch(K.mode){case T:if(K.wrap===0){K.mode=X;break}for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(K.wrap&2&&Se===35615){K.check=0,gn[0]=Se&255,gn[1]=Se>>>8&255,K.check=p(K.check,gn,2,0),Se=0,Ae=0,K.mode=w;break}if(K.flags=0,K.head&&(K.head.done=!1),!(K.wrap&1)||(((Se&255)<<8)+(Se>>8))%31){de.msg="incorrect header check",K.mode=Re;break}if((Se&15)!==_){de.msg="unknown compression method",K.mode=Re;break}if(Se>>>=4,Ae-=4,bn=(Se&15)+8,K.wbits===0)K.wbits=bn;else if(bn>K.wbits){de.msg="invalid window size",K.mode=Re;break}K.dmax=1<<K.wbits,de.adler=K.check=1,K.mode=Se&512?H:W,Se=0,Ae=0;break;case w:for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(K.flags=Se,(K.flags&255)!==_){de.msg="unknown compression method",K.mode=Re;break}if(K.flags&57344){de.msg="unknown header flags set",K.mode=Re;break}K.head&&(K.head.text=Se>>8&1),K.flags&512&&(gn[0]=Se&255,gn[1]=Se>>>8&255,K.check=p(K.check,gn,2,0)),Se=0,Ae=0,K.mode=M;case M:for(;Ae<32;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.head&&(K.head.time=Se),K.flags&512&&(gn[0]=Se&255,gn[1]=Se>>>8&255,gn[2]=Se>>>16&255,gn[3]=Se>>>24&255,K.check=p(K.check,gn,4,0)),Se=0,Ae=0,K.mode=R;case R:for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.head&&(K.head.xflags=Se&255,K.head.os=Se>>8),K.flags&512&&(gn[0]=Se&255,gn[1]=Se>>>8&255,K.check=p(K.check,gn,2,0)),Se=0,Ae=0,K.mode=O;case O:if(K.flags&1024){for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.length=Se,K.head&&(K.head.extra_len=Se),K.flags&512&&(gn[0]=Se&255,gn[1]=Se>>>8&255,K.check=p(K.check,gn,2,0)),Se=0,Ae=0}else K.head&&(K.head.extra=null);K.mode=k;case k:if(K.flags&1024&&(_e=K.length,_e>He&&(_e=He),_e&&(K.head&&(bn=K.head.extra_len-K.length,K.head.extra||(K.head.extra=new Uint8Array(K.head.extra_len)),K.head.extra.set(q.subarray(be,be+_e),bn)),K.flags&512&&(K.check=p(K.check,q,_e,be)),He-=_e,be+=_e,K.length-=_e),K.length))break e;K.length=0,K.mode=A;case A:if(K.flags&2048){if(He===0)break e;_e=0;do bn=q[be+_e++],K.head&&bn&&K.length<65536&&(K.head.name+=String.fromCharCode(bn));while(bn&&_e<He);if(K.flags&512&&(K.check=p(K.check,q,_e,be)),He-=_e,be+=_e,bn)break e}else K.head&&(K.head.name=null);K.length=0,K.mode=P;case P:if(K.flags&4096){if(He===0)break e;_e=0;do bn=q[be+_e++],K.head&&bn&&K.length<65536&&(K.head.comment+=String.fromCharCode(bn));while(bn&&_e<He);if(K.flags&512&&(K.check=p(K.check,q,_e,be)),He-=_e,be+=_e,bn)break e}else K.head&&(K.head.comment=null);K.mode=D;case D:if(K.flags&512){for(;Ae<16;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(Se!==(K.check&65535)){de.msg="header crc mismatch",K.mode=Re;break}Se=0,Ae=0}K.head&&(K.head.hcrc=K.flags>>9&1,K.head.done=!0),de.adler=K.check=0,K.mode=W;break;case H:for(;Ae<32;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}de.adler=K.check=hn(Se),Se=0,Ae=0,K.mode=j;case j:if(K.havedict===0)return de.next_out=it,de.avail_out=Qe,de.next_in=be,de.avail_in=He,K.hold=Se,K.bits=Ae,h;de.adler=K.check=1,K.mode=W;case W:if(Ue===t||Ue===i)break e;case X:if(K.last){Se>>>=Ae&7,Ae-=Ae&7,K.mode=xe;break}for(;Ae<3;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}switch(K.last=Se&1,Se>>>=1,Ae-=1,Se&3){case 0:K.mode=ee;break;case 1:if(Q(K),K.mode=Me,Ue===i){Se>>>=2,Ae-=2;break e}break;case 2:K.mode=Oe;break;case 3:de.msg="invalid block type",K.mode=Re}Se>>>=2,Ae-=2;break;case ee:for(Se>>>=Ae&7,Ae-=Ae&7;Ae<32;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if((Se&65535)!==(Se>>>16^65535)){de.msg="invalid stored block lengths",K.mode=Re;break}if(K.length=Se&65535,Se=0,Ae=0,K.mode=fe,Ue===i)break e;case fe:K.mode=oe;case oe:if(_e=K.length,_e){if(_e>He&&(_e=He),_e>Qe&&(_e=Qe),_e===0)break e;Ee.set(q.subarray(be,be+_e),it),He-=_e,be+=_e,Qe-=_e,it+=_e,K.length-=_e;break}K.mode=W;break;case Oe:for(;Ae<14;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(K.nlen=(Se&31)+257,Se>>>=5,Ae-=5,K.ndist=(Se&31)+1,Se>>>=5,Ae-=5,K.ncode=(Se&15)+4,Se>>>=4,Ae-=4,K.nlen>286||K.ndist>30){de.msg="too many length or distance symbols",K.mode=Re;break}K.have=0,K.mode=Xe;case Xe:for(;K.have<K.ncode;){for(;Ae<3;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.lens[yr[K.have++]]=Se&7,Se>>>=3,Ae-=3}for(;K.have<19;)K.lens[yr[K.have++]]=0;if(K.lencode=K.lendyn,K.lenbits=7,gi={bits:K.lenbits},zn=g(l,K.lens,0,19,K.lencode,0,K.work,gi),K.lenbits=gi.bits,zn){de.msg="invalid code lengths set",K.mode=Re;break}K.have=0,K.mode=ge;case ge:for(;K.have<K.nlen+K.ndist;){for(;Ft=K.lencode[Se&(1<<K.lenbits)-1],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(En<16)Se>>>=qe,Ae-=qe,K.lens[K.have++]=En;else{if(En===16){for(ai=qe+2;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(Se>>>=qe,Ae-=qe,K.have===0){de.msg="invalid bit length repeat",K.mode=Re;break}bn=K.lens[K.have-1],_e=3+(Se&3),Se>>>=2,Ae-=2}else if(En===17){for(ai=qe+3;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}Se>>>=qe,Ae-=qe,bn=0,_e=3+(Se&7),Se>>>=3,Ae-=3}else{for(ai=qe+7;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}Se>>>=qe,Ae-=qe,bn=0,_e=11+(Se&127),Se>>>=7,Ae-=7}if(K.have+_e>K.nlen+K.ndist){de.msg="invalid bit length repeat",K.mode=Re;break}for(;_e--;)K.lens[K.have++]=bn}}if(K.mode===Re)break;if(K.lens[256]===0){de.msg="invalid code -- missing end-of-block",K.mode=Re;break}if(K.lenbits=9,gi={bits:K.lenbits},zn=g(r,K.lens,0,K.nlen,K.lencode,0,K.work,gi),K.lenbits=gi.bits,zn){de.msg="invalid literal/lengths set",K.mode=Re;break}if(K.distbits=6,K.distcode=K.distdyn,gi={bits:K.distbits},zn=g(n,K.lens,K.nlen,K.ndist,K.distcode,0,K.work,gi),K.distbits=gi.bits,zn){de.msg="invalid distances set",K.mode=Re;break}if(K.mode=Me,Ue===i)break e;case Me:K.mode=$e;case $e:if(He>=6&&Qe>=258){de.next_out=it,de.avail_out=Qe,de.next_in=be,de.avail_in=He,K.hold=Se,K.bits=Ae,m(de,ve),it=de.next_out,Ee=de.output,Qe=de.avail_out,be=de.next_in,q=de.input,He=de.avail_in,Se=K.hold,Ae=K.bits,K.mode===W&&(K.back=-1);break}for(K.back=0;Ft=K.lencode[Se&(1<<K.lenbits)-1],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(ft&&!(ft&240)){for(xt=qe,Ui=ft,_i=En;Ft=K.lencode[_i+((Se&(1<<xt+Ui)-1)>>xt)],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(xt+qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}Se>>>=xt,Ae-=xt,K.back+=xt}if(Se>>>=qe,Ae-=qe,K.back+=qe,K.length=En,ft===0){K.mode=Pe;break}if(ft&32){K.back=-1,K.mode=W;break}if(ft&64){de.msg="invalid literal/length code",K.mode=Re;break}K.extra=ft&15,K.mode=ze;case ze:if(K.extra){for(ai=K.extra;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.length+=Se&(1<<K.extra)-1,Se>>>=K.extra,Ae-=K.extra,K.back+=K.extra}K.was=K.length,K.mode=nt;case nt:for(;Ft=K.distcode[Se&(1<<K.distbits)-1],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(!(ft&240)){for(xt=qe,Ui=ft,_i=En;Ft=K.distcode[_i+((Se&(1<<xt+Ui)-1)>>xt)],qe=Ft>>>24,ft=Ft>>>16&255,En=Ft&65535,!(xt+qe<=Ae);){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}Se>>>=xt,Ae-=xt,K.back+=xt}if(Se>>>=qe,Ae-=qe,K.back+=qe,ft&64){de.msg="invalid distance code",K.mode=Re;break}K.offset=En,K.extra=ft&15,K.mode=mt;case mt:if(K.extra){for(ai=K.extra;Ae<ai;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}K.offset+=Se&(1<<K.extra)-1,Se>>>=K.extra,Ae-=K.extra,K.back+=K.extra}if(K.offset>K.dmax){de.msg="invalid distance too far back",K.mode=Re;break}K.mode=gt;case gt:if(Qe===0)break e;if(_e=ve-Qe,K.offset>_e){if(_e=K.offset-_e,_e>K.whave&&K.sane){de.msg="invalid distance too far back",K.mode=Re;break}_e>K.wnext?(_e-=K.wnext,Ie=K.wsize-_e):Ie=K.wnext-_e,_e>K.length&&(_e=K.length),ne=K.window}else ne=Ee,Ie=it-K.offset,_e=K.length;_e>Qe&&(_e=Qe),Qe-=_e,K.length-=_e;do Ee[it++]=ne[Ie++];while(--_e);K.length===0&&(K.mode=$e);break;case Pe:if(Qe===0)break e;Ee[it++]=K.length,Qe--,K.mode=$e;break;case xe:if(K.wrap){for(;Ae<32;){if(He===0)break e;He--,Se|=q[be++]<<Ae,Ae+=8}if(ve-=Qe,de.total_out+=ve,K.total+=ve,ve&&(de.adler=K.check=K.flags?p(K.check,Ee,ve,it-ve):d(K.check,Ee,ve,it-ve)),ve=Qe,(K.flags?Se:hn(Se))!==K.check){de.msg="incorrect data check",K.mode=Re;break}Se=0,Ae=0}K.mode=Ye;case Ye:if(K.wrap&&K.flags){for(;Ae<32;){if(He===0)break e;He--,Se+=q[be++]<<Ae,Ae+=8}if(Se!==(K.total&4294967295)){de.msg="incorrect length check",K.mode=Re;break}Se=0,Ae=0}K.mode=Ze;case Ze:zn=u;break e;case Re:zn=f;break e;case Tt:return v;case rt:default:return S}return de.next_out=it,de.avail_out=Qe,de.next_in=be,de.avail_in=He,K.hold=Se,K.bits=Ae,(K.wsize||ve!==de.avail_out&&K.mode<Re&&(K.mode<xe||Ue!==e))&&Ve(de,de.output,de.next_out,ve-de.avail_out)?(K.mode=Tt,v):(L-=de.avail_in,ve-=de.avail_out,de.total_in+=L,de.total_out+=ve,K.total+=ve,K.wrap&&ve&&(de.adler=K.check=K.flags?p(K.check,Ee,ve,de.next_out-ve):d(K.check,Ee,ve,de.next_out-ve)),de.data_type=K.bits+(K.last?64:0)+(K.mode===W?128:0)+(K.mode===Me||K.mode===fe?256:0),(L===0&&ve===0||Ue===e)&&zn===o&&(zn=E),zn)},"inflate"),Je=s(de=>{if(!de||!de.state)return S;let Ue=de.state;return Ue.window&&(Ue.window=null),de.state=null,o},"inflateEnd"),ut=s((de,Ue)=>{if(!de||!de.state)return S;const K=de.state;return K.wrap&2?(K.head=Ue,Ue.done=!1,o):S},"inflateGetHeader"),ot=s((de,Ue)=>{const K=Ue.length;let q,Ee,be;return!de||!de.state||(q=de.state,q.wrap!==0&&q.mode!==j)?S:q.mode===j&&(Ee=1,Ee=d(Ee,Ue,K,0),Ee!==q.check)?f:(be=Ve(de,Ue,K,K),be?(q.mode=Tt,v):(q.havedict=1,o))},"inflateSetDictionary");F.exports.inflateReset=Jt,F.exports.inflateReset2=on,F.exports.inflateResetKeep=wn,F.exports.inflateInit=$t,F.exports.inflateInit2=kt,F.exports.inflate=Be,F.exports.inflateEnd=Je,F.exports.inflateGetHeader=ut,F.exports.inflateSetDictionary=ot,F.exports.inflateInfo="pako inflate (from Nodeca project)"},9262713900:F=>{"use strict";const l=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=s((i,o,u,h,S,f,v,E)=>{const _=E.bits;let T=0,w=0,M=0,R=0,O=0,k=0,A=0,P=0,D=0,H=0,j,W,X,ee,fe,oe=null,Oe=0,Xe;const ge=new Uint16Array(15+1),Me=new Uint16Array(15+1);let $e=null,ze=0,nt,mt,gt;for(T=0;T<=15;T++)ge[T]=0;for(w=0;w<h;w++)ge[o[u+w]]++;for(O=_,R=15;R>=1&&ge[R]===0;R--);if(O>R&&(O=R),R===0)return S[f++]=1<<24|64<<16|0,S[f++]=1<<24|64<<16|0,E.bits=1,0;for(M=1;M<R&&ge[M]===0;M++);for(O<M&&(O=M),P=1,T=1;T<=15;T++)if(P<<=1,P-=ge[T],P<0)return-1;if(P>0&&(i===0||R!==1))return-1;for(Me[1]=0,T=1;T<15;T++)Me[T+1]=Me[T]+ge[T];for(w=0;w<h;w++)o[u+w]!==0&&(v[Me[o[u+w]]++]=w);if(i===0?(oe=$e=v,Xe=19):i===1?(oe=l,Oe-=257,$e=r,ze-=257,Xe=256):(oe=n,$e=e,Xe=-1),H=0,w=0,T=M,fe=f,k=O,A=0,X=-1,D=1<<O,ee=D-1,i===1&&D>852||i===2&&D>592)return 1;for(;;){nt=T-A,v[w]<Xe?(mt=0,gt=v[w]):v[w]>Xe?(mt=$e[ze+v[w]],gt=oe[Oe+v[w]]):(mt=32+64,gt=0),j=1<<T-A,W=1<<k,M=W;do W-=j,S[fe+(H>>A)+W]=nt<<24|mt<<16|gt|0;while(W!==0);for(j=1<<T-1;H&j;)j>>=1;if(j!==0?(H&=j-1,H+=j):H=0,w++,--ge[T]===0){if(T===R)break;T=o[u+v[w]]}if(T>O&&(H&ee)!==X){for(A===0&&(A=O),fe+=M,k=T-A,P=1<<k;k+A<R&&(P-=ge[k+A],!(P<=0));)k++,P<<=1;if(D+=1<<k,i===1&&D>852||i===2&&D>592)return 1;X=H&ee,S[X]=O<<24|k<<16|fe-f|0}}return H!==0&&(S[fe+H]=T-A<<24|64<<16|0),E.bits=O,0},"inflate_table");F.exports=t},4276546412:F=>{"use strict";F.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},4407910137:F=>{"use strict";function m(Q){let Ve=Q.length;for(;--Ve>=0;)Q[Ve]=0}s(m,"zero");const g=0,l=1,r=2,n=3,e=258,t=29,i=256,o=i+1+t,u=30,h=19,S=2*o+1,f=15,v=16,E=7,_=256,T=16,w=17,M=18,R=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),O=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),k=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),P=512,D=new Array((o+2)*2);m(D);const H=new Array(u*2);m(H);const j=new Array(P);m(j);const W=new Array(e-n+1);m(W);const X=new Array(t);m(X);const ee=new Array(u);m(ee);function fe(Q,Ve,Be,Je,ut){this.static_tree=Q,this.extra_bits=Ve,this.extra_base=Be,this.elems=Je,this.max_length=ut,this.has_stree=Q&&Q.length}s(fe,"StaticTreeDesc");let oe,Oe,Xe;function ge(Q,Ve){this.dyn_tree=Q,this.max_code=0,this.stat_desc=Ve}s(ge,"TreeDesc");const Me=s(Q=>Q<256?j[Q]:j[256+(Q>>>7)],"d_code"),$e=s((Q,Ve)=>{Q.pending_buf[Q.pending++]=Ve&255,Q.pending_buf[Q.pending++]=Ve>>>8&255},"put_short"),ze=s((Q,Ve,Be)=>{Q.bi_valid>v-Be?(Q.bi_buf|=Ve<<Q.bi_valid&65535,$e(Q,Q.bi_buf),Q.bi_buf=Ve>>v-Q.bi_valid,Q.bi_valid+=Be-v):(Q.bi_buf|=Ve<<Q.bi_valid&65535,Q.bi_valid+=Be)},"send_bits"),nt=s((Q,Ve,Be)=>{ze(Q,Be[Ve*2],Be[Ve*2+1])},"send_code"),mt=s((Q,Ve)=>{let Be=0;do Be|=Q&1,Q>>>=1,Be<<=1;while(--Ve>0);return Be>>>1},"bi_reverse"),gt=s(Q=>{Q.bi_valid===16?($e(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):Q.bi_valid>=8&&(Q.pending_buf[Q.pending++]=Q.bi_buf&255,Q.bi_buf>>=8,Q.bi_valid-=8)},"bi_flush"),Pe=s((Q,Ve)=>{const Be=Ve.dyn_tree,Je=Ve.max_code,ut=Ve.stat_desc.static_tree,ot=Ve.stat_desc.has_stree,de=Ve.stat_desc.extra_bits,Ue=Ve.stat_desc.extra_base,K=Ve.stat_desc.max_length;let q,Ee,be,it,He,Qe,Se=0;for(it=0;it<=f;it++)Q.bl_count[it]=0;for(Be[Q.heap[Q.heap_max]*2+1]=0,q=Q.heap_max+1;q<S;q++)Ee=Q.heap[q],it=Be[Be[Ee*2+1]*2+1]+1,it>K&&(it=K,Se++),Be[Ee*2+1]=it,!(Ee>Je)&&(Q.bl_count[it]++,He=0,Ee>=Ue&&(He=de[Ee-Ue]),Qe=Be[Ee*2],Q.opt_len+=Qe*(it+He),ot&&(Q.static_len+=Qe*(ut[Ee*2+1]+He)));if(Se!==0){do{for(it=K-1;Q.bl_count[it]===0;)it--;Q.bl_count[it]--,Q.bl_count[it+1]+=2,Q.bl_count[K]--,Se-=2}while(Se>0);for(it=K;it!==0;it--)for(Ee=Q.bl_count[it];Ee!==0;)be=Q.heap[--q],!(be>Je)&&(Be[be*2+1]!==it&&(Q.opt_len+=(it-Be[be*2+1])*Be[be*2],Be[be*2+1]=it),Ee--)}},"gen_bitlen"),xe=s((Q,Ve,Be)=>{const Je=new Array(f+1);let ut=0,ot,de;for(ot=1;ot<=f;ot++)Je[ot]=ut=ut+Be[ot-1]<<1;for(de=0;de<=Ve;de++){let Ue=Q[de*2+1];Ue!==0&&(Q[de*2]=mt(Je[Ue]++,Ue))}},"gen_codes"),Ye=s(()=>{let Q,Ve,Be,Je,ut;const ot=new Array(f+1);for(Be=0,Je=0;Je<t-1;Je++)for(X[Je]=Be,Q=0;Q<1<<R[Je];Q++)W[Be++]=Je;for(W[Be-1]=Je,ut=0,Je=0;Je<16;Je++)for(ee[Je]=ut,Q=0;Q<1<<O[Je];Q++)j[ut++]=Je;for(ut>>=7;Je<u;Je++)for(ee[Je]=ut<<7,Q=0;Q<1<<O[Je]-7;Q++)j[256+ut++]=Je;for(Ve=0;Ve<=f;Ve++)ot[Ve]=0;for(Q=0;Q<=143;)D[Q*2+1]=8,Q++,ot[8]++;for(;Q<=255;)D[Q*2+1]=9,Q++,ot[9]++;for(;Q<=279;)D[Q*2+1]=7,Q++,ot[7]++;for(;Q<=287;)D[Q*2+1]=8,Q++,ot[8]++;for(xe(D,o+1,ot),Q=0;Q<u;Q++)H[Q*2+1]=5,H[Q*2]=mt(Q,5);oe=new fe(D,R,i+1,o,f),Oe=new fe(H,O,0,u,f),Xe=new fe(new Array(0),k,0,h,E)},"tr_static_init"),Ze=s(Q=>{let Ve;for(Ve=0;Ve<o;Ve++)Q.dyn_ltree[Ve*2]=0;for(Ve=0;Ve<u;Ve++)Q.dyn_dtree[Ve*2]=0;for(Ve=0;Ve<h;Ve++)Q.bl_tree[Ve*2]=0;Q.dyn_ltree[_*2]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0},"init_block"),Re=s(Q=>{Q.bi_valid>8?$e(Q,Q.bi_buf):Q.bi_valid>0&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0},"bi_windup"),Tt=s((Q,Ve,Be,Je)=>{Re(Q),Je&&($e(Q,Be),$e(Q,~Be)),Q.pending_buf.set(Q.window.subarray(Ve,Ve+Be),Q.pending),Q.pending+=Be},"copy_block"),rt=s((Q,Ve,Be,Je)=>{const ut=Ve*2,ot=Be*2;return Q[ut]<Q[ot]||Q[ut]===Q[ot]&&Je[Ve]<=Je[Be]},"smaller"),Nt=s((Q,Ve,Be)=>{const Je=Q.heap[Be];let ut=Be<<1;for(;ut<=Q.heap_len&&(ut<Q.heap_len&&rt(Ve,Q.heap[ut+1],Q.heap[ut],Q.depth)&&ut++,!rt(Ve,Je,Q.heap[ut],Q.depth));)Q.heap[Be]=Q.heap[ut],Be=ut,ut<<=1;Q.heap[Be]=Je},"pqdownheap"),Wt=s((Q,Ve,Be)=>{let Je,ut,ot=0,de,Ue;if(Q.last_lit!==0)do Je=Q.pending_buf[Q.d_buf+ot*2]<<8|Q.pending_buf[Q.d_buf+ot*2+1],ut=Q.pending_buf[Q.l_buf+ot],ot++,Je===0?nt(Q,ut,Ve):(de=W[ut],nt(Q,de+i+1,Ve),Ue=R[de],Ue!==0&&(ut-=X[de],ze(Q,ut,Ue)),Je--,de=Me(Je),nt(Q,de,Be),Ue=O[de],Ue!==0&&(Je-=ee[de],ze(Q,Je,Ue)));while(ot<Q.last_lit);nt(Q,_,Ve)},"compress_block"),Qt=s((Q,Ve)=>{const Be=Ve.dyn_tree,Je=Ve.stat_desc.static_tree,ut=Ve.stat_desc.has_stree,ot=Ve.stat_desc.elems;let de,Ue,K=-1,q;for(Q.heap_len=0,Q.heap_max=S,de=0;de<ot;de++)Be[de*2]!==0?(Q.heap[++Q.heap_len]=K=de,Q.depth[de]=0):Be[de*2+1]=0;for(;Q.heap_len<2;)q=Q.heap[++Q.heap_len]=K<2?++K:0,Be[q*2]=1,Q.depth[q]=0,Q.opt_len--,ut&&(Q.static_len-=Je[q*2+1]);for(Ve.max_code=K,de=Q.heap_len>>1;de>=1;de--)Nt(Q,Be,de);q=ot;do de=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],Nt(Q,Be,1),Ue=Q.heap[1],Q.heap[--Q.heap_max]=de,Q.heap[--Q.heap_max]=Ue,Be[q*2]=Be[de*2]+Be[Ue*2],Q.depth[q]=(Q.depth[de]>=Q.depth[Ue]?Q.depth[de]:Q.depth[Ue])+1,Be[de*2+1]=Be[Ue*2+1]=q,Q.heap[1]=q++,Nt(Q,Be,1);while(Q.heap_len>=2);Q.heap[--Q.heap_max]=Q.heap[1],Pe(Q,Ve),xe(Be,K,Q.bl_count)},"build_tree"),Ot=s((Q,Ve,Be)=>{let Je,ut=-1,ot,de=Ve[0*2+1],Ue=0,K=7,q=4;for(de===0&&(K=138,q=3),Ve[(Be+1)*2+1]=65535,Je=0;Je<=Be;Je++)ot=de,de=Ve[(Je+1)*2+1],!(++Ue<K&&ot===de)&&(Ue<q?Q.bl_tree[ot*2]+=Ue:ot!==0?(ot!==ut&&Q.bl_tree[ot*2]++,Q.bl_tree[T*2]++):Ue<=10?Q.bl_tree[w*2]++:Q.bl_tree[M*2]++,Ue=0,ut=ot,de===0?(K=138,q=3):ot===de?(K=6,q=3):(K=7,q=4))},"scan_tree"),hn=s((Q,Ve,Be)=>{let Je,ut=-1,ot,de=Ve[0*2+1],Ue=0,K=7,q=4;for(de===0&&(K=138,q=3),Je=0;Je<=Be;Je++)if(ot=de,de=Ve[(Je+1)*2+1],!(++Ue<K&&ot===de)){if(Ue<q)do nt(Q,ot,Q.bl_tree);while(--Ue!==0);else ot!==0?(ot!==ut&&(nt(Q,ot,Q.bl_tree),Ue--),nt(Q,T,Q.bl_tree),ze(Q,Ue-3,2)):Ue<=10?(nt(Q,w,Q.bl_tree),ze(Q,Ue-3,3)):(nt(Q,M,Q.bl_tree),ze(Q,Ue-11,7));Ue=0,ut=ot,de===0?(K=138,q=3):ot===de?(K=6,q=3):(K=7,q=4)}},"send_tree"),fi=s(Q=>{let Ve;for(Ot(Q,Q.dyn_ltree,Q.l_desc.max_code),Ot(Q,Q.dyn_dtree,Q.d_desc.max_code),Qt(Q,Q.bl_desc),Ve=h-1;Ve>=3&&Q.bl_tree[A[Ve]*2+1]===0;Ve--);return Q.opt_len+=3*(Ve+1)+5+5+4,Ve},"build_bl_tree"),wn=s((Q,Ve,Be,Je)=>{let ut;for(ze(Q,Ve-257,5),ze(Q,Be-1,5),ze(Q,Je-4,4),ut=0;ut<Je;ut++)ze(Q,Q.bl_tree[A[ut]*2+1],3);hn(Q,Q.dyn_ltree,Ve-1),hn(Q,Q.dyn_dtree,Be-1)},"send_all_trees"),Jt=s(Q=>{let Ve=4093624447,Be;for(Be=0;Be<=31;Be++,Ve>>>=1)if(Ve&1&&Q.dyn_ltree[Be*2]!==0)return 0;if(Q.dyn_ltree[9*2]!==0||Q.dyn_ltree[10*2]!==0||Q.dyn_ltree[13*2]!==0)return 1;for(Be=32;Be<i;Be++)if(Q.dyn_ltree[Be*2]!==0)return 1;return 0},"detect_data_type");let on=!1;const kt=s(Q=>{on||(Ye(),on=!0),Q.l_desc=new ge(Q.dyn_ltree,oe),Q.d_desc=new ge(Q.dyn_dtree,Oe),Q.bl_desc=new ge(Q.bl_tree,Xe),Q.bi_buf=0,Q.bi_valid=0,Ze(Q)},"_tr_init"),$t=s((Q,Ve,Be,Je)=>{ze(Q,(g<<1)+(Je?1:0),3),Tt(Q,Ve,Be,!0)},"_tr_stored_block"),en=s(Q=>{ze(Q,l<<1,3),nt(Q,_,D),gt(Q)},"_tr_align"),zt=s((Q,Ve,Be,Je)=>{let ut,ot,de=0;Q.level>0?(Q.strm.data_type===2&&(Q.strm.data_type=Jt(Q)),Qt(Q,Q.l_desc),Qt(Q,Q.d_desc),de=fi(Q),ut=Q.opt_len+3+7>>>3,ot=Q.static_len+3+7>>>3,ot<=ut&&(ut=ot)):ut=ot=Be+5,Be+4<=ut&&Ve!==-1?$t(Q,Ve,Be,Je):Q.strategy===4||ot===ut?(ze(Q,(l<<1)+(Je?1:0),3),Wt(Q,D,H)):(ze(Q,(r<<1)+(Je?1:0),3),wn(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,de+1),Wt(Q,Q.dyn_ltree,Q.dyn_dtree)),Ze(Q),Je&&Re(Q)},"_tr_flush_block"),Kt=s((Q,Ve,Be)=>(Q.pending_buf[Q.d_buf+Q.last_lit*2]=Ve>>>8&255,Q.pending_buf[Q.d_buf+Q.last_lit*2+1]=Ve&255,Q.pending_buf[Q.l_buf+Q.last_lit]=Be&255,Q.last_lit++,Ve===0?Q.dyn_ltree[Be*2]++:(Q.matches++,Ve--,Q.dyn_ltree[(W[Be]+i+1)*2]++,Q.dyn_dtree[Me(Ve)*2]++),Q.last_lit===Q.lit_bufsize-1),"_tr_tally");F.exports._tr_init=kt,F.exports._tr_stored_block=$t,F.exports._tr_flush_block=zt,F.exports._tr_tally=Kt,F.exports._tr_align=en},8079600486:F=>{"use strict";function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}s(a,"ZStream"),F.exports=a},7232944804:(F,a,c)=>{"use strict";F.exports=c(2045210164)},2045210164:(F,a,c)=>{"use strict";var d=a;d.build="minimal",d.Writer=c(7628345881),d.BufferWriter=c(4314741704),d.Reader=c(4066972109),d.BufferReader=c(5398895804),d.util=c(6381418898),d.rpc=c(9851642381),d.roots=c(2285340147),d.configure=p;function p(){d.util._configure(),d.Writer._configure(d.BufferWriter),d.Reader._configure(d.BufferReader)}s(p,"configure"),p()},4066972109:(F,a,c)=>{"use strict";F.exports=r;var d=c(6381418898),p,m=d.LongBits,g=d.utf8;function l(u,h){return RangeError("index out of range: "+u.pos+" + "+(h||1)+" > "+u.len)}s(l,"indexOutOfRange");function r(u){this.buf=u,this.pos=0,this.len=u.length}s(r,"Reader");var n=typeof Uint8Array<"u"?s(function(h){if(h instanceof Uint8Array||Array.isArray(h))return new r(h);throw Error("illegal buffer")},"create_typed_array"):s(function(h){if(Array.isArray(h))return new r(h);throw Error("illegal buffer")},"create_array"),e=s(function(){return d.Buffer?s(function(S){return(r.create=s(function(v){return d.Buffer.isBuffer(v)?new p(v):n(v)},"create_buffer"))(S)},"create_buffer_setup"):n},"create");r.create=e(),r.prototype._slice=d.Array.prototype.subarray||d.Array.prototype.slice,r.prototype.uint32=s(function(){var h=4294967295;return s(function(){if(h=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(h=(h|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return h;if((this.pos+=5)>this.len)throw this.pos=this.len,l(this,10);return h},"read_uint32")},"read_uint32_setup")(),r.prototype.int32=s(function(){return this.uint32()|0},"read_int32"),r.prototype.sint32=s(function(){var h=this.uint32();return h>>>1^-(h&1)|0},"read_sint32");function t(){var u=new m(0,0),h=0;if(this.len-this.pos>4){for(;h<4;++h)if(u.lo=(u.lo|(this.buf[this.pos]&127)<<h*7)>>>0,this.buf[this.pos++]<128)return u;if(u.lo=(u.lo|(this.buf[this.pos]&127)<<28)>>>0,u.hi=(u.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return u;h=0}else{for(;h<3;++h){if(this.pos>=this.len)throw l(this);if(u.lo=(u.lo|(this.buf[this.pos]&127)<<h*7)>>>0,this.buf[this.pos++]<128)return u}return u.lo=(u.lo|(this.buf[this.pos++]&127)<<h*7)>>>0,u}if(this.len-this.pos>4){for(;h<5;++h)if(u.hi=(u.hi|(this.buf[this.pos]&127)<<h*7+3)>>>0,this.buf[this.pos++]<128)return u}else for(;h<5;++h){if(this.pos>=this.len)throw l(this);if(u.hi=(u.hi|(this.buf[this.pos]&127)<<h*7+3)>>>0,this.buf[this.pos++]<128)return u}throw Error("invalid varint encoding")}s(t,"readLongVarint"),r.prototype.bool=s(function(){return this.uint32()!==0},"read_bool");function i(u,h){return(u[h-4]|u[h-3]<<8|u[h-2]<<16|u[h-1]<<24)>>>0}s(i,"readFixed32_end"),r.prototype.fixed32=s(function(){if(this.pos+4>this.len)throw l(this,4);return i(this.buf,this.pos+=4)},"read_fixed32"),r.prototype.sfixed32=s(function(){if(this.pos+4>this.len)throw l(this,4);return i(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw l(this,8);return new m(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}s(o,"readFixed64"),r.prototype.float=s(function(){if(this.pos+4>this.len)throw l(this,4);var h=d.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h},"read_float"),r.prototype.double=s(function(){if(this.pos+8>this.len)throw l(this,4);var h=d.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h},"read_double"),r.prototype.bytes=s(function(){var h=this.uint32(),S=this.pos,f=this.pos+h;if(f>this.len)throw l(this,h);if(this.pos+=h,Array.isArray(this.buf))return this.buf.slice(S,f);if(S===f){var v=d.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,f)},"read_bytes"),r.prototype.string=s(function(){var h=this.bytes();return g.read(h,0,h.length)},"read_string"),r.prototype.skip=s(function(h){if(typeof h=="number"){if(this.pos+h>this.len)throw l(this,h);this.pos+=h}else do if(this.pos>=this.len)throw l(this);while(this.buf[this.pos++]&128);return this},"skip"),r.prototype.skipType=function(u){switch(u){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(u=this.uint32()&7)!==4;)this.skipType(u);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+u+" at offset "+this.pos)}return this},r._configure=function(u){p=u,r.create=e(),p._configure();var h=d.Long?"toLong":"toNumber";d.merge(r.prototype,{int64:s(function(){return t.call(this)[h](!1)},"read_int64"),uint64:s(function(){return t.call(this)[h](!0)},"read_uint64"),sint64:s(function(){return t.call(this).zzDecode()[h](!1)},"read_sint64"),fixed64:s(function(){return o.call(this)[h](!0)},"read_fixed64"),sfixed64:s(function(){return o.call(this)[h](!1)},"read_sfixed64")})}},5398895804:(F,a,c)=>{"use strict";F.exports=m;var d=c(4066972109);(m.prototype=Object.create(d.prototype)).constructor=m;var p=c(6381418898);function m(g){d.call(this,g)}s(m,"BufferReader"),m._configure=function(){p.Buffer&&(m.prototype._slice=p.Buffer.prototype.slice)},m.prototype.string=s(function(){var l=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+l,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+l,this.len))},"read_string_buffer"),m._configure()},2285340147:F=>{"use strict";F.exports={}},9851642381:(F,a,c)=>{"use strict";var d=a;d.Service=c(6359991721)},6359991721:(F,a,c)=>{"use strict";F.exports=p;var d=c(6381418898);(p.prototype=Object.create(d.EventEmitter.prototype)).constructor=p;function p(m,g,l){if(typeof m!="function")throw TypeError("rpcImpl must be a function");d.EventEmitter.call(this),this.rpcImpl=m,this.requestDelimited=Boolean(g),this.responseDelimited=Boolean(l)}s(p,"Service"),p.prototype.rpcCall=s(function m(g,l,r,n,e){if(!n)throw TypeError("request must be specified");var t=this;if(!e)return d.asPromise(m,t,g,l,r,n);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(g,l[t.requestDelimited?"encodeDelimited":"encode"](n).finish(),s(function(o,u){if(o)return t.emit("error",o,g),e(o);if(u===null){t.end(!0);return}if(!(u instanceof r))try{u=r[t.responseDelimited?"decodeDelimited":"decode"](u)}catch(h){return t.emit("error",h,g),e(h)}return t.emit("data",u,g),e(null,u)},"rpcCallback"))}catch(i){t.emit("error",i,g),setTimeout(function(){e(i)},0);return}},"rpcCall"),p.prototype.end=s(function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},3157215629:(F,a,c)=>{"use strict";F.exports=p;var d=c(6381418898);function p(r,n){this.lo=r>>>0,this.hi=n>>>0}s(p,"LongBits");var m=p.zero=new p(0,0);m.toNumber=function(){return 0},m.zzEncode=m.zzDecode=function(){return this},m.length=function(){return 1};var g=p.zeroHash="\0\0\0\0\0\0\0\0";p.fromNumber=s(function(n){if(n===0)return m;var e=n<0;e&&(n=-n);var t=n>>>0,i=(n-t)/4294967296>>>0;return e&&(i=~i>>>0,t=~t>>>0,++t>4294967295&&(t=0,++i>4294967295&&(i=0))),new p(t,i)},"fromNumber"),p.from=s(function(n){if(typeof n=="number")return p.fromNumber(n);if(d.isString(n))if(d.Long)n=d.Long.fromString(n);else return p.fromNumber(parseInt(n,10));return n.low||n.high?new p(n.low>>>0,n.high>>>0):m},"from"),p.prototype.toNumber=s(function(n){if(!n&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),p.prototype.toLong=s(function(n){return d.Long?new d.Long(this.lo|0,this.hi|0,Boolean(n)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(n)}},"toLong");var l=String.prototype.charCodeAt;p.fromHash=s(function(n){return n===g?m:new p((l.call(n,0)|l.call(n,1)<<8|l.call(n,2)<<16|l.call(n,3)<<24)>>>0,(l.call(n,4)|l.call(n,5)<<8|l.call(n,6)<<16|l.call(n,7)<<24)>>>0)},"fromHash"),p.prototype.toHash=s(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),p.prototype.zzEncode=s(function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this},"zzEncode"),p.prototype.zzDecode=s(function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this},"zzDecode"),p.prototype.length=s(function(){var n=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?n<16384?n<128?1:2:n<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},6381418898:function(F,a,c){"use strict";var d=a;d.asPromise=c(7410930532),d.base64=c(3824736026),d.EventEmitter=c(6627060659),d.float=c(6797650127),d.inquire=c(3923667175),d.utf8=c(4612067386),d.pool=c(3002561995),d.LongBits=c(3157215629),d.isNode=Boolean(typeof c.g<"u"&&c.g&&c.g.process&&c.g.process.versions&&c.g.process.versions.node),d.global=d.isNode&&c.g||typeof window<"u"&&window||typeof self<"u"&&self||this,d.emptyArray=Object.freeze?Object.freeze([]):[],d.emptyObject=Object.freeze?Object.freeze({}):{},d.isInteger=Number.isInteger||s(function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},"isInteger"),d.isString=s(function(l){return typeof l=="string"||l instanceof String},"isString"),d.isObject=s(function(l){return l&&typeof l=="object"},"isObject"),d.isset=d.isSet=s(function(l,r){var n=l[r];return n!=null&&l.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1},"isSet"),d.Buffer=function(){try{var g=d.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch{return null}}(),d._Buffer_from=null,d._Buffer_allocUnsafe=null,d.newBuffer=s(function(l){return typeof l=="number"?d.Buffer?d._Buffer_allocUnsafe(l):new d.Array(l):d.Buffer?d._Buffer_from(l):typeof Uint8Array>"u"?l:new Uint8Array(l)},"newBuffer"),d.Array=typeof Uint8Array<"u"?Uint8Array:Array,d.Long=d.global.dcodeIO&&d.global.dcodeIO.Long||d.global.Long||d.inquire("long"),d.key2Re=/^true|false|0|1$/,d.key32Re=/^-?(?:0|[1-9][0-9]*)$/,d.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,d.longToHash=s(function(l){return l?d.LongBits.from(l).toHash():d.LongBits.zeroHash},"longToHash"),d.longFromHash=s(function(l,r){var n=d.LongBits.fromHash(l);return d.Long?d.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},"longFromHash");function p(g,l,r){for(var n=Object.keys(l),e=0;e<n.length;++e)(g[n[e]]===void 0||!r)&&(g[n[e]]=l[n[e]]);return g}s(p,"merge"),d.merge=p,d.lcFirst=s(function(l){return l.charAt(0).toLowerCase()+l.substring(1)},"lcFirst");function m(g){function l(r,n){if(!(this instanceof l))return new l(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,l):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&p(this,n)}return s(l,"CustomError"),l.prototype=Object.create(Error.prototype,{constructor:{value:l,writable:!0,enumerable:!1,configurable:!0},name:{get:s(function(){return g},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:s(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),l}s(m,"newError"),d.newError=m,d.ProtocolError=m("ProtocolError"),d.oneOfGetter=s(function(l){for(var r={},n=0;n<l.length;++n)r[l[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),d.oneOfSetter=s(function(l){return function(r){for(var n=0;n<l.length;++n)l[n]!==r&&delete this[l[n]]}},"setOneOf"),d.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},d._configure=function(){var g=d.Buffer;if(!g){d._Buffer_from=d._Buffer_allocUnsafe=null;return}d._Buffer_from=g.from!==Uint8Array.from&&g.from||s(function(r,n){return new g(r,n)},"Buffer_from"),d._Buffer_allocUnsafe=g.allocUnsafe||s(function(r){return new g(r)},"Buffer_allocUnsafe")}},7628345881:(F,a,c)=>{"use strict";F.exports=t;var d=c(6381418898),p,m=d.LongBits,g=d.base64,l=d.utf8;function r(E,_,T){this.fn=E,this.len=_,this.next=void 0,this.val=T}s(r,"Op");function n(){}s(n,"noop");function e(E){this.head=E.head,this.tail=E.tail,this.len=E.len,this.next=E.states}s(e,"State");function t(){this.len=0,this.head=new r(n,0,0),this.tail=this.head,this.states=null}s(t,"Writer");var i=s(function(){return d.Buffer?s(function(){return(t.create=s(function(){return new p},"create_buffer"))()},"create_buffer_setup"):s(function(){return new t},"create_array")},"create");t.create=i(),t.alloc=s(function(_){return new d.Array(_)},"alloc"),d.Array!==Array&&(t.alloc=d.pool(t.alloc,d.Array.prototype.subarray)),t.prototype._push=s(function(_,T,w){return this.tail=this.tail.next=new r(_,T,w),this.len+=T,this},"push");function o(E,_,T){_[T]=E&255}s(o,"writeByte");function u(E,_,T){for(;E>127;)_[T++]=E&127|128,E>>>=7;_[T]=E}s(u,"writeVarint32");function h(E,_){this.len=E,this.next=void 0,this.val=_}s(h,"VarintOp"),h.prototype=Object.create(r.prototype),h.prototype.fn=u,t.prototype.uint32=s(function(_){return this.len+=(this.tail=this.tail.next=new h((_=_>>>0)<128?1:_<16384?2:_<2097152?3:_<268435456?4:5,_)).len,this},"write_uint32"),t.prototype.int32=s(function(_){return _<0?this._push(S,10,m.fromNumber(_)):this.uint32(_)},"write_int32"),t.prototype.sint32=s(function(_){return this.uint32((_<<1^_>>31)>>>0)},"write_sint32");function S(E,_,T){for(;E.hi;)_[T++]=E.lo&127|128,E.lo=(E.lo>>>7|E.hi<<25)>>>0,E.hi>>>=7;for(;E.lo>127;)_[T++]=E.lo&127|128,E.lo=E.lo>>>7;_[T++]=E.lo}s(S,"writeVarint64"),t.prototype.uint64=s(function(_){var T=m.from(_);return this._push(S,T.length(),T)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=s(function(_){var T=m.from(_).zzEncode();return this._push(S,T.length(),T)},"write_sint64"),t.prototype.bool=s(function(_){return this._push(o,1,_?1:0)},"write_bool");function f(E,_,T){_[T]=E&255,_[T+1]=E>>>8&255,_[T+2]=E>>>16&255,_[T+3]=E>>>24}s(f,"writeFixed32"),t.prototype.fixed32=s(function(_){return this._push(f,4,_>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=s(function(_){var T=m.from(_);return this._push(f,4,T.lo)._push(f,4,T.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=s(function(_){return this._push(d.float.writeFloatLE,4,_)},"write_float"),t.prototype.double=s(function(_){return this._push(d.float.writeDoubleLE,8,_)},"write_double");var v=d.Array.prototype.set?s(function(_,T,w){T.set(_,w)},"writeBytes_set"):s(function(_,T,w){for(var M=0;M<_.length;++M)T[w+M]=_[M]},"writeBytes_for");t.prototype.bytes=s(function(_){var T=_.length>>>0;if(!T)return this._push(o,1,0);if(d.isString(_)){var w=t.alloc(T=g.length(_));g.decode(_,w,0),_=w}return this.uint32(T)._push(v,T,_)},"write_bytes"),t.prototype.string=s(function(_){var T=l.length(_);return T?this.uint32(T)._push(l.write,T,_):this._push(o,1,0)},"write_string"),t.prototype.fork=s(function(){return this.states=new e(this),this.head=this.tail=new r(n,0,0),this.len=0,this},"fork"),t.prototype.reset=s(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(n,0,0),this.len=0),this},"reset"),t.prototype.ldelim=s(function(){var _=this.head,T=this.tail,w=this.len;return this.reset().uint32(w),w&&(this.tail.next=_.next,this.tail=T,this.len+=w),this},"ldelim"),t.prototype.finish=s(function(){for(var _=this.head.next,T=this.constructor.alloc(this.len),w=0;_;)_.fn(_.val,T,w),w+=_.len,_=_.next;return T},"finish"),t._configure=function(E){p=E,t.create=i(),p._configure()}},4314741704:(F,a,c)=>{"use strict";F.exports=m;var d=c(7628345881);(m.prototype=Object.create(d.prototype)).constructor=m;var p=c(6381418898);function m(){d.call(this)}s(m,"BufferWriter"),m._configure=function(){m.alloc=p._Buffer_allocUnsafe,m.writeBytesBuffer=p.Buffer&&p.Buffer.prototype instanceof Uint8Array&&p.Buffer.prototype.set.name==="set"?s(function(r,n,e){n.set(r,e)},"writeBytesBuffer_set"):s(function(r,n,e){if(r.copy)r.copy(n,e,0,r.length);else for(var t=0;t<r.length;)n[e++]=r[t++]},"writeBytesBuffer_copy")},m.prototype.bytes=s(function(r){p.isString(r)&&(r=p._Buffer_from(r,"base64"));var n=r.length>>>0;return this.uint32(n),n&&this._push(m.writeBytesBuffer,n,r),this},"write_bytes_buffer");function g(l,r,n){l.length<40?p.utf8.write(l,r,n):r.utf8Write?r.utf8Write(l,n):r.write(l,n)}s(g,"writeStringBuffer"),m.prototype.string=s(function(r){var n=p.Buffer.byteLength(r);return this.uint32(n),n&&this._push(g,n,r),this},"write_string_buffer"),m._configure()},8400004479:(F,a,c)=>{"use strict";c.r(a),c.d(a,{__assign:()=>m,__asyncDelegator:()=>_,__asyncGenerator:()=>E,__asyncValues:()=>T,__await:()=>v,__awaiter:()=>e,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>k,__createBinding:()=>i,__decorate:()=>l,__exportStar:()=>o,__extends:()=>p,__generator:()=>t,__importDefault:()=>R,__importStar:()=>M,__makeTemplateObject:()=>w,__metadata:()=>n,__param:()=>r,__read:()=>h,__rest:()=>g,__spread:()=>S,__spreadArrays:()=>f,__values:()=>u});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d=s(function(A,P){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,H){D.__proto__=H}||function(D,H){for(var j in H)H.hasOwnProperty(j)&&(D[j]=H[j])},d(A,P)},"extendStatics");function p(A,P){d(A,P);function D(){this.constructor=A}s(D,"__"),A.prototype=P===null?Object.create(P):(D.prototype=P.prototype,new D)}s(p,"__extends");var m=s(function(){return m=Object.assign||s(function(P){for(var D,H=1,j=arguments.length;H<j;H++){D=arguments[H];for(var W in D)Object.prototype.hasOwnProperty.call(D,W)&&(P[W]=D[W])}return P},"__assign"),m.apply(this,arguments)},"__assign");function g(A,P){var D={};for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&P.indexOf(H)<0&&(D[H]=A[H]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,H=Object.getOwnPropertySymbols(A);j<H.length;j++)P.indexOf(H[j])<0&&Object.prototype.propertyIsEnumerable.call(A,H[j])&&(D[H[j]]=A[H[j]]);return D}s(g,"__rest");function l(A,P,D,H){var j=arguments.length,W=j<3?P:H===null?H=Object.getOwnPropertyDescriptor(P,D):H,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(A,P,D,H);else for(var ee=A.length-1;ee>=0;ee--)(X=A[ee])&&(W=(j<3?X(W):j>3?X(P,D,W):X(P,D))||W);return j>3&&W&&Object.defineProperty(P,D,W),W}s(l,"__decorate");function r(A,P){return function(D,H){P(D,H,A)}}s(r,"__param");function n(A,P){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,P)}s(n,"__metadata");function e(A,P,D,H){function j(W){return W instanceof D?W:new D(function(X){X(W)})}return s(j,"adopt"),new(D||(D=Promise))(function(W,X){function ee(Oe){try{oe(H.next(Oe))}catch(Xe){X(Xe)}}s(ee,"fulfilled");function fe(Oe){try{oe(H.throw(Oe))}catch(Xe){X(Xe)}}s(fe,"rejected");function oe(Oe){Oe.done?W(Oe.value):j(Oe.value).then(ee,fe)}s(oe,"step"),oe((H=H.apply(A,P||[])).next())})}s(e,"__awaiter");function t(A,P){var D={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},H,j,W,X;return X={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function ee(oe){return function(Oe){return fe([oe,Oe])}}function fe(oe){if(H)throw new TypeError("Generator is already executing.");for(;D;)try{if(H=1,j&&(W=oe[0]&2?j.return:oe[0]?j.throw||((W=j.return)&&W.call(j),0):j.next)&&!(W=W.call(j,oe[1])).done)return W;switch(j=0,W&&(oe=[oe[0]&2,W.value]),oe[0]){case 0:case 1:W=oe;break;case 4:return D.label++,{value:oe[1],done:!1};case 5:D.label++,j=oe[1],oe=[0];continue;case 7:oe=D.ops.pop(),D.trys.pop();continue;default:if(W=D.trys,!(W=W.length>0&&W[W.length-1])&&(oe[0]===6||oe[0]===2)){D=0;continue}if(oe[0]===3&&(!W||oe[1]>W[0]&&oe[1]<W[3])){D.label=oe[1];break}if(oe[0]===6&&D.label<W[1]){D.label=W[1],W=oe;break}if(W&&D.label<W[2]){D.label=W[2],D.ops.push(oe);break}W[2]&&D.ops.pop(),D.trys.pop();continue}oe=P.call(A,D)}catch(Oe){oe=[6,Oe],j=0}finally{H=W=0}if(oe[0]&5)throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}}s(t,"__generator");function i(A,P,D,H){H===void 0&&(H=D),A[H]=P[D]}s(i,"__createBinding");function o(A,P){for(var D in A)D!=="default"&&!P.hasOwnProperty(D)&&(P[D]=A[D])}s(o,"__exportStar");function u(A){var P=typeof Symbol=="function"&&Symbol.iterator,D=P&&A[P],H=0;if(D)return D.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&H>=A.length&&(A=void 0),{value:A&&A[H++],done:!A}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}s(u,"__values");function h(A,P){var D=typeof Symbol=="function"&&A[Symbol.iterator];if(!D)return A;var H=D.call(A),j,W=[],X;try{for(;(P===void 0||P-- >0)&&!(j=H.next()).done;)W.push(j.value)}catch(ee){X={error:ee}}finally{try{j&&!j.done&&(D=H.return)&&D.call(H)}finally{if(X)throw X.error}}return W}s(h,"__read");function S(){for(var A=[],P=0;P<arguments.length;P++)A=A.concat(h(arguments[P]));return A}s(S,"__spread");function f(){for(var A=0,P=0,D=arguments.length;P<D;P++)A+=arguments[P].length;for(var H=Array(A),j=0,P=0;P<D;P++)for(var W=arguments[P],X=0,ee=W.length;X<ee;X++,j++)H[j]=W[X];return H}s(f,"__spreadArrays");function v(A){return this instanceof v?(this.v=A,this):new v(A)}s(v,"__await");function E(A,P,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H=D.apply(A,P||[]),j,W=[];return j={},X("next"),X("throw"),X("return"),j[Symbol.asyncIterator]=function(){return this},j;function X(ge){H[ge]&&(j[ge]=function(Me){return new Promise(function($e,ze){W.push([ge,Me,$e,ze])>1||ee(ge,Me)})})}function ee(ge,Me){try{fe(H[ge](Me))}catch($e){Xe(W[0][3],$e)}}function fe(ge){ge.value instanceof v?Promise.resolve(ge.value.v).then(oe,Oe):Xe(W[0][2],ge)}function oe(ge){ee("next",ge)}function Oe(ge){ee("throw",ge)}function Xe(ge,Me){ge(Me),W.shift(),W.length&&ee(W[0][0],W[0][1])}}s(E,"__asyncGenerator");function _(A){var P,D;return P={},H("next"),H("throw",function(j){throw j}),H("return"),P[Symbol.iterator]=function(){return this},P;function H(j,W){P[j]=A[j]?function(X){return(D=!D)?{value:v(A[j](X)),done:j==="return"}:W?W(X):X}:W}}s(_,"__asyncDelegator");function T(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=A[Symbol.asyncIterator],D;return P?P.call(A):(A=typeof u=="function"?u(A):A[Symbol.iterator](),D={},H("next"),H("throw"),H("return"),D[Symbol.asyncIterator]=function(){return this},D);function H(W){D[W]=A[W]&&function(X){return new Promise(function(ee,fe){X=A[W](X),j(ee,fe,X.done,X.value)})}}function j(W,X,ee,fe){Promise.resolve(fe).then(function(oe){W({value:oe,done:ee})},X)}}s(T,"__asyncValues");function w(A,P){return Object.defineProperty?Object.defineProperty(A,"raw",{value:P}):A.raw=P,A}s(w,"__makeTemplateObject");function M(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var D in A)Object.hasOwnProperty.call(A,D)&&(P[D]=A[D]);return P.default=A,P}s(M,"__importStar");function R(A){return A&&A.__esModule?A:{default:A}}s(R,"__importDefault");function O(A,P){if(!P.has(A))throw new TypeError("attempted to get private field on non-instance");return P.get(A)}s(O,"__classPrivateFieldGet");function k(A,P,D){if(!P.has(A))throw new TypeError("attempted to set private field on non-instance");return P.set(A,D),D}s(k,"__classPrivateFieldSet")},888724265:function(F,a,c){var d;(function(p,m){"use strict";var g="1.0.38",l="",r="?",n="function",e="undefined",t="object",i="string",o="major",u="model",h="name",S="type",f="vendor",v="version",E="architecture",_="console",T="mobile",w="tablet",M="smarttv",R="wearable",O="embedded",k=500,A="Amazon",P="Apple",D="ASUS",H="BlackBerry",j="Browser",W="Chrome",X="Edge",ee="Firefox",fe="Google",oe="Huawei",Oe="LG",Xe="Microsoft",ge="Motorola",Me="Opera",$e="Samsung",ze="Sharp",nt="Sony",mt="Xiaomi",gt="Zebra",Pe="Facebook",xe="Chromium OS",Ye="Mac OS",Ze=s(function($t,en){var zt={};for(var Kt in $t)en[Kt]&&en[Kt].length%2===0?zt[Kt]=en[Kt].concat($t[Kt]):zt[Kt]=$t[Kt];return zt},"extend"),Re=s(function($t){for(var en={},zt=0;zt<$t.length;zt++)en[$t[zt].toUpperCase()]=$t[zt];return en},"enumerize"),Tt=s(function($t,en){return typeof $t===i?rt(en).indexOf(rt($t))!==-1:!1},"has"),rt=s(function($t){return $t.toLowerCase()},"lowerize"),Nt=s(function($t){return typeof $t===i?$t.replace(/[^\d\.]/g,l).split(".")[0]:m},"majorize"),Wt=s(function($t,en){if(typeof $t===i)return $t=$t.replace(/^\s\s*/,l),typeof en===e?$t:$t.substring(0,k)},"trim"),Qt=s(function($t,en){for(var zt=0,Kt,Q,Ve,Be,Je,ut;zt<en.length&&!Je;){var ot=en[zt],de=en[zt+1];for(Kt=Q=0;Kt<ot.length&&!Je&&ot[Kt];)if(Je=ot[Kt++].exec($t),Je)for(Ve=0;Ve<de.length;Ve++)ut=Je[++Q],Be=de[Ve],typeof Be===t&&Be.length>0?Be.length===2?typeof Be[1]==n?this[Be[0]]=Be[1].call(this,ut):this[Be[0]]=Be[1]:Be.length===3?typeof Be[1]===n&&!(Be[1].exec&&Be[1].test)?this[Be[0]]=ut?Be[1].call(this,ut,Be[2]):m:this[Be[0]]=ut?ut.replace(Be[1],Be[2]):m:Be.length===4&&(this[Be[0]]=ut?Be[3].call(this,ut.replace(Be[1],Be[2])):m):this[Be]=ut||m;zt+=2}},"rgxMapper"),Ot=s(function($t,en){for(var zt in en)if(typeof en[zt]===t&&en[zt].length>0){for(var Kt=0;Kt<en[zt].length;Kt++)if(Tt(en[zt][Kt],$t))return zt===r?m:zt}else if(Tt(en[zt],$t))return zt===r?m:zt;return $t},"strMapper"),hn={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},fi={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,v],[/opios[\/ ]+([\w\.]+)/i],[v,[h,Me+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[h,Me+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[h,Me]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,v],[/\bddg\/([\w\.]+)/i],[v,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[h,"UC"+j]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[h,"Smart Lenovo "+j]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+j],v],[/\bfocus\/([\w\.]+)/i],[v,[h,ee+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[h,Me+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[h,Me+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[h,"MIUI "+j]],[/fxios\/([-\w\.]+)/i],[v,[h,ee]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+j]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+j],v],[/samsungbrowser\/([\w\.]+)/i],[v,[h,$e+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],v],[/metasr[\/ ]?([\d\.]+)/i],[v,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,v],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,Pe],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[h,W+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,W+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[h,"Android "+j]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[v,Ot,hn]],[/(webkit|khtml)\/([\w\.]+)/i],[h,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[h,ee+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,v],[/(cobalt)\/([\w\.]+)/i],[h,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[E,"amd64"]],[/(ia32(?=;))/i],[[E,rt]],[/((?:i[346]|x)86)[;\)]/i],[[E,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[E,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[E,"armhf"]],[/windows (ce|mobile); ppc;/i],[[E,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[E,/ower/,l,rt]],[/(sun4\w)[;\)]/i],[[E,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[E,rt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[f,$e],[S,w]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[f,$e],[S,T]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[f,P],[S,T]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,P],[S,w]],[/(macintosh);/i],[u,[f,P]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[f,ze],[S,T]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[f,oe],[S,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[f,oe],[S,T]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[f,mt],[S,T]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[f,mt],[S,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[f,"OPPO"],[S,T]],[/\b(opd2\d{3}a?) bui/i],[u,[f,"OPPO"],[S,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[f,"Vivo"],[S,T]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[f,"Realme"],[S,T]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[f,ge],[S,T]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[f,ge],[S,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[f,Oe],[S,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[f,Oe],[S,T]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[f,"Lenovo"],[S,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[f,"Nokia"],[S,T]],[/(pixel c)\b/i],[u,[f,fe],[S,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[f,fe],[S,T]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,nt],[S,T]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[f,nt],[S,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[f,"OnePlus"],[S,T]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[f,A],[S,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[f,A],[S,T]],[/(playbook);[-\w\),; ]+(rim)/i],[u,f,[S,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[f,H],[S,T]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[f,D],[S,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[f,D],[S,T]],[/(nexus 9)/i],[u,[f,"HTC"],[S,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[u,/_/g," "],[S,T]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[f,"Acer"],[S,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[f,"Meizu"],[S,T]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[f,"Ulefone"],[S,T]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,u,[S,T]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,u,[S,w]],[/(surface duo)/i],[u,[f,Xe],[S,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[f,"Fairphone"],[S,T]],[/(u304aa)/i],[u,[f,"AT&T"],[S,T]],[/\bsie-(\w*)/i],[u,[f,"Siemens"],[S,T]],[/\b(rct\w+) b/i],[u,[f,"RCA"],[S,w]],[/\b(venue[\d ]{2,7}) b/i],[u,[f,"Dell"],[S,w]],[/\b(q(?:mv|ta)\w+) b/i],[u,[f,"Verizon"],[S,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[f,"Barnes & Noble"],[S,w]],[/\b(tm\d{3}\w+) b/i],[u,[f,"NuVision"],[S,w]],[/\b(k88) b/i],[u,[f,"ZTE"],[S,w]],[/\b(nx\d{3}j) b/i],[u,[f,"ZTE"],[S,T]],[/\b(gen\d{3}) b.+49h/i],[u,[f,"Swiss"],[S,T]],[/\b(zur\d{3}) b/i],[u,[f,"Swiss"],[S,w]],[/\b((zeki)?tb.*\b) b/i],[u,[f,"Zeki"],[S,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],u,[S,w]],[/\b(ns-?\w{0,9}) b/i],[u,[f,"Insignia"],[S,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[f,"NextBook"],[S,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],u,[S,T]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],u,[S,T]],[/\b(ph-1) /i],[u,[f,"Essential"],[S,T]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[f,"Envizen"],[S,w]],[/\b(trio[-\w\. ]+) b/i],[u,[f,"MachSpeed"],[S,w]],[/\btu_(1491) b/i],[u,[f,"Rotor"],[S,w]],[/(shield[\w ]+) b/i],[u,[f,"Nvidia"],[S,w]],[/(sprint) (\w+)/i],[f,u,[S,T]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,Xe],[S,T]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,gt],[S,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,gt],[S,T]],[/smart-tv.+(samsung)/i],[f,[S,M]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,$e],[S,M]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,Oe],[S,M]],[/(apple) ?tv/i],[f,[u,P+" TV"],[S,M]],[/crkey/i],[[u,W+"cast"],[f,fe],[S,M]],[/droid.+aft(\w+)( bui|\))/i],[u,[f,A],[S,M]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[f,ze],[S,M]],[/(bravia[\w ]+)( bui|\))/i],[u,[f,nt],[S,M]],[/(mitv-\w{5}) bui/i],[u,[f,mt],[S,M]],[/Hbbtv.*(technisat) (.*);/i],[f,u,[S,M]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,Wt],[u,Wt],[S,M]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,M]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,u,[S,_]],[/droid.+; (shield) bui/i],[u,[f,"Nvidia"],[S,_]],[/(playstation [345portablevi]+)/i],[u,[f,nt],[S,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[f,Xe],[S,_]],[/((pebble))app/i],[f,u,[S,R]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[f,P],[S,R]],[/droid.+; (glass) \d/i],[u,[f,fe],[S,R]],[/droid.+; (wt63?0{2,3})\)/i],[u,[f,gt],[S,R]],[/(quest( \d| pro)?)/i],[u,[f,Pe],[S,R]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[S,O]],[/(aeobc)\b/i],[u,[f,A],[S,O]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[S,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[S,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,T]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[h,X+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[v,Ot,fi]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,Ot,fi],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,Ye],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,v],[/\(bb(10);/i],[v,[h,H]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[h,ee+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[h,W+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,xe],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,v],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,v]]},Jt=s(function($t,en){if(typeof $t===t&&(en=$t,$t=m),!(this instanceof Jt))return new Jt($t,en).getResult();var zt=typeof p!==e&&p.navigator?p.navigator:m,Kt=$t||(zt&&zt.userAgent?zt.userAgent:l),Q=zt&&zt.userAgentData?zt.userAgentData:m,Ve=en?Ze(wn,en):wn,Be=zt&&zt.userAgent==Kt;return this.getBrowser=function(){var Je={};return Je[h]=m,Je[v]=m,Qt.call(Je,Kt,Ve.browser),Je[o]=Nt(Je[v]),Be&&zt&&zt.brave&&typeof zt.brave.isBrave==n&&(Je[h]="Brave"),Je},this.getCPU=function(){var Je={};return Je[E]=m,Qt.call(Je,Kt,Ve.cpu),Je},this.getDevice=function(){var Je={};return Je[f]=m,Je[u]=m,Je[S]=m,Qt.call(Je,Kt,Ve.device),Be&&!Je[S]&&Q&&Q.mobile&&(Je[S]=T),Be&&Je[u]=="Macintosh"&&zt&&typeof zt.standalone!==e&&zt.maxTouchPoints&&zt.maxTouchPoints>2&&(Je[u]="iPad",Je[S]=w),Je},this.getEngine=function(){var Je={};return Je[h]=m,Je[v]=m,Qt.call(Je,Kt,Ve.engine),Je},this.getOS=function(){var Je={};return Je[h]=m,Je[v]=m,Qt.call(Je,Kt,Ve.os),Be&&!Je[h]&&Q&&Q.platform&&Q.platform!="Unknown"&&(Je[h]=Q.platform.replace(/chrome os/i,xe).replace(/macos/i,Ye)),Je},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Kt},this.setUA=function(Je){return Kt=typeof Je===i&&Je.length>k?Wt(Je,k):Je,this},this.setUA(Kt),this},"UAParser");Jt.VERSION=g,Jt.BROWSER=Re([h,v,o]),Jt.CPU=Re([E]),Jt.DEVICE=Re([u,f,S,_,T,M,w,R,O]),Jt.ENGINE=Jt.OS=Re([h,v]),typeof a!==e?(e!=="object"&&F.exports&&(a=F.exports=Jt),a.UAParser=Jt):n==="function"&&c.amdO?(d=function(){return Jt}.call(a,c,a,F),d!==m&&(F.exports=d)):typeof p!==e&&(p.UAParser=Jt);var on=typeof p!==e&&(p.jQuery||p.Zepto);if(on&&!on.ua){var kt=new Jt;on.ua=kt.getResult(),on.ua.get=function(){return kt.getUA()},on.ua.set=function($t){kt.setUA($t);var en=kt.getResult();for(var zt in en)on.ua[zt]=en[zt]}}})(typeof window=="object"?window:this)},7229287800:F=>{F.exports=JSON.parse(`{"name":"@aws-sdk/client-chime-sdk-messaging","description":"AWS SDK for JavaScript Chime Sdk Messaging Client for Node.js, Browser and React Native","version":"3.341.0","scripts":{"build":"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo chime-sdk-messaging"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.341.0","@aws-sdk/config-resolver":"3.341.0","@aws-sdk/credential-provider-node":"3.341.0","@aws-sdk/fetch-http-handler":"3.341.0","@aws-sdk/hash-node":"3.341.0","@aws-sdk/invalid-dependency":"3.341.0","@aws-sdk/middleware-content-length":"3.341.0","@aws-sdk/middleware-endpoint":"3.341.0","@aws-sdk/middleware-host-header":"3.341.0","@aws-sdk/middleware-logger":"3.341.0","@aws-sdk/middleware-recursion-detection":"3.341.0","@aws-sdk/middleware-retry":"3.341.0","@aws-sdk/middleware-serde":"3.341.0","@aws-sdk/middleware-signing":"3.341.0","@aws-sdk/middleware-stack":"3.341.0","@aws-sdk/middleware-user-agent":"3.341.0","@aws-sdk/node-config-provider":"3.341.0","@aws-sdk/node-http-handler":"3.341.0","@aws-sdk/smithy-client":"3.341.0","@aws-sdk/types":"3.341.0","@aws-sdk/url-parser":"3.341.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.341.0","@aws-sdk/util-defaults-mode-node":"3.341.0","@aws-sdk/util-endpoints":"3.341.0","@aws-sdk/util-retry":"3.341.0","@aws-sdk/util-user-agent-browser":"3.341.0","@aws-sdk/util-user-agent-node":"3.341.0","@aws-sdk/util-utf8":"3.310.0","@smithy/protocol-http":"^1.0.1","@smithy/types":"^1.0.0","tslib":"^2.5.0","uuid":"^8.3.2"},"devDependencies":{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typedoc":"0.23.23","typescript":"~4.9.5"},"engines":{"node":">=14.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*/**"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-chime-sdk-messaging","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-chime-sdk-messaging"}}`)},1209174152:F=>{F.exports=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}')},6439564264:(F,a,c)=>{"use strict";c.d(a,{A:()=>g});var d=c(4116706745),p=c(7577999880);function m(l,r){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=void 0}s(m,"LodashWrapper"),m.prototype=(0,d.A)(p.A.prototype),m.prototype.constructor=m;const g=m},7577999880:(F,a,c)=>{"use strict";c.d(a,{A:()=>p});function d(){}s(d,"baseLodash");const p=d},3119888921:(F,a,c)=>{"use strict";c.d(a,{A:()=>p});function d(m,g){return m<g}s(d,"baseLt");const p=d},82774879:(F,a,c)=>{"use strict";c.d(a,{A:()=>r});var d=c(7269456539),p=c(14469648),m=Array.prototype,g=m.splice;function l(n,e){for(var t=n?e.length:0,i=t-1;t--;){var o=e[t];if(t==i||o!==u){var u=o;(0,p.A)(o)?g.call(n,o,1):(0,d.A)(n,o)}}return n}s(l,"basePullAt");const r=l},3046491484:(F,a,c)=>{"use strict";c.d(a,{A:()=>e});var d=c(3940990596),p=c(4059064744),m=c(522166923),g=c(6253409059),l=d.A.isFinite,r=Math.min;function n(t){var i=Math[t];return function(o,u){if(o=(0,m.A)(o),u=u==null?0:r((0,p.A)(u),292),u&&l(o)){var h=((0,g.A)(o)+"e").split("e"),S=i(h[0]+"e"+(+h[1]+u));return h=((0,g.A)(S)+"e").split("e"),+(h[0]+"e"+(+h[1]-u))}return i(o)}}s(n,"createRound");const e=n},9622574471:(F,a,c)=>{"use strict";c.d(a,{A:()=>yr});var d=c(2236568457),p=c(2524318401),m=p.A?function(Bt,Et){return p.A.set(Bt,Et),Bt}:d.A;const g=m;var l=c(4116706745),r=c(5797466484);function n(Bt){return function(){var Et=arguments;switch(Et.length){case 0:return new Bt;case 1:return new Bt(Et[0]);case 2:return new Bt(Et[0],Et[1]);case 3:return new Bt(Et[0],Et[1],Et[2]);case 4:return new Bt(Et[0],Et[1],Et[2],Et[3]);case 5:return new Bt(Et[0],Et[1],Et[2],Et[3],Et[4]);case 6:return new Bt(Et[0],Et[1],Et[2],Et[3],Et[4],Et[5]);case 7:return new Bt(Et[0],Et[1],Et[2],Et[3],Et[4],Et[5],Et[6])}var On=(0,l.A)(Bt.prototype),nn=Bt.apply(On,Et);return(0,r.A)(nn)?nn:On}}s(n,"createCtor");const e=n;var t=c(3940990596),i=1;function o(Bt,Et,On){var nn=Et&i,Bn=e(Bt);function li(){var ui=this&&this!==t.A&&this instanceof li?Bn:Bt;return ui.apply(nn?On:this,arguments)}return s(li,"wrapper"),li}s(o,"createBind");const u=o;var h=c(4629374672),S=Math.max;function f(Bt,Et,On,nn){for(var Bn=-1,li=Bt.length,ui=On.length,Gn=-1,Yn=Et.length,Ci=S(li-ui,0),Ti=Array(Yn+Ci),Un=!nn;++Gn<Yn;)Ti[Gn]=Et[Gn];for(;++Bn<ui;)(Un||Bn<li)&&(Ti[On[Bn]]=Bt[Bn]);for(;Ci--;)Ti[Gn++]=Bt[Bn++];return Ti}s(f,"composeArgs");const v=f;var E=Math.max;function _(Bt,Et,On,nn){for(var Bn=-1,li=Bt.length,ui=-1,Gn=On.length,Yn=-1,Ci=Et.length,Ti=E(li-Gn,0),Un=Array(Ti+Ci),U=!nn;++Bn<Ti;)Un[Bn]=Bt[Bn];for(var ce=Bn;++Yn<Ci;)Un[ce+Yn]=Et[Yn];for(;++ui<Gn;)(U||Bn<li)&&(Un[ce+On[ui]]=Bt[Bn++]);return Un}s(_,"composeArgsRight");const T=_;function w(Bt,Et){for(var On=Bt.length,nn=0;On--;)Bt[On]===Et&&++nn;return nn}s(w,"countHolders");const M=w;var R=c(934475406),O=c(3968459270),k=(0,O.A)(g);const A=k;var P=/\{\n\/\* \[wrapped with (.+)\] \*/,D=/,? & /;function H(Bt){var Et=Bt.match(P);return Et?Et[1].split(D):[]}s(H,"getWrapDetails");const j=H;var W=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function X(Bt,Et){var On=Et.length;if(!On)return Bt;var nn=On-1;return Et[nn]=(On>1?"& ":"")+Et[nn],Et=Et.join(On>2?", ":" "),Bt.replace(W,`{
/* [wrapped with `+Et+`] */
`)}s(X,"insertWrapDetails");const ee=X;var fe=c(5178179588),oe=c(5614497032),Oe=c(7402177396),Xe=1,ge=2,Me=8,$e=16,ze=32,nt=64,mt=128,gt=256,Pe=512,xe=[["ary",mt],["bind",Xe],["bindKey",ge],["curry",Me],["curryRight",$e],["flip",Pe],["partial",ze],["partialRight",nt],["rearg",gt]];function Ye(Bt,Et){return(0,oe.A)(xe,function(On){var nn="_."+On[0];Et&On[1]&&!(0,Oe.A)(Bt,nn)&&Bt.push(nn)}),Bt.sort()}s(Ye,"updateWrapDetails");const Ze=Ye;function Re(Bt,Et,On){var nn=Et+"";return(0,fe.A)(Bt,ee(nn,Ze(j(nn),On)))}s(Re,"setWrapToString");const Tt=Re;var rt=1,Nt=2,Wt=4,Qt=8,Ot=32,hn=64;function fi(Bt,Et,On,nn,Bn,li,ui,Gn,Yn,Ci){var Ti=Et&Qt,Un=Ti?ui:void 0,U=Ti?void 0:ui,ce=Ti?li:void 0,Fe=Ti?void 0:li;Et|=Ti?Ot:hn,Et&=~(Ti?hn:Ot),Et&Wt||(Et&=~(rt|Nt));var Ke=[Bt,Et,Bn,ce,Un,Fe,U,Gn,Yn,Ci],st=On.apply(void 0,Ke);return(0,R.A)(Bt)&&A(st,Ke),st.placeholder=nn,Tt(st,Bt,Et)}s(fi,"createRecurry");const wn=fi;var Jt=c(8708460378),on=c(4885105346),kt=c(14469648),$t=Math.min;function en(Bt,Et){for(var On=Bt.length,nn=$t(Et.length,On),Bn=(0,on.A)(Bt);nn--;){var li=Et[nn];Bt[nn]=(0,kt.A)(li,On)?Bn[li]:void 0}return Bt}s(en,"reorder");const zt=en;var Kt=c(8625772175),Q=1,Ve=2,Be=8,Je=16,ut=128,ot=512;function de(Bt,Et,On,nn,Bn,li,ui,Gn,Yn,Ci){var Ti=Et&ut,Un=Et&Q,U=Et&Ve,ce=Et&(Be|Je),Fe=Et&ot,Ke=U?void 0:e(Bt);function st(){for(var Dt=arguments.length,Vt=Array(Dt),Yt=Dt;Yt--;)Vt[Yt]=arguments[Yt];if(ce)var pn=(0,Jt.A)(st),dn=M(Vt,pn);if(nn&&(Vt=v(Vt,nn,Bn,ce)),li&&(Vt=T(Vt,li,ui,ce)),Dt-=dn,ce&&Dt<Ci){var An=(0,Kt.A)(Vt,pn);return wn(Bt,Et,de,st.placeholder,On,Vt,An,Gn,Yn,Ci-Dt)}var ci=Un?On:this,ri=U?ci[Bt]:Bt;return Dt=Vt.length,Gn?Vt=zt(Vt,Gn):Fe&&Dt>1&&Vt.reverse(),Ti&&Yn<Dt&&(Vt.length=Yn),this&&this!==t.A&&this instanceof st&&(ri=Ke||e(ri)),ri.apply(ci,Vt)}return s(st,"wrapper"),st}s(de,"createHybrid");const Ue=de;function K(Bt,Et,On){var nn=e(Bt);function Bn(){for(var li=arguments.length,ui=Array(li),Gn=li,Yn=(0,Jt.A)(Bn);Gn--;)ui[Gn]=arguments[Gn];var Ci=li<3&&ui[0]!==Yn&&ui[li-1]!==Yn?[]:(0,Kt.A)(ui,Yn);if(li-=Ci.length,li<On)return wn(Bt,Et,Ue,Bn.placeholder,void 0,ui,Ci,void 0,void 0,On-li);var Ti=this&&this!==t.A&&this instanceof Bn?nn:Bt;return(0,h.A)(Ti,this,ui)}return s(Bn,"wrapper"),Bn}s(K,"createCurry");const q=K;var Ee=1;function be(Bt,Et,On,nn){var Bn=Et&Ee,li=e(Bt);function ui(){for(var Gn=-1,Yn=arguments.length,Ci=-1,Ti=nn.length,Un=Array(Ti+Yn),U=this&&this!==t.A&&this instanceof ui?li:Bt;++Ci<Ti;)Un[Ci]=nn[Ci];for(;Yn--;)Un[Ci++]=arguments[++Gn];return(0,h.A)(U,Bn?On:this,Un)}return s(ui,"wrapper"),ui}s(be,"createPartial");const it=be;var He=c(1114224892),Qe="__lodash_placeholder__",Se=1,Ae=2,L=4,ve=8,_e=128,Ie=256,ne=Math.min;function Ft(Bt,Et){var On=Bt[1],nn=Et[1],Bn=On|nn,li=Bn<(Se|Ae|_e),ui=nn==_e&&On==ve||nn==_e&&On==Ie&&Bt[7].length<=Et[8]||nn==(_e|Ie)&&Et[7].length<=Et[8]&&On==ve;if(!(li||ui))return Bt;nn&Se&&(Bt[2]=Et[2],Bn|=On&Se?0:L);var Gn=Et[3];if(Gn){var Yn=Bt[3];Bt[3]=Yn?v(Yn,Gn,Et[4]):Gn,Bt[4]=Yn?(0,Kt.A)(Bt[3],Qe):Et[4]}return Gn=Et[5],Gn&&(Yn=Bt[5],Bt[5]=Yn?T(Yn,Gn,Et[6]):Gn,Bt[6]=Yn?(0,Kt.A)(Bt[5],Qe):Et[6]),Gn=Et[7],Gn&&(Bt[7]=Gn),nn&_e&&(Bt[8]=Bt[8]==null?Et[8]:ne(Bt[8],Et[8])),Bt[9]==null&&(Bt[9]=Et[9]),Bt[0]=Et[0],Bt[1]=Bn,Bt}s(Ft,"mergeData");const qe=Ft;var ft=c(4059064744),En="Expected a function",xt=1,Ui=2,_i=8,bn=16,zn=32,gn=64,gi=Math.max;function ai(Bt,Et,On,nn,Bn,li,ui,Gn){var Yn=Et&Ui;if(!Yn&&typeof Bt!="function")throw new TypeError(En);var Ci=nn?nn.length:0;if(Ci||(Et&=~(zn|gn),nn=Bn=void 0),ui=ui===void 0?ui:gi((0,ft.A)(ui),0),Gn=Gn===void 0?Gn:(0,ft.A)(Gn),Ci-=Bn?Bn.length:0,Et&gn){var Ti=nn,Un=Bn;nn=Bn=void 0}var U=Yn?void 0:(0,He.A)(Bt),ce=[Bt,Et,On,nn,Bn,Ti,Un,li,ui,Gn];if(U&&qe(ce,U),Bt=ce[0],Et=ce[1],On=ce[2],nn=ce[3],Bn=ce[4],Gn=ce[9]=ce[9]===void 0?Yn?0:Bt.length:gi(ce[9]-Ci,0),!Gn&&Et&(_i|bn)&&(Et&=~(_i|bn)),!Et||Et==xt)var Fe=u(Bt,Et,On);else Et==_i||Et==bn?Fe=q(Bt,Et,Gn):(Et==zn||Et==(xt|zn))&&!Bn.length?Fe=it(Bt,Et,On,nn):Fe=Ue.apply(void 0,ce);var Ke=U?g:A;return Tt(Ke(Fe,ce),Bt,Et)}s(ai,"createWrap");const yr=ai},1114224892:(F,a,c)=>{"use strict";c.d(a,{A:()=>g});var d=c(2524318401),p=c(7715417323),m=d.A?function(l){return d.A.get(l)}:p.A;const g=m},7667421386:(F,a,c)=>{"use strict";c.d(a,{A:()=>r});var d={};const p=d;var m=Object.prototype,g=m.hasOwnProperty;function l(n){for(var e=n.name+"",t=p[e],i=g.call(p,e)?t.length:0;i--;){var o=t[i],u=o.func;if(u==null||u==n)return o.name}return e}s(l,"getFuncName");const r=l},8708460378:(F,a,c)=>{"use strict";c.d(a,{A:()=>p});function d(m){var g=m;return g.placeholder}s(d,"getHolder");const p=d},934475406:(F,a,c)=>{"use strict";c.d(a,{A:()=>T});var d=c(4116706745),p=c(7577999880),m=4294967295;function g(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}s(g,"LazyWrapper"),g.prototype=(0,d.A)(p.A.prototype),g.prototype.constructor=g;const l=g;var r=c(1114224892),n=c(7667421386),e=c(6439564264),t=c(9746734072),i=c(1276945623),o=c(4885105346);function u(w){if(w instanceof l)return w.clone();var M=new e.A(w.__wrapped__,w.__chain__);return M.__actions__=(0,o.A)(w.__actions__),M.__index__=w.__index__,M.__values__=w.__values__,M}s(u,"wrapperClone");const h=u;var S=Object.prototype,f=S.hasOwnProperty;function v(w){if((0,i.A)(w)&&!(0,t.A)(w)&&!(w instanceof l)){if(w instanceof e.A)return w;if(f.call(w,"__wrapped__"))return h(w)}return new e.A(w)}s(v,"lodash"),v.prototype=p.A.prototype,v.prototype.constructor=v;const E=v;function _(w){var M=(0,n.A)(w),R=E[M];if(typeof R!="function"||!(M in l.prototype))return!1;if(w===R)return!0;var O=(0,r.A)(R);return!!O&&w===O[0]}s(_,"isLaziable");const T=_},2524318401:(F,a,c)=>{"use strict";c.d(a,{A:()=>m});var d=c(8672092338),p=d.A&&new d.A;const m=p},8625772175:(F,a,c)=>{"use strict";c.d(a,{A:()=>m});var d="__lodash_placeholder__";function p(g,l){for(var r=-1,n=g.length,e=0,t=[];++r<n;){var i=g[r];(i===l||i===d)&&(g[r]=d,t[e++]=r)}return t}s(p,"replaceHolders");const m=p},489015593:(F,a,c)=>{"use strict";c.d(a,{A:()=>S});var d=c(5614497032),p=c(8033247945),m=c(9046884403),g=c(9622574471),l=c(8708460378),r=c(8625772175),n=1,e=32,t=(0,m.A)(function(f,v,E){var _=n;if(E.length){var T=(0,r.A)(E,(0,l.A)(t));_|=e}return(0,g.A)(f,_,v,E,T)});t.placeholder={};const i=t;var o=c(316474953),u=c(3055495996),h=(0,o.A)(function(f,v){return(0,d.A)(v,function(E){E=(0,u.A)(E),(0,p.A)(f,E,i(f[E],f))}),f});const S=h},8424846741:(F,a,c)=>{"use strict";c.d(a,{A:()=>m});var d=c(9746734072);function p(){if(!arguments.length)return[];var g=arguments[0];return(0,d.A)(g)?g:[g]}s(p,"castArray");const m=p},1566461842:(F,a,c)=>{"use strict";c.d(a,{A:()=>t});var d=c(4629374672),p=c(9046884403),m=c(6295853301),g=c(5797466484);function l(i,o,u,h,S,f){return(0,g.A)(i)&&(0,g.A)(o)&&(f.set(o,i),(0,m.A)(i,o,void 0,l,f),f.delete(o)),i}s(l,"customDefaultsMerge");const r=l;var n=c(1687672245),e=(0,p.A)(function(i){return i.push(void 0,r),(0,d.A)(n.A,void 0,i)});const t=e},4360875129:(F,a,c)=>{"use strict";c.d(a,{A:()=>e});var d=c(6966908974),p=c(5684627082),m=c(8897847042),g=c(9046884403),l=c(4635518404),r=c(8786006583),n=(0,g.A)(function(t,i){var o=(0,r.A)(i);return(0,l.A)(o)&&(o=void 0),(0,l.A)(t)?(0,d.A)(t,(0,p.A)(i,1,l.A,!0),(0,m.A)(o,2)):[]});const e=n},1041273904:(F,a,c)=>{"use strict";c.d(a,{A:()=>p});function d(m){for(var g=-1,l=m==null?0:m.length,r={};++g<l;){var n=m[g];r[n[0]]=n[1]}return r}s(d,"fromPairs");const p=d},1687672245:(F,a,c)=>{"use strict";c.d(a,{A:()=>g});var d=c(6295853301),p=c(9001690186),m=(0,p.A)(function(l,r,n,e){(0,d.A)(l,r,n,e)});const g=m},5729325965:(F,a,c)=>{"use strict";c.d(a,{A:()=>l});var d=c(3743429634),p=c(3119888921),m=c(2236568457);function g(r){return r&&r.length?(0,d.A)(r,m.A,p.A):void 0}s(g,"min");const l=g},4249070636:(F,a,c)=>{"use strict";c.d(a,{A:()=>l});var d=c(3743429634),p=c(8897847042),m=c(3119888921);function g(r,n){return r&&r.length?(0,d.A)(r,(0,p.A)(n,2),m.A):void 0}s(g,"minBy");const l=g},3367239067:(F,a,c)=>{"use strict";c.d(a,{A:()=>g});var d=c(8897847042),p=c(82774879);function m(l,r){var n=[];if(!(l&&l.length))return n;var e=-1,t=[],i=l.length;for(r=(0,d.A)(r,3);++e<i;){var o=l[e];r(o,e,l)&&(n.push(o),t.push(e))}return(0,p.A)(l,t),n}s(m,"remove");const g=m},1699044291:(F,a,c)=>{"use strict";c.d(a,{A:()=>g});var d=Array.prototype,p=d.reverse;function m(l){return l==null?l:p.call(l)}s(m,"reverse");const g=m},5154341017:(F,a,c)=>{"use strict";c.d(a,{A:()=>m});var d=c(3046491484),p=(0,d.A)("round");const m=p},9867500491:(F,a,c)=>{"use strict";c.d(a,{A:()=>e});var d=c(7694407897),p=c(7049857535),m=c(4059064744),g=9007199254740991,l=4294967295,r=Math.min;function n(t,i){if(t=(0,m.A)(t),t<1||t>g)return[];var o=l,u=r(t,l);i=(0,p.A)(i),t-=l;for(var h=(0,d.A)(u,i);++o<t;)i(o);return h}s(n,"times");const e=n},9683518026:(F,a,c)=>{"use strict";c.d(a,{A:()=>m});var d=c(3881862830);function p(g,l){return l=typeof l=="function"?l:void 0,g&&g.length?(0,d.A)(g,void 0,l):[]}s(p,"uniqWith");const m=p}}]);})();

//# sourceMappingURL=https://slack.com/source-maps/bv1-13/gantry-v2-vendors-client.9b981c1177f43f2ee381.min.js.map